function Lte(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Cl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jT={exports:{}},Hg={};var b4;function Vte(){if(b4)return Hg;b4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return Hg.Fragment=e,Hg.jsx=n,Hg.jsxs=n,Hg}var x4;function Bte(){return x4||(x4=1,jT.exports=Vte()),jT.exports}var y=Bte(),zT={exports:{}},lt={};var w4;function Fte(){if(w4)return lt;w4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function m(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(U,X,te){this.props=U,this.context=X,this.refs=w,this.updater=te||b}S.prototype.isReactComponent={},S.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=S.prototype;function I(U,X,te){this.props=U,this.context=X,this.refs=w,this.updater=te||b}var R=I.prototype=new T;R.constructor=I,x(R,S.prototype),R.isPureReactComponent=!0;var O=Array.isArray;function D(){}var k={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function N(U,X,te){var K=te.ref;return{$$typeof:t,type:U,key:X,ref:K!==void 0?K:null,props:te}}function z(U,X){return N(U.type,X,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function B(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(te){return X[te]})}var j=/\/+/g;function W(U,X){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):X.toString(36)}function Q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(D,D):(U.status="pending",U.then(function(X){U.status==="pending"&&(U.status="fulfilled",U.value=X)},function(X){U.status==="pending"&&(U.status="rejected",U.reason=X)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function q(U,X,te,K,ce){var ae=typeof U;(ae==="undefined"||ae==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(ae){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case t:case e:oe=!0;break;case f:return oe=U._init,q(oe(U._payload),X,te,K,ce)}}if(oe)return ce=ce(U),oe=K===""?"."+W(U,0):K,O(ce)?(te="",oe!=null&&(te=oe.replace(j,"$&/")+"/"),q(ce,X,te,"",function(_e){return _e})):ce!=null&&(L(ce)&&(ce=z(ce,te+(ce.key==null||U&&U.key===ce.key?"":(""+ce.key).replace(j,"$&/")+"/")+oe)),X.push(ce)),1;oe=0;var he=K===""?".":K+":";if(O(U))for(var ne=0;ne<U.length;ne++)K=U[ne],ae=he+W(K,ne),oe+=q(K,X,te,ae,ce);else if(ne=m(U),typeof ne=="function")for(U=ne.call(U),ne=0;!(K=U.next()).done;)K=K.value,ae=he+W(K,ne++),oe+=q(K,X,te,ae,ce);else if(ae==="object"){if(typeof U.then=="function")return q(Q(U),X,te,K,ce);throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return oe}function Y(U,X,te){if(U==null)return U;var K=[],ce=0;return q(U,K,"","",function(ae){return X.call(te,ae,ce++)}),K}function Z(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(te){(U._status===0||U._status===-1)&&(U._status=1,U._result=te)},function(te){(U._status===0||U._status===-1)&&(U._status=2,U._result=te)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var ie=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},J={map:Y,forEach:function(U,X,te){Y(U,function(){X.apply(this,arguments)},te)},count:function(U){var X=0;return Y(U,function(){X++}),X},toArray:function(U){return Y(U,function(X){return X})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return lt.Activity=h,lt.Children=J,lt.Component=S,lt.Fragment=n,lt.Profiler=i,lt.PureComponent=I,lt.StrictMode=r,lt.Suspense=c,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,lt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return k.H.useMemoCache(U)}},lt.cache=function(U){return function(){return U.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(U,X,te){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var K=x({},U.props),ce=U.key;if(X!=null)for(ae in X.key!==void 0&&(ce=""+X.key),X)!P.call(X,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&X.ref===void 0||(K[ae]=X[ae]);var ae=arguments.length-2;if(ae===1)K.children=te;else if(1<ae){for(var oe=Array(ae),he=0;he<ae;he++)oe[he]=arguments[he+2];K.children=oe}return N(U.type,ce,K)},lt.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},lt.createElement=function(U,X,te){var K,ce={},ae=null;if(X!=null)for(K in X.key!==void 0&&(ae=""+X.key),X)P.call(X,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ce[K]=X[K]);var oe=arguments.length-2;if(oe===1)ce.children=te;else if(1<oe){for(var he=Array(oe),ne=0;ne<oe;ne++)he[ne]=arguments[ne+2];ce.children=he}if(U&&U.defaultProps)for(K in oe=U.defaultProps,oe)ce[K]===void 0&&(ce[K]=oe[K]);return N(U,ae,ce)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:o,render:U}},lt.isValidElement=L,lt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:Z}},lt.memo=function(U,X){return{$$typeof:u,type:U,compare:X===void 0?null:X}},lt.startTransition=function(U){var X=k.T,te={};k.T=te;try{var K=U(),ce=k.S;ce!==null&&ce(te,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(D,ie)}catch(ae){ie(ae)}finally{X!==null&&te.types!==null&&(X.types=te.types),k.T=X}},lt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},lt.use=function(U){return k.H.use(U)},lt.useActionState=function(U,X,te){return k.H.useActionState(U,X,te)},lt.useCallback=function(U,X){return k.H.useCallback(U,X)},lt.useContext=function(U){return k.H.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U,X){return k.H.useDeferredValue(U,X)},lt.useEffect=function(U,X){return k.H.useEffect(U,X)},lt.useEffectEvent=function(U){return k.H.useEffectEvent(U)},lt.useId=function(){return k.H.useId()},lt.useImperativeHandle=function(U,X,te){return k.H.useImperativeHandle(U,X,te)},lt.useInsertionEffect=function(U,X){return k.H.useInsertionEffect(U,X)},lt.useLayoutEffect=function(U,X){return k.H.useLayoutEffect(U,X)},lt.useMemo=function(U,X){return k.H.useMemo(U,X)},lt.useOptimistic=function(U,X){return k.H.useOptimistic(U,X)},lt.useReducer=function(U,X,te){return k.H.useReducer(U,X,te)},lt.useRef=function(U){return k.H.useRef(U)},lt.useState=function(U){return k.H.useState(U)},lt.useSyncExternalStore=function(U,X,te){return k.H.useSyncExternalStore(U,X,te)},lt.useTransition=function(){return k.H.useTransition()},lt.version="19.2.0",lt}var _4;function yp(){return _4||(_4=1,zT.exports=Fte()),zT.exports}var A=yp();const nd=Cl(A),Ute=Lte({__proto__:null,default:nd},[A]);var LT={exports:{}},Kg={},VT={exports:{}},BT={};var S4;function $te(){return S4||(S4=1,(function(t){function e(q,Y){var Z=q.length;q.push(Y);e:for(;0<Z;){var ie=Z-1>>>1,J=q[ie];if(0<i(J,Y))q[ie]=Y,q[Z]=J,Z=ie;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Y=q[0],Z=q.pop();if(Z!==Y){q[0]=Z;e:for(var ie=0,J=q.length,U=J>>>1;ie<U;){var X=2*(ie+1)-1,te=q[X],K=X+1,ce=q[K];if(0>i(te,Z))K<J&&0>i(ce,te)?(q[ie]=ce,q[K]=Z,ie=K):(q[ie]=te,q[X]=Z,ie=X);else if(K<J&&0>i(ce,Z))q[ie]=ce,q[K]=Z,ie=K;else break e}}return Y}function i(q,Y){var Z=q.sortIndex-Y.sortIndex;return Z!==0?Z:q.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,m=!1,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function R(q){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=q)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function O(q){if(x=!1,R(q),!b)if(n(c)!==null)b=!0,D||(D=!0,B());else{var Y=n(u);Y!==null&&Q(O,Y.startTime-q)}}var D=!1,k=-1,P=5,N=-1;function z(){return w?!0:!(t.unstable_now()-N<P)}function L(){if(w=!1,D){var q=t.unstable_now();N=q;var Y=!0;try{e:{b=!1,x&&(x=!1,T(k),k=-1),m=!0;var Z=g;try{t:{for(R(q),h=n(c);h!==null&&!(h.expirationTime>q&&z());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,g=h.priorityLevel;var J=ie(h.expirationTime<=q);if(q=t.unstable_now(),typeof J=="function"){h.callback=J,R(q),Y=!0;break t}h===n(c)&&r(c),R(q)}else r(c);h=n(c)}if(h!==null)Y=!0;else{var U=n(u);U!==null&&Q(O,U.startTime-q),Y=!1}}break e}finally{h=null,g=Z,m=!1}Y=void 0}}finally{Y?B():D=!1}}}var B;if(typeof I=="function")B=function(){I(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,W=j.port2;j.port1.onmessage=L,B=function(){W.postMessage(null)}}else B=function(){S(L,0)};function Q(q,Y){k=S(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Z=g;g=Y;try{return q()}finally{g=Z}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=g;g=q;try{return Y()}finally{g=Z}},t.unstable_scheduleCallback=function(q,Y,Z){var ie=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ie+Z:ie):Z=ie,q){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Z+J,q={id:f++,callback:Y,priorityLevel:q,startTime:Z,expirationTime:J,sortIndex:-1},Z>ie?(q.sortIndex=Z,e(u,q),n(c)===null&&q===n(u)&&(x?(T(k),k=-1):x=!0,Q(O,Z-ie))):(q.sortIndex=J,e(c,q),b||m||(b=!0,D||(D=!0,B()))),q},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(q){var Y=g;return function(){var Z=g;g=Y;try{return q.apply(this,arguments)}finally{g=Z}}}})(BT)),BT}var E4;function qte(){return E4||(E4=1,VT.exports=$te()),VT.exports}var FT={exports:{}},Wr={};var T4;function Gte(){if(T4)return Wr;T4=1;var t=yp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Wr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wr.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},Wr.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},Wr.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Wr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Wr.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:m}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Wr.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Wr.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Wr.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Wr.requestFormReset=function(c){r.d.r(c)},Wr.unstable_batchedUpdates=function(c,u){return c(u)},Wr.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},Wr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Wr.version="19.2.0",Wr}var A4;function o$(){if(A4)return FT.exports;A4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),FT.exports=Gte(),FT.exports}var C4;function Hte(){if(C4)return Kg;C4=1;var t=qte(),e=yp(),n=o$();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,v=d;;){var E=p.return;if(E===null)break;var C=E.alternate;if(C===null){if(v=E.return,v!==null){p=v;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===p)return c(E),l;if(C===v)return c(E),d;C=C.sibling}throw Error(r(188))}if(p.return!==v.return)p=E,v=C;else{for(var V=!1,$=E.child;$;){if($===p){V=!0,p=E,v=C;break}if($===v){V=!0,v=E,p=C;break}$=$.sibling}if(!V){for($=C.child;$;){if($===p){V=!0,p=C,v=E;break}if($===v){V=!0,v=C,p=E;break}$=$.sibling}if(!V)throw Error(r(189))}}if(p.alternate!==v)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var j=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===j?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case D:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case I:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case R:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case k:return d=l.displayName||null,d!==null?d:W(l.type)||"Memo";case P:d=l._payload,l=l._init;try{return W(l(d))}catch{}}return null}var Q=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ie=[],J=-1;function U(l){return{current:l}}function X(l){0>J||(l.current=ie[J],ie[J]=null,J--)}function te(l,d){J++,ie[J]=l.current,l.current=d}var K=U(null),ce=U(null),ae=U(null),oe=U(null);function he(l,d){switch(te(ae,d),te(ce,l),te(K,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?Uz(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=Uz(d),l=$z(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}X(K),te(K,l)}function ne(){X(K),X(ce),X(ae)}function _e(l){l.memoizedState!==null&&te(oe,l);var d=K.current,p=$z(d,l.type);d!==p&&(te(ce,l),te(K,p))}function fe(l){ce.current===l&&(X(K),X(ce)),oe.current===l&&(X(oe),Ug._currentValue=Z)}var ee,Ce;function Pe(l){if(ee===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);ee=d&&d[1]||"",Ce=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+l+Ce}var ze=!1;function Le(l,d){if(!l||ze)return"";ze=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(d){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(we){var be=we}Reflect.construct(l,[],Ae)}else{try{Ae.call()}catch(we){be=we}l.call(Ae.prototype)}}else{try{throw Error()}catch(we){be=we}(Ae=l())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(we){if(we&&be&&typeof we.stack=="string")return[we.stack,be.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=v.DetermineComponentFrameRoot(),V=C[0],$=C[1];if(V&&$){var re=V.split(`
`),ve=$.split(`
`);for(E=v=0;v<re.length&&!re[v].includes("DetermineComponentFrameRoot");)v++;for(;E<ve.length&&!ve[E].includes("DetermineComponentFrameRoot");)E++;if(v===re.length||E===ve.length)for(v=re.length-1,E=ve.length-1;1<=v&&0<=E&&re[v]!==ve[E];)E--;for(;1<=v&&0<=E;v--,E--)if(re[v]!==ve[E]){if(v!==1||E!==1)do if(v--,E--,0>E||re[v]!==ve[E]){var Ee=`
`+re[v].replace(" at new "," at ");return l.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",l.displayName)),Ee}while(1<=v&&0<=E);break}}}finally{ze=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Pe(p):""}function Be(l,d){switch(l.tag){case 26:case 27:case 5:return Pe(l.type);case 16:return Pe("Lazy");case 13:return l.child!==d&&d!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return Le(l.type,!1);case 11:return Le(l.type.render,!1);case 1:return Le(l.type,!0);case 31:return Pe("Activity");default:return""}}function Ie(l){try{var d="",p=null;do d+=Be(l,p),p=l,l=l.return;while(l);return d}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Oe=Object.prototype.hasOwnProperty,Ge=t.unstable_scheduleCallback,gt=t.unstable_cancelCallback,Ct=t.unstable_shouldYield,kt=t.unstable_requestPaint,at=t.unstable_now,wt=t.unstable_getCurrentPriorityLevel,ct=t.unstable_ImmediatePriority,gn=t.unstable_UserBlockingPriority,Kt=t.unstable_NormalPriority,Mr=t.unstable_LowPriority,Xa=t.unstable_IdlePriority,Qa=t.log,Za=t.unstable_setDisableYieldValue,si=null,mn=null;function vn(l){if(typeof Qa=="function"&&Za(l),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(si,l)}catch{}}var Mt=Math.clz32?Math.clz32:zl,ks=Math.log,jl=Math.LN2;function zl(l){return l>>>=0,l===0?32:31-(ks(l)/jl|0)|0}var vt=256,Tn=262144,An=4194304;function Vi(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function pa(l,d,p){var v=l.pendingLanes;if(v===0)return 0;var E=0,C=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var $=v&134217727;return $!==0?(v=$&~C,v!==0?E=Vi(v):(V&=$,V!==0?E=Vi(V):p||(p=$&~l,p!==0&&(E=Vi(p))))):($=v&~C,$!==0?E=Vi($):V!==0?E=Vi(V):p||(p=v&~l,p!==0&&(E=Vi(p)))),E===0?0:d!==0&&d!==E&&(d&C)===0&&(C=E&-E,p=d&-d,C>=p||C===32&&(p&4194048)!==0)?d:E}function oi(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function BS(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(){var l=An;return An<<=1,(An&62914560)===0&&(An=4194304),l}function Ps(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function uu(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function FS(l,d,p,v,E,C){var V=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var $=l.entanglements,re=l.expirationTimes,ve=l.hiddenUpdates;for(p=V&~p;0<p;){var Ee=31-Mt(p),Ae=1<<Ee;$[Ee]=0,re[Ee]=-1;var be=ve[Ee];if(be!==null)for(ve[Ee]=null,Ee=0;Ee<be.length;Ee++){var we=be[Ee];we!==null&&(we.lane&=-536870913)}p&=~Ae}v!==0&&du(l,v,0),C!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=C&~(V&~d))}function du(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var v=31-Mt(d);l.entangledLanes|=d,l.entanglements[v]=l.entanglements[v]|1073741824|p&261930}function Kp(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var v=31-Mt(p),E=1<<v;E&d|l[v]&d&&(l[v]|=d),p&=~E}}function Wp(l,d){var p=d&-d;return p=(p&42)!==0?1:fu(p),(p&(l.suspendedLanes|d))!==0?0:p}function fu(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ao(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ey(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:f4(l.type))}function Ja(l,d){var p=Y.p;try{return Y.p=l,d()}finally{Y.p=p}}var es=Math.random().toString(36).slice(2),Wn="__reactFiber$"+es,Er="__reactProps$"+es,Ds="__reactContainer$"+es,nf="__reactEvents$"+es,US="__reactListeners$"+es,ty="__reactHandles$"+es,ny="__reactResources$"+es,Os="__reactMarker$"+es;function rf(l){delete l[Wn],delete l[Er],delete l[nf],delete l[US],delete l[ty]}function Rs(l){var d=l[Wn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Ds]||p[Wn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=Xz(l);l!==null;){if(p=l[Wn])return p;l=Xz(l)}return d}l=p,p=l.parentNode}return null}function ga(l){if(l=l[Wn]||l[Ds]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Bi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Ns(l){var d=l[ny];return d||(d=l[ny]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Yn(l){l[Os]=!0}var Yp=new Set,Xp={};function Ms(l,d){js(l,d),js(l+"Capture",d)}function js(l,d){for(Xp[l]=d,l=0;l<d.length;l++)Yp.add(d[l])}var Qp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zp={},Jp={};function ry(l){return Oe.call(Jp,l)?!0:Oe.call(Zp,l)?!1:Qp.test(l)?Jp[l]=!0:(Zp[l]=!0,!1)}function af(l,d,p){if(ry(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var v=d.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Fi(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Xn(l,d,p,v){if(v===null)l.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+v)}}function Tr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ll(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function eg(l,d,p){var v=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var E=v.get,C=v.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(V){p=""+V,C.call(this,V)}}),Object.defineProperty(l,d,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(V){p=""+V},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Bt(l){if(!l._valueTracker){var d=Ll(l)?"checked":"value";l._valueTracker=eg(l,d,""+l[d])}}function hu(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),v="";return l&&(v=Ll(l)?l.checked?"true":"false":l.value),l=v,l!==p?(d.setValue(l),!0):!1}function zs(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var pu=/[\n"\\]/g;function xi(l){return l.replace(pu,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function sf(l,d,p,v,E,C,V,$){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),d!=null?V==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Tr(d)):l.value!==""+Tr(d)&&(l.value=""+Tr(d)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),d!=null?tg(l,V,Tr(d)):p!=null?tg(l,V,Tr(p)):v!=null&&l.removeAttribute("value"),E==null&&C!=null&&(l.defaultChecked=!!C),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?l.name=""+Tr($):l.removeAttribute("name")}function iy(l,d,p,v,E,C,V,$){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(l.type=C),d!=null||p!=null){if(!(C!=="submit"&&C!=="reset"||d!=null)){Bt(l);return}p=p!=null?""+Tr(p):"",d=d!=null?""+Tr(d):p,$||d===l.value||(l.value=d),l.defaultValue=d}v=v??E,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=$?l.checked:!!v,l.defaultChecked=!!v,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Bt(l)}function tg(l,d,p){d==="number"&&zs(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Vl(l,d,p,v){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&v&&(l[p].defaultSelected=!0)}else{for(p=""+Tr(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,v&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function ay(l,d,p){if(d!=null&&(d=""+Tr(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Tr(p):""}function Bl(l,d,p,v){if(d==null){if(v!=null){if(p!=null)throw Error(r(92));if(Q(v)){if(1<v.length)throw Error(r(93));v=v[0]}p=v}p==null&&(p=""),d=p}p=Tr(d),l.defaultValue=p,v=l.textContent,v===p&&v!==""&&v!==null&&(l.value=v),Bt(l)}function wi(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var sy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ng(l,d,p){var v=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":v?l.setProperty(d,p):typeof p!="number"||p===0||sy.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function rg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||d!=null&&d.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var E in d)v=d[E],d.hasOwnProperty(E)&&p[E]!==v&&ng(l,E,v)}else for(var C in d)d.hasOwnProperty(C)&&ng(l,C,d[C])}function of(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lf(l){return Fl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ts(){}var ig=null;function ma(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ul=null,Ls=null;function gu(l){var d=ga(l);if(d&&(l=d.stateNode)){var p=l[Er]||null;e:switch(l=d.stateNode,d.type){case"input":if(sf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+xi(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var v=p[d];if(v!==l&&v.form===l.form){var E=v[Er]||null;if(!E)throw Error(r(90));sf(v,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)v=p[d],v.form===l.form&&hu(v)}break e;case"textarea":ay(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Vl(l,!!p.multiple,d,!1)}}}var cf=!1;function $l(l,d,p){if(cf)return l(d,p);cf=!0;try{var v=l(d);return v}finally{if(cf=!1,(Ul!==null||Ls!==null)&&(eb(),Ul&&(d=Ul,l=Ls,Ls=Ul=null,gu(d),l)))for(d=0;d<l.length;d++)gu(l[d])}}function ns(l,d){var p=l.stateNode;if(p===null)return null;var v=p[Er]||null;if(v===null)return null;p=v[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mu=!1;if(va)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){mu=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{mu=!1}var Vs=null,ag=null,vu=null;function sg(){if(vu)return vu;var l,d=ag,p=d.length,v,E="value"in Vs?Vs.value:Vs.textContent,C=E.length;for(l=0;l<p&&d[l]===E[l];l++);var V=p-l;for(v=1;v<=V&&d[p-v]===E[C-v];v++);return vu=E.slice(l,1<v?1-v:void 0)}function yu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Co(){return!0}function rs(){return!1}function jr(l){function d(p,v,E,C,V){this._reactName=p,this._targetInst=E,this.type=v,this.nativeEvent=C,this.target=V,this.currentTarget=null;for(var $ in l)l.hasOwnProperty($)&&(p=l[$],this[$]=p?p(C):C[$]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Co:rs,this.isPropagationStopped=rs,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),d}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=jr(Io),ql=h({},Io,{view:0,detail:0}),og=jr(ql),Gl,uf,Fs,df=h({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Fs&&(Fs&&l.type==="mousemove"?(Gl=l.screenX-Fs.screenX,uf=l.screenY-Fs.screenY):uf=Gl=0,Fs=l),Gl)},movementY:function(l){return"movementY"in l?l.movementY:uf}}),lg=jr(df),bu=h({},df,{dataTransfer:0}),ly=jr(bu),cy=h({},ql,{relatedTarget:0}),xu=jr(cy),cg=h({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),uy=jr(cg),ff=h({},Io,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),dy=jr(ff),fy=h({},Io,{data:0}),Us=jr(fy),hy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},py={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function my(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=gy[l])?!!d[l]:!1}function Hl(){return my}var li=h({},ql,{key:function(l){if(l.key){var d=hy[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=yu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?py[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(l){return l.type==="keypress"?yu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?yu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),vy=jr(li),yy=h({},df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ko=jr(yy),_=h({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),M=jr(_),F=h({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=jr(F),ge=h({},df,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=jr(ge),Me=h({},Io,{newState:0,oldState:0}),ut=jr(Me),Bn=[9,13,27,32],jt=va&&"CompositionEvent"in window,yn=null;va&&"documentMode"in document&&(yn=document.documentMode);var ya=va&&"TextEvent"in window&&!yn,$s=va&&(!jt||yn&&8<yn&&11>=yn),is=" ",as=!1;function wu(l,d){switch(l){case"keyup":return Bn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hf(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var pf=!1;function lee(l,d){switch(l){case"compositionend":return hf(d);case"keypress":return d.which!==32?null:(as=!0,is);case"textInput":return l=d.data,l===is&&as?null:l;default:return null}}function cee(l,d){if(pf)return l==="compositionend"||!jt&&wu(l,d)?(l=sg(),vu=ag=Vs=null,pf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return $s&&d.locale!=="ko"?null:d.data;default:return null}}var uee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J2(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!uee[l.type]:d==="textarea"}function eM(l,d,p,v){Ul?Ls?Ls.push(v):Ls=[v]:Ul=v,d=ob(d,"onChange"),0<d.length&&(p=new Bs("onChange","change",null,p,v),l.push({event:p,listeners:d}))}var ug=null,dg=null;function dee(l){jz(l,0)}function by(l){var d=Bi(l);if(hu(d))return l}function tM(l,d){if(l==="change")return d}var nM=!1;if(va){var $S;if(va){var qS="oninput"in document;if(!qS){var rM=document.createElement("div");rM.setAttribute("oninput","return;"),qS=typeof rM.oninput=="function"}$S=qS}else $S=!1;nM=$S&&(!document.documentMode||9<document.documentMode)}function iM(){ug&&(ug.detachEvent("onpropertychange",aM),dg=ug=null)}function aM(l){if(l.propertyName==="value"&&by(dg)){var d=[];eM(d,dg,l,ma(l)),$l(dee,d)}}function fee(l,d,p){l==="focusin"?(iM(),ug=d,dg=p,ug.attachEvent("onpropertychange",aM)):l==="focusout"&&iM()}function hee(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return by(dg)}function pee(l,d){if(l==="click")return by(d)}function gee(l,d){if(l==="input"||l==="change")return by(d)}function mee(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ui=typeof Object.is=="function"?Object.is:mee;function fg(l,d){if(Ui(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),v=Object.keys(d);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var E=p[v];if(!Oe.call(d,E)||!Ui(l[E],d[E]))return!1}return!0}function sM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function oM(l,d){var p=sM(l);l=0;for(var v;p;){if(p.nodeType===3){if(v=l+p.textContent.length,l<=d&&v>=d)return{node:p,offset:d-l};l=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=sM(p)}}function lM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?lM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function cM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=zs(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=zs(l.document)}return d}function GS(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var vee=va&&"documentMode"in document&&11>=document.documentMode,gf=null,HS=null,hg=null,KS=!1;function uM(l,d,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;KS||gf==null||gf!==zs(v)||(v=gf,"selectionStart"in v&&GS(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),hg&&fg(hg,v)||(hg=v,v=ob(HS,"onSelect"),0<v.length&&(d=new Bs("onSelect","select",null,d,p),l.push({event:d,listeners:v}),d.target=gf)))}function _u(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var mf={animationend:_u("Animation","AnimationEnd"),animationiteration:_u("Animation","AnimationIteration"),animationstart:_u("Animation","AnimationStart"),transitionrun:_u("Transition","TransitionRun"),transitionstart:_u("Transition","TransitionStart"),transitioncancel:_u("Transition","TransitionCancel"),transitionend:_u("Transition","TransitionEnd")},WS={},dM={};va&&(dM=document.createElement("div").style,"AnimationEvent"in window||(delete mf.animationend.animation,delete mf.animationiteration.animation,delete mf.animationstart.animation),"TransitionEvent"in window||delete mf.transitionend.transition);function Su(l){if(WS[l])return WS[l];if(!mf[l])return l;var d=mf[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in dM)return WS[l]=d[p];return l}var fM=Su("animationend"),hM=Su("animationiteration"),pM=Su("animationstart"),yee=Su("transitionrun"),bee=Su("transitionstart"),xee=Su("transitioncancel"),gM=Su("transitionend"),mM=new Map,YS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");YS.push("scrollEnd");function ss(l,d){mM.set(l,d),Ms(d,[l])}var xy=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},ba=[],vf=0,XS=0;function wy(){for(var l=vf,d=XS=vf=0;d<l;){var p=ba[d];ba[d++]=null;var v=ba[d];ba[d++]=null;var E=ba[d];ba[d++]=null;var C=ba[d];if(ba[d++]=null,v!==null&&E!==null){var V=v.pending;V===null?E.next=E:(E.next=V.next,V.next=E),v.pending=E}C!==0&&vM(p,E,C)}}function _y(l,d,p,v){ba[vf++]=l,ba[vf++]=d,ba[vf++]=p,ba[vf++]=v,XS|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function QS(l,d,p,v){return _y(l,d,p,v),Sy(l)}function Eu(l,d){return _y(l,null,null,d),Sy(l)}function vM(l,d,p){l.lanes|=p;var v=l.alternate;v!==null&&(v.lanes|=p);for(var E=!1,C=l.return;C!==null;)C.childLanes|=p,v=C.alternate,v!==null&&(v.childLanes|=p),C.tag===22&&(l=C.stateNode,l===null||l._visibility&1||(E=!0)),l=C,C=C.return;return l.tag===3?(C=l.stateNode,E&&d!==null&&(E=31-Mt(p),l=C.hiddenUpdates,v=l[E],v===null?l[E]=[d]:v.push(d),d.lane=p|536870912),C):null}function Sy(l){if(50<Mg)throw Mg=0,sT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var yf={};function wee(l,d,p,v){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(l,d,p,v){return new wee(l,d,p,v)}function ZS(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Po(l,d){var p=l.alternate;return p===null?(p=$i(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function yM(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Ey(l,d,p,v,E,C){var V=0;if(v=l,typeof l=="function")ZS(l)&&(V=1);else if(typeof l=="string")V=Ate(l,p,K.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=$i(31,p,d,E),l.elementType=N,l.lanes=C,l;case x:return Tu(p.children,E,C,d);case w:V=8,E|=24;break;case S:return l=$i(12,p,d,E|2),l.elementType=S,l.lanes=C,l;case O:return l=$i(13,p,d,E),l.elementType=O,l.lanes=C,l;case D:return l=$i(19,p,d,E),l.elementType=D,l.lanes=C,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:V=10;break e;case T:V=9;break e;case R:V=11;break e;case k:V=14;break e;case P:V=16,v=null;break e}V=29,p=Error(r(130,l===null?"null":typeof l,"")),v=null}return d=$i(V,p,d,E),d.elementType=l,d.type=v,d.lanes=C,d}function Tu(l,d,p,v){return l=$i(7,l,v,d),l.lanes=p,l}function JS(l,d,p){return l=$i(6,l,null,d),l.lanes=p,l}function bM(l){var d=$i(18,null,null,0);return d.stateNode=l,d}function eE(l,d,p){return d=$i(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var xM=new WeakMap;function xa(l,d){if(typeof l=="object"&&l!==null){var p=xM.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Ie(d)},xM.set(l,d),d)}return{value:l,source:d,stack:Ie(d)}}var bf=[],xf=0,Ty=null,pg=0,wa=[],_a=0,Kl=null,qs=1,Gs="";function Do(l,d){bf[xf++]=pg,bf[xf++]=Ty,Ty=l,pg=d}function wM(l,d,p){wa[_a++]=qs,wa[_a++]=Gs,wa[_a++]=Kl,Kl=l;var v=qs;l=Gs;var E=32-Mt(v)-1;v&=~(1<<E),p+=1;var C=32-Mt(d)+E;if(30<C){var V=E-E%5;C=(v&(1<<V)-1).toString(32),v>>=V,E-=V,qs=1<<32-Mt(d)+E|p<<E|v,Gs=C+l}else qs=1<<C|p<<E|v,Gs=l}function tE(l){l.return!==null&&(Do(l,1),wM(l,1,0))}function nE(l){for(;l===Ty;)Ty=bf[--xf],bf[xf]=null,pg=bf[--xf],bf[xf]=null;for(;l===Kl;)Kl=wa[--_a],wa[_a]=null,Gs=wa[--_a],wa[_a]=null,qs=wa[--_a],wa[_a]=null}function _M(l,d){wa[_a++]=qs,wa[_a++]=Gs,wa[_a++]=Kl,qs=d.id,Gs=d.overflow,Kl=l}var zr=null,cn=null,At=!1,Wl=null,Sa=!1,rE=Error(r(519));function Yl(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gg(xa(d,l)),rE}function SM(l){var d=l.stateNode,p=l.type,v=l.memoizedProps;switch(d[Wn]=l,d[Er]=v,p){case"dialog":bt("cancel",d),bt("close",d);break;case"iframe":case"object":case"embed":bt("load",d);break;case"video":case"audio":for(p=0;p<zg.length;p++)bt(zg[p],d);break;case"source":bt("error",d);break;case"img":case"image":case"link":bt("error",d),bt("load",d);break;case"details":bt("toggle",d);break;case"input":bt("invalid",d),iy(d,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":bt("invalid",d);break;case"textarea":bt("invalid",d),Bl(d,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||v.suppressHydrationWarning===!0||Bz(d.textContent,p)?(v.popover!=null&&(bt("beforetoggle",d),bt("toggle",d)),v.onScroll!=null&&bt("scroll",d),v.onScrollEnd!=null&&bt("scrollend",d),v.onClick!=null&&(d.onclick=ts),d=!0):d=!1,d||Yl(l,!0)}function EM(l){for(zr=l.return;zr;)switch(zr.tag){case 5:case 31:case 13:Sa=!1;return;case 27:case 3:Sa=!0;return;default:zr=zr.return}}function wf(l){if(l!==zr)return!1;if(!At)return EM(l),At=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||wT(l.type,l.memoizedProps)),p=!p),p&&cn&&Yl(l),EM(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));cn=Yz(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));cn=Yz(l)}else d===27?(d=cn,cc(l.type)?(l=AT,AT=null,cn=l):cn=d):cn=zr?Ta(l.stateNode.nextSibling):null;return!0}function Au(){cn=zr=null,At=!1}function iE(){var l=Wl;return l!==null&&(Ti===null?Ti=l:Ti.push.apply(Ti,l),Wl=null),l}function gg(l){Wl===null?Wl=[l]:Wl.push(l)}var aE=U(null),Cu=null,Oo=null;function Xl(l,d,p){te(aE,d._currentValue),d._currentValue=p}function Ro(l){l._currentValue=aE.current,X(aE)}function sE(l,d,p){for(;l!==null;){var v=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,v!==null&&(v.childLanes|=d)):v!==null&&(v.childLanes&d)!==d&&(v.childLanes|=d),l===p)break;l=l.return}}function oE(l,d,p,v){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var C=E.dependencies;if(C!==null){var V=E.child;C=C.firstContext;e:for(;C!==null;){var $=C;C=E;for(var re=0;re<d.length;re++)if($.context===d[re]){C.lanes|=p,$=C.alternate,$!==null&&($.lanes|=p),sE(C.return,p,l),v||(V=null);break e}C=$.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(r(341));V.lanes|=p,C=V.alternate,C!==null&&(C.lanes|=p),sE(V,p,l),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===l){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function _f(l,d,p,v){l=null;for(var E=d,C=!1;E!==null;){if(!C){if((E.flags&524288)!==0)C=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var $=E.type;Ui(E.pendingProps.value,V.value)||(l!==null?l.push($):l=[$])}}else if(E===oe.current){if(V=E.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(Ug):l=[Ug])}E=E.return}l!==null&&oE(d,l,p,v),d.flags|=262144}function Ay(l){for(l=l.firstContext;l!==null;){if(!Ui(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Iu(l){Cu=l,Oo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Lr(l){return TM(Cu,l)}function Cy(l,d){return Cu===null&&Iu(l),TM(l,d)}function TM(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Oo===null){if(l===null)throw Error(r(308));Oo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Oo=Oo.next=d;return p}var _ee=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,v){l.push(v)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},See=t.unstable_scheduleCallback,Eee=t.unstable_NormalPriority,Qn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lE(){return{controller:new _ee,data:new Map,refCount:0}}function mg(l){l.refCount--,l.refCount===0&&See(Eee,function(){l.controller.abort()})}var vg=null,cE=0,Sf=0,Ef=null;function Tee(l,d){if(vg===null){var p=vg=[];cE=0,Sf=fT(),Ef={status:"pending",value:void 0,then:function(v){p.push(v)}}}return cE++,d.then(AM,AM),d}function AM(){if(--cE===0&&vg!==null){Ef!==null&&(Ef.status="fulfilled");var l=vg;vg=null,Sf=0,Ef=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Aee(l,d){var p=[],v={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){v.status="fulfilled",v.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(v.status="rejected",v.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),v}var CM=q.S;q.S=function(l,d){uz=at(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Tee(l,d),CM!==null&&CM(l,d)};var ku=U(null);function uE(){var l=ku.current;return l!==null?l:rn.pooledCache}function Iy(l,d){d===null?te(ku,ku.current):te(ku,d.pool)}function IM(){var l=uE();return l===null?null:{parent:Qn._currentValue,pool:l}}var Tf=Error(r(460)),dE=Error(r(474)),ky=Error(r(542)),Py={then:function(){}};function kM(l){return l=l.status,l==="fulfilled"||l==="rejected"}function PM(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(ts,ts),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,OM(l),l;default:if(typeof d.status=="string")d.then(ts,ts);else{if(l=rn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(v){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=v}},function(v){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=v}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,OM(l),l}throw Du=d,Tf}}function Pu(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Du=p,Tf):p}}var Du=null;function DM(){if(Du===null)throw Error(r(459));var l=Du;return Du=null,l}function OM(l){if(l===Tf||l===ky)throw Error(r(483))}var Af=null,yg=0;function Dy(l){var d=yg;return yg+=1,Af===null&&(Af=[]),PM(Af,l,d)}function bg(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Oy(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function RM(l){function d(de,ue){if(l){var me=de.deletions;me===null?(de.deletions=[ue],de.flags|=16):me.push(ue)}}function p(de,ue){if(!l)return null;for(;ue!==null;)d(de,ue),ue=ue.sibling;return null}function v(de){for(var ue=new Map;de!==null;)de.key!==null?ue.set(de.key,de):ue.set(de.index,de),de=de.sibling;return ue}function E(de,ue){return de=Po(de,ue),de.index=0,de.sibling=null,de}function C(de,ue,me){return de.index=me,l?(me=de.alternate,me!==null?(me=me.index,me<ue?(de.flags|=67108866,ue):me):(de.flags|=67108866,ue)):(de.flags|=1048576,ue)}function V(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function $(de,ue,me,Te){return ue===null||ue.tag!==6?(ue=JS(me,de.mode,Te),ue.return=de,ue):(ue=E(ue,me),ue.return=de,ue)}function re(de,ue,me,Te){var Qe=me.type;return Qe===x?Ee(de,ue,me.props.children,Te,me.key):ue!==null&&(ue.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===P&&Pu(Qe)===ue.type)?(ue=E(ue,me.props),bg(ue,me),ue.return=de,ue):(ue=Ey(me.type,me.key,me.props,null,de.mode,Te),bg(ue,me),ue.return=de,ue)}function ve(de,ue,me,Te){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==me.containerInfo||ue.stateNode.implementation!==me.implementation?(ue=eE(me,de.mode,Te),ue.return=de,ue):(ue=E(ue,me.children||[]),ue.return=de,ue)}function Ee(de,ue,me,Te,Qe){return ue===null||ue.tag!==7?(ue=Tu(me,de.mode,Te,Qe),ue.return=de,ue):(ue=E(ue,me),ue.return=de,ue)}function Ae(de,ue,me){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=JS(""+ue,de.mode,me),ue.return=de,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case m:return me=Ey(ue.type,ue.key,ue.props,null,de.mode,me),bg(me,ue),me.return=de,me;case b:return ue=eE(ue,de.mode,me),ue.return=de,ue;case P:return ue=Pu(ue),Ae(de,ue,me)}if(Q(ue)||B(ue))return ue=Tu(ue,de.mode,me,null),ue.return=de,ue;if(typeof ue.then=="function")return Ae(de,Dy(ue),me);if(ue.$$typeof===I)return Ae(de,Cy(de,ue),me);Oy(de,ue)}return null}function be(de,ue,me,Te){var Qe=ue!==null?ue.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Qe!==null?null:$(de,ue,""+me,Te);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case m:return me.key===Qe?re(de,ue,me,Te):null;case b:return me.key===Qe?ve(de,ue,me,Te):null;case P:return me=Pu(me),be(de,ue,me,Te)}if(Q(me)||B(me))return Qe!==null?null:Ee(de,ue,me,Te,null);if(typeof me.then=="function")return be(de,ue,Dy(me),Te);if(me.$$typeof===I)return be(de,ue,Cy(de,me),Te);Oy(de,me)}return null}function we(de,ue,me,Te,Qe){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return de=de.get(me)||null,$(ue,de,""+Te,Qe);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case m:return de=de.get(Te.key===null?me:Te.key)||null,re(ue,de,Te,Qe);case b:return de=de.get(Te.key===null?me:Te.key)||null,ve(ue,de,Te,Qe);case P:return Te=Pu(Te),we(de,ue,me,Te,Qe)}if(Q(Te)||B(Te))return de=de.get(me)||null,Ee(ue,de,Te,Qe,null);if(typeof Te.then=="function")return we(de,ue,me,Dy(Te),Qe);if(Te.$$typeof===I)return we(de,ue,me,Cy(ue,Te),Qe);Oy(ue,Te)}return null}function $e(de,ue,me,Te){for(var Qe=null,Dt=null,Ke=ue,ht=ue=0,St=null;Ke!==null&&ht<me.length;ht++){Ke.index>ht?(St=Ke,Ke=null):St=Ke.sibling;var Ot=be(de,Ke,me[ht],Te);if(Ot===null){Ke===null&&(Ke=St);break}l&&Ke&&Ot.alternate===null&&d(de,Ke),ue=C(Ot,ue,ht),Dt===null?Qe=Ot:Dt.sibling=Ot,Dt=Ot,Ke=St}if(ht===me.length)return p(de,Ke),At&&Do(de,ht),Qe;if(Ke===null){for(;ht<me.length;ht++)Ke=Ae(de,me[ht],Te),Ke!==null&&(ue=C(Ke,ue,ht),Dt===null?Qe=Ke:Dt.sibling=Ke,Dt=Ke);return At&&Do(de,ht),Qe}for(Ke=v(Ke);ht<me.length;ht++)St=we(Ke,de,ht,me[ht],Te),St!==null&&(l&&St.alternate!==null&&Ke.delete(St.key===null?ht:St.key),ue=C(St,ue,ht),Dt===null?Qe=St:Dt.sibling=St,Dt=St);return l&&Ke.forEach(function(pc){return d(de,pc)}),At&&Do(de,ht),Qe}function nt(de,ue,me,Te){if(me==null)throw Error(r(151));for(var Qe=null,Dt=null,Ke=ue,ht=ue=0,St=null,Ot=me.next();Ke!==null&&!Ot.done;ht++,Ot=me.next()){Ke.index>ht?(St=Ke,Ke=null):St=Ke.sibling;var pc=be(de,Ke,Ot.value,Te);if(pc===null){Ke===null&&(Ke=St);break}l&&Ke&&pc.alternate===null&&d(de,Ke),ue=C(pc,ue,ht),Dt===null?Qe=pc:Dt.sibling=pc,Dt=pc,Ke=St}if(Ot.done)return p(de,Ke),At&&Do(de,ht),Qe;if(Ke===null){for(;!Ot.done;ht++,Ot=me.next())Ot=Ae(de,Ot.value,Te),Ot!==null&&(ue=C(Ot,ue,ht),Dt===null?Qe=Ot:Dt.sibling=Ot,Dt=Ot);return At&&Do(de,ht),Qe}for(Ke=v(Ke);!Ot.done;ht++,Ot=me.next())Ot=we(Ke,de,ht,Ot.value,Te),Ot!==null&&(l&&Ot.alternate!==null&&Ke.delete(Ot.key===null?ht:Ot.key),ue=C(Ot,ue,ht),Dt===null?Qe=Ot:Dt.sibling=Ot,Dt=Ot);return l&&Ke.forEach(function(zte){return d(de,zte)}),At&&Do(de,ht),Qe}function Qt(de,ue,me,Te){if(typeof me=="object"&&me!==null&&me.type===x&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case m:e:{for(var Qe=me.key;ue!==null;){if(ue.key===Qe){if(Qe=me.type,Qe===x){if(ue.tag===7){p(de,ue.sibling),Te=E(ue,me.props.children),Te.return=de,de=Te;break e}}else if(ue.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===P&&Pu(Qe)===ue.type){p(de,ue.sibling),Te=E(ue,me.props),bg(Te,me),Te.return=de,de=Te;break e}p(de,ue);break}else d(de,ue);ue=ue.sibling}me.type===x?(Te=Tu(me.props.children,de.mode,Te,me.key),Te.return=de,de=Te):(Te=Ey(me.type,me.key,me.props,null,de.mode,Te),bg(Te,me),Te.return=de,de=Te)}return V(de);case b:e:{for(Qe=me.key;ue!==null;){if(ue.key===Qe)if(ue.tag===4&&ue.stateNode.containerInfo===me.containerInfo&&ue.stateNode.implementation===me.implementation){p(de,ue.sibling),Te=E(ue,me.children||[]),Te.return=de,de=Te;break e}else{p(de,ue);break}else d(de,ue);ue=ue.sibling}Te=eE(me,de.mode,Te),Te.return=de,de=Te}return V(de);case P:return me=Pu(me),Qt(de,ue,me,Te)}if(Q(me))return $e(de,ue,me,Te);if(B(me)){if(Qe=B(me),typeof Qe!="function")throw Error(r(150));return me=Qe.call(me),nt(de,ue,me,Te)}if(typeof me.then=="function")return Qt(de,ue,Dy(me),Te);if(me.$$typeof===I)return Qt(de,ue,Cy(de,me),Te);Oy(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ue!==null&&ue.tag===6?(p(de,ue.sibling),Te=E(ue,me),Te.return=de,de=Te):(p(de,ue),Te=JS(me,de.mode,Te),Te.return=de,de=Te),V(de)):p(de,ue)}return function(de,ue,me,Te){try{yg=0;var Qe=Qt(de,ue,me,Te);return Af=null,Qe}catch(Ke){if(Ke===Tf||Ke===ky)throw Ke;var Dt=$i(29,Ke,null,de.mode);return Dt.lanes=Te,Dt.return=de,Dt}finally{}}}var Ou=RM(!0),NM=RM(!1),Ql=!1;function fE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Zl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Jl(l,d,p){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(zt&2)!==0){var E=v.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),v.pending=d,d=Sy(l),vM(l,null,p),d}return _y(l,v,d,p),Sy(l)}function xg(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var v=d.lanes;v&=l.pendingLanes,p|=v,d.lanes=p,Kp(l,p)}}function pE(l,d){var p=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var E=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var V={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?E=C=V:C=C.next=V,p=p.next}while(p!==null);C===null?E=C=d:C=C.next=d}else E=C=d;p={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:v.shared,callbacks:v.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var gE=!1;function wg(){if(gE){var l=Ef;if(l!==null)throw l}}function _g(l,d,p,v){gE=!1;var E=l.updateQueue;Ql=!1;var C=E.firstBaseUpdate,V=E.lastBaseUpdate,$=E.shared.pending;if($!==null){E.shared.pending=null;var re=$,ve=re.next;re.next=null,V===null?C=ve:V.next=ve,V=re;var Ee=l.alternate;Ee!==null&&(Ee=Ee.updateQueue,$=Ee.lastBaseUpdate,$!==V&&($===null?Ee.firstBaseUpdate=ve:$.next=ve,Ee.lastBaseUpdate=re))}if(C!==null){var Ae=E.baseState;V=0,Ee=ve=re=null,$=C;do{var be=$.lane&-536870913,we=be!==$.lane;if(we?(_t&be)===be:(v&be)===be){be!==0&&be===Sf&&(gE=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var $e=l,nt=$;be=d;var Qt=p;switch(nt.tag){case 1:if($e=nt.payload,typeof $e=="function"){Ae=$e.call(Qt,Ae,be);break e}Ae=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=nt.payload,be=typeof $e=="function"?$e.call(Qt,Ae,be):$e,be==null)break e;Ae=h({},Ae,be);break e;case 2:Ql=!0}}be=$.callback,be!==null&&(l.flags|=64,we&&(l.flags|=8192),we=E.callbacks,we===null?E.callbacks=[be]:we.push(be))}else we={lane:be,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ee===null?(ve=Ee=we,re=Ae):Ee=Ee.next=we,V|=be;if($=$.next,$===null){if($=E.shared.pending,$===null)break;we=$,$=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);Ee===null&&(re=Ae),E.baseState=re,E.firstBaseUpdate=ve,E.lastBaseUpdate=Ee,C===null&&(E.shared.lanes=0),ic|=V,l.lanes=V,l.memoizedState=Ae}}function MM(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function jM(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)MM(p[l],d)}var Cf=U(null),Ry=U(0);function zM(l,d){l=Uo,te(Ry,l),te(Cf,d),Uo=l|d.baseLanes}function mE(){te(Ry,Uo),te(Cf,Cf.current)}function vE(){Uo=Ry.current,X(Cf),X(Ry)}var qi=U(null),Ea=null;function ec(l){var d=l.alternate;te(Fn,Fn.current&1),te(qi,l),Ea===null&&(d===null||Cf.current!==null||d.memoizedState!==null)&&(Ea=l)}function yE(l){te(Fn,Fn.current),te(qi,l),Ea===null&&(Ea=l)}function LM(l){l.tag===22?(te(Fn,Fn.current),te(qi,l),Ea===null&&(Ea=l)):tc()}function tc(){te(Fn,Fn.current),te(qi,qi.current)}function Gi(l){X(qi),Ea===l&&(Ea=null),X(Fn)}var Fn=U(0);function Ny(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||ET(p)||TT(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var No=0,dt=null,Yt=null,Zn=null,My=!1,If=!1,Ru=!1,jy=0,Sg=0,kf=null,Cee=0;function On(){throw Error(r(321))}function bE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Ui(l[p],d[p]))return!1;return!0}function xE(l,d,p,v,E,C){return No=C,dt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,q.H=l===null||l.memoizedState===null?wj:ME,Ru=!1,C=p(v,E),Ru=!1,If&&(C=BM(d,p,v,E)),VM(l),C}function VM(l){q.H=Ag;var d=Yt!==null&&Yt.next!==null;if(No=0,Zn=Yt=dt=null,My=!1,Sg=0,kf=null,d)throw Error(r(300));l===null||Jn||(l=l.dependencies,l!==null&&Ay(l)&&(Jn=!0))}function BM(l,d,p,v){dt=l;var E=0;do{if(If&&(kf=null),Sg=0,If=!1,25<=E)throw Error(r(301));if(E+=1,Zn=Yt=null,l.updateQueue!=null){var C=l.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}q.H=_j,C=d(p,v)}while(If);return C}function Iee(){var l=q.H,d=l.useState()[0];return d=typeof d.then=="function"?Eg(d):d,l=l.useState()[0],(Yt!==null?Yt.memoizedState:null)!==l&&(dt.flags|=1024),d}function wE(){var l=jy!==0;return jy=0,l}function _E(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function SE(l){if(My){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}My=!1}No=0,Zn=Yt=dt=null,If=!1,Sg=jy=0,kf=null}function ci(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?dt.memoizedState=Zn=l:Zn=Zn.next=l,Zn}function Un(){if(Yt===null){var l=dt.alternate;l=l!==null?l.memoizedState:null}else l=Yt.next;var d=Zn===null?dt.memoizedState:Zn.next;if(d!==null)Zn=d,Yt=l;else{if(l===null)throw dt.alternate===null?Error(r(467)):Error(r(310));Yt=l,l={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Zn===null?dt.memoizedState=Zn=l:Zn=Zn.next=l}return Zn}function zy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Eg(l){var d=Sg;return Sg+=1,kf===null&&(kf=[]),l=PM(kf,l,d),d=dt,(Zn===null?d.memoizedState:Zn.next)===null&&(d=d.alternate,q.H=d===null||d.memoizedState===null?wj:ME),l}function Ly(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Eg(l);if(l.$$typeof===I)return Lr(l)}throw Error(r(438,String(l)))}function EE(l){var d=null,p=dt.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var v=dt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(d={data:v.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=zy(),dt.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),v=0;v<l;v++)p[v]=z;return d.index++,p}function Mo(l,d){return typeof d=="function"?d(l):d}function Vy(l){var d=Un();return TE(d,Yt,l)}function TE(l,d,p){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=p;var E=l.baseQueue,C=v.pending;if(C!==null){if(E!==null){var V=E.next;E.next=C.next,C.next=V}d.baseQueue=E=C,v.pending=null}if(C=l.baseState,E===null)l.memoizedState=C;else{d=E.next;var $=V=null,re=null,ve=d,Ee=!1;do{var Ae=ve.lane&-536870913;if(Ae!==ve.lane?(_t&Ae)===Ae:(No&Ae)===Ae){var be=ve.revertLane;if(be===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),Ae===Sf&&(Ee=!0);else if((No&be)===be){ve=ve.next,be===Sf&&(Ee=!0);continue}else Ae={lane:0,revertLane:ve.revertLane,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},re===null?($=re=Ae,V=C):re=re.next=Ae,dt.lanes|=be,ic|=be;Ae=ve.action,Ru&&p(C,Ae),C=ve.hasEagerState?ve.eagerState:p(C,Ae)}else be={lane:Ae,revertLane:ve.revertLane,gesture:ve.gesture,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},re===null?($=re=be,V=C):re=re.next=be,dt.lanes|=Ae,ic|=Ae;ve=ve.next}while(ve!==null&&ve!==d);if(re===null?V=C:re.next=$,!Ui(C,l.memoizedState)&&(Jn=!0,Ee&&(p=Ef,p!==null)))throw p;l.memoizedState=C,l.baseState=V,l.baseQueue=re,v.lastRenderedState=C}return E===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function AE(l){var d=Un(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var v=p.dispatch,E=p.pending,C=d.memoizedState;if(E!==null){p.pending=null;var V=E=E.next;do C=l(C,V.action),V=V.next;while(V!==E);Ui(C,d.memoizedState)||(Jn=!0),d.memoizedState=C,d.baseQueue===null&&(d.baseState=C),p.lastRenderedState=C}return[C,v]}function FM(l,d,p){var v=dt,E=Un(),C=At;if(C){if(p===void 0)throw Error(r(407));p=p()}else p=d();var V=!Ui((Yt||E).memoizedState,p);if(V&&(E.memoizedState=p,Jn=!0),E=E.queue,kE(qM.bind(null,v,E,l),[l]),E.getSnapshot!==d||V||Zn!==null&&Zn.memoizedState.tag&1){if(v.flags|=2048,Pf(9,{destroy:void 0},$M.bind(null,v,E,p,d),null),rn===null)throw Error(r(349));C||(No&127)!==0||UM(v,d,p)}return p}function UM(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=dt.updateQueue,d===null?(d=zy(),dt.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function $M(l,d,p,v){d.value=p,d.getSnapshot=v,GM(d)&&HM(l)}function qM(l,d,p){return p(function(){GM(d)&&HM(l)})}function GM(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Ui(l,p)}catch{return!0}}function HM(l){var d=Eu(l,2);d!==null&&Ai(d,l,2)}function CE(l){var d=ci();if(typeof l=="function"){var p=l;if(l=p(),Ru){vn(!0);try{p()}finally{vn(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:l},d}function KM(l,d,p,v){return l.baseState=p,TE(l,Yt,typeof v=="function"?v:Mo)}function kee(l,d,p,v,E){if(Uy(l))throw Error(r(485));if(l=d.action,l!==null){var C={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){C.listeners.push(V)}};q.T!==null?p(!0):C.isTransition=!1,v(C),p=d.pending,p===null?(C.next=d.pending=C,WM(d,C)):(C.next=p.next,d.pending=p.next=C)}}function WM(l,d){var p=d.action,v=d.payload,E=l.state;if(d.isTransition){var C=q.T,V={};q.T=V;try{var $=p(E,v),re=q.S;re!==null&&re(V,$),YM(l,d,$)}catch(ve){IE(l,d,ve)}finally{C!==null&&V.types!==null&&(C.types=V.types),q.T=C}}else try{C=p(E,v),YM(l,d,C)}catch(ve){IE(l,d,ve)}}function YM(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){XM(l,d,v)},function(v){return IE(l,d,v)}):XM(l,d,p)}function XM(l,d,p){d.status="fulfilled",d.value=p,QM(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,WM(l,p)))}function IE(l,d,p){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do d.status="rejected",d.reason=p,QM(d),d=d.next;while(d!==v)}l.action=null}function QM(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function ZM(l,d){return d}function JM(l,d){if(At){var p=rn.formState;if(p!==null){e:{var v=dt;if(At){if(cn){t:{for(var E=cn,C=Sa;E.nodeType!==8;){if(!C){E=null;break t}if(E=Ta(E.nextSibling),E===null){E=null;break t}}C=E.data,E=C==="F!"||C==="F"?E:null}if(E){cn=Ta(E.nextSibling),v=E.data==="F!";break e}}Yl(v)}v=!1}v&&(d=p[0])}}return p=ci(),p.memoizedState=p.baseState=d,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZM,lastRenderedState:d},p.queue=v,p=yj.bind(null,dt,v),v.dispatch=p,v=CE(!1),C=NE.bind(null,dt,!1,v.queue),v=ci(),E={state:d,dispatch:null,action:l,pending:null},v.queue=E,p=kee.bind(null,dt,E,C,p),E.dispatch=p,v.memoizedState=l,[d,p,!1]}function ej(l){var d=Un();return tj(d,Yt,l)}function tj(l,d,p){if(d=TE(l,d,ZM)[0],l=Vy(Mo)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var v=Eg(d)}catch(V){throw V===Tf?ky:V}else v=d;d=Un();var E=d.queue,C=E.dispatch;return p!==d.memoizedState&&(dt.flags|=2048,Pf(9,{destroy:void 0},Pee.bind(null,E,p),null)),[v,C,l]}function Pee(l,d){l.action=d}function nj(l){var d=Un(),p=Yt;if(p!==null)return tj(d,p,l);Un(),d=d.memoizedState,p=Un();var v=p.queue.dispatch;return p.memoizedState=l,[d,v,!1]}function Pf(l,d,p,v){return l={tag:l,create:p,deps:v,inst:d,next:null},d=dt.updateQueue,d===null&&(d=zy(),dt.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(v=p.next,p.next=l,l.next=v,d.lastEffect=l),l}function rj(){return Un().memoizedState}function By(l,d,p,v){var E=ci();dt.flags|=l,E.memoizedState=Pf(1|d,{destroy:void 0},p,v===void 0?null:v)}function Fy(l,d,p,v){var E=Un();v=v===void 0?null:v;var C=E.memoizedState.inst;Yt!==null&&v!==null&&bE(v,Yt.memoizedState.deps)?E.memoizedState=Pf(d,C,p,v):(dt.flags|=l,E.memoizedState=Pf(1|d,C,p,v))}function ij(l,d){By(8390656,8,l,d)}function kE(l,d){Fy(2048,8,l,d)}function Dee(l){dt.flags|=4;var d=dt.updateQueue;if(d===null)d=zy(),dt.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function aj(l){var d=Un().memoizedState;return Dee({ref:d,nextImpl:l}),function(){if((zt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function sj(l,d){return Fy(4,2,l,d)}function oj(l,d){return Fy(4,4,l,d)}function lj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function cj(l,d,p){p=p!=null?p.concat([l]):null,Fy(4,4,lj.bind(null,d,l),p)}function PE(){}function uj(l,d){var p=Un();d=d===void 0?null:d;var v=p.memoizedState;return d!==null&&bE(d,v[1])?v[0]:(p.memoizedState=[l,d],l)}function dj(l,d){var p=Un();d=d===void 0?null:d;var v=p.memoizedState;if(d!==null&&bE(d,v[1]))return v[0];if(v=l(),Ru){vn(!0);try{l()}finally{vn(!1)}}return p.memoizedState=[v,d],v}function DE(l,d,p){return p===void 0||(No&1073741824)!==0&&(_t&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=fz(),dt.lanes|=l,ic|=l,p)}function fj(l,d,p,v){return Ui(p,d)?p:Cf.current!==null?(l=DE(l,p,v),Ui(l,d)||(Jn=!0),l):(No&42)===0||(No&1073741824)!==0&&(_t&261930)===0?(Jn=!0,l.memoizedState=p):(l=fz(),dt.lanes|=l,ic|=l,d)}function hj(l,d,p,v,E){var C=Y.p;Y.p=C!==0&&8>C?C:8;var V=q.T,$={};q.T=$,NE(l,!1,d,p);try{var re=E(),ve=q.S;if(ve!==null&&ve($,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Ee=Aee(re,v);Tg(l,d,Ee,Wi(l))}else Tg(l,d,v,Wi(l))}catch(Ae){Tg(l,d,{then:function(){},status:"rejected",reason:Ae},Wi())}finally{Y.p=C,V!==null&&$.types!==null&&(V.types=$.types),q.T=V}}function Oee(){}function OE(l,d,p,v){if(l.tag!==5)throw Error(r(476));var E=pj(l).queue;hj(l,E,d,Z,p===null?Oee:function(){return gj(l),p(v)})}function pj(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:Z},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function gj(l){var d=pj(l);d.next===null&&(d=l.alternate.memoizedState),Tg(l,d.next.queue,{},Wi())}function RE(){return Lr(Ug)}function mj(){return Un().memoizedState}function vj(){return Un().memoizedState}function Ree(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=Wi();l=Zl(p);var v=Jl(d,l,p);v!==null&&(Ai(v,d,p),xg(v,d,p)),d={cache:lE()},l.payload=d;return}d=d.return}}function Nee(l,d,p){var v=Wi();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Uy(l)?bj(d,p):(p=QS(l,d,p,v),p!==null&&(Ai(p,l,v),xj(p,d,v)))}function yj(l,d,p){var v=Wi();Tg(l,d,p,v)}function Tg(l,d,p,v){var E={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Uy(l))bj(d,E);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=d.lastRenderedReducer,C!==null))try{var V=d.lastRenderedState,$=C(V,p);if(E.hasEagerState=!0,E.eagerState=$,Ui($,V))return _y(l,d,E,0),rn===null&&wy(),!1}catch{}finally{}if(p=QS(l,d,E,v),p!==null)return Ai(p,l,v),xj(p,d,v),!0}return!1}function NE(l,d,p,v){if(v={lane:2,revertLane:fT(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Uy(l)){if(d)throw Error(r(479))}else d=QS(l,p,v,2),d!==null&&Ai(d,l,2)}function Uy(l){var d=l.alternate;return l===dt||d!==null&&d===dt}function bj(l,d){If=My=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function xj(l,d,p){if((p&4194048)!==0){var v=d.lanes;v&=l.pendingLanes,p|=v,d.lanes=p,Kp(l,p)}}var Ag={readContext:Lr,use:Ly,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};Ag.useEffectEvent=On;var wj={readContext:Lr,use:Ly,useCallback:function(l,d){return ci().memoizedState=[l,d===void 0?null:d],l},useContext:Lr,useEffect:ij,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,By(4194308,4,lj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return By(4194308,4,l,d)},useInsertionEffect:function(l,d){By(4,2,l,d)},useMemo:function(l,d){var p=ci();d=d===void 0?null:d;var v=l();if(Ru){vn(!0);try{l()}finally{vn(!1)}}return p.memoizedState=[v,d],v},useReducer:function(l,d,p){var v=ci();if(p!==void 0){var E=p(d);if(Ru){vn(!0);try{p(d)}finally{vn(!1)}}}else E=d;return v.memoizedState=v.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},v.queue=l,l=l.dispatch=Nee.bind(null,dt,l),[v.memoizedState,l]},useRef:function(l){var d=ci();return l={current:l},d.memoizedState=l},useState:function(l){l=CE(l);var d=l.queue,p=yj.bind(null,dt,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:PE,useDeferredValue:function(l,d){var p=ci();return DE(p,l,d)},useTransition:function(){var l=CE(!1);return l=hj.bind(null,dt,l.queue,!0,!1),ci().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var v=dt,E=ci();if(At){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),rn===null)throw Error(r(349));(_t&127)!==0||UM(v,d,p)}E.memoizedState=p;var C={value:p,getSnapshot:d};return E.queue=C,ij(qM.bind(null,v,C,l),[l]),v.flags|=2048,Pf(9,{destroy:void 0},$M.bind(null,v,C,p,d),null),p},useId:function(){var l=ci(),d=rn.identifierPrefix;if(At){var p=Gs,v=qs;p=(v&~(1<<32-Mt(v)-1)).toString(32)+p,d="_"+d+"R_"+p,p=jy++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=Cee++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:RE,useFormState:JM,useActionState:JM,useOptimistic:function(l){var d=ci();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=NE.bind(null,dt,!0,p),p.dispatch=d,[l,d]},useMemoCache:EE,useCacheRefresh:function(){return ci().memoizedState=Ree.bind(null,dt)},useEffectEvent:function(l){var d=ci(),p={impl:l};return d.memoizedState=p,function(){if((zt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},ME={readContext:Lr,use:Ly,useCallback:uj,useContext:Lr,useEffect:kE,useImperativeHandle:cj,useInsertionEffect:sj,useLayoutEffect:oj,useMemo:dj,useReducer:Vy,useRef:rj,useState:function(){return Vy(Mo)},useDebugValue:PE,useDeferredValue:function(l,d){var p=Un();return fj(p,Yt.memoizedState,l,d)},useTransition:function(){var l=Vy(Mo)[0],d=Un().memoizedState;return[typeof l=="boolean"?l:Eg(l),d]},useSyncExternalStore:FM,useId:mj,useHostTransitionStatus:RE,useFormState:ej,useActionState:ej,useOptimistic:function(l,d){var p=Un();return KM(p,Yt,l,d)},useMemoCache:EE,useCacheRefresh:vj};ME.useEffectEvent=aj;var _j={readContext:Lr,use:Ly,useCallback:uj,useContext:Lr,useEffect:kE,useImperativeHandle:cj,useInsertionEffect:sj,useLayoutEffect:oj,useMemo:dj,useReducer:AE,useRef:rj,useState:function(){return AE(Mo)},useDebugValue:PE,useDeferredValue:function(l,d){var p=Un();return Yt===null?DE(p,l,d):fj(p,Yt.memoizedState,l,d)},useTransition:function(){var l=AE(Mo)[0],d=Un().memoizedState;return[typeof l=="boolean"?l:Eg(l),d]},useSyncExternalStore:FM,useId:mj,useHostTransitionStatus:RE,useFormState:nj,useActionState:nj,useOptimistic:function(l,d){var p=Un();return Yt!==null?KM(p,Yt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:EE,useCacheRefresh:vj};_j.useEffectEvent=aj;function jE(l,d,p,v){d=l.memoizedState,p=p(v,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var zE={enqueueSetState:function(l,d,p){l=l._reactInternals;var v=Wi(),E=Zl(v);E.payload=d,p!=null&&(E.callback=p),d=Jl(l,E,v),d!==null&&(Ai(d,l,v),xg(d,l,v))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var v=Wi(),E=Zl(v);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=Jl(l,E,v),d!==null&&(Ai(d,l,v),xg(d,l,v))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Wi(),v=Zl(p);v.tag=2,d!=null&&(v.callback=d),d=Jl(l,v,p),d!==null&&(Ai(d,l,p),xg(d,l,p))}};function Sj(l,d,p,v,E,C,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,C,V):d.prototype&&d.prototype.isPureReactComponent?!fg(p,v)||!fg(E,C):!0}function Ej(l,d,p,v){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,v),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,v),d.state!==l&&zE.enqueueReplaceState(d,d.state,null)}function Nu(l,d){var p=d;if("ref"in d){p={};for(var v in d)v!=="ref"&&(p[v]=d[v])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function Tj(l){xy(l)}function Aj(l){console.error(l)}function Cj(l){xy(l)}function $y(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(v){setTimeout(function(){throw v})}}function Ij(l,d,p){try{var v=l.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function LE(l,d,p){return p=Zl(p),p.tag=3,p.payload={element:null},p.callback=function(){$y(l,d)},p}function kj(l){return l=Zl(l),l.tag=3,l}function Pj(l,d,p,v){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var C=v.value;l.payload=function(){return E(C)},l.callback=function(){Ij(d,p,v)}}var V=p.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){Ij(d,p,v),typeof E!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var $=v.stack;this.componentDidCatch(v.value,{componentStack:$!==null?$:""})})}function Mee(l,d,p,v,E){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(d=p.alternate,d!==null&&_f(d,p,E,!0),p=qi.current,p!==null){switch(p.tag){case 31:case 13:return Ea===null?tb():p.alternate===null&&Rn===0&&(Rn=3),p.flags&=-257,p.flags|=65536,p.lanes=E,v===Py?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([v]):d.add(v),cT(l,v,E)),!1;case 22:return p.flags|=65536,v===Py?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([v]):p.add(v)),cT(l,v,E)),!1}throw Error(r(435,p.tag))}return cT(l,v,E),tb(),!1}if(At)return d=qi.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,v!==rE&&(l=Error(r(422),{cause:v}),gg(xa(l,p)))):(v!==rE&&(d=Error(r(423),{cause:v}),gg(xa(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,v=xa(v,p),E=LE(l.stateNode,v,E),pE(l,E),Rn!==4&&(Rn=2)),!1;var C=Error(r(520),{cause:v});if(C=xa(C,p),Ng===null?Ng=[C]:Ng.push(C),Rn!==4&&(Rn=2),d===null)return!0;v=xa(v,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=LE(p.stateNode,v,l),pE(p,l),!1;case 1:if(d=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ac===null||!ac.has(C))))return p.flags|=65536,E&=-E,p.lanes|=E,E=kj(E),Pj(E,l,p,v),pE(p,E),!1}p=p.return}while(p!==null);return!1}var VE=Error(r(461)),Jn=!1;function Vr(l,d,p,v){d.child=l===null?NM(d,null,p,v):Ou(d,l.child,p,v)}function Dj(l,d,p,v,E){p=p.render;var C=d.ref;if("ref"in v){var V={};for(var $ in v)$!=="ref"&&(V[$]=v[$])}else V=v;return Iu(d),v=xE(l,d,p,V,C,E),$=wE(),l!==null&&!Jn?(_E(l,d,E),jo(l,d,E)):(At&&$&&tE(d),d.flags|=1,Vr(l,d,v,E),d.child)}function Oj(l,d,p,v,E){if(l===null){var C=p.type;return typeof C=="function"&&!ZS(C)&&C.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=C,Rj(l,d,C,v,E)):(l=Ey(p.type,null,v,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(C=l.child,!KE(l,E)){var V=C.memoizedProps;if(p=p.compare,p=p!==null?p:fg,p(V,v)&&l.ref===d.ref)return jo(l,d,E)}return d.flags|=1,l=Po(C,v),l.ref=d.ref,l.return=d,d.child=l}function Rj(l,d,p,v,E){if(l!==null){var C=l.memoizedProps;if(fg(C,v)&&l.ref===d.ref)if(Jn=!1,d.pendingProps=v=C,KE(l,E))(l.flags&131072)!==0&&(Jn=!0);else return d.lanes=l.lanes,jo(l,d,E)}return BE(l,d,p,v,E)}function Nj(l,d,p,v){var E=v.children,C=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((d.flags&128)!==0){if(C=C!==null?C.baseLanes|p:p,l!==null){for(v=d.child=l.child,E=0;v!==null;)E=E|v.lanes|v.childLanes,v=v.sibling;v=E&~C}else v=0,d.child=null;return Mj(l,d,C,p,v)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Iy(d,C!==null?C.cachePool:null),C!==null?zM(d,C):mE(),LM(d);else return v=d.lanes=536870912,Mj(l,d,C!==null?C.baseLanes|p:p,p,v)}else C!==null?(Iy(d,C.cachePool),zM(d,C),tc(),d.memoizedState=null):(l!==null&&Iy(d,null),mE(),tc());return Vr(l,d,E,p),d.child}function Cg(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Mj(l,d,p,v,E){var C=uE();return C=C===null?null:{parent:Qn._currentValue,pool:C},d.memoizedState={baseLanes:p,cachePool:C},l!==null&&Iy(d,null),mE(),LM(d),l!==null&&_f(l,d,v,!0),d.childLanes=E,null}function qy(l,d){return d=Hy({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function jj(l,d,p){return Ou(d,l.child,null,p),l=qy(d,d.pendingProps),l.flags|=2,Gi(d),d.memoizedState=null,l}function jee(l,d,p){var v=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(At){if(v.mode==="hidden")return l=qy(d,v),d.lanes=536870912,Cg(null,l);if(yE(d),(l=cn)?(l=Wz(l,Sa),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Kl!==null?{id:qs,overflow:Gs}:null,retryLane:536870912,hydrationErrors:null},p=bM(l),p.return=d,d.child=p,zr=d,cn=null)):l=null,l===null)throw Yl(d);return d.lanes=536870912,null}return qy(d,v)}var C=l.memoizedState;if(C!==null){var V=C.dehydrated;if(yE(d),E)if(d.flags&256)d.flags&=-257,d=jj(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(Jn||_f(l,d,p,!1),E=(p&l.childLanes)!==0,Jn||E){if(v=rn,v!==null&&(V=Wp(v,p),V!==0&&V!==C.retryLane))throw C.retryLane=V,Eu(l,V),Ai(v,l,V),VE;tb(),d=jj(l,d,p)}else l=C.treeContext,cn=Ta(V.nextSibling),zr=d,At=!0,Wl=null,Sa=!1,l!==null&&_M(d,l),d=qy(d,v),d.flags|=4096;return d}return l=Po(l.child,{mode:v.mode,children:v.children}),l.ref=d.ref,d.child=l,l.return=d,l}function Gy(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function BE(l,d,p,v,E){return Iu(d),p=xE(l,d,p,v,void 0,E),v=wE(),l!==null&&!Jn?(_E(l,d,E),jo(l,d,E)):(At&&v&&tE(d),d.flags|=1,Vr(l,d,p,E),d.child)}function zj(l,d,p,v,E,C){return Iu(d),d.updateQueue=null,p=BM(d,v,p,E),VM(l),v=wE(),l!==null&&!Jn?(_E(l,d,C),jo(l,d,C)):(At&&v&&tE(d),d.flags|=1,Vr(l,d,p,C),d.child)}function Lj(l,d,p,v,E){if(Iu(d),d.stateNode===null){var C=yf,V=p.contextType;typeof V=="object"&&V!==null&&(C=Lr(V)),C=new p(v,C),d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=zE,d.stateNode=C,C._reactInternals=d,C=d.stateNode,C.props=v,C.state=d.memoizedState,C.refs={},fE(d),V=p.contextType,C.context=typeof V=="object"&&V!==null?Lr(V):yf,C.state=d.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(jE(d,p,V,v),C.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(V=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),V!==C.state&&zE.enqueueReplaceState(C,C.state,null),_g(d,v,C,E),wg(),C.state=d.memoizedState),typeof C.componentDidMount=="function"&&(d.flags|=4194308),v=!0}else if(l===null){C=d.stateNode;var $=d.memoizedProps,re=Nu(p,$);C.props=re;var ve=C.context,Ee=p.contextType;V=yf,typeof Ee=="object"&&Ee!==null&&(V=Lr(Ee));var Ae=p.getDerivedStateFromProps;Ee=typeof Ae=="function"||typeof C.getSnapshotBeforeUpdate=="function",$=d.pendingProps!==$,Ee||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||($||ve!==V)&&Ej(d,C,v,V),Ql=!1;var be=d.memoizedState;C.state=be,_g(d,v,C,E),wg(),ve=d.memoizedState,$||be!==ve||Ql?(typeof Ae=="function"&&(jE(d,p,Ae,v),ve=d.memoizedState),(re=Ql||Sj(d,p,re,v,be,ve,V))?(Ee||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(d.flags|=4194308)):(typeof C.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=v,d.memoizedState=ve),C.props=v,C.state=ve,C.context=V,v=re):(typeof C.componentDidMount=="function"&&(d.flags|=4194308),v=!1)}else{C=d.stateNode,hE(l,d),V=d.memoizedProps,Ee=Nu(p,V),C.props=Ee,Ae=d.pendingProps,be=C.context,ve=p.contextType,re=yf,typeof ve=="object"&&ve!==null&&(re=Lr(ve)),$=p.getDerivedStateFromProps,(ve=typeof $=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==Ae||be!==re)&&Ej(d,C,v,re),Ql=!1,be=d.memoizedState,C.state=be,_g(d,v,C,E),wg();var we=d.memoizedState;V!==Ae||be!==we||Ql||l!==null&&l.dependencies!==null&&Ay(l.dependencies)?(typeof $=="function"&&(jE(d,p,$,v),we=d.memoizedState),(Ee=Ql||Sj(d,p,Ee,v,be,we,re)||l!==null&&l.dependencies!==null&&Ay(l.dependencies))?(ve||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,we,re),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,we,re)),typeof C.componentDidUpdate=="function"&&(d.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof C.componentDidUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=1024),d.memoizedProps=v,d.memoizedState=we),C.props=v,C.state=we,C.context=re,v=Ee):(typeof C.componentDidUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=1024),v=!1)}return C=v,Gy(l,d),v=(d.flags&128)!==0,C||v?(C=d.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:C.render(),d.flags|=1,l!==null&&v?(d.child=Ou(d,l.child,null,E),d.child=Ou(d,null,p,E)):Vr(l,d,p,E),d.memoizedState=C.state,l=d.child):l=jo(l,d,E),l}function Vj(l,d,p,v){return Au(),d.flags|=256,Vr(l,d,p,v),d.child}var FE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function UE(l){return{baseLanes:l,cachePool:IM()}}function $E(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=Ki),l}function Bj(l,d,p){var v=d.pendingProps,E=!1,C=(d.flags&128)!==0,V;if((V=C)||(V=l!==null&&l.memoizedState===null?!1:(Fn.current&2)!==0),V&&(E=!0,d.flags&=-129),V=(d.flags&32)!==0,d.flags&=-33,l===null){if(At){if(E?ec(d):tc(),(l=cn)?(l=Wz(l,Sa),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Kl!==null?{id:qs,overflow:Gs}:null,retryLane:536870912,hydrationErrors:null},p=bM(l),p.return=d,d.child=p,zr=d,cn=null)):l=null,l===null)throw Yl(d);return TT(l)?d.lanes=32:d.lanes=536870912,null}var $=v.children;return v=v.fallback,E?(tc(),E=d.mode,$=Hy({mode:"hidden",children:$},E),v=Tu(v,E,p,null),$.return=d,v.return=d,$.sibling=v,d.child=$,v=d.child,v.memoizedState=UE(p),v.childLanes=$E(l,V,p),d.memoizedState=FE,Cg(null,v)):(ec(d),qE(d,$))}var re=l.memoizedState;if(re!==null&&($=re.dehydrated,$!==null)){if(C)d.flags&256?(ec(d),d.flags&=-257,d=GE(l,d,p)):d.memoizedState!==null?(tc(),d.child=l.child,d.flags|=128,d=null):(tc(),$=v.fallback,E=d.mode,v=Hy({mode:"visible",children:v.children},E),$=Tu($,E,p,null),$.flags|=2,v.return=d,$.return=d,v.sibling=$,d.child=v,Ou(d,l.child,null,p),v=d.child,v.memoizedState=UE(p),v.childLanes=$E(l,V,p),d.memoizedState=FE,d=Cg(null,v));else if(ec(d),TT($)){if(V=$.nextSibling&&$.nextSibling.dataset,V)var ve=V.dgst;V=ve,v=Error(r(419)),v.stack="",v.digest=V,gg({value:v,source:null,stack:null}),d=GE(l,d,p)}else if(Jn||_f(l,d,p,!1),V=(p&l.childLanes)!==0,Jn||V){if(V=rn,V!==null&&(v=Wp(V,p),v!==0&&v!==re.retryLane))throw re.retryLane=v,Eu(l,v),Ai(V,l,v),VE;ET($)||tb(),d=GE(l,d,p)}else ET($)?(d.flags|=192,d.child=l.child,d=null):(l=re.treeContext,cn=Ta($.nextSibling),zr=d,At=!0,Wl=null,Sa=!1,l!==null&&_M(d,l),d=qE(d,v.children),d.flags|=4096);return d}return E?(tc(),$=v.fallback,E=d.mode,re=l.child,ve=re.sibling,v=Po(re,{mode:"hidden",children:v.children}),v.subtreeFlags=re.subtreeFlags&65011712,ve!==null?$=Po(ve,$):($=Tu($,E,p,null),$.flags|=2),$.return=d,v.return=d,v.sibling=$,d.child=v,Cg(null,v),v=d.child,$=l.child.memoizedState,$===null?$=UE(p):(E=$.cachePool,E!==null?(re=Qn._currentValue,E=E.parent!==re?{parent:re,pool:re}:E):E=IM(),$={baseLanes:$.baseLanes|p,cachePool:E}),v.memoizedState=$,v.childLanes=$E(l,V,p),d.memoizedState=FE,Cg(l.child,v)):(ec(d),p=l.child,l=p.sibling,p=Po(p,{mode:"visible",children:v.children}),p.return=d,p.sibling=null,l!==null&&(V=d.deletions,V===null?(d.deletions=[l],d.flags|=16):V.push(l)),d.child=p,d.memoizedState=null,p)}function qE(l,d){return d=Hy({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Hy(l,d){return l=$i(22,l,null,d),l.lanes=0,l}function GE(l,d,p){return Ou(d,l.child,null,p),l=qE(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function Fj(l,d,p){l.lanes|=d;var v=l.alternate;v!==null&&(v.lanes|=d),sE(l.return,d,p)}function HE(l,d,p,v,E,C){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:E,treeForkCount:C}:(V.isBackwards=d,V.rendering=null,V.renderingStartTime=0,V.last=v,V.tail=p,V.tailMode=E,V.treeForkCount=C)}function Uj(l,d,p){var v=d.pendingProps,E=v.revealOrder,C=v.tail;v=v.children;var V=Fn.current,$=(V&2)!==0;if($?(V=V&1|2,d.flags|=128):V&=1,te(Fn,V),Vr(l,d,v,p),v=At?pg:0,!$&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Fj(l,p,d);else if(l.tag===19)Fj(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Ny(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),HE(d,!1,E,p,C,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Ny(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}HE(d,!0,p,null,C,v);break;case"together":HE(d,!1,null,null,void 0,v);break;default:d.memoizedState=null}return d.child}function jo(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),ic|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(_f(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Po(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Po(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function KE(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Ay(l)))}function zee(l,d,p){switch(d.tag){case 3:he(d,d.stateNode.containerInfo),Xl(d,Qn,l.memoizedState.cache),Au();break;case 27:case 5:_e(d);break;case 4:he(d,d.stateNode.containerInfo);break;case 10:Xl(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,yE(d),null;break;case 13:var v=d.memoizedState;if(v!==null)return v.dehydrated!==null?(ec(d),d.flags|=128,null):(p&d.child.childLanes)!==0?Bj(l,d,p):(ec(d),l=jo(l,d,p),l!==null?l.sibling:null);ec(d);break;case 19:var E=(l.flags&128)!==0;if(v=(p&d.childLanes)!==0,v||(_f(l,d,p,!1),v=(p&d.childLanes)!==0),E){if(v)return Uj(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),te(Fn,Fn.current),v)break;return null;case 22:return d.lanes=0,Nj(l,d,p,d.pendingProps);case 24:Xl(d,Qn,l.memoizedState.cache)}return jo(l,d,p)}function $j(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)Jn=!0;else{if(!KE(l,p)&&(d.flags&128)===0)return Jn=!1,zee(l,d,p);Jn=(l.flags&131072)!==0}else Jn=!1,At&&(d.flags&1048576)!==0&&wM(d,pg,d.index);switch(d.lanes=0,d.tag){case 16:e:{var v=d.pendingProps;if(l=Pu(d.elementType),d.type=l,typeof l=="function")ZS(l)?(v=Nu(l,v),d.tag=1,d=Lj(null,d,l,v,p)):(d.tag=0,d=BE(null,d,l,v,p));else{if(l!=null){var E=l.$$typeof;if(E===R){d.tag=11,d=Dj(null,d,l,v,p);break e}else if(E===k){d.tag=14,d=Oj(null,d,l,v,p);break e}}throw d=W(l)||l,Error(r(306,d,""))}}return d;case 0:return BE(l,d,d.type,d.pendingProps,p);case 1:return v=d.type,E=Nu(v,d.pendingProps),Lj(l,d,v,E,p);case 3:e:{if(he(d,d.stateNode.containerInfo),l===null)throw Error(r(387));v=d.pendingProps;var C=d.memoizedState;E=C.element,hE(l,d),_g(d,v,null,p);var V=d.memoizedState;if(v=V.cache,Xl(d,Qn,v),v!==C.cache&&oE(d,[Qn],p,!0),wg(),v=V.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:V.cache},d.updateQueue.baseState=C,d.memoizedState=C,d.flags&256){d=Vj(l,d,v,p);break e}else if(v!==E){E=xa(Error(r(424)),d),gg(E),d=Vj(l,d,v,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(cn=Ta(l.firstChild),zr=d,At=!0,Wl=null,Sa=!0,p=NM(d,null,v,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Au(),v===E){d=jo(l,d,p);break e}Vr(l,d,v,p)}d=d.child}return d;case 26:return Gy(l,d),l===null?(p=e4(d.type,null,d.pendingProps,null))?d.memoizedState=p:At||(p=d.type,l=d.pendingProps,v=lb(ae.current).createElement(p),v[Wn]=d,v[Er]=l,Br(v,p,l),Yn(v),d.stateNode=v):d.memoizedState=e4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return _e(d),l===null&&At&&(v=d.stateNode=Qz(d.type,d.pendingProps,ae.current),zr=d,Sa=!0,E=cn,cc(d.type)?(AT=E,cn=Ta(v.firstChild)):cn=E),Vr(l,d,d.pendingProps.children,p),Gy(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&At&&((E=v=cn)&&(v=hte(v,d.type,d.pendingProps,Sa),v!==null?(d.stateNode=v,zr=d,cn=Ta(v.firstChild),Sa=!1,E=!0):E=!1),E||Yl(d)),_e(d),E=d.type,C=d.pendingProps,V=l!==null?l.memoizedProps:null,v=C.children,wT(E,C)?v=null:V!==null&&wT(E,V)&&(d.flags|=32),d.memoizedState!==null&&(E=xE(l,d,Iee,null,null,p),Ug._currentValue=E),Gy(l,d),Vr(l,d,v,p),d.child;case 6:return l===null&&At&&((l=p=cn)&&(p=pte(p,d.pendingProps,Sa),p!==null?(d.stateNode=p,zr=d,cn=null,l=!0):l=!1),l||Yl(d)),null;case 13:return Bj(l,d,p);case 4:return he(d,d.stateNode.containerInfo),v=d.pendingProps,l===null?d.child=Ou(d,null,v,p):Vr(l,d,v,p),d.child;case 11:return Dj(l,d,d.type,d.pendingProps,p);case 7:return Vr(l,d,d.pendingProps,p),d.child;case 8:return Vr(l,d,d.pendingProps.children,p),d.child;case 12:return Vr(l,d,d.pendingProps.children,p),d.child;case 10:return v=d.pendingProps,Xl(d,d.type,v.value),Vr(l,d,v.children,p),d.child;case 9:return E=d.type._context,v=d.pendingProps.children,Iu(d),E=Lr(E),v=v(E),d.flags|=1,Vr(l,d,v,p),d.child;case 14:return Oj(l,d,d.type,d.pendingProps,p);case 15:return Rj(l,d,d.type,d.pendingProps,p);case 19:return Uj(l,d,p);case 31:return jee(l,d,p);case 22:return Nj(l,d,p,d.pendingProps);case 24:return Iu(d),v=Lr(Qn),l===null?(E=uE(),E===null&&(E=rn,C=lE(),E.pooledCache=C,C.refCount++,C!==null&&(E.pooledCacheLanes|=p),E=C),d.memoizedState={parent:v,cache:E},fE(d),Xl(d,Qn,E)):((l.lanes&p)!==0&&(hE(l,d),_g(d,null,null,p),wg()),E=l.memoizedState,C=d.memoizedState,E.parent!==v?(E={parent:v,cache:v},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),Xl(d,Qn,v)):(v=C.cache,Xl(d,Qn,v),v!==E.cache&&oE(d,[Qn],p,!0))),Vr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function zo(l){l.flags|=4}function WE(l,d,p,v,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(mz())l.flags|=8192;else throw Du=Py,dE}else l.flags&=-16777217}function qj(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!a4(d))if(mz())l.flags|=8192;else throw Du=Py,dE}function Ky(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?J0():536870912,l.lanes|=d,Nf|=d)}function Ig(l,d){if(!At)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function un(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,v=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags&65011712,v|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=v,l.childLanes=p,d}function Lee(l,d,p){var v=d.pendingProps;switch(nE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(d),null;case 1:return un(d),null;case 3:return p=d.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),d.memoizedState.cache!==v&&(d.flags|=2048),Ro(Qn),ne(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(wf(d)?zo(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,iE())),un(d),null;case 26:var E=d.type,C=d.memoizedState;return l===null?(zo(d),C!==null?(un(d),qj(d,C)):(un(d),WE(d,E,null,v,p))):C?C!==l.memoizedState?(zo(d),un(d),qj(d,C)):(un(d),d.flags&=-16777217):(l=l.memoizedProps,l!==v&&zo(d),un(d),WE(d,E,l,v,p)),null;case 27:if(fe(d),p=ae.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==v&&zo(d);else{if(!v){if(d.stateNode===null)throw Error(r(166));return un(d),null}l=K.current,wf(d)?SM(d):(l=Qz(E,v,p),d.stateNode=l,zo(d))}return un(d),null;case 5:if(fe(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==v&&zo(d);else{if(!v){if(d.stateNode===null)throw Error(r(166));return un(d),null}if(C=K.current,wf(d))SM(d);else{var V=lb(ae.current);switch(C){case 1:C=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:C=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":C=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":C=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":C=V.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof v.is=="string"?V.createElement("select",{is:v.is}):V.createElement("select"),v.multiple?C.multiple=!0:v.size&&(C.size=v.size);break;default:C=typeof v.is=="string"?V.createElement(E,{is:v.is}):V.createElement(E)}}C[Wn]=d,C[Er]=v;e:for(V=d.child;V!==null;){if(V.tag===5||V.tag===6)C.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===d)break e;for(;V.sibling===null;){if(V.return===null||V.return===d)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}d.stateNode=C;e:switch(Br(C,E,v),E){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&zo(d)}}return un(d),WE(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==v&&zo(d);else{if(typeof v!="string"&&d.stateNode===null)throw Error(r(166));if(l=ae.current,wf(d)){if(l=d.stateNode,p=d.memoizedProps,v=null,E=zr,E!==null)switch(E.tag){case 27:case 5:v=E.memoizedProps}l[Wn]=d,l=!!(l.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||Bz(l.nodeValue,p)),l||Yl(d,!0)}else l=lb(l).createTextNode(v),l[Wn]=d,d.stateNode=l}return un(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(v=wf(d),p!==null){if(l===null){if(!v)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Wn]=d}else Au(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;un(d),l=!1}else p=iE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(Gi(d),d):(Gi(d),null);if((d.flags&128)!==0)throw Error(r(558))}return un(d),null;case 13:if(v=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=wf(d),v!==null&&v.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Wn]=d}else Au(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;un(d),E=!1}else E=iE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(Gi(d),d):(Gi(d),null)}return Gi(d),(d.flags&128)!==0?(d.lanes=p,d):(p=v!==null,l=l!==null&&l.memoizedState!==null,p&&(v=d.child,E=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(E=v.alternate.memoizedState.cachePool.pool),C=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(C=v.memoizedState.cachePool.pool),C!==E&&(v.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),Ky(d,d.updateQueue),un(d),null);case 4:return ne(),l===null&&mT(d.stateNode.containerInfo),un(d),null;case 10:return Ro(d.type),un(d),null;case 19:if(X(Fn),v=d.memoizedState,v===null)return un(d),null;if(E=(d.flags&128)!==0,C=v.rendering,C===null)if(E)Ig(v,!1);else{if(Rn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(C=Ny(l),C!==null){for(d.flags|=128,Ig(v,!1),l=C.updateQueue,d.updateQueue=l,Ky(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)yM(p,l),p=p.sibling;return te(Fn,Fn.current&1|2),At&&Do(d,v.treeForkCount),d.child}l=l.sibling}v.tail!==null&&at()>Zy&&(d.flags|=128,E=!0,Ig(v,!1),d.lanes=4194304)}else{if(!E)if(l=Ny(C),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,Ky(d,l),Ig(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!At)return un(d),null}else 2*at()-v.renderingStartTime>Zy&&p!==536870912&&(d.flags|=128,E=!0,Ig(v,!1),d.lanes=4194304);v.isBackwards?(C.sibling=d.child,d.child=C):(l=v.last,l!==null?l.sibling=C:d.child=C,v.last=C)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=at(),l.sibling=null,p=Fn.current,te(Fn,E?p&1|2:p&1),At&&Do(d,v.treeForkCount),l):(un(d),null);case 22:case 23:return Gi(d),vE(),v=d.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(d.flags|=8192):v&&(d.flags|=8192),v?(p&536870912)!==0&&(d.flags&128)===0&&(un(d),d.subtreeFlags&6&&(d.flags|=8192)):un(d),p=d.updateQueue,p!==null&&Ky(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==p&&(d.flags|=2048),l!==null&&X(ku),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Ro(Qn),un(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function Vee(l,d){switch(nE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Ro(Qn),ne(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return fe(d),null;case 31:if(d.memoizedState!==null){if(Gi(d),d.alternate===null)throw Error(r(340));Au()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Gi(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Au()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return X(Fn),null;case 4:return ne(),null;case 10:return Ro(d.type),null;case 22:case 23:return Gi(d),vE(),l!==null&&X(ku),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Ro(Qn),null;case 25:return null;default:return null}}function Gj(l,d){switch(nE(d),d.tag){case 3:Ro(Qn),ne();break;case 26:case 27:case 5:fe(d);break;case 4:ne();break;case 31:d.memoizedState!==null&&Gi(d);break;case 13:Gi(d);break;case 19:X(Fn);break;case 10:Ro(d.type);break;case 22:case 23:Gi(d),vE(),l!==null&&X(ku);break;case 24:Ro(Qn)}}function kg(l,d){try{var p=d.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var E=v.next;p=E;do{if((p.tag&l)===l){v=void 0;var C=p.create,V=p.inst;v=C(),V.destroy=v}p=p.next}while(p!==E)}}catch($){Ut(d,d.return,$)}}function nc(l,d,p){try{var v=d.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var C=E.next;v=C;do{if((v.tag&l)===l){var V=v.inst,$=V.destroy;if($!==void 0){V.destroy=void 0,E=d;var re=p,ve=$;try{ve()}catch(Ee){Ut(E,re,Ee)}}}v=v.next}while(v!==C)}}catch(Ee){Ut(d,d.return,Ee)}}function Hj(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{jM(d,p)}catch(v){Ut(l,l.return,v)}}}function Kj(l,d,p){p.props=Nu(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(v){Ut(l,d,v)}}function Pg(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof p=="function"?l.refCleanup=p(v):p.current=v}}catch(E){Ut(l,d,E)}}function Hs(l,d){var p=l.ref,v=l.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(E){Ut(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Ut(l,d,E)}else p.current=null}function Wj(l){var d=l.type,p=l.memoizedProps,v=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(E){Ut(l,l.return,E)}}function YE(l,d,p){try{var v=l.stateNode;ote(v,l.type,p,d),v[Er]=d}catch(E){Ut(l,l.return,E)}}function Yj(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&cc(l.type)||l.tag===4}function XE(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Yj(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&cc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function QE(l,d,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=ts));else if(v!==4&&(v===27&&cc(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(QE(l,d,p),l=l.sibling;l!==null;)QE(l,d,p),l=l.sibling}function Wy(l,d,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(v!==4&&(v===27&&cc(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Wy(l,d,p),l=l.sibling;l!==null;)Wy(l,d,p),l=l.sibling}function Xj(l){var d=l.stateNode,p=l.memoizedProps;try{for(var v=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);Br(d,v,p),d[Wn]=l,d[Er]=p}catch(C){Ut(l,l.return,C)}}var Lo=!1,er=!1,ZE=!1,Qj=typeof WeakSet=="function"?WeakSet:Set,Ar=null;function Bee(l,d){if(l=l.containerInfo,bT=gb,l=cM(l),GS(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var E=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var V=0,$=-1,re=-1,ve=0,Ee=0,Ae=l,be=null;t:for(;;){for(var we;Ae!==p||E!==0&&Ae.nodeType!==3||($=V+E),Ae!==C||v!==0&&Ae.nodeType!==3||(re=V+v),Ae.nodeType===3&&(V+=Ae.nodeValue.length),(we=Ae.firstChild)!==null;)be=Ae,Ae=we;for(;;){if(Ae===l)break t;if(be===p&&++ve===E&&($=V),be===C&&++Ee===v&&(re=V),(we=Ae.nextSibling)!==null)break;Ae=be,be=Ae.parentNode}Ae=we}p=$===-1||re===-1?null:{start:$,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for(xT={focusedElem:l,selectionRange:p},gb=!1,Ar=d;Ar!==null;)if(d=Ar,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Ar=l;else for(;Ar!==null;){switch(d=Ar,C=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&C!==null){l=void 0,p=d,E=C.memoizedProps,C=C.memoizedState,v=p.stateNode;try{var $e=Nu(p.type,E);l=v.getSnapshotBeforeUpdate($e,C),v.__reactInternalSnapshotBeforeUpdate=l}catch(nt){Ut(p,p.return,nt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)ST(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":ST(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Ar=l;break}Ar=d.return}}function Zj(l,d,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:Bo(l,p),v&4&&kg(5,p);break;case 1:if(Bo(l,p),v&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(V){Ut(p,p.return,V)}else{var E=Nu(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(V){Ut(p,p.return,V)}}v&64&&Hj(p),v&512&&Pg(p,p.return);break;case 3:if(Bo(l,p),v&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{jM(l,d)}catch(V){Ut(p,p.return,V)}}break;case 27:d===null&&v&4&&Xj(p);case 26:case 5:Bo(l,p),d===null&&v&4&&Wj(p),v&512&&Pg(p,p.return);break;case 12:Bo(l,p);break;case 31:Bo(l,p),v&4&&tz(l,p);break;case 13:Bo(l,p),v&4&&nz(l,p),v&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=Yee.bind(null,p),gte(l,p))));break;case 22:if(v=p.memoizedState!==null||Lo,!v){d=d!==null&&d.memoizedState!==null||er,E=Lo;var C=er;Lo=v,(er=d)&&!C?Fo(l,p,(p.subtreeFlags&8772)!==0):Bo(l,p),Lo=E,er=C}break;case 30:break;default:Bo(l,p)}}function Jj(l){var d=l.alternate;d!==null&&(l.alternate=null,Jj(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&rf(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var bn=null,_i=!1;function Vo(l,d,p){for(p=p.child;p!==null;)ez(l,d,p),p=p.sibling}function ez(l,d,p){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(si,p)}catch{}switch(p.tag){case 26:er||Hs(p,d),Vo(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:er||Hs(p,d);var v=bn,E=_i;cc(p.type)&&(bn=p.stateNode,_i=!1),Vo(l,d,p),Vg(p.stateNode),bn=v,_i=E;break;case 5:er||Hs(p,d);case 6:if(v=bn,E=_i,bn=null,Vo(l,d,p),bn=v,_i=E,bn!==null)if(_i)try{(bn.nodeType===9?bn.body:bn.nodeName==="HTML"?bn.ownerDocument.body:bn).removeChild(p.stateNode)}catch(C){Ut(p,d,C)}else try{bn.removeChild(p.stateNode)}catch(C){Ut(p,d,C)}break;case 18:bn!==null&&(_i?(l=bn,Hz(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Uf(l)):Hz(bn,p.stateNode));break;case 4:v=bn,E=_i,bn=p.stateNode.containerInfo,_i=!0,Vo(l,d,p),bn=v,_i=E;break;case 0:case 11:case 14:case 15:nc(2,p,d),er||nc(4,p,d),Vo(l,d,p);break;case 1:er||(Hs(p,d),v=p.stateNode,typeof v.componentWillUnmount=="function"&&Kj(p,d,v)),Vo(l,d,p);break;case 21:Vo(l,d,p);break;case 22:er=(v=er)||p.memoizedState!==null,Vo(l,d,p),er=v;break;default:Vo(l,d,p)}}function tz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Uf(l)}catch(p){Ut(d,d.return,p)}}}function nz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Uf(l)}catch(p){Ut(d,d.return,p)}}function Fee(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Qj),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Qj),d;default:throw Error(r(435,l.tag))}}function Yy(l,d){var p=Fee(l);d.forEach(function(v){if(!p.has(v)){p.add(v);var E=Xee.bind(null,l,v);v.then(E,E)}})}function Si(l,d){var p=d.deletions;if(p!==null)for(var v=0;v<p.length;v++){var E=p[v],C=l,V=d,$=V;e:for(;$!==null;){switch($.tag){case 27:if(cc($.type)){bn=$.stateNode,_i=!1;break e}break;case 5:bn=$.stateNode,_i=!1;break e;case 3:case 4:bn=$.stateNode.containerInfo,_i=!0;break e}$=$.return}if(bn===null)throw Error(r(160));ez(C,V,E),bn=null,_i=!1,C=E.alternate,C!==null&&(C.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)rz(d,l),d=d.sibling}var os=null;function rz(l,d){var p=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Si(d,l),Ei(l),v&4&&(nc(3,l,l.return),kg(3,l),nc(5,l,l.return));break;case 1:Si(d,l),Ei(l),v&512&&(er||p===null||Hs(p,p.return)),v&64&&Lo&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var E=os;if(Si(d,l),Ei(l),v&512&&(er||p===null||Hs(p,p.return)),v&4){var C=p!==null?p.memoizedState:null;if(v=l.memoizedState,p===null)if(v===null)if(l.stateNode===null){e:{v=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(v){case"title":C=E.getElementsByTagName("title")[0],(!C||C[Os]||C[Wn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=E.createElement(v),E.head.insertBefore(C,E.querySelector("head > title"))),Br(C,v,p),C[Wn]=l,Yn(C),v=C;break e;case"link":var V=r4("link","href",E).get(v+(p.href||""));if(V){for(var $=0;$<V.length;$++)if(C=V[$],C.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&C.getAttribute("rel")===(p.rel==null?null:p.rel)&&C.getAttribute("title")===(p.title==null?null:p.title)&&C.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){V.splice($,1);break t}}C=E.createElement(v),Br(C,v,p),E.head.appendChild(C);break;case"meta":if(V=r4("meta","content",E).get(v+(p.content||""))){for($=0;$<V.length;$++)if(C=V[$],C.getAttribute("content")===(p.content==null?null:""+p.content)&&C.getAttribute("name")===(p.name==null?null:p.name)&&C.getAttribute("property")===(p.property==null?null:p.property)&&C.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&C.getAttribute("charset")===(p.charSet==null?null:p.charSet)){V.splice($,1);break t}}C=E.createElement(v),Br(C,v,p),E.head.appendChild(C);break;default:throw Error(r(468,v))}C[Wn]=l,Yn(C),v=C}l.stateNode=v}else i4(E,l.type,l.stateNode);else l.stateNode=n4(E,v,l.memoizedProps);else C!==v?(C===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):C.count--,v===null?i4(E,l.type,l.stateNode):n4(E,v,l.memoizedProps)):v===null&&l.stateNode!==null&&YE(l,l.memoizedProps,p.memoizedProps)}break;case 27:Si(d,l),Ei(l),v&512&&(er||p===null||Hs(p,p.return)),p!==null&&v&4&&YE(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Si(d,l),Ei(l),v&512&&(er||p===null||Hs(p,p.return)),l.flags&32){E=l.stateNode;try{wi(E,"")}catch($e){Ut(l,l.return,$e)}}v&4&&l.stateNode!=null&&(E=l.memoizedProps,YE(l,E,p!==null?p.memoizedProps:E)),v&1024&&(ZE=!0);break;case 6:if(Si(d,l),Ei(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,p=l.stateNode;try{p.nodeValue=v}catch($e){Ut(l,l.return,$e)}}break;case 3:if(db=null,E=os,os=cb(d.containerInfo),Si(d,l),os=E,Ei(l),v&4&&p!==null&&p.memoizedState.isDehydrated)try{Uf(d.containerInfo)}catch($e){Ut(l,l.return,$e)}ZE&&(ZE=!1,iz(l));break;case 4:v=os,os=cb(l.stateNode.containerInfo),Si(d,l),Ei(l),os=v;break;case 12:Si(d,l),Ei(l);break;case 31:Si(d,l),Ei(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,Yy(l,v)));break;case 13:Si(d,l),Ei(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Qy=at()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,Yy(l,v)));break;case 22:E=l.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,ve=Lo,Ee=er;if(Lo=ve||E,er=Ee||re,Si(d,l),er=Ee,Lo=ve,Ei(l),v&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||re||Lo||er||Mu(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){re=p=d;try{if(C=re.stateNode,E)V=C.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{$=re.stateNode;var Ae=re.memoizedProps.style,be=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;$.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch($e){Ut(re,re.return,$e)}}}else if(d.tag===6){if(p===null){re=d;try{re.stateNode.nodeValue=E?"":re.memoizedProps}catch($e){Ut(re,re.return,$e)}}}else if(d.tag===18){if(p===null){re=d;try{var we=re.stateNode;E?Kz(we,!0):Kz(re.stateNode,!1)}catch($e){Ut(re,re.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}v&4&&(v=l.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,Yy(l,p))));break;case 19:Si(d,l),Ei(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,Yy(l,v)));break;case 30:break;case 21:break;default:Si(d,l),Ei(l)}}function Ei(l){var d=l.flags;if(d&2){try{for(var p,v=l.return;v!==null;){if(Yj(v)){p=v;break}v=v.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,C=XE(l);Wy(l,C,E);break;case 5:var V=p.stateNode;p.flags&32&&(wi(V,""),p.flags&=-33);var $=XE(l);Wy(l,$,V);break;case 3:case 4:var re=p.stateNode.containerInfo,ve=XE(l);QE(l,ve,re);break;default:throw Error(r(161))}}catch(Ee){Ut(l,l.return,Ee)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function iz(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;iz(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Bo(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Zj(l,d.alternate,d),d=d.sibling}function Mu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:nc(4,d,d.return),Mu(d);break;case 1:Hs(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&Kj(d,d.return,p),Mu(d);break;case 27:Vg(d.stateNode);case 26:case 5:Hs(d,d.return),Mu(d);break;case 22:d.memoizedState===null&&Mu(d);break;case 30:Mu(d);break;default:Mu(d)}l=l.sibling}}function Fo(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var v=d.alternate,E=l,C=d,V=C.flags;switch(C.tag){case 0:case 11:case 15:Fo(E,C,p),kg(4,C);break;case 1:if(Fo(E,C,p),v=C,E=v.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ve){Ut(v,v.return,ve)}if(v=C,E=v.updateQueue,E!==null){var $=v.stateNode;try{var re=E.shared.hiddenCallbacks;if(re!==null)for(E.shared.hiddenCallbacks=null,E=0;E<re.length;E++)MM(re[E],$)}catch(ve){Ut(v,v.return,ve)}}p&&V&64&&Hj(C),Pg(C,C.return);break;case 27:Xj(C);case 26:case 5:Fo(E,C,p),p&&v===null&&V&4&&Wj(C),Pg(C,C.return);break;case 12:Fo(E,C,p);break;case 31:Fo(E,C,p),p&&V&4&&tz(E,C);break;case 13:Fo(E,C,p),p&&V&4&&nz(E,C);break;case 22:C.memoizedState===null&&Fo(E,C,p),Pg(C,C.return);break;case 30:break;default:Fo(E,C,p)}d=d.sibling}}function JE(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&mg(p))}function eT(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&mg(l))}function ls(l,d,p,v){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)az(l,d,p,v),d=d.sibling}function az(l,d,p,v){var E=d.flags;switch(d.tag){case 0:case 11:case 15:ls(l,d,p,v),E&2048&&kg(9,d);break;case 1:ls(l,d,p,v);break;case 3:ls(l,d,p,v),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&mg(l)));break;case 12:if(E&2048){ls(l,d,p,v),l=d.stateNode;try{var C=d.memoizedProps,V=C.id,$=C.onPostCommit;typeof $=="function"&&$(V,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(re){Ut(d,d.return,re)}}else ls(l,d,p,v);break;case 31:ls(l,d,p,v);break;case 13:ls(l,d,p,v);break;case 23:break;case 22:C=d.stateNode,V=d.alternate,d.memoizedState!==null?C._visibility&2?ls(l,d,p,v):Dg(l,d):C._visibility&2?ls(l,d,p,v):(C._visibility|=2,Df(l,d,p,v,(d.subtreeFlags&10256)!==0||!1)),E&2048&&JE(V,d);break;case 24:ls(l,d,p,v),E&2048&&eT(d.alternate,d);break;default:ls(l,d,p,v)}}function Df(l,d,p,v,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var C=l,V=d,$=p,re=v,ve=V.flags;switch(V.tag){case 0:case 11:case 15:Df(C,V,$,re,E),kg(8,V);break;case 23:break;case 22:var Ee=V.stateNode;V.memoizedState!==null?Ee._visibility&2?Df(C,V,$,re,E):Dg(C,V):(Ee._visibility|=2,Df(C,V,$,re,E)),E&&ve&2048&&JE(V.alternate,V);break;case 24:Df(C,V,$,re,E),E&&ve&2048&&eT(V.alternate,V);break;default:Df(C,V,$,re,E)}d=d.sibling}}function Dg(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,v=d,E=v.flags;switch(v.tag){case 22:Dg(p,v),E&2048&&JE(v.alternate,v);break;case 24:Dg(p,v),E&2048&&eT(v.alternate,v);break;default:Dg(p,v)}d=d.sibling}}var Og=8192;function Of(l,d,p){if(l.subtreeFlags&Og)for(l=l.child;l!==null;)sz(l,d,p),l=l.sibling}function sz(l,d,p){switch(l.tag){case 26:Of(l,d,p),l.flags&Og&&l.memoizedState!==null&&Cte(p,os,l.memoizedState,l.memoizedProps);break;case 5:Of(l,d,p);break;case 3:case 4:var v=os;os=cb(l.stateNode.containerInfo),Of(l,d,p),os=v;break;case 22:l.memoizedState===null&&(v=l.alternate,v!==null&&v.memoizedState!==null?(v=Og,Og=16777216,Of(l,d,p),Og=v):Of(l,d,p));break;default:Of(l,d,p)}}function oz(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Rg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var v=d[p];Ar=v,cz(v,l)}oz(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)lz(l),l=l.sibling}function lz(l){switch(l.tag){case 0:case 11:case 15:Rg(l),l.flags&2048&&nc(9,l,l.return);break;case 3:Rg(l);break;case 12:Rg(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,Xy(l)):Rg(l);break;default:Rg(l)}}function Xy(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var v=d[p];Ar=v,cz(v,l)}oz(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:nc(8,d,d.return),Xy(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,Xy(d));break;default:Xy(d)}l=l.sibling}}function cz(l,d){for(;Ar!==null;){var p=Ar;switch(p.tag){case 0:case 11:case 15:nc(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:mg(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Ar=v;else e:for(p=l;Ar!==null;){v=Ar;var E=v.sibling,C=v.return;if(Jj(v),v===p){Ar=null;break e}if(E!==null){E.return=C,Ar=E;break e}Ar=C}}}var Uee={getCacheForType:function(l){var d=Lr(Qn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Lr(Qn).controller.signal}},$ee=typeof WeakMap=="function"?WeakMap:Map,zt=0,rn=null,yt=null,_t=0,Ft=0,Hi=null,rc=!1,Rf=!1,tT=!1,Uo=0,Rn=0,ic=0,ju=0,nT=0,Ki=0,Nf=0,Ng=null,Ti=null,rT=!1,Qy=0,uz=0,Zy=1/0,Jy=null,ac=null,ur=0,sc=null,Mf=null,$o=0,iT=0,aT=null,dz=null,Mg=0,sT=null;function Wi(){return(zt&2)!==0&&_t!==0?_t&-_t:q.T!==null?fT():ey()}function fz(){if(Ki===0)if((_t&536870912)===0||At){var l=Tn;Tn<<=1,(Tn&3932160)===0&&(Tn=262144),Ki=l}else Ki=536870912;return l=qi.current,l!==null&&(l.flags|=32),Ki}function Ai(l,d,p){(l===rn&&(Ft===2||Ft===9)||l.cancelPendingCommit!==null)&&(jf(l,0),oc(l,_t,Ki,!1)),uu(l,p),((zt&2)===0||l!==rn)&&(l===rn&&((zt&2)===0&&(ju|=p),Rn===4&&oc(l,_t,Ki,!1)),Ks(l))}function hz(l,d,p){if((zt&6)!==0)throw Error(r(327));var v=!p&&(d&127)===0&&(d&l.expiredLanes)===0||oi(l,d),E=v?Hee(l,d):lT(l,d,!0),C=v;do{if(E===0){Rf&&!v&&oc(l,d,0,!1);break}else{if(p=l.current.alternate,C&&!qee(p)){E=lT(l,d,!1),C=!1;continue}if(E===2){if(C=d,l.errorRecoveryDisabledLanes&C)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){d=V;e:{var $=l;E=Ng;var re=$.current.memoizedState.isDehydrated;if(re&&(jf($,V).flags|=256),V=lT($,V,!1),V!==2){if(tT&&!re){$.errorRecoveryDisabledLanes|=C,ju|=C,E=4;break e}C=Ti,Ti=E,C!==null&&(Ti===null?Ti=C:Ti.push.apply(Ti,C))}E=V}if(C=!1,E!==2)continue}}if(E===1){jf(l,0),oc(l,d,0,!0);break}e:{switch(v=l,C=E,C){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:oc(v,d,Ki,!rc);break e;case 2:Ti=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=Qy+300-at(),10<E)){if(oc(v,d,Ki,!rc),pa(v,0,!0)!==0)break e;$o=d,v.timeoutHandle=qz(pz.bind(null,v,p,Ti,Jy,rT,d,Ki,ju,Nf,rc,C,"Throttled",-0,0),E);break e}pz(v,p,Ti,Jy,rT,d,Ki,ju,Nf,rc,C,null,-0,0)}}break}while(!0);Ks(l)}function pz(l,d,p,v,E,C,V,$,re,ve,Ee,Ae,be,we){if(l.timeoutHandle=-1,Ae=d.subtreeFlags,Ae&8192||(Ae&16785408)===16785408){Ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ts},sz(d,C,Ae);var $e=(C&62914560)===C?Qy-at():(C&4194048)===C?uz-at():0;if($e=Ite(Ae,$e),$e!==null){$o=C,l.cancelPendingCommit=$e(_z.bind(null,l,d,C,p,v,E,V,$,re,Ee,Ae,null,be,we)),oc(l,C,V,!ve);return}}_z(l,d,C,p,v,E,V,$,re)}function qee(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var E=p[v],C=E.getSnapshot;E=E.value;try{if(!Ui(C(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function oc(l,d,p,v){d&=~nT,d&=~ju,l.suspendedLanes|=d,l.pingedLanes&=~d,v&&(l.warmLanes|=d),v=l.expirationTimes;for(var E=d;0<E;){var C=31-Mt(E),V=1<<C;v[C]=-1,E&=~V}p!==0&&du(l,p,d)}function eb(){return(zt&6)===0?(jg(0),!1):!0}function oT(){if(yt!==null){if(Ft===0)var l=yt.return;else l=yt,Oo=Cu=null,SE(l),Af=null,yg=0,l=yt;for(;l!==null;)Gj(l.alternate,l),l=l.return;yt=null}}function jf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,ute(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),$o=0,oT(),rn=l,yt=p=Po(l.current,null),_t=d,Ft=0,Hi=null,rc=!1,Rf=oi(l,d),tT=!1,Nf=Ki=nT=ju=ic=Rn=0,Ti=Ng=null,rT=!1,(d&8)!==0&&(d|=d&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=d;0<v;){var E=31-Mt(v),C=1<<E;d|=l[E],v&=~C}return Uo=d,wy(),p}function gz(l,d){dt=null,q.H=Ag,d===Tf||d===ky?(d=DM(),Ft=3):d===dE?(d=DM(),Ft=4):Ft=d===VE?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Hi=d,yt===null&&(Rn=1,$y(l,xa(d,l.current)))}function mz(){var l=qi.current;return l===null?!0:(_t&4194048)===_t?Ea===null:(_t&62914560)===_t||(_t&536870912)!==0?l===Ea:!1}function vz(){var l=q.H;return q.H=Ag,l===null?Ag:l}function yz(){var l=q.A;return q.A=Uee,l}function tb(){Rn=4,rc||(_t&4194048)!==_t&&qi.current!==null||(Rf=!0),(ic&134217727)===0&&(ju&134217727)===0||rn===null||oc(rn,_t,Ki,!1)}function lT(l,d,p){var v=zt;zt|=2;var E=vz(),C=yz();(rn!==l||_t!==d)&&(Jy=null,jf(l,d)),d=!1;var V=Rn;e:do try{if(Ft!==0&&yt!==null){var $=yt,re=Hi;switch(Ft){case 8:oT(),V=6;break e;case 3:case 2:case 9:case 6:qi.current===null&&(d=!0);var ve=Ft;if(Ft=0,Hi=null,zf(l,$,re,ve),p&&Rf){V=0;break e}break;default:ve=Ft,Ft=0,Hi=null,zf(l,$,re,ve)}}Gee(),V=Rn;break}catch(Ee){gz(l,Ee)}while(!0);return d&&l.shellSuspendCounter++,Oo=Cu=null,zt=v,q.H=E,q.A=C,yt===null&&(rn=null,_t=0,wy()),V}function Gee(){for(;yt!==null;)bz(yt)}function Hee(l,d){var p=zt;zt|=2;var v=vz(),E=yz();rn!==l||_t!==d?(Jy=null,Zy=at()+500,jf(l,d)):Rf=oi(l,d);e:do try{if(Ft!==0&&yt!==null){d=yt;var C=Hi;t:switch(Ft){case 1:Ft=0,Hi=null,zf(l,d,C,1);break;case 2:case 9:if(kM(C)){Ft=0,Hi=null,xz(d);break}d=function(){Ft!==2&&Ft!==9||rn!==l||(Ft=7),Ks(l)},C.then(d,d);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:kM(C)?(Ft=0,Hi=null,xz(d)):(Ft=0,Hi=null,zf(l,d,C,7));break;case 5:var V=null;switch(yt.tag){case 26:V=yt.memoizedState;case 5:case 27:var $=yt;if(V?a4(V):$.stateNode.complete){Ft=0,Hi=null;var re=$.sibling;if(re!==null)yt=re;else{var ve=$.return;ve!==null?(yt=ve,nb(ve)):yt=null}break t}}Ft=0,Hi=null,zf(l,d,C,5);break;case 6:Ft=0,Hi=null,zf(l,d,C,6);break;case 8:oT(),Rn=6;break e;default:throw Error(r(462))}}Kee();break}catch(Ee){gz(l,Ee)}while(!0);return Oo=Cu=null,q.H=v,q.A=E,zt=p,yt!==null?0:(rn=null,_t=0,wy(),Rn)}function Kee(){for(;yt!==null&&!Ct();)bz(yt)}function bz(l){var d=$j(l.alternate,l,Uo);l.memoizedProps=l.pendingProps,d===null?nb(l):yt=d}function xz(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=zj(p,d,d.pendingProps,d.type,void 0,_t);break;case 11:d=zj(p,d,d.pendingProps,d.type.render,d.ref,_t);break;case 5:SE(d);default:Gj(p,d),d=yt=yM(d,Uo),d=$j(p,d,Uo)}l.memoizedProps=l.pendingProps,d===null?nb(l):yt=d}function zf(l,d,p,v){Oo=Cu=null,SE(d),Af=null,yg=0;var E=d.return;try{if(Mee(l,E,d,p,_t)){Rn=1,$y(l,xa(p,l.current)),yt=null;return}}catch(C){if(E!==null)throw yt=E,C;Rn=1,$y(l,xa(p,l.current)),yt=null;return}d.flags&32768?(At||v===1?l=!0:Rf||(_t&536870912)!==0?l=!1:(rc=l=!0,(v===2||v===9||v===3||v===6)&&(v=qi.current,v!==null&&v.tag===13&&(v.flags|=16384))),wz(d,l)):nb(d)}function nb(l){var d=l;do{if((d.flags&32768)!==0){wz(d,rc);return}l=d.return;var p=Lee(d.alternate,d,Uo);if(p!==null){yt=p;return}if(d=d.sibling,d!==null){yt=d;return}yt=d=l}while(d!==null);Rn===0&&(Rn=5)}function wz(l,d){do{var p=Vee(l.alternate,l);if(p!==null){p.flags&=32767,yt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){yt=l;return}yt=l=p}while(l!==null);Rn=6,yt=null}function _z(l,d,p,v,E,C,V,$,re){l.cancelPendingCommit=null;do rb();while(ur!==0);if((zt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(C=d.lanes|d.childLanes,C|=XS,FS(l,p,C,V,$,re),l===rn&&(yt=rn=null,_t=0),Mf=d,sc=l,$o=p,iT=C,aT=E,dz=v,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Qee(Kt,function(){return Cz(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||v){v=q.T,q.T=null,E=Y.p,Y.p=2,V=zt,zt|=4;try{Bee(l,d,p)}finally{zt=V,Y.p=E,q.T=v}}ur=1,Sz(),Ez(),Tz()}}function Sz(){if(ur===1){ur=0;var l=sc,d=Mf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=q.T,q.T=null;var v=Y.p;Y.p=2;var E=zt;zt|=4;try{rz(d,l);var C=xT,V=cM(l.containerInfo),$=C.focusedElem,re=C.selectionRange;if(V!==$&&$&&$.ownerDocument&&lM($.ownerDocument.documentElement,$)){if(re!==null&&GS($)){var ve=re.start,Ee=re.end;if(Ee===void 0&&(Ee=ve),"selectionStart"in $)$.selectionStart=ve,$.selectionEnd=Math.min(Ee,$.value.length);else{var Ae=$.ownerDocument||document,be=Ae&&Ae.defaultView||window;if(be.getSelection){var we=be.getSelection(),$e=$.textContent.length,nt=Math.min(re.start,$e),Qt=re.end===void 0?nt:Math.min(re.end,$e);!we.extend&&nt>Qt&&(V=Qt,Qt=nt,nt=V);var de=oM($,nt),ue=oM($,Qt);if(de&&ue&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ue.node||we.focusOffset!==ue.offset)){var me=Ae.createRange();me.setStart(de.node,de.offset),we.removeAllRanges(),nt>Qt?(we.addRange(me),we.extend(ue.node,ue.offset)):(me.setEnd(ue.node,ue.offset),we.addRange(me))}}}}for(Ae=[],we=$;we=we.parentNode;)we.nodeType===1&&Ae.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<Ae.length;$++){var Te=Ae[$];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}gb=!!bT,xT=bT=null}finally{zt=E,Y.p=v,q.T=p}}l.current=d,ur=2}}function Ez(){if(ur===2){ur=0;var l=sc,d=Mf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=q.T,q.T=null;var v=Y.p;Y.p=2;var E=zt;zt|=4;try{Zj(l,d.alternate,d)}finally{zt=E,Y.p=v,q.T=p}}ur=3}}function Tz(){if(ur===4||ur===3){ur=0,kt();var l=sc,d=Mf,p=$o,v=dz;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ur=5:(ur=0,Mf=sc=null,Az(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(ac=null),Ao(p),d=d.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(si,d,void 0,(d.current.flags&128)===128)}catch{}if(v!==null){d=q.T,E=Y.p,Y.p=2,q.T=null;try{for(var C=l.onRecoverableError,V=0;V<v.length;V++){var $=v[V];C($.value,{componentStack:$.stack})}}finally{q.T=d,Y.p=E}}($o&3)!==0&&rb(),Ks(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===sT?Mg++:(Mg=0,sT=l):Mg=0,jg(0)}}function Az(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,mg(d)))}function rb(){return Sz(),Ez(),Tz(),Cz()}function Cz(){if(ur!==5)return!1;var l=sc,d=iT;iT=0;var p=Ao($o),v=q.T,E=Y.p;try{Y.p=32>p?32:p,q.T=null,p=aT,aT=null;var C=sc,V=$o;if(ur=0,Mf=sc=null,$o=0,(zt&6)!==0)throw Error(r(331));var $=zt;if(zt|=4,lz(C.current),az(C,C.current,V,p),zt=$,jg(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(si,C)}catch{}return!0}finally{Y.p=E,q.T=v,Az(l,d)}}function Iz(l,d,p){d=xa(p,d),d=LE(l.stateNode,d,2),l=Jl(l,d,2),l!==null&&(uu(l,2),Ks(l))}function Ut(l,d,p){if(l.tag===3)Iz(l,l,p);else for(;d!==null;){if(d.tag===3){Iz(d,l,p);break}else if(d.tag===1){var v=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ac===null||!ac.has(v))){l=xa(p,l),p=kj(2),v=Jl(d,p,2),v!==null&&(Pj(p,v,d,l),uu(v,2),Ks(v));break}}d=d.return}}function cT(l,d,p){var v=l.pingCache;if(v===null){v=l.pingCache=new $ee;var E=new Set;v.set(d,E)}else E=v.get(d),E===void 0&&(E=new Set,v.set(d,E));E.has(p)||(tT=!0,E.add(p),l=Wee.bind(null,l,d,p),d.then(l,l))}function Wee(l,d,p){var v=l.pingCache;v!==null&&v.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,rn===l&&(_t&p)===p&&(Rn===4||Rn===3&&(_t&62914560)===_t&&300>at()-Qy?(zt&2)===0&&jf(l,0):nT|=p,Nf===_t&&(Nf=0)),Ks(l)}function kz(l,d){d===0&&(d=J0()),l=Eu(l,d),l!==null&&(uu(l,d),Ks(l))}function Yee(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),kz(l,p)}function Xee(l,d){var p=0;switch(l.tag){case 31:case 13:var v=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(d),kz(l,p)}function Qee(l,d){return Ge(l,d)}var ib=null,Lf=null,uT=!1,ab=!1,dT=!1,lc=0;function Ks(l){l!==Lf&&l.next===null&&(Lf===null?ib=Lf=l:Lf=Lf.next=l),ab=!0,uT||(uT=!0,Jee())}function jg(l,d){if(!dT&&ab){dT=!0;do for(var p=!1,v=ib;v!==null;){if(l!==0){var E=v.pendingLanes;if(E===0)var C=0;else{var V=v.suspendedLanes,$=v.pingedLanes;C=(1<<31-Mt(42|l)+1)-1,C&=E&~(V&~$),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,Rz(v,C))}else C=_t,C=pa(v,v===rn?C:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(C&3)===0||oi(v,C)||(p=!0,Rz(v,C));v=v.next}while(p);dT=!1}}function Zee(){Pz()}function Pz(){ab=uT=!1;var l=0;lc!==0&&cte()&&(l=lc);for(var d=at(),p=null,v=ib;v!==null;){var E=v.next,C=Dz(v,d);C===0?(v.next=null,p===null?ib=E:p.next=E,E===null&&(Lf=p)):(p=v,(l!==0||(C&3)!==0)&&(ab=!0)),v=E}ur!==0&&ur!==5||jg(l),lc!==0&&(lc=0)}function Dz(l,d){for(var p=l.suspendedLanes,v=l.pingedLanes,E=l.expirationTimes,C=l.pendingLanes&-62914561;0<C;){var V=31-Mt(C),$=1<<V,re=E[V];re===-1?(($&p)===0||($&v)!==0)&&(E[V]=BS($,d)):re<=d&&(l.expiredLanes|=$),C&=~$}if(d=rn,p=_t,p=pa(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,p===0||l===d&&(Ft===2||Ft===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&gt(v),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||oi(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(v!==null&&gt(v),Ao(p)){case 2:case 8:p=gn;break;case 32:p=Kt;break;case 268435456:p=Xa;break;default:p=Kt}return v=Oz.bind(null,l),p=Ge(p,v),l.callbackPriority=d,l.callbackNode=p,d}return v!==null&&v!==null&&gt(v),l.callbackPriority=2,l.callbackNode=null,2}function Oz(l,d){if(ur!==0&&ur!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(rb()&&l.callbackNode!==p)return null;var v=_t;return v=pa(l,l===rn?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(hz(l,v,d),Dz(l,at()),l.callbackNode!=null&&l.callbackNode===p?Oz.bind(null,l):null)}function Rz(l,d){if(rb())return null;hz(l,d,!0)}function Jee(){dte(function(){(zt&6)!==0?Ge(ct,Zee):Pz()})}function fT(){if(lc===0){var l=Sf;l===0&&(l=vt,vt<<=1,(vt&261888)===0&&(vt=256)),lc=l}return lc}function Nz(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:lf(""+l)}function Mz(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function ete(l,d,p,v,E){if(d==="submit"&&p&&p.stateNode===E){var C=Nz((E[Er]||null).action),V=v.submitter;V&&(d=(d=V[Er]||null)?Nz(d.formAction):V.getAttribute("formAction"),d!==null&&(C=d,V=null));var $=new Bs("action","action",null,v,E);l.push({event:$,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(lc!==0){var re=V?Mz(E,V):new FormData(E);OE(p,{pending:!0,data:re,method:E.method,action:C},null,re)}}else typeof C=="function"&&($.preventDefault(),re=V?Mz(E,V):new FormData(E),OE(p,{pending:!0,data:re,method:E.method,action:C},C,re))},currentTarget:E}]})}}for(var hT=0;hT<YS.length;hT++){var pT=YS[hT],tte=pT.toLowerCase(),nte=pT[0].toUpperCase()+pT.slice(1);ss(tte,"on"+nte)}ss(fM,"onAnimationEnd"),ss(hM,"onAnimationIteration"),ss(pM,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(yee,"onTransitionRun"),ss(bee,"onTransitionStart"),ss(xee,"onTransitionCancel"),ss(gM,"onTransitionEnd"),js("onMouseEnter",["mouseout","mouseover"]),js("onMouseLeave",["mouseout","mouseover"]),js("onPointerEnter",["pointerout","pointerover"]),js("onPointerLeave",["pointerout","pointerover"]),Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zg));function jz(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var v=l[p],E=v.event;v=v.listeners;e:{var C=void 0;if(d)for(var V=v.length-1;0<=V;V--){var $=v[V],re=$.instance,ve=$.currentTarget;if($=$.listener,re!==C&&E.isPropagationStopped())break e;C=$,E.currentTarget=ve;try{C(E)}catch(Ee){xy(Ee)}E.currentTarget=null,C=re}else for(V=0;V<v.length;V++){if($=v[V],re=$.instance,ve=$.currentTarget,$=$.listener,re!==C&&E.isPropagationStopped())break e;C=$,E.currentTarget=ve;try{C(E)}catch(Ee){xy(Ee)}E.currentTarget=null,C=re}}}}function bt(l,d){var p=d[nf];p===void 0&&(p=d[nf]=new Set);var v=l+"__bubble";p.has(v)||(zz(d,l,2,!1),p.add(v))}function gT(l,d,p){var v=0;d&&(v|=4),zz(p,l,v,d)}var sb="_reactListening"+Math.random().toString(36).slice(2);function mT(l){if(!l[sb]){l[sb]=!0,Yp.forEach(function(p){p!=="selectionchange"&&(rte.has(p)||gT(p,!1,l),gT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[sb]||(d[sb]=!0,gT("selectionchange",!1,d))}}function zz(l,d,p,v){switch(f4(d)){case 2:var E=Dte;break;case 8:E=Ote;break;default:E=DT}p=E.bind(null,d,p,l),E=void 0,!mu||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),v?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function vT(l,d,p,v,E){var C=v;if((d&1)===0&&(d&2)===0&&v!==null)e:for(;;){if(v===null)return;var V=v.tag;if(V===3||V===4){var $=v.stateNode.containerInfo;if($===E)break;if(V===4)for(V=v.return;V!==null;){var re=V.tag;if((re===3||re===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;$!==null;){if(V=Rs($),V===null)return;if(re=V.tag,re===5||re===6||re===26||re===27){v=C=V;continue e}$=$.parentNode}}v=v.return}$l(function(){var ve=C,Ee=ma(p),Ae=[];e:{var be=mM.get(l);if(be!==void 0){var we=Bs,$e=l;switch(l){case"keypress":if(yu(p)===0)break e;case"keydown":case"keyup":we=vy;break;case"focusin":$e="focus",we=xu;break;case"focusout":$e="blur",we=xu;break;case"beforeblur":case"afterblur":we=xu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=ly;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=M;break;case fM:case hM:case pM:we=uy;break;case gM:we=G;break;case"scroll":case"scrollend":we=og;break;case"wheel":we=xe;break;case"copy":case"cut":case"paste":we=dy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=ko;break;case"toggle":case"beforetoggle":we=ut}var nt=(d&4)!==0,Qt=!nt&&(l==="scroll"||l==="scrollend"),de=nt?be!==null?be+"Capture":null:be;nt=[];for(var ue=ve,me;ue!==null;){var Te=ue;if(me=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||me===null||de===null||(Te=ns(ue,de),Te!=null&&nt.push(Lg(ue,Te,me))),Qt)break;ue=ue.return}0<nt.length&&(be=new we(be,$e,null,p,Ee),Ae.push({event:be,listeners:nt}))}}if((d&7)===0){e:{if(be=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",be&&p!==ig&&($e=p.relatedTarget||p.fromElement)&&(Rs($e)||$e[Ds]))break e;if((we||be)&&(be=Ee.window===Ee?Ee:(be=Ee.ownerDocument)?be.defaultView||be.parentWindow:window,we?($e=p.relatedTarget||p.toElement,we=ve,$e=$e?Rs($e):null,$e!==null&&(Qt=a($e),nt=$e.tag,$e!==Qt||nt!==5&&nt!==27&&nt!==6)&&($e=null)):(we=null,$e=ve),we!==$e)){if(nt=lg,Te="onMouseLeave",de="onMouseEnter",ue="mouse",(l==="pointerout"||l==="pointerover")&&(nt=ko,Te="onPointerLeave",de="onPointerEnter",ue="pointer"),Qt=we==null?be:Bi(we),me=$e==null?be:Bi($e),be=new nt(Te,ue+"leave",we,p,Ee),be.target=Qt,be.relatedTarget=me,Te=null,Rs(Ee)===ve&&(nt=new nt(de,ue+"enter",$e,p,Ee),nt.target=me,nt.relatedTarget=Qt,Te=nt),Qt=Te,we&&$e)t:{for(nt=ite,de=we,ue=$e,me=0,Te=de;Te;Te=nt(Te))me++;Te=0;for(var Qe=ue;Qe;Qe=nt(Qe))Te++;for(;0<me-Te;)de=nt(de),me--;for(;0<Te-me;)ue=nt(ue),Te--;for(;me--;){if(de===ue||ue!==null&&de===ue.alternate){nt=de;break t}de=nt(de),ue=nt(ue)}nt=null}else nt=null;we!==null&&Lz(Ae,be,we,nt,!1),$e!==null&&Qt!==null&&Lz(Ae,Qt,$e,nt,!0)}}e:{if(be=ve?Bi(ve):window,we=be.nodeName&&be.nodeName.toLowerCase(),we==="select"||we==="input"&&be.type==="file")var Dt=tM;else if(J2(be))if(nM)Dt=gee;else{Dt=hee;var Ke=fee}else we=be.nodeName,!we||we.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?ve&&of(ve.elementType)&&(Dt=tM):Dt=pee;if(Dt&&(Dt=Dt(l,ve))){eM(Ae,Dt,p,Ee);break e}Ke&&Ke(l,be,ve),l==="focusout"&&ve&&be.type==="number"&&ve.memoizedProps.value!=null&&tg(be,"number",be.value)}switch(Ke=ve?Bi(ve):window,l){case"focusin":(J2(Ke)||Ke.contentEditable==="true")&&(gf=Ke,HS=ve,hg=null);break;case"focusout":hg=HS=gf=null;break;case"mousedown":KS=!0;break;case"contextmenu":case"mouseup":case"dragend":KS=!1,uM(Ae,p,Ee);break;case"selectionchange":if(vee)break;case"keydown":case"keyup":uM(Ae,p,Ee)}var ht;if(jt)e:{switch(l){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else pf?wu(l,p)&&(St="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(St="onCompositionStart");St&&($s&&p.locale!=="ko"&&(pf||St!=="onCompositionStart"?St==="onCompositionEnd"&&pf&&(ht=sg()):(Vs=Ee,ag="value"in Vs?Vs.value:Vs.textContent,pf=!0)),Ke=ob(ve,St),0<Ke.length&&(St=new Us(St,l,null,p,Ee),Ae.push({event:St,listeners:Ke}),ht?St.data=ht:(ht=hf(p),ht!==null&&(St.data=ht)))),(ht=ya?lee(l,p):cee(l,p))&&(St=ob(ve,"onBeforeInput"),0<St.length&&(Ke=new Us("onBeforeInput","beforeinput",null,p,Ee),Ae.push({event:Ke,listeners:St}),Ke.data=ht)),ete(Ae,l,ve,p,Ee)}jz(Ae,d)})}function Lg(l,d,p){return{instance:l,listener:d,currentTarget:p}}function ob(l,d){for(var p=d+"Capture",v=[];l!==null;){var E=l,C=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||C===null||(E=ns(l,p),E!=null&&v.unshift(Lg(l,E,C)),E=ns(l,d),E!=null&&v.push(Lg(l,E,C))),l.tag===3)return v;l=l.return}return[]}function ite(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Lz(l,d,p,v,E){for(var C=d._reactName,V=[];p!==null&&p!==v;){var $=p,re=$.alternate,ve=$.stateNode;if($=$.tag,re!==null&&re===v)break;$!==5&&$!==26&&$!==27||ve===null||(re=ve,E?(ve=ns(p,C),ve!=null&&V.unshift(Lg(p,ve,re))):E||(ve=ns(p,C),ve!=null&&V.push(Lg(p,ve,re)))),p=p.return}V.length!==0&&l.push({event:d,listeners:V})}var ate=/\r\n?/g,ste=/\u0000|\uFFFD/g;function Vz(l){return(typeof l=="string"?l:""+l).replace(ate,`
`).replace(ste,"")}function Bz(l,d){return d=Vz(d),Vz(l)===d}function Xt(l,d,p,v,E,C){switch(p){case"children":typeof v=="string"?d==="body"||d==="textarea"&&v===""||wi(l,v):(typeof v=="number"||typeof v=="bigint")&&d!=="body"&&wi(l,""+v);break;case"className":Fi(l,"class",v);break;case"tabIndex":Fi(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Fi(l,p,v);break;case"style":rg(l,v,C);break;case"data":if(d!=="object"){Fi(l,"data",v);break}case"src":case"href":if(v===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=lf(""+v),l.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(p==="formAction"?(d!=="input"&&Xt(l,d,"name",E.name,E,null),Xt(l,d,"formEncType",E.formEncType,E,null),Xt(l,d,"formMethod",E.formMethod,E,null),Xt(l,d,"formTarget",E.formTarget,E,null)):(Xt(l,d,"encType",E.encType,E,null),Xt(l,d,"method",E.method,E,null),Xt(l,d,"target",E.target,E,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=lf(""+v),l.setAttribute(p,v);break;case"onClick":v!=null&&(l.onclick=ts);break;case"onScroll":v!=null&&bt("scroll",l);break;case"onScrollEnd":v!=null&&bt("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}p=lf(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""+v):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":v===!0?l.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,v):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(p,v):l.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(p):l.setAttribute(p,v);break;case"popover":bt("beforetoggle",l),bt("toggle",l),af(l,"popover",v);break;case"xlinkActuate":Xn(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Xn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Xn(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Xn(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Xn(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Xn(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Xn(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":af(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=oy.get(p)||p,af(l,p,v))}}function yT(l,d,p,v,E,C){switch(p){case"style":rg(l,v,C);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof v=="string"?wi(l,v):(typeof v=="number"||typeof v=="bigint")&&wi(l,""+v);break;case"onScroll":v!=null&&bt("scroll",l);break;case"onScrollEnd":v!=null&&bt("scrollend",l);break;case"onClick":v!=null&&(l.onclick=ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xp.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),C=l[Er]||null,C=C!=null?C[p]:null,typeof C=="function"&&l.removeEventListener(d,C,E),typeof v=="function")){typeof C!="function"&&C!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,v,E);break e}p in l?l[p]=v:v===!0?l.setAttribute(p,""):af(l,p,v)}}}function Br(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",l),bt("load",l);var v=!1,E=!1,C;for(C in p)if(p.hasOwnProperty(C)){var V=p[C];if(V!=null)switch(C){case"src":v=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Xt(l,d,C,V,p,null)}}E&&Xt(l,d,"srcSet",p.srcSet,p,null),v&&Xt(l,d,"src",p.src,p,null);return;case"input":bt("invalid",l);var $=C=V=E=null,re=null,ve=null;for(v in p)if(p.hasOwnProperty(v)){var Ee=p[v];if(Ee!=null)switch(v){case"name":E=Ee;break;case"type":V=Ee;break;case"checked":re=Ee;break;case"defaultChecked":ve=Ee;break;case"value":C=Ee;break;case"defaultValue":$=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(137,d));break;default:Xt(l,d,v,Ee,p,null)}}iy(l,C,$,re,ve,V,E,!1);return;case"select":bt("invalid",l),v=V=C=null;for(E in p)if(p.hasOwnProperty(E)&&($=p[E],$!=null))switch(E){case"value":C=$;break;case"defaultValue":V=$;break;case"multiple":v=$;default:Xt(l,d,E,$,p,null)}d=C,p=V,l.multiple=!!v,d!=null?Vl(l,!!v,d,!1):p!=null&&Vl(l,!!v,p,!0);return;case"textarea":bt("invalid",l),C=E=v=null;for(V in p)if(p.hasOwnProperty(V)&&($=p[V],$!=null))switch(V){case"value":v=$;break;case"defaultValue":E=$;break;case"children":C=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(r(91));break;default:Xt(l,d,V,$,p,null)}Bl(l,v,E,C);return;case"option":for(re in p)if(p.hasOwnProperty(re)&&(v=p[re],v!=null))switch(re){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Xt(l,d,re,v,p,null)}return;case"dialog":bt("beforetoggle",l),bt("toggle",l),bt("cancel",l),bt("close",l);break;case"iframe":case"object":bt("load",l);break;case"video":case"audio":for(v=0;v<zg.length;v++)bt(zg[v],l);break;case"image":bt("error",l),bt("load",l);break;case"details":bt("toggle",l);break;case"embed":case"source":case"link":bt("error",l),bt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in p)if(p.hasOwnProperty(ve)&&(v=p[ve],v!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Xt(l,d,ve,v,p,null)}return;default:if(of(d)){for(Ee in p)p.hasOwnProperty(Ee)&&(v=p[Ee],v!==void 0&&yT(l,d,Ee,v,p,void 0));return}}for($ in p)p.hasOwnProperty($)&&(v=p[$],v!=null&&Xt(l,d,$,v,p,null))}function ote(l,d,p,v){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,C=null,V=null,$=null,re=null,ve=null,Ee=null;for(we in p){var Ae=p[we];if(p.hasOwnProperty(we)&&Ae!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":re=Ae;default:v.hasOwnProperty(we)||Xt(l,d,we,null,v,Ae)}}for(var be in v){var we=v[be];if(Ae=p[be],v.hasOwnProperty(be)&&(we!=null||Ae!=null))switch(be){case"type":C=we;break;case"name":E=we;break;case"checked":ve=we;break;case"defaultChecked":Ee=we;break;case"value":V=we;break;case"defaultValue":$=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:we!==Ae&&Xt(l,d,be,we,v,Ae)}}sf(l,V,$,re,ve,Ee,C,E);return;case"select":we=V=$=be=null;for(C in p)if(re=p[C],p.hasOwnProperty(C)&&re!=null)switch(C){case"value":break;case"multiple":we=re;default:v.hasOwnProperty(C)||Xt(l,d,C,null,v,re)}for(E in v)if(C=v[E],re=p[E],v.hasOwnProperty(E)&&(C!=null||re!=null))switch(E){case"value":be=C;break;case"defaultValue":$=C;break;case"multiple":V=C;default:C!==re&&Xt(l,d,E,C,v,re)}d=$,p=V,v=we,be!=null?Vl(l,!!p,be,!1):!!v!=!!p&&(d!=null?Vl(l,!!p,d,!0):Vl(l,!!p,p?[]:"",!1));return;case"textarea":we=be=null;for($ in p)if(E=p[$],p.hasOwnProperty($)&&E!=null&&!v.hasOwnProperty($))switch($){case"value":break;case"children":break;default:Xt(l,d,$,null,v,E)}for(V in v)if(E=v[V],C=p[V],v.hasOwnProperty(V)&&(E!=null||C!=null))switch(V){case"value":be=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==C&&Xt(l,d,V,E,v,C)}ay(l,be,we);return;case"option":for(var $e in p)if(be=p[$e],p.hasOwnProperty($e)&&be!=null&&!v.hasOwnProperty($e))switch($e){case"selected":l.selected=!1;break;default:Xt(l,d,$e,null,v,be)}for(re in v)if(be=v[re],we=p[re],v.hasOwnProperty(re)&&be!==we&&(be!=null||we!=null))switch(re){case"selected":l.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:Xt(l,d,re,be,v,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in p)be=p[nt],p.hasOwnProperty(nt)&&be!=null&&!v.hasOwnProperty(nt)&&Xt(l,d,nt,null,v,be);for(ve in v)if(be=v[ve],we=p[ve],v.hasOwnProperty(ve)&&be!==we&&(be!=null||we!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,d));break;default:Xt(l,d,ve,be,v,we)}return;default:if(of(d)){for(var Qt in p)be=p[Qt],p.hasOwnProperty(Qt)&&be!==void 0&&!v.hasOwnProperty(Qt)&&yT(l,d,Qt,void 0,v,be);for(Ee in v)be=v[Ee],we=p[Ee],!v.hasOwnProperty(Ee)||be===we||be===void 0&&we===void 0||yT(l,d,Ee,be,v,we);return}}for(var de in p)be=p[de],p.hasOwnProperty(de)&&be!=null&&!v.hasOwnProperty(de)&&Xt(l,d,de,null,v,be);for(Ae in v)be=v[Ae],we=p[Ae],!v.hasOwnProperty(Ae)||be===we||be==null&&we==null||Xt(l,d,Ae,be,v,we)}function Fz(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lte(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var E=p[v],C=E.transferSize,V=E.initiatorType,$=E.duration;if(C&&$&&Fz(V)){for(V=0,$=E.responseEnd,v+=1;v<p.length;v++){var re=p[v],ve=re.startTime;if(ve>$)break;var Ee=re.transferSize,Ae=re.initiatorType;Ee&&Fz(Ae)&&(re=re.responseEnd,V+=Ee*(re<$?1:($-ve)/(re-ve)))}if(--v,d+=8*(C+V)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var bT=null,xT=null;function lb(l){return l.nodeType===9?l:l.ownerDocument}function Uz(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $z(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function wT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var _T=null;function cte(){var l=window.event;return l&&l.type==="popstate"?l===_T?!1:(_T=l,!0):(_T=null,!1)}var qz=typeof setTimeout=="function"?setTimeout:void 0,ute=typeof clearTimeout=="function"?clearTimeout:void 0,Gz=typeof Promise=="function"?Promise:void 0,dte=typeof queueMicrotask=="function"?queueMicrotask:typeof Gz<"u"?function(l){return Gz.resolve(null).then(l).catch(fte)}:qz;function fte(l){setTimeout(function(){throw l})}function cc(l){return l==="head"}function Hz(l,d){var p=d,v=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(v===0){l.removeChild(E),Uf(d);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")Vg(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,Vg(p);for(var C=p.firstChild;C;){var V=C.nextSibling,$=C.nodeName;C[Os]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&C.rel.toLowerCase()==="stylesheet"||p.removeChild(C),C=V}}else p==="body"&&Vg(l.ownerDocument.body);p=E}while(p);Uf(d)}function Kz(l,d){var p=l;l=0;do{var v=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=v}while(p)}function ST(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":ST(p),rf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function hte(l,d,p,v){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Os])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(C=l.getAttribute("rel"),C==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(C!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(C=l.getAttribute("src"),(C!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&C&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var C=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===C)return l}else return l;if(l=Ta(l.nextSibling),l===null)break}return null}function pte(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Ta(l.nextSibling),l===null))return null;return l}function Wz(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Ta(l.nextSibling),l===null))return null;return l}function ET(l){return l.data==="$?"||l.data==="$~"}function TT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function gte(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var v=function(){d(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Ta(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var AT=null;function Yz(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Ta(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function Xz(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function Qz(l,d,p){switch(d=lb(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Vg(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);rf(l)}var Aa=new Map,Zz=new Set;function cb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var qo=Y.d;Y.d={f:mte,r:vte,D:yte,C:bte,L:xte,m:wte,X:Ste,S:_te,M:Ete};function mte(){var l=qo.f(),d=eb();return l||d}function vte(l){var d=ga(l);d!==null&&d.tag===5&&d.type==="form"?gj(d):qo.r(l)}var Vf=typeof document>"u"?null:document;function Jz(l,d,p){var v=Vf;if(v&&typeof d=="string"&&d){var E=xi(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),Zz.has(E)||(Zz.add(E),l={rel:l,crossOrigin:p,href:d},v.querySelector(E)===null&&(d=v.createElement("link"),Br(d,"link",l),Yn(d),v.head.appendChild(d)))}}function yte(l){qo.D(l),Jz("dns-prefetch",l,null)}function bte(l,d){qo.C(l,d),Jz("preconnect",l,d)}function xte(l,d,p){qo.L(l,d,p);var v=Vf;if(v&&l&&d){var E='link[rel="preload"][as="'+xi(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+xi(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+xi(p.imageSizes)+'"]')):E+='[href="'+xi(l)+'"]';var C=E;switch(d){case"style":C=Bf(l);break;case"script":C=Ff(l)}Aa.has(C)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Aa.set(C,l),v.querySelector(E)!==null||d==="style"&&v.querySelector(Bg(C))||d==="script"&&v.querySelector(Fg(C))||(d=v.createElement("link"),Br(d,"link",l),Yn(d),v.head.appendChild(d)))}}function wte(l,d){qo.m(l,d);var p=Vf;if(p&&l){var v=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+xi(v)+'"][href="'+xi(l)+'"]',C=E;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Ff(l)}if(!Aa.has(C)&&(l=h({rel:"modulepreload",href:l},d),Aa.set(C,l),p.querySelector(E)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Fg(C)))return}v=p.createElement("link"),Br(v,"link",l),Yn(v),p.head.appendChild(v)}}}function _te(l,d,p){qo.S(l,d,p);var v=Vf;if(v&&l){var E=Ns(v).hoistableStyles,C=Bf(l);d=d||"default";var V=E.get(C);if(!V){var $={loading:0,preload:null};if(V=v.querySelector(Bg(C)))$.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Aa.get(C))&&CT(l,p);var re=V=v.createElement("link");Yn(re),Br(re,"link",l),re._p=new Promise(function(ve,Ee){re.onload=ve,re.onerror=Ee}),re.addEventListener("load",function(){$.loading|=1}),re.addEventListener("error",function(){$.loading|=2}),$.loading|=4,ub(V,d,v)}V={type:"stylesheet",instance:V,count:1,state:$},E.set(C,V)}}}function Ste(l,d){qo.X(l,d);var p=Vf;if(p&&l){var v=Ns(p).hoistableScripts,E=Ff(l),C=v.get(E);C||(C=p.querySelector(Fg(E)),C||(l=h({src:l,async:!0},d),(d=Aa.get(E))&&IT(l,d),C=p.createElement("script"),Yn(C),Br(C,"link",l),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(E,C))}}function Ete(l,d){qo.M(l,d);var p=Vf;if(p&&l){var v=Ns(p).hoistableScripts,E=Ff(l),C=v.get(E);C||(C=p.querySelector(Fg(E)),C||(l=h({src:l,async:!0,type:"module"},d),(d=Aa.get(E))&&IT(l,d),C=p.createElement("script"),Yn(C),Br(C,"link",l),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(E,C))}}function e4(l,d,p,v){var E=(E=ae.current)?cb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=Bf(p.href),p=Ns(E).hoistableStyles,v=p.get(d),v||(v={type:"style",instance:null,count:0,state:null},p.set(d,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Bf(p.href);var C=Ns(E).hoistableStyles,V=C.get(l);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(l,V),(C=E.querySelector(Bg(l)))&&!C._p&&(V.instance=C,V.state.loading=5),Aa.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Aa.set(l,p),C||Tte(E,l,p,V.state))),d&&v===null)throw Error(r(528,""));return V}if(d&&v!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Ff(p),p=Ns(E).hoistableScripts,v=p.get(d),v||(v={type:"script",instance:null,count:0,state:null},p.set(d,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Bf(l){return'href="'+xi(l)+'"'}function Bg(l){return'link[rel="stylesheet"]['+l+"]"}function t4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function Tte(l,d,p,v){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?v.loading=1:(d=l.createElement("link"),v.preload=d,d.addEventListener("load",function(){return v.loading|=1}),d.addEventListener("error",function(){return v.loading|=2}),Br(d,"link",p),Yn(d),l.head.appendChild(d))}function Ff(l){return'[src="'+xi(l)+'"]'}function Fg(l){return"script[async]"+l}function n4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var v=l.querySelector('style[data-href~="'+xi(p.href)+'"]');if(v)return d.instance=v,Yn(v),v;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Yn(v),Br(v,"style",E),ub(v,p.precedence,l),d.instance=v;case"stylesheet":E=Bf(p.href);var C=l.querySelector(Bg(E));if(C)return d.state.loading|=4,d.instance=C,Yn(C),C;v=t4(p),(E=Aa.get(E))&&CT(v,E),C=(l.ownerDocument||l).createElement("link"),Yn(C);var V=C;return V._p=new Promise(function($,re){V.onload=$,V.onerror=re}),Br(C,"link",v),d.state.loading|=4,ub(C,p.precedence,l),d.instance=C;case"script":return C=Ff(p.src),(E=l.querySelector(Fg(C)))?(d.instance=E,Yn(E),E):(v=p,(E=Aa.get(C))&&(v=h({},p),IT(v,E)),l=l.ownerDocument||l,E=l.createElement("script"),Yn(E),Br(E,"link",v),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(v=d.instance,d.state.loading|=4,ub(v,p.precedence,l));return d.instance}function ub(l,d,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=v.length?v[v.length-1]:null,C=E,V=0;V<v.length;V++){var $=v[V];if($.dataset.precedence===d)C=$;else if(C!==E)break}C?C.parentNode.insertBefore(l,C.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function CT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function IT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var db=null;function r4(l,d,p){if(db===null){var v=new Map,E=db=new Map;E.set(p,v)}else E=db,v=E.get(p),v||(v=new Map,E.set(p,v));if(v.has(l))return v;for(v.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var C=p[E];if(!(C[Os]||C[Wn]||l==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var V=C.getAttribute(d)||"";V=l+V;var $=v.get(V);$?$.push(C):v.set(V,[C])}}return v}function i4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function Ate(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function a4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function Cte(l,d,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=Bf(v.href),C=d.querySelector(Bg(E));if(C){d=C._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=fb.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=C,Yn(C);return}C=d.ownerDocument||d,v=t4(v),(E=Aa.get(E))&&CT(v,E),C=C.createElement("link"),Yn(C);var V=C;V._p=new Promise(function($,re){V.onload=$,V.onerror=re}),Br(C,"link",v),p.instance=C}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=fb.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var kT=0;function Ite(l,d){return l.stylesheets&&l.count===0&&pb(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var v=setTimeout(function(){if(l.stylesheets&&pb(l,l.stylesheets),l.unsuspend){var C=l.unsuspend;l.unsuspend=null,C()}},6e4+d);0<l.imgBytes&&kT===0&&(kT=62500*lte());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&pb(l,l.stylesheets),l.unsuspend)){var C=l.unsuspend;l.unsuspend=null,C()}},(l.imgBytes>kT?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(v),clearTimeout(E)}}:null}function fb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var hb=null;function pb(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,hb=new Map,d.forEach(kte,l),hb=null,fb.call(l))}function kte(l,d){if(!(d.state.loading&4)){var p=hb.get(l);if(p)var v=p.get(null);else{p=new Map,hb.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<E.length;C++){var V=E[C];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(p.set(V.dataset.precedence,V),v=V)}v&&p.set(null,v)}E=d.instance,V=E.getAttribute("data-precedence"),C=p.get(V)||v,C===v&&p.set(null,E),p.set(V,E),this.count++,v=fb.bind(this),E.addEventListener("load",v),E.addEventListener("error",v),C?C.parentNode.insertBefore(E,C.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var Ug={$$typeof:I,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Pte(l,d,p,v,E,C,V,$,re){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ps(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ps(0),this.hiddenUpdates=Ps(null),this.identifierPrefix=v,this.onUncaughtError=E,this.onCaughtError=C,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function s4(l,d,p,v,E,C,V,$,re,ve,Ee,Ae){return l=new Pte(l,d,p,V,re,ve,Ee,Ae,$),d=1,C===!0&&(d|=24),C=$i(3,null,null,d),l.current=C,C.stateNode=l,d=lE(),d.refCount++,l.pooledCache=d,d.refCount++,C.memoizedState={element:v,isDehydrated:p,cache:d},fE(C),l}function o4(l){return l?(l=yf,l):yf}function l4(l,d,p,v,E,C){E=o4(E),v.context===null?v.context=E:v.pendingContext=E,v=Zl(d),v.payload={element:p},C=C===void 0?null:C,C!==null&&(v.callback=C),p=Jl(l,v,d),p!==null&&(Ai(p,l,d),xg(p,l,d))}function c4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function PT(l,d){c4(l,d),(l=l.alternate)&&c4(l,d)}function u4(l){if(l.tag===13||l.tag===31){var d=Eu(l,67108864);d!==null&&Ai(d,l,67108864),PT(l,67108864)}}function d4(l){if(l.tag===13||l.tag===31){var d=Wi();d=fu(d);var p=Eu(l,d);p!==null&&Ai(p,l,d),PT(l,d)}}var gb=!0;function Dte(l,d,p,v){var E=q.T;q.T=null;var C=Y.p;try{Y.p=2,DT(l,d,p,v)}finally{Y.p=C,q.T=E}}function Ote(l,d,p,v){var E=q.T;q.T=null;var C=Y.p;try{Y.p=8,DT(l,d,p,v)}finally{Y.p=C,q.T=E}}function DT(l,d,p,v){if(gb){var E=OT(v);if(E===null)vT(l,d,v,mb,p),h4(l,v);else if(Nte(E,l,d,p,v))v.stopPropagation();else if(h4(l,v),d&4&&-1<Rte.indexOf(l)){for(;E!==null;){var C=ga(E);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var V=Vi(C.pendingLanes);if(V!==0){var $=C;for($.pendingLanes|=2,$.entangledLanes|=2;V;){var re=1<<31-Mt(V);$.entanglements[1]|=re,V&=~re}Ks(C),(zt&6)===0&&(Zy=at()+500,jg(0))}}break;case 31:case 13:$=Eu(C,2),$!==null&&Ai($,C,2),eb(),PT(C,2)}if(C=OT(v),C===null&&vT(l,d,v,mb,p),C===E)break;E=C}E!==null&&v.stopPropagation()}else vT(l,d,v,null,p)}}function OT(l){return l=ma(l),RT(l)}var mb=null;function RT(l){if(mb=null,l=Rs(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return mb=l,null}function f4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case ct:return 2;case gn:return 8;case Kt:case Mr:return 32;case Xa:return 268435456;default:return 32}default:return 32}}var NT=!1,uc=null,dc=null,fc=null,$g=new Map,qg=new Map,hc=[],Rte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h4(l,d){switch(l){case"focusin":case"focusout":uc=null;break;case"dragenter":case"dragleave":dc=null;break;case"mouseover":case"mouseout":fc=null;break;case"pointerover":case"pointerout":$g.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":qg.delete(d.pointerId)}}function Gg(l,d,p,v,E,C){return l===null||l.nativeEvent!==C?(l={blockedOn:d,domEventName:p,eventSystemFlags:v,nativeEvent:C,targetContainers:[E]},d!==null&&(d=ga(d),d!==null&&u4(d)),l):(l.eventSystemFlags|=v,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function Nte(l,d,p,v,E){switch(d){case"focusin":return uc=Gg(uc,l,d,p,v,E),!0;case"dragenter":return dc=Gg(dc,l,d,p,v,E),!0;case"mouseover":return fc=Gg(fc,l,d,p,v,E),!0;case"pointerover":var C=E.pointerId;return $g.set(C,Gg($g.get(C)||null,l,d,p,v,E)),!0;case"gotpointercapture":return C=E.pointerId,qg.set(C,Gg(qg.get(C)||null,l,d,p,v,E)),!0}return!1}function p4(l){var d=Rs(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,Ja(l.priority,function(){d4(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,Ja(l.priority,function(){d4(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function vb(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=OT(l.nativeEvent);if(p===null){p=l.nativeEvent;var v=new p.constructor(p.type,p);ig=v,p.target.dispatchEvent(v),ig=null}else return d=ga(p),d!==null&&u4(d),l.blockedOn=p,!1;d.shift()}return!0}function g4(l,d,p){vb(l)&&p.delete(d)}function Mte(){NT=!1,uc!==null&&vb(uc)&&(uc=null),dc!==null&&vb(dc)&&(dc=null),fc!==null&&vb(fc)&&(fc=null),$g.forEach(g4),qg.forEach(g4)}function yb(l,d){l.blockedOn===d&&(l.blockedOn=null,NT||(NT=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Mte)))}var bb=null;function m4(l){bb!==l&&(bb=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bb===l&&(bb=null);for(var d=0;d<l.length;d+=3){var p=l[d],v=l[d+1],E=l[d+2];if(typeof v!="function"){if(RT(v||p)===null)continue;break}var C=ga(p);C!==null&&(l.splice(d,3),d-=3,OE(C,{pending:!0,data:E,method:p.method,action:v},v,E))}}))}function Uf(l){function d(re){return yb(re,l)}uc!==null&&yb(uc,l),dc!==null&&yb(dc,l),fc!==null&&yb(fc,l),$g.forEach(d),qg.forEach(d);for(var p=0;p<hc.length;p++){var v=hc[p];v.blockedOn===l&&(v.blockedOn=null)}for(;0<hc.length&&(p=hc[0],p.blockedOn===null);)p4(p),p.blockedOn===null&&hc.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var E=p[v],C=p[v+1],V=E[Er]||null;if(typeof C=="function")V||m4(p);else if(V){var $=null;if(C&&C.hasAttribute("formAction")){if(E=C,V=C[Er]||null)$=V.formAction;else if(RT(E)!==null)continue}else $=V.action;typeof $=="function"?p[v+1]=$:(p.splice(v,3),v-=3),m4(p)}}}function v4(){function l(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function MT(l){this._internalRoot=l}xb.prototype.render=MT.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,v=Wi();l4(p,v,l,d,null,null)},xb.prototype.unmount=MT.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;l4(l.current,2,null,l,null,null),eb(),d[Ds]=null}};function xb(l){this._internalRoot=l}xb.prototype.unstable_scheduleHydration=function(l){if(l){var d=ey();l={blockedOn:null,target:l,priority:d};for(var p=0;p<hc.length&&d!==0&&d<hc[p].priority;p++);hc.splice(p,0,l),p===0&&p4(l)}};var y4=e.version;if(y4!=="19.2.0")throw Error(r(527,y4,"19.2.0"));Y.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var jte={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wb.isDisabled&&wb.supportsFiber)try{si=wb.inject(jte),mn=wb}catch{}}return Kg.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,v="",E=Tj,C=Aj,V=Cj;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(C=d.onCaughtError),d.onRecoverableError!==void 0&&(V=d.onRecoverableError)),d=s4(l,1,!1,null,null,p,v,null,E,C,V,v4),l[Ds]=d.current,mT(l),new MT(d)},Kg.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var v=!1,E="",C=Tj,V=Aj,$=Cj,re=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(C=p.onUncaughtError),p.onCaughtError!==void 0&&(V=p.onCaughtError),p.onRecoverableError!==void 0&&($=p.onRecoverableError),p.formState!==void 0&&(re=p.formState)),d=s4(l,1,!0,d,p??null,v,E,re,C,V,$,v4),d.context=o4(null),p=d.current,v=Wi(),v=fu(v),E=Zl(v),E.callback=null,Jl(p,E,v),p=v,d.current.lanes=p,uu(d,p),Ks(d),l[Ds]=d.current,mT(l),new xb(d)},Kg.version="19.2.0",Kg}var I4;function Kte(){if(I4)return LT.exports;I4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),LT.exports=Hte(),LT.exports}var Wte=Kte();const Yte="modulepreload",Xte=function(t){return"/personal-budget-pwa/"+t},k4={},Km=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=Xte(u),u in k4)return;k4[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Yte,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((m,b)=>{g.addEventListener("load",m),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Qte(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await Km(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const Zte=()=>{};var P4={};const l$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jte=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},hD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,m=u&63;c||(m=64,s||(g=64)),r.push(n[f],n[h],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jte(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new ene;const g=a<<2|o>>4;if(r.push(g),u!==64){const m=o<<4&240|u>>2;if(r.push(m),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ene extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tne=function(t){const e=l$(t);return hD.encodeByteArray(e,!0)},c$=function(t){return tne(t).replace(/\./g,"")},u$=function(t){try{return hD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nne=()=>pD().__FIREBASE_DEFAULTS__,rne=()=>{if(typeof process>"u"||typeof P4>"u")return;const t=P4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ine=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&u$(t[1]);return e&&JSON.parse(e)},F1=()=>{try{return Zte()||nne()||rne()||ine()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},d$=t=>F1()?.emulatorHosts?.[t],ane=t=>{const e=d$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},f$=()=>F1()?.config,h$=t=>F1()?.[`_${t}`];class Wm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function eu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gD(t){return(await fetch(t,{credentials:"include"})).ok}const Em={};function sne(){const t={prod:[],emulator:[]};for(const e of Object.keys(Em))Em[e]?t.emulator.push(e):t.prod.push(e);return t}function one(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let D4=!1;function p$(t,e){if(typeof window>"u"||typeof document>"u"||!eu(window.location.host)||Em[t]===e||Em[t]||D4)return;Em[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=sne().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{D4=!0,s()},g}function f(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=one(r),m=n("text"),b=document.getElementById(m)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;o(I),f(w,x);const R=u();c(T,S),I.append(T,b,w,R),document.body.appendChild(I)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function yr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yr())}function g$(){const t=F1()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cne(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function une(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dne(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fne(){const t=yr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m$(){return!g$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v$(){return!g$()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function U1(){try{return typeof indexedDB=="object"}catch{return!1}}function hne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const pne="FirebaseError";class wo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pne,Object.setPrototypeOf(this,wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bp.prototype.create)}}class bp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?gne(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new wo(i,o,r)}}function gne(t,e){return t.replace(mne,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mne=/\{\$([^}]+)}/g;function vne(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(O4(a)&&O4(s)){if(!Uc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function O4(t){return t!==null&&typeof t=="object"}function Hv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function um(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function dm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yne(t,e){const n=new bne(t,e);return n.subscribe.bind(n)}class bne{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");xne(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=UT),i.error===void 0&&(i.error=UT),i.complete===void 0&&(i.complete=UT);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xne(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function UT(){}const wne=1e3,_ne=2,Sne=14400*1e3,Ene=.5;function Tne(t,e=wne,n=_ne){const r=e*Math.pow(n,t),i=Math.round(Ene*r*(Math.random()-.5)*2);return Math.min(Sne,r+i)}function Vt(t){return t&&t._delegate?t._delegate:t}let go=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const Bu="[DEFAULT]";let Ane=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Wm;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ine(e))try{this.getOrInitializeService({instanceIdentifier:Bu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Bu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bu){return this.instances.has(e)}getOptions(e=Bu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cne(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bu){return this.component?this.component.multipleInstances?e:Bu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Cne(t){return t===Bu?void 0:t}function Ine(t){return t.instantiationMode==="EAGER"}class kne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ane(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Et||(Et={}));const Pne={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},Dne=Et.INFO,One={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},Rne=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=One[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $1{constructor(e){this.name=e,this._logLevel=Dne,this._logHandler=Rne,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pne[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const Nne=(t,e)=>e.some(n=>t instanceof n);let R4,N4;function Mne(){return R4||(R4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jne(){return N4||(N4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y$=new WeakMap,kI=new WeakMap,b$=new WeakMap,$T=new WeakMap,mD=new WeakMap;function zne(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Mc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&y$.set(n,t)}).catch(()=>{}),mD.set(e,t),e}function Lne(t){if(kI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});kI.set(t,e)}let PI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||b$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vne(t){PI=t(PI)}function Bne(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qT(this),e,...n);return b$.set(r,e.sort?e.sort():[e]),Mc(r)}:jne().includes(t)?function(...e){return t.apply(qT(this),e),Mc(y$.get(this))}:function(...e){return Mc(t.apply(qT(this),e))}}function Fne(t){return typeof t=="function"?Bne(t):(t instanceof IDBTransaction&&Lne(t),Nne(t,Mne())?new Proxy(t,PI):t)}function Mc(t){if(t instanceof IDBRequest)return zne(t);if($T.has(t))return $T.get(t);const e=Fne(t);return e!==t&&($T.set(t,e),mD.set(e,t)),e}const qT=t=>mD.get(t);function Une(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=Mc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Mc(s.result),c.oldVersion,c.newVersion,Mc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const $ne=["get","getKey","getAll","getAllKeys","count"],qne=["put","add","delete","clear"],GT=new Map;function M4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(GT.get(e))return GT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qne.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$ne.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return GT.set(e,a),a}Vne(t=>({...t,get:(e,n,r)=>M4(e,n)||t.get(e,n,r),has:(e,n)=>!!M4(e,n)||t.has(e,n)}));class Gne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hne(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Hne(t){return t.getComponent()?.type==="VERSION"}const DI="@firebase/app",j4="0.14.6";const cl=new $1("@firebase/app"),Kne="@firebase/app-compat",Wne="@firebase/analytics-compat",Yne="@firebase/analytics",Xne="@firebase/app-check-compat",Qne="@firebase/app-check",Zne="@firebase/auth",Jne="@firebase/auth-compat",ere="@firebase/database",tre="@firebase/data-connect",nre="@firebase/database-compat",rre="@firebase/functions",ire="@firebase/functions-compat",are="@firebase/installations",sre="@firebase/installations-compat",ore="@firebase/messaging",lre="@firebase/messaging-compat",cre="@firebase/performance",ure="@firebase/performance-compat",dre="@firebase/remote-config",fre="@firebase/remote-config-compat",hre="@firebase/storage",pre="@firebase/storage-compat",gre="@firebase/firestore",mre="@firebase/ai",vre="@firebase/firestore-compat",yre="firebase",bre="12.6.0";const OI="[DEFAULT]",xre={[DI]:"fire-core",[Kne]:"fire-core-compat",[Yne]:"fire-analytics",[Wne]:"fire-analytics-compat",[Qne]:"fire-app-check",[Xne]:"fire-app-check-compat",[Zne]:"fire-auth",[Jne]:"fire-auth-compat",[ere]:"fire-rtdb",[tre]:"fire-data-connect",[nre]:"fire-rtdb-compat",[rre]:"fire-fn",[ire]:"fire-fn-compat",[are]:"fire-iid",[sre]:"fire-iid-compat",[ore]:"fire-fcm",[lre]:"fire-fcm-compat",[cre]:"fire-perf",[ure]:"fire-perf-compat",[dre]:"fire-rc",[fre]:"fire-rc-compat",[hre]:"fire-gcs",[pre]:"fire-gcs-compat",[gre]:"fire-fst",[vre]:"fire-fst-compat",[mre]:"fire-vertex","fire-js":"fire-js",[yre]:"fire-js-all"};const Yx=new Map,wre=new Map,RI=new Map;function z4(t,e){try{t.container.addComponent(e)}catch(n){cl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ul(t){const e=t.name;if(RI.has(e))return cl.debug(`There were multiple attempts to register component ${e}.`),!1;RI.set(e,t);for(const n of Yx.values())z4(n,t);for(const n of wre.values())z4(n,t);return!0}function xp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ta(t){return t==null?!1:t.settings!==void 0}const _re={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jc=new bp("app","Firebase",_re);class Sre{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jc.create("app-deleted",{appName:this._name})}}const wp=bre;function x$(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:OI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw jc.create("bad-app-name",{appName:String(i)});if(n||(n=f$()),!n)throw jc.create("no-options");const a=Yx.get(i);if(a){if(Uc(n,a.options)&&Uc(r,a.config))return a;throw jc.create("duplicate-app",{appName:i})}const s=new kne(i);for(const c of RI.values())s.addComponent(c);const o=new Sre(n,r,s);return Yx.set(i,o),o}function vD(t=OI){const e=Yx.get(t);if(!e&&t===OI&&f$())return x$();if(!e)throw jc.create("no-app",{appName:t});return e}function vs(t,e,n){let r=xre[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cl.warn(s.join(" "));return}ul(new go(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Ere="firebase-heartbeat-database",Tre=1,Ym="firebase-heartbeat-store";let HT=null;function w$(){return HT||(HT=Une(Ere,Tre,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ym)}catch(n){console.warn(n)}}}}).catch(t=>{throw jc.create("idb-open",{originalErrorMessage:t.message})})),HT}async function Are(t){try{const n=(await w$()).transaction(Ym),r=await n.objectStore(Ym).get(_$(t));return await n.done,r}catch(e){if(e instanceof wo)cl.warn(e.message);else{const n=jc.create("idb-get",{originalErrorMessage:e?.message});cl.warn(n.message)}}}async function L4(t,e){try{const r=(await w$()).transaction(Ym,"readwrite");await r.objectStore(Ym).put(e,_$(t)),await r.done}catch(n){if(n instanceof wo)cl.warn(n.message);else{const r=jc.create("idb-set",{originalErrorMessage:n?.message});cl.warn(r.message)}}}function _$(t){return`${t.name}!${t.options.appId}`}const Cre=1024,Ire=30;class kre{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Dre(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=V4();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Ire){const i=Ore(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){cl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=V4(),{heartbeatsToSend:n,unsentEntries:r}=Pre(this._heartbeatsCache.heartbeats),i=c$(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return cl.warn(e),""}}}function V4(){return new Date().toISOString().substring(0,10)}function Pre(t,e=Cre){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),B4(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),B4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Dre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U1()?hne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Are(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return L4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return L4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function B4(t){return c$(JSON.stringify({version:2,heartbeats:t})).length}function Ore(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Rre(t){ul(new go("platform-logger",e=>new Gne(e),"PRIVATE")),ul(new go("heartbeat",e=>new kre(e),"PRIVATE")),vs(DI,j4,t),vs(DI,j4,"esm2020"),vs("fire-js","")}Rre("");function S$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nre=S$,E$=new bp("auth","Firebase",S$());const Xx=new $1("@firebase/auth");function Mre(t,...e){Xx.logLevel<=Et.WARN&&Xx.warn(`Auth (${wp}): ${t}`,...e)}function xx(t,...e){Xx.logLevel<=Et.ERROR&&Xx.error(`Auth (${wp}): ${t}`,...e)}function ws(t,...e){throw yD(t,...e)}function io(t,...e){return yD(t,...e)}function T$(t,e,n){const r={...Nre(),[e]:n};return new bp("auth","Firebase",r).create(e,{appName:t.name})}function nl(t){return T$(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yD(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return E$.create(t,...e)}function et(t,e,...n){if(!t)throw yD(e,...n)}function Xo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xx(e),new Error(e)}function dl(t,e){t||Xo(e)}function NI(){return typeof self<"u"&&self.location?.href||""}function jre(){return F4()==="http:"||F4()==="https:"}function F4(){return typeof self<"u"&&self.location?.protocol||null}function zre(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jre()||une()||"connection"in navigator)?navigator.onLine:!0}function Lre(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Kv{constructor(e,n){this.shortDelay=e,this.longDelay=n,dl(n>e,"Short delay should be less than long delay!"),this.isMobile=lne()||dne()}get(){return zre()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bD(t,e){dl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class A${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vre={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Bre=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fre=new Kv(3e4,6e4);function As(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ga(t,e,n,r,i={}){return C$(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=Hv({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return cne()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&eu(t.emulatorConfig.host)&&(u.credentials="include"),A$.fetch()(await I$(t,t.config.apiHost,n,o),u)})}async function C$(t,e,n){t._canInitEmulator=!1;const r={...Vre,...e};try{const i=new $re(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw _b(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw _b(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw _b(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw _b(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw T$(t,f,u);ws(t,f)}}catch(i){if(i instanceof wo)throw i;ws(t,"network-request-failed",{message:String(i)})}}async function Wv(t,e,n,r,i={}){const a=await Ga(t,e,n,r,i);return"mfaPendingCredential"in a&&ws(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function I$(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?bD(t.config,i):`${t.config.apiScheme}://${i}`;return Bre.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function Ure(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $re{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(io(this.auth,"network-request-failed")),Fre.get())})}}function _b(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=io(t,e,r);return i.customData._tokenResponse=n,i}function U4(t){return t!==void 0&&t.enterprise!==void 0}class qre{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ure(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Gre(t,e){return Ga(t,"GET","/v2/recaptchaConfig",As(t,e))}async function Hre(t,e){return Ga(t,"POST","/v1/accounts:delete",e)}async function Qx(t,e){return Ga(t,"POST","/v1/accounts:lookup",e)}function Tm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Kre(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),i=xD(r);et(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:Tm(KT(i.auth_time)),issuedAtTime:Tm(KT(i.iat)),expirationTime:Tm(KT(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function KT(t){return Number(t)*1e3}function xD(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xx("JWT malformed, contained fewer than 3 sections"),null;try{const i=u$(n);return i?JSON.parse(i):(xx("Failed to decode base64 JWT payload"),null)}catch(i){return xx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $4(t){const e=xD(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function jh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wo&&Wre(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Wre({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Yre{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class MI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tm(this.lastLoginAt),this.creationTime=Tm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Zx(t){const e=t.auth,n=await t.getIdToken(),r=await jh(t,Qx(e,{idToken:n}));et(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?k$(i.providerUserInfo):[],s=Qre(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new MI(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Xre(t){const e=Vt(t);await Zx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qre(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function k$(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Zre(t,e){const n=await C$(t,{},async()=>{const r=Hv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await I$(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&eu(t.emulatorConfig.host)&&(c.credentials="include"),A$.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jre(t,e){return Ga(t,"POST","/v2/accounts:revokeToken",As(t,e))}class Ah{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=$4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Zre(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Ah;return r&&(et(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(et(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(et(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ah,this.toJSON())}_performRefresh(){return Xo("not implemented")}}function gc(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Yre(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new MI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await jh(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Kre(this,e)}reload(){return Xre(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zx(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ta(this.auth.app))return Promise.reject(nl(this.auth));const e=await this.getIdToken();return await jh(this,Hre(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:m,providerData:b,stsTokenManager:x}=n;et(h&&x,e,"internal-error");const w=Ah.fromJSON(this.name,x);et(typeof h=="string",e,"internal-error"),gc(r,e.name),gc(i,e.name),et(typeof g=="boolean",e,"internal-error"),et(typeof m=="boolean",e,"internal-error"),gc(a,e.name),gc(s,e.name),gc(o,e.name),gc(c,e.name),gc(u,e.name),gc(f,e.name);const S=new gs({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:m,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(T=>({...T}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ah;i.updateFromServerResponse(n);const a=new gs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Zx(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];et(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?k$(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new Ah;o.updateFromIdToken(r);const c=new gs({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new MI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const q4=new Map;function Qo(t){dl(t instanceof Function,"Expected a class definition");let e=q4.get(t);return e?(dl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,q4.set(t,e),e)}class P${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}P$.type="NONE";const G4=P$;function wx(t,e,n){return`firebase:${t}:${e}:${n}`}class Ch{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=wx(this.userKey,i.apiKey,a),this.fullPersistenceKey=wx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qx(this.auth,{idToken:e}).catch(()=>{});return n?gs._fromGetAccountInfoResponse(this.auth,n,e):null}return gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ch(Qo(G4),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Qo(G4);const s=wx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await Qx(e,{idToken:f}).catch(()=>{});if(!g)break;h=await gs._fromGetAccountInfoResponse(e,g,f)}else h=gs._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Ch(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new Ch(a,e,r))}}function H4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(N$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j$(e))return"Blackberry";if(z$(e))return"Webos";if(O$(e))return"Safari";if((e.includes("chrome/")||R$(e))&&!e.includes("edge/"))return"Chrome";if(M$(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function D$(t=yr()){return/firefox\//i.test(t)}function O$(t=yr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R$(t=yr()){return/crios\//i.test(t)}function N$(t=yr()){return/iemobile/i.test(t)}function M$(t=yr()){return/android/i.test(t)}function j$(t=yr()){return/blackberry/i.test(t)}function z$(t=yr()){return/webos/i.test(t)}function wD(t=yr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eie(t=yr()){return wD(t)&&!!window.navigator?.standalone}function tie(){return fne()&&document.documentMode===10}function L$(t=yr()){return wD(t)||M$(t)||z$(t)||j$(t)||/windows phone/i.test(t)||N$(t)}function V$(t,e=[]){let n;switch(t){case"Browser":n=H4(yr());break;case"Worker":n=`${H4(yr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wp}/${r}`}class nie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function rie(t,e={}){return Ga(t,"GET","/v2/passwordPolicy",As(t,e))}const iie=6;class aie{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iie,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class sie{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K4(this),this.idTokenSubscription=new K4(this),this.beforeStateQueue=new nie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qo(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ch.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qx(this,{idToken:e}),r=await gs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ta(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zx(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lre()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ta(this.app))return Promise.reject(nl(this));const n=e?Vt(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ta(this.app)?Promise.reject(nl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ta(this.app)?Promise.reject(nl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rie(this),n=new aie(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jre(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qo(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await Ch.create(this,[Qo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ta(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Mre(`Error while retrieving App Check token: ${e.error}`),e?.token}}function tu(t){return Vt(t)}class K4{constructor(e){this.auth=e,this.observer=null,this.addObserver=yne(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let q1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oie(t){q1=t}function B$(t){return q1.loadJS(t)}function lie(){return q1.recaptchaEnterpriseScript}function cie(){return q1.gapiScript}function uie(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class die{constructor(){this.enterprise=new fie}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fie{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hie="recaptcha-enterprise",F$="NO_RECAPTCHA";class pie{constructor(e){this.type=hie,this.auth=tu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{Gre(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new qre(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;U4(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(F$)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new die().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&U4(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=lie();c.length!==0&&(c+=o),B$(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function W4(t,e,n,r=!1,i=!1){const a=new pie(t);let s;if(i)s=F$;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Jx(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await W4(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await W4(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function gie(t,e){const n=xp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Uc(a,e??{}))return i;ws(i,"already-initialized")}return n.initialize({options:e})}function mie(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Qo);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function vie(t,e,n){const r=tu(t);et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=U$(e),{host:s,port:o}=yie(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),et(Uc(u,r.config.emulator)&&Uc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,eu(s)?(gD(`${a}//${s}${c}`),p$("Auth",!0)):bie()}function U$(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yie(t){const e=U$(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Y4(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:Y4(s)}}}function Y4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bie(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class _D{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xo("not implemented")}_getIdTokenResponse(e){return Xo("not implemented")}_linkToIdToken(e,n){return Xo("not implemented")}_getReauthenticationResolver(e){return Xo("not implemented")}}async function xie(t,e){return Ga(t,"POST","/v1/accounts:resetPassword",As(t,e))}async function wie(t,e){return Ga(t,"POST","/v1/accounts:signUp",e)}async function _ie(t,e){return Ga(t,"POST","/v1/accounts:update",As(t,e))}async function Sie(t,e){return Wv(t,"POST","/v1/accounts:signInWithPassword",As(t,e))}async function $$(t,e){return Ga(t,"POST","/v1/accounts:sendOobCode",As(t,e))}async function Eie(t,e){return $$(t,e)}async function Tie(t,e){return $$(t,e)}async function Aie(t,e){return Wv(t,"POST","/v1/accounts:signInWithEmailLink",As(t,e))}async function Cie(t,e){return Wv(t,"POST","/v1/accounts:signInWithEmailLink",As(t,e))}class Xm extends _D{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Xm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jx(e,n,"signInWithPassword",Sie);case"emailLink":return Aie(e,{email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jx(e,r,"signUpPassword",wie);case"emailLink":return Cie(e,{idToken:n,email:this._email,oobCode:this._password});default:ws(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ih(t,e){return Wv(t,"POST","/v1/accounts:signInWithIdp",As(t,e))}const Iie="http://localhost";class wd extends _D{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ws("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new wd(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Ih(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ih(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ih(e,n)}buildRequest(){const e={requestUri:Iie,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hv(n)}return e}}function kie(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Pie(t){const e=um(dm(t)).link,n=e?um(dm(e)).deep_link_id:null,r=um(dm(t)).deep_link_id;return(r?um(dm(r)).link:null)||r||n||e||t}class SD{constructor(e){const n=um(dm(e)),r=n.apiKey??null,i=n.oobCode??null,a=kie(n.mode??null);et(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Pie(e);try{return new SD(n)}catch{return null}}}class qd{constructor(){this.providerId=qd.PROVIDER_ID}static credential(e,n){return Xm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=SD.parseLink(n);return et(r,"argument-error"),Xm._fromEmailAndCode(e,r.code,r.tenantId)}}qd.PROVIDER_ID="password";qd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class q${constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Yv extends q${constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sc extends Yv{constructor(){super("facebook.com")}static credential(e){return wd._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sc.credentialFromTaggedObject(e)}static credentialFromError(e){return Sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sc.credential(e.oauthAccessToken)}catch{return null}}}Sc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sc.PROVIDER_ID="facebook.com";class Ec extends Yv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wd._fromParams({providerId:Ec.PROVIDER_ID,signInMethod:Ec.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ec.credentialFromTaggedObject(e)}static credentialFromError(e){return Ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ec.credential(n,r)}catch{return null}}}Ec.GOOGLE_SIGN_IN_METHOD="google.com";Ec.PROVIDER_ID="google.com";class Tc extends Yv{constructor(){super("github.com")}static credential(e){return wd._fromParams({providerId:Tc.PROVIDER_ID,signInMethod:Tc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tc.credentialFromTaggedObject(e)}static credentialFromError(e){return Tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tc.credential(e.oauthAccessToken)}catch{return null}}}Tc.GITHUB_SIGN_IN_METHOD="github.com";Tc.PROVIDER_ID="github.com";class Ac extends Yv{constructor(){super("twitter.com")}static credential(e,n){return wd._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ac.credential(n,r)}catch{return null}}}Ac.TWITTER_SIGN_IN_METHOD="twitter.com";Ac.PROVIDER_ID="twitter.com";async function Die(t,e){return Wv(t,"POST","/v1/accounts:signUp",As(t,e))}class _d{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await gs._fromIdTokenResponse(e,r,i),s=X4(r);return new _d({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=X4(r);return new _d({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function X4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ew extends wo{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ew.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ew(e,n,r,i)}}function G$(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ew._fromErrorAndOperation(t,a,e,r):a})}async function Oie(t,e,n=!1){const r=await jh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _d._forOperation(t,"link",r)}async function H$(t,e,n=!1){const{auth:r}=t;if(ta(r.app))return Promise.reject(nl(r));const i="reauthenticate";try{const a=await jh(t,G$(r,i,e,t),n);et(a.idToken,r,"internal-error");const s=xD(a.idToken);et(s,r,"internal-error");const{sub:o}=s;return et(t.uid===o,r,"user-mismatch"),_d._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ws(r,"user-mismatch"),a}}async function K$(t,e,n=!1){if(ta(t.app))return Promise.reject(nl(t));const r="signIn",i=await G$(t,r,e),a=await _d._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Rie(t,e){return K$(tu(t),e)}async function Nie(t,e){return H$(Vt(t),e)}function Mie(t,e,n){et(n.url?.length>0,t,"invalid-continue-uri"),et(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),et(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(et(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(et(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function ED(t){const e=tu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jie(t,e,n){const r=tu(t);await Jx(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Tie)}async function zie(t,e,n){await xie(Vt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ED(t),r})}async function Lie(t,e){await _ie(Vt(t),{oobCode:e})}async function Vie(t,e,n){if(ta(t.app))return Promise.reject(nl(t));const r=tu(t),s=await Jx(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Die).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ED(t),c}),o=await _d._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Bie(t,e,n){return ta(t.app)?Promise.reject(nl(t)):Rie(Vt(t),qd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ED(t),r})}async function Q4(t,e){const n=Vt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Mie(n.auth,i,e);const{email:a}=await Eie(n.auth,i);a!==t.email&&await t.reload()}async function Fie(t,e){return Ga(t,"POST","/v1/accounts:update",e)}async function Uie(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Vt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await jh(r,Fie(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function $ie(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function qie(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function Gie(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function Z4(t){return Vt(t).signOut()}async function Hie(t){return Vt(t).delete()}const tw="__sak";class W${constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tw,"1"),this.storage.removeItem(tw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kie=1e3,Wie=10;class Y$ extends W${constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=L$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);tie()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Wie):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Kie)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Y$.type="LOCAL";const Yie=Y$;class X$ extends W${constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}X$.type="SESSION";const Q$=X$;function Xie(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class G1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new G1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await Xie(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}G1.receivers=[];function TD(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Qie{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=TD("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function ao(){return window}function Zie(t){ao().location.href=t}function Z$(){return typeof ao().WorkerGlobalScope<"u"&&typeof ao().importScripts=="function"}async function Jie(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eae(){return navigator?.serviceWorker?.controller||null}function tae(){return Z$()?self:null}const J$="firebaseLocalStorageDb",nae=1,nw="firebaseLocalStorage",e8="fbase_key";class Xv{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function H1(t,e){return t.transaction([nw],e?"readwrite":"readonly").objectStore(nw)}function rae(){const t=indexedDB.deleteDatabase(J$);return new Xv(t).toPromise()}function jI(){const t=indexedDB.open(J$,nae);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nw,{keyPath:e8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nw)?e(r):(r.close(),await rae(),e(await jI()))})})}async function J4(t,e,n){const r=H1(t,!0).put({[e8]:e,value:n});return new Xv(r).toPromise()}async function iae(t,e){const n=H1(t,!1).get(e),r=await new Xv(n).toPromise();return r===void 0?null:r.value}function eL(t,e){const n=H1(t,!0).delete(e);return new Xv(n).toPromise()}const aae=800,sae=3;class t8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sae)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Z$()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=G1._getInstance(tae()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Jie(),!this.activeServiceWorker)return;this.sender=new Qie(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jI();return await J4(e,tw,"1"),await eL(e,tw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>J4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iae(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>eL(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=H1(i,!1).getAll();return new Xv(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t8.type="LOCAL";const oae=t8;new Kv(3e4,6e4);function lae(t,e){return e?Qo(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class AD extends _D{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ih(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ih(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ih(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cae(t){return K$(t.auth,new AD(t),t.bypassAuthState)}function uae(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),H$(n,new AD(t),t.bypassAuthState)}async function dae(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),Oie(n,new AD(t),t.bypassAuthState)}class n8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cae;case"linkViaPopup":case"linkViaRedirect":return dae;case"reauthViaPopup":case"reauthViaRedirect":return uae;default:ws(this.auth,"internal-error")}}resolve(e){dl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fae=new Kv(2e3,1e4);class fh extends n8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,fh.currentPopupAction&&fh.currentPopupAction.cancel(),fh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){dl(this.filter.length===1,"Popup operations only handle one event");const e=TD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(io(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(io(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(io(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fae.get())};e()}}fh.currentPopupAction=null;const hae="pendingRedirect",_x=new Map;class pae extends n8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_x.get(this.auth._key());if(!e){try{const r=await gae(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_x.set(this.auth._key(),e)}return this.bypassAuthState||_x.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gae(t,e){const n=yae(e),r=vae(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function mae(t,e){_x.set(t._key(),e)}function vae(t){return Qo(t._redirectPersistence)}function yae(t){return wx(hae,t.config.apiKey,t.name)}async function bae(t,e,n=!1){if(ta(t.app))return Promise.reject(nl(t));const r=tu(t),i=lae(r,e),s=await new pae(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const xae=600*1e3;class wae{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_ae(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!r8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(io(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xae&&this.cachedEventUids.clear(),this.cachedEventUids.has(tL(e))}saveEventToCache(e){this.cachedEventUids.add(tL(e)),this.lastProcessedEventTime=Date.now()}}function tL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function r8({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function _ae(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r8(t);default:return!1}}async function Sae(t,e={}){return Ga(t,"GET","/v1/projects",e)}const Eae=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tae=/^https?/;async function Aae(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Sae(t);for(const n of e)try{if(Cae(n))return}catch{}ws(t,"unauthorized-domain")}function Cae(t){const e=NI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Tae.test(n))return!1;if(Eae.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Iae=new Kv(3e4,6e4);function nL(){const t=ao().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kae(t){return new Promise((e,n)=>{function r(){nL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nL(),n(io(t,"network-request-failed"))},timeout:Iae.get()})}if(ao().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ao().gapi?.load)r();else{const i=uie("iframefcb");return ao()[i]=()=>{gapi.load?r():n(io(t,"network-request-failed"))},B$(`${cie()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Sx=null,e})}let Sx=null;function Pae(t){return Sx=Sx||kae(t),Sx}const Dae=new Kv(5e3,15e3),Oae="__/auth/iframe",Rae="emulator/auth/iframe",Nae={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mae=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jae(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bD(e,Rae):`https://${t.config.authDomain}/${Oae}`,r={apiKey:e.apiKey,appName:t.name,v:wp},i=Mae.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Hv(r).slice(1)}`}async function zae(t){const e=await Pae(t),n=ao().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:jae(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nae,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=io(t,"network-request-failed"),o=ao().setTimeout(()=>{a(s)},Dae.get());function c(){ao().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const Lae={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vae=500,Bae=600,Fae="_blank",Uae="http://localhost";class rL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $ae(t,e,n,r=Vae,i=Bae){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...Lae,width:r.toString(),height:i.toString(),top:a,left:s},u=yr().toLowerCase();n&&(o=R$(u)?Fae:n),D$(u)&&(e=e||Uae,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[m,b])=>`${g}${m}=${b},`,"");if(eie(u)&&o!=="_self")return qae(e||"",o),new rL(null);const h=window.open(e||"",o,f);et(h,t,"popup-blocked");try{h.focus()}catch{}return new rL(h)}function qae(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Gae="__/auth/handler",Hae="emulator/auth/handler",Kae=encodeURIComponent("fac");async function iL(t,e,n,r,i,a){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wp,eventId:i};if(e instanceof q$){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",vne(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof Yv){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${Kae}=${encodeURIComponent(c)}`:"";return`${Wae(t)}?${Hv(o).slice(1)}${u}`}function Wae({config:t}){return t.emulator?bD(t,Hae):`https://${t.authDomain}/${Gae}`}const WT="webStorageSupport";class Yae{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q$,this._completeRedirectFn=bae,this._overrideRedirectResult=mae}async _openPopup(e,n,r,i){dl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await iL(e,n,r,NI(),i);return $ae(e,a,TD())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await iL(e,n,r,NI(),i);return Zie(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(dl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zae(e),r=new wae(e);return n.register("authEvent",i=>(et(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(WT,{type:WT},i=>{const a=i?.[0]?.[WT];a!==void 0&&n(!!a),ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Aae(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return L$()||O$()||wD()}}const Xae=Yae;var aL="@firebase/auth",sL="1.11.1";class Qae{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Zae(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jae(t){ul(new go("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;et(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V$(t)},u=new sie(r,i,a,c);return mie(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ul(new go("auth-internal",e=>{const n=tu(e.getProvider("auth").getImmediate());return(r=>new Qae(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vs(aL,sL,Zae(t)),vs(aL,sL,"esm2020")}const ese=300,tse=h$("authIdTokenMaxAge")||ese;let oL=null;const nse=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tse)return;const i=n?.token;oL!==i&&(oL=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rse(t=vD()){const e=xp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gie(t,{popupRedirectResolver:Xae,persistence:[oae,Yie,Q$]}),r=h$("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=nse(a.toString());qie(n,s,()=>s(n.currentUser)),$ie(n,o=>s(o))}}const i=d$("auth");return i&&vie(n,`http://${i}`),n}function ise(){return document.getElementsByTagName("head")?.[0]??document}oie({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=io("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",ise().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jae("Browser");var lL="popstate";function ase(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=Gd(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),zI("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:Qm(a))}function r(i,a){Va(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return ose(e,n,r,t)}function Pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Va(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sse(){return Math.random().toString(36).substring(2,10)}function cL(t,e){return{usr:t.state,key:t.key,idx:e}}function zI(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Gd(e):e,state:n,key:e&&e.key||r||sse()}}function Qm({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Gd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function ose(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),S=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:S})}function g(w,S){o="PUSH";let T=zI(x.location,w,S);n&&n(T,w),u=f()+1;let I=cL(T,u),R=x.createHref(T);try{s.pushState(I,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(R)}a&&c&&c({action:o,location:x.location,delta:1})}function m(w,S){o="REPLACE";let T=zI(x.location,w,S);n&&n(T,w),u=f();let I=cL(T,u),R=x.createHref(T);s.replaceState(I,"",R),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return lse(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(lL,h),c=w,()=>{i.removeEventListener(lL,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:m,go(w){return s.go(w)}};return x}function lse(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Qm(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function i8(t,e,n="/"){return cse(t,e,n,!1)}function cse(t,e,n,r){let i=typeof e=="string"?Gd(e):e,a=fl(i.pathname||"/",n);if(a==null)return null;let s=a8(t);use(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=wse(a);o=bse(s[c],u,r)}return o}function a8(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;Pn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=rl([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(Pn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),a8(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:vse(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of s8(s.path))a(s,o,!0,c)}),e}function s8(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=s8(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function use(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yse(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var dse=/^:[\w-]+$/,fse=3,hse=2,pse=1,gse=10,mse=-2,uL=t=>t==="*";function vse(t,e){let n=t.split("/"),r=n.length;return n.some(uL)&&(r+=mse),e&&(r+=hse),n.filter(i=>!uL(i)).reduce((i,a)=>i+(dse.test(a)?fse:a===""?pse:gse),r)}function yse(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function bse(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=rw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=rw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:rl([a,h.pathname]),pathnameBase:Tse(rl([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=rl([a,h.pathnameBase]))}return s}function rw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xse(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const m=o[g];return h&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function xse(t,e=!1,n=!0){Va(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wse(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Va(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function fl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var _se=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Sse(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Gd(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=dL(n.substring(1),"/"):a=dL(n,e)):a=e,{pathname:a,search:Ase(r),hash:Cse(i)}}function dL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function YT(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ese(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function o8(t){let e=Ese(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function l8(t,e,n,r=!1){let i;typeof t=="string"?i=Gd(t):(i={...t},Pn(!i.pathname||!i.pathname.includes("?"),YT("?","pathname","search",i)),Pn(!i.pathname||!i.pathname.includes("#"),YT("#","pathname","hash",i)),Pn(!i.search||!i.search.includes("#"),YT("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=Sse(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var rl=t=>t.join("/").replace(/\/\/+/g,"/"),Tse=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ase=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cse=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Ise=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function kse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Pse(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var c8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function u8(t,e){let n=t;if(typeof n!="string"||!_se.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(c8)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=fl(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{Va(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var d8=["POST","PUT","PATCH","DELETE"];new Set(d8);var Dse=["GET",...d8];new Set(Dse);var _p=A.createContext(null);_p.displayName="DataRouter";var K1=A.createContext(null);K1.displayName="DataRouterState";var Ose=A.createContext(!1),f8=A.createContext({isTransitioning:!1});f8.displayName="ViewTransition";var Rse=A.createContext(new Map);Rse.displayName="Fetchers";var Nse=A.createContext(null);Nse.displayName="Await";var Ha=A.createContext(null);Ha.displayName="Navigation";var Qv=A.createContext(null);Qv.displayName="Location";var _o=A.createContext({outlet:null,matches:[],isDataRoute:!1});_o.displayName="Route";var CD=A.createContext(null);CD.displayName="RouteError";var h8="REACT_ROUTER_ERROR",Mse="REDIRECT",jse="ROUTE_ERROR_RESPONSE";function zse(t){if(t.startsWith(`${h8}:${Mse}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Lse(t){if(t.startsWith(`${h8}:${jse}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Ise(e.status,e.statusText,e.data)}catch{}}function Vse(t,{relative:e}={}){Pn(Zv(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Ha),{hash:i,pathname:a,search:s}=Jv(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:rl([n,a])),r.createHref({pathname:o,search:s,hash:i})}function Zv(){return A.useContext(Qv)!=null}function Cs(){return Pn(Zv(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Qv).location}var p8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g8(t){A.useContext(Ha).static||A.useLayoutEffect(t)}function Ka(){let{isDataRoute:t}=A.useContext(_o);return t?Jse():Bse()}function Bse(){Pn(Zv(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(_p),{basename:e,navigator:n}=A.useContext(Ha),{matches:r}=A.useContext(_o),{pathname:i}=Cs(),a=JSON.stringify(o8(r)),s=A.useRef(!1);return g8(()=>{s.current=!0}),A.useCallback((c,u={})=>{if(Va(s.current,p8),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=l8(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:rl([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}A.createContext(null);function Fse(){let{matches:t}=A.useContext(_o),e=t[t.length-1];return e?e.params:{}}function Jv(t,{relative:e}={}){let{matches:n}=A.useContext(_o),{pathname:r}=Cs(),i=JSON.stringify(o8(n));return A.useMemo(()=>l8(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Use(t,e){return m8(t,e)}function m8(t,e,n,r,i){Pn(Zv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Ha),{matches:s}=A.useContext(_o),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";y8(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Cs(),m;if(e){let T=typeof e=="string"?Gd(e):e;Pn(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),m=T}else m=g;let b=m.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=i8(t,{pathname:x});Va(h||w!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Va(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Kse(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:rl([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:rl([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&S?A.createElement(Qv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},S):S}function $se(){let t=Zse(),e=kse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var qse=A.createElement($se,null),v8=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Lse(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(_o.Provider,{value:this.props.routeContext},A.createElement(CD.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(Gse,{error:t},e):e}};v8.contextType=Ose;var XT=new WeakMap;function Gse({children:t,error:e}){let{basename:n}=A.useContext(Ha);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=zse(e.digest);if(r){let i=XT.get(e);if(i)throw i;let a=u8(r.location,n);if(c8&&!XT.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw XT.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function Hse({routeContext:t,match:e,children:n}){let r=A.useContext(_p);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(_o.Provider,{value:t},n)}function Kse(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);Pn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:m}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Pse(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let m,b=!1,x=null,w=null;n&&(m=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||qse,o&&(c<0&&g===0?(y8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),T=()=>{let I;return m?I=x:b?I=w:h.route.Component?I=A.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=f,A.createElement(Hse,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(v8,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):T()},null)}function ID(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wse(t){let e=A.useContext(_p);return Pn(e,ID(t)),e}function Yse(t){let e=A.useContext(K1);return Pn(e,ID(t)),e}function Xse(t){let e=A.useContext(_o);return Pn(e,ID(t)),e}function kD(t){let e=Xse(t),n=e.matches[e.matches.length-1];return Pn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Qse(){return kD("useRouteId")}function Zse(){let t=A.useContext(CD),e=Yse("useRouteError"),n=kD("useRouteError");return t!==void 0?t:e.errors?.[n]}function Jse(){let{router:t}=Wse("useNavigate"),e=kD("useNavigate"),n=A.useRef(!1);return g8(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Va(n.current,p8),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var fL={};function y8(t,e,n){!e&&!fL[t]&&(fL[t]=!0,Va(!1,n))}A.memo(eoe);function eoe({routes:t,future:e,state:n,onError:r}){return m8(t,void 0,n,r,e)}function Ys(t){Pn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function toe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){Pn(!Zv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=Gd(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:m="default"}=n,b=A.useMemo(()=>{let x=fl(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:m},navigationType:r}},[o,u,f,h,g,m,r]);return Va(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Ha.Provider,{value:c},A.createElement(Qv.Provider,{children:e,value:b}))}function noe({children:t,location:e}){return Use(LI(t),e)}function LI(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,LI(r.props.children,a));return}Pn(r.type===Ys,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=LI(r.props.children,a)),n.push(s)}),n}var Ex="get",Tx="application/x-www-form-urlencoded";function W1(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function roe(t){return W1(t)&&t.tagName.toLowerCase()==="button"}function ioe(t){return W1(t)&&t.tagName.toLowerCase()==="form"}function aoe(t){return W1(t)&&t.tagName.toLowerCase()==="input"}function soe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ooe(t,e){return t.button===0&&(!e||e==="_self")&&!soe(t)}function VI(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function loe(t,e){let n=VI(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Sb=null;function coe(){if(Sb===null)try{new FormData(document.createElement("form"),0),Sb=!1}catch{Sb=!0}return Sb}var uoe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function QT(t){return t!=null&&!uoe.has(t)?(Va(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tx}"`),null):t}function doe(t,e){let n,r,i,a,s;if(ioe(t)){let o=t.getAttribute("action");r=o?fl(o,e):null,n=t.getAttribute("method")||Ex,i=QT(t.getAttribute("enctype"))||Tx,a=new FormData(t)}else if(roe(t)||aoe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?fl(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Ex,i=QT(t.getAttribute("formenctype"))||QT(o.getAttribute("enctype"))||Tx,a=new FormData(o,t),!coe()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(W1(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ex,r=null,i=Tx,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function PD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function foe(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&fl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function hoe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function poe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function goe(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await hoe(a,n);return s.links?s.links():[]}return[]}));return boe(r.flat(1).filter(poe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function hL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function moe(t,e,{includeHydrateFallback:n}={}){return voe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function voe(t){return[...new Set(t)]}function yoe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function boe(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(yoe(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function b8(){let t=A.useContext(_p);return PD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function xoe(){let t=A.useContext(K1);return PD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var DD=A.createContext(void 0);DD.displayName="FrameworkContext";function x8(){let t=A.useContext(DD);return PD(t,"You must render this element inside a <HydratedRouter> element"),t}function woe(t,e){let n=A.useContext(DD),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=S=>{S.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let m=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:Wg(o,m),onBlur:Wg(c,b),onMouseEnter:Wg(u,m),onMouseLeave:Wg(f,b),onTouchStart:Wg(h,m)}]:[!1,g,{}]}function Wg(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function _oe({page:t,...e}){let{router:n}=b8(),r=A.useMemo(()=>i8(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(Eoe,{page:t,matches:r,...e}):null}function Soe(t){let{manifest:e,routeModules:n}=x8(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return goe(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Eoe({page:t,matches:e,...n}){let r=Cs(),{future:i,manifest:a,routeModules:s}=x8(),{basename:o}=b8(),{loaderData:c,matches:u}=xoe(),f=A.useMemo(()=>hL(t,e,u,a,r,"data"),[t,e,u,a,r]),h=A.useMemo(()=>hL(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let I=a.routes[T.route.id];!I||!I.hasLoader||(!f.some(R=>R.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||I.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let S=foe(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),m=A.useMemo(()=>moe(h,a),[h,a]),b=Soe(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),m.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function Toe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Aoe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Aoe&&(window.__reactRouterVersion="7.13.0")}catch{}function Coe({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=ase({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(u=>{n===!1?o(u):A.startTransition(()=>o(u))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(toe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var w8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_8=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...m},b){let{basename:x,unstable_useTransitions:w}=A.useContext(Ha),S=typeof u=="string"&&w8.test(u),T=u8(u,x);u=T.to;let I=Vse(u,{relative:i}),[R,O,D]=woe(r,m),k=Doe(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function P(z){e&&e(z),z.defaultPrevented||k(z)}let N=A.createElement("a",{...m,...D,href:T.absoluteURL||I,onClick:T.isExternal||a?e:P,ref:Toe(b,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return R&&!S?A.createElement(A.Fragment,null,N,A.createElement(_oe,{page:I})):N});_8.displayName="Link";var Ioe=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=Jv(s,{relative:u.relative}),g=Cs(),m=A.useContext(K1),{navigator:b,basename:x}=A.useContext(Ha),w=m!=null&&joe(h)&&o===!0,S=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,I=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(T=T.toLowerCase(),I=I?I.toLowerCase():null,S=S.toLowerCase()),I&&x&&(I=fl(I,x)||I);const R=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=T===S||!i&&T.startsWith(S)&&T.charAt(R)==="/",D=I!=null&&(I===S||!i&&I.startsWith(S)&&I.charAt(S.length)==="/"),k={isActive:O,isPending:D,isTransitioning:w},P=O?e:void 0,N;typeof r=="function"?N=r(k):N=[r,O?"active":null,D?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof a=="function"?a(k):a;return A.createElement(_8,{...u,"aria-current":P,className:N,ref:f,style:z,to:s,viewTransition:o},typeof c=="function"?c(k):c)});Ioe.displayName="NavLink";var koe=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Ex,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...m},b)=>{let{unstable_useTransitions:x}=A.useContext(Ha),w=Noe(),S=Moe(o,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",I=typeof o=="string"&&w8.test(o),R=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let D=O.nativeEvent.submitter,k=D?.getAttribute("formmethod")||s,P=()=>w(D||O.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>P()):P()};return A.createElement("form",{ref:b,method:T,action:S,onSubmit:r?c:R,...m,"data-discover":!I&&t==="render"?"true":void 0})});koe.displayName="Form";function Poe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S8(t){let e=A.useContext(_p);return Pn(e,Poe(t)),e}function Doe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=Ka(),f=Cs(),h=Jv(t,{relative:a});return A.useCallback(g=>{if(ooe(g,e)){g.preventDefault();let m=n!==void 0?n:Qm(f)===Qm(h),b=()=>u(t,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function E8(t){Va(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(VI(t)),n=A.useRef(!1),r=Cs(),i=A.useMemo(()=>loe(r.search,n.current?null:e.current),[r.search]),a=Ka(),s=A.useCallback((o,c)=>{const u=VI(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var Ooe=0,Roe=()=>`__${String(++Ooe)}__`;function Noe(){let{router:t}=S8("useSubmit"),{basename:e}=A.useContext(Ha),n=Qse(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=doe(a,e);if(s.navigate===!1){let g=s.fetcherKey||Roe();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Moe(t,{relative:e}={}){let{basename:n}=A.useContext(Ha),r=A.useContext(_o);Pn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Jv(t||".",{relative:e})},s=Cs();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:rl([n,a.pathname])),Qm(a)}function joe(t,{relative:e}={}){let n=A.useContext(f8);Pn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=S8("useViewTransitionState"),i=Jv(t,{relative:e});if(!n.isTransitioning)return!1;let a=fl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=fl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return rw(i.pathname,s)!=null||rw(i.pathname,a)!=null}var T8=o$();const zoe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Loe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),pL=t=>{const e=Loe(t);return e.charAt(0).toUpperCase()+e.slice(1)},A8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Voe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Boe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Foe=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...Boe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:A8("lucide",i),...!a&&!Voe(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>A.createElement(u,f)),...Array.isArray(a)?a:[a]]));const rt=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(Foe,{ref:a,iconNode:e,className:A8(`lucide-${zoe(pL(t))}`,`lucide-${t}`,r),...i}));return n.displayName=pL(t),n};const Uoe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hl=rt("arrow-left",Uoe);const $oe=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],qoe=rt("arrow-right-left",$oe);const Goe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Hoe=rt("arrow-right",Goe);const Koe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Woe=rt("calendar",Koe);const Yoe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],C8=rt("chart-column",Yoe);const Xoe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Qoe=rt("chart-pie",Xoe);const Zoe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Joe=rt("check",Zoe);const ele=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tle=rt("chevron-left",ele);const nle=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xs=rt("chevron-right",nle);const rle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],ile=rt("circle-arrow-down",rle);const ale=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],sle=rt("circle-arrow-up",ale);const ole=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],iw=rt("circle-check-big",ole);const lle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ho=rt("circle-check",lle);const cle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gL=rt("circle",cle);const ule=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],mL=rt("dollar-sign",ule);const dle=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],vL=rt("download",dle);const fle=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],hle=rt("ellipsis",fle);const ple=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I8=rt("eye-off",ple);const gle=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k8=rt("eye",gle);const mle=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vle=rt("file-text",mle);const yle=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],ble=rt("folder",yle);const xle=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wle=rt("funnel",xle);const _le=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Zm=rt("grip-vertical",_le);const Sle=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Ele=rt("house",Sle);const Tle=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ale=rt("list",Tle);const Cle=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],yL=rt("loader",Cle);const Ile=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],bL=rt("lock",Ile);const kle=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ple=rt("log-out",kle);const Dle=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],BI=rt("mail",Dle);const Ole=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],xL=rt("mic",Ole);const Rle=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Nle=rt("pause",Rle);const Mle=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],jle=rt("pen",Mle);const zle=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],e0=rt("piggy-bank",zle);const Lle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],t0=rt("plus",Lle);const Vle=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zh=rt("refresh-cw",Vle);const Ble=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fle=rt("rotate-ccw",Ble);const Ule=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$le=rt("search",Ule);const qle=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gle=rt("settings",qle);const Hle=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Jm=rt("sparkles",Hle);const Kle=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],Wle=rt("tags",Kle);const Yle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xle=rt("target",Yle);const Qle=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],aw=rt("trash-2",Qle);const Zle=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],P8=rt("trash",Zle);const Jle=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],sw=rt("trending-up",Jle);const ece=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kh=rt("triangle-alert",ece);const tce=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],nce=rt("undo-2",tce);const rce=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ice=rt("upload",rce);const ace=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sce=rt("user-plus",ace);const oce=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Y1=rt("wallet",oce);const lce=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X1=rt("x",lce),wL=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(m=>m(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},cce=(t=>t?wL(t):wL),uce=t=>t;function dce(t,e=uce){const n=nd.useSyncExternalStore(t.subscribe,nd.useCallback(()=>e(t.getState()),[t,e]),nd.useCallback(()=>e(t.getInitialState()),[t,e]));return nd.useDebugValue(n),n}const _L=t=>{const e=cce(t),n=r=>dce(e,r);return Object.assign(n,e),n},OD=(t=>t?_L(t):_L),SL={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},ev=new Map,Eb=t=>{const e=ev.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},fce=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=ev.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return ev.set(n.name,i),{type:"tracked",store:t,...i}},hce=(t,e)=>{if(e===void 0)return;const n=ev.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&ev.delete(t))},pce=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},gce=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(SL?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=fce(o,u,c);let g=!0;i.setState=((x,w,S)=>{const T=n(x,w);if(!g)return T;const I=S===void 0?{type:s||pce(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(f?.send(I,r()),T):(f?.send({...I,type:`${o}/${I.type}`},{...Eb(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),hce(c.name,o)}};const m=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(SL?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return ZT(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){m(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=S.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&m(T);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return m(b),o===void 0?f?.init(i.getState()):f?.init(Eb(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Eb(c.name));case"ROLLBACK":return ZT(x.state,S=>{if(o===void 0){m(S),f?.init(i.getState());return}m(S[o]),f?.init(Eb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return ZT(x.state,S=>{if(o===void 0){m(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&m(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,T=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;m(o===void 0?T:T[o]),f?.send(null,S);return}case"PAUSE_RECORDING":return g=!g}return}}),b},mce=gce,ZT=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function vce(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const FI=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return FI(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return FI(r)(n)}}}},yce=(t,e)=>(n,r,i)=>{let a={storage:vce(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},s=!1;const o=new Set,c=new Set;let u=a.storage;if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,i);const f=()=>{const x=a.partialize({...r()});return u.setItem(a.name,{state:x,version:a.version})},h=i.setState;i.setState=(x,w)=>(h(x,w),f());const g=t((...x)=>(n(...x),f()),r,i);i.getInitialState=()=>g;let m;const b=()=>{var x,w;if(!u)return;s=!1,o.forEach(T=>{var I;return T((I=r())!=null?I:g)});const S=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(x=r())!=null?x:g))||void 0;return FI(u.getItem.bind(u))(a.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==a.version){if(a.migrate){const I=a.migrate(T.state,T.version);return I instanceof Promise?I.then(R=>[!0,R]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var I;const[R,O]=T;if(m=a.merge(O,(I=r())!=null?I:g),n(m,!0),R)return f()}).then(()=>{S?.(m,void 0),m=r(),s=!0,c.forEach(T=>T(m))}).catch(T=>{S?.(void 0,T)})};return i.persist={setOptions:x=>{a={...a,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},a.skipHydration||b(),m||g},D8=yce;var bce="firebase",xce="12.6.0";vs(bce,xce,"app");var EL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var zc,O8;(function(){var t;function e(k,P){function N(){}N.prototype=P.prototype,k.F=P.prototype,k.prototype=new N,k.prototype.constructor=k,k.D=function(z,L,B){for(var j=Array(arguments.length-2),W=2;W<arguments.length;W++)j[W-2]=arguments[W];return P.prototype[L].apply(z,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,P,N){N||(N=0);const z=Array(16);if(typeof P=="string")for(var L=0;L<16;++L)z[L]=P.charCodeAt(N++)|P.charCodeAt(N++)<<8|P.charCodeAt(N++)<<16|P.charCodeAt(N++)<<24;else for(L=0;L<16;++L)z[L]=P[N++]|P[N++]<<8|P[N++]<<16|P[N++]<<24;P=k.g[0],N=k.g[1],L=k.g[2];let B=k.g[3],j;j=P+(B^N&(L^B))+z[0]+3614090360&4294967295,P=N+(j<<7&4294967295|j>>>25),j=B+(L^P&(N^L))+z[1]+3905402710&4294967295,B=P+(j<<12&4294967295|j>>>20),j=L+(N^B&(P^N))+z[2]+606105819&4294967295,L=B+(j<<17&4294967295|j>>>15),j=N+(P^L&(B^P))+z[3]+3250441966&4294967295,N=L+(j<<22&4294967295|j>>>10),j=P+(B^N&(L^B))+z[4]+4118548399&4294967295,P=N+(j<<7&4294967295|j>>>25),j=B+(L^P&(N^L))+z[5]+1200080426&4294967295,B=P+(j<<12&4294967295|j>>>20),j=L+(N^B&(P^N))+z[6]+2821735955&4294967295,L=B+(j<<17&4294967295|j>>>15),j=N+(P^L&(B^P))+z[7]+4249261313&4294967295,N=L+(j<<22&4294967295|j>>>10),j=P+(B^N&(L^B))+z[8]+1770035416&4294967295,P=N+(j<<7&4294967295|j>>>25),j=B+(L^P&(N^L))+z[9]+2336552879&4294967295,B=P+(j<<12&4294967295|j>>>20),j=L+(N^B&(P^N))+z[10]+4294925233&4294967295,L=B+(j<<17&4294967295|j>>>15),j=N+(P^L&(B^P))+z[11]+2304563134&4294967295,N=L+(j<<22&4294967295|j>>>10),j=P+(B^N&(L^B))+z[12]+1804603682&4294967295,P=N+(j<<7&4294967295|j>>>25),j=B+(L^P&(N^L))+z[13]+4254626195&4294967295,B=P+(j<<12&4294967295|j>>>20),j=L+(N^B&(P^N))+z[14]+2792965006&4294967295,L=B+(j<<17&4294967295|j>>>15),j=N+(P^L&(B^P))+z[15]+1236535329&4294967295,N=L+(j<<22&4294967295|j>>>10),j=P+(L^B&(N^L))+z[1]+4129170786&4294967295,P=N+(j<<5&4294967295|j>>>27),j=B+(N^L&(P^N))+z[6]+3225465664&4294967295,B=P+(j<<9&4294967295|j>>>23),j=L+(P^N&(B^P))+z[11]+643717713&4294967295,L=B+(j<<14&4294967295|j>>>18),j=N+(B^P&(L^B))+z[0]+3921069994&4294967295,N=L+(j<<20&4294967295|j>>>12),j=P+(L^B&(N^L))+z[5]+3593408605&4294967295,P=N+(j<<5&4294967295|j>>>27),j=B+(N^L&(P^N))+z[10]+38016083&4294967295,B=P+(j<<9&4294967295|j>>>23),j=L+(P^N&(B^P))+z[15]+3634488961&4294967295,L=B+(j<<14&4294967295|j>>>18),j=N+(B^P&(L^B))+z[4]+3889429448&4294967295,N=L+(j<<20&4294967295|j>>>12),j=P+(L^B&(N^L))+z[9]+568446438&4294967295,P=N+(j<<5&4294967295|j>>>27),j=B+(N^L&(P^N))+z[14]+3275163606&4294967295,B=P+(j<<9&4294967295|j>>>23),j=L+(P^N&(B^P))+z[3]+4107603335&4294967295,L=B+(j<<14&4294967295|j>>>18),j=N+(B^P&(L^B))+z[8]+1163531501&4294967295,N=L+(j<<20&4294967295|j>>>12),j=P+(L^B&(N^L))+z[13]+2850285829&4294967295,P=N+(j<<5&4294967295|j>>>27),j=B+(N^L&(P^N))+z[2]+4243563512&4294967295,B=P+(j<<9&4294967295|j>>>23),j=L+(P^N&(B^P))+z[7]+1735328473&4294967295,L=B+(j<<14&4294967295|j>>>18),j=N+(B^P&(L^B))+z[12]+2368359562&4294967295,N=L+(j<<20&4294967295|j>>>12),j=P+(N^L^B)+z[5]+4294588738&4294967295,P=N+(j<<4&4294967295|j>>>28),j=B+(P^N^L)+z[8]+2272392833&4294967295,B=P+(j<<11&4294967295|j>>>21),j=L+(B^P^N)+z[11]+1839030562&4294967295,L=B+(j<<16&4294967295|j>>>16),j=N+(L^B^P)+z[14]+4259657740&4294967295,N=L+(j<<23&4294967295|j>>>9),j=P+(N^L^B)+z[1]+2763975236&4294967295,P=N+(j<<4&4294967295|j>>>28),j=B+(P^N^L)+z[4]+1272893353&4294967295,B=P+(j<<11&4294967295|j>>>21),j=L+(B^P^N)+z[7]+4139469664&4294967295,L=B+(j<<16&4294967295|j>>>16),j=N+(L^B^P)+z[10]+3200236656&4294967295,N=L+(j<<23&4294967295|j>>>9),j=P+(N^L^B)+z[13]+681279174&4294967295,P=N+(j<<4&4294967295|j>>>28),j=B+(P^N^L)+z[0]+3936430074&4294967295,B=P+(j<<11&4294967295|j>>>21),j=L+(B^P^N)+z[3]+3572445317&4294967295,L=B+(j<<16&4294967295|j>>>16),j=N+(L^B^P)+z[6]+76029189&4294967295,N=L+(j<<23&4294967295|j>>>9),j=P+(N^L^B)+z[9]+3654602809&4294967295,P=N+(j<<4&4294967295|j>>>28),j=B+(P^N^L)+z[12]+3873151461&4294967295,B=P+(j<<11&4294967295|j>>>21),j=L+(B^P^N)+z[15]+530742520&4294967295,L=B+(j<<16&4294967295|j>>>16),j=N+(L^B^P)+z[2]+3299628645&4294967295,N=L+(j<<23&4294967295|j>>>9),j=P+(L^(N|~B))+z[0]+4096336452&4294967295,P=N+(j<<6&4294967295|j>>>26),j=B+(N^(P|~L))+z[7]+1126891415&4294967295,B=P+(j<<10&4294967295|j>>>22),j=L+(P^(B|~N))+z[14]+2878612391&4294967295,L=B+(j<<15&4294967295|j>>>17),j=N+(B^(L|~P))+z[5]+4237533241&4294967295,N=L+(j<<21&4294967295|j>>>11),j=P+(L^(N|~B))+z[12]+1700485571&4294967295,P=N+(j<<6&4294967295|j>>>26),j=B+(N^(P|~L))+z[3]+2399980690&4294967295,B=P+(j<<10&4294967295|j>>>22),j=L+(P^(B|~N))+z[10]+4293915773&4294967295,L=B+(j<<15&4294967295|j>>>17),j=N+(B^(L|~P))+z[1]+2240044497&4294967295,N=L+(j<<21&4294967295|j>>>11),j=P+(L^(N|~B))+z[8]+1873313359&4294967295,P=N+(j<<6&4294967295|j>>>26),j=B+(N^(P|~L))+z[15]+4264355552&4294967295,B=P+(j<<10&4294967295|j>>>22),j=L+(P^(B|~N))+z[6]+2734768916&4294967295,L=B+(j<<15&4294967295|j>>>17),j=N+(B^(L|~P))+z[13]+1309151649&4294967295,N=L+(j<<21&4294967295|j>>>11),j=P+(L^(N|~B))+z[4]+4149444226&4294967295,P=N+(j<<6&4294967295|j>>>26),j=B+(N^(P|~L))+z[11]+3174756917&4294967295,B=P+(j<<10&4294967295|j>>>22),j=L+(P^(B|~N))+z[2]+718787259&4294967295,L=B+(j<<15&4294967295|j>>>17),j=N+(B^(L|~P))+z[9]+3951481745&4294967295,k.g[0]=k.g[0]+P&4294967295,k.g[1]=k.g[1]+(L+(j<<21&4294967295|j>>>11))&4294967295,k.g[2]=k.g[2]+L&4294967295,k.g[3]=k.g[3]+B&4294967295}r.prototype.v=function(k,P){P===void 0&&(P=k.length);const N=P-this.blockSize,z=this.C;let L=this.h,B=0;for(;B<P;){if(L==0)for(;B<=N;)i(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<P;)if(z[L++]=k.charCodeAt(B++),L==this.blockSize){i(this,z),L=0;break}}else for(;B<P;)if(z[L++]=k[B++],L==this.blockSize){i(this,z),L=0;break}}this.h=L,this.o+=P},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var P=1;P<k.length-8;++P)k[P]=0;P=this.o*8;for(var N=k.length-8;N<k.length;++N)k[N]=P&255,P/=256;for(this.v(k),k=Array(16),P=0,N=0;N<4;++N)for(let z=0;z<32;z+=8)k[P++]=this.g[N]>>>z&255;return k};function a(k,P){var N=o;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=P(k)}function s(k,P){this.h=P;const N=[];let z=!0;for(let L=k.length-1;L>=0;L--){const B=k[L]|0;z&&B==P||(N[L]=B,z=!1)}this.g=N}var o={};function c(k){return-128<=k&&k<128?a(k,function(P){return new s([P|0],P<0?-1:0)}):new s([k|0],k<0?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return h;if(k<0)return w(u(-k));const P=[];let N=1;for(let z=0;k>=N;z++)P[z]=k/N|0,N*=4294967296;return new s(P,0)}function f(k,P){if(k.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(k.charAt(0)=="-")return w(f(k.substring(1),P));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(P,8));let z=h;for(let B=0;B<k.length;B+=8){var L=Math.min(8,k.length-B);const j=parseInt(k.substring(B,B+L),P);L<8?(L=u(Math.pow(P,L)),z=z.j(L).add(u(j))):(z=z.j(N),z=z.add(u(j)))}return z}var h=c(0),g=c(1),m=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let k=0,P=1;for(let N=0;N<this.g.length;N++){const z=this.i(N);k+=(z>=0?z:4294967296+z)*P,P*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(x(this))return"-"+w(this).toString(k);const P=u(Math.pow(k,6));var N=this;let z="";for(;;){const L=R(N,P).g;N=S(N,L.j(P));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(k);if(N=L,b(N))return B+z;for(;B.length<6;)B="0"+B;z=B+z}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(let P=0;P<k.g.length;P++)if(k.g[P]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=S(this,k),x(k)?-1:b(k)?0:1};function w(k){const P=k.g.length,N=[];for(let z=0;z<P;z++)N[z]=~k.g[z];return new s(N,~k.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(k){const P=Math.max(this.g.length,k.g.length),N=[];let z=0;for(let L=0;L<=P;L++){let B=z+(this.i(L)&65535)+(k.i(L)&65535),j=(B>>>16)+(this.i(L)>>>16)+(k.i(L)>>>16);z=j>>>16,B&=65535,j&=65535,N[L]=j<<16|B}return new s(N,N[N.length-1]&-2147483648?-1:0)};function S(k,P){return k.add(w(P))}t.j=function(k){if(b(this)||b(k))return h;if(x(this))return x(k)?w(this).j(w(k)):w(w(this).j(k));if(x(k))return w(this.j(w(k)));if(this.l(m)<0&&k.l(m)<0)return u(this.m()*k.m());const P=this.g.length+k.g.length,N=[];for(var z=0;z<2*P;z++)N[z]=0;for(z=0;z<this.g.length;z++)for(let L=0;L<k.g.length;L++){const B=this.i(z)>>>16,j=this.i(z)&65535,W=k.i(L)>>>16,Q=k.i(L)&65535;N[2*z+2*L]+=j*Q,T(N,2*z+2*L),N[2*z+2*L+1]+=B*Q,T(N,2*z+2*L+1),N[2*z+2*L+1]+=j*W,T(N,2*z+2*L+1),N[2*z+2*L+2]+=B*W,T(N,2*z+2*L+2)}for(k=0;k<P;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=P;k<2*P;k++)N[k]=0;return new s(N,0)};function T(k,P){for(;(k[P]&65535)!=k[P];)k[P+1]+=k[P]>>>16,k[P]&=65535,P++}function I(k,P){this.g=k,this.h=P}function R(k,P){if(b(P))throw Error("division by zero");if(b(k))return new I(h,h);if(x(k))return P=R(w(k),P),new I(w(P.g),w(P.h));if(x(P))return P=R(k,w(P)),new I(w(P.g),P.h);if(k.g.length>30){if(x(k)||x(P))throw Error("slowDivide_ only works with positive integers.");for(var N=g,z=P;z.l(k)<=0;)N=O(N),z=O(z);var L=D(N,1),B=D(z,1);for(z=D(z,2),N=D(N,2);!b(z);){var j=B.add(z);j.l(k)<=0&&(L=L.add(N),B=j),z=D(z,1),N=D(N,1)}return P=S(k,L.j(P)),new I(L,P)}for(L=h;k.l(P)>=0;){for(N=Math.max(1,Math.floor(k.m()/P.m())),z=Math.ceil(Math.log(N)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),B=u(N),j=B.j(P);x(j)||j.l(k)>0;)N-=z,B=u(N),j=B.j(P);b(B)&&(B=g),L=L.add(B),k=S(k,j)}return new I(L,k)}t.B=function(k){return R(this,k).h},t.and=function(k){const P=Math.max(this.g.length,k.g.length),N=[];for(let z=0;z<P;z++)N[z]=this.i(z)&k.i(z);return new s(N,this.h&k.h)},t.or=function(k){const P=Math.max(this.g.length,k.g.length),N=[];for(let z=0;z<P;z++)N[z]=this.i(z)|k.i(z);return new s(N,this.h|k.h)},t.xor=function(k){const P=Math.max(this.g.length,k.g.length),N=[];for(let z=0;z<P;z++)N[z]=this.i(z)^k.i(z);return new s(N,this.h^k.h)};function O(k){const P=k.g.length+1,N=[];for(let z=0;z<P;z++)N[z]=k.i(z)<<1|k.i(z-1)>>>31;return new s(N,k.h)}function D(k,P){const N=P>>5;P%=32;const z=k.g.length-N,L=[];for(let B=0;B<z;B++)L[B]=P>0?k.i(B+N)>>>P|k.i(B+N+1)<<32-P:k.i(B+N);return new s(L,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,O8=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,zc=s}).apply(typeof EL<"u"?EL:typeof self<"u"?self:typeof window<"u"?window:{});var Tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var R8,fm,N8,Ax,UI,M8,j8,z8;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tb=="object"&&Tb];for(var M=0;M<_.length;++M){var F=_[M];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(_,M){if(M)e:{var F=r;_=_.split(".");for(var G=0;G<_.length-1;G++){var ge=_[G];if(!(ge in F))break e;F=F[ge]}_=_[_.length-1],G=F[_],M=M(G),M!=G&&M!=null&&e(F,_,{configurable:!0,writable:!0,value:M})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(M){var F=[],G;for(G in M)Object.prototype.hasOwnProperty.call(M,G)&&F.push([G,M[G]]);return F}});var a=a||{},s=this||self;function o(_){var M=typeof _;return M=="object"&&_!=null||M=="function"}function c(_,M,F){return _.call.apply(_.bind,arguments)}function u(_,M,F){return u=c,u.apply(null,arguments)}function f(_,M){var F=Array.prototype.slice.call(arguments,1);return function(){var G=F.slice();return G.push.apply(G,arguments),_.apply(this,G)}}function h(_,M){function F(){}F.prototype=M.prototype,_.Z=M.prototype,_.prototype=new F,_.prototype.constructor=_,_.Ob=function(G,ge,xe){for(var Me=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Me[ut-2]=arguments[ut];return M.prototype[ge].apply(G,Me)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function m(_){const M=_.length;if(M>0){const F=Array(M);for(let G=0;G<M;G++)F[G]=_[G];return F}return[]}function b(_,M){for(let G=1;G<arguments.length;G++){const ge=arguments[G];var F=typeof ge;if(F=F!="object"?F:ge?Array.isArray(ge)?"array":F:"null",F=="array"||F=="object"&&typeof ge.length=="number"){F=_.length||0;const xe=ge.length||0;_.length=F+xe;for(let Me=0;Me<xe;Me++)_[F+Me]=ge[Me]}else _.push(ge)}}class x{constructor(M,F){this.i=M,this.j=F,this.h=0,this.g=null}get(){let M;return this.h>0?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function w(_){s.setTimeout(()=>{throw _},0)}function S(){var _=k;let M=null;return _.g&&(M=_.g,_.g=_.g.next,_.g||(_.h=null),M.next=null),M}class T{constructor(){this.h=this.g=null}add(M,F){const G=I.get();G.set(M,F),this.h?this.h.next=G:this.g=G,this.h=G}}var I=new x(()=>new R,_=>_.reset());class R{constructor(){this.next=this.g=this.h=null}set(M,F){this.h=M,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let O,D=!1,k=new T,P=()=>{const _=Promise.resolve(void 0);O=()=>{_.then(N)}};function N(){for(var _;_=S();){try{_.h.call(_.g)}catch(F){w(F)}var M=I;M.j(_),M.h<100&&(M.h++,_.next=M.g,M.g=_)}D=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(_,M){this.type=_,this.g=this.target=M,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,M=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const F=()=>{};s.addEventListener("test",F,M),s.removeEventListener("test",F,M)}catch{}return _})();function j(_){return/^[\s\xa0]*$/.test(_)}function W(_,M){L.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,M)}h(W,L),W.prototype.init=function(_,M){const F=this.type=_.type,G=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=M,M=_.relatedTarget,M||(F=="mouseover"?M=_.fromElement:F=="mouseout"&&(M=_.toElement)),this.relatedTarget=M,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),q=0;function Y(_,M,F,G,ge){this.listener=_,this.proxy=null,this.src=M,this.type=F,this.capture=!!G,this.ha=ge,this.key=++q,this.da=this.fa=!1}function Z(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ie(_,M,F){for(const G in _)M.call(F,_[G],G,_)}function J(_,M){for(const F in _)M.call(void 0,_[F],F,_)}function U(_){const M={};for(const F in _)M[F]=_[F];return M}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(_,M){let F,G;for(let ge=1;ge<arguments.length;ge++){G=arguments[ge];for(F in G)_[F]=G[F];for(let xe=0;xe<X.length;xe++)F=X[xe],Object.prototype.hasOwnProperty.call(G,F)&&(_[F]=G[F])}}function K(_){this.src=_,this.g={},this.h=0}K.prototype.add=function(_,M,F,G,ge){const xe=_.toString();_=this.g[xe],_||(_=this.g[xe]=[],this.h++);const Me=ae(_,M,G,ge);return Me>-1?(M=_[Me],F||(M.fa=!1)):(M=new Y(M,this.src,xe,!!G,ge),M.fa=F,_.push(M)),M};function ce(_,M){const F=M.type;if(F in _.g){var G=_.g[F],ge=Array.prototype.indexOf.call(G,M,void 0),xe;(xe=ge>=0)&&Array.prototype.splice.call(G,ge,1),xe&&(Z(M),_.g[F].length==0&&(delete _.g[F],_.h--))}}function ae(_,M,F,G){for(let ge=0;ge<_.length;++ge){const xe=_[ge];if(!xe.da&&xe.listener==M&&xe.capture==!!F&&xe.ha==G)return ge}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),he={};function ne(_,M,F,G,ge){if(Array.isArray(M)){for(let xe=0;xe<M.length;xe++)ne(_,M[xe],F,G,ge);return null}return F=Ie(F),_&&_[Q]?_.J(M,F,o(G)?!!G.capture:!1,ge):_e(_,M,F,!1,G,ge)}function _e(_,M,F,G,ge,xe){if(!M)throw Error("Invalid event type");const Me=o(ge)?!!ge.capture:!!ge;let ut=Le(_);if(ut||(_[oe]=ut=new K(_)),F=ut.add(M,F,G,Me,xe),F.proxy)return F;if(G=fe(),F.proxy=G,G.src=_,G.listener=F,_.addEventListener)B||(ge=Me),ge===void 0&&(ge=!1),_.addEventListener(M.toString(),G,ge);else if(_.attachEvent)_.attachEvent(Pe(M.toString()),G);else if(_.addListener&&_.removeListener)_.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return F}function fe(){function _(F){return M.call(_.src,_.listener,F)}const M=ze;return _}function ee(_,M,F,G,ge){if(Array.isArray(M))for(var xe=0;xe<M.length;xe++)ee(_,M[xe],F,G,ge);else G=o(G)?!!G.capture:!!G,F=Ie(F),_&&_[Q]?(_=_.i,xe=String(M).toString(),xe in _.g&&(M=_.g[xe],F=ae(M,F,G,ge),F>-1&&(Z(M[F]),Array.prototype.splice.call(M,F,1),M.length==0&&(delete _.g[xe],_.h--)))):_&&(_=Le(_))&&(M=_.g[M.toString()],_=-1,M&&(_=ae(M,F,G,ge)),(F=_>-1?M[_]:null)&&Ce(F))}function Ce(_){if(typeof _!="number"&&_&&!_.da){var M=_.src;if(M&&M[Q])ce(M.i,_);else{var F=_.type,G=_.proxy;M.removeEventListener?M.removeEventListener(F,G,_.capture):M.detachEvent?M.detachEvent(Pe(F),G):M.addListener&&M.removeListener&&M.removeListener(G),(F=Le(M))?(ce(F,_),F.h==0&&(F.src=null,M[oe]=null)):Z(_)}}}function Pe(_){return _ in he?he[_]:he[_]="on"+_}function ze(_,M){if(_.da)_=!0;else{M=new W(M,this);const F=_.listener,G=_.ha||_.src;_.fa&&Ce(_),_=F.call(G,M)}return _}function Le(_){return _=_[oe],_ instanceof K?_:null}var Be="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ie(_){return typeof _=="function"?_:(_[Be]||(_[Be]=function(M){return _.handleEvent(M)}),_[Be])}function Oe(){z.call(this),this.i=new K(this),this.M=this,this.G=null}h(Oe,z),Oe.prototype[Q]=!0,Oe.prototype.removeEventListener=function(_,M,F,G){ee(this,_,M,F,G)};function Ge(_,M){var F,G=_.G;if(G)for(F=[];G;G=G.G)F.push(G);if(_=_.M,G=M.type||M,typeof M=="string")M=new L(M,_);else if(M instanceof L)M.target=M.target||_;else{var ge=M;M=new L(G,_),te(M,ge)}ge=!0;let xe,Me;if(F)for(Me=F.length-1;Me>=0;Me--)xe=M.g=F[Me],ge=gt(xe,G,!0,M)&&ge;if(xe=M.g=_,ge=gt(xe,G,!0,M)&&ge,ge=gt(xe,G,!1,M)&&ge,F)for(Me=0;Me<F.length;Me++)xe=M.g=F[Me],ge=gt(xe,G,!1,M)&&ge}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var _=this.i;for(const M in _.g){const F=_.g[M];for(let G=0;G<F.length;G++)Z(F[G]);delete _.g[M],_.h--}}this.G=null},Oe.prototype.J=function(_,M,F,G){return this.i.add(String(_),M,!1,F,G)},Oe.prototype.K=function(_,M,F,G){return this.i.add(String(_),M,!0,F,G)};function gt(_,M,F,G){if(M=_.i.g[String(M)],!M)return!0;M=M.concat();let ge=!0;for(let xe=0;xe<M.length;++xe){const Me=M[xe];if(Me&&!Me.da&&Me.capture==F){const ut=Me.listener,Bn=Me.ha||Me.src;Me.fa&&ce(_.i,Me),ge=ut.call(Bn,G)!==!1&&ge}}return ge&&!G.defaultPrevented}function Ct(_,M){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(M)>2147483647?-1:s.setTimeout(_,M||0)}function kt(_){_.g=Ct(()=>{_.g=null,_.i&&(_.i=!1,kt(_))},_.l);const M=_.h;_.h=null,_.m.apply(null,M)}class at extends z{constructor(M,F){super(),this.m=M,this.l=F,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:kt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wt(_){z.call(this),this.h=_,this.g={}}h(wt,z);var ct=[];function gn(_){ie(_.g,function(M,F){this.g.hasOwnProperty(F)&&Ce(M)},_),_.g={}}wt.prototype.N=function(){wt.Z.N.call(this),gn(this)},wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=s.JSON.stringify,Mr=s.JSON.parse,Xa=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function Qa(){}function Za(){}var si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mn(){L.call(this,"d")}h(mn,L);function vn(){L.call(this,"c")}h(vn,L);var Mt={},ks=null;function jl(){return ks=ks||new Oe}Mt.Ia="serverreachability";function zl(_){L.call(this,Mt.Ia,_)}h(zl,L);function vt(_){const M=jl();Ge(M,new zl(M))}Mt.STAT_EVENT="statevent";function Tn(_,M){L.call(this,Mt.STAT_EVENT,_),this.stat=M}h(Tn,L);function An(_){const M=jl();Ge(M,new Tn(M,_))}Mt.Ja="timingevent";function Vi(_,M){L.call(this,Mt.Ja,_),this.size=M}h(Vi,L);function pa(_,M){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},M)}function oi(){this.g=!0}oi.prototype.ua=function(){this.g=!1};function BS(_,M,F,G,ge,xe){_.info(function(){if(_.g)if(xe){var Me="",ut=xe.split("&");for(let jt=0;jt<ut.length;jt++){var Bn=ut[jt].split("=");if(Bn.length>1){const yn=Bn[0];Bn=Bn[1];const ya=yn.split("_");Me=ya.length>=2&&ya[1]=="type"?Me+(yn+"="+Bn+"&"):Me+(yn+"=redacted&")}}}else Me=null;else Me=xe;return"XMLHTTP REQ ("+G+") [attempt "+ge+"]: "+M+`
`+F+`
`+Me})}function J0(_,M,F,G,ge,xe,Me){_.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ge+"]: "+M+`
`+F+`
`+xe+" "+Me})}function Ps(_,M,F,G){_.info(function(){return"XMLHTTP TEXT ("+M+"): "+FS(_,F)+(G?" "+G:"")})}function uu(_,M){_.info(function(){return"TIMEOUT: "+M})}oi.prototype.info=function(){};function FS(_,M){if(!_.g)return M;if(!M)return null;try{const xe=JSON.parse(M);if(xe){for(_=0;_<xe.length;_++)if(Array.isArray(xe[_])){var F=xe[_];if(!(F.length<2)){var G=F[1];if(Array.isArray(G)&&!(G.length<1)){var ge=G[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(let Me=1;Me<G.length;Me++)G[Me]=""}}}}return Kt(xe)}catch{return M}}var du={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wp;function fu(){}h(fu,Qa),fu.prototype.g=function(){return new XMLHttpRequest},Wp=new fu;function Ao(_){return encodeURIComponent(String(_))}function ey(_){var M=1;_=_.split(":");const F=[];for(;M>0&&_.length;)F.push(_.shift()),M--;return _.length&&F.push(_.join(":")),F}function Ja(_,M,F,G){this.j=_,this.i=M,this.l=F,this.S=G||1,this.V=new wt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}var Wn={},Er={};function Ds(_,M,F){_.M=1,_.A=hu(Xn(M)),_.u=F,_.R=!0,nf(_,null)}function nf(_,M){_.F=Date.now(),Os(_),_.B=Xn(_.A);var F=_.B,G=_.S;Array.isArray(G)||(G=[String(G)]),of(F.i,"t",G),_.C=0,F=_.j.L,_.h=new es,_.g=gy(_.j,F?M:null,!_.u),_.P>0&&(_.O=new at(u(_.Y,_,_.g),_.P)),M=_.V,F=_.g,G=_.ba;var ge="readystatechange";Array.isArray(ge)||(ge&&(ct[0]=ge.toString()),ge=ct);for(let xe=0;xe<ge.length;xe++){const Me=ne(F,ge[xe],G||M.handleEvent,!1,M.h||M);if(!Me)break;M.g[Me.key]=Me}M=_.J?U(_.J):{},_.u?(_.v||(_.v="POST"),M["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,M)):(_.v="GET",_.g.ea(_.B,_.v,null,M)),vt(),BS(_.i,_.v,_.B,_.l,_.S,_.u)}Ja.prototype.ba=function(_){_=_.target;const M=this.O;M&&rs(_)==3?M.j():this.Y(_)},Ja.prototype.Y=function(_){try{if(_==this.g)e:{const ut=rs(this.g),Bn=this.g.ya(),jt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||jr(this.g)))){this.K||ut!=4||Bn==7||(Bn==8||jt<=0?vt(3):vt(2)),Rs(this);var M=this.g.ca();this.X=M;var F=US(this);if(this.o=M==200,J0(this.i,this.v,this.B,this.l,this.S,ut,M),this.o){if(this.U&&!this.L){t:{if(this.g){var G,ge=this.g;if((G=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(G)){var xe=G;break t}}xe=null}if(_=xe)Ps(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ns(this,_);else{this.o=!1,this.m=3,An(12),Bi(this),ga(this);break e}}if(this.R){_=!0;let yn;for(;!this.K&&this.C<F.length;)if(yn=ny(this,F),yn==Er){ut==4&&(this.m=4,An(14),_=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Wn){this.m=4,An(15),Ps(this.i,this.l,F,"[Invalid Chunk]"),_=!1;break}else Ps(this.i,this.l,yn,null),Ns(this,yn);if(ty(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||F.length!=0||this.h.h||(this.m=1,An(16),_=!1),this.o=this.o&&_,!_)Ps(this.i,this.l,F,"[Invalid Chunked Response]"),Bi(this),ga(this);else if(F.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),cg(Me),Me.P=!0,An(11))}}else Ps(this.i,this.l,F,null),Ns(this,F);ut==4&&Bi(this),this.o&&!this.K&&(ut==4?dy(this.j,this):(this.o=!1,Os(this)))}else Io(this.g),M==400&&F.indexOf("Unknown SID")>0?(this.m=3,An(12)):(this.m=0,An(13)),Bi(this),ga(this)}}}catch{}finally{}};function US(_){if(!ty(_))return _.g.la();const M=jr(_.g);if(M==="")return"";let F="";const G=M.length,ge=rs(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Bi(_),ga(_),"";_.h.i=new s.TextDecoder}for(let xe=0;xe<G;xe++)_.h.h=!0,F+=_.h.i.decode(M[xe],{stream:!(ge&&xe==G-1)});return M.length=0,_.h.g+=F,_.C=0,_.h.g}function ty(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function ny(_,M){var F=_.C,G=M.indexOf(`
`,F);return G==-1?Er:(F=Number(M.substring(F,G)),isNaN(F)?Wn:(G+=1,G+F>M.length?Er:(M=M.slice(G,G+F),_.C=G+F,M)))}Ja.prototype.cancel=function(){this.K=!0,Bi(this)};function Os(_){_.T=Date.now()+_.H,rf(_,_.H)}function rf(_,M){if(_.D!=null)throw Error("WatchDog timer not null");_.D=pa(u(_.aa,_),M)}function Rs(_){_.D&&(s.clearTimeout(_.D),_.D=null)}Ja.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(uu(this.i,this.B),this.M!=2&&(vt(),An(17)),Bi(this),this.m=2,ga(this)):rf(this,this.T-_)};function ga(_){_.j.I==0||_.K||dy(_.j,_)}function Bi(_){Rs(_);var M=_.O;M&&typeof M.dispose=="function"&&M.dispose(),_.O=null,gn(_.V),_.g&&(M=_.g,_.g=null,M.abort(),M.dispose())}function Ns(_,M){try{var F=_.j;if(F.I!=0&&(F.g==_||js(F.h,_))){if(!_.L&&js(F.h,_)&&F.I==3){try{var G=F.Ba.g.parse(M)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ge=G;if(ge[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<_.F)ff(F),Gl(F);else break e;xu(F),An(18)}}else F.xa=ge[1],0<F.xa-F.K&&ge[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=pa(u(F.Va,F),6e3));Ms(F.h)<=1&&F.ta&&(F.ta=void 0)}else Us(F,11)}else if((_.L||F.g==_)&&ff(F),!j(M))for(ge=F.Ba.g.parse(M),M=0;M<ge.length;M++){let jt=ge[M];const yn=jt[0];if(!(yn<=F.K))if(F.K=yn,jt=jt[1],F.I==2)if(jt[0]=="c"){F.M=jt[1],F.ba=jt[2];const ya=jt[3];ya!=null&&(F.ka=ya,F.j.info("VER="+F.ka));const $s=jt[4];$s!=null&&(F.za=$s,F.j.info("SVER="+F.za));const is=jt[5];is!=null&&typeof is=="number"&&is>0&&(G=1.5*is,F.O=G,F.j.info("backChannelRequestTimeoutMs_="+G)),G=F;const as=_.g;if(as){const wu=as.g?as.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wu){var xe=G.h;xe.g||wu.indexOf("spdy")==-1&&wu.indexOf("quic")==-1&&wu.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(Qp(xe,xe.h),xe.h=null))}if(G.G){const hf=as.g?as.g.getResponseHeader("X-HTTP-Session-Id"):null;hf&&(G.wa=hf,Bt(G.J,G.G,hf))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-_.F,F.j.info("Handshake RTT: "+F.T+"ms")),G=F;var Me=_;if(G.na=py(G,G.L?G.ba:null,G.W),Me.L){Zp(G.h,Me);var ut=Me,Bn=G.O;Bn&&(ut.H=Bn),ut.D&&(Rs(ut),Os(ut)),G.g=Me}else cy(G);F.i.length>0&&Fs(F)}else jt[0]!="stop"&&jt[0]!="close"||Us(F,7);else F.I==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?Us(F,7):og(F):jt[0]!="noop"&&F.l&&F.l.qa(jt),F.A=0)}}vt(4)}catch{}}var Yn=class{constructor(_,M){this.g=_,this.map=M}};function Yp(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xp(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Ms(_){return _.h?1:_.g?_.g.size:0}function js(_,M){return _.h?_.h==M:_.g?_.g.has(M):!1}function Qp(_,M){_.g?_.g.add(M):_.h=M}function Zp(_,M){_.h&&_.h==M?_.h=null:_.g&&_.g.has(M)&&_.g.delete(M)}Yp.prototype.cancel=function(){if(this.i=Jp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Jp(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let M=_.i;for(const F of _.g.values())M=M.concat(F.G);return M}return m(_.i)}var ry=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function af(_,M){if(_){_=_.split("&");for(let F=0;F<_.length;F++){const G=_[F].indexOf("=");let ge,xe=null;G>=0?(ge=_[F].substring(0,G),xe=_[F].substring(G+1)):ge=_[F],M(ge,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Fi(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let M;_ instanceof Fi?(this.l=_.l,Tr(this,_.j),this.o=_.o,this.g=_.g,Ll(this,_.u),this.h=_.h,eg(this,oy(_.i)),this.m=_.m):_&&(M=String(_).match(ry))?(this.l=!1,Tr(this,M[1]||"",!0),this.o=zs(M[2]||""),this.g=zs(M[3]||"",!0),Ll(this,M[4]),this.h=zs(M[5]||"",!0),eg(this,M[6]||"",!0),this.m=zs(M[7]||"")):(this.l=!1,this.i=new Bl(null,this.l))}Fi.prototype.toString=function(){const _=[];var M=this.j;M&&_.push(pu(M,sf,!0),":");var F=this.g;return(F||M=="file")&&(_.push("//"),(M=this.o)&&_.push(pu(M,sf,!0),"@"),_.push(Ao(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&_.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&_.push("/"),_.push(pu(F,F.charAt(0)=="/"?tg:iy,!0))),(F=this.i.toString())&&_.push("?",F),(F=this.m)&&_.push("#",pu(F,ay)),_.join("")},Fi.prototype.resolve=function(_){const M=Xn(this);let F=!!_.j;F?Tr(M,_.j):F=!!_.o,F?M.o=_.o:F=!!_.g,F?M.g=_.g:F=_.u!=null;var G=_.h;if(F)Ll(M,_.u);else if(F=!!_.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var ge=M.h.lastIndexOf("/");ge!=-1&&(G=M.h.slice(0,ge+1)+G)}if(ge=G,ge==".."||ge==".")G="";else if(ge.indexOf("./")!=-1||ge.indexOf("/.")!=-1){G=ge.lastIndexOf("/",0)==0,ge=ge.split("/");const xe=[];for(let Me=0;Me<ge.length;){const ut=ge[Me++];ut=="."?G&&Me==ge.length&&xe.push(""):ut==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),G&&Me==ge.length&&xe.push("")):(xe.push(ut),G=!0)}G=xe.join("/")}else G=ge}return F?M.h=G:F=_.i.toString()!=="",F?eg(M,oy(_.i)):F=!!_.m,F&&(M.m=_.m),M};function Xn(_){return new Fi(_)}function Tr(_,M,F){_.j=F?zs(M,!0):M,_.j&&(_.j=_.j.replace(/:$/,""))}function Ll(_,M){if(M){if(M=Number(M),isNaN(M)||M<0)throw Error("Bad port number "+M);_.u=M}else _.u=null}function eg(_,M,F){M instanceof Bl?(_.i=M,lf(_.i,_.l)):(F||(M=pu(M,Vl)),_.i=new Bl(M,_.l))}function Bt(_,M,F){_.i.set(M,F)}function hu(_){return Bt(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function zs(_,M){return _?M?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function pu(_,M,F){return typeof _=="string"?(_=encodeURI(_).replace(M,xi),F&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function xi(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var sf=/[#\/\?@]/g,iy=/[#\?:]/g,tg=/[#\?]/g,Vl=/[#\?@]/g,ay=/#/g;function Bl(_,M){this.h=this.g=null,this.i=_||null,this.j=!!M}function wi(_){_.g||(_.g=new Map,_.h=0,_.i&&af(_.i,function(M,F){_.add(decodeURIComponent(M.replace(/\+/g," ")),F)}))}t=Bl.prototype,t.add=function(_,M){wi(this),this.i=null,_=Fl(this,_);let F=this.g.get(_);return F||this.g.set(_,F=[]),F.push(M),this.h+=1,this};function sy(_,M){wi(_),M=Fl(_,M),_.g.has(M)&&(_.i=null,_.h-=_.g.get(M).length,_.g.delete(M))}function ng(_,M){return wi(_),M=Fl(_,M),_.g.has(M)}t.forEach=function(_,M){wi(this),this.g.forEach(function(F,G){F.forEach(function(ge){_.call(M,ge,G,this)},this)},this)};function rg(_,M){wi(_);let F=[];if(typeof M=="string")ng(_,M)&&(F=F.concat(_.g.get(Fl(_,M))));else for(_=Array.from(_.g.values()),M=0;M<_.length;M++)F=F.concat(_[M]);return F}t.set=function(_,M){return wi(this),this.i=null,_=Fl(this,_),ng(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[M]),this.h+=1,this},t.get=function(_,M){return _?(_=rg(this,_),_.length>0?String(_[0]):M):M};function of(_,M,F){sy(_,M),F.length>0&&(_.i=null,_.g.set(Fl(_,M),m(F)),_.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],M=Array.from(this.g.keys());for(let G=0;G<M.length;G++){var F=M[G];const ge=Ao(F);F=rg(this,F);for(let xe=0;xe<F.length;xe++){let Me=ge;F[xe]!==""&&(Me+="="+Ao(F[xe])),_.push(Me)}}return this.i=_.join("&")};function oy(_){const M=new Bl;return M.i=_.i,_.g&&(M.g=new Map(_.g),M.h=_.h),M}function Fl(_,M){return M=String(M),_.j&&(M=M.toLowerCase()),M}function lf(_,M){M&&!_.j&&(wi(_),_.i=null,_.g.forEach(function(F,G){const ge=G.toLowerCase();G!=ge&&(sy(this,G),of(this,ge,F))},_)),_.j=M}function ts(_,M){const F=new oi;if(s.Image){const G=new Image;G.onload=f(ma,F,"TestLoadImage: loaded",!0,M,G),G.onerror=f(ma,F,"TestLoadImage: error",!1,M,G),G.onabort=f(ma,F,"TestLoadImage: abort",!1,M,G),G.ontimeout=f(ma,F,"TestLoadImage: timeout",!1,M,G),s.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=_}else M(!1)}function ig(_,M){const F=new oi,G=new AbortController,ge=setTimeout(()=>{G.abort(),ma(F,"TestPingServer: timeout",!1,M)},1e4);fetch(_,{signal:G.signal}).then(xe=>{clearTimeout(ge),xe.ok?ma(F,"TestPingServer: ok",!0,M):ma(F,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(ge),ma(F,"TestPingServer: error",!1,M)})}function ma(_,M,F,G,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),G(F)}catch{}}function Ul(){this.g=new Xa}function Ls(_){this.i=_.Sb||null,this.h=_.ab||!1}h(Ls,Qa),Ls.prototype.g=function(){return new gu(this.i,this.h)};function gu(_,M){Oe.call(this),this.H=_,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(gu,Oe),t=gu.prototype,t.open=function(_,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=M,this.readyState=1,ns(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const M={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(M.body=_),(this.H||s).fetch(new Request(this.D,M)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$l(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cf(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function cf(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var M=_.value?_.value:new Uint8Array(0);(M=this.B.decode(M,{stream:!_.done}))&&(this.response=this.responseText+=M)}_.done?$l(this):ns(this),this.readyState==3&&cf(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,$l(this))},t.Na=function(_){this.g&&(this.response=_,$l(this))},t.ga=function(){this.g&&$l(this)};function $l(_){_.readyState=4,_.l=null,_.j=null,_.B=null,ns(_)}t.setRequestHeader=function(_,M){this.A.append(_,M)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],M=this.h.entries();for(var F=M.next();!F.done;)F=F.value,_.push(F[0]+": "+F[1]),F=M.next();return _.join(`\r
`)};function ns(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function va(_){let M="";return ie(_,function(F,G){M+=G,M+=":",M+=F,M+=`\r
`}),M}function mu(_,M,F){e:{for(G in F){var G=!1;break e}G=!0}G||(F=va(F),typeof _=="string"?F!=null&&Ao(F):Bt(_,M,F))}function Wt(_){Oe.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Wt,Oe);var Vs=/^https?$/i,ag=["POST","PUT"];t=Wt.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,M,F,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);M=M?M.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wp.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(M,String(_),!0),this.B=!1}catch(xe){vu(this,xe);return}if(_=F||"",F=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ge in G)F.set(ge,G[ge]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const xe of G.keys())F.set(xe,G.get(xe));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(F.keys()).find(xe=>xe.toLowerCase()=="content-type"),ge=s.FormData&&_ instanceof s.FormData,!(Array.prototype.indexOf.call(ag,M,void 0)>=0)||G||ge||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Me]of F)this.g.setRequestHeader(xe,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(xe){vu(this,xe)}};function vu(_,M){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=M,_.o=5,sg(_),Co(_)}function sg(_){_.A||(_.A=!0,Ge(_,"complete"),Ge(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,Ge(this,"complete"),Ge(this,"abort"),Co(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Co(this,!0)),Wt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?yu(this):this.Xa())},t.Xa=function(){yu(this)};function yu(_){if(_.h&&typeof a<"u"){if(_.v&&rs(_)==4)setTimeout(_.Ca.bind(_),0);else if(Ge(_,"readystatechange"),rs(_)==4){_.h=!1;try{const xe=_.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var F;if(!(F=M)){var G;if(G=xe===0){let Me=String(_.D).match(ry)[1]||null;!Me&&s.self&&s.self.location&&(Me=s.self.location.protocol.slice(0,-1)),G=!Vs.test(Me?Me.toLowerCase():"")}F=G}if(F)Ge(_,"complete"),Ge(_,"success");else{_.o=6;try{var ge=rs(_)>2?_.g.statusText:""}catch{ge=""}_.l=ge+" ["+_.ca()+"]",sg(_)}}finally{Co(_)}}}}function Co(_,M){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const F=_.g;_.g=null,M||Ge(_,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function rs(_){return _.g?_.g.readyState:0}t.ca=function(){try{return rs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var M=this.g.responseText;return _&&M.indexOf(_)==0&&(M=M.substring(_.length)),Mr(M)}};function jr(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Io(_){const M={};_=(_.g&&rs(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<_.length;G++){if(j(_[G]))continue;var F=ey(_[G]);const ge=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const xe=M[ge]||[];M[ge]=xe,xe.push(F)}J(M,function(G){return G.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(_,M,F){return F&&F.internalChannelParams&&F.internalChannelParams[_]||M}function ql(_){this.za=0,this.i=[],this.j=new oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bs("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bs("baseRetryDelayMs",5e3,_),this.Za=Bs("retryDelaySeedMs",1e4,_),this.Ta=Bs("forwardChannelMaxRetries",2,_),this.va=Bs("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new Yp(_&&_.concurrentRequestLimit),this.Ba=new Ul,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ql.prototype,t.ka=8,t.I=1,t.connect=function(_,M,F,G){An(0),this.W=_,this.H=M||{},F&&G!==void 0&&(this.H.OSID=F,this.H.OAID=G),this.F=this.X,this.J=py(this,null,this.W),Fs(this)};function og(_){if(uf(_),_.I==3){var M=_.V++,F=Xn(_.J);if(Bt(F,"SID",_.M),Bt(F,"RID",M),Bt(F,"TYPE","terminate"),bu(_,F),M=new Ja(_,_.j,M),M.M=2,M.A=hu(Xn(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(M.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=M.A,F=!0),F||(M.g=gy(M.j,null),M.g.ea(M.A)),M.F=Date.now(),Os(M)}hy(_)}function Gl(_){_.g&&(cg(_),_.g.cancel(),_.g=null)}function uf(_){Gl(_),_.v&&(s.clearTimeout(_.v),_.v=null),ff(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&s.clearTimeout(_.m),_.m=null)}function Fs(_){if(!Xp(_.h)&&!_.m){_.m=!0;var M=_.Ea;O||P(),D||(O(),D=!0),k.add(M,_),_.D=0}}function df(_,M){return Ms(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=M.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=pa(u(_.Ea,_,M),fy(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const ge=new Ja(this,this.j,_);let xe=this.o;if(this.U&&(xe?(xe=U(xe),te(xe,this.U)):xe=this.U),this.u!==null||this.R||(ge.J=xe,xe=null),this.S)e:{for(var M=0,F=0;F<this.i.length;F++){t:{var G=this.i[F];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(M+=G,M>4096){M=F;break e}if(M===4096||F===this.i.length-1){M=F+1;break e}}M=1e3}else M=1e3;M=ly(this,ge,M),F=Xn(this.J),Bt(F,"RID",_),Bt(F,"CVER",22),this.G&&Bt(F,"X-HTTP-Session-Id",this.G),bu(this,F),xe&&(this.R?M="headers="+Ao(va(xe))+"&"+M:this.u&&mu(F,this.u,xe)),Qp(this.h,ge),this.Ra&&Bt(F,"TYPE","init"),this.S?(Bt(F,"$req",M),Bt(F,"SID","null"),ge.U=!0,Ds(ge,F,null)):Ds(ge,F,M),this.I=2}}else this.I==3&&(_?lg(this,_):this.i.length==0||Xp(this.h)||lg(this))};function lg(_,M){var F;M?F=M.l:F=_.V++;const G=Xn(_.J);Bt(G,"SID",_.M),Bt(G,"RID",F),Bt(G,"AID",_.K),bu(_,G),_.u&&_.o&&mu(G,_.u,_.o),F=new Ja(_,_.j,F,_.D+1),_.u===null&&(F.J=_.o),M&&(_.i=M.G.concat(_.i)),M=ly(_,F,1e3),F.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),Qp(_.h,F),Ds(F,G,M)}function bu(_,M){_.H&&ie(_.H,function(F,G){Bt(M,G,F)}),_.l&&ie({},function(F,G){Bt(M,G,F)})}function ly(_,M,F){F=Math.min(_.i.length,F);const G=_.l?u(_.l.Ka,_.l,_):null;e:{var ge=_.i;let ut=-1;for(;;){const Bn=["count="+F];ut==-1?F>0?(ut=ge[0].g,Bn.push("ofs="+ut)):ut=0:Bn.push("ofs="+ut);let jt=!0;for(let yn=0;yn<F;yn++){var xe=ge[yn].g;const ya=ge[yn].map;if(xe-=ut,xe<0)ut=Math.max(0,ge[yn].g-100),jt=!1;else try{xe="req"+xe+"_"||"";try{var Me=ya instanceof Map?ya:Object.entries(ya);for(const[$s,is]of Me){let as=is;o(is)&&(as=Kt(is)),Bn.push(xe+$s+"="+encodeURIComponent(as))}}catch($s){throw Bn.push(xe+"type="+encodeURIComponent("_badmap")),$s}}catch{G&&G(ya)}}if(jt){Me=Bn.join("&");break e}}Me=void 0}return _=_.i.splice(0,F),M.G=_,Me}function cy(_){if(!_.g&&!_.v){_.Y=1;var M=_.Da;O||P(),D||(O(),D=!0),k.add(M,_),_.A=0}}function xu(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=pa(u(_.Da,_),fy(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,uy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=pa(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,An(10),Gl(this),uy(this))};function cg(_){_.B!=null&&(s.clearTimeout(_.B),_.B=null)}function uy(_){_.g=new Ja(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var M=Xn(_.na);Bt(M,"RID","rpc"),Bt(M,"SID",_.M),Bt(M,"AID",_.K),Bt(M,"CI",_.F?"0":"1"),!_.F&&_.ia&&Bt(M,"TO",_.ia),Bt(M,"TYPE","xmlhttp"),bu(_,M),_.u&&_.o&&mu(M,_.u,_.o),_.O&&(_.g.H=_.O);var F=_.g;_=_.ba,F.M=1,F.A=hu(Xn(M)),F.u=null,F.R=!0,nf(F,_)}t.Va=function(){this.C!=null&&(this.C=null,Gl(this),xu(this),An(19))};function ff(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function dy(_,M){var F=null;if(_.g==M){ff(_),cg(_),_.g=null;var G=2}else if(js(_.h,M))F=M.G,Zp(_.h,M),G=1;else return;if(_.I!=0){if(M.o)if(G==1){F=M.u?M.u.length:0,M=Date.now()-M.F;var ge=_.D;G=jl(),Ge(G,new Vi(G,F)),Fs(_)}else cy(_);else if(ge=M.m,ge==3||ge==0&&M.X>0||!(G==1&&df(_,M)||G==2&&xu(_)))switch(F&&F.length>0&&(M=_.h,M.i=M.i.concat(F)),ge){case 1:Us(_,5);break;case 4:Us(_,10);break;case 3:Us(_,6);break;default:Us(_,2)}}}function fy(_,M){let F=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(F*=2),F*M}function Us(_,M){if(_.j.info("Error code "+M),M==2){var F=u(_.bb,_),G=_.Ua;const ge=!G;G=new Fi(G||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Tr(G,"https"),hu(G),ge?ts(G.toString(),F):ig(G.toString(),F)}else An(2);_.I=0,_.l&&_.l.pa(M),hy(_),uf(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),An(2)):(this.j.info("Failed to ping google.com"),An(1))};function hy(_){if(_.I=0,_.ja=[],_.l){const M=Jp(_.h);(M.length!=0||_.i.length!=0)&&(b(_.ja,M),b(_.ja,_.i),_.h.i.length=0,m(_.i),_.i.length=0),_.l.oa()}}function py(_,M,F){var G=F instanceof Fi?Xn(F):new Fi(F);if(G.g!="")M&&(G.g=M+"."+G.g),Ll(G,G.u);else{var ge=s.location;G=ge.protocol,M=M?M+"."+ge.hostname:ge.hostname,ge=+ge.port;const xe=new Fi(null);G&&Tr(xe,G),M&&(xe.g=M),ge&&Ll(xe,ge),F&&(xe.h=F),G=xe}return F=_.G,M=_.wa,F&&M&&Bt(G,F,M),Bt(G,"VER",_.ka),bu(_,G),G}function gy(_,M,F){if(M&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return M=_.Aa&&!_.ma?new Wt(new Ls({ab:F})):new Wt(_.ma),M.Fa(_.L),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function my(){}t=my.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Hl(){}Hl.prototype.g=function(_,M){return new li(_,M)};function li(_,M){Oe.call(this),this.g=new ql(M),this.l=_,this.h=M&&M.messageUrlParams||null,_=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(_?_["X-WebChannel-Content-Type"]=M.messageContentType:_={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.sa&&(_?_["X-WebChannel-Client-Profile"]=M.sa:_={"X-WebChannel-Client-Profile":M.sa}),this.g.U=_,(_=M&&M.Qb)&&!j(_)&&(this.g.u=_),this.A=M&&M.supportsCrossDomainXhr||!1,this.v=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!j(M)&&(this.g.G=M,_=this.h,_!==null&&M in _&&(_=this.h,M in _&&delete _[M])),this.j=new ko(this)}h(li,Oe),li.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},li.prototype.close=function(){og(this.g)},li.prototype.o=function(_){var M=this.g;if(typeof _=="string"){var F={};F.__data__=_,_=F}else this.v&&(F={},F.__data__=Kt(_),_=F);M.i.push(new Yn(M.Ya++,_)),M.I==3&&Fs(M)},li.prototype.N=function(){this.g.l=null,delete this.j,og(this.g),delete this.g,li.Z.N.call(this)};function vy(_){mn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var M=_.__sm__;if(M){e:{for(const F in M){_=F;break e}_=void 0}(this.i=_)&&(_=this.i,M=M!==null&&_ in M?M[_]:void 0),this.data=M}else this.data=_}h(vy,mn);function yy(){vn.call(this),this.status=1}h(yy,vn);function ko(_){this.g=_}h(ko,my),ko.prototype.ra=function(){Ge(this.g,"a")},ko.prototype.qa=function(_){Ge(this.g,new vy(_))},ko.prototype.pa=function(_){Ge(this.g,new yy)},ko.prototype.oa=function(){Ge(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,li.prototype.send=li.prototype.o,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,z8=function(){return new Hl},j8=function(){return jl()},M8=Mt,UI={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},du.NO_ERROR=0,du.TIMEOUT=8,du.HTTP_ERROR=6,Ax=du,Kp.COMPLETE="complete",N8=Kp,Za.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,fm=Za,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,R8=Wt}).apply(typeof Tb<"u"?Tb:typeof self<"u"?self:typeof window<"u"?window:{});const TL="@firebase/firestore",AL="4.9.2";class Qr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");let Sp="12.3.0";const Sd=new $1("@firebase/firestore");function ah(){return Sd.logLevel}function De(t,...e){if(Sd.logLevel<=Et.DEBUG){const n=e.map(RD);Sd.debug(`Firestore (${Sp}): ${t}`,...n)}}function Gn(t,...e){if(Sd.logLevel<=Et.ERROR){const n=e.map(RD);Sd.error(`Firestore (${Sp}): ${t}`,...n)}}function tv(t,...e){if(Sd.logLevel<=Et.WARN){const n=e.map(RD);Sd.warn(`Firestore (${Sp}): ${t}`,...n)}}function RD(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,L8(t,r,n)}function L8(t,e,n){let r=`FIRESTORE (${Sp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function Ye(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||L8(e,i,r)}function He(t,e){return t}const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends wo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class so{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class wce{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _ce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Qr.UNAUTHENTICATED)))}shutdown(){}}class Sce{constructor(e){this.t=e,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new so;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new so,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new so)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new wce(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new Qr(e)}}class Ece{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Tce{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Ece(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Qr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class CL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ace{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ta(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const r=a=>{a.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,De("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new CL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new CL(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Cce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class ND{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Cce(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function $I(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return JT(i)===JT(a)?st(i,a):JT(i)?1:-1}return st(t.length,e.length)}const Ice=55296,kce=57343;function JT(t){const e=t.charCodeAt(0);return e>=Ice&&e<=kce}function Lh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function V8(t){return t+"\0"}const IL="__name__";class Qs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Qs.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return st(e.length,n.length)}static compareSegments(e,n){const r=Qs.isNumericId(e),i=Qs.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Qs.extractNumericId(e).compare(Qs.extractNumericId(n)):$I(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zc.fromString(e.substring(4,e.length-2))}}class Lt extends Qs{construct(e,n,r){return new Lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Lt(n)}static emptyPath(){return new Lt([])}}const Pce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Qs{construct(e,n,r){return new In(e,n,r)}static isValidIdentifier(e){return Pce.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IL}static keyField(){return new In([IL])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ne(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ne(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ne(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Ne(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(n)}static emptyPath(){return new In([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(Lt.fromString(e))}static fromName(e){return new je(Lt.fromString(e).popFirst(5))}static empty(){return new je(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Lt(e.slice()))}}function B8(t,e,n){if(!n)throw new Ne(Se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Dce(t,e,n,r){if(e===!0&&r===!0)throw new Ne(Se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kL(t){if(!je.isDocumentKey(t))throw new Ne(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PL(t){if(je.isDocumentKey(t))throw new Ne(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function F8(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Q1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function Ni(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ne(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Q1(t);throw new Ne(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function sr(t,e){const n={typeString:t};return e&&(n.value=e),n}function n0(t,e){if(!F8(t))throw new Ne(Se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ne(Se.INVALID_ARGUMENT,n);return!0}const DL=-62135596800,OL=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*OL);return new pt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ne(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ne(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<DL)throw new Ne(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OL}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(n0(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-DL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:sr("string",pt._jsonSchemaVersion),seconds:sr("number"),nanoseconds:sr("number")};class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new pt(0,0))}static max(){return new Ze(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vh=-1;class ow{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function qI(t){return t.fields.find((e=>e.kind===2))}function Fu(t){return t.fields.filter((e=>e.kind!==2))}ow.UNKNOWN_ID=-1;class Cx{constructor(e,n){this.fieldPath=e,this.kind=n}}class nv{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new nv(0,la.min())}}function U8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ze.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new la(i,je.empty(),e)}function $8(t){return new la(t.readTime,t.key,Vh)}class la{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new la(Ze.min(),je.empty(),Vh)}static max(){return new la(Ze.max(),je.empty(),Vh)}}function MD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=je.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}const q8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function nu(t){if(t.code!==Se.FAILED_PRECONDITION||t.message!==q8)throw t;De("LocalStore","Unexpectedly lost primary lease")}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.reject(n)}static resolve(e){return new pe(((n,r)=>{n(e)}))}static reject(e){return new pe(((n,r)=>{r(e)}))}static waitFor(e){return new pe(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=pe.resolve(!1);for(const r of e)n=n.next((i=>i?pe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new pe(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new pe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const Qi="SimpleDb";class Z1{static open(e,n,r,i){try{return new Z1(n,e.transaction(i,r))}catch(a){throw new Am(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new so,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Am(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=jD(r.target.error);this.S.reject(new Am(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(De(Qi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Rce(n)}}class Lc{static delete(e){return De(Qi,"Removing database:",e),Wu(pD().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!U1())return!1;if(Lc.F())return!0;const e=yr(),n=Lc.M(e),r=0<n&&n<10,i=H8(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Lc.M(yr())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(De(Qi,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new Am(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Ne(Se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Ne(Se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Am(e,s))},i.onupgradeneeded=a=>{De(Qi,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{De(Qi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=Z1.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),pe.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(De(Qi,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function H8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Oce{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Wu(this.U.delete())}}class Am extends Ne{constructor(e,n){super(Se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ru(t){return t.name==="IndexedDbTransactionError"}class Rce{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(De(Qi,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(De(Qi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wu(r)}add(e){return De(Qi,"ADD",this.store.name,e,e),Wu(this.store.add(e))}get(e){return Wu(this.store.get(e)).next((n=>(n===void 0&&(n=null),De(Qi,"GET",this.store.name,e,n),n)))}delete(e){return De(Qi,"DELETE",this.store.name,e),Wu(this.store.delete(e))}count(){return De(Qi,"COUNT",this.store.name),Wu(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new pe(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.H(a,((o,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new pe(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){De(Qi,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new pe(((r,i)=>{n.onerror=a=>{const s=jD(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}H(e,n){const r=[];return new pe(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new Oce(o),u=n(o.primaryKey,o.value,c);if(u instanceof pe){const f=u.catch((h=>(c.done(),pe.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>pe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Wu(t){return new pe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=jD(r.target.error);n(i)}}))}let RL=!1;function jD(t){const e=Lc.M(yr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RL||(RL=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Cm="IndexBackfiller";class Nce{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){De(Cm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();De(Cm,`Documents written: ${n}`)}catch(n){ru(n)?De(Cm,"Ignoring IndexedDB error during index backfill: ",n):await nu(n)}await this.re(6e4)}))}}class Mce{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return pe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return De(Cm,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(De(Cm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=$8(a);MD(s,r)>0&&(r=s)})),new la(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Ii{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ii.ce=-1;const dd=-1;function J1(t){return t==null}function rv(t){return t===0&&1/t==-1/0}function K8(t){return typeof t=="number"&&Number.isInteger(t)&&!rv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const lw="";function ni(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=NL(e)),e=jce(t.get(n),e);return NL(e)}function jce(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case lw:n+="";break;default:n+=a}}return n}function NL(t){return t+lw+""}function eo(t){const e=t.length;if(Ye(e>=2,64408,{path:t}),e===2)return Ye(t.charAt(0)===lw&&t.charAt(1)==="",56145,{path:t}),Lt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(lw,a);switch((s<0||s>n)&&Fe(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Fe(61167,{path:t})}a=s+2}return new Lt(r)}const Uu="remoteDocuments",r0="owner",$f="owner",iv="mutationQueues",zce="userId",us="mutations",ML="batchId",rd="userMutationsIndex",jL=["userId","batchId"];function Ix(t,e){return[t,ni(e)]}function W8(t,e,n){return[t,ni(e),n]}const Lce={},Bh="documentMutations",cw="remoteDocumentsV14",Vce=["prefixPath","collectionGroup","readTime","documentId"],kx="documentKeyIndex",Bce=["prefixPath","collectionGroup","documentId"],Y8="collectionGroupIndex",Fce=["collectionGroup","readTime","prefixPath","documentId"],av="remoteDocumentGlobal",GI="remoteDocumentGlobalKey",Fh="targets",X8="queryTargetsIndex",Uce=["canonicalId","targetId"],Uh="targetDocuments",$ce=["targetId","path"],zD="documentTargetsIndex",qce=["path","targetId"],uw="targetGlobalKey",fd="targetGlobal",sv="collectionParents",Gce=["collectionId","parent"],$h="clientMetadata",Hce="clientId",e_="bundles",Kce="bundleId",t_="namedQueries",Wce="name",LD="indexConfiguration",Yce="indexId",HI="collectionGroupIndex",Xce="collectionGroup",Im="indexState",Qce=["indexId","uid"],Q8="sequenceNumberIndex",Zce=["uid","sequenceNumber"],km="indexEntries",Jce=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Z8="documentKeyIndex",eue=["indexId","uid","orderedDocumentKey"],n_="documentOverlays",tue=["userId","collectionPath","documentId"],KI="collectionPathOverlayIndex",nue=["userId","collectionPath","largestBatchId"],J8="collectionGroupOverlayIndex",rue=["userId","collectionGroup","largestBatchId"],VD="globals",iue="name",eq=[iv,us,Bh,Uu,Fh,r0,fd,Uh,$h,av,sv,e_,t_],aue=[...eq,n_],tq=[iv,us,Bh,cw,Fh,r0,fd,Uh,$h,av,sv,e_,t_,n_],nq=tq,BD=[...nq,LD,Im,km],sue=BD,rq=[...BD,VD],oue=rq;class WI extends G8{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function br(t,e){const n=He(t);return Lc.O(n.le,e)}function zL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function iu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ln{constructor(e,n){this.comparator=e,this.root=n||Hr.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ab(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ab(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ab(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ab(this.root,e,this.comparator,!0)}}class Ab{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Hr.RED,this.left=i??Hr.EMPTY,this.right=a??Hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Hr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Hr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Hr.EMPTY=null,Hr.RED=!0,Hr.BLACK=!1;Hr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Hr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new LL(this.data.getIterator())}getIteratorFrom(e){return new LL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Gt(this.comparator);return n.data=e,n}}class LL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qf(t){return t.hasNext()?t.getNext():void 0}class ki{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new ki([])}unionWith(e){let n=new Gt(In.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ki(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class aq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new aq("Invalid base64 string: "+a):a}})(e);return new Hn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const lue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pl(t){if(Ye(!!t,39018),typeof t=="string"){let e=0;const n=lue.exec(t);if(Ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(t.seconds),nanos:wn(t.nanos)}}function wn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gl(t){return typeof t=="string"?Hn.fromBase64String(t):Hn.fromUint8Array(t)}const sq="server_timestamp",oq="__type__",lq="__previous_value__",cq="__local_write_time__";function FD(t){return(t?.mapValue?.fields||{})[oq]?.stringValue===sq}function r_(t){const e=t.mapValue.fields[lq];return FD(e)?r_(e):e}function ov(t){const e=pl(t.mapValue.fields[cq].timestampValue);return new pt(e.seconds,e.nanos)}class cue{constructor(e,n,r,i,a,s,o,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}}const dw="(default)";class Ed{constructor(e,n){this.projectId=e,this.database=n||dw}static empty(){return new Ed("","")}get isDefaultDatabase(){return this.database===dw}isEqual(e){return e instanceof Ed&&e.projectId===this.projectId&&e.database===this.database}}const UD="__type__",uq="__max__",kc={mapValue:{fields:{__type__:{stringValue:uq}}}},$D="__vector__",qh="value",Px={nullValue:"NULL_VALUE"};function $c(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?FD(t)?4:dq(t)?9007199254740991:i_(t)?10:11:Fe(28295,{value:t})}function mo(t,e){if(t===e)return!0;const n=$c(t);if(n!==$c(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ov(t).isEqual(ov(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=pl(i.timestampValue),o=pl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return gl(i.bytesValue).isEqual(gl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return wn(i.geoPointValue.latitude)===wn(a.geoPointValue.latitude)&&wn(i.geoPointValue.longitude)===wn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return wn(i.integerValue)===wn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=wn(i.doubleValue),o=wn(a.doubleValue);return s===o?rv(s)===rv(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return Lh(t.arrayValue.values||[],e.arrayValue.values||[],mo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(zL(s)!==zL(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!mo(s[c],o[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function lv(t,e){return(t.values||[]).find((n=>mo(n,e)))!==void 0}function qc(t,e){if(t===e)return 0;const n=$c(t),r=$c(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=wn(a.integerValue||a.doubleValue),c=wn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return VL(t.timestampValue,e.timestampValue);case 4:return VL(ov(t),ov(e));case 5:return $I(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=gl(a),c=gl(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=st(o[u],c[u]);if(f!==0)return f}return st(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=st(wn(a.latitude),wn(s.latitude));return o!==0?o:st(wn(a.longitude),wn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return BL(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[qh]?.arrayValue,f=c[qh]?.arrayValue,h=st(u?.values?.length||0,f?.values?.length||0);return h!==0?h:BL(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===kc.mapValue&&s===kc.mapValue)return 0;if(a===kc.mapValue)return 1;if(s===kc.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=$I(c[h],f[h]);if(g!==0)return g;const m=qc(o[c[h]],u[f[h]]);if(m!==0)return m}return st(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function VL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=pl(t),r=pl(e),i=st(n.seconds,r.seconds);return i!==0?i:st(n.nanos,r.nanos)}function BL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=qc(n[i],r[i]);if(a)return a}return st(n.length,r.length)}function Gh(t){return YI(t)}function YI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=pl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return gl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return je.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=YI(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${YI(n.fields[s])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function Dx(t){switch($c(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=r_(t);return e?16+Dx(e):16;case 5:return 2*t.stringValue.length;case 6:return gl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Dx(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return iu(r.fields,((a,s)=>{i+=a.length+Dx(s)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function cv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function XI(t){return!!t&&"integerValue"in t}function uv(t){return!!t&&"arrayValue"in t}function FL(t){return!!t&&"nullValue"in t}function UL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ox(t){return!!t&&"mapValue"in t}function i_(t){return(t?.mapValue?.fields||{})[UD]?.stringValue===$D}function Pm(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return iu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Pm(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pm(t.arrayValue.values[n]);return e}return{...t}}function dq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uq}const fq={mapValue:{fields:{[UD]:{stringValue:$D},[qh]:{arrayValue:{}}}}};function uue(t){return"nullValue"in t?Px:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?cv(Ed.empty(),je.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?i_(t)?fq:{mapValue:{}}:Fe(35942,{value:t})}function due(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?cv(Ed.empty(),je.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?fq:"mapValue"in t?i_(t)?{mapValue:{}}:kc:Fe(61959,{value:t})}function $L(t,e){const n=qc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function qL(t,e){const n=qc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ox(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pm(n)}setAll(e){let n=In.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Pm(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Ox(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ox(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){iu(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ei(Pm(this.value))}}function hq(t){const e=[];return iu(t.fields,((n,r)=>{const i=new In([n]);if(Ox(r)){const a=hq(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new ki(e)}class zn{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new zn(e,0,Ze.min(),Ze.min(),Ze.min(),ei.empty(),0)}static newFoundDocument(e,n,r,i){return new zn(e,1,n,Ze.min(),r,i,0)}static newNoDocument(e,n){return new zn(e,2,n,Ze.min(),Ze.min(),ei.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,Ze.min(),Ze.min(),ei.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hh{constructor(e,n){this.position=e,this.inclusive=n}}function GL(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=je.comparator(je.fromName(s.referenceValue),n.key):r=qc(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function HL(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mo(t.position[n],e.position[n]))return!1;return!0}class dv{constructor(e,n="asc"){this.field=e,this.dir=n}}function fue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class pq{}class Tt extends pq{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hue(e,n,r):n==="array-contains"?new mue(e,r):n==="in"?new xq(e,r):n==="not-in"?new vue(e,r):n==="array-contains-any"?new yue(e,r):new Tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pue(e,r):new gue(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qc(n,this.value)):n!==null&&$c(this.value)===$c(n)&&this.matchesComparison(qc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qt extends pq{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qt(e,n)}matches(e){return Kh(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Kh(t){return t.op==="and"}function QI(t){return t.op==="or"}function qD(t){return gq(t)&&Kh(t)}function gq(t){for(const e of t.filters)if(e instanceof qt)return!1;return!0}function ZI(t){if(t instanceof Tt)return t.field.canonicalString()+t.op.toString()+Gh(t.value);if(qD(t))return t.filters.map((e=>ZI(e))).join(",");{const e=t.filters.map((n=>ZI(n))).join(",");return`${t.op}(${e})`}}function mq(t,e){return t instanceof Tt?(function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&mo(r.value,i.value)})(t,e):t instanceof qt?(function(r,i){return i instanceof qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&mq(s,i.filters[o])),!0):!1})(t,e):void Fe(19439)}function vq(t,e){const n=t.filters.concat(e);return qt.create(n,t.op)}function yq(t){return t instanceof Tt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Gh(n.value)}`})(t):t instanceof qt?(function(n){return n.op.toString()+" {"+n.getFilters().map(yq).join(" ,")+"}"})(t):"Filter"}class hue extends Tt{constructor(e,n,r){super(e,n,r),this.key=je.fromName(r.referenceValue)}matches(e){const n=je.comparator(e.key,this.key);return this.matchesComparison(n)}}class pue extends Tt{constructor(e,n){super(e,"in",n),this.keys=bq("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gue extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=bq("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bq(t,e){return(e.arrayValue?.values||[]).map((n=>je.fromName(n.referenceValue)))}class mue extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uv(n)&&lv(n.arrayValue,this.value)}}class xq extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lv(this.value.arrayValue,n)}}class vue extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(lv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!lv(this.value.arrayValue,n)}}class yue extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>lv(this.value.arrayValue,r)))}}class bue{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function JI(t,e=null,n=[],r=[],i=null,a=null,s=null){return new bue(t,e,n,r,i,a,s)}function Td(t){const e=He(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ZI(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),J1(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Gh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Gh(r))).join(",")),e.Te=n}return e.Te}function i0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mq(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HL(t.startAt,e.startAt)&&HL(t.endAt,e.endAt)}function fw(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function hw(t,e){return t.filters.filter((n=>n instanceof Tt&&n.field.isEqual(e)))}function KL(t,e,n){let r=Px,i=!0;for(const a of hw(t,e)){let s=Px,o=!0;switch(a.op){case"<":case"<=":s=uue(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=Px}$L({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];$L({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function WL(t,e,n){let r=kc,i=!0;for(const a of hw(t,e)){let s=kc,o=!0;switch(a.op){case">=":case">":s=due(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=kc}qL({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];qL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class Ep{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wq(t,e,n,r,i,a,s,o){return new Ep(t,e,n,r,i,a,s,o)}function a0(t){return new Ep(t)}function YL(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _q(t){return t.collectionGroup!==null}function Dm(t){const e=He(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Gt(In.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new dv(a,r))})),n.has(In.keyField().canonicalString())||e.Ie.push(new dv(In.keyField(),r))}return e.Ie}function sa(t){const e=He(t);return e.Ee||(e.Ee=xue(e,Dm(t))),e.Ee}function xue(t,e){if(t.limitType==="F")return JI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new dv(i.field,a)}));const n=t.endAt?new Hh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hh(t.startAt.position,t.startAt.inclusive):null;return JI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ek(t,e){const n=t.filters.concat([e]);return new Ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pw(t,e,n){return new Ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function a_(t,e){return i0(sa(t),sa(e))&&t.limitType===e.limitType}function Sq(t){return`${Td(sa(t))}|lt:${t.limitType}`}function sh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>yq(i))).join(", ")}]`),J1(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Gh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Gh(i))).join(",")),`Target(${r})`})(sa(t))}; limitType=${t.limitType})`}function s0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Dm(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=GL(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,Dm(r),i)||r.endAt&&!(function(s,o,c){const u=GL(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,Dm(r),i))})(t,e)}function Eq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Tq(t){return(e,n)=>{let r=!1;for(const i of Dm(t)){const a=wue(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function wue(t,e,n){const r=t.field.isKeyField()?je.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?qc(c,u):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}class Il{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){iu(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return iq(this.inner)}size(){return this.innerSize}}const _ue=new ln(je.comparator);function ra(){return _ue}const Aq=new ln(je.comparator);function hm(...t){let e=Aq;for(const n of t)e=e.insert(n.key,n);return e}function Cq(t){let e=Aq;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function to(){return Om()}function Iq(){return Om()}function Om(){return new Il((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Sue=new ln(je.comparator),Eue=new Gt(je.comparator);function mt(...t){let e=Eue;for(const n of t)e=e.add(n);return e}const Tue=new Gt(st);function GD(){return Tue}function HD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rv(e)?"-0":e}}function kq(t){return{integerValue:""+t}}function Aue(t,e){return K8(e)?kq(e):HD(t,e)}class s_{constructor(){this._=void 0}}function Cue(t,e,n){return t instanceof fv?(function(i,a){const s={fields:{[oq]:{stringValue:sq},[cq]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&FD(a)&&(a=r_(a)),a&&(s.fields[lq]=a),{mapValue:s}})(n,e):t instanceof Ad?Dq(t,e):t instanceof Wh?Oq(t,e):(function(i,a){const s=Pq(i,a),o=XL(s)+XL(i.Ae);return XI(s)&&XI(i.Ae)?kq(o):HD(i.serializer,o)})(t,e)}function Iue(t,e,n){return t instanceof Ad?Dq(t,e):t instanceof Wh?Oq(t,e):n}function Pq(t,e){return t instanceof hv?(function(r){return XI(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class fv extends s_{}class Ad extends s_{constructor(e){super(),this.elements=e}}function Dq(t,e){const n=Rq(e);for(const r of t.elements)n.some((i=>mo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Wh extends s_{constructor(e){super(),this.elements=e}}function Oq(t,e){let n=Rq(e);for(const r of t.elements)n=n.filter((i=>!mo(i,r)));return{arrayValue:{values:n}}}class hv extends s_{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function XL(t){return wn(t.integerValue||t.doubleValue)}function Rq(t){return uv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Nq{constructor(e,n){this.field=e,this.transform=n}}function kue(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ad&&i instanceof Ad||r instanceof Wh&&i instanceof Wh?Lh(r.elements,i.elements,mo):r instanceof hv&&i instanceof hv?mo(r.Ae,i.Ae):r instanceof fv&&i instanceof fv})(t.transform,e.transform)}class Pue{constructor(e,n){this.version=e,this.transformResults=n}}class mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class o_{}function Mq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new o0(t.key,mr.none()):new Tp(t.key,t.data,mr.none());{const n=t.data,r=ei.empty();let i=new Gt(In.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new kl(t.key,r,new ki(i.toArray()),mr.none())}}function Due(t,e,n){t instanceof Tp?(function(i,a,s){const o=i.value.clone(),c=ZL(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof kl?(function(i,a,s){if(!Rx(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=ZL(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(jq(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Rm(t,e,n,r){return t instanceof Tp?(function(a,s,o,c){if(!Rx(a.precondition,s))return o;const u=a.value.clone(),f=JL(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof kl?(function(a,s,o,c){if(!Rx(a.precondition,s))return o;const u=JL(a.fieldTransforms,c,s),f=s.data;return f.setAll(jq(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return Rx(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function Oue(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=Pq(r.transform,i||null);a!=null&&(n===null&&(n=ei.empty()),n.set(r.field,a))}return n||null}function QL(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Lh(r,i,((a,s)=>kue(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tp extends o_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kl extends o_{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function ZL(t,e,n){const r=new Map;Ye(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Iue(s,o,n[i]))}return r}function JL(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Cue(a,s,e))}return r}class o0 extends o_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zq extends o_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class KD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Due(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Iq();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=Mq(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ze.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),mt())}isEqual(e){return this.batchId===e.batchId&&Lh(this.mutations,e.mutations,((n,r)=>QL(n,r)))&&Lh(this.baseMutations,e.baseMutations,((n,r)=>QL(n,r)))}}class WD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Sue})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new WD(e,n,r,i)}}class YD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Rue{constructor(e,n){this.count=e,this.unchangedNames=n}}var nr,It;function Nue(t){switch(t){case Se.OK:return Fe(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function Lq(t){if(t===void 0)return Gn("GRPC error has no .code"),Se.UNKNOWN;switch(t){case nr.OK:return Se.OK;case nr.CANCELLED:return Se.CANCELLED;case nr.UNKNOWN:return Se.UNKNOWN;case nr.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case nr.INTERNAL:return Se.INTERNAL;case nr.UNAVAILABLE:return Se.UNAVAILABLE;case nr.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case nr.NOT_FOUND:return Se.NOT_FOUND;case nr.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case nr.ABORTED:return Se.ABORTED;case nr.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case nr.DATA_LOSS:return Se.DATA_LOSS;default:return Fe(39323,{code:t})}}(It=nr||(nr={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function Mue(){return new TextEncoder}const jue=new zc([4294967295,4294967295],0);function e3(t){const e=Mue().encode(t),n=new O8;return n.update(e),new Uint8Array(n.digest())}function t3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new zc([n,r],0),new zc([i,a],0)]}class XD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pm(`Invalid padding: ${n}`);if(r<0)throw new pm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pm(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(zc.fromNumber(r)));return i.compare(jue)===1&&(i=new zc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=e3(e),[r,i]=t3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new XD(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=e3(e),[r,i]=t3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class l0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,c0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new l0(Ze.min(),i,new ln(st),ra(),mt())}}class c0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new c0(r,n,mt(),mt(),mt())}}class Nx{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Vq{constructor(e,n){this.targetId=e,this.Ce=n}}class Bq{constructor(e,n,r=Hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class n3{constructor(){this.ve=0,this.Fe=r3(),this.Me=Hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=mt(),n=mt(),r=mt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:a})}})),new c0(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=r3()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zue{constructor(e){this.Ge=e,this.ze=new Map,this.je=ra(),this.Je=Cb(),this.He=Cb(),this.Ye=new ln(st)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(fw(a))if(r===0){const s=new je(a.path);this.et(n,s,zn.newNoDocument(s,Ze.min()))}else Ye(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=gl(r).toUint8Array()}catch(c){if(c instanceof aq)return tv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new XD(s,i,a)}catch(c){return tv(c instanceof pm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&fw(o.target)){const c=new je(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,zn.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.qe())}}));let r=mt();this.He.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new l0(e,n,this.Ye,this.je,r);return this.je=ra(),this.Je=Cb(),this.He=Cb(),this.Ye=new ln(st),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new n3,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Gt(st),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Gt(st),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||De("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new n3),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Cb(){return new ln(je.comparator)}function r3(){return new ln(je.comparator)}const Lue={asc:"ASCENDING",desc:"DESCENDING"},Vue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bue={and:"AND",or:"OR"};class Fue{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tk(t,e){return t.useProto3Json||J1(e)?e:{value:e}}function Yh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Uue(t,e){return Yh(t,e.toTimestamp())}function mi(t){return Ye(!!t,49232),Ze.fromTimestamp((function(n){const r=pl(n);return new pt(r.seconds,r.nanos)})(t))}function QD(t,e){return nk(t,e).canonicalString()}function nk(t,e){const n=(function(i){return new Lt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Uq(t){const e=Lt.fromString(t);return Ye(Qq(e),10190,{key:e.toString()}),e}function gw(t,e){return QD(t.databaseId,e.path)}function hd(t,e){const n=Uq(e);if(n.get(1)!==t.databaseId.projectId)throw new Ne(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ne(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new je(Gq(n))}function $q(t,e){return QD(t.databaseId,e)}function qq(t){const e=Uq(t);return e.length===4?Lt.emptyPath():Gq(e)}function rk(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gq(t){return Ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function i3(t,e,n){return{name:gw(t,e),fields:n.value.mapValue.fields}}function $ue(t,e,n){const r=hd(t,e.name),i=mi(e.updateTime),a=e.createTime?mi(e.createTime):Ze.min(),s=new ei({mapValue:{fields:e.fields}}),o=zn.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function que(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(Ye(f===void 0||typeof f=="string",58123),Hn.fromBase64String(f||"")):(Ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Hn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?Se.UNKNOWN:Lq(u.code);return new Ne(f,u.message||"")})(s);n=new Bq(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=hd(t,r.document.name),a=mi(r.document.updateTime),s=r.document.createTime?mi(r.document.createTime):Ze.min(),o=new ei({mapValue:{fields:r.document.fields}}),c=zn.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Nx(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=hd(t,r.document),a=r.readTime?mi(r.readTime):Ze.min(),s=zn.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Nx([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=hd(t,r.document),a=r.removedTargetIds||[];n=new Nx([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Rue(i,a),o=r.targetId;n=new Vq(o,s)}}return n}function mw(t,e){let n;if(e instanceof Tp)n={update:i3(t,e.key,e.value)};else if(e instanceof o0)n={delete:gw(t,e.key)};else if(e instanceof kl)n={update:i3(t,e.key,e.data),updateMask:Xue(e.fieldMask)};else{if(!(e instanceof zq))return Fe(16599,{Vt:e.type});n={verify:gw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof fv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ad)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Wh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof hv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Fe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Uue(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),n}function ik(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?mr.updateTime(mi(a.updateTime)):a.exists!==void 0?mr.exists(a.exists):mr.none()})(e.currentDocument):mr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)Ye(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new fv;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Ad(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new Wh(f)}else"increment"in o?c=new hv(s,o.increment):Fe(16584,{proto:o});const u=In.fromServerFormat(o.fieldPath);return new Nq(u,c)})(t,i))):[];if(e.update){e.update.name;const i=hd(t,e.update.name),a=new ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new ki(u.map((f=>In.fromServerFormat(f))))})(e.updateMask);return new kl(i,a,s,n,r)}return new Tp(i,a,n,r)}if(e.delete){const i=hd(t,e.delete);return new o0(i,n)}if(e.verify){const i=hd(t,e.verify);return new zq(i,n)}return Fe(1463,{proto:e})}function Gue(t,e){return t&&t.length>0?(Ye(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?mi(i.updateTime):mi(a);return s.isEqual(Ze.min())&&(s=mi(a)),new Pue(s,i.transformResults||[])})(n,e)))):[]}function Hq(t,e){return{documents:[$q(t,e.path)]}}function Kq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$q(t,i);const a=(function(u){if(u.length!==0)return Xq(qt.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:oh(g.field),direction:Kue(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=tk(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function Wq(t){let e=qq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ye(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=Yq(h);return g instanceof qt&&qD(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new dv(lh(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,J1(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,m=h.values||[];return new Hh(m,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,m=h.values||[];return new Hh(m,g)})(n.endAt)),wq(e,i,s,a,o,"F",c,u)}function Hue(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Yq(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lh(n.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=lh(n.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=lh(n.unaryFilter.field);return Tt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=lh(n.unaryFilter.field);return Tt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Tt.create(lh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return qt.create(n.compositeFilter.filters.map((r=>Yq(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function Kue(t){return Lue[t]}function Wue(t){return Vue[t]}function Yue(t){return Bue[t]}function oh(t){return{fieldPath:t.canonicalString()}}function lh(t){return In.fromServerFormat(t.fieldPath)}function Xq(t){return t instanceof Tt?(function(n){if(n.op==="=="){if(UL(n.value))return{unaryFilter:{field:oh(n.field),op:"IS_NAN"}};if(FL(n.value))return{unaryFilter:{field:oh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UL(n.value))return{unaryFilter:{field:oh(n.field),op:"IS_NOT_NAN"}};if(FL(n.value))return{unaryFilter:{field:oh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oh(n.field),op:Wue(n.op),value:n.value}}})(t):t instanceof qt?(function(n){const r=n.getFilters().map((i=>Xq(i)));return r.length===1?r[0]:{compositeFilter:{op:Yue(n.op),filters:r}}})(t):Fe(54877,{filter:t})}function Xue(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Qq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Zo{constructor(e,n,r,i,a=Ze.min(),s=Ze.min(),o=Hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Zq{constructor(e){this.yt=e}}function Que(t,e){let n;if(e.document)n=$ue(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),i=Id(e.noDocument.readTime);n=zn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=je.fromSegments(e.unknownDocument.path),i=Id(e.unknownDocument.version);n=zn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new pt(i[0],i[1]);return Ze.fromTimestamp(a)})(e.readTime)),n}function a3(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:vw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:gw(a,s.key),fields:s.data.value.mapValue.fields,updateTime:Yh(a,s.version.toTimestamp()),createTime:Yh(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Cd(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Cd(e.version)}}return r}function vw(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Cd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Id(t){const e=new pt(t.seconds,t.nanoseconds);return Ze.fromTimestamp(e)}function Yu(t,e){const n=(e.baseMutations||[]).map((a=>ik(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>ik(t.yt,a))),i=pt.fromMillis(e.localWriteTimeMs);return new KD(e.batchId,i,n,r)}function gm(t){const e=Id(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Id(t.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return Ye(s===1,1966,{count:s}),sa(a0(qq(a.documents[0])))})(t.query):(function(a){return sa(Wq(a))})(t.query),new Zo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Hn.fromBase64String(t.resumeToken))}function Jq(t,e){const n=Cd(e.snapshotVersion),r=Cd(e.lastLimboFreeSnapshotVersion);let i;i=fw(e.target)?Hq(t.yt,e.target):Kq(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Td(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eG(t){const e=Wq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pw(e,e.limit,"L"):e}function eA(t,e){return new YD(e.largestBatchId,ik(t.yt,e.overlayMutation))}function s3(t,e){const n=e.path.lastSegment();return[t,ni(e.path.popLast()),n]}function o3(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Cd(r.readTime),documentKey:ni(r.documentKey.path),largestBatchId:r.largestBatchId}}class Zue{getBundleMetadata(e,n){return l3(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Id(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return l3(e).put((function(i){return{bundleId:i.id,createTime:Cd(mi(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return c3(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:eG(a.bundledQuery),readTime:Id(a.readTime)}})(r)}))}saveNamedQuery(e,n){return c3(e).put((function(i){return{name:i.name,readTime:Cd(mi(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function l3(t){return br(t,e_)}function c3(t){return br(t,t_)}class l_{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new l_(e,r)}getOverlay(e,n){return Yg(e).get(s3(this.userId,n)).next((r=>r?eA(this.serializer,r):null))}getOverlays(e,n){const r=to();return pe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new YD(n,s);i.push(this.St(e,o))})),pe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(ni(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(Yg(e).Z(KI,o))})),pe.waitFor(a)}getOverlaysForCollection(e,n,r){const i=to(),a=ni(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Yg(e).J(KI,s).next((o=>{for(const c of o){const u=eA(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=to();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Yg(e).ee({index:J8,range:o},((c,u,f)=>{const h=eA(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}St(e,n){return Yg(e).put((function(i,a,s){const[o,c,u]=s3(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:mw(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function Yg(t){return br(t,n_)}class Jue{bt(e){return br(e,VD)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Hn.fromUint8Array(r):Hn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Xu{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),rv(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=pl(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(gl(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?dq(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):i_(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Fe(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=qh,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(wn(a)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),je.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Xu.Kt=new Xu;const Gf=255;function ede(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function u3(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=ede(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class tde{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=u3(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=u3(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Gf),this.sn(255)}_n(){this.an(Gf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Gf?(this.sn(Gf),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Gf?(this.an(Gf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class nde{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class rde{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Xg{constructor(){this.cn=new tde,this.ln=new nde(this.cn),this.hn=new rde(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Qu{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Qu(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Mx(this.En),directionalValue:Mx(this.dn),orderedDocumentKey:Mx(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function mc(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=d3(t.En,e.En),n!==0?n:(n=d3(t.dn,e.dn),n!==0?n:je.comparator(t.In,e.In)))}function d3(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Mx(t){return v$()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function f3(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class h3{constructor(e){this.mn=new Gt(((n,r)=>In.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ye(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=qI(e);if(n!==void 0&&!this.wn(n))return!1;const r=Fu(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.Sn(o,c)||!this.bn(this.fn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.fn.length||!this.bn(this.fn[s++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Gt(In.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Cx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Cx(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Cx(r.field,r.dir==="asc"?0:1)));return new ow(ow.UNKNOWN_ID,this.collectionId,n,nv.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function tG(t){if(Ye(t instanceof Tt||t instanceof qt,20012),t instanceof Tt){if(t instanceof xq){const n=t.value.arrayValue?.values?.map((r=>Tt.create(t.field,"==",r)))||[];return qt.create(n,"or")}return t}const e=t.filters.map((n=>tG(n)));return qt.create(e,t.op)}function ide(t){if(t.getFilters().length===0)return[];const e=ok(tG(t));return Ye(nG(e),7391),ak(e)||sk(e)?[e]:e.getFilters()}function ak(t){return t instanceof Tt}function sk(t){return t instanceof qt&&qD(t)}function nG(t){return ak(t)||sk(t)||(function(n){if(n instanceof qt&&QI(n)){for(const r of n.getFilters())if(!ak(r)&&!sk(r))return!1;return!0}return!1})(t)}function ok(t){if(Ye(t instanceof Tt||t instanceof qt,34018),t instanceof Tt)return t;if(t.filters.length===1)return ok(t.filters[0]);const e=t.filters.map((r=>ok(r)));let n=qt.create(e,t.op);return n=yw(n),nG(n)?n:(Ye(n instanceof qt,64498),Ye(Kh(n),40251),Ye(n.filters.length>1,57927),n.filters.reduce(((r,i)=>ZD(r,i))))}function ZD(t,e){let n;return Ye(t instanceof Tt||t instanceof qt,38388),Ye(e instanceof Tt||e instanceof qt,25473),n=t instanceof Tt?e instanceof Tt?(function(i,a){return qt.create([i,a],"and")})(t,e):p3(t,e):e instanceof Tt?p3(e,t):(function(i,a){if(Ye(i.filters.length>0&&a.filters.length>0,48005),Kh(i)&&Kh(a))return vq(i,a.getFilters());const s=QI(i)?i:a,o=QI(i)?a:i,c=s.filters.map((u=>ZD(u,o)));return qt.create(c,"or")})(t,e),yw(n)}function p3(t,e){if(Kh(e))return vq(e,t.getFilters());{const n=e.filters.map((r=>ZD(t,r)));return qt.create(n,"or")}}function yw(t){if(Ye(t instanceof Tt||t instanceof qt,11850),t instanceof Tt)return t;const e=t.getFilters();if(e.length===1)return yw(e[0]);if(gq(t))return t;const n=e.map((i=>yw(i))),r=[];return n.forEach((i=>{i instanceof Tt?r.push(i):i instanceof qt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:qt.create(r,t.op)}class ade{constructor(){this.Cn=new JD}addToCollectionParentIndex(e,n){return this.Cn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(la.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(la.min())}updateCollectionGroup(e,n,r){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class JD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Gt(Lt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(Lt.comparator)).toArray()}}const g3="IndexedDbIndexManager",Ib=new Uint8Array(0);class sde{constructor(e,n){this.databaseId=n,this.vn=new JD,this.Fn=new Il((r=>Td(r)),((r,i)=>i0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const a={collectionId:r,parent:ni(i)};return m3(e).put(a)}return pe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[V8(n),""],!1,!0);return m3(e).J(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(eo(s.parent))}return r}))}addFieldIndex(e,n){const r=Qg(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=Kf(e);return a.next((o=>{s.put(o3(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=Qg(e),i=Kf(e),a=Hf(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Qg(e),r=Hf(e),i=Kf(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return pe.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new h3(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=Hf(e);let i=!0;const a=new Map;return pe.forEach(this.Mn(n),(s=>this.xn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=mt();const o=[];return pe.forEach(a,((c,u)=>{De(g3,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((R=>`${R.fieldPath}:${R.kind}`)).join(",")}`})(c)} to execute ${Td(n)}`);const f=(function(I,R){const O=qI(R);if(O===void 0)return null;for(const D of hw(I,O.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null})(u,c),h=(function(I,R){const O=new Map;for(const D of Fu(R))for(const k of hw(I,D.fieldPath))switch(k.op){case"==":case"in":O.set(D.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return O.set(D.fieldPath.canonicalString(),k.value),Array.from(O.values())}return null})(u,c),g=(function(I,R){const O=[];let D=!0;for(const k of Fu(R)){const P=k.kind===0?KL(I,k.fieldPath,I.startAt):WL(I,k.fieldPath,I.startAt);O.push(P.value),D&&(D=P.inclusive)}return new Hh(O,D)})(u,c),m=(function(I,R){const O=[];let D=!0;for(const k of Fu(R)){const P=k.kind===0?WL(I,k.fieldPath,I.endAt):KL(I,k.fieldPath,I.endAt);O.push(P.value),D&&(D=P.inclusive)}return new Hh(O,D)})(u,c),b=this.On(c,u,g),x=this.On(c,u,m),w=this.Nn(c,u,h),S=this.Bn(c.indexId,f,b,g.inclusive,x,m.inclusive,w);return pe.forEach(S,(T=>r.Y(T,n.limit).next((I=>{I.forEach((R=>{const O=je.fromSegments(R.documentKey);s.has(O)||(s=s.add(O),o.push(O))}))}))))})).next((()=>o))}return pe.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=ide(qt.create(e.filters,"and")).map((r=>JI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Ln(n[h/u]):Ib,m=this.kn(e,g,r[h%u],i),b=this.qn(e,g,a[h%u],s),x=o.map((w=>this.kn(e,g,w,!0)));f.push(...this.createRange(m,b,x))}return f}kn(e,n,r,i){const a=new Qu(e,je.empty(),n,r);return i?a:a.An()}qn(e,n,r,i){const a=new Qu(e,je.empty(),n,r);return i?a.An():a}xn(e,n){const r=new h3(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.yn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return pe.forEach(i,(a=>this.xn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Gt(In.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new Xg;for(const i of Fu(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.Pn(i.kind);Xu.Kt.Dt(a,s)}return r.un()}Ln(e){const n=new Xg;return Xu.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Xg;return Xu.Kt.Dt(cv(this.databaseId,n),r.Pn((function(a){const s=Fu(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Xg);let a=0;for(const s of Fu(e)){const o=r[a++];for(const c of i)if(this.Un(n,s.fieldPath)&&uv(o))i=this.Kn(i,s,o);else{const u=c.Pn(s.kind);Xu.Kt.Dt(o,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new Xg;c.seed(o.un()),Xu.Kt.Dt(s,c.Pn(n.kind)),a.push(c)}return a}Un(e,n){return!!e.filters.find((r=>r instanceof Tt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Qg(e),i=Kf(e);return(n?r.J(HI,IDBKeyRange.bound(n,n)):r.J()).next((a=>{const s=[];return pe.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new nv(h.sequenceNumber,new la(Id(h.readTime),new je(eo(h.documentKey)),h.largestBatchId)):nv.empty(),m=f.fields.map((([b,x])=>new Cx(In.fromServerFormat(b),x)));return new ow(f.indexId,f.collectionGroup,m,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:st(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Qg(e),a=Kf(e);return this.Gn(e).next((s=>i.J(HI,IDBKeyRange.bound(n,n)).next((o=>pe.forEach(o,(c=>a.put(o3(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return pe.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?pe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),pe.forEach(o,(c=>this.zn(e,i,c).next((u=>{const f=this.jn(a,c);return u.isEqual(f)?pe.resolve():this.Jn(e,a,c,u,f)})))))))}))}Hn(e,n,r,i){return Hf(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Hf(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Hf(e);let a=new Gt(mc);return i.ee({index:Z8,range:IDBKeyRange.only([r.indexId,this.uid,Mx(this.$n(r,n))])},((s,o)=>{a=a.add(new Qu(r.indexId,n,f3(o.arrayValue),f3(o.directionalValue)))})).next((()=>a))}jn(e,n){let r=new Gt(mc);const i=this.Qn(n,e);if(i==null)return r;const a=qI(n);if(a!=null){const s=e.data.field(a.fieldPath);if(uv(s))for(const o of s.arrayValue.values||[])r=r.add(new Qu(n.indexId,e.key,this.Ln(o),i))}else r=r.add(new Qu(n.indexId,e.key,Ib,i));return r}Jn(e,n,r,i,a){De(g3,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const m=c.getIterator(),b=u.getIterator();let x=qf(m),w=qf(b);for(;x||w;){let S=!1,T=!1;if(x&&w){const I=f(x,w);I<0?T=!0:I>0&&(S=!0)}else x!=null?T=!0:S=!0;S?(h(w),w=qf(b)):T?(g(x),x=qf(m)):(x=qf(m),w=qf(b))}})(i,a,mc,(o=>{s.push(this.Hn(e,n,r,o))}),(o=>{s.push(this.Yn(e,n,r,o))})),pe.waitFor(s)}Gn(e){let n=1;return Kf(e).ee({index:Q8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>mc(s,o))).filter(((s,o,c)=>!o||mc(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=mc(s,e),c=mc(s,n);if(o===0)i[0]=e.An();else if(o>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const o=i[s].Vn(this.uid,Ib,je.empty()),c=i[s+1].Vn(this.uid,Ib,je.empty());a.push(IDBKeyRange.bound(o,c))}return a}Zn(e,n){return mc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(v3)}getMinOffset(e,n){return pe.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Fe(44426))))).next(v3)}}function m3(t){return br(t,sv)}function Hf(t){return br(t,km)}function Qg(t){return br(t,LD)}function Kf(t){return br(t,Im)}function v3(t){Ye(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;MD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new la(e.readTime,e.documentKey,n)}const y3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rG=41943040;class Zr{static withCacheSize(e){return new Zr(e,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function iG(t,e,n){const r=t.store(us),i=t.store(Bh),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{Ye(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=W8(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return pe.waitFor(a).next((()=>u))}function bw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fe(14731);e=t.noDocument}return JSON.stringify(e).length}Zr.DEFAULT_COLLECTION_PERCENTILE=10,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zr.DEFAULT=new Zr(rG,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zr.DISABLED=new Zr(-1,0,0);class c_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){Ye(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new c_(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vc(e).ee({index:rd,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=ch(e),s=vc(e);return s.add({}).next((o=>{Ye(typeof o=="number",49019);const c=new KD(o,n,r,i),u=(function(m,b,x){const w=x.baseMutations.map((T=>mw(m.yt,T))),S=x.mutations.map((T=>mw(m.yt,T)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:S}})(this.serializer,this.userId,c),f=[];let h=new Gt(((g,m)=>st(g.canonicalString(),m.canonicalString())));for(const g of i){const m=W8(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(m,Lce))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=c.keys()})),pe.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return vc(e).get(n).next((r=>r?(Ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Yu(this.serializer,r)):null))}er(e,n){return this.Xn[n]?pe.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return vc(e).ee({index:rd,range:i},((s,o,c)=>{o.userId===this.userId&&(Ye(o.batchId>=r,47524,{tr:r}),a=Yu(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=dd;return vc(e).ee({index:rd,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,dd],[this.userId,Number.POSITIVE_INFINITY]);return vc(e).J(rd,n).next((r=>r.map((i=>Yu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ix(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return ch(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=eo(f);if(u===this.userId&&n.path.isEqual(g))return vc(e).get(h).next((m=>{if(!m)throw Fe(61480,{nr:s,batchId:h});Ye(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),a.push(Yu(this.serializer,m))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(st);const i=[];return n.forEach((a=>{const s=Ix(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=ch(e).ee({range:o},((u,f,h)=>{const[g,m,b]=u,x=eo(m);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),pe.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Ix(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Gt(st);return ch(e).ee({range:s},((c,u,f)=>{const[h,g,m]=c,b=eo(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(m)):f.done()})).next((()=>this.rr(e,o)))}rr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(vc(e).get(a).next((s=>{if(s===null)throw Fe(35274,{batchId:a});Ye(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(Yu(this.serializer,s))})))})),pe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return iG(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),pe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return pe.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return ch(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=eo(a[1]);i.push(c)}else o.done()})).next((()=>{Ye(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return aG(e,this.userId,n)}_r(e){return sG(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:dd,lastStreamToken:""}))}}function aG(t,e,n){const r=Ix(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return ch(t).ee({range:a,X:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function vc(t){return br(t,us)}function ch(t){return br(t,Bh)}function sG(t){return br(t,iv)}class kd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new kd(0)}static cr(){return new kd(-1)}}class ode{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new kd(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Ze.fromTimestamp(new pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Wf(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(Ye(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return Wf(e).ee(((s,o)=>{const c=gm(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>pe.waitFor(a))).next((()=>i))}forEachTarget(e,n){return Wf(e).ee(((r,i)=>{const a=gm(i);n(a)}))}lr(e){return b3(e).get(uw).next((n=>(Ye(n!==null,2888),n)))}hr(e,n){return b3(e).put(uw,n)}Pr(e,n){return Wf(e).put(Jq(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Td(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Wf(e).ee({range:i,index:X8},((s,o,c)=>{const u=gm(o);i0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Cc(e);return n.forEach((s=>{const o=ni(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),pe.waitFor(i)}removeMatchingKeys(e,n,r){const i=Cc(e);return pe.forEach(n,(a=>{const s=ni(a.path);return pe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Cc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Cc(e);let a=mt();return i.ee({range:r,X:!0},((s,o,c)=>{const u=eo(s[1]),f=new je(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=ni(n.path),i=IDBKeyRange.bound([r],[V8(r)],!1,!0);let a=0;return Cc(e).ee({index:zD,X:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return Wf(e).get(n).next((r=>r?gm(r):null))}}function Wf(t){return br(t,Fh)}function b3(t){return br(t,fd)}function Cc(t){return br(t,Uh)}const x3="LruGarbageCollector",oG=1048576;function w3([t,e],[n,r]){const i=st(t,n);return i===0?st(e,r):i}class lde{constructor(e){this.Ir=e,this.buffer=new Gt(w3),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();w3(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){De(x3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ru(n)?De(x3,"Ignoring IndexedDB error during garbage collection: ",n):await nu(n)}await this.Vr(3e5)}))}}class cde{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(Ii.ce);const r=new lde(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(De("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(y3)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y3):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),ah()<=Et.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function cG(t,e){return new cde(t,e)}class ude{constructor(e,n){this.db=e,this.garbageCollector=cG(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return kb(e,r)}removeReference(e,n,r){return kb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return kb(e,n)}br(e,n){return(function(i,a){let s=!1;return sG(i).te((o=>aG(i,o,a).next((c=>(c&&(s=!0),pe.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((s,o)=>{if(o<=n){const c=this.br(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Ze.min()),Cc(e).delete((function(h){return[0,ni(h.path)]})(s)))))}));i.push(c)}})).next((()=>pe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return kb(e,n)}Sr(e,n){const r=Cc(e);let i,a=Ii.ce;return r.ee({index:zD},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==Ii.ce&&n(new je(eo(i)),a),a=u,i=c):a=Ii.ce})).next((()=>{a!==Ii.ce&&n(new je(eo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function kb(t,e){return Cc(t).put((function(r,i){return{targetId:0,path:ni(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class uG{constructor(){this.changes=new Il((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dde{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return zu(e).put(r)}removeEntry(e,n,r){return zu(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],vw(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=zn.newInvalidDocument(n);return zu(e).ee({index:kx,range:IDBKeyRange.only(Zg(n))},((i,a)=>{r=this.Cr(n,a)})).next((()=>r))}vr(e,n){let r={size:0,document:zn.newInvalidDocument(n)};return zu(e).ee({index:kx,range:IDBKeyRange.only(Zg(n))},((i,a)=>{r={document:this.Cr(n,a),size:bw(a)}})).next((()=>r))}getEntries(e,n){let r=ra();return this.Fr(e,n,((i,a)=>{const s=this.Cr(i,a);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=ra(),i=new ln(je.comparator);return this.Fr(e,n,((a,s)=>{const o=this.Cr(a,s);r=r.insert(a,o),i=i.insert(a,bw(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return pe.resolve();let i=new Gt(E3);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(Zg(i.first()),Zg(i.last())),s=i.getIterator();let o=s.getNext();return zu(e).ee({index:kx,range:a},((c,u,f)=>{const h=je.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&E3(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(Zg(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),vw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zu(e).J(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=ra();for(const h of u){const g=this.Cr(je.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(s0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=ra();const s=S3(n,r),o=S3(n,la.max());return zu(e).ee({index:Y8,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Cr(je.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new fde(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return _3(e).get(GI).next((n=>(Ye(!!n,20021),n)))}Dr(e,n){return _3(e).put(GI,n)}Cr(e,n){if(n){const r=Que(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ze.min())))return r}return zn.newInvalidDocument(e)}}function dG(t){return new dde(t)}class fde extends uG{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Il((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Gt(((a,s)=>st(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Br.get(a);if(n.push(this.Nr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=a3(this.Nr.serializer,s);i=i.add(a.path.popLast());const u=bw(c);r+=u-o.size,n.push(this.Nr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=a3(this.Nr.serializer,s.convertToNoDocument(Ze.min()));n.push(this.Nr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Nr.updateMetadata(e,r)),pe.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((a,s)=>{this.Br.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function _3(t){return br(t,av)}function zu(t){return br(t,cw)}function Zg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function S3(t,e){const n=e.documentKey.path.toArray();return[t,vw(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function E3(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=st(n[a],r[a]),i)return i;return i=st(n.length,r.length),i||(i=st(n[n.length-2],r[r.length-2]),i||st(n[n.length-1],r[r.length-1]))}class hde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class fG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Rm(r.mutation,i,ki.empty(),pt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,mt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=mt()){const i=to();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=hm();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=to();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,mt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=ra();const s=Om(),o=(function(){return Om()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof kl)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),Rm(f.mutation,u,f.mutation.getFieldMask(),pt.now())):s.set(u.key,ki.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new hde(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=Om();let i=new ln(((s,o)=>s-o)),a=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||ki.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||mt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=Iq();f.forEach((g=>{if(!a.has(g)){const m=Mq(n.get(g),r.get(g));m!==null&&h.set(g,m),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return pe.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return je.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_q(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):pe.resolve(to());let o=Vh,c=a;return s.next((u=>pe.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?pe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,mt()))).next((f=>({batchId:o,changes:Cq(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new je(n)).next((r=>{let i=hm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=hm();return this.indexManager.getCollectionParents(e,a).next((o=>pe.forEach(o,(c=>{const u=(function(h,g){return new Ep(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,zn.newInvalidDocument(f)))}));let o=hm();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&Rm(f.mutation,u,ki.empty(),pt.now()),s0(n,u)&&(o=o.insert(c,u))})),o}))}}class pde{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return pe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:mi(i.createTime)}})(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:eG(i.bundledQuery),readTime:mi(i.readTime)}})(n)),pe.resolve()}}class gde{constructor(){this.overlays=new ln(je.comparator),this.qr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=to();return pe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),pe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),pe.resolve()}getOverlaysForCollection(e,n,r){const i=to(),a=n.length+1,s=new je(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ln(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=to(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=to(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return pe.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new YD(n,r));let a=this.qr.get(n);a===void 0&&(a=mt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class mde{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}class eO{constructor(){this.Qr=new Gt(kr.$r),this.Ur=new Gt(kr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new kr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new kr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new je(new Lt([])),r=new kr(n,e),i=new kr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new je(new Lt([])),r=new kr(n,e),i=new kr(n,e+1);let a=mt();return this.Ur.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new kr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return je.comparator(e.key,n.key)||st(e.Yr,n.Yr)}static Kr(e,n){return st(e.Yr,n.Yr)||je.comparator(e.key,n.key)}}class vde{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(kr.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new KD(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new kr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return pe.resolve(s)}lookupMutationBatch(e,n){return pe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return pe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?dd:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kr(n,0),i=new kr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(s=>{const o=this.Xr(s.Yr);a.push(o)})),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(st);return n.forEach((i=>{const a=new kr(i,0),s=new kr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(o=>{r=r.add(o.Yr)}))})),pe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;je.isDocumentKey(a)||(a=a.child(""));const s=new kr(new je(a),0);let o=new Gt(st);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Yr)),!0)}),s),pe.resolve(this.ti(o))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return pe.forEach(n.mutations,(i=>{const a=new kr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new kr(n,0),i=this.Zr.firstAfterOrEqual(r);return pe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class yde{constructor(e){this.ri=e,this.docs=(function(){return new ln(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return pe.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let r=ra();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))})),pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ra();const s=n.path,o=new je(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||MD($8(f),r)<=0||(i.has(f.key)||s0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return pe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ii(e,n){return pe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new bde(this)}getSize(e){return pe.resolve(this.size)}}class bde extends uG{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),pe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class xde{constructor(e){this.persistence=e,this.si=new Il((n=>Td(n)),i0),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.oi=0,this._i=new eO,this.targetCount=0,this.ai=kd.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),pe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new kd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Pr(n),pe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),pe.waitFor(a).next((()=>i))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return pe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),pe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),pe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return pe.resolve(r)}containsKey(e,n){return pe.resolve(this._i.containsKey(n))}}class tO{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ii(0),this.li=!1,this.li=!0,this.hi=new mde,this.referenceDelegate=e(this),this.Pi=new xde(this),this.indexManager=new ade,this.remoteDocumentCache=(function(i){return new yde(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Zq(n),this.Ii=new pde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new vde(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){De("MemoryPersistence","Starting transaction:",e);const i=new wde(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return pe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class wde extends G8{constructor(e){super(),this.currentSequenceNumber=e}}class u_{constructor(e){this.persistence=e,this.Ri=new eO,this.Vi=null}static mi(e){return new u_(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),pe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,(r=>{const i=je.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,Ze.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return pe.or([()=>pe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class xw{constructor(e,n){this.persistence=e,this.pi=new Il((r=>ni(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=cG(this,n)}static mi(e,n){return new xw(e,n)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return pe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?pe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((o=>{o||(r++,a.removeEntry(s,Ze.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),pe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dx(e.data.value)),n}br(e,n,r){return pe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class _de{constructor(e){this.serializer=e}k(e,n,r,i){const a=new Z1("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(r0)})(e),(function(c){c.createObjectStore(iv,{keyPath:zce}),c.createObjectStore(us,{keyPath:ML,autoIncrement:!0}).createIndex(rd,jL,{unique:!0}),c.createObjectStore(Bh)})(e),T3(e),(function(c){c.createObjectStore(Uu)})(e));let s=pe.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Uh),c.deleteObjectStore(Fh),c.deleteObjectStore(fd)})(e),T3(e)),s=s.next((()=>(function(c){const u=c.store(fd),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return u.put(uw,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(us).J().next((h=>{c.deleteObjectStore(us),c.createObjectStore(us,{keyPath:ML,autoIncrement:!0}).createIndex(rd,jL,{unique:!0});const g=u.store(us),m=h.map((b=>g.put(b)));return pe.waitFor(m)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore($h,{keyPath:Hce})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(av)})(e),this.wi(a))))),r<7&&i>=7&&(s=s.next((()=>this.Si(a)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(e_,{keyPath:Kce})})(e),(function(c){c.createObjectStore(t_,{keyPath:Wce})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(n_,{keyPath:tue});u.createIndex(KI,nue,{unique:!1}),u.createIndex(J8,rue,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(cw,{keyPath:Vce});u.createIndex(kx,Bce),u.createIndex(Y8,Fce)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Uu)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(LD,{keyPath:Yce,autoIncrement:!0}).createIndex(HI,Xce,{unique:!1}),c.createObjectStore(Im,{keyPath:Qce}).createIndex(Q8,Zce,{unique:!1}),c.createObjectStore(km,{keyPath:Jce}).createIndex(Z8,eue,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(Im).clear()})).next((()=>{n.objectStore(km).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(VD,{keyPath:iue})})(e)}))),r<18&&i>=18&&v$()&&(s=s.next((()=>{n.objectStore(Im).clear()})).next((()=>{n.objectStore(km).clear()}))),s}wi(e){let n=0;return e.store(Uu).ee(((r,i)=>{n+=bw(i)})).next((()=>{const r={byteSize:n};return e.store(av).put(GI,r)}))}yi(e){const n=e.store(iv),r=e.store(us);return n.J().next((i=>pe.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,dd],[a.userId,a.lastAcknowledgedBatchId]);return r.J(rd,s).next((o=>pe.forEach(o,(c=>{Ye(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Yu(this.serializer,c);return iG(e,a.userId,u).next((()=>{}))}))))}))))}Si(e){const n=e.store(Uh),r=e.store(Uu);return e.store(fd).get(uw).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new Lt(s),u=(function(h){return[0,ni(h)]})(c);a.push(n.get(u).next((f=>f?pe.resolve():(h=>n.put({targetId:0,path:ni(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>pe.waitFor(a)))}))}bi(e,n){e.createObjectStore(sv,{keyPath:Gce});const r=n.store(sv),i=new JD,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:ni(c)})}};return n.store(Uu).ee({X:!0},((s,o)=>{const c=new Lt(s);return a(c.popLast())})).next((()=>n.store(Bh).ee({X:!0},(([s,o,c],u)=>{const f=eo(o);return a(f.popLast())}))))}Di(e){const n=e.store(Fh);return n.ee(((r,i)=>{const a=gm(i),s=Jq(this.serializer,a);return n.put(s)}))}Ci(e,n){const r=n.store(Uu),i=[];return r.ee(((a,s)=>{const o=n.store(cw),c=(function(h){return h.document?new je(Lt.fromString(h.document.name).popFirst(5)):h.noDocument?je.fromSegments(h.noDocument.path):h.unknownDocument?je.fromSegments(h.unknownDocument.path):Fe(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>pe.waitFor(i)))}Fi(e,n){const r=n.store(us),i=dG(this.serializer),a=new tO(u_.mi,this.serializer.yt);return r.J().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??mt();Yu(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),pe.forEach(o,((c,u)=>{const f=new Qr(u),h=l_.wt(this.serializer,f),g=a.getIndexManager(f),m=c_.wt(f,this.serializer,g,a.referenceDelegate);return new fG(i,m,h,g).recalculateAndSaveOverlaysForDocumentKeys(new WI(n,Ii.ce),c).next()}))}))}}function T3(t){t.createObjectStore(Uh,{keyPath:$ce}).createIndex(zD,qce,{unique:!0}),t.createObjectStore(Fh,{keyPath:"targetId"}).createIndex(X8,Uce,{unique:!0}),t.createObjectStore(fd)}const yc="IndexedDbPersistence",tA=18e5,nA=5e3,rA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sde="main";class nO{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=s,this.document=o,this.xi=u,this.Oi=f,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!nO.v())throw new Ne(Se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ude(this,i),this.$i=n+Sde,this.serializer=new Zq(c),this.Ui=new Lc(this.$i,this.Ni,new _de(this.serializer)),this.hi=new Jue,this.Pi=new ode(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dG(this.serializer),this.Ii=new Zue,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Gn(yc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(Se.FAILED_PRECONDITION,rA);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ii(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Pb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ru(e))return De(yc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return De(yc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Jg(e).get($f).next((n=>pe.resolve(this.es(n))))}ts(e){return Pb(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,tA)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=br(n,$h);return r.J().next((i=>{const a=this.ss(i,tA),s=i.filter((o=>a.indexOf(o)===-1));return pe.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?pe.resolve(!0):Jg(e).get($f).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,nA)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Ne(Se.FAILED_PRECONDITION,rA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pb(e).J().next((r=>this.ss(r,nA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&De(yc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[r0,$h],(e=>{const n=new WI(e,Ii.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Pb(e).J().next((n=>this.ss(n,tA).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return c_.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sde(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return l_.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){De(yc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?oue:c===17?rq:c===16?sue:c===15?BD:c===14?nq:c===13?tq:c===12?aue:c===11?eq:void Fe(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,a,(o=>(s=new WI(o,this.ci?this.ci.next():Ii.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Ne(Se.FAILED_PRECONDITION,q8);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Is(e){return Jg(e).get($f).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,nA)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ne(Se.FAILED_PRECONDITION,rA)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jg(e).put($f,n)}static v(){return Lc.v()}Zi(e){const n=Jg(e);return n.get($f).next((r=>this.es(r)?(De(yc,"Releasing primary lease."),n.delete($f)):pe.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Gn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;m$()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return De(yc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Gn(yc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jg(t){return br(t,r0)}function Pb(t){return br(t,$h)}function hG(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class rO{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=mt(),i=mt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new rO(e,n.fromCache,r,i)}}class Ede{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pG{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return m$()?8:H8(yr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Ede;return this.Ss(e,n,s).next((o=>{if(a.result=o,this.Vs)return this.bs(e,n,s,o.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(ah()<=Et.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",sh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(ah()<=Et.DEBUG&&De("QueryEngine","Query:",sh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ah()<=Et.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",sh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sa(n))):pe.resolve())}ys(e,n){if(YL(n))return pe.resolve(null);let r=sa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=pw(n,null,"F"),r=sa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=mt(...a);return this.ps.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(n,o);return this.Cs(n,u,s,c.readTime)?this.ys(e,pw(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,r,i){return YL(n)||i.isEqual(Ze.min())?pe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const s=this.Ds(n,a);return this.Cs(n,s,r,i)?pe.resolve(null):(ah()<=Et.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sh(n)),this.vs(e,s,n,U8(i,Vh)).next((o=>o)))}))}Ds(e,n){let r=new Gt(Tq(e));return n.forEach(((i,a)=>{s0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return ah()<=Et.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",sh(n)),this.ps.getDocumentsMatchingQuery(e,n,la.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const iO="LocalStore",Tde=3e8;class Ade{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ln(st),this.xs=new Il((a=>Td(a)),i0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fG(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function gG(t,e,n,r){return new Ade(t,e,n,r)}async function mG(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=mt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function Cde(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let m=pe.resolve();return g.forEach((b=>{m=m.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);Ye(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),m.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=mt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function vG(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Ide(t,e){const n=He(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(a,f.addedDocuments,h))));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Hn.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,r)),i=i.insert(h,m),(function(x,w,S){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Tde?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,m,f)&&o.push(n.Pi.updateTargetData(a,m))}));let c=ra(),u=mt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(kde(a,s,e.documentUpdates).next((f=>{c=f.ks,u=f.qs}))),!r.isEqual(Ze.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next((h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return pe.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.Ms=i,a)))}function kde(t,e,n){let r=mt(),i=mt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=ra();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Ze.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):De(iO,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function Pde(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=dd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ww(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,pe.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new Zo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Xh(t,e,n){const r=He(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ru(s))throw s;De(iO,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function lk(t,e,n){const r=He(t);let i=Ze.min(),a=mt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=He(c),g=h.xs.get(f);return g!==void 0?pe.resolve(h.Ms.get(g)):h.Pi.getTargetData(u,f)})(r,s,sa(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Ze.min(),n?a:mt()))).next((o=>(xG(r,Eq(e),o),{documents:o,Qs:a})))))}function yG(t,e){const n=He(t),r=He(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function bG(t,e){const n=He(t),r=n.Os.get(e)||Ze.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,U8(r,Vh),Number.MAX_SAFE_INTEGER))).then((i=>(xG(n,e,i),i)))}function xG(t,e,n){let r=t.Os.get(e)||Ze.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}const wG="firestore_clients";function A3(t,e){return`${wG}_${t}_${e}`}const _G="firestore_mutations";function C3(t,e,n){let r=`${_G}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const SG="firestore_targets";function iA(t,e){return`${SG}_${t}_${e}`}const Js="SharedClientState";class _w{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Ne(i.error.code,i.error.message))),s?new _w(e,n,i.state,a):(Gn(Js,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nm{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Ne(r.error.code,r.error.message))),a?new Nm(e,r.state,i):(Gn(Js,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sw{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=GD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=K8(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new Sw(e,a):(Gn(Js,`Failed to parse client data for instance '${e}': ${n}`),null)}}class aO{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new aO(n.clientId,n.onlineState):(Gn(Js,`Failed to parse online state: ${e}`),null)}}class ck{constructor(){this.activeTargetIds=GD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aA{constructor(e,n,r,i,a){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ln(st),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=A3(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ck),this.ro=new RegExp(`^${wG}_${s}_([^_]*)$`),this.io=new RegExp(`^${_G}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${SG}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(A3(this.persistenceKey,r));if(i){const a=Sw.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(iA(this.persistenceKey,e));if(i){const a=Nm.Ws(e,i);a&&(r=a.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return De(Js,"READ",e,n),n}setItem(e,n){De(Js,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){De(Js,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(De(Js,"EVENT",n.key,n.newValue),n.key===this.eo)return void Gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(a){let s=Ii.ce;if(a!=null)try{const o=JSON.parse(a);Ye(typeof o=="number",30636,{So:a}),s=o}catch(o){Gn(Js,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==Ii.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new _w(this.currentUser,e,n,r),a=C3(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const n=C3(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=iA(this.persistenceKey,e),a=new Nm(e,n,r);this.setItem(i,a.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Sw.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return _w.Ws(new Qr(a),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Nm.Ws(i,n)}uo(e){return aO.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);De(Js,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Fo(s,o).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=GD();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class EG{constructor(){this.Mo=new ck,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ck,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Dde{Oo(e){}shutdown(){}}const I3="ConnectivityMonitor";class k3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){De(I3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){De(I3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Db=null;function uk(){return Db===null?Db=(function(){return 268435456+Math.round(2147483648*Math.random())})():Db++,"0x"+Db.toString(16)}const sA="RestConnection",Ode={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rde{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===dw?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const s=uk(),o=this.zo(e,n.toUriEncodedString());De(sA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:u}=new URL(o),f=eu(u);return this.Jo(e,o,c,r,f).then((h=>(De(sA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw tv(sA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}Ho(e,n,r,i,a,s){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=Ode[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class Nde{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Yr="WebChannelConnection";class Mde extends Rde{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const s=uk();return new Promise(((o,c)=>{const u=new R8;u.setWithCredentials(!0),u.listenOnce(N8.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Ax.NO_ERROR:const h=u.getResponseJson();De(Yr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ax.TIMEOUT:De(Yr,`RPC '${e}' ${s} timed out`),c(new Ne(Se.DEADLINE_EXCEEDED,"Request time out"));break;case Ax.HTTP_ERROR:const g=u.getStatus();if(De(Yr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m?.error;if(b&&b.status&&b.message){const x=(function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(T)>=0?T:Se.UNKNOWN})(b.status);c(new Ne(x,b.message))}else c(new Ne(Se.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Ne(Se.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{De(Yr,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);De(Yr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=uk(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=z8(),o=j8(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=a.join("");De(Yr,`Creating RPC '${e}' stream ${i}: ${f}`,c);const h=s.createWebChannel(f,c);this.I_(h);let g=!1,m=!1;const b=new Nde({Yo:w=>{m?De(Yr,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(De(Yr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),De(Yr,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Zo:()=>h.close()}),x=(w,S,T)=>{w.listen(S,(I=>{try{T(I)}catch(R){setTimeout((()=>{throw R}),0)}}))};return x(h,fm.EventType.OPEN,(()=>{m||(De(Yr,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),x(h,fm.EventType.CLOSE,(()=>{m||(m=!0,De(Yr,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(h))})),x(h,fm.EventType.ERROR,(w=>{m||(m=!0,tv(Yr,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),b.a_(new Ne(Se.UNAVAILABLE,"The operation could not be completed")))})),x(h,fm.EventType.MESSAGE,(w=>{if(!m){const S=w.data[0];Ye(!!S,16349);const T=S,I=T?.error||T[0]?.error;if(I){De(Yr,`RPC '${e}' stream ${i} received error:`,I);const R=I.status;let O=(function(P){const N=nr[P];if(N!==void 0)return Lq(N)})(R),D=I.message;O===void 0&&(O=Se.INTERNAL,D="Unknown error status: "+R+" with message "+I.message),m=!0,b.a_(new Ne(O,D)),h.close()}else De(Yr,`RPC '${e}' stream ${i} received:`,S),b.u_(S)}})),x(o,M8.STAT_EVENT,(w=>{w.stat===UI.PROXY?De(Yr,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===UI.NOPROXY&&De(Yr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function TG(){return typeof window<"u"?window:null}function jx(){return typeof document<"u"?document:null}function d_(t){return new Fue(t,!0)}class AG{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&De("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const P3="PersistentStream";class CG{constructor(e,n,r,i,a,s,o,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AG(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Se.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ne(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return De(P3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(De(P3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jde extends CG{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=que(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ze.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Ze.min():s.readTime?mi(s.readTime):Ze.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=rk(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=fw(c)?{documents:Hq(a,c)}:{query:Kq(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=Fq(a,s.resumeToken);const u=tk(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ze.min())>0){o.readTime=Yh(a,s.snapshotVersion.toTimestamp());const u=tk(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=Hue(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=rk(this.serializer),n.removeTarget=e,this.q_(n)}}class zde extends CG{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Gue(e.writeResults,e.commitTime),r=mi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=rk(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>mw(this.serializer,r)))};this.q_(n)}}class Lde{}class Vde extends Lde{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ne(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,nk(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(Se.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Ho(e,nk(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(Se.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Bde{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):De("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Pd="RemoteStore";class Fde{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Hd(this)&&(De(Pd,"Restarting streams for network reachability change."),await(async function(c){const u=He(c);u.Ea.add(4),await u0(u),u.Ra.set("Unknown"),u.Ea.delete(4),await f_(u)})(this))}))})),this.Ra=new Bde(r,i)}}async function f_(t){if(Hd(t))for(const e of t.da)await e(!0)}async function u0(t){for(const e of t.da)await e(!1)}function h_(t,e){const n=He(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),lO(n)?oO(n):Cp(n).O_()&&sO(n,e))}function Qh(t,e){const n=He(t),r=Cp(n);n.Ia.delete(e),r.O_()&&IG(n,e),n.Ia.size===0&&(r.O_()?r.L_():Hd(n)&&n.Ra.set("Unknown"))}function sO(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cp(t).Y_(e)}function IG(t,e){t.Va.Ue(e),Cp(t).Z_(e)}function oO(t){t.Va=new zue({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Cp(t).start(),t.Ra.ua()}function lO(t){return Hd(t)&&!Cp(t).x_()&&t.Ia.size>0}function Hd(t){return He(t).Ea.size===0}function kG(t){t.Va=void 0}async function Ude(t){t.Ra.set("Online")}async function $de(t){t.Ia.forEach(((e,n)=>{sO(t,e)}))}async function qde(t,e){kG(t),lO(t)?(t.Ra.ha(e),oO(t)):t.Ra.set("Unknown")}async function Gde(t,e,n){if(t.Ra.set("Online"),e instanceof Bq&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))})(t,e)}catch(r){De(Pd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ew(t,r)}else if(e instanceof Nx?t.Va.Ze(e):e instanceof Vq?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ze.min()))try{const r=await vG(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Hn.EMPTY_BYTE_STRING,f.snapshotVersion)),IG(a,c);const h=new Zo(f.target,c,u,f.sequenceNumber);sO(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){De(Pd,"Failed to raise snapshot:",r),await Ew(t,r)}}async function Ew(t,e,n){if(!ru(e))throw e;t.Ea.add(1),await u0(t),t.Ra.set("Offline"),n||(n=()=>vG(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{De(Pd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await f_(t)}))}function PG(t,e){return e().catch((n=>Ew(t,n,e)))}async function Ap(t){const e=He(t),n=Gc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dd;for(;Hde(e);)try{const i=await Pde(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Kde(e,i)}catch(i){await Ew(e,i)}DG(e)&&OG(e)}function Hde(t){return Hd(t)&&t.Ta.length<10}function Kde(t,e){t.Ta.push(e);const n=Gc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function DG(t){return Hd(t)&&!Gc(t).x_()&&t.Ta.length>0}function OG(t){Gc(t).start()}async function Wde(t){Gc(t).ra()}async function Yde(t){const e=Gc(t);for(const n of t.Ta)e.ea(n.mutations)}async function Xde(t,e,n){const r=t.Ta.shift(),i=WD.from(r,e,n);await PG(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Ap(t)}async function Qde(t,e){e&&Gc(t).X_&&await(async function(r,i){if((function(s){return Nue(s)&&s!==Se.ABORTED})(i.code)){const a=r.Ta.shift();Gc(r).B_(),await PG(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Ap(r)}})(t,e),DG(t)&&OG(t)}async function D3(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),De(Pd,"RemoteStore received new credentials");const r=Hd(n);n.Ea.add(3),await u0(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await f_(n)}async function dk(t,e){const n=He(t);e?(n.Ea.delete(2),await f_(n)):e||(n.Ea.add(2),await u0(n),n.Ra.set("Unknown"))}function Cp(t){return t.ma||(t.ma=(function(n,r,i){const a=He(n);return a.sa(),new jde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:Ude.bind(null,t),t_:$de.bind(null,t),r_:qde.bind(null,t),H_:Gde.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),lO(t)?oO(t):t.Ra.set("Unknown")):(await t.ma.stop(),kG(t))}))),t.ma}function Gc(t){return t.fa||(t.fa=(function(n,r,i){const a=He(n);return a.sa(),new zde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Wde.bind(null,t),r_:Qde.bind(null,t),ta:Yde.bind(null,t),na:Xde.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Ap(t)):(await t.fa.stop(),t.Ta.length>0&&(De(Pd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class cO{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new so,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new cO(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uO(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),ru(t))return new Ne(Se.UNAVAILABLE,`${e}: ${t}`);throw t}class Ph{static emptySet(e){return new Ph(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||je.comparator(n.key,r.key):(n,r)=>je.comparator(n.key,r.key),this.keyedMap=hm(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ph)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ph;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class O3{constructor(){this.ga=new ln(je.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Zh{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new Zh(e,n,Ph.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&a_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Zde{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Jde{constructor(){this.queries=R3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=He(n),a=i.queries;i.queries=R3(),a.forEach(((s,o)=>{for(const c of o.Sa)c.onError(r)}))})(this,new Ne(Se.ABORTED,"Firestore shutting down"))}}function R3(){return new Il((t=>Sq(t)),a_)}async function dO(t,e){const n=He(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new Zde,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=uO(s,`Initialization of query '${sh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&hO(n)}async function fO(t,e){const n=He(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function efe(t,e){const n=He(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(r=!0);s.wa=i}}r&&hO(n)}function tfe(t,e,n){const r=He(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function hO(t){t.Ca.forEach((e=>{e.next()}))}var fk,N3;(N3=fk||(fk={})).Ma="default",N3.Cache="cache";class pO{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Zh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fk.Cache}}class RG{constructor(e){this.key=e}}class NG{constructor(e){this.key=e}}class nfe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=mt(),this.mutatedKeys=mt(),this.eu=Tq(e),this.tu=new Ph(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new O3,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),m=s0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;g&&m?g.data.isEqual(m.data)?b!==x&&(r.track({type:3,doc:m}),w=!0):this.su(g,m)||(r.track({type:2,doc:m}),w=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(o=!0)):!g&&m?(r.track({type:0,doc:m}),w=!0):g&&!m&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(m?(s=s.add(m),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(m,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:w})}};return x(m)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new Zh(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new O3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=mt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new NG(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new RG(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=mt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ip="SyncEngine";class rfe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ife{constructor(e){this.key=e,this.hu=!1}}class afe{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Il((o=>Sq(o)),a_),this.Iu=new Map,this.Eu=new Set,this.du=new ln(je.comparator),this.Au=new Map,this.Ru=new eO,this.Vu={},this.mu=new Map,this.fu=kd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sfe(t,e,n=!0){const r=p_(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await MG(r,e,n,!0),i}async function ofe(t,e){const n=p_(t);await MG(n,e,!0,!1)}async function MG(t,e,n,r){const i=await ww(t.localStore,sa(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await gO(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&h_(t.remoteStore,i),o}async function gO(t,e,n,r,i){t.pu=(h,g,m)=>(async function(x,w,S,T){let I=w.view.ru(S);I.Cs&&(I=await lk(x.localStore,w.query,!1).then((({documents:k})=>w.view.ru(k,I))));const R=T&&T.targetChanges.get(w.targetId),O=T&&T.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(I,x.isPrimaryClient,R,O);return hk(x,w.targetId,D.au),D.snapshot})(t,h,g,m);const a=await lk(t.localStore,e,!0),s=new nfe(e,a.Qs),o=s.ru(a.documents),c=c0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);hk(t,n,u.au);const f=new rfe(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function lfe(t,e,n){const r=He(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!a_(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Qh(r.remoteStore,i.targetId),Jh(r,i.targetId)})).catch(nu)):(Jh(r,i.targetId),await Xh(r.localStore,i.targetId,!0))}async function cfe(t,e){const n=He(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qh(n.remoteStore,r.targetId))}async function ufe(t,e,n){const r=bO(t);try{const i=await(function(s,o){const c=He(s),u=pt.now(),f=o.reduce(((m,b)=>m.add(b.key)),mt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let b=ra(),x=mt();return c.Ns.getEntries(m,f).next((w=>{b=w,b.forEach(((S,T)=>{T.isValidDocument()||(x=x.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,b))).next((w=>{h=w;const S=[];for(const T of o){const I=Oue(T,h.get(T.key).overlayedDocument);I!=null&&S.push(new kl(T.key,I,hq(I.value.mapValue),mr.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,S,o)})).next((w=>{g=w;const S=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(m,w.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:Cq(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.Vu[s.currentUser.toKey()];u||(u=new ln(st)),u=u.insert(o,c),s.Vu[s.currentUser.toKey()]=u})(r,i.batchId,n),await au(r,i.changes),await Ap(r.remoteStore)}catch(i){const a=uO(i,"Failed to persist write");n.reject(a)}}async function jG(t,e){const n=He(t);try{const r=await Ide(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ye(s.hu,14607):i.removedDocuments.size>0&&(Ye(s.hu,42227),s.hu=!1))})),await au(n,r,e)}catch(r){await nu(r)}}function M3(t,e,n){const r=He(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=He(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.Sa)g.va(o)&&(u=!0)})),u&&hO(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dfe(t,e,n){const r=He(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new ln(je.comparator);s=s.insert(a,zn.newNoDocument(a,Ze.min()));const o=mt().add(a),c=new l0(Ze.min(),new Map,new ln(st),s,o);await jG(r,c),r.du=r.du.remove(a),r.Au.delete(e),yO(r)}else await Xh(r.localStore,e,!1).then((()=>Jh(r,e,n))).catch(nu)}async function ffe(t,e){const n=He(t),r=e.batch.batchId;try{const i=await Cde(n.localStore,e);vO(n,r,null),mO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await au(n,i)}catch(i){await nu(i)}}async function hfe(t,e,n){const r=He(t);try{const i=await(function(s,o){const c=He(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(Ye(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);vO(r,e,n),mO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await au(r,i)}catch(i){await nu(i)}}function mO(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function vO(t,e,n){const r=He(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Jh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||zG(t,r)}))}function zG(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),yO(t))}function hk(t,e,n){for(const r of n)r instanceof RG?(t.Ru.addReference(r.key,e),pfe(t,r)):r instanceof NG?(De(Ip,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||zG(t,r.key)):Fe(19791,{wu:r})}function pfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(De(Ip,"New document in limbo: "+n),t.Eu.add(r),yO(t))}function yO(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new je(Lt.fromString(e)),r=t.fu.next();t.Au.set(r,new ife(n)),t.du=t.du.insert(n,r),h_(t.remoteStore,new Zo(sa(a0(n.path)),r,"TargetPurposeLimboResolution",Ii.ce))}}async function au(t,e,n){const r=He(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=rO.As(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,u){const f=He(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>pe.forEach(u,(g=>pe.forEach(g.Es,(m=>f.persistence.referenceDelegate.addReference(h,g.targetId,m))).next((()=>pe.forEach(g.ds,(m=>f.persistence.referenceDelegate.removeReference(h,g.targetId,m)))))))))}catch(h){if(!ru(h))throw h;De(iO,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const m=f.Ms.get(g),b=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(g,x)}}})(r.localStore,a))}async function gfe(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){De(Ip,"User change. New user:",e.toKey());const r=await mG(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Ne(Se.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await au(n,r.Ls)}}function mfe(t,e){const n=He(t),r=n.Au.get(e);if(r&&r.hu)return mt().add(r.key);{let i=mt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function vfe(t,e){const n=He(t),r=await lk(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&hk(n,e.targetId,i.au),i}async function yfe(t,e){const n=He(t);return bG(n.localStore,e).then((r=>au(n,r)))}async function bfe(t,e,n,r){const i=He(t),a=await(function(o,c){const u=He(o),f=He(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.er(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):pe.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Ap(i.remoteStore):n==="acknowledged"||n==="rejected"?(vO(i,e,r||null),mO(i,e),(function(o,c){He(He(o).mutationQueue).ir(c)})(i.localStore,e)):Fe(6720,"Unknown batchState",{Su:n}),await au(i,a)):De(Ip,"Cannot apply mutation batch with id: "+e)}async function xfe(t,e){const n=He(t);if(p_(n),bO(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await j3(n,r.toArray());n.gu=!0,await dk(n.remoteStore,!0);for(const a of i)h_(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(Jh(n,s),Xh(n.localStore,s,!0)))),Qh(n.remoteStore,s)})),await i,await j3(n,r),(function(s){const o=He(s);o.Au.forEach(((c,u)=>{Qh(o.remoteStore,u)})),o.Ru.Jr(),o.Au=new Map,o.du=new ln(je.comparator)})(n),n.gu=!1,await dk(n.remoteStore,!1)}}async function j3(t,e,n){const r=He(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await ww(r.localStore,sa(c[0]));for(const u of c){const f=r.Tu.get(u),h=await vfe(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await yG(r.localStore,s);o=await ww(r.localStore,u),await gO(r,LG(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(a),i}function LG(t){return wq(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function wfe(t){return(function(n){return He(He(n).persistence).Ts()})(He(t).localStore)}async function _fe(t,e,n,r){const i=He(t);if(i.gu)return void De(Ip,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await bG(i.localStore,Eq(a[0])),o=l0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Hn.EMPTY_BYTE_STRING);await au(i,s,o);break}case"rejected":await Xh(i.localStore,e,!0),Jh(i,e,r);break;default:Fe(64155,n)}}async function Sfe(t,e,n){const r=p_(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){De(Ip,"Adding an already active target "+i);continue}const a=await yG(r.localStore,i),s=await ww(r.localStore,a);await gO(r,LG(a),s.targetId,!1,s.resumeToken),h_(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await Xh(r.localStore,i,!1).then((()=>{Qh(r.remoteStore,i),Jh(r,i)})).catch(nu)}}function p_(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dfe.bind(null,e),e.Pu.H_=efe.bind(null,e.eventManager),e.Pu.yu=tfe.bind(null,e.eventManager),e}function bO(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ffe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hfe.bind(null,e),e}class pv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=d_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gG(this.persistence,new pG,e.initialUser,this.serializer)}Cu(e){return new tO(u_.mi,this.serializer)}Du(e){return new EG}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pv.provider={build:()=>new pv};class Efe extends pv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof xw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zr.withCacheSize(this.cacheSizeBytes):Zr.DEFAULT;return new tO((r=>xw.mi(r,n)),this.serializer)}}class VG extends pv{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await bO(this.xu.syncEngine),await Ap(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return gG(this.persistence,new pG,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new lG(r,e.asyncQueue,n)}Mu(e,n){const r=new Mce(n,this.persistence);return new Nce(e.asyncQueue,r)}Cu(e){const n=hG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zr.withCacheSize(this.cacheSizeBytes):Zr.DEFAULT;return new nO(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,TG(),jx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new EG}}class Tfe extends VG{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof aA&&(this.sharedClientState.syncEngine={Co:bfe.bind(null,n),vo:_fe.bind(null,n),Fo:Sfe.bind(null,n),Ts:wfe.bind(null,n),Do:yfe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await xfe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=TG();if(!aA.v(n))throw new Ne(Se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class gv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>M3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gfe.bind(null,this.syncEngine),await dk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Jde})()}createDatastore(e){const n=d_(e.databaseInfo.databaseId),r=(function(a){return new Mde(a)})(e.databaseInfo);return(function(a,s,o,c){return new Vde(a,s,o,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new Fde(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>M3(this.syncEngine,n,0)),(function(){return k3.v()?new k3:new Dde})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new afe(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=He(n);De(Pd,"RemoteStore shutting down."),r.Ea.add(5),await u0(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gv.provider={build:()=>new gv};class xO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Hc="FirestoreClient";class Afe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qr.UNAUTHENTICATED,this.clientId=ND.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{De(Hc,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(De(Hc,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new so;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=uO(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function oA(t,e){t.asyncQueue.verifyOperationInProgress(),De(Hc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await mG(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function z3(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Cfe(t);De(Hc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>D3(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>D3(e.remoteStore,i))),t._onlineComponents=e}async function Cfe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){De(Hc,"Using user provided OfflineComponentProvider");try{await oA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Se.FAILED_PRECONDITION||i.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;tv("Error using user provided cache. Falling back to memory cache: "+n),await oA(t,new pv)}}else De(Hc,"Using default OfflineComponentProvider"),await oA(t,new Efe(void 0));return t._offlineComponents}async function BG(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(De(Hc,"Using user provided OnlineComponentProvider"),await z3(t,t._uninitializedComponentsProvider._online)):(De(Hc,"Using default OnlineComponentProvider"),await z3(t,new gv))),t._onlineComponents}function Ife(t){return BG(t).then((e=>e.syncEngine))}async function Tw(t){const e=await BG(t),n=e.eventManager;return n.onListen=sfe.bind(null,e.syncEngine),n.onUnlisten=lfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ofe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cfe.bind(null,e.syncEngine),n}function kfe(t,e,n={}){const r=new so;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new xO({next:g=>{f.Nu(),s.enqueueAndForget((()=>fO(a,h)));const m=g.docs.has(o);!m&&g.fromCache?u.reject(new Ne(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?u.reject(new Ne(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new pO(a0(o.path),f,{includeMetadataChanges:!0,qa:!0});return dO(a,h)})(await Tw(t),t.asyncQueue,e,n,r))),r.promise}function Pfe(t,e,n={}){const r=new so;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new xO({next:g=>{f.Nu(),s.enqueueAndForget((()=>fO(a,h))),g.fromCache&&c.source==="server"?u.reject(new Ne(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new pO(o,f,{includeMetadataChanges:!0,qa:!0});return dO(a,h)})(await Tw(t),t.asyncQueue,e,n,r))),r.promise}function FG(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const L3=new Map;const Dfe="firestore.googleapis.com",V3=!0;class B3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dfe,this.ssl=V3}else this.host=e.host,this.ssl=e.ssl??V3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rG;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oG)throw new Ne(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dce("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FG(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ne(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ne(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ne(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wO{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _ce;switch(r.type){case"firstParty":return new Tce(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=L3.get(n);r&&(De("ComponentProvider","Removing Datastore"),L3.delete(n),r.terminate())})(this),Promise.resolve()}}class Pl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pl(this.firestore,e,this._query)}}class Ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}toJSON(){return{type:Ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(n0(n,Ln._jsonSchema))return new Ln(e,r||null,new je(Lt.fromString(n.referencePath)))}}Ln._jsonSchemaVersion="firestore/documentReference/1.0",Ln._jsonSchema={type:sr("string",Ln._jsonSchemaVersion),referencePath:sr("string")};class Vc extends Pl{constructor(e,n,r){super(e,n,a0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new je(e))}withConverter(e){return new Vc(this.firestore,e,this._path)}}function qr(t,e,...n){if(t=Vt(t),B8("collection","path",e),t instanceof wO){const r=Lt.fromString(e,...n);return PL(r),new Vc(t,null,r)}{if(!(t instanceof Ln||t instanceof Vc))throw new Ne(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return PL(r),new Vc(t.firestore,null,r)}}function xt(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=ND.newId()),B8("doc","path",e),t instanceof wO){const r=Lt.fromString(e,...n);return kL(r),new Ln(t,null,new je(r))}{if(!(t instanceof Ln||t instanceof Vc))throw new Ne(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return kL(r),new Ln(t.firestore,t instanceof Vc?t.converter:null,new je(r))}}const F3="AsyncQueue";class U3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AG(this,"async_queue_retry"),this._c=()=>{const r=jx();r&&De(F3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=jx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new so;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ru(e))throw e;De(F3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",$3(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=cO.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:$3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function q3(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class vo extends wO{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new U3,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U3(e),this._firestoreClient=void 0,await e}}}function Ofe(t,e,n){n||(n=dw);const r=xp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Uc(a,e))return i;throw new Ne(Se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ne(Se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oG)throw new Ne(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&eu(e.host)&&gD(e.host),r.initialize({options:e,instanceIdentifier:n})}function d0(t){if(t._terminated)throw new Ne(Se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Rfe(t),t._firestoreClient}function Rfe(t){const e=t._freezeSettings(),n=(function(i,a,s,o){return new cue(i,a,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,FG(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Afe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class Na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Na(Hn.fromBase64String(e))}catch(n){throw new Ne(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Na(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Na._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(n0(e,Na._jsonSchema))return Na.fromBase64String(e.bytes)}}Na._jsonSchemaVersion="firestore/bytes/1.0",Na._jsonSchema={type:sr("string",Na._jsonSchemaVersion),bytes:sr("string")};class f0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ne(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class g_{constructor(e){this._methodName=e}}class oo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ne(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ne(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:oo._jsonSchemaVersion}}static fromJSON(e){if(n0(e,oo._jsonSchema))return new oo(e.latitude,e.longitude)}}oo._jsonSchemaVersion="firestore/geoPoint/1.0",oo._jsonSchema={type:sr("string",oo._jsonSchemaVersion),latitude:sr("number"),longitude:sr("number")};class lo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:lo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(n0(e,lo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new lo(e.vectorValues);throw new Ne(Se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lo._jsonSchemaVersion="firestore/vectorValue/1.0",lo._jsonSchema={type:sr("string",lo._jsonSchemaVersion),vectorValues:sr("object")};const Nfe=/^__.*__$/;class Mfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new kl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tp(e,this.data,n,this.fieldTransforms)}}class UG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new kl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $G(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:t})}}class m_{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new m_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Aw(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($G(this.Ac)&&Nfe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||d_(e)}Cc(e,n,r,i=!1){return new m_({Ac:e,methodName:n,Dc:r,path:In.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function h0(t){const e=t._freezeSettings(),n=d_(t._databaseId);return new jfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _O(t,e,n,r,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);EO("Data must be an object, but it was:",s,r);const o=HG(r,s);let c,u;if(a.merge)c=new ki(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=pk(e,h,n);if(!s.contains(g))throw new Ne(Se.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);WG(f,g)||f.push(g)}c=new ki(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new Mfe(new ei(o),c,u)}class p0 extends g_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof p0}}function zfe(t,e,n){return new m_({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class SO extends g_{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=zfe(this,e,!0),r=this.vc.map((a=>kp(a,n))),i=new Ad(r);return new Nq(e.path,i)}isEqual(e){return e instanceof SO&&Uc(this.vc,e.vc)}}function qG(t,e,n,r){const i=t.Cc(1,e,n);EO("Data must be an object, but it was:",i,r);const a=[],s=ei.empty();iu(r,((c,u)=>{const f=TO(e,c,n);u=Vt(u);const h=i.yc(f);if(u instanceof p0)a.push(f);else{const g=kp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new ki(a);return new UG(s,o,i.fieldTransforms)}function GG(t,e,n,r,i,a){const s=t.Cc(1,e,n),o=[pk(e,r,n)],c=[i];if(a.length%2!=0)throw new Ne(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(pk(e,a[g])),c.push(a[g+1]);const u=[],f=ei.empty();for(let g=o.length-1;g>=0;--g)if(!WG(u,o[g])){const m=o[g];let b=c[g];b=Vt(b);const x=s.yc(m);if(b instanceof p0)u.push(m);else{const w=kp(b,x);w!=null&&(u.push(m),f.set(m,w))}}const h=new ki(u);return new UG(f,h,s.fieldTransforms)}function Lfe(t,e,n,r=!1){return kp(n,t.Cc(r?4:3,e))}function kp(t,e){if(KG(t=Vt(t)))return EO("Unsupported field value:",e,t),HG(t,e);if(t instanceof g_)return(function(r,i){if(!$G(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=kp(o,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Aue(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=pt.fromDate(r);return{timestampValue:Yh(i.serializer,a)}}if(r instanceof pt){const a=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yh(i.serializer,a)}}if(r instanceof oo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Na)return{bytesValue:Fq(i.serializer,r._byteString)};if(r instanceof Ln){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:QD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lo)return(function(s,o){return{mapValue:{fields:{[UD]:{stringValue:$D},[qh]:{arrayValue:{values:s.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return HD(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Q1(r)}`)})(t,e)}function HG(t,e){const n={};return iq(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):iu(t,((r,i)=>{const a=kp(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function KG(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof oo||t instanceof Na||t instanceof Ln||t instanceof g_||t instanceof lo)}function EO(t,e,n){if(!KG(n)||!F8(n)){const r=Q1(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function pk(t,e,n){if((e=Vt(e))instanceof f0)return e._internalPath;if(typeof e=="string")return TO(t,e);throw Aw("Field path arguments must be of type string or ",t,!1,void 0,n)}const Vfe=new RegExp("[~\\*/\\[\\]]");function TO(t,e,n){if(e.search(Vfe)>=0)throw Aw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new f0(...e.split("."))._internalPath}catch{throw Aw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Aw(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Ne(Se.INVALID_ARGUMENT,o+t+c)}function WG(t,e){return t.some((n=>n.isEqual(e)))}class YG{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(v_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bfe extends YG{data(){return super.data()}}function v_(t,e){return typeof e=="string"?TO(t,e):e instanceof f0?e._internalPath:e._delegate._internalPath}function XG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ne(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AO{}class CO extends AO{}function ia(t,e,...n){let r=[];e instanceof AO&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof IO)).length,o=a.filter((c=>c instanceof y_)).length;if(s>1||s>0&&o>0)throw new Ne(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class y_ extends CO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new y_(e,n,r)}_apply(e){const n=this._parse(e);return QG(e._query,n),new Pl(e.firestore,e.converter,ek(e._query,n))}_parse(e){const n=h0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ne(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){K3(h,f);const b=[];for(const x of h)b.push(H3(c,a,x));g={arrayValue:{values:b}}}else g=H3(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||K3(h,f),g=Lfe(o,s,h,f==="in"||f==="not-in");return Tt.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lA(t,e,n){const r=e,i=v_("where",t);return y_._create(i,r,n)}class IO extends AO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new IO(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)QG(s,c),s=ek(s,c)})(e._query,n),new Pl(e.firestore,e.converter,ek(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kO extends CO{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kO(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new Ne(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ne(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dv(a,s)})(e._query,this._field,this._direction);return new Pl(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new Ep(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function co(t,e="asc"){const n=e,r=v_("orderBy",t);return kO._create(r,n)}class PO extends CO{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new PO(e,n,r)}_apply(e){return new Pl(e.firestore,e.converter,pw(e._query,this._limit,this._limitType))}}function G3(t){return PO._create("limit",t,"F")}function H3(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new Ne(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_q(e)&&n.indexOf("/")!==-1)throw new Ne(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Lt.fromString(n));if(!je.isDocumentKey(r))throw new Ne(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cv(t,new je(r))}if(n instanceof Ln)return cv(t,n._key);throw new Ne(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Q1(n)}.`)}function K3(t,e){if(!Array.isArray(t)||t.length===0)throw new Ne(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QG(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ne(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ffe{convertValue(e,n="none"){switch($c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return iu(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[qh].arrayValue?.values?.map((r=>wn(r.doubleValue)));return new lo(n)}convertGeoPoint(e){return new oo(wn(e.latitude),wn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=r_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ov(e));default:return null}}convertTimestamp(e){const n=pl(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Lt.fromString(e);Ye(Qq(r),9688,{name:e});const i=new Ed(r.get(1),r.get(3)),a=new je(r.popFirst(5));return i.isEqual(n)||Gn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function DO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class mm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pd extends YG{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(v_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(Se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pd._jsonSchemaVersion="firestore/documentSnapshot/1.0",pd._jsonSchema={type:sr("string",pd._jsonSchemaVersion),bundleSource:sr("string","DocumentSnapshot"),bundleName:sr("string"),bundle:sr("string")};class zx extends pd{data(e={}){return super.data(e)}}class gd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new mm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new zx(this._firestore,this._userDataWriter,r.key,r,new mm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ne(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new zx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new mm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new zx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new mm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:Ufe(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(Se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ND.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ufe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}function cA(t){t=Ni(t,Ln);const e=Ni(t.firestore,vo);return kfe(d0(e),t._key).then((n=>ZG(e,t,n)))}gd._jsonSchemaVersion="firestore/querySnapshot/1.0",gd._jsonSchema={type:sr("string",gd._jsonSchemaVersion),bundleSource:sr("string","QuerySnapshot"),bundleName:sr("string"),bundle:sr("string")};class OO extends Ffe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,n)}}function Xi(t){t=Ni(t,Pl);const e=Ni(t.firestore,vo),n=d0(e),r=new OO(e);return XG(t._query),Pfe(n,t._query).then((i=>new gd(e,r,t,i)))}function Zi(t,e,n){t=Ni(t,Ln);const r=Ni(t.firestore,vo),i=DO(t.converter,e,n);return g0(r,[_O(h0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,mr.none())])}function Zs(t,e,n,...r){t=Ni(t,Ln);const i=Ni(t.firestore,vo),a=h0(i);let s;return s=typeof(e=Vt(e))=="string"||e instanceof f0?GG(a,"updateDoc",t._key,e,n,r):qG(a,"updateDoc",t._key,e),g0(i,[s.toMutation(t._key,mr.exists(!0))])}function ea(t){return g0(Ni(t.firestore,vo),[new o0(t._key,mr.none())])}function b_(t,e){const n=Ni(t.firestore,vo),r=xt(t),i=DO(t.converter,e);return g0(n,[_O(h0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,mr.exists(!1))]).then((()=>r))}function Kd(t,...e){t=Vt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||q3(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(q3(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let a,s,o;if(t instanceof Ln)s=Ni(t.firestore,vo),o=a0(t._key.path),a={next:c=>{e[r]&&e[r](ZG(s,t,c))},error:e[r+1],complete:e[r+2]};else{const c=Ni(t,Pl);s=Ni(c.firestore,vo),o=c._query;const u=new OO(s);a={next:f=>{e[r]&&e[r](new gd(s,u,c,f))},error:e[r+1],complete:e[r+2]},XG(t._query)}return(function(u,f,h,g){const m=new xO(g),b=new pO(f,m,h);return u.asyncQueue.enqueueAndForget((async()=>dO(await Tw(u),b))),()=>{m.Nu(),u.asyncQueue.enqueueAndForget((async()=>fO(await Tw(u),b)))}})(d0(s),o,i,a)}function g0(t,e){return(function(r,i){const a=new so;return r.asyncQueue.enqueueAndForget((async()=>ufe(await Ife(r),i,a))),a.promise})(d0(t),e)}function ZG(t,e,n){const r=n.docs.get(e._key),i=new OO(t);return new pd(t,i,e._key,r,new mm(n.hasPendingWrites,n.fromCache),e.converter)}class $fe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=Kfe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function qfe(t){return new $fe(t)}class Gfe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=gv.provider,this._offlineComponentProvider={build:n=>new VG(n,e?.cacheSizeBytes,this.forceOwnership)}}}class Hfe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=gv.provider,this._offlineComponentProvider={build:n=>new Tfe(n,e?.cacheSizeBytes)}}}function Kfe(t){return new Gfe(t?.forceOwnership)}function Wfe(){return new Hfe}class Yfe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=h0(e)}set(e,n,r){this._verifyNotCommitted();const i=uA(e,this._firestore),a=DO(i.converter,n,r),s=_O(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,mr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=uA(e,this._firestore);let s;return s=typeof(n=Vt(n))=="string"||n instanceof f0?GG(this._dataReader,"WriteBatch.update",a._key,n,r,i):qG(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=uA(e,this._firestore);return this._mutations=this._mutations.concat(new o0(n._key,mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function uA(t,e){if((t=Vt(t)).firestore!==e)throw new Ne(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function W3(){return new p0("deleteField")}function Xfe(...t){return new SO("arrayUnion",t)}function gk(t){return d0(t=Ni(t,vo)),new Yfe(t,(e=>g0(t,e)))}(function(e,n=!0){(function(i){Sp=i})(wp),ul(new go("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new vo(new Sce(r.getProvider("auth-internal")),new Ace(s,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ne(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ed(u.options.projectId,f)})(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),vs(TL,AL,e),vs(TL,AL,"esm2020")})();const mk=new Map,JG={activated:!1,tokenObservers:[]},Qfe={initialized:!1,enabled:!1};function vr(t){return mk.get(t)||{...JG}}function Zfe(t,e){return mk.set(t,e),mk.get(t)}function x_(){return Qfe}const e7="https://content-firebaseappcheck.googleapis.com/v1",Jfe="exchangeRecaptchaEnterpriseToken",ehe="exchangeDebugToken",Y3={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},the=1440*60*1e3;class nhe{constructor(e,n,r,i,a){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Wm,this.pending.promise.catch(n=>{}),await rhe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Wm,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function rhe(t){return new Promise(e=>{setTimeout(e,t)})}const ihe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Pi=new bp("appCheck","AppCheck",ihe);function X3(t=!1){return t?self.grecaptcha?.enterprise:self.grecaptcha}function RO(t){if(!vr(t).activated)throw Pi.create("use-before-activation",{appName:t.name})}function t7(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),a=e-n*3600*24-r*3600-i*60;let s="";return n&&(s+=Ob(n)+"d:"),r&&(s+=Ob(r)+"h:"),s+=Ob(i)+"m:"+Ob(a)+"s",s}function Ob(t){return t===0?"00":t>=10?t.toString():"0"+t}async function NO({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const a={method:"POST",body:JSON.stringify(e),headers:r};let s;try{s=await fetch(t,a)}catch(h){throw Pi.create("fetch-network-error",{originalErrorMessage:h?.message})}if(s.status!==200)throw Pi.create("fetch-status-error",{httpStatus:s.status});let o;try{o=await s.json()}catch(h){throw Pi.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=o.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const u=Number(c[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function ahe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${e7}/projects/${n}/apps/${r}:${Jfe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function n7(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${e7}/projects/${n}/apps/${r}:${ehe}?key=${i}`,body:{debug_token:e}}}const she="firebase-app-check-database",ohe=1,mv="firebase-app-check-store",r7="debug-token";let Rb=null;function i7(){return Rb||(Rb=new Promise((t,e)=>{try{const n=indexedDB.open(she,ohe);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(Pi.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(mv,{keyPath:"compositeKey"})}}}catch(n){e(Pi.create("storage-open",{originalErrorMessage:n?.message}))}}),Rb)}function lhe(t){return s7(o7(t))}function che(t,e){return a7(o7(t),e)}function uhe(t){return a7(r7,t)}function dhe(){return s7(r7)}async function a7(t,e){const r=(await i7()).transaction(mv,"readwrite"),a=r.objectStore(mv).put({compositeKey:t,value:e});return new Promise((s,o)=>{a.onsuccess=c=>{s()},r.onerror=c=>{o(Pi.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}async function s7(t){const n=(await i7()).transaction(mv,"readonly"),i=n.objectStore(mv).get(t);return new Promise((a,s)=>{i.onsuccess=o=>{const c=o.target.result;a(c?c.value:void 0)},n.onerror=o=>{s(Pi.create("storage-get",{originalErrorMessage:o.target.error?.message}))}})}function o7(t){return`${t.options.appId}-${t.name}`}const Pc=new $1("@firebase/app-check");async function fhe(t){if(U1()){let e;try{e=await lhe(t)}catch(n){Pc.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function dA(t,e){return U1()?che(t,e).catch(n=>{Pc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function hhe(){let t;try{t=await dhe()}catch{}if(t)return t;{const e=crypto.randomUUID();return uhe(e).catch(n=>Pc.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}function MO(){return x_().enabled}async function jO(){const t=x_();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function phe(){const t=pD(),e=x_();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Wm;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(hhe())}const ghe={error:"UNKNOWN_ERROR"};function mhe(t){return hD.encodeString(JSON.stringify(t),!1)}async function vk(t,e=!1,n=!1){const r=t.app;RO(r);const i=vr(r);let a=i.token,s;if(a&&!hh(a)&&(i.token=void 0,a=void 0),!a){const u=await i.cachedTokenPromise;u&&(hh(u)?a=u:await dA(r,void 0))}if(!e&&a&&hh(a))return{token:a.token};let o=!1;if(MO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=NO(n7(r,await jO()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=await i.exchangeTokenPromise;return await dA(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Pc.warn(u.message):n&&Pc.error(u),fA(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),a=await vr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Pc.warn(u.message):n&&Pc.error(u),s=u}let c;return a?s?hh(a)?c={token:a.token,internalError:s}:c=fA(s):(c={token:a.token},i.token=a,await dA(r,a)):c=fA(s),o&&u7(r,c),c}async function vhe(t){const e=t.app;RO(e);const{provider:n}=vr(e);if(MO()){const r=await jO(),{token:i}=await NO(n7(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function l7(t,e,n,r){const{app:i}=t,a=vr(i),s={next:n,error:r,type:e};if(a.tokenObservers=[...a.tokenObservers,s],a.token&&hh(a.token)){const o=a.token;Promise.resolve().then(()=>{n({token:o.token}),Q3(t)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Q3(t))}function c7(t,e){const n=vr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Q3(t){const{app:e}=t,n=vr(e);let r=n.tokenRefresher;r||(r=yhe(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function yhe(t){const{app:e}=t;return new nhe(async()=>{const n=vr(e);let r;if(n.token?r=await vk(t,!0):r=await vk(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=vr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Y3.RETRIAL_MIN_WAIT,Y3.RETRIAL_MAX_WAIT)}function u7(t,e){const n=vr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hh(t){return t.expireTimeMillis-Date.now()>0}function fA(t){return{token:mhe(ghe),error:t}}class bhe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=vr(this.app);for(const n of e)c7(this.app,n.next);return Promise.resolve()}}function xhe(t,e){return new bhe(t,e)}function whe(t){return{getToken:e=>vk(t,e),getLimitedUseToken:()=>vhe(t),addTokenListener:e=>l7(t,"INTERNAL",e),removeTokenListener:e=>c7(t.app,e)}}const _he="@firebase/app-check",She="0.11.0",Ehe="https://www.google.com/recaptcha/enterprise.js";function The(t,e){const n=new Wm,r=vr(t);r.reCAPTCHAState={initialized:n};const i=Ahe(t),a=X3(!0);return a?Z3(t,e,a,i,n):khe(()=>{const s=X3(!0);if(!s)throw new Error("no recaptcha");Z3(t,e,s,i,n)}),n.promise}function Z3(t,e,n,r,i){n.ready(()=>{Ihe(t,e,n,r),i.resolve(n)})}function Ahe(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function Che(t){RO(t);const n=await vr(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const a=vr(t).reCAPTCHAState;n.ready(()=>{r(n.execute(a.widgetId,{action:"fire_app_check"}))})})}function Ihe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{vr(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{vr(t).reCAPTCHAState.succeeded=!1}}),a=vr(t);a.reCAPTCHAState={...a.reCAPTCHAState,widgetId:i}}function khe(t){const e=document.createElement("script");e.src=Ehe,e.onload=t,document.head.appendChild(e)}class zO{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){Dhe(this._throttleData);const e=await Che(this._app).catch(r=>{throw Pi.create("recaptcha-error")});if(!vr(this._app).reCAPTCHAState?.succeeded)throw Pi.create("recaptcha-error");let n;try{n=await NO(ahe(this._app,e),this._heartbeatServiceProvider)}catch(r){throw r.code?.includes("fetch-status-error")?(this._throttleData=Phe(Number(r.customData?.httpStatus),this._throttleData),Pi.create("initial-throttle",{time:t7(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=xp(e,"heartbeat"),The(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof zO?this._siteKey===e._siteKey:!1}}function Phe(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+the,httpStatus:t};{const n=e?e.backoffCount:0,r=Tne(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function Dhe(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Pi.create("throttled",{time:t7(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function Ohe(t=vD(),e){t=Vt(t);const n=xp(t,"app-check");if(x_().initialized||phe(),MO()&&jO().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return i;throw Pi.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return Rhe(t,e.provider,e.isTokenAutoRefreshEnabled),vr(t).isTokenAutoRefreshEnabled&&l7(r,"INTERNAL",()=>{}),r}function Rhe(t,e,n=!1){const r=Zfe(t,{...JG});r.activated=!0,r.provider=e,r.cachedTokenPromise=fhe(t).then(i=>(i&&hh(i)&&(r.token=i,u7(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&Pc.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const Nhe="app-check",J3="app-check-internal";function Mhe(){ul(new go(Nhe,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return xhe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(J3).initialize()})),ul(new go(J3,t=>{const e=t.getProvider("app-check").getImmediate();return whe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),vs(_he,She)}Mhe();const jhe={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},LO=x$(jhe);Ohe(LO,{provider:new zO("6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"),isTokenAutoRefreshEnabled:!0});const Da=rse(LO),tt=Ofe(LO,{localCache:qfe({tabManager:Wfe()})}),H={log:(...t)=>{},warn:(...t)=>{},error:(...t)=>console.error(...t)},eV=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),Nb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),nn=OD()(D8(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Bie(Da,e,n)).user;if(H.log(` Checking email verification for: ${i.email}`),H.log(" emailVerified status:",i.emailVerified),H.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return H.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await Z4(Da),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),H.log(` Login blocked: ${i.email} not verified`),!1;H.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=Nb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),H.log(` User logged in: ${a.email}`),!0}catch(r){H.error("Login error:",r),H.error("Error code:",r.code),H.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:H.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await Vie(Da,e,n)).user;await Uie(a,{displayName:r}),await Q4(a,eV());const s=Nb(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),H.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){H.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await Z4(Da),H.log(" User logged out")}catch(e){H.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await jie(Da,e),t({isLoading:!1}),!0}catch(n){H.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=Da.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await Q4(e,eV()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),H.log(` Verification email sent to: ${e.email}`),!0}catch(n){H.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=nn.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=Da.currentUser;if(!e)return!1;try{await e.reload();const n=Da.currentUser;if(n?.emailVerified){const r=Nb(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),H.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return H.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=Da.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=qd.credential(n.email,e);return await Nie(n,r),await Hie(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),H.log(` Account permanently deleted: ${n.email}`),!0}catch(r){H.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await zie(Da,e,n),t({isLoading:!1}),H.log(" Password reset successful"),!0}catch(r){H.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>nn.getState().isInitialized?()=>{}:(t({isInitialized:!1}),Gie(Da,async r=>{const i=Date.now(),a=nn.getState(),s=r?Nb(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g&&(H.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),f&&!u&&await(await Km(()=>Promise.resolve().then(()=>u1e),[]).then(b=>b.useBudgetStore.getState())).checkAndStartOnboarding())}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),d7=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],zhe=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=d7.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},w_=t=>{const e=d7.map(i=>({...i,met:i.regex.test(t)})),n=zhe(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},f7=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=w_(t);return r?null:y.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>y.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),y.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},h7=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=w_(t);return r?null:y.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?y.jsx(Joe,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):y.jsx(X1,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),y.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},Lhe=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(!1),[f,h]=A.useState(!1),[g,m]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:S,loginError:T,clearError:I}=nn(),R=w_(n),O=async k=>{if(k.preventDefault(),I(),t.trim()&&n.trim())if(c){if(!i.trim()||!R.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},D=async k=>{k.preventDefault(),t.trim()&&await w(t.trim())&&m(!0)};return A.useEffect(()=>{e(""),r(""),a(""),m(!1)},[c,f]),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?y.jsxs("form",{onSubmit:D,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-2",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(BI,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"reset-email",type:"email",value:t,onChange:k=>e(k.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"email"})]})]}),g?y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:y.jsx(BI,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),y.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),y.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",y.jsx("span",{className:"font-medium",children:t})]}),y.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[y.jsx(hl,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"submit",disabled:S||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?"Sending...":"Send Reset Link"}),y.jsx("div",{className:"mt-4 text-center",children:y.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:[y.jsx(hl,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):y.jsxs("form",{onSubmit:O,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsx("input",{id:"email",type:"email",value:t,onChange:k=>e(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"username"})]}),c&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),y.jsx("input",{id:"displayName",type:"text",value:i,onChange:k=>a(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:S})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&y.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:"Forgot password?"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:k=>r(k.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!R.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:S,autoComplete:c?"new-password":"current-password"}),y.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:S,children:s?y.jsx(I8,{className:"h-5 w-5"}):y.jsx(k8,{className:"h-5 w-5"})})]}),c&&n&&y.jsx("div",{className:"mt-2",children:y.jsx(f7,{password:n})}),c&&n&&y.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:y.jsx(h7,{password:n})})]}),T&&y.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&y.jsx("div",{className:"mt-3",children:y.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),y.jsx("button",{type:"submit",disabled:S||!t.trim()||!n.trim()||c&&!i.trim()||c&&!R.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),y.jsx("div",{className:"mt-6 text-center",children:y.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:S,children:[y.jsx(sce,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Vhe=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[u,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:m,clearError:b}=nn(),x=w_(r);A.useEffect(()=>{b()},[b]);const w=async S=>{if(S.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:y.jsx(iw,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),y.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("form",{onSubmit:w,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(bL,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),y.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?y.jsx(I8,{className:"h-5 w-5"}):y.jsx(k8,{className:"h-5 w-5"})})]}),y.jsx("div",{className:"mt-2",children:y.jsx(f7,{password:r})})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(bL,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:S=>s(S.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&y.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),y.jsx(h7,{password:r}),m&&y.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:m}),y.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),y.jsx("div",{className:"text-center",children:y.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[y.jsx(hl,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},p7=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=nn();A.useEffect(()=>{},[i]),A.useEffect(()=>{const h=()=>{s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:y.jsx(BI,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(iw,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),y.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[y.jsx("li",{children:"1. Open your email inbox"}),y.jsx("li",{children:"2. Find the email from House Budget"}),y.jsx("li",{children:'3. Click the "Verify Email" link'}),y.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&y.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&y.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),y.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?y.jsxs(y.Fragment,{children:[y.jsx(zh,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):y.jsxs(y.Fragment,{children:[y.jsx(zh,{className:"h-4 w-4"}),"Resend verification email"]})}),y.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[y.jsx(hl,{className:"h-4 w-4"}),"Back to sign in"]})]})}),y.jsx("div",{className:"text-center",children:y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},g7=({message:t="Loading your budget...",showTimeout:e=!1})=>y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"relative",children:[y.jsx(zh,{size:48,className:"text-blue-500 animate-spin"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(Y1,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),y.jsxs("div",{className:"text-center space-y-3",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),y.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&y.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:y.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),y.jsx("div",{className:"mt-8 w-full max-w-md",children:y.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),VO=A.createContext({});function __(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const BO=typeof window<"u",FO=BO?A.useLayoutEffect:A.useEffect,S_=A.createContext(null);function UO(t,e){t.indexOf(e)===-1&&t.push(e)}function $O(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ml=(t,e,n)=>n>e?e:n<t?t:n;let qO=()=>{};const vl={},m7=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function v7(t){return typeof t=="object"&&t!==null}const y7=t=>/^0[^.\s]+$/u.test(t);function GO(t){let e;return()=>(e===void 0&&(e=t()),e)}const za=t=>t,Bhe=(t,e)=>n=>e(t(n)),m0=(...t)=>t.reduce(Bhe),vv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class HO{constructor(){this.subscriptions=[]}add(e){return UO(this.subscriptions,e),()=>$O(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const uo=t=>t*1e3,Ma=t=>t/1e3;function b7(t,e){return e?t*(1e3/e):0}const x7=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Fhe=1e-7,Uhe=12;function $he(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=x7(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Fhe&&++o<Uhe);return s}function v0(t,e,n,r){if(t===e&&n===r)return za;const i=a=>$he(a,0,1,t,n);return a=>a===0||a===1?a:x7(i(a),e,r)}const w7=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_7=t=>e=>1-t(1-e),S7=v0(.33,1.53,.69,.99),KO=_7(S7),E7=w7(KO),T7=t=>(t*=2)<1?.5*KO(t):.5*(2-Math.pow(2,-10*(t-1))),WO=t=>1-Math.sin(Math.acos(t)),A7=_7(WO),C7=w7(WO),qhe=v0(.42,0,1,1),Ghe=v0(0,0,.58,1),I7=v0(.42,0,.58,1),Hhe=t=>Array.isArray(t)&&typeof t[0]!="number",k7=t=>Array.isArray(t)&&typeof t[0]=="number",Khe={linear:za,easeIn:qhe,easeInOut:I7,easeOut:Ghe,circIn:WO,circInOut:C7,circOut:A7,backIn:KO,backInOut:E7,backOut:S7,anticipate:T7},Whe=t=>typeof t=="string",tV=t=>{if(k7(t)){qO(t.length===4);const[e,n,r,i]=t;return v0(e,n,r,i)}else if(Whe(t))return Khe[t];return t},Mb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Yhe(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const Xhe=40;function P7(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Mb.reduce((I,R)=>(I[R]=Yhe(a),I),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:m,postRender:b}=s,x=()=>{const I=vl.useManualTiming?i.timestamp:performance.now();n=!1,vl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,Xhe),1)),i.timestamp=I,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),m.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Mb.reduce((I,R)=>{const O=s[R];return I[R]=(D,k=!1,P=!1)=>(n||w(),O.schedule(D,k,P)),I},{}),cancel:I=>{for(let R=0;R<Mb.length;R++)s[Mb[R]].cancel(I)},state:i,steps:s}}const{schedule:_n,cancel:Kc,state:$r,steps:hA}=P7(typeof requestAnimationFrame<"u"?requestAnimationFrame:za,!0);let Lx;function Qhe(){Lx=void 0}const Di={now:()=>(Lx===void 0&&Di.set($r.isProcessing||vl.useManualTiming?$r.timestamp:performance.now()),Lx),set:t=>{Lx=t,queueMicrotask(Qhe)}},D7=t=>e=>typeof e=="string"&&e.startsWith(t),YO=D7("--"),Zhe=D7("var(--"),XO=t=>Zhe(t)?Jhe.test(t.split("/*")[0].trim()):!1,Jhe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yv={...Pp,transform:t=>ml(0,1,t)},jb={...Pp,default:1},Mm=t=>Math.round(t*1e5)/1e5,QO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function epe(t){return t==null}const tpe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ZO=(t,e)=>n=>!!(typeof n=="string"&&tpe.test(n)&&n.startsWith(t)||e&&!epe(n)&&Object.prototype.hasOwnProperty.call(n,e)),O7=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(QO);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},npe=t=>ml(0,255,t),pA={...Pp,transform:t=>Math.round(npe(t))},id={test:ZO("rgb","red"),parse:O7("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+pA.transform(t)+", "+pA.transform(e)+", "+pA.transform(n)+", "+Mm(yv.transform(r))+")"};function rpe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const yk={test:ZO("#"),parse:rpe,transform:id.transform},y0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xc=y0("deg"),fo=y0("%"),it=y0("px"),ipe=y0("vh"),ape=y0("vw"),nV={...fo,parse:t=>fo.parse(t)/100,transform:t=>fo.transform(t*100)},ph={test:ZO("hsl","hue"),parse:O7("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+fo.transform(Mm(e))+", "+fo.transform(Mm(n))+", "+Mm(yv.transform(r))+")"},rr={test:t=>id.test(t)||yk.test(t)||ph.test(t),parse:t=>id.test(t)?id.parse(t):ph.test(t)?ph.parse(t):yk.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?id.transform(t):ph.transform(t),getAnimatableNone:t=>{const e=rr.parse(t);return e.alpha=0,rr.transform(e)}},spe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ope(t){return isNaN(t)&&typeof t=="string"&&(t.match(QO)?.length||0)+(t.match(spe)?.length||0)>0}const R7="number",N7="color",lpe="var",cpe="var(",rV="${}",upe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(upe,c=>(rr.test(c)?(r.color.push(a),i.push(N7),n.push(rr.parse(c))):c.startsWith(cpe)?(r.var.push(a),i.push(lpe),n.push(c)):(r.number.push(a),i.push(R7),n.push(parseFloat(c))),++a,rV)).split(rV);return{values:n,split:o,indexes:r,types:i}}function M7(t){return bv(t).values}function j7(t){const{split:e,types:n}=bv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===R7?a+=Mm(i[s]):o===N7?a+=rr.transform(i[s]):a+=i[s]}return a}}const dpe=t=>typeof t=="number"?0:rr.test(t)?rr.getAnimatableNone(t):t;function fpe(t){const e=M7(t);return j7(t)(e.map(dpe))}const Wc={test:ope,parse:M7,createTransformer:j7,getAnimatableNone:fpe};function gA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hpe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=gA(c,o,t+1/3),a=gA(c,o,t),s=gA(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Cw(t,e){return n=>n>0?e:t}const kn=(t,e,n)=>t+(e-t)*n,mA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ppe=[yk,id,ph],gpe=t=>ppe.find(e=>e.test(t));function iV(t){const e=gpe(t);if(!e)return!1;let n=e.parse(t);return e===ph&&(n=hpe(n)),n}const aV=(t,e)=>{const n=iV(t),r=iV(e);if(!n||!r)return Cw(t,e);const i={...n};return a=>(i.red=mA(n.red,r.red,a),i.green=mA(n.green,r.green,a),i.blue=mA(n.blue,r.blue,a),i.alpha=kn(n.alpha,r.alpha,a),id.transform(i))},bk=new Set(["none","hidden"]);function mpe(t,e){return bk.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function vpe(t,e){return n=>kn(t,e,n)}function JO(t){return typeof t=="number"?vpe:typeof t=="string"?XO(t)?Cw:rr.test(t)?aV:xpe:Array.isArray(t)?z7:typeof t=="object"?rr.test(t)?aV:ype:Cw}function z7(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>JO(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function ype(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=JO(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function bpe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const xpe=(t,e)=>{const n=Wc.createTransformer(e),r=bv(t),i=bv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?bk.has(t)&&!i.values.length||bk.has(e)&&!r.values.length?mpe(t,e):m0(z7(bpe(r,i),i.values),n):Cw(t,e)};function L7(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kn(t,e,n):JO(t)(t,e)}const wpe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>_n.update(e,n),stop:()=>Kc(e),now:()=>$r.isProcessing?$r.timestamp:Di.now()}},V7=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Iw=2e4;function eR(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Iw;)e+=n,r=t.next(e);return e>=Iw?1/0:e}function _pe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(eR(r),Iw);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Ma(i)}}const Spe=5;function B7(t,e,n){const r=Math.max(e-Spe,0);return b7(n-t(r),e-r)}const Nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vA=.001;function Epe({duration:t=Nn.duration,bounce:e=Nn.bounce,velocity:n=Nn.velocity,mass:r=Nn.mass}){let i,a,s=1-e;s=ml(Nn.minDamping,Nn.maxDamping,s),t=ml(Nn.minDuration,Nn.maxDuration,Ma(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,m=xk(u,s),b=Math.exp(-h);return vA-g/m*b},a=u=>{const h=u*s*t,g=h*n+n,m=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=xk(Math.pow(u,2),s);return(-i(u)+vA>0?-1:1)*((g-m)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-vA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=Ape(i,a,o);if(t=uo(t),isNaN(c))return{stiffness:Nn.stiffness,damping:Nn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const Tpe=12;function Ape(t,e,n){let r=n;for(let i=1;i<Tpe;i++)r=r-t(r)/e(r);return r}function xk(t,e){return t*Math.sqrt(1-e*e)}const Cpe=["duration","bounce"],Ipe=["stiffness","damping","mass"];function sV(t,e){return e.some(n=>t[n]!==void 0)}function kpe(t){let e={velocity:Nn.velocity,stiffness:Nn.stiffness,damping:Nn.damping,mass:Nn.mass,isResolvedFromDuration:!1,...t};if(!sV(t,Ipe)&&sV(t,Cpe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ml(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Nn.mass,stiffness:i,damping:a}}else{const n=Epe(t);e={...e,...n,mass:Nn.mass},e.isResolvedFromDuration=!0}return e}function kw(t=Nn.visualDuration,e=Nn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:m}=kpe({...n,velocity:-Ma(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,S=Ma(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Nn.restSpeed.granular:Nn.restSpeed.default),i||(i=T?Nn.restDelta.granular:Nn.restDelta.default);let I;if(x<1){const O=xk(S,x);I=D=>{const k=Math.exp(-x*S*D);return s-k*((b+x*S*w)/O*Math.sin(O*D)+w*Math.cos(O*D))}}else if(x===1)I=O=>s-Math.exp(-S*O)*(w+(b+S*w)*O);else{const O=S*Math.sqrt(x*x-1);I=D=>{const k=Math.exp(-x*S*D),P=Math.min(O*D,300);return s-k*((b+x*S*w)*Math.sinh(P)+O*w*Math.cosh(P))/O}}const R={calculatedDuration:m&&h||null,next:O=>{const D=I(O);if(m)o.done=O>=h;else{let k=O===0?b:0;x<1&&(k=O===0?uo(b):B7(I,O,D));const P=Math.abs(k)<=r,N=Math.abs(s-D)<=i;o.done=P&&N}return o.value=o.done?s:D,o},toString:()=>{const O=Math.min(eR(R),Iw),D=V7(k=>R.next(O*k).value,O,30);return O+"ms "+D},toTransition:()=>{}};return R}kw.applyToOptions=t=>{const e=_pe(t,100,kw);return t.ease=e.ease,t.duration=uo(e.duration),t.type="keyframes",t};function wk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},m=P=>o!==void 0&&P<o||c!==void 0&&P>c,b=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let x=n*e;const w=h+x,S=s===void 0?w:s(w);S!==w&&(x=S-h);const T=P=>-x*Math.exp(-P/r),I=P=>S+T(P),R=P=>{const N=T(P),z=I(P);g.done=Math.abs(N)<=u,g.value=g.done?S:z};let O,D;const k=P=>{m(g.value)&&(O=P,D=kw({keyframes:[g.value,b(g.value)],velocity:B7(I,P,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return k(0),{calculatedDuration:null,next:P=>{let N=!1;return!D&&O===void 0&&(N=!0,R(P),k(P)),O!==void 0&&P>=O?D.next(P-O):(!N&&R(P),g)}}}function Ppe(t,e,n){const r=[],i=n||vl.mix||L7,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||za:e;o=m0(c,o)}r.push(o)}return r}function Dpe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(qO(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Ppe(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=vv(t[h],t[h+1],f);return o[h](g)};return n?f=>u(ml(t[0],t[a-1],f)):u}function Ope(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=vv(0,e,r);t.push(kn(n,1,i))}}function Rpe(t){const e=[0];return Ope(e,t.length-1),e}function Npe(t,e){return t.map(n=>n*e)}function Mpe(t,e){return t.map(()=>e||I7).splice(0,t.length-1)}function jm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Hhe(r)?r.map(tV):tV(r),a={done:!1,value:e[0]},s=Npe(n&&n.length===e.length?n:Rpe(e),t),o=Dpe(s,e,{ease:Array.isArray(i)?i:Mpe(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const jpe=t=>t!==null;function tR(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(jpe),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const zpe={decay:wk,inertia:wk,tween:jm,keyframes:jm,spring:kw};function F7(t){typeof t.type=="string"&&(t.type=zpe[t.type])}class nR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Lpe=t=>t/100;class rR extends nR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Di.now()&&this.tick(Di.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;F7(e);const{type:n=jm,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||jm;c!==jm&&typeof o[0]!="number"&&(this.mixKeyframes=m0(Lpe,L7(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=eR(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:m,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,R=r;if(h){const P=Math.min(this.currentTime,i)/o;let N=Math.floor(P),z=P%1;!z&&P>=1&&(z=1),z===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(g==="reverse"?(z=1-z,m&&(z-=m/o)):g==="mirror"&&(R=s)),I=ml(0,1,z)*o}const O=T?{done:!1,value:f[0]}:R.next(I);a&&(O.value=a(O.value));let{done:D}=O;!T&&c!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return k&&b!==wk&&(O.value=tR(f,this.options,w,this.speed)),x&&x(O.value),k&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return Ma(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ma(e)}get time(){return Ma(this.currentTime)}set time(e){e=uo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Di.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ma(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=wpe,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Di.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Vpe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ad=t=>t*180/Math.PI,_k=t=>{const e=ad(Math.atan2(t[1],t[0]));return Sk(e)},Bpe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:_k,rotateZ:_k,skewX:t=>ad(Math.atan(t[1])),skewY:t=>ad(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Sk=t=>(t=t%360,t<0&&(t+=360),t),oV=_k,lV=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),cV=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Fpe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lV,scaleY:cV,scale:t=>(lV(t)+cV(t))/2,rotateX:t=>Sk(ad(Math.atan2(t[6],t[5]))),rotateY:t=>Sk(ad(Math.atan2(-t[2],t[0]))),rotateZ:oV,rotate:oV,skewX:t=>ad(Math.atan(t[4])),skewY:t=>ad(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ek(t){return t.includes("scale")?1:0}function Tk(t,e){if(!t||t==="none")return Ek(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Fpe,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Bpe,i=o}if(!i)return Ek(e);const a=r[e],s=i[1].split(",").map($pe);return typeof a=="function"?a(s):s[a]}const Upe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Tk(n,e)};function $pe(t){return parseFloat(t.trim())}const Dp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Op=new Set(Dp),uV=t=>t===Pp||t===it,qpe=new Set(["x","y","z"]),Gpe=Dp.filter(t=>!qpe.has(t));function Hpe(t){const e=[];return Gpe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const md={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Tk(e,"x"),y:(t,{transform:e})=>Tk(e,"y")};md.translateX=md.x;md.translateY=md.y;const vd=new Set;let Ak=!1,Ck=!1,Ik=!1;function U7(){if(Ck){const t=Array.from(vd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Hpe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ck=!1,Ak=!1,vd.forEach(t=>t.complete(Ik)),vd.clear()}function $7(){vd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ck=!0)})}function Kpe(){Ik=!0,$7(),U7(),Ik=!1}class iR{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(vd.add(this),Ak||(Ak=!0,_n.read($7),_n.resolveKeyframes(U7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Vpe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),vd.delete(this)}cancel(){this.state==="scheduled"&&(vd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Wpe=t=>t.startsWith("--");function Ype(t,e,n){Wpe(e)?t.style.setProperty(e,n):t.style[e]=n}const Xpe=GO(()=>window.ScrollTimeline!==void 0),Qpe={};function Zpe(t,e){const n=GO(t);return()=>Qpe[e]??n()}const q7=Zpe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vm=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,dV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vm([0,.65,.55,1]),circOut:vm([.55,0,1,.45]),backIn:vm([.31,.01,.66,-.59]),backOut:vm([.33,1.53,.69,.99])};function G7(t,e){if(t)return typeof t=="function"?q7()?V7(t,e):"ease-out":k7(t)?vm(t):Array.isArray(t)?t.map(n=>G7(n,e)||dV.easeOut):dV[t]}function Jpe(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=G7(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function H7(t){return typeof t=="function"&&"applyToOptions"in t}function ege({type:t,...e}){return H7(t)&&q7()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class tge extends nR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,qO(typeof e.type!="string");const u=ege(e);this.animation=Jpe(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=tR(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):Ype(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ma(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ma(e)}get time(){return Ma(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=uo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Xpe()?(this.animation.timeline=e,za):n(this)}}const K7={anticipate:T7,backInOut:E7,circInOut:C7};function nge(t){return t in K7}function rge(t){typeof t.ease=="string"&&nge(t.ease)&&(t.ease=K7[t.ease])}const fV=10;class ige extends tge{constructor(e){rge(e),F7(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new rR({...s,autoplay:!1}),c=uo(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-fV).value,o.sample(c).value,fV),o.stop()}}const hV=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wc.test(t)||t==="0")&&!t.startsWith("url("));function age(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function sge(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=hV(i,e),o=hV(a,e);return!s||!o?!1:age(t)||(n==="spring"||H7(n))&&r}function kk(t){t.duration=0,t.type="keyframes"}const oge=new Set(["opacity","clipPath","filter","transform"]),lge=GO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cge(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return lge()&&n&&oge.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const uge=40;class dge extends nR{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Di.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},m=f?.KeyframeResolver||iR;this.keyframeResolver=new m(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=Di.now(),sge(e,a,s,o)||((vl.instantAnimations||!c)&&f?.(tR(e,r,n)),e[0]=e[e.length-1],kk(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>uge?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!u&&cge(g)?new ige({...g,element:g.motionValue.owner.current}):new rR(g);m.finished.then(()=>this.notifyFinished()).catch(za),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Kpe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const fge=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hge(t){const e=fge.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function W7(t,e,n=1){const[r,i]=hge(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return m7(s)?parseFloat(s):s}return XO(i)?W7(i,e,n+1):i}function aR(t,e){return t?.[e]??t?.default??t}const Y7=new Set(["width","height","top","left","right","bottom",...Dp]),pge={test:t=>t==="auto",parse:t=>t},X7=t=>e=>e.test(t),Q7=[Pp,it,fo,xc,ape,ipe,pge],pV=t=>Q7.find(X7(t));function gge(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||y7(t):!0}const mge=new Set(["brightness","contrast","saturate","opacity"]);function vge(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(QO)||[];if(!r)return t;const i=n.replace(r,"");let a=mge.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const yge=/\b([a-z-]*)\(.*?\)/gu,Pk={...Wc,getAnimatableNone:t=>{const e=t.match(yge);return e?e.map(vge).join(" "):t}},gV={...Pp,transform:Math.round},bge={rotate:xc,rotateX:xc,rotateY:xc,rotateZ:xc,scale:jb,scaleX:jb,scaleY:jb,scaleZ:jb,skew:xc,skewX:xc,skewY:xc,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:yv,originX:nV,originY:nV,originZ:it},sR={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,top:it,right:it,bottom:it,left:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,backgroundPositionX:it,backgroundPositionY:it,...bge,zIndex:gV,fillOpacity:yv,strokeOpacity:yv,numOctaves:gV},xge={...sR,color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,filter:Pk,WebkitFilter:Pk},Z7=t=>xge[t];function J7(t,e){let n=Z7(t);return n!==Pk&&(n=Wc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const wge=new Set(["auto","none","0"]);function _ge(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!wge.has(a)&&bv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=J7(n,i)}class Sge extends iR{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),XO(u))){const f=W7(u,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Y7.has(r)||e.length!==2)return;const[i,a]=e,s=pV(i),o=pV(a);if(s!==o)if(uV(s)&&uV(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else md[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||gge(e[i]))&&r.push(i);r.length&&_ge(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=md[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=md[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function Ege(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const eH=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function tH(t){return v7(t)&&"offsetHeight"in t}const mV=30,Tge=t=>!isNaN(parseFloat(t));class Age{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Di.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Di.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Tge(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new HO);const r=this.events[e].add(n);return e==="change"?()=>{r(),_n.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Di.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mV)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mV);return b7(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ep(t,e){return new Age(t,e)}const{schedule:oR}=P7(queueMicrotask,!1),cs={x:!1,y:!1};function nH(){return cs.x||cs.y}function Cge(t){return t==="x"||t==="y"?cs[t]?null:(cs[t]=!0,()=>{cs[t]=!1}):cs.x||cs.y?null:(cs.x=cs.y=!0,()=>{cs.x=cs.y=!1})}function rH(t,e){const n=Ege(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function vV(t){return!(t.pointerType==="touch"||nH())}function Ige(t,e,n={}){const[r,i,a]=rH(t,n),s=o=>{if(!vV(o))return;const{target:c}=o,u=e(c,o);if(typeof u!="function"||!c)return;const f=h=>{vV(h)&&(u(h),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const iH=(t,e)=>e?t===e?!0:iH(t,e.parentElement):!1,lR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,kge=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Pge(t){return kge.has(t.tagName)||t.tabIndex!==-1}const Vx=new WeakSet;function yV(t){return e=>{e.key==="Enter"&&t(e)}}function yA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Dge=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=yV(()=>{if(Vx.has(n))return;yA(n,"down");const i=yV(()=>{yA(n,"up")}),a=()=>yA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function bV(t){return lR(t)&&!nH()}function Oge(t,e,n={}){const[r,i,a]=rH(t,n),s=o=>{const c=o.currentTarget;if(!bV(o))return;Vx.add(c);const u=e(c,o),f=(m,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),Vx.has(c)&&Vx.delete(c),bV(m)&&typeof u=="function"&&u(m,{success:b})},h=m=>{f(m,c===window||c===document||n.useGlobalTarget||iH(c,m.target))},g=m=>{f(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),tH(o)&&(o.addEventListener("focus",u=>Dge(u,i)),!Pge(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function aH(t){return v7(t)&&"ownerSVGElement"in t}function Rge(t){return aH(t)&&t.tagName==="svg"}const ti=t=>!!(t&&t.getVelocity),Nge=[...Q7,rr,Wc],Mge=t=>Nge.find(X7(t)),cR=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function xV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function jge(...t){return e=>{let n=!1;const r=t.map(i=>{const a=xV(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():xV(t[i],null)}}}}function zge(...t){return A.useCallback(jge(...t),t)}class Lge extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=tH(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Vge({children:t,isPresent:e,anchorX:n,root:r}){const i=A.useId(),a=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=A.useContext(cR),c=zge(a,t?.ref);return A.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:g,right:m}=s.current;if(e||!a.current||!u||!f)return;const b=n==="left"?`left: ${g}`:`right: ${m}`;a.current.dataset.motionPopId=i;const x=document.createElement("style");o&&(x.nonce=o);const w=r??document.head;return w.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(x)&&w.removeChild(x)}},[e]),y.jsx(Lge,{isPresent:e,childRef:a,sizeRef:s,children:A.cloneElement(t,{ref:c})})}const Bge=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:c})=>{const u=__(Fge),f=A.useId();let h=!0,g=A.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:m=>{u.set(m,!0);for(const b of u.values())if(!b)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return a&&h&&(g={...g}),A.useMemo(()=>{u.forEach((m,b)=>u.set(b,!1))},[n]),A.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),s==="popLayout"&&(t=y.jsx(Vge,{isPresent:n,anchorX:o,root:c,children:t})),y.jsx(S_.Provider,{value:g,children:t})};function Fge(){return new Map}function sH(t=!0){const e=A.useContext(S_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const zb=t=>t.key||"";function wV(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const ha=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:c})=>{const[u,f]=sH(s),h=A.useMemo(()=>wV(t),[t]),g=s&&!u?[]:h.map(zb),m=A.useRef(!0),b=A.useRef(h),x=__(()=>new Map),[w,S]=A.useState(h),[T,I]=A.useState(h);FO(()=>{m.current=!1,b.current=h;for(let D=0;D<T.length;D++){const k=zb(T[D]);g.includes(k)?x.delete(k):x.get(k)!==!0&&x.set(k,!1)}},[T,g.length,g.join("-")]);const R=[];if(h!==w){let D=[...h];for(let k=0;k<T.length;k++){const P=T[k],N=zb(P);g.includes(N)||(D.splice(k,0,P),R.push(P))}return a==="wait"&&R.length&&(D=R),I(wV(D)),S(h),null}const{forceRender:O}=A.useContext(VO);return y.jsx(y.Fragment,{children:T.map(D=>{const k=zb(D),P=s&&!u?!1:h===T||g.includes(k),N=()=>{if(x.has(k))x.set(k,!0);else return;let z=!0;x.forEach(L=>{L||(z=!1)}),z&&(O?.(),I(b.current),s&&f?.(),r&&r())};return y.jsx(Bge,{isPresent:P,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:P?void 0:N,anchorX:o,children:D},k)})})},oH=A.createContext({strict:!1}),_V={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tp={};for(const t in _V)tp[t]={isEnabled:e=>_V[t].some(n=>!!e[n])};function Uge(t){for(const e in t)tp[e]={...tp[e],...t[e]}}const $ge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pw(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$ge.has(t)}let lH=t=>!Pw(t);function qge(t){typeof t=="function"&&(lH=e=>e.startsWith("on")?!Pw(e):t(e))}try{qge(require("@emotion/is-prop-valid").default)}catch{}function Gge(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(lH(i)||n===!0&&Pw(i)||!e&&!Pw(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const E_=A.createContext({});function T_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function xv(t){return typeof t=="string"||Array.isArray(t)}const uR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dR=["initial",...uR];function A_(t){return T_(t.animate)||dR.some(e=>xv(t[e]))}function cH(t){return!!(A_(t)||t.variants)}function Hge(t,e){if(A_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||xv(n)?n:void 0,animate:xv(r)?r:void 0}}return t.inherit!==!1?e:{}}function Kge(t){const{initial:e,animate:n}=Hge(t,A.useContext(E_));return A.useMemo(()=>({initial:e,animate:n}),[SV(e),SV(n)])}function SV(t){return Array.isArray(t)?t.join(" "):t}const wv={};function Wge(t){for(const e in t)wv[e]=t[e],YO(e)&&(wv[e].isCSSVariable=!0)}function uH(t,{layout:e,layoutId:n}){return Op.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!wv[t]||t==="opacity")}const Yge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Xge=Dp.length;function Qge(t,e,n){let r="",i=!0;for(let a=0;a<Xge;a++){const s=Dp[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=eH(o,sR[s]);if(!c){i=!1;const f=Yge[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function fR(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(Op.has(c)){s=!0;continue}else if(YO(c)){i[c]=u;continue}else{const f=eH(u,sR[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=Qge(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}const hR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dH(t,e,n){for(const r in e)!ti(e[r])&&!uH(r,n)&&(t[r]=e[r])}function Zge({transformTemplate:t},e){return A.useMemo(()=>{const n=hR();return fR(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Jge(t,e){const n=t.style||{},r={};return dH(r,n,t),Object.assign(r,Zge(t,e)),r}function eme(t,e){const n={},r=Jge(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const tme={offset:"stroke-dashoffset",array:"stroke-dasharray"},nme={offset:"strokeDashoffset",array:"strokeDasharray"};function rme(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?tme:nme;t[a.offset]=it.transform(-r);const s=it.transform(e),o=it.transform(n);t[a.array]=`${s} ${o}`}function fH(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(fR(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&rme(h,i,a,s,!1)}const hH=()=>({...hR(),attrs:{}}),pH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ime(t,e,n,r){const i=A.useMemo(()=>{const a=hH();return fH(a,e,pH(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};dH(a,t.style,t),i.style={...a,...i.style}}return i}const ame=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pR(t){return typeof t!="string"||t.includes("-")?!1:!!(ame.indexOf(t)>-1||/[A-Z]/u.test(t))}function sme(t,e,n,{latestValues:r},i,a=!1){const o=(pR(t)?ime:eme)(e,r,i,t),c=Gge(e,typeof t=="string",a),u=t!==A.Fragment?{...c,...o,ref:n}:{},{children:f}=e,h=A.useMemo(()=>ti(f)?f.get():f,[f]);return A.createElement(t,{...u,children:h})}function EV(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function gR(t,e,n,r){if(typeof e=="function"){const[i,a]=EV(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=EV(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Bx(t){return ti(t)?t.get():t}function ome({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:lme(n,r,i,t),renderState:e()}}function lme(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=Bx(a[g]);let{initial:s,animate:o}=t;const c=A_(t),u=cH(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!T_(h)){const g=Array.isArray(h)?h:[h];for(let m=0;m<g.length;m++){const b=gR(t,g[m]);if(b){const{transitionEnd:x,transition:w,...S}=b;for(const T in S){let I=S[T];if(Array.isArray(I)){const R=f?I.length-1:0;I=I[R]}I!==null&&(i[T]=I)}for(const T in x)i[T]=x[T]}}}return i}const gH=t=>(e,n)=>{const r=A.useContext(E_),i=A.useContext(S_),a=()=>ome(t,e,r,i);return n?a():__(a)};function mR(t,e,n){const{style:r}=t,i={};for(const a in r)(ti(r[a])||e.style&&ti(e.style[a])||uH(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const cme=gH({scrapeMotionValuesFromProps:mR,createRenderState:hR});function mH(t,e,n){const r=mR(t,e,n);for(const i in t)if(ti(t[i])||ti(e[i])){const a=Dp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const ume=gH({scrapeMotionValuesFromProps:mH,createRenderState:hH}),dme=Symbol.for("motionComponentSymbol");function gh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fme(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):gh(n)&&(n.current=r))},[e])}const vR=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hme="framerAppearId",vH="data-"+vR(hme),yH=A.createContext({});function pme(t,e,n,r,i){const{visualElement:a}=A.useContext(E_),s=A.useContext(oH),o=A.useContext(S_),c=A.useContext(cR).reducedMotion,u=A.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const f=u.current,h=A.useContext(yH);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&gme(u.current,n,i,h);const g=A.useRef(!1);A.useInsertionEffect(()=>{f&&g.current&&f.update(n,o)});const m=n[vH],b=A.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return FO(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),b.current=!1),f.enteringChildren=void 0)}),f}function gme(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:bH(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&gh(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function bH(t){if(t)return t.options.allowProjection!==!1?t.projection:bH(t.parent)}function bA(t,{forwardMotionProps:e=!1}={},n,r){n&&Uge(n);const i=pR(t)?ume:cme;function a(o,c){let u;const f={...A.useContext(cR),...o,layoutId:mme(o)},{isStatic:h}=f,g=Kge(o),m=i(o,h);if(!h&&BO){vme();const b=yme(f);u=b.MeasureLayout,g.visualElement=pme(t,m,f,r,b.ProjectionNode)}return y.jsxs(E_.Provider,{value:g,children:[u&&g.visualElement?y.jsx(u,{visualElement:g.visualElement,...f}):null,sme(t,o,fme(m,g.visualElement,c),m,h,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=A.forwardRef(a);return s[dme]=t,s}function mme({layoutId:t}){const e=A.useContext(VO).id;return e&&t!==void 0?e+"-"+t:t}function vme(t,e){A.useContext(oH).strict}function yme(t){const{drag:e,layout:n}=tp;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function bme(t,e){if(typeof Proxy>"u")return bA;const n=new Map,r=(a,s)=>bA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,bA(s,void 0,t,e)),n.get(s))})}function xH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function xme({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wme(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xA(t){return t===void 0||t===1}function Dk({scale:t,scaleX:e,scaleY:n}){return!xA(t)||!xA(e)||!xA(n)}function $u(t){return Dk(t)||wH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wH(t){return TV(t.x)||TV(t.y)}function TV(t){return t&&t!=="0%"}function Dw(t,e,n){const r=t-n,i=e*r;return n+i}function AV(t,e,n,r,i){return i!==void 0&&(t=Dw(t,i,r)),Dw(t,n,r)+e}function Ok(t,e=0,n=1,r,i){t.min=AV(t.min,e,n,r,i),t.max=AV(t.max,e,n,r,i)}function _H(t,{x:e,y:n}){Ok(t.x,e.translate,e.scale,e.originPoint),Ok(t.y,n.translate,n.scale,n.originPoint)}const CV=.999999999999,IV=1.0000000000001;function _me(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&vh(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,_H(t,s)),r&&$u(a.latestValues)&&vh(t,a.latestValues))}e.x<IV&&e.x>CV&&(e.x=1),e.y<IV&&e.y>CV&&(e.y=1)}function mh(t,e){t.min=t.min+e,t.max=t.max+e}function kV(t,e,n,r,i=.5){const a=kn(t.min,t.max,i);Ok(t,e,n,a,r)}function vh(t,e){kV(t.x,e.x,e.scaleX,e.scale,e.originX),kV(t.y,e.y,e.scaleY,e.scale,e.originY)}function SH(t,e){return xH(wme(t.getBoundingClientRect(),e))}function Sme(t,e,n){const r=SH(t,n),{scroll:i}=e;return i&&(mh(r.x,i.offset.x),mh(r.y,i.offset.y)),r}const PV=()=>({translate:0,scale:1,origin:0,originPoint:0}),yh=()=>({x:PV(),y:PV()}),DV=()=>({min:0,max:0}),qn=()=>({x:DV(),y:DV()}),Rk={current:null},EH={current:!1};function Eme(){if(EH.current=!0,!!BO)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rk.current=t.matches;t.addEventListener("change",e),e()}else Rk.current=!1}const Tme=new WeakMap;function Ame(t,e,n){for(const r in e){const i=e[r],a=n[r];if(ti(i))t.addValue(r,i);else if(ti(a))t.addValue(r,ep(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,ep(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const OV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Cme{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=iR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Di.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,_n.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=A_(n),this.isVariantNode=cH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const m=h[g];c[g]!==void 0&&ti(m)&&m.set(c[g])}}mount(e){this.current=e,Tme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),EH.current||Eme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Kc(this.notifyUpdate),Kc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Op.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&_n.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in tp){const n=tp[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<OV.length;r++){const i=OV[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Ame(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ep(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(m7(r)||y7(r))?r=parseFloat(r):!Mge(r)&&Wc.test(n)&&(r=J7(e,n)),this.setBaseTarget(e,ti(r)?r.get():r)),ti(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=gR(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ti(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new HO),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){oR.render(this.render)}}class TH extends Cme{constructor(){super(...arguments),this.KeyframeResolver=Sge}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ti(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function AH(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function Ime(t){return window.getComputedStyle(t)}class kme extends TH{constructor(){super(...arguments),this.type="html",this.renderInstance=AH}readValueFromInstance(e,n){if(Op.has(n))return this.projection?.isProjecting?Ek(n):Upe(e,n);{const r=Ime(e),i=(YO(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return SH(e,n)}build(e,n,r){fR(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return mR(e,n,r)}}const CH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Pme(t,e,n,r){AH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(CH.has(i)?i:vR(i),e.attrs[i])}class Dme extends TH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Op.has(n)){const r=Z7(n);return r&&r.default||0}return n=CH.has(n)?n:vR(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return mH(e,n,r)}build(e,n,r){fH(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Pme(e,n,r,i)}mount(e){this.isSVGTag=pH(e.tagName),super.mount(e)}}const Ome=(t,e)=>pR(t)?new Dme(e):new kme(e,{allowProjection:t!==A.Fragment});function Dh(t,e,n){const r=t.getProps();return gR(r,e,n!==void 0?n:r.custom,t)}const Nk=t=>Array.isArray(t);function Rme(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ep(n))}function Nme(t){return Nk(t)?t[t.length-1]||0:t}function yR(t,e){const n=Dh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=Nme(a[s]);Rme(t,s,o)}}function Mme(t){return!!(ti(t)&&t.add)}function Mk(t,e){const n=t.getValue("willChange");if(Mme(n))return n.add(e);if(!n&&vl.WillChange){const r=new vl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function IH(t){return t.props[vH]}const jme=t=>t!==null;function zme(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(jme),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const Lme={type:"spring",stiffness:500,damping:25,restSpeed:10},Vme=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Bme={type:"keyframes",duration:.8},Fme={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ume=(t,{keyframes:e})=>e.length>2?Bme:Op.has(t)?t.startsWith("scale")?Vme(e[1]):Lme:Fme;function $me({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const bR=(t,e,n,r={},i,a)=>s=>{const o=aR(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-uo(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};$me(o)||Object.assign(f,Ume(t,f)),f.duration&&(f.duration=uo(f.duration)),f.repeatDelay&&(f.repeatDelay=uo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(kk(f),f.delay===0&&(h=!0)),(vl.instantAnimations||vl.skipAnimations)&&(h=!0,kk(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=zme(f.keyframes,o);if(g!==void 0){_n.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new rR(f):new dge(f)};function qme({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function kH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const h=t.getValue(f,t.latestValues[f]??null),g=o[f];if(g===void 0||u&&qme(u,f))continue;const m={delay:n,...aR(a||{},f)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===b&&!m.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const S=IH(t);if(S){const T=window.MotionHandoffAnimation(S,f,_n);T!==null&&(m.startTime=T,x=!0)}}Mk(t,f),h.start(bR(f,h,g,t.shouldReduceMotion&&Y7.has(f)?{type:!1}:m,t,x));const w=h.animation;w&&c.push(w)}return s&&Promise.all(c).then(()=>{_n.update(()=>{s&&yR(t,s)})}),c}function PH(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}function jk(t,e,n={}){const r=Dh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(kH(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return Gme(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function Gme(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(jk(c,e,{...s,delay:n+(typeof r=="function"?0:r)+PH(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function DH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>jk(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=jk(t,e,n);else{const i=typeof e=="function"?Dh(t,e,n.custom):e;r=Promise.all(kH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function OH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Hme=dR.length;function RH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?RH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Hme;n++){const r=dR[n],i=t.props[r];(xv(i)||i===!1)&&(e[r]=i)}return e}const Kme=[...uR].reverse(),Wme=uR.length;function Yme(t){return e=>Promise.all(e.map(({animation:n,options:r})=>DH(t,n,r)))}function Xme(t){let e=Yme(t),n=RV(),r=!0;const i=c=>(u,f)=>{const h=Dh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:m,...b}=h;u={...u,...b,...m}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=RH(t.parent)||{},h=[],g=new Set;let m={},b=1/0;for(let w=0;w<Wme;w++){const S=Kme[w],T=n[S],I=u[S]!==void 0?u[S]:f[S],R=xv(I),O=S===c?T.isActive:null;O===!1&&(b=w);let D=I===f[S]&&I!==u[S]&&R;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),T.protectedKeys={...m},!T.isActive&&O===null||!I&&!T.prevProp||T_(I)||typeof I=="boolean")continue;const k=Qme(T.prevProp,I);let P=k||S===c&&T.isActive&&!D&&R||w>b&&R,N=!1;const z=Array.isArray(I)?I:[I];let L=z.reduce(i(S),{});O===!1&&(L={});const{prevResolvedValues:B={}}=T,j={...B,...L},W=Y=>{P=!0,g.has(Y)&&(N=!0,g.delete(Y)),T.needsAnimating[Y]=!0;const Z=t.getValue(Y);Z&&(Z.liveStyle=!1)};for(const Y in j){const Z=L[Y],ie=B[Y];if(m.hasOwnProperty(Y))continue;let J=!1;Nk(Z)&&Nk(ie)?J=!OH(Z,ie):J=Z!==ie,J?Z!=null?W(Y):g.add(Y):Z!==void 0&&g.has(Y)?W(Y):T.protectedKeys[Y]=!0}T.prevProp=I,T.prevResolvedValues=L,T.isActive&&(m={...m,...L}),r&&t.blockInitialAnimation&&(P=!1);const Q=D&&k;P&&(!Q||N)&&h.push(...z.map(Y=>{const Z={type:S};if(typeof Y=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:ie}=t,J=Dh(ie,Y);if(ie.enteringChildren&&J){const{delayChildren:U}=J.transition||{};Z.delay=PH(ie.enteringChildren,t,U)}}return{animation:Y,options:Z}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const S=Dh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(w.transition=S.transition)}g.forEach(S=>{const T=t.getBaseTarget(S),I=t.getValue(S);I&&(I.liveStyle=!0),w[S]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=RV()}}}function Qme(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!OH(e,t):!1}function Lu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RV(){return{animate:Lu(!0),whileInView:Lu(),whileHover:Lu(),whileTap:Lu(),whileDrag:Lu(),whileFocus:Lu(),exit:Lu()}}class su{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Zme extends su{constructor(e){super(e),e.animationState||(e.animationState=Xme(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();T_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Jme=0;class eve extends su{constructor(){super(...arguments),this.id=Jme++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const tve={animation:{Feature:Zme},exit:{Feature:eve}};function _v(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function b0(t){return{point:{x:t.pageX,y:t.pageY}}}const nve=t=>e=>lR(e)&&t(e,b0(e));function zm(t,e,n,r){return _v(t,e,nve(n),r)}const NH=1e-4,rve=1-NH,ive=1+NH,MH=.01,ave=0-MH,sve=0+MH;function hi(t){return t.max-t.min}function ove(t,e,n){return Math.abs(t-e)<=n}function NV(t,e,n,r=.5){t.origin=r,t.originPoint=kn(e.min,e.max,t.origin),t.scale=hi(n)/hi(e),t.translate=kn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=rve&&t.scale<=ive||isNaN(t.scale))&&(t.scale=1),(t.translate>=ave&&t.translate<=sve||isNaN(t.translate))&&(t.translate=0)}function Lm(t,e,n,r){NV(t.x,e.x,n.x,r?r.originX:void 0),NV(t.y,e.y,n.y,r?r.originY:void 0)}function MV(t,e,n){t.min=n.min+e.min,t.max=t.min+hi(e)}function lve(t,e,n){MV(t.x,e.x,n.x),MV(t.y,e.y,n.y)}function jV(t,e,n){t.min=e.min-n.min,t.max=t.min+hi(e)}function Vm(t,e,n){jV(t.x,e.x,n.x),jV(t.y,e.y,n.y)}function Ra(t){return[t("x"),t("y")]}const jH=({current:t})=>t?t.ownerDocument.defaultView:null,zV=(t,e)=>Math.abs(t-e);function cve(t,e){const n=zV(t.x,e.x),r=zV(t.y,e.y);return Math.sqrt(n**2+r**2)}class zH{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=_A(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,b=cve(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!b)return;const{point:x}=g,{timestamp:w}=$r;this.history.push({...x,timestamp:w});const{onStart:S,onMove:T}=this.handlers;m||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,m)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=wA(m,this.transformPagePoint),_n.update(this.updatePoint,!0)},this.handlePointerUp=(g,m)=>{this.end();const{onEnd:b,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=_A(g.type==="pointercancel"?this.lastMoveEventInfo:wA(m,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,S),x&&x(g,S)},!lR(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const o=b0(e),c=wA(o,this.transformPagePoint),{point:u}=c,{timestamp:f}=$r;this.history=[{...u,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,_A(c,this.history)),this.removeListeners=m0(zm(this.contextWindow,"pointermove",this.handlePointerMove),zm(this.contextWindow,"pointerup",this.handlePointerUp),zm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Kc(this.updatePoint)}}function wA(t,e){return e?{point:e(t.point)}:t}function LV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _A({point:t},e){return{point:t,delta:LV(t,LH(e)),offset:LV(t,uve(e)),velocity:dve(e,.1)}}function uve(t){return t[0]}function LH(t){return t[t.length-1]}function dve(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=LH(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>uo(e)));)n--;if(!r)return{x:0,y:0};const a=Ma(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function fve(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?kn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?kn(n,t,r.max):Math.min(t,n)),t}function VV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function hve(t,{top:e,left:n,bottom:r,right:i}){return{x:VV(t.x,n,i),y:VV(t.y,e,r)}}function BV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function pve(t,e){return{x:BV(t.x,e.x),y:BV(t.y,e.y)}}function gve(t,e){let n=.5;const r=hi(t),i=hi(e);return i>r?n=vv(e.min,e.max-r,t.min):r>i&&(n=vv(t.min,t.max-i,e.min)),ml(0,1,n)}function mve(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const zk=.35;function vve(t=zk){return t===!1?t=0:t===!0&&(t=zk),{x:FV(t,"left","right"),y:FV(t,"top","bottom")}}function FV(t,e,n){return{min:UV(t,e),max:UV(t,n)}}function UV(t,e){return typeof t=="number"?t:t[e]||0}const yve=new WeakMap;class bve{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(b0(h).point)},s=(h,g)=>{const{drag:m,dragPropagation:b,onDragStart:x}=this.getProps();if(m&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Cge(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ra(S=>{let T=this.getAxisMotionValue(S).get()||0;if(fo.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const R=I.layout.layoutBox[S];R&&(T=hi(R)*(parseFloat(T)/100))}}this.originPoint[S]=T}),x&&_n.postRender(()=>x(h,g)),Mk(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:m,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=g;if(b&&this.currentDirection===null){this.currentDirection=xve(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),w&&w(h,g)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ra(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new zH(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:jH(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&_n.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Lb(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=fve(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&gh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=hve(r.layoutBox,e):this.constraints=!1,this.elastic=vve(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ra(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=mve(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!gh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Sme(r,i.root,this.visualElement.getTransformPagePoint());let s=pve(i.layout.layoutBox,a);if(n){const o=n(xme(s));this.hasMutatedConstraints=!!o,o&&(s=xH(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Ra(f=>{if(!Lb(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,m=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Mk(this.visualElement,e),r.start(bR(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ra(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ra(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ra(n=>{const{drag:r}=this.getProps();if(!Lb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-kn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!gh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ra(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=gve({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ra(s=>{if(!Lb(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(kn(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;yve.set(this.visualElement,this);const e=this.visualElement.current,n=zm(e,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();gh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),_n.read(r);const s=_v(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ra(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=c[f].translate,h.set(h.get()+c[f].translate))}),this.visualElement.render())}));return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=zk,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Lb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function xve(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class wve extends su{constructor(e){super(e),this.removeGroupControls=za,this.removeListeners=za,this.controls=new bve(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||za}unmount(){this.removeGroupControls(),this.removeListeners()}}const $V=t=>(e,n)=>{t&&_n.postRender(()=>t(e,n))};class _ve extends su{constructor(){super(...arguments),this.removePointerDownListener=za}onPointerDown(e){this.session=new zH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:$V(e),onStart:$V(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&_n.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=zm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Fx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const em={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(it.test(t))t=parseFloat(t);else return t;const n=qV(t,e.target.x),r=qV(t,e.target.y);return`${n}% ${r}%`}},Sve={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Wc.parse(t);if(i.length>5)return r;const a=Wc.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=kn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};let SA=!1;class Eve extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;Wge(Tve),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),SA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Fx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,SA=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||_n.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),oR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;SA=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function VH(t){const[e,n]=sH(),r=A.useContext(VO);return y.jsx(Eve,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(yH),isPresent:e,safeToRemove:n})}const Tve={borderRadius:{...em,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:em,borderTopRightRadius:em,borderBottomLeftRadius:em,borderBottomRightRadius:em,boxShadow:Sve};function Ave(t,e,n){const r=ti(t)?t:ep(t);return r.start(bR("",r,e,n)),r.animation}const Cve=(t,e)=>t.depth-e.depth;class Ive{constructor(){this.children=[],this.isDirty=!1}add(e){UO(this.children,e),this.isDirty=!0}remove(e){$O(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Cve),this.isDirty=!1,this.children.forEach(e)}}function kve(t,e){const n=Di.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Kc(r),t(a-e))};return _n.setup(r,!0),()=>Kc(r)}const BH=["TopLeft","TopRight","BottomLeft","BottomRight"],Pve=BH.length,GV=t=>typeof t=="string"?parseFloat(t):t,HV=t=>typeof t=="number"||it.test(t);function Dve(t,e,n,r,i,a){i?(t.opacity=kn(0,n.opacity??1,Ove(r)),t.opacityExit=kn(e.opacity??1,0,Rve(r))):a&&(t.opacity=kn(e.opacity??1,n.opacity??1,r));for(let s=0;s<Pve;s++){const o=`border${BH[s]}Radius`;let c=KV(e,o),u=KV(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||HV(c)===HV(u)?(t[o]=Math.max(kn(GV(c),GV(u),r),0),(fo.test(u)||fo.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=kn(e.rotate||0,n.rotate||0,r))}function KV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Ove=FH(0,.5,A7),Rve=FH(.5,.95,za);function FH(t,e,n){return r=>r<t?0:r>e?1:n(vv(t,e,r))}function WV(t,e){t.min=e.min,t.max=e.max}function Ca(t,e){WV(t.x,e.x),WV(t.y,e.y)}function YV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function XV(t,e,n,r,i){return t-=e,t=Dw(t,1/n,r),i!==void 0&&(t=Dw(t,1/i,r)),t}function Nve(t,e=0,n=1,r=.5,i,a=t,s=t){if(fo.test(e)&&(e=parseFloat(e),e=kn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=kn(a.min,a.max,r);t===a&&(o-=e),t.min=XV(t.min,e,n,o,i),t.max=XV(t.max,e,n,o,i)}function QV(t,e,[n,r,i],a,s){Nve(t,e[n],e[r],e[i],e.scale,a,s)}const Mve=["x","scaleX","originX"],jve=["y","scaleY","originY"];function ZV(t,e,n,r){QV(t.x,e,Mve,n?n.x:void 0,r?r.x:void 0),QV(t.y,e,jve,n?n.y:void 0,r?r.y:void 0)}function JV(t){return t.translate===0&&t.scale===1}function UH(t){return JV(t.x)&&JV(t.y)}function e5(t,e){return t.min===e.min&&t.max===e.max}function zve(t,e){return e5(t.x,e.x)&&e5(t.y,e.y)}function t5(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function $H(t,e){return t5(t.x,e.x)&&t5(t.y,e.y)}function n5(t){return hi(t.x)/hi(t.y)}function r5(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Lve{constructor(){this.members=[]}add(e){UO(this.members,e),e.scheduleRender()}remove(e){if($O(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vve(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:m,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),m&&(r+=`skewX(${m}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const EA=["","X","Y","Z"],Bve=1e3;let Fve=0;function TA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function qH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=IH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",_n,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&qH(r)}function GH({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=Fve++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qve),this.nodes.forEach(Wve),this.nodes.forEach(Yve),this.nodes.forEach(Gve)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ive)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new HO),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=aH(s)&&!Rge(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;_n.read(()=>{h=window.innerWidth}),t(s,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,f&&f(),f=kve(g,250),Fx.hasAnimatedSinceResize&&(Fx.hasAnimatedSinceResize=!1,this.nodes.forEach(s5)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||e0e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),S=!this.targetLayout||!$H(this.targetLayout,m),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...aR(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(f,T)}else h||s5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Kc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Xve),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(i5);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(a5);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Kve),this.nodes.forEach(Uve),this.nodes.forEach($ve)):this.nodes.forEach(a5),this.clearAllSnapshots();const o=Di.now();$r.delta=ml(0,1e3/60,o-$r.timestamp),$r.timestamp=o,$r.isProcessing=!0,hA.update.process($r),hA.preRender.process($r),hA.render.process($r),$r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,oR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Hve),this.sharedNodes.forEach(Qve)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_n.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_n.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!hi(this.snapshot.measuredBox.x)&&!hi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!UH(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||$u(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),t0e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return qn();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(n0e))){const{scroll:u}=this.root;u&&(mh(o.x,u.offset.x),mh(o.y,u.offset.y))}return o}removeElementScroll(s){const o=qn();if(Ca(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Ca(o,s),mh(o.x,f.offset.x),mh(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=qn();Ca(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&vh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),$u(f.latestValues)&&vh(c,f.latestValues)}return $u(this.latestValues)&&vh(c,this.latestValues),c}removeTransform(s){const o=qn();Ca(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!$u(u.latestValues))continue;Dk(u.latestValues)&&u.updateSnapshot();const f=qn(),h=u.measurePageBox();Ca(f,h),ZV(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return $u(this.latestValues)&&ZV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=$r.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qn(),this.relativeTargetOrigin=qn(),Vm(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qn(),this.targetWithTransforms=qn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lve(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ca(this.target,this.layout.layoutBox),_H(this.target,this.targetDelta)):Ca(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qn(),this.relativeTargetOrigin=qn(),Vm(this.relativeTargetOrigin,this.target,g.target),Ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Dk(this.parent.latestValues)||wH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===$r.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Ca(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;_me(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=qn());const{target:m}=s;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YV(this.prevProjectionDelta.x,this.projectionDelta.x),YV(this.prevProjectionDelta.y,this.projectionDelta.y)),Lm(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!r5(this.projectionDelta.x,this.prevProjectionDelta.x)||!r5(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yh(),this.projectionDelta=yh(),this.projectionDeltaWithTransform=yh()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=yh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=qn(),m=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=m!==b,w=this.getStack(),S=!w||w.members.length<=1,T=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(Jve));this.animationProgress=0;let I;this.mixTargetDelta=R=>{const O=R/1e3;o5(h.x,s.x,O),o5(h.y,s.y,O),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Zve(this.relativeTarget,this.relativeTargetOrigin,g,O),I&&zve(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=qn()),Ca(I,this.relativeTarget)),x&&(this.animationValues=f,Dve(f,u,this.latestValues,O,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Kc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_n.update(()=>{Fx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ep(0)),this.currentAnimation=Ave(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Bve),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&HH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||qn();const h=hi(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=hi(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}Ca(o,c),vh(o,f),Lm(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Lve),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&TA("z",s,u,this.animationValues);for(let f=0;f<EA.length;f++)TA(`rotate${EA[f]}`,s,u,this.animationValues),TA(`skew${EA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Bx(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Bx(o?.pointerEvents)||""),this.hasProjected&&!$u(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Vve(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:m}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${m.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in wv){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=wv[b],T=h==="none"?f[b]:x(f[b],u);if(w){const I=w.length;for(let R=0;R<I;R++)s[w[R]]=T}else S?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=u===this?Bx(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(i5),this.root.sharedNodes.clear()}}}function Uve(t){t.updateLayout()}function $ve(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Ra(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=hi(h);h.min=n[f].min,h.max=h.min+g}):HH(i,e.layoutBox,n)&&Ra(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=hi(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=yh();Lm(s,n,e.layoutBox);const o=yh();a?Lm(o,t.applyTransform(r,!0),e.measuredBox):Lm(o,n,e.layoutBox);const c=!UH(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const m=qn();Vm(m,e.layoutBox,h.layoutBox);const b=qn();Vm(b,n,g.layoutBox),$H(m,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function qve(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Gve(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Hve(t){t.clearSnapshot()}function i5(t){t.clearMeasurements()}function a5(t){t.isLayoutDirty=!1}function Kve(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function s5(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Wve(t){t.resolveTargetDelta()}function Yve(t){t.calcProjection()}function Xve(t){t.resetSkewAndRotation()}function Qve(t){t.removeLeadSnapshot()}function o5(t,e,n){t.translate=kn(e.translate,0,n),t.scale=kn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function l5(t,e,n,r){t.min=kn(e.min,n.min,r),t.max=kn(e.max,n.max,r)}function Zve(t,e,n,r){l5(t.x,e.x,n.x,r),l5(t.y,e.y,n.y,r)}function Jve(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const e0e={duration:.45,ease:[.4,0,.1,1]},c5=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),u5=c5("applewebkit/")&&!c5("chrome/")?Math.round:za;function d5(t){t.min=u5(t.min),t.max=u5(t.max)}function t0e(t){d5(t.x),d5(t.y)}function HH(t,e,n){return t==="position"||t==="preserve-aspect"&&!ove(n5(e),n5(n),.2)}function n0e(t){return t!==t.root&&t.scroll?.wasRoot}const r0e=GH({attachResizeListener:(t,e)=>_v(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),AA={current:void 0},KH=GH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!AA.current){const t=new r0e({});t.mount(window),t.setOptions({layoutScroll:!0}),AA.current=t}return AA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),i0e={pan:{Feature:_ve},drag:{Feature:wve,ProjectionNode:KH,MeasureLayout:VH}};function f5(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&_n.postRender(()=>a(e,b0(e)))}class a0e extends su{mount(){const{current:e}=this.node;e&&(this.unmount=Ige(e,(n,r)=>(f5(this.node,r,"Start"),i=>f5(this.node,i,"End"))))}unmount(){}}class s0e extends su{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=m0(_v(this.node.current,"focus",()=>this.onFocus()),_v(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function h5(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&_n.postRender(()=>a(e,b0(e)))}class o0e extends su{mount(){const{current:e}=this.node;e&&(this.unmount=Oge(e,(n,r)=>(h5(this.node,r,"Start"),(i,{success:a})=>h5(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Lk=new WeakMap,CA=new WeakMap,l0e=t=>{const e=Lk.get(t.target);e&&e(t)},c0e=t=>{t.forEach(l0e)};function u0e({root:t,...e}){const n=t||document;CA.has(n)||CA.set(n,{});const r=CA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(c0e,{root:t,...e})),r[i]}function d0e(t,e,n){const r=u0e(e);return Lk.set(t,n),r.observe(t),()=>{Lk.delete(t),r.unobserve(t)}}const f0e={some:0,all:1};class h0e extends su{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:f0e[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return d0e(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(p0e(e,n))&&this.startObserver()}unmount(){}}function p0e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const g0e={inView:{Feature:h0e},tap:{Feature:o0e},focus:{Feature:s0e},hover:{Feature:a0e}},m0e={layout:{ProjectionNode:KH,MeasureLayout:VH}},v0e={...tve,...g0e,...i0e,...m0e},Vn=bme(v0e,Ome);function y0e(t){t.values.forEach(e=>e.stop())}function Vk(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&yR(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{Vk(a,e)})})}function b0e(t,e){if(Array.isArray(e))return Vk(t,e);if(typeof e=="string")return Vk(t,[e]);yR(t,e)}function x0e(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(DH(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{b0e(r,n)})},stop(){t.forEach(n=>{y0e(n)})},mount(){return()=>{e.stop()}}};return e}function w0e(){const t=__(x0e);return FO(t.mount,[]),t}const _0e=w0e,Wd=OD((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),S0e=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=Wd(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return y.jsx(ha,{children:n&&y.jsx(Vn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:y.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[y.jsx("div",{className:"flex items-center flex-1 min-w-0",children:y.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),y.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&y.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[y.jsx(nce,{size:12,className:"inline mr-1"}),"Undo"]}),y.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:y.jsx(X1,{size:14})})]})]})})})};class Yi extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){H.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:y.jsx(kh,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[y.jsx(zh,{className:"h-4 w-4"}),"Try Again"]}),y.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[y.jsx(Ele,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const E0e=({onAddTransaction:t})=>{const e=Ka(),n=Cs(),[r,i]=A.useState(!1),a=A.useRef(null),s=u=>n.pathname===u;A.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:y.jsx(C8,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:y.jsx(sw,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:y.jsx(Qoe,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return y.jsxs("button",{onClick:m=>{m.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[y.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),y.jsx("span",{className:"sr-only",children:h}),g&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return y.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:y.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[y.jsx(c,{path:"/",label:"Budget",icon:y.jsx(Y1,{className:"w-6 h-6"})}),y.jsx(c,{path:"/transactions",label:"Transactions",icon:y.jsx(Ale,{className:"w-6 h-6"})}),y.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),y.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:y.jsx(t0,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),y.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),y.jsxs("div",{className:"relative",ref:a,children:[y.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[y.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:y.jsx(hle,{className:"w-6 h-6"})}),y.jsx("span",{className:"sr-only",children:"More"}),r&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&y.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:y.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>y.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[y.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),y.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),y.jsx(c,{path:"/settings",label:"Settings",icon:y.jsx(Gle,{className:"w-6 h-6"})})]})})};function T0e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function A0e(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function il(t,e){return function(n){n&&(t[e]=n)}}function WH(t,e,n){return function(r){r&&(t[e][n]=r)}}function p5(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function C0e(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var I0e="function",k0e="object",P0e="string",D0e="number",xR="undefined",YH=typeof window!==xR,O0e=typeof document!==xR&&document,R0e=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ar=1e-7,Vb={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function N0e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Ow(t,e,n,r){return(t*r+e*n)/(n+r)}function C_(t){return typeof t===xR}function _s(t){return t&&typeof t===k0e}function cr(t){return Array.isArray(t)}function Mi(t){return typeof t===P0e}function np(t){return typeof t===D0e}function wR(t){return typeof t===I0e}function M0e(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function XH(t,e,n,r,i){var a=_R(t,e,n);return a?n:j0e(t,e,n+1,r,i)}function _R(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function j0e(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!_R(t,e,u))return{value:u};var h=u,g=ji(i,function(m){var b=m.open;return b===f});if(g&&(h=XH(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function SR(t,e){var n=Mi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?R0e:u,h=f.map(function(k){var P=k.open,N=k.close;return P===N?P:P+"|"+N}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",m=new RegExp(g,"g"),b=t.split(m).filter(function(k){return k&&k!=="undefined"}),x=b.length,w=[],S=[];function T(){return S.length?(w.push(S.join("")),S=[],!0):!1}for(var I=function(k){var P=b[k].trim(),N=k,z=ji(f,function(j){var W=j.open;return W===P}),L=ji(f,function(j){var W=j.close;return W===P});if(z){if(N=XH(z,b,k,x,f),N!==-1&&c)return T()&&a||(w.push(b.slice(k,N+1).join("")),k=N,a)?(R=k,"break"):(R=k,"continue")}else if(L&&!_R(L,b,k)){var B=N0e(f);return B.splice(f.indexOf(L),1),{value:SR(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:B})}}else if(M0e(P,i)&&!s)return T(),a?(R=k,"break"):(R=k,"continue");N===-1&&(N=x-1),S.push(b.slice(k,N+1).join("")),k=N,R=k},R,O=0;O<x;++O){var D=I(O);if(O=R,typeof D=="object")return D.value;if(D==="break")break}return S.length&&w.push(S.join("")),w}function Yc(t){return SR(t,"")}function sd(t){return SR(t,",")}function QH(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function x0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function z0e(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function Ux(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Sv(){return Date.now?Date.now():new Date().getTime()}function yl(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function ji(t,e,n){var r=yl(t,e);return r>-1?t[r]:n}var ZH=(function(){var t=Sv(),e=YH&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Sv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),L0e=(function(){var t=YH&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function bl(t){return Object.keys(t)}function V0e(t){var e=bl(t);return e.map(function(n){return t[n]})}function Jt(t,e){var n=x0(t),r=n.value,i=n.unit;if(_s(e)){var a=e[i];if(a){if(wR(a))return a(r);if(Vb[i])return Vb[i](r,a)}}else if(i==="%")return r*e/100;return Vb[i]?Vb[i](r):r}function Bk(t,e,n){return Math.max(e,Math.min(t,n))}function g5(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[ot(e[0],ar),ot(e[0]/r,ar)],[ot(e[1]*r,ar),ot(e[1],ar)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=ot(o,ar);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function JH(t,e,n,r){if(!r)return t.map(function(m,b){return Bk(m,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=g5(t,e,!1,s),c=o[0],u=o[1],f=g5(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function B0e(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Fk(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Kn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function F0e(t){return[0,1].map(function(e){return Fk(t.map(function(n){return n[e]}))})}function m5(t){var e=F0e(t),n=Kn(e,t[0]),r=Kn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function al(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ot(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function v5(t,e){return t.forEach(function(n,r){t[r]=ot(t[r],e)}),t}function U0e(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function eK(t){return t.reduce(function(e,n){return e.concat(n)},[])}function tK(t,e){t.indexOf(e)===-1&&t.push(e)}function pr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function nK(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function rK(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Fr(t,e,n,r){t.addEventListener(e,n,r)}function dr(t,e,n,r){t.removeEventListener(e,n,r)}function Rp(t){return t?.ownerDocument||O0e}function ER(t){return Rp(t).documentElement}function ou(t){return Rp(t).body}function Bc(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function iK(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Np(t){return _s(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var $0e=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),q0e=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),G0e=typeof Map=="function",H0e=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function K0e(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new H0e;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var W0e=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=K0e(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function w0(t,e,n){var r=G0e?Map:n?q0e:$0e,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],m=[],b={},x=[],w=0,S=0;return c.forEach(function(T,I){f.set(T,I)}),u.forEach(function(T,I){h.set(T,I)}),c.forEach(function(T,I){var R=h.get(T);typeof R>"u"?(++S,s.push(I)):b[R]=S}),u.forEach(function(T,I){var R=f.get(T);typeof R>"u"?(a.push(I),++w):(o.push([R,I]),S=b[I]||0,g.push([R-S,I-w]),m.push(I===R),R!==I&&x.push([R,I]))}),s.reverse(),new W0e(t,e,a,s,x,o,g,m)}var Y0e=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=w0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),Uk=function(t,e){return Uk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Uk(t,e)};function _0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Uk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var no=function(){return no=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},no.apply(this,arguments)};function aK(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function y5(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function b5(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function sK(t){var e=[];return t.forEach(function(n){e=e.concat(cr(n)?sK(n):n)}),e}function IA(t,e){if(!e)return t;for(var n in e)C_(t[n])&&(t[n]=e[n]);return t}function Rw(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function x5(t){var e=t.className,n=aK(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function w5(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function I_(t){if(!t)return null;var e=t.b;return Np(e)?e:I_(t.c)}function oK(t){var e=t.parentNode;e&&e.removeChild(t)}function lK(t){t.forEach(function(e){e()})}function X0e(){return this.constructor(this.props,this.context)}var TR=0,k_=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=V0e(r).filter(function(b){return b.$_req}),f=sK(u.map(function(b){return b.$_subs})),h=ji(f,function(b){return b.d===c});if(o.b&&!Mi(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){S0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var m=o.ps;return Mi(i)||(o.ps=i.props,o.ref=i.ref),AR(this),o.r(n,r,o.b?m:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function cK(){return Object.__CROACT_CURRENT_INSTNACE__}function Q0e(){return TR}function Z0e(t){TR=t}function AR(t){return Object.__CROACT_CURRENT_INSTNACE__=t,TR=0,t}var CR=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=no(no({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=S0(a.c,[a],[a.o],i,a._cs,no(no({},this.state),this.$_state),r);s&&(n&&i.push(n),lK(i),AR(null))},t})(),uK=(function(t){_0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return Rw(this.props,r)||Rw(this.state,i)},e})(CR);function dK(t){var e=function(n){e.current=n};return e.current=t,e}function J0e(t){return t._fr=!0,t}function eye(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new CR(e,n),a.constructor=t,t._fr?(r.fr=dK(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=X0e),a.$_p=r,a}var tye=(function(t){_0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,IA(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(IA(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=IA(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,m=c.b,b=g?.get(c);c._cs=i,h?(m=eye(u,f,b,c),c.b=m):(m.props=f,m.context=b);var x=m.state;c._usefs=[],c._uefs=[];var w=m.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var S=no(no({},i),m.$_cs);S0(c,c._ps,w?[w]:[],r,S),h?c._uefs.push(function(){g?.register(c),m.componentDidMount()}):c._uefs.push(function(){m.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(k_);function nye(t,e,n){var r=IR(x5(t),x5(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function rye(t,e,n){var r=IR(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function IR(t,e){var n=bl(t),r=bl(e),i=w0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function iye(t,e,n){var r=n.style,i=IR(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=Ux(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=Ux(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=Ux(c,"-");r.removeProperty(h)}}function aye(t){return t.replace(/^on/g,"").toLowerCase()}var sye=(function(t){_0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=aye(r);i?(dr(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},Fr(o,c,s[r]))},n.s=function(r){return Rw(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=I_(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],m=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=Rp(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",m):g=b.createElement(m)}o.b=g}S0(o,o._ps,u.children,r,i);var x=o.b,w=w5(a),S=w[0],T=w[1],I=w5(u),R=I[0],O=I[1];return nye(S,R,x),rye(T,O,o),iye(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)dr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||oK(a)},e})(k_);function Ev(t){if(!t||Np(t))return t;var e=t.$_p._ps;return e.length?Ev(e[0].b):null}function fK(t){if(t){if(t.b&&Np(t.b))return t;var e=t._ps;return e.length?fK(e[0]):null}}function ys(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=aK(i,["key","ref"]);return{type:t,key:a,ref:s,props:no(no({},o),{children:eK(n).filter(function(c){return c!=null&&c!==!1})})}}var hK=(function(t){_0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(k_),oye=(function(t){_0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=I_(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||Rp(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){oK(this.b)},e})(k_);function lye(t,e,n){var r=n.map(function(c){return Mi(c)?null:c.key}),i=b5(e.map(function(c){return c.k})),a=b5(r),s=w0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=Ev(h.b),m=Ev(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,m)}),s.added.forEach(function(c){e.splice(c,0,_5(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=Mi(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,_5(f,r[u],u,t)),!0):(h.i=u,!1)});return y5(y5([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function cye(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Ev(n[i].b);if(a)return a}return null}function _5(t,e,n,r){var i=r.d+1;if(Mi(t)||np(t))return new oye("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?sye:tye;return new s(a,i,e,n,r,t.ref,t.props)}function S0(t,e,n,r,i,a,s){var o=lye(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=fK(h);g&&(g._sel=!0)}),t._hyd=null;var f=I_(t);return f&&o.reverse().forEach(function(h){var g=e[h],m=Ev(g.b);if(m&&f!==m&&!m.parentNode){var b=cye(t,g);f.insertBefore(m,b)}}),u.length>0}function uye(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new hK(e));var a=[];return S0(n,n._ps,t?[t]:[],a,r,void 0,void 0),lK(a),AR(null),i||(e.__CROACT__=n),n}function S5(t,e,n){return!n&&t&&(n=new hK(e.parentElement),n._hyd=[e],n._sel=!0),uye(t,e,n),n}function pK(t){var e=cK(),n=e._hs||(e._hs=[]),r=Q0e(),i=n[r];if(Z0e(r+1),i){if(!Rw(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function dye(t,e){var n=pK({func:t,deps:e});return n.value}function fye(t){return dye(function(){return dK(t)},[])}function gK(t,e,n){var r=cK(),i=pK({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function hye(t,e,n){gK(function(){t?.(e())},n,!0)}function kR(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function mK(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function vK(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function PR(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function pye(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function gye(t,e){var n=PR("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function $k(t){return t.replace(/_/g,".")}function ym(t,e){var n=null,r="-1";return kR(t,function(i){var a=PR("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=gye(i.versionTest.toLowerCase(),e)||r),r=$k(r),!0)}),{preset:n,version:r}}function Bb(t,e){var n={brand:"",version:"-1"};return kR(t,function(r){var i=yK(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function yK(t,e){return mK(t,function(n){var r=n.brand;return PR(""+e.test,r.toLowerCase())})}var bK=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],xK=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],qk=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],wK=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],_K=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function SK(t){return!!ym(wK,t).preset}function mye(t){var e=vK(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:SK(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=ym(bK,e),s=a.preset,o=a.version,c=ym(_K,e),u=c.preset,f=c.version,h=ym(xK,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=ym(qk,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function vye(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Bb(wK,n).brand||SK(vK())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&kR(qk,function(g){return yK(n,g)});var c=Bb(xK,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=Bb(qk,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=mK(_K,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=Bb(bK,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=$k(o.version),s.version=$k(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function yye(t){return pye()?vye():mye(t)}function bye(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function xye(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function wye(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function EK(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function yo(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=fn(e),i=0;i<e;++i){var a=e*i+i;if(!ot(n[a],ar)){for(var s=i+1;s<e;++s)if(n[e*i+s]){xye(n,r,i,s,e);break}}if(!ot(n[a],ar))return[];wye(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!ot(u,ar)||i===s||bye(n,r,o,i,e,-u)}}return r}function _ye(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function TK(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Sye(t,e){for(var n=fn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Dd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Ss(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=fn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function Nw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=fn(t);return e.forEach(function(i){r=tn(r,i,t)}),r}function tn(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Pt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Je(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Eye(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function AK(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function ii(t,e,n){n===void 0&&(n=e.length);var r=tn(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function Tye(t,e){return tn(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Aye(t,e){return tn(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Cye(t,e){return tn(t,T0(e,4))}function Fb(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return tn(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function E0(t,e){return ii(T0(e,3),Dd(t,3))}function kA(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return tn(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function E5(t,e){return tn(t,e,4)}function T0(t,e){var n=Math.cos(t),r=Math.sin(t),i=fn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function fn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function DR(t,e){for(var n=fn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Od(t,e){for(var n=fn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function OR(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],m=n[1],b=r[0],x=r[1],w=i[0],S=i[1],T=a[0],I=a[1],R=s[0],O=s[1],D=o[0],k=o[1],P=[c,0,f,0,g,0,b,0,u,0,h,0,m,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,m,0,x,0,1,0,1,0,1,0,1,-w*c,-S*c,-T*f,-I*f,-R*g,-O*g,-D*b,-k*b,-w*u,-S*u,-T*h,-I*h,-R*m,-O*m,-D*x,-k*x],N=yo(P,8);if(!N.length)return[];var z=tn(N,[w,S,T,I,R,O,D,k],8);return z[8]=1,Ss(_ye(z),3,4)}var Bm=function(){return Bm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bm.apply(this,arguments)};function Iye(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Tv(t,e){return e===void 0&&(e=0),uh(rp(t,e))}function kye(t,e){var n=ii(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function uh(t){var e=Iye();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function rp(t,e){e===void 0&&(e=0);var n=cr(t)?t:Yc(t);return n.map(function(r){var i=QH(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=_s(e)?Bm(Bm({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=sd(s).map(function(j,W){return W===0&&"x%"in f?f["%"]=e["x%"]:W===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],Jt(j,f)}),g=h[0],m=h[1],b=m===void 0?0:m,x=h[2],w=x===void 0?0:x;o=kA,u=[g,b,w]}else if(a==="translateY"){var S=_s(e)?Bm({"%":e["y%"]},e):{"%":e},b=Jt(s,S);o=kA,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=kA,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=sd(s).map(function(j){return parseFloat(j)}),I=T[0],R=T[1],O=R===void 0?I:R,D=T[2],k=D===void 0?1:D;o=Fb,u=[I,O,k]}else if(a==="scaleX"){var I=parseFloat(s);o=Fb,u=[I,1,1]}else if(a==="scaleY"){var O=parseFloat(s);o=Fb,u=[1,O,1]}else if(a==="scaleZ"){var k=parseFloat(s);o=Fb,u=[1,1,k]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var P=x0(s),N=P.unit,z=P.value,L=N==="rad"?z:z*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=Cye):a==="rotateX"?o=Tye:a==="rotateY"&&(o=Aye),u=L}else if(a==="matrix3d")o=E5,u=sd(s).map(function(j){return parseFloat(j)});else if(a==="matrix"){var B=sd(s).map(function(j){return parseFloat(j)});o=E5,u=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var Gk=function(t,e){return Gk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Gk(t,e)};function Pye(t,e){Gk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var CK=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),IK=(function(t){Pye(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,CK)||this}return e})(Y0e);function Dye(t,e){return w0(t,e,CK)}var Hk=function(){return Hk=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hk.apply(this,arguments)};function Oye(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var P_=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(_s(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(_s(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=yl(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,Oye(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(Hk({listener:r},i))},t})();var Kk=function(t,e){return Kk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Kk(t,e)};function Rye(t,e){Kk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bh=function(){return bh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bh.apply(this,arguments)};function Nye(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function T5(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Ub(t){if(t){if(Mi(t))return document.querySelector(t)}else return null;if(wR(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Mye=(function(t){Rye(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=Ub(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(bh(bh({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),m=g[0]-s[0],b=g[1]-s[1],x=o||[m?Math.abs(m)/m:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!m&&!b?!1:(this.emit("move",{offsetX:x[0]?m:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?Nye:s;return o({container:Ub(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=Sv(),m=Math.max(c+this._prevTime-g,0);if(m>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},m),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:Ub(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(bh(bh({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?T5:i,s=Ub(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=T5(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(P_);function jye(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Ci(t){return ot(t,ar)}function zye(t,e){return t.every(function(n,r){return Ci(n-e[r])===0})}function Lye(t,e){return!Ci(t[0]-e[0])&&!Ci(t[1]-e[1])}function kK(t){return t.length<3?0:Math.abs(B0e(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function A5(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Rd(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(m){return[i+(m[0]-o)*h,a+(m[1]-c)*g]})}function Rd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Wk(t,e,n){var r=t[0],i=t[1],a=Rd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=Mw(c[0],c[1]),f=Yk(e),h=[];if(f.forEach(function(b){var x=Mw(b[0],b[1]),w=b[0];if(zye(u,x))h.push({pos:t,line:b,type:"line"});else{var S=PK(RR(u,x),[c,b]);S.forEach(function(T){b.some(function(I){return Lye(I,T)})?h.push({pos:T,line:b,type:"point"}):Ci(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),ji(h,function(b){return b[0]===r}))return!0;var g=0,m={};return h.forEach(function(b){var x=b.pos,w=b.type,S=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=ji(S,function(O){return O[1]!==i}),I=m[x[0]],R=T[1]>i?1:-1;I?I!==R&&++g:m[x[0]]=R}}}),g%2===1}function Mw(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<ar&&(s=0),Math.abs(o)<ar&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function RR(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var m=-i/n,b=-o/a;return m!==b?[]:[[m,-1/0],[m,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(S){return[S[0],S[1]]})}function PK(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Ci(a-t[1][0])){if(!Ci(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(Ci(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(Ci(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],m=h[1];return n.every(function(b){return 0<=Ci(g-b[0][0])&&0<=Ci(b[0][1]-g)&&0<=Ci(m-b[1][0])&&0<=Ci(b[1][1]-m)})})),r.map(function(h){return[Ci(h[0]),Ci(h[1])]})}function Yk(t){return jye(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Vye(t,e){var n=t.slice(),r=e.slice();m5(n)===-1&&n.reverse(),m5(r)===-1&&r.reverse();var i=Yk(n),a=Yk(r),s=i.map(function(f){return Mw(f[0],f[1])}),o=a.map(function(f){return Mw(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],m=[];o.forEach(function(b,x){var w=RR(f,b),S=PK(w,[g,a[x]]);m.push.apply(m,S.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),m.sort(function(b,x){return al(g[0],b.pos)-al(g[0],x.pos)}),c.push.apply(c,m),Wk(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(Wk(f[1],n)){var g=!1,m=yl(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});m===-1&&(g=!1,m=yl(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),m===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(m,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function Bye(t,e){var n=Vye(t,e);return n.map(function(r){var i=r.pos;return i})}function Fye(t,e){var n=Bye(t,e);return kK(n)}var Xk=function(t,e){return Xk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Xk(t,e)};function Uye(t,e){Xk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var tr=function(){return tr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tr.apply(this,arguments)};function $ye(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function PA(t){return $ye([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function qye(t){return t.touches&&t.touches.length>=2}function $b(t){return t?t.touches?Hye(t.touches):[DK(t)]:[]}function Gye(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function C5(t,e,n){var r=n.length,i=Fm(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=Fm(e,r),f=u.clientX,h=u.clientY,g=Fm(n,r),m=g.clientX,b=g.clientY,x=a-f,w=s-h,S=a-m,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:S,distY:T}}function DA(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Hye(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(DK(t[r]));return n}function DK(t){return{clientX:t.clientX,clientY:t.clientY}}function Fm(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var OA=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),PA(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),PA(e)-PA(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=C5(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=C5([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=Fm(e,this.length),i=Fm(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),DA(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),DA(e)/DA(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),I5=["textarea","input"],Kye=(function(t){Uye(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,m){if(m===void 0&&(m=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,S=x.pinchOutside,T=x.preventWheelClick,I=x.preventRightClick,R=x.preventDefault,O=x.checkInput,D=x.dragFocusedInput,k=x.preventClickEventOnDragStart,P=x.preventClickEventOnDrag,N=x.preventClickEventByCondition,z=i._useTouch,L=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||I&&(g.which===3||g.button===2))return i.stop(),!1;if(L){var B=i._window.document.activeElement,j=g.target;if(j){var W=j.tagName.toLowerCase(),Q=I5.indexOf(W)>-1,q=j.isContentEditable;if(Q||q){if(O||!D&&B===j)return!1;if(B&&(B===j||q&&B.isContentEditable&&B.contains(j)))if(D)j.blur();else return!1}else if((R||g.type==="touchstart")&&B){var Y=B.tagName.toLowerCase();(B.isContentEditable||I5.indexOf(Y)>-1)&&B.blur()}(k||P||N)&&Fr(i._window,"click",i._onClick,!0)}i.clientStores=[new OA($b(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=m,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=Sv()-i.prevTime<200,i._isMouseEvent=Gye(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var Z=i._preventMouseEvent||i.emit("dragStart",tr(tr({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:m,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));Z===!1&&i.stop(),i._isMouseEvent&&i.flag&&R&&g.preventDefault()}if(!i.flag)return!1;var ie=0;if(L?(i._attchDragEvent(),z&&S&&(ie=setTimeout(function(){Fr(w,"touchstart",i.onDragStart,{passive:!1})}))):z&&S&&dr(w,"touchstart",i.onDragStart),i.flag&&qye(g)){if(clearTimeout(ie),L&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,m){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=$b(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var S=i._preventMouseEvent||i.emit("drag",tr(tr({},w),{isScroll:!!m,inputEvent:g}));if(S===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var m=i.options,b=m.pinchOutside,x=m.container,w=m.preventClickEventOnDrag,S=m.preventClickEventOnDragStart,T=m.preventClickEventByCondition,I=i.isDrag;(w||S||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!S&&w&&!I&&i._allowClickEvent(),i._useTouch&&b&&dr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var R=g?.touches?$b(g):[],O=R.length;O===0||!i.options.keepDragging?i.flag=!1:i._addStore(new OA(R));var D=i._getPosition(),k=Sv(),P=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||P?0:k,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",tr({data:i.data,datas:i.data,isDouble:P,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},D)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){dr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var m=i.options.preventClickEventByCondition;m?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var m=i.options;m.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=iK(s)?s:Bc(s),i.options=tr({checkInput:!1,container:s&&!("document"in s)?Bc(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Fr(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Fr(g,"mousedown",i.onDragStart),Fr(g,"mousemove",i._passCallback)}),Fr(c,"contextmenu",i._onContextMenu)),f&&Fr(Bc(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Fr(g,"touchstart",i.onDragStart,h),Fr(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),tr(tr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),dr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){dr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){dr(a,"mousedown",n.onDragStart)}),dr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){dr(a,"touchstart",n.onDragStart)}),dr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new OA($b(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",tr(tr({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",tr(tr({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",tr(tr({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),tr(tr({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return tr(tr({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Fr(r,"dragover",this.onDrag,i),Fr(n,"dragend",this.onDragEnd)),this._useMouse&&(Fr(r,"mousemove",this.onDrag),Fr(n,"mouseup",this.onDragEnd)),this._useTouch&&(Fr(r,"touchmove",this.onDrag,i),Fr(n,"touchend",this.onDragEnd,i),Fr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(dr(r,"dragover",this.onDrag),dr(n,"dragend",this.onDragEnd)),this._useMouse&&(dr(r,"mousemove",this.onDrag),dr(n,"mouseup",this.onDragEnd)),this._useTouch&&(dr(r,"touchstart",this.onDragStart),dr(r,"touchmove",this.onDrag),dr(n,"touchend",this.onDragEnd),dr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(P_);function Wye(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Yye=Wye;function Xye(t){return Yye(t).toString(36)}function Qye(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Zye(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?sd(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function Jye(t,e,n,r,i){var a=Rp(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Zye(t,e,n),(i||a.head||a.body).appendChild(s),s}function ebe(t){var e="rCS"+Xye(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=Qye(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=Jye(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var Qk=function(){return Qk=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qk.apply(this,arguments)};function tbe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OK(t,e){var n=ebe(e),r=n.className;return J0e(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=tbe(i,["className","cspNonce"]),u=fye();return hye(a,function(){return u.current},[]),gK(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),ys(t,Qk({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var Zk=function(t,e){return Zk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Zk(t,e)};function A0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var se=function(){return se=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},se.apply(this,arguments)};function nbe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rbe(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function ibe(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Re(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function C0(t,e){return se({events:[],props:[],name:t},e)}var abe=["n","w","s","e"],NR=["n","w","s","e","nw","ne","sw","se"];function sbe(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function obe(t){var e=sbe(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Mp=yye(),RK=Mp.browser.webkit,NK=RK&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),MK=Mp.browser.name,jK=parseInt(Mp.browser.version,10),lbe=MK==="chrome",cbe=Mp.browser.chromium,ube=parseInt(Mp.browser.chromiumVersion,10)||0,dbe=lbe&&jK>=109||cbe&&ube>=109,fbe=MK==="firefox",hbe=parseInt(Mp.browser.webkitVersion,10)>=612||jK>=15,MR="moveable-",pbe=NR.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),gbe=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(pbe,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(obe(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(NK?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),mbe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Jk=1e-4,vi=1e-7,qb=1e-9,eP=Math.pow(10,10),k5=-eP,vbe={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},jR={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},zK={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},LK=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function I0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return se(se({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var ip=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),se(se({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Oh(t,e,n,r){var i=t.length===16,a=i?4:3,s=Xd(t,n,r,a),o=le(s,4),c=le(o[0],2),u=c[0],f=c[1],h=le(o[1],2),g=h[0],m=h[1],b=le(o[2],2),x=b[0],w=b[1],S=le(o[3],2),T=S[0],I=S[1],R=le(Cn(t,e,a),2),O=R[0],D=R[1],k=Math.min(u,g,x,T),P=Math.min(f,m,w,I),N=Math.max(u,g,x,T),z=Math.max(f,m,w,I);u=u-k||0,g=g-k||0,x=x-k||0,T=T-k||0,f=f-P||0,m=m-P||0,w=w-P||0,I=I-P||0,O=O-k||0,D=D-P||0;var L=t[0],B=t[a+1],j=di(L*B);return{left:k,top:P,right:N,bottom:z,origin:[O,D],pos1:[u,f],pos2:[g,m],pos3:[x,w],pos4:[T,I],direction:j}}function VK(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,m=le(Je(op(o,[n-f,r-h],g),u),2),b=m[0],x=m[1],w=le(So({datas:i,distX:b,distY:x}),2),S=w[0],T=w[1];return[S,T]}function Yd(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,m=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=yo(i,m),n.inverseBeforeMatrix=yo(a,m),n.absoluteOrigin=Dd(Pt([o,c],u),m),n.startDragBeforeDist=ii(n.inverseBeforeMatrix,n.absoluteOrigin,m),n.startDragDist=ii(n.inverseMatrix,n.absoluteOrigin,m)}function ybe(t){return Oh(t.datas.beforeTransform,[50,50],100,100).direction}function D_(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=yl(s,function(m){return m.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):ji(c,function(m){return m.index===a&&m.functionName===n})?u=a:u=a+c.filter(function(m){return m.index<a}).length;var f=qxe(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Re(Re([],le(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function O_(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function bbe(t){var e=t.datas,n=t.distX,r=t.distY,i=le(FK({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=BK(e,Sye([a,s],4));return ii(o,Dd([0,0,0],4),4)}function BK(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?tn(o,e,4):tn(e,o,4),u=tn(yo(n?a:r,4),c,4),f=tn(u,yo(n?s:i,4),4);return f}function FK(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return Je(ii(i,Pt(o,[n,r]),c),s)}function So(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return Je(ii(e?a:s,Pt(f,[r,i]),h),e?c:u)}function xbe(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return Je(ii(a,Pt(o,[r,i]),u),c)}function wbe(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=x0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var m=h?a[o]/h:0;return g*m}else if(f!=="%")return u;return g*u/100}):a}function UK(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function _be(t,e){return UK(e).map(function(n){return t[n]})}function RA(t,e){var n=(e+1)/2;return[Ow(t[0][0],t[1][0],n,1-n),Ow(t[0][1],t[1][1],n,1-n)]}function gr(t,e){var n=RA([t[0],t[1]],e[0]),r=RA([t[2],t[3]],e[0]);return RA([n,r],e[1])}function Sbe(t,e,n,r,i,a){var s=Xd(e,n,r,i),o=gr(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function k0(t,e,n,r){return tn(t,$m(e,r,n),r)}function Ebe(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(Mi(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=Ss(Tv(n),4,o):c=Ss(tn(tn(u,Tv([n]),4),f,4),4,o)}else c=n;return k0(a,c,i,o)}function Tbe(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return k0(r,tn(s||a,DR(e,o),o),n,o)}function R_(t,e){var n=jp(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=cr(r)?r:Yc(r),tP(t,e,i)},setTransformIndex:function(r){tP(t,e,r)}}}function N_(t,e,n){var r=jp(e),i=r.startTransforms;tP(t,e,yl(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function tP(t,e,n){var r=jp(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=rp([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function zR(t,e){var n=jp(t);n.nextTransforms=Yc(e)}function jp(t){return t.originalDatas.beforeRenderable}function jw(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Gb(t){return(jw(t)||[]).join(" ")}function Hb(t){return jp(t).nextStyle}function $K(t,e,n,r,i){zR(i,e);var a=ui.drag(t,I0(i,t.state,n,r)),s=a?a.transform:e;return se(se({transform:e,drag:a},pi({transform:s},i)),{afterTransform:s})}function LR(t,e,n,r,i,a){var s=Ebe(t.state,i,e,a),o=Ibe(t,n,r,s);return o}function qK(t,e,n,r,i,a,s){var o=LR(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,m=h?f:0,b=Je(r,o);return Je(b,[g,m])}function Abe(t,e,n,r,i,a,s){var o=qK(t,e,n,r,i,a,s);return o}function Cbe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function Ibe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return Cn(r,u,c)}function kbe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return qK(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function Pbe(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,m=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,S=f?4:3,T=wbe(i,e,n,h,g,c),I=s?m:0,R=s?b:0,O=k0(u,w,T,S),D=Sbe(r,O,e,n,S,x);return Je(D,[I,R])}function Dbe(t,e){return gr(Fa(t.state),e)}function Obe(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function Rbe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Nbe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function GK(t,e,n){for(var r=t,i=[],a=ER(t)||ou(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,m=!1,b=Cv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=zi(r),S=w("position"),T=gW(r),I=S==="fixed",R=Nbe(w),O=Eye(Dxe(T)),D=void 0,k=!1,P=!1,N=0,z=0,L=0,B=0,j={hasTransform:!1,fixedContainer:null};I&&(m=!0,j=jxe(r),b=j.fixedContainer);var W=O.length;!c&&(W===16||R.length)&&(c=!0,u=4,oP(i),g&&(g=Ss(g,3,4))),c&&W===9&&(O=Ss(O,3,4));var Q=Mxe(r,t),q=Q.tagName,Y=Q.hasOffset,Z=Q.isSVG,ie=Q.origin,J=Q.targetOrigin,U=Q.offset,X=le(U,2),te=X[0],K=X[1];q==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:zxe(r,u)}),i.push({type:"offset",target:r,matrix:fn(u)}));var ce=parseFloat(w("zoom"))||1;if(I)D=j.fixedContainer,k=!0;else{var ae=Cv(r,e,!1,!0,w),oe=ae.offsetZoom;if(D=ae.offsetParent,k=ae.isEnd,P=ae.isStatic,x*=oe,(ae.isCustomElement||oe!==1)&&P)te-=D.offsetLeft,K-=D.offsetTop;else if(fbe||dbe){var he=ae.parentSlotElement;if(he){for(var ne=D,_e=0,fe=0;ne&&Rbe(ne);)_e+=ne.offsetLeft,fe+=ne.offsetTop,ne=ne.offsetParent;te-=_e,K-=fe}}}if(RK&&!hbe&&Y&&!Z&&P&&(S==="relative"||S==="static")&&(te-=D.offsetLeft,K-=D.offsetTop,s=s||k),I)Y&&j.hasTransform&&(L=D.clientLeft,B=D.clientTop);else if(Y&&b!==D&&(N=D.clientLeft,z=D.clientTop),Y&&D===a){var ee=mW(r,!1);te+=ee[0],K+=ee[1]}if(i.push({type:"target",target:r,matrix:$m(O,u,ie)}),R.length&&(i.push({type:"offset",target:r,matrix:fn(u)}),i.push({type:"target",target:r,matrix:$m(Tv(R),u,ie)})),Y){var Ce=r===t,Pe=Ce?0:r.scrollLeft,ze=Ce?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Od([te-Pe+N-L,K-ze+z-B],u)})}else i.push({type:"offset",target:r,origin:ie});if(ce!==1&&i.push({type:"zoom",target:r,matrix:$m(DR([ce,ce],u),u,[0,0])}),g||(g=O),f||(f=ie),h||(h=J),o||I)break;r=D,s=k,(!n||r===a)&&(o=s)}return g||(g=fn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:m}}var Zu=null,Ju=null,xh=null;function ap(t){t?(window.Map&&(Zu=new Map,Ju=new Map),xh=[]):(Zu=null,xh=null,Ju=null)}function Mbe(t){var e=Ju?.get(t);if(e)return e;var n=qm(t,!0);return Ju&&Ju.set(t,n),n}function jbe(t,e){if(xh){var n=ji(xh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=GK(t,e,!0);return xh&&xh.push([[t,e],r]),r}function zi(t){var e=Zu?.get(t);if(!e){var n=Bc(t).getComputedStyle(t);if(!Zu)return function(a){return n[a]};e={style:n,cached:{}},Zu.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function bs(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},se(se({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function NA(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=bs(t,e.name,i),g=t.moveables,m=[],b=h.map(function(x,w){var S=g[w],T=S.state,I=T.gestos,R=x;if(o)R=new ip(s).dragStart(r,x),m.push(R);else{if(I[s]||(I[s]=f.childGestos[w]),!I[s])return;R=I0(x,T,r,u,a,s),m.push(R)}var O=e[n](S,se(se({},R),{parentFlag:!0}));return c&&(I[s]=null),O});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:m}}function sl(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=bs(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],m=f;m=i(g,f);var b=e[n](g,se(se({},m),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function zw(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||Fa(e.state),o=gr(s,i),c=le(ii(T0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function HK(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Nd(t.props,e).zoom,u=Um(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var m=di(o);return n.map(function(b){var x=b.data,w=b.classNames,S=b.dir,T=jR[S];if(!T||!f[S])return null;g[S]=!0;var I=(ot(u,15)+m*zK[S]+720)%180,R={};return bl(x).forEach(function(O){R["data-".concat(O)]=x[O]}),r.createElement("div",se({className:Xe.apply(void 0,Re(["control","direction",S,e],le(w),!1)),"data-rotation":I,"data-direction":S},R,{key:"direction-".concat(S),style:Fw.apply(void 0,Re([s,c],le(T.map(function(O){return a[O]})),!1))}))})}function KK(t,e,n,r){var i=Nd(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?NR:s;return Re(Re([],le(o?QK(t,r,n,c):[]),!1),le(HK(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Av(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Kn(n,r),u=e?ot(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Xe.apply(void 0,Re(["line","direction",e?"edge":"",e],le(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:xm(n,r,i,c)})}function WK(t,e,n,r,i){var a=n===!0?abe:n;return a.map(function(s,o){var c=le(jR[s],2),u=c[0],f=c[1];if(f!=null)return Av(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function YK(t){return function(e,n){var r=Nd(e.props,t).edge;return r&&(r===!0||r.length)?Re(Re([],le(WK(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),le(zbe(e,t,n)),!1):XK(e,t,n)}}function XK(t,e,n){return KK(t,NR,e,n)}function zbe(t,e,n){return KK(t,["nw","ne","sw","se"],e,n)}function QK(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=di(c),g=o/Math.PI*180;return(r||bl(u)).map(function(m){var b=jR[m];if(!b)return null;var x=(ot(g,15)+h*zK[m]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Xe.apply(void 0,Re([],le(w),!1)),"data-rotation":x,"data-direction":m,key:"direction-around-".concat(m),style:Fw.apply(void 0,Re([o,f],le(b.map(function(S){return s[S]})),!1))})})}function VR(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,m=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:m};return{vertical:P5(b,e,!0),horizontal:P5(b,n,!1)}}function M_(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,m=e||t.props.bounds||{},b=m.position||"client",x=b==="css",w=m.left,S=w===void 0?-1/0:w,T=m.top,I=T===void 0?-1/0:T,R=m.right,O=R===void 0?x?-1/0:1/0:R,D=m.bottom,k=D===void 0?x?-1/0:1/0:D;return x&&(O=a+h-u-O,k=i+g-f-k),{left:S+u-s,right:O+u-s,top:I+f-o,bottom:k+f-o}}function Lbe(t,e,n){var r=M_(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=le(n,2),u=c[0],f=c[1],h=le(Je(n,e),2),g=h[0],m=h[1];ke(g)<vi&&(g=0),ke(m)<vi&&(m=0);var b=m>0,x=g>0,w={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(g===0&&m===0)return{vertical:w,horizontal:S};if(g===0)b?o<f&&(S.pos=o,S.offset=f-o):a>f&&(S.pos=a,S.offset=f-a);else if(m===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var T=m/g,I=n[1]-T*u,R=0,O=0,D=!1;x&&s<=u?(R=T*s+I,O=s,D=!0):!x&&u<=i&&(R=T*i+I,O=i,D=!0),D&&(R<a||R>o)&&(D=!1),D||(b&&o<=f?(R=o,O=(R-I)/T,D=!0):!b&&f<=a&&(R=a,O=(R-I)/T,D=!0)),D&&(w.isBound=!0,w.pos=O,w.offset=u-O,S.isBound=!0,S.pos=R,S.offset=f-R)}return{vertical:w,horizontal:S}}function P5(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return ke(u.offset)-ke(c.offset)})}function D5(t,e,n){var r=n?t.map(function(i){return E0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&ke(i[0]-e.left)>.1||i[0]>e.right&&ke(i[0]-e.right)>.1||i[1]<e.top&&ke(i[1]-e.top)>.1||i[1]>e.bottom&&ke(i[1]-e.bottom)>.1})}function Vbe(t,e,n){var r=Ba(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return ke(a-t[n?0:1])-ke(s-t[n?0:1])}).map(function(a){return Kn([0,0],n?[a,e]:[e,a])})}function Bbe(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=M_(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],m=c-r[1],b=f-r[1],x={left:h,top:m,right:g,bottom:b};if(!D5(n,x,0))return[];var w=[];return[[h,0],[g,0],[m,1],[b,1]].forEach(function(S){var T=le(S,2),I=T[0],R=T[1];n.forEach(function(O){var D=Kn([0,0],O);w.push.apply(w,Re([],le(Vbe(O,I,R).map(function(k){return a+k-D}).filter(function(k){return!D5(e,x,k)}).map(function(k){return ot(k*180/Math.PI,vi)})),!1))})}),w}var Fbe=["left","right","center"],Ube=["top","bottom","middle"],O5={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Xc={start:"left",end:"right",center:"center"},Qc={start:"top",end:"bottom",center:"middle"};function wh(){return{left:!1,top:!1,right:!1,bottom:!1}}function zp(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function BR(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function $be(t,e){var n=BR(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function FR(t,e){var n=$be(t,e),r=Ube.filter(function(a){return a in n}),i=Fbe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function qbe(t,e,n){var r=Cn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function Gbe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<ar&&(i=0),Math.abs(a)<ar&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return ot(u,ar)})}var ZK="snapRotationThreshold",JK="snapRotationDegrees",eW="snapHorizontalThreshold",tW="snapVerticalThreshold";function j_(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=K5(s,c[eW],5),h=K5(a,c[tW],5);return nW(t.state.guidelines,e,n,r,i,f,h,u)}function nW(t,e,n,r,i,a,s,o){return{vertical:N5(t,"vertical",e,s*o[0],r),horizontal:N5(t,"horizontal",n,a*o[1],i)}}function Hbe(t,e,n){var r=le(n,2),i=r[0],a=r[1],s=le(e,2),o=s[0],c=s[1],u=le(Je(n,e),2),f=u[0],h=u[1],g=h>0,m=f>0;f=Uw(f),h=Uw(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=j_(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),S=w.vertical,T=w.horizontal;S.posInfos.filter(function(q){var Y=q.pos;return m?Y>=o:Y<=o}),T.posInfos.filter(function(q){var Y=q.pos;return g?Y>=c:Y<=c}),S.isSnap=S.posInfos.length>0,T.isSnap=T.posInfos.length>0;var I=nP(S),R=I.isSnap,O=I.guideline,D=nP(T),k=D.isSnap,P=D.guideline,N=k?P.pos[1]:0,z=R?O.pos[0]:0;if(f===0)k&&(x.isSnap=!0,x.pos=P.pos[1],x.offset=a-x.pos);else if(h===0)R&&(b.isSnap=!0,b.pos=z,b.offset=i-z);else{var L=h/f,B=n[1]-L*i,j=0,W=0,Q=!1;R?(W=z,j=L*W+B,Q=!0):k&&(j=N,W=(j-B)/L,Q=!0),Q&&(b.isSnap=!0,b.pos=W,b.offset=i-W,x.isSnap=!0,x.pos=j,x.offset=a-j)}return{vertical:b,horizontal:x}}function Dc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function R5(t,e,n,r){var i=FR(t.props.snapDirections,e),a=j_(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Dc(c)}),i.horizontalNames.map(function(c){return Dc(c)}),n,r),s=Dc(i.horizontalNames[a.horizontal.index]),o=Dc(i.verticalNames[a.vertical.index]);return{vertical:se(se({},a.vertical),{direction:o}),horizontal:se(se({},a.horizontal),{direction:s})}}function nP(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function N5(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var m=i[g]||"",b=t.map(function(x){var w=x.pos,S=h-w[c];return{offset:S,dist:ke(S),guideline:x,direction:m}}).filter(function(x){var w=x.guideline,S=x.dist,T=w.type;return!(T!==e||S>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:m}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function Kbe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,m,b){var x=b[m+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Re([],le(_be([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return gr(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=j_(t,o,c,a.map(function(g){return Dc(g[0])}),a.map(function(g){return Dc(g[1])}),r,i),f=Dc(a.map(function(g){return g[0]})[u.vertical.index]),h=Dc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:se(se({},u.vertical),{direction:f}),horizontal:se(se({},u.horizontal),{direction:h})}}function rW(t,e){var n=ke(t.offset),r=ke(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<vi?1:r<vi?-1:n-r}function Lw(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return rW({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function Wbe(t,e,n){var r=[];if(n)ke(e[0])!==1||ke(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=ke(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=ke(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function iW(t,e){var n=Fk([e[0][0],e[1][0]]),r=Fk([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function UR(t,e){var n=le(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];ke(a)<vi&&(a=0),ke(s)<vi&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function aW(t,e,n,r){return r===void 0&&(r=vi),t.every(function(i){var a=UR(i,e),s=a<=0;return s===n||ke(a)<=r})}function M5(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Ybe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],m=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(aW([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=Oc(n,s,m,i),S=Oc(n,s,x,i),T=Oc(n,s,g,a),I=Oc(n,s,b,a),R=w.isBound&&S.isBound,O=w.isBound||S.isBound,D=T.isBound&&I.isBound,k=T.isBound||I.isBound,P=sp(w.offset,S.offset),N=sp(T.offset,I.offset),z=[0,0],L=!1,B=!1;return ke(N)<ke(P)?(z=[P,0],L=O,B=R):(z=[0,N],L=k,B=D),{isAllBound:B,isVerticalBound:O,isHorizontalBound:k,isBound:L,offset:z}}function Oc(t,e,n,r,i,a){var s=le(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=Uw(h[1]-f[1]),m=Uw(h[0]-f[0]),b=c,x=o,w=-o/c;if(m){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var R=(f[1]-u[1])/w+u[0];return M5(R,f[0],h[0],r,i)}else{var T=f[1]-u[1],I=ke(T)<=(i||0);return{isBound:I,offset:I?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var S=w*(f[0]-u[0])+u[1];return M5(S,f[1],h[1],r,i)}else{var T=f[0]-u[0],I=ke(T)<=(i||0);return{isBound:I,offset:I?T:0}}}return{isBound:!1,offset:0}}function sW(t,e,n){return e.map(function(r){var i=Ybe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=So({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function Xbe(t,e,n){var r,i=$R(t,e,[0,0],!1).map(function(g){return se(se({},g),{multiple:g.multiple.map(function(m){return ke(m)*2})})}),a=sW(t,i,n),s=Lw(a,0),o=Lw(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=le(xbe({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function Qbe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function $R(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=Xd(a,100,100,s?4:3),c=gr(o,[0,0]);return Qbe(n,r).map(function(u){var f=le(u,3),h=f[0],g=f[1],m=f[2],b=[gr(o,g),gr(o,m)],x=Gbe(b),w=iW(c,b),S=w.vertical,T=w.horizontal,I=UR(c,b)<=0;return{multiple:h,centerSign:I,verticalSign:S,horizontalSign:T,lineConstants:x,line:[gr(e,g),gr(e,m)]}})}function j5(t,e,n,r){var i=r?t.map(function(a){return E0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=UR(n,a)<=0;return!aW(e,a,s)})}function Zbe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return ke(n[0]);if(!a)return ke(n[1]);var s=a/i;return ke((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function Jbe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function exe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],m=c-r[1],b=c+f-r[1],x=[[h,m],[g,m],[h,b],[g,b]],w=gr(n,[0,0]);if(!j5(n,x,w,0))return[];var S=[],T=x.map(function(I){return[Ba(I),Kn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var R=Kn([0,0],Jbe(I)),O=Zbe(I);S.push.apply(S,Re([],le(T.filter(function(D){var k=le(D,1),P=k[0];return P&&O<=P}).map(function(D){var k=le(D,2),P=k[0],N=k[1],z=Math.acos(P?O/P:0),L=N+z,B=N-z;return[s+L-R,s+B-R]}).reduce(function(D,k){return D.push.apply(D,Re([],le(k),!1)),D},[]).filter(function(D){return!j5(e,x,w,D)}).map(function(D){return ot(D*180/Math.PI,vi)})),!1))}),S}function txe(t){var e=t.props.innerBounds,n=wh();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=gr(c,[0,0]),f=e.left,h=e.top,g=e.width,m=e.height,b=[[f,h],[f,h+m]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+m]],S=[[f,h+m],[f+g,h+m]],T=$R(t,c,[0,0],!1),I=[],R=[];return T.forEach(function(O){var D=O.line,k=O.lineConstants,P=iW(u,D),N=P.horizontal,z=P.vertical,L=Oc(D,k,x,z,1,!0),B=Oc(D,k,S,z,1,!0),j=Oc(D,k,b,N,1,!0),W=Oc(D,k,w,N,1,!0);L.isBound&&!n.top&&(I.push(h),n.top=!0),B.isBound&&!n.bottom&&(I.push(h+m),n.bottom=!0),j.isBound&&!n.left&&(R.push(f),n.left=!0),W.isBound&&!n.right&&(R.push(f+g),n.right=!0)}),{boundMap:n,horizontal:I,vertical:R}}function nxe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(ke(i)<ar&&(i=0),ke(a)<ar&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function rP(t,e,n,r,i){var a=nxe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=al(t,e),o=al(a,t),c=al(a,e),u=o>s||c>s,f=le(So({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function Vw(t,e){return t.isBound?t.offset:e.isSnap?nP(e).offset:0}function rxe(t,e,n,r,i){var a=le(e,2),s=a[0],o=a[1],c=le(n,2),u=c[0],f=c[1],h=le(r,2),g=h[0],m=h[1],b=le(i,2),x=b[0],w=b[1],S=-x,T=-w;if(t&&s&&o){S=0,T=0;var I=[];if(u&&f?I.push([0,w],[x,0]):u?I.push([x,0]):f?I.push([0,w]):g&&m?I.push([0,w],[x,0]):g?I.push([x,0]):m&&I.push([0,w]),I.length){I.sort(function(k,P){return Ba(Je([s,o],k))-Ba(Je([s,o],P))});var R=I[0];if(R[0]&&ke(s)>ar)S=-R[0],T=o*ke(s+S)/ke(s)-o;else if(R[1]&&ke(o)>ar){var O=o;T=-R[1],S=s*ke(o+T)/ke(O)-s}if(t&&f&&u)if(ke(S)>ar&&ke(S)<ke(x)){var D=ke(x)/ke(S);S*=D,T*=D}else if(ke(T)>ar&&ke(T)<ke(w)){var D=ke(w)/ke(T);S*=D,T*=D}else S=sp(-x,S),T=sp(-w,T)}}else S=s||u?-x:0,T=o||f?-w:0;return[S,T]}function ixe(t,e,n,r,i,a){if(!zp(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=HR(a.absolutePoses,[e,n]),o=La(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(W){return W[1]}),vertical:s.map(function(W){return W[0]})},m=BR(t.props.snapDirections),b=FR(m,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=z_(t,i,b,g),w=x.vertical,S=x.horizontal,T=Xbe(t,s,a),I=T.vertical,R=T.horizontal,O=w.isSnap,D=S.isSnap,k=w.isBound||I.isBound,P=S.isBound||R.isBound,N=sp(w.offset,I.offset),z=sp(S.offset,R.offset),L=le(rxe(r,[e,n],[k,P],[O,D],[N,z]),2),B=L[0],j=L[1];return[{isBound:k,isSnap:O,offset:B},{isBound:P,isSnap:D,offset:j}]}function z_(t,e,n,r){r===void 0&&(r=n);var i=VR(M_(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:j_(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=Vw(a[0],c),h=Vw(s[0],u),g=ke(f),m=ke(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:s,snap:u}}}function z5(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=VR(e,n,r),c=o.horizontal,u=o.vertical,f=nW(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,m=Vw(c[0],h),b=Vw(u[0],g),x=ke(m),w=ke(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:m,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function axe(t,e,n,r){var i=Kn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,m=i%180,b=m<3||m>177,x=m>87&&m<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function sxe(t,e,n,r,i,a){return n.map(function(s){var o=le(s,2),c=o[0],u=o[1],f=gr(e,c),h=gr(e,u),g=r?oxe(t,f,h,i):z_(t,i,{vertical:[h[0]],horizontal:[h[1]]}),m=g.horizontal,b=m.offset,x=m.isBound,w=m.isSnap,S=g.vertical,T=S.offset,I=S.isBound,R=S.isSnap,O=Je(u,c);if(!T&&!b)return{isBound:I||x,isSnap:R||w,sign:O,offset:[0,0]};var D=axe(f,h,g,r);if(!D)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var k=D==="vertical",P=[0,0];return!r&&ke(u[0])===1&&ke(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?P=So({datas:a,distX:-T,distY:-b}):P=rP(f,h,-(k?T:b),k,a).offset,P=P.map(function(N,z){return N*(O[z]?2/O[z]:0)}),{sign:O,isBound:k?I:x,isSnap:k?R:w,offset:P}})}function L5(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function oxe(t,e,n,r){var i=Lbe(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Hbe(t,e,n),c=o.horizontal,u=o.vertical,f=L5(a,c),h=L5(s,u),g=ke(f),m=ke(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:m}}}function lxe(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],m=u.left,b=m===void 0?-1/0:m,x=u.top,w=x===void 0?-1/0:x,S=u.right,T=S===void 0?1/0:S,I=u.bottom,R=I===void 0?1/0:I;g.forEach(function(O){var D=O[0]!==a[0],k=O[1]!==a[1],P=gr(e,O),N=Kn(r,P)*360/Math.PI;if(k){var z=P.slice();(ke(N-360)<2||ke(N-180)<2)&&(z[1]=r[1]);var L=rP(r,z,(r[1]<P[1]?R:w)-P[1],!1,i),B=le(L.offset,2),j=B[1],W=L.isOutside;isNaN(j)||(h=c+(W?1:-1)*ke(j))}if(D){var z=P.slice();(ke(N-90)<2||ke(N-270)<2)&&(z[0]=r[0]);var Q=rP(r,z,(r[0]<P[0]?T:b)-P[0],!0,i),q=le(Q.offset,1),Y=q[0],Z=Q.isOutside;isNaN(Y)||(f=o+(Z?1:-1)*ke(Y))}})}return{maxWidth:f,maxHeight:h}}var ui={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=Ba(u),h=Kn(u,[0,0]);return[e.createElement("div",{className:Xe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],Yd(t,e),N_(t,e,"translate"),Cxe(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=ft(t,e,se({set:function(f){n.startValue=f}},R_(t,e))),u=r||Ve(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){D_(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,m=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(m){s&&(h+=s[0],g+=s[1]);var S=t.props,T=S.parentMoveable,I=u?0:S.throttleDrag||f||0,R=r?0:S.throttleDragRotate||0,O=0,D=!1,k=!1,P=!1,N=!1;if(!r&&R>0&&(h||g)){var z=S.startDragRotate||0,L=ot(z+Kn([0,0],[h,g])*180/Math.PI,R)-z,B=g*Math.abs(Math.cos((L-90)/180*Math.PI)),j=h*Math.abs(Math.cos(L/180*Math.PI)),W=Ba([j,B]);O=L*Math.PI/180,h=W*Math.cos(O),g=W*Math.sin(O)}if(!a&&!r&&!i){var Q=le(ixe(t,h,g,R,!o&&c||s,n),2),q=Q[0],Y=Q[1];D=q.isSnap,k=q.isBound,P=Y.isSnap,N=Y.isBound;var Z=q.offset,ie=Y.offset;h+=Z,g+=ie}var J=Pt(FK({datas:n,distX:h,distY:g}),w),U=Pt(bbe({datas:n,distX:h,distY:g}),w);v5(U,vi),v5(J,vi),R||(!D&&!k&&(U[0]=ot(U[0],I),J[0]=ot(J[0],I)),!P&&!N&&(U[1]=ot(U[1],I),J[1]=ot(J[1],I)));var X=Je(J,w),te=Je(U,w),K=Je(te,b),ce=Je(X,x);n.prevDist=te,n.prevBeforeDist=X,n.passDelta=K,n.passDist=te;var ae=n.left+X[0],oe=n.top+X[1],he=n.right-X[0],ne=n.bottom-X[1],_e=O_(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(te[0],"px, ").concat(te[1],"px)"));if(zR(e,_e),t.state.dragInfo.dist=r?[0,0]:te,!(!r&&!T&&K.every(function(ze){return!ze})&&ce.some(function(ze){return!ze}))){var fe=t.state,ee=fe.width,Ce=fe.height,Pe=ft(t,e,se({transform:_e,dist:te,delta:K,translate:U,beforeDist:X,beforeDelta:ce,beforeTranslate:J,left:ae,top:oe,right:he,bottom:ne,width:ee,height:Ce,isPinch:a},pi({transform:_e},e)));return!r&&Ve(t,"onDrag",Pe),Pe}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,se(se({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ca(t,e,{});return!n&&Ve(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=NA(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=se(se({},o),{targets:t.props.targets,events:f}),g=Ve(t,"onDragGroupStart",h);i.isDrag=g!==!1;var m=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[m[0]%1,m[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,se(se({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=NA(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=se({targets:t.props.targets,events:a},r);return Ve(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=NA(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ve(t,"onDragGroupEnd",ca(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function oW(t,e){var n=gr(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function cxe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=Cn(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function lW(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=Cbe(e,i,a),c=Cn(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var V5=YR("resizable"),iP={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:YK("resizable"),dragControlCondition:V5,viewClassName:WR("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=wW(s,i,r,c),g=t.state,m=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!m||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&Yd(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var S=t.props.transformOrigin||"% %";c.transformOrigin=Mi(S)?S.split(" "):S,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(N){c.ratio=N&&isFinite(N)?N:0}c.startPositions=Fa(t.state);function I(N){var z=oW(c.startPositions,N);c.fixedDirection=z.fixedDirection,c.fixedPosition=z.fixedPosition,c.fixedOffset=z.fixedOffset}function R(N){var z=lW(t.state,N);c.fixedDirection=z.fixedDirection,c.fixedPosition=z.fixedPosition,c.fixedOffset=z.fixedOffset}function O(N){c.minSize=[Jt("".concat(N[0]),0)||0,Jt("".concat(N[1]),0)||0]}function D(N){var z=[N[0]||1/0,N[1]||1/0];(!np(z[0])||isFinite(z[0]))&&(z[0]=Jt("".concat(z[0]),0)||1/0),(!np(z[1])||isFinite(z[1]))&&(z[1]=Jt("".concat(z[1]),0)||1/0),c.maxSize=z}T(b/x),I(u||[-h[0],-h[1]]),c.setFixedDirection=I,c.setFixedPosition=R,c.setMin=O,c.setMax=D;var k=ft(t,e,{direction:h,startRatio:c.ratio,set:function(N){var z=le(N,2),L=z[0],B=z[1];c.startWidth=L,c.startHeight=B},setMin:O,setMax:D,setRatio:T,setFixedDirection:I,setFixedPosition:R,setOrigin:function(N){c.transformOrigin=N},dragStart:ui.dragStart(t,new ip().dragStart([0,0],e))}),P=f||Ve(t,"onResizeStart",k);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,P!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?k:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,m=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,S=r.startHeight,T=r.prevWidth,I=r.prevHeight,R=r.minSize,O=r.maxSize,D=r.ratio,k=r.startOffsetWidth,P=r.startOffsetHeight,N=r.isWidth;if(!b)return;if(m){var z=t.state.is3d,L=r.startOffsetMatrix,B=r.startTransformOrigin,j=z?4:3,W=Tv(jw(e)),Q=Math.sqrt(W.length);j!==Q&&(W=Ss(W,Q,j));var q=k0(L,W,B,j),Y=Xd(q,k,P,j);r.startPositions=Y,r.nextTargetMatrix=W,r.nextAllMatrix=q}var Z=Nd(t.props,"resizable"),ie=Z.resizeFormat,J=Z.throttleResize,U=J===void 0?i?0:1:J,X=Z.parentMoveable,te=Z.keepRatioFinally,K=r.direction,ce=K,ae=0,oe=0;!K[0]&&!K[1]&&(ce=[1,1]);var he=D&&(s??Z.keepRatio)||!1;function ne(){var at=r.fixedDirection,wt=CW(ce,he,r,e);ae=wt.distWidth,oe=wt.distHeight;var ct=ce[0]-at[0]||he?Math.max(k+ae,vi):k,gn=ce[1]-at[1]||he?Math.max(P+oe,vi):P;return he&&k&&P&&(N?gn=ct/D:ct=gn*D),[ct,gn]}var _e=le(ne(),2),fe=_e[0],ee=_e[1];g||(r.setFixedDirection(r.fixedDirection),Ve(t,"onBeforeResize",ft(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(at){var wt;return r.setFixedDirection(at),wt=le(ne(),2),fe=wt[0],ee=wt[1],[fe,ee]},setFixedPosition:function(at){var wt;return r.setFixedPosition(at),wt=le(ne(),2),fe=wt[0],ee=wt[1],[fe,ee]},boundingWidth:fe,boundingHeight:ee,setSize:function(at){var wt;wt=le(at,2),fe=wt[0],ee=wt[1]}},!0)));var Ce=o;o||(!i&&a?Ce=Dbe(t,[0,0]):Ce=r.fixedPosition);var Pe=[0,0];a||(Pe=Txe(t,fe,ee,K,Ce,!u&&f,r)),c&&(!c[0]&&(Pe[0]=0),!c[1]&&(Pe[1]=0));function ze(){var at;ie&&(at=le(ie([fe,ee]),2),fe=at[0],ee=at[1]),fe=ot(fe,U),ee=ot(ee,U)}if(he){ce[0]&&ce[1]&&Pe[0]&&Pe[1]&&(ke(Pe[0])>ke(Pe[1])?Pe[1]=0:Pe[0]=0);var Le=!Pe[0]&&!Pe[1];Le&&ze(),ce[0]&&!ce[1]||Pe[0]&&!Pe[1]||Le&&N?(fe+=Pe[0],ee=fe/D):(!ce[0]&&ce[1]||!Pe[0]&&Pe[1]||Le&&!N)&&(ee+=Pe[1],fe=ee*D)}else fe+=Pe[0],ee+=Pe[1],fe=Math.max(0,fe),ee=Math.max(0,ee);n=le(JH([fe,ee],R,O,he?D:!1),2),fe=n[0],ee=n[1],ze(),he&&(h||te)&&(N?ee=fe/D:fe=ee*D),ae=fe-k,oe=ee-P;var Be=[ae-T,oe-I];r.prevWidth=ae,r.prevHeight=oe;var Ie=Pbe(t,fe,ee,Ce,x,r);if(!(!X&&Be.every(function(at){return!at})&&Ie.every(function(at){return!at}))){var Oe=ui.drag(t,I0(e,t.state,Ie,!!a,!1,"draggable")),Ge=Oe.transform,gt=w+ae,Ct=S+oe,kt=ft(t,e,se({width:gt,height:Ct,offsetWidth:Math.round(fe),offsetHeight:Math.round(ee),startRatio:D,boundingWidth:fe,boundingHeight:ee,direction:K,dist:[ae,oe],delta:Be,isPinch:!!a,drag:Oe},SW({style:{width:"".concat(gt,"px"),height:"".concat(Ct,"px")},transform:Ge},Oe,e)));return!g&&Ve(t,"onResize",kt),kt}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),m=ke(h)>3,b=ke(g)>3;if(m&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),m||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ca(t,e,{});return!r&&Ve(t,"onResizeEnd",i),i}},dragGroupControlCondition:V5,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,se(se({},e),{isGroup:!0}));if(!r)return!1;var i=bs(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var m=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),R=s*(T?w[1]/T:0);m[0]=Math.max(m[0],I),m[1]=Math.max(m[1],R)})}function c(){var m=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),R=s*(T?w[1]/T:0);m[0]=Math.min(m[0],I),m[1]=Math.min(m[1],R)})}var u=sl(t,this,"dragControlStart",e,function(m,b){return zw(t,m,n,b)});o(),c();var f=function(m){r.setFixedDirection(m),u.forEach(function(b,x){b.setFixedDirection(m),zw(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=se(se({},r),{targets:t.props.targets,events:u.map(function(m){return se(se({},m),{setMin:function(b){m.setMin(b),o()},setMax:function(b){m.setMax(b),c()}})}),setFixedDirection:f,setMin:function(m){r.setMin(m),o()},setMax:function(m){r.setMax(m),c()}}),g=Ve(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Nd(t.props,"resizable");V_(t,"onBeforeResize",function(m){Ve(t,"onBeforeResizeGroup",ft(t,e,se(se({},m),{targets:r.targets}),!0))});var i=this.dragControl(t,se(se({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=sl(t,this,"dragControl",e,function(m,b){var x=le(ii(T0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],S=x[1];return se(se({},b),{parentDist:null,parentScale:u,dragClient:Pt(f,[w,S]),parentKeepRatio:c})}),g=se({targets:r.targets,events:h},i);return Ve(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=sl(t,this,"dragControlEnd",e),a=ca(t,e,{targets:t.props.targets,events:i});return Ve(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function MA(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=Cn(t.state.rootMatrix,Je([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Pt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Kn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=al(f,[n,r])}function $x(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function jA(t,e,n,r){return $x(Kn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function zA(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=Exe(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=ot(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function cW(t,e,n){var r=le(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(cr(t))return t.map(function(w){return cW(w,[i,a,s,o],n)[0]});var c=le((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],m=bW(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,m]]}function aP(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(pr(n,Xe("rotation-control"))||t.props.rotateAroundControls&&pr(n,Xe("around-control"))||pr(n,Xe("control"))&&pr(n,Xe("rotatable")))return!0;var r=t.props.rotationTarget;return r?XR(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var uxe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,dxe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[uxe],viewClassName:function(t){return t.isDragging("rotatable")?Xe("view-rotation-dragging"):""},render:function(t,e){var n=Nd(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=cW(i,f,h),m=[];if(g.forEach(function(S,T){var I=le(S,2),R=I[0],O=I[1];m.push(e.createElement("div",{key:"rotation".concat(T),className:Xe("rotation"),style:{transform:"translate(-50%) translate(".concat(R[0],"px, ").concat(R[1],"px) rotate(").concat(O,"rad)")}},e.createElement("div",{className:Xe("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Xe("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=bl(c||{}),x={};b.forEach(function(S){c[S].forEach(function(T){x[T]=S})});var w=[];cr(s)&&(w=s.map(function(S){var T=x[S];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:S}})),m.push.apply(m,Re([],le(HK(t,"rotatable",w,e)),!1))}return o&&m.push.apply(m,Re([],le(QK(t,e)),!1)),m},dragControlCondition:aP,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,m=h.left,b=h.top,x=h.direction,w=h.beforeDirection,S=h.targetTransform,T=h.moveableClientRect,I=h.offsetMatrix,R=h.targetMatrix,O=h.allMatrix,D=h.width,k=h.height;if(!f&&!g)return!1;var P=t.getRect();i.rect=P,i.transform=S,i.left=m,i.top=b;var N=function(ce){var ae=lW(t.state,ce);i.fixedDirection=ae.fixedDirection,i.fixedOffset=ae.fixedOffset,i.fixedPosition=ae.fixedPosition,U&&U.setFixedPosition(ce)},z=function(ce){var ae=cxe(t.state,ce);i.fixedDirection=ae.fixedDirection,i.fixedOffset=ae.fixedOffset,i.fixedPosition=ae.fixedPosition,U&&U.setFixedDirection(ce)},L=a,B=s;if(f||u||c){var j=o||0;i.beforeInfo={origin:P.beforeOrigin,prevDeg:j,defaultDeg:j,prevSnapDeg:0,startDist:0},i.afterInfo=se(se({},i.beforeInfo),{origin:P.origin}),i.absoluteInfo=se(se({},i.beforeInfo),{origin:P.origin,startValue:j})}else{var W=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(W){var Q=W.getAttribute("data-direction")||"",q=vbe[Q];if(q){i.isControl=!0,i.isAroundControl=pr(W,Xe("around-control")),i.controlDirection=q;var Y=W.getAttribute("data-resolve");Y&&(i.resolveAble=Y);var Z=Bxe(h.rootMatrix,h.renderPoses,T);n=le(gr(Z,q),2),L=n[0],B=n[1]}}i.beforeInfo={origin:P.beforeOrigin},i.afterInfo={origin:P.origin},i.absoluteInfo={origin:P.origin,startValue:P.rotation};var ie=N;N=function(ce){var ae=h.is3d?4:3,oe=le(Pt(TK(R,ae),ce),2),he=oe[0],ne=oe[1],_e=ii(I,Dd([he,ne],ae)),fe=ii(O,Dd([ce[0],ce[1]],ae));ie(ce);var ee=h.posDelta;i.beforeInfo.origin=Je(_e,ee),i.afterInfo.origin=Je(fe,ee),i.absoluteInfo.origin=Je(fe,ee),MA(t,i.beforeInfo,L,B,T),MA(t,i.afterInfo,L,B,T),MA(t,i.absoluteInfo,L,B,T)},z=function(ce){var ae=gr([[0,0],[D,0],[0,k],[D,k]],ce);N(ae)}}i.startClientX=L,i.startClientY=B,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},N_(t,e,"rotate");var J=!1,U=!1;if(i.isControl&&i.resolveAble){var X=i.resolveAble;X==="resizable"&&(U=iP.dragControlStart(t,se(se({},new ip("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(J=ui.dragStart(t,new ip().dragStart([0,0],e))),N(Fxe(t));var te=ft(t,e,se(se({set:function(ce){i.startValue=ce*Math.PI/180},setFixedDirection:z,setFixedPosition:N},R_(t,e)),{dragStart:J,resizeStart:U})),K=Ve(t,"onRotateStart",te);return i.isRotate=K!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?te:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,m=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,S=a.isRotate,T=a.startValue,I=a.rect,R=a.startClientX,O=a.startClientY;if(S){D_(t,e,"rotate");var D=ybe(e),k=m*D,P=t.props.parentMoveable,N=0,z,L,B=0,j,W,Q=0,q,Y,Z=180/Math.PI*T,ie=w.startValue,J=!1,U=R+s,X=O+o;if(!u&&"parentDist"in e){var te=e.parentDist;z=te,j=te,q=te}else f||u?(z=$x(c,m,b),j=$x(c,k,x),q=$x(c,k,w)):(z=jA(U,X,m,b),j=jA(U,X,k,x),q=jA(U,X,k,w),J=!0);if(L=Z+z,W=Z+j,Y=ie+q,Ve(t,"onBeforeRotate",ft(t,e,{beforeRotation:L,rotation:W,absoluteRotation:Y,setRotation:function(Ce){j=Ce-Z,z=j,q=j}},!0)),n=le(zA(t,I,b,z,Z,J),3),N=n[0],z=n[1],L=n[2],r=le(zA(t,I,x,j,Z,J),3),B=r[0],j=r[1],W=r[2],i=le(zA(t,I,w,q,ie,J),3),Q=i[0],q=i[1],Y=i[2],!(!Q&&!B&&!N&&!P&&!g)){var K=O_(a,"rotate(".concat(W,"deg)"),"rotate(".concat(j,"deg)"));g&&(a.fixedPosition=LR(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ce=kbe(t,j,a),ae=Je(Pt(h||[0,0],ce),a.prevInverseDist||[0,0]);a.prevInverseDist=ce,a.requestValue=null;var oe=$K(t,K,ae,f,e),he=oe,ne=al([U,X],w.startAbsoluteOrigin)-w.startDist,_e=void 0;if(a.resolveAble==="resizable"){var fe=iP.dragControl(t,se(se({},I0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:ne}));fe&&(_e=fe,he=SW(he,fe,e))}var ee=ft(t,e,se(se({delta:B,dist:j,rotate:W,rotation:W,beforeDist:z,beforeDelta:N,beforeRotate:L,beforeRotation:L,absoluteDist:q,absoluteDelta:Q,absoluteRotate:Y,absoluteRotation:Y,isPinch:!!f,resize:_e},oe),he));return Ve(t,"onRotate",ee),ee}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ca(t,e,{});return Ve(t,"onRotateEnd",r),r}},dragGroupControlCondition:aP,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=sl(t,this,"dragControlStart",e,function(h,g){var m=h.state,b=m.left,x=m.top,w=m.beforeOrigin,S=Pt(Je([b,x],[i,a]),Je(w,s));return g.datas.startGroupClient=S,g.datas.groupClient=S,se(se({},g),{parentRotate:0})}),u=se(se({},o),{targets:t.props.targets,events:c}),f=Ve(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){V_(t,"onBeforeRotate",function(u){Ve(t,"onBeforeRotateGroup",ft(t,e,se(se({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=sl(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=le(f.datas.groupClient,2),m=g[0],b=g[1],x=le(E0(h,s*i),2),w=x[0],S=x[1],T=[w-m,S-b];return f.datas.groupClient=[w,S],se(se({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=se({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Ve(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=sl(t,this,"dragControlEnd",e),a=ca(t,e,{targets:t.props.targets,events:i});return Ve(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function fxe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function qR(t,e){return fxe(se(se({},t),{classNames:Re([Xe("line","guideline",t.direction)],le(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(ot(n,.1),"px")})}),e)}function B5(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,m=[0,0];return m[s]=r,m[s?0:1]=-i+g,qR({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Xe("target","bold",h)],posValue:m,sizeValue:a,zoom:c,direction:e},o)})}function F5(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?Xc:Qc,f=i[u.start],h=i[u.end];return n.filter(function(g){var m=g.hide,b=g.elementRect;if(m)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,m){var b=g.pos,x=g.size,w=g.element,S=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return qR({key:"".concat(e,"-default-guideline-").concat(m),classNames:w?[Xe("bold"),S]:[Xe("normal"),S],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function bm(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,m=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(O,D){return O}:b,w=u.zoom,S=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",I=Math.abs(i),R=m?parseFloat(I.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Xe("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(I,"px"),c)},qR({direction:e,classNames:[Xe(n),s],size:"100%",posValue:[0,0],sizeValue:I,zoom:w},o),o.createElement("div",{className:Xe("size-value","gap"),style:{transform:"translate".concat(S,"(-50%) scale(").concat(w,")")}},R>0?x(R,e):""))}function hxe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?Xc:Qc,o=n[s.start],c=n[s.end];return EW(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(m){var b,x,w=m.element,S=m.elementRect.rect;if(S[s.end]<o)f.push(m);else if(c<S[s.start])h.push(m);else if(S[s.start]<=o&&c<=S[s.end]&&r){var T=m.pos,I={element:w,rect:se(se({},S),(b={},b[s.end]=S[s.start],b))},R={element:w,rect:se(se({},S),(x={},x[s.start]=S[s.end],x))},O=[0,0],D=[0,0];O[i]=T[i],O[a]=T[a],D[i]=T[i],D[a]=T[a]+m.size,f.push({type:t,pos:O,size:0,elementRect:I,direction:"",elementDirection:"end"}),h.push({type:t,pos:D,size:0,elementRect:R,direction:"",elementDirection:"start"})}}),f.sort(function(m,b){return b.pos[a]-m.pos[a]}),h.sort(function(m,b){return m.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function pxe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=hxe(o,c,r,a),g=u?Qc:Xc,m=u?Xc:Qc,b=r[g.start],x=r[g.end];h.forEach(function(w){var S=w.total,T=w.start,I=w.end,R=w.inner,O=n[f]+S[0].pos[f]-r[m.start],D=r;T.forEach(function(k){var P=k.elementRect.rect,N=D[g.start]-P[g.end];if(N>0){var z=[0,0];z[u]=n[u]+D[g.start]-b-N,z[f]=O,s.push(bm(t,o,"dashed",s.length,N,z,k.className,i))}D=P}),D=r,I.forEach(function(k){var P=k.elementRect.rect,N=P[g.start]-D[g.end];if(N>0){var z=[0,0];z[u]=n[u]+D[g.end]-b,z[f]=O,s.push(bm(t,o,"dashed",s.length,N,z,k.className,i))}D=P}),R.forEach(function(k){var P=k.elementRect.rect,N=b-P[g.start],z=P[g.end]-x,L=[0,0],B=[0,0];L[u]=n[u]-N,L[f]=O,B[u]=n[u]+x-b,B[f]=O,s.push(bm(t,o,"dashed",s.length,N,L,k.className,i)),s.push(bm(t,o,"dashed",s.length,z,B,k.className,i))})})}),s}function gxe(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?Qc:Xc,h=c?Xc:Qc,g=r[f.start],m=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var S=w.gap,T=w.gapRects,I=Math.max.apply(Math,Re([b],le(T.map(function(D){var k=D.rect;return k[h.start]})),!1)),R=Math.min.apply(Math,Re([x],le(T.map(function(D){var k=D.rect;return k[h.end]})),!1)),O=(I+R)/2;I===R||O===(b+x)/2||T.forEach(function(D){var k=D.rect,P=D.className,N=[n[0],n[1]];if(k[f.end]<g)N[c]+=k[f.end]-g;else if(m<k[f.start])N[c]+=k[f.start]-g-S;else return;N[u]+=O-b,a.push(bm(t,c?"vertical":"horizontal","gap",a.length,S,N,P,i))})})}),a}function sP(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,m=t.props,b=m.snapGap,x=b===void 0?!0:b,w=m.verticalGuidelines,S=m.horizontalGuidelines,T=m.snapThreshold,I=T===void 0?5:T,R=m.maxSnapElementGuidelineDistance,O=R===void 0?1/0:R,D=m.isDisplayGridGuidelines,k=La(Fa(t.state)),P=k.top,N=k.left,z=k.bottom,L=k.right,B={top:P,left:N,bottom:z,right:L,center:(N+L)/2,middle:(P+z)/2},j=bxe(t),W=Re([],le(j),!1),Q=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ie){return ie*I});x&&W.push.apply(W,Re([],le(mxe(t,B,Q)),!1));var q=se({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(W.push.apply(W,Re([],le(yxe(t,s?c:f,s?o:u,h,g,q,D)),!1)),a){var Y=i.left,Z=i.top;q.left+=Y,q.top+=Z,q.right+=Y,q.bottom+=Z}return W.push.apply(W,Re([],le(dW(S||!1,w||!1,s?c:f,s?o:u,h,g,q)),!1)),W=W.filter(function(ie){var J=ie.element,U=ie.elementRect,X=ie.type;if(!J||!U)return!0;var te=U.rect;return uW(B,te,X,O)}),W}function mxe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",Xc,Qc],["horizontal",Qc,Xc]].forEach(function(f){var h=le(f,3),g=h[0],m=h[1],b=h[2],x=e[m.start],w=e[m.end],S=e[m.center],T=e[b.start],I=e[b.end],R={left:n[0],top:n[1]};function O(P){var N=P.rect,z=R[m.start];return N[m.end]<x+z?x-N[m.end]:w-z<N[m.start]?N[m.start]-w:-1}var D=c.filter(function(P){var N=P.rect;return N[b.start]>I||N[b.end]<T?!1:O(P)>0}).sort(function(P,N){return O(P)-O(N)}),k=[];D.forEach(function(P){D.forEach(function(N){if(P!==N){var z=P.rect,L=N.rect,B=z[b.start],j=z[b.end],W=L[b.start],Q=L[b.end];B>Q||W>j||k.push([P,N])}})}),k.forEach(function(P){var N=le(P,2),z=N[0],L=N[1],B=z.rect,j=L.rect,W=B[m.start],Q=B[m.end],q=j[m.start],Y=j[m.end],Z=R[m.start],ie=0,J=0,U=!1,X=!1,te=!1;if(Q<=x&&w<=q){if(X=!0,ie=(q-Q-(w-x))/2,J=Q+ie+(w-x)/2,ke(J-S)>Z)return}else if(Q<q&&Y<x+Z){if(U=!0,ie=q-Q,J=Y+ie,ke(J-x)>Z)return}else if(Q<q&&w-Z<W){if(te=!0,ie=q-Q,J=W-ie,ke(J-w)>Z)return}else return;ie&&uW(e,j,g,a)&&(ie>o||u.push({type:g,pos:g==="vertical"?[J,0]:[0,J],element:L.element,size:0,className:L.className,isStart:U,isCenter:X,isEnd:te,gap:ie,hide:!0,gapRects:[z,L],direction:"",elementDirection:""}))})}),u}function vxe(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,m=o.snapRenderInfo,b=m&&(((i=m.direction)===null||i===void 0?void 0:i[0])||((a=m.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),S=w.children,T=m.direction;if(S){var I=T.map(function(O,D){var k=D===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},P=k.snapSize,N=k.posName,z=k.sizeName,L=k.clientOffset;if(!P)return{dir:O,multiple:1,snapSize:P,snapOffset:0};var B=w[z],j=w[N],W=eK(S.map(function(U){return[U[N]-j,U[z],B-U[z]-U[N]+j]})).filter(function(U){return U}).sort(function(U,X){return U-X}),Q=W[0],q=W.map(function(U){return ot(U/Q,.1)*P}),Y=1,Z=ot(B/Q,.1);for(Y=1;Y<=10&&!q.every(function(U){return U*Y%1===0});++Y);var ie=(-O+1)/2,J=Ow(j-L,j-L+B,ie,1-ie);return{multiple:Z*Y,dir:O,snapSize:P,snapOffset:Math.round(J/P)}}),R=I.map(function(O){return O.multiple||1});o.snapThresholdInfo.multiples=R,o.snapThresholdInfo.offset=I.map(function(O){return O.snapOffset}),I.forEach(function(O,D){O.snapSize})}}else o.snapThresholdInfo=null}function yxe(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,m=[],b=a.left,x=a.top,w=[0,0];vxe(t,r,i,a);var S=c.snapThresholdInfo,T=f,I=g;if(S&&(f*=S.multiples[0]||1,g*=S.multiples[1]||1,w=S.offset),g){for(var R=function(D){m.push({type:"horizontal",pos:[b,ot(w[1]*I+D-i+x,.1)],className:Xe("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},O=0;O<=n*2;O+=g)R(O);for(var O=-g;O>=-n;O-=g)R(O)}if(f){for(var R=function(k){m.push({type:"vertical",pos:[ot(w[0]*T+k-r+b,.1),x],className:Xe("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},O=0;O<=e*2;O+=f)R(O);for(var O=-f;O>=-e;O-=f)R(O)}return m}function uW(t,e,n,r){return n==="horizontal"?ke(t.right-e.left)<=r||ke(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?ke(t.bottom-e.top)<=r||ke(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function bxe(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return _s(g)&&"element"in g?se(se({},g),{element:ho(g.element,!0)}):{element:ho(g,!0)}}).filter(function(g){return g.element}),s=Dye(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var m=le(g,2),b=m[0],x=m[1];u[x]=i[b]}),xxe(t,c.map(function(g){return a[g]})).map(function(g,m){u[c[m]]=g}),e.elementRects=u;var f=BR(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var m=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,S=w===void 0?f.left:w,T=g.right,I=T===void 0?f.right:T,R=g.bottom,O=R===void 0?f.bottom:R,D=g.center,k=D===void 0?f.center:D,P=g.middle,N=P===void 0?f.middle:P,z=g.className,L=g.rect,B=FR({top:x,right:I,left:S,bottom:O,center:k,middle:N},L),j=B.horizontal,W=B.vertical,Q=B.horizontalNames,q=B.verticalNames,Y=L.top,Z=L.left,ie=L.right-Z,J=L.bottom-Y,U=[ie,J];W.forEach(function(X,te){h.push({type:"vertical",element:m,pos:[ot(X,.1),Y],size:J,sizes:U,className:z,elementRect:g,elementDirection:O5[q[te]]||q[te],direction:""})}),j.forEach(function(X,te){h.push({type:"horizontal",element:m,pos:[Z,ot(X,.1)],size:ie,sizes:U,className:z,elementRect:g,elementDirection:O5[Q[te]]||Q[te],direction:""})})}),h}function U5(t,e){return t?t.map(function(n){var r=_s(n)?n:{pos:n},i=r.pos;return np(i)?r:se(se({},r),{pos:Jt(i,e)})}):[]}function dW(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,m=r+f-u;return U5(t,m).forEach(function(b){o.push({type:"horizontal",pos:[c,ot(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),U5(e,g).forEach(function(b){o.push({type:"vertical",pos:[ot(b.pos-i+c,.1),u],size:m,className:b.className,direction:""})}),o}function xxe(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=le(qbe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],m=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,S=x.top-h-m,T=S+x.height,I=w+x.width,R=le(op(a,[w,S],c),2),O=R[0],D=R[1],k=le(op(a,[I,T],c),2),P=k[0],N=k[1];return se(se({},b),{rect:{left:O,right:P,top:D,bottom:N,center:(O+P)/2,middle:(D+N)/2}})})}function Kb(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=ho(r,!0);if(s){var o=qm(s),c=W5(e,[o.left-i.left,o.top-i.top]),u=W5(e,[o.right-i.right,o.bottom-i.bottom]);a.left=ot(c[0],1e-5),a.top=ot(c[1],1e-5),a.right=ot(u[0],1e-5),a.bottom=ot(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=sP(t),e.enableSnap=!0,!0}function fW(t,e,n,r,i,a){var s=Xd(t,e,n,a?4:3),o=gr(s,r);return HR(s,Je(i,o))}function $5(t){return t?t/ke(t):0}function wxe(t,e,n,r,i,a){var s=a.fixedDirection,o=Wbe(n,s,r),c=$R(t,e,n,r),u=Re(Re([],le(sxe(t,e,o,r,i,a)),!1),le(sW(t,c,a)),!1),f=Lw(u,0),h=Lw(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function _xe(t,e,n,r,i,a,s,o,c){var u=gr(e,s),f=z_(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(ot(g,Jk)||ot(h,Jk)){var m=le(So({datas:c,distX:-g,distY:-h}),2),b=m[0],x=m[1],w=Math.min(i||1/0,n+s[0]*b),S=Math.min(a||1/0,r+s[1]*x);return[w-n,S-r]}return[0,0]}function hW(t,e,n,r,i,a,s,o){for(var c=Fa(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var m=e(f,h),b=wxe(t,m,i,u,s,o),x=b.width,w=b.height,S=x.isBound,T=w.isBound,I=x.offset,R=w.offset;if(g===1&&(S||(I=0),T||(R=0)),g===0&&s&&!S&&!T)return[0,0];if(u){var O=ke(I)*(n?1/n:1),D=ke(R)*(r?1/r:1),k=S&&T?O<D:T||!S&&O<D;k?I=n*R/r:R=r*I/n}f+=I,h+=R}if(!u&&i[0]&&i[1]){var P=lxe(t,c,i,a,o),N=P.maxWidth,z=P.maxHeight,L=le(_xe(t,e(f,h).map(function(W){return W.map(function(Q){return ot(Q,Jk)})}),n+f,r+h,N,z,i,s,o),2),I=L[0],R=L[1];f+=I,h+=R}return[f,h]}function Um(t){return t<0&&(t=t%360+360),t%=360,t}function Sxe(t,e){e=Um(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return ke(t-r)<ke(t-i)?r:i}function LA(t,e){t=Um(t),e=Um(e);var n=Um(t-e);return Math.min(n,360-n)}function Exe(t,e,n,r){var i,a=t.props,s=(i=a[ZK])!==null&&i!==void 0?i:5,o=a[JK];if(zp(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,m=n*Math.PI/180,b=[c,u,f,h].map(function(R){return Je(R,g)}),x=b.map(function(R){return E0(R,m)}),w=Re(Re([],le(Bbe(t,b,x,g,n)),!1),le(exe(t,b,x,g,n)),!1);w.sort(function(R,O){return ke(R-n)-ke(O-n)});var S=w.length>0;if(S)return{isSnap:S,dist:S?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(R,O){return LA(R,r)-LA(O,r)}),I=T[0];if(LA(I,r)<=s)return{isSnap:!0,dist:n+Sxe(r,I)-r}}return{isSnap:!1,dist:n}}function Txe(t,e,n,r,i,a,s){if(!zp(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return hW(t,function(g,m){return fW(c||f,e+g,n+m,o,i,h)},e,n,r,i,a,s)}function Axe(t,e,n,r,i){if(!zp(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=hW(t,function(h,g){return fW(Tbe(i,Pt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function Cxe(t,e){e.absolutePoses=Fa(t.state)}function q5(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;ji(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return se(se({},r),{direction:i.direction})})}function G5(t,e,n,r,i,a){var s=VR(M_(t,a),e,n),o=s.vertical,c=s.horizontal,u=wh();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=txe(t),h=f.boundMap,g=f.vertical,m=f.horizontal;return g.forEach(function(b){yl(r,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||r.push({type:"bounds",pos:b})}),m.forEach(function(b){yl(i,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var Ixe=YR("",["resizable","scalable"]),kxe={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",ZK,JK,eW,tW,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!zp(t,""))return Sh(t,"boundMap",wh(),function(K){return JSON.stringify(K)}),Sh(t,"innerBoundMap",wh(),function(K){return JSON.stringify(K)}),[];n.guidelines=sP(t);var g=Math.min(a[0],s[0],o[0],c[0]),m=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=Fa(t.state),w=[],S=[],T=[],I=[],R=[],O=La(x),D=O.width,k=O.height,P=O.top,N=O.left,z=O.bottom,L=O.right,B={left:N,right:L,top:P,bottom:z,center:(N+L)/2,middle:(P+z)/2},j=b.length>0,W=j?La(b):{};if(!u.request){if(u.direction&&R.push(Kbe(t,x,u.direction,h,h)),u.snap){var Q=La(x);u.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),R.push(R5(t,Q,h,h))}j&&(u.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),R.push(R5(t,W,h,h))),R.forEach(function(K){var ce=K.vertical.posInfos,ae=K.horizontal.posInfos;w.push.apply(w,Re([],le(ce.filter(function(oe){var he=oe.guidelineInfos;return he.some(function(ne){var _e=ne.guideline;return!_e.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),S.push.apply(S,Re([],le(ae.filter(function(oe){var he=oe.guidelineInfos;return he.some(function(ne){var _e=ne.guideline;return!_e.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),T.push.apply(T,Re([],le(q5(ce)),!1)),I.push.apply(I,Re([],le(q5(ae)),!1))})}var q=G5(t,[N,L],[P,z],w,S),Y=q.boundMap,Z=q.innerBoundMap;j&&G5(t,[W.left,W.right],[W.top,W.bottom],w,S,u.externalBounds);var ie=Re(Re([],le(T),!1),le(I),!1),J=ie.filter(function(K){return K.element&&!K.gapRects}),U=ie.filter(function(K){return K.gapRects}).sort(function(K,ce){return K.gap-ce.gap});Ve(t,"onSnap",{guidelines:ie.filter(function(K){var ce=K.element;return!ce}),elements:J,gaps:U},!0);var X=Sh(t,"boundMap",Y,function(K){return JSON.stringify(K)},wh()),te=Sh(t,"innerBoundMap",Z,function(K){return JSON.stringify(K)},wh());return(Y===X||Z===te)&&Ve(t,"onBound",{bounds:Y,innerBounds:Z},!0),Re(Re(Re(Re(Re(Re([],le(pxe(t,J,[g,m],B,e)),!1),le(gxe(t,U,[g,m],B,e)),!1),le(F5(t,"horizontal",I,[i,r],B,e)),!1),le(F5(t,"vertical",T,[i,r],B,e)),!1),le(B5(t,"horizontal",S,g,r,D,0,e)),!1),le(B5(t,"vertical",w,m,i,k,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Kb(t)},drag:function(t){var e=t.state;Kb(t)||(e.guidelines=sP(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Ixe(t,e)||aP(t,e))return!0;if(!e.isRequest&&e.inputEvent)return pr(e.inputEvent.target,Xe("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Kb(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Kb(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Pxe(t,e){return[t[0]*e[0],t[1]*e[1]]}function Xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return T0e.apply(void 0,Re([MR],le(t),!1))}function pW(t){t()}function Dxe(t){return!t||t==="none"?[1,0,0,1,0,0]:_s(t)?t:Tv(t)}function $m(t,e,n){return Nw(e,Od(n,e),t,Od(n.map(function(r){return-r}),e))}function Oxe(t,e,n){if(e==="%"){var r=GR(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function Rxe(t){var e=Nxe(KR(t,":before"));return e.map(function(n,r){var i=x0(n),a=i.value,s=i.unit;return a*Oxe(t,s,r===0)})}function Bw(t){return t?t.split(" "):["0","0"]}function Nxe(t){return Bw(t.transformOrigin)}function gW(t){var e=zi(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function Cv(t,e,n,r,i){var a,s,o=ER(t)||ou(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var m=!1,b=t===e||u===e,x="relative",w=1,S=parseFloat(i?.("zoom"))||1,T=i?.("position");u&&u!==o;){e===u&&(b=!0);var I=zi(u),R=u.tagName.toLowerCase(),O=gW(u),D=I("willChange"),k=parseFloat(I("zoom"))||1;if(x=I("position"),r&&k!==1){w=k;break}if(!n&&r&&S!==1&&T&&T!=="absolute"||R==="svg"||R==="foreignobject"||x!=="static"||O&&O!=="none"||D==="transform")break;var P=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,N=u.parentNode;P&&(c=!0,f=N);var z=N;if(z&&z.nodeType===11){u=z.host,m=!0,x=zi(u)("position");break}u=z,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:m,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function Mxe(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=zi(t),o=C_(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=NK?Rxe(t):Bw(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=le(Lxe(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=Bw(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function mW(t,e){var n=zi(t),r=zi(ou(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function oP(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Ss(n,3,4))})}function jxe(t){for(var e=t.parentElement,n=!1,r=ou(t);e;){var i=KR(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function L_(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(AK(t,!e).join(","),")")}function GR(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function zxe(t,e){var n,r=GR(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,m=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,S=Math.floor((h-2)/3);m[0]=i*w/2,m[1]=a*S/2;var T=g===2?Math.max(u,c):Math.min(c,u);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*S}var I=DR(b,e);return n=le(x,2),I[e*(e-1)]=n[0],I[e*(e-1)+1]=n[1],$m(I,e,m)}function Lxe(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=zi(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=GR(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,m=a?e[1]:e[1]-h;return[f,h,g,m]}function Cn(t,e,n){return ii(t,Dd(e,n),n)}function Xd(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Cn(t,i,r)})}function La(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,Re([],le(e),!1)),i=Math.min.apply(Math,Re([],le(n),!1)),a=Math.max.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function H5(t,e,n,r){var i=Xd(t,e,n,r);return La(i)}function Vxe(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=yW(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),m=[0,0];n===ou(n)&&(m=mW(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+m[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+m[1],S=b.width,T=b.height,I=Nw(r,i,c),R=H5(I,f,h,r),O=R.left,D=R.top,k=R.width,P=R.height,N=Cn(I,o,r),z=Je(N,[O,D]),L=[x+z[0]*S/k,w+z[1]*T/P],B=[0,0],j=0;++j<10;){var W=yo(i,r);a=le(Je(Cn(W,L,r),Cn(W,N,r)),2),B[0]=a[0],B[1]=a[1];var Q=Nw(r,i,Od(B,r),c),q=H5(Q,f,h,r),Y=q.left,Z=q.top,ie=Y-x,J=Z-w;if(ke(ie)<2&&ke(J)<2)break;L[0]-=ie,L[1]-=J}return B.map(function(U){return Math.round(U)})}function Bxe(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return Cn(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function Ba(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function vW(t,e){return Ba([e[0]-t[0],e[1]-t[1]])}function xm(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Kn(t,e));var i=vW(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function Fw(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Nd(t,e){var n=t[e];return _s(n)?se(se({},t),n):t}function yW(t){var e=t&&!C_(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,m=0,b=1/0,x=1/0,w=1/0,S=1/0,T=0,I=0,R=!1;if(t)if(!e&&t.ownerSVGElement){var O=t.getBBox();R=!0,n=O.width,r=O.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var D=zi(t),k=t.style,P=D("boxSizing")==="border-box",N=parseFloat(D("borderLeftWidth"))||0,z=parseFloat(D("borderRightWidth"))||0,L=parseFloat(D("borderTopWidth"))||0,B=parseFloat(D("borderBottomWidth"))||0,j=parseFloat(D("paddingLeft"))||0,W=parseFloat(D("paddingRight"))||0,Q=parseFloat(D("paddingTop"))||0,q=parseFloat(D("paddingBottom"))||0,Y=j+W,Z=Q+q,ie=N+z,J=L+B,U=Y+ie,X=Z+J,te=D("position"),K=0,ce=0;if("clientLeft"in t){var ae=null;if(te==="absolute"){var oe=Cv(t,ou(t));ae=oe.offsetParent}else ae=t.parentElement;if(ae){var he=zi(ae);K=parseFloat(he("width")),ce=parseFloat(he("height"))}}f=Math.max(Y,Jt(D("minWidth"),K)||0),h=Math.max(Z,Jt(D("minHeight"),ce)||0),b=Jt(D("maxWidth"),K),x=Jt(D("maxHeight"),ce),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=Jt(k.width,0)||0,I=Jt(k.height,0)||0,s=parseFloat(D("width"))||0,o=parseFloat(D("height"))||0,c=ke(s-T)<1?Bk(f,T||s,b):s,u=ke(o-I)<1?Bk(h,I||o,x):o,n=c,r=u,i=c,a=u,P?(w=b,S=x,g=f,m=h,c=n-U,u=r-X):(w=b+U,S=x+X,g=f+U,m=h+X,n=c+U,r=u+X),i=c+Y,a=u+Z}return{svg:R,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:T,inlineCSSHeight:I,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:m,maxOffsetWidth:w,maxOffsetHeight:S}}function bW(t,e){return Kn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Wb(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function xW(t,e){var n=t===ou(t)||t===ER(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=zi(t)("overflow")!=="visible",se(se({},e),r)}function VA(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?xW(n,f):f}function qm(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?xW(t,o):o}function Fxe(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?QR(r,a,s):c}function wW(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=_W(a,r)}return i}function _W(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function HR(t,e){return[Pt(e,t[0]),Pt(e,t[1]),Pt(e,t[2]),Pt(e,t[3])]}function Fa(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return HR([r,i,a,s],[e,n])}function lP(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function _h(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&lP(t,e),r?.unset(),t[n]=null}function pi(t,e){if(e){var n=jp(e);n.nextStyle=se(se({},n.nextStyle),t)}return{style:t,cssText:bl(t).map(function(r){return"".concat(Ux(r,"-"),": ").concat(t[r],";")}).join("")}}function SW(t,e,n){var r=e.afterTransform||e.transform;return se(se({},pi(se(se(se({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ft(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=se(se({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ca(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),se(se({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function V_(t,e,n){t._emitter.on(e,n)}function Ve(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function KR(t,e){return Bc(t).getComputedStyle(t,e)}function Yb(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function cP(t,e){return t===e||t==null&&e==null}function K5(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!C_(i))return i}return t[n]}function EW(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function Uxe(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function TW(t){return t.reduce(function(e,n){return e.concat(n)},[])}function sp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return ke(r)-ke(n)}),t[0]}function op(t,e,n){return ii(yo(t,n),Dd(e,n),n)}function $xe(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=le(op(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Ia(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Cn(t,[$5(n[0]||1),0],r),a=Cn(t,[0,$5(n[1]||1)],r),s=Cn(t,[n[0]/Ba(i),n[1]/Ba(a)],r);return Pt(e,s)}function ds(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Uw(t){return ke(t)<=vi?0:t}function WR(t){return function(e){if(!e.isDragging(t))return"";var n=Obe(e,t),r=n.deg;return r?Xe("view-control-rotation".concat(r)):""}}function YR(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return pr(i,Xe("direction"))&&(!t||pr(i,Xe(t)))}}function qxe(t,e,n){var r,i=rp(t,{"x%":function(O){return O/100*e.offsetWidth},"y%":function(O){return O/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:rp([""])[0],m=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=uh(f),S=uh(h),T=uh(m),I=uh(b),R=tn(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:S,targetFunctionMatrix:uh(x),afterFunctionMatrix:T,afterFunctionMatrix2:I,allFunctionMatrix:R,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:m,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function Gxe(t){return!t||!_s(t)||Np(t)?!1:cr(t)||"length"in t}function ho(t,e){return t?Np(t)?t:Mi(t)?e?document.querySelector(t):t:wR(t)?t():iK(t)?t:"current"in t?t.current:t:null}function XR(t,e){if(!t)return[];var n=Gxe(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Mi(i)&&e?Re(Re([],le(r),!1),le([].slice.call(document.querySelectorAll(i))),!1):(cr(i)?r.push(XR(i,e)):r.push(ho(i,e)),r)},[])}function Hxe(t,e,n){var r=Kn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function W5(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=yo(n,i);return r||(a=Ss(a,3,4)),a[12]=0,a[13]=0,a[14]=0,kye(a,e)}function AW(t,e,n,r,i){var a=le(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Kn([0,0],e),h=Kn([0,0],r),g=Ba(e),m=Math.cos(f-h)*g;if(!r[0])u=m,c=u*n;else if(!r[1])c=m,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),S=Math.atan2(b,x);w<0&&(w+=Math.PI*2),S<0&&(S+=Math.PI*2);var T=0;ke(w-S)<Math.PI/2||ke(w-S)>Math.PI/2*3||(S+=Math.PI),T=w-S,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var I=Ba([b+e[0],x+e[1]])*Math.cos(T);c=I*Math.sin(S)-b,u=I*Math.cos(S)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function CW(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,m=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,S=[0,1].map(function(k){return ke(t[k]-w[k])}),T=[0,1].map(function(k){var P=S[k];return P!==0&&(P=2/P),P});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(np(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(m){var I=s*S[0],R=o*S[1],O=Ba([I,R]);c=m/O*I*T[0],u=m/O*R*T[1]}else{var D=So({datas:n,distX:f,distY:h});D=T.map(function(k,P){return D[P]*k}),i=le(AW([s,o],D,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function uP(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=le(t.split(" "),2),r=n[0],i=n[1],a=uP(r||""),s=uP(i||""),o=se(se({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function QR(t,e,n){var r=uP(t,!0),i=r.x,a=r.y;return[Jt(i,e)||0,Jt(a,n)||0]}function Kxe(t,e,n){var r=t.map(function(a){return Je(a,e)}),i=r.map(function(a){return E0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Pt(a,e)})}}function IW(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=cr(n),s=cr(i);return a&&s?IW(n,i):!a&&!s?n===i:!1})}function Sh(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function di(t){return t>=0?1:-1}function ke(t){return Math.abs(t)}function BA(t,e){return U0e(t).map(function(n){return e(n)})}function kW(t){return np(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var Wxe=C0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=ft(t,e,{});r&&(g.targets=r);var m=Ve(t,u,g);n.isPinch=m!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=se(se({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=ft(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Ve(t,h,f);var g=n.ables,m="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[m]&&b[m](t,se(se({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=ca(t,e,{isDrag:r});a&&(c.targets=a),Ve(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,se(se({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,se(se({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,se(se({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,se(se({},e),{targets:t.props.targets}))}}),Y5=YR("scalable"),Yxe={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:YK("scalable"),dragControlCondition:Y5,viewClassName:WR("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=wW(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,m=o.pos2,b=o.pos4;if(!s||!h)return!1;r||Yd(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];N_(t,e,"scale"),n.isWidth=x;function w(D){n.ratio=D&&isFinite(D)?D:0}n.startPositions=Fa(t.state);function S(D){var k=oW(n.startPositions,D);n.fixedDirection=k.fixedDirection,n.fixedPosition=k.fixedPosition,n.fixedOffset=k.fixedOffset}n.setFixedDirection=S,w(al(g,m)/al(m,b)),S([-s[0],-s[1]]);var T=function(D){n.minScaleSize=D},I=function(D){n.maxScaleSize=D};T([-1/0,-1/0]),I([1/0,1/0]);var R=ft(t,e,se(se({direction:s,set:function(D){n.startValue=D},setRatio:w,setFixedDirection:S,setMinScaleSize:T,setMaxScaleSize:I},R_(t,e)),{dragStart:ui.dragStart(t,new ip().dragStart([0,0],e))})),O=Ve(t,"onScaleStart",R);return n.startFixedDirection=n.fixedDirection,O!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?R:!1},dragControl:function(t,e){D_(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,m=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,S=n.ratio;if(!b)return!1;var T=t.props,I=T.throttleScale,R=T.parentMoveable,O=h;!h[0]&&!h[1]&&(O=[1,1]);var D=S&&(r??T.keepRatio)||!1,k=t.state,P=[x[0],x[1]];function N(){var fe=CW(O,D,n,e),ee=fe.distWidth,Ce=fe.distHeight,Pe=g?(g+ee)/g:1,ze=m?(m+Ce)/m:1;x[0]||(P[0]=ee/g),x[1]||(P[1]=Ce/m);var Le=(O[0]||D?Pe:1)*P[0],Be=(O[1]||D?ze:1)*P[1];return Le===0&&(Le=di(f[0])*qb),Be===0&&(Be=di(f[1])*qb),[Le,Be]}var z=N();if(!a&&t.props.groupable){var L=k.snapRenderInfo||{},B=L.direction;cr(B)&&(B[0]||B[1])&&(k.snapRenderInfo={direction:h,request:e.isRequest})}Ve(t,"onBeforeScale",ft(t,e,{scale:z,setFixedDirection:function(fe){return n.setFixedDirection(fe),z=N(),z},startFixedDirection:n.startFixedDirection,setScale:function(fe){z=fe}},!0));var j=[z[0]/P[0],z[1]/P[1]],W=s,Q=[0,0],q=di(j[0]*j[1]),Y=!s&&!i&&a;if(Y||u?W=LR(t,n.targetAllTransform,[0,0],[0,0],n):s||(W=n.fixedPosition),a||(Q=Axe(t,j,h,!c&&o,n)),D){O[0]&&O[1]&&Q[0]&&Q[1]&&(Math.abs(Q[0]*g)>Math.abs(Q[1]*m)?Q[1]=0:Q[0]=0);var Z=!Q[0]&&!Q[1];if(Z&&(w?j[0]=ot(j[0]*P[0],I)/P[0]:j[1]=ot(j[1]*P[1],I)/P[1]),O[0]&&!O[1]||Q[0]&&!Q[1]||Z&&w){j[0]+=Q[0];var ie=g*j[0]*P[0]/S;j[1]=di(q*j[0])*ke(ie/m/P[1])}else if(!O[0]&&O[1]||!Q[0]&&Q[1]||Z&&!w){j[1]+=Q[1];var J=m*j[1]*P[1]*S;j[0]=di(q*j[1])*ke(J/g/P[0])}}else j[0]+=Q[0],j[1]+=Q[1],Q[0]||(j[0]=ot(j[0]*P[0],I)/P[0]),Q[1]||(j[1]=ot(j[1]*P[1],I)/P[1]);j[0]===0&&(j[0]=di(f[0])*qb),j[1]===0&&(j[1]=di(f[1])*qb),z=Pxe(j,[P[0],P[1]]);var U=[g,m],X=[g*z[0],m*z[1]];X=JH(X,n.minScaleSize,n.maxScaleSize,D?S:!1),z=BA(2,function(fe){return U[fe]?X[fe]/U[fe]:X[fe]}),j=BA(2,function(fe){return z[fe]/P[fe]});var te=BA(2,function(fe){return f[fe]?j[fe]/f[fe]:j[fe]}),K="scale(".concat(j.join(", "),")"),ce="scale(".concat(z.join(", "),")"),ae=O_(n,ce,K),oe=!x[0]||!x[1],he=Abe(t,oe?ce:K,n.fixedDirection,W,n.fixedOffset,n,oe),ne=Y?he:Je(he,n.prevInverseDist||[0,0]);if(n.prevDist=j,n.prevInverseDist=he,z[0]===f[0]&&z[1]===f[1]&&ne.every(function(fe){return!fe})&&!R&&!Y)return!1;var _e=ft(t,e,se({offsetWidth:g,offsetHeight:m,direction:h,scale:z,dist:j,delta:te,isPinch:!!a},$K(t,ae,ne,a,e)));return Ve(t,"onScale",_e),_e},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ca(t,e,{});return Ve(t,"onScaleEnd",r),r},dragGroupControlCondition:Y5,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=bs(t,"resizable",e);n.moveableScale=t.scale;var a=sl(t,this,"dragControlStart",e,function(u,f){return zw(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),zw(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=se(se({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Ve(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){V_(t,"onBeforeScale",function(f){Ve(t,"onBeforeScaleGroup",ft(t,e,se(se({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=sl(t,this,"dragControl",e,function(f,h){var g=le(ii(T0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),m=g[0],b=g[1];return se(se({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Pt(o,[m,b])})}),u=se({targets:t.props.targets,events:c},r);return Ve(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=sl(t,this,"dragControlEnd",e),a=ca(t,e,{targets:t.props.targets,events:i});return Ve(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function bc(t,e){return t.map(function(n,r){return Ow(n,e[r],1,2)})}function X5(t,e,n){var r=Kn(t,e),i=Kn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function Xxe(t,e){var n=X5(t[0],t[1],t[2]),r=X5(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var Qxe={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:WR("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=bc(c,u),m=bc(u,c),b=bc(c,f),x=bc(f,c),w=bc(f,h),S=bc(h,f),T=bc(u,h),I=bc(h,u);return Re([e.createElement("div",{className:Xe("line"),key:"middeLine1",style:xm(g,w,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine2",style:xm(m,S,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine3",style:xm(b,T,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine4",style:xm(x,I,s)})],le(XK(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return pr(n,Xe("direction"))&&pr(n,Xe("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=_W(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,m=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:Ss(h,3,4),n.targetInverseMatrix=EK(yo(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,m],[g,m]].map(function(T){return Je(T,c)}),n.nextPoses=n.poses.map(function(T){var I=le(T,2),R=I[0],O=I[1];return ii(n.warpTargetMatrix,[R,O,0,1],4)}),n.startValue=fn(4),n.prevMatrix=fn(4),n.absolutePoses=Fa(o),n.posIndexes=UK(s),Yd(t,e),N_(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=ft(t,e,se({set:function(T){n.startValue=T}},R_(t,e))),S=Ve(t,"onWarpStart",w);return S!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(D_(t,e,"matrix3d"),zp(t,"warpable")){var m=h.map(function(N){return g[N]});m.length>1&&m.push([(m[0][0]+m[1][0])/2,(m[0][1]+m[1][1])/2]);var b=z_(t,r,{horizontal:m.map(function(N){return N[1]+a}),vertical:m.map(function(N){return N[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var S=So({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(N){T[N]=Pt(T[N],S)}),!mbe.every(function(N){return Xxe(N.map(function(z){return f[z]}),N.map(function(z){return T[z]}))}))return!1;var I=OR(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!I.length)return!1;var R=tn(s,I,4),O=BK(n,R,!0),D=tn(yo(o,4),O,4);n.prevMatrix=O;var k=tn(u,O,4),P=O_(n,"matrix3d(".concat(k.join(", "),")"),"matrix3d(".concat(O.join(", "),")"));return zR(e,P),Ve(t,"onWarp",ft(t,e,se({delta:D,matrix:k,dist:O,multiply:tn,transform:P},pi({transform:P},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Ve(t,"onWarpEnd",ca(t,e,{})),r):!1}},Zxe=Xe("area-pieces"),Xb=Xe("area-piece"),PW=Xe("avoid"),Jxe=Xe("view-dragging");function FA(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;rK(e,PW),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function Q5(t){return t.createElement("div",{key:"area_pieces",className:Zxe},t.createElement("div",{className:Xb}),t.createElement("div",{className:Xb}),t.createElement("div",{className:Xb}),t.createElement("div",{className:Xb}))}var DW={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Xe("area","pass"):Xe("area");if(a)return[e.createElement("div",{key:"area",ref:il(t,"areaElement"),className:h}),Q5(e)];if(!r||!i)return[];var g=OR([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),m=g.length?L_(g,!0):"none";return[e.createElement("div",{key:"area",ref:il(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:m}}),Q5(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,m=c.top,b=La(u),x=b.left,w=b.top,S=b.width,T=b.height,I=h?4:3,R=le(op(f,[r-g,i-m],I),2),O=R[0],D=R[1];O-=x,D-=w;var k=[{left:x,top:w,width:S,height:D-10},{left:x,top:w,width:O-10,height:T},{left:x,top:w+D+10,width:S,height:T-D-10},{left:x+O+10,top:w,width:S-O-10,height:T}],P=[].slice.call(s.nextElementSibling.children);k.forEach(function(N,z){P[z].style.cssText="left: ".concat(N.left,"px;top: ").concat(N.top,"px; width: ").concat(N.width,"px; height: ").concat(N.height,"px;")}),nK(s,PW),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,FA(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||FA(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){FA(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&ZH(function(){e.disableNativeEvent=!1})}},ewe=C0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,m=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var S=le(QR(i,b,x),2),T=S[0],I=S[1],R=h?4:3,O=Cn(f,[T,I],R);w=Fw(c,r,Je(O,[g,m]))}else w=Fw(c,r,o);return[e.createElement("div",{className:Xe("control","origin"),style:w,key:"beforeOrigin"})]}});function twe(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var nwe={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new Mye,o=ho(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,m=ft(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(m.targets=u),Ve(t,b,m)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,m=f.inputEvent;t[c].scrollBy(h,g,m.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,se({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?twe:f,g=r.scrollOptions;return n.drag(e,se({container:a,threshold:o,throttleTime:u,getScrollPosition:function(m){return h({scrollContainer:m.container,direction:m.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,se(se({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,se(se({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,se(se({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,se(se({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,se(se({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,se(se({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,se(se({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},OW={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},rwe=C0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=kW(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,m=c.pos4,b=[f,h,g,m],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,S){var T=le(w,2),I=T[0],R=T[1],O=b[I],D=b[R],k=u[I],P=u[R],N=OR([0,0],[100,0],[0,100],[100,100],O,D,k,P);if(N.length)return e.createElement("div",{key:"padding".concat(S),className:Xe("padding"),style:{transform:L_(N,!0)}})})}}),Z5=["nw","ne","se","sw"];function Qb(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var iwe=[1,2,5,6],awe=[0,3,4,7],ed=[1,-1,-1,1],td=[1,1,-1,-1];function ZR(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var m=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(ds(w,r,e)),w}else{var w=Math.max(0,m===1?x[0]-i:s-x[0]);return c.push(ds(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function RW(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function NW(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,m=t.slice(0,g),b=t.slice(g+1),x=m.length,w=b.length,S=w>0,T=le(m,4),I=T[0],R=I===void 0?"0px":I,O=T[1],D=O===void 0?R:O,k=T[2],P=k===void 0?R:k,N=T[3],z=N===void 0?D:N,L=le(b,4),B=L[0],j=B===void 0?R:B,W=L[1],Q=W===void 0?S?j:D:W,q=L[2],Y=q===void 0?S?j:P:q,Z=L[3],ie=Z===void 0?S?Q:z:Z,J=[R,D,P,z].map(function(ae){return Jt(ae,e)}),U=[j,Q,Y,ie].map(function(ae){return Jt(ae,n)}),X=J.slice(),te=U.slice();o=le(Qb([X[0],X[1]],e),2),X[0]=o[0],X[1]=o[1],c=le(Qb([X[3],X[2]],e),2),X[3]=c[0],X[2]=c[1],u=le(Qb([te[0],te[3]],n),2),te[0]=u[0],te[3]=u[1],f=le(Qb([te[1],te[2]],n),2),te[1]=f[0],te[2]=f[1];var K=s?X:X.slice(0,Math.max(a[0],x)),ce=s?te:te.slice(0,Math.max(a[1],w));return Re(Re([],le(K.map(function(ae,oe){var he=Z5[oe];return{virtual:oe>=x,horizontal:ed[oe],vertical:0,pos:[r+ae,i+(td[oe]===-1?n:0)],sub:!0,raw:J[oe],direction:he}})),!1),le(ce.map(function(ae,oe){var he=Z5[oe];return{virtual:oe>=w,horizontal:0,vertical:td[oe],pos:[r+(ed[oe]===-1?e:0),i+ae],sub:!0,raw:U[oe],direction:he}})),!1)}function swe(t,e,n,r,i){i===void 0&&(i=e.length);var a=RW(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function owe(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=RW(t.slice(n)),g=h.horizontalRange,m=h.verticalRange;if(r>-1)for(var b=ed[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=td[x]===1?f:c,S=0;if(r===x?S=a:x===0?S=u+b:ed[x]===-1&&(S=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:ed[x],vertical:0,pos:[S,w]}),e.splice(n+x,0,[S,w]),x===0)break}else if(i>-1){var T=td[i]===1?s-f:c-s;if(g[1]===0&&m[1]===0){var I=[u+T,f];t.push({horizontal:ed[0],vertical:0,pos:I}),e.push(I)}for(var R=m[0],x=m[1];x<=i;++x){var S=ed[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+T:td[x]===1?w=e[n+R][1]:td[x]===-1&&(w=c-(e[n+R][1]-f)),t.push({horizontal:0,vertical:td[x],pos:[S,w]}),e.push([S,w]),x===0)break}}}function lwe(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var cwe=[[0,-1,"n"],[1,0,"e"]],uwe=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function JR(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(D){return"".concat(ds(D[0],a,r)," ").concat(ds(D[1],s,r))});if(f||c==="inset"){var g=n[1][1],m=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,m,x,b].map(function(D){return"".concat(D,"px")});var w=[g,a-m,s-x,b].map(function(D,k){return ds(D,k%2?a:s,r)});if(n.length>8){var S=le(Je(n[4],n[0]),2),T=S[0],I=S[1];w.push.apply(w,Re(["round"],le(ZR(u.slice(8).map(function(D,k){return se(se({},D),{pos:n[k]})}),r,T,I,b,g,m,x).styles),!1))}return w}else if(h||c==="ellipse"){var R=n[0],O=ds(ke(n[1][1]-R[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[O]:[ds(ke(n[2][0]-R[0]),a,r),O];return w.push("at",ds(R[0],a,r),ds(R[1],s,r)),w}}function $w(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return uwe.map(function(s){var o=le(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:ke(u),horizontal:ke(c),direction:f,pos:[h,g]}})}function MW(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[ke(e[1]-e[0]),ke(n[1]-n[0])]}function J5(t,e,n,r,i){var a,s,o,c,u,f,h,g,m;if(t){var b=i;if(!b){var x=zi(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var S=QH(b),T=S.prefix,I=T===void 0?b:T,R=S.value,O=R===void 0?"":R,D=I==="circle",k=" ";if(I==="polygon"){var P=sd(O||"0% 0%, 100% 0%, 100% 100%, 0% 100%");k=",";var N=P.map(function(gt){var Ct=le(gt.split(" "),2),kt=Ct[0],at=Ct[1];return{vertical:1,horizontal:1,pos:[Jt(kt,e),Jt(at,n)]}}),z=Rd(N.map(function(gt){return gt.pos}));return{type:I,clipText:b,poses:N,splitter:k,left:z.minX,right:z.maxX,top:z.minY,bottom:z.maxY}}else if(D||I==="ellipse"){var L="",B="",j=0,W=0,P=Yc(O);if(D){var Q="";a=le(P,4),s=a[0],Q=s===void 0?"50%":s,o=a[2],L=o===void 0?"50%":o,c=a[3],B=c===void 0?"50%":c,j=Jt(Q,Math.sqrt((e*e+n*n)/2)),W=j}else{var q="",Y="";u=le(P,5),f=u[0],q=f===void 0?"50%":f,h=u[1],Y=h===void 0?"50%":h,g=u[3],L=g===void 0?"50%":g,m=u[4],B=m===void 0?"50%":m,j=Jt(q,e),W=Jt(Y,n)}var Z=[Jt(L,e),Jt(B,n)],N=Re([{vertical:1,horizontal:1,pos:Z,direction:"nesw"}],le(cwe.slice(0,D?1:2).map(function(kt){return{vertical:ke(kt[1]),horizontal:kt[0],direction:kt[2],sub:!0,pos:[Z[0]+kt[0]*j,Z[1]+kt[1]*W]}})),!1);return{type:I,clipText:b,radiusX:j,radiusY:W,left:Z[0]-j,top:Z[1]-W,right:Z[0]+j,bottom:Z[1]+W,poses:N,splitter:k}}else if(I==="inset"){var P=Yc(O||"0 0 0 0"),ie=P.indexOf("round"),J=(ie>-1?P.slice(0,ie):P).length,U=P.slice(J+1),X=le(P.slice(0,J),4),te=X[0],K=X[1],ce=K===void 0?te:K,ae=X[2],oe=ae===void 0?te:ae,he=X[3],ne=he===void 0?ce:he,_e=le([te,oe].map(function(kt){return Jt(kt,n)}),2),fe=_e[0],ee=_e[1],Ce=le([ne,ce].map(function(kt){return Jt(kt,e)}),2),Pe=Ce[0],ze=Ce[1],Le=e-ze,Be=n-ee,Ie=NW(U,Le-Pe,Be-fe,Pe,fe),N=Re(Re([],le($w(fe,Le,Be,Pe)),!1),le(Ie),!1);return{type:"inset",clipText:b,poses:N,top:fe,left:Pe,right:Le,bottom:Be,radius:U,splitter:k}}else if(I==="rect"){var P=sd(O||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));k=",";var Oe=le(P.map(function(ct){var gn=x0(ct).value;return gn}),4),Ge=Oe[0],ze=Oe[1],ee=Oe[2],Pe=Oe[3],N=$w(Ge,ze,ee,Pe);return{type:"rect",clipText:b,poses:N,top:Ge,right:ze,bottom:ee,left:Pe,values:P,splitter:k}}}}}function dwe(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(j){return j==="w"||j==="e"}),h=u.filter(function(j){return j==="n"||j==="s"}),g=f[0],m=h[0];c[e]=n;var b=le(MW(t),2),x=b[0],w=b[1],S=x&&w?x/w:0;if(S&&i){var T=(e+4)%8,I=t[T].pos,R=[0,0];s.indexOf("w")>-1?R[0]=-1:s.indexOf("e")>-1&&(R[0]=1),s.indexOf("n")>-1?R[1]=-1:s.indexOf("s")>-1&&(R[1]=1);var O=AW([x,w],n,S,R,!0),D=x+O[0],k=w+O[1],P=I[1],N=I[1],z=I[0],L=I[0];R[0]===-1?z=L-D:R[0]===1?L=z+D:(z=z-D/2,L=L+D/2),R[1]===-1?P=N-k:(R[1]===1||(P=N-k/2),N=P+k);var B=$w(P,L,N,z);t.forEach(function(j,W){c[W][0]=B[W].pos[0]-j.pos[0],c[W][1]=B[W].pos[1]-j.pos[1]})}else t.forEach(function(j,W){var Q=j.direction;Q&&(Q.indexOf(g)>-1&&(c[W][0]=n[0]),Q.indexOf(m)>-1&&(c[W][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),m&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(j){var W=j==="n"||j==="s";t.forEach(function(Q,q){var Y=Q.direction,Z=Q.horizontal,ie=Q.vertical;!Y||Y.indexOf(j)===-1||(c[q]=[W||!Z?0:n[0],!W||!ie?0:n[1]])})}):c[e]=n;return c}function fwe(t,e){var n=le(VK(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var m=iwe.indexOf(o),b=awe.indexOf(o),x=f.length;if(owe(f,g,8,m,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=JR(t,s,g),S="".concat(u,"(").concat(w.join(h),")");Ve(t,"onClip",ft(t,e,se({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:S,distX:0,distY:0},pi({clipPath:S},e))))}function hwe(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(m){return m.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(swe(o,u,i,8,f),f===o.length))return}else return;var h=JR(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Ve(t,"onClip",ft(t,e,se({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},pi({clipPath:g},e))))}var pwe={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,m=c.is3d,b=c.left,x=c.top,w=c.pos1,S=c.pos2,T=c.pos3,I=c.pos4,R=c.clipPathState,O=c.snapBoundInfos,D=c.rotation;if(!u||o)return[];var k=J5(u,f,h,i||"inset",R||r);if(!k)return[];var P=m?4:3,N=k.type,z=k.poses,L=z.map(function(ze){var Le=Cn(g,ze.pos,P);return[Le[0]-b,Le[1]-x]}),B=[],j=[],W=N==="rect",Q=N==="inset",q=N==="polygon";if(W||Q||q){var Y=Q?L.slice(0,8):L;j=Y.map(function(ze,Le){var Be=Le===0?Y[Y.length-1]:Y[Le-1],Ie=Kn(Be,ze),Oe=vW(Be,ze);return e.createElement("div",{key:"clipLine".concat(Le),className:Xe("line","clip-line","snap-control"),"data-clip-index":Le,style:{width:"".concat(Oe,"px"),transform:"translate(".concat(Be[0],"px, ").concat(Be[1],"px) rotate(").concat(Ie,"rad) scaleY(").concat(s,")")}})})}if(B=L.map(function(ze,Le){return e.createElement("div",{key:"clipControl".concat(Le),className:Xe("control","clip-control","snap-control"),"data-clip-index":Le,style:{transform:"translate(".concat(ze[0],"px, ").concat(ze[1],"px) rotate(").concat(D,"rad) scale(").concat(s,")")}})}),Q&&B.push.apply(B,Re([],le(L.slice(8).map(function(ze,Le){return e.createElement("div",{key:"clipRadiusControl".concat(Le),className:Xe("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Le,style:{transform:"translate(".concat(ze[0],"px, ").concat(ze[1],"px) rotate(").concat(D,"rad) scale(").concat(s,")")}})})),!1)),N==="circle"||N==="ellipse"){var Z=k.left,ie=k.top,J=k.radiusX,U=k.radiusY,X=le(Je(Cn(g,[Z,ie],P),Cn(g,[0,0],P)),2),te=X[0],K=X[1],ce="none";if(!a){for(var ae=Math.max(10,J/5,U/5),oe=[],he=0;he<=ae;++he){var ne=Math.PI*2/ae*he;oe.push([J+(J-s)*Math.cos(ne),U+(U-s)*Math.sin(ne)])}oe.push([J,-2]),oe.push([-2,-2]),oe.push([-2,U*2+2]),oe.push([J*2+2,U*2+2]),oe.push([J*2+2,-2]),oe.push([J,-2]),ce="polygon(".concat(oe.map(function(ze){return"".concat(ze[0],"px ").concat(ze[1],"px")}).join(", "),")")}B.push(e.createElement("div",{key:"clipEllipse",className:Xe("clip-ellipse","snap-control"),style:{width:"".concat(J*2,"px"),height:"".concat(U*2,"px"),clipPath:ce,transform:"translate(".concat(-b+te,"px, ").concat(-x+K,"px) ").concat(L_(g))}}))}if(a){var _e=La(Re([w,S,T,I],le(L),!1)),fe=_e.width,ee=_e.height,Ce=_e.left,Pe=_e.top;if(q||W||Q){var oe=Q?L.slice(0,8):L;B.push(e.createElement("div",{key:"clipArea",className:Xe("clip-area","snap-control"),style:{width:"".concat(fe,"px"),height:"".concat(ee,"px"),transform:"translate(".concat(Ce,"px, ").concat(Pe,"px)"),clipPath:"polygon(".concat(oe.map(function(Le){return"".concat(Le[0]-Ce,"px ").concat(Le[1]-Pe,"px")}).join(", "),")")}}))}}return O&&["vertical","horizontal"].forEach(function(ze){var Le=O[ze],Be=ze==="horizontal";Le.isSnap&&j.push.apply(j,Re([],le(Le.snap.posInfos.map(function(Ie,Oe){var Ge=Ie.pos,gt=Je(Cn(g,Be?[0,Ge]:[Ge,0],P),[b,x]),Ct=Je(Cn(g,Be?[f,Ge]:[Ge,h],P),[b,x]);return Av(e,"",gt,Ct,s,"clip".concat(ze,"snap").concat(Oe),"guideline")})),!1)),Le.isBound&&j.push.apply(j,Re([],le(Le.bounds.map(function(Ie,Oe){var Ge=Ie.pos,gt=Je(Cn(g,Be?[0,Ge]:[Ge,0],P),[b,x]),Ct=Je(Cn(g,Be?[f,Ge]:[Ge,h],P),[b,x]);return Av(e,"",gt,Ct,s,"clip".concat(ze,"bounds").concat(Oe),"guideline","bounds","bold")})),!1))}),Re(Re([],le(B),!1),le(j),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,se(se({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=J5(s,o,c,i||"inset",a);if(!g)return!1;var m=g.clipText,b=g.type,x=g.poses,w=Ve(t,"onClipStart",ft(t,e,{clipType:b,clipStyle:m,poses:x.map(function(S){return S.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=m,Yd(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,m=c.clipPath;if(!m)return!1;var b=Nd(t.props,"clippable"),x=b.keepRatio,w=0,S=0,T=s.draggable,I=So(e);o&&T?(n=le(T.prevBeforeDist,2),w=n[0],S=n[1]):(r=le(I,2),w=r[0],S=r[1]);var R=[w,S],O=t.state,D=O.width,k=O.height,P=!h&&!u&&!f,N=m.type,z=m.poses,L=m.splitter,B=z.map(function(vt){return vt.pos});P&&(w=-w,S=-S);var j=!u||z[g].direction==="nesw",W=N==="inset"||N==="rect",Q=z.map(function(){return[0,0]});if(u&&!j){var q=z[g],Y=q.horizontal,Z=q.vertical,ie=[w*ke(Y),S*ke(Z)];Q=dwe(z,g,ie,W,x)}else j&&(Q=B.map(function(){return[w,S]}));var J=B.map(function(vt,Tn){return Pt(vt,Q[Tn])}),U=Re([],le(J),!1);O.snapBoundInfos=null;var X=m.type==="circle",te=m.type==="ellipse";if(X||te){var K=La(J),ce=ke(K.bottom-K.top),ae=ke(te?K.right-K.left:ce),oe=J[0][1]+ce,he=J[0][0]-ae,ne=J[0][0]+ae;X&&(U.push([ne,K.bottom]),Q.push([1,0])),U.push([K.left,oe]),Q.push([0,1]),U.push([he,K.bottom]),Q.push([1,0])}var _e=dW((b.clipHorizontalGuidelines||[]).map(function(vt){return Jt("".concat(vt),k)}),(b.clipVerticalGuidelines||[]).map(function(vt){return Jt("".concat(vt),D)}),D,k),fe=[],ee=[];if(X||te)fe=[U[4][0],U[2][0]],ee=[U[1][1],U[3][1]];else if(W){var Ce=[U[0],U[2],U[4],U[6]],Pe=[Q[0],Q[2],Q[4],Q[6]];fe=Ce.filter(function(vt,Tn){return Pe[Tn][0]}).map(function(vt){return vt[0]}),ee=Ce.filter(function(vt,Tn){return Pe[Tn][1]}).map(function(vt){return vt[1]})}else fe=U.filter(function(vt,Tn){return Q[Tn][0]}).map(function(vt){return vt[0]}),ee=U.filter(function(vt,Tn){return Q[Tn][1]}).map(function(vt){return vt[1]});var ze=[0,0],Le=z5(_e,b.clipTargetBounds&&{left:0,top:0,right:D,bottom:k},fe,ee,5,5),Be=Le.horizontal,Ie=Le.vertical,Oe=Be.offset,Ge=Ie.offset;if(Be.isBound&&(ze[1]+=Oe),Ie.isBound&&(ze[0]+=Ge),(te||X)&&Q[0][0]===0&&Q[0][1]===0){var K=La(J),gt=K.bottom-K.top,Ct=te?K.right-K.left:gt,kt=Ie.isBound?ke(Ge):Ie.snapIndex===0?-Ge:Ge,at=Be.isBound?ke(Oe):Be.snapIndex===0?-Oe:Oe;Ct-=kt,gt-=at,X&&(gt=rW(Ie,Be)>0?gt:Ct,Ct=gt);var wt=U[0];U[1][1]=wt[1]-gt,U[2][0]=wt[0]+Ct,U[3][1]=wt[1]+gt,U[4][0]=wt[0]-Ct}else if(W&&x&&u){var ct=le(MW(z),2),gn=ct[0],Kt=ct[1],Mr=gn&&Kt?gn/Kt:0,Xa=z[g],Qa=Xa.direction||"",Za=U[1][1],oe=U[5][1],he=U[7][0],ne=U[3][0];ke(Oe)<=ke(Ge)?Oe=di(Oe)*ke(Ge)/Mr:Ge=di(Ge)*ke(Oe)*Mr,Qa.indexOf("w")>-1?he-=Ge:Qa.indexOf("e")>-1?ne-=Ge:(he+=Ge/2,ne-=Ge/2),Qa.indexOf("n")>-1?Za-=Oe:Qa.indexOf("s")>-1?oe-=Oe:(Za+=Oe/2,oe-=Oe/2);var si=$w(Za,ne,oe,he);U.forEach(function(Vi,pa){var oi;oi=le(si[pa].pos,2),Vi[0]=oi[0],Vi[1]=oi[1]})}else U.forEach(function(vt,Tn){var An=Q[Tn];An[0]&&(vt[0]-=Ge),An[1]&&(vt[1]-=Oe)});var mn=JR(t,m,J),vn="".concat(N,"(").concat(mn.join(L),")");if(O.clipPathState=vn,X||te)fe=[U[4][0],U[2][0]],ee=[U[1][1],U[3][1]];else if(W){var Ce=[U[0],U[2],U[4],U[6]];fe=Ce.map(function(Tn){return Tn[0]}),ee=Ce.map(function(Tn){return Tn[1]})}else fe=U.map(function(vt){return vt[0]}),ee=U.map(function(vt){return vt[1]});if(O.snapBoundInfos=z5(_e,b.clipTargetBounds&&{left:0,top:0,right:D,bottom:k},fe,ee,1,1),T){var Mt=O.is3d,ks=O.allMatrix,jl=Mt?4:3,zl=ze;o&&(zl=[R[0]+ze[0]-I[0],R[1]+ze[1]-I[1]]),T.deltaOffset=tn(ks,[zl[0],zl[1],0,0],jl)}return Ve(t,"onClip",ft(t,e,se({clipEventType:"changed",clipType:N,poses:J,clipStyle:vn,clipStyles:mn,distX:w,distY:S},pi((i={},i[N==="rect"?"clip":"clipPath"]=vn,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Ve(t,"onClipEnd",ca(t,e,{})),i&&(o?hwe(t,e):a&&fwe(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},gwe={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":pr(e.inputEvent.target,Xe("origin"))},dragControlStart:function(t,e){var n=e.datas;Yd(t,e);var r=ft(t,e,{dragStart:ui.dragStart(t,new ip().dragStart([0,0],e))}),i=Ve(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=le(So(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,m=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=m?4:3,S=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(S=T)}var I=Pt(n.startOrigin,S),R=Pt(n.startTargetOrigin,S),O=Je(S,n.prevOrigin),D=k0(h,g,I,w),k=t.getRect(),P=La(Xd(D,u,f,w)),N=[k.left-P.left,k.top-P.top];n.prevOrigin=S;var z=[ds(R[0],u,x),ds(R[1],f,x)].join(" "),L=ui.drag(t,I0(e,t.state,N,!!r)),B=ft(t,e,se(se({width:u,height:f,origin:I,dist:S,delta:O,transformOrigin:z,drag:L},pi({transformOrigin:z,transform:L.transform},e)),{afterTransform:L.transform}));return Ve(t,"onDragOrigin",B),B},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Ve(t,"onDragOriginEnd",ca(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function mwe(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];vwe(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function vwe(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function ywe(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function eB(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Yc(t),NW(a,e,n,0,0,r,i)}function tB(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=ZR(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=lwe(h,u),m=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=ft(t,e,se({horizontals:m,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},pi({borderRadius:x},e)));return Ve(t,"onRound",w),w}function nB(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=KR(s).borderRadius,r.borderRadius=i))}return i}var bwe={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Xe("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,m=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,S=h.roundPadding,T=S===void 0?0:S,I=h.isDisplayShadowRoundControls,R=h.groupable;if(!r)return null;var O=f||nB(t),D=o?4:3,k=eB(O,i,a,m,!0);if(!k)return null;var P=0,N=0,z=R?[0,0]:[c,u];return k.map(function(L,B){var j=L.horizontal,W=L.vertical,Q=L.direction||"",q=Re([],le(L.pos),!1);N+=Math.abs(j),P+=Math.abs(W),j&&Q.indexOf("n")>-1&&(q[1]-=T),W&&Q.indexOf("w")>-1&&(q[0]-=T),j&&Q.indexOf("s")>-1&&(q[1]+=T),W&&Q.indexOf("e")>-1&&(q[0]+=T);var Y=Je(Cn(s,q,D),z),Z=I&&I!=="horizontal",ie=L.vertical?P<=x[1]&&(Z||!L.virtual):N<=x[0]&&(I||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(B),className:Xe("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":B,style:{display:ie?"block":"none",transform:"translate(".concat(Y[0],"px, ").concat(Y[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=ft(t,e,{}),g=Ve(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,Yd(t,e);var m=t.props,b=m.roundRelative,x=m.minRoundControls,w=x===void 0?[0,0]:x,S=t.state,T=S.width,I=S.height;r.isRound=!0,r.prevDist=[0,0];var R=nB(t),O=eB(R||"",T,I,w,!0)||[];return r.controlPoses=O,S.borderRadiusState=ZR(O,b,T,I).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=le(So(e),2),s=a[0],o=a[1],c=[s,o],u=Je(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,m=g.width,b=g.height,x=r[i],w=x.vertical,S=x.horizontal,T=r.map(function(R){var O=R.horizontal,D=R.vertical,k=[O*S*c[0],D*w*c[1]];if(O){if(h[0]===1)return k;if(h[0]<4&&O!==S)return k}else{if(h[1]===0)return k[1]=D*S*c[0]/m*b,k;if(w){if(h[1]===1)return k;if(h[1]<4&&D!==w)return k}}return[0,0]});T[i]=c;var I=r.map(function(R,O){return se(se({},R),{pos:Pt(R.pos,T[O])})});return i<4?I.slice(0,i+1).forEach(function(R){R.virtual=!1}):I.slice(4,i+1).forEach(function(R){R.virtual=!1}),n.prevDist=[s,o],tB(t,e,c,u,I)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(S){var T=S.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))ywe(u,s);else if(o&&(g===!0||g==="line")){var m=le(VK(t,e),2),b=m[0],x=m[1];mwe(u,c,b,x)}f!==u.filter(function(S){var T=S.virtual;return T}).length&&tB(t,e,[0,0],[0,0],u)}var w=ca(t,e,{});return Ve(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=bs(t,"roundable",e),s=se({targets:t.props.targets,events:a.map(function(o,c){return se(se({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Ve(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=bs(t,"roundable",e),s=se({targets:t.props.targets,events:a.map(function(o,c){return se(se(se({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),pi({borderRadius:n.borderRadius},o))})},n);return Ve(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=bs(t,"roundable",e);V_(t,"onRound",function(o){var c=se({targets:t.props.targets,events:i.map(function(u,f){return se(se(se({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),pi({borderRadius:o.borderRadius},u))})},o);Ve(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=se({targets:t.props.targets,events:i.map(function(o,c){var u;return se(se({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Ve(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function xwe(t,e){var n=e?4:3,r=fn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var jW={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(AK(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=xwe(o,r)?[]:Yc(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ft(t,e,{setTransform:function(n){e.datas.startTransforms=cr(n)?n:Yc(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ft(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRender",ft(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Ve(t,"onBeforeRenderEnd",ft(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=bs(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Ve(t,"onBeforeRenderGroupStart",ft(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=bs(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Ve(t,"onBeforeRenderGroup",ft(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Ve(t,"onBeforeRenderGroupEnd",ft(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},zW={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Ve(t,"onRenderStart",ft(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Ve(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Ve(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Ve(t,"onRenderGroupStart",ft(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=bs(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Ve(t,"onRenderGroup",ft(t,e,se(se({isPinch:!!e.isPinch,targets:t.props.targets,transform:Gb(e),transformObject:{}},pi(Hb(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=bs(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Ve(t,"onRenderGroupEnd",ft(t,e,se({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Gb(e)},pi(Hb(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return rp(jw(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ft(t,e,se({isPinch:!!e.isPinch,transformObject:n,transform:Gb(e)},pi(Hb(e))))},fillDragEndParams:function(t,e){var n={};return rp(jw(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ft(t,e,se({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Gb(e)},pi(Hb(e))))}};function Gm(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var m=Re([],le(e),!1);if(h){var b=a.requestAble;m.some(function(B){return B.name===b})||m.push.apply(m,Re([],le(t.props.ables.filter(function(B){return B.name===b})),!1))}if(!m.length||m.every(function(B){return B.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var S=!1,T=function(){var B;S=!0,(B=a.stop)===null||B===void 0||B.call(a)},I=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());I&&t.updateRect(i,!0,!1);var R=a.datas,O=g?"controlGesto":"targetGesto",D=t[O],k=function(B,j,W){if(!(j in B)||D!==t[O])return!1;var Q=B.name,q=R[Q]||(R[Q]={});if(o&&(q.isEventStart=!W||!B[W]||B[W](t,a)),!q.isEventStart)return!1;var Y=B[j](t,se(se({},a),{stop:T,datas:q,originalDatas:R,inputTarget:w}));return t._emitter.off(),o&&Y===!1&&(q.isEventStart=!1),Y};I&&m.forEach(function(B){B.unset&&B.unset(t)}),k(jW,"drag".concat(r).concat(i));var P=0,N=0;n.forEach(function(B){if(S)return!1;var j="".concat(B).concat(r).concat(i),W="".concat(B).concat(r,"Condition");i===""&&!h&&$xe(t.state,a);var Q=m.filter(function(Z){return Z[j]});Q=Q.filter(function(Z,ie){return Z.name&&Q.indexOf(Z)===ie});var q=Q.filter(function(Z){return k(Z,j,W)}),Y=q.length;S&&++P,Y&&++N,!S&&o&&Q.length&&!Y&&(P+=Q.filter(function(Z){var ie=Z.name,J=R[ie];return J.isEventStart?Z.dragRelation!=="strong":!1}).length?1:0)}),(!u||N)&&k(zW,"drag".concat(r).concat(i));var z=D!==t[O]||P===n.length;if((c||S||z)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(B){B.state.gestos={}}),m.forEach(function(B){B.unset&&B.unset(t)})),o&&!z&&!h&&N&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||z)return!1;if(!o&&N&&!s||c){var L=t.props.flushSync||pW;L(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&N&&!s&&Gm(t,e,n,r,i+"After",a),!0}function eN(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||pr(a,"moveable-area")||pr(a,"moveable-padding")||pr(a,"moveable-edgeDraggable")}}function LW(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=eN(t);return BW(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function VW(t,e){var n=t.controlBox,r=[];r.push(n);var i=eN(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return BW(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function BW(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,m=s.preventDefault,b=m===void 0?!0:m,x=s.preventRightClick,w=x===void 0?!0:x,S=s.preventWheelClick,T=S===void 0?!0:S,I=s.dragContainer,R=ho(I,!0),O={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:R||Bc(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(P){return t.controlBox.contains(P.target)},checkInput:a?h:!1,dragFocusedInput:g},D=new Kye(e,O),k=r==="Control";return["drag","pinch"].forEach(function(P){["Start","","End"].forEach(function(N){D.on("".concat(P).concat(N),function(z){var L,B=z.eventType,j=P==="drag"&&z.isPinch;if(i[B]&&!i[B](z)){z.stop();return}if(!j){var W=P==="drag"?[P]:["drag",P],Q=Re([],le(t[n]),!1),q=Gm(t,Q,W,r,N,z);q?(t.props.stopPropagation||N==="Start"&&k)&&((L=z?.inputEvent)===null||L===void 0||L.stopPropagation()):z.stop()}})})}),D}var wwe=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function _we(t,e,n,r){var i;n===void 0&&(n=e);var a=GK(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,m=a.zoom,b=jbe(h,n),x=b.matrixes,w=b.is3d,S=b.offsetContainer,T=b.zoom,I=r,R=4,O=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,D=c,k=fn(R),P=fn(R),N=fn(R),z=fn(R),L=s.length,B=x.map(function(ie){return se(se({},ie),{matrix:ie.matrix?Re([],le(ie.matrix),!1):void 0})}).reverse();s.reverse(),!o&&I&&(D=Ss(D,3,4),oP(s)),!w&&I&&oP(B),B.forEach(function(ie){P=tn(P,ie.matrix,R)});var j=n||ou(t),W=((i=B[0])===null||i===void 0?void 0:i.target)||Cv(j,j,!0).offsetParent,Q=B.slice(1).reduce(function(ie,J){return tn(ie,J.matrix,R)},fn(R));s.forEach(function(ie,J){if(L-2===J&&(N=k.slice()),L-1===J&&(z=k.slice()),!ie.matrix){var U=s[J+1],X=Vxe(ie,U,W,R,tn(Q,k,R));ie.matrix=Od(X,R)}k=tn(k,ie.matrix,R)});var q=!O&&o;D||(D=fn(q?4:3));var Y=L_(O&&D.length===16?Ss(D,4,3):D,q),Z=P;return P=EK(P,R,R),{hasZoom:m!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:P,originalRootMatrix:Z,beforeMatrix:N,offsetMatrix:z,allMatrix:k,targetMatrix:D,targetTransform:Y,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:I,offsetContainer:h,offsetRootContainer:S}}function Swe(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=yW(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=_we(t,e,n,r),f=Oh(u.allMatrix,u.transformOrigin,i,a);o=se(se({},u),f);var h=Oh(u.allMatrix,[50,50],100,100);s=bW([h.pos1,h.pos2],h.direction)}var g=4;return se(se(se({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:fn(g),rootMatrix:fn(g),beforeMatrix:fn(g),offsetMatrix:fn(g),allMatrix:fn(g),targetMatrix:fn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function dP(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=Wb(),u=Wb(),f=Wb(),h=Wb(),g=[0,0],m={},b=Swe(e,n,i,!0);if(e){var x=zi(e);a.forEach(function(B){m[B]=x(B)});var w=b.is3d?4:3,S=Oh(b.offsetMatrix,Pt(b.transformOrigin,TK(b.targetMatrix,w)),b.width,b.height);s=S.direction,o=Pt(S.origin,[S.left-b.left,S.top-b.top]),h=qm(b.offsetRootContainer);var T=Cv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var I=Oh(tn(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),R=Oh(b.originalRootMatrix,Bw(zi(T)("transformOrigin")).map(function(B){return parseFloat(B)}),T.offsetWidth,T.offsetHeight);if(c=VA(I,h),f=VA(R,h,T,!0),t){var O=I.left,D=I.top;u=VA({left:O,top:D,bottom:D,right:D},h)}}else{c=qm(e),f=Mbe(T),t&&(u=qm(t));var k=f.left,P=f.top,N=f.clientLeft,z=f.clientTop,L=[c.left-k,c.top-P];g=Je(op(b.rootMatrix,L,4),[N+b.left,z+b.top])}}return se({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:m,offsetDelta:g},b)}function rB(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Rd([e,n,r,i]),s=[a.minX,a.minY],o=Je(t.origin,s);return e=Je(e,s),n=Je(n,s),r=Je(r,s),i=Je(i,s),se(se({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var lp=(function(t){A0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=se({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},dP(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new P_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}L0e(n._observerId),n._observerId=ZH(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,m=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=le(i||[0,0],2),x=b[0],w=b[1],S=r.left,T=r.top,I=r.target,R=r.direction,O=r.hasFixed,D=r.offsetDelta,k=n.targets,P=this.isDragging(),N={};this.getEnabledAbles().forEach(function(Q){N["data-able-".concat(Q.name.toLowerCase())]=!0});var z=this._getAbleClassName(),L=k&&k.length&&(I||h)||s||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,j=[S-x,T-w];!h&&n.useAccuratePosition&&(j[0]+=D[0],j[1]+=D[1]);var W={position:O?"fixed":"absolute",display:L?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(j[0],"px, ").concat(j[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(W["--moveable-line-padding"]=g),m&&(W["--moveable-control-padding"]=m),ys(f,se({cspNonce:c,ref:il(this,"controlBox"),className:"".concat(Xe("control-box",R===-1?"reverse":"",P?"dragging":"")," ").concat(z," ").concat(a)},N,{onClick:this._onPreventClick,style:W}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),_h(this,!1),_h(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return ji(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(MR)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&eN(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if(Np(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=se({width:0,height:0},n);var g=f.left,m=f.top,b=f.width,x=f.height,w=A5([a,s,c,o],u),S=Fye(w,[[g,m],[g+b,m],[g+b,m+x],[g,m+x]]),T=kK(w);return!S||!T?0:Math.min(100,S/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?Wk([n,r],A5([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&ap(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=dP(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var m=rB(a.persistData);for(var b in m)g[b]=m[b]}s&&ap(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Fa(this.state),i=le(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=La(r),f=n.width,h=n.height,g=u.width,m=u.height,b=u.left,x=u.top,w=[n.left,n.top],S=Pt(w,n.origin),T=Pt(w,n.beforeOrigin),I=n.transformOrigin;return{width:g,height:m,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:S,transformOrigin:I,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&lP(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&lP(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return Hxe(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=ji(c,function(S){return S.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,m=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=Re([],le(o[m]),!1),w={request:function(S){return Gm(a,x,["drag"],b,"",se(se({},h.request(S)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return Gm(a,x,["drag"],b,"End",se(se({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return Gm(a,x,["drag"],b,"Start",se(se({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,m=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var S=kW(i||{}),T=S.left,I=S.top,R=S.bottom,O=S.right,D=c?4:3,k=[];x?k=s:this.controlBox&&r.groupable?k=a:k=Pt(a,[m,b]);var P=Nw(D,Od(k.map(function(W){return-W}),D),o,Od(s,D)),N=Ia(P,u,[-T,-I],D),z=Ia(P,f,[O,-I],D),L=Ia(P,h,[-T,R],D),B=Ia(P,g,[O,R],D);n.renderPoses=[N,z,L,B],n.renderLines=[[N,z],[z,B],[B,L],[L,N]];{var j=w/2;n.renderLines=[[Ia(P,u,[-T-j,-I],D),Ia(P,f,[O+j,-I],D)],[Ia(P,f,[O,-I-j],D),Ia(P,g,[O,R+j],D)],[Ia(P,g,[O+j,R],D),Ia(P,h,[-T-j,R],D)],[Ia(P,h,[-T,R+j],D),Ia(P,u,[-T,-I-j],D)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!cP(o,r),f=u||!cP(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=OK(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=rB(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=Yb(s,[o,c],a),h=Yb(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:ys};return this.renderState={},Uxe(TW(Yb(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},Re([],le(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(_h(this,!1),this.updateState({gestos:{}})),r||_h(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=LW(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=VW(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=ho(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:ys};return c.renderLines.map(function(f,h){return Av(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=bl(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=Yb(u,[f]),g=h.length>0,m=a[f];if(!g){m&&(m.destroy(),a[f]=null);return}m||(m=new wwe(i,n,f),a[f]=m),m.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=ho(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=ho(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Re(Re([],le(this._getAbleViewClassNames()),!1),[this.isDragging()?Jxe:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=EW(n.filter(Boolean),function(u){return u}).map(function(u){var f=le(u,1),h=f[0];return h}),a=this._viewClassNames,s=w0(a,i),o=s.removed,c=s.added;o.forEach(function(u){rK(r,a[u])}),c.forEach(function(u){nK(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,m=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[m])===null||h===void 0)&&h.isEventStart||!((g=c[m])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Xe("".concat(m).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=Bc(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=Bc(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=ibe(u),m=g.next();!m.done;m=g.next()){var b=m.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{m&&!m.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:pW,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(uK),tN={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=Sh(t,"parentPosition",[s,o],function(b){return b.join(",")}),m=Sh(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),Re(Re([],le(i.map(function(b,x){return e.createElement(lp,{key:"moveable"+x,ref:WH(t,"moveables",x),target:b,origin:!1,requestStyles:m,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),le(TW(f.map(function(b,x){var w=b.pos1,S=b.pos2,T=b.pos3,I=b.pos4,R=[w,S,T,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(O,D){var k=le(O,2),P=k[0],N=k[1];return Av(e,"",Je(R[P],g),Je(R[N],g),u,"group-rect-".concat(x,"-").concat(D))})}))),!1)}},Ewe=C0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Ve(t,"onClick",ft(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=yl(i,function(c){return c.contains(r)}),o=a>-1),Ve(t,"onClickGroup",ft(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Yf(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),se(se({},t),{datas:e})}var Twe=C0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?WK(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&pr(i,Xe("direction"))&&pr(i,Xe("edge"))&&pr(i,Xe("edgeDraggable"))},dragStart:function(t,e){return ui.dragStart(t,Yf(e))},drag:function(t,e){return ui.drag(t,Yf(e))},dragEnd:function(t,e){return ui.dragEnd(t,Yf(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&pr(i,Xe("direction"))&&pr(i,Xe("line"))},dragGroupStart:function(t,e){return ui.dragGroupStart(t,Yf(e))},dragGroup:function(t,e){return ui.dragGroup(t,Yf(e))},dragGroupEnd:function(t,e){return ui.dragGroupEnd(t,Yf(e))},unset:function(t){return ui.unset(t)}}),FW={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},nN=[jW,OW,kxe,Wxe,ui,Twe,iP,Yxe,Qxe,dxe,nwe,rwe,ewe,gwe,pwe,bwe,tN,FW,Ewe,DW,zW],Awe=nN.reduce(function(t,e){return(e.events||[]).forEach(function(n){tK(t,n)}),t},[]),Cwe=nN.reduce(function(t,e){return(e.props||[]).forEach(function(n){tK(t,n)}),t},[]);function iB(t,e){var n=le(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function Zb(t,e){var n=le(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function aB(t,e){return Math.max.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function sB(t,e){return Math.min.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function Iwe(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=ot(e,vi);if(h%90){var g=h/180*Math.PI,m=Math.tan(g),b=-1/m,x=[eP,k5],w=[[0,0],[0,0]],S=[eP,k5],T=[[0,0],[0,0]];t.forEach(function(te){te.forEach(function(K){var ce=iB([-m,1,0],K),ae=iB([-b,1,0],K);x[0]>ce&&(w[0]=K,x[0]=ce),x[1]<ce&&(w[1]=K,x[1]=ce),S[0]>ae&&(T[0]=K,S[0]=ae),S[1]<ae&&(T[1]=K,S[1]=ae)})});var I=le(w,2),R=I[0],O=I[1],D=le(T,2),k=D[0],P=D[1],N=[-m,1,Zb([-m,1],R)],z=[-m,1,Zb([-m,1],O)],L=[-b,1,Zb([-b,1],k)],B=[-b,1,Zb([-b,1],P)];n=le([[N,L],[N,B],[z,L],[z,B]].map(function(te){var K=le(te,2),ce=K[0],ae=K[1];return RR(ce,ae)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=S[1]-S[0],f=x[1]-x[0]}else{var j=sB(t,0),W=sB(t,1),Q=aB(t,0),q=aB(t,1);if(a=[j,W],s=[Q,W],o=[j,q],c=[Q,q],u=Q-j,f=q-W,h%180){var Y=[o,a,c,s];r=le(Y,4),a=r[0],s=r[1],o=r[2],c=r[3],u=q-W,f=Q-j}}if(h%360>180){var Y=[c,o,s,a];i=le(Y,4),a=i[0],s=i[1],o=i[2],c=i[3]}var Z=Rd([a,s,o,c]),ie=Z.minX,J=Z.minY,U=Z.maxX,X=Z.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:ie,minY:J,maxX:U,maxY:X,rotation:e}}function UW(t,e){var n=e.map(function(r){if(cr(r)){var i=UW(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=ji(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&cr(n[0])?n[0]:n}var kwe=(function(t){A0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new IK,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;ap(!0),this.moveables.forEach(function(he){he.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(he){return{finded:!1,manager:he}}),h=this.props.targetGroups||[],g=UW(f,h),m=o.useDefaultGroupRotate;g.push.apply(g,Re([],le(f.filter(function(he){var ne=he.finded;return!ne}).map(function(he){var ne=he.manager;return ne})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=(a=o.persistData)===null||a===void 0?void 0:a.rotation;S!=null&&(w=S)}function T(he,ne,_e){var fe=he.map(function(Ie){if(cr(Ie)){var Oe=T(Ie,ne),Ge=[Oe.pos1,Oe.pos2,Oe.pos3,Oe.pos4];return b.push(Oe),{poses:Ge,rotation:Oe.rotation}}else return{poses:Fa(Ie.state),rotation:Ie.getRotation()}}),ee=fe.map(function(Ie){var Oe=Ie.rotation;return Oe}),Ce=0,Pe=ee[0],ze=ee.every(function(Ie){return Math.abs(Pe-Ie)<.1});x?Ce=!m&&ze?Pe:w:Ce=!m&&!_e&&ze?Pe:ne;var Le=fe.map(function(Ie){var Oe=Ie.poses;return Oe}),Be=Iwe(Le,Ce);return Be}var I=T(g,this.rotation,!0);x&&(this.rotation=I.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var R=this.transformOrigin,O=this.rotation,D=this.scale,k=I.width,P=I.height,N=I.minX,z=I.minY,L=Kxe([[0,0],[k,0],[0,P],[k,P]],QR(R,k,P),this.rotation/180*Math.PI),B=Rd(L.result),j=B.minX,W=B.minY,Q=" rotate(".concat(O,"deg)")+" scale(".concat(di(D[0]),", ").concat(di(D[1]),")"),q="translate(".concat(-j,"px, ").concat(-W,"px)").concat(Q);this.controlBox.style.transform="translate3d(".concat(N,"px, ").concat(z,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(R,";")+"width:".concat(k,"px;height:").concat(P,"px;")+"transform: ".concat(q),s.width=k,s.height=P;var Y=this.getContainer(),Z=dP(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),ie=[Z.left,Z.top],J=le(Fa(Z),4),U=J[0],X=J[1],te=J[2],K=J[3],ce=Rd([U,X,te,K]),ae=[ce.minX,ce.minY],oe=di(D[0]*D[1]);Z.pos1=Je(U,ae),Z.pos2=Je(X,ae),Z.pos3=Je(te,ae),Z.pos4=Je(K,ae),Z.left=N-Z.left+ae[0],Z.top=z-Z.top+ae[1],Z.origin=Je(Pt(ie,Z.origin),ae),Z.beforeOrigin=Je(Pt(ie,Z.beforeOrigin),ae),Z.originalBeforeOrigin=Pt(ie,Z.originalBeforeOrigin),Z.transformOrigin=Je(Pt(ie,Z.transformOrigin),ae),u.style.transform="translate(".concat(-j-ae[0],"px, ").concat(-W-ae[1],"px)")+Q,ap(),this.updateState(se(se({},Z),{posDelta:ae,direction:oe,beforeDirection:oe}),i)},e.prototype.getRect=function(){return se(se({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},[]);return n},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Re(Re([],le(this.props.ables),!1),[tN],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=ho(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(_h(this,!1),_h(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=LW(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=VW(this,"GroupControl")));var g=!cP(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!IW(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=se(se({},lp.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(lp),Pwe=(function(t){A0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),ys(s,{cspNonce:a,ref:il(this,"controlBox"),className:Xe("control-box")},c.map(function(g,m){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,m))!==null&&x!==void 0?x:{};return ys(lp,se({key:"moveable"+m,ref:WH(n,"moveables",m)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[m]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),ap(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),ap()},e.prototype.getRect=function(){return se(se({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,se(se({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=ji(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(lp);function $W(t,e){var n=[];return t.forEach(function(r){if(r){if(Mi(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}cr(r)?n.push.apply(n,Re([],le($W(r,e)),!1)):n.push(r)}}),n}function qW(t,e){var n=[];return t.forEach(function(r){if(r){if(Mi(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}cr(r)?n.push(qW(r,e)):n.push(r)}}),n}function GW(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?cr(n)&&cr(i)?GW(n,i):!0:!1})}var Dwe=(function(t){A0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new IK,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=bl(n).join(`
`);this.defaultStyled=OK("div",A0e(MR,gbe+i))},e.getTotalAbles=function(){return Re([OW,tN,FW,DW],le(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=nbe(i,["ables","props"]),c=le(this._updateRefs(!0),2),u=c[0],f=c[1],h=$W(u,f),g=h.length>1,m=r.getTotalAbles(),b=Re(Re([],le(m),!1),le(a||[]),!1),x=se(se(se({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,S=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return ys(Pwe,se({key:"individual-group",ref:il(this,"moveable")},x,{target:null,targets:h}));if(g){var I=qW(u,f);if(S&&!S.props.groupable&&!S.props.individualGroupable){var R=S.props.target;R&&h.indexOf(R)>-1&&(w=se({},S.state))}return ys(kwe,se({key:"group",ref:il(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:I,firstRenderState:w}))}else{var O=h[0];if(S&&(S.props.groupable||S.props.individualGroupable)){var D=S.moveables||[],k=ji(D,function(P){return P.props.target===O});k&&(w=se({},k.state))}return ys(lp,se({key:"single",ref:il(this,"moveable")},x,{target:O,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=XR(this.props.target||this.props.targets),a=typeof document<"u",s=GW(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(Mi(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else cr(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=le(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,rbe([C0e(LK)],e.prototype,"moveable",void 0),e})(uK),Owe=(function(t){A0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=nN,e})(Dwe),fP=function(t,e){return fP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},fP(t,e)};function rN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");fP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Iv=function(){return Iv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Iv.apply(this,arguments)};function Rwe(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var Nwe=(function(t){rN(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return ys(Owe,Iv({ref:il(this,"moveable")},this.state))},e})(CR),Mwe=Cwe,jwe=LK,zwe=Awe,Lwe=(function(t){rN(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=Iv({},i),o={};zwe.forEach(function(f){o[z0e("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=Rp(r).createElement("div"),r.appendChild(c)),a.containerProvider=S5(ys(Nwe,Iv({ref:il(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return cr(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;S5(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=Rwe([p5(jwe,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),p5(Mwe,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(P_),HW=(function(t){rN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Lwe),Rc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Rc||{}),wm=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(wm||{});const Vwe=["mousedown","mousemove","mouseup","mouseleave","mouseout"],Bwe=["touchstart","touchmove","touchend","touchcancel"],Fwe=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function Uwe(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function $we(t){var e;return Vwe.includes((e=t?.nativeEvent)==null?void 0:e.type)}function KW(t){var e;return Bwe.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function qwe(t){const{nativeEvent:e}=t;return e?Fwe.includes(e?.type)||"pointerId"in e:!1}function UA(t){return $we(t)||KW(t)||qwe(t)}function oB(t){var e;const n=KW(t)?(e=t?.touches)==null?void 0:e[0]:t;return Uwe(n)?{x:n.pageX,y:n.pageY}:null}function Gwe(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function iN(t,{threshold:e=400,captureEvent:n=!1,detect:r=Rc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),m=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),S=A.useCallback(O=>D=>{g.current||UA(D)&&(s!==void 0&&!s(D)||(n&&D.persist(),o?.(D,{context:O}),w.current=oB(D),g.current=!0,m.current=D.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(D,{context:O}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(O=>(D,k)=>{UA(D)&&g.current&&(w.current=null,n&&D.persist(),h.current?u?.(D,{context:O}):g.current&&f?.(D,{context:O,reason:k??wm.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),I=A.useCallback(O=>D=>{if(UA(D)&&(c?.(D,{context:O}),i!==!1&&w.current)){const k=oB(D);if(k){const P=i===!0?25:i,N={x:Math.abs(k.x-w.current.x),y:Math.abs(k.y-w.current.y)};(N.x>P||N.y>P)&&T(O)(D,wm.CancelledByMovement)}}},[T,i,c]),R=A.useCallback(O=>{if(t===null)return{};switch(r){case Rc.Mouse:{const D={onMouseDown:S(O),onMouseMove:I(O),onMouseUp:T(O)};return a&&(D.onMouseLeave=k=>{T(O)(k,wm.CancelledOutsideElement)}),D}case Rc.Touch:return{onTouchStart:S(O),onTouchMove:I(O),onTouchEnd:T(O)};case Rc.Pointer:{const D={onPointerDown:S(O),onPointerMove:I(O),onPointerUp:T(O)};return a&&(D.onPointerLeave=k=>T(O)(k,wm.CancelledOutsideElement)),D}}},[t,T,a,r,I,S]);return A.useEffect(()=>{function O(D){const k=Gwe(D);T()(k)}return window.addEventListener("mouseup",O),window.addEventListener("touchend",O),window.addEventListener("pointerup",O),()=>{window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O),window.removeEventListener("pointerup",O)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),R}const WW=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},qw=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,qu=t=>qw(t).toISOString(),Hwe=t=>{const e=qw(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},Kwe=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Rh=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=qu(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||Hwe(r),description:e.description||"",merchant:e.merchant||void 0,type:Kwe(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}},$A=t=>qr(tt,"users",t,"transactions"),Wwe={subscribeToTransactions:(t,e)=>{const n=ia($A(t),co("date","desc"));return Kd(n,i=>{const a=i.docs.map(s=>Rh({id:s.id,...s.data()}));e(a)})},getAllTransactions:async t=>{const e=ia($A(t),co("date","desc")),r=(await Xi(e)).docs.map(i=>Rh({id:i.id,...i.data()}));return H.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");try{H.log(" About to call addDoc with:",r);const i=await b_($A(e),r);H.log(" addDoc succeeded, docRef:",i),H.log(` Document ID: ${i.id}`),H.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return H.log(" Final result object:",a),a}catch(i){H.error(" addDoc failed:",i);const a=i;throw H.error("Error message:",a.message),i}},updateTransaction:async(t,e,n)=>{const r=xt(tt,"users",t,"transactions",e);return await Zs(r,n)},deleteTransaction:async(t,e)=>{try{const n=xt(tt,"users",t,"transactions",e);H.log(` Deleting document at path: ${n.path}`),await ea(n),H.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){H.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n);const r=n;throw H.error("Error message:",r.message),n}}},qA=t=>qr(tt,"users",t,"envelopes"),Ywe={subscribeToEnvelopes:(t,e)=>{const n=ia(qA(t),co("orderIndex","asc"));return Kd(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{H.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=qA(t),i=(await Xi(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return H.log(" Fetched envelopes:",i.length),i}catch(e){return H.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await b_(qA(e),r)).id,...r,userId:e}}catch(i){throw H.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=xt(tt,"users",t,"envelopes",e.id);return await Zi(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=xt(tt,"users",t,"envelopes",e);return await Zs(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{const n=xt(tt,"users",t,"envelopes",e);await ea(n)}},GA=t=>qr(tt,"users",t,"distributionTemplates"),Xwe={subscribeToDistributionTemplates:(t,e)=>{const n=ia(GA(t),co("lastUsed","desc"));return Kd(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=ia(GA(t),co("lastUsed","desc"));return(await Xi(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");try{const i=await b_(GA(e),r);H.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return H.log(" Final template result object:",a),a}catch(i){throw H.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=xt(tt,"users",t,"distributionTemplates",e.id);return await Zi(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=xt(tt,"users",t,"distributionTemplates",e);return await Zs(r,n)},deleteDistributionTemplate:async(t,e)=>{const n=xt(tt,"users",t,"distributionTemplates",e);await ea(n)}},HA=t=>qr(tt,"users",t,"appSettings"),YW={subscribeToAppSettings:(t,e)=>{const n=ia(HA(t),G3(1));return Kd(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=ia(HA(t),G3(1)),n=await Xi(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");try{const r=await b_(HA(e),n);H.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return H.log(" Final settings result object:",i),i}catch(r){throw H.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=xt(tt,"users",t,"appSettings",e.id);return await Zi(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=xt(tt,"users",t,"appSettings",e);return await Zi(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{const n=xt(tt,"users",t,"appSettings",e);await ea(n)}},lB=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:YW},Symbol.toStringTag,{value:"Module"}));class Jo{static instance;constructor(){}static getInstance(){return Jo.instance||(Jo.instance=new Jo),Jo.instance}createId(){return xt(qr(tt,"temp")).id}async createCategory(e){const n=xt(tt,`users/${e.userId}/categories`,e.id);return await Zi(n,e),e}async getCategories(e){const n=ia(qr(tt,`users/${e}/categories`),co("orderIndex","asc"));return(await Xi(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=xt(tt,`users/${e}/categories`,n.id);await Zi(r,n,{merge:!0})}async deleteCategory(e,n){const r=xt(tt,`users/${e}/categories`,n);await ea(r)}async reorderCategories(e,n){const r=gk(tt);n.forEach((i,a)=>{const s=xt(tt,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return 0;const a=450;for(let s=0;s<i.length;s+=a){const o=gk(tt);i.slice(s,s+a).forEach(u=>{const f=xt(tt,`users/${e}/categories`,u);o.delete(f)}),await o.commit()}return i.length}subscribeToCategories(e,n){const r=ia(qr(tt,`users/${e}/categories`),co("orderIndex","asc"));return Kd(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{H.error(" Category subscription error:",i)})}}Jo.getInstance();class ms{static instance;static getInstance(){return ms.instance||(ms.instance=new ms),ms.instance}async restoreUserData(e,n){try{H.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=xt(tt,"users",e,s,f);i.push({ref:h,data:u})}H.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=gk(tt);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),H.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}H.log(" Restore completed successfully.")}catch(r){throw new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{H.log(" BudgetService.getEnvelopes called for user:",e);const n=qr(tt,"users",e,"envelopes"),a=(await Xi(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return H.log(" Fetched envelopes:",a.length),a}catch(n){throw new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{H.log(" BudgetService.getTransactions: Fetching for user",e);const n=qr(tt,"users",e,"transactions"),r=ia(n,co("date","desc")),a=(await Xi(r)).docs.map(s=>{const o={id:s.id,...s.data()};return Rh(o)});return H.log(` Fetched ${a.length} transactions`),a}catch(n){throw new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactionsByMonth(e,n){try{H.log(` BudgetService.getTransactionsByMonth: Fetching for user ${e}, month ${n}`);const r=qr(tt,"users",e,"transactions"),i=ia(r,lA("month","==",n),co("date","desc")),s=(await Xi(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Rh(c)});return H.log(` Fetched ${s.length} transactions for ${n}`),s}catch(r){throw new Error(`Failed to fetch transactions for month ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionsByEnvelope(e,n){try{H.log(` BudgetService.getTransactionsByEnvelope: Fetching for user ${e}, envelope ${n}`);const r=qr(tt,"users",e,"transactions"),i=ia(r,lA("envelopeId","==",n),co("date","desc")),s=(await Xi(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Rh(c)});return H.log(` Fetched ${s.length} transactions for envelope ${n}`),s}catch(r){throw new Error(`Failed to fetch transactions for envelope ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async createEnvelope(e){try{H.log(" BudgetService.createEnvelope called for user:",e.userId);const n=qr(tt,"users",e.userId,"envelopes"),r=xt(n),i=pt.now(),a={...e,createdAt:i,lastUpdated:i};Zi(r,a).catch(o=>H.warn(`Create env failed: ${o}`));const s={...e,id:r.id,createdAt:qu(i),lastUpdated:qu(i)};return H.log(" Created envelope (optimistic):",s.id),s}catch(n){throw new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{H.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=xt(tt,"users",e,"envelopes",n.id);Zi(r,{...n,lastUpdated:pt.now()},{merge:!0}).catch(i=>H.warn(`Update env failed: ${i}`)),H.log(" Updated envelope (optimistic):",n.id)}catch(r){throw new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=xt(tt,"users",e,"envelopes",n),i=ia(qr(tt,"users",e,"transactions"),lA("envelopeId","==",n)),s=(await Xi(i)).docs.map(o=>ea(o.ref));await Promise.all([ea(r),...s]),H.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{H.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=xt(tt,"users",e,"envelopes",i.id);return Zi(a,{orderIndex:i.orderIndex,lastUpdated:pt.now()},{merge:!0})});Promise.all(r).catch(i=>H.warn(`Reorder env failed: ${i}`)),H.log(" Reordered envelopes (optimistic)")}catch(r){throw new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{H.log(" BudgetService.createTransaction called for user:",e.userId);const n=qr(tt,"users",e.userId,"transactions"),r=xt(n),i=pt.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};Zi(r,s).catch(c=>H.warn(`Create tx failed: ${c}`));const o={...e,id:r.id};return H.log(" Created transaction (optimistic):",o.id),o}catch(n){throw new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if(H.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=xt(tt,"users",e,"transactions",n.id);Zi(i,r,{merge:!0}).catch(a=>H.warn(`Update tx failed: ${a}`)),H.log(" Updated transaction (optimistic):",n.id)}catch(r){throw new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{H.log(" BudgetService.deleteTransaction called for transaction:",n);const r=xt(tt,"users",e,"transactions",n);ea(r).catch(i=>H.warn(`Delete tx failed: ${i}`)),H.log(" Deleted transaction (optimistic):",n)}catch(r){throw new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{H.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=xt(tt,"users",e.userId,"monthlyBudgets",e.month),r=pt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};Zs(n,{incomeSources:Xfe(a),updatedAt:r}).catch(o=>{o.code==="not-found"?Zi(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>H.warn(`Failed to create monthly budget doc: ${c}`)):H.warn(`Create income failed: ${o}`)});const s={...e,id:i,amount:Number(e.amount),createdAt:qu(r),updatedAt:qu(r)};return H.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{H.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=xt(tt,"users",e,"monthlyBudgets",r);cA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:pt.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});Zs(a,{incomeSources:u,updatedAt:pt.now()})}).catch(s=>H.warn(`Update income failed: ${s}`)),H.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw a}}async deleteIncomeSource(e,n,r){try{H.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=xt(tt,"users",e,"monthlyBudgets",r);cA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);Zs(i,{incomeSources:c,updatedAt:pt.now()})}).catch(a=>H.warn(`Delete income failed: ${a}`)),H.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{H.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=xt(tt,"users",e.userId,"monthlyBudgets",e.month),r=pt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};Zs(n,i).catch(s=>{s.code==="not-found"?Zi(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>H.warn(`Failed to create monthly budget doc: ${o}`)):H.warn(`Create allocation failed: ${s}`)});const a={...e,id:e.envelopeId,createdAt:qu(r),updatedAt:qu(r)};return H.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{H.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=xt(tt,"users",e,"monthlyBudgets",r),s={updatedAt:pt.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),Zs(a,s).catch(o=>H.warn(`Update allocation failed: ${o}`)),H.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{H.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=xt(tt,"users",e,"monthlyBudgets",r);Zs(i,{[`allocations.${n}`]:W3(),updatedAt:pt.now()}).catch(a=>H.warn(`Delete allocation failed: ${a}`)),H.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{H.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=xt(tt,"users",e,"monthlyBudgets",n),i=await cA(r);if(!i.exists())return H.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return H.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{H.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(m=>m.id));H.log(` Found ${r.length} existing envelopes`);const a=qr(tt,"users",e,"envelopeAllocations"),s=await Xi(a),o=[],c=new Set;for(const m of s.docs){const b=m.data();c.add(b.month),i.has(b.envelopeId)||(o.push(m.id),H.log(` Found orphaned allocation: ${m.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const m=o.map(b=>ea(xt(tt,"users",e,"envelopeAllocations",b)));await Promise.all(m),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),H.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=qr(tt,"users",e,"monthlyBudgets"),f=await Xi(u);for(const m of f.docs){const x=m.data().allocations||{},w={};let S=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=W3(),S=!0,H.log(` Found orphaned embedded allocation in ${m.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${m.id}_${T}`))}),S&&(w.updatedAt=pt.now(),await Zs(m.ref,w),c.add(m.id))}const h=await this.getTransactions(e),g=[];for(const m of h)i.has(m.envelopeId)||(g.push(m.id),H.log(` Found orphaned transaction: ${m.id} for envelope ${m.envelopeId}`));if(g.length>0){const m=g.map(b=>ea(xt(tt,"users",e,"transactions",b)));await Promise.all(m),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,H.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),H.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=xt(tt,"users",e,"monthlyBudgets",n);return Kd(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{H.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){H.log(` Deleting collection: ${r}...`);const i=qr(tt,"users",e,r),a=await Xi(i);if(a.empty){H.log("   (Empty collection)");continue}const s=a.docs.map(o=>ea(o.ref));await Promise.all(s),H.log(`    Deleted ${a.size} documents from ${r}`)}H.log(" All user data deleted successfully.")}catch(n){throw new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const aN=ms.getInstance(),Qwe=t=>Rh(t),Zwe=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),Jwe=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),cB=(t,e)=>{if(window.__firebaseUnsubscribers)return;const n=t.getState().currentMonth,r=Ywe.subscribeToEnvelopes(e,f=>{H.log(" Real-time sync: Envelopes updated",f.length);const h=f.map(Zwe),g=t.getState(),m=new Set(g.envelopes.map(w=>w.id)),b=new Set(h.map(w=>w.id)),x=[...h.filter(w=>m.has(w.id)),...g.envelopes.filter(w=>!b.has(w.id))];t.setState({envelopes:x})}),i=Wwe.subscribeToTransactions(e,f=>{H.log(" Real-time sync: Transactions updated",f.length);const h=f.map(Qwe),g=t.getState(),m=new Set(g.transactions.map(w=>`${w.id}-${w.month}`)),b=new Set(h.map(w=>`${w.id}-${w.month}`)),x=[...h.filter(w=>m.has(`${w.id}-${w.month}`)),...g.transactions.filter(w=>!b.has(`${w.id}-${w.month}`))];t.setState({transactions:x})}),s=Jo.getInstance().subscribeToCategories(e,f=>{H.log(" Real-time sync: Categories updated",f.length);const h=f.map(Jwe),g=Array.from(new Map(h.map(m=>[m.id,m])).values());g.length,h.length,t.setState({categories:g})}),o=Xwe.subscribeToDistributionTemplates(e,f=>{H.log(" Real-time sync: Templates updated from Firebase",f.length)}),c=YW.subscribeToAppSettings(e,f=>{const h=t.getState();if(f){const g={...h.appSettings,...f,paymentSources:f.paymentSources??h.appSettings?.paymentSources??[]};t.setState({appSettings:g})}}),u=aN.subscribeToMonthlyBudget(e,n,f=>{H.log(` Real-time sync: Monthly budget updated (${f.incomeSources.length} sources, ${f.allocations.length} allocations)`);const h=t.getState();t.setState({incomeSources:{...h.incomeSources,[n]:f.incomeSources},allocations:{...h.allocations,[n]:f.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactions:i,categories:s,templates:o,settings:c,monthlyBudget:u}},e1e=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&cB(e,r()),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)cB(e,r());else if(!s.isAuthenticated&&!s.isLoading){if(window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactions&&o.transactions(),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers}e.getState().handleUserLogout()}});let a=e.getState().currentMonth;e.subscribe(s=>{if(s.currentMonth!==a&&s.isAuthenticated){H.log(" Month changed from",a,"to",s.currentMonth),a=s.currentMonth;const o=r();if(o&&window.__firebaseUnsubscribers){const c=window.__firebaseUnsubscribers;c.monthlyBudget&&c.monthlyBudget(),c.monthlyBudget=aN.subscribeToMonthlyBudget(o,s.currentMonth,u=>{const f=e.getState();e.setState({incomeSources:{...f.incomeSources,[s.currentMonth]:u.incomeSources},allocations:{...f.allocations,[s.currentMonth]:u.allocations}})}),H.log(" Subscribed to monthly data for new month:",s.currentMonth)}}})},Vu=ms.getInstance(),Jb=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},t1e=({set:t,get:e})=>({addTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Jb(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,userId:r.id,month:a},o=await Vu.createTransaction(s);t(c=>c.transactions.some(f=>f.id===o.id)?{isLoading:!1}:{transactions:[...c.transactions,o],isLoading:!1}),H.log(" Added transaction:",o.id)}catch(r){throw H.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Jb(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Vu.updateTransaction(r.id,s),t(o=>({transactions:o.transactions.map(c=>c.id===n.id?s:c),isLoading:!1})),H.log(" Updated transaction:",n.id)}catch(r){throw H.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Jb();await Vu.deleteTransaction(r.id,n),t(i=>({transactions:i.transactions.filter(a=>a.id!==n),isLoading:!1})),H.log(" Deleted transaction:",n)}catch(r){throw H.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const r=Jb(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Vu.updateTransaction(r.id,s),t(o=>{const c=o.transactions.findIndex(f=>f.id===n.id);let u;return c>=0?u=o.transactions.map(f=>f.id===n.id?s:f):u=[...o.transactions,s],{transactions:u,isLoading:!1}}),H.log(" Restored transaction:",n.id)}catch(r){throw H.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),H.log(" Transfer completed")}catch(o){throw H.error(" transferFunds failed:",o),o}},fetchTransactionsForMonth:async n=>{const r=e();if(!(r.areAllTransactionsLoaded||r.loadedTransactionMonths.includes(n)))try{const{currentUser:i}=nn.getState();if(!i)return;H.log(` Fetching transactions for month: ${n}`);const a=await Vu.getTransactionsByMonth(i.id,n);t(s=>({transactions:[...s.transactions.filter(o=>o.month!==n),...a],loadedTransactionMonths:[...s.loadedTransactionMonths,n]})),H.log(` Loaded ${a.length} transactions for ${n}`)}catch(i){H.error(` Failed to fetch transactions for ${n}:`,i)}},fetchTransactionsForEnvelope:async n=>{if(!e().areAllTransactionsLoaded)try{const{currentUser:i}=nn.getState();if(!i)return;H.log(` Fetching transactions for envelope: ${n}`);const a=await Vu.getTransactionsByEnvelope(i.id,n);t(s=>{const o=new Map(s.transactions.map(c=>[c.id,c]));return a.forEach(c=>{o.set(c.id,c)}),{transactions:Array.from(o.values())}}),H.log(` Loaded ${a.length} transactions for envelope ${n}`)}catch(i){H.error(` Failed to fetch transactions for envelope ${n}:`,i)}},fetchAllTransactions:async()=>{if(!e().areAllTransactionsLoaded)try{t({isLoading:!0});const{currentUser:r}=nn.getState();if(!r){t({isLoading:!1});return}H.log(" Fetching ALL transactions history...");const i=await Vu.getTransactions(r.id);t({transactions:i,areAllTransactionsLoaded:!0,isLoading:!1}),H.log(` Loaded complete history: ${i.length} transactions`)}catch(r){H.error(" Failed to fetch all transactions:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to fetch transaction history"})}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return 0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return 0}}),Xf=ms.getInstance(),Qf=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},n1e=({set:t,get:e})=>({addEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=Qf(),i={...n,userId:r.id},a=await Xf.createEnvelope(i);return t(s=>s.envelopes.some(c=>c.id===a.id)?{isLoading:!1}:{envelopes:[...s.envelopes,a],isLoading:!1}),H.log(" Added envelope:",a.id),a.id}catch(r){throw H.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=Qf();await Xf.updateEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.map(a=>a.id===n.id?n:a),isLoading:!1})),H.log(" Updated envelope:",n.id)}catch(r){throw H.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=Qf();await Xf.deleteEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.filter(a=>a.id!==n),transactions:i.transactions.filter(a=>a.envelopeId!==n),isLoading:!1})),H.log(" Deleted envelope:",n)}catch(r){throw H.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((c,u)=>{i.set(c,u)});const a=r.envelopes.map(c=>{if(!i.has(c.id))return c;const u=i.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}}),s=a.filter((c,u)=>c!==r.envelopes[u]);if(!s.length){t({isLoading:!1});return}const o=Qf();await Xf.reorderEnvelopes(o.id,s),t({envelopes:a,isLoading:!1}),H.log(" Reordered envelopes")}catch(r){throw H.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(c=>c.id===n);if(!a)throw new Error("Envelope not found");t(c=>({envelopes:c.envelopes.map(u=>u.id===n?{...u,name:r}:u),isLoading:!0}));const s=Qf(),o={...a,name:r};await Xf.updateEnvelope(s.id,o),t({isLoading:!1}),H.log(" Renamed envelope:",n)}catch(i){throw H.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),H.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):H.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&(H.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),H.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw H.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),H.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const i=Qf(),a=e().envelopes.find(o=>o.id===n&&o.isPiggybank);if(!a)throw new Error("Piggybank not found");const s={...a,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:a.piggybankConfig?.targetAmount,color:a.piggybankConfig?.color,icon:a.piggybankConfig?.icon,paused:a.piggybankConfig?.paused??!1}};if(H.log(" Updating envelope in Firestore:",s),await Xf.updateEnvelope(i.id,s),H.log(" Envelope updated successfully"),t(o=>({envelopes:o.envelopes.map(c=>c.id===n?s:c),isLoading:!1})),!a.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(c=>c.envelopeId===n&&(c.description==="Monthly Allocation"||c.description==="Piggybank Contribution"))||H.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(o){H.error(" Failed to update piggybank contribution:",o)}H.log(" Piggybank contribution updated successfully")}catch(i){throw H.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}}}),Zf=ms.getInstance(),Jf=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},r1e=({set:t,get:e})=>({addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const i=Jf();H.log(" Adding income source:",{month:n,source:r});const a=await Zf.createIncomeSource({...r,userId:i.id,month:n});t(s=>{const o=s.incomeSources[n]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{incomeSources:{...s.incomeSources,[n]:[...o,a]},isLoading:!1}}),H.log(" Added income source:",a.id)}catch(i){throw H.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),H.log(" Updating income source:",{month:n,sourceId:r.id}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.map(s=>s.id===r.id?{...r,updatedAt:new Date().toISOString()}:s)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await Zf.updateIncomeSource(i.id,r.id,n,r),H.log(" Updated income source:",r.id)}catch(i){throw H.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),H.log(" Deleting income source:",{month:n,sourceId:r}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.filter(s=>s.id!==r)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await Zf.deleteIncomeSource(i.id,r,n),H.log(" Deleted income source:",r)}catch(i){throw H.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const r=Jf();H.log(" Copying allocations from previous month:",n);const[i,a]=n.split("-").map(Number);let s=i,o=a-1;o<1&&(s=i-1,o=12);const c=`${s}-${String(o).padStart(2,"0")}`;(!e().incomeSources[c]||!e().allocations[c])&&(H.log(` Previous month ${c} data missing, fetching...`),await e().fetchMonthData(c));const u=e().incomeSources[c]||[];if(H.log(` Found ${u.length} income sources from ${c}`),u.length>0){for(const m of u){const{id:b,...x}=m;await e().addIncomeSource(n,x)}H.log(` Copied ${u.length} income sources to ${n}`)}const f=e().allocations[c]||[];H.log(` Found ${f.length} allocations from ${c}`);const h=f.filter(m=>{const b=e().envelopes.find(x=>x.id===m.envelopeId);return!!b&&!b.isPiggybank});if(h.length>0){for(const m of h)await e().createEnvelopeAllocation({envelopeId:m.envelopeId,budgetedAmount:m.budgetedAmount,userId:r.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),m.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:m.budgetedAmount,envelopeId:m.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});H.log(` Copied ${h.length} regular allocations to ${n}`)}const g=e().envelopes.filter(m=>m.isPiggybank);H.log(` Processing ${g.length} piggybanks for ${n}`);for(const m of g){const b=m.piggybankConfig?.monthlyContribution,x=m.piggybankConfig?.paused??!1;if(!x&&b&&b>0)try{H.log(` Setting piggybank allocation for ${m.name}: ${b}`),await e().setEnvelopeAllocation(m.id,b)}catch(w){H.error(` Failed to set allocation for piggybank ${m.name}:`,w)}else H.log(` Skipping piggybank ${m.name} (paused=${x}, contribution=${b})`)}t({isLoading:!1}),H.log(` Complete monthly setup copied to ${n}`)}catch(r){throw H.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const i=Jf(),a=e().currentMonth,s=e().envelopes.find(u=>u.id===n);if(!s){H.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const o=!!s.isPiggybank;H.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${a}, isPiggybank=${o}`);const c=e().allocations[a]?.find(u=>u.envelopeId===n);if(c?await e().updateEnvelopeAllocation(c.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:i.id,month:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o&&r>0&&!s?.piggybankConfig?.paused){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));if(u){const f={...u,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(f)}else{const f={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}if(!o&&r>0){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));if(u){const f={...u,amount:r,description:"Budgeted"};await e().updateTransaction(f)}else{const f={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}H.log(" Envelope allocation set successfully")}catch(i){throw H.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const r=Jf(),i=e().currentMonth,a=await Zf.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:r.id,month:i});t(s=>{const o=s.allocations[i]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{allocations:{...s.allocations,[i]:[...o,a]},isLoading:!1}}),H.log(" Created envelope allocation:",a.id)}catch(r){throw H.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{H.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,a=Jf(),s=e().allocations[i]?.find(u=>u.id===n);if(!s)throw new Error("Allocation not found");const o=e().envelopes.find(u=>u.id===s.envelopeId),c=o?.isPiggybank;if(await Zf.updateEnvelopeAllocation(a.id,s.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(u=>({allocations:{...u.allocations,[i]:u.allocations[i]?.map(f=>f.id===n?{...f,...r,updatedAt:new Date().toISOString()}:f)||[]},isLoading:!1})),c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));u?r.budgetedAmount>0&&!o?.piggybankConfig?.paused?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||o?.piggybankConfig?.paused)&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&!o?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));u?r.budgetedAmount>0?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}H.log(" Updated envelope allocation:",n)}catch(i){throw H.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{H.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(s=>s.id===n);if(!i){H.warn("Allocation not found in store, skipping delete");return}const a=Jf();await Zf.deleteEnvelopeAllocation(a.id,i.envelopeId,r),t(s=>({allocations:{...s.allocations,[r]:s.allocations[r]?.filter(o=>o.id!==n)||[]},isLoading:!1})),H.log(" Deleted envelope allocation:",n)}catch(r){throw H.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw H.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}}}),eh=Jo.getInstance(),ex=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},i1e=({set:t,get:e})=>({fetchCategories:async()=>{try{t({isLoading:!0,error:null});const{currentUser:n}=nn.getState();if(!n)return;const r=await eh.getCategories(n.id),i=Array.from(new Map(r.map(a=>[a.id,a])).values());t({categories:i,isLoading:!1})}catch(n){H.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const r=ex(),i=e().categories.find(o=>o.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(i)return H.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),i.id;const a=eh.createId(),s={...n,id:a,userId:r.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await eh.createCategory(s),t(o=>o.categories.some(u=>u.id===a)?{isLoading:!1}:{categories:[...o.categories,s],isLoading:!1}),a}catch(r){throw H.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const r=ex(),i={...n,updatedAt:new Date().toISOString()};await eh.updateCategory(r.id,i),t(a=>({categories:a.categories.map(s=>s.id===n.id?i:s),isLoading:!1}))}catch(r){throw H.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const r=ex();await eh.deleteCategory(r.id,n),t(i=>({categories:i.categories.filter(a=>a.id!==n),isLoading:!1}))}catch(r){throw H.error("Failed to delete category:",r),t({isLoading:!1}),r}},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const r=ex(),i=e(),a=new Map;n.forEach((o,c)=>a.set(o,c));const s=i.categories.map(o=>{if(!a.has(o.id))return o;const c=a.get(o.id);return o.orderIndex===c?o:{...o,orderIndex:c}});t({categories:s.sort((o,c)=>o.orderIndex-c.orderIndex)}),await eh.reorderCategories(r.id,s),t({isLoading:!1})}catch(r){throw H.error("Failed to reorder categories:",r),t({isLoading:!1}),r}}}),a1e=ms.getInstance(),KA=()=>nn.getState().currentUser?.id||"",s1e=({set:t,get:e})=>({setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=KA();if(!n)return;const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;if(H.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)}),i){t({isOnboardingCompleted:!0});return}try{if((await a1e.getEnvelopes(n)).length>0){H.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(a){H.error(" Failed to check existing envelopes for onboarding:",a),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||(t({isOnboardingCompleted:!1,isOnboardingActive:!0}),H.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=KA();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true")}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=KA();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})}}),o1e=({set:t,get:e})=>({updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(s=>{const o={...s};return o.last4===void 0&&delete o.last4,o}));const{currentUser:a}=nn.getState();if(a){const{AppSettingsService:s}=await Km(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>lB);return{AppSettingsService:o}},void 0);await s.updateAppSettings(a.id,i.id,i)}t({appSettings:i,isLoading:!1}),H.log(" Updated app settings")}catch(r){throw H.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const{currentUser:r}=nn.getState();if(r){const{AppSettingsService:a}=await Km(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>lB);return{AppSettingsService:o}},void 0),s=await a.getAppSettings(r.id);if(s){t({appSettings:s}),H.log(" Loaded app settings from Firestore");return}}const i={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};r&&(i.userId=r.id),t({appSettings:i}),H.log(" Initialized default app settings")}catch(n){H.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),H.log(" Online status updated:",n)}catch(n){H.error(" Failed to update online status:",n)}}}),th=ms.getInstance(),WA=Jo.getInstance(),uB=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},l1e=({set:t,get:e})=>({setMonth:async n=>{t({currentMonth:n});const r=e();(r.incomeSources[n]===void 0||r.allocations[n]===void 0||!r.loadedTransactionMonths.includes(n))&&(t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{const n=e();try{t({isLoading:!0,error:null});const{currentUser:r}=nn.getState();if(!r){H.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}H.log(`Fetching data for user: ${r.id}, month: ${n.currentMonth}`);const[i,a,s,o]=await Promise.all([th.getEnvelopes(r.id),th.getTransactionsByMonth(r.id,n.currentMonth),WA.getCategories(r.id).catch(h=>(H.error(" Failed to load categories:",h),[])),th.getMonthData(r.id,n.currentMonth)]);let c=Array.from(new Map(s.map(h=>[h.id,h])).values());const u=new Set;let f=!1;for(const h of c){const g=h.name.toLowerCase().trim();if(u.has(g)){f=!0;break}u.add(g)}f&&r&&(H.log(" Duplicate category names detected, running Firestore cleanup..."),await WA.deduplicateCategories(r.id)>0&&(c=await WA.getCategories(r.id))),t({envelopes:i,transactions:a,loadedTransactionMonths:[n.currentMonth],areAllTransactionsLoaded:!1,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:o.incomeSources},allocations:{...n.allocations,[n.currentMonth]:o.allocations},isLoading:!1,error:null}),H.log(` BudgetStore initialized: ${i.length} envelopes, ${a.length} transactions (current month), ${s.length} categories`)}catch(r){H.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchData:async()=>{await e().init()},fetchMonthData:async n=>{try{const{currentUser:r}=nn.getState();if(!r){H.log("No user logged in, skipping month data fetch");return}H.log(`Fetching month data for: ${n}`);const i=e().fetchTransactionsForMonth(n),a=th.getMonthData(r.id,n),[s,o]=await Promise.all([i,a]),c=e();t({incomeSources:{...c.incomeSources,[n]:o.incomeSources},allocations:{...c.allocations,[n]:o.allocations}}),H.log(` Fetched month data for ${n}`),(async()=>{const f=e(),h=f.allocations[n]||[],g=f.transactions.filter(b=>b.month===n);let m=0;for(const b of h){const x=f.envelopes.find(S=>S.id===b.envelopeId);if(x?.isPiggybank)continue;const w=g.find(S=>S.envelopeId===b.envelopeId&&(S.description==="Monthly Budget Allocation"||S.description==="Monthly Allocation"||S.description==="Budgeted"||S.description==="Piggybank Contribution"));w?w.amount!==b.budgetedAmount&&(H.log(` Repairing mismatch for envelope ${x?.name||b.envelopeId}: Alloc ${b.budgetedAmount} vs Tx ${w.amount}`),await f.updateTransaction({...w,amount:b.budgetedAmount}),m++):b.budgetedAmount>0&&(H.log(` Repairing missing transaction for envelope ${x?.name||b.envelopeId}`),await f.addTransaction({description:"Budgeted",amount:b.budgetedAmount,envelopeId:b.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),m++)}m>0&&H.log(` Repaired ${m} allocation discrepancies for ${n}`)})().catch(f=>H.error("Verification failed:",f))}catch(r){H.error(` Failed to fetch month data for ${n}:`,r)}},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),H.log(` Clearing all data for month: ${n}`);const r=uB(),{monthlyBudgetService:i}=await Km(async()=>{const{monthlyBudgetService:a}=await import("./MonthlyBudgetService-DsaJUMgB.js");return{monthlyBudgetService:a}},[]);await i.clearMonthData(r.id,n),await e().init(),H.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw H.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},resetData:async()=>{t({isLoading:!0});try{const{currentUser:n}=nn.getState();n?(H.log(" Deleting all data from Firestore for user:",n.id),await th.deleteAllUserData(n.id)):H.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),H.log(" Reset data complete")}catch(n){throw H.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const r=uB();return H.log(" Starting Time Machine Restore for user:",r.id),await th.restoreUserData(r.id,n),H.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return H.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},handleUserLogout:()=>{t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),c1e=()=>nn.getState().currentUser?.id||"",en=OD()(mce(D8((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},loadedTransactionMonths:[],areAllTransactionsLoaded:!1,currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null,...t1e({set:t,get:e}),...n1e({set:t,get:e}),...r1e({set:t,get:e}),...i1e({set:t,get:e}),...s1e({set:t,get:e}),...o1e({set:t,get:e}),...l1e({set:t,get:e})}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));e1e({useBudgetStore:en,useAuthStore:nn,getCurrentUserId:c1e});const u1e=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:en},Symbol.toStringTag,{value:"Module"})),dB=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},d1e=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=en(),{currentUser:s}=nn(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:m}=en(),{showToast:b}=Wd(),[x,w]=A.useState(!1),S=A.useRef(null),[T,I]=A.useState(!1),R=!T||r||m,[O,D]=A.useState([]),k=A.useRef([]),[P,N]=A.useState([]),z=A.useRef([]),L=A.useCallback(te=>t.find(ae=>ae.id===te)?.isPiggybank?en.getState().getEnvelopeBalance(te):en.getState().getEnvelopeBalance(te,o),[t,o]);A.useEffect(()=>{const te=t.filter(K=>{if(!K.isPiggybank||!K.isActive)return!1;if(K.createdAt)try{const ce=dB(K.createdAt);if(!ce)return H.error(` Invalid creation date for piggybank ${K.name}:`,K.createdAt),!1;const ae=`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}`;return o>=ae}catch(ce){return H.error(` Error processing piggybank ${K.name}:`,ce,{createdAt:K.createdAt,typeofCreatedAt:typeof K.createdAt}),!1}return!0}).sort((K,ce)=>{const ae=K.orderIndex??0,oe=ce.orderIndex??0;return ae-oe});N(te),z.current=te},[t,o]);const B=P,j=O;A.useEffect(()=>(S.current=setTimeout(()=>{w(!0)},8e3),n(),I(!0),()=>{S.current&&clearTimeout(S.current)}),[]),A.useEffect(()=>{T&&!r&&!m&&(w(!1),S.current&&clearTimeout(S.current))},[T,r,m]),A.useEffect(()=>{const te=t.filter(K=>{if(K.isPiggybank||K.isActive===!1)return!1;const ae=(u[o]||[]).some(he=>he.envelopeId===K.id),oe=e.some(he=>he.envelopeId===K.id&&(he.month===o||he.date.startsWith(o)));return ae||oe}).sort((K,ce)=>{const ae=K.orderIndex??0,oe=ce.orderIndex??0;return ae-oe});D(te),k.current=te},[t,u,o,e]);const W=(c[o]||[]).reduce((te,K)=>te+K.amount,0),Q=(u[o]||[]).filter(te=>j.some(K=>K.id===te.envelopeId)||B.some(K=>K.id===te.envelopeId)).reduce((te,K)=>te+K.budgetedAmount,0),q=W-Q,Y=A.useCallback(async te=>{if(!te.length)return;const K=te.map(ce=>ce.id);try{await a(K)}catch(ce){H.error("Failed to persist envelope order:",ce),b("Failed to save envelope order","error")}},[a,b]),Z=A.useCallback(async te=>{await Y(te)},[Y]),ie=A.useCallback(te=>{f(o,te.id).catch(H.error),b(`Deleted "${te.name}"`,"neutral")},[f,o,b]),J=A.useCallback(async te=>{try{const K=te||o;H.log(" Copying to month:",K),await g(K),b("Previous month budget copied","success")}catch(K){H.error("Error copying previous month:",K),b("Failed to copy previous month","error")}},[g,b,o]),U=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await en.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(te){H.error("Error clearing month data:",te),b("Failed to clear month data","error")}},[s,o,b]),X=A.useCallback(async(te,K)=>{try{await h(te,K),setTimeout(()=>{const ce=en.getState(),ae=ce.currentMonth,oe=ce.incomeSources[ae]||[],he=ce.allocations[ae]||[],ne=new Set(ce.envelopes.filter(Ce=>{if(Ce.isPiggybank){if(!Ce.isActive)return!1;if(Ce.createdAt){const Pe=dB(Ce.createdAt);if(!Pe)return!1;const ze=`${Pe.getFullYear()}-${String(Pe.getMonth()+1).padStart(2,"0")}`;return ae>=ze}return!0}return Ce.isActive!==!1}).map(Ce=>Ce.id)),_e=he.filter(Ce=>ne.has(Ce.envelopeId)),fe=oe.reduce((Ce,Pe)=>Ce+Pe.amount,0),ee=_e.reduce((Ce,Pe)=>Ce+Pe.budgetedAmount,0);fe-ee<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(fe-ee)<.005&&fe>0&&b("Every dollar has a job ","success")},100)}catch(ce){H.error("Failed to set allocation:",ce),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:j,piggybanks:B,incomeSources:c,availableToBudget:q,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:R,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:L,fetchData:n,reorderEnvelopes:Z,deleteIncomeSource:ie,clearMonthData:U,copyFromPreviousMonth:J,setEnvelopeAllocation:X,localOrderRef:k,setLocalEnvelopes:D,localPiggybankOrderRef:z,setLocalPiggybanks:N}},f1e=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const m=`${h}-${g.toString().padStart(2,"0")}`;e(m)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const m=`${h}-${g.toString().padStart(2,"0")}`;e(m)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:m}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof m=="number"?m:0,S=Math.abs(b)<.005,T=b<-.005,I=x>0?w/x*100:0;let R="text-gray-900 dark:text-white",O="bg-green-500",D="Left to Budget",k=x>0?Math.min(I,100):0,P=!0;return x===0?(D="Add income to start budgeting",k=0,P=!1,R="text-gray-500 dark:text-zinc-500"):S?(R="text-green-600 dark:text-emerald-400",O="bg-green-500",D="Perfect! Every dollar has a job ",k=100,P=!1):T&&(R="text-red-600 dark:text-red-400",O="bg-red-500",D="You're not in Congress! Try again.",k=100),y.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[y.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[y.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${R}`,children:D}),P&&y.jsxs("span",{className:`text-sm font-bold truncate ${R}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),y.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${O}`,style:{width:`${k}%`}})})]})};return y.jsxs("div",{className:"py-2 space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-center gap-4",children:[y.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:y.jsx(tle,{size:20})}),y.jsx("div",{className:"text-center",children:y.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),y.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:y.jsx(Xs,{size:20})})]}),n&&y.jsx("div",{className:"px-1",children:f()})]})},B_=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=_0e(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,m=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&m<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return y.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[y.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:y.jsx(aw,{className:"text-white w-6 h-6"})}),y.jsx(Vn.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},h1e=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=en(),{showToast:o}=Wd(),[c,u]=A.useState(""),[f,h]=A.useState(""),[g,m]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}m(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){H.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{m(!1)}};return y.jsx(ha,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Vn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),y.jsxs(Vn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),y.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),y.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},p1e=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return y.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),y.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[y.jsx(Woe,{className:"w-12 h-12 text-blue-500"}),y.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:y.jsx(Jm,{size:14})})]})]}),y.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[y.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),y.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),y.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:y.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":y.jsx(y.Fragment,{children:y.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},g1e="/personal-budget-pwa/icon-512.png",YA="/personal-budget-pwa/images/budget-balanced.png",fB=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],m1e=({currentMonth:t,onComplete:e})=>{const[n,r]=A.useState(0),[i,a]=A.useState(0),[s,o]=A.useState(2500),[c,u]=A.useState(fB),{addCategory:f}=en(),h=D=>{u(k=>k.includes(D)?k.filter(P=>P!==D):[...k,D])},g=async()=>{for(let D=0;D<c.length;D++)await f({name:c[D],orderIndex:D,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()};A.useEffect(()=>{if(n===5){o(2500);const D=2e3,k=20,P=D/k,N=2500/k;let z=0;const L=setInterval(()=>{z++;const B=Math.max(0,2500-N*z);o(B),z>=k&&(clearInterval(L),setTimeout(()=>{let j=0;const W=10,Q=200,q=500/W,Y=setInterval(()=>{j++;const Z=-(q*j);o(Z),j>=W&&clearInterval(Y)},Q)},1e3))},P);return()=>{clearInterval(L)}}},[i,n]);const b=(D=>{const[k,P]=D.split("-");return new Date(parseInt(k),parseInt(P)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),x=[{icon:Jm,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${b}`,content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",y.jsx("strong",{children:"zero-based budgeting"})," method."]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:y.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:" This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:Wle,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),y.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:fB.map(D=>y.jsxs("button",{onClick:()=>h(D),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${c.includes(D)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[y.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${c.includes(D)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:c.includes(D)&&y.jsx(Ho,{size:12,className:"text-white"})}),D]},D))}),c.length===0&&y.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:mL,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"First, you'll add your income sources for the month. This could be:"}),y.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ho,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ho,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ho,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),y.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[y.jsx("strong",{children:'Look for the "Income Sources" section'})," at the top of your budget and tap the ",y.jsx(t0,{className:"w-4 h-4 inline"})," button to add income."]})})]}),color:"green"},{icon:Y1,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),y.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ho,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Groceries"})," (Food)"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ho,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(Ho,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),y.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[y.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:Zm,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",y.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),y.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[y.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[y.jsx(Zm,{className:"w-4 h-4"}),"Drag to Reorder"]}),y.jsx("p",{className:"text-sm text-indigo-800 dark:text-indigo-300 mb-3",children:"Both categories and envelopes can be reordered the same way:"}),y.jsxs("div",{className:"space-y-2 mb-3",children:[y.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[y.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),y.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[y.jsx("strong",{children:"PC:"})," Click and hold on the ",y.jsx("strong",{children:""})," dots, then drag"]})]}),y.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-3 mb-3 border border-indigo-300 dark:border-indigo-700",children:[y.jsxs("div",{className:"flex items-center gap-2 text-xs mb-2",children:[y.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Food"}),y.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"Category"})]})]}),y.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[y.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Groceries"}),y.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"$450 / $500"})]})]}),y.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-2 italic",children:" Click and hold these dots to drag"})]}),y.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400",children:[y.jsx("li",{children:" Reorder categories: Settings  Manage Categories"}),y.jsx("li",{children:" Reorder envelopes: On the main budget screen"}),y.jsx("li",{children:" Organize by priority, frequency, or preference"})]})]}),y.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",y.jsx("strong",{children:"Pro tip:"})," Try organizing your budget like this: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:sw,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[y.jsx("button",{onClick:()=>a(D=>D+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:y.jsx(Fle,{className:"w-4 h-4"})}),y.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),y.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",y.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[y.jsx("span",{children:"Left to Budget"}),y.jsxs("span",{className:`font-bold ${s<0?"text-red-600 dark:text-red-400":""}`,children:["$",s.toFixed(2)]})]}),y.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:y.jsx(Vn.div,{className:`h-full rounded-full ${s<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:s<0?"100%":`${(2500-s)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),y.jsxs(Vn.div,{className:`text-xs font-medium text-center mt-1 ${s===0?"text-green-600 dark:text-emerald-400":s<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[s===0&&"Perfect! Every dollar has a job ",s<0&&"You're not in Congress! Try again.",s>0&&"Keep allocating until you reach $0"]})]},i)]}),y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:[y.jsx("strong",{children:"To allocate money:"})," Tap the budget amount on any envelope and enter how much you want to assign to it."]}),y.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",y.jsx("strong",{children:"Pro tip:"})," Start with your essential expenses (rent, utilities, groceries) first, then allocate what's left to other categories."]})})]}),color:"blue"},{icon:e0,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",y.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(Xle,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(mL,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set an automatic monthly amount to save"})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(sw,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]}),y.jsx("div",{className:"bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-pink-900 dark:text-pink-200",children:[y.jsx("strong",{children:"Find Piggybanks"})," at the bottom of your budget. They're optional but powerful for reaching your goals!"]})})]}),color:"pink"},{icon:YA,title:"You're Ready to Budget!",description:"Start taking control of your money",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"1"})}),y.jsx("span",{children:"Choose your categories"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"2"})}),y.jsx("span",{children:"Add your income sources"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"3"})}),y.jsx("span",{children:"Create envelopes in categories"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"4"})}),y.jsx("span",{children:"Organize your budget order"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"5"})}),y.jsx("span",{children:"Allocate until Left to Budget = $0"})]})]}),y.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-6",children:y.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:' Click "Start Budgeting" below to create your first budget!'})})]}),color:"green",useCustomIcon:!0}],w=x[n],S=w.useCustomIcon?YA:w.icon,T=n===x.length-1,I=n===0,O={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}}[w.color];return y.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:y.jsx("div",{className:"w-full max-w-2xl",children:y.jsx(ha,{mode:"wait",children:y.jsxs(Vn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 pb-2",children:y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:w.title}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:w.description})]}),y.jsx("div",{className:"flex flex-col items-center mx-4",children:n===0?y.jsx("img",{src:g1e,alt:"Dollars At Work",className:`w-20 h-20 ${O.text}`}):w.useCustomIcon?y.jsx("img",{src:YA,alt:"Budget Balanced",className:`w-32 h-32 ${O.text}`}):y.jsx("div",{className:`${O.bg} p-3 rounded-xl`,children:y.jsx(S,{className:`w-8 h-8 ${O.text}`})})}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-zinc-400 whitespace-nowrap",children:["Step ",n+1," of ",x.length]})]})}),y.jsx("div",{className:"px-6 pb-6 pt-2",children:w.content}),y.jsx("div",{className:"px-6 pb-4 flex justify-center gap-2",children:x.map((D,k)=>y.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${k===n?`w-8 ${O.button}`:k<n?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},k))}),y.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!I&&y.jsxs("button",{onClick:()=>r(D=>D-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[y.jsx(hl,{className:"w-5 h-5"}),"Back"]}),y.jsx("button",{onClick:()=>{if(T)g();else{if(w.title.includes("Choose Categories")&&c.length===0)return;r(D=>D+1)}},disabled:w.title.includes("Choose Categories")&&c.length===0,className:`${I?"flex-1":"flex-[2]"} py-3 px-4 ${O.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:T?y.jsxs(y.Fragment,{children:[y.jsx(Jm,{className:"w-5 h-5"}),"Start Budgeting"]}):y.jsxs(y.Fragment,{children:["Next",y.jsx(Hoe,{className:"w-5 h-5"})]})})]})]},n)})})})},v1e=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o})=>{const c=A.useRef(null),[u,f]=A.useState(!1),h=iN(N=>{WW(),o(N,t.id)},{threshold:500,cancelOnMovement:25,detect:Rc.Touch}),g=t.piggybankConfig?.targetAmount,m=t.piggybankConfig?.monthlyContribution??0,b=t.piggybankConfig?.color||"#3B82F6",x=t.piggybankConfig?.paused||!1,w=e,S=(N,z=1)=>{const L=N.replace("#",""),B=parseInt(L,16),j=B>>16&255,W=B>>8&255,Q=B&255;return`rgba(${j}, ${W}, ${Q}, ${z})`},T=`linear-gradient(135deg, ${S(b,.14)} 0%, ${S(b,.05)} 100%)`,I=S(b,.4),R=g&&g>0?Math.min(w/g*100,100):0,O=g&&w>=g;A.useEffect(()=>{a&&a!==t.id&&f(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(f(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&u){const N=setTimeout(()=>{f(!1)},300);return()=>clearTimeout(N)}},[a,u]);const D=N=>{if(u||i){N.preventDefault(),N.stopPropagation();return}n(t.id)},k=a===t.id,P=y.jsxs("div",{className:"flex items-center gap-3 w-full",children:[y.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:N=>o(N,t.id),children:y.jsx(Zm,{size:20})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[y.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${b}20`},children:y.jsx(e0,{size:12,style:{color:b}})}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),y.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[y.jsx(sw,{size:10,style:{color:b}}),y.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",m.toFixed(2),"/mo"]}),x&&y.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[y.jsx(Nle,{size:8})," PAUSED"]})]})]})]}),y.jsxs("div",{className:"text-right flex-shrink-0",children:[y.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",w.toFixed(2)]}),y.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",g?.toFixed(0)||"0"]})]})]}),g&&g>0&&y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:y.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${R}%`,backgroundColor:b}})}),O&&!g&&y.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return y.jsx(Vn.div,{...h(),layout:!k,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:N=>{r&&r(N),c.current=N},onClick:D,style:{background:T,borderColor:I,boxShadow:k?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:k?50:1,scale:k?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:P})},tm=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},y1e=12,b1e=(t,e,n)=>Math.min(Math.max(t,e),n),x1e=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f})=>{const h=!!t.isPiggybank,g=t.piggybankConfig?.color||"#3B82F6",m=h?`linear-gradient(135deg, ${tm(g,.18)} 0%, ${tm(g,.08)} 100%)`:void 0,b=h?tm(g,.5):void 0,[x,w]=A.useState(!1),S=iN(L=>{WW(),f(L,t.id)},{threshold:500,cancelOnMovement:25,detect:Rc.Touch}),T=i.filter(L=>L.envelopeId===t.id&&L.month===a),I=T.filter(L=>L.type==="Expense"),R=T.filter(L=>L.type==="Income"),O=I.reduce((L,B)=>L+(B.amount||0),0),D=R.reduce((L,B)=>L+(B.amount||0),0),k=D>0?Math.max(0,O/D*100):0,P=L=>{if(x||o){L.preventDefault(),L.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&w(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(w(!0),u(t.id))},[c,t.id,u]),A.useEffect(()=>{if(!c&&x){const L=setTimeout(()=>{w(!1)},300);return()=>clearTimeout(L)}},[c,x]);const N=y.jsxs("div",{className:"flex items-center gap-3 w-full",children:[y.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:L=>f(L,t.id),children:y.jsx(Zm,{size:20})}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[h&&y.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:tm(g,.4),backgroundColor:tm(g,.15),color:g},children:y.jsx(e0,{size:10})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),y.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-k<=5?"text-red-500":k>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),y.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]}),e>0&&y.jsx("div",{className:"mt-1",children:y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-k<=5?"bg-red-500":k>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-k,2)}%`}})})})]})]}),z=c===t.id;return y.jsx(Vn.div,{...S(),layout:!z,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:P,style:{boxShadow:z?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:m,borderColor:b,cursor:z?"grabbing":"pointer",zIndex:z?50:1,scale:z?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${h?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:N})},hB=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o})=>{if(e.length===0&&t.id==="uncategorized")return null;const[c,u]=A.useState(e),f=A.useRef(e),[h,g]=A.useState(!1),[m,b]=A.useState(null),x=A.useRef(!1),w=A.useRef(null),S=A.useRef({}),T=A.useRef({}),I=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{h||(u(e),f.current=e)},[e,h]);const R=A.useCallback((D,k)=>{const P=T.current[k];if(P){x.current=!0;const N=D.nativeEvent||D;P.dragStart(N)}},[]),O=A.useCallback(D=>k=>{k?S.current[D]=k:delete S.current[D]},[]);return A.useEffect(()=>{const D=()=>{Object.values(T.current).forEach(N=>N?.destroy()),T.current={}};if(!c.length)return;const k=()=>{c.forEach(N=>{const z=S.current[N.id];if(!z||!w.current)return;const L=new HW(w.current,{target:z,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});L.on("dragStart",j=>{if(!x.current){j.stop();return}const W=j.inputEvent.target;if(W.closest(".js-budget-target")||W.tagName==="INPUT"){j.stop();return}const Q=f.current.findIndex(Z=>Z.id===N.id),q=j.target,Y=q.getBoundingClientRect();b(N.id),I.current={activeId:N.id,startIndex:Q,currentIndex:Q,itemHeight:Y.height+y1e},q.style.transition="none",q.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",q.style.zIndex="20",g(!0)});let B=null;L.on("drag",j=>{const W=j.target;B!==null&&cancelAnimationFrame(B),B=requestAnimationFrame(()=>{const Q=I.current;if(Q.activeId!==N.id)return;const q=j.beforeTranslate[1];W.style.transform=`translateY(${q}px)`,W.style.transition="none";const{itemHeight:Y,startIndex:Z}=Q,ie=Math.round(q/Y),J=b1e(Z+ie,0,f.current.length-1);J!==Q.currentIndex&&(Q.currentIndex=J,f.current.forEach((U,X)=>{if(U.id===N.id)return;const te=S.current[U.id];if(!te)return;let K=0;Z<J&&X>Z&&X<=J?K=-Y:Z>J&&X>=J&&X<Z&&(K=Y),te.style.transform=K?`translateY(${K}px)`:"",te.style.transition="transform 0.2s ease"})),B=null})}),L.on("dragEnd",j=>{B!==null&&(cancelAnimationFrame(B),B=null);const W=j.target,{startIndex:Q,currentIndex:q}=I.current;if(W.style.transform="",W.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",W.style.boxShadow="",f.current.forEach(Y=>{const Z=S.current[Y.id];Z&&(Z.style.transform="",Z.style.transition="")}),Q!==q){const Y=[...f.current],[Z]=Y.splice(Q,1);Y.splice(q,0,Z),f.current=Y,u(Y),o(Y.map(ie=>ie.id))}setTimeout(()=>{W.style.zIndex="",b(null),g(!1),x.current=!1},300)}),L.on("click",()=>{const j=window.event?.target;j&&(j.closest(".js-budget-target")||j.tagName==="INPUT")||a(`/envelope/${N.id}`)}),T.current[N.id]=L})},P=window.setTimeout(k,80);return()=>{clearTimeout(P),D()}},[c,a,o]),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[y.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),y.jsx("button",{onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:y.jsx(t0,{size:20})})]}),y.jsx("div",{ref:w,className:"space-y-2 relative",children:c.length===0?y.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:y.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):y.jsx(ha,{initial:!1,children:c.map(D=>{const P=(n[r]||[]).find(z=>z.envelopeId===D.id)?.budgetedAmount||0,N=s(D.id);return D.isPiggybank?y.jsx(v1e,{piggybank:D,balance:N,onNavigate:z=>a(`/envelope/${z}`),setMoveableRef:O(D.id),isReorderingActive:h,activelyDraggingId:m,onItemDragStart:()=>{},onLongPressTrigger:R},D.id):y.jsx(x1e,{env:D,budgetedAmount:P,remainingBalance:N,navigate:a,transactions:i,currentMonth:r,setMoveableRef:O,isReorderingActive:h,activelyDraggingId:m,onItemDragStart:()=>{},onLongPressTrigger:R},D.id)})})})]})},w1e=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=d1e(),{setMonth:g,setIsOnboardingActive:m,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:S,fetchCategories:T,envelopes:I,reorderEnvelopes:R}=en(),O=Ka(),[D,k]=A.useState(!1),[P,N]=A.useState("add"),[z,L]=A.useState(null),[B,j]=A.useState(!1),[W,Q]=A.useState(!1),q=A.useRef(null),Y=A.useRef(null),[Z,ie]=A.useState(0);A.useEffect(()=>{S.length===0&&T()},[S.length,T]);const J=A.useMemo(()=>{const he={},ne=[];return S.forEach(fe=>he[fe.id]=[]),[...t,...e].sort((fe,ee)=>(fe.orderIndex??0)-(ee.orderIndex??0)).forEach(fe=>{fe.categoryId&&he[fe.categoryId]?he[fe.categoryId].push(fe):ne.push(fe)}),{groups:he,uncategorized:ne}},[S,t,e]),U=A.useCallback(async he=>{const ne=[...I.map(Ce=>Ce.id)],_e=new Set(he),fe=[];let ee=0;ne.forEach(Ce=>{_e.has(Ce)?fe.push(he[ee++]):fe.push(Ce)}),await R(fe)},[I,R]);A.useLayoutEffect(()=>{if(b)return;const he=Y.current;if(!he)return;const ne=()=>ie(he.getBoundingClientRect().height);ne();const _e=new ResizeObserver(()=>ne());return _e.observe(he),window.addEventListener("resize",ne),()=>{window.removeEventListener("resize",ne),_e.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const he=setTimeout(()=>{if(b)return;if(x){m(!1);const fe=(n[i]||[]).length===0&&(a[i]||[]).length===0,ee=Object.keys(n).some(Ce=>(n[Ce]||[]).length>0)||Object.keys(a).some(Ce=>(a[Ce]||[]).length>0);Q(!!(fe&&ee));return}const ne=(n[i]||[]).length===0&&(a[i]||[]).length===0,_e=Object.keys(n).some(fe=>(n[fe]||[]).length>0)||Object.keys(a).some(fe=>(a[fe]||[]).length>0);ne?_e?(Q(!0),m(!1)):(m(!0),Q(!1)):(Q(!1),m(!1))},500);return()=>clearTimeout(he)}},[c,o,i,n,a,x]);const X=()=>{N("add"),L(null),k(!0)},te=he=>{q.current&&clearTimeout(q.current),!B&&(N("edit"),L(he),k(!0))},K=he=>{q.current&&clearTimeout(q.current),j(!0),h(he),setTimeout(()=>j(!1),500)},ce=()=>{k(!1),L(null)},ae=async()=>{Q(!1);const{copyPreviousMonthAllocations:he}=en.getState();await he(i)},oe=()=>{w(),m(!1)};return c?y.jsx(g7,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&y.jsx("header",{ref:Y,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:y.jsx(f1e,{currentMonth:i,onMonthChange:he=>{Q(!1),g(he)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((he,ne)=>he+ne.amount,0),totalAllocated:(a[i]||[]).filter(he=>t.some(ne=>ne.id===he.envelopeId)||e.some(ne=>ne.id===he.envelopeId)).reduce((he,ne)=>he+ne.budgetedAmount,0)}})}),y.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,Z+16)},children:[b?y.jsx(m1e,{currentMonth:i,onComplete:oe}):W?y.jsx(p1e,{currentMonth:i,onCopy:ae}):y.jsxs(y.Fragment,{children:[y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[y.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),y.jsx("button",{onClick:X,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:y.jsx(t0,{size:20})})]}),(n[i]||[]).length===0?y.jsx("div",{className:"text-center py-4",children:y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):y.jsx("div",{className:"space-y-2",children:y.jsx(ha,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(he=>y.jsx(Vn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(B_,{onDelete:()=>K(he),children:y.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>te(he),children:[y.jsx("div",{className:"flex-1",children:y.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:he.name})}),y.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",he.amount.toFixed(2)]})]})})},he.id))})})]}),S.map(he=>y.jsx(hB,{category:he,envelopes:J.groups[he.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:O,getEnvelopeBalance:f,onReorderGlobal:U},he.id)),J.uncategorized.length>0&&y.jsx(hB,{category:{id:"uncategorized",name:"Uncategorized"},envelopes:J.uncategorized,allocations:a,currentMonth:i,transactions:s,navigate:O,getEnvelopeBalance:f,onReorderGlobal:U}),S.length===0&&J.uncategorized.length===0&&y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[y.jsx(Y1,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),y.jsx("button",{onClick:()=>O("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),y.jsx(h1e,{isVisible:D,onClose:ce,mode:P,initialIncomeSource:z})]})]})]})},_1e=[],XW=({selectedCard:t,onCardSelect:e,initialCards:n=_1e,disabled:r=!1,isUserSelected:i=!1})=>{const a=en(J=>J.appSettings),s=en(J=>J.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=A.useState(!1),[h,g]=A.useState(!1),[m,b]=A.useState(n),[x,w]=A.useState(null),[S,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[I,R]=A.useState(null),[O,D]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const k=t||o;A.useEffect(()=>{!t&&e&&m.length>0&&e(m[0])},[t,e,m]);const P=J=>{r||(J.id==="add-new"?g(!0):(c(J),e?.(J),f(!1)))},N=()=>{r||f(!u)},z=J=>{r||w(J)},L=async()=>{if(x&&!r){const J=m.filter(U=>U.id!==x.id);if(b(J),k?.id===x.id){const U=J.length>0?J[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(U),e?.(U)}w(null),f(!1);try{await s({paymentSources:J})}catch(U){H.error("Failed to delete card from app settings:",U),b(m),alert("Failed to delete card. Please try again.");return}}},B=()=>{w(null)},j=async()=>{if(r)return;const J=!["Cash","Venmo"].includes(S.network);if(J&&(S.last4.length!==4||!/^\d{4}$/.test(S.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!S.name.trim()){alert("Please enter a name");return}const U={id:`custom-${Date.now()}`,name:S.name.trim(),network:S.network,last4:J?S.last4:void 0,color:S.color},X=[...m,U];b(X),c(U),e?.(U),g(!1),f(!1);try{await s({paymentSources:X})}catch(te){H.error("Failed to save card to app settings:",te),b(m),c(k),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},W=(J,U)=>{r||(R(U),J.dataTransfer.effectAllowed="move")},Q=(J,U)=>{r||!I||(J.preventDefault(),J.dataTransfer.dropEffect="move",D(U))},q=()=>{D(null)},Y=async(J,U)=>{if(r||!I)return;J.preventDefault(),D(null);const X=m.findIndex(K=>K.id===I.id);if(X===-1||X===U)return;const te=[...m];te.splice(X,1),te.splice(U,0,I),b(te),R(null);try{await s({paymentSources:te})}catch(K){H.error("Failed to reorder cards:",K),b(m),alert("Failed to reorder cards. Please try again.")}},Z=()=>{R(null),D(null)},ie=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&y.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),y.jsxs("div",{onClick:N,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:k.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:k.network}),y.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(k.network)?k.network==="Cash"?"$$$":"@":` ${k.last4||""}`})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:k.name}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(k.network)?k.network:`(...${k.last4})`})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&y.jsxs("div",{className:"card-stack-dropdown",children:[m.length>1&&y.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),y.jsx("div",{className:"card-stack",children:y.jsx(ha,{initial:!1,mode:"popLayout",children:[...m,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((J,U)=>{const X=k.id===J.id,te=J.id==="add-new",K=["Cash","Venmo"].includes(J.network);return y.jsx(Vn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(B_,{onDelete:()=>!te&&!r&&z(J),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${X?"selected":""} ${te?"add-new-card":""} ${I?.id===J.id?"dragging":""} ${O===U?"drag-over":""}`,onClick:()=>P(J),draggable:!te&&!r,onDragStart:te?void 0:ce=>W(ce,J),onDragOver:te?void 0:ce=>Q(ce,U),onDragLeave:te?void 0:q,onDrop:te?void 0:ce=>Y(ce,U),onDragEnd:te?void 0:Z,style:{backgroundColor:te?"#f3f4f6":J.color,color:te?"#374151":J.color==="#e3e3e3"?"#000":"#fff",zIndex:m.length-U,opacity:I?.id===J.id?.5:1,transform:O===U?"scale(1.02)":"scale(1)"},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:te?"":J.network}),X&&!te&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:J.name}),y.jsx("div",{className:"card-number",children:te?"":K?J.network==="Cash"?"$$$":"@":` ${J.last4}`})]}),te&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},J.id)})})})]})]}),h&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),y.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),y.jsx("input",{type:"text",value:S.name,onChange:J=>T({...S,name:J.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),y.jsxs("select",{value:S.network,onChange:J=>T({...S,network:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"}),y.jsx("option",{value:"Cash",children:"Cash"}),y.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(S.network)&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:S.last4,onChange:J=>T({...S,last4:J.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:ie.map(J=>y.jsx("button",{type:"button",onClick:()=>T({...S,color:J}),className:`w-full h-10 rounded-lg border-2 transition-all ${S.color===J?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:J}},J))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:S.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:S.network}),y.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(S.network)?S.network==="Cash"?"$$$":"@":` ${S.last4||"0000"}`})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"button",onClick:j,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:x.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{type:"button",onClick:B,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},QW=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const[i,a]=A.useState([]),[s,o]=A.useState(!1);A.useEffect(()=>{r&&!s&&t.some(I=>I.id===r)&&(a([r]),o(!0))},[r,t,s]);const[c,u]=A.useState({}),[f,h]=A.useState(e),g=T=>{a(I=>I.includes(T)?I.filter(R=>R!==T):[...I,T])},m=(T,I)=>{u(R=>({...R,[T]:I}))},b=nd.useRef(i.length);A.useEffect(()=>{if(i.length===1){const T=i[0];u({[T]:e})}else if(i.length>1&&b.current<=1){const T={};i.forEach(I=>{T[I]=0}),u(T)}b.current=i.length},[i.length,i,e]),A.useEffect(()=>{const T=Object.values(c).reduce((I,R)=>I+(R||0),0);h(e-T),n(c)},[c,e,n]),A.useEffect(()=>{const T={...c};Object.keys(T).forEach(I=>{i.includes(I)||delete T[I]}),Object.keys(T).length!==Object.keys(c).length&&u(T)},[i,c]);const x=()=>{a([]),u({})},w=Math.abs(f)<.01&&i.length>0,S=i.length>0&&Math.abs(f)>.01;return y.jsxs("div",{className:"space-y-3",children:[i.length>1&&y.jsxs("div",{className:`p-3 rounded-lg ${S?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":w?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),y.jsxs("span",{className:`font-bold text-lg ${S?"text-red-600 dark:text-red-400":w?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",f.toFixed(2)]})]}),S&&y.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:i.length>1?"Split Across Envelopes":"Select Envelope"}),i.length>0&&y.jsx("button",{type:"button",onClick:x,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(T=>y.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsx("input",{type:"checkbox",checked:i.includes(T.id),onChange:()=>g(T.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:T.name}),i.includes(T.id)&&i.length>1&&y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",min:"0",step:"0.01",value:c[T.id]||"",onChange:I=>m(T.id,parseFloat(I.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},T.id))})]})},ZW=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:u}=en(),[f,h]=A.useState(""),[g,m]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(new Date().toISOString().split("T")[0]),[T,I]=A.useState(null),[R,O]=A.useState(null),[D,k]=A.useState({}),P=a?[...a].filter(j=>j.isActive!==!1).sort((j,W)=>{const Q=j.orderIndex??0,q=W.orderIndex??0;return Q!==q?Q-q:j.name.localeCompare(W.name)}):[];A.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),m(i.merchant||""),x(i.description),I(i.paymentMethod||null),a){const j=a.find(W=>W.id===i.envelopeId);O(j||r),k({[i.envelopeId]:i.amount})}try{const j=new Date(i.date);isNaN(j.getTime())?(H.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(j.toISOString().split("T")[0])}catch(j){H.error("Error parsing transaction date:",j),S(new Date().toISOString().split("T")[0])}}else h(""),m(""),x(""),S(new Date().toISOString().split("T")[0]),O(r),k({})},[t,n,i,r,a]);const N=async j=>{j.preventDefault();const W=parseFloat(f);if(isNaN(W)||W<=0)return;const Q=n==="edit"&&Object.keys(D).length>0;try{const q=new Date(w),Y=`${q.getFullYear()}-${(q.getMonth()+1).toString().padStart(2,"0")}`;if(Y!==u){const Z=`This transaction date (${Y}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(Z))return}n==="add"?(H.log(" Adding income transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(R||r).id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?(H.log(" Adding expense transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(R||r).id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&(H.log(" Updating transaction"),Q?await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(D)[0]||i.envelopeId,paymentMethod:T||void 0}):await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(R||r).id,paymentMethod:T||void 0})),H.log(" Transaction saved successfully"),e()}catch(q){H.error(" Error saving transaction:",q),alert("Failed to save transaction: "+(q instanceof Error?q.message:"Unknown error"))}},z=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},L=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",B=n==="add"?"text-green-500":"text-red-500";return y.jsx(ha,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Vn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),y.jsxs(Vn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L}),y.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),y.jsxs("form",{onSubmit:N,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${B}`,children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:j=>{const W=j.target.value.replace(/\D/g,"");if(!W){h("");return}const q=(parseInt(W,10)/100).toFixed(2);h(q)},onKeyDown:j=>{(j.key==="e"||j.key==="E"||j.key==="+"||j.key==="-")&&j.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${B} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:g,onChange:j=>m(j.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&y.jsx(XW,{selectedCard:T,onCardSelect:I}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:b,onChange:j=>x(j.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const j=new Date(w);return`${j.getFullYear()}-${(j.getMonth()+1).toString().padStart(2,"0")}`!==u?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(kh,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:w,onChange:j=>{H.log("Date changed to:",j.target.value),S(j.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx(QW,{envelopes:P,transactionAmount:parseFloat(f)||0,onSplitChange:k,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:y.jsxs("button",{type:"button",onClick:z,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[y.jsx(P8,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},S1e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=en(),[a,s]=A.useState(""),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),m=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const S=parseFloat(o);isNaN(S)||S<=0||!a||(i(n.id,a,S,u,new Date(h)),e())},x=r.find(w=>w.id===a);return y.jsx(ha,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Vn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),y.jsxs(Vn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),y.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),y.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),y.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),y.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[y.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),m.map(w=>y.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const S=w.target.value.replace(/\D/g,"");if(!S){c("");return}const I=(parseInt(S,10)/100).toFixed(2);c(I)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),y.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),y.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&y.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",y.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},E1e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,m]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,S]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),m(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),m("piggy-bank"),x(!1))},[r,t]);const T=async R=>{if(R.preventDefault(),!(!i.trim()||!c)){S(!0);try{const O={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(O.piggybankConfig.targetAmount=parseFloat(s)),r&&(O.id=r.id,O.currentBalance=r.currentBalance,O.lastUpdated=new Date().toISOString(),O.isActive=r.isActive,O.orderIndex=r.orderIndex,O.userId=r.userId),await n(O),e()}catch(O){H.error("Error saving piggybank:",O),alert("Failed to save piggybank")}finally{S(!1)}}},I=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return y.jsx(ha,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Vn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),y.jsxs(Vn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:y.jsx(e0,{size:20,className:"text-blue-600 dark:text-blue-400"})}),y.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:y.jsx(X1,{size:24})})]}),y.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),y.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:R=>a(R.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:R=>{const O=R.target.value.replace(/\D/g,"");if(!O){u("");return}const k=(parseInt(O,10)/100).toFixed(2);u(k)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:R=>{const O=R.target.value.replace(/\D/g,"");if(!O){o("");return}const k=(parseInt(O,10)/100).toFixed(2);o(k)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsx("div",{className:"space-y-2",children:y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:b,onChange:R=>x(R.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),y.jsxs("div",{children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:I.map(R=>y.jsx("button",{type:"button",onClick:()=>h(R.value),className:`w-full aspect-square rounded-lg transition-all ${f===R.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:R.value},title:R.label},R.value))})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},T1e=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return H.error("Date error:",e),"Error"}},A1e=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},JW=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;H.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),y.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[y.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&y.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[y.jsx("span",{children:T1e(t.date)}),e&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),y.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",A1e(t.amount)]}),n?y.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?y.jsx(Ho,{className:"text-green-500",size:20}):y.jsx(gL,{className:"text-gray-400",size:20})}):y.jsx("span",{children:t.reconciled?y.jsx(Ho,{className:"text-green-500",size:20}):y.jsx(gL,{className:"text-gray-400",size:20})})]})]})},XA=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),C1e=()=>{const{id:t}=Fse(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:m,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w,fetchTransactionsForEnvelope:S}=en(),{showToast:T}=Wd(),I=Ka(),R=Cs(),[O,D]=A.useState(!1),[k,P]=A.useState(!1),[N,z]=A.useState(!1),[L,B]=A.useState(null),[j,W]=A.useState(!1),[Q,q]=A.useState(!1),[Y,Z]=A.useState(""),ie=A.useRef(null),J=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const U=e.find(ee=>ee.id===t);A.useEffect(()=>{U?.isPiggybank&&U.id&&S(U.id)},[U?.isPiggybank,U?.id,S]);const X=async ee=>{if(U)try{const Ce={...U,...ee,id:U.id,userId:U.userId,currentBalance:U.currentBalance,lastUpdated:new Date().toISOString(),isActive:U.isActive,orderIndex:U.orderIndex};await w(Ce),T("Piggybank updated successfully","success"),W(!1)}catch(Ce){H.error("Failed to update piggybank:",Ce),T("Failed to update piggybank","error")}},te=U?.isPiggybank?U.piggybankConfig?.monthlyContribution||0:g[h]?.find(ee=>ee.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{Q&&(Z(te.toString()),setTimeout(()=>{ie.current?.focus(),ie.current?.select()},50))},[Q,te]);const K=ee=>{const Ce=(m[h]||[]).reduce((Be,Ie)=>Be+Ie.amount,0),Pe=g[h]||[];let Le=Pe.map(Be=>U&&Be.envelopeId===U.id&&ee!==void 0?{...Be,budgetedAmount:ee}:Be).filter(Be=>{const Ie=e.find(Oe=>Oe.id===Be.envelopeId);return Ie?Ie.isActive!==!1:!1}).reduce((Be,Ie)=>Be+Ie.budgetedAmount,0);return ee!==void 0&&U&&(Pe.some(Ie=>Ie.envelopeId===U.id)||(Le+=ee)),Ce-Le},ae=Q?K(parseFloat(Y)||0):K(),oe=async()=>{if(!U||J.current)return;const ee=parseFloat(Y);if(isNaN(ee)||ee<0){T("Please enter a valid positive number","error");return}J.current=!0;try{U.isPiggybank?await x(U.id,ee):await b(U.id,ee),q(!1)}catch(Ce){H.error("Failed to save budget:",Ce),T("Failed to update budget","error")}finally{J.current=!1}};if(!U)return i?y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Loading envelope..."})}):y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Envelope not found."})});if(U.isPiggybank){const ee=n.filter(Ce=>Ce.envelopeId===U.id);H.log(" Piggybank:",U.name),H.log(" Created at:",U.createdAt),H.log(" Transactions:",ee.map(Ce=>({date:Ce.date,description:Ce.description,amount:Ce.amount})))}const he=n.filter(ee=>ee.envelopeId===U.id).filter(ee=>{if(ee.description==="Budgeted"||ee.description==="Piggybank Contribution")return!1;if(U.isPiggybank){if(!U.createdAt)return!0;const Ce=qw(U.createdAt).toISOString().split("T")[0];return qw(ee.date).toISOString().split("T")[0]>=Ce}return ee.month===h||!ee.month}).sort((ee,Ce)=>new Date(Ce.date).getTime()-new Date(ee.date).getTime()),ne=()=>{R.state?.fromGlobalFAB?I("/"):I(-1)},_e=()=>{t&&(a(t),I(-1))},fe=ee=>{const Ce={...ee,reconciled:!ee.reconciled};o(Ce)};return y.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[y.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[y.jsx("button",{onClick:()=>{if(U.isPiggybank)W(!0);else{const ee=prompt("Rename envelope:",U.name);ee&&ee.trim()&&t&&s(t,ee)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:U.isPiggybank?"Edit":"Rename"}),y.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.name}),y.jsx("button",{onClick:ne,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),y.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const ee=U.isPiggybank?f(U.id):f(U.id,h);return H.log(`Debug: Envelope ${U.name} Balance:`,ee),y.jsx("span",{className:`text-xl font-bold ${ee<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:XA(ee)})})()]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:U.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Q?y.jsx("form",{onSubmit:ee=>{ee.preventDefault(),oe()},className:"flex items-center gap-2",children:y.jsx("input",{ref:ie,type:"number",step:"0.01",value:Y,onChange:ee=>Z(ee.target.value),onBlur:oe,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):y.jsx("div",{onClick:()=>q(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:y.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:XA(te)})})]}),y.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${ae<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":ae===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[y.jsx("span",{children:"Left to Budget:"}),y.jsx("span",{children:XA(ae)})]})]})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[y.jsx(sle,{className:"w-5 h-5 mr-3"}),"Add Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[y.jsx(ile,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>z(!0),children:[y.jsx(qoe,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:he.length===0?y.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):y.jsx(ha,{initial:!1,mode:"popLayout",children:he.map(ee=>y.jsx(Vn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(B_,{disabled:ee.isAutomatic,onDelete:()=>{if(!ee.id)return;const Ce={...ee};c(ee.id),T("Transaction deleted","neutral",()=>u(Ce))},children:y.jsx(JW,{transaction:ee,onReconcile:()=>fe(ee),onEdit:()=>{ee.isAutomatic||B(ee)}})})},ee.id))})})]}),y.jsx("div",{className:"mt-8",children:y.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const ee=U.isPiggybank?`Are you sure you want to delete "${U.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${U.name}" from ${h}? This will delete all transactions for this month only.`;confirm(ee)&&_e()},children:[y.jsx(P8,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),y.jsx(ZW,{isVisible:O||k||!!L,onClose:()=>{D(!1),P(!1),B(null)},mode:O?"add":k?"spend":"edit",currentEnvelope:U,initialTransaction:L}),y.jsx(S1e,{isVisible:N,onClose:()=>z(!1),sourceEnvelope:U}),y.jsx(E1e,{isOpen:j,onClose:()=>W(!1),onSave:X,existingPiggybank:U})]})},I1e=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),m=w=>{const[S,T]=w.split("-");return new Date(parseInt(S),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return y.jsx(ha,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Vn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),y.jsxs(Vn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",m(r)]}),y.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),y.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),y.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:y.jsxs("ul",{className:"space-y-1",children:[y.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),y.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),y.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[y.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:y.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),y.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),y.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",y.jsx("strong",{children:m(r)})," will be permanently removed."]})]})}),y.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),y.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},k1e=()=>{const t=Ka(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:m,clearMonthData:b,handleUserLogout:x,resetOnboarding:w}=en(),{deleteAccount:S,currentUser:T,logout:I}=nn(),[R,O]=A.useState(null),[D,k]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[P,N]=A.useState(!1),[z,L]=A.useState(""),[B,j]=A.useState(!1),[W,Q]=A.useState(!1),[q,Y]=A.useState(null),[Z,ie]=A.useState(!1),[J,U]=A.useState(!1),X=978307200,te=c?.theme??"system",K=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(Ie=>{H.error("Failed to initialize app settings:",Ie)})},[f,c]);const ce=(Ie,Oe)=>{O({type:Ie,text:Oe}),setTimeout(()=>O(null),3500)},ae=A.useMemo(()=>{const Ie=n.length,Oe=r.length,Ge=m?g[m]||[]:[],gt=Object.values(h).reduce((gn,Kt)=>gn+Kt.length,0),Ct=Ge.length,kt=n.reduce((gn,Kt)=>{const Mr=Kt.isPiggybank?o(Kt.id):o(Kt.id,m);return gn+(typeof Mr=="number"?Mr:0)},0),at=0,wt=r.reduce((gn,Kt)=>{let Mr=0;if(typeof Kt.date=="string"){const Xa=Date.parse(Kt.date);Mr=Number.isNaN(Xa)?0:Xa}else typeof Kt.date=="number"&&(Mr=Kt.date<2e9?(Kt.date+X)*1e3:Kt.date);return Math.max(gn,Mr)},0),ct=at||wt?new Date(Math.max(at,wt)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Ie,transactionCount:Oe,incomeSourceCount:gt,allocationCount:Ct,totalBalance:kt,lastUpdated:ct}},[n,r,h,g,m]),oe=()=>{try{H.log(" Creating backup...");const Ie={appVersion:"1.9.4",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(kt=>({...kt,currentBalance:(()=>{const at=kt.isPiggybank?o(kt.id):o(kt.id,m);return typeof at=="number"?at:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},Oe=new Blob([JSON.stringify(Ie,null,2)],{type:"application/json"}),Ge=URL.createObjectURL(Oe),gt=document.createElement("a");gt.href=Ge,gt.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(gt),gt.click(),document.body.removeChild(gt),URL.revokeObjectURL(Ge);const Ct=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",Ct),k(Ct),Y({success:!0,message:"Backup downloaded successfully."})}catch(Ie){H.error(Ie),Y({success:!1,message:"Failed to create backup file.",onRetry:oe})}},he=()=>{Q(!0),Y(null);try{const Ie=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],Oe=r.filter(ct=>ct.description!=="Budgeted"&&ct.description!=="Piggybank Contribution"),Ge=new Set,gt=[];for(const ct of Oe){let gn,Kt,Mr;if(ct.splitGroupId&&!Ge.has(ct.splitGroupId)){Ge.add(ct.splitGroupId);const vn=Oe.filter(Mt=>Mt.splitGroupId===ct.splitGroupId);gn=vn.reduce((Mt,ks)=>Mt+ks.amount,0),Kt=vn.map(Mt=>n.find(ks=>ks.id===Mt.envelopeId)?.name||"Unknown").join(", "),Mr=vn.every(Mt=>Mt.reconciled)}else{if(ct.splitGroupId&&Ge.has(ct.splitGroupId))continue;gn=ct.amount,Kt=n.find(vn=>vn.id===ct.envelopeId)?.name||"Unknown",Mr=ct.reconciled}const Xa=(ct.merchant||"").replace(/"/g,'""'),Qa=(ct.description||"").replace(/"/g,'""');let Za="";ct.paymentMethod&&(Za=`${ct.paymentMethod.name} (...${ct.paymentMethod.last4})`);const si=Za.replace(/"/g,'""');let mn="Invalid Date";if(ct.date){if(typeof ct.date=="string")mn=ct.date.split("T")[0];else if(typeof ct.date=="number"){const vn=ct.date<2e9?(ct.date+X)*1e3:ct.date;mn=new Date(vn).toISOString().split("T")[0]}}gt.push([mn,`"${Xa}"`,`"${si}"`,`"${Qa}"`,gn.toFixed(2),ct.type,`"${Kt}"`,Mr?"Yes":"No"].join(","))}const Ct=[Ie.join(","),...gt].join(`
`),kt=new Blob([Ct],{type:"text/csv;charset=utf-8;"}),at=URL.createObjectURL(kt),wt=document.createElement("a");wt.href=at,wt.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),URL.revokeObjectURL(at),Y({success:!0,message:"Transactions CSV exported successfully."})}catch(Ie){H.error(Ie),Y({success:!1,message:"Failed to export CSV. Please try again.",onRetry:he})}finally{Q(!1)}},ne=()=>{e.current?.click()},_e=Ie=>{const Oe=Ie.target.files?.[0];if(!Oe)return;const Ge=new FileReader;Ge.onload=async gt=>{try{const Ct=JSON.parse(gt.target?.result),kt=await s(Ct);if(!kt.success){ce("error",kt.message);return}if(Ct.appSettings?.theme)try{await u({theme:Ct.appSettings.theme})}catch(at){H.error("Failed to update imported settings:",at)}ce("success",`Loaded ${Ct.envelopes?.length??0} envelopes, ${Ct.transactions?.length??0} transactions.`)}catch(Ct){H.error(Ct),ce("error","Invalid backup file. Please verify the JSON.")}},Ge.readAsText(Oe),Ie.target.value=""},fe=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),ce("success","All data has been permanently deleted."),t("/")}catch(Ie){H.error("Reset failed:",Ie),ce("error","Failed to delete all data. Some data may remain.")}},ee=async()=>{if(!z.trim()){ce("error","Please enter your password to confirm account deletion.");return}N(!0);try{await a(),await S(z)?ce("success","Your account has been permanently deleted."):ce("error","Failed to delete account. Please try again.")}catch(Ie){H.error("Account deletion failed:",Ie),ce("error","Failed to delete account. Please try again.")}finally{N(!1),j(!1),L("")}},Ce=async()=>{if(!T){ce("error","You must be logged in to clean up data.");return}ie(!0);try{const Ie=await aN.cleanupOrphanedData(T.id),Oe=Ie.orphanedAllocationsDeleted+Ie.orphanedTransactionsDeleted;Oe>0?ce("success",`Cleaned ${Oe} orphaned items: ${Ie.orphanedAllocationsDeleted} allocations and ${Ie.orphanedTransactionsDeleted} transactions.`):ce("success","No orphaned data found. Your database is already clean!")}catch(Ie){H.error("Cleanup failed:",Ie),ce("error","Failed to clean up orphaned data. Please try again.")}finally{ie(!1)}},Pe=()=>{U(!0)},ze=async()=>{U(!1),await b(m),ce("success","Month data has been reset.")},Le=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),I(),t("/")}catch(Ie){H.error("Logout failed:",Ie)}},Be=T?.displayName?.charAt(0)?.toUpperCase()||T?.email?.charAt(0)?.toUpperCase()||"U";return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[y.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),y.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[R&&y.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${R.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[R.type==="success"?y.jsx(iw,{size:18}):y.jsx(aw,{size:18}),R.text]}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[y.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Be}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:T?.displayName||T?.email?.split("@")[0]||"User"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:T?.email}),y.jsxs("button",{onClick:Le,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[y.jsx(Ple,{size:14})," Log Out"]})]})]})}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(vL,{className:"text-blue-500",size:22}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ae.envelopeCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ae.transactionCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ae.incomeSourceCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ae.allocationCount})]})]})]})}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:y.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-xl",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]})})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[te==="light"&&y.jsx("span",{className:"text-orange-500 text-lg",children:""}),te==="dark"&&y.jsx("span",{className:"text-purple-500 text-lg",children:""}),te==="system"&&y.jsx("span",{className:"text-gray-500 text-lg",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:te})]}),y.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Ie=>y.jsx("button",{onClick:async()=>{try{await u({theme:Ie.value})}catch(Oe){H.error("Failed to update theme setting:",Oe)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${te===Ie.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Ie.label},Ie.value))})]}),y.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:K})]}),y.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Ie=>y.jsx("button",{onClick:async()=>{try{await u({fontSize:Ie.value})}catch(Oe){H.error("Failed to update font size setting:",Oe)}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${K===Ie.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:y.jsx("span",{className:Ie.sizeClass,children:Ie.label})},Ie.value))})]})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:y.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Jm,{className:"text-purple-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]})})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[y.jsxs("button",{onClick:oe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(vL,{className:"text-blue-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",D]})]})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:ne,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(ice,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:he,disabled:W,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[W?y.jsx(yL,{className:"text-blue-500 animate-spin",size:20}):y.jsx(vle,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:W?"Preparing CSV":"Export Transactions (CSV)"})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]}),y.jsx("input",{type:"file",ref:e,onChange:_e,accept:".json",className:"hidden"})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[y.jsxs("button",{onClick:Pe,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(zh,{className:"text-orange-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:Ce,disabled:Z,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[Z?y.jsx(yL,{className:"text-yellow-500 animate-spin",size:20}):y.jsx(Jm,{className:"text-yellow-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Z?"Cleaning Data...":"Purge Orphaned Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:fe,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(aw,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:()=>j(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(kh,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),y.jsx(Xs,{className:"text-gray-400",size:18})]})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:y.jsxs("div",{className:"p-4",children:[y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),ce("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:y.jsx("div",{className:"flex items-center gap-1",children:y.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),y.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const Ie=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Ie}),ce("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:y.jsx(zh,{size:20})})]}):y.jsx("button",{onClick:async()=>{const Ie=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Ie}),ce("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),y.jsxs("div",{className:"text-center py-4",children:[y.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:["Version ","1.9.4"," (PWA)"]}),"        "]}),q&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[q.success?y.jsx(iw,{className:"text-green-500",size:24}):y.jsx(kh,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:q.success?"Success":"Error"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:q.message}),y.jsxs("div",{className:"flex gap-2",children:[q.onRetry&&y.jsx("button",{onClick:()=>{Y(null),q.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),y.jsx("button",{onClick:()=>Y(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),y.jsx(I1e,{isVisible:J,onClose:()=>U(!1),onConfirm:ze,currentMonth:m,incomeCount:(h[m]||[]).length,totalIncome:(h[m]||[]).reduce((Ie,Oe)=>Ie+Oe.amount,0),allocationCount:(g[m]||[]).filter(Ie=>n.some(Oe=>Oe.id===Ie.envelopeId)).length,totalAllocated:(g[m]||[]).filter(Ie=>n.some(Oe=>Oe.id===Ie.envelopeId)).reduce((Ie,Oe)=>Ie+Oe.budgetedAmount,0),transactionCount:r.filter(Ie=>Ie.month===m).length,totalTransactionAmount:r.filter(Ie=>Ie.month===m).reduce((Ie,Oe)=>Ie+Oe.amount,0)}),B&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(kh,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),y.jsx("input",{type:"password",value:z,onChange:Ie=>L(Ie.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{j(!1),L("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:ee,disabled:P||!z.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Deleting...":"Delete Account"})]})]})})]})]})},P1e=()=>{const t=Ka(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=en(),{showToast:s}=Wd(),[o,c]=A.useState(!1),[u,f]=A.useState(""),[h,g]=A.useState(null),[m,b]=A.useState(""),[x,w]=A.useState(e),S=A.useRef(e),[T,I]=A.useState(!1),[R,O]=A.useState(null),D=A.useRef(!1),k=A.useRef(null),P=A.useRef({}),N=A.useRef({}),z=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),S.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const L=A.useCallback((ie,J)=>{const U=N.current[J];if(U){D.current=!0;const X=ie.nativeEvent||ie;U.dragStart(X)}},[]),B=A.useCallback(ie=>J=>{J?P.current[ie]=J:delete P.current[ie]},[]),j=async ie=>{if(ie.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(J){H.error(J),s("Failed to add category","error")}},W=async ie=>{if(!m.trim())return;const J=e.find(U=>U.id===ie);if(J)try{await r({...J,name:m.trim()}),g(null),s("Category updated","success")}catch(U){H.error(U),s("Failed to update category","error")}},Q=async ie=>{if(confirm("Are you sure? Envelopes in this category will become Uncategorized."))try{await i(ie),s("Category deleted","success")}catch(J){H.error(J),s("Failed to delete category","error")}},q=8,Y=(ie,J,U)=>Math.max(J,Math.min(U,ie)),Z=A.useCallback(async ie=>{if(!ie.length)return;const J=ie.map(U=>U.id);try{await a(J)}catch(U){H.error("Failed to persist category order:",U),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const ie=()=>{Object.values(N.current).forEach(X=>X?.destroy()),N.current={}};if(!x.length)return;const J=()=>{x.forEach(X=>{const te=P.current[X.id];if(!te||!k.current)return;const K=new HW(k.current,{target:te,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});K.on("dragStart",ae=>{if(H.log(" Moveable dragStart event",{isManualDrag:D.current,categoryId:X.id}),!D.current){ae.stop();return}const oe=ae.inputEvent.target;if(oe.tagName==="INPUT"||oe.tagName==="BUTTON"||oe.closest("button")){ae.stop();return}H.log(" Drag starting for category:",X.id);const he=S.current.findIndex(fe=>fe.id===X.id),ne=ae.target,_e=ne.getBoundingClientRect();O(X.id),z.current={activeId:X.id,startIndex:he,currentIndex:he,itemHeight:_e.height+q},ne.style.transition="none",ne.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",ne.style.zIndex="20",I(!0)});let ce=null;K.on("drag",ae=>{const oe=ae.target;ce!==null&&cancelAnimationFrame(ce),ce=requestAnimationFrame(()=>{const he=z.current;if(he.activeId!==X.id)return;const ne=ae.beforeTranslate[1];oe.style.transform=`translateY(${ne}px)`,oe.style.transition="none";const{itemHeight:_e,startIndex:fe}=he,ee=Math.round(ne/_e),Ce=Y(fe+ee,0,S.current.length-1);Ce!==he.currentIndex&&(he.currentIndex=Ce,S.current.forEach((Pe,ze)=>{if(Pe.id===X.id)return;const Le=P.current[Pe.id];if(!Le)return;let Be=0;fe<Ce&&ze>fe&&ze<=Ce?Be=-_e:fe>Ce&&ze>=Ce&&ze<fe&&(Be=_e),Le.style.transform=Be?`translateY(${Be}px)`:"",Le.style.transition="transform 0.2s ease"})),ce=null})}),K.on("dragEnd",ae=>{ce!==null&&(cancelAnimationFrame(ce),ce=null);const oe=ae.target,{startIndex:he,currentIndex:ne}=z.current;if(oe.style.transform="",oe.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",oe.style.boxShadow="",S.current.forEach(_e=>{const fe=P.current[_e.id];fe&&(fe.style.transform="",fe.style.transition="")}),he!==ne){const _e=[...S.current],[fe]=_e.splice(he,1);_e.splice(ne,0,fe),S.current=_e,w(_e),Z(_e)}setTimeout(()=>{oe.style.zIndex="",O(null),I(!1),D.current=!1},300)}),N.current[X.id]=K})},U=window.setTimeout(J,80);return()=>{clearTimeout(U),ie()}},[x,Z]),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[y.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(hl,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),y.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?y.jsxs("form",{onSubmit:j,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:u,onChange:ie=>f(ie.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),y.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):y.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[y.jsx(t0,{size:20}),"Add Category"]})}),y.jsxs("div",{ref:k,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(ie=>{const J=iN(X=>{L(X,ie.id)},{threshold:500,cancelOnMovement:25,detect:Rc.Touch}),U=R===ie.id;return y.jsx("div",{...J(),ref:B(ie.id),style:{cursor:U?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:h===ie.id?y.jsxs("div",{className:"flex-1 flex gap-2",children:[y.jsx("input",{type:"text",value:m,onChange:X=>b(X.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),y.jsx("button",{onClick:()=>W(ie.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),y.jsx("button",{onClick:()=>g(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:X=>L(X,ie.id),children:y.jsx(Zm,{size:20})}),y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ie.name})]}),y.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[y.jsx("button",{onClick:()=>{g(ie.id),b(ie.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:y.jsx(jle,{size:18})}),y.jsx("button",{onClick:()=>Q(ie.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:y.jsx(aw,{size:18})})]})]})},ie.id)}),x.length===0&&!o&&y.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},D1e=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=en(),{showToast:a}=Wd(),s=Ka(),[o]=E8();nd.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,m]=A.useState(o.get("categoryId")||""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState("#3B82F6"),[R,O]=A.useState(!1),D=async k=>{if(k.preventDefault(),!c.trim()||R)return;O(!0);const P=en.getState().envelopes,z=(P.length>0?Math.max(...P.map(W=>W.orderIndex??0)):-1)+1,L=f?new Date(`${n}-01T00:00:00`):new Date,B={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:L.toISOString(),isActive:!0,orderIndex:z,categoryId:g||void 0};if(f){B.isPiggybank=!0;const W={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(W.targetAmount=parseFloat(b)),B.piggybankConfig=W}t(B).then(W=>{if(W){const Q=f?parseFloat(w||"0"):0;e(W,Q).catch(q=>H.error("Failed to create allocation:",q)),setTimeout(()=>{s("/")},50)}}).catch(W=>{H.error("Failed to create envelope:",W),a(W.message||"Failed to create envelope","error"),O(!1)})};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(hl,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:y.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?y.jsx(e0,{size:40}):y.jsx(ble,{size:40})})}),y.jsxs("form",{onSubmit:D,className:"p-6 space-y-6 pb-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),y.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[y.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),y.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),y.jsxs("select",{id:"category",value:g,onChange:k=>m(k.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:[y.jsx("option",{value:"",children:"Uncategorized"}),r.map(k=>y.jsx("option",{value:k.id,children:k.name},k.id))]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),y.jsx("input",{type:"text",id:"name",value:c,onChange:k=>u(k.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:k=>S(k.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"target-amount",value:b,onChange:k=>x(k.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(k=>y.jsx("button",{type:"button",onClick:()=>I(k.value),className:`w-full aspect-square rounded-lg transition-all ${T===k.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:k.value},title:k.label},k.value))})]})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||R,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!R?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:R?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const O1e="type.googleapis.com/google.protobuf.Int64Value",R1e="type.googleapis.com/google.protobuf.UInt64Value";function eY(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Gw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Gw(e));if(typeof t=="function"||typeof t=="object")return eY(t,e=>Gw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function cp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case O1e:case R1e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>cp(e)):typeof t=="function"||typeof t=="object"?eY(t,e=>cp(e)):t}const sN="functions";const pB={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oi extends wo{constructor(e,n,r){super(`${sN}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Oi.prototype)}}function N1e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Hw(t,e){let n=N1e(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!pB[s])return new Oi("internal","internal");n=pB[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=cp(i))}}catch{}return n==="ok"?null:new Oi(n,r,i)}class M1e{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ta(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const hP="us-central1",j1e=/^data: (.*?)(?:\n|$)/;function z1e(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Oi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class L1e{constructor(e,n,r,i,a=hP,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new M1e(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=hP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function V1e(t,e,n){const r=eu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(gD(t.emulatorOrigin+"/backends"),p$("Functions",!0))}function B1e(t,e,n){const r=i=>U1e(t,e,i,{});return r.stream=(i,a)=>q1e(t,e,i,a),r}function tY(t){return t.emulatorOrigin&&eu(t.emulatorOrigin)?"include":void 0}async function F1e(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:tY(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function nY(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function U1e(t,e,n,r){const i=t._url(e);return $1e(t,i,n,r)}async function $1e(t,e,n,r){n=Gw(n);const i={data:n},a=await nY(t,r),s=r.timeout||7e4,o=z1e(s),c=await Promise.race([F1e(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new Oi("cancelled","Firebase Functions instance was deleted.");const u=Hw(c.status,c.json);if(u)throw u;if(!c.json)throw new Oi("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new Oi("internal","Response is missing data field.");return{data:cp(f)}}function q1e(t,e,n,r){const i=t._url(e);return G1e(t,i,n,r||{})}async function G1e(t,e,n,r){n=Gw(n);const i={data:n},a=await nY(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:tY(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new Oi("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const m=Hw(0,null);return{data:Promise.reject(m),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(m)}}}}}}let o,c;const u=new Promise((g,m)=>{o=g,c=m});r?.signal?.addEventListener("abort",()=>{const g=new Oi("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=H1e(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:m,done:b}=await g.read();return{value:m,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function H1e(t,e,n,r){const i=(s,o)=>{const c=s.match(j1e);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(cp(f.result));return}if("message"in f){o.enqueue(cp(f.message));return}if("error"in f){const h=Hw(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof Oi){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new Oi("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new Oi("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof Oi?u:Hw(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const gB="@firebase/functions",mB="0.13.1";const K1e="auth-internal",W1e="app-check-internal",Y1e="messaging-internal";function X1e(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(K1e),s=n.getProvider(Y1e),o=n.getProvider(W1e);return new L1e(i,a,s,o,r)};ul(new go(sN,e,"PUBLIC").setMultipleInstances(!0)),vs(gB,mB,t),vs(gB,mB,"esm2020")}function Q1e(t=vD(),e=hP){const r=xp(Vt(t),sN).getImmediate({identifier:e}),i=ane("functions");return i&&Z1e(r,...i),r}function Z1e(t,e,n){V1e(Vt(t),e,n)}function J1e(t,e,n){return B1e(Vt(t),e)}X1e();function rY(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const m=s[1].trim();m.length>0&&m.length<60&&(n.paymentMethodName=m,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const m of c){const b=r.match(m);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const m=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(m){const b=parseFloat(m[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(m[0]," ").trim(),a++)}}const u=e.filter(m=>m.isActive!==!1);let f=null;for(const m of u){const b=m.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:m,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),S=b.split(/\s+/);for(const T of S)if(!(T.length<3)){for(const I of w)if(!(I.length<3)&&(I.startsWith(T.slice(0,-1))||T.startsWith(I.slice(0,-1)))){const R=Math.min(I.length,T.length)/Math.max(I.length,T.length);R>=.6&&(!f||R>f.score)&&(f={envelope:m,score:R})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const m=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(m," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function e_e(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{H.log(" Siri: Calling Cloud Function to parse:",t);const i=Q1e(),o=(await J1e(i,"parseTransaction")({text:t,userEnvelopes:r})).data;H.log(" Siri: Cloud Function response:",o);let c=null,u=o.envelope;if(o.envelope){const f=n.find(h=>h.name.toLowerCase()===o.envelope.toLowerCase());f&&(c=f.id,u=f.name)}return{amount:o.amount,merchant:o.merchant,envelope:u,envelopeId:c,description:o.description||t,paymentMethodName:o.paymentMethodName||null,type:o.type||"Expense",confidence:.9}}catch(i){return H.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),rY(t,e)}}function t_e(t,e){return rY(t,e)}async function iY(t,e){return typeof navigator<"u"&&!navigator.onLine?t_e(t,e):e_e(t,e)}function n_e(){const[t,e]=E8(),{envelopes:n}=en(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if(!f||f.trim().length===0){c(null);return}c(f),s(!0),iY(f,n).then(g=>{i(g)}).catch(g=>{H.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n]);const u=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const aY=({onClose:t,onSaved:e})=>{const n=Ka(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=en(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=n_e(),h=()=>{const oe=sessionStorage.getItem("siriParsedData"),he=sessionStorage.getItem("siriQuery");if(oe&&he)try{const ne=JSON.parse(oe);if(H.log(" Siri: Loaded stored data from sessionStorage:",ne),ne.amount!==null&&m(ne.amount.toFixed(2)),ne.merchant&&x(ne.merchant),ne.description&&S(ne.description),ne.type&&N(ne.type==="Income"?"income":"expense"),ne.envelopeId&&Y(ne.envelopeId),ne.paymentMethodName&&s?.paymentSources?.length){const _e=ne.paymentMethodName.toLowerCase(),fe=s.paymentSources.find(ee=>{const Ce=ee.name.toLowerCase();return Ce===_e||Ce.includes(_e)||_e.includes(Ce)});fe&&(j(fe),Q(!1))}I(!0),O(he),H.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(ne){H.error(" Siri: Failed to parse stored data:",ne)}};A.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),A.useEffect(()=>{const oe=()=>{h()};return window.addEventListener("siri-query-ready",oe),()=>window.removeEventListener("siri-query-ready",oe)},[s?.paymentSources]);const[g,m]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState(!1),[R,O]=A.useState(null),[D,k]=A.useState(()=>{const oe=new Date;return new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[P,N]=A.useState("expense"),[z,L]=A.useState({}),[B,j]=A.useState(null),[W,Q]=A.useState(!1),[q,Y]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&m(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&S(o.description),o.type&&N(o.type==="Income"?"income":"expense"),o.envelopeId&&Y(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const oe=o.paymentMethodName.toLowerCase(),he=s.paymentSources.find(ne=>{const _e=ne.name.toLowerCase();return _e===oe||_e.includes(oe)||oe.includes(_e)});he&&(j(he),Q(!1))}I(!0)}},[o,T,s?.paymentSources]);const Z=()=>{if(t){t();return}n("/")},ie=oe=>{j(oe),B&&Q(!0)},J=Object.keys(z).length>0,U=Object.values(z).reduce((oe,he)=>oe+(he||0),0),X=Math.abs(U-parseFloat(g||"0"))<.01,te=g&&parseFloat(g)>0&&J&&X,K=async oe=>{if(oe.preventDefault(),!te)return;const[he,ne,_e]=D.split("-").map(Number),fe=new Date(he,ne-1,_e,12,0,0);H.log(" Parsed date:",fe.toISOString());try{const[ee,Ce]=D.split("-").map(Number),Pe=`${ee}-${Ce.toString().padStart(2,"0")}`;if(Pe!==a){const Be=`This transaction date (${Pe}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Be))return}const ze=Object.entries(z).filter(([Be,Ie])=>Ie>0),Le=ze.length>1?crypto.randomUUID():void 0;Promise.all(ze.map(([Be,Ie])=>i({amount:Ie,description:w,merchant:b||void 0,date:fe.toISOString(),envelopeId:Be,type:P==="income"?"Income":"Expense",reconciled:!1,paymentMethod:B||void 0,splitGroupId:Le}).catch(Oe=>H.error("Failed to create transaction:",Oe)))).catch(Be=>H.error("Failed to create transactions:",Be)),e&&e(),t?t():n("/")}catch(ee){H.error("Error saving transaction:",ee),alert("Failed to save transaction: "+(ee instanceof Error?ee.message:"Unknown error"))}},ce=[...r].filter(oe=>oe.isActive!==!1).sort((oe,he)=>{const ne=oe.orderIndex??0,_e=he.orderIndex??0;return ne!==_e?ne-_e:oe.name.localeCompare(he.name)}),ae=P==="income"?"text-green-500":"text-red-500";return y.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[y.jsx("button",{onClick:Z,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),y.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),y.jsx("button",{onClick:K,disabled:!te,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&y.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[y.jsx(xL,{size:18,className:"text-purple-500 animate-pulse"}),y.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(u||R)&&y.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx(xL,{size:14,className:"text-purple-500"}),y.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&y.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),y.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||R,'"']}),y.jsx("button",{type:"button",onClick:()=>{f(),I(!1),O(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:y.jsxs("form",{onSubmit:K,className:"space-y-6",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:y.jsxs("div",{className:"flex",children:[y.jsx("button",{type:"button",onClick:()=>N("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${P==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),y.jsx("button",{type:"button",onClick:()=>N("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${P==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${ae}`,children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:oe=>{const he=oe.target.value.replace(/\D/g,"");if(!he){m("");return}const _e=(parseInt(he,10)/100).toFixed(2);m(_e)},onKeyDown:oe=>{(oe.key==="e"||oe.key==="E"||oe.key==="+"||oe.key==="-")&&oe.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${ae} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:b,onChange:oe=>x(oe.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(XW,{selectedCard:B,onCardSelect:ie,isUserSelected:W}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:w,onChange:oe=>S(oe.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[oe,he]=D.split("-").map(Number);return`${oe}-${he.toString().padStart(2,"0")}`!==a?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(kh,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:D,onChange:oe=>k(oe.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx(QW,{envelopes:ce,transactionAmount:parseFloat(g)||0,onSplitChange:L,initialSelectedEnvelopeId:q})})]})})]})},r_e=()=>{const t=Ka(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o,fetchAllTransactions:c,areAllTransactionsLoaded:u,isLoading:f}=en(),{showToast:h}=Wd(),[g,m]=A.useState(!1),[b,x]=A.useState(""),[w,S]=A.useState("all"),[T,I]=A.useState("All"),[R,O]=A.useState(!1),[D,k]=A.useState("all"),[P,N]=A.useState(!1),[z,L]=A.useState("all"),[B,j]=A.useState(!1),[W,Q]=A.useState(()=>{const K=new Date;return K.setMonth(K.getMonth()-1),K.toISOString().split("T")[0]}),[q,Y]=A.useState(()=>new Date().toISOString().split("T")[0]),[Z,ie]=A.useState(null),J=A.useMemo(()=>{H.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:P,currentMonth:s,transactionMonths:e.map(ae=>({id:ae.id,month:ae.month,date:ae.date,description:ae.description}))});let K=e;return P||(K=e.filter(ae=>ae.month===s||!ae.month),H.log(" After month filter:",{remaining:K.length,currentMonth:s,filteredTransactions:K.map(ae=>({id:ae.id,description:ae.description,month:ae.month,matchesCurrentMonth:ae.month===s}))})),K.map(ae=>{if(!ae)return null;let oe=ae.date;if(typeof ae.date=="number"){const ne=(ae.date+978307200)*1e3;oe=new Date(ne).toISOString()}else if(!ae.date||typeof ae.date!="string")return null;return{...ae,date:oe}}).filter(Boolean).filter(ae=>{if(ae.description==="Budgeted"||ae.description==="Piggybank Contribution")return!1;if(b){const he=b.toLowerCase(),ne=n.find(ee=>ee.id===ae.envelopeId)?.name.toLowerCase()||"",_e=ae.amount.toFixed(2);if(!(ae.description.toLowerCase().includes(he)||ne.includes(he)||_e.includes(he)))return!1}if(w!=="all"&&ae.envelopeId!==w||T!=="All"&&ae.type!==T||z!=="all"&&(!ae.paymentMethod||ae.paymentMethod.id!==z)||!ae.date||typeof ae.date!="string")return!1;const oe=ae.date.split("T")[0];return!(B&&(oe<W||oe>q)||D!=="all"&&new Date(oe).getMonth()!==parseInt(D)||R&&!ae.reconciled)}).sort((ae,oe)=>new Date(oe.date).getTime()-new Date(ae.date).getTime())},[e,n,b,w,T,z,W,q,R,P,s,B]);H.log(" Final filtered transactions:",{count:J.length,transactions:J.map(K=>({id:K.id,description:K.description,amount:K.amount,date:K.date,month:K.month,type:K.type}))});const U=A.useMemo(()=>{const K=[],ce=new Set;for(const ae of J)if(ae.splitGroupId&&!ce.has(ae.splitGroupId)){ce.add(ae.splitGroupId);const oe=J.filter(_e=>_e.splitGroupId===ae.splitGroupId),he=oe.reduce((_e,fe)=>_e+fe.amount,0),ne=oe.map(_e=>n.find(fe=>fe.id===_e.envelopeId)?.name||"Unknown").join(", ");K.push({key:`split-${ae.splitGroupId}`,transaction:ae,totalAmount:he,envelopeNames:ne,splitTransactions:oe,isSplitGroup:!0})}else{if(ae.splitGroupId&&ce.has(ae.splitGroupId))continue;{const oe=n.find(he=>he.id===ae.envelopeId)?.name||"Unknown Envelope";K.push({key:ae.id,transaction:ae,totalAmount:ae.amount,envelopeNames:oe,splitTransactions:[ae],isSplitGroup:!1})}}return K},[J,n]),X=Z?n.find(K=>K.id===Z.envelopeId):null,te=K=>{const ce={...K,reconciled:!K.reconciled};r(ce)};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:y.jsx(hl,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),y.jsx("button",{onClick:()=>m(!g),className:`p-2 rounded-full transition-colors ${g?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:y.jsx(wle,{size:20,className:g?"fill-current":""})})]}),y.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[y.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),y.jsx("button",{onClick:()=>{const K=!P;N(K),K&&!u&&c()},disabled:f,className:`text-sm px-3 py-1 rounded-md transition-colors ${P?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"} ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Loading...":P?"Current Month Only":"All Time"})]}),y.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:y.jsxs("div",{className:"relative",children:[y.jsx($le,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:K=>x(K.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),b&&y.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:y.jsx(X1,{size:16})})]})}),y.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${g?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),y.jsxs("select",{value:z,onChange:K=>L(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(K=>y.jsx("option",{value:K.id,children:K.name},K.id))]})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),y.jsxs("select",{value:w,onChange:K=>S(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((K,ce)=>K.name.localeCompare(ce.name)).map(K=>y.jsx("option",{value:K.id,children:K.name},K.id))]})]}),y.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(K=>y.jsx("button",{onClick:()=>I(K),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${T===K?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:K},K))}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),y.jsxs("select",{value:D,onChange:K=>k(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(K,ce)=>ce).map(K=>y.jsx("option",{value:K,children:new Date(2022,K).toLocaleString("default",{month:"long"})},K))]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),y.jsx("button",{onClick:()=>j(!B),className:`w-9 h-5 rounded-full transition-colors relative ${B?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${B?"translate-x-4":"translate-x-0"}`})})]})]}),y.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${B?"opacity-100":"opacity-50 pointer-events-none"}`,children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:W,onChange:K=>Q(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:q,onChange:K=>Y(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),y.jsx("button",{onClick:()=>O(!R),className:`w-11 h-6 rounded-full transition-colors relative ${R?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${R?"translate-x-5":"translate-x-0"}`})})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),y.jsx("button",{onClick:()=>N(!P),className:`w-11 h-6 rounded-full transition-colors relative ${P?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${P?"translate-x-5":"translate-x-0"}`})})]})]})}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:U.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):y.jsx(ha,{initial:!1,mode:"popLayout",children:U.map(K=>{const ce=K.transaction;return y.jsx(Vn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(B_,{disabled:ce.isAutomatic,onDelete:()=>{const ae=K.splitTransactions.map(oe=>({...oe}));for(const oe of K.splitTransactions)oe.id&&i(oe.id);h(K.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const oe of ae)a(oe)})},children:y.jsx(JW,{transaction:{...ce,amount:K.totalAmount},envelopeName:K.envelopeNames,onReconcile:()=>{for(const ae of K.splitTransactions)te(ae)},onEdit:()=>{if(ce.isAutomatic)return;n.find(oe=>oe.id===ce.envelopeId)?ie(ce):alert("Cannot edit: Envelope deleted.")}})})},K.key)})})})}),y.jsx(ZW,{isVisible:!!Z&&!!X,onClose:()=>ie(null),mode:"edit",currentEnvelope:X||{},initialTransaction:Z,envelopes:n})]})};function sY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=sY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ht(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=sY(t))&&(r&&(r+=" "),r+=e);return r}var i_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function oN(t){if(typeof t!="string")return!1;var e=i_e;return e.includes(t)}var a_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],s_e=new Set(a_e);function oY(t){return typeof t!="string"?!1:s_e.has(t)}function lY(t){return typeof t=="string"&&t.startsWith("data-")}function Es(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(oY(n)||lY(n))&&(e[n]=t[n]);return e}function kv(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Es(e)}return typeof t=="object"&&!Array.isArray(t)?Es(t):null}function ua(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(oY(n)||lY(n)||oN(n))&&(e[n]=t[n]);return e}var o_e=["children","width","height","viewBox","className","style","title","desc"];function pP(){return pP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pP.apply(null,arguments)}function l_e(t,e){if(t==null)return{};var n,r,i=c_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var cY=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=l_e(t,o_e),h=a||{width:r,height:i,x:0,y:0},g=Ht("recharts-surface",s);return A.createElement("svg",pP({},ua(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),n)}),u_e=["children","className"];function gP(){return gP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gP.apply(null,arguments)}function d_e(t,e){if(t==null)return{};var n,r,i=f_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function f_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ai=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=d_e(t,u_e),a=Ht("recharts-layer",r);return A.createElement("g",gP({className:a},ua(i),{ref:e}),n)}),h_e=A.createContext(null);function on(t){return function(){return t}}const uY=Math.cos,Kw=Math.sin,Is=Math.sqrt,Ww=Math.PI,F_=2*Ww,mP=Math.PI,vP=2*mP,Gu=1e-6,p_e=vP-Gu;function dY(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function g_e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return dY;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class m_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?dY:g_e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Gu)if(!(Math.abs(h*c-u*f)>Gu)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-s,b=i-o,x=c*c+u*u,w=m*m+b*b,S=Math.sqrt(x),T=Math.sqrt(g),I=a*Math.tan((mP-Math.acos((x+g-w)/(2*S*T)))/2),R=I/T,O=I/S;Math.abs(R-1)>Gu&&this._append`L${e+R*f},${n+R*h}`,this._append`A${a},${a},0,0,${+(h*m>f*b)},${this._x1=e+O*c},${this._y1=n+O*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Gu||Math.abs(this._y1-f)>Gu)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%vP+vP),g>p_e?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>Gu&&this._append`A${r},${r},0,${+(g>=mP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function lN(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new m_e(e)}function cN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fY(t){this._context=t}fY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function U_(t){return new fY(t)}function hY(t){return t[0]}function pY(t){return t[1]}function gY(t,e){var n=on(!0),r=null,i=U_,a=null,s=lN(o);t=typeof t=="function"?t:t===void 0?hY:on(t),e=typeof e=="function"?e:e===void 0?pY:on(e);function o(c){var u,f=(c=cN(c)).length,h,g=!1,m;for(r==null&&(a=i(m=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(m)return a=null,m+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:on(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:on(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:on(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function tx(t,e,n){var r=null,i=on(!0),a=null,s=U_,o=null,c=lN(u);t=typeof t=="function"?t:t===void 0?hY:on(+t),e=typeof e=="function"?e:on(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?pY:on(+n);function u(h){var g,m,b,x=(h=cN(h)).length,w,S=!1,T,I=new Array(x),R=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===S)if(S=!S)m=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=m;--b)o.point(I[b],R[b]);o.lineEnd(),o.areaEnd()}S&&(I[g]=+t(w,g,h),R[g]=+e(w,g,h),o.point(r?+r(w,g,h):I[g],n?+n(w,g,h):R[g]))}if(T)return o=null,T+""||null}function f(){return gY().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:on(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:on(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:on(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class mY{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function v_e(t){return new mY(t,!0)}function y_e(t){return new mY(t,!1)}const uN={draw(t,e){const n=Is(e/Ww);t.moveTo(n,0),t.arc(0,0,n,0,F_)}},b_e={draw(t,e){const n=Is(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},vY=Is(1/3),x_e=vY*2,w_e={draw(t,e){const n=Is(e/x_e),r=n*vY;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},__e={draw(t,e){const n=Is(e),r=-n/2;t.rect(r,r,n,n)}},S_e=.8908130915292852,yY=Kw(Ww/10)/Kw(7*Ww/10),E_e=Kw(F_/10)*yY,T_e=-uY(F_/10)*yY,A_e={draw(t,e){const n=Is(e*S_e),r=E_e*n,i=T_e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=F_*a/5,o=uY(s),c=Kw(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},QA=Is(3),C_e={draw(t,e){const n=-Is(e/(QA*3));t.moveTo(0,n*2),t.lineTo(-QA*n,-n),t.lineTo(QA*n,-n),t.closePath()}},ka=-.5,Pa=Is(3)/2,yP=1/Is(12),I_e=(yP/2+1)*3,k_e={draw(t,e){const n=Is(e/I_e),r=n/2,i=n*yP,a=r,s=n*yP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(ka*r-Pa*i,Pa*r+ka*i),t.lineTo(ka*a-Pa*s,Pa*a+ka*s),t.lineTo(ka*o-Pa*c,Pa*o+ka*c),t.lineTo(ka*r+Pa*i,ka*i-Pa*r),t.lineTo(ka*a+Pa*s,ka*s-Pa*a),t.lineTo(ka*o+Pa*c,ka*c-Pa*o),t.closePath()}};function P_e(t,e){let n=null,r=lN(i);t=typeof t=="function"?t:on(t||uN),e=typeof e=="function"?e:on(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:on(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:on(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Yw(){}function Xw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bY(t){this._context=t}bY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function D_e(t){return new bY(t)}function xY(t){this._context=t}xY.prototype={areaStart:Yw,areaEnd:Yw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Xw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function O_e(t){return new xY(t)}function wY(t){this._context=t}wY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function R_e(t){return new wY(t)}function _Y(t){this._context=t}_Y.prototype={areaStart:Yw,areaEnd:Yw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function N_e(t){return new _Y(t)}function vB(t){return t<0?-1:1}function yB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(vB(a)+vB(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function bB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ZA(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Qw(t){this._context=t}Qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ZA(this,this._t0,bB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ZA(this,bB(this,n=yB(this,t,e)),n);break;default:ZA(this,this._t0,n=yB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function SY(t){this._context=new EY(t)}(SY.prototype=Object.create(Qw.prototype)).point=function(t,e){Qw.prototype.point.call(this,e,t)};function EY(t){this._context=t}EY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function M_e(t){return new Qw(t)}function j_e(t){return new SY(t)}function TY(t){this._context=t}TY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=xB(t),i=xB(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function xB(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function z_e(t){return new TY(t)}function $_(t,e){this._context=t,this._t=e}$_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function L_e(t){return new $_(t,.5)}function V_e(t){return new $_(t,0)}function B_e(t){return new $_(t,1)}function Md(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function bP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function F_e(t,e){return t[e]}function U_e(t){const e=[];return e.key=t,e}function $_e(){var t=on([]),e=bP,n=Md,r=F_e;function i(a){var s=Array.from(t.apply(this,arguments),U_e),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=cN(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:on(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:on(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?bP:typeof a=="function"?a:on(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Md,i):n},i}function q_e(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Md(t,e)}}function G_e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Md(t,e)}}function H_e(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,m=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,S=x[r-1][1]||0;m+=w-S}c+=h,u+=m*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Md(t,e)}}var JA={},eC={},wB;function K_e(){return wB||(wB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(eC)),eC}var tC={},_B;function AY(){return _B||(_B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(tC)),tC}var nC={},SB;function dN(){return SB||(SB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(nC)),nC}var rC={},iC={},EB;function W_e(){return EB||(EB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(iC)),iC}var TB;function fN(){return TB||(TB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W_e(),n=dN();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(rC)),rC}var AB;function hN(){return AB||(AB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K_e(),n=AY(),r=dN(),i=fN();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(JA)),JA}var aC,CB;function Y_e(){return CB||(CB=1,aC=hN().get),aC}var X_e=Y_e();const jd=Cl(X_e);var Q_e=4;function Nc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q_e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+Nc(o)+a:i+a},"")}var Dr=t=>t===0?0:t>0?1:-1,da=t=>typeof t=="number"&&t!=+t,xl=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,We=t=>(typeof t=="number"||t instanceof Number)&&!da(t),Ua=t=>We(t)||typeof t=="string",Z_e=0,Pv=t=>{var e=++Z_e;return"".concat(t||"").concat(e)},ri=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(e)&&typeof e!="string")return r;var a;if(xl(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return da(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},CY=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function fr(t,e,n){return We(t)&&We(e)?Nc(t+n*(e-t)):e}function J_e(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):jd(r,e))===n)}var Rr=t=>t===null||typeof t>"u",P0=t=>Rr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function eSe(t){return t!=null}function D0(){}var tSe=["type","size","sizeType"];function xP(){return xP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xP.apply(null,arguments)}function IB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IB(Object(n),!0).forEach(function(r){nSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nSe(t,e,n){return(e=rSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rSe(t){var e=iSe(t,"string");return typeof e=="symbol"?e:e+""}function iSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aSe(t,e){if(t==null)return{};var n,r,i=sSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var IY={symbolCircle:uN,symbolCross:b_e,symbolDiamond:w_e,symbolSquare:__e,symbolStar:A_e,symbolTriangle:C_e,symbolWye:k_e},oSe=Math.PI/180,lSe=t=>{var e="symbol".concat(P0(t));return IY[e]||uN},cSe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*oSe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},uSe=(t,e)=>{IY["symbol".concat(P0(t))]=e},kY=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=aSe(t,tSe),a=kB(kB({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=lSe(s),m=P_e().type(g).size(cSe(n,r,s)),b=m();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=ua(a);return We(u)&&We(f)&&We(n)?A.createElement("path",xP({},h,{className:Ht("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};kY.registerSymbol=uSe;var PY=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,dSe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{oN(i)&&(r[i]=(a=>n[i](n,a)))}),r},fSe=(t,e,n)=>r=>(t(e,n,r),null),q_=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];oN(i)&&typeof a=="function"&&(r||(r={}),r[i]=fSe(a,e,n))}),r};function PB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(n),!0).forEach(function(r){pSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pSe(t,e,n){return(e=gSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gSe(t){var e=mSe(t,"string");return typeof e=="symbol"?e:e+""}function mSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kr(t,e){var n=hSe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var sC={},oC={},DB;function vSe(){return DB||(DB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(oC)),oC}var lC={},OB;function DY(){return OB||(OB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(lC)),lC}var cC={},uC={},dC={},RB;function ySe(){return RB||(RB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(dC)),dC}var NB;function pN(){return NB||(NB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ySe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(uC)),uC}var fC={},MB;function bSe(){return MB||(MB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(fC)),fC}var jB;function xSe(){return jB||(jB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pN(),n=bSe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(cC)),cC}var hC={},pC={},zB;function wSe(){return zB||(zB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hN();function n(r){return function(i){return e.get(i,r)}}t.property=n})(pC)),pC}var gC={},mC={},vC={},yC={},LB;function OY(){return LB||(LB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(yC)),yC}var bC={},VB;function RY(){return VB||(VB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(bC)),bC}var xC={},BB;function NY(){return BB||(BB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(xC)),xC}var FB;function _Se(){return FB||(FB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OY(),n=RY(),r=NY();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function m(b,x,w,S,T,I){const R=g(b,x,w,S,T,I);return R!==void 0?!!R:a(b,x,m,I)},new Map)}function a(f,h,g,m){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,m);case"function":return Object.keys(h).length>0?a(f,{...h},g,m):r.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.eq(f,h)}}function s(f,h,g,m){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,m);if(h instanceof Map)return o(f,h,g,m);if(h instanceof Set)return u(f,h,g,m);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(m?.has(h))return m.get(h)===f;m?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,m))return!1}return!0}finally{m?.delete(h)}}function o(f,h,g,m){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,m)===!1)return!1}return!0}function c(f,h,g,m){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let S=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const I=f[T];let R=!1;if(g(I,w,x,f,h,m)&&(R=!0),R){b.add(T),S=!0;break}}if(!S)return!1}return!0}function u(f,h,g,m){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,m):!1}t.isMatchWith=i,t.isSetMatch=u})(vC)),vC}var UB;function MY(){return UB||(UB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_Se();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(mC)),mC}var wC={},_C={},SC={},$B;function SSe(){return $B||($B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(SC)),SC}var EC={},qB;function jY(){return qB||(qB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(EC)),EC}var TC={},GB;function zY(){return GB||(GB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",m="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",R="[object BigUint64Array]",O="[object Int8Array]",D="[object Int16Array]",k="[object Int32Array]",P="[object BigInt64Array]",N="[object Float32Array]",z="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=P,t.bigUint64ArrayTag=R,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=N,t.float64ArrayTag=z,t.functionTag=h,t.int16ArrayTag=D,t.int32ArrayTag=k,t.int8ArrayTag=O,t.mapTag=c,t.numberTag=r,t.objectTag=m,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=I,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=S})(TC)),TC}var AC={},HB;function ESe(){return HB||(HB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(AC)),AC}var KB;function LY(){return KB||(KB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SSe(),n=jY(),r=zY(),i=RY(),a=ESe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,m=new Map,b=void 0){const x=b?.(f,h,g,m);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(m.has(f))return m.get(f);if(Array.isArray(f)){const w=new Array(f.length);m.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,m,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;m.set(f,w);for(const[S,T]of f)w.set(S,o(T,S,g,m,b));return w}if(f instanceof Set){const w=new Set;m.set(f,w);for(const S of f)w.add(o(S,void 0,g,m,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);m.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,m,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return m.set(f,w),c(w,f,g,m,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return m.set(f,w),c(w,f,g,m,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof Error){const w=new f.constructor;return m.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,m,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof String){const w=new String(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return m.set(f,w),c(w,f,g,m,b),w}return f}function c(f,h,g=f,m,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const S=x[w],T=Object.getOwnPropertyDescriptor(f,S);(T==null||T.writable)&&(f[S]=o(h[S],S,g,m,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(_C)),_C}var WB;function TSe(){return WB||(WB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LY();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(wC)),wC}var YB;function ASe(){return YB||(YB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MY(),n=TSe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(gC)),gC}var CC={},IC={},kC={},XB;function CSe(){return XB||(XB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LY(),n=zY();function r(i,a){return e.cloneDeepWith(i,(s,o,c,u)=>{const f=a?.(s,o,c,u);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i?.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(kC)),kC}var QB;function ISe(){return QB||(QB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CSe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(IC)),IC}var PC={},DC={},ZB;function VY(){return ZB||(ZB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(DC)),DC}var OC={},JB;function kSe(){return JB||(JB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jY();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(OC)),OC}var e6;function PSe(){return e6||(e6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AY(),n=VY(),r=kSe(),i=fN();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(PC)),PC}var t6;function DSe(){return t6||(t6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MY(),n=dN(),r=ISe(),i=hN(),a=PSe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(CC)),CC}var n6;function OSe(){return n6||(n6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DY(),n=wSe(),r=ASe(),i=DSe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(hC)),hC}var r6;function RSe(){return r6||(r6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vSe(),n=DY(),r=xSe(),i=OSe();function a(s,o=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(sC)),sC}var RC,i6;function NSe(){return i6||(i6=1,RC=RSe().uniqBy),RC}var MSe=NSe();const a6=Cl(MSe);function jSe(t,e,n){return e===!0?a6(t,n):typeof e=="function"?a6(t,e):t}var NC={exports:{}},MC={},jC={exports:{}},zC={};var s6;function zSe(){if(s6)return zC;s6=1;var t=yp();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var m=g(),b=r({inst:{value:m,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=m,x.getSnapshot=g,c(x)&&w({inst:x})},[h,m,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(m),m}function c(h){var g=h.getSnapshot;h=h.value;try{var m=g();return!n(h,m)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return zC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,zC}var o6;function LSe(){return o6||(o6=1,jC.exports=zSe()),jC.exports}var l6;function VSe(){if(l6)return MC;l6=1;var t=yp(),e=LSe();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return MC.useSyncExternalStoreWithSelector=function(u,f,h,g,m){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function S(D){if(!T){if(T=!0,I=D,D=g(D),m!==void 0&&x.hasValue){var k=x.value;if(m(k,D))return R=k}return R=D}if(k=R,r(I,D))return k;var P=g(D);return m!==void 0&&m(k,P)?(I=D,k):(I=D,R=P)}var T=!1,I,R,O=h===void 0?null:h;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,h,g,m]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},MC}var c6;function BSe(){return c6||(c6=1,NC.exports=VSe()),NC.exports}var FSe=BSe(),gN=A.createContext(null),USe=t=>t,pn=()=>{var t=A.useContext(gN);return t?t.store.dispatch:USe},qx=()=>{},$Se=()=>qx,qSe=(t,e)=>t===e;function qe(t){var e=A.useContext(gN);return FSe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:$Se,e?e.store.getState:qx,e?e.store.getState:qx,e?t:qx,qSe)}function GSe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function HSe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function KSe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var u6=t=>Array.isArray(t)?t:[t];function WSe(t){const e=Array.isArray(t[0])?t[0]:t;return KSe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function YSe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var XSe=class{constructor(t){this.value=t}deref(){return this.value}},QSe=typeof WeakRef<"u"?WeakRef:XSe,ZSe=0,d6=1;function nx(){return{s:ZSe,v:void 0,o:null,p:null}}function BY(t,e={}){let n=nx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(m);x===void 0?(o=nx(),b.set(m,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(m);x===void 0?(o=nx(),b.set(m,o)):o=x}}const u=o;let f;if(o.s===d6)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new QSe(f):f}return u.s=d6,u.v=f,f}return s.clearCache=()=>{n=nx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function JSe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),GSe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:m=BY,argsMemoizeOptions:b=[]}=f,x=u6(g),w=u6(b),S=WSe(i),T=h(function(){return a++,u.apply(null,arguments)},...x),I=m(function(){s++;const O=YSe(S,arguments);return o=T.apply(null,O),o},...w);return Object.assign(I,{resultFunc:u,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var ye=JSe(BY),eEe=Object.assign((t,e=ye)=>{HSe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>eEe}),LC={},VC={},BC={},f6;function tEe(){return f6||(f6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(BC)),BC}var FC={},UC={},h6;function FY(){return h6||(h6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(UC)),UC}var p6;function nEe(){return p6||(p6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FY(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(FC)),FC}var g6;function rEe(){return g6||(g6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tEe(),n=nEe(),r=fN();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const u=(m,b)=>{let x=m;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(m,b)=>b==null||m==null?b:typeof m=="object"&&"key"in m?Object.hasOwn(b,m.key)?b[m.key]:u(b,m.path):typeof m=="function"?m(b):Array.isArray(m)?u(b,m):typeof b=="object"?b[m]:b,h=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||n.isKey(m)?m:{key:m,path:r.toPath(m)}));return a.map(m=>({original:m,criteria:h.map(b=>f(b,m))})).slice().sort((m,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(m.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(m=>m.original)}t.orderBy=i})(VC)),VC}var $C={},m6;function iEe(){return m6||(m6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})($C)),$C}var qC={},v6;function UY(){return v6||(v6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VY(),n=pN(),r=OY(),i=NY();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.eq(c[o],s):!1}t.isIterateeCall=a})(qC)),qC}var y6;function aEe(){return y6||(y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rEe(),n=iEe(),r=UY();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(LC)),LC}var GC,b6;function sEe(){return b6||(b6=1,GC=aEe().sortBy),GC}var oEe=sEe();const G_=Cl(oEe);var $Y=t=>t.legend.settings,lEe=t=>t.legend.size,cEe=t=>t.legend.payload;ye([cEe,$Y],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?G_(r,n):r});var rx=1;function uEe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>rx||Math.abs(s.left-e.left)>rx||Math.abs(s.top-e.top)>rx||Math.abs(s.width-e.width)>rx)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Ur(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var dEe=typeof Symbol=="function"&&Symbol.observable||"@@observable",x6=dEe,HC=()=>Math.random().toString(36).substring(7).split("").join("."),fEe={INIT:`@@redux/INIT${HC()}`,REPLACE:`@@redux/REPLACE${HC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${HC()}`},Zw=fEe;function mN(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function qY(t,e,n){if(typeof t!="function")throw new Error(Ur(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ur(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ur(1));return n(qY)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,S)=>{s.set(S,w)}))}function f(){if(c)throw new Error(Ur(3));return i}function h(w){if(typeof w!="function")throw new Error(Ur(4));if(c)throw new Error(Ur(5));let S=!0;u();const T=o++;return s.set(T,w),function(){if(S){if(c)throw new Error(Ur(6));S=!1,u(),s.delete(T),a=null}}}function g(w){if(!mN(w))throw new Error(Ur(7));if(typeof w.type>"u")throw new Error(Ur(8));if(typeof w.type!="string")throw new Error(Ur(17));if(c)throw new Error(Ur(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function m(w){if(typeof w!="function")throw new Error(Ur(10));r=w,g({type:Zw.REPLACE})}function b(){const w=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Ur(11));function T(){const R=S;R.next&&R.next(f())}return T(),{unsubscribe:w(T)}},[x6](){return this}}}return g({type:Zw.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:m,[x6]:b}}function hEe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Zw.INIT})>"u")throw new Error(Ur(12));if(typeof n(void 0,{type:Zw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ur(13))})}function GY(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{hEe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],m=s[h],b=g(m,o);if(typeof b>"u")throw o&&o.type,new Error(Ur(14));u[h]=b,c=c||b!==m}return c=c||r.length!==Object.keys(s).length,c?u:s}}function Jw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function pEe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Ur(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=Jw(...o)(i.dispatch),{...i,dispatch:a}}}function HY(t){return mN(t)&&"type"in t&&typeof t.type=="string"}var KY=Symbol.for("immer-nothing"),w6=Symbol.for("immer-draftable"),yi=Symbol.for("immer-state");function fs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var aa=Object,up=aa.getPrototypeOf,e1="constructor",H_="prototype",wP="configurable",t1="enumerable",Gx="writable",Dv="value",wl=t=>!!t&&!!t[yi];function Ts(t){return t?WY(t)||W_(t)||!!t[w6]||!!t[e1]?.[w6]||Y_(t)||X_(t):!1}var gEe=aa[H_][e1].toString(),_6=new WeakMap;function WY(t){if(!t||!vN(t))return!1;const e=up(t);if(e===null||e===aa[H_])return!0;const n=aa.hasOwnProperty.call(e,e1)&&e[e1];if(n===Object)return!0;if(!dh(n))return!1;let r=_6.get(n);return r===void 0&&(r=Function.toString.call(n),_6.set(n,r)),r===gEe}function K_(t,e,n=!0){O0(t)===0?(n?Reflect.ownKeys(t):aa.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function O0(t){const e=t[yi];return e?e.type_:W_(t)?1:Y_(t)?2:X_(t)?3:0}var S6=(t,e,n=O0(t))=>n===2?t.has(e):aa[H_].hasOwnProperty.call(t,e),_P=(t,e,n=O0(t))=>n===2?t.get(e):t[e],n1=(t,e,n,r=O0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function mEe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var W_=Array.isArray,Y_=t=>t instanceof Map,X_=t=>t instanceof Set,vN=t=>typeof t=="object",dh=t=>typeof t=="function",KC=t=>typeof t=="boolean";function vEe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Ko=t=>t.copy_||t.base_,yN=t=>t.modified_?t.copy_:t.base_;function SP(t,e){if(Y_(t))return new Map(t);if(X_(t))return new Set(t);if(W_(t))return Array[H_].slice.call(t);const n=WY(t);if(e===!0||e==="class_only"&&!n){const r=aa.getOwnPropertyDescriptors(t);delete r[yi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[Gx]===!1&&(o[Gx]=!0,o[wP]=!0),(o.get||o.set)&&(r[s]={[wP]:!0,[Gx]:!0,[t1]:o[t1],[Dv]:t[s]})}return aa.create(up(t),r)}else{const r=up(t);if(r!==null&&n)return{...t};const i=aa.create(r);return aa.assign(i,t)}}function bN(t,e=!1){return Q_(t)||wl(t)||!Ts(t)||(O0(t)>1&&aa.defineProperties(t,{set:ix,add:ix,clear:ix,delete:ix}),aa.freeze(t),e&&K_(t,(n,r)=>{bN(r,!0)},!1)),t}function yEe(){fs(2)}var ix={[Dv]:yEe};function Q_(t){return t===null||!vN(t)?!0:aa.isFrozen(t)}var r1="MapSet",EP="Patches",E6="ArrayMethods",YY={};function zd(t){const e=YY[t];return e||fs(0,t),e}var T6=t=>!!YY[t],Ov,XY=()=>Ov,bEe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:T6(r1)?zd(r1):void 0,arrayMethodsPlugin_:T6(E6)?zd(E6):void 0});function A6(t,e){e&&(t.patchPlugin_=zd(EP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function TP(t){AP(t),t.drafts_.forEach(xEe),t.drafts_=null}function AP(t){t===Ov&&(Ov=t.parent_)}var C6=t=>Ov=bEe(Ov,t);function xEe(t){const e=t[yi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function I6(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[yi].modified_&&(TP(e),fs(4)),Ts(t)&&(t=k6(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[yi].base_,t,e)}else t=k6(e,n);return wEe(e,t,!0),TP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==KY?t:void 0}function k6(t,e){if(Q_(e))return e;const n=e[yi];if(!n)return i1(e,t.handledSet_,t);if(!Z_(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);JY(n,t)}return n.copy_}function wEe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&bN(e,n)}function QY(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var Z_=(t,e)=>t.scope_===e,_Ee=[];function ZY(t,e,n,r){const i=Ko(t),a=t.type_;if(r!==void 0&&_P(i,r,a)===e){n1(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;K_(i,(c,u)=>{if(wl(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??_Ee;for(const o of s)n1(i,o,n,a)}function SEe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!Z_(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=yN(a);ZY(t,a.draft_??a,s,n),JY(a,i)})}function JY(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}QY(t)}}function EEe(t,e,n){const{scope_:r}=t;if(wl(n)){const i=n[yi];Z_(i,r)&&i.callbacks_.push(function(){Hx(t);const s=yN(i);ZY(t,n,s,e)})}else Ts(n)&&t.callbacks_.push(function(){const a=Ko(t);t.type_===3?a.has(n)&&i1(n,r.handledSet_,r):_P(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&i1(_P(t.copy_,e,t.type_),r.handledSet_,r)})}function i1(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||wl(t)||e.has(t)||!Ts(t)||Q_(t)||(e.add(t),K_(t,(r,i)=>{if(wl(i)){const a=i[yi];if(Z_(a,n)){const s=yN(a);n1(t,r,s,t.type_),QY(a)}}else Ts(i)&&i1(i,e,n)})),t}function TEe(t,e){const n=W_(t),r={type_:n?1:0,scope_:e?e.scope_:XY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=a1;n&&(i=[r],a=Rv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var a1={get(t,e){if(e===yi)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Ko(t);if(!S6(i,e,t.type_))return AEe(t,i,e);const a=i[e];if(t.finalized_||!Ts(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&vEe(e))return a;if(a===WC(t.base_,e)){Hx(t);const s=t.type_===1?+e:e,o=IP(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in Ko(t)},ownKeys(t){return Reflect.ownKeys(Ko(t))},set(t,e,n){const r=eX(Ko(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=WC(Ko(t),e),a=i?.[yi];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(mEe(n,i)&&(n!==void 0||S6(t.base_,e,t.type_)))return!0;Hx(t),CP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),EEe(t,e,n)),!0},deleteProperty(t,e){return Hx(t),WC(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),CP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ko(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Gx]:!0,[wP]:t.type_!==1||e!=="length",[t1]:r[t1],[Dv]:n[e]}},defineProperty(){fs(11)},getPrototypeOf(t){return up(t.base_)},setPrototypeOf(){fs(12)}},Rv={};for(let t in a1){let e=a1[t];Rv[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Rv.deleteProperty=function(t,e){return Rv.set.call(this,t,e,void 0)};Rv.set=function(t,e,n){return a1.set.call(this,t[0],e,n,t[0])};function WC(t,e){const n=t[yi];return(n?Ko(n):t)[e]}function AEe(t,e,n){const r=eX(e,n);return r?Dv in r?r[Dv]:r.get?.call(t.draft_):void 0}function eX(t,e){if(!(e in t))return;let n=up(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=up(n)}}function CP(t){t.modified_||(t.modified_=!0,t.parent_&&CP(t.parent_))}function Hx(t){t.copy_||(t.assigned_=new Map,t.copy_=SP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var CEe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(dh(n)&&!dh(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}dh(r)||fs(6),i!==void 0&&!dh(i)&&fs(7);let a;if(Ts(n)){const s=C6(this),o=IP(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?TP(s):AP(s)}return A6(s,i),I6(a,s)}else if(!n||!vN(n)){if(a=r(n),a===void 0&&(a=n),a===KY&&(a=void 0),this.autoFreeze_&&bN(a,!0),i){const s=[],o=[];zd(EP).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else fs(1,n)},this.produceWithPatches=(n,r)=>{if(dh(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},KC(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),KC(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),KC(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ts(e)||fs(8),wl(e)&&(e=xs(e));const n=C6(this),r=IP(n,e,void 0);return r[yi].isManual_=!0,AP(n),r}finishDraft(e,n){const r=e&&e[yi];(!r||!r.isManual_)&&fs(9);const{scope_:i}=r;return A6(i,n),I6(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=zd(EP).applyPatches_;return wl(e)?i(e,n):this.produce(e,a=>i(a,n))}};function IP(t,e,n,r){const[i,a]=Y_(e)?zd(r1).proxyMap_(e,n):X_(e)?zd(r1).proxySet_(e,n):TEe(e,n);return(n?.scope_??XY()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?SEe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function xs(t){return wl(t)||fs(10,t),tX(t)}function tX(t){if(!Ts(t)||Q_(t))return t;const e=t[yi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=SP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=SP(t,!0);return K_(n,(i,a)=>{n1(n,i,tX(a))},r),e&&(e.finalized_=!1),n}var IEe=new CEe,nX=IEe.produce;function rX(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var kEe=rX(),PEe=rX,DEe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Jw:Jw.apply(null,arguments)};function $a(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(oa(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>HY(r)&&r.type===t,n}var iX=class _m extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_m.prototype)}static get[Symbol.species](){return _m}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new _m(...e[0].concat(this)):new _m(...e.concat(this))}};function P6(t){return Ts(t)?nX(t,()=>{}):t}function ax(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function OEe(t){return typeof t=="boolean"}var REe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new iX;return n&&(OEe(n)?s.push(kEe):s.push(PEe(n.extraArgument))),s},aX="RTK_autoBatch",xn=()=>t=>({payload:t,meta:{[aX]:!0}}),D6=t=>e=>{setTimeout(e,t)},sX=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:D6(10):t.type==="callback"?t.queueNotification:D6(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[aX],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},NEe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new iX(t);return r&&i.push(sX(typeof r=="object"?r:void 0)),i};function MEe(t){const e=REe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(mN(n))o=GY(n);else throw new Error(oa(1));let c;typeof r=="function"?c=r(e):c=e();let u=Jw;i&&(u=DEe({trace:!1,...typeof i=="object"&&i}));const f=pEe(...c),h=NEe(f);let g=typeof s=="function"?s(h):h();const m=u(...g);return qY(o,a,m)}function oX(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(oa(28));if(o in e)throw new Error(oa(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function jEe(t){return typeof t=="function"}function zEe(t,e){let[n,r,i]=oX(e),a;if(jEe(t))a=()=>P6(t());else{const o=P6(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(wl(f)){const m=h(f,c);return m===void 0?f:m}else{if(Ts(f))return nX(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var LEe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",VEe=(t=21)=>{let e="",n=t;for(;n--;)e+=LEe[Math.random()*64|0];return e},BEe=Symbol.for("rtk-slice-createasyncthunk");function FEe(t,e){return`${t}/${e}`}function UEe({creators:t}={}){const e=t?.asyncThunk?.[BEe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(oa(11));const s=(typeof r.reducers=="function"?r.reducers(qEe()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,R){const O=typeof I=="string"?I:I.type;if(!O)throw new Error(oa(12));if(O in c.sliceCaseReducersByType)throw new Error(oa(13));return c.sliceCaseReducersByType[O]=R,u},addMatcher(I,R){return c.sliceMatchers.push({matcher:I,reducer:R}),u},exposeAction(I,R){return c.actionCreators[I]=R,u},exposeCaseReducer(I,R){return c.sliceCaseReducersByName[I]=R,u}};o.forEach(I=>{const R=s[I],O={reducerName:I,type:FEe(i,I),createNotation:typeof r.reducers=="function"};HEe(R)?WEe(O,R,u,e):GEe(O,R,u)});function f(){const[I={},R=[],O=void 0]=typeof r.extraReducers=="function"?oX(r.extraReducers):[r.extraReducers],D={...I,...c.sliceCaseReducersByType};return zEe(r.initialState,k=>{for(let P in D)k.addCase(P,D[P]);for(let P of c.sliceMatchers)k.addMatcher(P.matcher,P.reducer);for(let P of R)k.addMatcher(P.matcher,P.reducer);O&&k.addDefaultCase(O)})}const h=I=>I,g=new Map,m=new WeakMap;let b;function x(I,R){return b||(b=f()),b(I,R)}function w(){return b||(b=f()),b.getInitialState()}function S(I,R=!1){function O(k){let P=k[I];return typeof P>"u"&&R&&(P=ax(m,O,w)),P}function D(k=h){const P=ax(g,R,()=>new WeakMap);return ax(P,k,()=>{const N={};for(const[z,L]of Object.entries(r.selectors??{}))N[z]=$Ee(L,k,()=>ax(m,k,w),R);return N})}return{reducerPath:I,getSelectors:D,get selectors(){return D(O)},selectSlice:O}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(a),injectInto(I,{reducerPath:R,...O}={}){const D=R??a;return I.inject({reducerPath:D,reducer:x},O),{...T,...S(D,!0)}}};return T}}function $Ee(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Li=UEe();function qEe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function GEe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!KEe(r))throw new Error(oa(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?$a(t,s):$a(t))}function HEe(t){return t._reducerDefinitionType==="asyncThunk"}function KEe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function WEe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(oa(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||sx,pending:o||sx,rejected:c||sx,settled:u||sx})}function sx(){}var YEe="task",lX="listener",cX="completed",xN="cancelled",XEe=`task-${xN}`,QEe=`task-${cX}`,kP=`${lX}-${xN}`,ZEe=`${lX}-${cX}`,J_=class{constructor(t){this.code=t,this.message=`${YEe} ${xN} (reason: ${t})`}name="TaskAbortError";message},wN=(t,e)=>{if(typeof t!="function")throw new TypeError(oa(32))},s1=()=>{},uX=(t,e=s1)=>(t.catch(e),t),dX=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),yd=t=>{if(t.aborted)throw new J_(t.reason)};function fX(t,e){let n=s1;return new Promise((r,i)=>{const a=()=>i(new J_(t.reason));if(t.aborted){a();return}n=dX(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=s1})}var JEe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof J_?"cancelled":"rejected",error:n}}finally{e?.()}},o1=t=>e=>uX(fX(t,e).then(n=>(yd(t),n))),hX=t=>{const e=o1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Nh}=Object,O6={},eS="listenerMiddleware",eTe=(t,e)=>{const n=r=>dX(t,()=>r.abort(t.reason));return(r,i)=>{wN(r);const a=new AbortController;n(a);const s=JEe(async()=>{yd(t),yd(a.signal);const o=await r({pause:o1(a.signal),delay:hX(a.signal),signal:a.signal});return yd(a.signal),o},()=>a.abort(QEe));return i?.autoJoin&&e.push(s.catch(s1)),{result:o1(t)(s),cancel(){a.abort(XEe)}}}},tTe=(t,e)=>{const n=async(r,i)=>{yd(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await fX(e,Promise.race(o));return yd(e),c}finally{a()}};return(r,i)=>uX(n(r,i))},pX=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=$a(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(oa(21));return wN(a),{predicate:i,type:e,effect:a}},gX=Nh(t=>{const{type:e,predicate:n,effect:r}=pX(t);return{id:VEe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(oa(22))}}},{withTypes:()=>gX}),R6=(t,e)=>{const{type:n,effect:r,predicate:i}=pX(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},PP=t=>{t.pending.forEach(e=>{e.abort(kP)})},nTe=(t,e)=>()=>{for(const n of e.keys())PP(n);t.clear()},N6=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},mX=Nh($a(`${eS}/add`),{withTypes:()=>mX}),rTe=$a(`${eS}/removeAll`),vX=Nh($a(`${eS}/remove`),{withTypes:()=>vX}),iTe=(...t)=>{console.error(`${eS}/error`,...t)},R0=(t={})=>{const e=new Map,n=new Map,r=m=>{const b=n.get(m)??0;n.set(m,b+1)},i=m=>{const b=n.get(m)??1;b===1?n.delete(m):n.set(m,b-1)},{extra:a,onError:s=iTe}=t;wN(s);const o=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),b=>{m.unsubscribe(),b?.cancelActive&&PP(m)}),c=m=>{const b=R6(e,m)??gX(m);return o(b)};Nh(c,{withTypes:()=>c});const u=m=>{const b=R6(e,m);return b&&(b.unsubscribe(),m.cancelActive&&PP(b)),!!b};Nh(u,{withTypes:()=>u});const f=async(m,b,x,w)=>{const S=new AbortController,T=tTe(c,S.signal),I=[];try{m.pending.add(S),r(m),await Promise.resolve(m.effect(b,Nh({},x,{getOriginalState:w,condition:(R,O)=>T(R,O).then(Boolean),take:T,delay:hX(S.signal),pause:o1(S.signal),extra:a,signal:S.signal,fork:eTe(S.signal,I),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((R,O,D)=>{R!==S&&(R.abort(kP),D.delete(R))})},cancel:()=>{S.abort(kP),m.pending.delete(S)},throwIfCancelled:()=>{yd(S.signal)}})))}catch(R){R instanceof J_||N6(s,R,{raisedBy:"effect"})}finally{await Promise.all(I),S.abort(ZEe),i(m),m.pending.delete(S)}},h=nTe(e,n);return{middleware:m=>b=>x=>{if(!HY(x))return b(x);if(mX.match(x))return c(x.payload);if(rTe.match(x)){h();return}if(vX.match(x))return u(x.payload);let w=m.getState();const S=()=>{if(w===O6)throw new Error(oa(23));return w};let T;try{if(T=b(x),e.size>0){const I=m.getState(),R=Array.from(e.values());for(const O of R){let D=!1;try{D=O.predicate(x,I,w)}catch(k){D=!1,N6(s,k,{raisedBy:"predicate"})}D&&f(O,x,m,S)}}}finally{w=O6}return T},startListening:c,stopListening:u,clearListeners:h}};function oa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var aTe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},yX=Li({name:"chartLayout",initialState:aTe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:sTe,setLayout:oTe,setChartSize:lTe,setScale:cTe}=yX.actions,uTe=yX.reducer;function bX(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function an(t){return Number.isFinite(t)}function bo(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function M6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(n),!0).forEach(function(r){dTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dTe(t,e,n){return(e=fTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fTe(t){var e=hTe(t,"string");return typeof e=="symbol"?e:e+""}function hTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hn(t,e,n){return Rr(t)||Rr(e)?n:Ua(e)?jd(t,e,n):typeof e=="function"?e(t):n}var pTe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&We(t[a]))return Eh(Eh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&We(t[s]))return Eh(Eh({},t),{},{[s]:t[s]+(i||0)})}return t},Qd=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",xX=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},wX=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:m}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=m==="angleAxis"&&a&&a.length>=2?Dr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((S,T)=>{var I=r?r.indexOf(S):S;return{coordinate:s(I)+x,value:S,offset:x,index:T}});return w.filter(S=>!da(S.coordinate))}return c&&u?u.map((S,T)=>({coordinate:s(S)+x,value:S,index:T,offset:x})):s.ticks&&f!=null?s.ticks(f).map((S,T)=>({coordinate:s(S)+x,value:S,offset:x,index:T})):s.domain().map((S,T)=>({coordinate:s(S)+x,value:r?r[S]:S,index:T,offset:x}))},j6=1e-4,gTe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-j6,a=Math.max(r[0],r[1])+j6,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}},mTe=(t,e)=>{if(!e||e.length!==2||!We(e[0])||!We(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!We(t[0])||t[0]<n)&&(i[0]=n),(!We(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},vTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=da(f)?h:f;g>=0?(u[0]=a,u[1]=a+g,a=f):(u[0]=s,u[1]=s+g,s=f)}}}},yTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=da(c[1])?c[0]:c[1];u>=0?(c[0]=a,c[1]=a+u,a=c[1]):(c[0]=0,c[1]=0)}}}},bTe={sign:vTe,expand:q_e,none:Md,silhouette:G_e,wiggle:H_e,positive:yTe},xTe=(t,e,n)=>{var r,i=(r=bTe[n])!==null&&r!==void 0?r:Md,a=$_e().keys(e).value((o,c)=>Number(hn(o,c,0))).order(bP).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=hn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&We(h[0])&&We(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function wTe(t){return t==null?void 0:String(t)}var z6=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=hn(a,e.dataKey,e.scale.domain()[s]);return Rr(o)?null:e.scale(o)-i/2+r},_Te=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},STe=t=>{var e=t.flat(2).filter(We);return[Math.min(...e),Math.max(...e)]},ETe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],TTe=(t,e,n)=>{if(t!=null)return ETe(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=bX(u,e,n),h=STe(f);return!an(h[0])||!an(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},L6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,V6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,l1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=G_(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function B6(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Eh(Eh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function tS(t,e){if(t)return String(t);if(typeof e=="string")return e}var ATe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},CTe=(t,e)=>e==="centric"?t.angle:t.radius,Dl=t=>t.layout.width,Ol=t=>t.layout.height,ITe=t=>t.layout.scale,_X=t=>t.layout.margin,nS=ye(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),rS=ye(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),SX="data-recharts-item-index",EX="data-recharts-item-id",N0=60;function F6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ox(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F6(Object(n),!0).forEach(function(r){kTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kTe(t,e,n){return(e=PTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PTe(t){var e=DTe(t,"string");return typeof e=="symbol"?e:e+""}function DTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OTe=t=>t.brush.height;function RTe(t){var e=rS(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:N0;return n+i}return n},0)}function NTe(t){var e=rS(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:N0;return n+i}return n},0)}function MTe(t){var e=nS(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function jTe(t){var e=nS(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var xr=ye([Dl,Ol,_X,OTe,RTe,NTe,MTe,jTe,$Y,lEe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=ox(ox({},h),f),m=g.bottom;g.bottom+=r,g=pTe(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return ox(ox({brushBottom:m},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),zTe=ye(xr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),_N=ye(Dl,Ol,(t,e)=>({x:0,y:0,width:t,height:e})),LTe=A.createContext(null),bi=()=>A.useContext(LTe)!=null,iS=t=>t.brush,aS=ye([iS,xr,_X],(t,e,n)=>({height:t.height,x:We(t.x)?t.x:e.left,y:We(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:We(t.width)?t.width:e.width})),YC={},XC={},QC={},U6;function VTe(){return U6||(U6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const m=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},S=function(...T){if(i?.aborted)return;s=this,o=T;const I=g==null;m(),c&&I&&f()};return S.schedule=m,S.cancel=x,S.flush=w,i?.addEventListener("abort",x,{once:!0}),S}t.debounce=e})(QC)),QC}var $6;function BTe(){return $6||($6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VTe();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),m=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return m.cancel=g.cancel,m.flush=b,m}t.debounce=n})(XC)),XC}var q6;function FTe(){return q6||(q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BTe();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(YC)),YC}var ZC,G6;function UTe(){return G6||(G6=1,ZC=FTe().throttle),ZC}var $Te=UTe();const qTe=Cl($Te);var c1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},TX=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,o=xl(r)?t:Number(r),c=xl(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},GTe={width:0,height:0,overflow:"visible"},HTe={width:0,overflowX:"visible"},KTe={height:0,overflowY:"visible"},WTe={},YTe=t=>{var{width:e,height:n}=t,r=xl(e),i=xl(n);return r&&i?GTe:r?HTe:i?KTe:WTe};function XTe(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function DP(){return DP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DP.apply(null,arguments)}function H6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H6(Object(n),!0).forEach(function(r){QTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QTe(t,e,n){return(e=ZTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZTe(t){var e=JTe(t,"string");return typeof e=="symbol"?e:e+""}function JTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AX=A.createContext({width:-1,height:-1});function eAe(t){return bo(t.width)&&bo(t.height)}function CX(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return eAe(i)?A.createElement(AX.Provider,{value:i},e):null}var SN=()=>A.useContext(AX),tAe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:f=0,id:h,className:g,onResize:m,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=m,A.useImperativeHandle(e,()=>x.current);var[S,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),I=A.useCallback((P,N)=>{T(z=>{var L=Math.round(P),B=Math.round(N);return z.containerWidth===L&&z.containerHeight===B?z:{containerWidth:L,containerHeight:B}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return D0;var P=B=>{var j,{width:W,height:Q}=B[0].contentRect;I(W,Q),(j=w.current)===null||j===void 0||j.call(w,W,Q)};f>0&&(P=qTe(P,f,{trailing:!0,leading:!1}));var N=new ResizeObserver(P),{width:z,height:L}=x.current.getBoundingClientRect();return I(z,L),N.observe(x.current),()=>{N.disconnect()}},[I,f]);var{containerWidth:R,containerHeight:O}=S;c1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:D,calculatedHeight:k}=TX(R,O,{width:i,height:a,aspect:n,maxHeight:c});return c1(D!=null&&D>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,k,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Ht("recharts-responsive-container",g),style:K6(K6({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:YTe({width:i,height:a})},A.createElement(CX,{width:D,height:k},u)))}),sS=A.forwardRef((t,e)=>{var n=SN();if(bo(n.width)&&bo(n.height))return t.children;var{width:r,height:i}=XTe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=TX(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return We(a)&&We(s)?A.createElement(CX,{width:a,height:s},t.children):A.createElement(tAe,DP({},t,{width:r,height:i,ref:e}))});function IX(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var M0=()=>{var t,e=bi(),n=qe(zTe),r=qe(aS),i=(t=qe(iS))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},nAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},kX=()=>{var t;return(t=qe(xr))!==null&&t!==void 0?t:nAe},PX=()=>qe(Dl),DX=()=>qe(Ol),Nt=t=>t.layout.layoutType,j0=()=>qe(Nt),rAe=()=>{var t=j0();return t!==void 0},oS=t=>{var e=pn(),n=bi(),{width:r,height:i}=t,a=SN(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&bo(s)&&bo(o)&&e(lTe({width:s,height:o}))},[e,n,s,o]),null},OX=Symbol.for("immer-nothing"),W6=Symbol.for("immer-draftable"),fa=Symbol.for("immer-state");function hs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Nv=Object.getPrototypeOf;function dp(t){return!!t&&!!t[fa]}function Ld(t){return t?RX(t)||Array.isArray(t)||!!t[W6]||!!t.constructor?.[W6]||z0(t)||cS(t):!1}var iAe=Object.prototype.constructor.toString(),Y6=new WeakMap;function RX(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=Y6.get(n);return r===void 0&&(r=Function.toString.call(n),Y6.set(n,r)),r===iAe}function u1(t,e,n=!0){lS(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function lS(t){const e=t[fa];return e?e.type_:Array.isArray(t)?1:z0(t)?2:cS(t)?3:0}function OP(t,e){return lS(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function NX(t,e,n){const r=lS(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function aAe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function z0(t){return t instanceof Map}function cS(t){return t instanceof Set}function Hu(t){return t.copy_||t.base_}function RP(t,e){if(z0(t))return new Map(t);if(cS(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=RX(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[fa];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Nv(t),r)}else{const r=Nv(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function EN(t,e=!1){return uS(t)||dp(t)||!Ld(t)||(lS(t)>1&&Object.defineProperties(t,{set:lx,add:lx,clear:lx,delete:lx}),Object.freeze(t),e&&Object.values(t).forEach(n=>EN(n,!0))),t}function sAe(){hs(2)}var lx={value:sAe};function uS(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var oAe={};function Vd(t){const e=oAe[t];return e||hs(0,t),e}var Mv;function MX(){return Mv}function lAe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function X6(t,e){e&&(Vd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function NP(t){MP(t),t.drafts_.forEach(cAe),t.drafts_=null}function MP(t){t===Mv&&(Mv=t.parent_)}function Q6(t){return Mv=lAe(Mv,t)}function cAe(t){const e=t[fa];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Z6(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[fa].modified_&&(NP(e),hs(4)),Ld(t)&&(t=d1(e,t),e.parent_||f1(e,t)),e.patches_&&Vd("Patches").generateReplacementPatches_(n[fa].base_,t,e.patches_,e.inversePatches_)):t=d1(e,n,[]),NP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==OX?t:void 0}function d1(t,e,n){if(uS(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[fa];if(!i)return u1(e,(a,s)=>J6(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return f1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),u1(s,(c,u)=>J6(t,i,a,c,u,n,o),r),f1(t,a,!1),n&&t.patches_&&Vd("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function J6(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=uS(i);if(!(o&&!s)){if(dp(i)){const c=a&&e&&e.type_!==3&&!OP(e.assigned_,r)?a.concat(r):void 0,u=d1(t,i,c);if(NX(n,r,u),dp(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Ld(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;d1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(z0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&f1(t,i)}}}function f1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&EN(e,n)}function uAe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:MX(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=TN;n&&(i=[r],a=jv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var TN={get(t,e){if(e===fa)return t;const n=Hu(t);if(!OP(n,e))return dAe(t,n,e);const r=n[e];return t.finalized_||!Ld(r)?r:r===JC(t.base_,e)?(eI(t),t.copy_[e]=zP(r,t)):r},has(t,e){return e in Hu(t)},ownKeys(t){return Reflect.ownKeys(Hu(t))},set(t,e,n){const r=jX(Hu(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=JC(Hu(t),e),a=i?.[fa];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(aAe(n,i)&&(n!==void 0||OP(t.base_,e)))return!0;eI(t),jP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return JC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,eI(t),jP(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Hu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){hs(11)},getPrototypeOf(t){return Nv(t.base_)},setPrototypeOf(){hs(12)}},jv={};u1(TN,(t,e)=>{jv[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});jv.deleteProperty=function(t,e){return jv.set.call(this,t,e,void 0)};jv.set=function(t,e,n){return TN.set.call(this,t[0],e,n,t[0])};function JC(t,e){const n=t[fa];return(n?Hu(n):t)[e]}function dAe(t,e,n){const r=jX(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function jX(t,e){if(!(e in t))return;let n=Nv(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Nv(n)}}function jP(t){t.modified_||(t.modified_=!0,t.parent_&&jP(t.parent_))}function eI(t){t.copy_||(t.copy_=RP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var fAe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&hs(6),r!==void 0&&typeof r!="function"&&hs(7);let i;if(Ld(e)){const a=Q6(this),s=zP(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?NP(a):MP(a)}return X6(a,r),Z6(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===OX&&(i=void 0),this.autoFreeze_&&EN(i,!0),r){const a=[],s=[];Vd("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else hs(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ld(t)||hs(8),dp(t)&&(t=hAe(t));const e=Q6(this),n=zP(t,void 0);return n[fa].isManual_=!0,MP(e),n}finishDraft(t,e){const n=t&&t[fa];(!n||!n.isManual_)&&hs(9);const{scope_:r}=n;return X6(r,e),Z6(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Vd("Patches").applyPatches_;return dp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function zP(t,e){const n=z0(t)?Vd("MapSet").proxyMap_(t,e):cS(t)?Vd("MapSet").proxySet_(t,e):uAe(t,e);return(e?e.scope_:MX()).drafts_.push(n),n}function hAe(t){return dp(t)||hs(10,t),zX(t)}function zX(t){if(!Ld(t)||uS(t))return t;const e=t[fa];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=RP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=RP(t,!0);return u1(n,(i,a)=>{NX(n,i,zX(a))},r),e&&(e.finalized_=!1),n}var pAe=new fAe;pAe.produce;var gAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},LX=Li({name:"legend",initialState:gAe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:xn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=xs(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:xn()},removeLegendPayload:{reducer(t,e){var n=xs(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:xn()}}}),{setLegendSize:QLe,setLegendSettings:ZLe,addLegendPayload:VX,replaceLegendPayload:BX,removeLegendPayload:FX}=LX.actions,mAe=LX.reducer;function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LP.apply(null,arguments)}function eF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eF(Object(n),!0).forEach(function(r){vAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vAe(t,e,n){return(e=yAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yAe(t){var e=bAe(t,"string");return typeof e=="symbol"?e:e+""}function bAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xAe(t){return Array.isArray(t)&&Ua(t[0])&&Ua(t[1])?t.join(" ~ "):t}var wAe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=!1}=t,m=()=>{if(a&&a.length){var O={padding:0,margin:0},D=(o?G_(a,o):a).map((k,P)=>{if(k.type==="none")return null;var N=k.formatter||s||xAe,{value:z,name:L}=k,B=z,j=L;if(N){var W=N(z,L,k,P,a);if(Array.isArray(W))[B,j]=W;else if(W!=null)B=W;else return null}var Q=tI({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:Q},Ua(j)?A.createElement("span",{className:"recharts-tooltip-item-name"},j):null,Ua(j)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},B),A.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:O},D)}return null},b=tI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=tI({margin:0},i),w=!Rr(f),S=w?f:"",T=Ht("recharts-default-tooltip",c),I=Ht("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(S=h(f,a));var R=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",LP({className:T,style:b},R),A.createElement("p",{className:I,style:x},A.isValidElement(S)?S:"".concat(S)),m())},nm="recharts-tooltip-wrapper",_Ae={visibility:"hidden"};function SAe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ht(nm,{["".concat(nm,"-right")]:We(n)&&e&&We(e.x)&&n>=e.x,["".concat(nm,"-left")]:We(n)&&e&&We(e.x)&&n<e.x,["".concat(nm,"-bottom")]:We(r)&&e&&We(e.y)&&r>=e.y,["".concat(nm,"-top")]:We(r)&&e&&We(e.y)&&r<e.y})}function tF(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&We(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var m=f,b=g;return m<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function EAe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function TAe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:c}=t,u,f,h;return s.height>0&&s.width>0&&n?(f=tF({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=tF({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=EAe({translateX:f,translateY:h,useTranslate3d:o})):u=_Ae,{cssProperties:u,cssClasses:SAe({translateX:f,translateY:h,coordinate:n})}}function nF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nF(Object(n),!0).forEach(function(r){VP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VP(t,e,n){return(e=AAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AAe(t){var e=CAe(t,"string");return typeof e=="symbol"?e:e+""}function CAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class IAe extends A.PureComponent{constructor(){super(...arguments),VP(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),VP(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:m,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:S}=this.props,{cssClasses:T,cssProperties:I}=TAe({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:m}),R=S?{}:cx(cx({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),O=cx(cx({},R),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:O,ref:w},a)}}var UX=()=>{var t;return(t=qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BP.apply(null,arguments)}function rF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rF(Object(n),!0).forEach(function(r){kAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kAe(t,e,n){return(e=PAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PAe(t){var e=DAe(t,"string");return typeof e=="symbol"?e:e+""}function DAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aF={curveBasisClosed:O_e,curveBasisOpen:R_e,curveBasis:D_e,curveBumpX:v_e,curveBumpY:y_e,curveLinearClosed:N_e,curveLinear:U_,curveMonotoneX:M_e,curveMonotoneY:j_e,curveNatural:z_e,curveStep:L_e,curveStepAfter:B_e,curveStepBefore:V_e},h1=t=>an(t.x)&&an(t.y),sF=t=>t.base!=null&&h1(t.base)&&h1(t),rm=t=>t.x,im=t=>t.y,OAe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(P0(t));return(n==="curveMonotone"||n==="curveBump")&&e?aF["".concat(n).concat(e==="vertical"?"Y":"X")]:aF[n]||U_},RAe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=OAe(e,i),o=a?n.filter(h1):n,c;if(Array.isArray(r)){var u=n.map((m,b)=>iF(iF({},m),{},{base:r[b]}));i==="vertical"?c=tx().y(im).x1(rm).x0(m=>m.base.x):c=tx().x(rm).y1(im).y0(m=>m.base.y);var f=c.defined(sF).curve(s),h=a?u.filter(sF):u;return f(h)}i==="vertical"&&We(r)?c=tx().y(im).x1(rm).x0(r):We(r)?c=tx().x(rm).y1(im).y0(r):c=gY().x(rm).y(im);var g=c.defined(h1).curve(s);return g(o)},AN=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=j0();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?RAe(s):r;return A.createElement("path",BP({},Es(t),dSe(t),{className:Ht("recharts-curve",e),d:o===null?void 0:o,ref:i}))},NAe=["x","y","top","left","width","height","className"];function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FP.apply(null,arguments)}function oF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MAe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oF(Object(n),!0).forEach(function(r){jAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jAe(t,e,n){return(e=zAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zAe(t){var e=LAe(t,"string");return typeof e=="symbol"?e:e+""}function LAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VAe(t,e){if(t==null)return{};var n,r,i=BAe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var FAe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),UAe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=VAe(t,NAe),u=MAe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!We(e)||!We(n)||!We(a)||!We(s)||!We(r)||!We(i)?null:A.createElement("path",FP({},ua(u),{className:Ht("recharts-cross",o),d:FAe(e,n,a,s,r,i)}))};function $Ae(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function lF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lF(Object(n),!0).forEach(function(r){qAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qAe(t,e,n){return(e=GAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GAe(t){var e=HAe(t,"string");return typeof e=="symbol"?e:e+""}function HAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KAe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),$X=(t,e,n)=>t.map(r=>"".concat(KAe(r)," ").concat(e,"ms ").concat(n)).join(","),WAe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),zv=(t,e)=>Object.keys(e).reduce((n,r)=>cF(cF({},n),{},{[r]:t(r,e[r])}),{});function uF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uF(Object(n),!0).forEach(function(r){YAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YAe(t,e,n){return(e=XAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XAe(t){var e=QAe(t,"string");return typeof e=="symbol"?e:e+""}function QAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p1=(t,e,n)=>t+(e-t)*n,UP=t=>{var{from:e,to:n}=t;return e!==n},qX=(t,e,n)=>{var r=zv((i,a)=>{if(UP(a)){var[s,o]=t(a.from,a.to,a.velocity);return hr(hr({},a),{},{from:s,velocity:o})}return a},e);return n<1?zv((i,a)=>UP(a)&&r[i]!=null?hr(hr({},a),{},{velocity:p1(a.velocity,r[i].velocity,n),from:p1(a.from,r[i].from,n)}):a,e):qX(t,r,n-1)};function ZAe(t,e,n,r,i,a){var s,o=r.reduce((g,m)=>hr(hr({},g),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),c=()=>zv((g,m)=>m.from,o),u=()=>!Object.values(o).filter(UP).length,f=null,h=g=>{s||(s=g);var m=g-s,b=m/n.dt;o=qX(n,o,b),i(hr(hr(hr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function JAe(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var m=t[g],b=e[g];return m==null||b==null?h:hr(hr({},h),{},{[g]:[m,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,m=zv((x,w)=>p1(...w,n(g)),c);if(a(hr(hr(hr({},t),e),m)),g<1)o=s.setTimeout(f);else{var b=zv((x,w)=>p1(...w,n(1)),c);a(hr(hr(hr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const eCe=(t,e,n,r,i,a)=>{var s=WAe(t,e);return n==null?()=>(i(hr(hr({},t),e)),()=>{}):n.isStepper===!0?ZAe(t,e,n,s,i,a):JAe(t,e,n,r,s,i,a)};var g1=1e-4,GX=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],HX=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),dF=(t,e)=>n=>{var r=GX(t,e);return HX(r,n)},tCe=(t,e)=>n=>{var r=GX(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return HX(i,n)},nCe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},rCe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=nCe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},iCe=(t,e,n,r)=>{var i=dF(t,n),a=dF(e,r),s=tCe(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var m=i(h)-f,b=s(h);if(Math.abs(m-f)<g1||b<g1)return a(h);h=o(h-m/b)}return a(h)};return c.isStepper=!1,c},fF=function(){return iCe(...rCe(...arguments))},aCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<g1&&Math.abs(h)<g1?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},sCe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return fF(t);case"spring":return aCe();default:if(t.split("(")[0]==="cubic-bezier")return fF(t)}return typeof t=="function"?t:null};function oCe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class lCe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function cCe(){return oCe(new lCe)}var uCe=A.createContext(cCe);function dCe(t,e){var n=A.useContext(uCe);return A.useMemo(()=>e??n(t),[t,e,n])}var fCe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),dS={isSsr:fCe()},hCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},hF={t:0},nI={t:1};function fS(t){var e=Kr(t,hCe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!dS.isSsr:n,h=dCe(e.animationId,e.animationManager),[g,m]=A.useState(f?hF:nI),b=A.useRef(null);return A.useEffect(()=>{f||m(nI)},[f]),A.useEffect(()=>{if(!f||!r)return D0;var x=eCe(hF,nI,sCe(a),i,m,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function hS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Pv(e)),r=A.useRef(t);return r.current!==t&&(n.current=Pv(e),r.current=t),n.current}var pCe=["radius"],gCe=["radius"],pF,gF,mF,vF,yF,bF,xF,wF,_F,SF;function EF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EF(Object(n),!0).forEach(function(r){mCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mCe(t,e,n){return(e=vCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vCe(t){var e=yCe(t,"string");return typeof e=="symbol"?e:e+""}function yCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m1(){return m1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m1.apply(null,arguments)}function AF(t,e){if(t==null)return{};var n,r,i=bCe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ws(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var CF=(t,e,n,r,i)=>{var a=Nc(n),s=Nc(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&i instanceof Array){for(var g=[0,0,0,0],m=0,b=4;m<b;m++)g[m]=i[m]>o?o:i[m];h=Mn(pF||(pF=Ws(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Mn(gF||(gF=Ws(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=Mn(mF||(mF=Ws(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=Mn(vF||(vF=Ws(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Mn(yF||(yF=Ws(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Mn(bF||(bF=Ws(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=Mn(xF||(xF=Ws(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=Mn(wF||(wF=Ws(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);h=Mn(_F||(_F=Ws(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*x,x,x,f,t+u*x,e,t+n-u*x,e,x,x,f,t+n,e+c*x,t+n,e+r-c*x,x,x,f,t+n-u*x,e+r,t+u*x,e+r,x,x,f,t,e+r-c*x)}else h=Mn(SF||(SF=Ws(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},IF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KX=t=>{var e=Kr(t,IF),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Y=n.current.getTotalLength();Y&&i(Y)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:m,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),S=A.useRef(c),T=A.useRef(a),I=A.useRef(s),R=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),O=hS(R,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var D=Ht("recharts-rectangle",f);if(!x){var k=ua(e),{radius:P}=k,N=AF(k,pCe);return A.createElement("path",m1({},N,{x:Nc(a),y:Nc(s),width:Nc(o),height:Nc(c),radius:typeof u=="number"?u:void 0,className:D,d:CF(a,s,o,c,u)}))}var z=w.current,L=S.current,B=T.current,j=I.current,W="0px ".concat(r===-1?1:r,"px"),Q="".concat(r,"px 0px"),q=$X(["strokeDasharray"],g,typeof h=="string"?h:IF.animationEasing);return A.createElement(fS,{animationId:O,key:O,canBegin:r>0,duration:g,easing:h,isActive:x,begin:m},Y=>{var Z=fr(z,o,Y),ie=fr(L,c,Y),J=fr(B,a,Y),U=fr(j,s,Y);n.current&&(w.current=Z,S.current=ie,T.current=J,I.current=U);var X;b?Y>0?X={transition:q,strokeDasharray:Q}:X={strokeDasharray:W}:X={strokeDasharray:Q};var te=ua(e),{radius:K}=te,ce=AF(te,gCe);return A.createElement("path",m1({},ce,{radius:typeof u=="number"?u:void 0,className:D,d:CF(J,U,Z,ie,u),ref:n,style:TF(TF({},X),e.style)}))})};function kF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kF(Object(n),!0).forEach(function(r){xCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xCe(t,e,n){return(e=wCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wCe(t){var e=_Ce(t,"string");return typeof e=="symbol"?e:e+""}function _Ce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v1=Math.PI/180,SCe=t=>t*180/Math.PI,or=(t,e,n,r)=>({x:t+Math.cos(-v1*r)*n,y:e+Math.sin(-v1*r)*n}),WX=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},ECe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},TCe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=ECe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:SCe(c),angleInRadian:c}},ACe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},CCe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},ICe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=TCe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=ACe(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?PF(PF({},e),{},{radius:i,angle:CCe(f,e)}):null};function YX(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=or(e,n,r,i),o=or(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var DF,OF,RF,NF,MF,jF,zF;function $P(){return $P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$P.apply(null,arguments)}function od(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var kCe=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},ux=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/v1,h=c?i:i+a*f,g=or(e,n,u,h),m=or(e,n,r,h),b=c?i-a*f:i,x=or(e,n,u*Math.cos(f*v1),b);return{center:g,circleTangency:m,lineTangency:x,theta:f}},XX=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=kCe(a,s),c=a+o,u=or(e,n,i,a),f=or(e,n,i,c),h=Mn(DF||(DF=od(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=or(e,n,r,a),m=or(e,n,r,c);h+=Mn(OF||(OF=od(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Mn(RF||(RF=od(["L ",","," Z"])),e,n);return h},PCe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=Dr(u-c),{circleTangency:h,lineTangency:g,theta:m}=ux({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=ux({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-m-w;if(S<0)return s?Mn(NF||(NF=od(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):XX({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var T=Mn(MF||(MF=od(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:I,lineTangency:R,theta:O}=ux({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:D,lineTangency:k,theta:P}=ux({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),N=o?Math.abs(c-u):Math.abs(c-u)-O-P;if(N<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Mn(jF||(jF=od(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,a,a,+(f<0),D.x,D.y,r,r,+(N>180),+(f>0),I.x,I.y,a,a,+(f<0),R.x,R.y)}else T+=Mn(zF||(zF=od(["L",",","Z"])),e,n);return T},DCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},QX=t=>{var e=Kr(t,DCe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Ht("recharts-sector",h),m=a-i,b=ri(s,m,0,!0),x;return b>0&&Math.abs(u-f)<360?x=PCe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,m/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=XX({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),A.createElement("path",$P({},ua(e),{className:g,d:x}))};function OCe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(PY(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=or(r,i,a,o),u=or(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return YX(e)}}var rI={},iI={},aI={},LF;function RCe(){return LF||(LF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FY();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(aI)),aI}var VF;function NCe(){return VF||(VF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RCe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(iI)),iI}var BF;function MCe(){return BF||(BF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UY(),n=NCe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(rI)),rI}var sI,FF;function jCe(){return FF||(FF=1,sI=MCe().range),sI}var zCe=jCe();const ZX=Cl(zCe);function Fc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function LCe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function CN(t){let e,n,r;t.length!==2?(e=Fc,n=(o,c)=>Fc(t(o),c),r=(o,c)=>t(o)-c):(e=t===Fc||t===LCe?t:VCe,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function VCe(){return 0}function JX(t){return t===null?NaN:+t}function*BCe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const FCe=CN(Fc),L0=FCe.right;CN(JX).center;class UF extends Map{constructor(e,n=qCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get($F(this,e))}has(e){return super.has($F(this,e))}set(e,n){return super.set(UCe(this,e),n)}delete(e){return super.delete($Ce(this,e))}}function $F({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function UCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function $Ce({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function qCe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function GCe(t=Fc){if(t===Fc)return eQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function eQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const HCe=Math.sqrt(50),KCe=Math.sqrt(10),WCe=Math.sqrt(2);function y1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=HCe?10:a>=KCe?5:a>=WCe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?y1(t,e,n*2):[o,c,u]}function qP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?y1(e,t,n):y1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function GP(t,e,n){return e=+e,t=+t,n=+n,y1(t,e,n)[2]}function HP(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?GP(e,t,n):GP(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function qF(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function GF(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function tQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?eQ:GCe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));tQ(t,e,m,b,i)}const a=t[e];let s=n,o=r;for(am(t,n,e),i(t[r],a)>0&&am(t,n,r);s<o;){for(am(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?am(t,n,o):(++o,am(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function am(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function YCe(t,e,n){if(t=Float64Array.from(BCe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return GF(t);if(e>=1)return qF(t);var r,i=(r-1)*e,a=Math.floor(i),s=qF(tQ(t,a).subarray(0,a+1)),o=GF(t.subarray(a+1));return s+(o-s)*(i-a)}}function XCe(t,e,n=JX){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function QCe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Wa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Rl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const KP=Symbol("implicit");function IN(){var t=new UF,e=[],n=[],r=KP;function i(a){let s=t.get(a);if(s===void 0){if(r!==KP)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new UF;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return IN(e,n).unknown(r)},Wa.apply(i,arguments),i}function kN(){var t=IN().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,m=i<r,b=m?i:r,x=m?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=QCe(g).map(function(S){return b+a*S});return n(m?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return kN(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},Wa.apply(h(),arguments)}function nQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return nQ(e())},t}function ZCe(){return nQ(kN.apply(null,arguments).paddingInner(1))}function PN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function V0(){}var Lv=.7,b1=1/Lv,Mh="\\s*([+-]?\\d+)\\s*",Vv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",JCe=/^#([0-9a-f]{3,8})$/,eIe=new RegExp(`^rgb\\(${Mh},${Mh},${Mh}\\)$`),tIe=new RegExp(`^rgb\\(${po},${po},${po}\\)$`),nIe=new RegExp(`^rgba\\(${Mh},${Mh},${Mh},${Vv}\\)$`),rIe=new RegExp(`^rgba\\(${po},${po},${po},${Vv}\\)$`),iIe=new RegExp(`^hsl\\(${Vv},${po},${po}\\)$`),aIe=new RegExp(`^hsla\\(${Vv},${po},${po},${Vv}\\)$`),HF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PN(V0,Bv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:KF,formatHex:KF,formatHex8:sIe,formatHsl:oIe,formatRgb:WF,toString:WF});function KF(){return this.rgb().formatHex()}function sIe(){return this.rgb().formatHex8()}function oIe(){return iQ(this).formatHsl()}function WF(){return this.rgb().formatRgb()}function Bv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=JCe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?YF(e):n===3?new Ri(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?dx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?dx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=eIe.exec(t))?new Ri(e[1],e[2],e[3],1):(e=tIe.exec(t))?new Ri(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nIe.exec(t))?dx(e[1],e[2],e[3],e[4]):(e=rIe.exec(t))?dx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=iIe.exec(t))?ZF(e[1],e[2]/100,e[3]/100,1):(e=aIe.exec(t))?ZF(e[1],e[2]/100,e[3]/100,e[4]):HF.hasOwnProperty(t)?YF(HF[t]):t==="transparent"?new Ri(NaN,NaN,NaN,0):null}function YF(t){return new Ri(t>>16&255,t>>8&255,t&255,1)}function dx(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ri(t,e,n,r)}function lIe(t){return t instanceof V0||(t=Bv(t)),t?(t=t.rgb(),new Ri(t.r,t.g,t.b,t.opacity)):new Ri}function WP(t,e,n,r){return arguments.length===1?lIe(t):new Ri(t,e,n,r??1)}function Ri(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}PN(Ri,WP,rQ(V0,{brighter(t){return t=t==null?b1:Math.pow(b1,t),new Ri(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Lv:Math.pow(Lv,t),new Ri(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ri(bd(this.r),bd(this.g),bd(this.b),x1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XF,formatHex:XF,formatHex8:cIe,formatRgb:QF,toString:QF}));function XF(){return`#${ld(this.r)}${ld(this.g)}${ld(this.b)}`}function cIe(){return`#${ld(this.r)}${ld(this.g)}${ld(this.b)}${ld((isNaN(this.opacity)?1:this.opacity)*255)}`}function QF(){const t=x1(this.opacity);return`${t===1?"rgb(":"rgba("}${bd(this.r)}, ${bd(this.g)}, ${bd(this.b)}${t===1?")":`, ${t})`}`}function x1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ld(t){return t=bd(t),(t<16?"0":"")+t.toString(16)}function ZF(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ps(t,e,n,r)}function iQ(t){if(t instanceof ps)return new ps(t.h,t.s,t.l,t.opacity);if(t instanceof V0||(t=Bv(t)),!t)return new ps;if(t instanceof ps)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new ps(s,o,c,t.opacity)}function uIe(t,e,n,r){return arguments.length===1?iQ(t):new ps(t,e,n,r??1)}function ps(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}PN(ps,uIe,rQ(V0,{brighter(t){return t=t==null?b1:Math.pow(b1,t),new ps(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Lv:Math.pow(Lv,t),new ps(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ri(oI(t>=240?t-240:t+120,i,r),oI(t,i,r),oI(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ps(JF(this.h),fx(this.s),fx(this.l),x1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=x1(this.opacity);return`${t===1?"hsl(":"hsla("}${JF(this.h)}, ${fx(this.s)*100}%, ${fx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function JF(t){return t=(t||0)%360,t<0?t+360:t}function fx(t){return Math.max(0,Math.min(1,t||0))}function oI(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const DN=t=>()=>t;function dIe(t,e){return function(n){return t+n*e}}function fIe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function hIe(t){return(t=+t)==1?aQ:function(e,n){return n-e?fIe(e,n,t):DN(isNaN(e)?n:e)}}function aQ(t,e){var n=e-t;return n?dIe(t,n):DN(isNaN(t)?e:t)}const eU=(function t(e){var n=hIe(e);function r(i,a){var s=n((i=WP(i)).r,(a=WP(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=aQ(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function pIe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function gIe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mIe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Lp(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function vIe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function w1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yIe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Lp(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var YP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lI=new RegExp(YP.source,"g");function bIe(t){return function(){return t}}function xIe(t){return function(e){return t(e)+""}}function wIe(t,e){var n=YP.lastIndex=lI.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=YP.exec(t))&&(i=lI.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:w1(r,i)})),n=lI.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?xIe(c[0].x):bIe(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function Lp(t,e){var n=typeof e,r;return e==null||n==="boolean"?DN(e):(n==="number"?w1:n==="string"?(r=Bv(e))?(e=r,eU):wIe:e instanceof Bv?eU:e instanceof Date?vIe:gIe(e)?pIe:Array.isArray(e)?mIe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?yIe:w1)(t,e)}function ON(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function _Ie(t,e){e===void 0&&(e=t,t=Lp);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function SIe(t){return function(){return t}}function _1(t){return+t}var tU=[0,1];function gi(t){return t}function XP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:SIe(isNaN(e)?NaN:.5)}function EIe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function TIe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=XP(i,r),a=n(s,a)):(r=XP(r,i),a=n(a,s)),function(o){return a(r(o))}}function AIe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=XP(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=L0(t,o,1,r)-1;return a[c](i[c](o))}}function B0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function pS(){var t=tU,e=tU,n=Lp,r,i,a,s=gi,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==gi&&(s=EIe(t[0],t[g-1])),o=g>2?AIe:TIe,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),w1)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,_1),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=ON,f()},h.clamp=function(g){return arguments.length?(s=g?!0:gi,f()):s!==gi},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,m){return r=g,i=m,f()}}function RN(){return pS()(gi,gi)}function CIe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function S1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function fp(t){return t=S1(Math.abs(t)),t?t[1]:NaN}function IIe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function kIe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var PIe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fv(t){if(!(e=PIe.exec(t)))throw new Error("invalid format: "+t);var e;return new NN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fv.prototype=NN.prototype;function NN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}NN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function DIe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var sQ;function OIe(t,e){var n=S1(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(sQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+S1(t,Math.max(0,e+a-1))[0]}function nU(t,e){var n=S1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const rU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:CIe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nU(t*100,e),r:nU,s:OIe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function iU(t){return t}var aU=Array.prototype.map,sU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function RIe(t){var e=t.grouping===void 0||t.thousands===void 0?iU:IIe(aU.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?iU:kIe(aU.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Fv(h);var g=h.fill,m=h.align,b=h.sign,x=h.symbol,w=h.zero,S=h.width,T=h.comma,I=h.precision,R=h.trim,O=h.type;O==="n"?(T=!0,O="g"):rU[O]||(I===void 0&&(I=12),R=!0,O="g"),(w||g==="0"&&m==="=")&&(w=!0,g="0",m="=");var D=x==="$"?n:x==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",k=x==="$"?r:/[%p]/.test(O)?s:"",P=rU[O],N=/[defgprs%]/.test(O);I=I===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function z(L){var B=D,j=k,W,Q,q;if(O==="c")j=P(L)+j,L="";else{L=+L;var Y=L<0||1/L<0;if(L=isNaN(L)?c:P(Math.abs(L),I),R&&(L=DIe(L)),Y&&+L==0&&b!=="+"&&(Y=!1),B=(Y?b==="("?b:o:b==="-"||b==="("?"":b)+B,j=(O==="s"?sU[8+sQ/3]:"")+j+(Y&&b==="("?")":""),N){for(W=-1,Q=L.length;++W<Q;)if(q=L.charCodeAt(W),48>q||q>57){j=(q===46?i+L.slice(W+1):L.slice(W))+j,L=L.slice(0,W);break}}}T&&!w&&(L=e(L,1/0));var Z=B.length+L.length+j.length,ie=Z<S?new Array(S-Z+1).join(g):"";switch(T&&w&&(L=e(ie+L,ie.length?S-j.length:1/0),ie=""),m){case"<":L=B+L+j+ie;break;case"=":L=B+ie+L+j;break;case"^":L=ie.slice(0,Z=ie.length>>1)+B+L+j+ie.slice(Z);break;default:L=ie+B+L+j;break}return a(L)}return z.toString=function(){return h+""},z}function f(h,g){var m=u((h=Fv(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(fp(g)/3)))*3,x=Math.pow(10,-b),w=sU[8+b/3];return function(S){return m(x*S)+w}}return{format:u,formatPrefix:f}}var hx,MN,oQ;NIe({thousands:",",grouping:[3],currency:["$",""]});function NIe(t){return hx=RIe(t),MN=hx.format,oQ=hx.formatPrefix,hx}function MIe(t){return Math.max(0,-fp(Math.abs(t)))}function jIe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fp(e)/3)))*3-fp(Math.abs(t)))}function zIe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fp(e)-fp(t))+1}function lQ(t,e,n,r){var i=HP(t,e,n),a;switch(r=Fv(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=jIe(i,s))&&(r.precision=a),oQ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=zIe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=MIe(i))&&(r.precision=a-(r.type==="%")*2);break}}return MN(r)}function lu(t){var e=t.domain;return t.ticks=function(n){var r=e();return qP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return lQ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=GP(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function cQ(){var t=RN();return t.copy=function(){return B0(t,cQ())},Wa.apply(t,arguments),lu(t)}function uQ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,_1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return uQ(t).unknown(e)},t=arguments.length?Array.from(t,_1):[0,1],lu(n)}function dQ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function oU(t){return Math.log(t)}function lU(t){return Math.exp(t)}function LIe(t){return-Math.log(-t)}function VIe(t){return-Math.exp(-t)}function BIe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function FIe(t){return t===10?BIe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function UIe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function cU(t){return(e,n)=>-t(-e,n)}function jN(t){const e=t(oU,lU),n=e.domain;let r=10,i,a;function s(){return i=UIe(r),a=FIe(r),n()[0]<0?(i=cU(i),a=cU(a),t(LIe,VIe)):t(oU,lU),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),m=i(f),b,x;const w=o==null?10:+o;let S=[];if(!(r%1)&&m-g<w){if(g=Math.floor(g),m=Math.ceil(m),u>0){for(;g<=m;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}}else for(;g<=m;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}S.length*2<w&&(S=qP(u,f,w))}else S=qP(g,m,Math.min(m-g,w)).map(a);return h?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Fv(c)).precision==null&&(c.trim=!0),c=MN(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(dQ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function fQ(){const t=jN(pS()).domain([1,10]);return t.copy=()=>B0(t,fQ()).base(t.base()),Wa.apply(t,arguments),t}function uU(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dU(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function zN(t){var e=1,n=t(uU(e),dU(e));return n.constant=function(r){return arguments.length?t(uU(e=+r),dU(e)):e},lu(n)}function hQ(){var t=zN(pS());return t.copy=function(){return B0(t,hQ()).constant(t.constant())},Wa.apply(t,arguments)}function fU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function $Ie(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function qIe(t){return t<0?-t*t:t*t}function LN(t){var e=t(gi,gi),n=1;function r(){return n===1?t(gi,gi):n===.5?t($Ie,qIe):t(fU(n),fU(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},lu(e)}function VN(){var t=LN(pS());return t.copy=function(){return B0(t,VN()).exponent(t.exponent())},Wa.apply(t,arguments),t}function GIe(){return VN.apply(null,arguments).exponent(.5)}function hU(t){return Math.sign(t)*t*t}function HIe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function pQ(){var t=RN(),e=[0,1],n=!1,r;function i(a){var s=HIe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(hU(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,_1)).map(hU)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return pQ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Wa.apply(i,arguments),lu(i)}function gQ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=XCe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[L0(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Fc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return gQ().domain(t).range(e).unknown(r)},Wa.apply(a,arguments)}function mQ(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[L0(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return mQ().domain([t,e]).range(i).unknown(a)},Wa.apply(lu(s),arguments)}function vQ(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[L0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vQ().domain(t).range(e).unknown(n)},Wa.apply(i,arguments)}const cI=new Date,uI=new Date;function wr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>wr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(cI.setTime(+a),uI.setTime(+s),t(cI),t(uI),Math.floor(n(cI,uI))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const E1=wr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);E1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?wr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):E1);E1.range;const el=1e3,ja=el*60,tl=ja*60,_l=tl*24,BN=_l*7,pU=_l*30,dI=_l*365,cd=wr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*el)},(t,e)=>(e-t)/el,t=>t.getUTCSeconds());cd.range;const FN=wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*el)},(t,e)=>{t.setTime(+t+e*ja)},(t,e)=>(e-t)/ja,t=>t.getMinutes());FN.range;const UN=wr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ja)},(t,e)=>(e-t)/ja,t=>t.getUTCMinutes());UN.range;const $N=wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*el-t.getMinutes()*ja)},(t,e)=>{t.setTime(+t+e*tl)},(t,e)=>(e-t)/tl,t=>t.getHours());$N.range;const qN=wr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*tl)},(t,e)=>(e-t)/tl,t=>t.getUTCHours());qN.range;const F0=wr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ja)/_l,t=>t.getDate()-1);F0.range;const gS=wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/_l,t=>t.getUTCDate()-1);gS.range;const yQ=wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/_l,t=>Math.floor(t/_l));yQ.range;function Zd(t){return wr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ja)/BN)}const mS=Zd(0),T1=Zd(1),KIe=Zd(2),WIe=Zd(3),hp=Zd(4),YIe=Zd(5),XIe=Zd(6);mS.range;T1.range;KIe.range;WIe.range;hp.range;YIe.range;XIe.range;function Jd(t){return wr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/BN)}const vS=Jd(0),A1=Jd(1),QIe=Jd(2),ZIe=Jd(3),pp=Jd(4),JIe=Jd(5),eke=Jd(6);vS.range;A1.range;QIe.range;ZIe.range;pp.range;JIe.range;eke.range;const GN=wr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());GN.range;const HN=wr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());HN.range;const Sl=wr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Sl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Sl.range;const El=wr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());El.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});El.range;function bQ(t,e,n,r,i,a){const s=[[cd,1,el],[cd,5,5*el],[cd,15,15*el],[cd,30,30*el],[a,1,ja],[a,5,5*ja],[a,15,15*ja],[a,30,30*ja],[i,1,tl],[i,3,3*tl],[i,6,6*tl],[i,12,12*tl],[r,1,_l],[r,2,2*_l],[n,1,BN],[e,1,pU],[e,3,3*pU],[t,1,dI]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const m=h&&typeof h.range=="function"?h:c(u,f,h),b=m?m.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,m=CN(([,,w])=>w).right(s,g);if(m===s.length)return t.every(HP(u/dI,f/dI,h));if(m===0)return E1.every(Math.max(HP(u,f,h),1));const[b,x]=s[g/s[m-1][2]<s[m][2]/g?m-1:m];return b.every(x)}return[o,c]}const[tke,nke]=bQ(El,HN,vS,yQ,qN,UN),[rke,ike]=bQ(Sl,GN,mS,F0,$N,FN);function fI(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hI(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ake(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=om(i),f=lm(i),h=om(a),g=lm(a),m=om(s),b=lm(s),x=om(o),w=lm(o),S=om(c),T=lm(c),I={a:Y,A:Z,b:ie,B:J,c:null,d:xU,e:xU,f:Ike,g:Lke,G:Bke,H:Tke,I:Ake,j:Cke,L:xQ,m:kke,M:Pke,p:U,q:X,Q:SU,s:EU,S:Dke,u:Oke,U:Rke,V:Nke,w:Mke,W:jke,x:null,X:null,y:zke,Y:Vke,Z:Fke,"%":_U},R={a:te,A:K,b:ce,B:ae,c:null,d:wU,e:wU,f:Gke,g:tPe,G:rPe,H:Uke,I:$ke,j:qke,L:_Q,m:Hke,M:Kke,p:oe,q:he,Q:SU,s:EU,S:Wke,u:Yke,U:Xke,V:Qke,w:Zke,W:Jke,x:null,X:null,y:ePe,Y:nPe,Z:iPe,"%":_U},O={a:z,A:L,b:B,B:j,c:W,d:yU,e:yU,f:wke,g:vU,G:mU,H:bU,I:bU,j:vke,L:xke,m:mke,M:yke,p:N,q:gke,Q:Ske,s:Eke,S:bke,u:uke,U:dke,V:fke,w:cke,W:hke,x:Q,X:q,y:vU,Y:mU,Z:pke,"%":_ke};I.x=D(n,I),I.X=D(r,I),I.c=D(e,I),R.x=D(n,R),R.X=D(r,R),R.c=D(e,R);function D(ne,_e){return function(fe){var ee=[],Ce=-1,Pe=0,ze=ne.length,Le,Be,Ie;for(fe instanceof Date||(fe=new Date(+fe));++Ce<ze;)ne.charCodeAt(Ce)===37&&(ee.push(ne.slice(Pe,Ce)),(Be=gU[Le=ne.charAt(++Ce)])!=null?Le=ne.charAt(++Ce):Be=Le==="e"?" ":"0",(Ie=_e[Le])&&(Le=Ie(fe,Be)),ee.push(Le),Pe=Ce+1);return ee.push(ne.slice(Pe,Ce)),ee.join("")}}function k(ne,_e){return function(fe){var ee=sm(1900,void 0,1),Ce=P(ee,ne,fe+="",0),Pe,ze;if(Ce!=fe.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(_e&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Pe=hI(sm(ee.y,0,1)),ze=Pe.getUTCDay(),Pe=ze>4||ze===0?A1.ceil(Pe):A1(Pe),Pe=gS.offset(Pe,(ee.V-1)*7),ee.y=Pe.getUTCFullYear(),ee.m=Pe.getUTCMonth(),ee.d=Pe.getUTCDate()+(ee.w+6)%7):(Pe=fI(sm(ee.y,0,1)),ze=Pe.getDay(),Pe=ze>4||ze===0?T1.ceil(Pe):T1(Pe),Pe=F0.offset(Pe,(ee.V-1)*7),ee.y=Pe.getFullYear(),ee.m=Pe.getMonth(),ee.d=Pe.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),ze="Z"in ee?hI(sm(ee.y,0,1)).getUTCDay():fI(sm(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(ze+5)%7:ee.w+ee.U*7-(ze+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,hI(ee)):fI(ee)}}function P(ne,_e,fe,ee){for(var Ce=0,Pe=_e.length,ze=fe.length,Le,Be;Ce<Pe;){if(ee>=ze)return-1;if(Le=_e.charCodeAt(Ce++),Le===37){if(Le=_e.charAt(Ce++),Be=O[Le in gU?_e.charAt(Ce++):Le],!Be||(ee=Be(ne,fe,ee))<0)return-1}else if(Le!=fe.charCodeAt(ee++))return-1}return ee}function N(ne,_e,fe){var ee=u.exec(_e.slice(fe));return ee?(ne.p=f.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function z(ne,_e,fe){var ee=m.exec(_e.slice(fe));return ee?(ne.w=b.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function L(ne,_e,fe){var ee=h.exec(_e.slice(fe));return ee?(ne.w=g.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function B(ne,_e,fe){var ee=S.exec(_e.slice(fe));return ee?(ne.m=T.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function j(ne,_e,fe){var ee=x.exec(_e.slice(fe));return ee?(ne.m=w.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function W(ne,_e,fe){return P(ne,e,_e,fe)}function Q(ne,_e,fe){return P(ne,n,_e,fe)}function q(ne,_e,fe){return P(ne,r,_e,fe)}function Y(ne){return s[ne.getDay()]}function Z(ne){return a[ne.getDay()]}function ie(ne){return c[ne.getMonth()]}function J(ne){return o[ne.getMonth()]}function U(ne){return i[+(ne.getHours()>=12)]}function X(ne){return 1+~~(ne.getMonth()/3)}function te(ne){return s[ne.getUTCDay()]}function K(ne){return a[ne.getUTCDay()]}function ce(ne){return c[ne.getUTCMonth()]}function ae(ne){return o[ne.getUTCMonth()]}function oe(ne){return i[+(ne.getUTCHours()>=12)]}function he(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var _e=D(ne+="",I);return _e.toString=function(){return ne},_e},parse:function(ne){var _e=k(ne+="",!1);return _e.toString=function(){return ne},_e},utcFormat:function(ne){var _e=D(ne+="",R);return _e.toString=function(){return ne},_e},utcParse:function(ne){var _e=k(ne+="",!0);return _e.toString=function(){return ne},_e}}}var gU={"-":"",_:" ",0:"0"},Nr=/^\s*\d+/,ske=/^%/,oke=/[\\^$*+?|[\]().{}]/g;function Rt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function lke(t){return t.replace(oke,"\\$&")}function om(t){return new RegExp("^(?:"+t.map(lke).join("|")+")","i")}function lm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function cke(t,e,n){var r=Nr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function uke(t,e,n){var r=Nr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function dke(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function fke(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function hke(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function mU(t,e,n){var r=Nr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function vU(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function pke(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function gke(t,e,n){var r=Nr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function mke(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function yU(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function vke(t,e,n){var r=Nr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function bU(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function yke(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function bke(t,e,n){var r=Nr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function xke(t,e,n){var r=Nr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function wke(t,e,n){var r=Nr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _ke(t,e,n){var r=ske.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ske(t,e,n){var r=Nr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Eke(t,e,n){var r=Nr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function xU(t,e){return Rt(t.getDate(),e,2)}function Tke(t,e){return Rt(t.getHours(),e,2)}function Ake(t,e){return Rt(t.getHours()%12||12,e,2)}function Cke(t,e){return Rt(1+F0.count(Sl(t),t),e,3)}function xQ(t,e){return Rt(t.getMilliseconds(),e,3)}function Ike(t,e){return xQ(t,e)+"000"}function kke(t,e){return Rt(t.getMonth()+1,e,2)}function Pke(t,e){return Rt(t.getMinutes(),e,2)}function Dke(t,e){return Rt(t.getSeconds(),e,2)}function Oke(t){var e=t.getDay();return e===0?7:e}function Rke(t,e){return Rt(mS.count(Sl(t)-1,t),e,2)}function wQ(t){var e=t.getDay();return e>=4||e===0?hp(t):hp.ceil(t)}function Nke(t,e){return t=wQ(t),Rt(hp.count(Sl(t),t)+(Sl(t).getDay()===4),e,2)}function Mke(t){return t.getDay()}function jke(t,e){return Rt(T1.count(Sl(t)-1,t),e,2)}function zke(t,e){return Rt(t.getFullYear()%100,e,2)}function Lke(t,e){return t=wQ(t),Rt(t.getFullYear()%100,e,2)}function Vke(t,e){return Rt(t.getFullYear()%1e4,e,4)}function Bke(t,e){var n=t.getDay();return t=n>=4||n===0?hp(t):hp.ceil(t),Rt(t.getFullYear()%1e4,e,4)}function Fke(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Rt(e/60|0,"0",2)+Rt(e%60,"0",2)}function wU(t,e){return Rt(t.getUTCDate(),e,2)}function Uke(t,e){return Rt(t.getUTCHours(),e,2)}function $ke(t,e){return Rt(t.getUTCHours()%12||12,e,2)}function qke(t,e){return Rt(1+gS.count(El(t),t),e,3)}function _Q(t,e){return Rt(t.getUTCMilliseconds(),e,3)}function Gke(t,e){return _Q(t,e)+"000"}function Hke(t,e){return Rt(t.getUTCMonth()+1,e,2)}function Kke(t,e){return Rt(t.getUTCMinutes(),e,2)}function Wke(t,e){return Rt(t.getUTCSeconds(),e,2)}function Yke(t){var e=t.getUTCDay();return e===0?7:e}function Xke(t,e){return Rt(vS.count(El(t)-1,t),e,2)}function SQ(t){var e=t.getUTCDay();return e>=4||e===0?pp(t):pp.ceil(t)}function Qke(t,e){return t=SQ(t),Rt(pp.count(El(t),t)+(El(t).getUTCDay()===4),e,2)}function Zke(t){return t.getUTCDay()}function Jke(t,e){return Rt(A1.count(El(t)-1,t),e,2)}function ePe(t,e){return Rt(t.getUTCFullYear()%100,e,2)}function tPe(t,e){return t=SQ(t),Rt(t.getUTCFullYear()%100,e,2)}function nPe(t,e){return Rt(t.getUTCFullYear()%1e4,e,4)}function rPe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?pp(t):pp.ceil(t),Rt(t.getUTCFullYear()%1e4,e,4)}function iPe(){return"+0000"}function _U(){return"%"}function SU(t){return+t}function EU(t){return Math.floor(+t/1e3)}var nh,EQ,TQ;aPe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function aPe(t){return nh=ake(t),EQ=nh.format,nh.parse,TQ=nh.utcFormat,nh.utcParse,nh}function sPe(t){return new Date(t)}function oPe(t){return t instanceof Date?+t:+new Date(+t)}function KN(t,e,n,r,i,a,s,o,c,u){var f=RN(),h=f.invert,g=f.domain,m=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),S=u("%a %d"),T=u("%b %d"),I=u("%B"),R=u("%Y");function O(D){return(c(D)<D?m:o(D)<D?b:s(D)<D?x:a(D)<D?w:r(D)<D?i(D)<D?S:T:n(D)<D?I:R)(D)}return f.invert=function(D){return new Date(h(D))},f.domain=function(D){return arguments.length?g(Array.from(D,oPe)):g().map(sPe)},f.ticks=function(D){var k=g();return t(k[0],k[k.length-1],D??10)},f.tickFormat=function(D,k){return k==null?O:u(k)},f.nice=function(D){var k=g();return(!D||typeof D.range!="function")&&(D=e(k[0],k[k.length-1],D??10)),D?g(dQ(k,D)):f},f.copy=function(){return B0(f,KN(t,e,n,r,i,a,s,o,c,u))},f}function lPe(){return Wa.apply(KN(rke,ike,Sl,GN,mS,F0,$N,FN,cd,EQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cPe(){return Wa.apply(KN(tke,nke,El,HN,vS,gS,qN,UN,cd,TQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yS(){var t=0,e=1,n,r,i,a,s=gi,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var m,b;return arguments.length?([m,b]=g,s=h(m,b),u):[s(0),s(1)]}}return u.range=f(Lp),u.rangeRound=f(ON),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function cu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function AQ(){var t=lu(yS()(gi));return t.copy=function(){return cu(t,AQ())},Rl.apply(t,arguments)}function CQ(){var t=jN(yS()).domain([1,10]);return t.copy=function(){return cu(t,CQ()).base(t.base())},Rl.apply(t,arguments)}function IQ(){var t=zN(yS());return t.copy=function(){return cu(t,IQ()).constant(t.constant())},Rl.apply(t,arguments)}function WN(){var t=LN(yS());return t.copy=function(){return cu(t,WN()).exponent(t.exponent())},Rl.apply(t,arguments)}function uPe(){return WN.apply(null,arguments).exponent(.5)}function kQ(){var t=[],e=gi;function n(r){if(r!=null&&!isNaN(r=+r))return e((L0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Fc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>YCe(t,a/r))},n.copy=function(){return kQ(e).domain(t)},Rl.apply(n,arguments)}function bS(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=gi,f,h=!1,g;function m(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,m):[t,e,n]},m.clamp=function(x){return arguments.length?(h=!!x,m):h},m.interpolator=function(x){return arguments.length?(u=x,m):u};function b(x){return function(w){var S,T,I;return arguments.length?([S,T,I]=w,u=_Ie(x,[S,T,I]),m):[u(0),u(.5),u(1)]}}return m.range=b(Lp),m.rangeRound=b(ON),m.unknown=function(x){return arguments.length?(g=x,m):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,m}}function PQ(){var t=lu(bS()(gi));return t.copy=function(){return cu(t,PQ())},Rl.apply(t,arguments)}function DQ(){var t=jN(bS()).domain([.1,1,10]);return t.copy=function(){return cu(t,DQ()).base(t.base())},Rl.apply(t,arguments)}function OQ(){var t=zN(bS());return t.copy=function(){return cu(t,OQ()).constant(t.constant())},Rl.apply(t,arguments)}function YN(){var t=LN(bS());return t.copy=function(){return cu(t,YN()).exponent(t.exponent())},Rl.apply(t,arguments)}function dPe(){return YN.apply(null,arguments).exponent(.5)}const Sm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kN,scaleDiverging:PQ,scaleDivergingLog:DQ,scaleDivergingPow:YN,scaleDivergingSqrt:dPe,scaleDivergingSymlog:OQ,scaleIdentity:uQ,scaleImplicit:KP,scaleLinear:cQ,scaleLog:fQ,scaleOrdinal:IN,scalePoint:ZCe,scalePow:VN,scaleQuantile:gQ,scaleQuantize:mQ,scaleRadial:pQ,scaleSequential:AQ,scaleSequentialLog:CQ,scaleSequentialPow:WN,scaleSequentialQuantile:kQ,scaleSequentialSqrt:uPe,scaleSequentialSymlog:IQ,scaleSqrt:GIe,scaleSymlog:hQ,scaleThreshold:vQ,scaleTime:lPe,scaleUtc:cPe,tickFormat:lQ},Symbol.toStringTag,{value:"Module"}));var Nl=t=>t.chartData,xS=ye([Nl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),RQ=(t,e,n,r)=>r?xS(t):Nl(t),fPe=(t,e,n)=>n?xS(t):Nl(t);function Zc(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(an(e)&&an(n))return!0}return!1}function TU(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function NQ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(an(n))i=n;else if(typeof n=="function")return;if(an(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Zc(s))return s}}function hPe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Zc(r))return TU(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(We(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&L6.test(i)){var c=L6.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(We(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&V6.test(a)){var f=V6.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(Zc(g))return e==null?g:TU(g,e,n)}}}var Vp=1e9,pPe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},QN,Sn=!0,qa="[DecimalError] ",xd=qa+"Invalid argument: ",XN=qa+"Exponent out of range: ",Bp=Math.floor,Ku=Math.pow,gPe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,na,Pr=1e7,dn=7,MQ=9007199254740991,C1=Bp(MQ/dn),Ue={};Ue.absoluteValue=Ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ue.comparedTo=Ue.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*dn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(t){return ol(this,new this.constructor(t))};Ue.dividedToIntegerBy=Ue.idiv=function(t){var e=this,n=e.constructor;return sn(ol(e,new n(t),0,1),n.precision)};Ue.equals=Ue.eq=function(t){return!this.cmp(t)};Ue.exponent=function(){return lr(this)};Ue.greaterThan=Ue.gt=function(t){return this.cmp(t)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(t){return this.cmp(t)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(t){return this.cmp(t)<0};Ue.lessThanOrEqualTo=Ue.lte=function(t){return this.cmp(t)<1};Ue.logarithm=Ue.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(na))throw Error(qa+"NaN");if(n.s<1)throw Error(qa+(n.s?"NaN":"-Infinity"));return n.eq(na)?new r(0):(Sn=!1,e=ol(Uv(n,a),Uv(t,a),a),Sn=!0,sn(e,i))};Ue.minus=Ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LQ(e,t):jQ(e,(t.s=-t.s,t))};Ue.modulo=Ue.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(qa+"NaN");return n.s?(Sn=!1,e=ol(n,t,0,1).times(t),Sn=!0,n.minus(e)):sn(new r(n),i)};Ue.naturalExponential=Ue.exp=function(){return zQ(this)};Ue.naturalLogarithm=Ue.ln=function(){return Uv(this)};Ue.negated=Ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ue.plus=Ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?jQ(e,t):LQ(e,(t.s=-t.s,t))};Ue.precision=Ue.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(xd+t);if(e=lr(i)+1,r=i.d.length-1,n=r*dn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ue.squareRoot=Ue.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(qa+"NaN")}for(t=lr(o),Sn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=ro(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Bp((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(ol(o,a,s+2)).times(.5),ro(a.d).slice(0,s)===(e=ro(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(sn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return Sn=!0,sn(r,n)};Ue.times=Ue.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,m=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=m.length,c<u&&(a=g,g=m,m=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+m[r]*g[i-r-1]+e,a[i--]=o%Pr|0,e=o/Pr|0;a[i]=(a[i]+e)%Pr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Sn?sn(t,h.precision):t};Ue.toDecimalPlaces=Ue.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(xo(t,0,Vp),e===void 0?e=r.rounding:xo(e,0,8),sn(n,t+lr(n)+1,e))};Ue.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Bd(r,!0):(xo(t,0,Vp),e===void 0?e=i.rounding:xo(e,0,8),r=sn(new i(r),t+1,e),n=Bd(r,!0,t+1)),n};Ue.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Bd(i):(xo(t,0,Vp),e===void 0?e=a.rounding:xo(e,0,8),r=sn(new a(i),t+lr(i)+1,e),n=Bd(r.abs(),!1,t+lr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var t=this,e=t.constructor;return sn(new e(t),lr(t)+1,e.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(na);if(o=new c(o),!o.s){if(t.s<1)throw Error(qa+"Infinity");return o}if(o.eq(na))return o;if(r=c.precision,t.eq(na))return sn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=MQ){for(i=new c(na),e=Math.ceil(r/dn+4),Sn=!1;n%2&&(i=i.times(o),CU(i.d,e)),n=Bp(n/2),n!==0;)o=o.times(o),CU(o.d,e);return Sn=!0,t.s<0?new c(na).div(i):sn(i,r)}}else if(a<0)throw Error(qa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Sn=!1,i=t.times(Uv(o,r+u)),Sn=!0,i=zQ(i),i.s=a,i};Ue.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=lr(i),r=Bd(i,n<=a.toExpNeg||n>=a.toExpPos)):(xo(t,1,Vp),e===void 0?e=a.rounding:xo(e,0,8),i=sn(new a(i),t,e),n=lr(i),r=Bd(i,t<=n||n<=a.toExpNeg,t)),r};Ue.toSignificantDigits=Ue.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(xo(t,1,Vp),e===void 0?e=r.rounding:xo(e,0,8)),sn(new r(n),t,e)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=lr(t),n=t.constructor;return Bd(t,e<=n.toExpNeg||e>=n.toExpPos)};function jQ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Sn?sn(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/dn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Pr|0,c[a]%=Pr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,Sn?sn(e,h):e}function xo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(xd+t)}function ro(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=dn-r.length,n&&(a+=wc(n)),a+=r;s=t[e],r=s+"",n=dn-r.length,n&&(a+=wc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var ol=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Pr|0,s=a/Pr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Pr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,m,b,x,w,S,T,I,R,O,D,k,P,N=r.constructor,z=r.s==i.s?1:-1,L=r.d,B=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(qa+"Division by zero");for(c=r.e-i.e,k=B.length,O=L.length,m=new N(z),b=m.d=[],u=0;B[u]==(L[u]||0);)++u;if(B[u]>(L[u]||0)&&--c,a==null?T=a=N.precision:s?T=a+(lr(r)-lr(i))+1:T=a,T<0)return new N(0);if(T=T/dn+2|0,u=0,k==1)for(f=0,B=B[0],T++;(u<O||f)&&T--;u++)I=f*Pr+(L[u]||0),b[u]=I/B|0,f=I%B|0;else{for(f=Pr/(B[0]+1)|0,f>1&&(B=t(B,f),L=t(L,f),k=B.length,O=L.length),R=k,x=L.slice(0,k),w=x.length;w<k;)x[w++]=0;P=B.slice(),P.unshift(0),D=B[0],B[1]>=Pr/2&&++D;do f=0,o=e(B,x,k,w),o<0?(S=x[0],k!=w&&(S=S*Pr+(x[1]||0)),f=S/D|0,f>1?(f>=Pr&&(f=Pr-1),h=t(B,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,k<g?P:B,g))):(f==0&&(o=f=1),h=B.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(B,x,k,w),o<1&&(f++,n(x,k<w?P:B,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=L[R]||0:(x=[L[R]],w=1);while((R++<O||x[0]!==void 0)&&T--)}return b[0]||b.shift(),m.e=c,sn(m,s?a+lr(m)+1:a)}})();function zQ(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(lr(t)>16)throw Error(XN+lr(t));if(!t.s)return new f(na);for(Sn=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(Ku(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(na),f.precision=o;;){if(i=sn(i.times(t),o),n=n.times(++c),s=a.plus(ol(i,n,o)),ro(s.d).slice(0,o)===ro(a.d).slice(0,o)){for(;u--;)a=sn(a.times(a),o);return f.precision=h,e==null?(Sn=!0,sn(a,h)):a}a=s}}function lr(t){for(var e=t.e*dn,n=t.d[0];n>=10;n/=10)e++;return e}function pI(t,e,n){if(e>t.LN10.sd())throw Sn=!0,n&&(t.precision=n),Error(qa+"LN10 precision limit exceeded");return sn(new t(t.LN10),e)}function wc(t){for(var e="";t--;)e+="0";return e}function Uv(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,m=t,b=m.d,x=m.constructor,w=x.precision;if(m.s<1)throw Error(qa+(m.s?"NaN":"-Infinity"));if(m.eq(na))return new x(0);if(e==null?(Sn=!1,u=w):u=e,m.eq(10))return e==null&&(Sn=!0),pI(x,u);if(u+=g,x.precision=u,n=ro(b),r=n.charAt(0),a=lr(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=ro(m.d),r=n.charAt(0),h++;a=lr(m),r>1?(m=new x("0."+n),a++):m=new x(r+"."+n.slice(1))}else return c=pI(x,u+2,w).times(a+""),m=Uv(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(Sn=!0,sn(m,w)):m;for(o=s=m=ol(m.minus(na),m.plus(na),u),f=sn(m.times(m),u),i=3;;){if(s=sn(s.times(f),u),c=o.plus(ol(s,new x(i),u)),ro(c.d).slice(0,u)===ro(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(pI(x,u+2,w).times(a+""))),o=ol(o,new x(h),u),x.precision=w,e==null?(Sn=!0,sn(o,w)):o;o=c,i+=2}}function AU(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Bp(n/dn),t.d=[],r=(n+1)%dn,n<0&&(r+=dn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=dn;r<i;)t.d.push(+e.slice(r,r+=dn));e=e.slice(r),r=dn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Sn&&(t.e>C1||t.e<-C1))throw Error(XN+n)}else t.s=0,t.e=0,t.d=[0];return t}function sn(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=dn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/dn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=dn,i=r-dn+s}if(n!==void 0&&(a=Ku(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/Ku(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=lr(t),h.length=1,e=e-a-1,h[0]=Ku(10,(dn-e%dn)%dn),t.e=Bp(-e/dn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=Ku(10,dn-r),h[f]=i>0?(u/Ku(10,s-i)%Ku(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Pr&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Pr)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(Sn&&(t.e>C1||t.e<-C1))throw Error(XN+lr(t));return t}function LQ(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,m=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Sn?sn(e,m):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(m/dn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Pr-1;--c[a],c[i]+=Pr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Sn?sn(e,m):e):new g(0)}function Bd(t,e,n){var r,i=lr(t),a=ro(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+wc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+wc(-i-1)+a,n&&(r=n-s)>0&&(a+=wc(r))):i>=s?(a+=wc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+wc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=wc(r))),t.s<0?"-"+a:a}function CU(t,e){if(t.length>e)return t.length=e,!0}function VQ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(xd+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return AU(s,a.toString())}else if(typeof a!="string")throw Error(xd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,gPe.test(a))AU(s,a);else throw Error(xd+a)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=VQ,i.config=i.set=mPe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function mPe(t){if(!t||typeof t!="object")throw Error(qa+"Object expected");var e,n,r,i=["precision",1,Vp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Bp(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(xd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(xd+n+": "+r);return this}var QN=VQ(pPe);na=new QN(1);const $t=QN;var vPe=t=>t,BQ={},FQ=t=>t===BQ,IU=t=>function e(){return arguments.length===0||arguments.length===1&&FQ(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},UQ=(t,e)=>t===1?e:IU(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==BQ).length;return a>=t?e(...r):UQ(t-a,IU(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=r.map(f=>FQ(f)?o.shift():f);return e(...u,...o)}))}),yPe=t=>UQ(t.length,t),QP=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},bPe=yPe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),xPe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return vPe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,c)=>c(o),a(...arguments))}};function $Q(t){var e;return t===0?e=1:e=Math.floor(new $t(t).abs().log(10).toNumber())+1,e}function qQ(t,e,n){for(var r=new $t(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var GQ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},HQ=(t,e,n)=>{if(t.lte(0))return new $t(0);var r=$Q(t.toNumber()),i=new $t(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new $t(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new $t(c.toNumber()):new $t(Math.ceil(c.toNumber()))},wPe=(t,e,n)=>{var r=new $t(1),i=new $t(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new $t(10).pow($Q(t)-1),i=new $t(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new $t(Math.floor(t)))}else t===0?i=new $t(Math.floor((e-1)/2)):n||(i=new $t(Math.floor(t)));var s=Math.floor((e-1)/2),o=xPe(bPe(c=>i.add(new $t(c-s).mul(r)).toNumber()),QP);return o(0,e)},KQ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new $t(0),tickMin:new $t(0),tickMax:new $t(0)};var s=HQ(new $t(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new $t(0):(o=new $t(e).add(n).div(2),o=o.sub(new $t(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new $t(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?KQ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new $t(c).mul(s)),tickMax:o.add(new $t(u).mul(s))})},_Pe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=GQ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...QP(0,i-1).map(()=>1/0)]:[...QP(0,i-1).map(()=>-1/0),c];return n>r?u.reverse():u}if(o===c)return wPe(o,i,a);var{step:f,tickMin:h,tickMax:g}=KQ(o,c,s,a,0),m=qQ(h,g.add(new $t(.1).mul(f)),f);return n>r?m.reverse():m},SPe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=GQ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=HQ(new $t(o).sub(s).div(c-1),a,0),f=[...qQ(new $t(s),new $t(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},WQ=t=>t.rootProps.maxBarSize,EPe=t=>t.rootProps.barGap,YQ=t=>t.rootProps.barCategoryGap,TPe=t=>t.rootProps.barSize,U0=t=>t.rootProps.stackOffset,XQ=t=>t.rootProps.reverseStackOrder,ZN=t=>t.options.chartName,JN=t=>t.rootProps.syncId,QQ=t=>t.rootProps.syncMethod,e2=t=>t.options.eventEmitter,Or={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Wo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ji={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},wS=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},APe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Wo.angleAxisId,includeHidden:!1,name:void 0,reversed:Wo.reversed,scale:Wo.scale,tick:Wo.tick,tickCount:void 0,ticks:void 0,type:Wo.type,unit:void 0},CPe={allowDataOverflow:Ji.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ji.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ji.scale,tick:Ji.tick,tickCount:Ji.tickCount,ticks:void 0,type:Ji.type,unit:void 0},IPe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Wo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wo.scale,tick:Wo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},kPe={allowDataOverflow:Ji.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ji.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ji.scale,tick:Ji.tick,tickCount:Ji.tickCount,ticks:void 0,type:"category",unit:void 0},t2=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?IPe:APe,n2=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?kPe:CPe,_S=t=>t.polarOptions,r2=ye([Dl,Ol,xr],WX),ZQ=ye([_S,r2],(t,e)=>{if(t!=null)return ri(t.innerRadius,e,0)}),JQ=ye([_S,r2],(t,e)=>{if(t!=null)return ri(t.outerRadius,e,e*.8)}),PPe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},eZ=ye([_S],PPe);ye([t2,eZ],wS);var tZ=ye([r2,ZQ,JQ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ye([n2,tZ],wS);var nZ=ye([Nt,_S,ZQ,JQ,Dl,Ol],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:ri(s,i,i/2),cy:ri(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),En=(t,e)=>e,$0=(t,e,n)=>n;function i2(t){return t?.id}function rZ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=i2(o);u.forEach((h,g)=>{var m=a==null||i?g:String(hn(h,a,null)),b=hn(h,o.dataKey,0),x;s.has(m)?x=s.get(m):x={},Object.assign(x,{[f]:b}),s.set(m,x)})}}),Array.from(s.values())}function SS(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var ES=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function TS(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function DPe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var _r=t=>{var e=Nt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Fp=t=>t.tooltip.settings.axisId;function kU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(n),!0).forEach(function(r){OPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OPe(t,e,n){return(e=RPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RPe(t){var e=NPe(t,"string");return typeof e=="symbol"?e:e+""}function NPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZP=[0,"auto"],Cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},iZ=(t,e)=>t.cartesianAxis.xAxis[e],Eo=(t,e)=>{var n=iZ(t,e);return n??Cr},Ir={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ZP,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:N0},aZ=(t,e)=>t.cartesianAxis.yAxis[e],To=(t,e)=>{var n=aZ(t,e);return n??Ir},MPe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},a2=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??MPe},Dn=(t,e,n)=>{switch(e){case"xAxis":return Eo(t,n);case"yAxis":return To(t,n);case"zAxis":return a2(t,n);case"angleAxis":return t2(t,n);case"radiusAxis":return n2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},jPe=(t,e,n)=>{switch(e){case"xAxis":return Eo(t,n);case"yAxis":return To(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},q0=(t,e,n)=>{switch(e){case"xAxis":return Eo(t,n);case"yAxis":return To(t,n);case"angleAxis":return t2(t,n);case"radiusAxis":return n2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},sZ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function s2(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var o2=t=>t.graphicalItems.cartesianItems,zPe=ye([En,$0],s2),l2=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),G0=ye([o2,Dn,zPe],l2,{memoizeOptions:{resultEqualityCheck:TS}}),oZ=ye([G0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(SS)),lZ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),LPe=ye([G0],lZ),c2=t=>t.map(e=>e.data).filter(Boolean).flat(1),VPe=ye([G0],c2,{memoizeOptions:{resultEqualityCheck:TS}}),u2=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},d2=ye([VPe,RQ],u2),f2=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:hn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:hn(i,r)}))):t.map(r=>({value:r})),AS=ye([d2,Dn,G0],f2);function cZ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Kx(t){if(Ua(t)||t instanceof Date){var e=Number(t);if(an(e))return e}}function PU(t){if(Array.isArray(t)){var e=[Kx(t[0]),Kx(t[1])];return Zc(e)?e:void 0}var n=Kx(t);if(n!=null)return[n,n]}function Tl(t){return t.map(Kx).filter(eSe)}function BPe(t,e,n){return!n||typeof e!="number"||da(e)?[]:n.length?Tl(n.flatMap(r=>{var i=hn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!an(a)||!an(s)))return[e-a,e+s]})):[]}var Sr=t=>{var e=_r(t),n=Fp(t);return q0(t,e,n)},H0=ye([Sr],t=>t?.dataKey),FPe=ye([oZ,RQ,Sr],rZ),uZ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map(i2);return[o,{stackedData:xTe(t,f,n),graphicalItems:u}]}))},JP=ye([FPe,oZ,U0,XQ],uZ),dZ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=TTe(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},UPe=ye([Dn],t=>t.allowDataOverflow),h2=t=>{var e;if(t==null||!("domain"in t))return ZP;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Tl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:ZP},p2=ye([Dn],h2),g2=ye([p2,UPe],NQ),$Pe=ye([JP,Nl,En,g2],dZ,{memoizeOptions:{resultEqualityCheck:ES}}),CS=t=>t.errorBars,qPe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>cZ(n,r)),k1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},m2=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(S=>cZ(i,S)),g=hn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),m=BPe(o,g,h);if(m.length>=2){var b=Math.min(...m),x=Math.max(...m);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=PU(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=PU(hn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),an(a)&&an(s))return[a,s]},GPe=ye([d2,Dn,LPe,CS,En],m2,{memoizeOptions:{resultEqualityCheck:ES}});function HPe(t){var{value:e}=t;if(Ua(e)||e instanceof Date)return e}var KPe=(t,e,n)=>{var r=t.map(HPe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&CY(r))?ZX(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},fZ=t=>t.referenceElements.dots,Up=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),WPe=ye([fZ,En,$0],Up),hZ=t=>t.referenceElements.areas,YPe=ye([hZ,En,$0],Up),pZ=t=>t.referenceElements.lines,XPe=ye([pZ,En,$0],Up),gZ=(t,e)=>{if(t!=null){var n=Tl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},QPe=ye(WPe,En,gZ),mZ=(t,e)=>{if(t!=null){var n=Tl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},ZPe=ye([YPe,En],mZ);function JPe(t){var e;if(t.x!=null)return Tl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Tl(n)}function eDe(t){var e;if(t.y!=null)return Tl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Tl(n)}var vZ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?JPe(r):eDe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},tDe=ye([XPe,En],vZ),nDe=ye(QPe,tDe,ZPe,(t,e,n)=>k1(t,n,e)),v2=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?k1(r,a,i):k1(a,i);return hPe(e,u,t.allowDataOverflow)},rDe=ye([Dn,p2,g2,$Pe,GPe,nDe,Nt,En],v2,{memoizeOptions:{resultEqualityCheck:ES}}),iDe=[0,1],y2=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=Qd(e,a);if(u&&o==null){var f;return ZX(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?KPe(r,t,u):i==="expand"?iDe:s}},b2=ye([Dn,Nt,d2,AS,U0,En,rDe],y2),yZ=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(P0(a));return o in Sm?o:"point"}}},$p=ye([Dn,Nt,sZ,ZN,En],yZ);function aDe(t){if(t!=null){if(t in Sm)return Sm[t]();var e="scale".concat(P0(t));if(e in Sm)return Sm[e]()}}function x2(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=aDe(e);if(i!=null){var a=i.domain(n).range(r);return gTe(a),a}}}var w2=(t,e,n)=>{var r=h2(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Zc(t))return _Pe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Zc(t))return SPe(t,e.tickCount,e.allowDecimals)}},_2=ye([b2,q0,$p],w2),S2=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Zc(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},sDe=ye([Dn,b2,_2,En],S2),oDe=ye(AS,Dn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Tl(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),bZ=ye(oDe,Nt,YQ,xr,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!an(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=ri(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),lDe=(t,e,n)=>{var r=Eo(t,e);return r==null||typeof r.padding!="string"?0:bZ(t,"xAxis",e,n,r.padding)},cDe=(t,e,n)=>{var r=To(t,e);return r==null||typeof r.padding!="string"?0:bZ(t,"yAxis",e,n,r.padding)},uDe=ye(Eo,lDe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),dDe=ye(To,cDe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),fDe=ye([xr,uDe,aS,iS,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),hDe=ye([xr,Nt,dDe,aS,iS,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),K0=(t,e,n,r)=>{var i;switch(e){case"xAxis":return fDe(t,n,r);case"yAxis":return hDe(t,n,r);case"zAxis":return(i=a2(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return eZ(t);case"radiusAxis":return tZ(t,n);default:return}},xZ=ye([Dn,K0],wS),gp=ye([Dn,$p,sDe,xZ],x2);ye([G0,CS,En],qPe);function wZ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var IS=(t,e)=>e,kS=(t,e,n)=>n,pDe=ye(nS,IS,kS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wZ)),gDe=ye(rS,IS,kS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wZ)),_Z=(t,e)=>({width:t.width,height:e.height}),mDe=(t,e)=>{var n=typeof e.width=="number"?e.width:N0;return{width:n,height:t.height}},SZ=ye(xr,Eo,_Z),vDe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},yDe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},bDe=ye(Ol,xr,pDe,IS,kS,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=_Z(e,o);s==null&&(s=vDe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),xDe=ye(Dl,xr,gDe,IS,kS,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=mDe(e,o);s==null&&(s=yDe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),wDe=(t,e)=>{var n=Eo(t,e);if(n!=null)return bDe(t,n.orientation,n.mirror)},_De=ye([xr,Eo,wDe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),SDe=(t,e)=>{var n=To(t,e);if(n!=null)return xDe(t,n.orientation,n.mirror)},EDe=ye([xr,To,SDe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),EZ=ye(xr,To,(t,e)=>{var n=typeof e.width=="number"?e.width:N0;return{width:n,height:t.height}}),DU=(t,e,n)=>{switch(e){case"xAxis":return SZ(t,n).width;case"yAxis":return EZ(t,n).height;default:return}},TZ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=Qd(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&CY(c))return c}},E2=ye([Nt,AS,Dn,En],TZ),AZ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=Qd(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},T2=ye([Nt,AS,q0,En],AZ),OU=ye([Nt,jPe,$p,gp,E2,T2,K0,_2,En],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=Qd(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),TDe=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=Qd(t,c),{type:f,ticks:h,tickCount:g}=e,m=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/m:0;b=c==="angleAxis"&&a!=null&&a.length>=2?Dr(a[0]-a[1])*2*b:b;var x=h||i;if(x){var w=x.map((S,T)=>{var I=s?s.indexOf(S):S;return{index:T,coordinate:r(I)+b,value:S,offset:b}});return w.filter(S=>an(S.coordinate))}return u&&o?o.map((S,T)=>({coordinate:r(S)+b,value:S,index:T,offset:b})).filter(S=>an(S.coordinate)):r.ticks?r.ticks(g).map(S=>({coordinate:r(S)+b,value:S,offset:b})):r.domain().map((S,T)=>({coordinate:r(S)+b,value:s?s[S]:S,index:T,offset:b}))}},CZ=ye([Nt,q0,$p,gp,_2,K0,E2,T2,En],TDe),ADe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=Qd(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?Dr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>({coordinate:n(f)+u,value:f,index:h,offset:u})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+u,value:f,offset:u})):n.domain().map((f,h)=>({coordinate:n(f)+u,value:i?i[f]:f,index:h,offset:u}))}},mp=ye([Nt,q0,gp,K0,E2,T2,En],ADe),vp=ye(Dn,gp,(t,e)=>{if(!(t==null||e==null))return I1(I1({},t),{},{scale:e})}),CDe=ye([Dn,$p,b2,xZ],x2);ye((t,e,n)=>a2(t,n),CDe,(t,e)=>{if(!(t==null||e==null))return I1(I1({},t),{},{scale:e})});var IDe=ye([Nt,nS,rS],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),IZ=t=>t.options.defaultTooltipEventType,kZ=t=>t.options.validateTooltipEventTypes;function PZ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function A2(t,e){var n=IZ(t),r=kZ(t);return PZ(e,n,r)}function kDe(t){return qe(e=>A2(e,t))}var DZ=(t,e)=>{var n,r=Number(e);if(!(da(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},PDe=t=>t.tooltip.settings,Ic={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},DDe={itemInteraction:{click:Ic,hover:Ic},axisInteraction:{click:Ic,hover:Ic},keyboardInteraction:Ic,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},OZ=Li({name:"tooltip",initialState:DDe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:xn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=xs(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:xn()},removeTooltipEntrySettings:{reducer(t,e){var n=xs(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:xn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:ODe,replaceTooltipEntrySettings:RDe,removeTooltipEntrySettings:NDe,setTooltipSettingsState:MDe,setActiveMouseOverItemIndex:RZ,mouseLeaveItem:jDe,mouseLeaveChart:NZ,setActiveClickItemIndex:zDe,setMouseOverAxisIndex:MZ,setMouseClickAxisIndex:LDe,setSyncInteraction:eD,setKeyboardInteraction:tD}=OZ.actions,VDe=OZ.reducer;function RU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function px(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(n),!0).forEach(function(r){BDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BDe(t,e,n){return(e=FDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FDe(t){var e=UDe(t,"string");return typeof e=="symbol"?e:e+""}function UDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $De(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function qDe(t){return t.index!=null}var jZ=(t,e,n,r)=>{if(e==null)return Ic;var i=$De(t,e,n);if(i==null)return Ic;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(qDe(i)){if(a)return px(px({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return px(px({},Ic),{},{coordinate:i.coordinate})};function GDe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function HDe(t,e){var n=GDe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function KDe(t,e,n){if(n==null||e==null)return!0;var r=hn(t,e);return r==null||!Zc(n)?!0:HDe(r,n)}var C2=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!an(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||KDe(u,n,r)?String(c):null},zZ=(t,e,n,r,i,a,s,o)=>{if(!(a==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var f=i?.[Number(a)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},LZ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},W0=t=>t.options.tooltipPayloadSearcher,qp=t=>t.tooltip;function NU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(n),!0).forEach(function(r){WDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WDe(t,e,n){return(e=YDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YDe(t){var e=XDe(t,"string");return typeof e=="symbol"?e:e+""}function XDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QDe(t,e){return t??e}var VZ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,m)=>{var b,{dataDefinedOnItem:x,settings:w}=m,S=QDe(x,o),T=Array.isArray(S)?bX(S,u,f):S,I=(b=w?.dataKey)!==null&&b!==void 0?b:r,R=w?.nameKey,O;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?O=J_e(T,r,i):O=a(T,e,c,R),Array.isArray(O))O.forEach(k=>{var P=MU(MU({},w),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});g.push(B6({tooltipEntrySettings:P,dataKey:k.dataKey,payload:k.payload,value:hn(k.payload,k.dataKey),name:k.name}))});else{var D;g.push(B6({tooltipEntrySettings:w,dataKey:I,payload:O,value:hn(O,I),name:(D=hn(O,R))!==null&&D!==void 0?D:w?.name}))}return g},h)}},I2=ye([Sr,Nt,sZ,ZN,_r],yZ),ZDe=ye([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),JDe=ye([_r,Fp],s2),Gp=ye([ZDe,Sr,JDe],l2,{memoizeOptions:{resultEqualityCheck:TS}}),eOe=ye([Gp],t=>t.filter(SS)),tOe=ye([Gp],c2,{memoizeOptions:{resultEqualityCheck:TS}}),Hp=ye([tOe,Nl],u2),nOe=ye([eOe,Nl,Sr],rZ),k2=ye([Hp,Sr,Gp],f2),BZ=ye([Sr],h2),rOe=ye([Sr],t=>t.allowDataOverflow),FZ=ye([BZ,rOe],NQ),iOe=ye([Gp],t=>t.filter(SS)),aOe=ye([nOe,iOe,U0,XQ],uZ),sOe=ye([aOe,Nl,_r,FZ],dZ),oOe=ye([Gp],lZ),lOe=ye([Hp,Sr,oOe,CS,_r],m2,{memoizeOptions:{resultEqualityCheck:ES}}),cOe=ye([fZ,_r,Fp],Up),uOe=ye([cOe,_r],gZ),dOe=ye([hZ,_r,Fp],Up),fOe=ye([dOe,_r],mZ),hOe=ye([pZ,_r,Fp],Up),pOe=ye([hOe,_r],vZ),gOe=ye([uOe,pOe,fOe],k1),mOe=ye([Sr,BZ,FZ,sOe,lOe,gOe,Nt,_r],v2),Y0=ye([Sr,Nt,Hp,k2,U0,_r,mOe],y2),vOe=ye([Y0,Sr,I2],w2),yOe=ye([Sr,Y0,vOe,_r],S2),UZ=t=>{var e=_r(t),n=Fp(t),r=!1;return K0(t,e,n,r)},$Z=ye([Sr,UZ],wS),qZ=ye([Sr,I2,yOe,$Z],x2),bOe=ye([Nt,k2,Sr,_r],TZ),xOe=ye([Nt,k2,Sr,_r],AZ),wOe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=Qd(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Dr(i[0]-i[1])*2*h:h,u&&s?s.map((g,m)=>({coordinate:r(g)+h,value:g,index:m,offset:h})):r.domain().map((g,m)=>({coordinate:r(g)+h,value:a?a[g]:g,index:m,offset:h}))}}},Ml=ye([Nt,Sr,I2,qZ,UZ,bOe,xOe,_r],wOe),P2=ye([IZ,kZ,PDe],(t,e,n)=>PZ(n.shared,t,e)),GZ=t=>t.tooltip.settings.trigger,D2=t=>t.tooltip.settings.defaultIndex,X0=ye([qp,P2,GZ,D2],jZ),Fd=ye([X0,Hp,H0,Y0],C2),HZ=ye([Ml,Fd],DZ),O2=ye([X0],t=>{if(t)return t.dataKey}),_Oe=ye([X0],t=>{if(t)return t.graphicalItemId}),KZ=ye([qp,P2,GZ,D2],LZ),SOe=ye([Dl,Ol,Nt,xr,Ml,D2,KZ,W0],zZ),EOe=ye([X0,SOe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),TOe=ye([X0],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),AOe=ye([KZ,Fd,Nl,H0,HZ,W0,P2],VZ);ye([AOe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function jU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(n),!0).forEach(function(r){COe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function COe(t,e,n){return(e=IOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IOe(t){var e=kOe(t,"string");return typeof e=="symbol"?e:e+""}function kOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var POe=()=>qe(Sr),DOe=()=>{var t=POe(),e=qe(Ml),n=qe(qZ);return l1(!t||!n?void 0:zU(zU({},t),{},{scale:n}),e)};function LU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(n),!0).forEach(function(r){OOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OOe(t,e,n){return(e=ROe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ROe(t){var e=NOe(t,"string");return typeof e=="symbol"?e:e+""}function NOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MOe=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},jOe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return rh(rh(rh({},r),or(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return rh(rh(rh({},r),or(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function zOe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var WZ=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,m=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(m==null||b==null||x==null))if(Dr(b-m)!==Dr(x-b)){var S=[];if(Dr(x-b)===Dr(i[1]-i[0])){w=x;var T=b+i[1]-i[0];S[0]=Math.min(T,(T+m)/2),S[1]=Math.max(T,(T+m)/2)}else{w=m;var I=x+i[1]-i[0];S[0]=Math.min(b,(I+b)/2),S[1]=Math.max(b,(I+b)/2)}var R=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>R[0]&&t<=R[1]||t>=S[0]&&t<=S[1]){var O;return(O=n[o])===null||O===void 0?void 0:O.index}}else{var D=Math.min(m,x),k=Math.max(m,x);if(t>(D+b)/2&&t<=(k+b)/2){var P;return(P=n[o])===null||P===void 0?void 0:P.index}}}else if(e)for(var N=0;N<s;N++){var z=e[N];if(z!=null){var L=e[N+1],B=e[N-1];if(N===0&&L!=null&&t<=(z.coordinate+L.coordinate)/2||N===s-1&&B!=null&&t>(z.coordinate+B.coordinate)/2||N>0&&N<s-1&&B!=null&&L!=null&&t>(z.coordinate+B.coordinate)/2&&t<=(z.coordinate+L.coordinate)/2)return z.index}}return-1},LOe=()=>qe(ZN),R2=(t,e)=>e,YZ=(t,e,n)=>n,N2=(t,e,n,r)=>r,VOe=ye(Ml,t=>G_(t,e=>e.coordinate)),M2=ye([qp,R2,YZ,N2],jZ),j2=ye([M2,Hp,H0,Y0],C2),BOe=(t,e,n)=>{if(e!=null){var r=qp(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},XZ=ye([qp,R2,YZ,N2],LZ),P1=ye([Dl,Ol,Nt,xr,Ml,N2,XZ,W0],zZ),FOe=ye([M2,P1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),QZ=ye([Ml,j2],DZ),UOe=ye([XZ,j2,Nl,H0,QZ,W0,R2],VZ),$Oe=ye([M2,j2],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),qOe=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&zOe(t,s)){var o=ATe(t,e),c=WZ(o,a,i,n,r),u=MOe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},GOe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=ICe(t,n);if(o){var c=CTe(o,e),u=WZ(c,s,a,r,i),f=jOe(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},HOe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?qOe(t,e,r,i,a,s,o):GOe(t,e,n,r,i,a,s)},KOe=ye(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),WOe=ye(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Or)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:DPe}});function VU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VU(Object(n),!0).forEach(function(r){YOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YOe(t,e,n){return(e=XOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XOe(t){var e=QOe(t,"string");return typeof e=="symbol"?e:e+""}function QOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZOe={},JOe={zIndexMap:Object.values(Or).reduce((t,e)=>BU(BU({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),ZOe)},eRe=new Set(Object.values(Or));function tRe(t){return eRe.has(t)}var ZZ=Li({name:"zIndex",initialState:JOe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:xn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!tRe(n)&&delete t.zIndexMap[n])},prepare:xn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:xn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:xn()}}}),{registerZIndexPortal:nRe,unregisterZIndexPortal:rRe,registerZIndexPortalElement:iRe,unregisterZIndexPortalElement:aRe}=ZZ.actions,sRe=ZZ.reducer;function Ya(t){var{zIndex:e,children:n}=t,r=rAe(),i=r&&e!==void 0&&e!==0,a=bi(),s=pn();A.useLayoutEffect(()=>i?(s(nRe({zIndex:e})),()=>{s(rRe({zIndex:e}))}):D0,[s,e,i]);var o=qe(c=>KOe(c,e,a));return i?o?T8.createPortal(n,o):null:n}function nD(){return nD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nD.apply(null,arguments)}function FU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(n),!0).forEach(function(r){oRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oRe(t,e,n){return(e=lRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lRe(t){var e=cRe(t,"string");return typeof e=="symbol"?e:e+""}function cRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uRe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function dRe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,m=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=UAe,w=Or.cursorLine;else if(f==="BarChart")b=$Ae(o,h,a,s),x=KX,w=Or.cursorRectangle;else if(o==="radial"&&PY(h)){var{cx:S,cy:T,radius:I,startAngle:R,endAngle:O}=YX(h);b={cx:S,cy:T,startAngle:R,endAngle:O,innerRadius:I,outerRadius:I},x=QX,w=Or.cursorLine}else b={points:OCe(o,h,a)},x=AN,w=Or.cursorLine;var D=typeof c=="object"&&"className"in c?c.className:void 0,k=gx(gx(gx(gx({stroke:"#ccc",pointerEvents:"none"},a),b),kv(c)),{},{payload:g,payloadIndex:m,className:Ht("recharts-tooltip-cursor",D)});return A.createElement(Ya,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(uRe,{cursor:c,cursorComp:x,cursorProps:k}))}function fRe(t){var e=DOe(),n=kX(),r=j0(),i=LOe();return e==null||n==null||r==null||i==null?null:A.createElement(dRe,nD({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var JZ=A.createContext(null),hRe=()=>A.useContext(JZ),gI={exports:{}},UU;function pRe(){return UU||(UU=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,m=h.length,b=new Array(m);g<m;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,m,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],S=arguments.length,T,I;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,m),!0;case 6:return w.fn.call(w.context,f,h,g,m,b),!0}for(I=1,T=new Array(S-1);I<S;I++)T[I-1]=arguments[I];w.fn.apply(w.context,T)}else{var R=w.length,O;for(I=0;I<R;I++)switch(w[I].once&&this.removeListener(u,w[I].fn,void 0,!0),S){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,f);break;case 3:w[I].fn.call(w[I].context,f,h);break;case 4:w[I].fn.call(w[I].context,f,h,g);break;default:if(!T)for(O=1,T=new Array(S-1);O<S;O++)T[O-1]=arguments[O];w[I].fn.apply(w[I].context,T)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var m=n?n+u:u;if(!this._events[m])return this;if(!f)return s(this,m),this;var b=this._events[m];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,m);else{for(var x=0,w=[],S=b.length;x<S;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[m]=w.length===1?w[0]:w:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(gI)),gI.exports}var gRe=pRe();const mRe=Cl(gRe);var $v=new mRe,rD="recharts.syncEvent.tooltip",$U="recharts.syncEvent.brush";function eJ(t,e){if(e){var n=Number.parseInt(e,10);if(!da(n))return t?.[n]}}var vRe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},tJ=Li({name:"options",initialState:vRe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),yRe=tJ.reducer,{createEventEmitter:bRe}=tJ.actions;function xRe(t){return t.tooltip.syncInteraction}var wRe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},nJ=Li({name:"chartData",initialState:wRe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:qU,setDataStartEndIndexes:_Re,setComputedData:JLe}=nJ.actions,SRe=nJ.reducer,ERe=["x","y"];function GU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ih(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(n),!0).forEach(function(r){TRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TRe(t,e,n){return(e=ARe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ARe(t){var e=CRe(t,"string");return typeof e=="symbol"?e:e+""}function CRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IRe(t,e){if(t==null)return{};var n,r,i=kRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function PRe(){var t=qe(JN),e=qe(e2),n=pn(),r=qe(QQ),i=qe(Ml),a=j0(),s=M0(),o=qe(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return D0;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var m=f.payload.coordinate,{x:b,y:x}=m,w=IRe(m,ERe),{x:S,y:T,width:I,height:R}=f.payload.sourceViewBox,O=ih(ih({},w),{},{x:s.x+(I?(b-S)/I:0)*s.width,y:s.y+(R?(x-T)/R:0)*s.height});n(ih(ih({},f),{},{payload:ih(ih({},f.payload),{},{coordinate:O})}))}else n(f);return}if(i!=null){var D;if(typeof r=="function"){var k={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},P=r(i,k);D=i[P]}else r==="value"&&(D=i.find(q=>String(q.value)===f.payload.label));var{coordinate:N}=f.payload;if(D==null||f.payload.active===!1||N==null||s==null){n(eD({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:L}=N,B=Math.min(z,s.x+s.width),j=Math.min(L,s.y+s.height),W={x:a==="horizontal"?D.coordinate:B,y:a==="horizontal"?j:D.coordinate},Q=eD({active:f.payload.active,coordinate:W,dataKey:f.payload.dataKey,index:String(D.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Q)}}};return $v.on(rD,c),()=>{$v.off(rD,c)}},[o,n,e,t,r,i,a,s])}function DRe(){var t=qe(JN),e=qe(e2),n=pn();A.useEffect(()=>{if(t==null)return D0;var r=(i,a,s)=>{e!==s&&t===i&&n(_Re(a))};return $v.on($U,r),()=>{$v.off($U,r)}},[n,e,t])}function ORe(){var t=pn();A.useEffect(()=>{t(bRe())},[t]),PRe(),DRe()}function RRe(t,e,n,r,i,a){var s=qe(m=>BOe(m,t,e)),o=qe(e2),c=qe(JN),u=qe(QQ),f=qe(xRe),h=f?.active,g=M0();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var m=eD({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});$v.emit(rD,c,m,o)}},[h,n,s,i,r,o,c,u,a,g])}function HU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HU(Object(n),!0).forEach(function(r){NRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NRe(t,e,n){return(e=MRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MRe(t){var e=jRe(t,"string");return typeof e=="symbol"?e:e+""}function jRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zRe(t){return t.dataKey}function LRe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(wAe,e)}var WU=[],VRe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function PS(t){var e,n,r=Kr(t,VRe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:m,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:S,shared:T,trigger:I,defaultIndex:R,portal:O,axisId:D}=r,k=pn(),P=typeof R=="number"?String(R):R;A.useEffect(()=>{k(MDe({shared:T,trigger:I,axisId:D,active:i,defaultIndex:P}))},[k,T,I,D,i,P]);var N=M0(),z=UX(),L=kDe(T),{activeIndex:B,isActive:j}=(e=qe(oe=>$Oe(oe,L,I,P)))!==null&&e!==void 0?e:{},W=qe(oe=>UOe(oe,L,I,P)),Q=qe(oe=>QZ(oe,L,I,P)),q=qe(oe=>FOe(oe,L,I,P)),Y=W,Z=hRe(),ie=(n=i??j)!==null&&n!==void 0?n:!1,[J,U]=uEe([Y,ie]),X=L==="axis"?Q:void 0;RRe(L,I,q,X,B,ie);var te=O??Z;if(te==null||N==null||L==null)return null;var K=Y??WU;ie||(K=WU),u&&K.length&&(K=jSe(K.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),g,zRe));var ce=K.length>0,ae=A.createElement(IAe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ie,coordinate:q,hasPayload:ce,offset:h,position:m,reverseDirection:b,useTranslate3d:x,viewBox:N,wrapperStyle:w,lastBoundingBox:J,innerRef:U,hasPortalFromProps:!!O},LRe(c,KU(KU({},r),{},{payload:K,label:X,active:ie,activeIndex:B,coordinate:q,accessibilityLayer:z})));return A.createElement(A.Fragment,null,T8.createPortal(ae,te),ie&&A.createElement(fRe,{cursor:S,tooltipEventType:L,coordinate:q,payload:K,index:B}))}var Q0=t=>null;Q0.displayName="Cell";function BRe(t,e,n){return(e=FRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FRe(t){var e=URe(t,"string");return typeof e=="symbol"?e:e+""}function URe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $Re{constructor(e){BRe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function YU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qRe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(n),!0).forEach(function(r){GRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GRe(t,e,n){return(e=HRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HRe(t){var e=KRe(t,"string");return typeof e=="symbol"?e:e+""}function KRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WRe={cacheSize:2e3,enableCache:!0},rJ=qRe({},WRe),XU=new $Re(rJ.cacheSize),YRe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},QU="recharts_measurement_span";function XRe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var ZU=(t,e)=>{try{var n=document.getElementById(QU);n||(n=document.createElement("span"),n.setAttribute("id",QU),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,YRe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Hm=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||dS.isSsr)return{width:0,height:0};if(!rJ.enableCache)return ZU(e,n);var r=XRe(e,n),i=XU.get(r);if(i)return i;var a=ZU(e,n);return XU.set(r,a),a},iJ;function QRe(t,e,n){return(e=ZRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZRe(t){var e=JRe(t,"string");return typeof e=="symbol"?e:e+""}function JRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,e9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eNe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tNe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nNe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},rNe=["cm","mm","pt","pc","in","Q","px"];function iNe(t){return rNe.includes(t)}var Th="NaN";function aNe(t,e){return t*nNe[e]}class Gr{static parse(e){var n,[,r,i]=(n=tNe.exec(e))!==null&&n!==void 0?n:[];return r==null?Gr.NaN:new Gr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,da(e)&&(this.unit=""),n!==""&&!eNe.test(n)&&(this.num=NaN,this.unit=""),iNe(n)&&(this.num=aNe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Gr(NaN,""):new Gr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Gr(NaN,""):new Gr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Gr(NaN,""):new Gr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Gr(NaN,""):new Gr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return da(this.num)}}iJ=Gr;QRe(Gr,"NaN",new iJ(NaN,""));function aJ(t){if(t==null||t.includes(Th))return Th;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=JU.exec(e))!==null&&n!==void 0?n:[],s=Gr.parse(r??""),o=Gr.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Th;e=e.replace(JU,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=e9.exec(e))!==null&&u!==void 0?u:[],m=Gr.parse(f??""),b=Gr.parse(g??""),x=h==="+"?m.add(b):m.subtract(b);if(x.isNaN())return Th;e=e.replace(e9,x.toString())}return e}var t9=/\(([^()]*)\)/;function sNe(t){for(var e=t,n;(n=t9.exec(e))!=null;){var[,r]=n;e=e.replace(t9,aJ(r))}return e}function oNe(t){var e=t.replace(/\s+/g,"");return e=sNe(e),e=aJ(e),e}function lNe(t){try{return oNe(t)}catch{return Th}}function mI(t){var e=lNe(t.slice(5,-1));return e===Th?"":e}var cNe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],uNe=["dx","dy","angle","className","breakAll"];function iD(){return iD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iD.apply(null,arguments)}function n9(t,e){if(t==null)return{};var n,r,i=dNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function dNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sJ=/[ \f\n\r\t\v\u2028\u2029]+/,oJ=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Rr(e)||(n?i=e.toString().split(""):i=e.toString().split(sJ));var a=i.map(o=>({word:o,width:Hm(o,r).width})),s=n?0:Hm("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function fNe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var lJ=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),cJ=t=>t.reduce((e,n)=>e.width>n.width?e:n),hNe="",r9=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=oJ({breakAll:n,style:r,children:c+hNe});if(!u)return[!1,[]];var f=lJ(u.wordsWithComputedWidth,a,s,o),h=f.length>i||cJ(f).width>Number(a);return[h,f]},pNe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=We(a),f=String(s),h=lJ(e,r,n,i);if(!u||i)return h;var g=h.length>a||cJ(h).width>Number(r);if(!g)return h;for(var m=0,b=f.length-1,x=0,w;m<=b&&x<=f.length-1;){var S=Math.floor((m+b)/2),T=S-1,[I,R]=r9(f,T,c,o,a,r,n,i),[O]=r9(f,S,c,o,a,r,n,i);if(!I&&!O&&(m=S+1),I&&O&&(b=S-1),!I&&O){w=R;break}x++}return w||h},i9=t=>{var e=Rr(t)?[]:t.toString().split(sJ);return[{words:e,width:void 0}]},gNe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!dS.isSsr){var o,c,u=oJ({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return i9(r);return pNe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return i9(r)},uJ="#808080",mNe={angle:0,breakAll:!1,capHeight:"0.71em",fill:uJ,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},DS=A.forwardRef((t,e)=>{var n=Kr(t,mNe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=n9(n,cNe),g=A.useMemo(()=>gNe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:m,dy:b,angle:x,className:w,breakAll:S}=h,T=n9(h,uNe);if(!Ua(r)||!Ua(i)||g.length===0)return null;var I=Number(r)+(We(m)?m:0),R=Number(i)+(We(b)?b:0);if(!an(I)||!an(R))return null;var O;switch(f){case"start":O=mI("calc(".concat(s,")"));break;case"middle":O=mI("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:O=mI("calc(".concat(g.length-1," * -").concat(a,")"));break}var D=[];if(c){var k=g[0].width,{width:P}=h;D.push("scale(".concat(We(P)&&We(k)?P/k:1,")"))}return x&&D.push("rotate(".concat(x,", ").concat(I,", ").concat(R,")")),D.length&&(T.transform=D.join(" ")),A.createElement("text",iD({},ua(T),{ref:e,x:I,y:R,className:Ht("recharts-text",w),textAnchor:u,fill:o.includes("url")?uJ:o}),g.map((N,z)=>{var L=N.words.join(S?"":" ");return A.createElement("tspan",{x:I,dy:z===0?O:a,key:"".concat(L,"-").concat(z)},L)}))});DS.displayName="Text";var vNe=["labelRef"],yNe=["content"];function a9(t,e){if(t==null)return{};var n,r,i=bNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function s9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s9(Object(n),!0).forEach(function(r){xNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xNe(t,e,n){return(e=wNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wNe(t){var e=_Ne(t,"string");return typeof e=="symbol"?e:e+""}function _Ne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yo(){return Yo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yo.apply(null,arguments)}var dJ=A.createContext(null),fJ=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(dJ.Provider,{value:c},o)},hJ=()=>{var t=A.useContext(dJ),e=M0();return t||IX(e)},SNe=A.createContext(null),ENe=()=>{var t=A.useContext(SNe),e=qe(nZ);return t||e},TNe=t=>{var{value:e,formatter:n}=t,r=Rr(t.children)?e:t.children;return typeof n=="function"?n(r):r},z2=t=>t!=null&&typeof t=="function",ANe=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},CNe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:m}=i,b=(u+f)/2,x=ANe(h,g),w=x>=0?1:-1,S,T;switch(e){case"insideStart":S=h+w*a,T=m;break;case"insideEnd":S=g-w*a,T=!m;break;case"end":S=g+w*a,T=m;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var I=or(o,c,b,S),R=or(o,c,b,S+(T?1:-1)*359),O="M".concat(I.x,",").concat(I.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(R.x,",").concat(R.y),D=Rr(t.id)?Pv("recharts-radial-line-"):t.id;return A.createElement("text",Yo({},r,{dominantBaseline:"central",className:Ht("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:D,d:O})),A.createElement("textPath",{xlinkHref:"#".concat(D)},n))},INe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=or(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:m,y:b}=or(r,i,g,u);return{x:m,y:b,textAnchor:"middle",verticalAnchor:"middle"}},aD=t=>"cx"in t&&We(t.cx),kNe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!aD(n)&&(a=n);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:f}=e,h=s,g=s+(c-u)/2,m=(h+g)/2,b=(c+u)/2,x=h+c/2,w=f>=0?1:-1,S=w*r,T=w>0?"end":"start",I=w>0?"start":"end",R=c>=0?1:-1,O=R*r,D=R>0?"end":"start",k=R>0?"start":"end";if(i==="top"){var P={x:h+c/2,y:o-S,textAnchor:"middle",verticalAnchor:T};return $n($n({},P),a?{height:Math.max(o-a.y,0),width:c}:{})}if(i==="bottom"){var N={x:g+u/2,y:o+f+S,textAnchor:"middle",verticalAnchor:I};return $n($n({},N),a?{height:Math.max(a.y+a.height-(o+f),0),width:u}:{})}if(i==="left"){var z={x:m-O,y:o+f/2,textAnchor:D,verticalAnchor:"middle"};return $n($n({},z),a?{width:Math.max(z.x-a.x,0),height:f}:{})}if(i==="right"){var L={x:m+b+O,y:o+f/2,textAnchor:k,verticalAnchor:"middle"};return $n($n({},L),a?{width:Math.max(a.x+a.width-L.x,0),height:f}:{})}var B=a?{width:b,height:f}:{};return i==="insideLeft"?$n({x:m+O,y:o+f/2,textAnchor:k,verticalAnchor:"middle"},B):i==="insideRight"?$n({x:m+b-O,y:o+f/2,textAnchor:D,verticalAnchor:"middle"},B):i==="insideTop"?$n({x:h+c/2,y:o+S,textAnchor:"middle",verticalAnchor:I},B):i==="insideBottom"?$n({x:g+u/2,y:o+f-S,textAnchor:"middle",verticalAnchor:T},B):i==="insideTopLeft"?$n({x:h+O,y:o+S,textAnchor:k,verticalAnchor:I},B):i==="insideTopRight"?$n({x:h+c-O,y:o+S,textAnchor:D,verticalAnchor:I},B):i==="insideBottomLeft"?$n({x:g+O,y:o+f-S,textAnchor:k,verticalAnchor:T},B):i==="insideBottomRight"?$n({x:g+u-O,y:o+f-S,textAnchor:D,verticalAnchor:T},B):i&&typeof i=="object"&&(We(i.x)||xl(i.x))&&(We(i.y)||xl(i.y))?$n({x:s+ri(i.x,b),y:o+ri(i.y,f),textAnchor:"end",verticalAnchor:"end"},B):$n({x,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},PNe={angle:0,offset:5,zIndex:Or.label,position:"middle",textBreakAll:!1};function _c(t){var e=Kr(t,PNe),{viewBox:n,position:r,value:i,children:a,content:s,className:o="",textBreakAll:c,labelRef:u}=e,f=ENe(),h=hJ(),g=r==="center"?h:f??h,m,b,x;if(n==null?m=g:aD(n)?m=n:m=IX(n),!m||Rr(i)&&Rr(a)&&!A.isValidElement(s)&&typeof s!="function")return null;var w=$n($n({},e),{},{viewBox:m});if(A.isValidElement(s)){var{labelRef:S}=w,T=a9(w,vNe);return A.cloneElement(s,T)}if(typeof s=="function"){var{content:I}=w,R=a9(w,yNe);if(b=A.createElement(s,R),A.isValidElement(b))return b}else b=TNe(e);var O=ua(e);if(aD(m)){if(r==="insideStart"||r==="insideEnd"||r==="end")return CNe(e,r,b,O,m);x=INe(m,e.offset,e.position)}else x=kNe(e,m);return A.createElement(Ya,{zIndex:e.zIndex},A.createElement(DS,Yo({ref:u,className:Ht("recharts-label",o)},O,x,{textAnchor:fNe(O.textAnchor)?O.textAnchor:x.textAnchor,breakAll:c}),b))}_c.displayName="Label";var DNe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(_c,Yo({key:"label-implicit"},r)):Ua(t)?A.createElement(_c,Yo({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===_c?A.cloneElement(t,$n({key:"label-implicit"},r)):A.createElement(_c,Yo({key:"label-implicit",content:t},r)):z2(t)?A.createElement(_c,Yo({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(_c,Yo({},t,{key:"label-implicit"},r)):null};function pJ(t){var{label:e,labelRef:n}=t,r=hJ();return DNe(e,r,n)||null}var vI={},yI={},o9;function ONe(){return o9||(o9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(yI)),yI}var bI={},l9;function RNe(){return l9||(l9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(bI)),bI}var c9;function NNe(){return c9||(c9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ONe(),n=RNe(),r=pN();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(vI)),vI}var xI,u9;function MNe(){return u9||(u9=1,xI=NNe().last),xI}var jNe=MNe();const zNe=Cl(jNe);var LNe=["valueAccessor"],VNe=["dataKey","clockWise","id","textBreakAll","zIndex"];function D1(){return D1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D1.apply(null,arguments)}function d9(t,e){if(t==null)return{};var n,r,i=BNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var FNe=t=>Array.isArray(t.value)?zNe(t.value):t.value,gJ=A.createContext(void 0),UNe=gJ.Provider,mJ=A.createContext(void 0),$Ne=mJ.Provider;function qNe(){return A.useContext(gJ)}function GNe(){return A.useContext(mJ)}function Wx(t){var{valueAccessor:e=FNe}=t,n=d9(t,LNe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=d9(n,VNe),u=qNe(),f=GNe(),h=u||f;return!h||!h.length?null:A.createElement(Ya,{zIndex:o??Or.label},A.createElement(ai,{className:"recharts-label-list"},h.map((g,m)=>{var b,x=Rr(r)?e(g,m):hn(g&&g.payload,r),w=Rr(a)?{}:{id:"".concat(a,"-").concat(m)};return A.createElement(_c,D1({key:"label-".concat(m)},ua(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:m,zIndex:0}))})))}Wx.displayName="LabelList";function vJ(t){var{label:e}=t;return e?e===!0?A.createElement(Wx,{key:"labelList-implicit"}):A.isValidElement(e)||z2(e)?A.createElement(Wx,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(Wx,D1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var yJ=t=>t.graphicalItems.polarItems,HNe=ye([En,$0],s2),OS=ye([yJ,Dn,HNe],l2),KNe=ye([OS],c2),RS=ye([KNe,xS],u2),WNe=ye([RS,Dn,OS],f2);ye([RS,Dn,OS],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=hn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:hn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var f9=()=>{},YNe=ye([RS,Dn,OS,CS,En],m2),XNe=ye([Dn,p2,g2,f9,YNe,f9,Nt,En],v2),bJ=ye([Dn,Nt,RS,WNe,U0,En,XNe],y2),QNe=ye([bJ,Dn,$p],w2);ye([Dn,bJ,QNe,En],S2);var ZNe={radiusAxis:{},angleAxis:{}},xJ=Li({name:"polarAxis",initialState:ZNe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:e3e,removeRadiusAxis:t3e,addAngleAxis:n3e,removeAngleAxis:r3e}=xJ.actions,JNe=xJ.reducer;function h9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function p9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h9(Object(n),!0).forEach(function(r){e2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e2e(t,e,n){return(e=t2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t2e(t){var e=n2e(t,"string");return typeof e=="symbol"?e:e+""}function n2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r2e=(t,e)=>e,L2=ye([yJ,r2e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),i2e=[],V2=(t,e,n)=>n?.length===0?i2e:n,wJ=ye([xS,L2,V2],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>p9(p9({},e.presentationProps),a.props))),i!=null)return i}}),a2e=ye([wJ,L2,V2],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=hn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:tS(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),s2e=ye([wJ,L2,V2,xr],(t,e,n,r)=>{if(!(e==null||t==null))return uMe({offset:r,pieSettings:e,displayedData:t,cells:n})}),wI={exports:{}},Zt={};var g9;function o2e(){if(g9)return Zt;g9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return Zt.ContextConsumer=a,Zt.ContextProvider=s,Zt.Element=t,Zt.ForwardRef=o,Zt.Fragment=n,Zt.Lazy=h,Zt.Memo=f,Zt.Portal=e,Zt.Profiler=i,Zt.StrictMode=r,Zt.Suspense=c,Zt.SuspenseList=u,Zt.isContextConsumer=function(x){return b(x)===a},Zt.isContextProvider=function(x){return b(x)===s},Zt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Zt.isForwardRef=function(x){return b(x)===o},Zt.isFragment=function(x){return b(x)===n},Zt.isLazy=function(x){return b(x)===h},Zt.isMemo=function(x){return b(x)===f},Zt.isPortal=function(x){return b(x)===e},Zt.isProfiler=function(x){return b(x)===i},Zt.isStrictMode=function(x){return b(x)===r},Zt.isSuspense=function(x){return b(x)===c},Zt.isSuspenseList=function(x){return b(x)===u},Zt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===m||x.getModuleId!==void 0)},Zt.typeOf=b,Zt}var m9;function l2e(){return m9||(m9=1,wI.exports=o2e()),wI.exports}var c2e=l2e(),v9=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",y9=null,_I=null,_J=t=>{if(t===y9&&Array.isArray(_I))return _I;var e=[];return A.Children.forEach(t,n=>{Rr(n)||(c2e.isFragment(n)?e=e.concat(_J(n.props.children)):e.push(n))}),_I=e,y9=t,e};function B2(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>v9(i)):r=[v9(e)],_J(t).forEach(i=>{var a=jd(i,"type.displayName")||jd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var SI={},b9;function u2e(){return b9||(b9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(SI)),SI}var EI,x9;function d2e(){return x9||(x9=1,EI=u2e().isPlainObject),EI}var f2e=d2e();const h2e=Cl(f2e);var w9,_9,S9,E9,T9;function A9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A9(Object(n),!0).forEach(function(r){p2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p2e(t,e,n){return(e=g2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g2e(t){var e=m2e(t,"string");return typeof e=="symbol"?e:e+""}function m2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O1(){return O1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O1.apply(null,arguments)}function cm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var I9=(t,e,n,r,i)=>{var a=n-r,s;return s=Mn(w9||(w9=cm(["M ",",",""])),t,e),s+=Mn(_9||(_9=cm(["L ",",",""])),t+n,e),s+=Mn(S9||(S9=cm(["L ",",",""])),t+n-a/2,e+i),s+=Mn(E9||(E9=cm(["L ",",",""])),t+n-a/2-r,e+i),s+=Mn(T9||(T9=cm(["L ",","," Z"])),t,e),s},v2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},y2e=t=>{var e=Kr(t,v2e),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[m,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),S=A.useRef(s),T=A.useRef(n),I=A.useRef(r),R=hS(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var W=g.current.getTotalLength();W&&b(W)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var O=Ht("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",O1({},ua(e),{className:O,d:I9(n,r,i,a,s)})));var D=x.current,k=w.current,P=S.current,N=T.current,z=I.current,L="0px ".concat(m===-1?1:m,"px"),B="".concat(m,"px 0px"),j=$X(["strokeDasharray"],u,c);return A.createElement(fS,{animationId:R,key:R,canBegin:m>0,duration:u,easing:c,isActive:h,begin:f},W=>{var Q=fr(D,i,W),q=fr(k,a,W),Y=fr(P,s,W),Z=fr(N,n,W),ie=fr(z,r,W);g.current&&(x.current=Q,w.current=q,S.current=Y,T.current=Z,I.current=ie);var J=W>0?{transition:j,strokeDasharray:B}:{strokeDasharray:L};return A.createElement("path",O1({},ua(e),{className:O,d:I9(Z,ie,Q,q,Y),ref:g,style:C9(C9({},J),e.style)}))})},b2e=["option","shapeType","activeClassName"];function x2e(t,e){if(t==null)return{};var n,r,i=w2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function k9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(n),!0).forEach(function(r){_2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _2e(t,e,n){return(e=S2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S2e(t){var e=E2e(t,"string");return typeof e=="symbol"?e:e+""}function E2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T2e(t,e){return R1(R1({},e),t)}function A2e(t,e){return t==="symbols"}function P9(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(KX,n);case"trapezoid":return A.createElement(y2e,n);case"sector":return A.createElement(QX,n);case"symbols":if(A2e(e))return A.createElement(kY,n);break;case"curve":return A.createElement(AN,n);default:return null}}function C2e(t){return A.isValidElement(t)?t.props:t}function SJ(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=x2e(t,b2e),a;if(A.isValidElement(e))a=A.cloneElement(e,R1(R1({},i),C2e(e)));else if(typeof e=="function")a=e(i,i.index);else if(h2e(e)&&typeof e!="boolean"){var s=T2e(e,i);a=A.createElement(P9,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(P9,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(ai,{className:r},a):a}var F2=(t,e,n)=>{var r=pn();return(i,a)=>s=>{t?.(i,a,s),r(RZ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},U2=t=>{var e=pn();return(n,r)=>i=>{t?.(n,r,i),e(jDe())}},$2=(t,e,n)=>{var r=pn();return(i,a)=>s=>{t?.(i,a,s),r(zDe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function EJ(t){var{tooltipEntrySettings:e}=t,n=pn(),r=bi(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(ODe(e)):i.current!==e&&n(RDe({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(NDe(i.current)),i.current=null)},[n]),null}function I2e(t){var{legendPayload:e}=t,n=pn(),r=bi(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(VX(e)):i.current!==e&&n(BX({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(FX(i.current)),i.current=null)},[n]),null}function k2e(t){var{legendPayload:e}=t,n=pn(),r=qe(Nt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(VX(e)):i.current!==e&&n(BX({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(FX(i.current)),i.current=null)},[n]),null}var TI,P2e=()=>{var[t]=A.useState(()=>Pv("uid-"));return t},D2e=(TI=Ute.useId)!==null&&TI!==void 0?TI:P2e;function O2e(t,e){var n=D2e();return e||(t?"".concat(t,"-").concat(n):n)}var R2e=A.createContext(void 0),TJ=t=>{var{id:e,type:n,children:r}=t,i=O2e("recharts-".concat(n),e);return A.createElement(R2e.Provider,{value:i},r(i))},N2e={cartesianItems:[],polarItems:[]},AJ=Li({name:"graphicalItems",initialState:N2e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:xn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=xs(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:xn()},removeCartesianGraphicalItem:{reducer(t,e){var n=xs(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:xn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:xn()},removePolarGraphicalItem:{reducer(t,e){var n=xs(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:xn()}}}),{addCartesianGraphicalItem:M2e,replaceCartesianGraphicalItem:j2e,removeCartesianGraphicalItem:z2e,addPolarGraphicalItem:L2e,removePolarGraphicalItem:V2e}=AJ.actions,B2e=AJ.reducer,F2e=t=>{var e=pn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(M2e(t)):n.current!==t&&e(j2e({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(z2e(n.current)),n.current=null)},[e]),null},U2e=A.memo(F2e);function $2e(t){var e=pn();return A.useLayoutEffect(()=>(e(L2e(t)),()=>{e(V2e(t))}),[e,t]),null}var q2e=["key"],G2e=["onMouseEnter","onClick","onMouseLeave"],H2e=["id"],K2e=["id"];function D9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(n),!0).forEach(function(r){W2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W2e(t,e,n){return(e=Y2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y2e(t){var e=X2e(t,"string");return typeof e=="symbol"?e:e+""}function X2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jc(){return Jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jc.apply(null,arguments)}function NS(t,e){if(t==null)return{};var n,r,i=Q2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Q2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Z2e(t){var e=A.useMemo(()=>B2(t.children,Q0),[t.children]),n=qe(r=>a2e(r,t.id,e));return n==null?null:A.createElement(k2e,{legendPayload:n})}var J2e=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:tS(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return A.createElement(EJ,{tooltipEntrySettings:h})}),eMe=(t,e)=>t>e?"start":t<e?"end":"middle",tMe=(t,e,n)=>ri(typeof e=="function"?e(t):e,n,n*.8),nMe=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=WX(a,s),c=i+ri(t.cx,a,a/2),u=r+ri(t.cy,s,s/2),f=ri(t.innerRadius,o,0),h=tMe(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},rMe=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function iMe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var aMe=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Ht("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=NS(e,q2e);return A.createElement(AN,Jc({},i,{type:"linear",className:n}))},sMe=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Ht("recharts-pie-label-text",iMe(t));return A.createElement(DS,Jc({},e,{alignmentBaseline:"middle",className:i}),r)};function oMe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Es(n),c=kv(i),u=kv(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,m)=>{var b=(g.startAngle+g.endAngle)/2,x=or(g.cx,g.cy,g.outerRadius+f,b),w=jn(jn(jn(jn({},o),g),{},{stroke:"none"},c),{},{index:m,textAnchor:eMe(x.x,g.cx)},x),S=jn(jn(jn(jn({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:m,points:[or(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(Ya,{zIndex:Or.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(m)},A.createElement(ai,null,a&&aMe(a,S),sMe(i,w,hn(g,s))))});return A.createElement(ai,{className:"recharts-pie-labels"},h)}function lMe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(vJ,{label:i}):A.createElement(oMe,{sectors:e,props:n,showLabels:r})}function cMe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=qe(Fd),c=qe(O2),u=qe(_Oe),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,m=NS(i,G2e),b=F2(f,i.dataKey,s),x=U2(g),w=$2(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((S,T)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var I=u==null||u===s,R=String(T)===o&&(c==null||i.dataKey===c)&&I,O=o?r:null,D=n&&R?n:O,k=jn(jn({},S),{},{stroke:S.stroke,tabIndex:-1,[SX]:T,[EX]:s});return A.createElement(ai,Jc({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},q_(m,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),A.createElement(SJ,Jc({option:a??D,index:T,shapeType:"sector",isActive:R},k)))}))}function uMe(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),m=rMe(o,c),b=Math.abs(m),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(D=>hn(D,u,0)!==0).length,S=(b>=360?w:w-1)*x,T=b-w*g-S,I=r.reduce((D,k)=>{var P=hn(k,u,0);return D+(We(P)?P:0)},0),R;if(I>0){var O;R=r.map((D,k)=>{var P=hn(D,u,0),N=hn(D,f,k),z=nMe(n,a,D),L=(We(P)?P:0)/I,B,j=jn(jn({},D),i&&i[k]&&i[k].props);k?B=O.endAngle+Dr(m)*x*(P!==0?1:0):B=o;var W=B+Dr(m)*((P!==0?g:0)+L*T),Q=(B+W)/2,q=(z.innerRadius+z.outerRadius)/2,Y=[{name:N,value:P,payload:j,dataKey:u,type:h,graphicalItemId:n.id}],Z=or(z.cx,z.cy,q,Q);return O=jn(jn(jn(jn({},n.presentationProps),{},{percent:L,cornerRadius:typeof s=="string"?parseFloat(s):s,name:N,tooltipPayload:Y,midAngle:Q,middleRadius:q,tooltipPosition:Z},j),z),{},{value:P,dataKey:u,startAngle:B,endAngle:W,payload:j,paddingAngle:Dr(m)*x}),O})}return R}function dMe(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement($Ne,{value:e?i:void 0},r)}function fMe(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,m=hS(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),S=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement(dMe,{showLabels:!x,sectors:i},A.createElement(fS,{animationId:m,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:S,key:m},I=>{var R=[],O=i&&i[0],D=O?.startAngle;return i?.forEach((k,P)=>{var N=b&&b[P],z=P>0?jd(k,"paddingAngle",0):0;if(N){var L=fr(N.endAngle-N.startAngle,k.endAngle-k.startAngle,I),B=jn(jn({},k),{},{startAngle:D+z,endAngle:D+L+z});R.push(B),D=B.endAngle}else{var{endAngle:j,startAngle:W}=k,Q=fr(0,j-W,I),q=jn(jn({},k),{},{startAngle:D+z,endAngle:D+Q+z});R.push(q),D=q.endAngle}}),n.current=R,A.createElement(ai,null,A.createElement(cMe,{sectors:R,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(lMe,{showLabels:!x,sectors:i,props:e}),e.children)}var hMe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Or.area};function pMe(t){var{id:e}=t,n=NS(t,H2e),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>B2(t.children,Q0),[t.children]),o=qe(f=>s2e(f,e,s)),c=A.useRef(null),u=Ht("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(ai,{tabIndex:a,className:u})):A.createElement(Ya,{zIndex:t.zIndex},A.createElement(J2e,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(ai,{tabIndex:a,className:u},A.createElement(fMe,{props:jn(jn({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function CJ(t){var e=Kr(t,hMe),{id:n}=e,r=NS(e,K2e),i=Es(r);return A.createElement(TJ,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement($2e,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(Z2e,Jc({},r,{id:a})),A.createElement(pMe,Jc({},r,{id:a}))))}CJ.displayName="Pie";function O9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O9(Object(n),!0).forEach(function(r){gMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gMe(t,e,n){return(e=mMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mMe(t){var e=vMe(t,"string");return typeof e=="symbol"?e:e+""}function vMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IJ=0,yMe={xAxis:{},yAxis:{},zAxis:{}},kJ=Li({name:"cartesianAxis",initialState:yMe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:xn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:xn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:xn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:xn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:xn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:xn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:xn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:xn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:xn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=R9(R9({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:bMe,replaceXAxis:xMe,removeXAxis:wMe,addYAxis:_Me,replaceYAxis:SMe,removeYAxis:EMe,addZAxis:i3e,replaceZAxis:a3e,removeZAxis:s3e,updateYAxisWidth:TMe}=kJ.actions,AMe=kJ.reducer,CMe=ye([xr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),IMe=ye([CMe,Dl,Ol],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),PJ=()=>qe(IMe),N9=(t,e,n)=>{var r=n??t;if(!Rr(r))return ri(r,e,0)},kMe=(t,e,n)=>{var r={},i=t.filter(SS),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>(u[f.stackId]||(u[f.stackId]=[]),u[f.stackId].push(f),u),r),o=Object.entries(s).map(u=>{var[f,h]=u,g=h.map(b=>b.dataKey),m=N9(e,n,h[0].barSize);return{stackId:f,dataKeys:g,barSize:m}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=N9(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function M9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M9(Object(n),!0).forEach(function(r){PMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PMe(t,e,n){return(e=DMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DMe(t){var e=OMe(t,"string");return typeof e=="symbol"?e:e+""}function OMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RMe(t,e,n,r,i){var a=r.length;if(!(a<1)){var s=ri(t,n,0,!0),o,c=[];if(an(r[0].barSize)){var u=!1,f=n/a,h=r.reduce((S,T)=>S+(T.barSize||0),0);h+=(a-1)*s,h>=n&&(h-=(a-1)*s,s=0),h>=n&&f>0&&(u=!0,f*=.9,h=a*f);var g=(n-h)/2>>0,m={offset:g-s,size:0};o=r.reduce((S,T)=>{var I,R={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:m.offset+m.size+s,size:u?f:(I=T.barSize)!==null&&I!==void 0?I:0}},O=[...S,R];return m=O[O.length-1].position,O},c)}else{var b=ri(e,n,0,!0);n-2*b-(a-1)*s<=0&&(s=0);var x=(n-2*b-(a-1)*s)/a;x>1&&(x>>=0);var w=an(i)?Math.min(x,i):x;o=r.reduce((S,T,I)=>[...S,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b+(x+s)*I+(x-w)/2,size:w}}],c)}return o}}var NMe=(t,e,n,r,i,a,s)=>{var o=Rr(s)?e:s,c=RMe(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>mx(mx({},u),{},{position:mx(mx({},u.position),{},{offset:u.position.offset-i/2})}))),c},MMe=(t,e)=>{var n=i2(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}};function jMe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&an(t.zIndex)?t.zIndex:e}var DJ=t=>{var{chartData:e}=t,n=pn(),r=bi();return A.useEffect(()=>r?()=>{}:(n(qU(e)),()=>{n(qU(void 0))}),[e,n,r]),null},j9={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},OJ=Li({name:"brush",initialState:j9,reducers:{setBrushSettings(t,e){return e.payload==null?j9:e.payload}}}),{setBrushSettings:o3e}=OJ.actions,zMe=OJ.reducer;function z9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z9(Object(n),!0).forEach(function(r){RJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RJ(t,e,n){return(e=LMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LMe(t){var e=VMe(t,"string");return typeof e=="symbol"?e:e+""}function VMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BMe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},FMe=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return BMe({x:e,y:n},{x:r,y:i})};class MS{static create(e){return new MS(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}RJ(MS,"EPS",1e-4);var UMe=t=>{var e=Object.keys(t).reduce((n,r)=>vx(vx({},n),{},{[r]:MS.create(t[r])}),{});return vx(vx({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(a=>{var[s,o]=a;return[s,e[s].apply(o,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function $Me(t){return(t%180+180)%180}var qMe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=$Me(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},GMe={dots:[],areas:[],lines:[]},NJ=Li({name:"referenceElements",initialState:GMe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=xs(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=xs(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=xs(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:l3e,removeDot:c3e,addArea:u3e,removeArea:d3e,addLine:HMe,removeLine:KMe}=NJ.actions,WMe=NJ.reducer,MJ=A.createContext(void 0),YMe=t=>{var{children:e}=t,[n]=A.useState("".concat(Pv("recharts"),"-clip")),r=PJ();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(MJ.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},XMe=()=>A.useContext(MJ);function L9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(n),!0).forEach(function(r){QMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QMe(t,e,n){return(e=ZMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZMe(t){var e=JMe(t,"string");return typeof e=="symbol"?e:e+""}function JMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N1(){return N1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N1.apply(null,arguments)}var eje=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!an(e.x1)||!an(e.y1)||!an(e.x2)||!an(e.y2))return null;n=A.createElement("line",N1({},e,{className:"recharts-reference-line-line"}))}return n},tje=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.y.apply(t,{position:n});if(da(c)||e==="discard"&&!i.y.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},nje=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.x.apply(t,{position:n});if(da(c)||e==="discard"&&!i.x.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},rje=(t,e,n,r)=>{var i=t.map(a=>r.apply(a,{position:n}));return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},ije=(t,e,n,r,i,a)=>{var{x:s,y:o,segment:c,ifOverflow:u}=a,f=Ua(s),h=Ua(o);return h?tje(o,u,n,i,t,e):f?nje(s,u,n,r,t,e):c!=null&&c.length===2?rje(c,u,n,t):null};function aje(t){var e=pn();return A.useEffect(()=>(e(HMe(t)),()=>{e(KMe(t))})),null}function sje(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=bi(),o=XMe(),c=qe(D=>Eo(D,e)),u=qe(D=>To(D,n)),f=qe(D=>gp(D,"xAxis",e,s)),h=qe(D=>gp(D,"yAxis",n,s)),g=M0();if(!o||!g||c==null||u==null||f==null||h==null)return null;var m=UMe({x:f,y:h}),b=ije(m,g,t.position,c.orientation,u.orientation,t);if(!b)return null;var[{x,y:w},{x:S,y:T}]=b,I=a==="hidden"?"url(#".concat(o,")"):void 0,R=V9(V9({clipPath:I},ua(t)),{},{x1:x,y1:w,x2:S,y2:T}),O=FMe({x1:x,y1:w,x2:S,y2:T});return A.createElement(Ya,{zIndex:t.zIndex},A.createElement(ai,{className:Ht("recharts-reference-line",i)},eje(r,R),A.createElement(fJ,N1({},O,{lowerWidth:O.width,upperWidth:O.width}),A.createElement(pJ,{label:t.label}),t.children)))}var oje={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Or.line};function q2(t){var e=Kr(t,oje);return A.createElement(A.Fragment,null,A.createElement(aje,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(sje,e))}q2.displayName="ReferenceLine";function jJ(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function lje(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return qMe(r,n)}function cje(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function qv(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function uje(t,e){return jJ(t,e+1)}function dje(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:jJ(r,u)};var x=c,w,S=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,I=c===0||qv(t,T,S,f,o);I||(c=0,f=s,u+=1),I&&(f=T+t*(S()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function fje(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,m=function(){var T=r[b],I=b,R,O=()=>(R===void 0&&(R=n(T,I)),R),D=T.coordinate,k=b===f||qv(t,D,O,h,c);if(!k)return g=!1,1;k&&(h=D+t*(O()/2+i))},b=f;b<s&&!m();b+=u);if(g){for(var x=[],w=f;w<s;w+=u)x.push(r[w]);return x}}return[]}function B9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B9(Object(n),!0).forEach(function(r){hje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hje(t,e,n){return(e=pje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pje(t){var e=gje(t,"string");return typeof e=="symbol"?e:e+""}function gje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mje(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var m=a[g],b,x=()=>(b===void 0&&(b=n(m,g)),b);if(g===s-1){var w=t*(m.coordinate+t*x()/2-c);a[g]=m=Xr(Xr({},m),{},{tickCoord:w>0?m.coordinate-w*t:m.coordinate})}else a[g]=m=Xr(Xr({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var S=qv(t,m.tickCoord,x,o,c);S&&(c=m.tickCoord-t*(x()/2+i),a[g]=Xr(Xr({},m),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function vje(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1],h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=Xr(Xr({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var m=qv(t,f.tickCoord,()=>h,c,u);m&&(u=f.tickCoord-t*(h/2+i),s[o-1]=Xr(Xr({},f),{},{isShow:!0}))}}for(var b=a?o-1:o,x=function(T){var I=s[T],R,O=()=>(R===void 0&&(R=n(I,T)),R);if(T===0){var D=t*(I.coordinate-t*O()/2-c);s[T]=I=Xr(Xr({},I),{},{tickCoord:D<0?I.coordinate-D*t:I.coordinate})}else s[T]=I=Xr(Xr({},I),{},{tickCoord:I.coordinate});if(I.tickCoord!=null){var k=qv(t,I.tickCoord,O,c,u);k&&(c=I.tickCoord+t*(O()/2+i),s[T]=Xr(Xr({},I),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function G2(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(We(c)||dS.isSsr){var g;return(g=uje(i,We(c)?c:0))!==null&&g!==void 0?g:[]}var m=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?Hm(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(I,R)=>{var O=typeof u=="function"?u(I.value,R):I.value;return b==="width"?lje(Hm(O,{fontSize:e,letterSpacing:n}),x,h):Hm(O,{fontSize:e,letterSpacing:n})[b]},S=i.length>=2?Dr(i[1].coordinate-i[0].coordinate):1,T=cje(a,S,b);return c==="equidistantPreserveStart"?dje(S,T,w,i,s):c==="equidistantPreserveEnd"?fje(S,T,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?m=vje(S,T,w,i,s,c==="preserveStartEnd"):m=mje(S,T,w,i,s),m.filter(I=>I.isShow))}var yje=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},bje=["axisLine","width","height","className","hide","ticks","axisType"];function xje(t,e){if(t==null)return{};var n,r,i=wje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ud.apply(null,arguments)}function F9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F9(Object(n),!0).forEach(function(r){_je(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _je(t,e,n){return(e=Sje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sje(t){var e=Eje(t,"string");return typeof e=="symbol"?e:e+""}function Eje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ll={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Or.axis};function Tje(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=ir(ir(ir({},c),Es(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=ir(ir({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=ir(ir({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",Ud({},u,{className:Ht("recharts-cartesian-axis-line",jd(o,"className"))}))}function Aje(t,e,n,r,i,a,s,o,c){var u,f,h,g,m,b,x=o?-1:1,w=t.tickSize||s,S=We(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,m=S;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,m=u-x*c,b=S;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,m=u+x*c,b=S;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,m=S;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:m,y:b}}}function Cje(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Ije(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function kje(t){var{option:e,tickProps:n,value:r}=t,i,a=Ht(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,ir(ir({},n),{},{className:a}));else if(typeof e=="function")i=e(ir(ir({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Ht(s,e?.className)),i=A.createElement(DS,Ud({},n,{className:s}),r)}return i}var Pje=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:m,width:b,height:x,tickSize:w,tickMargin:S,fontSize:T,letterSpacing:I,getTicksConfig:R,events:O,axisType:D}=t,k=G2(ir(ir({},R),{},{ticks:n}),T,I),P=Cje(f,h),N=Ije(f,h),z=Es(R),L=kv(r),B={};typeof i=="object"&&(B=i);var j=ir(ir({},z),{},{fill:"none"},B),W=k.map(Y=>ir({entry:Y},Aje(Y,g,m,b,x,f,w,h,S))),Q=W.map(Y=>{var{entry:Z,line:ie}=Y;return A.createElement(ai,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Z.value,"-").concat(Z.coordinate,"-").concat(Z.tickCoord)},i&&A.createElement("line",Ud({},j,ie,{className:Ht("recharts-cartesian-axis-tick-line",jd(i,"className"))})))}),q=W.map((Y,Z)=>{var{entry:ie,tick:J}=Y,U=ir(ir(ir(ir({textAnchor:P,verticalAnchor:N},z),{},{stroke:"none",fill:a},L),J),{},{index:Z,payload:ie,visibleTicksCount:k.length,tickFormatter:s,padding:c},u);return A.createElement(ai,Ud({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ie.value,"-").concat(ie.coordinate,"-").concat(ie.tickCoord)},q_(O,ie,Z)),r&&A.createElement(kje,{option:r,tickProps:U,value:"".concat(typeof s=="function"?s(ie.value,Z):ie.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(D,"-ticks")},q.length>0&&A.createElement(Ya,{zIndex:Or.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(D,"-tick-labels"),ref:e},q)),Q.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(D,"-tick-lines")},Q))}),Dje=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=xje(t,bje),[f,h]=A.useState(""),[g,m]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return yje({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var T=S[0];if(T){var I=window.getComputedStyle(T),R=I.fontSize,O=I.letterSpacing;(R!==f||O!==g)&&(h(R),m(O))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(Ya,{zIndex:t.zIndex},A.createElement(ai,{className:Ht("recharts-cartesian-axis",a)},A.createElement(Tje,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Es(t)}),A.createElement(Pje,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(fJ,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(pJ,{label:t.label,labelRef:t.labelRef}),t.children)))}),H2=A.forwardRef((t,e)=>{var n=Kr(t,ll);return A.createElement(Dje,Ud({},n,{ref:e}))});H2.displayName="CartesianAxis";var Oje=["x1","y1","x2","y2","key"],Rje=["offset"],Nje=["xAxisId","yAxisId"],Mje=["xAxisId","yAxisId"];function U9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U9(Object(n),!0).forEach(function(r){jje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jje(t,e,n){return(e=zje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zje(t){var e=Lje(t,"string");return typeof e=="symbol"?e:e+""}function Lje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ud.apply(null,arguments)}function M1(t,e){if(t==null)return{};var n,r,i=Vje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Bje=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function zJ(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=M1(n,Oje),h=(i=Es(f))!==null&&i!==void 0?i:{},{offset:g}=h,m=M1(h,Rje);r=A.createElement("line",ud({},m,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function Fje(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=M1(t,Nje),c=i.map((u,f)=>{var h=Jr(Jr({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return A.createElement(zJ,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Uje(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=M1(t,Mje),c=i.map((u,f)=>{var h=Jr(Jr({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(zJ,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function $je(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var m=!u[g+1],b=m?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:b,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function qje(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var m=!u[g+1],b=m?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:b,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Gje=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return xX(G2(Jr(Jr(Jr({},ll),n),{},{ticks:wX(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Hje=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return xX(G2(Jr(Jr(Jr({},ll),n),{},{ticks:wX(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},Kje={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Or.grid};function jS(t){var e=PX(),n=DX(),r=kX(),i=Jr(Jr({},Kr(t,Kje)),{},{x:We(t.x)?t.x:r.left,y:We(t.y)?t.y:r.top,width:We(t.width)?t.width:r.width,height:We(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:m}=i,b=bi(),x=qe(N=>OU(N,"xAxis",a,b)),w=qe(N=>OU(N,"yAxis",s,b));if(!bo(u)||!bo(f)||!We(o)||!We(c))return null;var S=i.verticalCoordinatesGenerator||Gje,T=i.horizontalCoordinatesGenerator||Hje,{horizontalPoints:I,verticalPoints:R}=i;if((!I||!I.length)&&typeof T=="function"){var O=g&&g.length,D=T({yAxis:w?Jr(Jr({},w),{},{ticks:O?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},O?!0:h);c1(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(I=D)}if((!R||!R.length)&&typeof S=="function"){var k=m&&m.length,P=S({xAxis:x?Jr(Jr({},x),{},{ticks:k?m:x.ticks}):void 0,width:e??u,height:n??f,offset:r},k?!0:h);c1(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(R=P)}return A.createElement(Ya,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(Bje,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement($je,ud({},i,{horizontalPoints:I})),A.createElement(qje,ud({},i,{verticalPoints:R})),A.createElement(Fje,ud({},i,{offset:r,horizontalPoints:I,xAxis:x,yAxis:w})),A.createElement(Uje,ud({},i,{offset:r,verticalPoints:R,xAxis:x,yAxis:w}))))}jS.displayName="CartesianGrid";var Wje={},LJ=Li({name:"errorBars",initialState:Wje,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:f3e,replaceErrorBar:h3e,removeErrorBar:p3e}=LJ.actions,Yje=LJ.reducer,Xje=["children"];function Qje(t,e){if(t==null)return{};var n,r,i=Zje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Zje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jje={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},eze=A.createContext(Jje);function tze(t){var{children:e}=t,n=Qje(t,Xje);return A.createElement(eze.Provider,{value:n},e)}function VJ(t,e){var n,r,i=qe(u=>Eo(u,t)),a=qe(u=>To(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Cr.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Ir.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function nze(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=PJ(),{needClipX:a,needClipY:s,needClip:o}=VJ(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var AI={exports:{}},CI={};var $9;function rze(){if($9)return CI;$9=1;var t=yp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return CI.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var m=i(null);if(m.current===null){var b={hasValue:!1,value:null};m.current=b}else b=m.current;m=s(function(){function w(O){if(!S){if(S=!0,T=O,O=h(O),g!==void 0&&b.hasValue){var D=b.value;if(g(D,O))return I=D}return I=O}if(D=I,n(T,O))return D;var k=h(O);return g!==void 0&&g(D,k)?(T=O,D):(T=O,I=k)}var S=!1,T,I,R=f===void 0?null:f;return[function(){return w(u())},R===null?void 0:function(){return w(R())}]},[u,f,h,g]);var x=r(c,m[0],m[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},CI}var q9;function ize(){return q9||(q9=1,AI.exports=rze()),AI.exports}ize();function aze(t){t()}function sze(){let t=null,e=null;return{clear(){t=null,e=null},notify(){aze(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var G9={notify(){},get:()=>[]};function oze(t,e){let n,r=G9,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let S=!1;return()=>{S||(S=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=sze())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=G9)}function g(){a||(a=!0,f())}function m(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:m,getListeners:()=>r};return b}var lze=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cze=lze(),uze=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dze=uze(),fze=()=>cze||dze?A.useLayoutEffect:A.useEffect,hze=fze();function H9(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function pze(t,e){if(H9(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!H9(t[n[i]],e[n[i]]))return!1;return!0}var gze=Symbol.for("react-redux-context"),mze=typeof globalThis<"u"?globalThis:{};function vze(){if(!A.createContext)return{};const t=mze[gze]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var yze=vze();function bze(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=oze(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);hze(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||yze;return A.createElement(o.Provider,{value:a},e)}var xze=bze,wze=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function _ze(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function K2(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(wze.has(r)){if(t[r]==null&&e[r]==null)continue;if(!pze(t[r],e[r]))return!1}else if(!_ze(t[r],e[r]))return!1;return!0}function ef(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:IJ}function tf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:IJ}var Sze="Invariant failed";function Eze(t,e){throw new Error(Sze)}function sD(){return sD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sD.apply(null,arguments)}function j1(t){return A.createElement(SJ,sD({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Tze=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(We(e))return e;var a=We(r)||Rr(r);return a?e(r,i):(a||Eze(),n)}},Aze=(t,e,n)=>n,Cze=(t,e)=>e,Z0=ye([o2,Cze],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Ize=ye([Z0],t=>t?.maxBarSize),kze=(t,e,n,r)=>r,Pze=ye([Nt,o2,ef,tf,Aze],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Dze=(t,e,n)=>{var r=Nt(t),i=ef(t,e),a=tf(t,e);if(!(i==null||a==null))return r==="horizontal"?JP(t,"yAxis",a,n):JP(t,"xAxis",i,n)},Oze=(t,e)=>{var n=Nt(t),r=ef(t,e),i=tf(t,e);if(!(r==null||i==null))return n==="horizontal"?DU(t,"xAxis",r):DU(t,"yAxis",i)},Rze=ye([Pze,TPe,Oze],kMe),Nze=(t,e,n)=>{var r,i,a=Z0(t,e);if(a!=null){var s=ef(t,e),o=tf(t,e);if(!(s==null||o==null)){var c=Nt(t),u=WQ(t),{maxBarSize:f}=a,h=Rr(f)?u:f,g,m;return c==="horizontal"?(g=vp(t,"xAxis",s,n),m=mp(t,"xAxis",s,n)):(g=vp(t,"yAxis",o,n),m=mp(t,"yAxis",o,n)),(r=(i=l1(g,m,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},BJ=(t,e,n)=>{var r=Nt(t),i=ef(t,e),a=tf(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=vp(t,"xAxis",i,n),o=mp(t,"xAxis",i,n)):(s=vp(t,"yAxis",a,n),o=mp(t,"yAxis",a,n)),l1(s,o)}},Mze=ye([Rze,WQ,EPe,YQ,Nze,BJ,Ize],NMe),jze=(t,e,n)=>{var r=ef(t,e);if(r!=null)return vp(t,"xAxis",r,n)},zze=(t,e,n)=>{var r=tf(t,e);if(r!=null)return vp(t,"yAxis",r,n)},Lze=(t,e,n)=>{var r=ef(t,e);if(r!=null)return mp(t,"xAxis",r,n)},Vze=(t,e,n)=>{var r=tf(t,e);if(r!=null)return mp(t,"yAxis",r,n)},Bze=ye([Mze,Z0],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),Fze=ye([Dze,Z0],MMe),Uze=ye([xr,_N,jze,zze,Lze,Vze,Bze,Nt,fPe,BJ,Fze,Z0,kze],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:m,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,S;if(w!=null&&w.length>0?S=w:S=m?.slice(b,x+1),S!=null)return v4e({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:S,offset:t,cells:g,dataStartIndex:b})}}),$ze=["index"];function oD(){return oD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oD.apply(null,arguments)}function qze(t,e){if(t==null)return{};var n,r,i=Gze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var FJ=A.createContext(void 0),Hze=t=>{var e=A.useContext(FJ);if(e!=null)return e.stackId;if(t!=null)return wTe(t)},Kze=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Wze=t=>{var e=A.useContext(FJ);if(e!=null){var{stackId:n}=e;return"url(#".concat(Kze(n,t),")")}},Yze=t=>{var{index:e}=t,n=qze(t,$ze),r=Wze(e);return A.createElement(ai,oD({className:"recharts-bar-stack-layer",clipPath:r},n))},Xze=["onMouseEnter","onMouseLeave","onClick"],Qze=["value","background","tooltipPosition"],Zze=["id"],Jze=["onMouseEnter","onClick","onMouseLeave"];function Al(){return Al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Al.apply(null,arguments)}function K9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K9(Object(n),!0).forEach(function(r){e4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e4e(t,e,n){return(e=t4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t4e(t){var e=n4e(t,"string");return typeof e=="symbol"?e:e+""}function n4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z1(t,e){if(t==null)return{};var n,r,i=r4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function r4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var i4e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:tS(n,e),payload:t}]},a4e=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:tS(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return A.createElement(EJ,{tooltipEntrySettings:f})});function s4e(t){var e=qe(Fd),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=z1(a,Xze),f=F2(s,r,a.id),h=U2(o),g=$2(c,r,a.id);if(!i||n==null)return null;var m=kv(i);return A.createElement(Ya,{zIndex:jMe(i,Or.barBackground)},n.map((b,x)=>{var{value:w,background:S,tooltipPosition:T}=b,I=z1(b,Qze);if(!S)return null;var R=f(b,x),O=h(b,x),D=g(b,x),k=fi(fi(fi(fi(fi({option:i,isActive:String(x)===e},I),{},{fill:"#eee"},S),m),q_(u,b,x)),{},{onMouseEnter:R,onMouseLeave:O,onClick:D,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(j1,Al({key:"background-bar-".concat(x)},k))}))}function o4e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return fi(fi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(UNe,{value:e?i:void 0},n)}function l4e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=qe(Fd),c=qe(O2),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?A.createElement(Ya,{zIndex:Or.activeBar},A.createElement(j1,Al({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))):A.createElement(j1,Al({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function c4e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(j1,Al({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function u4e(t){var e,{data:n,props:r}=t,i=(e=Es(r))!==null&&e!==void 0?e:{},{id:a}=i,s=z1(i,Zze),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,m=z1(r,Jze),b=F2(f,c,a),x=U2(g),w=$2(h,c,a);return n?A.createElement(A.Fragment,null,n.map((S,T)=>A.createElement(Yze,Al({index:T,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(T),className:"recharts-bar-rectangle"},q_(m,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),u?A.createElement(l4e,{shape:o,activeBar:u,baseProps:s,entry:S,index:T,dataKey:c}):A.createElement(c4e,{shape:o,baseProps:s,entry:S,index:T,dataKey:c})))):null}function d4e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=hS(e,"recharts-bar-"),[m,b]=A.useState(!1),x=!m,w=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),S=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(o4e,{showLabels:x,rects:r},A.createElement(fS,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:S,key:g},T=>{var I=T===1?r:r?.map((R,O)=>{var D=h&&h[O];if(D)return fi(fi({},R),{},{x:fr(D.x,R.x,T),y:fr(D.y,R.y,T),width:fr(D.width,R.width,T),height:fr(D.height,R.height,T)});if(i==="horizontal"){var k=fr(0,R.height,T),P=fr(R.stackedBarStart,R.y,T);return fi(fi({},R),{},{y:P,height:k})}var N=fr(0,R.width,T),z=fr(R.stackedBarStart,R.x,T);return fi(fi({},R),{},{width:N,x:z})});return T>0&&(n.current=I??null),I==null?null:A.createElement(ai,null,A.createElement(u4e,{props:e,data:I}))}),A.createElement(vJ,{label:e.label}),e.children)}function f4e(t){var e=A.useRef(null);return A.createElement(d4e,{previousRectanglesRef:e,props:t})}var UJ=0,h4e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:hn(t,e)}};class p4e extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Ht("recharts-bar",i),h=u;return A.createElement(ai,{className:f,id:u},o&&A.createElement("defs",null,A.createElement(nze,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(ai,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(s4e,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(f4e,this.props)))}}var g4e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:UJ,xAxisId:0,yAxisId:0,zIndex:Or.bar};function m4e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=VJ(e,n),g=j0(),m=bi(),b=B2(t.children,Q0),x=qe(T=>Uze(T,t.id,m,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,S=x?.[0];return S==null||S.height==null||S.width==null?w=0:w=g==="vertical"?S.height/2:S.width/2,A.createElement(tze,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:h4e,errorBarOffset:w},A.createElement(p4e,Al({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function v4e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:m,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,S=f?w.scale.domain():null,T=_Te({numericAxis:w}),I=w.scale(T);return h.map((R,O)=>{var D,k,P,N,z,L;if(f){var B=f[O+x];if(B==null)return null;D=mTe(B,S)}else D=hn(R,n),Array.isArray(D)||(D=[T,D]);var j=Tze(r,UJ)(D[1],O);if(e==="horizontal"){var W,[Q,q]=[o.scale(D[0]),o.scale(D[1])];k=z6({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:R,index:O}),P=(W=q??Q)!==null&&W!==void 0?W:void 0,N=i.size;var Y=Q-q;if(z=da(Y)?0:Y,L={x:k,y:g.top,width:N,height:g.height},Math.abs(j)>0&&Math.abs(z)<Math.abs(j)){var Z=Dr(z||j)*(Math.abs(j)-Math.abs(z));P-=Z,z+=Z}}else{var[ie,J]=[s.scale(D[0]),s.scale(D[1])];if(k=ie,P=z6({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:R,index:O}),N=J-ie,z=i.size,L={x:g.left,y:P,width:g.width,height:z},Math.abs(j)>0&&Math.abs(N)<Math.abs(j)){var U=Dr(N||j)*(Math.abs(j)-Math.abs(N));N+=U}}if(k==null||P==null||N==null||z==null)return null;var X=fi(fi({},R),{},{stackedBarStart:I,x:k,y:P,width:N,height:z,value:f?D:D[1],payload:R,background:L,tooltipPosition:{x:k+N/2,y:P+z/2},parentViewBox:b},m&&m[O]&&m[O].props);return X}).filter(Boolean)}function y4e(t){var e=Kr(t,g4e),n=Hze(e.stackId),r=bi();return A.createElement(TJ,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(I2e,{legendPayload:i4e(e)}),A.createElement(a4e,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(U2e,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(Ya,{zIndex:e.zIndex},A.createElement(m4e,Al({},e,{id:i})))))}var Gv=A.memo(y4e,K2);Gv.displayName="Bar";var b4e=["domain","range"],x4e=["domain","range"];function W9(t,e){if(t==null)return{};var n,r,i=w4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Y9(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function $J(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=W9(t,b4e),{domain:a,range:s}=e,o=W9(e,x4e);return!Y9(n,a)||!Y9(r,s)?!1:K2(i,o)}var _4e=["dangerouslySetInnerHTML","ticks","scale"],S4e=["id","scale"];function lD(){return lD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lD.apply(null,arguments)}function X9(t,e){if(t==null)return{};var n,r,i=E4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function E4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function T4e(t){var e=pn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(bMe(t)):n.current!==t&&e(xMe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(wMe(n.current)),n.current=null)},[e]),null}var A4e=t=>{var{xAxisId:e,className:n}=t,r=qe(_N),i=bi(),a="xAxis",s=qe(S=>CZ(S,a,e,i)),o=qe(S=>SZ(S,e)),c=qe(S=>_De(S,e)),u=qe(S=>iZ(S,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,m=X9(t,_4e),{id:b,scale:x}=u,w=X9(u,S4e);return A.createElement(H2,lD({},m,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Ht("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},C4e={allowDataOverflow:Cr.allowDataOverflow,allowDecimals:Cr.allowDecimals,allowDuplicatedCategory:Cr.allowDuplicatedCategory,angle:Cr.angle,axisLine:ll.axisLine,height:Cr.height,hide:!1,includeHidden:Cr.includeHidden,interval:Cr.interval,minTickGap:Cr.minTickGap,mirror:Cr.mirror,orientation:Cr.orientation,padding:Cr.padding,reversed:Cr.reversed,scale:Cr.scale,tick:Cr.tick,tickCount:Cr.tickCount,tickLine:ll.tickLine,tickSize:ll.tickSize,type:Cr.type,xAxisId:0},I4e=t=>{var e=Kr(t,C4e);return A.createElement(A.Fragment,null,A.createElement(T4e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(A4e,e))},zS=A.memo(I4e,$J);zS.displayName="XAxis";var k4e=["dangerouslySetInnerHTML","ticks","scale"],P4e=["id","scale"];function cD(){return cD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cD.apply(null,arguments)}function Q9(t,e){if(t==null)return{};var n,r,i=D4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function D4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function O4e(t){var e=pn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(_Me(t)):n.current!==t&&e(SMe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(EMe(n.current)),n.current=null)},[e]),null}var R4e=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=qe(_N),c=bi(),u=pn(),f="yAxis",h=qe(D=>EZ(D,e)),g=qe(D=>EDe(D,e)),m=qe(D=>CZ(D,f,e,c)),b=qe(D=>aZ(D,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||z2(i)||A.isValidElement(i)||b==null)){var D=a.current;if(D){var k=D.getCalculatedWidth();Math.round(h.width)!==Math.round(k)&&u(TMe({id:e,width:k}))}}},[m,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:S}=t,T=Q9(t,k4e),{id:I,scale:R}=b,O=Q9(b,P4e);return A.createElement(H2,cD({},T,O,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Ht("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:m,axisType:f}))},N4e={allowDataOverflow:Ir.allowDataOverflow,allowDecimals:Ir.allowDecimals,allowDuplicatedCategory:Ir.allowDuplicatedCategory,angle:Ir.angle,axisLine:ll.axisLine,hide:!1,includeHidden:Ir.includeHidden,interval:Ir.interval,minTickGap:Ir.minTickGap,mirror:Ir.mirror,orientation:Ir.orientation,padding:Ir.padding,reversed:Ir.reversed,scale:Ir.scale,tick:Ir.tick,tickCount:Ir.tickCount,tickLine:ll.tickLine,tickSize:ll.tickSize,type:Ir.type,width:Ir.width,yAxisId:0},M4e=t=>{var e=Kr(t,N4e);return A.createElement(A.Fragment,null,A.createElement(O4e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(R4e,e))},LS=A.memo(M4e,$J);LS.displayName="YAxis";var j4e=(t,e)=>e,W2=ye([j4e,Nt,nZ,_r,$Z,Ml,VOe,xr],HOe),Y2=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},qJ=$a("mouseClick"),GJ=R0();GJ.startListening({actionCreator:qJ,effect:(t,e)=>{var n=t.payload,r=W2(e.getState(),Y2(n));r?.activeIndex!=null&&e.dispatch(LDe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var uD=$a("mouseMove"),HJ=R0(),yx=null;HJ.startListening({actionCreator:uD,effect:(t,e)=>{var n=t.payload;yx!==null&&cancelAnimationFrame(yx);var r=Y2(n);yx=requestAnimationFrame(()=>{var i=e.getState(),a=A2(i,i.tooltip.settings.shared);if(a==="axis"){var s=W2(i,r);s?.activeIndex!=null?e.dispatch(MZ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(NZ())}yx=null})}});function z4e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Z9={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},KJ=Li({name:"rootProps",initialState:Z9,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:Z9.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),L4e=KJ.reducer,{updateOptions:V4e}=KJ.actions,WJ=Li({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:B4e}=WJ.actions,F4e=WJ.reducer,YJ=$a("keyDown"),XJ=$a("focus"),X2=R0();X2.startListening({actionCreator:YJ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=C2(i,Hp(n),H0(n),Y0(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=Ml(n);if(a==="Enter"){var u=P1(n,"axis","hover",String(i.index));e.dispatch(tD({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=IDe(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,m=o+g*h;if(!(c==null||m>=c.length||m<0)){var b=P1(n,"axis","hover",String(m));e.dispatch(tD({active:!0,activeIndex:m.toString(),activeCoordinate:b}))}}}}}});X2.startListening({actionCreator:XJ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=P1(n,"axis","hover",String(a));e.dispatch(tD({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Oa=$a("externalEvent"),QJ=R0(),II=new Map;QJ.startListening({actionCreator:Oa,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=II.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:EOe(o),activeDataKey:O2(o),activeIndex:Fd(o),activeLabel:HZ(o),activeTooltipIndex:Fd(o),isTooltipActive:TOe(o)};n(c,r)}finally{II.delete(i)}});II.set(i,s)}}});var U4e=ye([qp],t=>t.tooltipItemPayloads),$4e=ye([U4e,W0,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),ZJ=$a("touchMove"),JJ=R0();JJ.startListening({actionCreator:ZJ,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=A2(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=W2(r,Y2({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(MZ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(SX),h=(o=u.getAttribute(EX))!==null&&o!==void 0?o:void 0,g=Gp(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:m}=g,b=$4e(r,f,h);e.dispatch(RZ({activeDataKey:m,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var q4e=GY({brush:zMe,cartesianAxis:AMe,chartData:SRe,errorBars:Yje,graphicalItems:B2e,layout:uTe,legend:mAe,options:yRe,polarAxis:JNe,polarOptions:F4e,referenceElements:WMe,rootProps:L4e,tooltip:VDe,zIndex:sRe}),G4e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return MEe({reducer:q4e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([GJ.middleware,HJ.middleware,X2.middleware,QJ.middleware,JJ.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(sX({type:"raf"}))},devTools:{serialize:{replacer:z4e},name:"recharts-".concat(n)}})};function eee(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=bi(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=G4e(e,r));var s=gN;return A.createElement(xze,{context:s,store:a.current},n)}function H4e(t){var{layout:e,margin:n}=t,r=pn(),i=bi();return A.useEffect(()=>{i||(r(oTe(e)),r(sTe(n)))},[r,i,e,n]),null}var tee=A.memo(H4e,K2);function nee(t){var e=pn();return A.useEffect(()=>{e(V4e(t))},[e,t]),null}function J9(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=pn();return A.useLayoutEffect(()=>(r.current&&i(iRe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(aRe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function e$(t){var{children:e,isPanorama:n}=t,r=qe(WOe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(J9,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(J9,{key:s,zIndex:s,isPanorama:n})))}var K4e=["children"];function W4e(t,e){if(t==null)return{};var n,r,i=Y4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Y4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L1.apply(null,arguments)}var X4e={width:"100%",height:"100%",display:"block"},Q4e=A.forwardRef((t,e)=>{var n=PX(),r=DX(),i=UX();if(!bo(n)||!bo(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(cY,L1({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:X4e,ref:e}),a)}),Z4e=t=>{var{children:e}=t,n=qe(aS);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(cY,{width:r,height:i,x:s,y:a},e)},t$=A.forwardRef((t,e)=>{var{children:n}=t,r=W4e(t,K4e),i=bi();return i?A.createElement(Z4e,null,A.createElement(e$,{isPanorama:!0},n)):A.createElement(Q4e,L1({ref:e},r),A.createElement(e$,{isPanorama:!1},n))});function J4e(){var t=pn(),[e,n]=A.useState(null),r=qe(ITe);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;an(a)&&a!==r&&t(cTe(a))}},[e,t,r]),n}function n$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eLe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n$(Object(n),!0).forEach(function(r){tLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tLe(t,e,n){return(e=nLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nLe(t){var e=rLe(t,"string");return typeof e=="symbol"?e:e+""}function rLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $d(){return $d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$d.apply(null,arguments)}var iLe=()=>(ORe(),null);function V1(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var aLe=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:V1((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:V1((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((u,f)=>{s(h=>{var g=Math.round(u),m=Math.round(f);return h.containerWidth===g&&h.containerHeight===m?h:{containerWidth:g,containerHeight:m}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var{width:x,height:w}=b[0].contentRect;o(x,w)},m=new ResizeObserver(g);m.observe(u),i.current=m}},[e,o]);return A.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(oS,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",$d({ref:c},t)))}),sLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:V1(n),containerHeight:V1(r)}),s=A.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(oS,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",$d({ref:o},t)))}),oLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(oS,{width:n,height:r}),A.createElement("div",$d({ref:e},t)))}),lLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return xl(n)||xl(r)?A.createElement(sLe,$d({},t,{ref:e})):A.createElement(oLe,$d({},t,{ref:e}))});function cLe(t){return t===!0?aLe:lLe}var uLe=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:m,onTouchMove:b,onTouchStart:x,style:w,width:S,responsive:T,dispatchTouchEvents:I=!0}=t,R=A.useRef(null),O=pn(),[D,k]=A.useState(null),[P,N]=A.useState(null),z=J4e(),L=SN(),B=L?.width>0?L.width:S,j=L?.height>0?L.height:i,W=A.useCallback(ne=>{z(ne),typeof e=="function"&&e(ne),k(ne),N(ne),ne!=null&&(R.current=ne)},[z,e,k,N]),Q=A.useCallback(ne=>{O(qJ(ne)),O(Oa({handler:a,reactEvent:ne}))},[O,a]),q=A.useCallback(ne=>{O(uD(ne)),O(Oa({handler:u,reactEvent:ne}))},[O,u]),Y=A.useCallback(ne=>{O(NZ()),O(Oa({handler:f,reactEvent:ne}))},[O,f]),Z=A.useCallback(ne=>{O(uD(ne)),O(Oa({handler:h,reactEvent:ne}))},[O,h]),ie=A.useCallback(()=>{O(XJ())},[O]),J=A.useCallback(ne=>{O(YJ(ne.key))},[O]),U=A.useCallback(ne=>{O(Oa({handler:s,reactEvent:ne}))},[O,s]),X=A.useCallback(ne=>{O(Oa({handler:o,reactEvent:ne}))},[O,o]),te=A.useCallback(ne=>{O(Oa({handler:c,reactEvent:ne}))},[O,c]),K=A.useCallback(ne=>{O(Oa({handler:g,reactEvent:ne}))},[O,g]),ce=A.useCallback(ne=>{O(Oa({handler:x,reactEvent:ne}))},[O,x]),ae=A.useCallback(ne=>{I&&O(ZJ(ne)),O(Oa({handler:b,reactEvent:ne}))},[O,I,b]),oe=A.useCallback(ne=>{O(Oa({handler:m,reactEvent:ne}))},[O,m]),he=cLe(T);return A.createElement(JZ.Provider,{value:D},A.createElement(h_e.Provider,{value:P},A.createElement(he,{width:B??w?.width,height:j??w?.height,className:Ht("recharts-wrapper",r),style:eLe({position:"relative",cursor:"default",width:B,height:j},w),onClick:Q,onContextMenu:U,onDoubleClick:X,onFocus:ie,onKeyDown:J,onMouseDown:te,onMouseEnter:q,onMouseLeave:Y,onMouseMove:Z,onMouseUp:K,onTouchEnd:oe,onTouchMove:ae,onTouchStart:ce,ref:W},A.createElement(iLe,null),n)))}),dLe=["width","height","responsive","children","className","style","compact","title","desc"];function fLe(t,e){if(t==null)return{};var n,r,i=hLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ree=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=fLe(t,dLe),g=Es(h);return c?A.createElement(A.Fragment,null,A.createElement(oS,{width:n,height:r}),A.createElement(t$,{otherAttributes:g,title:u,desc:f},a)):A.createElement(uLe,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(t$,{otherAttributes:g,title:u,desc:f,ref:e},A.createElement(YMe,null,a)))});function dD(){return dD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dD.apply(null,arguments)}var pLe={top:5,right:5,bottom:5,left:5},gLe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:pLe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},mLe=A.forwardRef(function(e,n){var r,i=Kr(e.categoricalChartProps,gLe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(eee,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},A.createElement(DJ,{chartData:u.data}),A.createElement(tee,{layout:i.layout,margin:i.margin}),A.createElement(nee,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(ree,dD({},i,{ref:n})))}),vLe=["axis","item"],Q2=A.forwardRef((t,e)=>A.createElement(mLe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vLe,tooltipPayloadSearcher:eJ,categoricalChartProps:t,ref:e}));function yLe(t){var e=pn();return A.useEffect(()=>{e(B4e(t))},[e,t]),null}var bLe=["layout"];function fD(){return fD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fD.apply(null,arguments)}function xLe(t,e){if(t==null)return{};var n,r,i=wLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _Le={top:5,right:5,bottom:5,left:5},iee={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:_Le,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},SLe=A.forwardRef(function(e,n){var r,i=Kr(e.categoricalChartProps,iee),{layout:a}=i,s=xLe(i,bLe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(eee,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(DJ,{chartData:i.data}),A.createElement(tee,{layout:a,margin:i.margin}),A.createElement(nee,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(yLe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(ree,fD({},s,{ref:n})))});function r$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(n),!0).forEach(function(r){ELe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ELe(t,e,n){return(e=TLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TLe(t){var e=ALe(t,"string");return typeof e=="symbol"?e:e+""}function ALe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CLe=["item"],ILe=i$(i$({},iee),{},{layout:"centric",startAngle:0,endAngle:360}),kLe=A.forwardRef((t,e)=>{var n=Kr(t,ILe);return A.createElement(SLe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:CLe,tooltipPayloadSearcher:eJ,categoricalChartProps:n,ref:e})});const a$=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],s$=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function aee(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const PLe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function bx(t){const e=parseInt(t.split("-")[1],10);return PLe[e-1]||t}function DLe(t){const e={};return t.forEach((n,r)=>{e[n.id]=a$[r%a$.length]}),e.uncategorized="#9CA3AF",e}function OLe(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=s$[i%s$.length]}),e}function RLe(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=en(),s=A.useMemo(()=>aee(t,a),[t,a]),o=A.useMemo(()=>{const x={};return n.forEach(w=>{x[w.id]=w.categoryId||"uncategorized"}),x},[n]),c=A.useMemo(()=>DLe(r),[r]),u=A.useMemo(()=>{const x={};return r.forEach(w=>{x[w.id]=w.name}),x.uncategorized="Uncategorized",x},[r]),f=A.useMemo(()=>{const x=new Set(s);return e.filter(w=>w.type==="Expense"&&w.month&&x.has(w.month))},[e,s]),h=A.useMemo(()=>{const x={};f.forEach(T=>{const I=o[T.envelopeId]||"uncategorized";x[I]=(x[I]||0)+Math.abs(T.amount)});const w=Object.entries(x).map(([T,I])=>({categoryId:T,categoryName:u[T]||"Uncategorized",color:c[T]||"#9CA3AF",amount:Math.round(I*100)/100})).sort((T,I)=>I.amount-T.amount),S=w.reduce((T,I)=>T+I.amount,0);return{items:w,total:Math.round(S*100)/100}},[f,o,u,c]),g=A.useMemo(()=>{const x=new Set,w={};s.forEach(D=>{w[D]={}}),f.forEach(D=>{const k=o[D.envelopeId]||"uncategorized",P=D.month;w[P]&&(w[P][k]=(w[P][k]||0)+Math.abs(D.amount),x.add(k))});const S=[...x],T={};S.forEach(D=>{T[D]=c[D]||"#9CA3AF"});const I=s.map(D=>{const k={month:D,monthLabel:bx(D)};return S.forEach(P=>{k[P]=Math.round((w[D][P]||0)*100)/100}),k}),R=I.map(D=>S.reduce((k,P)=>k+(D[P]||0),0)),O=R.length>0?Math.round(R.reduce((D,k)=>D+k,0)/R.length):0;return{data:I,categoryKeys:S,colorMap:T,average:O}},[s,f,o,c]),m=A.useMemo(()=>{const x=[],w={};s.forEach(D=>{w[D]={}}),s.forEach(D=>{(i[D]||[]).forEach(P=>{x.push(P.name),w[D][P.name]=(w[D][P.name]||0)+P.amount})});const S=[...new Set(x)],T=OLe(S),I=s.map(D=>{const k={month:D,monthLabel:bx(D)};return S.forEach(P=>{k[P]=Math.round((w[D][P]||0)*100)/100}),k}),R=I.map(D=>S.reduce((k,P)=>k+(D[P]||0),0)),O=R.length>0?Math.round(R.reduce((D,k)=>D+k,0)/R.length):0;return{data:I,sourceKeys:S,colorMap:T,average:O}},[s,i]),b=A.useMemo(()=>({data:s.map(w=>{const T=(i[w]||[]).reduce((P,N)=>P+N.amount,0),R=f.filter(P=>P.month===w).reduce((P,N)=>P+Math.abs(N.amount),0),O=Math.max(0,T-R);if(T<=0)return{month:w,monthLabel:bx(w),savingsPercent:0,spendingPercent:100};const D=Math.min(100,Math.round(O/T*1e3)/10),k=Math.round((100-D)*10)/10;return{month:w,monthLabel:bx(w),savingsPercent:D,spendingPercent:k}})}),[s,i,f]);return{months:s,spendingTotals:h,spendingBreakdown:g,monthlyIncome:m,savingsData:b,categoryNameMap:u,categoryColorMap:c}}const NLe=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],MLe=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function jLe(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const Z2=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),B1=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),see=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),y.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),y.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:B1(a.value)})]},s)),y.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[y.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),y.jsx("span",{className:"text-zinc-900 dark:text-white",children:B1(i)})]})]})},zLe=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),y.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),y.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),y.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),y.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},LLe=()=>{const t=Ka(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a,fetchMonthData:s,incomeSources:o,loadedTransactionMonths:c}=en(),u=A.useMemo(()=>jLe(),[]);A.useEffect(()=>{aee(r,a).forEach(w=>{(o[w]===void 0||!c.includes(w))&&s(w)})},[r,a,s,o,c]);const{spendingTotals:f,spendingBreakdown:h,monthlyIncome:g,savingsData:m,categoryNameMap:b}=RLe(r);return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[y.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[y.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[y.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:y.jsx(hl,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),y.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Analytics"})]}),y.jsx("div",{className:"px-4 pb-2",children:y.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:NLe.map(({key:x,label:w})=>y.jsx("button",{onClick:()=>n(x),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===x?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:w},x))})}),y.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:y.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[MLe.map(({value:x,label:w})=>y.jsx("button",{onClick:()=>i(x),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===x?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:w},x)),u.map(({value:x,label:w})=>y.jsx("button",{onClick:()=>i(x),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===x?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:w},x))]})})]}),y.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&y.jsx(VLe,{items:f.items,total:f.total}),e==="breakdown"&&y.jsx(BLe,{data:h.data,categoryKeys:h.categoryKeys,colorMap:h.colorMap,nameMap:b,average:h.average}),e==="income"&&y.jsx(FLe,{data:g.data,sourceKeys:g.sourceKeys,colorMap:g.colorMap,average:g.average}),e==="savings"&&y.jsx(ULe,{data:m.data})]})]})},VLe=({items:t,total:e})=>t.length===0?y.jsx(VS,{message:"No spending data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:y.jsxs("div",{className:"relative no-select-chart",children:[y.jsx(sS,{width:"100%",height:280,children:y.jsxs(kLe,{children:[y.jsx(CJ,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,children:t.map((n,r)=>y.jsx(Q0,{fill:n.color},r))}),y.jsx(PS,{content:({active:n,payload:r})=>{if(!n||!r?.length)return null;const i=r[0].payload,a=e>0?(i.amount/e*100).toFixed(1):"0";return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:i.color}}),y.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName})]}),y.jsxs("div",{className:"text-zinc-600 dark:text-zinc-300",children:[B1(i.amount)," (",a,"%)"]})]})},contentStyle:{backgroundColor:"transparent",border:"none",padding:0,borderRadius:0,boxShadow:"none"}})]})}),y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-10",children:[y.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),y.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:Z2(e)})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),y.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=e>0?(n.amount/e*100).toFixed(1):"0";return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2.5",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),y.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:n.categoryName})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[r,"%"]}),y.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:B1(n.amount)})]})]},n.categoryId)})})]})]}),BLe=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?y.jsx(VS,{message:"No spending data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),y.jsx(sS,{width:"100%",height:300,children:y.jsxs(Q2,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(jS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(zS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(LS,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(PS,{cursor:!1,content:a=>y.jsx(see,{...a,colorMap:n,nameMap:r})}),y.jsx(q2,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${Z2(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>y.jsx(Gv,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),y.jsx(oee,{keys:e,colorMap:n,nameMap:r})]}),FLe=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?y.jsx(VS,{message:"No income data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),y.jsx(sS,{width:"100%",height:300,children:y.jsxs(Q2,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(jS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(zS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(LS,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(PS,{cursor:!1,content:a=>y.jsx(see,{...a,colorMap:n,nameMap:i})}),y.jsx(q2,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${Z2(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>y.jsx(Gv,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),y.jsx(oee,{keys:e,colorMap:n,nameMap:i})]})},ULe=({data:t})=>{if(t.length===0)return y.jsx(VS,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),y.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),y.jsx(sS,{width:"100%",height:300,children:y.jsxs(Q2,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(jS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(zS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(LS,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(PS,{content:zLe}),y.jsx(Gv,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),y.jsx(Gv,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),y.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),y.jsx("div",{className:"space-y-2",children:t.map(n=>y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),y.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),y.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},oee=({keys:t,colorMap:e,nameMap:n})=>y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),y.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),y.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),VS=({message:t})=>y.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:y.jsx(C8,{className:"w-8 h-8 text-zinc-400"})}),y.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),Go=({children:t})=>y.jsx(Vn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),$Le=()=>{const t=Cs();return y.jsx(ha,{mode:"wait",children:y.jsxs(noe,{location:t,children:[y.jsx(Ys,{path:"/",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(w1e,{})})})}),y.jsx(Ys,{path:"/envelope/:id",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(C1e,{})})})}),y.jsx(Ys,{path:"/add-envelope",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(D1e,{})})})}),y.jsx(Ys,{path:"/add-transaction",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(aY,{})})})}),y.jsx(Ys,{path:"/transactions",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(r_e,{})})})}),y.jsx(Ys,{path:"/settings",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(k1e,{})})})}),y.jsx(Ys,{path:"/settings/categories",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(P1e,{})})})}),y.jsx(Ys,{path:"/verify-email",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(p7,{})})})}),y.jsx(Ys,{path:"/analytics",element:y.jsx(Go,{children:y.jsx(Yi,{children:y.jsx(LLe,{})})})})]},t.pathname)})},qLe=()=>{const t=Ka(),{envelopes:e,appSettings:n}=en(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if(!i||e.length===0)return;const a=xt(tt,"siriQueries",i),s=Kd(a,async o=>{if(!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await ea(a)}catch(f){H.error("Failed to cleanup stale Siri query",f)}return}H.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await ea(a);const f=await iY(c.query,e);H.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){H.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{H.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null};function GLe(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=en(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:m}=nn();if(A.useEffect(()=>{const w=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(w)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const S=new URLSearchParams(window.location.search),T=S.get("mode"),I=S.get("oobCode");if(T==="resetPassword"&&I){a(I);return}if(T==="verifyEmail"&&I)try{await Lie(Da,I),H.log(" Email verification successful");const R=window.location.pathname;window.history.replaceState({},document.title,R),alert("Email verified successfully! You can now sign in.")}catch(R){H.error(" Email verification failed:",R),alert("Email verification failed. The link may be expired or invalid.")}})()},[]),A.useEffect(()=>{const w=document.documentElement,S=window.matchMedia("(prefers-color-scheme: dark)"),T=()=>{const I=s?.theme??"system",R=S.matches;I==="dark"||I==="system"&&R?w.classList.add("dark"):w.classList.remove("dark")};if(T(),s?.theme==="system")return S.addEventListener("change",T),()=>S.removeEventListener("change",T)},[s]),A.useEffect(()=>{const w=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":w.style.fontSize="75%";break;case"small":w.style.fontSize="87.5%";break;case"large":w.style.fontSize="112.5%";break;case"extra-large":w.style.fontSize="125%";break;default:w.style.fontSize="100%"}},[s?.fontSize]),t||!u)return y.jsx(g7,{message:"Initializing Personal Budget..."});if(i)return y.jsx(Yi,{children:y.jsx(Vhe,{oobCode:i,onSuccess:()=>{a(null);const w=window.location.pathname;window.history.replaceState({},document.title,w)},onCancel:()=>{a(null);const w=window.location.pathname;window.history.replaceState({},document.title,w)}})});if(!c)return m?y.jsx(Yi,{children:y.jsx(p7,{})}):y.jsx(Yi,{children:y.jsx(Lhe,{})});const x=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:y.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:y.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),y.jsxs(Yi,{children:[x&&y.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),y.jsxs(Coe,{children:[y.jsx(qLe,{}),y.jsx($Le,{}),n&&y.jsxs("div",{className:"fixed inset-0 z-[60]",children:[y.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),y.jsx("div",{className:"absolute inset-0",children:y.jsx(aY,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),!o&&y.jsx(E0e,{onAddTransaction:()=>r(!0)})]}),y.jsx(S0e,{})]})]})}Qte({onNeedRefresh(){},onOfflineReady(){}});Wte.createRoot(document.getElementById("root")).render(y.jsx(A.StrictMode,{children:y.jsx(GLe,{})}));export{pt as T,tt as a,Xfe as b,W3 as c,xt as d,qr as e,Xi as f,cA as g,ea as h,H as l,Kd as o,ia as q,Zi as s,qu as t,Zs as u,lA as w};
