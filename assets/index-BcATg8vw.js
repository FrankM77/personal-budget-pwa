(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function V3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ny={exports:{}},Zd={};var eA;function z3(){if(eA)return Zd;eA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return Zd.Fragment=e,Zd.jsx=n,Zd.jsxs=n,Zd}var tA;function L3(){return tA||(tA=1,Ny.exports=z3()),Ny.exports}var y=L3(),Iy={exports:{}},it={};var nA;function B3(){if(nA)return it;nA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function T(U,Y,ne){this.props=U,this.context=Y,this.refs=S,this.updater=ne||_}T.prototype.isReactComponent={},T.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function D(){}D.prototype=T.prototype;function k(U,Y,ne){this.props=U,this.context=Y,this.refs=S,this.updater=ne||_}var j=k.prototype=new D;j.constructor=k,E(j,T.prototype),j.isPureReactComponent=!0;var B=Array.isArray;function z(){}var C={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function N(U,Y,ne){var ae=ne.ref;return{$$typeof:t,type:U,key:Y,ref:ae!==void 0?ae:null,props:ne}}function O(U,Y){return N(U.type,Y,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function V(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ne){return Y[ne]})}var M=/\/+/g;function J(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?V(""+U.key):Y.toString(36)}function Q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(z,z):(U.status="pending",U.then(function(Y){U.status==="pending"&&(U.status="fulfilled",U.value=Y)},function(Y){U.status==="pending"&&(U.status="rejected",U.reason=Y)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function $(U,Y,ne,ae,he){var ie=typeof U;(ie==="undefined"||ie==="boolean")&&(U=null);var me=!1;if(U===null)me=!0;else switch(ie){case"bigint":case"string":case"number":me=!0;break;case"object":switch(U.$$typeof){case t:case e:me=!0;break;case h:return me=U._init,$(me(U._payload),Y,ne,ae,he)}}if(me)return he=he(U),me=ae===""?"."+J(U,0):ae,B(he)?(ne="",me!=null&&(ne=me.replace(M,"$&/")+"/"),$(he,Y,ne,"",function(De){return De})):he!=null&&(L(he)&&(he=O(he,ne+(he.key==null||U&&U.key===he.key?"":(""+he.key).replace(M,"$&/")+"/")+me)),Y.push(he)),1;me=0;var Te=ae===""?".":ae+":";if(B(U))for(var Ae=0;Ae<U.length;Ae++)ae=U[Ae],ie=Te+J(ae,Ae),me+=$(ae,Y,ne,ie,he);else if(Ae=x(U),typeof Ae=="function")for(U=Ae.call(U),Ae=0;!(ae=U.next()).done;)ae=ae.value,ie=Te+J(ae,Ae++),me+=$(ae,Y,ne,ie,he);else if(ie==="object"){if(typeof U.then=="function")return $(Q(U),Y,ne,ae,he);throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return me}function H(U,Y,ne){if(U==null)return U;var ae=[],he=0;return $(U,ae,"","",function(ie){return Y.call(ne,ie,he++)}),ae}function ee(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(ne){(U._status===0||U._status===-1)&&(U._status=1,U._result=ne)},function(ne){(U._status===0||U._status===-1)&&(U._status=2,U._result=ne)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var te=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},ue={map:H,forEach:function(U,Y,ne){H(U,function(){Y.apply(this,arguments)},ne)},count:function(U){var Y=0;return H(U,function(){Y++}),Y},toArray:function(U){return H(U,function(Y){return Y})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return it.Activity=g,it.Children=ue,it.Component=T,it.Fragment=n,it.Profiler=i,it.PureComponent=k,it.StrictMode=r,it.Suspense=u,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,it.__COMPILER_RUNTIME={__proto__:null,c:function(U){return C.H.useMemoCache(U)}},it.cache=function(U){return function(){return U.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(U,Y,ne){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ae=E({},U.props),he=U.key;if(Y!=null)for(ie in Y.key!==void 0&&(he=""+Y.key),Y)!A.call(Y,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Y.ref===void 0||(ae[ie]=Y[ie]);var ie=arguments.length-2;if(ie===1)ae.children=ne;else if(1<ie){for(var me=Array(ie),Te=0;Te<ie;Te++)me[Te]=arguments[Te+2];ae.children=me}return N(U.type,he,ae)},it.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},it.createElement=function(U,Y,ne){var ae,he={},ie=null;if(Y!=null)for(ae in Y.key!==void 0&&(ie=""+Y.key),Y)A.call(Y,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(he[ae]=Y[ae]);var me=arguments.length-2;if(me===1)he.children=ne;else if(1<me){for(var Te=Array(me),Ae=0;Ae<me;Ae++)Te[Ae]=arguments[Ae+2];he.children=Te}if(U&&U.defaultProps)for(ae in me=U.defaultProps,me)he[ae]===void 0&&(he[ae]=me[ae]);return N(U,ie,he)},it.createRef=function(){return{current:null}},it.forwardRef=function(U){return{$$typeof:c,render:U}},it.isValidElement=L,it.lazy=function(U){return{$$typeof:h,_payload:{_status:-1,_result:U},_init:ee}},it.memo=function(U,Y){return{$$typeof:f,type:U,compare:Y===void 0?null:Y}},it.startTransition=function(U){var Y=C.T,ne={};C.T=ne;try{var ae=U(),he=C.S;he!==null&&he(ne,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(z,te)}catch(ie){te(ie)}finally{Y!==null&&ne.types!==null&&(Y.types=ne.types),C.T=Y}},it.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},it.use=function(U){return C.H.use(U)},it.useActionState=function(U,Y,ne){return C.H.useActionState(U,Y,ne)},it.useCallback=function(U,Y){return C.H.useCallback(U,Y)},it.useContext=function(U){return C.H.useContext(U)},it.useDebugValue=function(){},it.useDeferredValue=function(U,Y){return C.H.useDeferredValue(U,Y)},it.useEffect=function(U,Y){return C.H.useEffect(U,Y)},it.useEffectEvent=function(U){return C.H.useEffectEvent(U)},it.useId=function(){return C.H.useId()},it.useImperativeHandle=function(U,Y,ne){return C.H.useImperativeHandle(U,Y,ne)},it.useInsertionEffect=function(U,Y){return C.H.useInsertionEffect(U,Y)},it.useLayoutEffect=function(U,Y){return C.H.useLayoutEffect(U,Y)},it.useMemo=function(U,Y){return C.H.useMemo(U,Y)},it.useOptimistic=function(U,Y){return C.H.useOptimistic(U,Y)},it.useReducer=function(U,Y,ne){return C.H.useReducer(U,Y,ne)},it.useRef=function(U){return C.H.useRef(U)},it.useState=function(U){return C.H.useState(U)},it.useSyncExternalStore=function(U,Y,ne){return C.H.useSyncExternalStore(U,Y,ne)},it.useTransition=function(){return C.H.useTransition()},it.version="19.2.0",it}var rA;function lx(){return rA||(rA=1,Iy.exports=B3()),Iy.exports}var G=lx();const tg=V3(G);var My={exports:{}},Jd={},Oy={exports:{}},Py={};var iA;function U3(){return iA||(iA=1,(function(t){function e($,H){var ee=$.length;$.push(H);e:for(;0<ee;){var te=ee-1>>>1,ue=$[te];if(0<i(ue,H))$[te]=H,$[ee]=ue,ee=te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var H=$[0],ee=$.pop();if(ee!==H){$[0]=ee;e:for(var te=0,ue=$.length,U=ue>>>1;te<U;){var Y=2*(te+1)-1,ne=$[Y],ae=Y+1,he=$[ae];if(0>i(ne,ee))ae<ue&&0>i(he,ne)?($[te]=he,$[ae]=ee,te=ae):($[te]=ne,$[Y]=ee,te=Y);else if(ae<ue&&0>i(he,ee))$[te]=he,$[ae]=ee,te=ae;else break e}}return H}function i($,H){var ee=$.sortIndex-H.sortIndex;return ee!==0?ee:$.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],f=[],h=1,g=null,m=3,x=!1,_=!1,E=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function j($){for(var H=n(f);H!==null;){if(H.callback===null)r(f);else if(H.startTime<=$)r(f),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(f)}}function B($){if(E=!1,j($),!_)if(n(u)!==null)_=!0,z||(z=!0,V());else{var H=n(f);H!==null&&Q(B,H.startTime-$)}}var z=!1,C=-1,A=5,N=-1;function O(){return S?!0:!(t.unstable_now()-N<A)}function L(){if(S=!1,z){var $=t.unstable_now();N=$;var H=!0;try{e:{_=!1,E&&(E=!1,D(C),C=-1),x=!0;var ee=m;try{t:{for(j($),g=n(u);g!==null&&!(g.expirationTime>$&&O());){var te=g.callback;if(typeof te=="function"){g.callback=null,m=g.priorityLevel;var ue=te(g.expirationTime<=$);if($=t.unstable_now(),typeof ue=="function"){g.callback=ue,j($),H=!0;break t}g===n(u)&&r(u),j($)}else r(u);g=n(u)}if(g!==null)H=!0;else{var U=n(f);U!==null&&Q(B,U.startTime-$),H=!1}}break e}finally{g=null,m=ee,x=!1}H=void 0}}finally{H?V():z=!1}}}var V;if(typeof k=="function")V=function(){k(L)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,J=M.port2;M.port1.onmessage=L,V=function(){J.postMessage(null)}}else V=function(){T(L,0)};function Q($,H){C=T(function(){$(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var ee=m;m=H;try{return $()}finally{m=ee}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=m;m=$;try{return H()}finally{m=ee}},t.unstable_scheduleCallback=function($,H,ee){var te=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?te+ee:te):ee=te,$){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ee+ue,$={id:h++,callback:H,priorityLevel:$,startTime:ee,expirationTime:ue,sortIndex:-1},ee>te?($.sortIndex=ee,e(f,$),n(u)===null&&$===n(f)&&(E?(D(C),C=-1):E=!0,Q(B,ee-te))):($.sortIndex=ue,e(u,$),_||x||(_=!0,z||(z=!0,V()))),$},t.unstable_shouldYield=O,t.unstable_wrapCallback=function($){var H=m;return function(){var ee=m;m=H;try{return $.apply(this,arguments)}finally{m=ee}}}})(Py)),Py}var aA;function F3(){return aA||(aA=1,Oy.exports=U3()),Oy.exports}var jy={exports:{}},pr={};var sA;function G3(){if(sA)return pr;sA=1;var t=lx();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,f,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:f,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return pr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pr.createPortal=function(u,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(u,f,null,h)},pr.flushSync=function(u){var f=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=f,r.p=h,r.d.f()}},pr.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(u,f))},pr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},pr.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var h=f.as,g=c(h,f.crossOrigin),m=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:x}):h==="script"&&r.d.X(u,{crossOrigin:g,integrity:m,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},pr.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=c(f.as,f.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(u)},pr.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,g=c(h,f.crossOrigin);r.d.L(u,h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},pr.preloadModule=function(u,f){if(typeof u=="string")if(f){var h=c(f.as,f.crossOrigin);r.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(u)},pr.requestFormReset=function(u){r.d.r(u)},pr.unstable_batchedUpdates=function(u,f){return u(f)},pr.useFormState=function(u,f,h){return o.H.useFormState(u,f,h)},pr.useFormStatus=function(){return o.H.useHostTransitionStatus()},pr.version="19.2.0",pr}var oA;function q3(){if(oA)return jy.exports;oA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jy.exports=G3(),jy.exports}var lA;function H3(){if(lA)return Jd;lA=1;var t=F3(),e=lx(),n=q3();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function f(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var d=s,p=l;;){var b=d.return;if(b===null)break;var w=b.alternate;if(w===null){if(p=b.return,p!==null){d=p;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===d)return u(b),s;if(w===p)return u(b),l;w=w.sibling}throw Error(r(188))}if(d.return!==p.return)d=b,p=w;else{for(var I=!1,F=b.child;F;){if(F===d){I=!0,d=b,p=w;break}if(F===p){I=!0,p=b,d=w;break}F=F.sibling}if(!I){for(F=w.child;F;){if(F===d){I=!0,d=w,p=b;break}if(F===p){I=!0,p=w,d=b;break}F=F.sibling}if(!I)throw Error(r(189))}}if(d.alternate!==p)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),k=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function J(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case B:return"Suspense";case z:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case k:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case j:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case C:return l=s.displayName||null,l!==null?l:J(s.type)||"Memo";case A:l=s._payload,s=s._init;try{return J(s(l))}catch{}}return null}var Q=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},te=[],ue=-1;function U(s){return{current:s}}function Y(s){0>ue||(s.current=te[ue],te[ue]=null,ue--)}function ne(s,l){ue++,te[ue]=s.current,s.current=l}var ae=U(null),he=U(null),ie=U(null),me=U(null);function Te(s,l){switch(ne(ie,l),ne(he,s),ne(ae,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?ET(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=ET(l),s=ST(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Y(ae),ne(ae,s)}function Ae(){Y(ae),Y(he),Y(ie)}function De(s){s.memoizedState!==null&&ne(me,s);var l=ae.current,d=ST(l,s.type);l!==d&&(ne(he,s),ne(ae,d))}function be(s){he.current===s&&(Y(ae),Y(he)),me.current===s&&(Y(me),Xd._currentValue=ee)}var Ee,$e;function Pe(s){if(Ee===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Ee=l&&l[1]||"",$e=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+s+$e}var ze=!1;function Me(s,l){if(!s||ze)return"";ze=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(fe){var ce=fe}Reflect.construct(s,[],ye)}else{try{ye.call()}catch(fe){ce=fe}s.call(ye.prototype)}}else{try{throw Error()}catch(fe){ce=fe}(ye=s())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(fe){if(fe&&ce&&typeof fe.stack=="string")return[fe.stack,ce.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),I=w[0],F=w[1];if(I&&F){var X=I.split(`
`),le=F.split(`
`);for(b=p=0;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;for(;b<le.length&&!le[b].includes("DetermineComponentFrameRoot");)b++;if(p===X.length||b===le.length)for(p=X.length-1,b=le.length-1;1<=p&&0<=b&&X[p]!==le[b];)b--;for(;1<=p&&0<=b;p--,b--)if(X[p]!==le[b]){if(p!==1||b!==1)do if(p--,b--,0>b||X[p]!==le[b]){var pe=`
`+X[p].replace(" at new "," at ");return s.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",s.displayName)),pe}while(1<=p&&0<=b);break}}}finally{ze=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Pe(d):""}function et(s,l){switch(s.tag){case 26:case 27:case 5:return Pe(s.type);case 16:return Pe("Lazy");case 13:return s.child!==l&&l!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return Me(s.type,!1);case 11:return Me(s.type.render,!1);case 1:return Me(s.type,!0);case 31:return Pe("Activity");default:return""}}function dt(s){try{var l="",d=null;do l+=et(s,d),d=s,s=s.return;while(s);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Oe=Object.prototype.hasOwnProperty,qe=t.unstable_scheduleCallback,Nt=t.unstable_cancelCallback,vn=t.unstable_shouldYield,rn=t.unstable_requestPaint,ft=t.unstable_now,Ot=t.unstable_getCurrentPriorityLevel,fr=t.unstable_ImmediatePriority,hr=t.unstable_UserBlockingPriority,Yr=t.unstable_NormalPriority,Ns=t.unstable_LowPriority,je=t.unstable_IdlePriority,He=t.log,Ii=t.unstable_setDisableYieldValue,Lt=null,Wt=null;function yn(s){if(typeof He=="function"&&Ii(s),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Lt,s)}catch{}}var Rt=Math.clz32?Math.clz32:an,Tt=Math.log,Zn=Math.LN2;function an(s){return s>>>=0,s===0?32:31-(Tt(s)/Zn|0)|0}var We=256,It=262144,Et=4194304;function Pt(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Tn(s,l,d){var p=s.pendingLanes;if(p===0)return 0;var b=0,w=s.suspendedLanes,I=s.pingedLanes;s=s.warmLanes;var F=p&134217727;return F!==0?(p=F&~w,p!==0?b=Pt(p):(I&=F,I!==0?b=Pt(I):d||(d=F&~s,d!==0&&(b=Pt(d))))):(F=p&~w,F!==0?b=Pt(F):I!==0?b=Pt(I):d||(d=p&~s,d!==0&&(b=Pt(d)))),b===0?0:l!==0&&l!==b&&(l&w)===0&&(w=b&-b,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:b}function dn(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function ic(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fa(){var s=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),s}function Dr(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function oi(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function j0(s,l,d,p,b,w){var I=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var F=s.entanglements,X=s.expirationTimes,le=s.hiddenUpdates;for(d=I&~d;0<d;){var pe=31-Rt(d),ye=1<<pe;F[pe]=0,X[pe]=-1;var ce=le[pe];if(ce!==null)for(le[pe]=null,pe=0;pe<ce.length;pe++){var fe=ce[pe];fe!==null&&(fe.lane&=-536870913)}d&=~ye}p!==0&&Xo(s,p,0),w!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=w&~(I&~l))}function Xo(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var p=31-Rt(l);s.entangledLanes|=l,s.entanglements[p]=s.entanglements[p]|1073741824|d&261930}function Ju(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var p=31-Rt(d),b=1<<p;b&l|s[p]&l&&(s[p]|=l),d&=~b}}function ed(s,l){var d=l&-l;return d=(d&42)!==0?1:Wo(d),(d&(s.suspendedLanes|l))!==0?0:d}function Wo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ga(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Mh(){var s=H.p;return s!==0?s:(s=window.event,s===void 0?32:YT(s.type))}function Mi(s,l){var d=H.p;try{return H.p=s,l()}finally{H.p=d}}var Oi=Math.random().toString(36).slice(2),An="__reactFiber$"+Oi,Yn="__reactProps$"+Oi,ra="__reactContainer$"+Oi,ac="__reactEvents$"+Oi,V0="__reactListeners$"+Oi,Oh="__reactHandles$"+Oi,Ph="__reactResources$"+Oi,ia="__reactMarker$"+Oi;function sc(s){delete s[An],delete s[Yn],delete s[ac],delete s[V0],delete s[Oh]}function aa(s){var l=s[An];if(l)return l;for(var d=s.parentNode;d;){if(l=d[ra]||d[An]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=NT(s);s!==null;){if(d=s[An])return d;s=NT(s)}return l}s=d,d=s.parentNode}return null}function li(s){if(s=s[An]||s[ra]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Xr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function sa(s){var l=s[Ph];return l||(l=s[Ph]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Cn(s){s[ia]=!0}var td=new Set,nd={};function oa(s,l){la(s,l),la(s+"Capture",l)}function la(s,l){for(nd[s]=l,s=0;s<l.length;s++)td.add(l[s])}var rd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),id={},ad={};function jh(s){return Oe.call(ad,s)?!0:Oe.call(id,s)?!1:rd.test(s)?ad[s]=!0:(id[s]=!0,!1)}function oc(s,l,d){if(jh(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function Wr(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function Rn(s,l,d,p){if(p===null)s.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+p)}}function Xn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Is(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function sd(s,l,d){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,w=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(I){d=""+I,w.call(this,I)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return d},setValue:function(I){d=""+I},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function jt(s){if(!s._valueTracker){var l=Is(s)?"checked":"value";s._valueTracker=sd(s,l,""+s[l])}}function Ko(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),p="";return s&&(p=Is(s)?s.checked?"true":"false":s.value),s=p,s!==d?(l.setValue(s),!0):!1}function ca(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Qo=/[\n"\\]/g;function kr(s){return s.replace(Qo,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function lc(s,l,d,p,b,w,I,F){s.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.type=I:s.removeAttribute("type"),l!=null?I==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Xn(l)):s.value!==""+Xn(l)&&(s.value=""+Xn(l)):I!=="submit"&&I!=="reset"||s.removeAttribute("value"),l!=null?od(s,I,Xn(l)):d!=null?od(s,I,Xn(d)):p!=null&&s.removeAttribute("value"),b==null&&w!=null&&(s.defaultChecked=!!w),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+Xn(F):s.removeAttribute("name")}function Vh(s,l,d,p,b,w,I,F){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){jt(s);return}d=d!=null?""+Xn(d):"",l=l!=null?""+Xn(l):d,F||l===s.value||(s.value=l),s.defaultValue=l}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=F?s.checked:!!p,s.defaultChecked=!!p,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.name=I),jt(s)}function od(s,l,d){l==="number"&&ca(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function Ms(s,l,d,p){if(s=s.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<s.length;d++)b=l.hasOwnProperty("$"+s[d].value),s[d].selected!==b&&(s[d].selected=b),b&&p&&(s[d].defaultSelected=!0)}else{for(d=""+Xn(d),l=null,b=0;b<s.length;b++){if(s[b].value===d){s[b].selected=!0,p&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function zh(s,l,d){if(l!=null&&(l=""+Xn(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+Xn(d):""}function Os(s,l,d,p){if(l==null){if(p!=null){if(d!=null)throw Error(r(92));if(Q(p)){if(1<p.length)throw Error(r(93));p=p[0]}d=p}d==null&&(d=""),l=d}d=Xn(l),s.defaultValue=d,p=s.textContent,p===d&&p!==""&&p!==null&&(s.value=p),jt(s)}function Nr(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var Lh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ld(s,l,d){var p=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":p?s.setProperty(l,d):typeof d!="number"||d===0||Lh.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function cd(s,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var b in l)p=l[b],l.hasOwnProperty(b)&&d[b]!==p&&ld(s,b,p)}else for(var w in l)l.hasOwnProperty(w)&&ld(s,w,l[w])}function cc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uc(s){return Ps.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Pi(){}var ud=null;function ci(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var js=null,ua=null;function Zo(s){var l=li(s);if(l&&(s=l.stateNode)){var d=s[Yn]||null;e:switch(s=l.stateNode,l.type){case"input":if(lc(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+kr(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var p=d[l];if(p!==s&&p.form===s.form){var b=p[Yn]||null;if(!b)throw Error(r(90));lc(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<d.length;l++)p=d[l],p.form===s.form&&Ko(p)}break e;case"textarea":zh(s,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Ms(s,!!d.multiple,l,!1)}}}var dc=!1;function Vs(s,l,d){if(dc)return s(l,d);dc=!0;try{var p=s(l);return p}finally{if(dc=!1,(js!==null||ua!==null)&&(Mp(),js&&(l=js,s=ua,ua=js=null,Zo(l),s)))for(l=0;l<s.length;l++)Zo(s[l])}}function ji(s,l){var d=s.stateNode;if(d===null)return null;var p=d[Yn]||null;if(p===null)return null;d=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(ui)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{Jo=!1}var da=null,dd=null,el=null;function fd(){if(el)return el;var s,l=dd,d=l.length,p,b="value"in da?da.value:da.textContent,w=b.length;for(s=0;s<d&&l[s]===b[s];s++);var I=d-s;for(p=1;p<=I&&l[d-p]===b[w-p];p++);return el=b.slice(s,1<p?1-p:void 0)}function tl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function qa(){return!0}function Vi(){return!1}function Jn(s){function l(d,p,b,w,I){this._reactName=d,this._targetInst=b,this.type=p,this.nativeEvent=w,this.target=I,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(d=s[F],this[F]=d?d(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?qa:Vi,this.isPropagationStopped=Vi,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),l}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=Jn(Ha),zs=g({},Ha,{view:0,detail:0}),hd=Jn(zs),Ls,fc,ha,hc=g({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ha&&(ha&&s.type==="mousemove"?(Ls=s.screenX-ha.screenX,fc=s.screenY-ha.screenY):fc=Ls=0,ha=s),Ls)},movementY:function(s){return"movementY"in s?s.movementY:fc}}),pd=Jn(hc),nl=g({},hc,{dataTransfer:0}),Uh=Jn(nl),Fh=g({},zs,{relatedTarget:0}),rl=Jn(Fh),gd=g({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),Gh=Jn(gd),pc=g({},Ha,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qh=Jn(pc),Hh=g({},Ha,{data:0}),pa=Jn(Hh),$h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Xh[s])?!!l[s]:!1}function Bs(){return Wh}var wr=g({},zs,{key:function(s){if(s.key){var l=$h[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=tl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Yh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(s){return s.type==="keypress"?tl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?tl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Kh=Jn(wr),Qh=g({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=Jn(Qh),v=g({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),R=Jn(v),P=g({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=Jn(P),se=g({},hc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),de=Jn(se),Ce=g({},Ha,{newState:0,oldState:0}),st=Jn(Ce),bn=[9,13,27,32],Dt=ui&&"CompositionEvent"in window,en=null;ui&&"documentMode"in document&&(en=document.documentMode);var di=ui&&"TextEvent"in window&&!en,ga=ui&&(!Dt||en&&8<en&&11>=en),zi=" ",Li=!1;function il(s,l){switch(s){case"keyup":return bn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var mc=!1;function oP(s,l){switch(s){case"compositionend":return gc(l);case"keypress":return l.which!==32?null:(Li=!0,zi);case"textInput":return s=l.data,s===zi&&Li?null:s;default:return null}}function lP(s,l){if(mc)return s==="compositionend"||!Dt&&il(s,l)?(s=fd(),el=dd=da=null,mc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ga&&l.locale!=="ko"?null:l.data;default:return null}}var cP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ow(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!cP[s.type]:l==="textarea"}function Pw(s,l,d,p){js?ua?ua.push(p):ua=[p]:js=p,l=Bp(l,"onChange"),0<l.length&&(d=new fa("onChange","change",null,d,p),s.push({event:d,listeners:l}))}var md=null,vd=null;function uP(s){vT(s,0)}function Zh(s){var l=Xr(s);if(Ko(l))return s}function jw(s,l){if(s==="change")return l}var Vw=!1;if(ui){var z0;if(ui){var L0="oninput"in document;if(!L0){var zw=document.createElement("div");zw.setAttribute("oninput","return;"),L0=typeof zw.oninput=="function"}z0=L0}else z0=!1;Vw=z0&&(!document.documentMode||9<document.documentMode)}function Lw(){md&&(md.detachEvent("onpropertychange",Bw),vd=md=null)}function Bw(s){if(s.propertyName==="value"&&Zh(vd)){var l=[];Pw(l,vd,s,ci(s)),Vs(uP,l)}}function dP(s,l,d){s==="focusin"?(Lw(),md=l,vd=d,md.attachEvent("onpropertychange",Bw)):s==="focusout"&&Lw()}function fP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zh(vd)}function hP(s,l){if(s==="click")return Zh(l)}function pP(s,l){if(s==="input"||s==="change")return Zh(l)}function gP(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Kr=typeof Object.is=="function"?Object.is:gP;function yd(s,l){if(Kr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),p=Object.keys(l);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var b=d[p];if(!Oe.call(l,b)||!Kr(s[b],l[b]))return!1}return!0}function Uw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Fw(s,l){var d=Uw(s);s=0;for(var p;d;){if(d.nodeType===3){if(p=s+d.textContent.length,s<=l&&p>=l)return{node:d,offset:l-s};s=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Uw(d)}}function Gw(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Gw(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function qw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ca(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=ca(s.document)}return l}function B0(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var mP=ui&&"documentMode"in document&&11>=document.documentMode,vc=null,U0=null,bd=null,F0=!1;function Hw(s,l,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;F0||vc==null||vc!==ca(p)||(p=vc,"selectionStart"in p&&B0(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),bd&&yd(bd,p)||(bd=p,p=Bp(U0,"onSelect"),0<p.length&&(l=new fa("onSelect","select",null,l,d),s.push({event:l,listeners:p}),l.target=vc)))}function al(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var yc={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionrun:al("Transition","TransitionRun"),transitionstart:al("Transition","TransitionStart"),transitioncancel:al("Transition","TransitionCancel"),transitionend:al("Transition","TransitionEnd")},G0={},$w={};ui&&($w=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function sl(s){if(G0[s])return G0[s];if(!yc[s])return s;var l=yc[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in $w)return G0[s]=l[d];return s}var Yw=sl("animationend"),Xw=sl("animationiteration"),Ww=sl("animationstart"),vP=sl("transitionrun"),yP=sl("transitionstart"),bP=sl("transitioncancel"),Kw=sl("transitionend"),Qw=new Map,q0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");q0.push("scrollEnd");function Bi(s,l){Qw.set(s,l),oa(l,[s])}var Jh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},fi=[],bc=0,H0=0;function ep(){for(var s=bc,l=H0=bc=0;l<s;){var d=fi[l];fi[l++]=null;var p=fi[l];fi[l++]=null;var b=fi[l];fi[l++]=null;var w=fi[l];if(fi[l++]=null,p!==null&&b!==null){var I=p.pending;I===null?b.next=b:(b.next=I.next,I.next=b),p.pending=b}w!==0&&Zw(d,b,w)}}function tp(s,l,d,p){fi[bc++]=s,fi[bc++]=l,fi[bc++]=d,fi[bc++]=p,H0|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function $0(s,l,d,p){return tp(s,l,d,p),np(s)}function ol(s,l){return tp(s,null,null,l),np(s)}function Zw(s,l,d){s.lanes|=d;var p=s.alternate;p!==null&&(p.lanes|=d);for(var b=!1,w=s.return;w!==null;)w.childLanes|=d,p=w.alternate,p!==null&&(p.childLanes|=d),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(b=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,b&&l!==null&&(b=31-Rt(d),s=w.hiddenUpdates,p=s[b],p===null?s[b]=[l]:p.push(l),l.lane=d|536870912),w):null}function np(s){if(50<Ud)throw Ud=0,ty=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var xc={};function xP(s,l,d,p){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(s,l,d,p){return new xP(s,l,d,p)}function Y0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ya(s,l){var d=s.alternate;return d===null?(d=Qr(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function Jw(s,l){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function rp(s,l,d,p,b,w){var I=0;if(p=s,typeof s=="function")Y0(s)&&(I=1);else if(typeof s=="string")I=T3(s,d,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Qr(31,d,l,b),s.elementType=N,s.lanes=w,s;case E:return ll(d.children,b,w,l);case S:I=8,b|=24;break;case T:return s=Qr(12,d,l,b|2),s.elementType=T,s.lanes=w,s;case B:return s=Qr(13,d,l,b),s.elementType=B,s.lanes=w,s;case z:return s=Qr(19,d,l,b),s.elementType=z,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:I=10;break e;case D:I=9;break e;case j:I=11;break e;case C:I=14;break e;case A:I=16,p=null;break e}I=29,d=Error(r(130,s===null?"null":typeof s,"")),p=null}return l=Qr(I,d,l,b),l.elementType=s,l.type=p,l.lanes=w,l}function ll(s,l,d,p){return s=Qr(7,s,p,l),s.lanes=d,s}function X0(s,l,d){return s=Qr(6,s,null,l),s.lanes=d,s}function eE(s){var l=Qr(18,null,null,0);return l.stateNode=s,l}function W0(s,l,d){return l=Qr(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var tE=new WeakMap;function hi(s,l){if(typeof s=="object"&&s!==null){var d=tE.get(s);return d!==void 0?d:(l={value:s,source:l,stack:dt(l)},tE.set(s,l),l)}return{value:s,source:l,stack:dt(l)}}var _c=[],wc=0,ip=null,xd=0,pi=[],gi=0,Us=null,ma=1,va="";function Xa(s,l){_c[wc++]=xd,_c[wc++]=ip,ip=s,xd=l}function nE(s,l,d){pi[gi++]=ma,pi[gi++]=va,pi[gi++]=Us,Us=s;var p=ma;s=va;var b=32-Rt(p)-1;p&=~(1<<b),d+=1;var w=32-Rt(l)+b;if(30<w){var I=b-b%5;w=(p&(1<<I)-1).toString(32),p>>=I,b-=I,ma=1<<32-Rt(l)+b|d<<b|p,va=w+s}else ma=1<<w|d<<b|p,va=s}function K0(s){s.return!==null&&(Xa(s,1),nE(s,1,0))}function Q0(s){for(;s===ip;)ip=_c[--wc],_c[wc]=null,xd=_c[--wc],_c[wc]=null;for(;s===Us;)Us=pi[--gi],pi[gi]=null,va=pi[--gi],pi[gi]=null,ma=pi[--gi],pi[gi]=null}function rE(s,l){pi[gi++]=ma,pi[gi++]=va,pi[gi++]=Us,ma=l.id,va=l.overflow,Us=s}var er=null,Qt=null,_t=!1,Fs=null,mi=!1,Z0=Error(r(519));function Gs(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _d(hi(l,s)),Z0}function iE(s){var l=s.stateNode,d=s.type,p=s.memoizedProps;switch(l[An]=s,l[Yn]=p,d){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(d=0;d<Gd.length;d++)pt(Gd[d],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Vh(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),Os(l,p.value,p.defaultValue,p.children)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||p.suppressHydrationWarning===!0||_T(l.textContent,d)?(p.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),p.onScroll!=null&&pt("scroll",l),p.onScrollEnd!=null&&pt("scrollend",l),p.onClick!=null&&(l.onclick=Pi),l=!0):l=!1,l||Gs(s,!0)}function aE(s){for(er=s.return;er;)switch(er.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:er=er.return}}function Ec(s){if(s!==er)return!1;if(!_t)return aE(s),_t=!0,!1;var l=s.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||my(s.type,s.memoizedProps)),d=!d),d&&Qt&&Gs(s),aE(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qt=kT(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Qt=kT(s)}else l===27?(l=Qt,ro(s.type)?(s=_y,_y=null,Qt=s):Qt=l):Qt=er?yi(s.stateNode.nextSibling):null;return!0}function cl(){Qt=er=null,_t=!1}function J0(){var s=Fs;return s!==null&&(Pr===null?Pr=s:Pr.push.apply(Pr,s),Fs=null),s}function _d(s){Fs===null?Fs=[s]:Fs.push(s)}var ev=U(null),ul=null,Wa=null;function qs(s,l,d){ne(ev,l._currentValue),l._currentValue=d}function Ka(s){s._currentValue=ev.current,Y(ev)}function tv(s,l,d){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===d)break;s=s.return}}function nv(s,l,d,p){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var w=b.dependencies;if(w!==null){var I=b.child;w=w.firstContext;e:for(;w!==null;){var F=w;w=b;for(var X=0;X<l.length;X++)if(F.context===l[X]){w.lanes|=d,F=w.alternate,F!==null&&(F.lanes|=d),tv(w.return,d,s),p||(I=null);break e}w=F.next}}else if(b.tag===18){if(I=b.return,I===null)throw Error(r(341));I.lanes|=d,w=I.alternate,w!==null&&(w.lanes|=d),tv(I,d,s),I=null}else I=b.child;if(I!==null)I.return=b;else for(I=b;I!==null;){if(I===s){I=null;break}if(b=I.sibling,b!==null){b.return=I.return,I=b;break}I=I.return}b=I}}function Sc(s,l,d,p){s=null;for(var b=l,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var I=b.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var F=b.type;Kr(b.pendingProps.value,I.value)||(s!==null?s.push(F):s=[F])}}else if(b===me.current){if(I=b.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(Xd):s=[Xd])}b=b.return}s!==null&&nv(l,s,d,p),l.flags|=262144}function ap(s){for(s=s.firstContext;s!==null;){if(!Kr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function dl(s){ul=s,Wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tr(s){return sE(ul,s)}function sp(s,l){return ul===null&&dl(s),sE(s,l)}function sE(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Wa===null){if(s===null)throw Error(r(308));Wa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Wa=Wa.next=l;return d}var _P=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,p){s.push(p)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},wP=t.unstable_scheduleCallback,EP=t.unstable_NormalPriority,Dn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rv(){return{controller:new _P,data:new Map,refCount:0}}function wd(s){s.refCount--,s.refCount===0&&wP(EP,function(){s.controller.abort()})}var Ed=null,iv=0,Tc=0,Ac=null;function SP(s,l){if(Ed===null){var d=Ed=[];iv=0,Tc=oy(),Ac={status:"pending",value:void 0,then:function(p){d.push(p)}}}return iv++,l.then(oE,oE),l}function oE(){if(--iv===0&&Ed!==null){Ac!==null&&(Ac.status="fulfilled");var s=Ed;Ed=null,Tc=0,Ac=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function TP(s,l){var d=[],p={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return s.then(function(){p.status="fulfilled",p.value=l;for(var b=0;b<d.length;b++)(0,d[b])(l)},function(b){for(p.status="rejected",p.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),p}var lE=$.S;$.S=function(s,l){HS=ft(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&SP(s,l),lE!==null&&lE(s,l)};var fl=U(null);function av(){var s=fl.current;return s!==null?s:Yt.pooledCache}function op(s,l){l===null?ne(fl,fl.current):ne(fl,l.pool)}function cE(){var s=av();return s===null?null:{parent:Dn._currentValue,pool:s}}var Cc=Error(r(460)),sv=Error(r(474)),lp=Error(r(542)),cp={then:function(){}};function uE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dE(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(Pi,Pi),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,hE(s),s;default:if(typeof l.status=="string")l.then(Pi,Pi);else{if(s=Yt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(p){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=p}},function(p){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,hE(s),s}throw pl=l,Cc}}function hl(s){try{var l=s._init;return l(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(pl=d,Cc):d}}var pl=null;function fE(){if(pl===null)throw Error(r(459));var s=pl;return pl=null,s}function hE(s){if(s===Cc||s===lp)throw Error(r(483))}var Rc=null,Sd=0;function up(s){var l=Sd;return Sd+=1,Rc===null&&(Rc=[]),dE(Rc,s,l)}function Td(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function dp(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function pE(s){function l(re,Z){if(s){var oe=re.deletions;oe===null?(re.deletions=[Z],re.flags|=16):oe.push(Z)}}function d(re,Z){if(!s)return null;for(;Z!==null;)l(re,Z),Z=Z.sibling;return null}function p(re){for(var Z=new Map;re!==null;)re.key!==null?Z.set(re.key,re):Z.set(re.index,re),re=re.sibling;return Z}function b(re,Z){return re=Ya(re,Z),re.index=0,re.sibling=null,re}function w(re,Z,oe){return re.index=oe,s?(oe=re.alternate,oe!==null?(oe=oe.index,oe<Z?(re.flags|=67108866,Z):oe):(re.flags|=67108866,Z)):(re.flags|=1048576,Z)}function I(re){return s&&re.alternate===null&&(re.flags|=67108866),re}function F(re,Z,oe,ge){return Z===null||Z.tag!==6?(Z=X0(oe,re.mode,ge),Z.return=re,Z):(Z=b(Z,oe),Z.return=re,Z)}function X(re,Z,oe,ge){var Ue=oe.type;return Ue===E?pe(re,Z,oe.props.children,ge,oe.key):Z!==null&&(Z.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===A&&hl(Ue)===Z.type)?(Z=b(Z,oe.props),Td(Z,oe),Z.return=re,Z):(Z=rp(oe.type,oe.key,oe.props,null,re.mode,ge),Td(Z,oe),Z.return=re,Z)}function le(re,Z,oe,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==oe.containerInfo||Z.stateNode.implementation!==oe.implementation?(Z=W0(oe,re.mode,ge),Z.return=re,Z):(Z=b(Z,oe.children||[]),Z.return=re,Z)}function pe(re,Z,oe,ge,Ue){return Z===null||Z.tag!==7?(Z=ll(oe,re.mode,ge,Ue),Z.return=re,Z):(Z=b(Z,oe),Z.return=re,Z)}function ye(re,Z,oe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=X0(""+Z,re.mode,oe),Z.return=re,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return oe=rp(Z.type,Z.key,Z.props,null,re.mode,oe),Td(oe,Z),oe.return=re,oe;case _:return Z=W0(Z,re.mode,oe),Z.return=re,Z;case A:return Z=hl(Z),ye(re,Z,oe)}if(Q(Z)||V(Z))return Z=ll(Z,re.mode,oe,null),Z.return=re,Z;if(typeof Z.then=="function")return ye(re,up(Z),oe);if(Z.$$typeof===k)return ye(re,sp(re,Z),oe);dp(re,Z)}return null}function ce(re,Z,oe,ge){var Ue=Z!==null?Z.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ue!==null?null:F(re,Z,""+oe,ge);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return oe.key===Ue?X(re,Z,oe,ge):null;case _:return oe.key===Ue?le(re,Z,oe,ge):null;case A:return oe=hl(oe),ce(re,Z,oe,ge)}if(Q(oe)||V(oe))return Ue!==null?null:pe(re,Z,oe,ge,null);if(typeof oe.then=="function")return ce(re,Z,up(oe),ge);if(oe.$$typeof===k)return ce(re,Z,sp(re,oe),ge);dp(re,oe)}return null}function fe(re,Z,oe,ge,Ue){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return re=re.get(oe)||null,F(Z,re,""+ge,Ue);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case x:return re=re.get(ge.key===null?oe:ge.key)||null,X(Z,re,ge,Ue);case _:return re=re.get(ge.key===null?oe:ge.key)||null,le(Z,re,ge,Ue);case A:return ge=hl(ge),fe(re,Z,oe,ge,Ue)}if(Q(ge)||V(ge))return re=re.get(oe)||null,pe(Z,re,ge,Ue,null);if(typeof ge.then=="function")return fe(re,Z,oe,up(ge),Ue);if(ge.$$typeof===k)return fe(re,Z,oe,sp(Z,ge),Ue);dp(Z,ge)}return null}function Ie(re,Z,oe,ge){for(var Ue=null,At=null,Ve=Z,ut=Z=0,vt=null;Ve!==null&&ut<oe.length;ut++){Ve.index>ut?(vt=Ve,Ve=null):vt=Ve.sibling;var Ct=ce(re,Ve,oe[ut],ge);if(Ct===null){Ve===null&&(Ve=vt);break}s&&Ve&&Ct.alternate===null&&l(re,Ve),Z=w(Ct,Z,ut),At===null?Ue=Ct:At.sibling=Ct,At=Ct,Ve=vt}if(ut===oe.length)return d(re,Ve),_t&&Xa(re,ut),Ue;if(Ve===null){for(;ut<oe.length;ut++)Ve=ye(re,oe[ut],ge),Ve!==null&&(Z=w(Ve,Z,ut),At===null?Ue=Ve:At.sibling=Ve,At=Ve);return _t&&Xa(re,ut),Ue}for(Ve=p(Ve);ut<oe.length;ut++)vt=fe(Ve,re,ut,oe[ut],ge),vt!==null&&(s&&vt.alternate!==null&&Ve.delete(vt.key===null?ut:vt.key),Z=w(vt,Z,ut),At===null?Ue=vt:At.sibling=vt,At=vt);return s&&Ve.forEach(function(lo){return l(re,lo)}),_t&&Xa(re,ut),Ue}function Ye(re,Z,oe,ge){if(oe==null)throw Error(r(151));for(var Ue=null,At=null,Ve=Z,ut=Z=0,vt=null,Ct=oe.next();Ve!==null&&!Ct.done;ut++,Ct=oe.next()){Ve.index>ut?(vt=Ve,Ve=null):vt=Ve.sibling;var lo=ce(re,Ve,Ct.value,ge);if(lo===null){Ve===null&&(Ve=vt);break}s&&Ve&&lo.alternate===null&&l(re,Ve),Z=w(lo,Z,ut),At===null?Ue=lo:At.sibling=lo,At=lo,Ve=vt}if(Ct.done)return d(re,Ve),_t&&Xa(re,ut),Ue;if(Ve===null){for(;!Ct.done;ut++,Ct=oe.next())Ct=ye(re,Ct.value,ge),Ct!==null&&(Z=w(Ct,Z,ut),At===null?Ue=Ct:At.sibling=Ct,At=Ct);return _t&&Xa(re,ut),Ue}for(Ve=p(Ve);!Ct.done;ut++,Ct=oe.next())Ct=fe(Ve,re,ut,Ct.value,ge),Ct!==null&&(s&&Ct.alternate!==null&&Ve.delete(Ct.key===null?ut:Ct.key),Z=w(Ct,Z,ut),At===null?Ue=Ct:At.sibling=Ct,At=Ct);return s&&Ve.forEach(function(j3){return l(re,j3)}),_t&&Xa(re,ut),Ue}function Gt(re,Z,oe,ge){if(typeof oe=="object"&&oe!==null&&oe.type===E&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:e:{for(var Ue=oe.key;Z!==null;){if(Z.key===Ue){if(Ue=oe.type,Ue===E){if(Z.tag===7){d(re,Z.sibling),ge=b(Z,oe.props.children),ge.return=re,re=ge;break e}}else if(Z.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===A&&hl(Ue)===Z.type){d(re,Z.sibling),ge=b(Z,oe.props),Td(ge,oe),ge.return=re,re=ge;break e}d(re,Z);break}else l(re,Z);Z=Z.sibling}oe.type===E?(ge=ll(oe.props.children,re.mode,ge,oe.key),ge.return=re,re=ge):(ge=rp(oe.type,oe.key,oe.props,null,re.mode,ge),Td(ge,oe),ge.return=re,re=ge)}return I(re);case _:e:{for(Ue=oe.key;Z!==null;){if(Z.key===Ue)if(Z.tag===4&&Z.stateNode.containerInfo===oe.containerInfo&&Z.stateNode.implementation===oe.implementation){d(re,Z.sibling),ge=b(Z,oe.children||[]),ge.return=re,re=ge;break e}else{d(re,Z);break}else l(re,Z);Z=Z.sibling}ge=W0(oe,re.mode,ge),ge.return=re,re=ge}return I(re);case A:return oe=hl(oe),Gt(re,Z,oe,ge)}if(Q(oe))return Ie(re,Z,oe,ge);if(V(oe)){if(Ue=V(oe),typeof Ue!="function")throw Error(r(150));return oe=Ue.call(oe),Ye(re,Z,oe,ge)}if(typeof oe.then=="function")return Gt(re,Z,up(oe),ge);if(oe.$$typeof===k)return Gt(re,Z,sp(re,oe),ge);dp(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,Z!==null&&Z.tag===6?(d(re,Z.sibling),ge=b(Z,oe),ge.return=re,re=ge):(d(re,Z),ge=X0(oe,re.mode,ge),ge.return=re,re=ge),I(re)):d(re,Z)}return function(re,Z,oe,ge){try{Sd=0;var Ue=Gt(re,Z,oe,ge);return Rc=null,Ue}catch(Ve){if(Ve===Cc||Ve===lp)throw Ve;var At=Qr(29,Ve,null,re.mode);return At.lanes=ge,At.return=re,At}finally{}}}var gl=pE(!0),gE=pE(!1),Hs=!1;function ov(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lv(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function $s(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ys(s,l,d){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(kt&2)!==0){var b=p.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),p.pending=l,l=np(s),Zw(s,null,d),l}return tp(s,p,l,d),np(s)}function Ad(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var p=l.lanes;p&=s.pendingLanes,d|=p,l.lanes=d,Ju(s,d)}}function cv(s,l){var d=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var b=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var I={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?b=w=I:w=w.next=I,d=d.next}while(d!==null);w===null?b=w=l:w=w.next=l}else b=w=l;d={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var uv=!1;function Cd(){if(uv){var s=Ac;if(s!==null)throw s}}function Rd(s,l,d,p){uv=!1;var b=s.updateQueue;Hs=!1;var w=b.firstBaseUpdate,I=b.lastBaseUpdate,F=b.shared.pending;if(F!==null){b.shared.pending=null;var X=F,le=X.next;X.next=null,I===null?w=le:I.next=le,I=X;var pe=s.alternate;pe!==null&&(pe=pe.updateQueue,F=pe.lastBaseUpdate,F!==I&&(F===null?pe.firstBaseUpdate=le:F.next=le,pe.lastBaseUpdate=X))}if(w!==null){var ye=b.baseState;I=0,pe=le=X=null,F=w;do{var ce=F.lane&-536870913,fe=ce!==F.lane;if(fe?(mt&ce)===ce:(p&ce)===ce){ce!==0&&ce===Tc&&(uv=!0),pe!==null&&(pe=pe.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Ie=s,Ye=F;ce=l;var Gt=d;switch(Ye.tag){case 1:if(Ie=Ye.payload,typeof Ie=="function"){ye=Ie.call(Gt,ye,ce);break e}ye=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ye.payload,ce=typeof Ie=="function"?Ie.call(Gt,ye,ce):Ie,ce==null)break e;ye=g({},ye,ce);break e;case 2:Hs=!0}}ce=F.callback,ce!==null&&(s.flags|=64,fe&&(s.flags|=8192),fe=b.callbacks,fe===null?b.callbacks=[ce]:fe.push(ce))}else fe={lane:ce,tag:F.tag,payload:F.payload,callback:F.callback,next:null},pe===null?(le=pe=fe,X=ye):pe=pe.next=fe,I|=ce;if(F=F.next,F===null){if(F=b.shared.pending,F===null)break;fe=F,F=fe.next,fe.next=null,b.lastBaseUpdate=fe,b.shared.pending=null}}while(!0);pe===null&&(X=ye),b.baseState=X,b.firstBaseUpdate=le,b.lastBaseUpdate=pe,w===null&&(b.shared.lanes=0),Zs|=I,s.lanes=I,s.memoizedState=ye}}function mE(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function vE(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)mE(d[s],l)}var Dc=U(null),fp=U(0);function yE(s,l){s=as,ne(fp,s),ne(Dc,l),as=s|l.baseLanes}function dv(){ne(fp,as),ne(Dc,Dc.current)}function fv(){as=fp.current,Y(Dc),Y(fp)}var Zr=U(null),vi=null;function Xs(s){var l=s.alternate;ne(xn,xn.current&1),ne(Zr,s),vi===null&&(l===null||Dc.current!==null||l.memoizedState!==null)&&(vi=s)}function hv(s){ne(xn,xn.current),ne(Zr,s),vi===null&&(vi=s)}function bE(s){s.tag===22?(ne(xn,xn.current),ne(Zr,s),vi===null&&(vi=s)):Ws()}function Ws(){ne(xn,xn.current),ne(Zr,Zr.current)}function Jr(s){Y(Zr),vi===s&&(vi=null),Y(xn)}var xn=U(0);function hp(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||by(d)||xy(d)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Qa=0,ot=null,Ut=null,kn=null,pp=!1,kc=!1,ml=!1,gp=0,Dd=0,Nc=null,AP=0;function fn(){throw Error(r(321))}function pv(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!Kr(s[d],l[d]))return!1;return!0}function gv(s,l,d,p,b,w){return Qa=w,ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$.H=s===null||s.memoizedState===null?nS:kv,ml=!1,w=d(p,b),ml=!1,kc&&(w=_E(l,d,p,b)),xE(s),w}function xE(s){$.H=Id;var l=Ut!==null&&Ut.next!==null;if(Qa=0,kn=Ut=ot=null,pp=!1,Dd=0,Nc=null,l)throw Error(r(300));s===null||Nn||(s=s.dependencies,s!==null&&ap(s)&&(Nn=!0))}function _E(s,l,d,p){ot=s;var b=0;do{if(kc&&(Nc=null),Dd=0,kc=!1,25<=b)throw Error(r(301));if(b+=1,kn=Ut=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}$.H=rS,w=l(d,p)}while(kc);return w}function CP(){var s=$.H,l=s.useState()[0];return l=typeof l.then=="function"?kd(l):l,s=s.useState()[0],(Ut!==null?Ut.memoizedState:null)!==s&&(ot.flags|=1024),l}function mv(){var s=gp!==0;return gp=0,s}function vv(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function yv(s){if(pp){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}pp=!1}Qa=0,kn=Ut=ot=null,kc=!1,Dd=gp=0,Nc=null}function Er(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?ot.memoizedState=kn=s:kn=kn.next=s,kn}function _n(){if(Ut===null){var s=ot.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var l=kn===null?ot.memoizedState:kn.next;if(l!==null)kn=l,Ut=s;else{if(s===null)throw ot.alternate===null?Error(r(467)):Error(r(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},kn===null?ot.memoizedState=kn=s:kn=kn.next=s}return kn}function mp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kd(s){var l=Dd;return Dd+=1,Nc===null&&(Nc=[]),s=dE(Nc,s,l),l=ot,(kn===null?l.memoizedState:kn.next)===null&&(l=l.alternate,$.H=l===null||l.memoizedState===null?nS:kv),s}function vp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return kd(s);if(s.$$typeof===k)return tr(s)}throw Error(r(438,String(s)))}function bv(s){var l=null,d=ot.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var p=ot.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=mp(),ot.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),p=0;p<s;p++)d[p]=O;return l.index++,d}function Za(s,l){return typeof l=="function"?l(s):l}function yp(s){var l=_n();return xv(l,Ut,s)}function xv(s,l,d){var p=s.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=d;var b=s.baseQueue,w=p.pending;if(w!==null){if(b!==null){var I=b.next;b.next=w.next,w.next=I}l.baseQueue=b=w,p.pending=null}if(w=s.baseState,b===null)s.memoizedState=w;else{l=b.next;var F=I=null,X=null,le=l,pe=!1;do{var ye=le.lane&-536870913;if(ye!==le.lane?(mt&ye)===ye:(Qa&ye)===ye){var ce=le.revertLane;if(ce===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ye===Tc&&(pe=!0);else if((Qa&ce)===ce){le=le.next,ce===Tc&&(pe=!0);continue}else ye={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},X===null?(F=X=ye,I=w):X=X.next=ye,ot.lanes|=ce,Zs|=ce;ye=le.action,ml&&d(w,ye),w=le.hasEagerState?le.eagerState:d(w,ye)}else ce={lane:ye,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},X===null?(F=X=ce,I=w):X=X.next=ce,ot.lanes|=ye,Zs|=ye;le=le.next}while(le!==null&&le!==l);if(X===null?I=w:X.next=F,!Kr(w,s.memoizedState)&&(Nn=!0,pe&&(d=Ac,d!==null)))throw d;s.memoizedState=w,s.baseState=I,s.baseQueue=X,p.lastRenderedState=w}return b===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function _v(s){var l=_n(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var p=d.dispatch,b=d.pending,w=l.memoizedState;if(b!==null){d.pending=null;var I=b=b.next;do w=s(w,I.action),I=I.next;while(I!==b);Kr(w,l.memoizedState)||(Nn=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,p]}function wE(s,l,d){var p=ot,b=_n(),w=_t;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=l();var I=!Kr((Ut||b).memoizedState,d);if(I&&(b.memoizedState=d,Nn=!0),b=b.queue,Sv(TE.bind(null,p,b,s),[s]),b.getSnapshot!==l||I||kn!==null&&kn.memoizedState.tag&1){if(p.flags|=2048,Ic(9,{destroy:void 0},SE.bind(null,p,b,d,l),null),Yt===null)throw Error(r(349));w||(Qa&127)!==0||EE(p,l,d)}return d}function EE(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=ot.updateQueue,l===null?(l=mp(),ot.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function SE(s,l,d,p){l.value=d,l.getSnapshot=p,AE(l)&&CE(s)}function TE(s,l,d){return d(function(){AE(l)&&CE(s)})}function AE(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!Kr(s,d)}catch{return!0}}function CE(s){var l=ol(s,2);l!==null&&jr(l,s,2)}function wv(s){var l=Er();if(typeof s=="function"){var d=s;if(s=d(),ml){yn(!0);try{d()}finally{yn(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:s},l}function RE(s,l,d,p){return s.baseState=d,xv(s,Ut,typeof p=="function"?p:Za)}function RP(s,l,d,p,b){if(_p(s))throw Error(r(485));if(s=l.action,s!==null){var w={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){w.listeners.push(I)}};$.T!==null?d(!0):w.isTransition=!1,p(w),d=l.pending,d===null?(w.next=l.pending=w,DE(l,w)):(w.next=d.next,l.pending=d.next=w)}}function DE(s,l){var d=l.action,p=l.payload,b=s.state;if(l.isTransition){var w=$.T,I={};$.T=I;try{var F=d(b,p),X=$.S;X!==null&&X(I,F),kE(s,l,F)}catch(le){Ev(s,l,le)}finally{w!==null&&I.types!==null&&(w.types=I.types),$.T=w}}else try{w=d(b,p),kE(s,l,w)}catch(le){Ev(s,l,le)}}function kE(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){NE(s,l,p)},function(p){return Ev(s,l,p)}):NE(s,l,d)}function NE(s,l,d){l.status="fulfilled",l.value=d,IE(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,DE(s,d)))}function Ev(s,l,d){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=d,IE(l),l=l.next;while(l!==p)}s.action=null}function IE(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function ME(s,l){return l}function OE(s,l){if(_t){var d=Yt.formState;if(d!==null){e:{var p=ot;if(_t){if(Qt){t:{for(var b=Qt,w=mi;b.nodeType!==8;){if(!w){b=null;break t}if(b=yi(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){Qt=yi(b.nextSibling),p=b.data==="F!";break e}}Gs(p)}p=!1}p&&(l=d[0])}}return d=Er(),d.memoizedState=d.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ME,lastRenderedState:l},d.queue=p,d=JE.bind(null,ot,p),p.dispatch=d,p=wv(!1),w=Dv.bind(null,ot,!1,p.queue),p=Er(),b={state:l,dispatch:null,action:s,pending:null},p.queue=b,d=RP.bind(null,ot,b,w,d),b.dispatch=d,p.memoizedState=s,[l,d,!1]}function PE(s){var l=_n();return jE(l,Ut,s)}function jE(s,l,d){if(l=xv(s,l,ME)[0],s=yp(Za)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=kd(l)}catch(I){throw I===Cc?lp:I}else p=l;l=_n();var b=l.queue,w=b.dispatch;return d!==l.memoizedState&&(ot.flags|=2048,Ic(9,{destroy:void 0},DP.bind(null,b,d),null)),[p,w,s]}function DP(s,l){s.action=l}function VE(s){var l=_n(),d=Ut;if(d!==null)return jE(l,d,s);_n(),l=l.memoizedState,d=_n();var p=d.queue.dispatch;return d.memoizedState=s,[l,p,!1]}function Ic(s,l,d,p){return s={tag:s,create:d,deps:p,inst:l,next:null},l=ot.updateQueue,l===null&&(l=mp(),ot.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(p=d.next,d.next=s,s.next=p,l.lastEffect=s),s}function zE(){return _n().memoizedState}function bp(s,l,d,p){var b=Er();ot.flags|=s,b.memoizedState=Ic(1|l,{destroy:void 0},d,p===void 0?null:p)}function xp(s,l,d,p){var b=_n();p=p===void 0?null:p;var w=b.memoizedState.inst;Ut!==null&&p!==null&&pv(p,Ut.memoizedState.deps)?b.memoizedState=Ic(l,w,d,p):(ot.flags|=s,b.memoizedState=Ic(1|l,w,d,p))}function LE(s,l){bp(8390656,8,s,l)}function Sv(s,l){xp(2048,8,s,l)}function kP(s){ot.flags|=4;var l=ot.updateQueue;if(l===null)l=mp(),ot.updateQueue=l,l.events=[s];else{var d=l.events;d===null?l.events=[s]:d.push(s)}}function BE(s){var l=_n().memoizedState;return kP({ref:l,nextImpl:s}),function(){if((kt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function UE(s,l){return xp(4,2,s,l)}function FE(s,l){return xp(4,4,s,l)}function GE(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function qE(s,l,d){d=d!=null?d.concat([s]):null,xp(4,4,GE.bind(null,l,s),d)}function Tv(){}function HE(s,l){var d=_n();l=l===void 0?null:l;var p=d.memoizedState;return l!==null&&pv(l,p[1])?p[0]:(d.memoizedState=[s,l],s)}function $E(s,l){var d=_n();l=l===void 0?null:l;var p=d.memoizedState;if(l!==null&&pv(l,p[1]))return p[0];if(p=s(),ml){yn(!0);try{s()}finally{yn(!1)}}return d.memoizedState=[p,l],p}function Av(s,l,d){return d===void 0||(Qa&1073741824)!==0&&(mt&261930)===0?s.memoizedState=l:(s.memoizedState=d,s=YS(),ot.lanes|=s,Zs|=s,d)}function YE(s,l,d,p){return Kr(d,l)?d:Dc.current!==null?(s=Av(s,d,p),Kr(s,l)||(Nn=!0),s):(Qa&42)===0||(Qa&1073741824)!==0&&(mt&261930)===0?(Nn=!0,s.memoizedState=d):(s=YS(),ot.lanes|=s,Zs|=s,l)}function XE(s,l,d,p,b){var w=H.p;H.p=w!==0&&8>w?w:8;var I=$.T,F={};$.T=F,Dv(s,!1,l,d);try{var X=b(),le=$.S;if(le!==null&&le(F,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var pe=TP(X,p);Nd(s,l,pe,ni(s))}else Nd(s,l,p,ni(s))}catch(ye){Nd(s,l,{then:function(){},status:"rejected",reason:ye},ni())}finally{H.p=w,I!==null&&F.types!==null&&(I.types=F.types),$.T=I}}function NP(){}function Cv(s,l,d,p){if(s.tag!==5)throw Error(r(476));var b=WE(s).queue;XE(s,b,l,ee,d===null?NP:function(){return KE(s),d(p)})}function WE(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:ee},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function KE(s){var l=WE(s);l.next===null&&(l=s.alternate.memoizedState),Nd(s,l.next.queue,{},ni())}function Rv(){return tr(Xd)}function QE(){return _n().memoizedState}function ZE(){return _n().memoizedState}function IP(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=ni();s=$s(d);var p=Ys(l,s,d);p!==null&&(jr(p,l,d),Ad(p,l,d)),l={cache:rv()},s.payload=l;return}l=l.return}}function MP(s,l,d){var p=ni();d={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},_p(s)?eS(l,d):(d=$0(s,l,d,p),d!==null&&(jr(d,s,p),tS(d,l,p)))}function JE(s,l,d){var p=ni();Nd(s,l,d,p)}function Nd(s,l,d,p){var b={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(_p(s))eS(l,b);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var I=l.lastRenderedState,F=w(I,d);if(b.hasEagerState=!0,b.eagerState=F,Kr(F,I))return tp(s,l,b,0),Yt===null&&ep(),!1}catch{}finally{}if(d=$0(s,l,b,p),d!==null)return jr(d,s,p),tS(d,l,p),!0}return!1}function Dv(s,l,d,p){if(p={lane:2,revertLane:oy(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},_p(s)){if(l)throw Error(r(479))}else l=$0(s,d,p,2),l!==null&&jr(l,s,2)}function _p(s){var l=s.alternate;return s===ot||l!==null&&l===ot}function eS(s,l){kc=pp=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function tS(s,l,d){if((d&4194048)!==0){var p=l.lanes;p&=s.pendingLanes,d|=p,l.lanes=d,Ju(s,d)}}var Id={readContext:tr,use:vp,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn};Id.useEffectEvent=fn;var nS={readContext:tr,use:vp,useCallback:function(s,l){return Er().memoizedState=[s,l===void 0?null:l],s},useContext:tr,useEffect:LE,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,bp(4194308,4,GE.bind(null,l,s),d)},useLayoutEffect:function(s,l){return bp(4194308,4,s,l)},useInsertionEffect:function(s,l){bp(4,2,s,l)},useMemo:function(s,l){var d=Er();l=l===void 0?null:l;var p=s();if(ml){yn(!0);try{s()}finally{yn(!1)}}return d.memoizedState=[p,l],p},useReducer:function(s,l,d){var p=Er();if(d!==void 0){var b=d(l);if(ml){yn(!0);try{d(l)}finally{yn(!1)}}}else b=l;return p.memoizedState=p.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},p.queue=s,s=s.dispatch=MP.bind(null,ot,s),[p.memoizedState,s]},useRef:function(s){var l=Er();return s={current:s},l.memoizedState=s},useState:function(s){s=wv(s);var l=s.queue,d=JE.bind(null,ot,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:Tv,useDeferredValue:function(s,l){var d=Er();return Av(d,s,l)},useTransition:function(){var s=wv(!1);return s=XE.bind(null,ot,s.queue,!0,!1),Er().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var p=ot,b=Er();if(_t){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Yt===null)throw Error(r(349));(mt&127)!==0||EE(p,l,d)}b.memoizedState=d;var w={value:d,getSnapshot:l};return b.queue=w,LE(TE.bind(null,p,w,s),[s]),p.flags|=2048,Ic(9,{destroy:void 0},SE.bind(null,p,w,d,l),null),d},useId:function(){var s=Er(),l=Yt.identifierPrefix;if(_t){var d=va,p=ma;d=(p&~(1<<32-Rt(p)-1)).toString(32)+d,l="_"+l+"R_"+d,d=gp++,0<d&&(l+="H"+d.toString(32)),l+="_"}else d=AP++,l="_"+l+"r_"+d.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Rv,useFormState:OE,useActionState:OE,useOptimistic:function(s){var l=Er();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Dv.bind(null,ot,!0,d),d.dispatch=l,[s,l]},useMemoCache:bv,useCacheRefresh:function(){return Er().memoizedState=IP.bind(null,ot)},useEffectEvent:function(s){var l=Er(),d={impl:s};return l.memoizedState=d,function(){if((kt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}},kv={readContext:tr,use:vp,useCallback:HE,useContext:tr,useEffect:Sv,useImperativeHandle:qE,useInsertionEffect:UE,useLayoutEffect:FE,useMemo:$E,useReducer:yp,useRef:zE,useState:function(){return yp(Za)},useDebugValue:Tv,useDeferredValue:function(s,l){var d=_n();return YE(d,Ut.memoizedState,s,l)},useTransition:function(){var s=yp(Za)[0],l=_n().memoizedState;return[typeof s=="boolean"?s:kd(s),l]},useSyncExternalStore:wE,useId:QE,useHostTransitionStatus:Rv,useFormState:PE,useActionState:PE,useOptimistic:function(s,l){var d=_n();return RE(d,Ut,s,l)},useMemoCache:bv,useCacheRefresh:ZE};kv.useEffectEvent=BE;var rS={readContext:tr,use:vp,useCallback:HE,useContext:tr,useEffect:Sv,useImperativeHandle:qE,useInsertionEffect:UE,useLayoutEffect:FE,useMemo:$E,useReducer:_v,useRef:zE,useState:function(){return _v(Za)},useDebugValue:Tv,useDeferredValue:function(s,l){var d=_n();return Ut===null?Av(d,s,l):YE(d,Ut.memoizedState,s,l)},useTransition:function(){var s=_v(Za)[0],l=_n().memoizedState;return[typeof s=="boolean"?s:kd(s),l]},useSyncExternalStore:wE,useId:QE,useHostTransitionStatus:Rv,useFormState:VE,useActionState:VE,useOptimistic:function(s,l){var d=_n();return Ut!==null?RE(d,Ut,s,l):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:bv,useCacheRefresh:ZE};rS.useEffectEvent=BE;function Nv(s,l,d,p){l=s.memoizedState,d=d(p,l),d=d==null?l:g({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Iv={enqueueSetState:function(s,l,d){s=s._reactInternals;var p=ni(),b=$s(p);b.payload=l,d!=null&&(b.callback=d),l=Ys(s,b,p),l!==null&&(jr(l,s,p),Ad(l,s,p))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var p=ni(),b=$s(p);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=Ys(s,b,p),l!==null&&(jr(l,s,p),Ad(l,s,p))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=ni(),p=$s(d);p.tag=2,l!=null&&(p.callback=l),l=Ys(s,p,d),l!==null&&(jr(l,s,d),Ad(l,s,d))}};function iS(s,l,d,p,b,w,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,w,I):l.prototype&&l.prototype.isPureReactComponent?!yd(d,p)||!yd(b,w):!0}function aS(s,l,d,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,p),l.state!==s&&Iv.enqueueReplaceState(l,l.state,null)}function vl(s,l){var d=l;if("ref"in l){d={};for(var p in l)p!=="ref"&&(d[p]=l[p])}if(s=s.defaultProps){d===l&&(d=g({},d));for(var b in s)d[b]===void 0&&(d[b]=s[b])}return d}function sS(s){Jh(s)}function oS(s){console.error(s)}function lS(s){Jh(s)}function wp(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function cS(s,l,d){try{var p=s.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Mv(s,l,d){return d=$s(d),d.tag=3,d.payload={element:null},d.callback=function(){wp(s,l)},d}function uS(s){return s=$s(s),s.tag=3,s}function dS(s,l,d,p){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var w=p.value;s.payload=function(){return b(w)},s.callback=function(){cS(l,d,p)}}var I=d.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(s.callback=function(){cS(l,d,p),typeof b!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:""})})}function OP(s,l,d,p,b){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=d.alternate,l!==null&&Sc(l,d,b,!0),d=Zr.current,d!==null){switch(d.tag){case 31:case 13:return vi===null?Op():d.alternate===null&&hn===0&&(hn=3),d.flags&=-257,d.flags|=65536,d.lanes=b,p===cp?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([p]):l.add(p),iy(s,p,b)),!1;case 22:return d.flags|=65536,p===cp?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([p]):d.add(p)),iy(s,p,b)),!1}throw Error(r(435,d.tag))}return iy(s,p,b),Op(),!1}if(_t)return l=Zr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,p!==Z0&&(s=Error(r(422),{cause:p}),_d(hi(s,d)))):(p!==Z0&&(l=Error(r(423),{cause:p}),_d(hi(l,d))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,p=hi(p,d),b=Mv(s.stateNode,p,b),cv(s,b),hn!==4&&(hn=2)),!1;var w=Error(r(520),{cause:p});if(w=hi(w,d),Bd===null?Bd=[w]:Bd.push(w),hn!==4&&(hn=2),l===null)return!0;p=hi(p,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=b&-b,d.lanes|=s,s=Mv(d.stateNode,p,s),cv(d,s),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Js===null||!Js.has(w))))return d.flags|=65536,b&=-b,d.lanes|=b,b=uS(b),dS(b,s,d,p),cv(d,b),!1}d=d.return}while(d!==null);return!1}var Ov=Error(r(461)),Nn=!1;function nr(s,l,d,p){l.child=s===null?gE(l,null,d,p):gl(l,s.child,d,p)}function fS(s,l,d,p,b){d=d.render;var w=l.ref;if("ref"in p){var I={};for(var F in p)F!=="ref"&&(I[F]=p[F])}else I=p;return dl(l),p=gv(s,l,d,I,w,b),F=mv(),s!==null&&!Nn?(vv(s,l,b),Ja(s,l,b)):(_t&&F&&K0(l),l.flags|=1,nr(s,l,p,b),l.child)}function hS(s,l,d,p,b){if(s===null){var w=d.type;return typeof w=="function"&&!Y0(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,pS(s,l,w,p,b)):(s=rp(d.type,null,p,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!Fv(s,b)){var I=w.memoizedProps;if(d=d.compare,d=d!==null?d:yd,d(I,p)&&s.ref===l.ref)return Ja(s,l,b)}return l.flags|=1,s=Ya(w,p),s.ref=l.ref,s.return=l,l.child=s}function pS(s,l,d,p,b){if(s!==null){var w=s.memoizedProps;if(yd(w,p)&&s.ref===l.ref)if(Nn=!1,l.pendingProps=p=w,Fv(s,b))(s.flags&131072)!==0&&(Nn=!0);else return l.lanes=s.lanes,Ja(s,l,b)}return Pv(s,l,d,p,b)}function gS(s,l,d,p){var b=p.children,w=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|d:d,s!==null){for(p=l.child=s.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~w}else p=0,l.child=null;return mS(s,l,w,d,p)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&op(l,w!==null?w.cachePool:null),w!==null?yE(l,w):dv(),bE(l);else return p=l.lanes=536870912,mS(s,l,w!==null?w.baseLanes|d:d,d,p)}else w!==null?(op(l,w.cachePool),yE(l,w),Ws(),l.memoizedState=null):(s!==null&&op(l,null),dv(),Ws());return nr(s,l,b,d),l.child}function Md(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function mS(s,l,d,p,b){var w=av();return w=w===null?null:{parent:Dn._currentValue,pool:w},l.memoizedState={baseLanes:d,cachePool:w},s!==null&&op(l,null),dv(),bE(l),s!==null&&Sc(s,l,p,!0),l.childLanes=b,null}function Ep(s,l){return l=Tp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function vS(s,l,d){return gl(l,s.child,null,d),s=Ep(l,l.pendingProps),s.flags|=2,Jr(l),l.memoizedState=null,s}function PP(s,l,d){var p=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(_t){if(p.mode==="hidden")return s=Ep(l,p),l.lanes=536870912,Md(null,s);if(hv(l),(s=Qt)?(s=DT(s,mi),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Us!==null?{id:ma,overflow:va}:null,retryLane:536870912,hydrationErrors:null},d=eE(s),d.return=l,l.child=d,er=l,Qt=null)):s=null,s===null)throw Gs(l);return l.lanes=536870912,null}return Ep(l,p)}var w=s.memoizedState;if(w!==null){var I=w.dehydrated;if(hv(l),b)if(l.flags&256)l.flags&=-257,l=vS(s,l,d);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(Nn||Sc(s,l,d,!1),b=(d&s.childLanes)!==0,Nn||b){if(p=Yt,p!==null&&(I=ed(p,d),I!==0&&I!==w.retryLane))throw w.retryLane=I,ol(s,I),jr(p,s,I),Ov;Op(),l=vS(s,l,d)}else s=w.treeContext,Qt=yi(I.nextSibling),er=l,_t=!0,Fs=null,mi=!1,s!==null&&rE(l,s),l=Ep(l,p),l.flags|=4096;return l}return s=Ya(s.child,{mode:p.mode,children:p.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Sp(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(s===null||s.ref!==d)&&(l.flags|=4194816)}}function Pv(s,l,d,p,b){return dl(l),d=gv(s,l,d,p,void 0,b),p=mv(),s!==null&&!Nn?(vv(s,l,b),Ja(s,l,b)):(_t&&p&&K0(l),l.flags|=1,nr(s,l,d,b),l.child)}function yS(s,l,d,p,b,w){return dl(l),l.updateQueue=null,d=_E(l,p,d,b),xE(s),p=mv(),s!==null&&!Nn?(vv(s,l,w),Ja(s,l,w)):(_t&&p&&K0(l),l.flags|=1,nr(s,l,d,w),l.child)}function bS(s,l,d,p,b){if(dl(l),l.stateNode===null){var w=xc,I=d.contextType;typeof I=="object"&&I!==null&&(w=tr(I)),w=new d(p,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Iv,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=p,w.state=l.memoizedState,w.refs={},ov(l),I=d.contextType,w.context=typeof I=="object"&&I!==null?tr(I):xc,w.state=l.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(Nv(l,d,I,p),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(I=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),I!==w.state&&Iv.enqueueReplaceState(w,w.state,null),Rd(l,p,w,b),Cd(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(s===null){w=l.stateNode;var F=l.memoizedProps,X=vl(d,F);w.props=X;var le=w.context,pe=d.contextType;I=xc,typeof pe=="object"&&pe!==null&&(I=tr(pe));var ye=d.getDerivedStateFromProps;pe=typeof ye=="function"||typeof w.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,pe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(F||le!==I)&&aS(l,w,p,I),Hs=!1;var ce=l.memoizedState;w.state=ce,Rd(l,p,w,b),Cd(),le=l.memoizedState,F||ce!==le||Hs?(typeof ye=="function"&&(Nv(l,d,ye,p),le=l.memoizedState),(X=Hs||iS(l,d,X,p,ce,le,I))?(pe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=le),w.props=p,w.state=le,w.context=I,p=X):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{w=l.stateNode,lv(s,l),I=l.memoizedProps,pe=vl(d,I),w.props=pe,ye=l.pendingProps,ce=w.context,le=d.contextType,X=xc,typeof le=="object"&&le!==null&&(X=tr(le)),F=d.getDerivedStateFromProps,(le=typeof F=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==ye||ce!==X)&&aS(l,w,p,X),Hs=!1,ce=l.memoizedState,w.state=ce,Rd(l,p,w,b),Cd();var fe=l.memoizedState;I!==ye||ce!==fe||Hs||s!==null&&s.dependencies!==null&&ap(s.dependencies)?(typeof F=="function"&&(Nv(l,d,F,p),fe=l.memoizedState),(pe=Hs||iS(l,d,pe,p,ce,fe,X)||s!==null&&s.dependencies!==null&&ap(s.dependencies))?(le||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,fe,X),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,fe,X)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||I===s.memoizedProps&&ce===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&ce===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=fe),w.props=p,w.state=fe,w.context=X,p=pe):(typeof w.componentDidUpdate!="function"||I===s.memoizedProps&&ce===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&ce===s.memoizedState||(l.flags|=1024),p=!1)}return w=p,Sp(s,l),p=(l.flags&128)!==0,w||p?(w=l.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&p?(l.child=gl(l,s.child,null,b),l.child=gl(l,null,d,b)):nr(s,l,d,b),l.memoizedState=w.state,s=l.child):s=Ja(s,l,b),s}function xS(s,l,d,p){return cl(),l.flags|=256,nr(s,l,d,p),l.child}var jv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vv(s){return{baseLanes:s,cachePool:cE()}}function zv(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=ti),s}function _S(s,l,d){var p=l.pendingProps,b=!1,w=(l.flags&128)!==0,I;if((I=w)||(I=s!==null&&s.memoizedState===null?!1:(xn.current&2)!==0),I&&(b=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,s===null){if(_t){if(b?Xs(l):Ws(),(s=Qt)?(s=DT(s,mi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Us!==null?{id:ma,overflow:va}:null,retryLane:536870912,hydrationErrors:null},d=eE(s),d.return=l,l.child=d,er=l,Qt=null)):s=null,s===null)throw Gs(l);return xy(s)?l.lanes=32:l.lanes=536870912,null}var F=p.children;return p=p.fallback,b?(Ws(),b=l.mode,F=Tp({mode:"hidden",children:F},b),p=ll(p,b,d,null),F.return=l,p.return=l,F.sibling=p,l.child=F,p=l.child,p.memoizedState=Vv(d),p.childLanes=zv(s,I,d),l.memoizedState=jv,Md(null,p)):(Xs(l),Lv(l,F))}var X=s.memoizedState;if(X!==null&&(F=X.dehydrated,F!==null)){if(w)l.flags&256?(Xs(l),l.flags&=-257,l=Bv(s,l,d)):l.memoizedState!==null?(Ws(),l.child=s.child,l.flags|=128,l=null):(Ws(),F=p.fallback,b=l.mode,p=Tp({mode:"visible",children:p.children},b),F=ll(F,b,d,null),F.flags|=2,p.return=l,F.return=l,p.sibling=F,l.child=p,gl(l,s.child,null,d),p=l.child,p.memoizedState=Vv(d),p.childLanes=zv(s,I,d),l.memoizedState=jv,l=Md(null,p));else if(Xs(l),xy(F)){if(I=F.nextSibling&&F.nextSibling.dataset,I)var le=I.dgst;I=le,p=Error(r(419)),p.stack="",p.digest=I,_d({value:p,source:null,stack:null}),l=Bv(s,l,d)}else if(Nn||Sc(s,l,d,!1),I=(d&s.childLanes)!==0,Nn||I){if(I=Yt,I!==null&&(p=ed(I,d),p!==0&&p!==X.retryLane))throw X.retryLane=p,ol(s,p),jr(I,s,p),Ov;by(F)||Op(),l=Bv(s,l,d)}else by(F)?(l.flags|=192,l.child=s.child,l=null):(s=X.treeContext,Qt=yi(F.nextSibling),er=l,_t=!0,Fs=null,mi=!1,s!==null&&rE(l,s),l=Lv(l,p.children),l.flags|=4096);return l}return b?(Ws(),F=p.fallback,b=l.mode,X=s.child,le=X.sibling,p=Ya(X,{mode:"hidden",children:p.children}),p.subtreeFlags=X.subtreeFlags&65011712,le!==null?F=Ya(le,F):(F=ll(F,b,d,null),F.flags|=2),F.return=l,p.return=l,p.sibling=F,l.child=p,Md(null,p),p=l.child,F=s.child.memoizedState,F===null?F=Vv(d):(b=F.cachePool,b!==null?(X=Dn._currentValue,b=b.parent!==X?{parent:X,pool:X}:b):b=cE(),F={baseLanes:F.baseLanes|d,cachePool:b}),p.memoizedState=F,p.childLanes=zv(s,I,d),l.memoizedState=jv,Md(s.child,p)):(Xs(l),d=s.child,s=d.sibling,d=Ya(d,{mode:"visible",children:p.children}),d.return=l,d.sibling=null,s!==null&&(I=l.deletions,I===null?(l.deletions=[s],l.flags|=16):I.push(s)),l.child=d,l.memoizedState=null,d)}function Lv(s,l){return l=Tp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Tp(s,l){return s=Qr(22,s,null,l),s.lanes=0,s}function Bv(s,l,d){return gl(l,s.child,null,d),s=Lv(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function wS(s,l,d){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),tv(s.return,l,d)}function Uv(s,l,d,p,b,w){var I=s.memoizedState;I===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:b,treeForkCount:w}:(I.isBackwards=l,I.rendering=null,I.renderingStartTime=0,I.last=p,I.tail=d,I.tailMode=b,I.treeForkCount=w)}function ES(s,l,d){var p=l.pendingProps,b=p.revealOrder,w=p.tail;p=p.children;var I=xn.current,F=(I&2)!==0;if(F?(I=I&1|2,l.flags|=128):I&=1,ne(xn,I),nr(s,l,p,d),p=_t?xd:0,!F&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&wS(s,d,l);else if(s.tag===19)wS(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(d=l.child,b=null;d!==null;)s=d.alternate,s!==null&&hp(s)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),Uv(l,!1,b,d,w,p);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&hp(s)===null){l.child=b;break}s=b.sibling,b.sibling=d,d=b,b=s}Uv(l,!0,d,null,w,p);break;case"together":Uv(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function Ja(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),Zs|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(Sc(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,d=Ya(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=Ya(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function Fv(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&ap(s)))}function jP(s,l,d){switch(l.tag){case 3:Te(l,l.stateNode.containerInfo),qs(l,Dn,s.memoizedState.cache),cl();break;case 27:case 5:De(l);break;case 4:Te(l,l.stateNode.containerInfo);break;case 10:qs(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,hv(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Xs(l),l.flags|=128,null):(d&l.child.childLanes)!==0?_S(s,l,d):(Xs(l),s=Ja(s,l,d),s!==null?s.sibling:null);Xs(l);break;case 19:var b=(s.flags&128)!==0;if(p=(d&l.childLanes)!==0,p||(Sc(s,l,d,!1),p=(d&l.childLanes)!==0),b){if(p)return ES(s,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ne(xn,xn.current),p)break;return null;case 22:return l.lanes=0,gS(s,l,d,l.pendingProps);case 24:qs(l,Dn,s.memoizedState.cache)}return Ja(s,l,d)}function SS(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)Nn=!0;else{if(!Fv(s,d)&&(l.flags&128)===0)return Nn=!1,jP(s,l,d);Nn=(s.flags&131072)!==0}else Nn=!1,_t&&(l.flags&1048576)!==0&&nE(l,xd,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(s=hl(l.elementType),l.type=s,typeof s=="function")Y0(s)?(p=vl(s,p),l.tag=1,l=bS(null,l,s,p,d)):(l.tag=0,l=Pv(null,l,s,p,d));else{if(s!=null){var b=s.$$typeof;if(b===j){l.tag=11,l=fS(null,l,s,p,d);break e}else if(b===C){l.tag=14,l=hS(null,l,s,p,d);break e}}throw l=J(s)||s,Error(r(306,l,""))}}return l;case 0:return Pv(s,l,l.type,l.pendingProps,d);case 1:return p=l.type,b=vl(p,l.pendingProps),bS(s,l,p,b,d);case 3:e:{if(Te(l,l.stateNode.containerInfo),s===null)throw Error(r(387));p=l.pendingProps;var w=l.memoizedState;b=w.element,lv(s,l),Rd(l,p,null,d);var I=l.memoizedState;if(p=I.cache,qs(l,Dn,p),p!==w.cache&&nv(l,[Dn],d,!0),Cd(),p=I.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=xS(s,l,p,d);break e}else if(p!==b){b=hi(Error(r(424)),l),_d(b),l=xS(s,l,p,d);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Qt=yi(s.firstChild),er=l,_t=!0,Fs=null,mi=!0,d=gE(l,null,p,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(cl(),p===b){l=Ja(s,l,d);break e}nr(s,l,p,d)}l=l.child}return l;case 26:return Sp(s,l),s===null?(d=PT(l.type,null,l.pendingProps,null))?l.memoizedState=d:_t||(d=l.type,s=l.pendingProps,p=Up(ie.current).createElement(d),p[An]=l,p[Yn]=s,rr(p,d,s),Cn(p),l.stateNode=p):l.memoizedState=PT(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return De(l),s===null&&_t&&(p=l.stateNode=IT(l.type,l.pendingProps,ie.current),er=l,mi=!0,b=Qt,ro(l.type)?(_y=b,Qt=yi(p.firstChild)):Qt=b),nr(s,l,l.pendingProps.children,d),Sp(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&_t&&((b=p=Qt)&&(p=f3(p,l.type,l.pendingProps,mi),p!==null?(l.stateNode=p,er=l,Qt=yi(p.firstChild),mi=!1,b=!0):b=!1),b||Gs(l)),De(l),b=l.type,w=l.pendingProps,I=s!==null?s.memoizedProps:null,p=w.children,my(b,w)?p=null:I!==null&&my(b,I)&&(l.flags|=32),l.memoizedState!==null&&(b=gv(s,l,CP,null,null,d),Xd._currentValue=b),Sp(s,l),nr(s,l,p,d),l.child;case 6:return s===null&&_t&&((s=d=Qt)&&(d=h3(d,l.pendingProps,mi),d!==null?(l.stateNode=d,er=l,Qt=null,s=!0):s=!1),s||Gs(l)),null;case 13:return _S(s,l,d);case 4:return Te(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=gl(l,null,p,d):nr(s,l,p,d),l.child;case 11:return fS(s,l,l.type,l.pendingProps,d);case 7:return nr(s,l,l.pendingProps,d),l.child;case 8:return nr(s,l,l.pendingProps.children,d),l.child;case 12:return nr(s,l,l.pendingProps.children,d),l.child;case 10:return p=l.pendingProps,qs(l,l.type,p.value),nr(s,l,p.children,d),l.child;case 9:return b=l.type._context,p=l.pendingProps.children,dl(l),b=tr(b),p=p(b),l.flags|=1,nr(s,l,p,d),l.child;case 14:return hS(s,l,l.type,l.pendingProps,d);case 15:return pS(s,l,l.type,l.pendingProps,d);case 19:return ES(s,l,d);case 31:return PP(s,l,d);case 22:return gS(s,l,d,l.pendingProps);case 24:return dl(l),p=tr(Dn),s===null?(b=av(),b===null&&(b=Yt,w=rv(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=d),b=w),l.memoizedState={parent:p,cache:b},ov(l),qs(l,Dn,b)):((s.lanes&d)!==0&&(lv(s,l),Rd(l,null,null,d),Cd()),b=s.memoizedState,w=l.memoizedState,b.parent!==p?(b={parent:p,cache:p},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),qs(l,Dn,p)):(p=w.cache,qs(l,Dn,p),p!==b.cache&&nv(l,[Dn],d,!0))),nr(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function es(s){s.flags|=4}function Gv(s,l,d,p,b){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if(QS())s.flags|=8192;else throw pl=cp,sv}else s.flags&=-16777217}function TS(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!BT(l))if(QS())s.flags|=8192;else throw pl=cp,sv}function Ap(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Fa():536870912,s.lanes|=l,jc|=l)}function Od(s,l){if(!_t)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Zt(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,p=0;if(l)for(var b=s.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=p,s.childLanes=d,l}function VP(s,l,d){var p=l.pendingProps;switch(Q0(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(l),null;case 1:return Zt(l),null;case 3:return d=l.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Ka(Dn),Ae(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Ec(l)?es(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,J0())),Zt(l),null;case 26:var b=l.type,w=l.memoizedState;return s===null?(es(l),w!==null?(Zt(l),TS(l,w)):(Zt(l),Gv(l,b,null,p,d))):w?w!==s.memoizedState?(es(l),Zt(l),TS(l,w)):(Zt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==p&&es(l),Zt(l),Gv(l,b,s,p,d)),null;case 27:if(be(l),d=ie.current,b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Zt(l),null}s=ae.current,Ec(l)?iE(l):(s=IT(b,p,d),l.stateNode=s,es(l))}return Zt(l),null;case 5:if(be(l),b=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Zt(l),null}if(w=ae.current,Ec(l))iE(l);else{var I=Up(ie.current);switch(w){case 1:w=I.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=I.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=I.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=I.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=I.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof p.is=="string"?I.createElement("select",{is:p.is}):I.createElement("select"),p.multiple?w.multiple=!0:p.size&&(w.size=p.size);break;default:w=typeof p.is=="string"?I.createElement(b,{is:p.is}):I.createElement(b)}}w[An]=l,w[Yn]=p;e:for(I=l.child;I!==null;){if(I.tag===5||I.tag===6)w.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===l)break e;for(;I.sibling===null;){if(I.return===null||I.return===l)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}l.stateNode=w;e:switch(rr(w,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&es(l)}}return Zt(l),Gv(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,d),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(s=ie.current,Ec(l)){if(s=l.stateNode,d=l.memoizedProps,p=null,b=er,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}s[An]=l,s=!!(s.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||_T(s.nodeValue,d)),s||Gs(l,!0)}else s=Up(s).createTextNode(p),s[An]=l,l.stateNode=s}return Zt(l),null;case 31:if(d=l.memoizedState,s===null||s.memoizedState!==null){if(p=Ec(l),d!==null){if(s===null){if(!p)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[An]=l}else cl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Zt(l),s=!1}else d=J0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return l.flags&256?(Jr(l),l):(Jr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Zt(l),null;case 13:if(p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=Ec(l),p!==null&&p.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[An]=l}else cl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Zt(l),b=!1}else b=J0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(Jr(l),l):(Jr(l),null)}return Jr(l),(l.flags&128)!==0?(l.lanes=d,l):(d=p!==null,s=s!==null&&s.memoizedState!==null,d&&(p=l.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==b&&(p.flags|=2048)),d!==s&&d&&(l.child.flags|=8192),Ap(l,l.updateQueue),Zt(l),null);case 4:return Ae(),s===null&&dy(l.stateNode.containerInfo),Zt(l),null;case 10:return Ka(l.type),Zt(l),null;case 19:if(Y(xn),p=l.memoizedState,p===null)return Zt(l),null;if(b=(l.flags&128)!==0,w=p.rendering,w===null)if(b)Od(p,!1);else{if(hn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=hp(s),w!==null){for(l.flags|=128,Od(p,!1),s=w.updateQueue,l.updateQueue=s,Ap(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)Jw(d,s),d=d.sibling;return ne(xn,xn.current&1|2),_t&&Xa(l,p.treeForkCount),l.child}s=s.sibling}p.tail!==null&&ft()>Np&&(l.flags|=128,b=!0,Od(p,!1),l.lanes=4194304)}else{if(!b)if(s=hp(w),s!==null){if(l.flags|=128,b=!0,s=s.updateQueue,l.updateQueue=s,Ap(l,s),Od(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!_t)return Zt(l),null}else 2*ft()-p.renderingStartTime>Np&&d!==536870912&&(l.flags|=128,b=!0,Od(p,!1),l.lanes=4194304);p.isBackwards?(w.sibling=l.child,l.child=w):(s=p.last,s!==null?s.sibling=w:l.child=w,p.last=w)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=ft(),s.sibling=null,d=xn.current,ne(xn,b?d&1|2:d&1),_t&&Xa(l,p.treeForkCount),s):(Zt(l),null);case 22:case 23:return Jr(l),fv(),p=l.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(d&536870912)!==0&&(l.flags&128)===0&&(Zt(l),l.subtreeFlags&6&&(l.flags|=8192)):Zt(l),d=l.updateQueue,d!==null&&Ap(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==d&&(l.flags|=2048),s!==null&&Y(fl),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Ka(Dn),Zt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function zP(s,l){switch(Q0(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ka(Dn),Ae(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return be(l),null;case 31:if(l.memoizedState!==null){if(Jr(l),l.alternate===null)throw Error(r(340));cl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Jr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));cl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Y(xn),null;case 4:return Ae(),null;case 10:return Ka(l.type),null;case 22:case 23:return Jr(l),fv(),s!==null&&Y(fl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ka(Dn),null;case 25:return null;default:return null}}function AS(s,l){switch(Q0(l),l.tag){case 3:Ka(Dn),Ae();break;case 26:case 27:case 5:be(l);break;case 4:Ae();break;case 31:l.memoizedState!==null&&Jr(l);break;case 13:Jr(l);break;case 19:Y(xn);break;case 10:Ka(l.type);break;case 22:case 23:Jr(l),fv(),s!==null&&Y(fl);break;case 24:Ka(Dn)}}function Pd(s,l){try{var d=l.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var b=p.next;d=b;do{if((d.tag&s)===s){p=void 0;var w=d.create,I=d.inst;p=w(),I.destroy=p}d=d.next}while(d!==b)}}catch(F){zt(l,l.return,F)}}function Ks(s,l,d){try{var p=l.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var w=b.next;p=w;do{if((p.tag&s)===s){var I=p.inst,F=I.destroy;if(F!==void 0){I.destroy=void 0,b=l;var X=d,le=F;try{le()}catch(pe){zt(b,X,pe)}}}p=p.next}while(p!==w)}}catch(pe){zt(l,l.return,pe)}}function CS(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{vE(l,d)}catch(p){zt(s,s.return,p)}}}function RS(s,l,d){d.props=vl(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(p){zt(s,l,p)}}function jd(s,l){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof d=="function"?s.refCleanup=d(p):d.current=p}}catch(b){zt(s,l,b)}}function ya(s,l){var d=s.ref,p=s.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(b){zt(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){zt(s,l,b)}else d.current=null}function DS(s){var l=s.type,d=s.memoizedProps,p=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break e;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(b){zt(s,s.return,b)}}function qv(s,l,d){try{var p=s.stateNode;s3(p,s.type,d,l),p[Yn]=l}catch(b){zt(s,s.return,b)}}function kS(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ro(s.type)||s.tag===4}function Hv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||kS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ro(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function $v(s,l,d){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(s),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Pi));else if(p!==4&&(p===27&&ro(s.type)&&(d=s.stateNode,l=null),s=s.child,s!==null))for($v(s,l,d),s=s.sibling;s!==null;)$v(s,l,d),s=s.sibling}function Cp(s,l,d){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(p!==4&&(p===27&&ro(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Cp(s,l,d),s=s.sibling;s!==null;)Cp(s,l,d),s=s.sibling}function NS(s){var l=s.stateNode,d=s.memoizedProps;try{for(var p=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);rr(l,p,d),l[An]=s,l[Yn]=d}catch(w){zt(s,s.return,w)}}var ts=!1,In=!1,Yv=!1,IS=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function LP(s,l){if(s=s.containerInfo,py=Xp,s=qw(s),B0(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var b=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var I=0,F=-1,X=-1,le=0,pe=0,ye=s,ce=null;t:for(;;){for(var fe;ye!==d||b!==0&&ye.nodeType!==3||(F=I+b),ye!==w||p!==0&&ye.nodeType!==3||(X=I+p),ye.nodeType===3&&(I+=ye.nodeValue.length),(fe=ye.firstChild)!==null;)ce=ye,ye=fe;for(;;){if(ye===s)break t;if(ce===d&&++le===b&&(F=I),ce===w&&++pe===p&&(X=I),(fe=ye.nextSibling)!==null)break;ye=ce,ce=ye.parentNode}ye=fe}d=F===-1||X===-1?null:{start:F,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(gy={focusedElem:s,selectionRange:d},Xp=!1,Wn=l;Wn!==null;)if(l=Wn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Wn=s;else for(;Wn!==null;){switch(l=Wn,w=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)b=s[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,d=l,b=w.memoizedProps,w=w.memoizedState,p=d.stateNode;try{var Ie=vl(d.type,b);s=p.getSnapshotBeforeUpdate(Ie,w),p.__reactInternalSnapshotBeforeUpdate=s}catch(Ye){zt(d,d.return,Ye)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)yy(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":yy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Wn=s;break}Wn=l.return}}function MS(s,l,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:rs(s,d),p&4&&Pd(5,d);break;case 1:if(rs(s,d),p&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(I){zt(d,d.return,I)}else{var b=vl(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(I){zt(d,d.return,I)}}p&64&&CS(d),p&512&&jd(d,d.return);break;case 3:if(rs(s,d),p&64&&(s=d.updateQueue,s!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{vE(s,l)}catch(I){zt(d,d.return,I)}}break;case 27:l===null&&p&4&&NS(d);case 26:case 5:rs(s,d),l===null&&p&4&&DS(d),p&512&&jd(d,d.return);break;case 12:rs(s,d);break;case 31:rs(s,d),p&4&&jS(s,d);break;case 13:rs(s,d),p&4&&VS(s,d),p&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=XP.bind(null,d),p3(s,d))));break;case 22:if(p=d.memoizedState!==null||ts,!p){l=l!==null&&l.memoizedState!==null||In,b=ts;var w=In;ts=p,(In=l)&&!w?is(s,d,(d.subtreeFlags&8772)!==0):rs(s,d),ts=b,In=w}break;case 30:break;default:rs(s,d)}}function OS(s){var l=s.alternate;l!==null&&(s.alternate=null,OS(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&sc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var tn=null,Ir=!1;function ns(s,l,d){for(d=d.child;d!==null;)PS(s,l,d),d=d.sibling}function PS(s,l,d){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Lt,d)}catch{}switch(d.tag){case 26:In||ya(d,l),ns(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:In||ya(d,l);var p=tn,b=Ir;ro(d.type)&&(tn=d.stateNode,Ir=!1),ns(s,l,d),Hd(d.stateNode),tn=p,Ir=b;break;case 5:In||ya(d,l);case 6:if(p=tn,b=Ir,tn=null,ns(s,l,d),tn=p,Ir=b,tn!==null)if(Ir)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(d.stateNode)}catch(w){zt(d,l,w)}else try{tn.removeChild(d.stateNode)}catch(w){zt(d,l,w)}break;case 18:tn!==null&&(Ir?(s=tn,CT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),qc(s)):CT(tn,d.stateNode));break;case 4:p=tn,b=Ir,tn=d.stateNode.containerInfo,Ir=!0,ns(s,l,d),tn=p,Ir=b;break;case 0:case 11:case 14:case 15:Ks(2,d,l),In||Ks(4,d,l),ns(s,l,d);break;case 1:In||(ya(d,l),p=d.stateNode,typeof p.componentWillUnmount=="function"&&RS(d,l,p)),ns(s,l,d);break;case 21:ns(s,l,d);break;case 22:In=(p=In)||d.memoizedState!==null,ns(s,l,d),In=p;break;default:ns(s,l,d)}}function jS(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{qc(s)}catch(d){zt(l,l.return,d)}}}function VS(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{qc(s)}catch(d){zt(l,l.return,d)}}function BP(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new IS),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new IS),l;default:throw Error(r(435,s.tag))}}function Rp(s,l){var d=BP(s);l.forEach(function(p){if(!d.has(p)){d.add(p);var b=WP.bind(null,s,p);p.then(b,b)}})}function Mr(s,l){var d=l.deletions;if(d!==null)for(var p=0;p<d.length;p++){var b=d[p],w=s,I=l,F=I;e:for(;F!==null;){switch(F.tag){case 27:if(ro(F.type)){tn=F.stateNode,Ir=!1;break e}break;case 5:tn=F.stateNode,Ir=!1;break e;case 3:case 4:tn=F.stateNode.containerInfo,Ir=!0;break e}F=F.return}if(tn===null)throw Error(r(160));PS(w,I,b),tn=null,Ir=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)zS(l,s),l=l.sibling}var Ui=null;function zS(s,l){var d=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Mr(l,s),Or(s),p&4&&(Ks(3,s,s.return),Pd(3,s),Ks(5,s,s.return));break;case 1:Mr(l,s),Or(s),p&512&&(In||d===null||ya(d,d.return)),p&64&&ts&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var b=Ui;if(Mr(l,s),Or(s),p&512&&(In||d===null||ya(d,d.return)),p&4){var w=d!==null?d.memoizedState:null;if(p=s.memoizedState,d===null)if(p===null)if(s.stateNode===null){e:{p=s.type,d=s.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":w=b.getElementsByTagName("title")[0],(!w||w[ia]||w[An]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(p),b.head.insertBefore(w,b.querySelector("head > title"))),rr(w,p,d),w[An]=s,Cn(w),p=w;break e;case"link":var I=zT("link","href",b).get(p+(d.href||""));if(I){for(var F=0;F<I.length;F++)if(w=I[F],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){I.splice(F,1);break t}}w=b.createElement(p),rr(w,p,d),b.head.appendChild(w);break;case"meta":if(I=zT("meta","content",b).get(p+(d.content||""))){for(F=0;F<I.length;F++)if(w=I[F],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){I.splice(F,1);break t}}w=b.createElement(p),rr(w,p,d),b.head.appendChild(w);break;default:throw Error(r(468,p))}w[An]=s,Cn(w),p=w}s.stateNode=p}else LT(b,s.type,s.stateNode);else s.stateNode=VT(b,p,s.memoizedProps);else w!==p?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,p===null?LT(b,s.type,s.stateNode):VT(b,p,s.memoizedProps)):p===null&&s.stateNode!==null&&qv(s,s.memoizedProps,d.memoizedProps)}break;case 27:Mr(l,s),Or(s),p&512&&(In||d===null||ya(d,d.return)),d!==null&&p&4&&qv(s,s.memoizedProps,d.memoizedProps);break;case 5:if(Mr(l,s),Or(s),p&512&&(In||d===null||ya(d,d.return)),s.flags&32){b=s.stateNode;try{Nr(b,"")}catch(Ie){zt(s,s.return,Ie)}}p&4&&s.stateNode!=null&&(b=s.memoizedProps,qv(s,b,d!==null?d.memoizedProps:b)),p&1024&&(Yv=!0);break;case 6:if(Mr(l,s),Or(s),p&4){if(s.stateNode===null)throw Error(r(162));p=s.memoizedProps,d=s.stateNode;try{d.nodeValue=p}catch(Ie){zt(s,s.return,Ie)}}break;case 3:if(qp=null,b=Ui,Ui=Fp(l.containerInfo),Mr(l,s),Ui=b,Or(s),p&4&&d!==null&&d.memoizedState.isDehydrated)try{qc(l.containerInfo)}catch(Ie){zt(s,s.return,Ie)}Yv&&(Yv=!1,LS(s));break;case 4:p=Ui,Ui=Fp(s.stateNode.containerInfo),Mr(l,s),Or(s),Ui=p;break;case 12:Mr(l,s),Or(s);break;case 31:Mr(l,s),Or(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Rp(s,p)));break;case 13:Mr(l,s),Or(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(kp=ft()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Rp(s,p)));break;case 22:b=s.memoizedState!==null;var X=d!==null&&d.memoizedState!==null,le=ts,pe=In;if(ts=le||b,In=pe||X,Mr(l,s),In=pe,ts=le,Or(s),p&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(d===null||X||ts||In||yl(s)),d=null,l=s;;){if(l.tag===5||l.tag===26){if(d===null){X=d=l;try{if(w=X.stateNode,b)I=w.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{F=X.stateNode;var ye=X.memoizedProps.style,ce=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;F.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Ie){zt(X,X.return,Ie)}}}else if(l.tag===6){if(d===null){X=l;try{X.stateNode.nodeValue=b?"":X.memoizedProps}catch(Ie){zt(X,X.return,Ie)}}}else if(l.tag===18){if(d===null){X=l;try{var fe=X.stateNode;b?RT(fe,!0):RT(X.stateNode,!1)}catch(Ie){zt(X,X.return,Ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=s.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,Rp(s,d))));break;case 19:Mr(l,s),Or(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Rp(s,p)));break;case 30:break;case 21:break;default:Mr(l,s),Or(s)}}function Or(s){var l=s.flags;if(l&2){try{for(var d,p=s.return;p!==null;){if(kS(p)){d=p;break}p=p.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var b=d.stateNode,w=Hv(s);Cp(s,w,b);break;case 5:var I=d.stateNode;d.flags&32&&(Nr(I,""),d.flags&=-33);var F=Hv(s);Cp(s,F,I);break;case 3:case 4:var X=d.stateNode.containerInfo,le=Hv(s);$v(s,le,X);break;default:throw Error(r(161))}}catch(pe){zt(s,s.return,pe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function LS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;LS(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function rs(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)MS(s,l.alternate,l),l=l.sibling}function yl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Ks(4,l,l.return),yl(l);break;case 1:ya(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&RS(l,l.return,d),yl(l);break;case 27:Hd(l.stateNode);case 26:case 5:ya(l,l.return),yl(l);break;case 22:l.memoizedState===null&&yl(l);break;case 30:yl(l);break;default:yl(l)}s=s.sibling}}function is(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,b=s,w=l,I=w.flags;switch(w.tag){case 0:case 11:case 15:is(b,w,d),Pd(4,w);break;case 1:if(is(b,w,d),p=w,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(le){zt(p,p.return,le)}if(p=w,b=p.updateQueue,b!==null){var F=p.stateNode;try{var X=b.shared.hiddenCallbacks;if(X!==null)for(b.shared.hiddenCallbacks=null,b=0;b<X.length;b++)mE(X[b],F)}catch(le){zt(p,p.return,le)}}d&&I&64&&CS(w),jd(w,w.return);break;case 27:NS(w);case 26:case 5:is(b,w,d),d&&p===null&&I&4&&DS(w),jd(w,w.return);break;case 12:is(b,w,d);break;case 31:is(b,w,d),d&&I&4&&jS(b,w);break;case 13:is(b,w,d),d&&I&4&&VS(b,w);break;case 22:w.memoizedState===null&&is(b,w,d),jd(w,w.return);break;case 30:break;default:is(b,w,d)}l=l.sibling}}function Xv(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&wd(d))}function Wv(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&wd(s))}function Fi(s,l,d,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)BS(s,l,d,p),l=l.sibling}function BS(s,l,d,p){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Fi(s,l,d,p),b&2048&&Pd(9,l);break;case 1:Fi(s,l,d,p);break;case 3:Fi(s,l,d,p),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&wd(s)));break;case 12:if(b&2048){Fi(s,l,d,p),s=l.stateNode;try{var w=l.memoizedProps,I=w.id,F=w.onPostCommit;typeof F=="function"&&F(I,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(X){zt(l,l.return,X)}}else Fi(s,l,d,p);break;case 31:Fi(s,l,d,p);break;case 13:Fi(s,l,d,p);break;case 23:break;case 22:w=l.stateNode,I=l.alternate,l.memoizedState!==null?w._visibility&2?Fi(s,l,d,p):Vd(s,l):w._visibility&2?Fi(s,l,d,p):(w._visibility|=2,Mc(s,l,d,p,(l.subtreeFlags&10256)!==0||!1)),b&2048&&Xv(I,l);break;case 24:Fi(s,l,d,p),b&2048&&Wv(l.alternate,l);break;default:Fi(s,l,d,p)}}function Mc(s,l,d,p,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=s,I=l,F=d,X=p,le=I.flags;switch(I.tag){case 0:case 11:case 15:Mc(w,I,F,X,b),Pd(8,I);break;case 23:break;case 22:var pe=I.stateNode;I.memoizedState!==null?pe._visibility&2?Mc(w,I,F,X,b):Vd(w,I):(pe._visibility|=2,Mc(w,I,F,X,b)),b&&le&2048&&Xv(I.alternate,I);break;case 24:Mc(w,I,F,X,b),b&&le&2048&&Wv(I.alternate,I);break;default:Mc(w,I,F,X,b)}l=l.sibling}}function Vd(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,p=l,b=p.flags;switch(p.tag){case 22:Vd(d,p),b&2048&&Xv(p.alternate,p);break;case 24:Vd(d,p),b&2048&&Wv(p.alternate,p);break;default:Vd(d,p)}l=l.sibling}}var zd=8192;function Oc(s,l,d){if(s.subtreeFlags&zd)for(s=s.child;s!==null;)US(s,l,d),s=s.sibling}function US(s,l,d){switch(s.tag){case 26:Oc(s,l,d),s.flags&zd&&s.memoizedState!==null&&A3(d,Ui,s.memoizedState,s.memoizedProps);break;case 5:Oc(s,l,d);break;case 3:case 4:var p=Ui;Ui=Fp(s.stateNode.containerInfo),Oc(s,l,d),Ui=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=zd,zd=16777216,Oc(s,l,d),zd=p):Oc(s,l,d));break;default:Oc(s,l,d)}}function FS(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Ld(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];Wn=p,qS(p,s)}FS(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)GS(s),s=s.sibling}function GS(s){switch(s.tag){case 0:case 11:case 15:Ld(s),s.flags&2048&&Ks(9,s,s.return);break;case 3:Ld(s);break;case 12:Ld(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Dp(s)):Ld(s);break;default:Ld(s)}}function Dp(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];Wn=p,qS(p,s)}FS(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Ks(8,l,l.return),Dp(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Dp(l));break;default:Dp(l)}s=s.sibling}}function qS(s,l){for(;Wn!==null;){var d=Wn;switch(d.tag){case 0:case 11:case 15:Ks(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:wd(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,Wn=p;else e:for(d=s;Wn!==null;){p=Wn;var b=p.sibling,w=p.return;if(OS(p),p===d){Wn=null;break e}if(b!==null){b.return=w,Wn=b;break e}Wn=w}}}var UP={getCacheForType:function(s){var l=tr(Dn),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d},cacheSignal:function(){return tr(Dn).controller.signal}},FP=typeof WeakMap=="function"?WeakMap:Map,kt=0,Yt=null,ht=null,mt=0,Vt=0,ei=null,Qs=!1,Pc=!1,Kv=!1,as=0,hn=0,Zs=0,bl=0,Qv=0,ti=0,jc=0,Bd=null,Pr=null,Zv=!1,kp=0,HS=0,Np=1/0,Ip=null,Js=null,Bn=0,eo=null,Vc=null,ss=0,Jv=0,ey=null,$S=null,Ud=0,ty=null;function ni(){return(kt&2)!==0&&mt!==0?mt&-mt:$.T!==null?oy():Mh()}function YS(){if(ti===0)if((mt&536870912)===0||_t){var s=It;It<<=1,(It&3932160)===0&&(It=262144),ti=s}else ti=536870912;return s=Zr.current,s!==null&&(s.flags|=32),ti}function jr(s,l,d){(s===Yt&&(Vt===2||Vt===9)||s.cancelPendingCommit!==null)&&(zc(s,0),to(s,mt,ti,!1)),oi(s,d),((kt&2)===0||s!==Yt)&&(s===Yt&&((kt&2)===0&&(bl|=d),hn===4&&to(s,mt,ti,!1)),ba(s))}function XS(s,l,d){if((kt&6)!==0)throw Error(r(327));var p=!d&&(l&127)===0&&(l&s.expiredLanes)===0||dn(s,l),b=p?HP(s,l):ry(s,l,!0),w=p;do{if(b===0){Pc&&!p&&to(s,l,0,!1);break}else{if(d=s.current.alternate,w&&!GP(d)){b=ry(s,l,!1),w=!1;continue}if(b===2){if(w=l,s.errorRecoveryDisabledLanes&w)var I=0;else I=s.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var F=s;b=Bd;var X=F.current.memoizedState.isDehydrated;if(X&&(zc(F,I).flags|=256),I=ry(F,I,!1),I!==2){if(Kv&&!X){F.errorRecoveryDisabledLanes|=w,bl|=w,b=4;break e}w=Pr,Pr=b,w!==null&&(Pr===null?Pr=w:Pr.push.apply(Pr,w))}b=I}if(w=!1,b!==2)continue}}if(b===1){zc(s,0),to(s,l,0,!0);break}e:{switch(p=s,w=b,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:to(p,l,ti,!Qs);break e;case 2:Pr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=kp+300-ft(),10<b)){if(to(p,l,ti,!Qs),Tn(p,0,!0)!==0)break e;ss=l,p.timeoutHandle=TT(WS.bind(null,p,d,Pr,Ip,Zv,l,ti,bl,jc,Qs,w,"Throttled",-0,0),b);break e}WS(p,d,Pr,Ip,Zv,l,ti,bl,jc,Qs,w,null,-0,0)}}break}while(!0);ba(s)}function WS(s,l,d,p,b,w,I,F,X,le,pe,ye,ce,fe){if(s.timeoutHandle=-1,ye=l.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pi},US(l,w,ye);var Ie=(w&62914560)===w?kp-ft():(w&4194048)===w?HS-ft():0;if(Ie=C3(ye,Ie),Ie!==null){ss=w,s.cancelPendingCommit=Ie(rT.bind(null,s,l,w,d,p,b,I,F,X,pe,ye,null,ce,fe)),to(s,w,I,!le);return}}rT(s,l,w,d,p,b,I,F,X)}function GP(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var b=d[p],w=b.getSnapshot;b=b.value;try{if(!Kr(w(),b))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function to(s,l,d,p){l&=~Qv,l&=~bl,s.suspendedLanes|=l,s.pingedLanes&=~l,p&&(s.warmLanes|=l),p=s.expirationTimes;for(var b=l;0<b;){var w=31-Rt(b),I=1<<w;p[w]=-1,b&=~I}d!==0&&Xo(s,d,l)}function Mp(){return(kt&6)===0?(Fd(0),!1):!0}function ny(){if(ht!==null){if(Vt===0)var s=ht.return;else s=ht,Wa=ul=null,yv(s),Rc=null,Sd=0,s=ht;for(;s!==null;)AS(s.alternate,s),s=s.return;ht=null}}function zc(s,l){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,c3(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),ss=0,ny(),Yt=s,ht=d=Ya(s.current,null),mt=l,Vt=0,ei=null,Qs=!1,Pc=dn(s,l),Kv=!1,jc=ti=Qv=bl=Zs=hn=0,Pr=Bd=null,Zv=!1,(l&8)!==0&&(l|=l&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=l;0<p;){var b=31-Rt(p),w=1<<b;l|=s[b],p&=~w}return as=l,ep(),d}function KS(s,l){ot=null,$.H=Id,l===Cc||l===lp?(l=fE(),Vt=3):l===sv?(l=fE(),Vt=4):Vt=l===Ov?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ei=l,ht===null&&(hn=1,wp(s,hi(l,s.current)))}function QS(){var s=Zr.current;return s===null?!0:(mt&4194048)===mt?vi===null:(mt&62914560)===mt||(mt&536870912)!==0?s===vi:!1}function ZS(){var s=$.H;return $.H=Id,s===null?Id:s}function JS(){var s=$.A;return $.A=UP,s}function Op(){hn=4,Qs||(mt&4194048)!==mt&&Zr.current!==null||(Pc=!0),(Zs&134217727)===0&&(bl&134217727)===0||Yt===null||to(Yt,mt,ti,!1)}function ry(s,l,d){var p=kt;kt|=2;var b=ZS(),w=JS();(Yt!==s||mt!==l)&&(Ip=null,zc(s,l)),l=!1;var I=hn;e:do try{if(Vt!==0&&ht!==null){var F=ht,X=ei;switch(Vt){case 8:ny(),I=6;break e;case 3:case 2:case 9:case 6:Zr.current===null&&(l=!0);var le=Vt;if(Vt=0,ei=null,Lc(s,F,X,le),d&&Pc){I=0;break e}break;default:le=Vt,Vt=0,ei=null,Lc(s,F,X,le)}}qP(),I=hn;break}catch(pe){KS(s,pe)}while(!0);return l&&s.shellSuspendCounter++,Wa=ul=null,kt=p,$.H=b,$.A=w,ht===null&&(Yt=null,mt=0,ep()),I}function qP(){for(;ht!==null;)eT(ht)}function HP(s,l){var d=kt;kt|=2;var p=ZS(),b=JS();Yt!==s||mt!==l?(Ip=null,Np=ft()+500,zc(s,l)):Pc=dn(s,l);e:do try{if(Vt!==0&&ht!==null){l=ht;var w=ei;t:switch(Vt){case 1:Vt=0,ei=null,Lc(s,l,w,1);break;case 2:case 9:if(uE(w)){Vt=0,ei=null,tT(l);break}l=function(){Vt!==2&&Vt!==9||Yt!==s||(Vt=7),ba(s)},w.then(l,l);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:uE(w)?(Vt=0,ei=null,tT(l)):(Vt=0,ei=null,Lc(s,l,w,7));break;case 5:var I=null;switch(ht.tag){case 26:I=ht.memoizedState;case 5:case 27:var F=ht;if(I?BT(I):F.stateNode.complete){Vt=0,ei=null;var X=F.sibling;if(X!==null)ht=X;else{var le=F.return;le!==null?(ht=le,Pp(le)):ht=null}break t}}Vt=0,ei=null,Lc(s,l,w,5);break;case 6:Vt=0,ei=null,Lc(s,l,w,6);break;case 8:ny(),hn=6;break e;default:throw Error(r(462))}}$P();break}catch(pe){KS(s,pe)}while(!0);return Wa=ul=null,$.H=p,$.A=b,kt=d,ht!==null?0:(Yt=null,mt=0,ep(),hn)}function $P(){for(;ht!==null&&!vn();)eT(ht)}function eT(s){var l=SS(s.alternate,s,as);s.memoizedProps=s.pendingProps,l===null?Pp(s):ht=l}function tT(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=yS(d,l,l.pendingProps,l.type,void 0,mt);break;case 11:l=yS(d,l,l.pendingProps,l.type.render,l.ref,mt);break;case 5:yv(l);default:AS(d,l),l=ht=Jw(l,as),l=SS(d,l,as)}s.memoizedProps=s.pendingProps,l===null?Pp(s):ht=l}function Lc(s,l,d,p){Wa=ul=null,yv(l),Rc=null,Sd=0;var b=l.return;try{if(OP(s,b,l,d,mt)){hn=1,wp(s,hi(d,s.current)),ht=null;return}}catch(w){if(b!==null)throw ht=b,w;hn=1,wp(s,hi(d,s.current)),ht=null;return}l.flags&32768?(_t||p===1?s=!0:Pc||(mt&536870912)!==0?s=!1:(Qs=s=!0,(p===2||p===9||p===3||p===6)&&(p=Zr.current,p!==null&&p.tag===13&&(p.flags|=16384))),nT(l,s)):Pp(l)}function Pp(s){var l=s;do{if((l.flags&32768)!==0){nT(l,Qs);return}s=l.return;var d=VP(l.alternate,l,as);if(d!==null){ht=d;return}if(l=l.sibling,l!==null){ht=l;return}ht=l=s}while(l!==null);hn===0&&(hn=5)}function nT(s,l){do{var d=zP(s.alternate,s);if(d!==null){d.flags&=32767,ht=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){ht=s;return}ht=s=d}while(s!==null);hn=6,ht=null}function rT(s,l,d,p,b,w,I,F,X){s.cancelPendingCommit=null;do jp();while(Bn!==0);if((kt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=H0,j0(s,d,w,I,F,X),s===Yt&&(ht=Yt=null,mt=0),Vc=l,eo=s,ss=d,Jv=w,ey=b,$S=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,KP(Yr,function(){return lT(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=$.T,$.T=null,b=H.p,H.p=2,I=kt,kt|=4;try{LP(s,l,d)}finally{kt=I,H.p=b,$.T=p}}Bn=1,iT(),aT(),sT()}}function iT(){if(Bn===1){Bn=0;var s=eo,l=Vc,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=$.T,$.T=null;var p=H.p;H.p=2;var b=kt;kt|=4;try{zS(l,s);var w=gy,I=qw(s.containerInfo),F=w.focusedElem,X=w.selectionRange;if(I!==F&&F&&F.ownerDocument&&Gw(F.ownerDocument.documentElement,F)){if(X!==null&&B0(F)){var le=X.start,pe=X.end;if(pe===void 0&&(pe=le),"selectionStart"in F)F.selectionStart=le,F.selectionEnd=Math.min(pe,F.value.length);else{var ye=F.ownerDocument||document,ce=ye&&ye.defaultView||window;if(ce.getSelection){var fe=ce.getSelection(),Ie=F.textContent.length,Ye=Math.min(X.start,Ie),Gt=X.end===void 0?Ye:Math.min(X.end,Ie);!fe.extend&&Ye>Gt&&(I=Gt,Gt=Ye,Ye=I);var re=Fw(F,Ye),Z=Fw(F,Gt);if(re&&Z&&(fe.rangeCount!==1||fe.anchorNode!==re.node||fe.anchorOffset!==re.offset||fe.focusNode!==Z.node||fe.focusOffset!==Z.offset)){var oe=ye.createRange();oe.setStart(re.node,re.offset),fe.removeAllRanges(),Ye>Gt?(fe.addRange(oe),fe.extend(Z.node,Z.offset)):(oe.setEnd(Z.node,Z.offset),fe.addRange(oe))}}}}for(ye=[],fe=F;fe=fe.parentNode;)fe.nodeType===1&&ye.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<ye.length;F++){var ge=ye[F];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Xp=!!py,gy=py=null}finally{kt=b,H.p=p,$.T=d}}s.current=l,Bn=2}}function aT(){if(Bn===2){Bn=0;var s=eo,l=Vc,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=$.T,$.T=null;var p=H.p;H.p=2;var b=kt;kt|=4;try{MS(s,l.alternate,l)}finally{kt=b,H.p=p,$.T=d}}Bn=3}}function sT(){if(Bn===4||Bn===3){Bn=0,rn();var s=eo,l=Vc,d=ss,p=$S;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Bn=5:(Bn=0,Vc=eo=null,oT(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(Js=null),Ga(d),l=l.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Lt,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=$.T,b=H.p,H.p=2,$.T=null;try{for(var w=s.onRecoverableError,I=0;I<p.length;I++){var F=p[I];w(F.value,{componentStack:F.stack})}}finally{$.T=l,H.p=b}}(ss&3)!==0&&jp(),ba(s),b=s.pendingLanes,(d&261930)!==0&&(b&42)!==0?s===ty?Ud++:(Ud=0,ty=s):Ud=0,Fd(0)}}function oT(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,wd(l)))}function jp(){return iT(),aT(),sT(),lT()}function lT(){if(Bn!==5)return!1;var s=eo,l=Jv;Jv=0;var d=Ga(ss),p=$.T,b=H.p;try{H.p=32>d?32:d,$.T=null,d=ey,ey=null;var w=eo,I=ss;if(Bn=0,Vc=eo=null,ss=0,(kt&6)!==0)throw Error(r(331));var F=kt;if(kt|=4,GS(w.current),BS(w,w.current,I,d),kt=F,Fd(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Lt,w)}catch{}return!0}finally{H.p=b,$.T=p,oT(s,l)}}function cT(s,l,d){l=hi(d,l),l=Mv(s.stateNode,l,2),s=Ys(s,l,2),s!==null&&(oi(s,2),ba(s))}function zt(s,l,d){if(s.tag===3)cT(s,s,d);else for(;l!==null;){if(l.tag===3){cT(l,s,d);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Js===null||!Js.has(p))){s=hi(d,s),d=uS(2),p=Ys(l,d,2),p!==null&&(dS(d,p,l,s),oi(p,2),ba(p));break}}l=l.return}}function iy(s,l,d){var p=s.pingCache;if(p===null){p=s.pingCache=new FP;var b=new Set;p.set(l,b)}else b=p.get(l),b===void 0&&(b=new Set,p.set(l,b));b.has(d)||(Kv=!0,b.add(d),s=YP.bind(null,s,l,d),l.then(s,s))}function YP(s,l,d){var p=s.pingCache;p!==null&&p.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,Yt===s&&(mt&d)===d&&(hn===4||hn===3&&(mt&62914560)===mt&&300>ft()-kp?(kt&2)===0&&zc(s,0):Qv|=d,jc===mt&&(jc=0)),ba(s)}function uT(s,l){l===0&&(l=Fa()),s=ol(s,l),s!==null&&(oi(s,l),ba(s))}function XP(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),uT(s,d)}function WP(s,l){var d=0;switch(s.tag){case 31:case 13:var p=s.stateNode,b=s.memoizedState;b!==null&&(d=b.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),uT(s,d)}function KP(s,l){return qe(s,l)}var Vp=null,Bc=null,ay=!1,zp=!1,sy=!1,no=0;function ba(s){s!==Bc&&s.next===null&&(Bc===null?Vp=Bc=s:Bc=Bc.next=s),zp=!0,ay||(ay=!0,ZP())}function Fd(s,l){if(!sy&&zp){sy=!0;do for(var d=!1,p=Vp;p!==null;){if(s!==0){var b=p.pendingLanes;if(b===0)var w=0;else{var I=p.suspendedLanes,F=p.pingedLanes;w=(1<<31-Rt(42|s)+1)-1,w&=b&~(I&~F),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,pT(p,w))}else w=mt,w=Tn(p,p===Yt?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||dn(p,w)||(d=!0,pT(p,w));p=p.next}while(d);sy=!1}}function QP(){dT()}function dT(){zp=ay=!1;var s=0;no!==0&&l3()&&(s=no);for(var l=ft(),d=null,p=Vp;p!==null;){var b=p.next,w=fT(p,l);w===0?(p.next=null,d===null?Vp=b:d.next=b,b===null&&(Bc=d)):(d=p,(s!==0||(w&3)!==0)&&(zp=!0)),p=b}Bn!==0&&Bn!==5||Fd(s),no!==0&&(no=0)}function fT(s,l){for(var d=s.suspendedLanes,p=s.pingedLanes,b=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var I=31-Rt(w),F=1<<I,X=b[I];X===-1?((F&d)===0||(F&p)!==0)&&(b[I]=ic(F,l)):X<=l&&(s.expiredLanes|=F),w&=~F}if(l=Yt,d=mt,d=Tn(s,s===l?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,d===0||s===l&&(Vt===2||Vt===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&Nt(p),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||dn(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(p!==null&&Nt(p),Ga(d)){case 2:case 8:d=hr;break;case 32:d=Yr;break;case 268435456:d=je;break;default:d=Yr}return p=hT.bind(null,s),d=qe(d,p),s.callbackPriority=l,s.callbackNode=d,l}return p!==null&&p!==null&&Nt(p),s.callbackPriority=2,s.callbackNode=null,2}function hT(s,l){if(Bn!==0&&Bn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(jp()&&s.callbackNode!==d)return null;var p=mt;return p=Tn(s,s===Yt?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(XS(s,p,l),fT(s,ft()),s.callbackNode!=null&&s.callbackNode===d?hT.bind(null,s):null)}function pT(s,l){if(jp())return null;XS(s,l,!0)}function ZP(){u3(function(){(kt&6)!==0?qe(fr,QP):dT()})}function oy(){if(no===0){var s=Tc;s===0&&(s=We,We<<=1,(We&261888)===0&&(We=256)),no=s}return no}function gT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:uc(""+s)}function mT(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function JP(s,l,d,p,b){if(l==="submit"&&d&&d.stateNode===b){var w=gT((b[Yn]||null).action),I=p.submitter;I&&(l=(l=I[Yn]||null)?gT(l.formAction):I.getAttribute("formAction"),l!==null&&(w=l,I=null));var F=new fa("action","action",null,p,b);s.push({event:F,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(no!==0){var X=I?mT(b,I):new FormData(b);Cv(d,{pending:!0,data:X,method:b.method,action:w},null,X)}}else typeof w=="function"&&(F.preventDefault(),X=I?mT(b,I):new FormData(b),Cv(d,{pending:!0,data:X,method:b.method,action:w},w,X))},currentTarget:b}]})}}for(var ly=0;ly<q0.length;ly++){var cy=q0[ly],e3=cy.toLowerCase(),t3=cy[0].toUpperCase()+cy.slice(1);Bi(e3,"on"+t3)}Bi(Yw,"onAnimationEnd"),Bi(Xw,"onAnimationIteration"),Bi(Ww,"onAnimationStart"),Bi("dblclick","onDoubleClick"),Bi("focusin","onFocus"),Bi("focusout","onBlur"),Bi(vP,"onTransitionRun"),Bi(yP,"onTransitionStart"),Bi(bP,"onTransitionCancel"),Bi(Kw,"onTransitionEnd"),la("onMouseEnter",["mouseout","mouseover"]),la("onMouseLeave",["mouseout","mouseover"]),la("onPointerEnter",["pointerout","pointerover"]),la("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gd));function vT(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var p=s[d],b=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var I=p.length-1;0<=I;I--){var F=p[I],X=F.instance,le=F.currentTarget;if(F=F.listener,X!==w&&b.isPropagationStopped())break e;w=F,b.currentTarget=le;try{w(b)}catch(pe){Jh(pe)}b.currentTarget=null,w=X}else for(I=0;I<p.length;I++){if(F=p[I],X=F.instance,le=F.currentTarget,F=F.listener,X!==w&&b.isPropagationStopped())break e;w=F,b.currentTarget=le;try{w(b)}catch(pe){Jh(pe)}b.currentTarget=null,w=X}}}}function pt(s,l){var d=l[ac];d===void 0&&(d=l[ac]=new Set);var p=s+"__bubble";d.has(p)||(yT(l,s,2,!1),d.add(p))}function uy(s,l,d){var p=0;l&&(p|=4),yT(d,s,p,l)}var Lp="_reactListening"+Math.random().toString(36).slice(2);function dy(s){if(!s[Lp]){s[Lp]=!0,td.forEach(function(d){d!=="selectionchange"&&(n3.has(d)||uy(d,!1,s),uy(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Lp]||(l[Lp]=!0,uy("selectionchange",!1,l))}}function yT(s,l,d,p){switch(YT(l)){case 2:var b=k3;break;case 8:b=N3;break;default:b=Ay}d=b.bind(null,l,d,s),b=void 0,!Jo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),p?b!==void 0?s.addEventListener(l,d,{capture:!0,passive:b}):s.addEventListener(l,d,!0):b!==void 0?s.addEventListener(l,d,{passive:b}):s.addEventListener(l,d,!1)}function fy(s,l,d,p,b){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var F=p.stateNode.containerInfo;if(F===b)break;if(I===4)for(I=p.return;I!==null;){var X=I.tag;if((X===3||X===4)&&I.stateNode.containerInfo===b)return;I=I.return}for(;F!==null;){if(I=aa(F),I===null)return;if(X=I.tag,X===5||X===6||X===26||X===27){p=w=I;continue e}F=F.parentNode}}p=p.return}Vs(function(){var le=w,pe=ci(d),ye=[];e:{var ce=Qw.get(s);if(ce!==void 0){var fe=fa,Ie=s;switch(s){case"keypress":if(tl(d)===0)break e;case"keydown":case"keyup":fe=Kh;break;case"focusin":Ie="focus",fe=rl;break;case"focusout":Ie="blur",fe=rl;break;case"beforeblur":case"afterblur":fe=rl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Uh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=R;break;case Yw:case Xw:case Ww:fe=Gh;break;case Kw:fe=q;break;case"scroll":case"scrollend":fe=hd;break;case"wheel":fe=de;break;case"copy":case"cut":case"paste":fe=qh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=$a;break;case"toggle":case"beforetoggle":fe=st}var Ye=(l&4)!==0,Gt=!Ye&&(s==="scroll"||s==="scrollend"),re=Ye?ce!==null?ce+"Capture":null:ce;Ye=[];for(var Z=le,oe;Z!==null;){var ge=Z;if(oe=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||oe===null||re===null||(ge=ji(Z,re),ge!=null&&Ye.push(qd(Z,ge,oe))),Gt)break;Z=Z.return}0<Ye.length&&(ce=new fe(ce,Ie,null,d,pe),ye.push({event:ce,listeners:Ye}))}}if((l&7)===0){e:{if(ce=s==="mouseover"||s==="pointerover",fe=s==="mouseout"||s==="pointerout",ce&&d!==ud&&(Ie=d.relatedTarget||d.fromElement)&&(aa(Ie)||Ie[ra]))break e;if((fe||ce)&&(ce=pe.window===pe?pe:(ce=pe.ownerDocument)?ce.defaultView||ce.parentWindow:window,fe?(Ie=d.relatedTarget||d.toElement,fe=le,Ie=Ie?aa(Ie):null,Ie!==null&&(Gt=a(Ie),Ye=Ie.tag,Ie!==Gt||Ye!==5&&Ye!==27&&Ye!==6)&&(Ie=null)):(fe=null,Ie=le),fe!==Ie)){if(Ye=pd,ge="onMouseLeave",re="onMouseEnter",Z="mouse",(s==="pointerout"||s==="pointerover")&&(Ye=$a,ge="onPointerLeave",re="onPointerEnter",Z="pointer"),Gt=fe==null?ce:Xr(fe),oe=Ie==null?ce:Xr(Ie),ce=new Ye(ge,Z+"leave",fe,d,pe),ce.target=Gt,ce.relatedTarget=oe,ge=null,aa(pe)===le&&(Ye=new Ye(re,Z+"enter",Ie,d,pe),Ye.target=oe,Ye.relatedTarget=Gt,ge=Ye),Gt=ge,fe&&Ie)t:{for(Ye=r3,re=fe,Z=Ie,oe=0,ge=re;ge;ge=Ye(ge))oe++;ge=0;for(var Ue=Z;Ue;Ue=Ye(Ue))ge++;for(;0<oe-ge;)re=Ye(re),oe--;for(;0<ge-oe;)Z=Ye(Z),ge--;for(;oe--;){if(re===Z||Z!==null&&re===Z.alternate){Ye=re;break t}re=Ye(re),Z=Ye(Z)}Ye=null}else Ye=null;fe!==null&&bT(ye,ce,fe,Ye,!1),Ie!==null&&Gt!==null&&bT(ye,Gt,Ie,Ye,!0)}}e:{if(ce=le?Xr(le):window,fe=ce.nodeName&&ce.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ce.type==="file")var At=jw;else if(Ow(ce))if(Vw)At=pP;else{At=fP;var Ve=dP}else fe=ce.nodeName,!fe||fe.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&cc(le.elementType)&&(At=jw):At=hP;if(At&&(At=At(s,le))){Pw(ye,At,d,pe);break e}Ve&&Ve(s,ce,le),s==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&od(ce,"number",ce.value)}switch(Ve=le?Xr(le):window,s){case"focusin":(Ow(Ve)||Ve.contentEditable==="true")&&(vc=Ve,U0=le,bd=null);break;case"focusout":bd=U0=vc=null;break;case"mousedown":F0=!0;break;case"contextmenu":case"mouseup":case"dragend":F0=!1,Hw(ye,d,pe);break;case"selectionchange":if(mP)break;case"keydown":case"keyup":Hw(ye,d,pe)}var ut;if(Dt)e:{switch(s){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else mc?il(s,d)&&(vt="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(vt="onCompositionStart");vt&&(ga&&d.locale!=="ko"&&(mc||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&mc&&(ut=fd()):(da=pe,dd="value"in da?da.value:da.textContent,mc=!0)),Ve=Bp(le,vt),0<Ve.length&&(vt=new pa(vt,s,null,d,pe),ye.push({event:vt,listeners:Ve}),ut?vt.data=ut:(ut=gc(d),ut!==null&&(vt.data=ut)))),(ut=di?oP(s,d):lP(s,d))&&(vt=Bp(le,"onBeforeInput"),0<vt.length&&(Ve=new pa("onBeforeInput","beforeinput",null,d,pe),ye.push({event:Ve,listeners:vt}),Ve.data=ut)),JP(ye,s,le,d,pe)}vT(ye,l)})}function qd(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Bp(s,l){for(var d=l+"Capture",p=[];s!==null;){var b=s,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=ji(s,d),b!=null&&p.unshift(qd(s,b,w)),b=ji(s,l),b!=null&&p.push(qd(s,b,w))),s.tag===3)return p;s=s.return}return[]}function r3(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function bT(s,l,d,p,b){for(var w=l._reactName,I=[];d!==null&&d!==p;){var F=d,X=F.alternate,le=F.stateNode;if(F=F.tag,X!==null&&X===p)break;F!==5&&F!==26&&F!==27||le===null||(X=le,b?(le=ji(d,w),le!=null&&I.unshift(qd(d,le,X))):b||(le=ji(d,w),le!=null&&I.push(qd(d,le,X)))),d=d.return}I.length!==0&&s.push({event:l,listeners:I})}var i3=/\r\n?/g,a3=/\u0000|\uFFFD/g;function xT(s){return(typeof s=="string"?s:""+s).replace(i3,`
`).replace(a3,"")}function _T(s,l){return l=xT(l),xT(s)===l}function Ft(s,l,d,p,b,w){switch(d){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Nr(s,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Nr(s,""+p);break;case"className":Wr(s,"class",p);break;case"tabIndex":Wr(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Wr(s,d,p);break;case"style":cd(s,p,w);break;case"data":if(l!=="object"){Wr(s,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(d);break}p=uc(""+p),s.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&Ft(s,l,"name",b.name,b,null),Ft(s,l,"formEncType",b.formEncType,b,null),Ft(s,l,"formMethod",b.formMethod,b,null),Ft(s,l,"formTarget",b.formTarget,b,null)):(Ft(s,l,"encType",b.encType,b,null),Ft(s,l,"method",b.method,b,null),Ft(s,l,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(d);break}p=uc(""+p),s.setAttribute(d,p);break;case"onClick":p!=null&&(s.onclick=Pi);break;case"onScroll":p!=null&&pt("scroll",s);break;case"onScrollEnd":p!=null&&pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(d=p.__html,d!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}d=uc(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(d,""+p):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":p===!0?s.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(d,p):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(d,p):s.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(d):s.setAttribute(d,p);break;case"popover":pt("beforetoggle",s),pt("toggle",s),oc(s,"popover",p);break;case"xlinkActuate":Rn(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Rn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Rn(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Rn(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Rn(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Rn(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Rn(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Rn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Rn(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":oc(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Bh.get(d)||d,oc(s,d,p))}}function hy(s,l,d,p,b,w){switch(d){case"style":cd(s,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(d=p.__html,d!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"children":typeof p=="string"?Nr(s,p):(typeof p=="number"||typeof p=="bigint")&&Nr(s,""+p);break;case"onScroll":p!=null&&pt("scroll",s);break;case"onScrollEnd":p!=null&&pt("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nd.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),l=d.slice(2,b?d.length-7:void 0),w=s[Yn]||null,w=w!=null?w[d]:null,typeof w=="function"&&s.removeEventListener(l,w,b),typeof p=="function")){typeof w!="function"&&w!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,p,b);break e}d in s?s[d]=p:p===!0?s.setAttribute(d,""):oc(s,d,p)}}}function rr(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",s),pt("load",s);var p=!1,b=!1,w;for(w in d)if(d.hasOwnProperty(w)){var I=d[w];if(I!=null)switch(w){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Ft(s,l,w,I,d,null)}}b&&Ft(s,l,"srcSet",d.srcSet,d,null),p&&Ft(s,l,"src",d.src,d,null);return;case"input":pt("invalid",s);var F=w=I=b=null,X=null,le=null;for(p in d)if(d.hasOwnProperty(p)){var pe=d[p];if(pe!=null)switch(p){case"name":b=pe;break;case"type":I=pe;break;case"checked":X=pe;break;case"defaultChecked":le=pe;break;case"value":w=pe;break;case"defaultValue":F=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,l));break;default:Ft(s,l,p,pe,d,null)}}Vh(s,w,F,X,le,I,b,!1);return;case"select":pt("invalid",s),p=I=w=null;for(b in d)if(d.hasOwnProperty(b)&&(F=d[b],F!=null))switch(b){case"value":w=F;break;case"defaultValue":I=F;break;case"multiple":p=F;default:Ft(s,l,b,F,d,null)}l=w,d=I,s.multiple=!!p,l!=null?Ms(s,!!p,l,!1):d!=null&&Ms(s,!!p,d,!0);return;case"textarea":pt("invalid",s),w=b=p=null;for(I in d)if(d.hasOwnProperty(I)&&(F=d[I],F!=null))switch(I){case"value":p=F;break;case"defaultValue":b=F;break;case"children":w=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:Ft(s,l,I,F,d,null)}Os(s,p,b,w);return;case"option":for(X in d)if(d.hasOwnProperty(X)&&(p=d[X],p!=null))switch(X){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ft(s,l,X,p,d,null)}return;case"dialog":pt("beforetoggle",s),pt("toggle",s),pt("cancel",s),pt("close",s);break;case"iframe":case"object":pt("load",s);break;case"video":case"audio":for(p=0;p<Gd.length;p++)pt(Gd[p],s);break;case"image":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"embed":case"source":case"link":pt("error",s),pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in d)if(d.hasOwnProperty(le)&&(p=d[le],p!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Ft(s,l,le,p,d,null)}return;default:if(cc(l)){for(pe in d)d.hasOwnProperty(pe)&&(p=d[pe],p!==void 0&&hy(s,l,pe,p,d,void 0));return}}for(F in d)d.hasOwnProperty(F)&&(p=d[F],p!=null&&Ft(s,l,F,p,d,null))}function s3(s,l,d,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,I=null,F=null,X=null,le=null,pe=null;for(fe in d){var ye=d[fe];if(d.hasOwnProperty(fe)&&ye!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":X=ye;default:p.hasOwnProperty(fe)||Ft(s,l,fe,null,p,ye)}}for(var ce in p){var fe=p[ce];if(ye=d[ce],p.hasOwnProperty(ce)&&(fe!=null||ye!=null))switch(ce){case"type":w=fe;break;case"name":b=fe;break;case"checked":le=fe;break;case"defaultChecked":pe=fe;break;case"value":I=fe;break;case"defaultValue":F=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,l));break;default:fe!==ye&&Ft(s,l,ce,fe,p,ye)}}lc(s,I,F,X,le,pe,w,b);return;case"select":fe=I=F=ce=null;for(w in d)if(X=d[w],d.hasOwnProperty(w)&&X!=null)switch(w){case"value":break;case"multiple":fe=X;default:p.hasOwnProperty(w)||Ft(s,l,w,null,p,X)}for(b in p)if(w=p[b],X=d[b],p.hasOwnProperty(b)&&(w!=null||X!=null))switch(b){case"value":ce=w;break;case"defaultValue":F=w;break;case"multiple":I=w;default:w!==X&&Ft(s,l,b,w,p,X)}l=F,d=I,p=fe,ce!=null?Ms(s,!!d,ce,!1):!!p!=!!d&&(l!=null?Ms(s,!!d,l,!0):Ms(s,!!d,d?[]:"",!1));return;case"textarea":fe=ce=null;for(F in d)if(b=d[F],d.hasOwnProperty(F)&&b!=null&&!p.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Ft(s,l,F,null,p,b)}for(I in p)if(b=p[I],w=d[I],p.hasOwnProperty(I)&&(b!=null||w!=null))switch(I){case"value":ce=b;break;case"defaultValue":fe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==w&&Ft(s,l,I,b,p,w)}zh(s,ce,fe);return;case"option":for(var Ie in d)if(ce=d[Ie],d.hasOwnProperty(Ie)&&ce!=null&&!p.hasOwnProperty(Ie))switch(Ie){case"selected":s.selected=!1;break;default:Ft(s,l,Ie,null,p,ce)}for(X in p)if(ce=p[X],fe=d[X],p.hasOwnProperty(X)&&ce!==fe&&(ce!=null||fe!=null))switch(X){case"selected":s.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Ft(s,l,X,ce,p,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in d)ce=d[Ye],d.hasOwnProperty(Ye)&&ce!=null&&!p.hasOwnProperty(Ye)&&Ft(s,l,Ye,null,p,ce);for(le in p)if(ce=p[le],fe=d[le],p.hasOwnProperty(le)&&ce!==fe&&(ce!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:Ft(s,l,le,ce,p,fe)}return;default:if(cc(l)){for(var Gt in d)ce=d[Gt],d.hasOwnProperty(Gt)&&ce!==void 0&&!p.hasOwnProperty(Gt)&&hy(s,l,Gt,void 0,p,ce);for(pe in p)ce=p[pe],fe=d[pe],!p.hasOwnProperty(pe)||ce===fe||ce===void 0&&fe===void 0||hy(s,l,pe,ce,p,fe);return}}for(var re in d)ce=d[re],d.hasOwnProperty(re)&&ce!=null&&!p.hasOwnProperty(re)&&Ft(s,l,re,null,p,ce);for(ye in p)ce=p[ye],fe=d[ye],!p.hasOwnProperty(ye)||ce===fe||ce==null&&fe==null||Ft(s,l,ye,ce,p,fe)}function wT(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o3(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,d=performance.getEntriesByType("resource"),p=0;p<d.length;p++){var b=d[p],w=b.transferSize,I=b.initiatorType,F=b.duration;if(w&&F&&wT(I)){for(I=0,F=b.responseEnd,p+=1;p<d.length;p++){var X=d[p],le=X.startTime;if(le>F)break;var pe=X.transferSize,ye=X.initiatorType;pe&&wT(ye)&&(X=X.responseEnd,I+=pe*(X<F?1:(F-le)/(X-le)))}if(--p,l+=8*(w+I)/(b.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var py=null,gy=null;function Up(s){return s.nodeType===9?s:s.ownerDocument}function ET(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ST(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function my(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var vy=null;function l3(){var s=window.event;return s&&s.type==="popstate"?s===vy?!1:(vy=s,!0):(vy=null,!1)}var TT=typeof setTimeout=="function"?setTimeout:void 0,c3=typeof clearTimeout=="function"?clearTimeout:void 0,AT=typeof Promise=="function"?Promise:void 0,u3=typeof queueMicrotask=="function"?queueMicrotask:typeof AT<"u"?function(s){return AT.resolve(null).then(s).catch(d3)}:TT;function d3(s){setTimeout(function(){throw s})}function ro(s){return s==="head"}function CT(s,l){var d=l,p=0;do{var b=d.nextSibling;if(s.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(p===0){s.removeChild(b),qc(l);return}p--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")p++;else if(d==="html")Hd(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,Hd(d);for(var w=d.firstChild;w;){var I=w.nextSibling,F=w.nodeName;w[ia]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&w.rel.toLowerCase()==="stylesheet"||d.removeChild(w),w=I}}else d==="body"&&Hd(s.ownerDocument.body);d=b}while(d);qc(l)}function RT(s,l){var d=s;s=0;do{var p=d.nextSibling;if(d.nodeType===1?l?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(l?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),p&&p.nodeType===8)if(d=p.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=p}while(d)}function yy(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":yy(d),sc(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function f3(s,l,d,p){for(;s.nodeType===1;){var b=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[ia])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=yi(s.nextSibling),s===null)break}return null}function h3(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=yi(s.nextSibling),s===null))return null;return s}function DT(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=yi(s.nextSibling),s===null))return null;return s}function by(s){return s.data==="$?"||s.data==="$~"}function xy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function p3(s,l){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||d.readyState!=="loading")l();else{var p=function(){l(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function yi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var _y=null;function kT(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(l===0)return yi(s.nextSibling);l--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||l++}s=s.nextSibling}return null}function NT(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(l===0)return s;l--}else d!=="/$"&&d!=="/&"||l++}s=s.previousSibling}return null}function IT(s,l,d){switch(l=Up(d),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Hd(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);sc(s)}var bi=new Map,MT=new Set;function Fp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var os=H.d;H.d={f:g3,r:m3,D:v3,C:y3,L:b3,m:x3,X:w3,S:_3,M:E3};function g3(){var s=os.f(),l=Mp();return s||l}function m3(s){var l=li(s);l!==null&&l.tag===5&&l.type==="form"?KE(l):os.r(s)}var Uc=typeof document>"u"?null:document;function OT(s,l,d){var p=Uc;if(p&&typeof l=="string"&&l){var b=kr(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),MT.has(b)||(MT.add(b),s={rel:s,crossOrigin:d,href:l},p.querySelector(b)===null&&(l=p.createElement("link"),rr(l,"link",s),Cn(l),p.head.appendChild(l)))}}function v3(s){os.D(s),OT("dns-prefetch",s,null)}function y3(s,l){os.C(s,l),OT("preconnect",s,l)}function b3(s,l,d){os.L(s,l,d);var p=Uc;if(p&&s&&l){var b='link[rel="preload"][as="'+kr(l)+'"]';l==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+kr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+kr(d.imageSizes)+'"]')):b+='[href="'+kr(s)+'"]';var w=b;switch(l){case"style":w=Fc(s);break;case"script":w=Gc(s)}bi.has(w)||(s=g({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),bi.set(w,s),p.querySelector(b)!==null||l==="style"&&p.querySelector($d(w))||l==="script"&&p.querySelector(Yd(w))||(l=p.createElement("link"),rr(l,"link",s),Cn(l),p.head.appendChild(l)))}}function x3(s,l){os.m(s,l);var d=Uc;if(d&&s){var p=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+kr(p)+'"][href="'+kr(s)+'"]',w=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Gc(s)}if(!bi.has(w)&&(s=g({rel:"modulepreload",href:s},l),bi.set(w,s),d.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Yd(w)))return}p=d.createElement("link"),rr(p,"link",s),Cn(p),d.head.appendChild(p)}}}function _3(s,l,d){os.S(s,l,d);var p=Uc;if(p&&s){var b=sa(p).hoistableStyles,w=Fc(s);l=l||"default";var I=b.get(w);if(!I){var F={loading:0,preload:null};if(I=p.querySelector($d(w)))F.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},d),(d=bi.get(w))&&wy(s,d);var X=I=p.createElement("link");Cn(X),rr(X,"link",s),X._p=new Promise(function(le,pe){X.onload=le,X.onerror=pe}),X.addEventListener("load",function(){F.loading|=1}),X.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Gp(I,l,p)}I={type:"stylesheet",instance:I,count:1,state:F},b.set(w,I)}}}function w3(s,l){os.X(s,l);var d=Uc;if(d&&s){var p=sa(d).hoistableScripts,b=Gc(s),w=p.get(b);w||(w=d.querySelector(Yd(b)),w||(s=g({src:s,async:!0},l),(l=bi.get(b))&&Ey(s,l),w=d.createElement("script"),Cn(w),rr(w,"link",s),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(b,w))}}function E3(s,l){os.M(s,l);var d=Uc;if(d&&s){var p=sa(d).hoistableScripts,b=Gc(s),w=p.get(b);w||(w=d.querySelector(Yd(b)),w||(s=g({src:s,async:!0,type:"module"},l),(l=bi.get(b))&&Ey(s,l),w=d.createElement("script"),Cn(w),rr(w,"link",s),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(b,w))}}function PT(s,l,d,p){var b=(b=ie.current)?Fp(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Fc(d.href),d=sa(b).hoistableStyles,p=d.get(l),p||(p={type:"style",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=Fc(d.href);var w=sa(b).hoistableStyles,I=w.get(s);if(I||(b=b.ownerDocument||b,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,I),(w=b.querySelector($d(s)))&&!w._p&&(I.instance=w,I.state.loading=5),bi.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},bi.set(s,d),w||S3(b,s,d,I.state))),l&&p===null)throw Error(r(528,""));return I}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Gc(d),d=sa(b).hoistableScripts,p=d.get(l),p||(p={type:"script",instance:null,count:0,state:null},d.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Fc(s){return'href="'+kr(s)+'"'}function $d(s){return'link[rel="stylesheet"]['+s+"]"}function jT(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function S3(s,l,d,p){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=s.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),rr(l,"link",d),Cn(l),s.head.appendChild(l))}function Gc(s){return'[src="'+kr(s)+'"]'}function Yd(s){return"script[async]"+s}function VT(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var p=s.querySelector('style[data-href~="'+kr(d.href)+'"]');if(p)return l.instance=p,Cn(p),p;var b=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),Cn(p),rr(p,"style",b),Gp(p,d.precedence,s),l.instance=p;case"stylesheet":b=Fc(d.href);var w=s.querySelector($d(b));if(w)return l.state.loading|=4,l.instance=w,Cn(w),w;p=jT(d),(b=bi.get(b))&&wy(p,b),w=(s.ownerDocument||s).createElement("link"),Cn(w);var I=w;return I._p=new Promise(function(F,X){I.onload=F,I.onerror=X}),rr(w,"link",p),l.state.loading|=4,Gp(w,d.precedence,s),l.instance=w;case"script":return w=Gc(d.src),(b=s.querySelector(Yd(w)))?(l.instance=b,Cn(b),b):(p=d,(b=bi.get(w))&&(p=g({},d),Ey(p,b)),s=s.ownerDocument||s,b=s.createElement("script"),Cn(b),rr(b,"link",p),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,Gp(p,d.precedence,s));return l.instance}function Gp(s,l,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,w=b,I=0;I<p.length;I++){var F=p[I];if(F.dataset.precedence===l)w=F;else if(w!==b)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function wy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Ey(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var qp=null;function zT(s,l,d){if(qp===null){var p=new Map,b=qp=new Map;b.set(d,p)}else b=qp,p=b.get(d),p||(p=new Map,b.set(d,p));if(p.has(s))return p;for(p.set(s,null),d=d.getElementsByTagName(s),b=0;b<d.length;b++){var w=d[b];if(!(w[ia]||w[An]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var I=w.getAttribute(l)||"";I=s+I;var F=p.get(I);F?F.push(w):p.set(I,[w])}}return p}function LT(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function T3(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function BT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function A3(s,l,d,p){if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=Fc(p.href),w=l.querySelector($d(b));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Hp.bind(s),l.then(s,s)),d.state.loading|=4,d.instance=w,Cn(w);return}w=l.ownerDocument||l,p=jT(p),(b=bi.get(b))&&wy(p,b),w=w.createElement("link"),Cn(w);var I=w;I._p=new Promise(function(F,X){I.onload=F,I.onerror=X}),rr(w,"link",p),d.instance=w}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=Hp.bind(s),l.addEventListener("load",d),l.addEventListener("error",d))}}var Sy=0;function C3(s,l){return s.stylesheets&&s.count===0&&Yp(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var p=setTimeout(function(){if(s.stylesheets&&Yp(s,s.stylesheets),s.unsuspend){var w=s.unsuspend;s.unsuspend=null,w()}},6e4+l);0<s.imgBytes&&Sy===0&&(Sy=62500*o3());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Yp(s,s.stylesheets),s.unsuspend)){var w=s.unsuspend;s.unsuspend=null,w()}},(s.imgBytes>Sy?50:800)+l);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function Hp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var $p=null;function Yp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,$p=new Map,l.forEach(R3,s),$p=null,Hp.call(s))}function R3(s,l){if(!(l.state.loading&4)){var d=$p.get(s);if(d)var p=d.get(null);else{d=new Map,$p.set(s,d);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var I=b[w];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(d.set(I.dataset.precedence,I),p=I)}p&&d.set(null,p)}b=l.instance,I=b.getAttribute("data-precedence"),w=d.get(I)||p,w===p&&d.set(null,b),d.set(I,b),this.count++,p=Hp.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),w?w.parentNode.insertBefore(b,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var Xd={$$typeof:k,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function D3(s,l,d,p,b,w,I,F,X){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dr(0),this.hiddenUpdates=Dr(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function UT(s,l,d,p,b,w,I,F,X,le,pe,ye){return s=new D3(s,l,d,I,X,le,pe,ye,F),l=1,w===!0&&(l|=24),w=Qr(3,null,null,l),s.current=w,w.stateNode=s,l=rv(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:p,isDehydrated:d,cache:l},ov(w),s}function FT(s){return s?(s=xc,s):xc}function GT(s,l,d,p,b,w){b=FT(b),p.context===null?p.context=b:p.pendingContext=b,p=$s(l),p.payload={element:d},w=w===void 0?null:w,w!==null&&(p.callback=w),d=Ys(s,p,l),d!==null&&(jr(d,s,l),Ad(d,s,l))}function qT(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Ty(s,l){qT(s,l),(s=s.alternate)&&qT(s,l)}function HT(s){if(s.tag===13||s.tag===31){var l=ol(s,67108864);l!==null&&jr(l,s,67108864),Ty(s,67108864)}}function $T(s){if(s.tag===13||s.tag===31){var l=ni();l=Wo(l);var d=ol(s,l);d!==null&&jr(d,s,l),Ty(s,l)}}var Xp=!0;function k3(s,l,d,p){var b=$.T;$.T=null;var w=H.p;try{H.p=2,Ay(s,l,d,p)}finally{H.p=w,$.T=b}}function N3(s,l,d,p){var b=$.T;$.T=null;var w=H.p;try{H.p=8,Ay(s,l,d,p)}finally{H.p=w,$.T=b}}function Ay(s,l,d,p){if(Xp){var b=Cy(p);if(b===null)fy(s,l,p,Wp,d),XT(s,p);else if(M3(b,s,l,d,p))p.stopPropagation();else if(XT(s,p),l&4&&-1<I3.indexOf(s)){for(;b!==null;){var w=li(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var I=Pt(w.pendingLanes);if(I!==0){var F=w;for(F.pendingLanes|=2,F.entangledLanes|=2;I;){var X=1<<31-Rt(I);F.entanglements[1]|=X,I&=~X}ba(w),(kt&6)===0&&(Np=ft()+500,Fd(0))}}break;case 31:case 13:F=ol(w,2),F!==null&&jr(F,w,2),Mp(),Ty(w,2)}if(w=Cy(p),w===null&&fy(s,l,p,Wp,d),w===b)break;b=w}b!==null&&p.stopPropagation()}else fy(s,l,p,null,d)}}function Cy(s){return s=ci(s),Ry(s)}var Wp=null;function Ry(s){if(Wp=null,s=aa(s),s!==null){var l=a(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=o(l),s!==null)return s;s=null}else if(d===31){if(s=c(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Wp=s,null}function YT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ot()){case fr:return 2;case hr:return 8;case Yr:case Ns:return 32;case je:return 268435456;default:return 32}default:return 32}}var Dy=!1,io=null,ao=null,so=null,Wd=new Map,Kd=new Map,oo=[],I3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function XT(s,l){switch(s){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":Wd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(l.pointerId)}}function Qd(s,l,d,p,b,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:d,eventSystemFlags:p,nativeEvent:w,targetContainers:[b]},l!==null&&(l=li(l),l!==null&&HT(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function M3(s,l,d,p,b){switch(l){case"focusin":return io=Qd(io,s,l,d,p,b),!0;case"dragenter":return ao=Qd(ao,s,l,d,p,b),!0;case"mouseover":return so=Qd(so,s,l,d,p,b),!0;case"pointerover":var w=b.pointerId;return Wd.set(w,Qd(Wd.get(w)||null,s,l,d,p,b)),!0;case"gotpointercapture":return w=b.pointerId,Kd.set(w,Qd(Kd.get(w)||null,s,l,d,p,b)),!0}return!1}function WT(s){var l=aa(s.target);if(l!==null){var d=a(l);if(d!==null){if(l=d.tag,l===13){if(l=o(d),l!==null){s.blockedOn=l,Mi(s.priority,function(){$T(d)});return}}else if(l===31){if(l=c(d),l!==null){s.blockedOn=l,Mi(s.priority,function(){$T(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Kp(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=Cy(s.nativeEvent);if(d===null){d=s.nativeEvent;var p=new d.constructor(d.type,d);ud=p,d.target.dispatchEvent(p),ud=null}else return l=li(d),l!==null&&HT(l),s.blockedOn=d,!1;l.shift()}return!0}function KT(s,l,d){Kp(s)&&d.delete(l)}function O3(){Dy=!1,io!==null&&Kp(io)&&(io=null),ao!==null&&Kp(ao)&&(ao=null),so!==null&&Kp(so)&&(so=null),Wd.forEach(KT),Kd.forEach(KT)}function Qp(s,l){s.blockedOn===l&&(s.blockedOn=null,Dy||(Dy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,O3)))}var Zp=null;function QT(s){Zp!==s&&(Zp=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Zp===s&&(Zp=null);for(var l=0;l<s.length;l+=3){var d=s[l],p=s[l+1],b=s[l+2];if(typeof p!="function"){if(Ry(p||d)===null)continue;break}var w=li(d);w!==null&&(s.splice(l,3),l-=3,Cv(w,{pending:!0,data:b,method:d.method,action:p},p,b))}}))}function qc(s){function l(X){return Qp(X,s)}io!==null&&Qp(io,s),ao!==null&&Qp(ao,s),so!==null&&Qp(so,s),Wd.forEach(l),Kd.forEach(l);for(var d=0;d<oo.length;d++){var p=oo[d];p.blockedOn===s&&(p.blockedOn=null)}for(;0<oo.length&&(d=oo[0],d.blockedOn===null);)WT(d),d.blockedOn===null&&oo.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var b=d[p],w=d[p+1],I=b[Yn]||null;if(typeof w=="function")I||QT(d);else if(I){var F=null;if(w&&w.hasAttribute("formAction")){if(b=w,I=w[Yn]||null)F=I.formAction;else if(Ry(b)!==null)continue}else F=I.action;typeof F=="function"?d[p+1]=F:(d.splice(p,3),p-=3),QT(d)}}}function ZT(){function s(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(I){return b=I})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),p||setTimeout(d,20)}function d(){if(!p&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(d,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function ky(s){this._internalRoot=s}Jp.prototype.render=ky.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,p=ni();GT(d,p,s,l,null,null)},Jp.prototype.unmount=ky.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;GT(s.current,2,null,s,null,null),Mp(),l[ra]=null}};function Jp(s){this._internalRoot=s}Jp.prototype.unstable_scheduleHydration=function(s){if(s){var l=Mh();s={blockedOn:null,target:s,priority:l};for(var d=0;d<oo.length&&l!==0&&l<oo[d].priority;d++);oo.splice(d,0,s),d===0&&WT(s)}};var JT=e.version;if(JT!=="19.2.0")throw Error(r(527,JT,"19.2.0"));H.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var P3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{Lt=eg.inject(P3),Wt=eg}catch{}}return Jd.createRoot=function(s,l){if(!i(s))throw Error(r(299));var d=!1,p="",b=sS,w=oS,I=lS;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),l=UT(s,1,!1,null,null,d,p,null,b,w,I,ZT),s[ra]=l.current,dy(s),new ky(l)},Jd.hydrateRoot=function(s,l,d){if(!i(s))throw Error(r(299));var p=!1,b="",w=sS,I=oS,F=lS,X=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(I=d.onCaughtError),d.onRecoverableError!==void 0&&(F=d.onRecoverableError),d.formState!==void 0&&(X=d.formState)),l=UT(s,1,!0,l,d??null,p,b,X,w,I,F,ZT),l.context=FT(null),d=l.current,p=ni(),p=Wo(p),b=$s(p),b.callback=null,Ys(d,b,p),d=p,l.current.lanes=d,oi(l,d),ba(l),s[ra]=l.current,dy(s),new Jp(l)},Jd.version="19.2.0",Jd}var cA;function $3(){if(cA)return My.exports;cA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),My.exports=H3(),My.exports}var Y3=$3();const X3="modulepreload",W3=function(t){return"/personal-budget-pwa/"+t},uA={},pn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let f=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=f;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=f(n.map(h=>{if(h=W3(h),h in uA)return;uA[h]=!0;const g=h.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":X3,g||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),g)return new Promise((_,E)=>{x.addEventListener("load",_),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function K3(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=t;let c,u;const f=async(g=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await pn(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(g=>{o?.(g)}),!c)return;c.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),c.addEventListener("installed",g=>{g.isUpdate||r?.()}),c.register({immediate:e}).then(g=>{a?a("/personal-budget-pwa/sw.js",g):i?.(g)}).catch(g=>{o?.(g)})}}return u=h(),f}var dA="popstate";function Q3(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=Ql(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ib("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,f=u.indexOf("#");c=f===-1?u:u.slice(0,f)}return c+"#"+(typeof a=="string"?a:Nf(a))}function r(i,a){ai(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return J3(e,n,r,t)}function ln(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ai(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Z3(){return Math.random().toString(36).substring(2,10)}function fA(t,e){return{usr:t.state,key:t.key,idx:e}}function Ib(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ql(e):e,state:n,key:e&&e.key||r||Z3()}}function Nf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ql(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function J3(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,f=h();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function h(){return(o.state||{idx:null}).idx}function g(){c="POP";let S=h(),T=S==null?null:S-f;f=S,u&&u({action:c,location:E.location,delta:T})}function m(S,T){c="PUSH";let D=Ib(E.location,S,T);n&&n(D,S),f=h()+1;let k=fA(D,f),j=E.createHref(D);try{o.pushState(k,"",j)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(j)}a&&u&&u({action:c,location:E.location,delta:1})}function x(S,T){c="REPLACE";let D=Ib(E.location,S,T);n&&n(D,S),f=h();let k=fA(D,f),j=E.createHref(D);o.replaceState(k,"",j),a&&u&&u({action:c,location:E.location,delta:0})}function _(S){return ej(S)}let E={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(dA,g),u=S,()=>{i.removeEventListener(dA,g),u=null}},createHref(S){return e(i,S)},createURL:_,encodeLocation(S){let T=_(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:x,go(S){return o.go(S)}};return E}function ej(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ln(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Nf(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function vD(t,e,n="/"){return tj(t,e,n,!1)}function tj(t,e,n,r){let i=typeof e=="string"?Ql(e):e,a=ys(i.pathname||"/",n);if(a==null)return null;let o=yD(t);nj(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let f=hj(a);c=dj(o[u],f,r)}return c}function yD(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,f)=>{let h={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;ln(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=fs([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(ln(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),yD(o.children,e,m,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:cj(g,o.index),routesMeta:m})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of bD(o.path))a(o,c,!0,u)}),e}function bD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=bD(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function nj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var rj=/^:[\w-]+$/,ij=3,aj=2,sj=1,oj=10,lj=-2,hA=t=>t==="*";function cj(t,e){let n=t.split("/"),r=n.length;return n.some(hA)&&(r+=lj),e&&(r+=aj),n.filter(i=>!hA(i)).reduce((i,a)=>i+(rj.test(a)?ij:a===""?sj:oj),r)}function uj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function dj(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],f=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=Kg({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},h),m=u.route;if(!g&&f&&n&&!r[r.length-1].route.index&&(g=Kg({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:fs([a,g.pathname]),pathnameBase:yj(fs([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=fs([a,g.pathnameBase]))}return o}function Kg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=fj(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:g},m)=>{if(h==="*"){let _=c[m]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const x=c[m];return g&&!x?f[h]=void 0:f[h]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:t}}function fj(t,e=!1,n=!0){ai(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function hj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ai(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ys(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var pj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gj=t=>pj.test(t);function mj(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ql(t):t,a;if(n)if(gj(n))a=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ai(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?a=pA(n.substring(1),"/"):a=pA(n,e)}else a=e;return{pathname:a,search:bj(r),hash:xj(i)}}function pA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xD(t){let e=vj(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function _D(t,e,n,r=!1){let i;typeof t=="string"?i=Ql(t):(i={...t},ln(!i.pathname||!i.pathname.includes("?"),Vy("?","pathname","search",i)),ln(!i.pathname||!i.pathname.includes("#"),Vy("#","pathname","hash",i)),ln(!i.search||!i.search.includes("#"),Vy("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let u=mj(i,c),f=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}var fs=t=>t.join("/").replace(/\/\/+/g,"/"),yj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _j(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wD=["POST","PUT","PATCH","DELETE"];new Set(wD);var wj=["GET",...wD];new Set(wj);var Vu=G.createContext(null);Vu.displayName="DataRouter";var Bm=G.createContext(null);Bm.displayName="DataRouterState";G.createContext(!1);var ED=G.createContext({isTransitioning:!1});ED.displayName="ViewTransition";var Ej=G.createContext(new Map);Ej.displayName="Fetchers";var Sj=G.createContext(null);Sj.displayName="Await";var ja=G.createContext(null);ja.displayName="Navigation";var rh=G.createContext(null);rh.displayName="Location";var Va=G.createContext({outlet:null,matches:[],isDataRoute:!1});Va.displayName="Route";var cx=G.createContext(null);cx.displayName="RouteError";function Tj(t,{relative:e}={}){ln(ih(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=G.useContext(ja),{hash:i,pathname:a,search:o}=ah(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:fs([n,a])),r.createHref({pathname:c,search:o,hash:i})}function ih(){return G.useContext(rh)!=null}function za(){return ln(ih(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(rh).location}var SD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TD(t){G.useContext(ja).static||G.useLayoutEffect(t)}function La(){let{isDataRoute:t}=G.useContext(Va);return t?Lj():Aj()}function Aj(){ln(ih(),"useNavigate() may be used only in the context of a <Router> component.");let t=G.useContext(Vu),{basename:e,navigator:n}=G.useContext(ja),{matches:r}=G.useContext(Va),{pathname:i}=za(),a=JSON.stringify(xD(r)),o=G.useRef(!1);return TD(()=>{o.current=!0}),G.useCallback((u,f={})=>{if(ai(o.current,SD),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=_D(u,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:fs([e,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[e,n,a,i,t])}G.createContext(null);function Cj(){let{matches:t}=G.useContext(Va),e=t[t.length-1];return e?e.params:{}}function ah(t,{relative:e}={}){let{matches:n}=G.useContext(Va),{pathname:r}=za(),i=JSON.stringify(xD(n));return G.useMemo(()=>_D(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Rj(t,e){return AD(t,e)}function AD(t,e,n,r,i){ln(ih(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=G.useContext(ja),{matches:o}=G.useContext(Va),c=o[o.length-1],u=c?c.params:{},f=c?c.pathname:"/",h=c?c.pathnameBase:"/",g=c&&c.route;{let D=g&&g.path||"";CD(f,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let m=za(),x;if(e){let D=typeof e=="string"?Ql(e):e;ln(h==="/"||D.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${D.pathname}" was given in the \`location\` prop.`),x=D}else x=m;let _=x.pathname||"/",E=_;if(h!=="/"){let D=h.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(D.length).join("/")}let S=vD(t,{pathname:E});ai(g||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ai(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=Mj(S&&S.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:fs([h,a.encodeLocation?a.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:fs([h,a.encodeLocation?a.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),o,n,r,i);return e&&T?G.createElement(rh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},T):T}function Dj(){let t=zj(),e=_j(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:a},"ErrorBoundary")," or"," ",G.createElement("code",{style:a},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:i},n):null,o)}var kj=G.createElement(Dj,null),Nj=class extends G.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?G.createElement(Va.Provider,{value:this.props.routeContext},G.createElement(cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ij({routeContext:t,match:e,children:n}){let r=G.useContext(Vu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),G.createElement(Va.Provider,{value:t},n)}function Mj(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let h=a.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);ln(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let g=a[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=h),g.route.id){let{loaderData:m,errors:x}=n,_=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||_){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let f=n&&r?(h,g)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:g})}:void 0;return a.reduceRight((h,g,m)=>{let x,_=!1,E=null,S=null;n&&(x=o&&g.route.id?o[g.route.id]:void 0,E=g.route.errorElement||kj,c&&(u<0&&m===0?(CD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,S=null):u===m&&(_=!0,S=g.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,m+1)),D=()=>{let k;return x?k=E:_?k=S:g.route.Component?k=G.createElement(g.route.Component,null):g.route.element?k=g.route.element:k=h,G.createElement(Ij,{match:g,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:k})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?G.createElement(Nj,{location:n.location,revalidation:n.revalidation,component:E,error:x,children:D(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:f}):D()},null)}function ux(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Oj(t){let e=G.useContext(Vu);return ln(e,ux(t)),e}function Pj(t){let e=G.useContext(Bm);return ln(e,ux(t)),e}function jj(t){let e=G.useContext(Va);return ln(e,ux(t)),e}function dx(t){let e=jj(t),n=e.matches[e.matches.length-1];return ln(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Vj(){return dx("useRouteId")}function zj(){let t=G.useContext(cx),e=Pj("useRouteError"),n=dx("useRouteError");return t!==void 0?t:e.errors?.[n]}function Lj(){let{router:t}=Oj("useNavigate"),e=dx("useNavigate"),n=G.useRef(!1);return TD(()=>{n.current=!0}),G.useCallback(async(i,a={})=>{ai(n.current,SD),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var gA={};function CD(t,e,n){!e&&!gA[t]&&(gA[t]=!0,ai(!1,n))}G.memo(Bj);function Bj({routes:t,future:e,state:n,unstable_onError:r}){return AD(t,void 0,n,r,e)}function ls(t){ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Uj({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){ln(!ih(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=Ql(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:m="default"}=n,x=G.useMemo(()=>{let _=ys(u,o);return _==null?null:{location:{pathname:_,search:f,hash:h,state:g,key:m},navigationType:r}},[o,u,f,h,g,m,r]);return ai(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:G.createElement(ja.Provider,{value:c},G.createElement(rh.Provider,{children:e,value:x}))}function Fj({children:t,location:e}){return Rj(Mb(t),e)}function Mb(t,e=[]){let n=[];return G.Children.forEach(t,(r,i)=>{if(!G.isValidElement(r))return;let a=[...e,i];if(r.type===G.Fragment){n.push.apply(n,Mb(r.props.children,a));return}ln(r.type===ls,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ln(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mb(r.props.children,a)),n.push(o)}),n}var kg="get",Ng="application/x-www-form-urlencoded";function Um(t){return t!=null&&typeof t.tagName=="string"}function Gj(t){return Um(t)&&t.tagName.toLowerCase()==="button"}function qj(t){return Um(t)&&t.tagName.toLowerCase()==="form"}function Hj(t){return Um(t)&&t.tagName.toLowerCase()==="input"}function $j(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Yj(t,e){return t.button===0&&(!e||e==="_self")&&!$j(t)}function Ob(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Xj(t,e){let n=Ob(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var ng=null;function Wj(){if(ng===null)try{new FormData(document.createElement("form"),0),ng=!1}catch{ng=!0}return ng}var Kj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zy(t){return t!=null&&!Kj.has(t)?(ai(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ng}"`),null):t}function Qj(t,e){let n,r,i,a,o;if(qj(t)){let c=t.getAttribute("action");r=c?ys(c,e):null,n=t.getAttribute("method")||kg,i=zy(t.getAttribute("enctype"))||Ng,a=new FormData(t)}else if(Gj(t)||Hj(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?ys(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||kg,i=zy(t.getAttribute("formenctype"))||zy(c.getAttribute("enctype"))||Ng,a=new FormData(c,t),!Wj()){let{name:f,type:h,value:g}=t;if(h==="image"){let m=f?`${f}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else f&&a.append(f,g)}}else{if(Um(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=kg,r=null,i=Ng,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zj(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&ys(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Jj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function e5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function t5(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await Jj(a,n);return o.links?o.links():[]}return[]}));return a5(r.flat(1).filter(e5).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function mA(t,e,n,r,i,a){let o=(u,f)=>n[f]?u.route.id!==n[f].route.id:!0,c=(u,f)=>n[f].pathname!==u.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,f)=>o(u,f)||c(u,f)):a==="data"?e.filter((u,f)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,f)||c(u,f))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function n5(t,e,{includeHydrateFallback:n}={}){return r5(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function r5(t){return[...new Set(t)]}function i5(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function a5(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(i5(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function RD(){let t=G.useContext(Vu);return fx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function s5(){let t=G.useContext(Bm);return fx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var hx=G.createContext(void 0);hx.displayName="FrameworkContext";function DD(){let t=G.useContext(hx);return fx(t,"You must render this element inside a <HydratedRouter> element"),t}function o5(t,e){let n=G.useContext(hx),[r,i]=G.useState(!1),[a,o]=G.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:f,onMouseLeave:h,onTouchStart:g}=e,m=G.useRef(null);G.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let E=T=>{T.forEach(D=>{o(D.isIntersecting)})},S=new IntersectionObserver(E,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[t]),G.useEffect(()=>{if(r){let E=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(E)}}},[r]);let x=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:ef(c,x),onBlur:ef(u,_),onMouseEnter:ef(f,x),onMouseLeave:ef(h,_),onTouchStart:ef(g,x)}]:[!1,m,{}]}function ef(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function l5({page:t,...e}){let{router:n}=RD(),r=G.useMemo(()=>vD(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?G.createElement(u5,{page:t,matches:r,...e}):null}function c5(t){let{manifest:e,routeModules:n}=DD(),[r,i]=G.useState([]);return G.useEffect(()=>{let a=!1;return t5(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function u5({page:t,matches:e,...n}){let r=za(),{manifest:i,routeModules:a}=DD(),{basename:o}=RD(),{loaderData:c,matches:u}=s5(),f=G.useMemo(()=>mA(t,e,u,i,r,"data"),[t,e,u,i,r]),h=G.useMemo(()=>mA(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=G.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,E=!1;if(e.forEach(T=>{let D=i.routes[T.route.id];!D||!D.hasLoader||(!f.some(k=>k.route.id===T.route.id)&&T.route.id in c&&a[T.route.id]?.shouldRevalidate||D.hasClientLoader?E=!0:_.add(T.route.id))}),_.size===0)return[];let S=Zj(t,o,"data");return E&&_.size>0&&S.searchParams.set("_routes",e.filter(T=>_.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,c,r,i,f,e,t,a]),m=G.useMemo(()=>n5(h,i),[h,i]),x=c5(h);return G.createElement(G.Fragment,null,g.map(_=>G.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),m.map(_=>G.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),x.map(({key:_,link:E})=>G.createElement("link",{key:_,nonce:n.nonce,...E})))}function d5(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var kD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kD&&(window.__reactRouterVersion="7.9.6")}catch{}function f5({basename:t,children:e,window:n}){let r=G.useRef();r.current==null&&(r.current=Q3({window:n,v5Compat:!0}));let i=r.current,[a,o]=G.useState({action:i.action,location:i.location}),c=G.useCallback(u=>{G.startTransition(()=>o(u))},[o]);return G.useLayoutEffect(()=>i.listen(c),[i,c]),G.createElement(Uj,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var ND=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ID=G.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:f,preventScrollReset:h,viewTransition:g,...m},x){let{basename:_}=G.useContext(ja),E=typeof f=="string"&&ND.test(f),S,T=!1;if(typeof f=="string"&&E&&(S=f,kD))try{let N=new URL(window.location.href),O=f.startsWith("//")?new URL(N.protocol+f):new URL(f),L=ys(O.pathname,_);O.origin===N.origin&&L!=null?f=L+O.search+O.hash:T=!0}catch{ai(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=Tj(f,{relative:i}),[k,j,B]=o5(r,m),z=m5(f,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:g});function C(N){e&&e(N),N.defaultPrevented||z(N)}let A=G.createElement("a",{...m,...B,href:S||D,onClick:T||a?e:C,ref:d5(x,j),target:u,"data-discover":!E&&n==="render"?"true":void 0});return k&&!E?G.createElement(G.Fragment,null,A,G.createElement(l5,{page:D})):A});ID.displayName="Link";var h5=G.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...f},h){let g=ah(o,{relative:f.relative}),m=za(),x=G.useContext(Bm),{navigator:_,basename:E}=G.useContext(ja),S=x!=null&&w5(g)&&c===!0,T=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,D=m.pathname,k=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(D=D.toLowerCase(),k=k?k.toLowerCase():null,T=T.toLowerCase()),k&&E&&(k=ys(k,E)||k);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let B=D===T||!i&&D.startsWith(T)&&D.charAt(j)==="/",z=k!=null&&(k===T||!i&&k.startsWith(T)&&k.charAt(T.length)==="/"),C={isActive:B,isPending:z,isTransitioning:S},A=B?e:void 0,N;typeof r=="function"?N=r(C):N=[r,B?"active":null,z?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(C):a;return G.createElement(ID,{...f,"aria-current":A,className:N,ref:h,style:O,to:o,viewTransition:c},typeof u=="function"?u(C):u)});h5.displayName="NavLink";var p5=G.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=kg,action:c,onSubmit:u,relative:f,preventScrollReset:h,viewTransition:g,...m},x)=>{let _=x5(),E=_5(c,{relative:f}),S=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&ND.test(c),D=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let j=k.nativeEvent.submitter,B=j?.getAttribute("formmethod")||o;_(j||k.currentTarget,{fetcherKey:e,method:B,navigate:n,replace:i,state:a,relative:f,preventScrollReset:h,viewTransition:g})};return G.createElement("form",{ref:x,method:S,action:E,onSubmit:r?u:D,...m,"data-discover":!T&&t==="render"?"true":void 0})});p5.displayName="Form";function g5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MD(t){let e=G.useContext(Vu);return ln(e,g5(t)),e}function m5(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=La(),u=za(),f=ah(t,{relative:a});return G.useCallback(h=>{if(Yj(h,e)){h.preventDefault();let g=n!==void 0?n:Nf(u)===Nf(f);c(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,f,n,r,e,t,i,a,o])}function v5(t){ai(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=G.useRef(Ob(t)),n=G.useRef(!1),r=za(),i=G.useMemo(()=>Xj(r.search,n.current?null:e.current),[r.search]),a=La(),o=G.useCallback((c,u)=>{const f=Ob(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+f,u)},[a,i]);return[i,o]}var y5=0,b5=()=>`__${String(++y5)}__`;function x5(){let{router:t}=MD("useSubmit"),{basename:e}=G.useContext(ja),n=Vj();return G.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:f}=Qj(r,e);if(i.navigate===!1){let h=i.fetcherKey||b5();await t.fetch(h,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:f,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function _5(t,{relative:e}={}){let{basename:n}=G.useContext(ja),r=G.useContext(Va);ln(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...ah(t||".",{relative:e})},o=za();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let h=c.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:fs([n,a.pathname])),Nf(a)}function w5(t,{relative:e}={}){let n=G.useContext(ED);ln(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=MD("useViewTransitionState"),i=ah(t,{relative:e});if(!n.isTransitioning)return!1;let a=ys(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ys(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kg(i.pathname,o)!=null||Kg(i.pathname,a)!=null}const E5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S5=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),vA=t=>{const e=S5(t);return e.charAt(0).toUpperCase()+e.slice(1)},OD=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),T5=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var A5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const C5=G.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>G.createElement("svg",{ref:u,...A5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OD("lucide",i),...!a&&!T5(c)&&{"aria-hidden":"true"},...c},[...o.map(([f,h])=>G.createElement(f,h)),...Array.isArray(a)?a:[a]]));const Je=(t,e)=>{const n=G.forwardRef(({className:r,...i},a)=>G.createElement(C5,{ref:a,iconNode:e,className:OD(`lucide-${E5(vA(t))}`,`lucide-${t}`,r),...i}));return n.displayName=vA(t),n};const R5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],If=Je("arrow-left",R5);const D5=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],k5=Je("arrow-right-left",D5);const N5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],I5=Je("check",N5);const M5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],PD=Je("chevron-down",M5);const O5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],P5=Je("chevron-left",O5);const j5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_l=Je("chevron-right",j5);const V5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],z5=Je("chevron-up",V5);const L5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],B5=Je("circle-arrow-down",L5);const U5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],F5=Je("circle-arrow-up",U5);const G5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qg=Je("circle-check-big",G5);const q5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yA=Je("circle-check",q5);const H5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],rg=Je("circle-plus",H5);const $5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bA=Je("circle-question-mark",$5);const Y5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xA=Je("circle",Y5);const X5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],W5=Je("copy",X5);const K5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],_A=Je("download",K5);const Q5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Z5=Je("eye-off",Q5);const J5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eV=Je("eye",J5);const tV=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],nV=Je("file-text",tV);const rV=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],iV=Je("folder-plus",rV);const aV=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sV=Je("funnel",aV);const oV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],lV=Je("house",oV);const cV=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],uV=Je("list",cV);const dV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fV=Je("loader-circle",dV);const hV=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],wA=Je("loader",hV);const pV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],gV=Je("lock-open",pV);const mV=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vV=Je("lock",mV);const yV=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],bV=Je("log-out",yV);const xV=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Pb=Je("mail",xV);const _V=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],wV=Je("pause",_V);const EV=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Mf=Je("piggy-bank",EV);const SV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ml=Je("refresh-cw",SV);const TV=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],AV=Je("search",TV);const CV=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jD=Je("settings",CV);const RV=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],DV=Je("sparkles",RV);const kV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],NV=Je("target",kV);const IV=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jb=Je("trash-2",IV);const MV=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],VD=Je("trash",MV);const OV=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],PV=Je("trending-down",OV);const jV=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],VV=Je("trending-up",jV);const zV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uu=Je("triangle-alert",zV);const LV=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],BV=Je("undo-2",LV);const UV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],FV=Je("upload",UV);const GV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qV=Je("user-plus",GV);const HV=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],px=Je("wallet",HV);const $V=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],YV=Je("wifi-off",$V);const XV=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],WV=Je("wifi",XV);const KV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fm=Je("x",KV);var Qc=9e15,Uo=1e9,Vb="0123456789abcdef",Zg="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Jg="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",zb={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Qc,maxE:Qc,crypto:!1},zD,cs,tt=!0,Gm="[DecimalError] ",Do=Gm+"Invalid argument: ",LD=Gm+"Precision limit exceeded",BD=Gm+"crypto unavailable",UD="[object Decimal]",br=Math.floor,Gn=Math.pow,QV=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ZV=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,JV=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,FD=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ki=1e7,Xe=7,e6=9007199254740991,t6=Zg.length-1,Lb=Jg.length-1,we={toStringTag:UD};we.absoluteValue=we.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Le(t)};we.ceil=function(){return Le(new this.constructor(this),this.e+1,2)};we.clampedTo=we.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Do+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};we.comparedTo=we.cmp=function(t){var e,n,r,i,a=this,o=a.d,c=(t=new a.constructor(t)).d,u=a.s,f=t.s;if(!o||!c)return!u||!f?NaN:u!==f?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-f:0;if(u!==f)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=c.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==c[e])return o[e]>c[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};we.cosine=we.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Xe,r.rounding=1,n=n6(r,YD(r,n)),r.precision=t,r.rounding=e,Le(cs==2||cs==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};we.cubeRoot=we.cbrt=function(){var t,e,n,r,i,a,o,c,u,f,h=this,g=h.constructor;if(!h.isFinite()||h.isZero())return new g(h);for(tt=!1,a=h.s*Gn(h.s*h,1/3),!a||Math.abs(a)==1/0?(n=ur(h.d),t=h.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=Gn(n,1/3),t=br((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new g(n),r.s=h.s):r=new g(a.toString()),o=(t=g.precision)+3;;)if(c=r,u=c.times(c).times(c),f=u.plus(h),r=Xt(f.plus(h).times(c),f.plus(u),o+2,1),ur(c.d).slice(0,o)===(n=ur(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Le(c,t+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Le(r,t+1,1),e=!r.times(r).times(r).eq(h));break}return tt=!0,Le(r,t,g.rounding,e)};we.decimalPlaces=we.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-br(this.e/Xe))*Xe,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};we.dividedBy=we.div=function(t){return Xt(this,new this.constructor(t))};we.dividedToIntegerBy=we.divToInt=function(t){var e=this,n=e.constructor;return Le(Xt(e,new n(t),0,1,1),n.precision,n.rounding)};we.equals=we.eq=function(t){return this.cmp(t)===0};we.floor=function(){return Le(new this.constructor(this),this.e+1,3)};we.greaterThan=we.gt=function(t){return this.cmp(t)>0};we.greaterThanOrEqualTo=we.gte=function(t){var e=this.cmp(t);return e==1||e===0};we.hyperbolicCosine=we.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/Hm(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=vu(o,1,a.times(e),new o(1),!0);for(var u,f=t,h=new o(8);f--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return Le(a,o.precision=n,o.rounding=r,!0)};we.hyperbolicSine=we.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=vu(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/Hm(5,t)),i=vu(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),f=new a(20);t--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(f))))}return a.precision=e,a.rounding=n,Le(i,e,n,!0)};we.hyperbolicTangent=we.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Xt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};we.inverseCosine=we.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?_a(e,r,i):new e(0):new e(NaN):t.isZero()?_a(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};we.inverseHyperbolicCosine=we.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,tt=!1,n=n.times(n).minus(1).sqrt().plus(n),tt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};we.inverseHyperbolicSine=we.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,tt=!1,n=n.times(n).plus(1).sqrt().plus(n),tt=!0,r.precision=t,r.rounding=e,n.ln())};we.inverseHyperbolicTangent=we.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Le(new a(i),t,e,!0):(a.precision=n=r-i.e,i=Xt(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};we.inverseSine=we.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=_a(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};we.inverseTangent=we.atan=function(){var t,e,n,r,i,a,o,c,u,f=this,h=f.constructor,g=h.precision,m=h.rounding;if(f.isFinite()){if(f.isZero())return new h(f);if(f.abs().eq(1)&&g+4<=Lb)return o=_a(h,g+4,m).times(.25),o.s=f.s,o}else{if(!f.s)return new h(NaN);if(g+4<=Lb)return o=_a(h,g+4,m).times(.5),o.s=f.s,o}for(h.precision=c=g+10,h.rounding=1,n=Math.min(28,c/Xe+2|0),t=n;t;--t)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(tt=!1,e=Math.ceil(c/Xe),r=1,u=f.times(f),o=new h(f),i=f;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),tt=!0,Le(o,h.precision=g,h.rounding=m,!0)};we.isFinite=function(){return!!this.d};we.isInteger=we.isInt=function(){return!!this.d&&br(this.e/Xe)>this.d.length-2};we.isNaN=function(){return!this.s};we.isNegative=we.isNeg=function(){return this.s<0};we.isPositive=we.isPos=function(){return this.s>0};we.isZero=function(){return!!this.d&&this.d[0]===0};we.lessThan=we.lt=function(t){return this.cmp(t)<0};we.lessThanOrEqualTo=we.lte=function(t){return this.cmp(t)<1};we.logarithm=we.log=function(t){var e,n,r,i,a,o,c,u,f=this,h=f.constructor,g=h.precision,m=h.rounding,x=5;if(t==null)t=new h(10),e=!0;else{if(t=new h(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new h(NaN);e=t.eq(10)}if(n=f.d,f.s<0||!n||!n[0]||f.eq(1))return new h(n&&!n[0]?-1/0:f.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(tt=!1,c=g+x,o=bo(f,c),r=e?em(h,c+10):bo(t,c),u=Xt(o,r,c,1),Of(u.d,i=g,m))do if(c+=10,o=bo(f,c),r=e?em(h,c+10):bo(t,c),u=Xt(o,r,c,1),!a){+ur(u.d).slice(i+1,i+15)+1==1e14&&(u=Le(u,g+1,0));break}while(Of(u.d,i+=10,m));return tt=!0,Le(u,g,m)};we.minus=we.sub=function(t){var e,n,r,i,a,o,c,u,f,h,g,m,x=this,_=x.constructor;if(t=new _(t),!x.d||!t.d)return!x.s||!t.s?t=new _(NaN):x.d?t.s=-t.s:t=new _(t.d||x.s!==t.s?x:NaN),t;if(x.s!=t.s)return t.s=-t.s,x.plus(t);if(f=x.d,m=t.d,c=_.precision,u=_.rounding,!f[0]||!m[0]){if(m[0])t.s=-t.s;else if(f[0])t=new _(x);else return new _(u===3?-0:0);return tt?Le(t,c,u):t}if(n=br(t.e/Xe),h=br(x.e/Xe),f=f.slice(),a=h-n,a){for(g=a<0,g?(e=f,a=-a,o=m.length):(e=m,n=h,o=f.length),r=Math.max(Math.ceil(c/Xe),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=f.length,o=m.length,g=r<o,g&&(o=r),r=0;r<o;r++)if(f[r]!=m[r]){g=f[r]<m[r];break}a=0}for(g&&(e=f,f=m,m=e,t.s=-t.s),o=f.length,r=m.length-o;r>0;--r)f[o++]=0;for(r=m.length;r>a;){if(f[--r]<m[r]){for(i=r;i&&f[--i]===0;)f[i]=Ki-1;--f[i],f[r]+=Ki}f[r]-=m[r]}for(;f[--o]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=qm(f,n),tt?Le(t,c,u):t):new _(u===3?-0:0)};we.modulo=we.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Le(new r(n),r.precision,r.rounding):(tt=!1,r.modulo==9?(e=Xt(n,t.abs(),0,3,1),e.s*=t.s):e=Xt(n,t,0,r.modulo,1),e=e.times(t),tt=!0,n.minus(e))};we.naturalExponential=we.exp=function(){return Bb(this)};we.naturalLogarithm=we.ln=function(){return bo(this)};we.negated=we.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Le(t)};we.plus=we.add=function(t){var e,n,r,i,a,o,c,u,f,h,g=this,m=g.constructor;if(t=new m(t),!g.d||!t.d)return!g.s||!t.s?t=new m(NaN):g.d||(t=new m(t.d||g.s===t.s?g:NaN)),t;if(g.s!=t.s)return t.s=-t.s,g.minus(t);if(f=g.d,h=t.d,c=m.precision,u=m.rounding,!f[0]||!h[0])return h[0]||(t=new m(g)),tt?Le(t,c,u):t;if(a=br(g.e/Xe),r=br(t.e/Xe),f=f.slice(),i=a-r,i){for(i<0?(n=f,i=-i,o=h.length):(n=h,r=a,o=f.length),a=Math.ceil(c/Xe),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=f.length,i=h.length,o-i<0&&(i=o,n=h,h=f,f=n),e=0;i;)e=(f[--i]=f[i]+h[i]+e)/Ki|0,f[i]%=Ki;for(e&&(f.unshift(e),++r),o=f.length;f[--o]==0;)f.pop();return t.d=f,t.e=qm(f,r),tt?Le(t,c,u):t};we.precision=we.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Do+t);return n.d?(e=GD(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};we.round=function(){var t=this,e=t.constructor;return Le(new e(t),t.e+1,e.rounding)};we.sine=we.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Xe,r.rounding=1,n=i6(r,YD(r,n)),r.precision=t,r.rounding=e,Le(cs>2?n.neg():n,t,e,!0)):new r(NaN)};we.squareRoot=we.sqrt=function(){var t,e,n,r,i,a,o=this,c=o.d,u=o.e,f=o.s,h=o.constructor;if(f!==1||!c||!c[0])return new h(!f||f<0&&(!c||c[0])?NaN:c?o:1/0);for(tt=!1,f=Math.sqrt(+o),f==0||f==1/0?(e=ur(c),(e.length+u)%2==0&&(e+="0"),f=Math.sqrt(e),u=br((u+1)/2)-(u<0||u%2),f==1/0?e="5e"+u:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new h(e)):r=new h(f.toString()),n=(u=h.precision)+3;;)if(a=r,r=a.plus(Xt(o,a,n+2,1)).times(.5),ur(a.d).slice(0,n)===(e=ur(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Le(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Le(r,u+1,1),t=!r.times(r).eq(o));break}return tt=!0,Le(r,u,h.rounding,t)};we.tangent=we.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Xt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Le(cs==2||cs==4?n.neg():n,t,e,!0)):new r(NaN)};we.times=we.mul=function(t){var e,n,r,i,a,o,c,u,f,h=this,g=h.constructor,m=h.d,x=(t=new g(t)).d;if(t.s*=h.s,!m||!m[0]||!x||!x[0])return new g(!t.s||m&&!m[0]&&!x||x&&!x[0]&&!m?NaN:!m||!x?t.s/0:t.s*0);for(n=br(h.e/Xe)+br(t.e/Xe),u=m.length,f=x.length,u<f&&(a=m,m=x,x=a,o=u,u=f,f=o),a=[],o=u+f,r=o;r--;)a.push(0);for(r=f;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+x[r]*m[i-r-1]+e,a[i--]=c%Ki|0,e=c/Ki|0;a[i]=(a[i]+e)%Ki|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=qm(a,n),tt?Le(t,g.precision,g.rounding):t};we.toBinary=function(t,e){return gx(this,2,t,e)};we.toDecimalPlaces=we.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Gr(t,0,Uo),e===void 0?e=r.rounding:Gr(e,0,8),Le(n,t+n.e+1,e))};we.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Ma(r,!0):(Gr(t,0,Uo),e===void 0?e=i.rounding:Gr(e,0,8),r=Le(new i(r),t+1,e),n=Ma(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};we.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=Ma(i):(Gr(t,0,Uo),e===void 0?e=a.rounding:Gr(e,0,8),r=Le(new a(i),t+i.e+1,e),n=Ma(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};we.toFraction=function(t){var e,n,r,i,a,o,c,u,f,h,g,m,x=this,_=x.d,E=x.constructor;if(!_)return new E(x);if(f=n=new E(1),r=u=new E(0),e=new E(r),a=e.e=GD(_)-x.e-1,o=a%Xe,e.d[0]=Gn(10,o<0?Xe+o:o),t==null)t=a>0?e:f;else{if(c=new E(t),!c.isInt()||c.lt(f))throw Error(Do+c);t=c.gt(e)?a>0?e:f:c}for(tt=!1,c=new E(ur(_)),h=E.precision,E.precision=a=_.length*Xe*2;g=Xt(c,e,0,1,1),i=n.plus(g.times(r)),i.cmp(t)!=1;)n=r,r=i,i=f,f=u.plus(g.times(i)),u=i,i=e,e=c.minus(g.times(i)),c=i;return i=Xt(t.minus(n),r,0,1,1),u=u.plus(i.times(f)),n=n.plus(i.times(r)),u.s=f.s=x.s,m=Xt(f,r,a,1).minus(x).abs().cmp(Xt(u,n,a,1).minus(x).abs())<1?[f,r]:[u,n],E.precision=h,tt=!0,m};we.toHexadecimal=we.toHex=function(t,e){return gx(this,16,t,e)};we.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Gr(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(tt=!1,n=Xt(n,t,0,e,1).times(t),tt=!0,Le(n)):(t.s=n.s,n=t),n};we.toNumber=function(){return+this};we.toOctal=function(t,e){return gx(this,8,t,e)};we.toPower=we.pow=function(t){var e,n,r,i,a,o,c=this,u=c.constructor,f=+(t=new u(t));if(!c.d||!t.d||!c.d[0]||!t.d[0])return new u(Gn(+c,f));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,t.eq(1))return Le(c,r,a);if(e=br(t.e/Xe),e>=t.d.length-1&&(n=f<0?-f:f)<=e6)return i=qD(u,c,n,r),t.s<0?new u(1).div(i):Le(i,r,a);if(o=c.s,o<0){if(e<t.d.length-1)return new u(NaN);if((t.d[e]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return n=Gn(+c,f),e=n==0||!isFinite(n)?br(f*(Math.log("0."+ur(c.d))/Math.LN10+c.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(tt=!1,u.rounding=c.s=1,n=Math.min(12,(e+"").length),i=Bb(t.times(bo(c,r+n)),r),i.d&&(i=Le(i,r+5,1),Of(i.d,r,a)&&(e=r+10,i=Le(Bb(t.times(bo(c,e+n)),e),e+5,1),+ur(i.d).slice(r+1,r+15)+1==1e14&&(i=Le(i,r+1,0)))),i.s=o,tt=!0,u.rounding=a,Le(i,r,a))};we.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Ma(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Gr(t,1,Uo),e===void 0?e=i.rounding:Gr(e,0,8),r=Le(new i(r),t,e),n=Ma(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};we.toSignificantDigits=we.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Gr(t,1,Uo),e===void 0?e=r.rounding:Gr(e,0,8)),Le(new r(n),t,e)};we.toString=function(){var t=this,e=t.constructor,n=Ma(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};we.truncated=we.trunc=function(){return Le(new this.constructor(this),this.e+1,1)};we.valueOf=we.toJSON=function(){var t=this,e=t.constructor,n=Ma(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function ur(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Xe-r.length,n&&(a+=po(n)),a+=r;o=t[e],r=o+"",n=Xe-r.length,n&&(a+=po(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Gr(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Do+t)}function Of(t,e,n,r){var i,a,o,c;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=Xe,i=0):(i=Math.ceil((e+1)/Xe),e%=Xe),a=Gn(10,Xe-e),c=t[i]%a|0,r==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),o=n<4&&c==99999||n>3&&c==49999||c==5e4||c==0):o=(n<4&&c+1==a||n>3&&c+1==a/2)&&(t[i+1]/a/100|0)==Gn(10,e-2)-1||(c==a/2||c==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),o=(r||n<4)&&c==9999||!r&&n>3&&c==4999):o=((r||n<4)&&c+1==a||!r&&n>3&&c+1==a/2)&&(t[i+1]/a/1e3|0)==Gn(10,e-3)-1,o}function Ig(t,e,n){for(var r,i=[0],a,o=0,c=t.length;o<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=Vb.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function n6(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/Hm(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=vu(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var Xt=(function(){function t(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var f,h,g,m,x,_,E,S,T,D,k,j,B,z,C,A,N,O,L,V,M=r.constructor,J=r.s==i.s?1:-1,Q=r.d,$=i.d;if(!Q||!Q[0]||!$||!$[0])return new M(!r.s||!i.s||(Q?$&&Q[0]==$[0]:!$)?NaN:Q&&Q[0]==0||!$?J*0:J/0);for(u?(x=1,h=r.e-i.e):(u=Ki,x=Xe,h=br(r.e/x)-br(i.e/x)),L=$.length,N=Q.length,T=new M(J),D=T.d=[],g=0;$[g]==(Q[g]||0);g++);if($[g]>(Q[g]||0)&&h--,a==null?(z=a=M.precision,o=M.rounding):c?z=a+(r.e-i.e)+1:z=a,z<0)D.push(1),_=!0;else{if(z=z/x+2|0,g=0,L==1){for(m=0,$=$[0],z++;(g<N||m)&&z--;g++)C=m*u+(Q[g]||0),D[g]=C/$|0,m=C%$|0;_=m||g<N}else{for(m=u/($[0]+1)|0,m>1&&($=t($,m,u),Q=t(Q,m,u),L=$.length,N=Q.length),A=L,k=Q.slice(0,L),j=k.length;j<L;)k[j++]=0;V=$.slice(),V.unshift(0),O=$[0],$[1]>=u/2&&++O;do m=0,f=e($,k,L,j),f<0?(B=k[0],L!=j&&(B=B*u+(k[1]||0)),m=B/O|0,m>1?(m>=u&&(m=u-1),E=t($,m,u),S=E.length,j=k.length,f=e(E,k,S,j),f==1&&(m--,n(E,L<S?V:$,S,u))):(m==0&&(f=m=1),E=$.slice()),S=E.length,S<j&&E.unshift(0),n(k,E,j,u),f==-1&&(j=k.length,f=e($,k,L,j),f<1&&(m++,n(k,L<j?V:$,j,u))),j=k.length):f===0&&(m++,k=[0]),D[g++]=m,f&&k[0]?k[j++]=Q[A]||0:(k=[Q[A]],j=1);while((A++<N||k[0]!==void 0)&&z--);_=k[0]!==void 0}D[0]||D.shift()}if(x==1)T.e=h,zD=_;else{for(g=1,m=D[0];m>=10;m/=10)g++;T.e=g+h*x-1,Le(T,c?a+T.e+1:a,o,_)}return T}})();function Le(t,e,n,r){var i,a,o,c,u,f,h,g,m,x=t.constructor;e:if(e!=null){if(g=t.d,!g)return t;for(i=1,c=g[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=Xe,o=e,h=g[m=0],u=h/Gn(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/Xe),c=g.length,m>=c)if(r){for(;c++<=m;)g.push(0);h=u=0,i=1,a%=Xe,o=a-Xe+1}else break e;else{for(h=c=g[m],i=1;c>=10;c/=10)i++;a%=Xe,o=a-Xe+i,u=o<0?0:h/Gn(10,i-o-1)%10|0}if(r=r||e<0||g[m+1]!==void 0||(o<0?h:h%Gn(10,i-o-1)),f=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?h/Gn(10,i-o):0:g[m-1])%10&1||n==(t.s<0?8:7)),e<1||!g[0])return g.length=0,f?(e-=t.e+1,g[0]=Gn(10,(Xe-e%Xe)%Xe),t.e=-e||0):g[0]=t.e=0,t;if(a==0?(g.length=m,c=1,m--):(g.length=m+1,c=Gn(10,Xe-a),g[m]=o>0?(h/Gn(10,i-o)%Gn(10,o)|0)*c:0),f)for(;;)if(m==0){for(a=1,o=g[0];o>=10;o/=10)a++;for(o=g[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(t.e++,g[0]==Ki&&(g[0]=1));break}else{if(g[m]+=c,g[m]!=Ki)break;g[m--]=0,c=1}for(a=g.length;g[--a]===0;)g.pop()}return tt&&(t.e>x.maxE?(t.d=null,t.e=NaN):t.e<x.minE&&(t.e=0,t.d=[0])),t}function Ma(t,e,n){if(!t.isFinite())return $D(t);var r,i=t.e,a=ur(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+po(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+po(-i-1)+a,n&&(r=n-o)>0&&(a+=po(r))):i>=o?(a+=po(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+po(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=po(r))),a}function qm(t,e){var n=t[0];for(e*=Xe;n>=10;n/=10)e++;return e}function em(t,e,n){if(e>t6)throw tt=!0,n&&(t.precision=n),Error(LD);return Le(new t(Zg),e,1,!0)}function _a(t,e,n){if(e>Lb)throw Error(LD);return Le(new t(Jg),e,n,!0)}function GD(t){var e=t.length-1,n=e*Xe+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function po(t){for(var e="";t--;)e+="0";return e}function qD(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/Xe+4);for(tt=!1;;){if(n%2&&(a=a.times(e),SA(a.d,o)&&(i=!0)),n=br(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),SA(e.d,o)}return tt=!0,a}function EA(t){return t.d[t.d.length-1]&1}function HD(t,e,n){for(var r,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function Bb(t,e){var n,r,i,a,o,c,u,f=0,h=0,g=0,m=t.constructor,x=m.rounding,_=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(tt=!1,u=_):u=e,c=new m(.03125);t.e>-2;)t=t.times(c),g+=5;for(r=Math.log(Gn(2,g))/Math.LN10*2+5|0,u+=r,n=a=o=new m(1),m.precision=u;;){if(a=Le(a.times(t),u,1),n=n.times(++h),c=o.plus(Xt(a,n,u,1)),ur(c.d).slice(0,u)===ur(o.d).slice(0,u)){for(i=g;i--;)o=Le(o.times(o),u,1);if(e==null)if(f<3&&Of(o.d,u-r,x,f))m.precision=u+=10,n=a=c=new m(1),h=0,f++;else return Le(o,m.precision=_,x,tt=!0);else return m.precision=_,o}o=c}}function bo(t,e){var n,r,i,a,o,c,u,f,h,g,m,x=1,_=10,E=t,S=E.d,T=E.constructor,D=T.rounding,k=T.precision;if(E.s<0||!S||!S[0]||!E.e&&S[0]==1&&S.length==1)return new T(S&&!S[0]?-1/0:E.s!=1?NaN:S?0:E);if(e==null?(tt=!1,h=k):h=e,T.precision=h+=_,n=ur(S),r=n.charAt(0),Math.abs(a=E.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)E=E.times(t),n=ur(E.d),r=n.charAt(0),x++;a=E.e,r>1?(E=new T("0."+n),a++):E=new T(r+"."+n.slice(1))}else return f=em(T,h+2,k).times(a+""),E=bo(new T(r+"."+n.slice(1)),h-_).plus(f),T.precision=k,e==null?Le(E,k,D,tt=!0):E;for(g=E,u=o=E=Xt(E.minus(1),E.plus(1),h,1),m=Le(E.times(E),h,1),i=3;;){if(o=Le(o.times(m),h,1),f=u.plus(Xt(o,new T(i),h,1)),ur(f.d).slice(0,h)===ur(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(em(T,h+2,k).times(a+""))),u=Xt(u,new T(x),h,1),e==null)if(Of(u.d,h-_,D,c))T.precision=h+=_,f=o=E=Xt(g.minus(1),g.plus(1),h,1),m=Le(E.times(E),h,1),i=c=1;else return Le(u,T.precision=k,D,tt=!0);else return T.precision=k,u;u=f,i+=2}}function $D(t){return String(t.s*t.s/0)}function Mg(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Xe,n<0&&(r+=Xe),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Xe;r<i;)t.d.push(+e.slice(r,r+=Xe));e=e.slice(r),r=Xe-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),tt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function r6(t,e){var n,r,i,a,o,c,u,f,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),FD.test(e))return Mg(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(ZV.test(e))n=16,e=e.toLowerCase();else if(QV.test(e))n=2;else if(JV.test(e))n=8;else throw Error(Do+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),c=e.length,a=c-a,i=qD(r,new r(n),a,a*2)),f=Ig(e,n,Ki),h=f.length-1,a=h;f[a]===0;--a)f.pop();return a<0?new r(t.s*0):(t.e=qm(f,h),t.d=f,tt=!1,o&&(t=Xt(t,i,c*4)),u&&(t=t.times(Math.abs(u)<54?Gn(2,u):Ll.pow(2,u))),tt=!0,t)}function i6(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:vu(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/Hm(5,n)),e=vu(t,2,e,e);for(var i,a=new t(5),o=new t(16),c=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(c))));return e}function vu(t,e,n,r,i){var a,o,c,u,f=t.precision,h=Math.ceil(f/Xe);for(tt=!1,u=n.times(n),c=new t(r);;){if(o=Xt(c.times(u),new t(e++*e++),f,1),c=i?r.plus(o):r.minus(o),r=Xt(o.times(u),new t(e++*e++),f,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return tt=!0,o.d.length=h+1,o}function Hm(t,e){for(var n=t;--e;)n*=t;return n}function YD(t,e){var n,r=e.s<0,i=_a(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return cs=r?4:1,e;if(n=e.divToInt(i),n.isZero())cs=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return cs=EA(n)?r?2:3:r?4:1,e;cs=EA(n)?r?1:4:r?3:2}return e.minus(i).abs()}function gx(t,e,n,r){var i,a,o,c,u,f,h,g,m,x=t.constructor,_=n!==void 0;if(_?(Gr(n,1,Uo),r===void 0?r=x.rounding:Gr(r,0,8)):(n=x.precision,r=x.rounding),!t.isFinite())h=$D(t);else{for(h=Ma(t),o=h.indexOf("."),_?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(h=h.replace(".",""),m=new x(1),m.e=h.length-o,m.d=Ig(Ma(m),10,i),m.e=m.d.length),g=Ig(h,10,i),a=u=g.length;g[--u]==0;)g.pop();if(!g[0])h=_?"0p+0":"0";else{if(o<0?a--:(t=new x(t),t.d=g,t.e=a,t=Xt(t,m,n,r,0,i),g=t.d,a=t.e,f=zD),o=g[n],c=i/2,f=f||g[n+1]!==void 0,f=r<4?(o!==void 0||f)&&(r===0||r===(t.s<0?3:2)):o>c||o===c&&(r===4||f||r===6&&g[n-1]&1||r===(t.s<0?8:7)),g.length=n,f)for(;++g[--n]>i-1;)g[n]=0,n||(++a,g.unshift(1));for(u=g.length;!g[u-1];--u);for(o=0,h="";o<u;o++)h+=Vb.charAt(g[o]);if(_){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(g=Ig(h,i,e),u=g.length;!g[u-1];--u);for(o=1,h="1.";o<u;o++)h+=Vb.charAt(g[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return t.s<0?"-"+h:h}function SA(t,e){if(t.length>e)return t.length=e,!0}function a6(t){return new this(t).abs()}function s6(t){return new this(t).acos()}function o6(t){return new this(t).acosh()}function l6(t,e){return new this(t).plus(e)}function c6(t){return new this(t).asin()}function u6(t){return new this(t).asinh()}function d6(t){return new this(t).atan()}function f6(t){return new this(t).atanh()}function h6(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=_a(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?_a(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=_a(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(Xt(t,e,a,1)),e=_a(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Xt(t,e,a,1)),n}function p6(t){return new this(t).cbrt()}function g6(t){return Le(t=new this(t),t.e+1,2)}function m6(t,e,n){return new this(t).clamp(e,n)}function v6(t){if(!t||typeof t!="object")throw Error(Gm+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,Uo,"rounding",0,8,"toExpNeg",-Qc,0,"toExpPos",0,Qc,"maxE",0,Qc,"minE",-Qc,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=zb[n]),(r=t[n])!==void 0)if(br(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Do+n+": "+r);if(n="crypto",i&&(this[n]=zb[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(BD);else this[n]=!1;else throw Error(Do+n+": "+r);return this}function y6(t){return new this(t).cos()}function b6(t){return new this(t).cosh()}function XD(t){var e,n,r;function i(a){var o,c,u,f=this;if(!(f instanceof i))return new i(a);if(f.constructor=i,TA(a)){f.s=a.s,tt?!a.d||a.e>i.maxE?(f.e=NaN,f.d=null):a.e<i.minE?(f.e=0,f.d=[0]):(f.e=a.e,f.d=a.d.slice()):(f.e=a.e,f.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){f.s=1/a<0?-1:1,f.e=0,f.d=[0];return}if(a<0?(a=-a,f.s=-1):f.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;tt?o>i.maxE?(f.e=NaN,f.d=null):o<i.minE?(f.e=0,f.d=[0]):(f.e=o,f.d=[a]):(f.e=o,f.d=[a]);return}if(a*0!==0){a||(f.s=NaN),f.e=NaN,f.d=null;return}return Mg(f,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),f.s=-1):(c===43&&(a=a.slice(1)),f.s=1),FD.test(a)?Mg(f,a):r6(f,a);if(u==="bigint")return a<0?(a=-a,f.s=-1):f.s=1,Mg(f,a.toString());throw Error(Do+a)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=v6,i.clone=XD,i.isDecimal=TA,i.abs=a6,i.acos=s6,i.acosh=o6,i.add=l6,i.asin=c6,i.asinh=u6,i.atan=d6,i.atanh=f6,i.atan2=h6,i.cbrt=p6,i.ceil=g6,i.clamp=m6,i.cos=y6,i.cosh=b6,i.div=x6,i.exp=_6,i.floor=w6,i.hypot=E6,i.ln=S6,i.log=T6,i.log10=C6,i.log2=A6,i.max=R6,i.min=D6,i.mod=k6,i.mul=N6,i.pow=I6,i.random=M6,i.round=O6,i.sign=P6,i.sin=j6,i.sinh=V6,i.sqrt=z6,i.sub=L6,i.sum=B6,i.tan=U6,i.tanh=F6,i.trunc=G6,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function x6(t,e){return new this(t).div(e)}function _6(t){return new this(t).exp()}function w6(t){return Le(t=new this(t),t.e+1,3)}function E6(){var t,e,n=new this(0);for(tt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return tt=!0,new this(1/0);n=e}return tt=!0,n.sqrt()}function TA(t){return t instanceof Ll||t&&t.toStringTag===UD||!1}function S6(t){return new this(t).ln()}function T6(t,e){return new this(t).log(e)}function A6(t){return new this(t).log(2)}function C6(t){return new this(t).log(10)}function R6(){return HD(this,arguments,-1)}function D6(){return HD(this,arguments,1)}function k6(t,e){return new this(t).mod(e)}function N6(t,e){return new this(t).mul(e)}function I6(t,e){return new this(t).pow(e)}function M6(t){var e,n,r,i,a=0,o=new this(1),c=[];if(t===void 0?t=this.precision:Gr(t,1,Uo),r=Math.ceil(t/Xe),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(BD);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],t%=Xe,r&&t&&(i=Gn(10,Xe-t),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)n=0,c=[0];else{for(n=-1;c[0]===0;n-=Xe)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<Xe&&(n-=Xe-r)}return o.e=n,o.d=c,o}function O6(t){return Le(t=new this(t),t.e+1,this.rounding)}function P6(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function j6(t){return new this(t).sin()}function V6(t){return new this(t).sinh()}function z6(t){return new this(t).sqrt()}function L6(t,e){return new this(t).sub(e)}function B6(){var t=0,e=arguments,n=new this(e[t]);for(tt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return tt=!0,Le(n,this.precision,this.rounding)}function U6(t){return new this(t).tan()}function F6(t){return new this(t).tanh()}function G6(t){return Le(t=new this(t),t.e+1,1)}we[Symbol.for("nodejs.util.inspect.custom")]=we.toString;we[Symbol.toStringTag]="Decimal";var Ll=we.constructor=XD(zb);Zg=new Ll(Zg);Jg=new Ll(Jg);const mx=G.createContext({});function $m(t){const e=G.useRef(null);return e.current===null&&(e.current=t()),e.current}const vx=typeof window<"u",yx=vx?G.useLayoutEffect:G.useEffect,Ym=G.createContext(null);function bx(t,e){t.indexOf(e)===-1&&t.push(e)}function xx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const bs=(t,e,n)=>n>e?e:n<t?t:n;let _x=()=>{};const xs={},WD=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function KD(t){return typeof t=="object"&&t!==null}const QD=t=>/^0[^.\s]+$/u.test(t);function wx(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ai=t=>t,q6=(t,e)=>n=>e(t(n)),sh=(...t)=>t.reduce(q6),Pf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Ex{constructor(){this.subscriptions=[]}add(e){return bx(this.subscriptions,e),()=>xx(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Sa=t=>t*1e3,Ti=t=>t/1e3;function ZD(t,e){return e?t*(1e3/e):0}const JD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,H6=1e-7,$6=12;function Y6(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=JD(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>H6&&++c<$6);return o}function oh(t,e,n,r){if(t===e&&n===r)return Ai;const i=a=>Y6(a,0,1,t,n);return a=>a===0||a===1?a:JD(i(a),e,r)}const ek=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,tk=t=>e=>1-t(1-e),nk=oh(.33,1.53,.69,.99),Sx=tk(nk),rk=ek(Sx),ik=t=>(t*=2)<1?.5*Sx(t):.5*(2-Math.pow(2,-10*(t-1))),Tx=t=>1-Math.sin(Math.acos(t)),ak=tk(Tx),sk=ek(Tx),X6=oh(.42,0,1,1),W6=oh(0,0,.58,1),ok=oh(.42,0,.58,1),K6=t=>Array.isArray(t)&&typeof t[0]!="number",lk=t=>Array.isArray(t)&&typeof t[0]=="number",Q6={linear:Ai,easeIn:X6,easeInOut:ok,easeOut:W6,circIn:Tx,circInOut:sk,circOut:ak,backIn:Sx,backInOut:rk,backOut:nk,anticipate:ik},Z6=t=>typeof t=="string",AA=t=>{if(lk(t)){_x(t.length===4);const[e,n,r,i]=t;return oh(e,n,r,i)}else if(Z6(t))return Q6[t];return t},ig=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function J6(t,e){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(f.schedule(h),t()),h(c)}const f={schedule:(h,g=!1,m=!1)=>{const _=m&&i?n:r;return g&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,a&&(a=!1,f.process(h))}};return f}const ez=40;function ck(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=ig.reduce((k,j)=>(k[j]=J6(a),k),{}),{setup:c,read:u,resolveKeyframes:f,preUpdate:h,update:g,preRender:m,render:x,postRender:_}=o,E=()=>{const k=xs.useManualTiming?i.timestamp:performance.now();n=!1,xs.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,ez),1)),i.timestamp=k,i.isProcessing=!0,c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),m.process(i),x.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(E))},S=()=>{n=!0,r=!0,i.isProcessing||t(E)};return{schedule:ig.reduce((k,j)=>{const B=o[j];return k[j]=(z,C=!1,A=!1)=>(n||S(),B.schedule(z,C,A)),k},{}),cancel:k=>{for(let j=0;j<ig.length;j++)o[ig[j]].cancel(k)},state:i,steps:o}}const{schedule:nn,cancel:ko,state:sr,steps:Ly}=ck(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ai,!0);let Og;function tz(){Og=void 0}const Br={now:()=>(Og===void 0&&Br.set(sr.isProcessing||xs.useManualTiming?sr.timestamp:performance.now()),Og),set:t=>{Og=t,queueMicrotask(tz)}},uk=t=>e=>typeof e=="string"&&e.startsWith(t),Ax=uk("--"),nz=uk("var(--"),Cx=t=>nz(t)?rz.test(t.split("/*")[0].trim()):!1,rz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jf={...zu,transform:t=>bs(0,1,t)},ag={...zu,default:1},pf=t=>Math.round(t*1e5)/1e5,Rx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iz(t){return t==null}const az=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Dx=(t,e)=>n=>!!(typeof n=="string"&&az.test(n)&&n.startsWith(t)||e&&!iz(n)&&Object.prototype.hasOwnProperty.call(n,e)),dk=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(Rx);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},sz=t=>bs(0,255,t),By={...zu,transform:t=>Math.round(sz(t))},Rl={test:Dx("rgb","red"),parse:dk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+By.transform(t)+", "+By.transform(e)+", "+By.transform(n)+", "+pf(jf.transform(r))+")"};function oz(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ub={test:Dx("#"),parse:oz,transform:Rl.transform},lh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ho=lh("deg"),Ta=lh("%"),Ze=lh("px"),lz=lh("vh"),cz=lh("vw"),CA={...Ta,parse:t=>Ta.parse(t)/100,transform:t=>Ta.transform(t*100)},Zc={test:Dx("hsl","hue"),parse:dk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ta.transform(pf(e))+", "+Ta.transform(pf(n))+", "+pf(jf.transform(r))+")"},Pn={test:t=>Rl.test(t)||Ub.test(t)||Zc.test(t),parse:t=>Rl.test(t)?Rl.parse(t):Zc.test(t)?Zc.parse(t):Ub.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Rl.transform(t):Zc.transform(t),getAnimatableNone:t=>{const e=Pn.parse(t);return e.alpha=0,Pn.transform(e)}},uz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dz(t){return isNaN(t)&&typeof t=="string"&&(t.match(Rx)?.length||0)+(t.match(uz)?.length||0)>0}const fk="number",hk="color",fz="var",hz="var(",RA="${}",pz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(pz,u=>(Pn.test(u)?(r.color.push(a),i.push(hk),n.push(Pn.parse(u))):u.startsWith(hz)?(r.var.push(a),i.push(fz),n.push(u)):(r.number.push(a),i.push(fk),n.push(parseFloat(u))),++a,RA)).split(RA);return{values:n,split:c,indexes:r,types:i}}function pk(t){return Vf(t).values}function gk(t){const{split:e,types:n}=Vf(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===fk?a+=pf(i[o]):c===hk?a+=Pn.transform(i[o]):a+=i[o]}return a}}const gz=t=>typeof t=="number"?0:Pn.test(t)?Pn.getAnimatableNone(t):t;function mz(t){const e=pk(t);return gk(t)(e.map(gz))}const No={test:dz,parse:pk,createTransformer:gk,getAnimatableNone:mz};function Uy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function vz({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=Uy(u,c,t+1/3),a=Uy(u,c,t),o=Uy(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function tm(t,e){return n=>n>0?e:t}const on=(t,e,n)=>t+(e-t)*n,Fy=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},yz=[Ub,Rl,Zc],bz=t=>yz.find(e=>e.test(t));function DA(t){const e=bz(t);if(!e)return!1;let n=e.parse(t);return e===Zc&&(n=vz(n)),n}const kA=(t,e)=>{const n=DA(t),r=DA(e);if(!n||!r)return tm(t,e);const i={...n};return a=>(i.red=Fy(n.red,r.red,a),i.green=Fy(n.green,r.green,a),i.blue=Fy(n.blue,r.blue,a),i.alpha=on(n.alpha,r.alpha,a),Rl.transform(i))},Fb=new Set(["none","hidden"]);function xz(t,e){return Fb.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function _z(t,e){return n=>on(t,e,n)}function kx(t){return typeof t=="number"?_z:typeof t=="string"?Cx(t)?tm:Pn.test(t)?kA:Sz:Array.isArray(t)?mk:typeof t=="object"?Pn.test(t)?kA:wz:tm}function mk(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>kx(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function wz(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=kx(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function Ez(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],c=t.values[o]??0;n[i]=c,r[a]++}return n}const Sz=(t,e)=>{const n=No.createTransformer(e),r=Vf(t),i=Vf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Fb.has(t)&&!i.values.length||Fb.has(e)&&!r.values.length?xz(t,e):sh(mk(Ez(r,i),i.values),n):tm(t,e)};function vk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?on(t,e,n):kx(t)(t,e)}const Tz=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>nn.update(e,n),stop:()=>ko(e),now:()=>sr.isProcessing?sr.timestamp:Br.now()}},yk=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},nm=2e4;function Nx(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<nm;)e+=n,r=t.next(e);return e>=nm?1/0:e}function Az(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Nx(r),nm);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Ti(i)}}const Cz=5;function bk(t,e,n){const r=Math.max(e-Cz,0);return ZD(n-t(r),e-r)}const gn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Gy=.001;function Rz({duration:t=gn.duration,bounce:e=gn.bounce,velocity:n=gn.velocity,mass:r=gn.mass}){let i,a,o=1-e;o=bs(gn.minDamping,gn.maxDamping,o),t=bs(gn.minDuration,gn.maxDuration,Ti(t)),o<1?(i=f=>{const h=f*o,g=h*t,m=h-n,x=Gb(f,o),_=Math.exp(-g);return Gy-m/x*_},a=f=>{const g=f*o*t,m=g*n+n,x=Math.pow(o,2)*Math.pow(f,2)*t,_=Math.exp(-g),E=Gb(Math.pow(f,2),o);return(-i(f)+Gy>0?-1:1)*((m-x)*_)/E}):(i=f=>{const h=Math.exp(-f*t),g=(f-n)*t+1;return-Gy+h*g},a=f=>{const h=Math.exp(-f*t),g=(n-f)*(t*t);return h*g});const c=5/t,u=kz(i,a,c);if(t=Sa(t),isNaN(u))return{stiffness:gn.stiffness,damping:gn.damping,duration:t};{const f=Math.pow(u,2)*r;return{stiffness:f,damping:o*2*Math.sqrt(r*f),duration:t}}}const Dz=12;function kz(t,e,n){let r=n;for(let i=1;i<Dz;i++)r=r-t(r)/e(r);return r}function Gb(t,e){return t*Math.sqrt(1-e*e)}const Nz=["duration","bounce"],Iz=["stiffness","damping","mass"];function NA(t,e){return e.some(n=>t[n]!==void 0)}function Mz(t){let e={velocity:gn.velocity,stiffness:gn.stiffness,damping:gn.damping,mass:gn.mass,isResolvedFromDuration:!1,...t};if(!NA(t,Iz)&&NA(t,Nz))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*bs(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:gn.mass,stiffness:i,damping:a}}else{const n=Rz(t);e={...e,...n,mass:gn.mass},e.isResolvedFromDuration=!0}return e}function rm(t=gn.visualDuration,e=gn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:f,mass:h,duration:g,velocity:m,isResolvedFromDuration:x}=Mz({...n,velocity:-Ti(n.velocity||0)}),_=m||0,E=f/(2*Math.sqrt(u*h)),S=o-a,T=Ti(Math.sqrt(u/h)),D=Math.abs(S)<5;r||(r=D?gn.restSpeed.granular:gn.restSpeed.default),i||(i=D?gn.restDelta.granular:gn.restDelta.default);let k;if(E<1){const B=Gb(T,E);k=z=>{const C=Math.exp(-E*T*z);return o-C*((_+E*T*S)/B*Math.sin(B*z)+S*Math.cos(B*z))}}else if(E===1)k=B=>o-Math.exp(-T*B)*(S+(_+T*S)*B);else{const B=T*Math.sqrt(E*E-1);k=z=>{const C=Math.exp(-E*T*z),A=Math.min(B*z,300);return o-C*((_+E*T*S)*Math.sinh(A)+B*S*Math.cosh(A))/B}}const j={calculatedDuration:x&&g||null,next:B=>{const z=k(B);if(x)c.done=B>=g;else{let C=B===0?_:0;E<1&&(C=B===0?Sa(_):bk(k,B,z));const A=Math.abs(C)<=r,N=Math.abs(o-z)<=i;c.done=A&&N}return c.value=c.done?o:z,c},toString:()=>{const B=Math.min(Nx(j),nm),z=yk(C=>j.next(B*C).value,B,30);return B+"ms "+z},toTransition:()=>{}};return j}rm.applyToOptions=t=>{const e=Az(t,100,rm);return t.ease=e.ease,t.duration=Sa(e.duration),t.type="keyframes",t};function qb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:f=.5,restSpeed:h}){const g=t[0],m={done:!1,value:g},x=A=>c!==void 0&&A<c||u!==void 0&&A>u,_=A=>c===void 0?u:u===void 0||Math.abs(c-A)<Math.abs(u-A)?c:u;let E=n*e;const S=g+E,T=o===void 0?S:o(S);T!==S&&(E=T-g);const D=A=>-E*Math.exp(-A/r),k=A=>T+D(A),j=A=>{const N=D(A),O=k(A);m.done=Math.abs(N)<=f,m.value=m.done?T:O};let B,z;const C=A=>{x(m.value)&&(B=A,z=rm({keyframes:[m.value,_(m.value)],velocity:bk(k,A,m.value),damping:i,stiffness:a,restDelta:f,restSpeed:h}))};return C(0),{calculatedDuration:null,next:A=>{let N=!1;return!z&&B===void 0&&(N=!0,j(A),C(A)),B!==void 0&&A>=B?z.next(A-B):(!N&&j(A),m)}}}function Oz(t,e,n){const r=[],i=n||xs.mix||vk,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ai:e;c=sh(u,c)}r.push(c)}return r}function Pz(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(_x(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=Oz(e,r,i),u=c.length,f=h=>{if(o&&h<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(h<t[g+1]);g++);const m=Pf(t[g],t[g+1],h);return c[g](m)};return n?h=>f(bs(t[0],t[a-1],h)):f}function jz(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Pf(0,e,r);t.push(on(n,1,i))}}function Vz(t){const e=[0];return jz(e,t.length-1),e}function zz(t,e){return t.map(n=>n*e)}function Lz(t,e){return t.map(()=>e||ok).splice(0,t.length-1)}function gf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=K6(r)?r.map(AA):AA(r),a={done:!1,value:e[0]},o=zz(n&&n.length===e.length?n:Vz(e),t),c=Pz(o,e,{ease:Array.isArray(i)?i:Lz(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const Bz=t=>t!==null;function Ix(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Bz),c=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const Uz={decay:qb,inertia:qb,tween:gf,keyframes:gf,spring:rm};function xk(t){typeof t.type=="string"&&(t.type=Uz[t.type])}class Mx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Fz=t=>t/100;class Ox extends Mx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Br.now()&&this.tick(Br.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xk(e);const{type:n=gf,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=n||gf;u!==gf&&typeof c[0]!="number"&&(this.mixKeyframes=sh(Fz,vk(c[0],c[1])),c=[0,100]);const f=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=Nx(f));const{calculatedDuration:h}=f;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:h,repeat:g,repeatType:m,repeatDelay:x,type:_,onUpdate:E,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-f*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,j=r;if(g){const A=Math.min(this.currentTime,i)/c;let N=Math.floor(A),O=A%1;!O&&A>=1&&(O=1),O===1&&N--,N=Math.min(N,g+1),!!(N%2)&&(m==="reverse"?(O=1-O,x&&(O-=x/c)):m==="mirror"&&(j=o)),k=bs(0,1,O)*c}const B=D?{done:!1,value:h[0]}:j.next(k);a&&(B.value=a(B.value));let{done:z}=B;!D&&u!==null&&(z=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return C&&_!==qb&&(B.value=Ix(h,this.options,S,this.speed)),E&&E(B.value),C&&this.finish(),B}then(e,n){return this.finished.then(e,n)}get duration(){return Ti(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ti(e)}get time(){return Ti(this.currentTime)}set time(e){e=Sa(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Br.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ti(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Tz,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Br.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Gz(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Dl=t=>t*180/Math.PI,Hb=t=>{const e=Dl(Math.atan2(t[1],t[0]));return $b(e)},qz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Hb,rotateZ:Hb,skewX:t=>Dl(Math.atan(t[1])),skewY:t=>Dl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},$b=t=>(t=t%360,t<0&&(t+=360),t),IA=Hb,MA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),OA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Hz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:MA,scaleY:OA,scale:t=>(MA(t)+OA(t))/2,rotateX:t=>$b(Dl(Math.atan2(t[6],t[5]))),rotateY:t=>$b(Dl(Math.atan2(-t[2],t[0]))),rotateZ:IA,rotate:IA,skewX:t=>Dl(Math.atan(t[4])),skewY:t=>Dl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Yb(t){return t.includes("scale")?1:0}function Xb(t,e){if(!t||t==="none")return Yb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Hz,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=qz,i=c}if(!i)return Yb(e);const a=r[e],o=i[1].split(",").map(Yz);return typeof a=="function"?a(o):o[a]}const $z=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Xb(n,e)};function Yz(t){return parseFloat(t.trim())}const Lu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bu=new Set(Lu),PA=t=>t===zu||t===Ze,Xz=new Set(["x","y","z"]),Wz=Lu.filter(t=>!Xz.has(t));function Kz(t){const e=[];return Wz.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ol={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Xb(e,"x"),y:(t,{transform:e})=>Xb(e,"y")};Ol.translateX=Ol.x;Ol.translateY=Ol.y;const Pl=new Set;let Wb=!1,Kb=!1,Qb=!1;function _k(){if(Kb){const t=Array.from(Pl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Kz(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Kb=!1,Wb=!1,Pl.forEach(t=>t.complete(Qb)),Pl.clear()}function wk(){Pl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Kb=!0)})}function Qz(){Qb=!0,wk(),_k(),Qb=!1}class Px{constructor(e,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Pl.add(this),Wb||(Wb=!0,nn.read(wk),nn.resolveKeyframes(_k))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}Gz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Pl.delete(this)}cancel(){this.state==="scheduled"&&(Pl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Zz=t=>t.startsWith("--");function Jz(t,e,n){Zz(e)?t.style.setProperty(e,n):t.style[e]=n}const eL=wx(()=>window.ScrollTimeline!==void 0),tL={};function nL(t,e){const n=wx(t);return()=>tL[e]??n()}const Ek=nL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,jA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rf([0,.65,.55,1]),circOut:rf([.55,0,1,.45]),backIn:rf([.31,.01,.66,-.59]),backOut:rf([.33,1.53,.69,.99])};function Sk(t,e){if(t)return typeof t=="function"?Ek()?yk(t,e):"ease-out":lk(t)?rf(t):Array.isArray(t)?t.map(n=>Sk(n,e)||jA.easeOut):jA[t]}function rL(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},f=void 0){const h={[e]:n};u&&(h.offset=u);const g=Sk(c,i);Array.isArray(g)&&(h.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return f&&(m.pseudoElement=f),t.animate(h,m)}function Tk(t){return typeof t=="function"&&"applyToOptions"in t}function iL({type:t,...e}){return Tk(t)&&Ek()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class aL extends Mx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,_x(typeof e.type!="string");const f=iL(e);this.animation=rL(n,r,i,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=Ix(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):Jz(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ti(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ti(e)}get time(){return Ti(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Sa(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&eL()?(this.animation.timeline=e,Ai):n(this)}}const Ak={anticipate:ik,backInOut:rk,circInOut:sk};function sL(t){return t in Ak}function oL(t){typeof t.ease=="string"&&sL(t.ease)&&(t.ease=Ak[t.ease])}const VA=10;class lL extends aL{constructor(e){oL(e),xk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Ox({...o,autoplay:!1}),u=Sa(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-VA).value,c.sample(u).value,VA),c.stop()}}const zA=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(No.test(t)||t==="0")&&!t.startsWith("url("));function cL(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function uL(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=zA(i,e),c=zA(a,e);return!o||!c?!1:cL(t)||(n==="spring"||Tk(n))&&r}function Zb(t){t.duration=0,t.type="keyframes"}const dL=new Set(["opacity","clipPath","filter","transform"]),fL=wx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hL(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return fL()&&n&&dL.has(n)&&(n!=="transform"||!f)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const pL=40;class gL extends Mx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:f,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Br.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:f,element:h,...g},x=h?.KeyframeResolver||Px;this.keyframeResolver=new x(c,(_,E,S)=>this.onKeyframesResolved(_,E,m,!S),u,f,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:f,onUpdate:h}=r;this.resolvedAt=Br.now(),uL(e,a,o,c)||((xs.instantAnimations||!u)&&h?.(Ix(e,r,n)),e[0]=e[e.length-1],Zb(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>pL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},x=!f&&hL(m)?new lL({...m,element:m.motionValue.owner.current}):new Ox(m);x.finished.then(()=>this.notifyFinished()).catch(Ai),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Qz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const mL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vL(t){const e=mL.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Ck(t,e,n=1){const[r,i]=vL(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return WD(o)?parseFloat(o):o}return Cx(i)?Ck(i,e,n+1):i}function jx(t,e){return t?.[e]??t?.default??t}const Rk=new Set(["width","height","top","left","right","bottom",...Lu]),yL={test:t=>t==="auto",parse:t=>t},Dk=t=>e=>e.test(t),kk=[zu,Ze,Ta,ho,cz,lz,yL],LA=t=>kk.find(Dk(t));function bL(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||QD(t):!0}const xL=new Set(["brightness","contrast","saturate","opacity"]);function _L(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Rx)||[];if(!r)return t;const i=n.replace(r,"");let a=xL.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const wL=/\b([a-z-]*)\(.*?\)/gu,Jb={...No,getAnimatableNone:t=>{const e=t.match(wL);return e?e.map(_L).join(" "):t}},BA={...zu,transform:Math.round},EL={rotate:ho,rotateX:ho,rotateY:ho,rotateZ:ho,scale:ag,scaleX:ag,scaleY:ag,scaleZ:ag,skew:ho,skewX:ho,skewY:ho,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:jf,originX:CA,originY:CA,originZ:Ze},Vx={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze,...EL,zIndex:BA,fillOpacity:jf,strokeOpacity:jf,numOctaves:BA},SL={...Vx,color:Pn,backgroundColor:Pn,outlineColor:Pn,fill:Pn,stroke:Pn,borderColor:Pn,borderTopColor:Pn,borderRightColor:Pn,borderBottomColor:Pn,borderLeftColor:Pn,filter:Jb,WebkitFilter:Jb},Nk=t=>SL[t];function Ik(t,e){let n=Nk(t);return n!==Jb&&(n=No),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const TL=new Set(["auto","none","0"]);function AL(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!TL.has(a)&&Vf(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=Ik(n,i)}class CL extends Px{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="string"&&(f=f.trim(),Cx(f))){const h=Ck(f,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Rk.has(r)||e.length!==2)return;const[i,a]=e,o=LA(i),c=LA(a);if(o!==c)if(PA(o)&&PA(c))for(let u=0;u<e.length;u++){const f=e[u];typeof f=="string"&&(e[u]=parseFloat(f))}else Ol[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||bL(e[i]))&&r.push(i);r.length&&AL(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ol[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Ol[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function RL(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Mk=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Ok(t){return KD(t)&&"offsetHeight"in t}const UA=30,DL=t=>!isNaN(parseFloat(t));class kL{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Br.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Br.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=DL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ex);const r=this.events[e].add(n);return e==="change"?()=>{r(),nn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Br.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>UA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,UA);return ZD(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yu(t,e){return new kL(t,e)}const{schedule:zx}=ck(queueMicrotask,!1),qi={x:!1,y:!1};function Pk(){return qi.x||qi.y}function NL(t){return t==="x"||t==="y"?qi[t]?null:(qi[t]=!0,()=>{qi[t]=!1}):qi.x||qi.y?null:(qi.x=qi.y=!0,()=>{qi.x=qi.y=!1})}function jk(t,e){const n=RL(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function FA(t){return!(t.pointerType==="touch"||Pk())}function IL(t,e,n={}){const[r,i,a]=jk(t,n),o=c=>{if(!FA(c))return;const{target:u}=c,f=e(u,c);if(typeof f!="function"||!u)return;const h=g=>{FA(g)&&(f(g),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const Vk=(t,e)=>e?t===e?!0:Vk(t,e.parentElement):!1,Lx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ML=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OL(t){return ML.has(t.tagName)||t.tabIndex!==-1}const Pg=new WeakSet;function GA(t){return e=>{e.key==="Enter"&&t(e)}}function qy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const PL=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=GA(()=>{if(Pg.has(n))return;qy(n,"down");const i=GA(()=>{qy(n,"up")}),a=()=>qy(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function qA(t){return Lx(t)&&!Pk()}function jL(t,e,n={}){const[r,i,a]=jk(t,n),o=c=>{const u=c.currentTarget;if(!qA(c))return;Pg.add(u);const f=e(u,c),h=(x,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),Pg.has(u)&&Pg.delete(u),qA(x)&&typeof f=="function"&&f(x,{success:_})},g=x=>{h(x,u===window||u===document||n.useGlobalTarget||Vk(u,x.target))},m=x=>{h(x,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),Ok(c)&&(c.addEventListener("focus",f=>PL(f,i)),!OL(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function zk(t){return KD(t)&&"ownerSVGElement"in t}function VL(t){return zk(t)&&t.tagName==="svg"}const yr=t=>!!(t&&t.getVelocity),zL=[...kk,Pn,No],LL=t=>zL.find(Dk(t)),Bx=G.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function HA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function BL(...t){return e=>{let n=!1;const r=t.map(i=>{const a=HA(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():HA(t[i],null)}}}}function UL(...t){return G.useCallback(BL(...t),t)}class FL extends G.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Ok(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function GL({children:t,isPresent:e,anchorX:n,root:r}){const i=G.useId(),a=G.useRef(null),o=G.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=G.useContext(Bx),u=UL(a,t?.ref);return G.useInsertionEffect(()=>{const{width:f,height:h,top:g,left:m,right:x}=o.current;if(e||!a.current||!f||!h)return;const _=n==="left"?`left: ${m}`:`right: ${x}`;a.current.dataset.motionPopId=i;const E=document.createElement("style");c&&(E.nonce=c);const S=r??document.head;return S.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${g}px !important;
          }
        `),()=>{S.contains(E)&&S.removeChild(E)}},[e]),y.jsx(FL,{isPresent:e,childRef:a,sizeRef:o,children:G.cloneElement(t,{ref:u})})}const qL=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const f=$m(HL),h=G.useId();let g=!0,m=G.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:x=>{f.set(x,!0);for(const _ of f.values())if(!_)return;r&&r()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[n,f,r]);return a&&g&&(m={...m}),G.useMemo(()=>{f.forEach((x,_)=>f.set(_,!1))},[n]),G.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),o==="popLayout"&&(t=y.jsx(GL,{isPresent:n,anchorX:c,root:u,children:t})),y.jsx(Ym.Provider,{value:m,children:t})};function HL(){return new Map}function Lk(t=!0){const e=G.useContext(Ym);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=G.useId();G.useEffect(()=>{if(t)return i(a)},[t]);const o=G.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const sg=t=>t.key||"";function $A(t){const e=[];return G.Children.forEach(t,n=>{G.isValidElement(n)&&e.push(n)}),e}const Bl=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[f,h]=Lk(o),g=G.useMemo(()=>$A(t),[t]),m=o&&!f?[]:g.map(sg),x=G.useRef(!0),_=G.useRef(g),E=$m(()=>new Map),[S,T]=G.useState(g),[D,k]=G.useState(g);yx(()=>{x.current=!1,_.current=g;for(let z=0;z<D.length;z++){const C=sg(D[z]);m.includes(C)?E.delete(C):E.get(C)!==!0&&E.set(C,!1)}},[D,m.length,m.join("-")]);const j=[];if(g!==S){let z=[...g];for(let C=0;C<D.length;C++){const A=D[C],N=sg(A);m.includes(N)||(z.splice(C,0,A),j.push(A))}return a==="wait"&&j.length&&(z=j),k($A(z)),T(g),null}const{forceRender:B}=G.useContext(mx);return y.jsx(y.Fragment,{children:D.map(z=>{const C=sg(z),A=o&&!f?!1:g===D||m.includes(C),N=()=>{if(E.has(C))E.set(C,!0);else return;let O=!0;E.forEach(L=>{L||(O=!1)}),O&&(B?.(),k(_.current),o&&h?.(),r&&r())};return y.jsx(qL,{isPresent:A,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:A?void 0:N,anchorX:c,children:z},C)})})},Bk=G.createContext({strict:!1}),YA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bu={};for(const t in YA)bu[t]={isEnabled:e=>YA[t].some(n=>!!e[n])};function $L(t){for(const e in t)bu[e]={...bu[e],...t[e]}}const YL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function im(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||YL.has(t)}let Uk=t=>!im(t);function XL(t){typeof t=="function"&&(Uk=e=>e.startsWith("on")?!im(e):t(e))}try{XL(require("@emotion/is-prop-valid").default)}catch{}function WL(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Uk(i)||n===!0&&im(i)||!e&&!im(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Xm=G.createContext({});function Wm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function zf(t){return typeof t=="string"||Array.isArray(t)}const Ux=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fx=["initial",...Ux];function Km(t){return Wm(t.animate)||Fx.some(e=>zf(t[e]))}function Fk(t){return!!(Km(t)||t.variants)}function KL(t,e){if(Km(t)){const{initial:n,animate:r}=t;return{initial:n===!1||zf(n)?n:void 0,animate:zf(r)?r:void 0}}return t.inherit!==!1?e:{}}function QL(t){const{initial:e,animate:n}=KL(t,G.useContext(Xm));return G.useMemo(()=>({initial:e,animate:n}),[XA(e),XA(n)])}function XA(t){return Array.isArray(t)?t.join(" "):t}const Lf={};function ZL(t){for(const e in t)Lf[e]=t[e],Ax(e)&&(Lf[e].isCSSVariable=!0)}function Gk(t,{layout:e,layoutId:n}){return Bu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Lf[t]||t==="opacity")}const JL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},e9=Lu.length;function t9(t,e,n){let r="",i=!0;for(let a=0;a<e9;a++){const o=Lu[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const f=Mk(c,Vx[o]);if(!u){i=!1;const h=JL[o]||o;r+=`${h}(${f}) `}n&&(e[o]=f)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Gx(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const f=e[u];if(Bu.has(u)){o=!0;continue}else if(Ax(u)){i[u]=f;continue}else{const h=Mk(f,Vx[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=t9(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:f="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${f} ${h}`}}const qx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qk(t,e,n){for(const r in e)!yr(e[r])&&!Gk(r,n)&&(t[r]=e[r])}function n9({transformTemplate:t},e){return G.useMemo(()=>{const n=qx();return Gx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function r9(t,e){const n=t.style||{},r={};return qk(r,n,t),Object.assign(r,n9(t,e)),r}function i9(t,e){const n={},r=r9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const a9={offset:"stroke-dashoffset",array:"stroke-dasharray"},s9={offset:"strokeDashoffset",array:"strokeDasharray"};function o9(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?a9:s9;t[a.offset]=Ze.transform(-r);const o=Ze.transform(e),c=Ze.transform(n);t[a.array]=`${o} ${c}`}function Hk(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,f,h){if(Gx(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:m}=t;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),i!==void 0&&o9(g,i,a,o,!1)}const $k=()=>({...qx(),attrs:{}}),Yk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function l9(t,e,n,r){const i=G.useMemo(()=>{const a=$k();return Hk(a,e,Yk(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};qk(a,t.style,t),i.style={...a,...i.style}}return i}const c9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hx(t){return typeof t!="string"||t.includes("-")?!1:!!(c9.indexOf(t)>-1||/[A-Z]/u.test(t))}function u9(t,e,n,{latestValues:r},i,a=!1){const c=(Hx(t)?l9:i9)(e,r,i,t),u=WL(e,typeof t=="string",a),f=t!==G.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=G.useMemo(()=>yr(h)?h.get():h,[h]);return G.createElement(t,{...f,children:g})}function WA(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function $x(t,e,n,r){if(typeof e=="function"){const[i,a]=WA(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=WA(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function jg(t){return yr(t)?t.get():t}function d9({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:f9(n,r,i,t),renderState:e()}}function f9(t,e,n,r){const i={},a=r(t,{});for(const m in a)i[m]=jg(a[m]);let{initial:o,animate:c}=t;const u=Km(t),f=Fk(t);e&&f&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const g=h?c:o;if(g&&typeof g!="boolean"&&!Wm(g)){const m=Array.isArray(g)?g:[g];for(let x=0;x<m.length;x++){const _=$x(t,m[x]);if(_){const{transitionEnd:E,transition:S,...T}=_;for(const D in T){let k=T[D];if(Array.isArray(k)){const j=h?k.length-1:0;k=k[j]}k!==null&&(i[D]=k)}for(const D in E)i[D]=E[D]}}}return i}const Xk=t=>(e,n)=>{const r=G.useContext(Xm),i=G.useContext(Ym),a=()=>d9(t,e,r,i);return n?a():$m(a)};function Yx(t,e,n){const{style:r}=t,i={};for(const a in r)(yr(r[a])||e.style&&yr(e.style[a])||Gk(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const h9=Xk({scrapeMotionValuesFromProps:Yx,createRenderState:qx});function Wk(t,e,n){const r=Yx(t,e,n);for(const i in t)if(yr(t[i])||yr(e[i])){const a=Lu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const p9=Xk({scrapeMotionValuesFromProps:Wk,createRenderState:$k}),g9=Symbol.for("motionComponentSymbol");function Jc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function m9(t,e,n){return G.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Jc(n)&&(n.current=r))},[e])}const Xx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),v9="framerAppearId",Kk="data-"+Xx(v9),Qk=G.createContext({});function y9(t,e,n,r,i){const{visualElement:a}=G.useContext(Xm),o=G.useContext(Bk),c=G.useContext(Ym),u=G.useContext(Bx).reducedMotion,f=G.useRef(null);r=r||o.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,g=G.useContext(Qk);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&b9(f.current,n,i,g);const m=G.useRef(!1);G.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const x=n[Kk],_=G.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return yx(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),G.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),_.current=!1),h.enteringChildren=void 0)}),h}function b9(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:f,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Zk(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Jc(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:f})}function Zk(t){if(t)return t.options.allowProjection!==!1?t.projection:Zk(t.parent)}function Hy(t,{forwardMotionProps:e=!1}={},n,r){n&&$L(n);const i=Hx(t)?p9:h9;function a(c,u){let f;const h={...G.useContext(Bx),...c,layoutId:x9(c)},{isStatic:g}=h,m=QL(c),x=i(c,g);if(!g&&vx){_9();const _=w9(h);f=_.MeasureLayout,m.visualElement=y9(t,x,h,r,_.ProjectionNode)}return y.jsxs(Xm.Provider,{value:m,children:[f&&m.visualElement?y.jsx(f,{visualElement:m.visualElement,...h}):null,u9(t,c,m9(x,m.visualElement,u),x,g,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=G.forwardRef(a);return o[g9]=t,o}function x9({layoutId:t}){const e=G.useContext(mx).id;return e&&t!==void 0?e+"-"+t:t}function _9(t,e){G.useContext(Bk).strict}function w9(t){const{drag:e,layout:n}=bu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function E9(t,e){if(typeof Proxy>"u")return Hy;const n=new Map,r=(a,o)=>Hy(a,o,t,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,Hy(o,void 0,t,e)),n.get(o))})}function Jk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function S9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function T9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function $y(t){return t===void 0||t===1}function e1({scale:t,scaleX:e,scaleY:n}){return!$y(t)||!$y(e)||!$y(n)}function wl(t){return e1(t)||eN(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function eN(t){return KA(t.x)||KA(t.y)}function KA(t){return t&&t!=="0%"}function am(t,e,n){const r=t-n,i=e*r;return n+i}function QA(t,e,n,r,i){return i!==void 0&&(t=am(t,i,r)),am(t,n,r)+e}function t1(t,e=0,n=1,r,i){t.min=QA(t.min,e,n,r,i),t.max=QA(t.max,e,n,r,i)}function tN(t,{x:e,y:n}){t1(t.x,e.translate,e.scale,e.originPoint),t1(t.y,n.translate,n.scale,n.originPoint)}const ZA=.999999999999,JA=1.0000000000001;function A9(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&tu(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,tN(t,o)),r&&wl(a.latestValues)&&tu(t,a.latestValues))}e.x<JA&&e.x>ZA&&(e.x=1),e.y<JA&&e.y>ZA&&(e.y=1)}function eu(t,e){t.min=t.min+e,t.max=t.max+e}function eC(t,e,n,r,i=.5){const a=on(t.min,t.max,i);t1(t,e,n,a,r)}function tu(t,e){eC(t.x,e.x,e.scaleX,e.scale,e.originX),eC(t.y,e.y,e.scaleY,e.scale,e.originY)}function nN(t,e){return Jk(T9(t.getBoundingClientRect(),e))}function C9(t,e,n){const r=nN(t,n),{scroll:i}=e;return i&&(eu(r.x,i.offset.x),eu(r.y,i.offset.y)),r}const tC=()=>({translate:0,scale:1,origin:0,originPoint:0}),nu=()=>({x:tC(),y:tC()}),nC=()=>({min:0,max:0}),wn=()=>({x:nC(),y:nC()}),n1={current:null},rN={current:!1};function R9(){if(rN.current=!0,!!vx)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>n1.current=t.matches;t.addEventListener("change",e),e()}else n1.current=!1}const D9=new WeakMap;function k9(t,e,n){for(const r in e){const i=e[r],a=n[r];if(yr(i))t.addValue(r,i);else if(yr(a))t.addValue(r,yu(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,yu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const rC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class N9{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Px,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Br.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,nn.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Km(n),this.isVariantNode=Fk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in g){const x=g[m];u[m]!==void 0&&yr(x)&&x.set(u[m])}}mount(e){this.current=e,D9.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),rN.current||R9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:n1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ko(this.notifyUpdate),ko(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bu.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&nn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bu){const n=bu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<rC.length;r++){const i=rC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=k9(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(WD(r)||QD(r))?r=parseFloat(r):!LL(r)&&No.test(n)&&(r=Ik(e,n)),this.setBaseTarget(e,yr(r)?r.get():r)),yr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=$x(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!yr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ex),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){zx.render(this.render)}}class iN extends N9{constructor(){super(...arguments),this.KeyframeResolver=CL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;yr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function aN(t,{style:e,vars:n},r,i){const a=t.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function I9(t){return window.getComputedStyle(t)}class M9 extends iN{constructor(){super(...arguments),this.type="html",this.renderInstance=aN}readValueFromInstance(e,n){if(Bu.has(n))return this.projection?.isProjecting?Yb(n):$z(e,n);{const r=I9(e),i=(Ax(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return nN(e,n)}build(e,n,r){Gx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Yx(e,n,r)}}const sN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function O9(t,e,n,r){aN(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(sN.has(i)?i:Xx(i),e.attrs[i])}class P9 extends iN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bu.has(n)){const r=Nk(n);return r&&r.default||0}return n=sN.has(n)?n:Xx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Wk(e,n,r)}build(e,n,r){Hk(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){O9(e,n,r,i)}mount(e){this.isSVGTag=Yk(e.tagName),super.mount(e)}}const j9=(t,e)=>Hx(t)?new P9(e):new M9(e,{allowProjection:t!==G.Fragment});function du(t,e,n){const r=t.getProps();return $x(r,e,n!==void 0?n:r.custom,t)}const r1=t=>Array.isArray(t);function V9(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yu(n))}function z9(t){return r1(t)?t[t.length-1]||0:t}function Wx(t,e){const n=du(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=z9(a[o]);V9(t,o,c)}}function L9(t){return!!(yr(t)&&t.add)}function i1(t,e){const n=t.getValue("willChange");if(L9(n))return n.add(e);if(!n&&xs.WillChange){const r=new xs.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function oN(t){return t.props[Kk]}const B9=t=>t!==null;function U9(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(B9),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const F9={type:"spring",stiffness:500,damping:25,restSpeed:10},G9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),q9={type:"keyframes",duration:.8},H9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$9=(t,{keyframes:e})=>e.length>2?q9:Bu.has(t)?t.startsWith("scale")?G9(e[1]):F9:H9;function Y9({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:f,...h}){return!!Object.keys(h).length}const Kx=(t,e,n,r={},i,a)=>o=>{const c=jx(r,t)||{},u=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Sa(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};Y9(c)||Object.assign(h,$9(t,h)),h.duration&&(h.duration=Sa(h.duration)),h.repeatDelay&&(h.repeatDelay=Sa(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Zb(h),h.delay===0&&(g=!0)),(xs.instantAnimations||xs.skipAnimations)&&(g=!0,Zb(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const m=U9(h.keyframes,c);if(m!==void 0){nn.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new Ox(h):new gL(h)};function X9({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function lN(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const g=t.getValue(h,t.latestValues[h]??null),m=c[h];if(m===void 0||f&&X9(f,h))continue;const x={delay:n,...jx(a||{},h)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===_&&!x.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const T=oN(t);if(T){const D=window.MotionHandoffAnimation(T,h,nn);D!==null&&(x.startTime=D,E=!0)}}i1(t,h),g.start(Kx(h,g,m,t.shouldReduceMotion&&Rk.has(h)?{type:!1}:x,t,E));const S=g.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{nn.update(()=>{o&&Wx(t,o)})}),u}function cN(t,e,n,r=0,i=1){const a=Array.from(t).sort((f,h)=>f.sortNodePosition(h)).indexOf(e),o=t.size,c=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:c-a*r}function a1(t,e,n={}){const r=du(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(lN(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:g}=i;return W9(t,e,u,f,h,g,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,f]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>f())}else return Promise.all([a(),o(n.delay)])}function W9(t,e,n=0,r=0,i=0,a=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(a1(u,e,{...o,delay:n+(typeof r=="function"?0:r)+cN(t.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function uN(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>a1(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=a1(t,e,n);else{const i=typeof e=="function"?du(t,e,n.custom):e;r=Promise.all(lN(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function dN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const K9=Fx.length;function fN(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fN(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<K9;n++){const r=Fx[n],i=t.props[r];(zf(i)||i===!1)&&(e[r]=i)}return e}const Q9=[...Ux].reverse(),Z9=Ux.length;function J9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>uN(t,n,r)))}function eB(t){let e=J9(t),n=iC(),r=!0;const i=u=>(f,h)=>{const g=du(t,h,u==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:m,transitionEnd:x,..._}=g;f={...f,..._,...x}}return f};function a(u){e=u(t)}function o(u){const{props:f}=t,h=fN(t.parent)||{},g=[],m=new Set;let x={},_=1/0;for(let S=0;S<Z9;S++){const T=Q9[S],D=n[T],k=f[T]!==void 0?f[T]:h[T],j=zf(k),B=T===u?D.isActive:null;B===!1&&(_=S);let z=k===h[T]&&k!==f[T]&&j;if(z&&r&&t.manuallyAnimateOnMount&&(z=!1),D.protectedKeys={...x},!D.isActive&&B===null||!k&&!D.prevProp||Wm(k)||typeof k=="boolean")continue;const C=tB(D.prevProp,k);let A=C||T===u&&D.isActive&&!z&&j||S>_&&j,N=!1;const O=Array.isArray(k)?k:[k];let L=O.reduce(i(T),{});B===!1&&(L={});const{prevResolvedValues:V={}}=D,M={...V,...L},J=H=>{A=!0,m.has(H)&&(N=!0,m.delete(H)),D.needsAnimating[H]=!0;const ee=t.getValue(H);ee&&(ee.liveStyle=!1)};for(const H in M){const ee=L[H],te=V[H];if(x.hasOwnProperty(H))continue;let ue=!1;r1(ee)&&r1(te)?ue=!dN(ee,te):ue=ee!==te,ue?ee!=null?J(H):m.add(H):ee!==void 0&&m.has(H)?J(H):D.protectedKeys[H]=!0}D.prevProp=k,D.prevResolvedValues=L,D.isActive&&(x={...x,...L}),r&&t.blockInitialAnimation&&(A=!1);const Q=z&&C;A&&(!Q||N)&&g.push(...O.map(H=>{const ee={type:T};if(typeof H=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,ue=du(te,H);if(te.enteringChildren&&ue){const{delayChildren:U}=ue.transition||{};ee.delay=cN(te.enteringChildren,t,U)}}return{animation:H,options:ee}}))}if(m.size){const S={};if(typeof f.initial!="boolean"){const T=du(t,Array.isArray(f.initial)?f.initial[0]:f.initial);T&&T.transition&&(S.transition=T.transition)}m.forEach(T=>{const D=t.getBaseTarget(T),k=t.getValue(T);k&&(k.liveStyle=!0),S[T]=D??null}),g.push({animation:S})}let E=!!g.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(g):Promise.resolve()}function c(u,f){if(n[u].isActive===f)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(u,f)),n[u].isActive=f;const h=o(u);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=iC()}}}function tB(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!dN(e,t):!1}function xl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iC(){return{animate:xl(!0),whileInView:xl(),whileHover:xl(),whileTap:xl(),whileDrag:xl(),whileFocus:xl(),exit:xl()}}class Fo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nB extends Fo{constructor(e){super(e),e.animationState||(e.animationState=eB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Wm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let rB=0;class iB extends Fo{constructor(){super(...arguments),this.id=rB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const aB={animation:{Feature:nB},exit:{Feature:iB}};function Bf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ch(t){return{point:{x:t.pageX,y:t.pageY}}}const sB=t=>e=>Lx(e)&&t(e,ch(e));function mf(t,e,n,r){return Bf(t,e,sB(n),r)}const hN=1e-4,oB=1-hN,lB=1+hN,pN=.01,cB=0-pN,uB=0+pN;function Ar(t){return t.max-t.min}function dB(t,e,n){return Math.abs(t-e)<=n}function aC(t,e,n,r=.5){t.origin=r,t.originPoint=on(e.min,e.max,t.origin),t.scale=Ar(n)/Ar(e),t.translate=on(n.min,n.max,t.origin)-t.originPoint,(t.scale>=oB&&t.scale<=lB||isNaN(t.scale))&&(t.scale=1),(t.translate>=cB&&t.translate<=uB||isNaN(t.translate))&&(t.translate=0)}function vf(t,e,n,r){aC(t.x,e.x,n.x,r?r.originX:void 0),aC(t.y,e.y,n.y,r?r.originY:void 0)}function sC(t,e,n){t.min=n.min+e.min,t.max=t.min+Ar(e)}function fB(t,e,n){sC(t.x,e.x,n.x),sC(t.y,e.y,n.y)}function oC(t,e,n){t.min=e.min-n.min,t.max=t.min+Ar(e)}function yf(t,e,n){oC(t.x,e.x,n.x),oC(t.y,e.y,n.y)}function wi(t){return[t("x"),t("y")]}const gN=({current:t})=>t?t.ownerDocument.defaultView:null,lC=(t,e)=>Math.abs(t-e);function hB(t,e){const n=lC(t.x,e.x),r=lC(t.y,e.y);return Math.sqrt(n**2+r**2)}class mN{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Xy(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,_=hB(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!_)return;const{point:E}=m,{timestamp:S}=sr;this.history.push({...E,timestamp:S});const{onStart:T,onMove:D}=this.handlers;x||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,m)},this.handlePointerMove=(m,x)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Yy(x,this.transformPagePoint),nn.update(this.updatePoint,!0)},this.handlePointerUp=(m,x)=>{this.end();const{onEnd:_,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Xy(m.type==="pointercancel"?this.lastMoveEventInfo:Yy(x,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,T),E&&E(m,T)},!Lx(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=ch(e),u=Yy(c,this.transformPagePoint),{point:f}=u,{timestamp:h}=sr;this.history=[{...f,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,Xy(u,this.history)),this.removeListeners=sh(mf(this.contextWindow,"pointermove",this.handlePointerMove),mf(this.contextWindow,"pointerup",this.handlePointerUp),mf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ko(this.updatePoint)}}function Yy(t,e){return e?{point:e(t.point)}:t}function cC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xy({point:t},e){return{point:t,delta:cC(t,vN(e)),offset:cC(t,pB(e)),velocity:gB(e,.1)}}function pB(t){return t[0]}function vN(t){return t[t.length-1]}function gB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=vN(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Sa(e)));)n--;if(!r)return{x:0,y:0};const a=Ti(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function mB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?on(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?on(n,t,r.max):Math.min(t,n)),t}function uC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vB(t,{top:e,left:n,bottom:r,right:i}){return{x:uC(t.x,n,i),y:uC(t.y,e,r)}}function dC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function yB(t,e){return{x:dC(t.x,e.x),y:dC(t.y,e.y)}}function bB(t,e){let n=.5;const r=Ar(t),i=Ar(e);return i>r?n=Pf(e.min,e.max-r,t.min):r>i&&(n=Pf(t.min,t.max-i,e.min)),bs(0,1,n)}function xB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const s1=.35;function _B(t=s1){return t===!1?t=0:t===!0&&(t=s1),{x:fC(t,"left","right"),y:fC(t,"top","bottom")}}function fC(t,e,n){return{min:hC(t,e),max:hC(t,n)}}function hC(t,e){return typeof t=="number"?t:t[e]||0}const wB=new WeakMap;class EB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ch(g).point)},o=(g,m)=>{const{drag:x,dragPropagation:_,onDragStart:E}=this.getProps();if(x&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=NL(x),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wi(T=>{let D=this.getAxisMotionValue(T).get()||0;if(Ta.test(D)){const{projection:k}=this.visualElement;if(k&&k.layout){const j=k.layout.layoutBox[T];j&&(D=Ar(j)*(parseFloat(D)/100))}}this.originPoint[T]=D}),E&&nn.postRender(()=>E(g,m)),i1(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:x,dragDirectionLock:_,onDirectionLock:E,onDrag:S}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:T}=m;if(_&&this.currentDirection===null){this.currentDirection=SB(T),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),S&&S(g,m)},u=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>wi(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new mN(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:gN(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&nn.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!og(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=mB(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Jc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=vB(r.layoutBox,e):this.constraints=!1,this.elastic=_B(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=xB(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Jc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=C9(r,i.root,this.visualElement.getTransformPagePoint());let o=yB(i.layout.layoutBox,a);if(n){const c=n(S9(o));this.hasMutatedConstraints=!!c,c&&(o=Jk(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},f=wi(h=>{if(!og(h,n,this.currentDirection))return;let g=u&&u[h]||{};o&&(g={min:0,max:0});const m=i?200:1e6,x=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(h,_)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return i1(this.visualElement,e),r.start(Kx(e,r,0,n,this.visualElement,!1))}stopAnimation(){wi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wi(n=>{const{drag:r}=this.getProps();if(!og(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-on(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Jc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wi(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=bB({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wi(o=>{if(!og(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:f}=this.constraints[o];c.set(on(u,f,i[o]))})}addListeners(){if(!this.visualElement.current)return;wB.set(this.visualElement,this);const e=this.visualElement.current,n=mf(e,"pointerdown",u=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Jc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),nn.read(r);const o=Bf(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(wi(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=s1,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function og(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function SB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class TB extends Fo{constructor(e){super(e),this.removeGroupControls=Ai,this.removeListeners=Ai,this.controls=new EB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ai}unmount(){this.removeGroupControls(),this.removeListeners()}}const pC=t=>(e,n)=>{t&&nn.postRender(()=>t(e,n))};class AB extends Fo{constructor(){super(...arguments),this.removePointerDownListener=Ai}onPointerDown(e){this.session=new mN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:pC(e),onStart:pC(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&nn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=mf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const tf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ze.test(t))t=parseFloat(t);else return t;const n=gC(t,e.target.x),r=gC(t,e.target.y);return`${n}% ${r}%`}},CB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=No.parse(t);if(i.length>5)return r;const a=No.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const f=on(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=f),typeof i[3+o]=="number"&&(i[3+o]/=f),a(i)}};let Wy=!1;class RB extends G.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;ZL(DB),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),Wy&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Vg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,Wy=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||nn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Wy=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yN(t){const[e,n]=Lk(),r=G.useContext(mx);return y.jsx(RB,{...t,layoutGroup:r,switchLayoutGroup:G.useContext(Qk),isPresent:e,safeToRemove:n})}const DB={borderRadius:{...tf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tf,borderTopRightRadius:tf,borderBottomLeftRadius:tf,borderBottomRightRadius:tf,boxShadow:CB};function kB(t,e,n){const r=yr(t)?t:yu(t);return r.start(Kx("",r,e,n)),r.animation}const NB=(t,e)=>t.depth-e.depth;class IB{constructor(){this.children=[],this.isDirty=!1}add(e){bx(this.children,e),this.isDirty=!0}remove(e){xx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NB),this.isDirty=!1,this.children.forEach(e)}}function MB(t,e){const n=Br.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(ko(r),t(a-e))};return nn.setup(r,!0),()=>ko(r)}const bN=["TopLeft","TopRight","BottomLeft","BottomRight"],OB=bN.length,mC=t=>typeof t=="string"?parseFloat(t):t,vC=t=>typeof t=="number"||Ze.test(t);function PB(t,e,n,r,i,a){i?(t.opacity=on(0,n.opacity??1,jB(r)),t.opacityExit=on(e.opacity??1,0,VB(r))):a&&(t.opacity=on(e.opacity??1,n.opacity??1,r));for(let o=0;o<OB;o++){const c=`border${bN[o]}Radius`;let u=yC(e,c),f=yC(n,c);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||vC(u)===vC(f)?(t[c]=Math.max(on(mC(u),mC(f),r),0),(Ta.test(f)||Ta.test(u))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=on(e.rotate||0,n.rotate||0,r))}function yC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const jB=xN(0,.5,ak),VB=xN(.5,.95,Ai);function xN(t,e,n){return r=>r<t?0:r>e?1:n(Pf(t,e,r))}function bC(t,e){t.min=e.min,t.max=e.max}function xi(t,e){bC(t.x,e.x),bC(t.y,e.y)}function xC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function _C(t,e,n,r,i){return t-=e,t=am(t,1/n,r),i!==void 0&&(t=am(t,1/i,r)),t}function zB(t,e=0,n=1,r=.5,i,a=t,o=t){if(Ta.test(e)&&(e=parseFloat(e),e=on(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=on(a.min,a.max,r);t===a&&(c-=e),t.min=_C(t.min,e,n,c,i),t.max=_C(t.max,e,n,c,i)}function wC(t,e,[n,r,i],a,o){zB(t,e[n],e[r],e[i],e.scale,a,o)}const LB=["x","scaleX","originX"],BB=["y","scaleY","originY"];function EC(t,e,n,r){wC(t.x,e,LB,n?n.x:void 0,r?r.x:void 0),wC(t.y,e,BB,n?n.y:void 0,r?r.y:void 0)}function SC(t){return t.translate===0&&t.scale===1}function _N(t){return SC(t.x)&&SC(t.y)}function TC(t,e){return t.min===e.min&&t.max===e.max}function UB(t,e){return TC(t.x,e.x)&&TC(t.y,e.y)}function AC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function wN(t,e){return AC(t.x,e.x)&&AC(t.y,e.y)}function CC(t){return Ar(t.x)/Ar(t.y)}function RC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class FB{constructor(){this.members=[]}add(e){bx(this.members,e),e.scheduleRender()}remove(e){if(xx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GB(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:h,rotateX:g,rotateY:m,skewX:x,skewY:_}=n;f&&(r=`perspective(${f}px) ${r}`),h&&(r+=`rotate(${h}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),x&&(r+=`skewX(${x}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Ky=["","X","Y","Z"],qB=1e3;let HB=0;function Qy(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function EN(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=oN(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",nn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&EN(r)}function SN({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=HB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XB),this.nodes.forEach(ZB),this.nodes.forEach(JB),this.nodes.forEach(WB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new IB)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ex),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=zk(o)&&!VL(o),this.instance=o;const{layoutId:c,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let h,g=0;const m=()=>this.root.updateBlockedByResize=!1;nn.read(()=>{g=window.innerWidth}),t(o,()=>{const x=window.innerWidth;x!==g&&(g=x,this.root.updateBlockedByResize=!0,h&&h(),h=MB(m,250),Vg.hasAnimatedSinceResize&&(Vg.hasAnimatedSinceResize=!1,this.nodes.forEach(NC)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||f.getDefaultTransition()||iU,{onLayoutAnimationStart:E,onLayoutAnimationComplete:S}=f.getProps(),T=!this.targetLayout||!wN(this.targetLayout,x),D=!g&&m;if(this.options.layoutRoot||this.resumeFrom||D||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...jx(_,"layout"),onPlay:E,onComplete:S};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,D)}else g||NC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ko(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(DC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QB),this.nodes.forEach($B),this.nodes.forEach(YB)):this.nodes.forEach(kC),this.clearAllSnapshots();const c=Br.now();sr.delta=bs(0,1e3/60,c-sr.timestamp),sr.timestamp=c,sr.isProcessing=!0,Ly.update.process(sr),Ly.preRender.process(sr),Ly.render.process(sr),sr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KB),this.sharedNodes.forEach(tU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ar(this.snapshot.measuredBox.x)&&!Ar(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!_N(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;o&&this.instance&&(c||wl(this.latestValues)||h)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),aU(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return wn();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(sU))){const{scroll:f}=this.root;f&&(eu(c.x,f.offset.x),eu(c.y,f.offset.y))}return c}removeElementScroll(o){const c=wn();if(xi(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:h,options:g}=f;f!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&xi(c,o),eu(c.x,h.offset.x),eu(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=wn();xi(u,o);for(let f=0;f<this.path.length;f++){const h=this.path[f];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&tu(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),wl(h.latestValues)&&tu(u,h.latestValues)}return wl(this.latestValues)&&tu(u,this.latestValues),u}removeTransform(o){const c=wn();xi(c,o);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!wl(f.latestValues))continue;e1(f.latestValues)&&f.updateSnapshot();const h=wn(),g=f.measurePageBox();xi(h,g),EC(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return wl(this.latestValues)&&EC(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==sr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=sr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),yf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xi(this.target,this.layout.layoutBox),tN(this.target,this.targetDelta)):xi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),yf(this.relativeTargetOrigin,this.target,m.target),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||e1(this.parent.latestValues)||eN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===sr.timestamp&&(u=!1),u)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;xi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;A9(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=wn());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xC(this.prevProjectionDelta.x,this.projectionDelta.x),xC(this.prevProjectionDelta.y,this.projectionDelta.y)),vf(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!RC(this.projectionDelta.x,this.prevProjectionDelta.x)||!RC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nu(),this.projectionDelta=nu(),this.projectionDeltaWithTransform=nu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,f=u?u.latestValues:{},h={...this.latestValues},g=nu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=wn(),x=u?u.source:void 0,_=this.layout?this.layout.source:void 0,E=x!==_,S=this.getStack(),T=!S||S.members.length<=1,D=!!(E&&!T&&this.options.crossfade===!0&&!this.path.some(rU));this.animationProgress=0;let k;this.mixTargetDelta=j=>{const B=j/1e3;IC(g.x,o.x,B),IC(g.y,o.y,B),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nU(this.relativeTarget,this.relativeTargetOrigin,m,B),k&&UB(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=wn()),xi(k,this.relativeTarget)),E&&(this.animationValues=h,PB(h,f,this.latestValues,B,D,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ko(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nn.update(()=>{Vg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yu(0)),this.currentAnimation=kB(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:f,latestValues:h}=o;if(!(!c||!u||!f)){if(this!==o&&this.layout&&f&&TN(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||wn();const g=Ar(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const m=Ar(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}xi(c,u),tu(c,h),vf(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new FB),this.sharedNodes.get(o).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const f={};u.z&&Qy("z",o,f,this.animationValues);for(let h=0;h<Ky.length;h++)Qy(`rotate${Ky[h]}`,o,f,this.animationValues),Qy(`skew${Ky[h]}`,o,f,this.animationValues);o.render();for(const h in f)o.setStaticValue(h,f[h]),this.animationValues&&(this.animationValues[h]=f[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=jg(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=jg(c?.pointerEvents)||""),this.hasProjected&&!wl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=f.animationValues||f.latestValues;this.applyTransformsToTarget();let g=GB(this.projectionDeltaWithTransform,this.treeScale,h);u&&(g=u(h,g)),o.transform=g;const{x:m,y:x}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${x.origin*100}% 0`,f.animationValues?o.opacity=f===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Lf){if(h[_]===void 0)continue;const{correct:E,applyTo:S,isCSSVariable:T}=Lf[_],D=g==="none"?h[_]:E(h[_],f);if(S){const k=S.length;for(let j=0;j<k;j++)o[S[j]]=D}else T?this.options.visualElement.renderState.vars[_]=D:o[_]=D}this.options.layoutId&&(o.pointerEvents=f===this?jg(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(DC),this.root.sharedNodes.clear()}}}function $B(t){t.updateLayout()}function YB(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?wi(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=Ar(g);g.min=n[h].min,g.max=g.min+m}):TN(i,e.layoutBox,n)&&wi(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=Ar(n[h]);g.max=g.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const o=nu();vf(o,n,e.layoutBox);const c=nu();a?vf(c,t.applyTransform(r,!0),e.measuredBox):vf(c,n,e.layoutBox);const u=!_N(o);let f=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:m}=h;if(g&&m){const x=wn();yf(x,e.layoutBox,g.layoutBox);const _=wn();yf(_,n,m.layoutBox),wN(x,_)||(f=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function XB(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function WB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function KB(t){t.clearSnapshot()}function DC(t){t.clearMeasurements()}function kC(t){t.isLayoutDirty=!1}function QB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function NC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ZB(t){t.resolveTargetDelta()}function JB(t){t.calcProjection()}function eU(t){t.resetSkewAndRotation()}function tU(t){t.removeLeadSnapshot()}function IC(t,e,n){t.translate=on(e.translate,0,n),t.scale=on(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function MC(t,e,n,r){t.min=on(e.min,n.min,r),t.max=on(e.max,n.max,r)}function nU(t,e,n,r){MC(t.x,e.x,n.x,r),MC(t.y,e.y,n.y,r)}function rU(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const iU={duration:.45,ease:[.4,0,.1,1]},OC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),PC=OC("applewebkit/")&&!OC("chrome/")?Math.round:Ai;function jC(t){t.min=PC(t.min),t.max=PC(t.max)}function aU(t){jC(t.x),jC(t.y)}function TN(t,e,n){return t==="position"||t==="preserve-aspect"&&!dB(CC(e),CC(n),.2)}function sU(t){return t!==t.root&&t.scroll?.wasRoot}const oU=SN({attachResizeListener:(t,e)=>Bf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zy={current:void 0},AN=SN({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zy.current){const t=new oU({});t.mount(window),t.setOptions({layoutScroll:!0}),Zy.current=t}return Zy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lU={pan:{Feature:AB},drag:{Feature:TB,ProjectionNode:AN,MeasureLayout:yN}};function VC(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&nn.postRender(()=>a(e,ch(e)))}class cU extends Fo{mount(){const{current:e}=this.node;e&&(this.unmount=IL(e,(n,r)=>(VC(this.node,r,"Start"),i=>VC(this.node,i,"End"))))}unmount(){}}class uU extends Fo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sh(Bf(this.node.current,"focus",()=>this.onFocus()),Bf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zC(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&nn.postRender(()=>a(e,ch(e)))}class dU extends Fo{mount(){const{current:e}=this.node;e&&(this.unmount=jL(e,(n,r)=>(zC(this.node,r,"Start"),(i,{success:a})=>zC(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const o1=new WeakMap,Jy=new WeakMap,fU=t=>{const e=o1.get(t.target);e&&e(t)},hU=t=>{t.forEach(fU)};function pU({root:t,...e}){const n=t||document;Jy.has(n)||Jy.set(n,{});const r=Jy.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(hU,{root:t,...e})),r[i]}function gU(t,e,n){const r=pU(e);return o1.set(t,n),r.observe(t),()=>{o1.delete(t),r.unobserve(t)}}const mU={some:0,all:1};class vU extends Fo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:mU[i]},c=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),m=f?h:g;m&&m(u)};return gU(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(yU(e,n))&&this.startObserver()}unmount(){}}function yU({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bU={inView:{Feature:vU},tap:{Feature:dU},focus:{Feature:uU},hover:{Feature:cU}},xU={layout:{ProjectionNode:AN,MeasureLayout:yN}},_U={...aB,...bU,...lU,...xU},Go=E9(_U,j9);function wU(t){t.values.forEach(e=>e.stop())}function l1(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&Wx(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{l1(a,e)})})}function EU(t,e){if(Array.isArray(e))return l1(t,e);if(typeof e=="string")return l1(t,[e]);Wx(t,e)}function SU(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(uN(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{EU(r,n)})},stop(){t.forEach(n=>{wU(n)})},mount(){return()=>{e.stop()}}};return e}function TU(){const t=$m(SU);return yx(t.mount,[]),t}const AU=TU;function CU(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function RU(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function hs(t,e){return function(n){n&&(t[e]=n)}}function CN(t,e,n){return function(r){r&&(t[e][n]=r)}}function LC(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function DU(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var f=(o=this[r])[i].apply(o,c);return f===this[r]?this:f})})}}var kU="function",NU="object",IU="string",MU="number",Qx="undefined",RN=typeof window!==Qx,OU=typeof document!==Qx&&document,PU=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],jn=1e-7,lg={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function jU(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function sm(t,e,n,r){return(t*r+e*n)/(n+r)}function Qm(t){return typeof t===Qx}function Ji(t){return t&&typeof t===NU}function Ln(t){return Array.isArray(t)}function qr(t){return typeof t===IU}function xu(t){return typeof t===MU}function Zx(t){return typeof t===kU}function VU(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function DN(t,e,n,r,i){var a=Jx(t,e,n);return a?n:zU(t,e,n+1,r,i)}function Jx(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function zU(t,e,n,r,i){for(var a=function(f){var h=e[f].trim();if(h===t.close&&!Jx(t,e,f))return{value:f};var g=f,m=Hr(i,function(x){var _=x.open;return _===h});if(m&&(g=DN(m,e,f,r,i)),g===-1)return o=f,"break";f=g,o=f},o,c=n;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function e_(t,e){var n=qr(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,c=n.isSeparateOpenClose,u=c===void 0?o:c,f=n.openCloseCharacters,h=f===void 0?PU:f,g=h.map(function(C){var A=C.open,N=C.close;return A===N?A:A+"|"+N}).join("|"),m="(\\s*"+i+"\\s*|"+g+"|\\s+)",x=new RegExp(m,"g"),_=t.split(x).filter(function(C){return C&&C!=="undefined"}),E=_.length,S=[],T=[];function D(){return T.length?(S.push(T.join("")),T=[],!0):!1}for(var k=function(C){var A=_[C].trim(),N=C,O=Hr(h,function(M){var J=M.open;return J===A}),L=Hr(h,function(M){var J=M.close;return J===A});if(O){if(N=DN(O,_,C,E,h),N!==-1&&u)return D()&&a||(S.push(_.slice(C,N+1).join("")),C=N,a)?(j=C,"break"):(j=C,"continue")}else if(L&&!Jx(L,_,C)){var V=jU(h);return V.splice(h.indexOf(L),1),{value:e_(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:V})}}else if(VU(A,i)&&!o)return D(),a?(j=C,"break"):(j=C,"continue");N===-1&&(N=E-1),T.push(_.slice(C,N+1).join("")),C=N,j=C},j,B=0;B<E;++B){var z=k(B);if(B=j,typeof z=="object")return z.value;if(z==="break")break}return T.length&&S.push(T.join("")),S}function Io(t){return e_(t,"")}function kl(t){return e_(t,",")}function kN(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function uh(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function LU(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function zg(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Uf(){return Date.now?Date.now():new Date().getTime()}function _s(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Hr(t,e,n){var r=_s(t,e);return r>-1?t[r]:n}var NN=(function(){var t=Uf(),e=RN&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Uf(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),BU=(function(){var t=RN&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function ws(t){return Object.keys(t)}function UU(t){var e=ws(t);return e.map(function(n){return t[n]})}function qt(t,e){var n=uh(t),r=n.value,i=n.unit;if(Ji(e)){var a=e[i];if(a){if(Zx(a))return a(r);if(lg[i])return lg[i](r,a)}}else if(i==="%")return r*e/100;return lg[i]?lg[i](r):r}function c1(t,e,n){return Math.max(e,Math.min(t,n))}function BC(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[rt(e[0],jn),rt(e[0]/r,jn)],[rt(e[1]*r,jn),rt(e[1],jn)]].filter(function(i){return i.every(function(a,o){var c=e[o],u=rt(c,jn);return n?a<=c||a<=u:a>=c||a>=u})})[0]||t}function IN(t,e,n,r){if(!r)return t.map(function(x,_){return c1(x,e[_],n[_])});var i=t[0],a=t[1],o=r===!0?i/a:r,c=BC(t,e,!1,o),u=c[0],f=c[1],h=BC(t,n,!0,o),g=h[0],m=h[1];return i<u||a<f?(i=u,a=f):(i>g||a>m)&&(i=g,a=m),[i,a]}function FU(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function u1(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Sn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function GU(t){return[0,1].map(function(e){return u1(t.map(function(n){return n[e]}))})}function UC(t){var e=GU(t),n=Sn(e,t[0]),r=Sn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function ps(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function rt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function FC(t,e){return t.forEach(function(n,r){t[r]=rt(t[r],e)}),t}function qU(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function MN(t){return t.reduce(function(e,n){return e.concat(n)},[])}function ON(t,e){t.indexOf(e)===-1&&t.push(e)}function qn(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function PN(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function jN(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function ar(t,e,n,r){t.addEventListener(e,n,r)}function Un(t,e,n,r){t.removeEventListener(e,n,r)}function Uu(t){return t?.ownerDocument||OU}function t_(t){return Uu(t).documentElement}function qo(t){return Uu(t).body}function Eo(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function VN(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Fu(t){return Ji(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var HU=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,o=i.indexOf(n),c=o===-1?i.length:o;i[c]=n,a[c]=r},t})(),$U=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),YU=typeof Map=="function",XU=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function WU(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],o=i[1],c=new XU;n[a]=c,r[o]=c}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=n[o],f=r[c-1],h=u.getIndex();u.disconnect(),f?u.connect(f,f.next):u.connect(void 0,n[0]);var g=u.getIndex();return[h,g]})}var KU=(function(){function t(n,r,i,a,o,c,u,f){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=f}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=WU(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,o){var c=a[0],u=a[1],f=r[o],h=f[0],g=f[1];if(c!==u)return i.push([h,g]),!0}),this.cachePureChanged=i},t})();function dh(t,e,n){var r=YU?Map:n?$U:HU,i=n||function(D){return D},a=[],o=[],c=[],u=t.map(i),f=e.map(i),h=new r,g=new r,m=[],x=[],_={},E=[],S=0,T=0;return u.forEach(function(D,k){h.set(D,k)}),f.forEach(function(D,k){g.set(D,k)}),u.forEach(function(D,k){var j=g.get(D);typeof j>"u"?(++T,o.push(k)):_[j]=T}),f.forEach(function(D,k){var j=h.get(D);typeof j>"u"?(a.push(k),++S):(c.push([j,k]),T=_[k]||0,m.push([j-T,k-S]),x.push(k===j),j!==k&&E.push([j,k]))}),o.reverse(),new KU(t,e,a,o,E,c,m,x)}var QU=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=dh(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),d1=function(t,e){return d1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},d1(t,e)};function fh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");d1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var wa=function(){return wa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wa.apply(this,arguments)};function zN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function GC(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function qC(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function LN(t){var e=[];return t.forEach(function(n){e=e.concat(Ln(n)?LN(n):n)}),e}function eb(t,e){if(!e)return t;for(var n in e)Qm(t[n])&&(t[n]=e[n]);return t}function om(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function HC(t){var e=t.className,n=zN(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function $C(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function Zm(t){if(!t)return null;var e=t.b;return Fu(e)?e:Zm(t.c)}function BN(t){var e=t.parentNode;e&&e.removeChild(t)}function UN(t){t.forEach(function(e){e()})}function ZU(){return this.constructor(this.props,this.context)}var n_=0,Jm=(function(){function t(n,r,i,a,o,c,u){u===void 0&&(u={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,o){var c=this,u=c.d,f=UU(r).filter(function(_){return _.$_req}),h=LN(f.map(function(_){return _.$_subs})),g=Hr(h,function(_){return _.d===u});if(c.b&&!qr(i)&&!o&&!c.s(i.props,a)&&!g){var m=h.reduce(function(_,E){var S=E.d;return _[0]?_[0].d===S&&_.push(E):S>u&&_.push(E),_},[]);return m.forEach(function(_){hh(_,_._ps,[_.o],n,r,!0)}),!1}c.o=i,c.ss(a);var x=c.ps;return qr(i)||(c.ps=i.props,c.ref=i.ref),r_(this),c.r(n,r,c.b?x:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function FN(){return Object.__CROACT_CURRENT_INSTNACE__}function JU(){return n_}function e8(t){n_=t}function r_(t){return Object.__CROACT_CURRENT_INSTNACE__=t,n_=0,t}var i_=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=wa(wa({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,o=hh(a.c,[a],[a.o],i,a._cs,wa(wa({},this.state),this.$_state),r);o&&(n&&i.push(n),UN(i),r_(null))},t})(),GN=(function(t){fh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return om(this.props,r)||om(this.state,i)},e})(i_);function qN(t){var e=function(n){e.current=n};return e.current=t,e}function t8(t){return t._fr=!0,t}function n8(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new i_(e,n),a.constructor=t,t._fr?(r.fr=qN(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=ZU),a.$_p=r,a}var r8=(function(t){fh(e,t);function e(r,i,a,o,c,u,f){f===void 0&&(f={});var h=t.call(this,r,i,a,o,c,u,eb(f,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(eb(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var o,c,u=this,f=u.t;u.ps=eb(u.ps,u.t.defaultProps);var h=u.ps,g=!u.b,m=f.contextType,x=u.b,_=m?.get(u);u._cs=i,g?(x=n8(f,h,_,u),u.b=x):(x.props=h,x.context=_);var E=x.state;u._usefs=[],u._uefs=[];var S=x.render();((c=(o=S?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(S.props.children=u.ps.children);var T=wa(wa({},i),x.$_cs);hh(u,u._ps,S?[S]:[],r,T),g?u._uefs.push(function(){m?.register(u),x.componentDidMount()}):u._uefs.push(function(){x.componentDidUpdate(a,E)}),r.push(function(){u._usefs.forEach(function(D){D()}),g?u.md():u.ud(),u._defs=u._uefs.map(function(D){return D()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e})(Jm);function i8(t,e,n){var r=a_(HC(t),HC(e)),i=r.added,a=r.removed,o=r.changed;for(var c in i)n.setAttribute(c,i[c]);for(var u in o)n.setAttribute(u,o[u][1]);for(var f in a)n.removeAttribute(f)}function a8(t,e,n){var r=a_(t,e),i=r.added,a=r.removed;for(var o in a)n.e(o,!0);for(var c in i)n.e(c)}function a_(t,e){var n=ws(t),r=ws(e),i=dh(n,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var f=r[u];a[f]=e[f]}),i.removed.forEach(function(u){var f=n[u];o[f]=t[f]}),i.maintained.forEach(function(u){var f=u[0],h=n[f],g=[t[h],e[h]];t[h]!==e[h]&&(c[h]=g)}),{added:a,removed:o,changed:c}}function s8(t,e,n){var r=n.style,i=a_(t,e),a=i.added,o=i.removed,c=i.changed;for(var u in a){var f=zg(u,"-");r.setProperty(f,a[u])}for(var u in c){var h=zg(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var g=zg(u,"-");r.removeProperty(g)}}function o8(t){return t.replace(/^on/g,"").toLowerCase()}var l8=(function(t){fh(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,o=a._es,c=a.b,u=o8(r);i?(Un(c,u,o[r]),delete o[r]):(o[r]=function(f){var h,g;(g=(h=a.ps)[r])===null||g===void 0||g.call(h,f)},ar(c,u,o[r]))},n.s=function(r){return om(this.ps,r)},n.r=function(r,i,a){var o,c=this,u=!c.b,f=c.ps;if(u){var h=Zm(c.c),g=!1;c._svg||c.t==="svg"?g=!0:g=h&&h.ownerSVGElement,c._svg=g;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],x=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var _=Uu(h);g?m=_.createElementNS("http://www.w3.org/2000/svg",x):m=_.createElement(x)}c.b=m}hh(c,c._ps,f.children,r,i);var E=c.b,S=$C(a),T=S[0],D=S[1],k=$C(f),j=k[0],B=k[1];return i8(T,j,E),a8(D,B,c),s8(a.style||{},f.style||{},E),r.push(function(){u?c.md():c.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)Un(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||BN(a)},e})(Jm);function Ff(t){if(!t||Fu(t))return t;var e=t.$_p._ps;return e.length?Ff(e[0].b):null}function HN(t){if(t){if(t.b&&Fu(t.b))return t;var e=t._ps;return e.length?HN(e[0]):null}}function Qi(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,c=zN(i,["key","ref"]);return{type:t,key:a,ref:o,props:wa(wa({},c),{children:MN(n).filter(function(u){return u!=null&&u!==!1})})}}var $N=(function(t){fh(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(Jm),c8=(function(t){fh(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,o=!a.b;if(o){var c=Zm(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Uu(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},n.un=function(){BN(this.b)},e})(Jm);function u8(t,e,n){var r=n.map(function(u){return qr(u)?null:u.key}),i=qC(e.map(function(u){return u.k})),a=qC(r),o=dh(i,a,function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var f=u[0],h=u[1],g=e.splice(f,1)[0];e.splice(h,0,g);var m=Ff(g.b),x=Ff(e[h+1]&&e[h+1].b);m&&m.parentNode.insertBefore(m,x)}),o.added.forEach(function(u){e.splice(u,0,YC(n[u],r[u],u,t))});var c=o.maintained.filter(function(u){u[0];var f=u[1],h=n[f],g=e[f],m=qr(h)?"text_".concat(h):h.type;return m!==g.t?(g.un(),e.splice(f,1,YC(h,r[f],f,t)),!0):(g.i=f,!1)});return GC(GC([],o.added,!0),c.map(function(u){u[0];var f=u[1];return f}))}function d8(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Ff(n[i].b);if(a)return a}return null}function YC(t,e,n,r){var i=r.d+1;if(qr(t)||xu(t))return new c8("text_".concat(t),i,e,n,r,null,{});var a=t.type,o=typeof a=="string"?l8:r8;return new o(a,i,e,n,r,t.ref,t.props)}function hh(t,e,n,r,i,a,o){var c=u8(t,e,n),u=t._hyd,f=e.filter(function(g,m){return g._hyd=u,g.u(r,i,n[m],a,o)});t.typ==="container"&&t._sel&&e.forEach(function(g){var m=HN(g);m&&(m._sel=!0)}),t._hyd=null;var h=Zm(t);return h&&c.reverse().forEach(function(g){var m=e[g],x=Ff(m.b);if(x&&h!==x&&!x.parentNode){var _=d8(t,m);h.insertBefore(x,_)}}),f.length>0}function f8(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new $N(e));var a=[];return hh(n,n._ps,t?[t]:[],a,r,void 0,void 0),UN(a),r_(null),i||(e.__CROACT__=n),n}function XC(t,e,n){return!n&&t&&(n=new $N(e.parentElement),n._hyd=[e],n._sel=!0),f8(t,e,n),n}function YN(t){var e=FN(),n=e._hs||(e._hs=[]),r=JU(),i=n[r];if(e8(r+1),i){if(!om(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function h8(t,e){var n=YN({func:t,deps:e});return n.value}function p8(t){return h8(function(){return qN(t)},[])}function XN(t,e,n){var r=FN(),i=YN({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function g8(t,e,n){XN(function(){t?.(e())},n,!0)}function s_(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function WN(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function KN(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function o_(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function m8(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function v8(t,e){var n=o_("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function f1(t){return t.replace(/_/g,".")}function af(t,e){var n=null,r="-1";return s_(t,function(i){var a=o_("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=v8(i.versionTest.toLowerCase(),e)||r),r=f1(r),!0)}),{preset:n,version:r}}function cg(t,e){var n={brand:"",version:"-1"};return s_(t,function(r){var i=QN(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function QN(t,e){return WN(t,function(n){var r=n.brand;return o_(""+e.test,r.toLowerCase())})}var ZN=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],JN=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],h1=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],eI=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],tI=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function nI(t){return!!af(eI,t).preset}function y8(t){var e=KN(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:nI(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=af(ZN,e),o=a.preset,c=a.version,u=af(tI,e),f=u.preset,h=u.version,g=af(JN,e);if(r.chromium=!!g.preset,r.chromiumVersion=g.version,!r.chromium){var m=af(h1,e);r.webkit=!!m.preset,r.webkitVersion=m.version}return f&&(i.name=f.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function b8(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!cg(eI,n).brand||nI(KN())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&s_(h1,function(m){return QN(n,m)});var u=cg(JN,n);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var f=cg(h1,n);o.webkit=!!f.brand,o.webkitVersion=f.version||"-1"}var h=WN(tI,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var g=cg(ZN,n);o.name=g.brand||o.name,o.version=g.brand&&t?t.uaFullVersion:g.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=f1(c.version),o.version=f1(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function x8(t){return m8()?b8():y8(t)}function _8(t,e,n,r,i,a){for(var o=0;o<i;++o){var c=n+o*i,u=r+o*i;t[c]+=t[u]*a,e[c]+=e[u]*a}}function w8(t,e,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,c=r+a*i,u=t[o],f=e[o];t[o]=t[c],t[c]=u,e[o]=e[c],e[c]=f}}function E8(t,e,n,r,i){for(var a=0;a<r;++a){var o=n+a*r;t[o]/=i,e[o]/=i}}function rI(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Oa(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Jt(e),i=0;i<e;++i){var a=e*i+i;if(!rt(n[a],jn)){for(var o=i+1;o<e;++o)if(n[e*i+o]){w8(n,r,i,o,e);break}}if(!rt(n[a],jn))return[];E8(n,r,i,e,n[a]);for(var o=0;o<e;++o){var c=o,u=o+i*e,f=n[u];!rt(f,jn)||i===o||_8(n,r,c,i,e,-f)}}return r}function S8(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function iI(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function T8(t,e){for(var n=Jt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Ul(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function ea(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Jt(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=t[a*e+o];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function lm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Jt(t);return e.forEach(function(i){r=$t(r,i,t)}),r}function $t(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var o=0;o<n;++o)for(var c=0;c<a;++c){r[c*n+o]=0;for(var u=0;u<i;++u)r[c*n+o]+=t[u*n+o]*e[c*i+u]}return r}function St(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Fe(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function A8(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function aI(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function xr(t,e,n){n===void 0&&(n=e.length);var r=$t(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function C8(t,e){return $t(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function R8(t,e){return $t(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function D8(t,e){return $t(t,gh(e,4))}function ug(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,o=e[2],c=o===void 0?1:o;return $t(t,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function ph(t,e){return xr(gh(e,3),Ul(t,3))}function tb(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,o=e[2],c=o===void 0?0:o;return $t(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function WC(t,e){return $t(t,e,4)}function gh(t,e){var n=Math.cos(t),r=Math.sin(t),i=Jt(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Jt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function l_(t,e){for(var n=Jt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Fl(t,e){for(var n=Jt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function c_(t,e,n,r,i,a,o,c){var u=t[0],f=t[1],h=e[0],g=e[1],m=n[0],x=n[1],_=r[0],E=r[1],S=i[0],T=i[1],D=a[0],k=a[1],j=o[0],B=o[1],z=c[0],C=c[1],A=[u,0,h,0,m,0,_,0,f,0,g,0,x,0,E,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,_,0,f,0,g,0,x,0,E,0,1,0,1,0,1,0,1,-S*u,-T*u,-D*h,-k*h,-j*m,-B*m,-z*_,-C*_,-S*f,-T*f,-D*g,-k*g,-j*x,-B*x,-z*E,-C*E],N=Oa(A,8);if(!N.length)return[];var O=$t(N,[S,T,D,k,j,B,z,C],8);return O[8]=1,ea(S8(O),3,4)}var bf=function(){return bf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bf.apply(this,arguments)};function k8(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Gf(t,e){return e===void 0&&(e=0),$c(_u(t,e))}function N8(t,e){var n=xr(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function $c(t){var e=k8();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function _u(t,e){e===void 0&&(e=0);var n=Ln(t)?t:Io(t);return n.map(function(r){var i=kN(r),a=i.prefix,o=i.value,c=null,u=a,f="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=Ji(e)?bf(bf({},e),{"o%":e["%"]}):{"%":e,"o%":e},g=kl(o).map(function(M,J){return J===0&&"x%"in h?h["%"]=e["x%"]:J===1&&"y%"in h?h["%"]=e["y%"]:h["%"]=e["o%"],qt(M,h)}),m=g[0],x=g[1],_=x===void 0?0:x,E=g[2],S=E===void 0?0:E;c=tb,f=[m,_,S]}else if(a==="translateY"){var T=Ji(e)?bf({"%":e["y%"]},e):{"%":e},_=qt(o,T);c=tb,f=[0,_,0]}else if(a==="translateZ"){var S=parseFloat(o);c=tb,f=[0,0,S]}else if(a==="scale"||a==="scale3d"){var D=kl(o).map(function(M){return parseFloat(M)}),k=D[0],j=D[1],B=j===void 0?k:j,z=D[2],C=z===void 0?1:z;c=ug,f=[k,B,C]}else if(a==="scaleX"){var k=parseFloat(o);c=ug,f=[k,1,1]}else if(a==="scaleY"){var B=parseFloat(o);c=ug,f=[1,B,1]}else if(a==="scaleZ"){var C=parseFloat(o);c=ug,f=[1,1,C]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var A=uh(o),N=A.unit,O=A.value,L=N==="rad"?O:O*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=D8):a==="rotateX"?c=C8:a==="rotateY"&&(c=R8),f=L}else if(a==="matrix3d")c=WC,f=kl(o).map(function(M){return parseFloat(M)});else if(a==="matrix"){var V=kl(o).map(function(M){return parseFloat(M)});c=WC,f=[V[0],V[1],0,0,V[2],V[3],0,0,0,0,1,0,V[4],V[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:f}})}var p1=function(t,e){return p1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},p1(t,e)};function I8(t,e){p1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sI=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),oI=(function(t){I8(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,sI)||this}return e})(QU);function M8(t,e){return dh(t,e,sI)}var g1=function(){return g1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g1.apply(this,arguments)};function O8(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var e0=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Ji(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Ji(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=_s(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,O8(a).forEach(function(c){c.listener(r),c.once&&i.off(n,c.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(g1({listener:r},i))},t})();var m1=function(t,e){return m1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},m1(t,e)};function P8(t,e){m1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ru=function(){return ru=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ru.apply(this,arguments)};function j8(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function KC(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function dg(t){if(t){if(qr(t))return document.querySelector(t)}else return null;if(Zx(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var V8=(function(t){P8(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=dg(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,f=0;if(a===document.body)u=window.innerWidth,f=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,f=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:f},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,f=this,h=f._startRect,g=f._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(g[1]>h.top||o<g[1])&&(m[1]=-1):h.top+h.height<o+u&&(g[1]<h.top+h.height||o>g[1])&&(m[1]=1),h.left>a-u?(g[0]>h.left||a<g[0])&&(m[0]=-1):h.left+h.width<a+u&&(g[0]<h.left+h.width||a>g[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(ru(ru({},i),{direction:m,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,f=u===void 0?0:u,h=r.inputEvent,g=r.isDrag,m=this._getScrollPosition(c||[0,0],r),x=m[0]-o[0],_=m[1]-o[1],E=c||[x?Math.abs(x)/x:0,_?Math.abs(_)/_:0];return this._prevScrollPos=m,this._lock=!1,!x&&!_?!1:(this.emit("move",{offsetX:E[0]?x:0,offsetY:E[1]?_:0,inputEvent:h}),f&&g&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},f)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?j8:o;return c({container:dg(a),direction:r})},n._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,f=r.useScroll,h=r.isDrag,g=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=Uf(),x=Math.max(u+this._prevTime-m,0);if(x>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},x),!1;this._prevTime=m;var _=this._getScrollPosition(c,r);this._prevScrollPos=_,h&&(this._isWait=!0),f||(this._lock=!0);var E={container:dg(o),direction:c,inputEvent:g};return(a=r.requestScroll)===null||a===void 0||a.call(r,E),this.emit("scroll",E),this._isWait=!1,f||this.checkScroll(ru(ru({},r),{prevScrollPos:_,direction:c,inputEvent:g}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?KC:i,o=dg(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=KC(window,this._onScroll):this._unregister=a(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(e0);function z8(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Vr(t){return rt(t,jn)}function L8(t,e){return t.every(function(n,r){return Vr(n-e[r])===0})}function B8(t,e){return!Vr(t[0]-e[0])&&!Vr(t[1]-e[1])}function lI(t){return t.length<3?0:Math.abs(FU(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function QC(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,o=Gl(t),c=o.minX,u=o.minY,f=o.maxX,h=o.maxY,g=n/(f-c),m=r/(h-u);return t.map(function(x){return[i+(x[0]-c)*g,a+(x[1]-u)*m]})}function Gl(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function v1(t,e,n){var r=t[0],i=t[1],a=Gl(e),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],f=cm(u[0],u[1]),h=y1(e),g=[];if(h.forEach(function(_){var E=cm(_[0],_[1]),S=_[0];if(L8(f,E))g.push({pos:t,line:_,type:"line"});else{var T=cI(u_(f,E),[u,_]);T.forEach(function(D){_.some(function(k){return B8(k,D)})?g.push({pos:D,line:_,type:"point"}):Vr(S[1]-i)!==0&&g.push({pos:D,line:_,type:"intersection"})})}}),Hr(g,function(_){return _[0]===r}))return!0;var m=0,x={};return g.forEach(function(_){var E=_.pos,S=_.type,T=_.line;if(!(E[0]>r))if(S==="intersection")++m;else{if(S==="line")return;if(S==="point"){var D=Hr(T,function(B){return B[1]!==i}),k=x[E[0]],j=D[1]>i?1:-1;k?k!==j&&++m:x[E[0]]=j}}}),m%2===1}function cm(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=i-n,c=a-r;Math.abs(o)<jn&&(o=0),Math.abs(c)<jn&&(c=0);var u=0,f=0,h=0;return o?c?(u=-c/o,f=1,h=-u*n-r):(f=1,h=-r):c&&(u=-1,h=n),[u,f,h]}function u_(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],c=e[2],u=n===0&&a===0,f=r===0&&o===0,h=[];if(u&&f)return[];if(u){var g=-i/r,m=-c/o;return g!==m?[]:[[-1/0,g],[1/0,g]]}else if(f){var x=-i/n,_=-c/a;return x!==_?[]:[[x,-1/0],[x,1/0]]}else if(n===0){var E=-i/r,S=-(o*E+c)/a;h=[[S,E]]}else if(a===0){var E=-c/o,S=-(r*E+i)/n;h=[[S,E]]}else if(r===0){var S=-i/n,E=-(a*S+c)/o;h=[[S,E]]}else if(o===0){var S=-c/a,E=-(n*S+i)/r;h=[[S,E]]}else{var S=(r*c-o*i)/(o*n-r*a),E=-(n*S+i)/r;h=[[S,E]]}return h.map(function(T){return[T[0],T[1]]})}function cI(t,e){var n=e.map(function(g){return[0,1].map(function(m){return[Math.min(g[0][m],g[1][m]),Math.max(g[0][m],g[1][m])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if(Vr(a-t[1][0])){if(!Vr(o-t[1][1])){var f=Math.max.apply(Math,n.map(function(g){return g[0][0]})),h=Math.min.apply(Math,n.map(function(g){return g[0][1]}));if(Vr(f-h)>0)return[];r=[[f,o],[h,o]]}}else{var c=Math.max.apply(Math,n.map(function(g){return g[1][0]})),u=Math.min.apply(Math,n.map(function(g){return g[1][1]}));if(Vr(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=t.filter(function(g){var m=g[0],x=g[1];return n.every(function(_){return 0<=Vr(m-_[0][0])&&0<=Vr(_[0][1]-m)&&0<=Vr(x-_[1][0])&&0<=Vr(_[1][1]-x)})})),r.map(function(g){return[Vr(g[0]),Vr(g[1])]})}function y1(t){return z8(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function U8(t,e){var n=t.slice(),r=e.slice();UC(n)===-1&&n.reverse(),UC(r)===-1&&r.reverse();var i=y1(n),a=y1(r),o=i.map(function(h){return cm(h[0],h[1])}),c=a.map(function(h){return cm(h[0],h[1])}),u=[];o.forEach(function(h,g){var m=i[g],x=[];c.forEach(function(_,E){var S=u_(h,_),T=cI(S,[m,a[E]]);x.push.apply(x,T.map(function(D){return{index1:g,index2:E,pos:D,type:"intersection"}}))}),x.sort(function(_,E){return ps(m[0],_.pos)-ps(m[0],E.pos)}),u.push.apply(u,x),v1(m[1],r)&&u.push({index1:g,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,g){if(v1(h[1],n)){var m=!1,x=_s(u,function(_){var E=_.index2;return E===g?(m=!0,!1):!!m});x===-1&&(m=!1,x=_s(u,function(_){var E=_.index1,S=_.index2;return E===-1&&S+1===g?(m=!0,!1):!!m})),x===-1?u.push({index1:-1,index2:g,pos:h[1],type:"inside"}):u.splice(x,0,{index1:-1,index2:g,pos:h[1],type:"inside"})}});var f={};return u.filter(function(h){var g=h.pos,m=g[0]+"x"+g[1];return f[m]?!1:(f[m]=!0,!0)})}function F8(t,e){var n=U8(t,e);return n.map(function(r){var i=r.pos;return i})}function G8(t,e){var n=F8(t,e);return lI(n)}var b1=function(t,e){return b1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},b1(t,e)};function q8(t,e){b1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Mn=function(){return Mn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mn.apply(this,arguments)};function H8(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function nb(t){return H8([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function $8(t){return t.touches&&t.touches.length>=2}function fg(t){return t?t.touches?X8(t.touches):[uI(t)]:[]}function Y8(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function ZC(t,e,n){var r=n.length,i=xf(t,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,f=xf(e,r),h=f.clientX,g=f.clientY,m=xf(n,r),x=m.clientX,_=m.clientY,E=a-h,S=o-g,T=a-x,D=o-_;return{clientX:c,clientY:u,deltaX:E,deltaY:S,distX:T,distY:D}}function rb(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function X8(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(uI(t[r]));return n}function uI(t){return{clientX:t.clientX,clientY:t.clientY}}function xf(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var ib=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),nb(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),nb(e)-nb(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=ZC(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],o=0;o<i;++o)a[o]=ZC([e[o]],[n[o]],[r[o]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=xf(e,this.length),i=xf(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),rb(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),rb(e)/rb(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),JC=["textarea","input"],W8=(function(t){q8(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,x){if(x===void 0&&(x=!0),!(!i.flag&&m.cancelable===!1)){var _=m.type.indexOf("drag")>=-1;if(!(i.flag&&_)){i._isDragAPI=!0;var E=i.options,S=E.container,T=E.pinchOutside,D=E.preventWheelClick,k=E.preventRightClick,j=E.preventDefault,B=E.checkInput,z=E.dragFocusedInput,C=E.preventClickEventOnDragStart,A=E.preventClickEventOnDrag,N=E.preventClickEventByCondition,O=i._useTouch,L=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,D&&(m.which===2||m.button===1)||k&&(m.which===3||m.button===2))return i.stop(),!1;if(L){var V=i._window.document.activeElement,M=m.target;if(M){var J=M.tagName.toLowerCase(),Q=JC.indexOf(J)>-1,$=M.isContentEditable;if(Q||$){if(B||!z&&V===M)return!1;if(V&&(V===M||$&&V.isContentEditable&&V.contains(M)))if(z)M.blur();else return!1}else if((j||m.type==="touchstart")&&V){var H=V.tagName.toLowerCase();(V.isContentEditable||JC.indexOf(H)>-1)&&V.blur()}(C||A||N)&&ar(i._window,"click",i._onClick,!0)}i.clientStores=[new ib(fg(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=x,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=Uf()-i.prevTime<200,i._isMouseEvent=Y8(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var ee=i._preventMouseEvent||i.emit("dragStart",Mn(Mn({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:x,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));ee===!1&&i.stop(),i._isMouseEvent&&i.flag&&j&&m.preventDefault()}if(!i.flag)return!1;var te=0;if(L?(i._attchDragEvent(),O&&T&&(te=setTimeout(function(){ar(S,"touchstart",i.onDragStart,{passive:!1})}))):O&&T&&Un(S,"touchstart",i.onDragStart),i.flag&&$8(m)){if(clearTimeout(te),L&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,x){if(i.flag){var _=i.options.preventDefault;!i._isMouseEvent&&_&&m.preventDefault(),i._prevInputEvent=m;var E=fg(m),S=i.moveClients(E,m,!1);if(i._dragFlag){if(i.pinchFlag||S.deltaX||S.deltaY){var T=i._preventMouseEvent||i.emit("drag",Mn(Mn({},S),{isScroll:!!x,inputEvent:m}));if(T===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,E)}i.getCurrentStore().getPosition(E,!0)}},i.onDragEnd=function(m){if(i.flag){var x=i.options,_=x.pinchOutside,E=x.container,S=x.preventClickEventOnDrag,T=x.preventClickEventOnDragStart,D=x.preventClickEventByCondition,k=i.isDrag;(S||T||D)&&requestAnimationFrame(function(){i._allowClickEvent()}),!D&&!T&&S&&!k&&i._allowClickEvent(),i._useTouch&&_&&Un(E,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var j=m?.touches?fg(m):[],B=j.length;B===0||!i.options.keepDragging?i.flag=!1:i._addStore(new ib(j));var z=i._getPosition(),C=Uf(),A=!k&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=k||A?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Mn({data:i.data,datas:i.data,isDouble:A,isDrag:k,isClick:!k,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},z)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Un(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var x=i.options.preventClickEventByCondition;x?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var x=i.options;x.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(n),o=a[0];i._window=VN(o)?o:Eo(o),i.options=Mn({checkInput:!1,container:o&&!("document"in o)?Eo(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,f=c.events,h=c.checkWindowBlur;if(i._useDrag=f.indexOf("drag")>-1,i._useTouch=f.indexOf("touch")>-1,i._useMouse=f.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){ar(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){ar(m,"mousedown",i.onDragStart),ar(m,"mousemove",i._passCallback)}),ar(u,"contextmenu",i._onContextMenu)),h&&ar(Eo(),"blur",i.onBlur),i._useTouch){var g={passive:!1};a.forEach(function(m){ar(m,"touchstart",i.onDragStart,g),ar(m,"touchmove",i._passCallback,g)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var f=u.clientX,h=u.clientY;return{clientX:f+i,clientY:h+a,originalClientX:f,originalClientY:h}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Mn(Mn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),Un(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){Un(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){Un(a,"mousedown",n.onDragStart)}),Un(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){Un(a,"touchstart",n.onDragStart)}),Un(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new ib(fg(n));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",Mn(Mn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Mn(Mn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Mn(Mn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),Mn(Mn({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(f,h){var g=h.getPosition();return f.distX+=g.distX,f.distY+=g.distY,f},a),c=o.distX,u=o.distY;return Mn(Mn({},a),{distX:c,distY:u})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(ar(r,"dragover",this.onDrag,i),ar(n,"dragend",this.onDragEnd)),this._useMouse&&(ar(r,"mousemove",this.onDrag),ar(n,"mouseup",this.onDragEnd)),this._useTouch&&(ar(r,"touchmove",this.onDrag,i),ar(n,"touchend",this.onDragEnd,i),ar(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(Un(r,"dragover",this.onDrag),Un(n,"dragend",this.onDragEnd)),this._useMouse&&(Un(r,"mousemove",this.onDrag),Un(n,"mouseup",this.onDragEnd)),this._useTouch&&(Un(r,"touchstart",this.onDragStart),Un(r,"touchmove",this.onDrag),Un(n,"touchend",this.onDragEnd),Un(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(e0);function K8(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Q8=K8;function Z8(t){return Q8(t).toString(36)}function J8(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function eF(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?kl(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(t))):c?".".concat(t," ").concat(c):".".concat(t)}).join(", ")+" {"})}function tF(t,e,n,r,i){var a=Uu(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=eF(t,e,n),(i||a.head||a.body).appendChild(o),o}function nF(t){var e="rCS"+Z8(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=J8(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=tF(e,t,r,n,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var x1=function(){return x1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x1.apply(this,arguments)};function rF(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dI(t,e){var n=nF(e),r=n.className;return t8(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=rF(i,["className","cspNonce"]),f=p8();return g8(a,function(){return f.current},[]),XN(function(){var h=n.inject(f.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),Qi(t,x1({ref:f,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var _1=function(t,e){return _1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},_1(t,e)};function mh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var W=function(){return W=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},W.apply(this,arguments)};function iF(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function aF(t,e,n,r){var i=arguments.length,a=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function sF(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Se(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function vh(t,e){return W({events:[],props:[],name:t},e)}var oF=["n","w","s","e"],d_=["n","w","s","e","nw","ne","sw","se"];function lF(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function cF(t){var e=lF(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Gu=x8(),fI=Gu.browser.webkit,hI=fI&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),pI=Gu.browser.name,gI=parseInt(Gu.browser.version,10),uF=pI==="chrome",dF=Gu.browser.chromium,fF=parseInt(Gu.browser.chromiumVersion,10)||0,hF=uF&&gI>=109||dF&&fF>=109,pF=pI==="firefox",gF=parseInt(Gu.browser.webkitVersion,10)>=612||gI>=15,f_="moveable-",mF=d_.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),vF=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(mF,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(cF(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(hI?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),yF=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],w1=1e-4,Rr=1e-7,hg=1e-9,E1=Math.pow(10,10),e2=-E1,bF={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},h_={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},mI={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},vI=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function yh(t,e,n,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=e.gestos[a])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&c!==void 0?c:{},f=u.originalDatas||u.datas,h=f[a]||(f[a]={});return W(W({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:t.originalDatas})}var wu=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),W(W({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function fu(t,e,n,r){var i=t.length===16,a=i?4:3,o=Jl(t,n,r,a),c=K(o,4),u=K(c[0],2),f=u[0],h=u[1],g=K(c[1],2),m=g[0],x=g[1],_=K(c[2],2),E=_[0],S=_[1],T=K(c[3],2),D=T[0],k=T[1],j=K(sn(t,e,a),2),B=j[0],z=j[1],C=Math.min(f,m,E,D),A=Math.min(h,x,S,k),N=Math.max(f,m,E,D),O=Math.max(h,x,S,k);f=f-C||0,m=m-C||0,E=E-C||0,D=D-C||0,h=h-A||0,x=x-A||0,S=S-A||0,k=k-A||0,B=B-C||0,z=z-A||0;var L=t[0],V=t[a+1],M=Tr(L*V);return{left:C,top:A,right:N,bottom:O,origin:[B,z],pos1:[f,h],pos2:[m,x],pos3:[E,S],pos4:[D,k],direction:M}}function yI(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,f=a.pos1,h=o.left,g=o.top,m=u?4:3,x=K(Fe(Tu(c,[n-h,r-g],m),f),2),_=x[0],E=x[1],S=K(Ba({datas:i,distX:_,distY:E}),2),T=S[0],D=S[1];return[T,D]}function Zl(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,f=r.origin,h=r.offsetMatrix,g=r.targetMatrix,m=r.transformOrigin,x=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=g,n.beforeMatrix=a,n.offsetMatrix=h,n.transformOrigin=m,n.inverseMatrix=Oa(i,x),n.inverseBeforeMatrix=Oa(a,x),n.absoluteOrigin=Ul(St([c,u],f),x),n.startDragBeforeDist=xr(n.inverseBeforeMatrix,n.absoluteOrigin,x),n.startDragDist=xr(n.inverseMatrix,n.absoluteOrigin,x)}function xF(t){return fu(t.datas.beforeTransform,[50,50],100,100).direction}function t0(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,f=-1;a===-1?(n==="translate"?f=0:n==="rotate"&&(f=_s(o,function(x){return x.match(/scale\(/g)})),f===-1&&(f=o.length),r.transformIndex=f):Hr(u,function(x){return x.index===a&&x.functionName===n})?f=a:f=a+u.filter(function(x){return x.index<a}).length;var h=$7(o,t.state,f),g=h.targetFunction,m=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,g.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>f&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Se(Se([],K(u),!1),[{functionName:n,index:f,isAppend:!0}],!1))}function n0(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function _F(t){var e=t.datas,n=t.distX,r=t.distY,i=K(xI({datas:e,distX:n,distY:r}),2),a=i[0],o=i[1],c=bI(e,T8([a,o],4));return xr(c,Ul([0,0,0],4),4)}function bI(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,c=t.targetAllTransform,u=n?$t(c,e,4):$t(e,c,4),f=$t(Oa(n?a:r,4),u,4),h=$t(f,Oa(n?o:i,4),4);return h}function xI(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,c=e.absoluteOrigin,u=a?4:3;return Fe(xr(i,St(c,[n,r]),u),o)}function Ba(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,c=n.is3d,u=n.startDragBeforeDist,f=n.startDragDist,h=n.absoluteOrigin,g=c?4:3;return Fe(xr(e?a:o,St(h,[r,i]),g),e?u:f)}function wF(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,o=n.is3d;n.startDragBeforeDist;var c=n.startDragDist,u=n.absoluteOrigin,f=o?4:3;return Fe(xr(a,St(c,[r,i]),f),u)}function EF(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(o,c){var u=uh(o),f=u.value,h=u.unit,g=c?i:r,m=c?n:e;if(o==="%"||isNaN(f)){var x=g?a[c]/g:0;return m*x}else if(h!=="%")return f;return m*f/100}):a}function _I(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function SF(t,e){return _I(e).map(function(n){return t[n]})}function ab(t,e){var n=(e+1)/2;return[sm(t[0][0],t[1][0],n,1-n),sm(t[0][1],t[1][1],n,1-n)]}function Hn(t,e){var n=ab([t[0],t[1]],e[0]),r=ab([t[2],t[3]],e[0]);return ab([n,r],e[1])}function TF(t,e,n,r,i,a){var o=Jl(e,n,r,i),c=Hn(o,a),u=t[0]-c[0],f=t[1]-c[1];return[u,f]}function bh(t,e,n,r){return $t(t,wf(e,r,n),r)}function AF(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,c=o?4:3,u;if(qr(n)){var f=e.beforeTransform,h=e.afterTransform;r?u=ea(Gf(n),4,c):u=ea($t($t(f,Gf([n]),4),h,4),4,c)}else u=n;return bh(a,u,i,c)}function CF(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,c=i?4:3;return bh(r,$t(o||a,l_(e,c),c),n,c)}function r0(t,e){var n=qu(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=Ln(r)?r:Io(r),S1(t,e,i)},setTransformIndex:function(r){S1(t,e,r)}}}function i0(t,e,n){var r=qu(e),i=r.startTransforms;S1(t,e,_s(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function S1(t,e,n){var r=qu(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var o=t.state,c=_u([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function p_(t,e){var n=qu(t);n.nextTransforms=Io(e)}function qu(t){return t.originalDatas.beforeRenderable}function um(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function pg(t){return(um(t)||[]).join(" ")}function gg(t){return qu(t).nextStyle}function wI(t,e,n,r,i){p_(i,e);var a=Sr.drag(t,yh(i,t.state,n,r)),o=a?a.transform:e;return W(W({transform:e,drag:a},Cr({transform:o},i)),{afterTransform:o})}function g_(t,e,n,r,i,a){var o=AF(t.state,i,e,a),c=kF(t,n,r,o);return c}function EI(t,e,n,r,i,a,o){var c=g_(t,e,n,i,a,o),u=t.state,f=u.left,h=u.top,g=t.props.groupable,m=g?f:0,x=g?h:0,_=Fe(r,c);return Fe(_,[m,x])}function RF(t,e,n,r,i,a,o){var c=EI(t,e,n,r,i,a,o);return c}function DF(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function kF(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,f=[a/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return sn(r,f,u)}function NF(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return EI(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function IF(t,e,n,r,i,a){var o=t.props.groupable,c=t.state,u=c.transformOrigin,f=c.offsetMatrix,h=c.is3d,g=c.width,m=c.height,x=c.left,_=c.top,E=a.fixedDirection,S=a.nextTargetMatrix||c.targetMatrix,T=h?4:3,D=EF(i,e,n,g,m,u),k=o?x:0,j=o?_:0,B=bh(f,S,D,T),z=TF(r,B,e,n,T,E);return Fe(z,[k,j])}function MF(t,e){return Hn(Ni(t.state),e)}function OF(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function PF(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function jF(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function SI(t,e,n){for(var r=t,i=[],a=t_(t)||qo(t),o=!n&&t===e||t===a,c=o,u=!1,f=3,h,g,m,x=!1,_=Hf(e,e,!0).offsetParent,E=1;r&&!c;){c=o;var S=$r(r),T=S("position"),D=XI(r),k=T==="fixed",j=jF(S),B=A8(M7(D)),z=void 0,C=!1,A=!1,N=0,O=0,L=0,V=0,M={hasTransform:!1,fixedContainer:null};k&&(x=!0,M=z7(r),_=M.fixedContainer);var J=B.length;!u&&(J===16||j.length)&&(u=!0,f=4,k1(i),m&&(m=ea(m,3,4))),u&&J===9&&(B=ea(B,3,4));var Q=V7(r,t),$=Q.tagName,H=Q.hasOffset,ee=Q.isSVG,te=Q.origin,ue=Q.targetOrigin,U=Q.offset,Y=K(U,2),ne=Y[0],ae=Y[1];$==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:L7(r,f)}),i.push({type:"offset",target:r,matrix:Jt(f)}));var he=parseFloat(S("zoom"))||1;if(k)z=M.fixedContainer,C=!0;else{var ie=Hf(r,e,!1,!0,S),me=ie.offsetZoom;if(z=ie.offsetParent,C=ie.isEnd,A=ie.isStatic,E*=me,(ie.isCustomElement||me!==1)&&A)ne-=z.offsetLeft,ae-=z.offsetTop;else if(pF||hF){var Te=ie.parentSlotElement;if(Te){for(var Ae=z,De=0,be=0;Ae&&PF(Ae);)De+=Ae.offsetLeft,be+=Ae.offsetTop,Ae=Ae.offsetParent;ne-=De,ae-=be}}}if(fI&&!gF&&H&&!ee&&A&&(T==="relative"||T==="static")&&(ne-=z.offsetLeft,ae-=z.offsetTop,o=o||C),k)H&&M.hasTransform&&(L=z.clientLeft,V=z.clientTop);else if(H&&_!==z&&(N=z.clientLeft,O=z.clientTop),H&&z===a){var Ee=WI(r,!1);ne+=Ee[0],ae+=Ee[1]}if(i.push({type:"target",target:r,matrix:wf(B,f,te)}),j.length&&(i.push({type:"offset",target:r,matrix:Jt(f)}),i.push({type:"target",target:r,matrix:wf(Gf(j),f,te)})),H){var $e=r===t,Pe=$e?0:r.scrollLeft,ze=$e?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Fl([ne-Pe+N-L,ae-ze+O-V],f)})}else i.push({type:"offset",target:r,origin:te});if(he!==1&&i.push({type:"zoom",target:r,matrix:wf(l_([he,he],f),f,[0,0])}),m||(m=B),h||(h=te),g||(g=ue),c||k)break;r=z,o=C,(!n||r===a)&&(c=o)}return m||(m=Jt(f)),h||(h=[0,0]),g||(g=[0,0]),{zoom:E,offsetContainer:_,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:g,is3d:u,hasFixed:x}}var Sl=null,Tl=null,iu=null;function Eu(t){t?(window.Map&&(Sl=new Map,Tl=new Map),iu=[]):(Sl=null,iu=null,Tl=null)}function VF(t){var e=Tl?.get(t);if(e)return e;var n=Ef(t,!0);return Tl&&Tl.set(t,n),n}function zF(t,e){if(iu){var n=Hr(iu,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=SI(t,e,!0);return iu&&iu.push([[t,e],r]),r}function $r(t){var e=Sl?.get(t);if(!e){var n=Eo(t).getComputedStyle(t);if(!Sl)return function(a){return n[a]};e={style:n,cached:{}},Sl.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function Zi(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][e]=a[c][e]||{},W(W({},n),{isRequestChild:!0,datas:a[c][e],originalDatas:a[c]})})}function sb(t,e,n,r,i,a,o){var c=!!n.match(/Start$/g),u=!!n.match(/End$/g),f=i.isPinch,h=i.datas,g=Zi(t,e.name,i),m=t.moveables,x=[],_=g.map(function(E,S){var T=m[S],D=T.state,k=D.gestos,j=E;if(c)j=new wu(o).dragStart(r,E),x.push(j);else{if(k[o]||(k[o]=h.childGestos[S]),!k[o])return;j=yh(E,D,r,f,a,o),x.push(j)}var B=e[n](T,W(W({},j),{parentFlag:!0}));return u&&(k[o]=null),B});return c&&(h.childGestos=m.map(function(E){return E.state.gestos[o]})),{eventParams:_,childEvents:x}}function gs(t,e,n,r,i,a){i===void 0&&(i=function(h,g){return g});var o=!!n.match(/End$/g),c=Zi(t,e.name,r),u=t.moveables,f=c.map(function(h,g){var m=u[g],x=h;x=i(m,h);var _=e[n](m,W(W({},x),{parentFlag:!0}));return o&&(m.state.gestos={}),_});return f}function dm(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,o=r.datas.startPositions||Ni(e.state),c=Hn(o,i),u=K(xr(gh(-t.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),f=u[0],h=u[1];return r.datas.originalX=f,r.datas.originalY=h,r}function TI(t,e,n,r){var i=t.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=ql(t.props,e).zoom,f=_f(o/Math.PI*180),h={},g=t.renderState;g.renderDirectionMap||(g.renderDirectionMap={});var m=g.renderDirectionMap;n.forEach(function(_){var E=_.dir;h[E]=!0});var x=Tr(c);return n.map(function(_){var E=_.data,S=_.classNames,T=_.dir,D=h_[T];if(!D||!h[T])return null;m[T]=!0;var k=(rt(f,15)+x*mI[T]+720)%180,j={};return ws(E).forEach(function(B){j["data-".concat(B)]=E[B]}),r.createElement("div",W({className:Be.apply(void 0,Se(["control","direction",T,e],K(S),!1)),"data-rotation":k,"data-direction":T},j,{key:"direction-".concat(T),style:gm.apply(void 0,Se([o,u],K(D.map(function(B){return a[B]})),!1))}))})}function AI(t,e,n,r){var i=ql(t.props,n),a=i.renderDirections,o=a===void 0?e:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?d_:o;return Se(Se([],K(c?kI(t,r,n,u):[]),!1),K(TI(t,n,u.map(function(f){return{data:{},classNames:[],dir:f}}),r)),!1)}function qf(t,e,n,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=Sn(n,r),f=e?rt(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Be.apply(void 0,Se(["line","direction",e?"edge":"",e],K(o),!1)),"data-rotation":f,"data-line-key":a,"data-direction":e,style:of(n,r,i,u)})}function CI(t,e,n,r,i){var a=n===!0?oF:n;return a.map(function(o,c){var u=K(h_[o],2),f=u[0],h=u[1];if(h!=null)return qf(t,o,r[f],r[h],i,"".concat(e,"Edge").concat(c),e)}).filter(Boolean)}function RI(t){return function(e,n){var r=ql(e.props,t).edge;return r&&(r===!0||r.length)?Se(Se([],K(CI(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),K(LF(e,t,n)),!1):DI(e,t,n)}}function DI(t,e,n){return AI(t,d_,e,n)}function LF(t,e,n){return AI(t,["nw","ne","sw","se"],e,n)}function kI(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,f=i.renderDirectionMap,h=t.props.zoom,g=Tr(u),m=c/Math.PI*180;return(r||ws(f)).map(function(x){var _=h_[x];if(!_)return null;var E=(rt(m,15)+g*mI[x]+720)%180,S=["around-control"];return n&&S.push("direction",n),e.createElement("div",{className:Be.apply(void 0,Se([],K(S),!1)),"data-rotation":E,"data-direction":x,key:"direction-around-".concat(x),style:gm.apply(void 0,Se([c,h],K(_.map(function(T){return o[T]})),!1))})})}function m_(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,f=u===void 0?-1/0:u,h=r.right,g=h===void 0?1/0:h,m=r.bottom,x=m===void 0?1/0:m,_={position:a,left:c,top:f,right:g,bottom:x};return{vertical:t2(_,e,!0),horizontal:t2(_,n,!1)}}function a0(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=n.snapOffset,f=u.left,h=u.top,g=u.right,m=u.bottom,x=e||t.props.bounds||{},_=x.position||"client",E=_==="css",S=x.left,T=S===void 0?-1/0:S,D=x.top,k=D===void 0?-1/0:D,j=x.right,B=j===void 0?E?-1/0:1/0:j,z=x.bottom,C=z===void 0?E?-1/0:1/0:z;return E&&(B=a+g-f-B,C=i+m-h-C),{left:T+f-o,right:B+f-o,top:k+h-c,bottom:C+h-c}}function BF(t,e,n){var r=a0(t),i=r.left,a=r.top,o=r.right,c=r.bottom,u=K(n,2),f=u[0],h=u[1],g=K(Fe(n,e),2),m=g[0],x=g[1];_e(m)<Rr&&(m=0),_e(x)<Rr&&(x=0);var _=x>0,E=m>0,S={isBound:!1,offset:0,pos:0},T={isBound:!1,offset:0,pos:0};if(m===0&&x===0)return{vertical:S,horizontal:T};if(m===0)_?c<h&&(T.pos=c,T.offset=h-c):a>h&&(T.pos=a,T.offset=h-a);else if(x===0)E?o<f&&(S.pos=o,S.offset=f-o):i>f&&(S.pos=i,S.offset=f-i);else{var D=x/m,k=n[1]-D*f,j=0,B=0,z=!1;E&&o<=f?(j=D*o+k,B=o,z=!0):!E&&f<=i&&(j=D*i+k,B=i,z=!0),z&&(j<a||j>c)&&(z=!1),z||(_&&c<=h?(j=c,B=(j-k)/D,z=!0):!_&&h<=a&&(j=a,B=(j-k)/D,z=!0)),z&&(S.isBound=!0,S.pos=B,S.offset=f-B,T.isBound=!0,T.pos=j,T.offset=h-j)}return{vertical:S,horizontal:T}}function t2(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Se([],K(e),!1)),o=Math.max.apply(Math,Se([],K(e),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,f){return _e(f.offset)-_e(u.offset)})}function n2(t,e,n){var r=n?t.map(function(i){return ph(i,n)}):t;return r.some(function(i){return i[0]<e.left&&_e(i[0]-e.left)>.1||i[0]>e.right&&_e(i[0]-e.right)>.1||i[1]<e.top&&_e(i[1]-e.top)>.1||i[1]>e.bottom&&_e(i[1]-e.bottom)>.1})}function UF(t,e,n){var r=ki(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return _e(a-t[n?0:1])-_e(o-t[n?0:1])}).map(function(a){return Sn([0,0],n?[a,e]:[e,a])})}function FF(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=a0(t),c=o.left,u=o.top,f=o.right,h=o.bottom,g=c-r[0],m=f-r[0],x=u-r[1],_=h-r[1],E={left:g,top:x,right:m,bottom:_};if(!n2(n,E,0))return[];var S=[];return[[g,0],[m,0],[x,1],[_,1]].forEach(function(T){var D=K(T,2),k=D[0],j=D[1];n.forEach(function(B){var z=Sn([0,0],B);S.push.apply(S,Se([],K(UF(B,k,j).map(function(C){return a+C-z}).filter(function(C){return!n2(e,E,C)}).map(function(C){return rt(C*180/Math.PI,Rr)})),!1))})}),S}var GF=["left","right","center"],qF=["top","bottom","middle"],r2={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Mo={start:"left",end:"right",center:"center"},Oo={start:"top",end:"bottom",center:"middle"};function au(){return{left:!1,top:!1,right:!1,bottom:!1}}function Hu(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,c=n.horizontalGuidelines,u=n.snapGridWidth,f=n.snapGridHeight,h=t.state,g=h.guidelines,m=h.enableSnap;return!r||!m||e&&r!==!0&&r.indexOf(e)<0?!1:!!(u||f||i||a||g&&g.length||o&&o.length||c&&c.length)}function v_(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function HF(t,e){var n=v_(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function y_(t,e){var n=HF(t,e),r=qF.filter(function(a){return a in n}),i=GF.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function $F(t,e,n){var r=sn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function YF(t){var e=K(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<jn&&(i=0),Math.abs(a)<jn&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*n[0]-n[1]):(c=1,u=-n[1]):(o=-1,u=n[0]),[o,c,u].map(function(f){return rt(f,jn)})}var NI="snapRotationThreshold",II="snapRotationDegrees",MI="snapHorizontalThreshold",OI="snapVerticalThreshold";function s0(t,e,n,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=t.props,f=((c=t.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=y2(o,u[MI],5),g=y2(a,u[OI],5);return PI(t.state.guidelines,e,n,r,i,h,g,f)}function PI(t,e,n,r,i,a,o,c){return{vertical:a2(t,"vertical",e,o*c[0],r),horizontal:a2(t,"horizontal",n,a*c[1],i)}}function XF(t,e,n){var r=K(n,2),i=r[0],a=r[1],o=K(e,2),c=o[0],u=o[1],f=K(Fe(n,e),2),h=f[0],g=f[1],m=g>0,x=h>0;h=mm(h),g=mm(g);var _={isSnap:!1,offset:0,pos:0},E={isSnap:!1,offset:0,pos:0};if(h===0&&g===0)return{vertical:_,horizontal:E};var S=s0(t,h?[i]:[],g?[a]:[],[],[],void 0,void 0),T=S.vertical,D=S.horizontal;T.posInfos.filter(function($){var H=$.pos;return x?H>=c:H<=c}),D.posInfos.filter(function($){var H=$.pos;return m?H>=u:H<=u}),T.isSnap=T.posInfos.length>0,D.isSnap=D.posInfos.length>0;var k=T1(T),j=k.isSnap,B=k.guideline,z=T1(D),C=z.isSnap,A=z.guideline,N=C?A.pos[1]:0,O=j?B.pos[0]:0;if(h===0)C&&(E.isSnap=!0,E.pos=A.pos[1],E.offset=a-E.pos);else if(g===0)j&&(_.isSnap=!0,_.pos=O,_.offset=i-O);else{var L=g/h,V=n[1]-L*i,M=0,J=0,Q=!1;j?(J=O,M=L*J+V,Q=!0):C&&(M=N,J=(M-V)/L,Q=!0),Q&&(_.isSnap=!0,_.pos=J,_.offset=i-J,E.isSnap=!0,E.pos=M,E.offset=a-M)}return{vertical:_,horizontal:E}}function xo(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function i2(t,e,n,r){var i=y_(t.props.snapDirections,e),a=s0(t,i.vertical,i.horizontal,i.verticalNames.map(function(u){return xo(u)}),i.horizontalNames.map(function(u){return xo(u)}),n,r),o=xo(i.horizontalNames[a.horizontal.index]),c=xo(i.verticalNames[a.vertical.index]);return{vertical:W(W({},a.vertical),{direction:c}),horizontal:W(W({},a.horizontal),{direction:o})}}function T1(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:o}}function a2(t,e,n,r,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=e==="vertical",u=c?0:1,f=n.map(function(g,m){var x=i[m]||"",_=t.map(function(E){var S=E.pos,T=g-S[u];return{offset:T,dist:_e(T),guideline:E,direction:x}}).filter(function(E){var S=E.guideline,T=E.dist,D=S.type;return!(D!==e||T>r)}).sort(function(E,S){return E.dist-S.dist});return{pos:g,index:m,guidelineInfos:_,direction:x}}).filter(function(g){return g.guidelineInfos.length>0}).sort(function(g,m){return g.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=f.length>0;return{isSnap:h,index:h?f[0].index:-1,direction:(o=(a=f[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:f}}function WF(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,x,_){var E=_[x+1]||_[0];a.push(m),a.push([(m[0]+E[0])/2,(m[1]+E[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Se([],K(SF([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return Hn(e,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),f=s0(t,c,u,a.map(function(m){return xo(m[0])}),a.map(function(m){return xo(m[1])}),r,i),h=xo(a.map(function(m){return m[0]})[f.vertical.index]),g=xo(a.map(function(m){return m[1]})[f.horizontal.index]);return{vertical:W(W({},f.vertical),{direction:h}),horizontal:W(W({},f.horizontal),{direction:g})}}function jI(t,e){var n=_e(t.offset),r=_e(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Rr?1:r<Rr?-1:n-r}function fm(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],o=n.offset[e],c=r.offset[e];if(i){if(!a)return-1}else return 1;return jI({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function KF(t,e,n){var r=[];if(n)_e(e[0])!==1||_e(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];e[0]===u[0]&&e[1]===u[1]||r.push([e,u])})})}else if(t[0]){var a=_e(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var a=_e(e[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,e[1]],[-1,c*t[1]]],[[0,e[1]],[0,c*t[1]]],[[1,e[1]],[1,c*t[1]]])})}return r}function VI(t,e){var n=u1([e[0][0],e[1][0]]),r=u1([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function b_(t,e){var n=K(e,2),r=n[0],i=n[1],a=i[0]-r[0],o=i[1]-r[1];_e(a)<Rr&&(a=0),_e(o)<Rr&&(o=0);var c,u;if(!a)c=r[0],u=t[0];else if(!o)c=r[1],u=t[1];else{var f=o/a;c=f*(t[0]-r[0])+r[1],u=t[1]}return c-u}function zI(t,e,n,r){return r===void 0&&(r=Rr),t.every(function(i){var a=b_(i,e),o=a<=0;return o===n||_e(a)<=r})}function s2(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function QF(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,c=t.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,f=c.top,h=c.width,g=c.height,m=[[u,f],[u,f+g]],x=[[u,f],[u+h,f]],_=[[u+h,f],[u+h,f+g]],E=[[u,f+g],[u+h,f+g]];if(zI([[u,f],[u+h,f],[u,f+g],[u+h,f+g]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var S=_o(n,o,x,i),T=_o(n,o,E,i),D=_o(n,o,m,a),k=_o(n,o,_,a),j=S.isBound&&T.isBound,B=S.isBound||T.isBound,z=D.isBound&&k.isBound,C=D.isBound||k.isBound,A=Su(S.offset,T.offset),N=Su(D.offset,k.offset),O=[0,0],L=!1,V=!1;return _e(N)<_e(A)?(O=[A,0],L=B,V=j):(O=[0,N],L=C,V=z),{isAllBound:V,isVerticalBound:B,isHorizontalBound:C,isBound:L,offset:O}}function _o(t,e,n,r,i,a){var o=K(e,2),c=o[0],u=o[1],f=t[0],h=n[0],g=n[1],m=mm(g[1]-h[1]),x=mm(g[0]-h[0]),_=u,E=c,S=-c/u;if(x){if(!m){if(a&&!_)return{isBound:!1,offset:0};if(E){var j=(h[1]-f[1])/S+f[0];return s2(j,h[0],g[0],r,i)}else{var D=h[1]-f[1],k=_e(D)<=(i||0);return{isBound:k,offset:k?D:0}}}}else{if(a&&!E)return{isBound:!1,offset:0};if(_){var T=S*(h[0]-f[0])+f[1];return s2(T,h[1],g[1],r,i)}else{var D=h[0]-f[0],k=_e(D)<=(i||0);return{isBound:k,offset:k?D:0}}}return{isBound:!1,offset:0}}function LI(t,e,n){return e.map(function(r){var i=QF(t,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,f=r.multiple,h=Ba({datas:n,distX:o[0],distY:o[1]}).map(function(g,m){return g*(f[m]?2/f[m]:0)});return{sign:f,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function ZF(t,e,n){var r,i=x_(t,e,[0,0],!1).map(function(m){return W(W({},m),{multiple:m.multiple.map(function(x){return _e(x)*2})})}),a=LI(t,i,n),o=fm(a,0),c=fm(a,1),u=0,f=0,h=o.isVerticalBound||c.isVerticalBound,g=o.isHorizontalBound||c.isHorizontalBound;return(h||g)&&(r=K(wF({datas:n,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],f=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:g,offset:f}}}function JF(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function x_(t,e,n,r){var i=t.state,a=i.allMatrix,o=i.is3d,c=Jl(a,100,100,o?4:3),u=Hn(c,[0,0]);return JF(n,r).map(function(f){var h=K(f,3),g=h[0],m=h[1],x=h[2],_=[Hn(c,m),Hn(c,x)],E=YF(_),S=VI(u,_),T=S.vertical,D=S.horizontal,k=b_(u,_)<=0;return{multiple:g,centerSign:k,verticalSign:T,horizontalSign:D,lineConstants:E,line:[Hn(e,m),Hn(e,x)]}})}function o2(t,e,n,r){var i=r?t.map(function(a){return ph(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=b_(n,a)<=0;return!zI(e,a,o)})}function e7(t){var e=K(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return _e(n[0]);if(!a)return _e(n[1]);var o=a/i;return _e((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function t7(t){var e=K(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var o=a/i,c=-o*n[0]+n[1];return[-c/(o+1/o),c/(o*o+1)]}function n7(t,e,n,r,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,f=a.width,h=a.height,g=c-r[0],m=c+f-r[0],x=u-r[1],_=u+h-r[1],E=[[g,x],[m,x],[g,_],[m,_]],S=Hn(n,[0,0]);if(!o2(n,E,S,0))return[];var T=[],D=E.map(function(k){return[ki(k),Sn([0,0],k)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(k){var j=Sn([0,0],t7(k)),B=e7(k);T.push.apply(T,Se([],K(D.filter(function(z){var C=K(z,1),A=C[0];return A&&B<=A}).map(function(z){var C=K(z,2),A=C[0],N=C[1],O=Math.acos(A?B/A:0),L=N+O,V=N-O;return[o+L-j,o+V-j]}).reduce(function(z,C){return z.push.apply(z,Se([],K(C),!1)),z},[]).filter(function(z){return!o2(e,E,S,z)}).map(function(z){return rt(z*180/Math.PI,Rr)})),!1))}),T}function r7(t){var e=t.props.innerBounds,n=au();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],f=Hn(u,[0,0]),h=e.left,g=e.top,m=e.width,x=e.height,_=[[h,g],[h,g+x]],E=[[h,g],[h+m,g]],S=[[h+m,g],[h+m,g+x]],T=[[h,g+x],[h+m,g+x]],D=x_(t,u,[0,0],!1),k=[],j=[];return D.forEach(function(B){var z=B.line,C=B.lineConstants,A=VI(f,z),N=A.horizontal,O=A.vertical,L=_o(z,C,E,O,1,!0),V=_o(z,C,T,O,1,!0),M=_o(z,C,_,N,1,!0),J=_o(z,C,S,N,1,!0);L.isBound&&!n.top&&(k.push(g),n.top=!0),V.isBound&&!n.bottom&&(k.push(g+x),n.bottom=!0),M.isBound&&!n.left&&(j.push(h),n.left=!0),J.isBound&&!n.right&&(j.push(h+m),n.right=!0)}),{boundMap:n,horizontal:k,vertical:j}}function i7(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(_e(i)<jn&&(i=0),_e(a)<jn&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,c=t[1]-o*t[0];if(r){var u=o*(e[0]+n)+c;return[n,u-e[1]]}else{var f=(e[1]+n-c)/o;return[f-e[0],n]}}function A1(t,e,n,r,i){var a=i7(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=ps(t,e),c=ps(a,t),u=ps(a,e),f=c>o||u>o,h=K(Ba({datas:i,distX:a[0],distY:a[1]}),2),g=h[0],m=h[1];return{offset:[g,m],isOutside:f}}function hm(t,e){return t.isBound?t.offset:e.isSnap?T1(e).offset:0}function a7(t,e,n,r,i){var a=K(e,2),o=a[0],c=a[1],u=K(n,2),f=u[0],h=u[1],g=K(r,2),m=g[0],x=g[1],_=K(i,2),E=_[0],S=_[1],T=-E,D=-S;if(t&&o&&c){T=0,D=0;var k=[];if(f&&h?k.push([0,S],[E,0]):f?k.push([E,0]):h?k.push([0,S]):m&&x?k.push([0,S],[E,0]):m?k.push([E,0]):x&&k.push([0,S]),k.length){k.sort(function(C,A){return ki(Fe([o,c],C))-ki(Fe([o,c],A))});var j=k[0];if(j[0]&&_e(o)>jn)T=-j[0],D=c*_e(o+T)/_e(o)-c;else if(j[1]&&_e(c)>jn){var B=c;D=-j[1],T=o*_e(c+D)/_e(B)-o}if(t&&h&&f)if(_e(T)>jn&&_e(T)<_e(E)){var z=_e(E)/_e(T);T*=z,D*=z}else if(_e(D)>jn&&_e(D)<_e(S)){var z=_e(S)/_e(D);T*=z,D*=z}else T=Su(-E,T),D=Su(-S,D)}}else T=o||f?-E:0,D=c||h?-S:0;return[T,D]}function s7(t,e,n,r,i,a){if(!Hu(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=E_(a.absolutePoses,[e,n]),c=Ci(o),u=c.left,f=c.right,h=c.top,g=c.bottom,m={horizontal:o.map(function(J){return J[1]}),vertical:o.map(function(J){return J[0]})},x=v_(t.props.snapDirections),_=y_(x,{left:u,right:f,top:h,bottom:g,center:(u+f)/2,middle:(h+g)/2}),E=o0(t,i,_,m),S=E.vertical,T=E.horizontal,D=ZF(t,o,a),k=D.vertical,j=D.horizontal,B=S.isSnap,z=T.isSnap,C=S.isBound||k.isBound,A=T.isBound||j.isBound,N=Su(S.offset,k.offset),O=Su(T.offset,j.offset),L=K(a7(r,[e,n],[C,A],[B,z],[N,O]),2),V=L[0],M=L[1];return[{isBound:C,isSnap:B,offset:V},{isBound:A,isSnap:z,offset:M}]}function o0(t,e,n,r){r===void 0&&(r=n);var i=m_(a0(t),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:s0(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,f=c.vertical,h=hm(a[0],u),g=hm(o[0],f),m=_e(h),x=_e(g);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:g,dist:x,bounds:o,snap:f}}}function l2(t,e,n,r,i,a,o){o===void 0&&(o=[1,1]);var c=m_(e,n,r),u=c.horizontal,f=c.vertical,h=PI(t,n,r,[],[],i,a,o),g=h.horizontal,m=h.vertical,x=hm(u[0],g),_=hm(f[0],m),E=_e(x),S=_e(_);return{horizontal:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:x,dist:E,bounds:u,snap:g},vertical:{isBound:f[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:_,dist:S,bounds:f,snap:m}}}function o7(t,e,n,r){var i=Sn(t,e)/Math.PI*180,a=n.vertical,o=a.isBound,c=a.isSnap,u=a.dist,f=n.horizontal,h=f.isBound,g=f.isSnap,m=f.dist,x=i%180,_=x<3||x>177,E=x>87&&x<93;return m<u&&(o||c&&!E&&(!r||!_))?"vertical":h||g&&!_&&(!r||!E)?"horizontal":""}function l7(t,e,n,r,i,a){return n.map(function(o){var c=K(o,2),u=c[0],f=c[1],h=Hn(e,u),g=Hn(e,f),m=r?c7(t,h,g,i):o0(t,i,{vertical:[g[0]],horizontal:[g[1]]}),x=m.horizontal,_=x.offset,E=x.isBound,S=x.isSnap,T=m.vertical,D=T.offset,k=T.isBound,j=T.isSnap,B=Fe(f,u);if(!D&&!_)return{isBound:k||E,isSnap:j||S,sign:B,offset:[0,0]};var z=o7(h,g,m,r);if(!z)return{sign:B,isBound:!1,isSnap:!1,offset:[0,0]};var C=z==="vertical",A=[0,0];return!r&&_e(f[0])===1&&_e(f[1])===1&&u[0]!==f[0]&&u[1]!==f[1]?A=Ba({datas:a,distX:-D,distY:-_}):A=A1(h,g,-(C?D:_),C,a).offset,A=A.map(function(N,O){return N*(B[O]?2/B[O]:0)}),{sign:B,isBound:C?k:E,isSnap:C?j:S,offset:A}})}function c2(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function c7(t,e,n,r){var i=BF(t,e,n),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:XF(t,e,n),u=c.horizontal,f=c.vertical,h=c2(a,u),g=c2(o,f),m=_e(h),x=_e(g);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:f.isSnap,offset:g,dist:x}}}function u7(t,e,n,r,i){var a=[-n[0],-n[1]],o=t.state,c=o.width,u=o.height,f=t.props.bounds,h=1/0,g=1/0;if(f){var m=[[n[0],-n[1]],[-n[0],n[1]]],x=f.left,_=x===void 0?-1/0:x,E=f.top,S=E===void 0?-1/0:E,T=f.right,D=T===void 0?1/0:T,k=f.bottom,j=k===void 0?1/0:k;m.forEach(function(B){var z=B[0]!==a[0],C=B[1]!==a[1],A=Hn(e,B),N=Sn(r,A)*360/Math.PI;if(C){var O=A.slice();(_e(N-360)<2||_e(N-180)<2)&&(O[1]=r[1]);var L=A1(r,O,(r[1]<A[1]?j:S)-A[1],!1,i),V=K(L.offset,2),M=V[1],J=L.isOutside;isNaN(M)||(g=u+(J?1:-1)*_e(M))}if(z){var O=A.slice();(_e(N-90)<2||_e(N-270)<2)&&(O[0]=r[0]);var Q=A1(r,O,(r[0]<A[0]?D:_)-A[0],!0,i),$=K(Q.offset,1),H=$[0],ee=Q.isOutside;isNaN(H)||(h=c+(ee?1:-1)*_e(H))}})}return{maxWidth:h,maxHeight:g}}var Sr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,o=t.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var f=c.dist;if(!f[0]&&!f[1])return[];var h=ki(f),g=Sn(f,[0,0]);return[e.createElement("div",{className:Be("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(g,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(c.left||"")||0,n.top=parseFloat(c.top||"")||0,n.bottom=parseFloat(c.bottom||"")||0,n.right=parseFloat(c.right||"")||0,n.startValue=[0,0],Zl(t,e),i0(t,e,"translate"),D7(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var u=ct(t,e,W({set:function(h){n.startValue=h}},r0(t,e))),f=r||Ne(t,"onDragStart",u);return f!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?u:!1},drag:function(t,e){if(e){t0(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,c=e.useSnap,u=e.isRequest,f=e.isGroup,h=e.parentThrottleDrag,g=e.distX,m=e.distY,x=n.isDrag,_=n.prevDist,E=n.prevBeforeDist,S=n.startValue;if(x){o&&(g+=o[0],m+=o[1]);var T=t.props,D=T.parentMoveable,k=f?0:T.throttleDrag||h||0,j=r?0:T.throttleDragRotate||0,B=0,z=!1,C=!1,A=!1,N=!1;if(!r&&j>0&&(g||m)){var O=T.startDragRotate||0,L=rt(O+Sn([0,0],[g,m])*180/Math.PI,j)-O,V=m*Math.abs(Math.cos((L-90)/180*Math.PI)),M=g*Math.abs(Math.cos(L/180*Math.PI)),J=ki([M,V]);B=L*Math.PI/180,g=J*Math.cos(B),m=J*Math.sin(B)}if(!a&&!r&&!i){var Q=K(s7(t,g,m,j,!c&&u||o,n),2),$=Q[0],H=Q[1];z=$.isSnap,C=$.isBound,A=H.isSnap,N=H.isBound;var ee=$.offset,te=H.offset;g+=ee,m+=te}var ue=St(xI({datas:n,distX:g,distY:m}),S),U=St(_F({datas:n,distX:g,distY:m}),S);FC(U,Rr),FC(ue,Rr),j||(!z&&!C&&(U[0]=rt(U[0],k),ue[0]=rt(ue[0],k)),!A&&!N&&(U[1]=rt(U[1],k),ue[1]=rt(ue[1],k)));var Y=Fe(ue,S),ne=Fe(U,S),ae=Fe(ne,_),he=Fe(Y,E);n.prevDist=ne,n.prevBeforeDist=Y,n.passDelta=ae,n.passDist=ne;var ie=n.left+Y[0],me=n.top+Y[1],Te=n.right-Y[0],Ae=n.bottom-Y[1],De=n0(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(ne[0],"px, ").concat(ne[1],"px)"));if(p_(e,De),t.state.dragInfo.dist=r?[0,0]:ne,!(!r&&!D&&ae.every(function(ze){return!ze})&&he.some(function(ze){return!ze}))){var be=t.state,Ee=be.width,$e=be.height,Pe=ct(t,e,W({transform:De,dist:ne,delta:ae,translate:U,beforeDist:Y,beforeDelta:he,beforeTranslate:ue,left:ie,top:me,right:Te,bottom:Ae,width:Ee,height:$e,isPinch:a},Cr({transform:De},e)));return!r&&Ne(t,"onDrag",Pe),Pe}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,W(W({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=si(t,e,{});return!n&&Ne(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=this.dragStart(t,e);if(!c)return!1;var u=sb(t,this,"dragStart",[a||0,o||0],e,!1,"draggable"),f=u.childEvents,h=u.eventParams,g=W(W({},c),{targets:t.props.targets,events:h}),m=Ne(t,"onDragGroupStart",g);i.isDrag=m!==!1;var x=(r=(n=f[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[x[0]%1,x[1]%1],i.isDrag?c:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,W(W({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=sb(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=W({targets:t.props.targets,events:a},r);return Ne(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=sb(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ne(t,"onDragGroupEnd",si(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function BI(t,e){var n=Hn(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function d7(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=[i/2*(1+e[0]),a/2*(1+e[1])],u=sn(n,c,o),f=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:f}}function UI(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=DF(e,i,a),u=sn(n,e,o),f=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:f}}var u2=A_("resizable"),C1={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:RI("resizable"),dragControlCondition:u2,viewClassName:T_("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,c=e.parentGesto,u=e.datas,f=e.parentFixedDirection,h=e.parentEvent,g=eM(o,i,r,u),m=t.state,x=m.target,_=m.width,E=m.height,S=m.gestos;if(!g||!x||S.resizable)return!1;S.resizable=c||t.controlGesto,!i&&Zl(t,e),u.datas={},u.direction=g,u.startOffsetWidth=_,u.startOffsetHeight=E,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var T=t.props.transformOrigin||"% %";u.transformOrigin=qr(T)?T.split(" "):T,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!g[0]&&!g[1]||g[0]||!g[1];function D(N){u.ratio=N&&isFinite(N)?N:0}u.startPositions=Ni(t.state);function k(N){var O=BI(u.startPositions,N);u.fixedDirection=O.fixedDirection,u.fixedPosition=O.fixedPosition,u.fixedOffset=O.fixedOffset}function j(N){var O=UI(t.state,N);u.fixedDirection=O.fixedDirection,u.fixedPosition=O.fixedPosition,u.fixedOffset=O.fixedOffset}function B(N){u.minSize=[qt("".concat(N[0]),0)||0,qt("".concat(N[1]),0)||0]}function z(N){var O=[N[0]||1/0,N[1]||1/0];(!xu(O[0])||isFinite(O[0]))&&(O[0]=qt("".concat(O[0]),0)||1/0),(!xu(O[1])||isFinite(O[1]))&&(O[1]=qt("".concat(O[1]),0)||1/0),u.maxSize=O}D(_/E),k(f||[-g[0],-g[1]]),u.setFixedDirection=k,u.setFixedPosition=j,u.setMin=B,u.setMax=z;var C=ct(t,e,{direction:g,startRatio:u.ratio,set:function(N){var O=K(N,2),L=O[0],V=O[1];u.startWidth=L,u.startHeight=V},setMin:B,setMax:z,setRatio:D,setFixedDirection:k,setFixedPosition:j,setOrigin:function(N){u.transformOrigin=N},dragStart:Sr.dragStart(t,new wu().dragStart([0,0],e))}),A=h||Ne(t,"onResizeStart",C);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,A!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:g}),u.isResize?C:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,c=e.dragClient,u=e.parentDist,f=e.useSnap,h=e.isRequest,g=e.isGroup,m=e.parentEvent,x=e.resolveMatrix,_=r.isResize,E=r.transformOrigin,S=r.startWidth,T=r.startHeight,D=r.prevWidth,k=r.prevHeight,j=r.minSize,B=r.maxSize,z=r.ratio,C=r.startOffsetWidth,A=r.startOffsetHeight,N=r.isWidth;if(!_)return;if(x){var O=t.state.is3d,L=r.startOffsetMatrix,V=r.startTransformOrigin,M=O?4:3,J=Gf(um(e)),Q=Math.sqrt(J.length);M!==Q&&(J=ea(J,Q,M));var $=bh(L,J,V,M),H=Jl($,C,A,M);r.startPositions=H,r.nextTargetMatrix=J,r.nextAllMatrix=$}var ee=ql(t.props,"resizable"),te=ee.resizeFormat,ue=ee.throttleResize,U=ue===void 0?i?0:1:ue,Y=ee.parentMoveable,ne=ee.keepRatioFinally,ae=r.direction,he=ae,ie=0,me=0;!ae[0]&&!ae[1]&&(he=[1,1]);var Te=z&&(o??ee.keepRatio)||!1;function Ae(){var ft=r.fixedDirection,Ot=sM(he,Te,r,e);ie=Ot.distWidth,me=Ot.distHeight;var fr=he[0]-ft[0]||Te?Math.max(C+ie,Rr):C,hr=he[1]-ft[1]||Te?Math.max(A+me,Rr):A;return Te&&C&&A&&(N?hr=fr/z:fr=hr*z),[fr,hr]}var De=K(Ae(),2),be=De[0],Ee=De[1];m||(r.setFixedDirection(r.fixedDirection),Ne(t,"onBeforeResize",ct(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(ft){var Ot;return r.setFixedDirection(ft),Ot=K(Ae(),2),be=Ot[0],Ee=Ot[1],[be,Ee]},setFixedPosition:function(ft){var Ot;return r.setFixedPosition(ft),Ot=K(Ae(),2),be=Ot[0],Ee=Ot[1],[be,Ee]},boundingWidth:be,boundingHeight:Ee,setSize:function(ft){var Ot;Ot=K(ft,2),be=Ot[0],Ee=Ot[1]}},!0)));var $e=c;c||(!i&&a?$e=MF(t,[0,0]):$e=r.fixedPosition);var Pe=[0,0];a||(Pe=C7(t,be,Ee,ae,$e,!f&&h,r)),u&&(!u[0]&&(Pe[0]=0),!u[1]&&(Pe[1]=0));function ze(){var ft;te&&(ft=K(te([be,Ee]),2),be=ft[0],Ee=ft[1]),be=rt(be,U),Ee=rt(Ee,U)}if(Te){he[0]&&he[1]&&Pe[0]&&Pe[1]&&(_e(Pe[0])>_e(Pe[1])?Pe[1]=0:Pe[0]=0);var Me=!Pe[0]&&!Pe[1];Me&&ze(),he[0]&&!he[1]||Pe[0]&&!Pe[1]||Me&&N?(be+=Pe[0],Ee=be/z):(!he[0]&&he[1]||!Pe[0]&&Pe[1]||Me&&!N)&&(Ee+=Pe[1],be=Ee*z)}else be+=Pe[0],Ee+=Pe[1],be=Math.max(0,be),Ee=Math.max(0,Ee);n=K(IN([be,Ee],j,B,Te?z:!1),2),be=n[0],Ee=n[1],ze(),Te&&(g||ne)&&(N?Ee=be/z:be=Ee*z),ie=be-C,me=Ee-A;var et=[ie-D,me-k];r.prevWidth=ie,r.prevHeight=me;var dt=IF(t,be,Ee,$e,E,r);if(!(!Y&&et.every(function(ft){return!ft})&&dt.every(function(ft){return!ft}))){var Oe=Sr.drag(t,yh(e,t.state,dt,!!a,!1,"draggable")),qe=Oe.transform,Nt=S+ie,vn=T+me,rn=ct(t,e,W({width:Nt,height:vn,offsetWidth:Math.round(be),offsetHeight:Math.round(Ee),startRatio:z,boundingWidth:be,boundingHeight:Ee,direction:ae,dist:[ie,me],delta:et,isPinch:!!a,drag:Oe},nM({style:{width:"".concat(Nt,"px"),height:"".concat(vn,"px")},transform:qe},Oe,e)));return!m&&Ne(t,"onResize",rn),rn}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,c=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var u=t.state,f=u.width,h=u.height,g=f-(i+o),m=h-(a+c),x=_e(g)>3,_=_e(m)>3;if(x&&(n.startWidth+=g,n.startOffsetWidth+=g,n.prevWidth+=g),_&&(n.startHeight+=m,n.startOffsetHeight+=m,n.prevHeight+=m),x||_)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=si(t,e,{});return!r&&Ne(t,"onResizeEnd",i),i}},dragGroupControlCondition:u2,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,W(W({},e),{isGroup:!0}));if(!r)return!1;var i=Zi(t,"resizable",e),a=n.startOffsetWidth,o=n.startOffsetHeight;function c(){var x=n.minSize;i.forEach(function(_){var E=_.datas,S=E.minSize,T=E.startOffsetWidth,D=E.startOffsetHeight,k=a*(T?S[0]/T:0),j=o*(D?S[1]/D:0);x[0]=Math.max(x[0],k),x[1]=Math.max(x[1],j)})}function u(){var x=n.maxSize;i.forEach(function(_){var E=_.datas,S=E.maxSize,T=E.startOffsetWidth,D=E.startOffsetHeight,k=a*(T?S[0]/T:0),j=o*(D?S[1]/D:0);x[0]=Math.min(x[0],k),x[1]=Math.min(x[1],j)})}var f=gs(t,this,"dragControlStart",e,function(x,_){return dm(t,x,n,_)});c(),u();var h=function(x){r.setFixedDirection(x),f.forEach(function(_,E){_.setFixedDirection(x),dm(t,_.moveable,n,i[E])})};n.setFixedDirection=h;var g=W(W({},r),{targets:t.props.targets,events:f.map(function(x){return W(W({},x),{setMin:function(_){x.setMin(_),c()},setMax:function(_){x.setMax(_),u()}})}),setFixedDirection:h,setMin:function(x){r.setMin(x),c()},setMax:function(x){r.setMax(x),u()}}),m=Ne(t,"onResizeGroupStart",g);return n.isResize=m!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=ql(t.props,"resizable");c0(t,"onBeforeResize",function(x){Ne(t,"onBeforeResizeGroup",ct(t,e,W(W({},x),{targets:r.targets}),!0))});var i=this.dragControl(t,W(W({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,f=[a/(a-c[0]),o/(o-c[1])],h=n.fixedPosition,g=gs(t,this,"dragControl",e,function(x,_){var E=K(xr(gh(t.rotation/180*Math.PI,3),[_.datas.originalX*f[0],_.datas.originalY*f[1],1],3),2),S=E[0],T=E[1];return W(W({},_),{parentDist:null,parentScale:f,dragClient:St(h,[S,T]),parentKeepRatio:u})}),m=W({targets:r.targets,events:g},i);return Ne(t,"onResizeGroup",m),m}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=gs(t,this,"dragControlEnd",e),a=si(t,e,{targets:t.props.targets,events:i});return Ne(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function ob(t,e,n,r,i){var a=t.props.groupable,o=t.state,c=o.is3d?4:3,u=e.origin,f=sn(t.state.rootMatrix,Fe([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=St([i.left,i.top],f);e.startAbsoluteOrigin=h,e.prevDeg=Sn(h,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=ps(h,[n,r])}function Lg(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var c=e*(o*360+t-r);return n.prevDeg=r+c,c}function lb(t,e,n,r){return Lg(Sn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function cb(t,e,n,r,i,a){var o=t.props.throttleRotate,c=o===void 0?0:o,u=n.prevSnapDeg,f=0,h=!1;if(a){var g=A7(t,e,r,i+r);h=g.isSnap,f=i+g.dist}h||(f=rt(i+r,c));var m=f-i;return n.prevSnapDeg=m,[m-u,m,f]}function FI(t,e,n){var r=K(e,4),i=r[0],a=r[1],o=r[2],c=r[3];if(t==="none")return[];if(Ln(t))return t.map(function(S){return FI(S,[i,a,o,c],n)[0]});var u=K((t||"top").split("-"),2),f=u[0],h=u[1],g=[i,a];f==="left"?g=[o,i]:f==="right"?g=[a,c]:f==="bottom"&&(g=[c,o]);var m=[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2],x=ZI(g,n);if(h){var _=h==="top"||h==="left",E=f==="bottom"||f==="left";m=g[_&&!E||!_&&E?0:1]}return[[m,x]]}function R1(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(qn(n,Be("rotation-control"))||t.props.rotateAroundControls&&qn(n,Be("around-control"))||qn(n,Be("control"))&&qn(n,Be("rotatable")))return!0;var r=t.props.rotationTarget;return r?C_(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var f7=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,h7={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[f7],viewClassName:function(t){return t.isDragging("rotatable")?Be("view-rotation-dragging"):""},render:function(t,e){var n=ql(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,c=n.rotateAroundControls,u=n.resolveAblesWithRotatable,f=t.getState(),h=f.renderPoses,g=f.direction;if(!r)return null;var m=FI(i,h,g),x=[];if(m.forEach(function(T,D){var k=K(T,2),j=k[0],B=k[1];x.push(e.createElement("div",{key:"rotation".concat(D),className:Be("rotation"),style:{transform:"translate(-50%) translate(".concat(j[0],"px, ").concat(j[1],"px) rotate(").concat(B,"rad)")}},e.createElement("div",{className:Be("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Be("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var _=ws(u||{}),E={};_.forEach(function(T){u[T].forEach(function(D){E[D]=T})});var S=[];Ln(o)&&(S=o.map(function(T){var D=E[T];return{data:D?{resolve:D}:{},classNames:D?["move"]:[],dir:T}})),x.push.apply(x,Se([],K(TI(t,"rotatable",S,e)),!1))}return c&&x.push.apply(x,Se([],K(kI(t,e)),!1)),x},dragControlCondition:R1,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.isRequest,g=t.state,m=g.target,x=g.left,_=g.top,E=g.direction,S=g.beforeDirection,T=g.targetTransform,D=g.moveableClientRect,k=g.offsetMatrix,j=g.targetMatrix,B=g.allMatrix,z=g.width,C=g.height;if(!h&&!m)return!1;var A=t.getRect();i.rect=A,i.transform=T,i.left=x,i.top=_;var N=function(he){var ie=UI(t.state,he);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedPosition(he)},O=function(he){var ie=d7(t.state,he);i.fixedDirection=ie.fixedDirection,i.fixedOffset=ie.fixedOffset,i.fixedPosition=ie.fixedPosition,U&&U.setFixedDirection(he)},L=a,V=o;if(h||f||u){var M=c||0;i.beforeInfo={origin:A.beforeOrigin,prevDeg:M,defaultDeg:M,prevSnapDeg:0,startDist:0},i.afterInfo=W(W({},i.beforeInfo),{origin:A.origin}),i.absoluteInfo=W(W({},i.beforeInfo),{origin:A.origin,startValue:M})}else{var J=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(J){var Q=J.getAttribute("data-direction")||"",$=bF[Q];if($){i.isControl=!0,i.isAroundControl=qn(J,Be("around-control")),i.controlDirection=$;var H=J.getAttribute("data-resolve");H&&(i.resolveAble=H);var ee=F7(g.rootMatrix,g.renderPoses,D);n=K(Hn(ee,$),2),L=n[0],V=n[1]}}i.beforeInfo={origin:A.beforeOrigin},i.afterInfo={origin:A.origin},i.absoluteInfo={origin:A.origin,startValue:A.rotation};var te=N;N=function(he){var ie=g.is3d?4:3,me=K(St(iI(j,ie),he),2),Te=me[0],Ae=me[1],De=xr(k,Ul([Te,Ae],ie)),be=xr(B,Ul([he[0],he[1]],ie));te(he);var Ee=g.posDelta;i.beforeInfo.origin=Fe(De,Ee),i.afterInfo.origin=Fe(be,Ee),i.absoluteInfo.origin=Fe(be,Ee),ob(t,i.beforeInfo,L,V,D),ob(t,i.afterInfo,L,V,D),ob(t,i.absoluteInfo,L,V,D)},O=function(he){var ie=Hn([[0,0],[z,0],[0,C],[z,C]],he);N(ie)}}i.startClientX=L,i.startClientY=V,i.direction=E,i.beforeDirection=S,i.startValue=0,i.datas={},i0(t,e,"rotate");var ue=!1,U=!1;if(i.isControl&&i.resolveAble){var Y=i.resolveAble;Y==="resizable"&&(U=C1.dragControlStart(t,W(W({},new wu("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(ue=Sr.dragStart(t,new wu().dragStart([0,0],e))),N(G7(t));var ne=ct(t,e,W(W({set:function(he){i.startValue=he*Math.PI/180},setFixedDirection:O,setFixedPosition:N},r0(t,e)),{dragStart:ue,resizeStart:U})),ae=Ne(t,"onRotateStart",ne);return i.isRotate=ae!==!1,g.snapRenderInfo={request:e.isRequest},i.isRotate?ne:!1},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.clientDistX,c=e.clientDistY,u=e.parentRotate,f=e.parentFlag,h=e.isPinch,g=e.groupDelta,m=e.resolveMatrix,x=a.beforeDirection,_=a.beforeInfo,E=a.afterInfo,S=a.absoluteInfo,T=a.isRotate,D=a.startValue,k=a.rect,j=a.startClientX,B=a.startClientY;if(T){t0(t,e,"rotate");var z=xF(e),C=x*z,A=t.props.parentMoveable,N=0,O,L,V=0,M,J,Q=0,$,H,ee=180/Math.PI*D,te=S.startValue,ue=!1,U=j+o,Y=B+c;if(!f&&"parentDist"in e){var ne=e.parentDist;O=ne,M=ne,$=ne}else h||f?(O=Lg(u,x,_),M=Lg(u,C,E),$=Lg(u,C,S)):(O=lb(U,Y,x,_),M=lb(U,Y,C,E),$=lb(U,Y,C,S),ue=!0);if(L=ee+O,J=ee+M,H=te+$,Ne(t,"onBeforeRotate",ct(t,e,{beforeRotation:L,rotation:J,absoluteRotation:H,setRotation:function($e){M=$e-ee,O=M,$=M}},!0)),n=K(cb(t,k,_,O,ee,ue),3),N=n[0],O=n[1],L=n[2],r=K(cb(t,k,E,M,ee,ue),3),V=r[0],M=r[1],J=r[2],i=K(cb(t,k,S,$,te,ue),3),Q=i[0],$=i[1],H=i[2],!(!Q&&!V&&!N&&!A&&!m)){var ae=n0(a,"rotate(".concat(J,"deg)"),"rotate(".concat(M,"deg)"));m&&(a.fixedPosition=g_(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var he=NF(t,M,a),ie=Fe(St(g||[0,0],he),a.prevInverseDist||[0,0]);a.prevInverseDist=he,a.requestValue=null;var me=wI(t,ae,ie,h,e),Te=me,Ae=ps([U,Y],S.startAbsoluteOrigin)-S.startDist,De=void 0;if(a.resolveAble==="resizable"){var be=C1.dragControl(t,W(W({},yh(e,t.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:Ae}));be&&(De=be,Te=nM(Te,be,e))}var Ee=ct(t,e,W(W({delta:V,dist:M,rotate:J,rotation:J,beforeDist:O,beforeDelta:N,beforeRotate:L,beforeRotation:L,absoluteDist:$,absoluteDelta:Q,absoluteRotate:H,absoluteRotation:H,isPinch:!!h,resize:De},me),Te));return Ne(t,"onRotate",Ee),Ee}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=si(t,e,{});return Ne(t,"onRotateEnd",r),r}},dragGroupControlCondition:R1,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(t,e);if(!c)return!1;c.set(n.beforeDirection*t.rotation);var u=gs(t,this,"dragControlStart",e,function(g,m){var x=g.state,_=x.left,E=x.top,S=x.beforeOrigin,T=St(Fe([_,E],[i,a]),Fe(S,o));return m.datas.startGroupClient=T,m.datas.groupClient=T,W(W({},m),{parentRotate:0})}),f=W(W({},c),{targets:t.props.targets,events:u}),h=Ne(t,"onRotateGroupStart",f);return n.isRotate=h!==!1,n.isRotate?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){c0(t,"onBeforeRotate",function(f){Ne(t,"onBeforeRotateGroup",ct(t,e,W(W({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=gs(t,this,"dragControl",e,function(f,h){var g=h.datas.startGroupClient,m=K(h.datas.groupClient,2),x=m[0],_=m[1],E=K(ph(g,o*i),2),S=E[0],T=E[1],D=[S-x,T-_];return h.datas.groupClient=[S,T],W(W({},h),{parentRotate:a,groupDelta:D})});t.rotation=i*r.beforeRotation;var u=W({targets:t.props.targets,events:c,set:function(f){t.rotation=f},setGroupRotation:function(f){t.rotation=f}},r);return Ne(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=gs(t,this,"dragControlEnd",e),a=si(t,e,{targets:t.props.targets,events:i});return Ne(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function p7(t,e){var n,r=t.direction,i=t.classNames,a=t.size,o=t.pos,c=t.zoom,u=t.key,f=r==="horizontal",h=f?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(n={},n[f?"width":"height"]="".concat(a),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),n)})}function __(t,e){return p7(W(W({},t),{classNames:Se([Be("line","guideline",t.direction)],K(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(rt(n,.1),"px")})}),e)}function d2(t,e,n,r,i,a,o,c){var u=t.props.zoom;return n.map(function(f,h){var g=f.type,m=f.pos,x=[0,0];return x[o]=r,x[o?0:1]=-i+m,__({key:"".concat(e,"TargetGuideline").concat(h),classNames:[Be("target","bold",g)],posValue:x,sizeValue:a,zoom:u,direction:e},c)})}function f2(t,e,n,r,i,a){var o=t.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,f=e==="horizontal"?Mo:Oo,h=i[f.start],g=i[f.end];return n.filter(function(m){var x=m.hide,_=m.elementRect;if(x)return!1;if(u&&_){var E=_.rect;if(E[f.start]<=h&&g<=E[f.end])return!1}return!0}).map(function(m,x){var _=m.pos,E=m.size,S=m.element,T=m.className,D=[-r[0]+_[0],-r[1]+_[1]];return __({key:"".concat(e,"-default-guideline-").concat(x),classNames:S?[Be("bold"),T]:[Be("normal"),T],direction:e,posValue:D,sizeValue:E,zoom:c},a)})}function sf(t,e,n,r,i,a,o,c){var u,f=t.props,h=f.snapDigit,g=h===void 0?0:h,m=f.isDisplaySnapDigit,x=m===void 0?!0:m,_=f.snapDistFormat,E=_===void 0?function(B,z){return B}:_,S=f.zoom,T=e==="horizontal"?"X":"Y",D=e==="vertical"?"height":"width",k=Math.abs(i),j=x?parseFloat(k.toFixed(g)):0;return c.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Be("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[D]="".concat(k,"px"),u)},__({direction:e,classNames:[Be(n),o],size:"100%",posValue:[0,0],sizeValue:k,zoom:S},c),c.createElement("div",{className:Be("size-value","gap"),style:{transform:"translate".concat(T,"(-50%) scale(").concat(S,")")}},j>0?E(j,e):""))}function g7(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?Mo:Oo,c=n[o.start],u=n[o.end];return rM(e,function(f){return f.pos[i]}).map(function(f){var h=[],g=[],m=[];return f.forEach(function(x){var _,E,S=x.element,T=x.elementRect.rect;if(T[o.end]<c)h.push(x);else if(u<T[o.start])g.push(x);else if(T[o.start]<=c&&u<=T[o.end]&&r){var D=x.pos,k={element:S,rect:W(W({},T),(_={},_[o.end]=T[o.start],_))},j={element:S,rect:W(W({},T),(E={},E[o.start]=T[o.end],E))},B=[0,0],z=[0,0];B[i]=D[i],B[a]=D[a],z[i]=D[i],z[a]=D[a]+x.size,h.push({type:t,pos:B,size:0,elementRect:k,direction:"",elementDirection:"end"}),g.push({type:t,pos:z,size:0,elementRect:j,direction:"",elementDirection:"start"})}}),h.sort(function(x,_){return _.pos[a]-x.pos[a]}),g.sort(function(x,_){return x.pos[a]-_.pos[a]}),{total:f,start:h,end:g,inner:m}})}function m7(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=e.filter(function(S){return S.type===c}),f=c==="vertical"?1:0,h=f?0:1,g=g7(c,u,r,a),m=f?Oo:Mo,x=f?Mo:Oo,_=r[m.start],E=r[m.end];g.forEach(function(S){var T=S.total,D=S.start,k=S.end,j=S.inner,B=n[h]+T[0].pos[h]-r[x.start],z=r;D.forEach(function(C){var A=C.elementRect.rect,N=z[m.start]-A[m.end];if(N>0){var O=[0,0];O[f]=n[f]+z[m.start]-_-N,O[h]=B,o.push(sf(t,c,"dashed",o.length,N,O,C.className,i))}z=A}),z=r,k.forEach(function(C){var A=C.elementRect.rect,N=A[m.start]-z[m.end];if(N>0){var O=[0,0];O[f]=n[f]+z[m.end]-_,O[h]=B,o.push(sf(t,c,"dashed",o.length,N,O,C.className,i))}z=A}),j.forEach(function(C){var A=C.elementRect.rect,N=_-A[m.start],O=A[m.end]-E,L=[0,0],V=[0,0];L[f]=n[f]-N,L[h]=B,V[f]=n[f]+E-_,V[h]=B,o.push(sf(t,c,"dashed",o.length,N,L,C.className,i)),o.push(sf(t,c,"dashed",o.length,O,V,C.className,i))})})}),o}function v7(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=e.filter(function(S){return S.type===o}).slice(0,1),u=o==="vertical"?0:1,f=u?0:1,h=u?Oo:Mo,g=u?Mo:Oo,m=r[h.start],x=r[h.end],_=r[g.start],E=r[g.end];c.forEach(function(S){var T=S.gap,D=S.gapRects,k=Math.max.apply(Math,Se([_],K(D.map(function(z){var C=z.rect;return C[g.start]})),!1)),j=Math.min.apply(Math,Se([E],K(D.map(function(z){var C=z.rect;return C[g.end]})),!1)),B=(k+j)/2;k===j||B===(_+E)/2||D.forEach(function(z){var C=z.rect,A=z.className,N=[n[0],n[1]];if(C[h.end]<m)N[u]+=C[h.end]-m;else if(x<C[h.start])N[u]+=C[h.start]-m-T;else return;N[f]+=B-_,a.push(sf(t,u?"vertical":"horizontal","gap",a.length,T,N,A,i))})})}),a}function D1(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,f=i.clientHeight,h=i.clientWidth,g=i.clientLeft,m=i.clientTop,x=t.props,_=x.snapGap,E=_===void 0?!0:_,S=x.verticalGuidelines,T=x.horizontalGuidelines,D=x.snapThreshold,k=D===void 0?5:D,j=x.maxSnapElementGuidelineDistance,B=j===void 0?1/0:j,z=x.isDisplayGridGuidelines,C=Ci(Ni(t.state)),A=C.top,N=C.left,O=C.bottom,L=C.right,V={top:A,left:N,bottom:O,right:L,center:(N+L)/2,middle:(A+O)/2},M=_7(t),J=Se([],K(M),!1),Q=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(te){return te*k});E&&J.push.apply(J,Se([],K(y7(t,V,Q)),!1));var $=W({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(J.push.apply(J,Se([],K(x7(t,o?u:h,o?c:f,g,m,$,z)),!1)),a){var H=i.left,ee=i.top;$.left+=H,$.top+=ee,$.right+=H,$.bottom+=ee}return J.push.apply(J,Se([],K(qI(T||!1,S||!1,o?u:h,o?c:f,g,m,$)),!1)),J=J.filter(function(te){var ue=te.element,U=te.elementRect,Y=te.type;if(!ue||!U)return!0;var ne=U.rect;return GI(V,ne,Y,B)}),J}function y7(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=t.state.elementRects,f=[];return[["vertical",Mo,Oo],["horizontal",Oo,Mo]].forEach(function(h){var g=K(h,3),m=g[0],x=g[1],_=g[2],E=e[x.start],S=e[x.end],T=e[x.center],D=e[_.start],k=e[_.end],j={left:n[0],top:n[1]};function B(A){var N=A.rect,O=j[x.start];return N[x.end]<E+O?E-N[x.end]:S-O<N[x.start]?N[x.start]-S:-1}var z=u.filter(function(A){var N=A.rect;return N[_.start]>k||N[_.end]<D?!1:B(A)>0}).sort(function(A,N){return B(A)-B(N)}),C=[];z.forEach(function(A){z.forEach(function(N){if(A!==N){var O=A.rect,L=N.rect,V=O[_.start],M=O[_.end],J=L[_.start],Q=L[_.end];V>Q||J>M||C.push([A,N])}})}),C.forEach(function(A){var N=K(A,2),O=N[0],L=N[1],V=O.rect,M=L.rect,J=V[x.start],Q=V[x.end],$=M[x.start],H=M[x.end],ee=j[x.start],te=0,ue=0,U=!1,Y=!1,ne=!1;if(Q<=E&&S<=$){if(Y=!0,te=($-Q-(S-E))/2,ue=Q+te+(S-E)/2,_e(ue-T)>ee)return}else if(Q<$&&H<E+ee){if(U=!0,te=$-Q,ue=H+te,_e(ue-E)>ee)return}else if(Q<$&&S-ee<J){if(ne=!0,te=$-Q,ue=J-te,_e(ue-S)>ee)return}else return;te&&GI(e,M,m,a)&&(te>c||f.push({type:m,pos:m==="vertical"?[ue,0]:[0,ue],element:L.element,size:0,className:L.className,isStart:U,isCenter:Y,isEnd:ne,gap:te,hide:!0,gapRects:[O,L],direction:"",elementDirection:""}))})}),f}function b7(t,e,n,r){var i,a,o=t.props,c=t.state,u=o.snapGridAll,f=o.snapGridWidth,h=f===void 0?0:f,g=o.snapGridHeight,m=g===void 0?0:g,x=c.snapRenderInfo,_=x&&(((i=x.direction)===null||i===void 0?void 0:i[0])||((a=x.direction)===null||a===void 0?void 0:a[1])),E=t.moveables;if(u&&E&&_&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var S=t.getRect(),T=S.children,D=x.direction;if(T){var k=D.map(function(B,z){var C=z===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-n},A=C.snapSize,N=C.posName,O=C.sizeName,L=C.clientOffset;if(!A)return{dir:B,multiple:1,snapSize:A,snapOffset:0};var V=S[O],M=S[N],J=MN(T.map(function(U){return[U[N]-M,U[O],V-U[O]-U[N]+M]})).filter(function(U){return U}).sort(function(U,Y){return U-Y}),Q=J[0],$=J.map(function(U){return rt(U/Q,.1)*A}),H=1,ee=rt(V/Q,.1);for(H=1;H<=10&&!$.every(function(U){return U*H%1===0});++H);var te=(-B+1)/2,ue=sm(M-L,M-L+V,te,1-te);return{multiple:ee*H,dir:B,snapSize:A,snapOffset:Math.round(ue/A)}}),j=k.map(function(B){return B.multiple||1});c.snapThresholdInfo.multiples=j,c.snapThresholdInfo.offset=k.map(function(B){return B.snapOffset}),k.forEach(function(B,z){B.snapSize})}}else c.snapThresholdInfo=null}function x7(t,e,n,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=t.props,u=t.state,f=c.snapGridWidth,h=f===void 0?0:f,g=c.snapGridHeight,m=g===void 0?0:g,x=[],_=a.left,E=a.top,S=[0,0];b7(t,r,i,a);var T=u.snapThresholdInfo,D=h,k=m;if(T&&(h*=T.multiples[0]||1,m*=T.multiples[1]||1,S=T.offset),m){for(var j=function(z){x.push({type:"horizontal",pos:[_,rt(S[1]*k+z-i+E,.1)],className:Be("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},B=0;B<=n*2;B+=m)j(B);for(var B=-m;B>=-n;B-=m)j(B)}if(h){for(var j=function(C){x.push({type:"vertical",pos:[rt(S[0]*D+C-r+_,.1),E],className:Be("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},B=0;B<=e*2;B+=h)j(B);for(var B=-h;B>=-e;B-=h)j(B)}return x}function GI(t,e,n,r){return n==="horizontal"?_e(t.right-e.left)<=r||_e(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?_e(t.bottom-e.top)<=r||_e(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function _7(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return Ji(m)&&"element"in m?W(W({},m),{element:Aa(m.element,!0)}):{element:Aa(m,!0)}}).filter(function(m){return m.element}),o=M8(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,f=[];c.forEach(function(m){var x=K(m,2),_=x[0],E=x[1];f[E]=i[_]}),w7(t,u.map(function(m){return a[m]})).map(function(m,x){f[u[x]]=m}),e.elementRects=f;var h=v_(t.props.elementSnapDirections),g=[];return f.forEach(function(m){var x=m.element,_=m.top,E=_===void 0?h.top:_,S=m.left,T=S===void 0?h.left:S,D=m.right,k=D===void 0?h.right:D,j=m.bottom,B=j===void 0?h.bottom:j,z=m.center,C=z===void 0?h.center:z,A=m.middle,N=A===void 0?h.middle:A,O=m.className,L=m.rect,V=y_({top:E,right:k,left:T,bottom:B,center:C,middle:N},L),M=V.horizontal,J=V.vertical,Q=V.horizontalNames,$=V.verticalNames,H=L.top,ee=L.left,te=L.right-ee,ue=L.bottom-H,U=[te,ue];J.forEach(function(Y,ne){g.push({type:"vertical",element:x,pos:[rt(Y,.1),H],size:ue,sizes:U,className:O,elementRect:m,elementDirection:r2[$[ne]]||$[ne],direction:""})}),M.forEach(function(Y,ne){g.push({type:"horizontal",element:x,pos:[ee,rt(Y,.1)],size:te,sizes:U,className:O,elementRect:m,elementDirection:r2[Q[ne]]||Q[ne],direction:""})})}),g}function h2(t,e){return t?t.map(function(n){var r=Ji(n)?n:{pos:n},i=r.pos;return xu(i)?r:W(W({},r),{pos:qt(i,e)})}):[]}function qI(t,e,n,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,f=o.top,h=o.bottom,g=o.right,m=n+g-u,x=r+h-f;return h2(t,x).forEach(function(_){c.push({type:"horizontal",pos:[u,rt(_.pos-a+f,.1)],size:m,className:_.className,direction:""})}),h2(e,m).forEach(function(_){c.push({type:"vertical",pos:[rt(_.pos-i+u,.1),f],size:x,className:_.className,direction:""})}),c}function w7(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,f=K($F(a,i,u),2),h=f[0],g=f[1],m=n?0:c[0],x=n?0:c[1];return e.map(function(_){var E=_.element.getBoundingClientRect(),S=E.left-h-m,T=E.top-g-x,D=T+E.height,k=S+E.width,j=K(Tu(a,[S,T],u),2),B=j[0],z=j[1],C=K(Tu(a,[k,D],u),2),A=C[0],N=C[1];return W(W({},_),{rect:{left:B,right:A,top:z,bottom:N,center:(B+A)/2,middle:(z+N)/2}})})}function mg(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=Aa(r,!0);if(o){var c=Ef(o),u=b2(e,[c.left-i.left,c.top-i.top]),f=b2(e,[c.right-i.right,c.bottom-i.bottom]);a.left=rt(u[0],1e-5),a.top=rt(u[1],1e-5),a.right=rt(f[0],1e-5),a.bottom=rt(f[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=D1(t),e.enableSnap=!0,!0}function HI(t,e,n,r,i,a){var o=Jl(t,e,n,a?4:3),c=Hn(o,r);return E_(o,Fe(i,c))}function p2(t){return t?t/_e(t):0}function E7(t,e,n,r,i,a){var o=a.fixedDirection,c=KF(n,o,r),u=x_(t,e,n,r),f=Se(Se([],K(l7(t,e,c,r,i,a)),!1),K(LI(t,u,a)),!1),h=fm(f,0),g=fm(f,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:g.isBound,offset:g.offset[1]}}}function S7(t,e,n,r,i,a,o,c,u){var f=Hn(e,o),h=o0(t,c,{vertical:[f[0]],horizontal:[f[1]]}),g=h.horizontal.offset,m=h.vertical.offset;if(rt(m,w1)||rt(g,w1)){var x=K(Ba({datas:u,distX:-m,distY:-g}),2),_=x[0],E=x[1],S=Math.min(i||1/0,n+o[0]*_),T=Math.min(a||1/0,r+o[1]*E);return[S-n,T-r]}return[0,0]}function $I(t,e,n,r,i,a,o,c){for(var u=Ni(t.state),f=t.props.keepRatio,h=0,g=0,m=0;m<2;++m){var x=e(h,g),_=E7(t,x,i,f,o,c),E=_.width,S=_.height,T=E.isBound,D=S.isBound,k=E.offset,j=S.offset;if(m===1&&(T||(k=0),D||(j=0)),m===0&&o&&!T&&!D)return[0,0];if(f){var B=_e(k)*(n?1/n:1),z=_e(j)*(r?1/r:1),C=T&&D?B<z:D||!T&&B<z;C?k=n*j/r:j=r*k/n}h+=k,g+=j}if(!f&&i[0]&&i[1]){var A=u7(t,u,i,a,c),N=A.maxWidth,O=A.maxHeight,L=K(S7(t,e(h,g).map(function(J){return J.map(function(Q){return rt(Q,w1)})}),n+h,r+g,N,O,i,o,c),2),k=L[0],j=L[1];h+=k,g+=j}return[h,g]}function _f(t){return t<0&&(t=t%360+360),t%=360,t}function T7(t,e){e=_f(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return _e(t-r)<_e(t-i)?r:i}function ub(t,e){t=_f(t),e=_f(e);var n=_f(t-e);return Math.min(n,360-n)}function A7(t,e,n,r){var i,a=t.props,o=(i=a[NI])!==null&&i!==void 0?i:5,c=a[II];if(Hu(t,"rotatable")){var u=e.pos1,f=e.pos2,h=e.pos3,g=e.pos4,m=e.origin,x=n*Math.PI/180,_=[u,f,h,g].map(function(j){return Fe(j,m)}),E=_.map(function(j){return ph(j,x)}),S=Se(Se([],K(FF(t,_,E,m,n)),!1),K(n7(t,_,E,m,n)),!1);S.sort(function(j,B){return _e(j-n)-_e(B-n)});var T=S.length>0;if(T)return{isSnap:T,dist:T?S[0]:n}}if(c?.length&&o){var D=c.slice().sort(function(j,B){return ub(j,r)-ub(B,r)}),k=D[0];if(ub(k,r)<=o)return{isSnap:!0,dist:n+T7(r,k)-r}}return{isSnap:!1,dist:n}}function C7(t,e,n,r,i,a,o){if(!Hu(t,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,f=t.state,h=f.allMatrix,g=f.is3d;return $I(t,function(m,x){return HI(u||h,e+m,n+x,c,i,g)},e,n,r,i,a,o)}function R7(t,e,n,r,i){if(!Hu(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,f=i.is3d,h=$I(t,function(g,m){return HI(CF(i,St(e,[g/a,m/o])),a,o,u,c,f)},a,o,n,c,r,i);return[h[0]/a,h[1]/o]}function D7(t,e){e.absolutePoses=Ni(t.state)}function g2(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Hr(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return W(W({},r),{direction:i.direction})})}function m2(t,e,n,r,i,a){var o=m_(a0(t,a),e,n),c=o.vertical,u=o.horizontal,f=au();c.forEach(function(_){_.isBound&&(_.direction==="start"&&(f.left=!0),_.direction==="end"&&(f.right=!0),r.push({type:"bounds",pos:_.pos}))}),u.forEach(function(_){_.isBound&&(_.direction==="start"&&(f.top=!0),_.direction==="end"&&(f.bottom=!0),i.push({type:"bounds",pos:_.pos}))});var h=r7(t),g=h.boundMap,m=h.vertical,x=h.horizontal;return m.forEach(function(_){_s(r,function(E){var S=E.type,T=E.pos;return S==="bounds"&&T===_})>=0||r.push({type:"bounds",pos:_})}),x.forEach(function(_){_s(i,function(E){var S=E.type,T=E.pos;return S==="bounds"&&T===_})>=0||i.push({type:"bounds",pos:_})}),{boundMap:f,innerBoundMap:g}}var k7=A_("",["resizable","scalable"]),N7={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",NI,II,MI,OI,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,o=n.pos2,c=n.pos3,u=n.pos4,f=n.snapRenderInfo,h=t.props.snapRenderThreshold,g=h===void 0?1:h;if(!f||!f.render||!Hu(t,""))return ou(t,"boundMap",au(),function(ae){return JSON.stringify(ae)}),ou(t,"innerBoundMap",au(),function(ae){return JSON.stringify(ae)}),[];n.guidelines=D1(t);var m=Math.min(a[0],o[0],c[0],u[0]),x=Math.min(a[1],o[1],c[1],u[1]),_=f.externalPoses||[],E=Ni(t.state),S=[],T=[],D=[],k=[],j=[],B=Ci(E),z=B.width,C=B.height,A=B.top,N=B.left,O=B.bottom,L=B.right,V={left:N,right:L,top:A,bottom:O,center:(N+L)/2,middle:(A+O)/2},M=_.length>0,J=M?Ci(_):{};if(!f.request){if(f.direction&&j.push(WF(t,E,f.direction,g,g)),f.snap){var Q=Ci(E);f.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),j.push(i2(t,Q,g,g))}M&&(f.center&&(J.middle=(J.top+J.bottom)/2,J.center=(J.left+J.right)/2),j.push(i2(t,J,g,g))),j.forEach(function(ae){var he=ae.vertical.posInfos,ie=ae.horizontal.posInfos;S.push.apply(S,Se([],K(he.filter(function(me){var Te=me.guidelineInfos;return Te.some(function(Ae){var De=Ae.guideline;return!De.hide})}).map(function(me){return{type:"snap",pos:me.pos}})),!1)),T.push.apply(T,Se([],K(ie.filter(function(me){var Te=me.guidelineInfos;return Te.some(function(Ae){var De=Ae.guideline;return!De.hide})}).map(function(me){return{type:"snap",pos:me.pos}})),!1)),D.push.apply(D,Se([],K(g2(he)),!1)),k.push.apply(k,Se([],K(g2(ie)),!1))})}var $=m2(t,[N,L],[A,O],S,T),H=$.boundMap,ee=$.innerBoundMap;M&&m2(t,[J.left,J.right],[J.top,J.bottom],S,T,f.externalBounds);var te=Se(Se([],K(D),!1),K(k),!1),ue=te.filter(function(ae){return ae.element&&!ae.gapRects}),U=te.filter(function(ae){return ae.gapRects}).sort(function(ae,he){return ae.gap-he.gap});Ne(t,"onSnap",{guidelines:te.filter(function(ae){var he=ae.element;return!he}),elements:ue,gaps:U},!0);var Y=ou(t,"boundMap",H,function(ae){return JSON.stringify(ae)},au()),ne=ou(t,"innerBoundMap",ee,function(ae){return JSON.stringify(ae)},au());return(H===Y||ee===ne)&&Ne(t,"onBound",{bounds:H,innerBounds:ee},!0),Se(Se(Se(Se(Se(Se([],K(m7(t,ue,[m,x],V,e)),!1),K(v7(t,U,[m,x],V,e)),!1),K(f2(t,"horizontal",k,[i,r],V,e)),!1),K(f2(t,"vertical",D,[i,r],V,e)),!1),K(d2(t,"horizontal",T,m,r,z,0,e)),!1),K(d2(t,"vertical",S,x,i,C,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},mg(t)},drag:function(t){var e=t.state;mg(t)||(e.guidelines=D1(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(k7(t,e)||R1(t,e))return!0;if(!e.isRequest&&e.inputEvent)return qn(e.inputEvent.target,Be("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,mg(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,mg(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function I7(t,e){return[t[0]*e[0],t[1]*e[1]]}function Be(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return CU.apply(void 0,Se([f_],K(t),!1))}function YI(t){t()}function M7(t){return!t||t==="none"?[1,0,0,1,0,0]:Ji(t)?t:Gf(t)}function wf(t,e,n){return lm(e,Fl(n,e),t,Fl(n.map(function(r){return-r}),e))}function O7(t,e,n){if(e==="%"){var r=w_(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function P7(t){var e=j7(S_(t,":before"));return e.map(function(n,r){var i=uh(n),a=i.value,o=i.unit;return a*O7(t,o,r===0)})}function pm(t){return t?t.split(" "):["0","0"]}function j7(t){return pm(t.transformOrigin)}function XI(t){var e=$r(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(f){var h=i[f].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(g){return h[g]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function Hf(t,e,n,r,i){var a,o,c=t_(t)||qo(t),u=!1,f,h;if(!t||n)f=t;else{var g=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=t.parentElement;g?(u=!0,h=m,f=g):f=m}for(var x=!1,_=t===e||f===e,E="relative",S=1,T=parseFloat(i?.("zoom"))||1,D=i?.("position");f&&f!==c;){e===f&&(_=!0);var k=$r(f),j=f.tagName.toLowerCase(),B=XI(f),z=k("willChange"),C=parseFloat(k("zoom"))||1;if(E=k("position"),r&&C!==1){S=C;break}if(!n&&r&&T!==1&&D&&D!=="absolute"||j==="svg"||j==="foreignobject"||E!=="static"||B&&B!=="none"||z==="transform")break;var A=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,N=f.parentNode;A&&(u=!0,h=N);var O=N;if(O&&O.nodeType===11){f=O.host,x=!0,E=$r(f)("position");break}f=O,E="relative"}return{offsetZoom:S,hasSlot:u,parentSlotElement:h,isCustomElement:x,isStatic:E==="static",isEnd:_||!f||f===c,offsetParent:f||c}}function V7(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=$r(t),c=Qm(i),u=!c,f,h;return!u&&(r!=="svg"||t.ownerSVGElement)?(f=hI?P7(t):pm(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=f.slice(),u=!0,r==="svg"?(i=0,a=0):(n=K(B7(t,f,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],f[0]=n[2],f[1]=n[3])):(f=pm(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=f.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:f,targetOrigin:h}}function WI(t,e){var n=$r(t),r=$r(qo(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,o]}function k1(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=ea(n,3,4))})}function z7(t){for(var e=t.parentElement,n=!1,r=qo(t);e;){var i=S_(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function l0(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(aI(t,!e).join(","),")")}function w_(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function L7(t,e){var n,r=w_(t),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,f=c/a,h=t.preserveAspectRatio.baseVal,g=h.align,m=h.meetOrSlice,x=[0,0],_=[u,f],E=[0,0];if(g!==1){var S=(g-2)%3,T=Math.floor((g-2)/3);x[0]=i*S/2,x[1]=a*T/2;var D=m===2?Math.max(f,u):Math.min(u,f);_[0]=D,_[1]=D,E[0]=(o-i)/2*S,E[1]=(c-a)/2*T}var k=l_(_,e);return n=K(E,2),k[e*(e-1)]=n[0],k[e*(e-1)+1]=n[1],wf(k,e,x)}function B7(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=$r(t),a=i("transform-box")==="fill-box",o=t.getBBox(),c=w_(t.ownerSVGElement),u=o.x,f=o.y;r==="foreignobject"&&!u&&!f&&(u=parseFloat(t.getAttribute("x"))||0,f=parseFloat(t.getAttribute("y"))||0);var h=u-c.x,g=f-c.y,m=a?e[0]:e[0]-h,x=a?e[1]:e[1]-g;return[h,g,m,x]}function sn(t,e,n){return xr(t,Ul(e,n),n)}function Jl(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return sn(t,i,r)})}function Ci(t){var e=t.map(function(f){return f[0]}),n=t.map(function(f){return f[1]}),r=Math.min.apply(Math,Se([],K(e),!1)),i=Math.min.apply(Math,Se([],K(n),!1)),a=Math.max.apply(Math,Se([],K(e),!1)),o=Math.max.apply(Math,Se([],K(n),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function v2(t,e,n,r){var i=Jl(t,e,n,r);return Ci(i)}function U7(t,e,n,r,i){var a,o=t.target,c=t.origin,u=e.matrix,f=QI(o),h=f.offsetWidth,g=f.offsetHeight,m=n.getBoundingClientRect(),x=[0,0];n===qo(n)&&(x=WI(o,!0));for(var _=o.getBoundingClientRect(),E=_.left-m.left+n.scrollLeft-(n.clientLeft||0)+x[0],S=_.top-m.top+n.scrollTop-(n.clientTop||0)+x[1],T=_.width,D=_.height,k=lm(r,i,u),j=v2(k,h,g,r),B=j.left,z=j.top,C=j.width,A=j.height,N=sn(k,c,r),O=Fe(N,[B,z]),L=[E+O[0]*T/C,S+O[1]*D/A],V=[0,0],M=0;++M<10;){var J=Oa(i,r);a=K(Fe(sn(J,L,r),sn(J,N,r)),2),V[0]=a[0],V[1]=a[1];var Q=lm(r,i,Fl(V,r),u),$=v2(Q,h,g,r),H=$.left,ee=$.top,te=H-E,ue=ee-S;if(_e(te)<2&&_e(ue)<2)break;L[0]-=te,L[1]-=ue}return V.map(function(U){return Math.round(U)})}function F7(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(u){return sn(t,u,i)}),o=n.left,c=n.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function ki(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function KI(t,e){return ki([e[0]-t[0],e[1]-t[1]])}function of(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Sn(t,e));var i=KI(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function gm(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(c,u){return c+u[0]},0)/i,o=n.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function ql(t,e){var n=t[e];return Ji(n)?W(W({},t),n):t}function QI(t){var e=t&&!Qm(t.offsetWidth),n=0,r=0,i=0,a=0,o=0,c=0,u=0,f=0,h=0,g=0,m=0,x=0,_=1/0,E=1/0,S=1/0,T=1/0,D=0,k=0,j=!1;if(t)if(!e&&t.ownerSVGElement){var B=t.getBBox();j=!0,n=B.width,r=B.height,o=n,c=r,u=n,f=r,i=n,a=r}else{var z=$r(t),C=t.style,A=z("boxSizing")==="border-box",N=parseFloat(z("borderLeftWidth"))||0,O=parseFloat(z("borderRightWidth"))||0,L=parseFloat(z("borderTopWidth"))||0,V=parseFloat(z("borderBottomWidth"))||0,M=parseFloat(z("paddingLeft"))||0,J=parseFloat(z("paddingRight"))||0,Q=parseFloat(z("paddingTop"))||0,$=parseFloat(z("paddingBottom"))||0,H=M+J,ee=Q+$,te=N+O,ue=L+V,U=H+te,Y=ee+ue,ne=z("position"),ae=0,he=0;if("clientLeft"in t){var ie=null;if(ne==="absolute"){var me=Hf(t,qo(t));ie=me.offsetParent}else ie=t.parentElement;if(ie){var Te=$r(ie);ae=parseFloat(Te("width")),he=parseFloat(Te("height"))}}h=Math.max(H,qt(z("minWidth"),ae)||0),g=Math.max(ee,qt(z("minHeight"),he)||0),_=qt(z("maxWidth"),ae),E=qt(z("maxHeight"),he),isNaN(_)&&(_=1/0),isNaN(E)&&(E=1/0),D=qt(C.width,0)||0,k=qt(C.height,0)||0,o=parseFloat(z("width"))||0,c=parseFloat(z("height"))||0,u=_e(o-D)<1?c1(h,D||o,_):o,f=_e(c-k)<1?c1(g,k||c,E):c,n=u,r=f,i=u,a=f,A?(S=_,T=E,m=h,x=g,u=n-U,f=r-Y):(S=_+U,T=E+Y,m=h+U,x=g+Y,n=u+U,r=f+Y),i=u+H,a=f+ee}return{svg:j,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:f,inlineCSSWidth:D,inlineCSSHeight:k,cssWidth:o,cssHeight:c,minWidth:h,minHeight:g,maxWidth:_,maxHeight:E,minOffsetWidth:m,minOffsetHeight:x,maxOffsetWidth:S,maxOffsetHeight:T}}function ZI(t,e){return Sn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function vg(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function JI(t,e){var n=t===qo(t)||t===t_(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=$r(t)("overflow")!=="visible",W(W({},e),r)}function db(t,e,n,r){var i=t.left,a=t.right,o=t.top,c=t.bottom,u=e.top,f=e.left,h={left:f+i,top:u+o,right:f+a,bottom:u+c,width:a-i,height:c-o};return n&&r?JI(n,h):h}function Ef(t,e){var n=0,r=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var c={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?JI(t,c):c}function G7(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!n&&c&&r?R_(r,a,o):u}function eM(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=tM(a,r)}return i}function tM(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function E_(t,e){return[St(e,t[0]),St(e,t[1]),St(e,t[2]),St(e,t[3])]}function Ni(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return E_([r,i,a,o],[e,n])}function N1(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function su(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&N1(t,e),r?.unset(),t[n]=null}function Cr(t,e){if(e){var n=qu(e);n.nextStyle=W(W({},n.nextStyle),t)}return{style:t,cssText:ws(t).map(function(r){return"".concat(zg(r,"-"),": ").concat(t[r],";")}).join("")}}function nM(t,e,n){var r=e.afterTransform||e.transform;return W(W({},Cr(W(W(W({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ct(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=W(W({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function si(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),W(W({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function c0(t,e,n){t._emitter.on(e,n)}function Ne(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function S_(t,e){return Eo(t).getComputedStyle(t,e)}function yg(t,e,n){var r={},i={};return t.filter(function(a){var o=a.name;if(r[o]||!e.some(function(c){return a[c]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function I1(t,e){return t===e||t==null&&e==null}function y2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!Qm(i))return i}return t[n]}function rM(t,e){var n=[],r=[];return t.forEach(function(i,a){var o=e(i,a,t),c=r.indexOf(o),u=n[c]||[];c===-1&&(r.push(o),n.push(u)),u.push(i)}),n}function q7(t,e){var n=[],r={};return t.forEach(function(i,a){var o=e(i,a,t),c=r[o];c||(c=[],r[o]=c,n.push(c)),c.push(i)}),n}function iM(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Su(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return _e(r)-_e(n)}),t[0]}function Tu(t,e,n){return xr(Oa(t,n),Ul(e,n),n)}function H7(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=K(Tu(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function _i(t,e,n,r){if(!n[0]&&!n[1])return e;var i=sn(t,[p2(n[0]||1),0],r),a=sn(t,[0,p2(n[1]||1)],r),o=sn(t,[n[0]/ki(i),n[1]/ki(a)],r);return St(e,o)}function Hi(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function mm(t){return _e(t)<=Rr?0:t}function T_(t){return function(e){if(!e.isDragging(t))return"";var n=OF(e,t),r=n.deg;return r?Be("view-control-rotation".concat(r)):""}}function A_(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return qn(i,Be("direction"))&&(!t||qn(i,Be(t)))}}function $7(t,e,n){var r,i=_u(t,{"x%":function(B){return B/100*e.offsetWidth},"y%":function(B){return B/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),c=t[n]||"",u=n<0?[]:t.slice(n),f=n<0?[]:t.slice(n+1),h=i.slice(0,n<0?void 0:n),g=i.slice(0,n<0?void 0:n+1),m=(r=i[n])!==null&&r!==void 0?r:_u([""])[0],x=n<0?[]:i.slice(n),_=n<0?[]:i.slice(n+1),E=m?[m]:[],S=$c(h),T=$c(g),D=$c(x),k=$c(_),j=$t(S,D,4);return{transforms:t,beforeFunctionMatrix:S,beforeFunctionMatrix2:T,targetFunctionMatrix:$c(E),afterFunctionMatrix:D,afterFunctionMatrix2:k,allFunctionMatrix:j,beforeFunctions:h,beforeFunctions2:g,targetFunction:E[0],afterFunctions:x,afterFunctions2:_,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:f}}function Y7(t){return!t||!Ji(t)||Fu(t)?!1:Ln(t)||"length"in t}function Aa(t,e){return t?Fu(t)?t:qr(t)?e?document.querySelector(t):t:Zx(t)?t():VN(t)?t:"current"in t?t.current:t:null}function C_(t,e){if(!t)return[];var n=Y7(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return qr(i)&&e?Se(Se([],K(r),!1),K([].slice.call(document.querySelectorAll(i))),!1):(Ln(i)?r.push(C_(i,e)):r.push(Aa(i,e)),r)},[])}function X7(t,e,n){var r=Sn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function b2(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=Oa(n,i);return r||(a=ea(a,3,4)),a[12]=0,a[13]=0,a[14]=0,N8(a,e)}function aM(t,e,n,r,i){var a=K(t,2),o=a[0],c=a[1],u=0,f=0;if(i&&o&&c){var h=Sn([0,0],e),g=Sn([0,0],r),m=ki(e),x=Math.cos(h-g)*m;if(!r[0])f=x,u=f*n;else if(!r[1])u=x,f=u/n;else{var _=r[0]*o,E=r[1]*c,S=Math.atan2(_+e[0],E+e[1]),T=Math.atan2(_,E);S<0&&(S+=Math.PI*2),T<0&&(T+=Math.PI*2);var D=0;_e(S-T)<Math.PI/2||_e(S-T)>Math.PI/2*3||(T+=Math.PI),D=S-T,D>Math.PI*2?D-=Math.PI*2:D>Math.PI?D=2*Math.PI-D:D<-Math.PI&&(D=-2*Math.PI-D);var k=ki([_+e[0],E+e[1]])*Math.cos(D);u=k*Math.sin(T)-_,f=k*Math.cos(T)-E,r[0]<0&&(u*=-1),r[1]<0&&(f*=-1)}}else u=r[0]*e[0],f=r[1]*e[1];return[u,f]}function sM(t,e,n,r){var i,a=n.ratio,o=n.startOffsetWidth,c=n.startOffsetHeight,u=0,f=0,h=r.distX,g=r.distY,m=r.pinchScale,x=r.parentDistance,_=r.parentDist,E=r.parentScale,S=n.fixedDirection,T=[0,1].map(function(C){return _e(t[C]-S[C])}),D=[0,1].map(function(C){var A=T[C];return A!==0&&(A=2/A),A});if(_)u=_[0],f=_[1],e&&(u?f||(f=u/a):u=f*a);else if(xu(m))u=(m-1)*o,f=(m-1)*c;else if(E)u=(E[0]-1)*o,f=(E[1]-1)*c;else if(x){var k=o*T[0],j=c*T[1],B=ki([k,j]);u=x/B*k*D[0],f=x/B*j*D[1]}else{var z=Ba({datas:n,distX:h,distY:g});z=D.map(function(C,A){return z[A]*C}),i=K(aM([o,c],z,a,t,e),2),u=i[0],f=i[1]}return{distWidth:u,distHeight:f}}function M1(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=K(t.split(" "),2),r=n[0],i=n[1],a=M1(r||""),o=M1(i||""),c=W(W({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function R_(t,e,n){var r=M1(t,!0),i=r.x,a=r.y;return[qt(i,e)||0,qt(a,n)||0]}function W7(t,e,n){var r=t.map(function(a){return Fe(a,e)}),i=r.map(function(a){return ph(a,n)});return{prev:r,next:i,result:i.map(function(a){return St(a,e)})}}function oM(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=Ln(n),o=Ln(i);return a&&o?oM(n,i):!a&&!o?n===i:!1})}function ou(t,e,n,r,i){var a=t._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=n,n;return o===n||r(o)===r(n)?o:(a[e]=n,n)}function Tr(t){return t>=0?1:-1}function _e(t){return Math.abs(t)}function fb(t,e){return qU(t).map(function(n){return e(n)})}function lM(t){return xu(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var K7=vh("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=t.props,c=o.pinchable,u=o.ables;if(!c)return!1;var f="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),g=(c===!0?t.controlAbles:u.filter(function(E){return c.indexOf(E.name)>-1})).filter(function(E){return E.canPinch&&E[h]}),m=ct(t,e,{});r&&(m.targets=r);var x=Ne(t,f,m);n.isPinch=x!==!1,n.ables=g;var _=n.isPinch;return _?(g.forEach(function(E){if(a[E.name]=a[E.name]||{},!!E[h]){var S=W(W({},e),{datas:a[E.name],parentRotate:i,isPinch:!0});E[h](t,S)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},_):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,c=e.targets,u=e.angle;if(n.isPinch){var f=i*(1-1/r),h=ct(t,e,{});c&&(h.targets=c);var g="onPinch".concat(c?"Group":"");Ne(t,g,h);var m=n.ables,x="drag".concat(c?"Group":"","Control");return m.forEach(function(_){_[x]&&_[x](t,W(W({},e),{datas:a[_.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:f,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(n.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=si(t,e,{isDrag:r});a&&(u.targets=a),Ne(t,c,u);var f=n.ables,h="drag".concat(a?"Group":"","ControlEnd");return f.forEach(function(g){g[h]&&g[h](t,W(W({},e),{isDrag:r,datas:o[g.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,W(W({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,W(W({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,W(W({},e),{targets:t.props.targets}))}}),x2=A_("scalable"),Q7={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:RI("scalable"),dragControlCondition:x2,viewClassName:T_("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=eM(a,r,i,n),c=t.state,u=c.width,f=c.height,h=c.targetTransform,g=c.target,m=c.pos1,x=c.pos2,_=c.pos4;if(!o||!g)return!1;r||Zl(t,e),n.datas={},n.transform=h,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=u,n.startOffsetHeight=f,n.startValue=[1,1];var E=!o[0]&&!o[1]||o[0]||!o[1];i0(t,e,"scale"),n.isWidth=E;function S(z){n.ratio=z&&isFinite(z)?z:0}n.startPositions=Ni(t.state);function T(z){var C=BI(n.startPositions,z);n.fixedDirection=C.fixedDirection,n.fixedPosition=C.fixedPosition,n.fixedOffset=C.fixedOffset}n.setFixedDirection=T,S(ps(m,x)/ps(x,_)),T([-o[0],-o[1]]);var D=function(z){n.minScaleSize=z},k=function(z){n.maxScaleSize=z};D([-1/0,-1/0]),k([1/0,1/0]);var j=ct(t,e,W(W({direction:o,set:function(z){n.startValue=z},setRatio:S,setFixedDirection:T,setMinScaleSize:D,setMaxScaleSize:k},r0(t,e)),{dragStart:Sr.dragStart(t,new wu().dragStart([0,0],e))})),B=Ne(t,"onScaleStart",j);return n.startFixedDirection=n.fixedDirection,B!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?j:!1},dragControl:function(t,e){t0(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,c=e.isRequest,u=e.useSnap,f=e.resolveMatrix,h=n.prevDist,g=n.direction,m=n.startOffsetWidth,x=n.startOffsetHeight,_=n.isScale,E=n.startValue,S=n.isWidth,T=n.ratio;if(!_)return!1;var D=t.props,k=D.throttleScale,j=D.parentMoveable,B=g;!g[0]&&!g[1]&&(B=[1,1]);var z=T&&(r??D.keepRatio)||!1,C=t.state,A=[E[0],E[1]];function N(){var be=sM(B,z,n,e),Ee=be.distWidth,$e=be.distHeight,Pe=m?(m+Ee)/m:1,ze=x?(x+$e)/x:1;E[0]||(A[0]=Ee/m),E[1]||(A[1]=$e/x);var Me=(B[0]||z?Pe:1)*A[0],et=(B[1]||z?ze:1)*A[1];return Me===0&&(Me=Tr(h[0])*hg),et===0&&(et=Tr(h[1])*hg),[Me,et]}var O=N();if(!a&&t.props.groupable){var L=C.snapRenderInfo||{},V=L.direction;Ln(V)&&(V[0]||V[1])&&(C.snapRenderInfo={direction:g,request:e.isRequest})}Ne(t,"onBeforeScale",ct(t,e,{scale:O,setFixedDirection:function(be){return n.setFixedDirection(be),O=N(),O},startFixedDirection:n.startFixedDirection,setScale:function(be){O=be}},!0));var M=[O[0]/A[0],O[1]/A[1]],J=o,Q=[0,0],$=Tr(M[0]*M[1]),H=!o&&!i&&a;if(H||f?J=g_(t,n.targetAllTransform,[0,0],[0,0],n):o||(J=n.fixedPosition),a||(Q=R7(t,M,g,!u&&c,n)),z){B[0]&&B[1]&&Q[0]&&Q[1]&&(Math.abs(Q[0]*m)>Math.abs(Q[1]*x)?Q[1]=0:Q[0]=0);var ee=!Q[0]&&!Q[1];if(ee&&(S?M[0]=rt(M[0]*A[0],k)/A[0]:M[1]=rt(M[1]*A[1],k)/A[1]),B[0]&&!B[1]||Q[0]&&!Q[1]||ee&&S){M[0]+=Q[0];var te=m*M[0]*A[0]/T;M[1]=Tr($*M[0])*_e(te/x/A[1])}else if(!B[0]&&B[1]||!Q[0]&&Q[1]||ee&&!S){M[1]+=Q[1];var ue=x*M[1]*A[1]*T;M[0]=Tr($*M[1])*_e(ue/m/A[0])}}else M[0]+=Q[0],M[1]+=Q[1],Q[0]||(M[0]=rt(M[0]*A[0],k)/A[0]),Q[1]||(M[1]=rt(M[1]*A[1],k)/A[1]);M[0]===0&&(M[0]=Tr(h[0])*hg),M[1]===0&&(M[1]=Tr(h[1])*hg),O=I7(M,[A[0],A[1]]);var U=[m,x],Y=[m*O[0],x*O[1]];Y=IN(Y,n.minScaleSize,n.maxScaleSize,z?T:!1),O=fb(2,function(be){return U[be]?Y[be]/U[be]:Y[be]}),M=fb(2,function(be){return O[be]/A[be]});var ne=fb(2,function(be){return h[be]?M[be]/h[be]:M[be]}),ae="scale(".concat(M.join(", "),")"),he="scale(".concat(O.join(", "),")"),ie=n0(n,he,ae),me=!E[0]||!E[1],Te=RF(t,me?he:ae,n.fixedDirection,J,n.fixedOffset,n,me),Ae=H?Te:Fe(Te,n.prevInverseDist||[0,0]);if(n.prevDist=M,n.prevInverseDist=Te,O[0]===h[0]&&O[1]===h[1]&&Ae.every(function(be){return!be})&&!j&&!H)return!1;var De=ct(t,e,W({offsetWidth:m,offsetHeight:x,direction:g,scale:O,dist:M,delta:ne,isPinch:!!a},wI(t,ie,Ae,a,e)));return Ne(t,"onScale",De),De},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=si(t,e,{});return Ne(t,"onScaleEnd",r),r},dragGroupControlCondition:x2,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=Zi(t,"resizable",e);n.moveableScale=t.scale;var a=gs(t,this,"dragControlStart",e,function(f,h){return dm(t,f,n,h)}),o=function(f){r.setFixedDirection(f),a.forEach(function(h,g){h.setFixedDirection(f),dm(t,h.moveable,n,i[g])})};n.setFixedDirection=o;var c=W(W({},r),{targets:t.props.targets,events:a,setFixedDirection:o}),u=Ne(t,"onScaleGroupStart",c);return n.isScale=u!==!1,n.isScale?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){c0(t,"onBeforeScale",function(h){Ne(t,"onBeforeScaleGroup",ct(t,e,W(W({},h),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,c=n.fixedPosition,u=gs(t,this,"dragControl",e,function(h,g){var m=K(xr(gh(t.rotation/180*Math.PI,3),[g.datas.originalX*i[0],g.datas.originalY*i[1],1],3),2),x=m[0],_=m[1];return W(W({},g),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:St(c,[x,_])})}),f=W({targets:t.props.targets,events:u},r);return Ne(t,"onScaleGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=gs(t,this,"dragControlEnd",e),a=si(t,e,{targets:t.props.targets,events:i});return Ne(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function co(t,e){return t.map(function(n,r){return sm(n,e[r],1,2)})}function _2(t,e,n){var r=Sn(t,e),i=Sn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function Z7(t,e){var n=_2(t[0],t[1],t[2]),r=_2(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var J7={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:T_("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var c=t.state,u=c.pos1,f=c.pos2,h=c.pos3,g=c.pos4,m=co(u,f),x=co(f,u),_=co(u,h),E=co(h,u),S=co(h,g),T=co(g,h),D=co(f,g),k=co(g,f);return Se([e.createElement("div",{className:Be("line"),key:"middeLine1",style:of(m,S,o)}),e.createElement("div",{className:Be("line"),key:"middeLine2",style:of(x,T,o)}),e.createElement("div",{className:Be("line"),key:"middeLine3",style:of(_,D,o)}),e.createElement("div",{className:Be("line"),key:"middeLine4",style:of(E,k,o)})],K(DI(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return qn(n,Be("direction"))&&qn(n,Be("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,o=tM(a,n);if(!o||!i)return!1;var c=t.state,u=c.transformOrigin,f=c.is3d,h=c.targetTransform,g=c.targetMatrix,m=c.width,x=c.height,_=c.left,E=c.top;n.datas={},n.targetTransform=h,n.warpTargetMatrix=f?g:ea(g,3,4),n.targetInverseMatrix=rI(Oa(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=_,n.top=E,n.poses=[[0,0],[m,0],[0,x],[m,x]].map(function(D){return Fe(D,u)}),n.nextPoses=n.poses.map(function(D){var k=K(D,2),j=k[0],B=k[1];return xr(n.warpTargetMatrix,[j,B,0,1],4)}),n.startValue=Jt(4),n.prevMatrix=Jt(4),n.absolutePoses=Ni(c),n.posIndexes=_I(o),Zl(t,e),i0(t,e,"matrix3d"),c.snapRenderInfo={request:e.isRequest,direction:o};var S=ct(t,e,W({set:function(D){n.startValue=D}},r0(t,e))),T=Ne(t,"onWarpStart",S);return T!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=n.targetInverseMatrix,c=n.prevMatrix,u=n.isWarp,f=n.startValue,h=n.poses,g=n.posIndexes,m=n.absolutePoses;if(!u)return!1;if(t0(t,e,"matrix3d"),Hu(t,"warpable")){var x=g.map(function(N){return m[N]});x.length>1&&x.push([(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2]);var _=o0(t,r,{horizontal:x.map(function(N){return N[1]+a}),vertical:x.map(function(N){return N[0]+i})}),E=_.horizontal,S=_.vertical;a-=E.offset,i-=S.offset}var T=Ba({datas:n,distX:i,distY:a},!0),D=n.nextPoses.slice();if(g.forEach(function(N){D[N]=St(D[N],T)}),!yF.every(function(N){return Z7(N.map(function(O){return h[O]}),N.map(function(O){return D[O]}))}))return!1;var k=c_(h[0],h[2],h[1],h[3],D[0],D[2],D[1],D[3]);if(!k.length)return!1;var j=$t(o,k,4),B=bI(n,j,!0),z=$t(Oa(c,4),B,4);n.prevMatrix=B;var C=$t(f,B,4),A=n0(n,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(B.join(", "),")"));return p_(e,A),Ne(t,"onWarp",ct(t,e,W({delta:z,matrix:C,dist:B,multiply:$t,transform:A},Cr({transform:A},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Ne(t,"onWarpEnd",si(t,e,{})),r):!1}},eG=Be("area-pieces"),bg=Be("area-piece"),cM=Be("avoid"),tG=Be("view-dragging");function hb(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;jN(e,cM),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function w2(t){return t.createElement("div",{key:"area_pieces",className:eG},t.createElement("div",{className:bg}),t.createElement("div",{className:bg}),t.createElement("div",{className:bg}),t.createElement("div",{className:bg}))}var uM={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,c=t.getState(),u=c.width,f=c.height,h=c.renderPoses,g=o?Be("area","pass"):Be("area");if(a)return[e.createElement("div",{key:"area",ref:hs(t,"areaElement"),className:g}),w2(e)];if(!r||!i)return[];var m=c_([0,0],[u,0],[0,f],[u,f],h[0],h[1],h[2],h[3]),x=m.length?l0(m,!0):"none";return[e.createElement("div",{key:"area",ref:hs(t,"areaElement"),className:g,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:x}}),w2(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var o=t.areaElement,c=t.state,u=c.moveableClientRect,f=c.renderPoses,h=c.rootMatrix,g=c.is3d,m=u.left,x=u.top,_=Ci(f),E=_.left,S=_.top,T=_.width,D=_.height,k=g?4:3,j=K(Tu(h,[r-m,i-x],k),2),B=j[0],z=j[1];B-=E,z-=S;var C=[{left:E,top:S,width:T,height:z-10},{left:E,top:S,width:B-10,height:D},{left:E,top:S+z+10,width:T,height:D-z-10},{left:E+B+10,top:S,width:T-B-10,height:D}],A=[].slice.call(o.nextElementSibling.children);C.forEach(function(N,O){A[O].style.cssText="left: ".concat(N.left,"px;top: ").concat(N.top,"px; width: ").concat(N.width,"px; height: ").concat(N.height,"px;")}),PN(o,cM),c.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,hb(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||hb(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){hb(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&NN(function(){e.disableNativeEvent=!1})}},nG=vh("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,o=t.getState(),c=o.beforeOrigin,u=o.rotation,f=o.svg,h=o.allMatrix,g=o.is3d,m=o.left,x=o.top,_=o.offsetWidth,E=o.offsetHeight,S;if(!a&&f&&i){var T=K(R_(i,_,E),2),D=T[0],k=T[1],j=g?4:3,B=sn(h,[D,k],j);S=gm(u,r,Fe(B,[m,x]))}else S=gm(u,r,c);return[e.createElement("div",{className:Be("control","origin"),style:S,key:"beforeOrigin"})]}});function rG(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var iG={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,o=new V8,c=Aa(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",f=e.targets;o.on("scroll",function(h){var g=h.container,m=h.direction,x=ct(t,e,{scrollContainer:g,direction:m}),_=f?"onScrollGroup":"onScroll";f&&(x.targets=f),Ne(t,_,x)}).on("move",function(h){var g=h.offsetX,m=h.offsetY,x=h.inputEvent;t[u].scrollBy(g,m,x.inputEvent,!1)}).on("scrollDrag",function(h){var g=h.next;g(t[u].getCurrentEvent())}),o.dragStart(e,W({container:c},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,f=u===void 0?0:u,h=r.getScrollPosition,g=h===void 0?rG:h,m=r.scrollOptions;return n.drag(e,W({container:a,threshold:c,throttleTime:f,getScrollPosition:function(x){return g({scrollContainer:x.container,direction:x.direction})}},m)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,W(W({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,W(W({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,W(W({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,W(W({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,W(W({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,W(W({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,W(W({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},dM={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},aG=vh("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=lM(n.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=t.getState(),f=u.renderPoses,h=u.pos1,g=u.pos2,m=u.pos3,x=u.pos4,_=[h,g,m,x],E=[];return i>0&&E.push([0,2]),a>0&&E.push([0,1]),o>0&&E.push([1,3]),c>0&&E.push([2,3]),E.map(function(S,T){var D=K(S,2),k=D[0],j=D[1],B=_[k],z=_[j],C=f[k],A=f[j],N=c_([0,0],[100,0],[0,100],[100,100],B,z,C,A);if(N.length)return e.createElement("div",{key:"padding".concat(T),className:Be("padding"),style:{transform:l0(N,!0)}})})}}),E2=["nw","ne","se","sw"];function xg(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var sG=[1,2,5,6],oG=[0,3,4,7],Al=[1,-1,-1,1],Cl=[1,1,-1,-1];function D_(t,e,n,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=n),c===void 0&&(c=r);var u=[],f=!1,h=t.filter(function(m){return!m.virtual}),g=h.map(function(m){var x=m.horizontal,_=m.vertical,E=m.pos;if(_&&!f&&(f=!0,u.push("/")),f){var S=Math.max(0,_===1?E[1]-a:c-E[1]);return u.push(Hi(S,r,e)),S}else{var S=Math.max(0,x===1?E[0]-i:o-E[0]);return u.push(Hi(S,n,e)),S}});return{radiusPoses:h,styles:u,raws:g}}function fM(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function hM(t,e,n,r,i,a,o){var c,u,f,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var g=t.indexOf("/"),m=(g>-1?t.slice(0,g):t).length,x=t.slice(0,m),_=t.slice(m+1),E=x.length,S=_.length,T=S>0,D=K(x,4),k=D[0],j=k===void 0?"0px":k,B=D[1],z=B===void 0?j:B,C=D[2],A=C===void 0?j:C,N=D[3],O=N===void 0?z:N,L=K(_,4),V=L[0],M=V===void 0?j:V,J=L[1],Q=J===void 0?T?M:z:J,$=L[2],H=$===void 0?T?M:A:$,ee=L[3],te=ee===void 0?T?Q:O:ee,ue=[j,z,A,O].map(function(ie){return qt(ie,e)}),U=[M,Q,H,te].map(function(ie){return qt(ie,n)}),Y=ue.slice(),ne=U.slice();c=K(xg([Y[0],Y[1]],e),2),Y[0]=c[0],Y[1]=c[1],u=K(xg([Y[3],Y[2]],e),2),Y[3]=u[0],Y[2]=u[1],f=K(xg([ne[0],ne[3]],n),2),ne[0]=f[0],ne[3]=f[1],h=K(xg([ne[1],ne[2]],n),2),ne[1]=h[0],ne[2]=h[1];var ae=o?Y:Y.slice(0,Math.max(a[0],E)),he=o?ne:ne.slice(0,Math.max(a[1],S));return Se(Se([],K(ae.map(function(ie,me){var Te=E2[me];return{virtual:me>=E,horizontal:Al[me],vertical:0,pos:[r+ie,i+(Cl[me]===-1?n:0)],sub:!0,raw:ue[me],direction:Te}})),!1),K(he.map(function(ie,me){var Te=E2[me];return{virtual:me>=S,horizontal:0,vertical:Cl[me],pos:[r+(Al[me]===-1?e:0),i+ie],sub:!0,raw:U[me],direction:Te}})),!1)}function lG(t,e,n,r,i){i===void 0&&(i=e.length);var a=fM(t.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=n-r,f=0;if(u===0)f=i;else if(u>0&&u<o[1])f=o[1]-u;else if(u>=c[0])f=c[0]+c[1]-u;else return;t.splice(n,f),e.splice(n,f)}function cG(t,e,n,r,i,a,o,c,u,f,h){f===void 0&&(f=0),h===void 0&&(h=0);var g=fM(t.slice(n)),m=g.horizontalRange,x=g.verticalRange;if(r>-1)for(var _=Al[r]===1?a-f:c-a,E=m[1];E<=r;++E){var S=Cl[E]===1?h:u,T=0;if(r===E?T=a:E===0?T=f+_:Al[E]===-1&&(T=c-(e[n][0]-f)),t.splice(n+E,0,{horizontal:Al[E],vertical:0,pos:[T,S]}),e.splice(n+E,0,[T,S]),E===0)break}else if(i>-1){var D=Cl[i]===1?o-h:u-o;if(m[1]===0&&x[1]===0){var k=[f+D,h];t.push({horizontal:Al[0],vertical:0,pos:k}),e.push(k)}for(var j=x[0],E=x[1];E<=i;++E){var T=Al[E]===1?f:c,S=0;if(i===E?S=o:E===0?S=h+D:Cl[E]===1?S=e[n+j][1]:Cl[E]===-1&&(S=u-(e[n+j][1]-h)),t.push({horizontal:0,vertical:Cl[E],pos:[T,S]}),e.push([T,S]),E===0)break}}}function uG(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var dG=[[0,-1,"n"],[1,0,"e"]],fG=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function k_(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,o=i.height,c=e,u=c.type,f=c.poses,h=u==="rect",g=u==="circle";if(u==="polygon")return n.map(function(z){return"".concat(Hi(z[0],a,r)," ").concat(Hi(z[1],o,r))});if(h||u==="inset"){var m=n[1][1],x=n[3][0],_=n[7][0],E=n[5][1];if(h)return[m,x,E,_].map(function(z){return"".concat(z,"px")});var S=[m,a-x,o-E,_].map(function(z,C){return Hi(z,C%2?a:o,r)});if(n.length>8){var T=K(Fe(n[4],n[0]),2),D=T[0],k=T[1];S.push.apply(S,Se(["round"],K(D_(f.slice(8).map(function(z,C){return W(W({},z),{pos:n[C]})}),r,D,k,_,m,x,E).styles),!1))}return S}else if(g||u==="ellipse"){var j=n[0],B=Hi(_e(n[1][1]-j[1]),g?Math.sqrt((a*a+o*o)/2):o,r),S=g?[B]:[Hi(_e(n[2][0]-j[0]),a,r),B];return S.push("at",Hi(j[0],a,r),Hi(j[1],o,r)),S}}function vm(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return fG.map(function(o){var c=K(o,3),u=c[0],f=c[1],h=c[2],g=i[u+1],m=a[f+1];return{vertical:_e(f),horizontal:_e(u),direction:h,pos:[g,m]}})}function pM(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[_e(e[1]-e[0]),_e(n[1]-n[0])]}function S2(t,e,n,r,i){var a,o,c,u,f,h,g,m,x;if(t){var _=i;if(!_){var E=$r(t),S=E("clipPath");_=S!=="none"?S:E("clip")}if(!((!_||_==="none"||_==="auto")&&(_=r,!_))){var T=kN(_),D=T.prefix,k=D===void 0?_:D,j=T.value,B=j===void 0?"":j,z=k==="circle",C=" ";if(k==="polygon"){var A=kl(B||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var N=A.map(function(Nt){var vn=K(Nt.split(" "),2),rn=vn[0],ft=vn[1];return{vertical:1,horizontal:1,pos:[qt(rn,e),qt(ft,n)]}}),O=Gl(N.map(function(Nt){return Nt.pos}));return{type:k,clipText:_,poses:N,splitter:C,left:O.minX,right:O.maxX,top:O.minY,bottom:O.maxY}}else if(z||k==="ellipse"){var L="",V="",M=0,J=0,A=Io(B);if(z){var Q="";a=K(A,4),o=a[0],Q=o===void 0?"50%":o,c=a[2],L=c===void 0?"50%":c,u=a[3],V=u===void 0?"50%":u,M=qt(Q,Math.sqrt((e*e+n*n)/2)),J=M}else{var $="",H="";f=K(A,5),h=f[0],$=h===void 0?"50%":h,g=f[1],H=g===void 0?"50%":g,m=f[3],L=m===void 0?"50%":m,x=f[4],V=x===void 0?"50%":x,M=qt($,e),J=qt(H,n)}var ee=[qt(L,e),qt(V,n)],N=Se([{vertical:1,horizontal:1,pos:ee,direction:"nesw"}],K(dG.slice(0,z?1:2).map(function(rn){return{vertical:_e(rn[1]),horizontal:rn[0],direction:rn[2],sub:!0,pos:[ee[0]+rn[0]*M,ee[1]+rn[1]*J]}})),!1);return{type:k,clipText:_,radiusX:M,radiusY:J,left:ee[0]-M,top:ee[1]-J,right:ee[0]+M,bottom:ee[1]+J,poses:N,splitter:C}}else if(k==="inset"){var A=Io(B||"0 0 0 0"),te=A.indexOf("round"),ue=(te>-1?A.slice(0,te):A).length,U=A.slice(ue+1),Y=K(A.slice(0,ue),4),ne=Y[0],ae=Y[1],he=ae===void 0?ne:ae,ie=Y[2],me=ie===void 0?ne:ie,Te=Y[3],Ae=Te===void 0?he:Te,De=K([ne,me].map(function(rn){return qt(rn,n)}),2),be=De[0],Ee=De[1],$e=K([Ae,he].map(function(rn){return qt(rn,e)}),2),Pe=$e[0],ze=$e[1],Me=e-ze,et=n-Ee,dt=hM(U,Me-Pe,et-be,Pe,be),N=Se(Se([],K(vm(be,Me,et,Pe)),!1),K(dt),!1);return{type:"inset",clipText:_,poses:N,top:be,left:Pe,right:Me,bottom:et,radius:U,splitter:C}}else if(k==="rect"){var A=kl(B||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));C=",";var Oe=K(A.map(function(fr){var hr=uh(fr).value;return hr}),4),qe=Oe[0],ze=Oe[1],Ee=Oe[2],Pe=Oe[3],N=vm(qe,ze,Ee,Pe);return{type:"rect",clipText:_,poses:N,top:qe,right:ze,bottom:Ee,left:Pe,values:A,splitter:C}}}}}function hG(t,e,n,r,i){var a=t[e],o=a.direction,c=a.sub,u=t.map(function(){return[0,0]}),f=o?o.split(""):[];if(r&&e<8){var h=f.filter(function(M){return M==="w"||M==="e"}),g=f.filter(function(M){return M==="n"||M==="s"}),m=h[0],x=g[0];u[e]=n;var _=K(pM(t),2),E=_[0],S=_[1],T=E&&S?E/S:0;if(T&&i){var D=(e+4)%8,k=t[D].pos,j=[0,0];o.indexOf("w")>-1?j[0]=-1:o.indexOf("e")>-1&&(j[0]=1),o.indexOf("n")>-1?j[1]=-1:o.indexOf("s")>-1&&(j[1]=1);var B=aM([E,S],n,T,j,!0),z=E+B[0],C=S+B[1],A=k[1],N=k[1],O=k[0],L=k[0];j[0]===-1?O=L-z:j[0]===1?L=O+z:(O=O-z/2,L=L+z/2),j[1]===-1?A=N-C:(j[1]===1||(A=N-C/2),N=A+C);var V=vm(A,L,N,O);t.forEach(function(M,J){u[J][0]=V[J].pos[0]-M.pos[0],u[J][1]=V[J].pos[1]-M.pos[1]})}else t.forEach(function(M,J){var Q=M.direction;Q&&(Q.indexOf(m)>-1&&(u[J][0]=n[0]),Q.indexOf(x)>-1&&(u[J][1]=n[1]))}),m&&(u[1][0]=n[0]/2,u[5][0]=n[0]/2),x&&(u[3][1]=n[1]/2,u[7][1]=n[1]/2)}else o&&!c?f.forEach(function(M){var J=M==="n"||M==="s";t.forEach(function(Q,$){var H=Q.direction,ee=Q.horizontal,te=Q.vertical;!H||H.indexOf(M)===-1||(u[$]=[J||!ee?0:n[0],!J||!te?0:n[1]])})}):u[e]=n;return u}function pG(t,e){var n=K(yI(t,e),2),r=n[0],i=n[1],a=e.datas,o=a.clipPath,c=a.clipIndex,u=o,f=u.type,h=u.poses,g=u.splitter,m=h.map(function(D){return D.pos});if(f==="polygon")m.splice(c,0,[r,i]);else if(f==="inset"){var x=sG.indexOf(c),_=oG.indexOf(c),E=h.length;if(cG(h,m,8,x,_,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),E===h.length)return}else return;var S=k_(t,o,m),T="".concat(f,"(").concat(S.join(g),")");Ne(t,"onClip",ct(t,e,W({clipEventType:"added",clipType:f,poses:m,clipStyles:S,clipStyle:T,distX:0,distY:0},Cr({clipPath:T},e))))}function gG(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,f=c.map(function(x){return x.pos}),h=f.length;if(o==="polygon")c.splice(i,1),f.splice(i,1);else if(o==="inset"){if(i<8||(lG(c,f,i,8,h),h===c.length))return}else return;var g=k_(t,r,f),m="".concat(o,"(").concat(g.join(u),")");Ne(t,"onClip",ct(t,e,W({clipEventType:"removed",clipType:o,poses:f,clipStyles:g,clipStyle:m,distX:0,distY:0},Cr({clipPath:m},e))))}var mG={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,c=n.groupable,u=t.getState(),f=u.target,h=u.width,g=u.height,m=u.allMatrix,x=u.is3d,_=u.left,E=u.top,S=u.pos1,T=u.pos2,D=u.pos3,k=u.pos4,j=u.clipPathState,B=u.snapBoundInfos,z=u.rotation;if(!f||c)return[];var C=S2(f,h,g,i||"inset",j||r);if(!C)return[];var A=x?4:3,N=C.type,O=C.poses,L=O.map(function(ze){var Me=sn(m,ze.pos,A);return[Me[0]-_,Me[1]-E]}),V=[],M=[],J=N==="rect",Q=N==="inset",$=N==="polygon";if(J||Q||$){var H=Q?L.slice(0,8):L;M=H.map(function(ze,Me){var et=Me===0?H[H.length-1]:H[Me-1],dt=Sn(et,ze),Oe=KI(et,ze);return e.createElement("div",{key:"clipLine".concat(Me),className:Be("line","clip-line","snap-control"),"data-clip-index":Me,style:{width:"".concat(Oe,"px"),transform:"translate(".concat(et[0],"px, ").concat(et[1],"px) rotate(").concat(dt,"rad) scaleY(").concat(o,")")}})})}if(V=L.map(function(ze,Me){return e.createElement("div",{key:"clipControl".concat(Me),className:Be("control","clip-control","snap-control"),"data-clip-index":Me,style:{transform:"translate(".concat(ze[0],"px, ").concat(ze[1],"px) rotate(").concat(z,"rad) scale(").concat(o,")")}})}),Q&&V.push.apply(V,Se([],K(L.slice(8).map(function(ze,Me){return e.createElement("div",{key:"clipRadiusControl".concat(Me),className:Be("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Me,style:{transform:"translate(".concat(ze[0],"px, ").concat(ze[1],"px) rotate(").concat(z,"rad) scale(").concat(o,")")}})})),!1)),N==="circle"||N==="ellipse"){var ee=C.left,te=C.top,ue=C.radiusX,U=C.radiusY,Y=K(Fe(sn(m,[ee,te],A),sn(m,[0,0],A)),2),ne=Y[0],ae=Y[1],he="none";if(!a){for(var ie=Math.max(10,ue/5,U/5),me=[],Te=0;Te<=ie;++Te){var Ae=Math.PI*2/ie*Te;me.push([ue+(ue-o)*Math.cos(Ae),U+(U-o)*Math.sin(Ae)])}me.push([ue,-2]),me.push([-2,-2]),me.push([-2,U*2+2]),me.push([ue*2+2,U*2+2]),me.push([ue*2+2,-2]),me.push([ue,-2]),he="polygon(".concat(me.map(function(ze){return"".concat(ze[0],"px ").concat(ze[1],"px")}).join(", "),")")}V.push(e.createElement("div",{key:"clipEllipse",className:Be("clip-ellipse","snap-control"),style:{width:"".concat(ue*2,"px"),height:"".concat(U*2,"px"),clipPath:he,transform:"translate(".concat(-_+ne,"px, ").concat(-E+ae,"px) ").concat(l0(m))}}))}if(a){var De=Ci(Se([S,T,D,k],K(L),!1)),be=De.width,Ee=De.height,$e=De.left,Pe=De.top;if($||J||Q){var me=Q?L.slice(0,8):L;V.push(e.createElement("div",{key:"clipArea",className:Be("clip-area","snap-control"),style:{width:"".concat(be,"px"),height:"".concat(Ee,"px"),transform:"translate(".concat($e,"px, ").concat(Pe,"px)"),clipPath:"polygon(".concat(me.map(function(Me){return"".concat(Me[0]-$e,"px ").concat(Me[1]-Pe,"px")}).join(", "),")")}}))}}return B&&["vertical","horizontal"].forEach(function(ze){var Me=B[ze],et=ze==="horizontal";Me.isSnap&&M.push.apply(M,Se([],K(Me.snap.posInfos.map(function(dt,Oe){var qe=dt.pos,Nt=Fe(sn(m,et?[0,qe]:[qe,0],A),[_,E]),vn=Fe(sn(m,et?[h,qe]:[qe,g],A),[_,E]);return qf(e,"",Nt,vn,o,"clip".concat(ze,"snap").concat(Oe),"guideline")})),!1)),Me.isBound&&M.push.apply(M,Se([],K(Me.bounds.map(function(dt,Oe){var qe=dt.pos,Nt=Fe(sn(m,et?[0,qe]:[qe,0],A),[_,E]),vn=Fe(sn(m,et?[h,qe]:[qe,g],A),[_,E]);return qf(e,"",Nt,vn,o,"clip".concat(ze,"bounds").concat(Oe),"guideline","bounds","bold")})),!1))}),Se(Se([],K(V),!1),K(M),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,W(W({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,c=n.width,u=n.height,f=e.inputEvent?e.inputEvent.target:null,h=f&&f.getAttribute("class")||"",g=e.datas,m=S2(o,c,u,i||"inset",a);if(!m)return!1;var x=m.clipText,_=m.type,E=m.poses,S=Ne(t,"onClipStart",ct(t,e,{clipType:_,clipStyle:x,poses:E.map(function(T){return T.pos})}));return S===!1?(g.isClipStart=!1,!1):(g.isControl=h&&h.indexOf("clip-control")>-1,g.isLine=h.indexOf("clip-line")>-1,g.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,g.clipIndex=f?parseInt(f.getAttribute("data-clip-index"),10):-1,g.clipPath=m,g.isClipStart=!0,n.clipPathState=x,Zl(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.originalDatas,c=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,f=u.isControl,h=u.isLine,g=u.isArea,m=u.clipIndex,x=u.clipPath;if(!x)return!1;var _=ql(t.props,"clippable"),E=_.keepRatio,S=0,T=0,D=o.draggable,k=Ba(e);c&&D?(n=K(D.prevBeforeDist,2),S=n[0],T=n[1]):(r=K(k,2),S=r[0],T=r[1]);var j=[S,T],B=t.state,z=B.width,C=B.height,A=!g&&!f&&!h,N=x.type,O=x.poses,L=x.splitter,V=O.map(function(We){return We.pos});A&&(S=-S,T=-T);var M=!f||O[m].direction==="nesw",J=N==="inset"||N==="rect",Q=O.map(function(){return[0,0]});if(f&&!M){var $=O[m],H=$.horizontal,ee=$.vertical,te=[S*_e(H),T*_e(ee)];Q=hG(O,m,te,J,E)}else M&&(Q=V.map(function(){return[S,T]}));var ue=V.map(function(We,It){return St(We,Q[It])}),U=Se([],K(ue),!1);B.snapBoundInfos=null;var Y=x.type==="circle",ne=x.type==="ellipse";if(Y||ne){var ae=Ci(ue),he=_e(ae.bottom-ae.top),ie=_e(ne?ae.right-ae.left:he),me=ue[0][1]+he,Te=ue[0][0]-ie,Ae=ue[0][0]+ie;Y&&(U.push([Ae,ae.bottom]),Q.push([1,0])),U.push([ae.left,me]),Q.push([0,1]),U.push([Te,ae.bottom]),Q.push([1,0])}var De=qI((_.clipHorizontalGuidelines||[]).map(function(We){return qt("".concat(We),C)}),(_.clipVerticalGuidelines||[]).map(function(We){return qt("".concat(We),z)}),z,C),be=[],Ee=[];if(Y||ne)be=[U[4][0],U[2][0]],Ee=[U[1][1],U[3][1]];else if(J){var $e=[U[0],U[2],U[4],U[6]],Pe=[Q[0],Q[2],Q[4],Q[6]];be=$e.filter(function(We,It){return Pe[It][0]}).map(function(We){return We[0]}),Ee=$e.filter(function(We,It){return Pe[It][1]}).map(function(We){return We[1]})}else be=U.filter(function(We,It){return Q[It][0]}).map(function(We){return We[0]}),Ee=U.filter(function(We,It){return Q[It][1]}).map(function(We){return We[1]});var ze=[0,0],Me=l2(De,_.clipTargetBounds&&{left:0,top:0,right:z,bottom:C},be,Ee,5,5),et=Me.horizontal,dt=Me.vertical,Oe=et.offset,qe=dt.offset;if(et.isBound&&(ze[1]+=Oe),dt.isBound&&(ze[0]+=qe),(ne||Y)&&Q[0][0]===0&&Q[0][1]===0){var ae=Ci(ue),Nt=ae.bottom-ae.top,vn=ne?ae.right-ae.left:Nt,rn=dt.isBound?_e(qe):dt.snapIndex===0?-qe:qe,ft=et.isBound?_e(Oe):et.snapIndex===0?-Oe:Oe;vn-=rn,Nt-=ft,Y&&(Nt=jI(dt,et)>0?Nt:vn,vn=Nt);var Ot=U[0];U[1][1]=Ot[1]-Nt,U[2][0]=Ot[0]+vn,U[3][1]=Ot[1]+Nt,U[4][0]=Ot[0]-vn}else if(J&&E&&f){var fr=K(pM(O),2),hr=fr[0],Yr=fr[1],Ns=hr&&Yr?hr/Yr:0,je=O[m],He=je.direction||"",Ii=U[1][1],me=U[5][1],Te=U[7][0],Ae=U[3][0];_e(Oe)<=_e(qe)?Oe=Tr(Oe)*_e(qe)/Ns:qe=Tr(qe)*_e(Oe)*Ns,He.indexOf("w")>-1?Te-=qe:He.indexOf("e")>-1?Ae-=qe:(Te+=qe/2,Ae-=qe/2),He.indexOf("n")>-1?Ii-=Oe:He.indexOf("s")>-1?me-=Oe:(Ii+=Oe/2,me-=Oe/2);var Lt=vm(Ii,Ae,me,Te);U.forEach(function(Pt,Tn){var dn;dn=K(Lt[Tn].pos,2),Pt[0]=dn[0],Pt[1]=dn[1]})}else U.forEach(function(We,It){var Et=Q[It];Et[0]&&(We[0]-=qe),Et[1]&&(We[1]-=Oe)});var Wt=k_(t,x,ue),yn="".concat(N,"(").concat(Wt.join(L),")");if(B.clipPathState=yn,Y||ne)be=[U[4][0],U[2][0]],Ee=[U[1][1],U[3][1]];else if(J){var $e=[U[0],U[2],U[4],U[6]];be=$e.map(function(It){return It[0]}),Ee=$e.map(function(It){return It[1]})}else be=U.map(function(We){return We[0]}),Ee=U.map(function(We){return We[1]});if(B.snapBoundInfos=l2(De,_.clipTargetBounds&&{left:0,top:0,right:z,bottom:C},be,Ee,1,1),D){var Rt=B.is3d,Tt=B.allMatrix,Zn=Rt?4:3,an=ze;c&&(an=[j[0]+ze[0]-k[0],j[1]+ze[1]-k[1]]),D.deltaOffset=$t(Tt,[an[0],an[1],0,0],Zn)}return Ne(t,"onClip",ct(t,e,W({clipEventType:"changed",clipType:N,poses:ue,clipStyle:yn,clipStyles:Wt,distX:S,distY:T},Cr((i={},i[N==="rect"?"clip":"clipPath"]=yn,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(Ne(t,"onClipEnd",si(t,e,{})),i&&(c?gG(t,e):a&&pG(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},vG={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":qn(e.inputEvent.target,Be("origin"))},dragControlStart:function(t,e){var n=e.datas;Zl(t,e);var r=ct(t,e,{dragStart:Sr.dragStart(t,new wu().dragStart([0,0],e))}),i=Ne(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=K(Ba(e),2),o=a[0],c=a[1],u=t.state,f=u.width,h=u.height,g=u.offsetMatrix,m=u.targetMatrix,x=u.is3d,_=t.props.originRelative,E=_===void 0?!0:_,S=x?4:3,T=[o,c];if(i){var D=e.distOrigin;(D[0]||D[1])&&(T=D)}var k=St(n.startOrigin,T),j=St(n.startTargetOrigin,T),B=Fe(T,n.prevOrigin),z=bh(g,m,k,S),C=t.getRect(),A=Ci(Jl(z,f,h,S)),N=[C.left-A.left,C.top-A.top];n.prevOrigin=T;var O=[Hi(j[0],f,E),Hi(j[1],h,E)].join(" "),L=Sr.drag(t,yh(e,t.state,N,!!r)),V=ct(t,e,W(W({width:f,height:h,origin:k,dist:T,delta:B,transformOrigin:O,drag:L},Cr({transformOrigin:O,transform:L.transform},e)),{afterTransform:L.transform}));return Ne(t,"onDragOrigin",V),V},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Ne(t,"onDragOriginEnd",si(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-n.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-n.top:"deltaY"in c&&(i+=c.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function yG(t,e,n,r){var i=t.filter(function(u){var f=u.virtual,h=u.horizontal;return h&&!f}).length,a=t.filter(function(u){var f=u.virtual,h=u.vertical;return h&&!f}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var c=t[o];bG(t,o),o<4?c.pos[0]=n:c.pos[1]=r}}function bG(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function xG(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function T2(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Io(t),hM(a,e,n,0,0,r,i)}function A2(t,e,n,r,i){var a=t.state,o=a.width,c=a.height,u=D_(i,t.props.roundRelative,o,c),f=u.raws,h=u.styles,g=u.radiusPoses,m=uG(g,f),x=m.horizontals,_=m.verticals,E=h.join(" ");a.borderRadiusState=E;var S=ct(t,e,W({horizontals:x,verticals:_,borderRadius:E,width:o,height:c,delta:r,dist:n},Cr({borderRadius:E},e)));return Ne(t,"onRound",S),S}function C2(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&(a?.props.target===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=S_(o).borderRadius,r.borderRadius=i))}return i}var _G={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Be("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,o=n.allMatrix,c=n.is3d,u=n.left,f=n.top,h=n.borderRadiusState,g=t.props,m=g.minRoundControls,x=m===void 0?[0,0]:m,_=g.maxRoundControls,E=_===void 0?[4,4]:_,S=g.zoom,T=g.roundPadding,D=T===void 0?0:T,k=g.isDisplayShadowRoundControls,j=g.groupable;if(!r)return null;var B=h||C2(t),z=c?4:3,C=T2(B,i,a,x,!0);if(!C)return null;var A=0,N=0,O=j?[0,0]:[u,f];return C.map(function(L,V){var M=L.horizontal,J=L.vertical,Q=L.direction||"",$=Se([],K(L.pos),!1);N+=Math.abs(M),A+=Math.abs(J),M&&Q.indexOf("n")>-1&&($[1]-=D),J&&Q.indexOf("w")>-1&&($[0]-=D),M&&Q.indexOf("s")>-1&&($[1]+=D),J&&Q.indexOf("e")>-1&&($[0]+=D);var H=Fe(sn(o,$,z),O),ee=k&&k!=="horizontal",te=L.vertical?A<=E[1]&&(ee||!L.virtual):N<=E[0]&&(k||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(V),className:Be("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":V,style:{display:te?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(S,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,f=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(f=parseInt(h.replace(/render-line-/g,""),10),isNaN(f)&&(f=-1))}if(!o&&!c)return!1;var g=ct(t,e,{}),m=Ne(t,"onRoundStart",g);if(m===!1)return!1;r.lineIndex=f,r.controlIndex=u,r.isControl=o,r.isLine=c,Zl(t,e);var x=t.props,_=x.roundRelative,E=x.minRoundControls,S=E===void 0?[0,0]:E,T=t.state,D=T.width,k=T.height;r.isRound=!0,r.prevDist=[0,0];var j=C2(t),B=T2(j||"",D,k,S,!0)||[];return r.controlPoses=B,T.borderRadiusState=D_(B,_,D,k).styles.join(" "),g},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=K(Ba(e),2),o=a[0],c=a[1],u=[o,c],f=Fe(u,n.prevDist),h=t.props.maxRoundControls,g=h===void 0?[4,4]:h,m=t.state,x=m.width,_=m.height,E=r[i],S=E.vertical,T=E.horizontal,D=r.map(function(j){var B=j.horizontal,z=j.vertical,C=[B*T*u[0],z*S*u[1]];if(B){if(g[0]===1)return C;if(g[0]<4&&B!==T)return C}else{if(g[1]===0)return C[1]=z*T*u[0]/x*_,C;if(S){if(g[1]===1)return C;if(g[1]<4&&z!==S)return C}}return[0,0]});D[i]=u;var k=r.map(function(j,B){return W(W({},j),{pos:St(j.pos,D[B])})});return i<4?k.slice(0,i+1).forEach(function(j){j.virtual=!1}):k.slice(4,i+1).forEach(function(j){j.virtual=!1}),n.prevDist=[o,c],A2(t,e,u,f,k)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,f=r.controlPoses,h=f.filter(function(T){var D=T.virtual;return D}).length,g=t.props.roundClickable,m=g===void 0?!0:g;if(i&&m){if(a&&(m===!0||m==="control"))xG(f,o);else if(c&&(m===!0||m==="line")){var x=K(yI(t,e),2),_=x[0],E=x[1];yG(f,u,_,E)}h!==f.filter(function(T){var D=T.virtual;return D}).length&&A2(t,e,[0,0],[0,0],f)}var S=si(t,e,{});return Ne(t,"onRoundEnd",S),n.borderRadiusState="",S},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Zi(t,"roundable",e),o=W({targets:t.props.targets,events:a.map(function(c,u){return W(W({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},n);return Ne(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Zi(t,"roundable",e),o=W({targets:t.props.targets,events:a.map(function(c,u){return W(W(W({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),Cr({borderRadius:n.borderRadius},c))})},n);return Ne(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=Zi(t,"roundable",e);c0(t,"onRound",function(c){var u=W({targets:t.props.targets,events:i.map(function(f,h){return W(W(W({},f),{target:r[h],moveable:n[h],currentTarget:n[h]}),Cr({borderRadius:c.borderRadius},f))})},c);Ne(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,e);if(!a)return!1;var o=W({targets:t.props.targets,events:i.map(function(c,u){var f;return W(W({},c),{target:r[u],moveable:n[u],currentTarget:n[u],lastEvent:(f=c.datas)===null||f===void 0?void 0:f.lastEvent})})},a);return Ne(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function wG(t,e){var n=e?4:3,r=Jt(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var gM={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(aI(i,!0),")"),c=!a||a==="none"?o:a;e.datas.startTransforms=wG(c,r)?[]:Io(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ct(t,e,{setTransform:function(n){e.datas.startTransforms=Ln(n)?n:Io(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ct(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Ne(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Ne(t,"onBeforeRender",ct(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Ne(t,"onBeforeRenderEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Zi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.setTransform(u,o),n.resetStyle(o),n.fillDragStartParams(u,o)});Ne(t,"onBeforeRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Zi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.resetStyle(o),n.fillDragParams(u,o)});Ne(t,"onBeforeRenderGroup",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Ne(t,"onBeforeRenderGroupEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},mM={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Ne(t,"onRenderStart",ct(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Ne(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Ne(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Ne(t,"onRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Zi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragParams(u,o)});Ne(t,"onRenderGroup",ct(t,e,W(W({isPinch:!!e.isPinch,targets:t.props.targets,transform:pg(e),transformObject:{}},Cr(gg(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=Zi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragEndParams(u,o)});Ne(t,"onRenderGroupEnd",ct(t,e,W({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:pg(e)},Cr(gg(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return _u(um(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ct(t,e,W({isPinch:!!e.isPinch,transformObject:n,transform:pg(e)},Cr(gg(e))))},fillDragEndParams:function(t,e){var n={};return _u(um(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ct(t,e,W({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:pg(e)},Cr(gg(e))))}};function Sf(t,e,n,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",f=i==="After",h=t.state.target,g=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!g&&t.areaElement===a.inputEvent.target)return!1;var x=Se([],K(e),!1);if(g){var _=a.requestAble;x.some(function(V){return V.name===_})||x.push.apply(x,Se([],K(t.props.ables.filter(function(V){return V.name===_})),!1))}if(!x.length||x.every(function(V){return V.dragRelation}))return!1;var E=a.inputEvent,S;u&&E&&(S=document.elementFromPoint(a.clientX,a.clientY)||E.target);var T=!1,D=function(){var V;T=!0,(V=a.stop)===null||V===void 0||V.call(a)},k=c&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());k&&t.updateRect(i,!0,!1);var j=a.datas,B=m?"controlGesto":"targetGesto",z=t[B],C=function(V,M,J){if(!(M in V)||z!==t[B])return!1;var Q=V.name,$=j[Q]||(j[Q]={});if(c&&($.isEventStart=!J||!V[J]||V[J](t,a)),!$.isEventStart)return!1;var H=V[M](t,W(W({},a),{stop:D,datas:$,originalDatas:j,inputTarget:S}));return t._emitter.off(),c&&H===!1&&($.isEventStart=!1),H};k&&x.forEach(function(V){V.unset&&V.unset(t)}),C(gM,"drag".concat(r).concat(i));var A=0,N=0;n.forEach(function(V){if(T)return!1;var M="".concat(V).concat(r).concat(i),J="".concat(V).concat(r,"Condition");i===""&&!g&&H7(t.state,a);var Q=x.filter(function(ee){return ee[M]});Q=Q.filter(function(ee,te){return ee.name&&Q.indexOf(ee)===te});var $=Q.filter(function(ee){return C(ee,M,J)}),H=$.length;T&&++A,H&&++N,!T&&c&&Q.length&&!H&&(A+=Q.filter(function(ee){var te=ee.name,ue=j[te];return ue.isEventStart?ee.dragRelation!=="strong":!1}).length?1:0)}),(!f||N)&&C(mM,"drag".concat(r).concat(i));var O=z!==t[B]||A===n.length;if((u||T||O)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(V){V.state.gestos={}}),x.forEach(function(V){V.unset&&V.unset(t)})),c&&!O&&!g&&N&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||O)return!1;if(!c&&N&&!o||u){var L=t.props.flushSync||YI;L(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!c&&!u&&!f&&N&&!o&&Sf(t,e,n,r,i+"After",a),!0}function N_(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,o=t.areaElement,c=t._dragTarget;return!c||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||qn(a,"moveable-area")||qn(a,"moveable-padding")||qn(a,"moveable-edgeDraggable")}}function vM(t,e,n){var r=t.controlBox,i=[],a=t.props,o=a.dragArea,c=t.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(e),!o&&u&&c&&e!==c&&a.dragTargetSelf&&i.push(c);var f=N_(t);return bM(t,i,"targetAbles",n,{dragStart:f,pinchStart:f})}function yM(t,e){var n=t.controlBox,r=[];r.push(n);var i=N_(t,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===n)return!0;var u=i(o,c);return!u};return bM(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function bM(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",o=t.props,c=o.pinchOutside,u=o.pinchThreshold,f=o.preventClickEventOnDrag,h=o.preventClickDefault,g=o.checkInput,m=o.dragFocusedInput,x=o.preventDefault,_=x===void 0?!0:x,E=o.preventRightClick,S=E===void 0?!0:E,T=o.preventWheelClick,D=T===void 0?!0:T,k=o.dragContainer,j=Aa(k,!0),B={preventDefault:_,preventRightClick:S,preventWheelClick:D,container:j||Eo(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?f:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(A){return t.controlBox.contains(A.target)},checkInput:a?g:!1,dragFocusedInput:m},z=new W8(e,B),C=r==="Control";return["drag","pinch"].forEach(function(A){["Start","","End"].forEach(function(N){z.on("".concat(A).concat(N),function(O){var L,V=O.eventType,M=A==="drag"&&O.isPinch;if(i[V]&&!i[V](O)){O.stop();return}if(!M){var J=A==="drag"?[A]:["drag",A],Q=Se([],K(t[n]),!1),$=Sf(t,Q,J,r,N,O);$?(t.props.stopPropagation||N==="Start"&&C)&&((L=O?.inputEvent)===null||L===void 0||L.stopPropagation()):O.stop()}})})}),z}var EG=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function SG(t,e,n,r){var i;n===void 0&&(n=e);var a=SI(t,e),o=a.matrixes,c=a.is3d,u=a.targetMatrix,f=a.transformOrigin,h=a.targetOrigin,g=a.offsetContainer,m=a.hasFixed,x=a.zoom,_=zF(g,n),E=_.matrixes,S=_.is3d,T=_.offsetContainer,D=_.zoom,k=r,j=4,B=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,z=u,C=Jt(j),A=Jt(j),N=Jt(j),O=Jt(j),L=o.length,V=E.map(function(te){return W(W({},te),{matrix:te.matrix?Se([],K(te.matrix),!1):void 0})}).reverse();o.reverse(),!c&&k&&(z=ea(z,3,4),k1(o)),!S&&k&&k1(V),V.forEach(function(te){A=$t(A,te.matrix,j)});var M=n||qo(t),J=((i=V[0])===null||i===void 0?void 0:i.target)||Hf(M,M,!0).offsetParent,Q=V.slice(1).reduce(function(te,ue){return $t(te,ue.matrix,j)},Jt(j));o.forEach(function(te,ue){if(L-2===ue&&(N=C.slice()),L-1===ue&&(O=C.slice()),!te.matrix){var U=o[ue+1],Y=U7(te,U,J,j,$t(Q,C,j));te.matrix=Fl(Y,j)}C=$t(C,te.matrix,j)});var $=!B&&c;z||(z=Jt($?4:3));var H=l0(B&&z.length===16?ea(z,4,3):z,$),ee=A;return A=rI(A,j,j),{hasZoom:x!==1||D!==1,hasFixed:m,matrixes:o,rootMatrix:A,originalRootMatrix:ee,beforeMatrix:N,offsetMatrix:O,allMatrix:C,targetMatrix:z,targetTransform:H,inlineTransform:t.style.transform,transformOrigin:f,targetOrigin:h,is3d:k,offsetContainer:g,offsetRootContainer:T}}function TG(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,o=0,c={},u=QI(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var f=SG(t,e,n,r),h=fu(f.allMatrix,f.transformOrigin,i,a);c=W(W({},f),h);var g=fu(f.allMatrix,[50,50],100,100);o=ZI([g.pos1,g.pos2],g.direction)}var m=4;return W(W(W({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:Jt(m),rootMatrix:Jt(m),beforeMatrix:Jt(m),offsetMatrix:Jt(m),allMatrix:Jt(m),targetMatrix:Jt(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function O1(t,e,n,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=vg(),f=vg(),h=vg(),g=vg(),m=[0,0],x={},_=TG(e,n,i,!0);if(e){var E=$r(e);a.forEach(function(V){x[V]=E(V)});var S=_.is3d?4:3,T=fu(_.offsetMatrix,St(_.transformOrigin,iI(_.targetMatrix,S)),_.width,_.height);o=T.direction,c=St(T.origin,[T.left-_.left,T.top-_.top]),g=Ef(_.offsetRootContainer);var D=Hf(r,r,!0).offsetParent||_.offsetRootContainer;if(_.hasZoom){var k=fu($t(_.originalRootMatrix,_.allMatrix),_.transformOrigin,_.width,_.height),j=fu(_.originalRootMatrix,pm($r(D)("transformOrigin")).map(function(V){return parseFloat(V)}),D.offsetWidth,D.offsetHeight);if(u=db(k,g),h=db(j,g,D,!0),t){var B=k.left,z=k.top;f=db({left:B,top:z,bottom:z,right:z},g)}}else{u=Ef(e),h=VF(D),t&&(f=Ef(t));var C=h.left,A=h.top,N=h.clientLeft,O=h.clientTop,L=[u.left-C,u.top-A];m=Fe(Tu(_.rootMatrix,L,4),[N+_.left,O+_.top])}}return W({targetClientRect:u,containerClientRect:h,moveableClientRect:f,rootContainerClientRect:g,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:e,style:x,offsetDelta:m},_)}function R2(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Gl([e,n,r,i]),o=[a.minX,a.minY],c=Fe(t.origin,o);return e=Fe(e,o),n=Fe(n,o),r=Fe(r,o),i=Fe(i,o),W(W({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var Au=(function(t){mh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=W({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},O1(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new e0,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}BU(n._observerId),n._observerId=NN(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,o=n.target,c=n.zoom,u=n.cspNonce,f=n.translateZ,h=n.cssStyled,g=n.groupable,m=n.linePadding,x=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var _=K(i||[0,0],2),E=_[0],S=_[1],T=r.left,D=r.top,k=r.target,j=r.direction,B=r.hasFixed,z=r.offsetDelta,C=n.targets,A=this.isDragging(),N={};this.getEnabledAbles().forEach(function(Q){N["data-able-".concat(Q.name.toLowerCase())]=!0});var O=this._getAbleClassName(),L=C&&C.length&&(k||g)||o||!this._hasFirstTarget&&this.state.isPersisted,V=this.controlBox||this.props.firstRenderState||this.props.persistData,M=[T-E,D-S];!g&&n.useAccuratePosition&&(M[0]+=z[0],M[1]+=z[1]);var J={position:B?"fixed":"absolute",display:L?"block":"none",visibility:V?"visible":"hidden",transform:"translate3d(".concat(M[0],"px, ").concat(M[1],"px, ").concat(f,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(J["--moveable-line-padding"]=m),x&&(J["--moveable-control-padding"]=x),Qi(h,W({cspNonce:u,ref:hs(this,"controlBox"),className:"".concat(Be("control-box",j===-1?"reverse":"",A?"dragging":"")," ").concat(O," ").concat(a)},N,{onClick:this._onPreventClick,style:J}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),su(this,!1),su(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Hr(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(f_)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&N_(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,f=r.targetClientRect;if(!i)return 0;var h;if(Fu(n)){var g=n.getBoundingClientRect();h={left:g.left,top:g.top,width:g.width,height:g.height}}else h=W({width:0,height:0},n);var m=h.left,x=h.top,_=h.width,E=h.height,S=QC([a,o,u,c],f),T=G8(S,[[m,x],[m+_,x],[m+_,x+E],[m,x+E]]),D=lI(S);return!T||!D?0:Math.min(100,T/D*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,f=i.pos4,h=i.targetClientRect;return a?v1([n,r],QC([o,c,f,u],h)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&Eu(!0);var c=a.parentMoveable,u=this.state,f=u.target||a.target,h=this.getContainer(),g=c?c._rootContainer:this._rootContainer,m=O1(this.controlBox,f,h,h,g||h,this._getRequestStyles());if(!f&&this._hasFirstTarget&&a.persistData){var x=R2(a.persistData);for(var _ in x)m[_]=x[_]}o&&Eu(),this.updateState(m,c?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var c=a.getEventData();return!!(!((r=c[n])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!n)return!0;var c=o.getEventData();return!!(!((i=c[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Ni(this.state),i=K(r,4),a=i[0],o=i[1],c=i[2],u=i[3],f=Ci(r),h=n.width,g=n.height,m=f.width,x=f.height,_=f.left,E=f.top,S=[n.left,n.top],T=St(S,n.origin),D=St(S,n.beforeOrigin),k=n.transformOrigin;return{width:m,height:x,left:_,top:E,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:g,beforeOrigin:D,origin:T,transformOrigin:k,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&N1(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&N1(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return X7(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,f=o.groupable,h=Hr(u,function(T){return T.name===n});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var g=h.request(a),m=i||r.isInstant,x=g.isControl?"controlAbles":"targetAbles",_="".concat(f?"Group":"").concat(g.isControl?"Control":""),E=Se([],K(c[x]),!1),S={request:function(T){return Sf(a,E,["drag"],_,"",W(W({},g.request(T)),{requestAble:n,isRequest:!0}),m),S},requestEnd:function(){return Sf(a,E,["drag"],_,"End",W(W({},g.requestEnd()),{requestAble:n,isRequest:!0}),m),S}};return Sf(a,E,["drag"],_,"Start",W(W({},g.requestStart(r)),{requestAble:n,isRequest:!0}),m),m?S.request(r).requestEnd():S},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,o=n.transformOrigin,c=n.allMatrix,u=n.is3d,f=n.pos1,h=n.pos2,g=n.pos3,m=n.pos4,x=n.left,_=n.top,E=n.isPersisted,S=r.zoom||1;if(!i&&S<=1){n.renderPoses=[f,h,g,m],n.renderLines=[[f,h],[h,m],[m,g],[g,f]];return}var T=lM(i||{}),D=T.left,k=T.top,j=T.bottom,B=T.right,z=u?4:3,C=[];E?C=o:this.controlBox&&r.groupable?C=a:C=St(a,[x,_]);var A=lm(z,Fl(C.map(function(J){return-J}),z),c,Fl(o,z)),N=_i(A,f,[-D,-k],z),O=_i(A,h,[B,-k],z),L=_i(A,g,[-D,j],z),V=_i(A,m,[B,j],z);n.renderPoses=[N,O,L,V],n.renderLines=[[N,O],[O,V],[V,L],[L,N]];{var M=S/2;n.renderLines=[[_i(A,f,[-D-M,-k],z),_i(A,h,[B+M,-k],z)],[_i(A,h,[B,-k-M],z),_i(A,m,[B,j+M],z)],[_i(A,m,[B+M,j],z),_i(A,g,[-D-M,j],z)],[_i(A,g,[-D,j+M],z),_i(A,f,[-D,-k-M],z)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var f=!I1(c,r),h=f||!I1(u,i);if(h){var g=i||this.controlBox;g&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&g&&this.updateRect("End",!1,!1),this._isPropTargetChanged=f}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=dI(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=R2(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),f="drag".concat(r,"ControlStart"),h=yg(o,[c,u],a),g=yg(o,[f],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=g},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Qi};return this.renderState={},q7(iM(yg(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(n,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Se(Se([],K(r),!1),K(c),!1)},Se([],K(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(su(this,!1),this.updateState({gestos:{}})),r||su(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=vM(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=yM(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=Aa(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),f={createElement:Qi};return u.renderLines.map(function(h,g){return qf(f,"",h[0],h[1],i,"render-line-".concat(g))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,f=(n||c)&&o!==c;return u||f||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=ws(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var f=this.enabledAbles;o.forEach(function(h){var g=yg(f,[h]),m=g.length>0,x=a[h];if(!m){x&&(x.destroy(),a[h]=null);return}x||(x=new EG(i,n,h),a[h]=x),x.setAbles(g)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=Aa(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=Aa(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Se(Se([],K(this._getAbleViewClassNames()),!1),[this.isDragging()?tG:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=rM(n.filter(Boolean),function(f){return f}).map(function(f){var h=K(f,1),g=h[0];return g}),a=this._viewClassNames,o=dh(a,i),c=o.removed,u=o.added;c.forEach(function(f){jN(r,a[f])}),u.forEach(function(f){PN(r,i[f])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(f){var h,g,m,x=f.name,_=((h=f.className)===null||h===void 0?void 0:h.call(f,r))||"";return(!((g=c[x])===null||g===void 0)&&g.isEventStart||!((m=u[x])===null||m===void 0)&&m.isEventStart)&&(_+=" ".concat(Be("".concat(x).concat(n,"-dragging")))),_.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,o=Eo(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,o=a.target,c=Eo(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(f){var h,g;try{for(var m=sF(f),x=m.next();!x.done;x=m.next()){var _=x.value;_.type==="attributes"&&_.attributeName==="style"&&r.checkUpdateRect()}}catch(E){h={error:E}}finally{try{x&&!x.done&&(g=m.return)&&g.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:YI,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(GN),I_={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),o=a.left,c=a.top,u=a.isPersisted,f=r.zoom||1,h=t.renderGroupRects,g=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];u?i=g.map(function(){return null}):g=[];var m=ou(t,"parentPosition",[o,c],function(_){return _.join(",")}),x=ou(t,"requestStyles",t.getRequestChildStyles(),function(_){return _.join(",")});return t.moveables=t.moveables.slice(0,i.length),Se(Se([],K(i.map(function(_,E){return e.createElement(Au,{key:"moveable"+E,ref:CN(t,"moveables",E),target:_,origin:!1,requestStyles:x,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,c],persistData:g[E],zoom:f})})),!1),K(iM(h.map(function(_,E){var S=_.pos1,T=_.pos2,D=_.pos3,k=_.pos4,j=[S,T,D,k];return[[0,1],[1,3],[3,2],[2,0]].map(function(B,z){var C=K(B,2),A=C[0],N=C[1];return qf(e,"",Fe(j[A],m),Fe(j[N],m),f,"group-rect-".concat(E,"-").concat(z))})}))),!1)}},AG=vh("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var c=n.contains(i);Ne(t,"onClick",ct(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:c}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=_s(i,function(u){return u.contains(r)}),c=a>-1),Ne(t,"onClickGroup",ct(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Hc(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),W(W({},t),{datas:e})}var CG=vh("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?CI(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&qn(i,Be("direction"))&&qn(i,Be("edge"))&&qn(i,Be("edgeDraggable"))},dragStart:function(t,e){return Sr.dragStart(t,Hc(e))},drag:function(t,e){return Sr.drag(t,Hc(e))},dragEnd:function(t,e){return Sr.dragEnd(t,Hc(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&qn(i,Be("direction"))&&qn(i,Be("line"))},dragGroupStart:function(t,e){return Sr.dragGroupStart(t,Hc(e))},dragGroup:function(t,e){return Sr.dragGroup(t,Hc(e))},dragGroupEnd:function(t,e){return Sr.dragGroupEnd(t,Hc(e))},unset:function(t){return Sr.unset(t)}}),xM={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},M_=[gM,dM,N7,K7,Sr,CG,C1,Q7,J7,h7,iG,aG,nG,vG,mG,_G,I_,xM,AG,uM,mM],RG=M_.reduce(function(t,e){return(e.events||[]).forEach(function(n){ON(t,n)}),t},[]),DG=M_.reduce(function(t,e){return(e.props||[]).forEach(function(n){ON(t,n)}),t},[]);function D2(t,e){var n=K(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function _g(t,e){var n=K(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function k2(t,e){return Math.max.apply(Math,Se([],K(t.map(function(n){var r=K(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[e],a[e],o[e],c[e])})),!1))}function N2(t,e){return Math.min.apply(Math,Se([],K(t.map(function(n){var r=K(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[e],a[e],o[e],c[e])})),!1))}function kG(t,e){var n,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],f=0,h=0;if(!t.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:f,height:h,rotation:e};var g=rt(e,Rr);if(g%90){var m=g/180*Math.PI,x=Math.tan(m),_=-1/x,E=[E1,e2],S=[[0,0],[0,0]],T=[E1,e2],D=[[0,0],[0,0]];t.forEach(function(ne){ne.forEach(function(ae){var he=D2([-x,1,0],ae),ie=D2([-_,1,0],ae);E[0]>he&&(S[0]=ae,E[0]=he),E[1]<he&&(S[1]=ae,E[1]=he),T[0]>ie&&(D[0]=ae,T[0]=ie),T[1]<ie&&(D[1]=ae,T[1]=ie)})});var k=K(S,2),j=k[0],B=k[1],z=K(D,2),C=z[0],A=z[1],N=[-x,1,_g([-x,1],j)],O=[-x,1,_g([-x,1],B)],L=[-_,1,_g([-_,1],C)],V=[-_,1,_g([-_,1],A)];n=K([[N,L],[N,V],[O,L],[O,V]].map(function(ne){var ae=K(ne,2),he=ae[0],ie=ae[1];return u_(he,ie)[0]}),4),a=n[0],o=n[1],c=n[2],u=n[3],f=T[1]-T[0],h=E[1]-E[0]}else{var M=N2(t,0),J=N2(t,1),Q=k2(t,0),$=k2(t,1);if(a=[M,J],o=[Q,J],c=[M,$],u=[Q,$],f=Q-M,h=$-J,g%180){var H=[c,a,u,o];r=K(H,4),a=r[0],o=r[1],c=r[2],u=r[3],f=$-J,h=Q-M}}if(g%360>180){var H=[u,c,o,a];i=K(H,4),a=i[0],o=i[1],c=i[2],u=i[3]}var ee=Gl([a,o,c,u]),te=ee.minX,ue=ee.minY,U=ee.maxX,Y=ee.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:f,height:h,minX:te,minY:ue,maxX:U,maxY:Y,rotation:e}}function _M(t,e){var n=e.map(function(r){if(Ln(r)){var i=_M(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Hr(t,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&Ln(n[0])?n[0]:n}var NG=(function(t){mh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new oI,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Eu(!0),this.moveables.forEach(function(Te){Te.updateRect(n,!1,!1)});var c=this.props,u=this.moveables,f=o.target||c.target,h=u.map(function(Te){return{finded:!1,manager:Te}}),g=this.props.targetGroups||[],m=_M(h,g),x=c.useDefaultGroupRotate;m.push.apply(m,Se([],K(h.filter(function(Te){var Ae=Te.finded;return!Ae}).map(function(Te){var Ae=Te.manager;return Ae})),!1));var _=[],E=!r||n!==""&&c.updateGroup,S=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var T=(a=c.persistData)===null||a===void 0?void 0:a.rotation;T!=null&&(S=T)}function D(Te,Ae,De){var be=Te.map(function(dt){if(Ln(dt)){var Oe=D(dt,Ae),qe=[Oe.pos1,Oe.pos2,Oe.pos3,Oe.pos4];return _.push(Oe),{poses:qe,rotation:Oe.rotation}}else return{poses:Ni(dt.state),rotation:dt.getRotation()}}),Ee=be.map(function(dt){var Oe=dt.rotation;return Oe}),$e=0,Pe=Ee[0],ze=Ee.every(function(dt){return Math.abs(Pe-dt)<.1});E?$e=!x&&ze?Pe:S:$e=!x&&!De&&ze?Pe:Ae;var Me=be.map(function(dt){var Oe=dt.poses;return Oe}),et=kG(Me,$e);return et}var k=D(m,this.rotation,!0);E&&(this.rotation=k.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=g,this.renderGroupRects=_;var j=this.transformOrigin,B=this.rotation,z=this.scale,C=k.width,A=k.height,N=k.minX,O=k.minY,L=W7([[0,0],[C,0],[0,A],[C,A]],R_(j,C,A),this.rotation/180*Math.PI),V=Gl(L.result),M=V.minX,J=V.minY,Q=" rotate(".concat(B,"deg)")+" scale(".concat(Tr(z[0]),", ").concat(Tr(z[1]),")"),$="translate(".concat(-M,"px, ").concat(-J,"px)").concat(Q);this.controlBox.style.transform="translate3d(".concat(N,"px, ").concat(O,"px, ").concat(this.props.translateZ||0,")"),f.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(j,";")+"width:".concat(C,"px;height:").concat(A,"px;")+"transform: ".concat($),o.width=C,o.height=A;var H=this.getContainer(),ee=O1(this.controlBox,f,this.controlBox,this.getContainer(),this._rootContainer||H,[]),te=[ee.left,ee.top],ue=K(Ni(ee),4),U=ue[0],Y=ue[1],ne=ue[2],ae=ue[3],he=Gl([U,Y,ne,ae]),ie=[he.minX,he.minY],me=Tr(z[0]*z[1]);ee.pos1=Fe(U,ie),ee.pos2=Fe(Y,ie),ee.pos3=Fe(ne,ie),ee.pos4=Fe(ae,ie),ee.left=N-ee.left+ie[0],ee.top=O-ee.top+ie[1],ee.origin=Fe(St(te,ee.origin),ie),ee.beforeOrigin=Fe(St(te,ee.beforeOrigin),ie),ee.originalBeforeOrigin=St(te,ee.originalBeforeOrigin),ee.transformOrigin=Fe(St(te,ee.transformOrigin),ie),f.style.transform="translate(".concat(-M-ie[0],"px, ").concat(-J-ie[1],"px)")+Q,Eu(),this.updateState(W(W({},ee),{posDelta:ie,direction:me,beforeDirection:me}),i)},e.prototype.getRect=function(){return W(W({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Se(Se([],K(r),!1),K(c),!1)},[]);return n},e.prototype.getMoveables=function(){return Se([],K(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Se(Se([],K(this.props.ables),!1),[I_],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Aa(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,f=c.changed,h=c.removed,g=u.length||h.length;(g||this._prevOriginalDragTarget!==this._originalDragTarget)&&(su(this,!1),su(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=vM(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=yM(this,"GroupControl")));var m=!I1(n.container,r.container);m&&(n.container=r.container),(m||g||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||f.length||o.length&&!oM(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!g},e.prototype._updateObserver=function(){},e.defaultProps=W(W({},Au.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(Au),IG=(function(t){mh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],f=u.length,h=this.isUnmounted||!f,g=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!f&&g.length?u=g.map(function(){return null}):h||(g=[]),Qi(o,{cspNonce:a,ref:hs(this,"controlBox"),className:Be("control-box")},u.map(function(m,x){var _,E,S=(E=(_=i.individualGroupableProps)===null||_===void 0?void 0:_.call(i,m,x))!==null&&E!==void 0?E:{};return Qi(Au,W({key:"moveable"+x,ref:CN(n,"moveables",x)},i,S,{target:m,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:g[x]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Eu(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Eu()},e.prototype.getRect=function(){return W(W({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(n,W(W({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(f){return f.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Hr(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),f=o.getDragElement();return!c||!f?!1:f===i||f.contains(i)||f!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Se([],K(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(Au);function wM(t,e){var n=[];return t.forEach(function(r){if(r){if(qr(r)){e[r]&&n.push.apply(n,Se([],K(e[r]),!1));return}Ln(r)?n.push.apply(n,Se([],K(wM(r,e)),!1)):n.push(r)}}),n}function EM(t,e){var n=[];return t.forEach(function(r){if(r){if(qr(r)){e[r]&&n.push.apply(n,Se([],K(e[r]),!1));return}Ln(r)?n.push(EM(r,e)):n.push(r)}}),n}function SM(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?Ln(n)&&Ln(i)?SM(n,i):!0:!1})}var MG=(function(t){mh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new oI,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){n[c]=!0})});var i=ws(n).join(`
`);this.defaultStyled=dI("div",RU(f_,vF+i))},e.getTotalAbles=function(){return Se([dM,I_,xM,uM],K(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=iF(i,["ables","props"]),u=K(this._updateRefs(!0),2),f=u[0],h=u[1],g=wM(f,h),m=g.length>1,x=r.getTotalAbles(),_=Se(Se([],K(x),!1),K(a||[]),!1),E=W(W(W({},c),o||{}),{ables:_,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=g;var S=null,T=this.moveable,D=c.persistData;if(D?.children&&(m=!0),c.individualGroupable)return Qi(IG,W({key:"individual-group",ref:hs(this,"moveable")},E,{target:null,targets:g}));if(m){var k=EM(f,h);if(T&&!T.props.groupable&&!T.props.individualGroupable){var j=T.props.target;j&&g.indexOf(j)>-1&&(S=W({},T.state))}return Qi(NG,W({key:"group",ref:hs(this,"moveable")},E,(n=c.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:g,targetGroups:k,firstRenderState:S}))}else{var B=g[0];if(T&&(T.props.groupable||T.props.individualGroupable)){var z=T.moveables||[],C=Hr(z,function(A){return A.props.target===B});C&&(S=W({},C.state))}return Qi(Au,W({key:"single",ref:hs(this,"moveable")},E,{target:B,firstRenderState:S}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=C_(this.props.target||this.props.targets),a=typeof document<"u",o=SM(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function f(h){if(qr(h)){var g=c[h];g?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Ln(h)&&h.forEach(f)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var f=K(this._updateRefs(),3),h=f[0],g=f[1],m=f[2];this.refTargets=h,this.selectorMap=g,m&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,aF([DU(vI)],e.prototype,"moveable",void 0),e})(GN),OG=(function(t){mh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=M_,e})(MG),P1=function(t,e){return P1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},P1(t,e)};function O_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");P1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $f=function(){return $f=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$f.apply(this,arguments)};function PG(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var jG=(function(t){O_(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Qi(OG,$f({ref:hs(this,"moveable")},this.state))},e})(i_),VG=DG,zG=vI,LG=RG,BG=(function(t){O_(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=$f({},i),c={};LG.forEach(function(h){c[LU("on ".concat(h))]=function(g){return a.trigger(h,g)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=Uu(r).createElement("div"),r.appendChild(u)),a.containerProvider=XC(Qi(jG,$f({ref:hs(a,"innerMoveable")},o,c)),u),a.selfElement=u;var f=o.target;return Ln(f)&&f.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;XC(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=PG([LC(zG,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),LC(VG,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e})(e0),UG=(function(t){O_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(BG);const I2=t=>{let e;const n=new Set,r=(f,h)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const m=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(x=>x(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f))},u=e=t(r,i,c);return c},FG=(t=>t?I2(t):I2),GG=t=>t;function qG(t,e=GG){const n=tg.useSyncExternalStore(t.subscribe,tg.useCallback(()=>e(t.getState()),[t,e]),tg.useCallback(()=>e(t.getInitialState()),[t,e]));return tg.useDebugValue(n),n}const M2=t=>{const e=FG(t),n=r=>qG(e,r);return Object.assign(n,e),n},P_=(t=>t?M2(t):M2),O2={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",VITE_FIREBASE_APP_ID:"1:137454342284:web:ab8b52955e6f0ffd42aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-BCLXBQHT9L",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app"},Yf=new Map,wg=t=>{const e=Yf.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},HG=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Yf.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Yf.set(n.name,i),{type:"tracked",store:t,...i}},$G=(t,e)=>{if(e===void 0)return;const n=Yf.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Yf.delete(t))},YG=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(o=>o.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},XG=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:o,store:c,...u}=e;let f;try{f=(a??(O2?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!f)return t(n,r,i);const{connection:h,...g}=HG(c,f,u);let m=!0;i.setState=((E,S,T)=>{const D=n(E,S);if(!m)return D;const k=T===void 0?{type:o||YG(new Error().stack)||"anonymous"}:typeof T=="string"?{type:T}:T;return c===void 0?(h?.send(k,r()),D):(h?.send({...k,type:`${c}/${k.type}`},{...wg(u.name),[c]:i.getState()}),D)}),i.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),$G(u.name,c)}};const x=(...E)=>{const S=m;m=!1,n(...E),m=S},_=t(i.setState,r,i);if(g.type==="untracked"?h?.init(_):(g.stores[g.store]=i,h?.init(Object.fromEntries(Object.entries(g.stores).map(([E,S])=>[E,E===g.store?_:S.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let E=!1;const S=i.dispatch;i.dispatch=(...T)=>{(O2?"production":void 0)!=="production"&&T[0].type==="__setState"&&!E&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),E=!0),S(...T)}}return h.subscribe(E=>{var S;switch(E.type){case"ACTION":if(typeof E.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return pb(E.payload,T=>{if(T.type==="__setState"){if(c===void 0){x(T.state);return}Object.keys(T.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const D=T.state[c];if(D==null)return;JSON.stringify(i.getState())!==JSON.stringify(D)&&x(D);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(T)});case"DISPATCH":switch(E.payload.type){case"RESET":return x(_),c===void 0?h?.init(i.getState()):h?.init(wg(u.name));case"COMMIT":if(c===void 0){h?.init(i.getState());return}return h?.init(wg(u.name));case"ROLLBACK":return pb(E.state,T=>{if(c===void 0){x(T),h?.init(i.getState());return}x(T[c]),h?.init(wg(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return pb(E.state,T=>{if(c===void 0){x(T);return}JSON.stringify(i.getState())!==JSON.stringify(T[c])&&x(T[c])});case"IMPORT_STATE":{const{nextLiftedState:T}=E.payload,D=(S=T.computedStates.slice(-1)[0])==null?void 0:S.state;if(!D)return;x(c===void 0?D:D[c]),h?.send(null,T);return}case"PAUSE_RECORDING":return m=!m}return}}),_},WG=XG,pb=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function KG(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const j1=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return j1(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return j1(r)(n)}}}},QG=(t,e)=>(n,r,i)=>{let a={storage:KG(()=>localStorage),partialize:E=>E,version:0,merge:(E,S)=>({...S,...E}),...e},o=!1;const c=new Set,u=new Set;let f=a.storage;if(!f)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...E)},r,i);const h=()=>{const E=a.partialize({...r()});return f.setItem(a.name,{state:E,version:a.version})},g=i.setState;i.setState=(E,S)=>(g(E,S),h());const m=t((...E)=>(n(...E),h()),r,i);i.getInitialState=()=>m;let x;const _=()=>{var E,S;if(!f)return;o=!1,c.forEach(D=>{var k;return D((k=r())!=null?k:m)});const T=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(E=r())!=null?E:m))||void 0;return j1(f.getItem.bind(f))(a.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==a.version){if(a.migrate){const k=a.migrate(D.state,D.version);return k instanceof Promise?k.then(j=>[!0,j]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var k;const[j,B]=D;if(x=a.merge(B,(k=r())!=null?k:m),n(x,!0),j)return h()}).then(()=>{T?.(x,void 0),x=r(),o=!0,u.forEach(D=>D(x))}).catch(D=>{T?.(void 0,D)})};return i.persist={setOptions:E=>{a={...a,...E},E.storage&&(f=E.storage)},clearStorage:()=>{f?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:E=>(c.add(E),()=>{c.delete(E)}),onFinishHydration:E=>(u.add(E),()=>{u.delete(E)})},a.skipHydration||_(),x||m},TM=QG,ZG=()=>{};var P2={};const AM=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JG=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},CM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,f=u?t[i+2]:0,h=a>>2,g=(a&3)<<4|c>>4;let m=(c&15)<<2|f>>6,x=f&63;u||(x=64,o||(m=64)),r.push(n[h],n[g],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AM(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||f==null||g==null)throw new eq;const m=a<<2|c>>4;if(r.push(m),f!==64){const x=c<<4&240|f>>2;if(r.push(x),g!==64){const _=f<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tq=function(t){const e=AM(t);return CM.encodeByteArray(e,!0)},ym=function(t){return tq(t).replace(/\./g,"")},RM=function(t){try{return CM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const rq=()=>nq().__FIREBASE_DEFAULTS__,iq=()=>{if(typeof process>"u"||typeof P2>"u")return;const t=P2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RM(t[1]);return e&&JSON.parse(e)},u0=()=>{try{return ZG()||rq()||iq()||aq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DM=t=>u0()?.emulatorHosts?.[t],sq=t=>{const e=DM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kM=()=>u0()?.config,NM=t=>u0()?.[`_${t}`];class oq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function $u(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function IM(t){return(await fetch(t,{credentials:"include"})).ok}function lq(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ym(JSON.stringify(n)),ym(JSON.stringify(o)),""].join(".")}const Tf={};function cq(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tf))Tf[e]?t.emulator.push(e):t.prod.push(e);return t}function uq(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let j2=!1;function MM(t,e){if(typeof window>"u"||typeof document>"u"||!$u(window.location.host)||Tf[t]===e||Tf[t]||j2)return;Tf[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=cq().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function f(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{j2=!0,o()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=uq(r),x=n("text"),_=document.getElementById(x)||document.createElement("span"),E=n("learnmore"),S=document.getElementById(E)||document.createElement("a"),T=n("preprendIcon"),D=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const k=m.element;c(k),h(S,E);const j=f();u(D,T),k.append(D,_,S,j),document.body.appendChild(k)}a?(_.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function fq(){const t=u0()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hq(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pq(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mq(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vq(){return!fq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yq(){try{return typeof indexedDB=="object"}catch{return!1}}function bq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const xq="FirebaseError";class Rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xq,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xh.prototype.create)}}class xh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?_q(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Rs(i,c,r)}}function _q(t,e){return t.replace(wq,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wq=/\{\$([^}]+)}/g;function Eq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(V2(a)&&V2(o)){if(!Hl(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function V2(t){return t!==null&&typeof t=="object"}function _h(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function cf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Sq(t,e){const n=new Tq(t,e);return n.subscribe.bind(n)}class Tq{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Aq(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gb),i.error===void 0&&(i.error=gb),i.complete===void 0&&(i.complete=gb);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Aq(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gb(){}function cn(t){return t&&t._delegate?t._delegate:t}class $l{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const El="[DEFAULT]";class Cq{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oq;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dq(e))try{this.getOrInitializeService({instanceIdentifier:El})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=El){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=El){return this.instances.has(e)}getOptions(e=El){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Rq(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=El){return this.component?this.component.multipleInstances?e:El:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rq(t){return t===El?void 0:t}function Dq(t){return t.instantiationMode==="EAGER"}class kq{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Cq(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(yt||(yt={}));const Nq={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},Iq=yt.INFO,Mq={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},Oq=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Mq[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class j_{constructor(e){this.name=e,this._logLevel=Iq,this._logHandler=Oq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const Pq=(t,e)=>e.some(n=>t instanceof n);let z2,L2;function jq(){return z2||(z2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vq(){return L2||(L2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OM=new WeakMap,V1=new WeakMap,PM=new WeakMap,mb=new WeakMap,V_=new WeakMap;function zq(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(So(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&OM.set(n,t)}).catch(()=>{}),V_.set(e,t),e}function Lq(t){if(V1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});V1.set(t,e)}let z1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return V1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return So(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Bq(t){z1=t(z1)}function Uq(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vb(this),e,...n);return PM.set(r,e.sort?e.sort():[e]),So(r)}:Vq().includes(t)?function(...e){return t.apply(vb(this),e),So(OM.get(this))}:function(...e){return So(t.apply(vb(this),e))}}function Fq(t){return typeof t=="function"?Uq(t):(t instanceof IDBTransaction&&Lq(t),Pq(t,jq())?new Proxy(t,z1):t)}function So(t){if(t instanceof IDBRequest)return zq(t);if(mb.has(t))return mb.get(t);const e=Fq(t);return e!==t&&(mb.set(t,e),V_.set(e,t)),e}const vb=t=>V_.get(t);function Gq(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=So(o);return r&&o.addEventListener("upgradeneeded",u=>{r(So(o.result),u.oldVersion,u.newVersion,So(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const qq=["get","getKey","getAll","getAllKeys","count"],Hq=["put","add","delete","clear"],yb=new Map;function B2(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yb.get(e))return yb.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Hq.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qq.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),i&&u.done]))[0]};return yb.set(e,a),a}Bq(t=>({...t,get:(e,n,r)=>B2(e,n)||t.get(e,n,r),has:(e,n)=>!!B2(e,n)||t.has(e,n)}));class $q{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yq(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Yq(t){return t.getComponent()?.type==="VERSION"}const L1="@firebase/app",U2="0.14.6";const Es=new j_("@firebase/app"),Xq="@firebase/app-compat",Wq="@firebase/analytics-compat",Kq="@firebase/analytics",Qq="@firebase/app-check-compat",Zq="@firebase/app-check",Jq="@firebase/auth",eH="@firebase/auth-compat",tH="@firebase/database",nH="@firebase/data-connect",rH="@firebase/database-compat",iH="@firebase/functions",aH="@firebase/functions-compat",sH="@firebase/installations",oH="@firebase/installations-compat",lH="@firebase/messaging",cH="@firebase/messaging-compat",uH="@firebase/performance",dH="@firebase/performance-compat",fH="@firebase/remote-config",hH="@firebase/remote-config-compat",pH="@firebase/storage",gH="@firebase/storage-compat",mH="@firebase/firestore",vH="@firebase/ai",yH="@firebase/firestore-compat",bH="firebase",xH="12.6.0";const B1="[DEFAULT]",_H={[L1]:"fire-core",[Xq]:"fire-core-compat",[Kq]:"fire-analytics",[Wq]:"fire-analytics-compat",[Zq]:"fire-app-check",[Qq]:"fire-app-check-compat",[Jq]:"fire-auth",[eH]:"fire-auth-compat",[tH]:"fire-rtdb",[nH]:"fire-data-connect",[rH]:"fire-rtdb-compat",[iH]:"fire-fn",[aH]:"fire-fn-compat",[sH]:"fire-iid",[oH]:"fire-iid-compat",[lH]:"fire-fcm",[cH]:"fire-fcm-compat",[uH]:"fire-perf",[dH]:"fire-perf-compat",[fH]:"fire-rc",[hH]:"fire-rc-compat",[pH]:"fire-gcs",[gH]:"fire-gcs-compat",[mH]:"fire-fst",[yH]:"fire-fst-compat",[vH]:"fire-vertex","fire-js":"fire-js",[bH]:"fire-js-all"};const bm=new Map,wH=new Map,U1=new Map;function F2(t,e){try{t.container.addComponent(e)}catch(n){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cu(t){const e=t.name;if(U1.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;U1.set(e,t);for(const n of bm.values())F2(n,t);for(const n of wH.values())F2(n,t);return!0}function z_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ei(t){return t==null?!1:t.settings!==void 0}const EH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},To=new xh("app","Firebase",EH);class SH{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $l("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw To.create("app-deleted",{appName:this._name})}}const Yu=xH;function jM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:B1,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw To.create("bad-app-name",{appName:String(i)});if(n||(n=kM()),!n)throw To.create("no-options");const a=bm.get(i);if(a){if(Hl(n,a.options)&&Hl(r,a.config))return a;throw To.create("duplicate-app",{appName:i})}const o=new kq(i);for(const u of U1.values())o.addComponent(u);const c=new SH(n,r,o);return bm.set(i,c),c}function VM(t=B1){const e=bm.get(t);if(!e&&t===B1&&kM())return jM();if(!e)throw To.create("no-app",{appName:t});return e}function Ao(t,e,n){let r=_H[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(o.join(" "));return}Cu(new $l(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const TH="firebase-heartbeat-database",AH=1,Xf="firebase-heartbeat-store";let bb=null;function zM(){return bb||(bb=Gq(TH,AH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xf)}catch(n){console.warn(n)}}}}).catch(t=>{throw To.create("idb-open",{originalErrorMessage:t.message})})),bb}async function CH(t){try{const n=(await zM()).transaction(Xf),r=await n.objectStore(Xf).get(LM(t));return await n.done,r}catch(e){if(e instanceof Rs)Es.warn(e.message);else{const n=To.create("idb-get",{originalErrorMessage:e?.message});Es.warn(n.message)}}}async function G2(t,e){try{const r=(await zM()).transaction(Xf,"readwrite");await r.objectStore(Xf).put(e,LM(t)),await r.done}catch(n){if(n instanceof Rs)Es.warn(n.message);else{const r=To.create("idb-set",{originalErrorMessage:n?.message});Es.warn(r.message)}}}function LM(t){return`${t.name}!${t.options.appId}`}const RH=1024,DH=30;class kH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=q2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>DH){const i=MH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Es.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=q2(),{heartbeatsToSend:n,unsentEntries:r}=NH(this._heartbeatsCache.heartbeats),i=ym(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Es.warn(e),""}}}function q2(){return new Date().toISOString().substring(0,10)}function NH(t,e=RH){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),H2(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class IH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yq()?bq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return G2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return G2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function H2(t){return ym(JSON.stringify({version:2,heartbeats:t})).length}function MH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function OH(t){Cu(new $l("platform-logger",e=>new $q(e),"PRIVATE")),Cu(new $l("heartbeat",e=>new kH(e),"PRIVATE")),Ao(L1,U2,t),Ao(L1,U2,"esm2020"),Ao("fire-js","")}OH("");var $2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Co,BM;(function(){var t;function e(C,A){function N(){}N.prototype=A.prototype,C.F=A.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(O,L,V){for(var M=Array(arguments.length-2),J=2;J<arguments.length;J++)M[J-2]=arguments[J];return A.prototype[L].apply(O,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,A,N){N||(N=0);const O=Array(16);if(typeof A=="string")for(var L=0;L<16;++L)O[L]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(L=0;L<16;++L)O[L]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=C.g[0],N=C.g[1],L=C.g[2];let V=C.g[3],M;M=A+(V^N&(L^V))+O[0]+3614090360&4294967295,A=N+(M<<7&4294967295|M>>>25),M=V+(L^A&(N^L))+O[1]+3905402710&4294967295,V=A+(M<<12&4294967295|M>>>20),M=L+(N^V&(A^N))+O[2]+606105819&4294967295,L=V+(M<<17&4294967295|M>>>15),M=N+(A^L&(V^A))+O[3]+3250441966&4294967295,N=L+(M<<22&4294967295|M>>>10),M=A+(V^N&(L^V))+O[4]+4118548399&4294967295,A=N+(M<<7&4294967295|M>>>25),M=V+(L^A&(N^L))+O[5]+1200080426&4294967295,V=A+(M<<12&4294967295|M>>>20),M=L+(N^V&(A^N))+O[6]+2821735955&4294967295,L=V+(M<<17&4294967295|M>>>15),M=N+(A^L&(V^A))+O[7]+4249261313&4294967295,N=L+(M<<22&4294967295|M>>>10),M=A+(V^N&(L^V))+O[8]+1770035416&4294967295,A=N+(M<<7&4294967295|M>>>25),M=V+(L^A&(N^L))+O[9]+2336552879&4294967295,V=A+(M<<12&4294967295|M>>>20),M=L+(N^V&(A^N))+O[10]+4294925233&4294967295,L=V+(M<<17&4294967295|M>>>15),M=N+(A^L&(V^A))+O[11]+2304563134&4294967295,N=L+(M<<22&4294967295|M>>>10),M=A+(V^N&(L^V))+O[12]+1804603682&4294967295,A=N+(M<<7&4294967295|M>>>25),M=V+(L^A&(N^L))+O[13]+4254626195&4294967295,V=A+(M<<12&4294967295|M>>>20),M=L+(N^V&(A^N))+O[14]+2792965006&4294967295,L=V+(M<<17&4294967295|M>>>15),M=N+(A^L&(V^A))+O[15]+1236535329&4294967295,N=L+(M<<22&4294967295|M>>>10),M=A+(L^V&(N^L))+O[1]+4129170786&4294967295,A=N+(M<<5&4294967295|M>>>27),M=V+(N^L&(A^N))+O[6]+3225465664&4294967295,V=A+(M<<9&4294967295|M>>>23),M=L+(A^N&(V^A))+O[11]+643717713&4294967295,L=V+(M<<14&4294967295|M>>>18),M=N+(V^A&(L^V))+O[0]+3921069994&4294967295,N=L+(M<<20&4294967295|M>>>12),M=A+(L^V&(N^L))+O[5]+3593408605&4294967295,A=N+(M<<5&4294967295|M>>>27),M=V+(N^L&(A^N))+O[10]+38016083&4294967295,V=A+(M<<9&4294967295|M>>>23),M=L+(A^N&(V^A))+O[15]+3634488961&4294967295,L=V+(M<<14&4294967295|M>>>18),M=N+(V^A&(L^V))+O[4]+3889429448&4294967295,N=L+(M<<20&4294967295|M>>>12),M=A+(L^V&(N^L))+O[9]+568446438&4294967295,A=N+(M<<5&4294967295|M>>>27),M=V+(N^L&(A^N))+O[14]+3275163606&4294967295,V=A+(M<<9&4294967295|M>>>23),M=L+(A^N&(V^A))+O[3]+4107603335&4294967295,L=V+(M<<14&4294967295|M>>>18),M=N+(V^A&(L^V))+O[8]+1163531501&4294967295,N=L+(M<<20&4294967295|M>>>12),M=A+(L^V&(N^L))+O[13]+2850285829&4294967295,A=N+(M<<5&4294967295|M>>>27),M=V+(N^L&(A^N))+O[2]+4243563512&4294967295,V=A+(M<<9&4294967295|M>>>23),M=L+(A^N&(V^A))+O[7]+1735328473&4294967295,L=V+(M<<14&4294967295|M>>>18),M=N+(V^A&(L^V))+O[12]+2368359562&4294967295,N=L+(M<<20&4294967295|M>>>12),M=A+(N^L^V)+O[5]+4294588738&4294967295,A=N+(M<<4&4294967295|M>>>28),M=V+(A^N^L)+O[8]+2272392833&4294967295,V=A+(M<<11&4294967295|M>>>21),M=L+(V^A^N)+O[11]+1839030562&4294967295,L=V+(M<<16&4294967295|M>>>16),M=N+(L^V^A)+O[14]+4259657740&4294967295,N=L+(M<<23&4294967295|M>>>9),M=A+(N^L^V)+O[1]+2763975236&4294967295,A=N+(M<<4&4294967295|M>>>28),M=V+(A^N^L)+O[4]+1272893353&4294967295,V=A+(M<<11&4294967295|M>>>21),M=L+(V^A^N)+O[7]+4139469664&4294967295,L=V+(M<<16&4294967295|M>>>16),M=N+(L^V^A)+O[10]+3200236656&4294967295,N=L+(M<<23&4294967295|M>>>9),M=A+(N^L^V)+O[13]+681279174&4294967295,A=N+(M<<4&4294967295|M>>>28),M=V+(A^N^L)+O[0]+3936430074&4294967295,V=A+(M<<11&4294967295|M>>>21),M=L+(V^A^N)+O[3]+3572445317&4294967295,L=V+(M<<16&4294967295|M>>>16),M=N+(L^V^A)+O[6]+76029189&4294967295,N=L+(M<<23&4294967295|M>>>9),M=A+(N^L^V)+O[9]+3654602809&4294967295,A=N+(M<<4&4294967295|M>>>28),M=V+(A^N^L)+O[12]+3873151461&4294967295,V=A+(M<<11&4294967295|M>>>21),M=L+(V^A^N)+O[15]+530742520&4294967295,L=V+(M<<16&4294967295|M>>>16),M=N+(L^V^A)+O[2]+3299628645&4294967295,N=L+(M<<23&4294967295|M>>>9),M=A+(L^(N|~V))+O[0]+4096336452&4294967295,A=N+(M<<6&4294967295|M>>>26),M=V+(N^(A|~L))+O[7]+1126891415&4294967295,V=A+(M<<10&4294967295|M>>>22),M=L+(A^(V|~N))+O[14]+2878612391&4294967295,L=V+(M<<15&4294967295|M>>>17),M=N+(V^(L|~A))+O[5]+4237533241&4294967295,N=L+(M<<21&4294967295|M>>>11),M=A+(L^(N|~V))+O[12]+1700485571&4294967295,A=N+(M<<6&4294967295|M>>>26),M=V+(N^(A|~L))+O[3]+2399980690&4294967295,V=A+(M<<10&4294967295|M>>>22),M=L+(A^(V|~N))+O[10]+4293915773&4294967295,L=V+(M<<15&4294967295|M>>>17),M=N+(V^(L|~A))+O[1]+2240044497&4294967295,N=L+(M<<21&4294967295|M>>>11),M=A+(L^(N|~V))+O[8]+1873313359&4294967295,A=N+(M<<6&4294967295|M>>>26),M=V+(N^(A|~L))+O[15]+4264355552&4294967295,V=A+(M<<10&4294967295|M>>>22),M=L+(A^(V|~N))+O[6]+2734768916&4294967295,L=V+(M<<15&4294967295|M>>>17),M=N+(V^(L|~A))+O[13]+1309151649&4294967295,N=L+(M<<21&4294967295|M>>>11),M=A+(L^(N|~V))+O[4]+4149444226&4294967295,A=N+(M<<6&4294967295|M>>>26),M=V+(N^(A|~L))+O[11]+3174756917&4294967295,V=A+(M<<10&4294967295|M>>>22),M=L+(A^(V|~N))+O[2]+718787259&4294967295,L=V+(M<<15&4294967295|M>>>17),M=N+(V^(L|~A))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(L+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+V&4294967295}r.prototype.v=function(C,A){A===void 0&&(A=C.length);const N=A-this.blockSize,O=this.C;let L=this.h,V=0;for(;V<A;){if(L==0)for(;V<=N;)i(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<A;)if(O[L++]=C.charCodeAt(V++),L==this.blockSize){i(this,O),L=0;break}}else for(;V<A;)if(O[L++]=C[V++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=A},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)C[A++]=this.g[N]>>>O&255;return C};function a(C,A){var N=c;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=A(C)}function o(C,A){this.h=A;const N=[];let O=!0;for(let L=C.length-1;L>=0;L--){const V=C[L]|0;O&&V==A||(N[L]=V,O=!1)}this.g=N}var c={};function u(C){return-128<=C&&C<128?a(C,function(A){return new o([A|0],A<0?-1:0)}):new o([C|0],C<0?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return g;if(C<0)return S(f(-C));const A=[];let N=1;for(let O=0;C>=N;O++)A[O]=C/N|0,N*=4294967296;return new o(A,0)}function h(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return S(h(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=f(Math.pow(A,8));let O=g;for(let V=0;V<C.length;V+=8){var L=Math.min(8,C.length-V);const M=parseInt(C.substring(V,V+L),A);L<8?(L=f(Math.pow(A,L)),O=O.j(L).add(f(M))):(O=O.j(N),O=O.add(f(M)))}return O}var g=u(0),m=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(E(this))return-S(this).m();let C=0,A=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);C+=(O>=0?O:4294967296+O)*A,A*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(E(this))return"-"+S(this).toString(C);const A=f(Math.pow(C,6));var N=this;let O="";for(;;){const L=j(N,A).g;N=T(N,L.j(A));let V=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=L,_(N))return V+O;for(;V.length<6;)V="0"+V;O=V+O}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function _(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function E(C){return C.h==-1}t.l=function(C){return C=T(this,C),E(C)?-1:_(C)?0:1};function S(C){const A=C.g.length,N=[];for(let O=0;O<A;O++)N[O]=~C.g[O];return new o(N,~C.h).add(m)}t.abs=function(){return E(this)?S(this):this},t.add=function(C){const A=Math.max(this.g.length,C.g.length),N=[];let O=0;for(let L=0;L<=A;L++){let V=O+(this.i(L)&65535)+(C.i(L)&65535),M=(V>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);O=M>>>16,V&=65535,M&=65535,N[L]=M<<16|V}return new o(N,N[N.length-1]&-2147483648?-1:0)};function T(C,A){return C.add(S(A))}t.j=function(C){if(_(this)||_(C))return g;if(E(this))return E(C)?S(this).j(S(C)):S(S(this).j(C));if(E(C))return S(this.j(S(C)));if(this.l(x)<0&&C.l(x)<0)return f(this.m()*C.m());const A=this.g.length+C.g.length,N=[];for(var O=0;O<2*A;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let L=0;L<C.g.length;L++){const V=this.i(O)>>>16,M=this.i(O)&65535,J=C.i(L)>>>16,Q=C.i(L)&65535;N[2*O+2*L]+=M*Q,D(N,2*O+2*L),N[2*O+2*L+1]+=V*Q,D(N,2*O+2*L+1),N[2*O+2*L+1]+=M*J,D(N,2*O+2*L+1),N[2*O+2*L+2]+=V*J,D(N,2*O+2*L+2)}for(C=0;C<A;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=A;C<2*A;C++)N[C]=0;return new o(N,0)};function D(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function k(C,A){this.g=C,this.h=A}function j(C,A){if(_(A))throw Error("division by zero");if(_(C))return new k(g,g);if(E(C))return A=j(S(C),A),new k(S(A.g),S(A.h));if(E(A))return A=j(C,S(A)),new k(S(A.g),A.h);if(C.g.length>30){if(E(C)||E(A))throw Error("slowDivide_ only works with positive integers.");for(var N=m,O=A;O.l(C)<=0;)N=B(N),O=B(O);var L=z(N,1),V=z(O,1);for(O=z(O,2),N=z(N,2);!_(O);){var M=V.add(O);M.l(C)<=0&&(L=L.add(N),V=M),O=z(O,1),N=z(N,1)}return A=T(C,L.j(A)),new k(L,A)}for(L=g;C.l(A)>=0;){for(N=Math.max(1,Math.floor(C.m()/A.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),V=f(N),M=V.j(A);E(M)||M.l(C)>0;)N-=O,V=f(N),M=V.j(A);_(V)&&(V=m),L=L.add(V),C=T(C,M)}return new k(L,C)}t.B=function(C){return j(this,C).h},t.and=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)&C.i(O);return new o(N,this.h&C.h)},t.or=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)|C.i(O);return new o(N,this.h|C.h)},t.xor=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let O=0;O<A;O++)N[O]=this.i(O)^C.i(O);return new o(N,this.h^C.h)};function B(C){const A=C.g.length+1,N=[];for(let O=0;O<A;O++)N[O]=C.i(O)<<1|C.i(O-1)>>>31;return new o(N,C.h)}function z(C,A){const N=A>>5;A%=32;const O=C.g.length-N,L=[];for(let V=0;V<O;V++)L[V]=A>0?C.i(V+N)>>>A|C.i(V+N+1)<<32-A:C.i(V+N);return new o(L,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,BM=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=h,Co=o}).apply(typeof $2<"u"?$2:typeof self<"u"?self:typeof window<"u"?window:{});var Eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var UM,uf,FM,Bg,F1,GM,qM,HM;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eg=="object"&&Eg];for(var R=0;R<v.length;++R){var P=v[R];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(v,R){if(R)e:{var P=r;v=v.split(".");for(var q=0;q<v.length-1;q++){var se=v[q];if(!(se in P))break e;P=P[se]}v=v[v.length-1],q=P[v],R=R(q),R!=q&&R!=null&&e(P,v,{configurable:!0,writable:!0,value:R})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(R){var P=[],q;for(q in R)Object.prototype.hasOwnProperty.call(R,q)&&P.push([q,R[q]]);return P}});var a=a||{},o=this||self;function c(v){var R=typeof v;return R=="object"&&v!=null||R=="function"}function u(v,R,P){return v.call.apply(v.bind,arguments)}function f(v,R,P){return f=u,f.apply(null,arguments)}function h(v,R){var P=Array.prototype.slice.call(arguments,1);return function(){var q=P.slice();return q.push.apply(q,arguments),v.apply(this,q)}}function g(v,R){function P(){}P.prototype=R.prototype,v.Z=R.prototype,v.prototype=new P,v.prototype.constructor=v,v.Ob=function(q,se,de){for(var Ce=Array(arguments.length-2),st=2;st<arguments.length;st++)Ce[st-2]=arguments[st];return R.prototype[se].apply(q,Ce)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function x(v){const R=v.length;if(R>0){const P=Array(R);for(let q=0;q<R;q++)P[q]=v[q];return P}return[]}function _(v,R){for(let q=1;q<arguments.length;q++){const se=arguments[q];var P=typeof se;if(P=P!="object"?P:se?Array.isArray(se)?"array":P:"null",P=="array"||P=="object"&&typeof se.length=="number"){P=v.length||0;const de=se.length||0;v.length=P+de;for(let Ce=0;Ce<de;Ce++)v[P+Ce]=se[Ce]}else v.push(se)}}class E{constructor(R,P){this.i=R,this.j=P,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function S(v){o.setTimeout(()=>{throw v},0)}function T(){var v=C;let R=null;return v.g&&(R=v.g,v.g=v.g.next,v.g||(v.h=null),R.next=null),R}class D{constructor(){this.h=this.g=null}add(R,P){const q=k.get();q.set(R,P),this.h?this.h.next=q:this.g=q,this.h=q}}var k=new E(()=>new j,v=>v.reset());class j{constructor(){this.next=this.g=this.h=null}set(R,P){this.h=R,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let B,z=!1,C=new D,A=()=>{const v=Promise.resolve(void 0);B=()=>{v.then(N)}};function N(){for(var v;v=T();){try{v.h.call(v.g)}catch(P){S(P)}var R=k;R.j(v),R.h<100&&(R.h++,v.next=R.g,R.g=v)}z=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(v,R){this.type=v,this.g=this.target=R,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,R=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const P=()=>{};o.addEventListener("test",P,R),o.removeEventListener("test",P,R)}catch{}return v})();function M(v){return/^[\s\xa0]*$/.test(v)}function J(v,R){L.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,R)}g(J,L),J.prototype.init=function(v,R){const P=this.type=v.type,q=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=R,R=v.relatedTarget,R||(P=="mouseover"?R=v.fromElement:P=="mouseout"&&(R=v.toElement)),this.relatedTarget=R,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&J.Z.h.call(this)},J.prototype.h=function(){J.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),$=0;function H(v,R,P,q,se){this.listener=v,this.proxy=null,this.src=R,this.type=P,this.capture=!!q,this.ha=se,this.key=++$,this.da=this.fa=!1}function ee(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function te(v,R,P){for(const q in v)R.call(P,v[q],q,v)}function ue(v,R){for(const P in v)R.call(void 0,v[P],P,v)}function U(v){const R={};for(const P in v)R[P]=v[P];return R}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(v,R){let P,q;for(let se=1;se<arguments.length;se++){q=arguments[se];for(P in q)v[P]=q[P];for(let de=0;de<Y.length;de++)P=Y[de],Object.prototype.hasOwnProperty.call(q,P)&&(v[P]=q[P])}}function ae(v){this.src=v,this.g={},this.h=0}ae.prototype.add=function(v,R,P,q,se){const de=v.toString();v=this.g[de],v||(v=this.g[de]=[],this.h++);const Ce=ie(v,R,q,se);return Ce>-1?(R=v[Ce],P||(R.fa=!1)):(R=new H(R,this.src,de,!!q,se),R.fa=P,v.push(R)),R};function he(v,R){const P=R.type;if(P in v.g){var q=v.g[P],se=Array.prototype.indexOf.call(q,R,void 0),de;(de=se>=0)&&Array.prototype.splice.call(q,se,1),de&&(ee(R),v.g[P].length==0&&(delete v.g[P],v.h--))}}function ie(v,R,P,q){for(let se=0;se<v.length;++se){const de=v[se];if(!de.da&&de.listener==R&&de.capture==!!P&&de.ha==q)return se}return-1}var me="closure_lm_"+(Math.random()*1e6|0),Te={};function Ae(v,R,P,q,se){if(Array.isArray(R)){for(let de=0;de<R.length;de++)Ae(v,R[de],P,q,se);return null}return P=dt(P),v&&v[Q]?v.J(R,P,c(q)?!!q.capture:!1,se):De(v,R,P,!1,q,se)}function De(v,R,P,q,se,de){if(!R)throw Error("Invalid event type");const Ce=c(se)?!!se.capture:!!se;let st=Me(v);if(st||(v[me]=st=new ae(v)),P=st.add(R,P,q,Ce,de),P.proxy)return P;if(q=be(),P.proxy=q,q.src=v,q.listener=P,v.addEventListener)V||(se=Ce),se===void 0&&(se=!1),v.addEventListener(R.toString(),q,se);else if(v.attachEvent)v.attachEvent(Pe(R.toString()),q);else if(v.addListener&&v.removeListener)v.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return P}function be(){function v(P){return R.call(v.src,v.listener,P)}const R=ze;return v}function Ee(v,R,P,q,se){if(Array.isArray(R))for(var de=0;de<R.length;de++)Ee(v,R[de],P,q,se);else q=c(q)?!!q.capture:!!q,P=dt(P),v&&v[Q]?(v=v.i,de=String(R).toString(),de in v.g&&(R=v.g[de],P=ie(R,P,q,se),P>-1&&(ee(R[P]),Array.prototype.splice.call(R,P,1),R.length==0&&(delete v.g[de],v.h--)))):v&&(v=Me(v))&&(R=v.g[R.toString()],v=-1,R&&(v=ie(R,P,q,se)),(P=v>-1?R[v]:null)&&$e(P))}function $e(v){if(typeof v!="number"&&v&&!v.da){var R=v.src;if(R&&R[Q])he(R.i,v);else{var P=v.type,q=v.proxy;R.removeEventListener?R.removeEventListener(P,q,v.capture):R.detachEvent?R.detachEvent(Pe(P),q):R.addListener&&R.removeListener&&R.removeListener(q),(P=Me(R))?(he(P,v),P.h==0&&(P.src=null,R[me]=null)):ee(v)}}}function Pe(v){return v in Te?Te[v]:Te[v]="on"+v}function ze(v,R){if(v.da)v=!0;else{R=new J(R,this);const P=v.listener,q=v.ha||v.src;v.fa&&$e(v),v=P.call(q,R)}return v}function Me(v){return v=v[me],v instanceof ae?v:null}var et="__closure_events_fn_"+(Math.random()*1e9>>>0);function dt(v){return typeof v=="function"?v:(v[et]||(v[et]=function(R){return v.handleEvent(R)}),v[et])}function Oe(){O.call(this),this.i=new ae(this),this.M=this,this.G=null}g(Oe,O),Oe.prototype[Q]=!0,Oe.prototype.removeEventListener=function(v,R,P,q){Ee(this,v,R,P,q)};function qe(v,R){var P,q=v.G;if(q)for(P=[];q;q=q.G)P.push(q);if(v=v.M,q=R.type||R,typeof R=="string")R=new L(R,v);else if(R instanceof L)R.target=R.target||v;else{var se=R;R=new L(q,v),ne(R,se)}se=!0;let de,Ce;if(P)for(Ce=P.length-1;Ce>=0;Ce--)de=R.g=P[Ce],se=Nt(de,q,!0,R)&&se;if(de=R.g=v,se=Nt(de,q,!0,R)&&se,se=Nt(de,q,!1,R)&&se,P)for(Ce=0;Ce<P.length;Ce++)de=R.g=P[Ce],se=Nt(de,q,!1,R)&&se}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var v=this.i;for(const R in v.g){const P=v.g[R];for(let q=0;q<P.length;q++)ee(P[q]);delete v.g[R],v.h--}}this.G=null},Oe.prototype.J=function(v,R,P,q){return this.i.add(String(v),R,!1,P,q)},Oe.prototype.K=function(v,R,P,q){return this.i.add(String(v),R,!0,P,q)};function Nt(v,R,P,q){if(R=v.i.g[String(R)],!R)return!0;R=R.concat();let se=!0;for(let de=0;de<R.length;++de){const Ce=R[de];if(Ce&&!Ce.da&&Ce.capture==P){const st=Ce.listener,bn=Ce.ha||Ce.src;Ce.fa&&he(v.i,Ce),se=st.call(bn,q)!==!1&&se}}return se&&!q.defaultPrevented}function vn(v,R){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=f(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:o.setTimeout(v,R||0)}function rn(v){v.g=vn(()=>{v.g=null,v.i&&(v.i=!1,rn(v))},v.l);const R=v.h;v.h=null,v.m.apply(null,R)}class ft extends O{constructor(R,P){super(),this.m=R,this.l=P,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ot(v){O.call(this),this.h=v,this.g={}}g(Ot,O);var fr=[];function hr(v){te(v.g,function(R,P){this.g.hasOwnProperty(P)&&$e(R)},v),v.g={}}Ot.prototype.N=function(){Ot.Z.N.call(this),hr(this)},Ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yr=o.JSON.stringify,Ns=o.JSON.parse,je=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function He(){}function Ii(){}var Lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){L.call(this,"d")}g(Wt,L);function yn(){L.call(this,"c")}g(yn,L);var Rt={},Tt=null;function Zn(){return Tt=Tt||new Oe}Rt.Ia="serverreachability";function an(v){L.call(this,Rt.Ia,v)}g(an,L);function We(v){const R=Zn();qe(R,new an(R))}Rt.STAT_EVENT="statevent";function It(v,R){L.call(this,Rt.STAT_EVENT,v),this.stat=R}g(It,L);function Et(v){const R=Zn();qe(R,new It(R,v))}Rt.Ja="timingevent";function Pt(v,R){L.call(this,Rt.Ja,v),this.size=R}g(Pt,L);function Tn(v,R){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},R)}function dn(){this.g=!0}dn.prototype.ua=function(){this.g=!1};function ic(v,R,P,q,se,de){v.info(function(){if(v.g)if(de){var Ce="",st=de.split("&");for(let Dt=0;Dt<st.length;Dt++){var bn=st[Dt].split("=");if(bn.length>1){const en=bn[0];bn=bn[1];const di=en.split("_");Ce=di.length>=2&&di[1]=="type"?Ce+(en+"="+bn+"&"):Ce+(en+"=redacted&")}}}else Ce=null;else Ce=de;return"XMLHTTP REQ ("+q+") [attempt "+se+"]: "+R+`
`+P+`
`+Ce})}function Fa(v,R,P,q,se,de,Ce){v.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+se+"]: "+R+`
`+P+`
`+de+" "+Ce})}function Dr(v,R,P,q){v.info(function(){return"XMLHTTP TEXT ("+R+"): "+j0(v,P)+(q?" "+q:"")})}function oi(v,R){v.info(function(){return"TIMEOUT: "+R})}dn.prototype.info=function(){};function j0(v,R){if(!v.g)return R;if(!R)return null;try{const de=JSON.parse(R);if(de){for(v=0;v<de.length;v++)if(Array.isArray(de[v])){var P=de[v];if(!(P.length<2)){var q=P[1];if(Array.isArray(q)&&!(q.length<1)){var se=q[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Ce=1;Ce<q.length;Ce++)q[Ce]=""}}}}return Yr(de)}catch{return R}}var Xo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ju={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ed;function Wo(){}g(Wo,He),Wo.prototype.g=function(){return new XMLHttpRequest},ed=new Wo;function Ga(v){return encodeURIComponent(String(v))}function Mh(v){var R=1;v=v.split(":");const P=[];for(;R>0&&v.length;)P.push(v.shift()),R--;return v.length&&P.push(v.join(":")),P}function Mi(v,R,P,q){this.j=v,this.i=R,this.l=P,this.S=q||1,this.V=new Ot(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oi}function Oi(){this.i=null,this.g="",this.h=!1}var An={},Yn={};function ra(v,R,P){v.M=1,v.A=Ko(Rn(R)),v.u=P,v.R=!0,ac(v,null)}function ac(v,R){v.F=Date.now(),ia(v),v.B=Rn(v.A);var P=v.B,q=v.S;Array.isArray(q)||(q=[String(q)]),cc(P.i,"t",q),v.C=0,P=v.j.L,v.h=new Oi,v.g=Xh(v.j,P?R:null,!v.u),v.P>0&&(v.O=new ft(f(v.Y,v,v.g),v.P)),R=v.V,P=v.g,q=v.ba;var se="readystatechange";Array.isArray(se)||(se&&(fr[0]=se.toString()),se=fr);for(let de=0;de<se.length;de++){const Ce=Ae(P,se[de],q||R.handleEvent,!1,R.h||R);if(!Ce)break;R.g[Ce.key]=Ce}R=v.J?U(v.J):{},v.u?(v.v||(v.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,R)):(v.v="GET",v.g.ea(v.B,v.v,null,R)),We(),ic(v.i,v.v,v.B,v.l,v.S,v.u)}Mi.prototype.ba=function(v){v=v.target;const R=this.O;R&&Vi(v)==3?R.j():this.Y(v)},Mi.prototype.Y=function(v){try{if(v==this.g)e:{const st=Vi(this.g),bn=this.g.ya(),Dt=this.g.ca();if(!(st<3)&&(st!=3||this.g&&(this.h.h||this.g.la()||Jn(this.g)))){this.K||st!=4||bn==7||(bn==8||Dt<=0?We(3):We(2)),aa(this);var R=this.g.ca();this.X=R;var P=V0(this);if(this.o=R==200,Fa(this.i,this.v,this.B,this.l,this.S,st,R),this.o){if(this.U&&!this.L){t:{if(this.g){var q,se=this.g;if((q=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(q)){var de=q;break t}}de=null}if(v=de)Dr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,sa(this,v);else{this.o=!1,this.m=3,Et(12),Xr(this),li(this);break e}}if(this.R){v=!0;let en;for(;!this.K&&this.C<P.length;)if(en=Ph(this,P),en==Yn){st==4&&(this.m=4,Et(14),v=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(en==An){this.m=4,Et(15),Dr(this.i,this.l,P,"[Invalid Chunk]"),v=!1;break}else Dr(this.i,this.l,en,null),sa(this,en);if(Oh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||P.length!=0||this.h.h||(this.m=1,Et(16),v=!1),this.o=this.o&&v,!v)Dr(this.i,this.l,P,"[Invalid Chunked Response]"),Xr(this),li(this);else if(P.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),gd(Ce),Ce.P=!0,Et(11))}}else Dr(this.i,this.l,P,null),sa(this,P);st==4&&Xr(this),this.o&&!this.K&&(st==4?qh(this.j,this):(this.o=!1,ia(this)))}else Ha(this.g),R==400&&P.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),Xr(this),li(this)}}}catch{}finally{}};function V0(v){if(!Oh(v))return v.g.la();const R=Jn(v.g);if(R==="")return"";let P="";const q=R.length,se=Vi(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return Xr(v),li(v),"";v.h.i=new o.TextDecoder}for(let de=0;de<q;de++)v.h.h=!0,P+=v.h.i.decode(R[de],{stream:!(se&&de==q-1)});return R.length=0,v.h.g+=P,v.C=0,v.h.g}function Oh(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Ph(v,R){var P=v.C,q=R.indexOf(`
`,P);return q==-1?Yn:(P=Number(R.substring(P,q)),isNaN(P)?An:(q+=1,q+P>R.length?Yn:(R=R.slice(q,q+P),v.C=q+P,R)))}Mi.prototype.cancel=function(){this.K=!0,Xr(this)};function ia(v){v.T=Date.now()+v.H,sc(v,v.H)}function sc(v,R){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Tn(f(v.aa,v),R)}function aa(v){v.D&&(o.clearTimeout(v.D),v.D=null)}Mi.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(oi(this.i,this.B),this.M!=2&&(We(),Et(17)),Xr(this),this.m=2,li(this)):sc(this,this.T-v)};function li(v){v.j.I==0||v.K||qh(v.j,v)}function Xr(v){aa(v);var R=v.O;R&&typeof R.dispose=="function"&&R.dispose(),v.O=null,hr(v.V),v.g&&(R=v.g,v.g=null,R.abort(),R.dispose())}function sa(v,R){try{var P=v.j;if(P.I!=0&&(P.g==v||la(P.h,v))){if(!v.L&&la(P.h,v)&&P.I==3){try{var q=P.Ba.g.parse(R)}catch{q=null}if(Array.isArray(q)&&q.length==3){var se=q;if(se[0]==0){e:if(!P.v){if(P.g)if(P.g.F+3e3<v.F)pc(P),Ls(P);else break e;rl(P),Et(18)}}else P.xa=se[1],0<P.xa-P.K&&se[2]<37500&&P.F&&P.A==0&&!P.C&&(P.C=Tn(f(P.Va,P),6e3));oa(P.h)<=1&&P.ta&&(P.ta=void 0)}else pa(P,11)}else if((v.L||P.g==v)&&pc(P),!M(R))for(se=P.Ba.g.parse(R),R=0;R<se.length;R++){let Dt=se[R];const en=Dt[0];if(!(en<=P.K))if(P.K=en,Dt=Dt[1],P.I==2)if(Dt[0]=="c"){P.M=Dt[1],P.ba=Dt[2];const di=Dt[3];di!=null&&(P.ka=di,P.j.info("VER="+P.ka));const ga=Dt[4];ga!=null&&(P.za=ga,P.j.info("SVER="+P.za));const zi=Dt[5];zi!=null&&typeof zi=="number"&&zi>0&&(q=1.5*zi,P.O=q,P.j.info("backChannelRequestTimeoutMs_="+q)),q=P;const Li=v.g;if(Li){const il=Li.g?Li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var de=q.h;de.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(rd(de,de.h),de.h=null))}if(q.G){const gc=Li.g?Li.g.getResponseHeader("X-HTTP-Session-Id"):null;gc&&(q.wa=gc,jt(q.J,q.G,gc))}}P.I=3,P.l&&P.l.ra(),P.aa&&(P.T=Date.now()-v.F,P.j.info("Handshake RTT: "+P.T+"ms")),q=P;var Ce=v;if(q.na=Yh(q,q.L?q.ba:null,q.W),Ce.L){id(q.h,Ce);var st=Ce,bn=q.O;bn&&(st.H=bn),st.D&&(aa(st),ia(st)),q.g=Ce}else Fh(q);P.i.length>0&&ha(P)}else Dt[0]!="stop"&&Dt[0]!="close"||pa(P,7);else P.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?pa(P,7):hd(P):Dt[0]!="noop"&&P.l&&P.l.qa(Dt),P.A=0)}}We(4)}catch{}}var Cn=class{constructor(v,R){this.g=v,this.map=R}};function td(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nd(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function oa(v){return v.h?1:v.g?v.g.size:0}function la(v,R){return v.h?v.h==R:v.g?v.g.has(R):!1}function rd(v,R){v.g?v.g.add(R):v.h=R}function id(v,R){v.h&&v.h==R?v.h=null:v.g&&v.g.has(R)&&v.g.delete(R)}td.prototype.cancel=function(){if(this.i=ad(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function ad(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let R=v.i;for(const P of v.g.values())R=R.concat(P.G);return R}return x(v.i)}var jh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oc(v,R){if(v){v=v.split("&");for(let P=0;P<v.length;P++){const q=v[P].indexOf("=");let se,de=null;q>=0?(se=v[P].substring(0,q),de=v[P].substring(q+1)):se=v[P],R(se,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function Wr(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;v instanceof Wr?(this.l=v.l,Xn(this,v.j),this.o=v.o,this.g=v.g,Is(this,v.u),this.h=v.h,sd(this,Bh(v.i)),this.m=v.m):v&&(R=String(v).match(jh))?(this.l=!1,Xn(this,R[1]||"",!0),this.o=ca(R[2]||""),this.g=ca(R[3]||"",!0),Is(this,R[4]),this.h=ca(R[5]||"",!0),sd(this,R[6]||"",!0),this.m=ca(R[7]||"")):(this.l=!1,this.i=new Os(null,this.l))}Wr.prototype.toString=function(){const v=[];var R=this.j;R&&v.push(Qo(R,lc,!0),":");var P=this.g;return(P||R=="file")&&(v.push("//"),(R=this.o)&&v.push(Qo(R,lc,!0),"@"),v.push(Ga(P).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.u,P!=null&&v.push(":",String(P))),(P=this.h)&&(this.g&&P.charAt(0)!="/"&&v.push("/"),v.push(Qo(P,P.charAt(0)=="/"?od:Vh,!0))),(P=this.i.toString())&&v.push("?",P),(P=this.m)&&v.push("#",Qo(P,zh)),v.join("")},Wr.prototype.resolve=function(v){const R=Rn(this);let P=!!v.j;P?Xn(R,v.j):P=!!v.o,P?R.o=v.o:P=!!v.g,P?R.g=v.g:P=v.u!=null;var q=v.h;if(P)Is(R,v.u);else if(P=!!v.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var se=R.h.lastIndexOf("/");se!=-1&&(q=R.h.slice(0,se+1)+q)}if(se=q,se==".."||se==".")q="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){q=se.lastIndexOf("/",0)==0,se=se.split("/");const de=[];for(let Ce=0;Ce<se.length;){const st=se[Ce++];st=="."?q&&Ce==se.length&&de.push(""):st==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),q&&Ce==se.length&&de.push("")):(de.push(st),q=!0)}q=de.join("/")}else q=se}return P?R.h=q:P=v.i.toString()!=="",P?sd(R,Bh(v.i)):P=!!v.m,P&&(R.m=v.m),R};function Rn(v){return new Wr(v)}function Xn(v,R,P){v.j=P?ca(R,!0):R,v.j&&(v.j=v.j.replace(/:$/,""))}function Is(v,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);v.u=R}else v.u=null}function sd(v,R,P){R instanceof Os?(v.i=R,uc(v.i,v.l)):(P||(R=Qo(R,Ms)),v.i=new Os(R,v.l))}function jt(v,R,P){v.i.set(R,P)}function Ko(v){return jt(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function ca(v,R){return v?R?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Qo(v,R,P){return typeof v=="string"?(v=encodeURI(v).replace(R,kr),P&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function kr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var lc=/[#\/\?@]/g,Vh=/[#\?:]/g,od=/[#\?]/g,Ms=/[#\?@]/g,zh=/#/g;function Os(v,R){this.h=this.g=null,this.i=v||null,this.j=!!R}function Nr(v){v.g||(v.g=new Map,v.h=0,v.i&&oc(v.i,function(R,P){v.add(decodeURIComponent(R.replace(/\+/g," ")),P)}))}t=Os.prototype,t.add=function(v,R){Nr(this),this.i=null,v=Ps(this,v);let P=this.g.get(v);return P||this.g.set(v,P=[]),P.push(R),this.h+=1,this};function Lh(v,R){Nr(v),R=Ps(v,R),v.g.has(R)&&(v.i=null,v.h-=v.g.get(R).length,v.g.delete(R))}function ld(v,R){return Nr(v),R=Ps(v,R),v.g.has(R)}t.forEach=function(v,R){Nr(this),this.g.forEach(function(P,q){P.forEach(function(se){v.call(R,se,q,this)},this)},this)};function cd(v,R){Nr(v);let P=[];if(typeof R=="string")ld(v,R)&&(P=P.concat(v.g.get(Ps(v,R))));else for(v=Array.from(v.g.values()),R=0;R<v.length;R++)P=P.concat(v[R]);return P}t.set=function(v,R){return Nr(this),this.i=null,v=Ps(this,v),ld(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[R]),this.h+=1,this},t.get=function(v,R){return v?(v=cd(this,v),v.length>0?String(v[0]):R):R};function cc(v,R,P){Lh(v,R),P.length>0&&(v.i=null,v.g.set(Ps(v,R),x(P)),v.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],R=Array.from(this.g.keys());for(let q=0;q<R.length;q++){var P=R[q];const se=Ga(P);P=cd(this,P);for(let de=0;de<P.length;de++){let Ce=se;P[de]!==""&&(Ce+="="+Ga(P[de])),v.push(Ce)}}return this.i=v.join("&")};function Bh(v){const R=new Os;return R.i=v.i,v.g&&(R.g=new Map(v.g),R.h=v.h),R}function Ps(v,R){return R=String(R),v.j&&(R=R.toLowerCase()),R}function uc(v,R){R&&!v.j&&(Nr(v),v.i=null,v.g.forEach(function(P,q){const se=q.toLowerCase();q!=se&&(Lh(this,q),cc(this,se,P))},v)),v.j=R}function Pi(v,R){const P=new dn;if(o.Image){const q=new Image;q.onload=h(ci,P,"TestLoadImage: loaded",!0,R,q),q.onerror=h(ci,P,"TestLoadImage: error",!1,R,q),q.onabort=h(ci,P,"TestLoadImage: abort",!1,R,q),q.ontimeout=h(ci,P,"TestLoadImage: timeout",!1,R,q),o.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=v}else R(!1)}function ud(v,R){const P=new dn,q=new AbortController,se=setTimeout(()=>{q.abort(),ci(P,"TestPingServer: timeout",!1,R)},1e4);fetch(v,{signal:q.signal}).then(de=>{clearTimeout(se),de.ok?ci(P,"TestPingServer: ok",!0,R):ci(P,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(se),ci(P,"TestPingServer: error",!1,R)})}function ci(v,R,P,q,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),q(P)}catch{}}function js(){this.g=new je}function ua(v){this.i=v.Sb||null,this.h=v.ab||!1}g(ua,He),ua.prototype.g=function(){return new Zo(this.i,this.h)};function Zo(v,R){Oe.call(this),this.H=v,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Zo,Oe),t=Zo.prototype,t.open=function(v,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=R,this.readyState=1,ji(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(R.body=v),(this.H||o).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dc(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function dc(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var R=v.value?v.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!v.done}))&&(this.response=this.responseText+=R)}v.done?Vs(this):ji(this),this.readyState==3&&dc(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,Vs(this))},t.Na=function(v){this.g&&(this.response=v,Vs(this))},t.ga=function(){this.g&&Vs(this)};function Vs(v){v.readyState=4,v.l=null,v.j=null,v.B=null,ji(v)}t.setRequestHeader=function(v,R){this.A.append(v,R)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],R=this.h.entries();for(var P=R.next();!P.done;)P=P.value,v.push(P[0]+": "+P[1]),P=R.next();return v.join(`\r
`)};function ji(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function ui(v){let R="";return te(v,function(P,q){R+=q,R+=":",R+=P,R+=`\r
`}),R}function Jo(v,R,P){e:{for(q in P){var q=!1;break e}q=!0}q||(P=ui(P),typeof v=="string"?P!=null&&Ga(P):jt(v,R,P))}function Bt(v){Oe.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Bt,Oe);var da=/^https?$/i,dd=["POST","PUT"];t=Bt.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,R,P,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);R=R?R.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ed.g(),this.g.onreadystatechange=m(f(this.Ca,this));try{this.B=!0,this.g.open(R,String(v),!0),this.B=!1}catch(de){el(this,de);return}if(v=P||"",P=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var se in q)P.set(se,q[se]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const de of q.keys())P.set(de,q.get(de));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(P.keys()).find(de=>de.toLowerCase()=="content-type"),se=o.FormData&&v instanceof o.FormData,!(Array.prototype.indexOf.call(dd,R,void 0)>=0)||q||se||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Ce]of P)this.g.setRequestHeader(de,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(de){el(this,de)}};function el(v,R){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=R,v.o=5,fd(v),qa(v)}function fd(v){v.A||(v.A=!0,qe(v,"complete"),qe(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,qe(this,"complete"),qe(this,"abort"),qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),Bt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tl(this):this.Xa())},t.Xa=function(){tl(this)};function tl(v){if(v.h&&typeof a<"u"){if(v.v&&Vi(v)==4)setTimeout(v.Ca.bind(v),0);else if(qe(v,"readystatechange"),Vi(v)==4){v.h=!1;try{const de=v.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var P;if(!(P=R)){var q;if(q=de===0){let Ce=String(v.D).match(jh)[1]||null;!Ce&&o.self&&o.self.location&&(Ce=o.self.location.protocol.slice(0,-1)),q=!da.test(Ce?Ce.toLowerCase():"")}P=q}if(P)qe(v,"complete"),qe(v,"success");else{v.o=6;try{var se=Vi(v)>2?v.g.statusText:""}catch{se=""}v.l=se+" ["+v.ca()+"]",fd(v)}}finally{qa(v)}}}}function qa(v,R){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const P=v.g;v.g=null,R||qe(v,"ready");try{P.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Vi(v){return v.g?v.g.readyState:0}t.ca=function(){try{return Vi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var R=this.g.responseText;return v&&R.indexOf(v)==0&&(R=R.substring(v.length)),Ns(R)}};function Jn(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(v){const R={};v=(v.g&&Vi(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<v.length;q++){if(M(v[q]))continue;var P=Mh(v[q]);const se=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const de=R[se]||[];R[se]=de,de.push(P)}ue(R,function(q){return q.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(v,R,P){return P&&P.internalChannelParams&&P.internalChannelParams[v]||R}function zs(v){this.za=0,this.i=[],this.j=new dn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fa("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fa("baseRetryDelayMs",5e3,v),this.Za=fa("retryDelaySeedMs",1e4,v),this.Ta=fa("forwardChannelMaxRetries",2,v),this.va=fa("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new td(v&&v.concurrentRequestLimit),this.Ba=new js,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=zs.prototype,t.ka=8,t.I=1,t.connect=function(v,R,P,q){Et(0),this.W=v,this.H=R||{},P&&q!==void 0&&(this.H.OSID=P,this.H.OAID=q),this.F=this.X,this.J=Yh(this,null,this.W),ha(this)};function hd(v){if(fc(v),v.I==3){var R=v.V++,P=Rn(v.J);if(jt(P,"SID",v.M),jt(P,"RID",R),jt(P,"TYPE","terminate"),nl(v,P),R=new Mi(v,v.j,R),R.M=2,R.A=Ko(Rn(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(R.A.toString(),"")}catch{}!P&&o.Image&&(new Image().src=R.A,P=!0),P||(R.g=Xh(R.j,null),R.g.ea(R.A)),R.F=Date.now(),ia(R)}$h(v)}function Ls(v){v.g&&(gd(v),v.g.cancel(),v.g=null)}function fc(v){Ls(v),v.v&&(o.clearTimeout(v.v),v.v=null),pc(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&o.clearTimeout(v.m),v.m=null)}function ha(v){if(!nd(v.h)&&!v.m){v.m=!0;var R=v.Ea;B||A(),z||(B(),z=!0),C.add(R,v),v.D=0}}function hc(v,R){return oa(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=R.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Tn(f(v.Ea,v,R),Hh(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const se=new Mi(this,this.j,v);let de=this.o;if(this.U&&(de?(de=U(de),ne(de,this.U)):de=this.U),this.u!==null||this.R||(se.J=de,de=null),this.S)e:{for(var R=0,P=0;P<this.i.length;P++){t:{var q=this.i[P];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(R+=q,R>4096){R=P;break e}if(R===4096||P===this.i.length-1){R=P+1;break e}}R=1e3}else R=1e3;R=Uh(this,se,R),P=Rn(this.J),jt(P,"RID",v),jt(P,"CVER",22),this.G&&jt(P,"X-HTTP-Session-Id",this.G),nl(this,P),de&&(this.R?R="headers="+Ga(ui(de))+"&"+R:this.u&&Jo(P,this.u,de)),rd(this.h,se),this.Ra&&jt(P,"TYPE","init"),this.S?(jt(P,"$req",R),jt(P,"SID","null"),se.U=!0,ra(se,P,null)):ra(se,P,R),this.I=2}}else this.I==3&&(v?pd(this,v):this.i.length==0||nd(this.h)||pd(this))};function pd(v,R){var P;R?P=R.l:P=v.V++;const q=Rn(v.J);jt(q,"SID",v.M),jt(q,"RID",P),jt(q,"AID",v.K),nl(v,q),v.u&&v.o&&Jo(q,v.u,v.o),P=new Mi(v,v.j,P,v.D+1),v.u===null&&(P.J=v.o),R&&(v.i=R.G.concat(v.i)),R=Uh(v,P,1e3),P.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),rd(v.h,P),ra(P,q,R)}function nl(v,R){v.H&&te(v.H,function(P,q){jt(R,q,P)}),v.l&&te({},function(P,q){jt(R,q,P)})}function Uh(v,R,P){P=Math.min(v.i.length,P);const q=v.l?f(v.l.Ka,v.l,v):null;e:{var se=v.i;let st=-1;for(;;){const bn=["count="+P];st==-1?P>0?(st=se[0].g,bn.push("ofs="+st)):st=0:bn.push("ofs="+st);let Dt=!0;for(let en=0;en<P;en++){var de=se[en].g;const di=se[en].map;if(de-=st,de<0)st=Math.max(0,se[en].g-100),Dt=!1;else try{de="req"+de+"_"||"";try{var Ce=di instanceof Map?di:Object.entries(di);for(const[ga,zi]of Ce){let Li=zi;c(zi)&&(Li=Yr(zi)),bn.push(de+ga+"="+encodeURIComponent(Li))}}catch(ga){throw bn.push(de+"type="+encodeURIComponent("_badmap")),ga}}catch{q&&q(di)}}if(Dt){Ce=bn.join("&");break e}}Ce=void 0}return v=v.i.splice(0,P),R.G=v,Ce}function Fh(v){if(!v.g&&!v.v){v.Y=1;var R=v.Da;B||A(),z||(B(),z=!0),C.add(R,v),v.A=0}}function rl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Tn(f(v.Da,v),Hh(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,Gh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Tn(f(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Ls(this),Gh(this))};function gd(v){v.B!=null&&(o.clearTimeout(v.B),v.B=null)}function Gh(v){v.g=new Mi(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var R=Rn(v.na);jt(R,"RID","rpc"),jt(R,"SID",v.M),jt(R,"AID",v.K),jt(R,"CI",v.F?"0":"1"),!v.F&&v.ia&&jt(R,"TO",v.ia),jt(R,"TYPE","xmlhttp"),nl(v,R),v.u&&v.o&&Jo(R,v.u,v.o),v.O&&(v.g.H=v.O);var P=v.g;v=v.ba,P.M=1,P.A=Ko(Rn(R)),P.u=null,P.R=!0,ac(P,v)}t.Va=function(){this.C!=null&&(this.C=null,Ls(this),rl(this),Et(19))};function pc(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function qh(v,R){var P=null;if(v.g==R){pc(v),gd(v),v.g=null;var q=2}else if(la(v.h,R))P=R.G,id(v.h,R),q=1;else return;if(v.I!=0){if(R.o)if(q==1){P=R.u?R.u.length:0,R=Date.now()-R.F;var se=v.D;q=Zn(),qe(q,new Pt(q,P)),ha(v)}else Fh(v);else if(se=R.m,se==3||se==0&&R.X>0||!(q==1&&hc(v,R)||q==2&&rl(v)))switch(P&&P.length>0&&(R=v.h,R.i=R.i.concat(P)),se){case 1:pa(v,5);break;case 4:pa(v,10);break;case 3:pa(v,6);break;default:pa(v,2)}}}function Hh(v,R){let P=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(P*=2),P*R}function pa(v,R){if(v.j.info("Error code "+R),R==2){var P=f(v.bb,v),q=v.Ua;const se=!q;q=new Wr(q||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xn(q,"https"),Ko(q),se?Pi(q.toString(),P):ud(q.toString(),P)}else Et(2);v.I=0,v.l&&v.l.pa(R),$h(v),fc(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function $h(v){if(v.I=0,v.ja=[],v.l){const R=ad(v.h);(R.length!=0||v.i.length!=0)&&(_(v.ja,R),_(v.ja,v.i),v.h.i.length=0,x(v.i),v.i.length=0),v.l.oa()}}function Yh(v,R,P){var q=P instanceof Wr?Rn(P):new Wr(P);if(q.g!="")R&&(q.g=R+"."+q.g),Is(q,q.u);else{var se=o.location;q=se.protocol,R=R?R+"."+se.hostname:se.hostname,se=+se.port;const de=new Wr(null);q&&Xn(de,q),R&&(de.g=R),se&&Is(de,se),P&&(de.h=P),q=de}return P=v.G,R=v.wa,P&&R&&jt(q,P,R),jt(q,"VER",v.ka),nl(v,q),q}function Xh(v,R,P){if(R&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=v.Aa&&!v.ma?new Bt(new ua({ab:P})):new Bt(v.ma),R.Fa(v.L),R}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wh(){}t=Wh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Bs(){}Bs.prototype.g=function(v,R){return new wr(v,R)};function wr(v,R){Oe.call(this),this.g=new zs(R),this.l=v,this.h=R&&R.messageUrlParams||null,v=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(v?v["X-WebChannel-Content-Type"]=R.messageContentType:v={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(v?v["X-WebChannel-Client-Profile"]=R.sa:v={"X-WebChannel-Client-Profile":R.sa}),this.g.U=v,(v=R&&R.Qb)&&!M(v)&&(this.g.u=v),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!M(R)&&(this.g.G=R,v=this.h,v!==null&&R in v&&(v=this.h,R in v&&delete v[R])),this.j=new $a(this)}g(wr,Oe),wr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wr.prototype.close=function(){hd(this.g)},wr.prototype.o=function(v){var R=this.g;if(typeof v=="string"){var P={};P.__data__=v,v=P}else this.v&&(P={},P.__data__=Yr(v),v=P);R.i.push(new Cn(R.Ya++,v)),R.I==3&&ha(R)},wr.prototype.N=function(){this.g.l=null,delete this.j,hd(this.g),delete this.g,wr.Z.N.call(this)};function Kh(v){Wt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var R=v.__sm__;if(R){e:{for(const P in R){v=P;break e}v=void 0}(this.i=v)&&(v=this.i,R=R!==null&&v in R?R[v]:void 0),this.data=R}else this.data=v}g(Kh,Wt);function Qh(){yn.call(this),this.status=1}g(Qh,yn);function $a(v){this.g=v}g($a,Wh),$a.prototype.ra=function(){qe(this.g,"a")},$a.prototype.qa=function(v){qe(this.g,new Kh(v))},$a.prototype.pa=function(v){qe(this.g,new Qh)},$a.prototype.oa=function(){qe(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,wr.prototype.send=wr.prototype.o,wr.prototype.open=wr.prototype.m,wr.prototype.close=wr.prototype.close,HM=function(){return new Bs},qM=function(){return Zn()},GM=Rt,F1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,Bg=Xo,Ju.COMPLETE="complete",FM=Ju,Ii.EventType=Lt,Lt.OPEN="a",Lt.CLOSE="b",Lt.ERROR="c",Lt.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,uf=Ii,Bt.prototype.listenOnce=Bt.prototype.K,Bt.prototype.getLastError=Bt.prototype.Ha,Bt.prototype.getLastErrorCode=Bt.prototype.ya,Bt.prototype.getStatus=Bt.prototype.ca,Bt.prototype.getResponseJson=Bt.prototype.La,Bt.prototype.getResponseText=Bt.prototype.la,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Fa,UM=Bt}).apply(typeof Eg<"u"?Eg:typeof self<"u"?self:typeof window<"u"?window:{});const Y2="@firebase/firestore",X2="4.9.2";class mr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");let Xu="12.3.0";const Yl=new j_("@firebase/firestore");function Yc(){return Yl.logLevel}function ke(t,...e){if(Yl.logLevel<=yt.DEBUG){const n=e.map(L_);Yl.debug(`Firestore (${Xu}): ${t}`,...n)}}function Ss(t,...e){if(Yl.logLevel<=yt.ERROR){const n=e.map(L_);Yl.error(`Firestore (${Xu}): ${t}`,...n)}}function Ru(t,...e){if(Yl.logLevel<=yt.WARN){const n=e.map(L_);Yl.warn(`Firestore (${Xu}): ${t}`,...n)}}function L_(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Qe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$M(t,r,n)}function $M(t,e,n){let r=`FIRESTORE (${Xu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ss(r),new Error(r)}function Mt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||$M(e,i,r)}function at(t,e){return t}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ms{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class YM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mr.UNAUTHENTICATED)))}shutdown(){}}class jH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class VH{constructor(e){this.t=e,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Mt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ms,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ms)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt(typeof r.accessToken=="string",31837,{l:r}),new YM(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new mr(e)}}class zH{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LH{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zH(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class W2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Mt(this.o===void 0,3512);const r=a=>{a.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new W2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new W2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function UH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class B_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=UH(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function bt(t,e){return t<e?-1:t>e?1:0}function G1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return xb(i)===xb(a)?bt(i,a):xb(i)?1:-1}return bt(t.length,e.length)}const FH=55296,GH=57343;function xb(t){const e=t.charCodeAt(0);return e>=FH&&e<=GH}function Du(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const K2="__name__";class xa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Qe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Qe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xa?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=xa.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return bt(e.length,n.length)}static compareSegments(e,n){const r=xa.isNumericId(e),i=xa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?xa.extractNumericId(e).compare(xa.extractNumericId(n)):G1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Co.fromString(e.substring(4,e.length-2))}}class Kt extends xa{construct(e,n,r){return new Kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Kt(n)}static emptyPath(){return new Kt([])}}const qH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends xa{construct(e,n,r){return new cr(e,n,r)}static isValidIdentifier(e){return qH.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K2}static keyField(){return new cr([K2])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Re(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Re(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Re(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Re(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(n)}static emptyPath(){return new cr([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Kt.fromString(e))}static fromName(e){return new Ge(Kt.fromString(e).popFirst(5))}static empty(){return new Ge(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Kt(e.slice()))}}function XM(t,e,n){if(!n)throw new Re(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HH(t,e,n,r){if(e===!0&&r===!0)throw new Re(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Q2(t){if(!Ge.isDocumentKey(t))throw new Re(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Z2(t){if(Ge.isDocumentKey(t))throw new Re(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function WM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function d0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Qe(12329,{type:typeof t})}function Fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=d0(t);throw new Re(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function zn(t,e){const n={typeString:t};return e&&(n.value=e),n}function wh(t,e){if(!WM(t))throw new Re(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Re(ve.INVALID_ARGUMENT,n);return!0}const J2=-62135596800,eR=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*eR);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J2)throw new Re(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eR}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wh(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:zn("string",gt._jsonSchemaVersion),seconds:zn("number"),nanoseconds:zn("number")};class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new gt(0,0))}static max(){return new nt(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Wf=-1;function $H(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=nt.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Po(i,Ge.empty(),e)}function YH(t){return new Po(t.readTime,t.key,Wf)}class Po{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Po(nt.min(),Ge.empty(),Wf)}static max(){return new Po(nt.max(),Ge.empty(),Wf)}}function XH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ge.comparator(t.documentKey,e.documentKey),n!==0?n:bt(t.largestBatchId,e.largestBatchId))}const WH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class KH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Wu(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==WH)throw t;ke("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.reject(n)}static resolve(e){return new xe(((n,r)=>{n(e)}))}static reject(e){return new xe(((n,r)=>{r(e)}))}static waitFor(e){return new xe(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next((i=>i?xe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new xe(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const f=u;n(e[f]).next((h=>{o[f]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(e,n){return new xe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function QH(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ku(t){return t.name==="IndexedDbTransactionError"}class f0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}f0.ce=-1;const U_=-1;function h0(t){return t==null}function xm(t){return t===0&&1/t==-1/0}function ZH(t){return typeof t=="number"&&Number.isInteger(t)&&!xm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const KM="";function JH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tR(e)),e=e$(t.get(n),e);return tR(e)}function e$(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case KM:n+="";break;default:n+=a}}return n}function tR(t){return t+KM+""}function nR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ho(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function QM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class un{constructor(e,n){this.comparator=e,this.root=n||or.EMPTY}insert(e,n){return new un(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,or.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,or.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sg(this.root,e,this.comparator,!0)}}class Sg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class or{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??or.RED,this.left=i??or.EMPTY,this.right=a??or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new or(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return or.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}or.EMPTY=null,or.RED=!0,or.BLACK=!1;or.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new or(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rR(this.data.getIterator())}getIteratorFrom(e){return new rR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new $n(this.comparator);return n.data=e,n}}class rR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ii{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new ii([])}unionWith(e){let n=new $n(cr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ii(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Du(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class ZM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ZM("Invalid base64 string: "+a):a}})(e);return new dr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new dr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const t$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(t){if(Mt(!!t,39018),typeof t=="string"){let e=0;const n=t$.exec(t);if(Mt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:En(t.seconds),nanos:En(t.nanos)}}function En(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vo(t){return typeof t=="string"?dr.fromBase64String(t):dr.fromUint8Array(t)}const JM="server_timestamp",e4="__type__",t4="__previous_value__",n4="__local_write_time__";function F_(t){return(t?.mapValue?.fields||{})[e4]?.stringValue===JM}function p0(t){const e=t.mapValue.fields[t4];return F_(e)?p0(e):e}function Kf(t){const e=jo(t.mapValue.fields[n4].timestampValue);return new gt(e.seconds,e.nanos)}class n${constructor(e,n,r,i,a,o,c,u,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=h}}const _m="(default)";class Qf{constructor(e,n){this.projectId=e,this.database=n||_m}static empty(){return new Qf("","")}get isDefaultDatabase(){return this.database===_m}isEqual(e){return e instanceof Qf&&e.projectId===this.projectId&&e.database===this.database}}const r4="__type__",r$="__max__",Tg={mapValue:{}},i4="__vector__",wm="value";function zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?F_(t)?4:a$(t)?9007199254740991:i$(t)?10:11:Qe(28295,{value:t})}function Pa(t,e){if(t===e)return!0;const n=zo(t);if(n!==zo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kf(t).isEqual(Kf(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=jo(i.timestampValue),c=jo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Vo(i.bytesValue).isEqual(Vo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return En(i.geoPointValue.latitude)===En(a.geoPointValue.latitude)&&En(i.geoPointValue.longitude)===En(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return En(i.integerValue)===En(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=En(i.doubleValue),c=En(a.doubleValue);return o===c?xm(o)===xm(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Du(t.arrayValue.values||[],e.arrayValue.values||[],Pa);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(nR(o)!==nR(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Pa(o[u],c[u])))return!1;return!0})(t,e);default:return Qe(52216,{left:t})}}function Zf(t,e){return(t.values||[]).find((n=>Pa(n,e)))!==void 0}function ku(t,e){if(t===e)return 0;const n=zo(t),r=zo(e);if(n!==r)return bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bt(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=En(a.integerValue||a.doubleValue),u=En(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return iR(t.timestampValue,e.timestampValue);case 4:return iR(Kf(t),Kf(e));case 5:return G1(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=Vo(a),u=Vo(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let f=0;f<c.length&&f<u.length;f++){const h=bt(c[f],u[f]);if(h!==0)return h}return bt(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=bt(En(a.latitude),En(o.latitude));return c!==0?c:bt(En(a.longitude),En(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return aR(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},f=c[wm]?.arrayValue,h=u[wm]?.arrayValue,g=bt(f?.values?.length||0,h?.values?.length||0);return g!==0?g:aR(f,h)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Tg.mapValue&&o===Tg.mapValue)return 0;if(a===Tg.mapValue)return 1;if(o===Tg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),f=o.fields||{},h=Object.keys(f);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=G1(u[g],h[g]);if(m!==0)return m;const x=ku(c[u[g]],f[h[g]]);if(x!==0)return x}return bt(u.length,h.length)})(t.mapValue,e.mapValue);default:throw Qe(23264,{he:n})}}function iR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return bt(t,e);const n=jo(t),r=jo(e),i=bt(n.seconds,r.seconds);return i!==0?i:bt(n.nanos,r.nanos)}function aR(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=ku(n[i],r[i]);if(a)return a}return bt(n.length,r.length)}function Nu(t){return q1(t)}function q1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=jo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Vo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ge.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=q1(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${q1(n.fields[o])}`;return i+"}"})(t.mapValue):Qe(61005,{value:t})}function Ug(t){switch(zo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=p0(t);return e?16+Ug(e):16;case 5:return 2*t.stringValue.length;case 6:return Vo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Ug(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Ho(r.fields,((a,o)=>{i+=a.length+Ug(o)})),i})(t.mapValue);default:throw Qe(13486,{value:t})}}function sR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function H1(t){return!!t&&"integerValue"in t}function G_(t){return!!t&&"arrayValue"in t}function oR(t){return!!t&&"nullValue"in t}function lR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fg(t){return!!t&&"mapValue"in t}function i$(t){return(t?.mapValue?.fields||{})[r4]?.stringValue===i4}function Af(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ho(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Af(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Af(t.arrayValue.values[n]);return e}return{...t}}function a$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===r$}class Lr{constructor(e){this.value=e}static empty(){return new Lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Af(n)}setAll(e){let n=cr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Af(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Fg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Fg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ho(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Lr(Af(this.value))}}function a4(t){const e=[];return Ho(t.fields,((n,r)=>{const i=new cr([n]);if(Fg(r)){const a=a4(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new ii(e)}class vr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new vr(e,0,nt.min(),nt.min(),nt.min(),Lr.empty(),0)}static newFoundDocument(e,n,r,i){return new vr(e,1,n,nt.min(),r,i,0)}static newNoDocument(e,n){return new vr(e,2,n,nt.min(),nt.min(),Lr.empty(),0)}static newUnknownDocument(e,n){return new vr(e,3,n,nt.min(),nt.min(),Lr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Em{constructor(e,n){this.position=e,this.inclusive=n}}function cR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=Ge.comparator(Ge.fromName(o.referenceValue),n.key):r=ku(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function uR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pa(t.position[n],e.position[n]))return!1;return!0}class Jf{constructor(e,n="asc"){this.field=e,this.dir=n}}function s$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class s4{}class Vn extends s4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new l$(e,n,r):n==="array-contains"?new d$(e,r):n==="in"?new f$(e,r):n==="not-in"?new h$(e,r):n==="array-contains-any"?new p$(e,r):new Vn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new c$(e,r):new u$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ku(n,this.value)):n!==null&&zo(this.value)===zo(n)&&this.matchesComparison(ku(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ta extends s4{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ta(e,n)}matches(e){return o4(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function o4(t){return t.op==="and"}function l4(t){return o$(t)&&o4(t)}function o$(t){for(const e of t.filters)if(e instanceof ta)return!1;return!0}function $1(t){if(t instanceof Vn)return t.field.canonicalString()+t.op.toString()+Nu(t.value);if(l4(t))return t.filters.map((e=>$1(e))).join(",");{const e=t.filters.map((n=>$1(n))).join(",");return`${t.op}(${e})`}}function c4(t,e){return t instanceof Vn?(function(r,i){return i instanceof Vn&&r.op===i.op&&r.field.isEqual(i.field)&&Pa(r.value,i.value)})(t,e):t instanceof ta?(function(r,i){return i instanceof ta&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&c4(o,i.filters[c])),!0):!1})(t,e):void Qe(19439)}function u4(t){return t instanceof Vn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Nu(n.value)}`})(t):t instanceof ta?(function(n){return n.op.toString()+" {"+n.getFilters().map(u4).join(" ,")+"}"})(t):"Filter"}class l$ extends Vn{constructor(e,n,r){super(e,n,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const n=Ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class c$ extends Vn{constructor(e,n){super(e,"in",n),this.keys=d4("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class u$ extends Vn{constructor(e,n){super(e,"not-in",n),this.keys=d4("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function d4(t,e){return(e.arrayValue?.values||[]).map((n=>Ge.fromName(n.referenceValue)))}class d$ extends Vn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return G_(n)&&Zf(n.arrayValue,this.value)}}class f$ extends Vn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zf(this.value.arrayValue,n)}}class h$ extends Vn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zf(this.value.arrayValue,n)}}class p$ extends Vn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!G_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Zf(this.value.arrayValue,r)))}}class g${constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function dR(t,e=null,n=[],r=[],i=null,a=null,o=null){return new g$(t,e,n,r,i,a,o)}function q_(t){const e=at(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>$1(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),h0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Nu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Nu(r))).join(",")),e.Te=n}return e.Te}function H_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!s$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!c4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uR(t.startAt,e.startAt)&&uR(t.endAt,e.endAt)}function Y1(t){return Ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Qu{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function m$(t,e,n,r,i,a,o,c){return new Qu(t,e,n,r,i,a,o,c)}function g0(t){return new Qu(t)}function fR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f4(t){return t.collectionGroup!==null}function Cf(t){const e=at(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new $n(cr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Jf(a,r))})),n.has(cr.keyField().canonicalString())||e.Ie.push(new Jf(cr.keyField(),r))}return e.Ie}function Ca(t){const e=at(t);return e.Ee||(e.Ee=v$(e,Cf(t))),e.Ee}function v$(t,e){if(t.limitType==="F")return dR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Jf(i.field,a)}));const n=t.endAt?new Em(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Em(t.startAt.position,t.startAt.inclusive):null;return dR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function X1(t,e){const n=t.filters.concat([e]);return new Qu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sm(t,e,n){return new Qu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function m0(t,e){return H_(Ca(t),Ca(e))&&t.limitType===e.limitType}function h4(t){return`${q_(Ca(t))}|lt:${t.limitType}`}function Xc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>u4(i))).join(", ")}]`),h0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Nu(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Nu(i))).join(",")),`Target(${r})`})(Ca(t))}; limitType=${t.limitType})`}function v0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ge.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Cf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const f=cR(o,c,u);return o.inclusive?f<=0:f<0})(r.startAt,Cf(r),i)||r.endAt&&!(function(o,c,u){const f=cR(o,c,u);return o.inclusive?f>=0:f>0})(r.endAt,Cf(r),i))})(t,e)}function y$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function p4(t){return(e,n)=>{let r=!1;for(const i of Cf(t)){const a=b$(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function b$(t,e,n){const r=t.field.isKeyField()?Ge.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),f=c.data.field(a);return u!==null&&f!==null?ku(u,f):Qe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Qe(19790,{direction:t.dir})}}class ec{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return QM(this.inner)}size(){return this.innerSize}}const x$=new un(Ge.comparator);function Ts(){return x$}const g4=new un(Ge.comparator);function df(...t){let e=g4;for(const n of t)e=e.insert(n.key,n);return e}function m4(t){let e=g4;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Nl(){return Rf()}function v4(){return Rf()}function Rf(){return new ec((t=>t.toString()),((t,e)=>t.isEqual(e)))}const _$=new un(Ge.comparator),w$=new $n(Ge.comparator);function xt(...t){let e=w$;for(const n of t)e=e.add(n);return e}const E$=new $n(bt);function S$(){return E$}function $_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xm(e)?"-0":e}}function y4(t){return{integerValue:""+t}}function T$(t,e){return ZH(e)?y4(e):$_(t,e)}class y0{constructor(){this._=void 0}}function A$(t,e,n){return t instanceof Tm?(function(i,a){const o={fields:{[e4]:{stringValue:JM},[n4]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&F_(a)&&(a=p0(a)),a&&(o.fields[t4]=a),{mapValue:o}})(n,e):t instanceof eh?x4(t,e):t instanceof th?_4(t,e):(function(i,a){const o=b4(i,a),c=hR(o)+hR(i.Ae);return H1(o)&&H1(i.Ae)?y4(c):$_(i.serializer,c)})(t,e)}function C$(t,e,n){return t instanceof eh?x4(t,e):t instanceof th?_4(t,e):n}function b4(t,e){return t instanceof Am?(function(r){return H1(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Tm extends y0{}class eh extends y0{constructor(e){super(),this.elements=e}}function x4(t,e){const n=w4(e);for(const r of t.elements)n.some((i=>Pa(i,r)))||n.push(r);return{arrayValue:{values:n}}}class th extends y0{constructor(e){super(),this.elements=e}}function _4(t,e){let n=w4(e);for(const r of t.elements)n=n.filter((i=>!Pa(i,r)));return{arrayValue:{values:n}}}class Am extends y0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function hR(t){return En(t.integerValue||t.doubleValue)}function w4(t){return G_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function R$(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof eh&&i instanceof eh||r instanceof th&&i instanceof th?Du(r.elements,i.elements,Pa):r instanceof Am&&i instanceof Am?Pa(r.Ae,i.Ae):r instanceof Tm&&i instanceof Tm})(t.transform,e.transform)}class D${constructor(e,n){this.version=e,this.transformResults=n}}class Ri{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ri}static exists(e){return new Ri(void 0,e)}static updateTime(e){return new Ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class b0{}function E4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Y_(t.key,Ri.none()):new Eh(t.key,t.data,Ri.none());{const n=t.data,r=Lr.empty();let i=new $n(cr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new $o(t.key,r,new ii(i.toArray()),Ri.none())}}function k$(t,e,n){t instanceof Eh?(function(i,a,o){const c=i.value.clone(),u=gR(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof $o?(function(i,a,o){if(!Gg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=gR(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(S4(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Df(t,e,n,r){return t instanceof Eh?(function(a,o,c,u){if(!Gg(a.precondition,o))return c;const f=a.value.clone(),h=mR(a.fieldTransforms,u,o);return f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof $o?(function(a,o,c,u){if(!Gg(a.precondition,o))return c;const f=mR(a.fieldTransforms,u,o),h=o.data;return h.setAll(S4(a)),h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,o,c){return Gg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function N$(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=b4(r.transform,i||null);a!=null&&(n===null&&(n=Lr.empty()),n.set(r.field,a))}return n||null}function pR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Du(r,i,((a,o)=>R$(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eh extends b0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $o extends b0{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function S4(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function gR(t,e,n){const r=new Map;Mt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,C$(o,c,n[i]))}return r}function mR(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,A$(a,o,e))}return r}class Y_ extends b0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I$ extends b0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class M${constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&k$(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Df(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Df(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=v4();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=E4(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(nt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),xt())}isEqual(e){return this.batchId===e.batchId&&Du(this.mutations,e.mutations,((n,r)=>pR(n,r)))&&Du(this.baseMutations,e.baseMutations,((n,r)=>pR(n,r)))}}class X_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return _$})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new X_(e,n,r,i)}}class O${constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class P${constructor(e,n){this.count=e,this.unchangedNames=n}}var On,wt;function j$(t){switch(t){case ve.OK:return Qe(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Qe(15467,{code:t})}}function T4(t){if(t===void 0)return Ss("GRPC error has no .code"),ve.UNKNOWN;switch(t){case On.OK:return ve.OK;case On.CANCELLED:return ve.CANCELLED;case On.UNKNOWN:return ve.UNKNOWN;case On.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case On.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case On.INTERNAL:return ve.INTERNAL;case On.UNAVAILABLE:return ve.UNAVAILABLE;case On.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case On.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case On.NOT_FOUND:return ve.NOT_FOUND;case On.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case On.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case On.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case On.ABORTED:return ve.ABORTED;case On.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case On.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case On.DATA_LOSS:return ve.DATA_LOSS;default:return Qe(39323,{code:t})}}(wt=On||(On={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";function V$(){return new TextEncoder}const z$=new Co([4294967295,4294967295],0);function vR(t){const e=V$().encode(t),n=new BM;return n.update(e),new Uint8Array(n.digest())}function yR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Co([n,r],0),new Co([i,a],0)]}class W_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ff(`Invalid padding: ${n}`);if(r<0)throw new ff(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ff(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ff(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Co.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Co.fromNumber(r)));return i.compare(z$)===1&&(i=new Co([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vR(e),[r,i]=yR(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new W_(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=vR(e),[r,i]=yR(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ff extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class x0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new x0(nt.min(),i,new un(bt),Ts(),xt())}}class Sh{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sh(r,n,xt(),xt(),xt())}}class qg{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class A4{constructor(e,n){this.targetId=e,this.Ce=n}}class C4{constructor(e,n,r=dr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class bR{constructor(){this.ve=0,this.Fe=xR(),this.Me=dr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),n=xt(),r=xt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Qe(38017,{changeType:a})}})),new Sh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=xR()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class L${constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=Ag(),this.He=Ag(),this.Ye=new un(bt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Qe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Y1(a))if(r===0){const o=new Ge(a.path);this.et(n,o,vr.newNoDocument(o,nt.min()))}else Mt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Vo(r).toUint8Array()}catch(u){if(u instanceof ZM)return Ru("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new W_(o,i,a)}catch(u){return Ru(u instanceof ff?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Y1(c.target)){const u=new Ge(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,vr.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=xt();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new x0(e,n,this.Ye,this.je,r);return this.je=Ts(),this.Je=Ag(),this.He=Ag(),this.Ye=new un(bt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new bR,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new $n(bt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new $n(bt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bR),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ag(){return new un(Ge.comparator)}function xR(){return new un(Ge.comparator)}const B$={asc:"ASCENDING",desc:"DESCENDING"},U$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F$={and:"AND",or:"OR"};class G${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function W1(t,e){return t.useProto3Json||h0(e)?e:{value:e}}function Cm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function q$(t,e){return Cm(t,e.toTimestamp())}function Ra(t){return Mt(!!t,49232),nt.fromTimestamp((function(n){const r=jo(n);return new gt(r.seconds,r.nanos)})(t))}function K_(t,e){return K1(t,e).canonicalString()}function K1(t,e){const n=(function(i){return new Kt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function D4(t){const e=Kt.fromString(t);return Mt(O4(e),10190,{key:e.toString()}),e}function Q1(t,e){return K_(t.databaseId,e.path)}function _b(t,e){const n=D4(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ge(N4(n))}function k4(t,e){return K_(t.databaseId,e)}function H$(t){const e=D4(t);return e.length===4?Kt.emptyPath():N4(e)}function Z1(t){return new Kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function N4(t){return Mt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _R(t,e,n){return{name:Q1(t,e),fields:n.value.mapValue.fields}}function $$(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Qe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,h){return f.useProto3Json?(Mt(h===void 0||typeof h=="string",58123),dr.fromBase64String(h||"")):(Mt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dr.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(f){const h=f.code===void 0?ve.UNKNOWN:T4(f.code);return new Re(h,f.message||"")})(o);n=new C4(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_b(t,r.document.name),a=Ra(r.document.updateTime),o=r.document.createTime?Ra(r.document.createTime):nt.min(),c=new Lr({mapValue:{fields:r.document.fields}}),u=vr.newFoundDocument(i,a,o,c),f=r.targetIds||[],h=r.removedTargetIds||[];n=new qg(f,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_b(t,r.document),a=r.readTime?Ra(r.readTime):nt.min(),o=vr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new qg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_b(t,r.document),a=r.removedTargetIds||[];n=new qg([],a,i,null)}else{if(!("filter"in e))return Qe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new P$(i,a),c=r.targetId;n=new A4(c,o)}}return n}function Y$(t,e){let n;if(e instanceof Eh)n={update:_R(t,e.key,e.value)};else if(e instanceof Y_)n={delete:Q1(t,e.key)};else if(e instanceof $o)n={update:_R(t,e.key,e.data),updateMask:nY(e.fieldMask)};else{if(!(e instanceof I$))return Qe(16599,{Vt:e.type});n={verify:Q1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Tm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof th)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Am)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Qe(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:q$(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Qe(27497)})(t,e.precondition)),n}function X$(t,e){return t&&t.length>0?(Mt(e!==void 0,14353),t.map((n=>(function(i,a){let o=i.updateTime?Ra(i.updateTime):Ra(a);return o.isEqual(nt.min())&&(o=Ra(a)),new D$(o,i.transformResults||[])})(n,e)))):[]}function W$(t,e){return{documents:[k4(t,e.path)]}}function K$(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=k4(t,i);const a=(function(f){if(f.length!==0)return M4(ta.create(f,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(f){if(f.length!==0)return f.map((h=>(function(m){return{field:Wc(m.field),direction:J$(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=W1(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:i}}function Q$(t){let e=H$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mt(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=(function(g){const m=I4(g);return m instanceof ta&&l4(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((m=>(function(_){return new Jf(Kc(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,h0(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(g){const m=!!g.before,x=g.values||[];return new Em(x,m)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const m=!g.before,x=g.values||[];return new Em(x,m)})(n.endAt)),m$(e,i,o,a,c,"F",u,f)}function Z$(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function I4(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kc(n.unaryFilter.field);return Vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kc(n.unaryFilter.field);return Vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Kc(n.unaryFilter.field);return Vn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kc(n.unaryFilter.field);return Vn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Vn.create(Kc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ta.create(n.compositeFilter.filters.map((r=>I4(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}})(n.compositeFilter.op))})(t):Qe(30097,{filter:t})}function J$(t){return B$[t]}function eY(t){return U$[t]}function tY(t){return F$[t]}function Wc(t){return{fieldPath:t.canonicalString()}}function Kc(t){return cr.fromServerFormat(t.fieldPath)}function M4(t){return t instanceof Vn?(function(n){if(n.op==="=="){if(lR(n.value))return{unaryFilter:{field:Wc(n.field),op:"IS_NAN"}};if(oR(n.value))return{unaryFilter:{field:Wc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lR(n.value))return{unaryFilter:{field:Wc(n.field),op:"IS_NOT_NAN"}};if(oR(n.value))return{unaryFilter:{field:Wc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wc(n.field),op:eY(n.op),value:n.value}}})(t):t instanceof ta?(function(n){const r=n.getFilters().map((i=>M4(i)));return r.length===1?r[0]:{compositeFilter:{op:tY(n.op),filters:r}}})(t):Qe(54877,{filter:t})}function nY(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function O4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class wo{constructor(e,n,r,i,a=nt.min(),o=nt.min(),c=dr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rY{constructor(e){this.yt=e}}function iY(t){const e=Q$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sm(e,e.limit,"L"):e}class aY{constructor(){this.Cn=new sY}addToCollectionParentIndex(e,n){return this.Cn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(Po.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class sY{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $n(Kt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(Kt.comparator)).toArray()}}const wR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P4=41943040;class zr{static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(P4,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);class Iu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Iu(0)}static cr(){return new Iu(-1)}}const ER="LruGarbageCollector",oY=1048576;function SR([t,e],[n,r]){const i=bt(t,n);return i===0?bt(e,r):i}class lY{constructor(e){this.Ir=e,this.buffer=new $n(SR),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();SR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cY{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(ER,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ku(n)?ke(ER,"Ignoring IndexedDB error during garbage collection: ",n):await Wu(n)}await this.Vr(3e5)}))}}class uY{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(f0.ce);const r=new lY(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(wR)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wR):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,c,u,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),Yc()<=yt.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(f-u)+`ms
Total Duration: ${f-h}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function dY(t,e){return new uY(t,e)}class fY{constructor(){this.changes=new ec((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hY{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class pY{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Df(r.mutation,i,ii.empty(),gt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,xt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=xt()){const i=Nl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=df();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Nl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,xt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=Ts();const o=Rf(),c=(function(){return Rf()})();return n.forEach(((u,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof $o)?a=a.insert(f.key,f):h!==void 0?(o.set(f.key,h.mutation.getFieldMask()),Df(h.mutation,f,h.mutation.getFieldMask(),gt.now())):o.set(f.key,ii.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((f,h)=>o.set(f,h))),n.forEach(((f,h)=>c.set(f,new hY(h,o.get(f)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Rf();let i=new un(((o,c)=>o-c)),a=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let h=r.get(u)||ii.empty();h=c.applyToLocalView(f,h),r.set(u,h);const g=(i.get(c.batchId)||xt()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),f=u.key,h=u.value,g=v4();h.forEach((m=>{if(!a.has(m)){const x=E4(n.get(m),r.get(m));x!==null&&g.set(m,x),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,f,g))}return xe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return Ge.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):f4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):xe.resolve(Nl());let c=Wf,u=a;return o.next((f=>xe.forEach(f,((h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(h)?xe.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,u,f,xt()))).next((h=>({batchId:c,changes:m4(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ge(n)).next((r=>{let i=df();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=df();return this.indexManager.getCollectionParents(e,a).next((c=>xe.forEach(c,(u=>{const f=(function(g,m){return new Qu(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((h=>{h.forEach(((g,m)=>{o=o.insert(g,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,f)=>{const h=f.getKey();o.get(h)===null&&(o=o.insert(h,vr.newInvalidDocument(h)))}));let c=df();return o.forEach(((u,f)=>{const h=a.get(u);h!==void 0&&Df(h.mutation,f,ii.empty(),gt.now()),v0(n,f)&&(c=c.insert(u,f))})),c}))}}class gY{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return xe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ra(i.createTime)}})(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:iY(i.bundledQuery),readTime:Ra(i.readTime)}})(n)),xe.resolve()}}class mY{constructor(){this.overlays=new un(Ge.comparator),this.qr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Nl();return xe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),xe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const i=Nl(),a=n.length+1,o=new Ge(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return xe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new un(((f,h)=>f-h));const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=a.get(f.largestBatchId);h===null&&(h=Nl(),a=a.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const c=Nl(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,h)=>c.set(f,h))),!(c.size()>=i)););return xe.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new O$(n,r));let a=this.qr.get(n);a===void 0&&(a=xt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class vY{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}class Q_{constructor(){this.Qr=new $n(Kn.$r),this.Ur=new $n(Kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Kn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Kn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Ge(new Kt([])),r=new Kn(n,e),i=new Kn(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ge(new Kt([])),r=new Kn(n,e),i=new Kn(n,e+1);let a=xt();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new Kn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ge.comparator(e.key,n.key)||bt(e.Yr,n.Yr)}static Kr(e,n){return bt(e.Yr,n.Yr)||Ge.comparator(e.key,n.key)}}class yY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new $n(Kn.$r)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new M$(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Kn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return xe.resolve(o)}lookupMutationBatch(e,n){return xe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return xe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?U_:this.tr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kn(n,0),i=new Kn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),xe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $n(bt);return n.forEach((i=>{const a=new Kn(i,0),o=new Kn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),xe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Ge.isDocumentKey(a)||(a=a.child(""));const o=new Kn(new Ge(a),0);let c=new $n(bt);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(u.Yr)),!0)}),o),xe.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Mt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return xe.forEach(n.mutations,(i=>{const a=new Kn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Kn(n,0),i=this.Zr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class bY{constructor(e){this.ri=e,this.docs=(function(){return new un(Ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():vr.newInvalidDocument(n))}getEntries(e,n){let r=Ts();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():vr.newInvalidDocument(i))})),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Ts();const o=n.path,c=new Ge(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:f,value:{document:h}}=u.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||XH(YH(h),r)<=0||(i.has(h.key)||v0(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return xe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Qe(9500)}ii(e,n){return xe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new xY(this)}getSize(e){return xe.resolve(this.size)}}class xY extends fY{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),xe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class _Y{constructor(e){this.persistence=e,this.si=new ec((n=>q_(n)),H_),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new Q_,this.targetCount=0,this.ai=Iu.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),xe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Iu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.Pr(n),xe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),xe.waitFor(a).next((()=>i))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),xe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this._i.containsKey(n))}}class j4{constructor(e,n){this.ui={},this.overlays={},this.ci=new f0(0),this.li=!1,this.li=!0,this.hi=new vY,this.referenceDelegate=e(this),this.Pi=new _Y(this),this.indexManager=new aY,this.remoteDocumentCache=(function(i){return new bY(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new rY(n),this.Ii=new gY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mY,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new yY(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const i=new wY(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return xe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class wY extends KH{constructor(e){super(),this.currentSequenceNumber=e}}class Z_{constructor(e){this.persistence=e,this.Ri=new Q_,this.Vi=null}static mi(e){return new Z_(e)}get fi(){if(this.Vi)return this.Vi;throw Qe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.fi,(r=>{const i=Ge.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,nt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rm{constructor(e,n){this.persistence=e,this.pi=new ec((r=>JH(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=dY(this,n)}static mi(e,n){return new Rm(e,n)}Ei(){}di(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return xe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?xe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,a.removeEntry(o,nt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),xe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ug(e.data.value)),n}br(e,n,r){return xe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return xe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class J_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=xt(),i=xt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new J_(e,n.fromCache,r,i)}}class EY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class SY{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vq()?8:QH(_r())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new EY;return this.Ss(e,n,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Yc()<=yt.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",Xc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xe.resolve()):(Yc()<=yt.DEBUG&&ke("QueryEngine","Query:",Xc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Yc()<=yt.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",Xc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ca(n))):xe.resolve())}ys(e,n){if(fR(n))return xe.resolve(null);let r=Ca(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Sm(n,null,"F"),r=Ca(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=xt(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const f=this.Ds(n,c);return this.Cs(n,f,o,u.readTime)?this.ys(e,Sm(n,null,"F")):this.vs(e,f,n,u)}))))})))))}ws(e,n,r,i){return fR(n)||i.isEqual(nt.min())?xe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?xe.resolve(null):(Yc()<=yt.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xc(n)),this.vs(e,o,n,$H(i,Wf)).next((c=>c)))}))}Ds(e,n){let r=new $n(p4(e));return n.forEach(((i,a)=>{v0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Yc()<=yt.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Xc(n)),this.ps.getDocumentsMatchingQuery(e,n,Po.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const ew="LocalStore",TY=3e8;class AY{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new un(bt),this.xs=new ec((a=>q_(a)),H_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pY(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function CY(t,e,n,r){return new AY(t,e,n,r)}async function V4(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=xt();for(const f of i){o.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}for(const f of a){c.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((f=>({Ls:f,removedBatchIds:o,addedBatchIds:c})))}))}))}function RY(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,f,h){const g=f.batch,m=g.keys();let x=xe.resolve();return m.forEach((_=>{x=x.next((()=>h.getEntry(u,_))).next((E=>{const S=f.docVersions.get(_);Mt(S!==null,48541),E.version.compareTo(S)<0&&(g.applyToRemoteDocument(E,f),E.isValidDocument()&&(E.setReadTime(f.commitVersion),h.addEntry(E)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=xt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(u=u.add(c.batch.mutations[f].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function z4(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function DY(t,e){const n=at(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach(((h,g)=>{const m=i.get(g);if(!m)return;c.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,h.addedDocuments,g))));let x=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(dr.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),i=i.insert(g,x),(function(E,S,T){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=TY?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(m,x,h)&&c.push(n.Pi.updateTargetData(a,x))}));let u=Ts(),f=xt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push(kY(a,o,e.documentUpdates).next((h=>{u=h.ks,f=h.qs}))),!r.isEqual(nt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return xe.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,f))).next((()=>u))})).then((a=>(n.Ms=i,a)))}function kY(t,e,n){let r=xt(),i=xt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=Ts();return n.forEach(((c,u)=>{const f=a.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(nt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ke(ew,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function NY(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=U_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function IY(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,xe.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new wo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function J1(t,e,n){const r=at(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ku(o))throw o;ke(ew,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function TR(t,e,n){const r=at(t);let i=nt.min(),a=xt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,f,h){const g=at(u),m=g.xs.get(h);return m!==void 0?xe.resolve(g.Ms.get(m)):g.Pi.getTargetData(f,h)})(r,o,Ca(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:nt.min(),n?a:xt()))).next((c=>(MY(r,y$(e),c),{documents:c,Qs:a})))))}function MY(t,e,n){let r=t.Os.get(e)||nt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class AR{constructor(){this.activeTargetIds=S$()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OY{constructor(){this.Mo=new AR,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new AR,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PY{Oo(e){}shutdown(){}}const CR="ConnectivityMonitor";class RR{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(CR,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(CR,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Cg=null;function ex(){return Cg===null?Cg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cg++,"0x"+Cg.toString(16)}const wb="RestConnection",jY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VY{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_m?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=ex(),c=this.zo(e,n.toUriEncodedString());ke(wb,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:f}=new URL(c),h=$u(f);return this.Jo(e,c,u,r,h).then((g=>(ke(wb,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw Ru(wb,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=jY[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class zY{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const gr="WebChannelConnection";class LY extends VY{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=ex();return new Promise(((c,u)=>{const f=new UM;f.setWithCredentials(!0),f.listenOnce(FM.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Bg.NO_ERROR:const g=f.getResponseJson();ke(gr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Bg.TIMEOUT:ke(gr,`RPC '${e}' ${o} timed out`),u(new Re(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Bg.HTTP_ERROR:const m=f.getStatus();if(ke(gr,`RPC '${e}' ${o} failed with status:`,m,"response text:",f.getResponseText()),m>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const _=x?.error;if(_&&_.status&&_.message){const E=(function(T){const D=T.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(D)>=0?D:ve.UNKNOWN})(_.status);u(new Re(E,_.message))}else u(new Re(ve.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Re(ve.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{l_:e,streamId:o,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ke(gr,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);ke(gr,`RPC '${e}' ${o} sending request:`,i),f.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=ex(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=HM(),c=qM(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");ke(gr,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);this.I_(g);let m=!1,x=!1;const _=new zY({Yo:S=>{x?ke(gr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(ke(gr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),ke(gr,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},Zo:()=>g.close()}),E=(S,T,D)=>{S.listen(T,(k=>{try{D(k)}catch(j){setTimeout((()=>{throw j}),0)}}))};return E(g,uf.EventType.OPEN,(()=>{x||(ke(gr,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),E(g,uf.EventType.CLOSE,(()=>{x||(x=!0,ke(gr,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(g))})),E(g,uf.EventType.ERROR,(S=>{x||(x=!0,Ru(gr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),_.a_(new Re(ve.UNAVAILABLE,"The operation could not be completed")))})),E(g,uf.EventType.MESSAGE,(S=>{if(!x){const T=S.data[0];Mt(!!T,16349);const D=T,k=D?.error||D[0]?.error;if(k){ke(gr,`RPC '${e}' stream ${i} received error:`,k);const j=k.status;let B=(function(A){const N=On[A];if(N!==void 0)return T4(N)})(j),z=k.message;B===void 0&&(B=ve.INTERNAL,z="Unknown error status: "+j+" with message "+k.message),x=!0,_.a_(new Re(B,z)),g.close()}else ke(gr,`RPC '${e}' stream ${i} received:`,T),_.u_(T)}})),E(c,GM.STAT_EVENT,(S=>{S.stat===F1.PROXY?ke(gr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===F1.NOPROXY&&ke(gr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Eb(){return typeof document<"u"?document:null}function _0(t){return new G$(t,!0)}class L4{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const DR="PersistentStream";class B4{constructor(e,n,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new L4(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Re(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(DR,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ke(DR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BY extends B4{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$$(this.serializer,e),r=(function(a){if(!("targetChange"in a))return nt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?nt.min():o.readTime?Ra(o.readTime):nt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Z1(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=Y1(u)?{documents:W$(a,u)}:{query:K$(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=R4(a,o.resumeToken);const f=W1(a,o.expectedCount);f!==null&&(c.expectedCount=f)}else if(o.snapshotVersion.compareTo(nt.min())>0){c.readTime=Cm(a,o.snapshotVersion.toTimestamp());const f=W1(a,o.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const r=Z$(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Z1(this.serializer),n.removeTarget=e,this.q_(n)}}class UY extends B4{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=X$(e.writeResults,e.commitTime),r=Ra(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Z1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Y$(this.serializer,r)))};this.q_(n)}}class FY{}class GY extends FY{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Re(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,K1(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(ve.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,K1(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(ve.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Xl="RemoteStore";class HY{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{tc(this)&&(ke(Xl,"Restarting streams for network reachability change."),await(async function(u){const f=at(u);f.Ea.add(4),await Th(f),f.Ra.set("Unknown"),f.Ea.delete(4),await w0(f)})(this))}))})),this.Ra=new qY(r,i)}}async function w0(t){if(tc(t))for(const e of t.da)await e(!0)}async function Th(t){for(const e of t.da)await e(!1)}function U4(t,e){const n=at(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iw(n)?rw(n):Zu(n).O_()&&nw(n,e))}function tw(t,e){const n=at(t),r=Zu(n);n.Ia.delete(e),r.O_()&&F4(n,e),n.Ia.size===0&&(r.O_()?r.L_():tc(n)&&n.Ra.set("Unknown"))}function nw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zu(t).Y_(e)}function F4(t,e){t.Va.Ue(e),Zu(t).Z_(e)}function rw(t){t.Va=new L$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zu(t).start(),t.Ra.ua()}function iw(t){return tc(t)&&!Zu(t).x_()&&t.Ia.size>0}function tc(t){return at(t).Ea.size===0}function G4(t){t.Va=void 0}async function $Y(t){t.Ra.set("Online")}async function YY(t){t.Ia.forEach(((e,n)=>{nw(t,e)}))}async function XY(t,e){G4(t),iw(t)?(t.Ra.ha(e),rw(t)):t.Ra.set("Unknown")}async function WY(t,e,n){if(t.Ra.set("Online"),e instanceof C4&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){ke(Xl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dm(t,r)}else if(e instanceof qg?t.Va.Ze(e):e instanceof A4?t.Va.st(e):t.Va.tt(e),!n.isEqual(nt.min()))try{const r=await z4(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(f);h&&a.Ia.set(f,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,f)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(dr.EMPTY_BYTE_STRING,h.snapshotVersion)),F4(a,u);const g=new wo(h.target,u,f,h.sequenceNumber);nw(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){ke(Xl,"Failed to raise snapshot:",r),await Dm(t,r)}}async function Dm(t,e,n){if(!Ku(e))throw e;t.Ea.add(1),await Th(t),t.Ra.set("Offline"),n||(n=()=>z4(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ke(Xl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await w0(t)}))}function q4(t,e){return e().catch((n=>Dm(t,n,e)))}async function E0(t){const e=at(t),n=Lo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:U_;for(;KY(e);)try{const i=await NY(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,QY(e,i)}catch(i){await Dm(e,i)}H4(e)&&$4(e)}function KY(t){return tc(t)&&t.Ta.length<10}function QY(t,e){t.Ta.push(e);const n=Lo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function H4(t){return tc(t)&&!Lo(t).x_()&&t.Ta.length>0}function $4(t){Lo(t).start()}async function ZY(t){Lo(t).ra()}async function JY(t){const e=Lo(t);for(const n of t.Ta)e.ea(n.mutations)}async function eX(t,e,n){const r=t.Ta.shift(),i=X_.from(r,e,n);await q4(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await E0(t)}async function tX(t,e){e&&Lo(t).X_&&await(async function(r,i){if((function(o){return j$(o)&&o!==ve.ABORTED})(i.code)){const a=r.Ta.shift();Lo(r).B_(),await q4(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await E0(r)}})(t,e),H4(t)&&$4(t)}async function kR(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),ke(Xl,"RemoteStore received new credentials");const r=tc(n);n.Ea.add(3),await Th(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await w0(n)}async function nX(t,e){const n=at(t);e?(n.Ea.delete(2),await w0(n)):e||(n.Ea.add(2),await Th(n),n.Ra.set("Unknown"))}function Zu(t){return t.ma||(t.ma=(function(n,r,i){const a=at(n);return a.sa(),new BY(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:$Y.bind(null,t),t_:YY.bind(null,t),r_:XY.bind(null,t),H_:WY.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),iw(t)?rw(t):t.Ra.set("Unknown")):(await t.ma.stop(),G4(t))}))),t.ma}function Lo(t){return t.fa||(t.fa=(function(n,r,i){const a=at(n);return a.sa(),new UY(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZY.bind(null,t),r_:tX.bind(null,t),ta:JY.bind(null,t),na:eX.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await E0(t)):(await t.fa.stop(),t.Ta.length>0&&(ke(Xl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class aw{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new aw(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sw(t,e){if(Ss("AsyncQueue",`${e}: ${t}`),Ku(t))return new Re(ve.UNAVAILABLE,`${e}: ${t}`);throw t}class hu{static emptySet(e){return new hu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ge.comparator(n.key,r.key):(n,r)=>Ge.comparator(n.key,r.key),this.keyedMap=df(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class NR{constructor(){this.ga=new un(Ge.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Qe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Mu{constructor(e,n,r,i,a,o,c,u,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Mu(e,n,hu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&m0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class rX{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iX{constructor(){this.queries=IR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=at(n),a=i.queries;i.queries=IR(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Re(ve.ABORTED,"Firestore shutting down"))}}function IR(){return new ec((t=>h4(t)),m0)}async function ow(t,e){const n=at(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new rX,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=sw(o,`Initialization of query '${Xc(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&cw(n)}async function lw(t,e){const n=at(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aX(t,e){const n=at(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&cw(n)}function sX(t,e,n){const r=at(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function cw(t){t.Ca.forEach((e=>{e.next()}))}var tx,MR;(MR=tx||(tx={})).Ma="default",MR.Cache="cache";class uw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tx.Cache}}class Y4{constructor(e){this.key=e}}class X4{constructor(e){this.key=e}}class oX{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=p4(e),this.tu=new hu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new NR,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,g)=>{const m=i.get(h),x=v0(this.query,g)?g:null,_=!!m&&this.mutatedKeys.has(m.key),E=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let S=!1;m&&x?m.data.isEqual(x.data)?_!==E&&(r.track({type:3,doc:x}),S=!0):this.su(m,x)||(r.track({type:2,doc:x}),S=!0,(u&&this.eu(x,u)>0||f&&this.eu(x,f)<0)&&(c=!0)):!m&&x?(r.track({type:0,doc:x}),S=!0):m&&!x&&(r.track({type:1,doc:m}),S=!0,(u||f)&&(c=!0)),S&&(x?(o=o.add(x),a=E?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,g)=>(function(x,_){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{Rt:S})}};return E(x)-E(_)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,f=u!==this.Za;return this.Za=u,o.length!==0||f?{snapshot:new Mu(this.query,e.tu,a,o,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NR,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new X4(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Y4(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dw="SyncEngine";class lX{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cX{constructor(e){this.key=e,this.hu=!1}}class uX{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ec((c=>h4(c)),m0),this.Iu=new Map,this.Eu=new Set,this.du=new un(Ge.comparator),this.Au=new Map,this.Ru=new Q_,this.Vu={},this.mu=new Map,this.fu=Iu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dX(t,e,n=!0){const r=eO(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await W4(r,e,n,!0),i}async function fX(t,e){const n=eO(t);await W4(n,e,!0,!1)}async function W4(t,e,n,r){const i=await IY(t.localStore,Ca(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await hX(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&U4(t.remoteStore,i),c}async function hX(t,e,n,r,i){t.pu=(g,m,x)=>(async function(E,S,T,D){let k=S.view.ru(T);k.Cs&&(k=await TR(E.localStore,S.query,!1).then((({documents:C})=>S.view.ru(C,k))));const j=D&&D.targetChanges.get(S.targetId),B=D&&D.targetMismatches.get(S.targetId)!=null,z=S.view.applyChanges(k,E.isPrimaryClient,j,B);return PR(E,S.targetId,z.au),z.snapshot})(t,g,m,x);const a=await TR(t.localStore,e,!0),o=new oX(e,a.Qs),c=o.ru(a.documents),u=Sh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=o.applyChanges(c,t.isPrimaryClient,u);PR(t,n,f.au);const h=new lX(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function pX(t,e,n){const r=at(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!m0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await J1(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tw(r.remoteStore,i.targetId),nx(r,i.targetId)})).catch(Wu)):(nx(r,i.targetId),await J1(r.localStore,i.targetId,!0))}async function gX(t,e){const n=at(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tw(n.remoteStore,r.targetId))}async function mX(t,e,n){const r=EX(t);try{const i=await(function(o,c){const u=at(o),f=gt.now(),h=c.reduce(((x,_)=>x.add(_.key)),xt());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let _=Ts(),E=xt();return u.Ns.getEntries(x,h).next((S=>{_=S,_.forEach(((T,D)=>{D.isValidDocument()||(E=E.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(x,_))).next((S=>{g=S;const T=[];for(const D of c){const k=N$(D,g.get(D.key).overlayedDocument);k!=null&&T.push(new $o(D.key,k,a4(k.value.mapValue),Ri.exists(!0)))}return u.mutationQueue.addMutationBatch(x,f,T,c)})).next((S=>{m=S;const T=S.applyToLocalDocumentSet(g,E);return u.documentOverlayCache.saveOverlays(x,S.batchId,T)}))})).then((()=>({batchId:m.batchId,changes:m4(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let f=o.Vu[o.currentUser.toKey()];f||(f=new un(bt)),f=f.insert(c,u),o.Vu[o.currentUser.toKey()]=f})(r,i.batchId,n),await Ah(r,i.changes),await E0(r.remoteStore)}catch(i){const a=sw(i,"Failed to persist write");n.reject(a)}}async function K4(t,e){const n=at(t);try{const r=await DY(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Au.get(a);o&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Mt(o.hu,14607):i.removedDocuments.size>0&&(Mt(o.hu,42227),o.hu=!1))})),await Ah(n,r,e)}catch(r){await Wu(r)}}function OR(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=at(o);u.onlineState=c;let f=!1;u.queries.forEach(((h,g)=>{for(const m of g.Sa)m.va(c)&&(f=!0)})),f&&cw(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vX(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new un(Ge.comparator);o=o.insert(a,vr.newNoDocument(a,nt.min()));const c=xt().add(a),u=new x0(nt.min(),new Map,new un(bt),o,c);await K4(r,u),r.du=r.du.remove(a),r.Au.delete(e),fw(r)}else await J1(r.localStore,e,!1).then((()=>nx(r,e,n))).catch(Wu)}async function yX(t,e){const n=at(t),r=e.batch.batchId;try{const i=await RY(n.localStore,e);Z4(n,r,null),Q4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ah(n,i)}catch(i){await Wu(i)}}async function bX(t,e,n){const r=at(t);try{const i=await(function(o,c){const u=at(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let h;return u.mutationQueue.lookupMutationBatch(f,c).next((g=>(Mt(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(f,g)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h))).next((()=>u.localDocuments.getDocuments(f,h)))}))})(r.localStore,e);Z4(r,e,n),Q4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ah(r,i)}catch(i){await Wu(i)}}function Q4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Z4(t,e,n){const r=at(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function nx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||J4(t,r)}))}function J4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(tw(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),fw(t))}function PR(t,e,n){for(const r of n)r instanceof Y4?(t.Ru.addReference(r.key,e),xX(t,r)):r instanceof X4?(ke(dw,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||J4(t,r.key)):Qe(19791,{wu:r})}function xX(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ke(dw,"New document in limbo: "+n),t.Eu.add(r),fw(t))}function fw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ge(Kt.fromString(e)),r=t.fu.next();t.Au.set(r,new cX(n)),t.du=t.du.insert(n,r),U4(t.remoteStore,new wo(Ca(g0(n.path)),r,"TargetPurposeLimboResolution",f0.ce))}}async function Ah(t,e,n){const r=at(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,n).then((f=>{if((f||n)&&r.isPrimaryClient){const h=f?!f.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(f){i.push(f);const h=J_.As(u.targetId,f);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,f){const h=at(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>xe.forEach(f,(m=>xe.forEach(m.Es,(x=>h.persistence.referenceDelegate.addReference(g,m.targetId,x))).next((()=>xe.forEach(m.ds,(x=>h.persistence.referenceDelegate.removeReference(g,m.targetId,x)))))))))}catch(g){if(!Ku(g))throw g;ke(ew,"Failed to update sequence numbers: "+g)}for(const g of f){const m=g.targetId;if(!g.fromCache){const x=h.Ms.get(m),_=x.snapshotVersion,E=x.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,E)}}})(r.localStore,a))}async function _X(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){ke(dw,"User change. New user:",e.toKey());const r=await V4(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Re(ve.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ah(n,r.Ls)}}function wX(t,e){const n=at(t),r=n.Au.get(e);if(r&&r.hu)return xt().add(r.key);{let i=xt();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function eO(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=K4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vX.bind(null,e),e.Pu.H_=aX.bind(null,e.eventManager),e.Pu.yu=sX.bind(null,e.eventManager),e}function EX(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bX.bind(null,e),e}class km{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return CY(this.persistence,new SY,e.initialUser,this.serializer)}Cu(e){return new j4(Z_.mi,this.serializer)}Du(e){return new OY}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}km.provider={build:()=>new km};class SX extends km{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Mt(this.persistence.referenceDelegate instanceof Rm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cY(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new j4((r=>Rm.mi(r,n)),this.serializer)}}class rx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_X.bind(null,this.syncEngine),await nX(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iX})()}createDatastore(e){const n=_0(e.databaseInfo.databaseId),r=(function(a){return new LY(a)})(e.databaseInfo);return(function(a,o,c,u){return new GY(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new HY(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>OR(this.syncEngine,n,0)),(function(){return RR.v()?new RR:new PY})())}createSyncEngine(e,n){return(function(i,a,o,c,u,f,h){const g=new uX(i,a,o,c,u,f);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=at(n);ke(Xl,"RemoteStore shutting down."),r.Ea.add(5),await Th(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}rx.provider={build:()=>new rx};class hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Bo="FirestoreClient";class TX{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mr.UNAUTHENTICATED,this.clientId=B_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{ke(Bo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ke(Bo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sw(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Sb(t,e){t.asyncQueue.verifyOperationInProgress(),ke(Bo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await V4(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function jR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AX(t);ke(Bo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>kR(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>kR(e.remoteStore,i))),t._onlineComponents=e}async function AX(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke(Bo,"Using user provided OfflineComponentProvider");try{await Sb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ru("Error using user provided cache. Falling back to memory cache: "+n),await Sb(t,new km)}}else ke(Bo,"Using default OfflineComponentProvider"),await Sb(t,new SX(void 0));return t._offlineComponents}async function tO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke(Bo,"Using user provided OnlineComponentProvider"),await jR(t,t._uninitializedComponentsProvider._online)):(ke(Bo,"Using default OnlineComponentProvider"),await jR(t,new rx))),t._onlineComponents}function CX(t){return tO(t).then((e=>e.syncEngine))}async function Nm(t){const e=await tO(t),n=e.eventManager;return n.onListen=dX.bind(null,e.syncEngine),n.onUnlisten=pX.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fX.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gX.bind(null,e.syncEngine),n}function RX(t,e,n={}){const r=new ms;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,f){const h=new hw({next:m=>{h.Nu(),o.enqueueAndForget((()=>lw(a,g)));const x=m.docs.has(c);!x&&m.fromCache?f.reject(new Re(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&m.fromCache&&u&&u.source==="server"?f.reject(new Re(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(m)},error:m=>f.reject(m)}),g=new uw(g0(c.path),h,{includeMetadataChanges:!0,qa:!0});return ow(a,g)})(await Nm(t),t.asyncQueue,e,n,r))),r.promise}function DX(t,e,n={}){const r=new ms;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,f){const h=new hw({next:m=>{h.Nu(),o.enqueueAndForget((()=>lw(a,g))),m.fromCache&&u.source==="server"?f.reject(new Re(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(m)},error:m=>f.reject(m)}),g=new uw(c,h,{includeMetadataChanges:!0,qa:!0});return ow(a,g)})(await Nm(t),t.asyncQueue,e,n,r))),r.promise}function nO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const VR=new Map;const rO="firestore.googleapis.com",zR=!0;class LR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rO,this.ssl=zR}else this.host=e.host,this.ssl=e.ssl??zR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oY)throw new Re(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nO(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class S0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new PH;switch(r.type){case"firstParty":return new LH(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=VR.get(n);r&&(ke("ComponentProvider","Removing Datastore"),VR.delete(n),r.terminate())})(this),Promise.resolve()}}function kX(t,e,n,r={}){t=Fr(t,S0);const i=$u(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(IM(`https://${c}`),MM("Firestore",!0)),a.host!==rO&&a.host!==c&&Ru("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Hl(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,h;if(typeof r.mockUserToken=="string")f=r.mockUserToken,h=mr.MOCK_USER;else{f=lq(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Re(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mr(g)}t._authCredentials=new jH(new YM(f,h))}}class Ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(wh(n,mn._jsonSchema))return new mn(e,r||null,new Ge(Kt.fromString(n.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:zn("string",mn._jsonSchemaVersion),referencePath:zn("string")};class Ro extends Ds{constructor(e,n,r){super(e,n,g0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new Ge(e))}withConverter(e){return new Ro(this.firestore,e,this._path)}}function lr(t,e,...n){if(t=cn(t),XM("collection","path",e),t instanceof S0){const r=Kt.fromString(e,...n);return Z2(r),new Ro(t,null,r)}{if(!(t instanceof mn||t instanceof Ro))throw new Re(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return Z2(r),new Ro(t.firestore,null,r)}}function Ht(t,e,...n){if(t=cn(t),arguments.length===1&&(e=B_.newId()),XM("doc","path",e),t instanceof S0){const r=Kt.fromString(e,...n);return Q2(r),new mn(t,null,new Ge(r))}{if(!(t instanceof mn||t instanceof Ro))throw new Re(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return Q2(r),new mn(t.firestore,t instanceof Ro?t.converter:null,new Ge(r))}}const BR="AsyncQueue";class UR{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new L4(this,"async_queue_retry"),this._c=()=>{const r=Eb();r&&ke(BR,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Eb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Eb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ms;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ku(e))throw e;ke(BR,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",FR(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=aw.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Qe(47125,{Pc:FR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function FR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function GR(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class As extends S0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new UR,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UR(e),this._firestoreClient=void 0,await e}}}function NX(t,e){const n=typeof t=="object"?t:VM(),r=typeof t=="string"?t:_m,i=z_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=sq("firestore");a&&kX(i,...a)}return i}function T0(t){if(t._terminated)throw new Re(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IX(t),t._firestoreClient}function IX(t){const e=t._freezeSettings(),n=(function(i,a,o,c){return new n$(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,nO(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TX(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class Si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Si(dr.fromBase64String(e))}catch(n){throw new Re(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Si(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wh(e,Si._jsonSchema))return Si.fromBase64String(e.bytes)}}Si._jsonSchemaVersion="firestore/bytes/1.0",Si._jsonSchema={type:zn("string",Si._jsonSchemaVersion),bytes:zn("string")};class A0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pw{constructor(e){this._methodName=e}}class Da{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Da._jsonSchemaVersion}}static fromJSON(e){if(wh(e,Da._jsonSchema))return new Da(e.latitude,e.longitude)}}Da._jsonSchemaVersion="firestore/geoPoint/1.0",Da._jsonSchema={type:zn("string",Da._jsonSchemaVersion),latitude:zn("number"),longitude:zn("number")};class ka{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ka._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wh(e,ka._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ka(e.vectorValues);throw new Re(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ka._jsonSchemaVersion="firestore/vectorValue/1.0",ka._jsonSchema={type:zn("string",ka._jsonSchemaVersion),vectorValues:zn("object")};const MX=/^__.*__$/;class OX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $o(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eh(e,this.data,n,this.fieldTransforms)}}class iO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $o(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{Ac:t})}}class gw{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Im(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aO(this.Ac)&&MX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class PX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_0(e)}Cc(e,n,r,i=!1){return new gw({Ac:e,methodName:n,Dc:r,path:cr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function C0(t){const e=t._freezeSettings(),n=_0(t._databaseId);return new PX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sO(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);mw("Data must be an object, but it was:",o,r);const c=oO(r,o);let u,f;if(a.merge)u=new ii(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const g of a.mergeFields){const m=ix(e,g,n);if(!o.contains(m))throw new Re(ve.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);cO(h,m)||h.push(m)}u=new ii(h),f=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,f=o.fieldTransforms;return new OX(new Lr(c),u,f)}class R0 extends pw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof R0}}function jX(t,e,n,r){const i=t.Cc(1,e,n);mw("Data must be an object, but it was:",i,r);const a=[],o=Lr.empty();Ho(r,((u,f)=>{const h=vw(e,u,n);f=cn(f);const g=i.yc(h);if(f instanceof R0)a.push(h);else{const m=Ch(f,g);m!=null&&(a.push(h),o.set(h,m))}}));const c=new ii(a);return new iO(o,c,i.fieldTransforms)}function VX(t,e,n,r,i,a){const o=t.Cc(1,e,n),c=[ix(e,r,n)],u=[i];if(a.length%2!=0)throw new Re(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(ix(e,a[m])),u.push(a[m+1]);const f=[],h=Lr.empty();for(let m=c.length-1;m>=0;--m)if(!cO(f,c[m])){const x=c[m];let _=u[m];_=cn(_);const E=o.yc(x);if(_ instanceof R0)f.push(x);else{const S=Ch(_,E);S!=null&&(f.push(x),h.set(x,S))}}const g=new ii(f);return new iO(h,g,o.fieldTransforms)}function zX(t,e,n,r=!1){return Ch(n,t.Cc(r?4:3,e))}function Ch(t,e){if(lO(t=cn(t)))return mw("Unsupported field value:",e,t),oO(t,e);if(t instanceof pw)return(function(r,i){if(!aO(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=Ch(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:Cm(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cm(i.serializer,a)}}if(r instanceof Da)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Si)return{bytesValue:R4(i.serializer,r._byteString)};if(r instanceof mn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:K_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ka)return(function(o,c){return{mapValue:{fields:{[r4]:{stringValue:i4},[wm]:{arrayValue:{values:o.toArray().map((f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return $_(c.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${d0(r)}`)})(t,e)}function oO(t,e){const n={};return QM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(t,((r,i)=>{const a=Ch(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function lO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Da||t instanceof Si||t instanceof mn||t instanceof pw||t instanceof ka)}function mw(t,e,n){if(!lO(n)||!WM(n)){const r=d0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function ix(t,e,n){if((e=cn(e))instanceof A0)return e._internalPath;if(typeof e=="string")return vw(t,e);throw Im("Field path arguments must be of type string or ",t,!1,void 0,n)}const LX=new RegExp("[~\\*/\\[\\]]");function vw(t,e,n){if(e.search(LX)>=0)throw Im(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new A0(...e.split("."))._internalPath}catch{throw Im(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Im(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Re(ve.INVALID_ARGUMENT,c+t+u)}function cO(t,e){return t.some((n=>n.isEqual(e)))}class uO{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(D0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BX extends uO{data(){return super.data()}}function D0(t,e){return typeof e=="string"?vw(t,e):e instanceof A0?e._internalPath:e._delegate._internalPath}function dO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yw{}class bw extends yw{}function Ur(t,e,...n){let r=[];e instanceof yw&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof xw)).length,c=a.filter((u=>u instanceof k0)).length;if(o>1||o>0&&c>0)throw new Re(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class k0 extends bw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new k0(e,n,r)}_apply(e){const n=this._parse(e);return fO(e._query,n),new Ds(e.firestore,e.converter,X1(e._query,n))}_parse(e){const n=C0(e.firestore);return(function(a,o,c,u,f,h,g){let m;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Re(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$R(g,h);const _=[];for(const E of g)_.push(HR(u,a,E));m={arrayValue:{values:_}}}else m=HR(u,a,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$R(g,h),m=zX(c,o,g,h==="in"||h==="not-in");return Vn.create(f,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lu(t,e,n){const r=e,i=D0("where",t);return k0._create(i,r,n)}class xw extends yw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xw(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ta.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)fO(o,u),o=X1(o,u)})(e._query,n),new Ds(e.firestore,e.converter,X1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _w extends bw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _w(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new Re(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Re(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jf(a,o)})(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Qu(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Ou(t,e="asc"){const n=e,r=D0("orderBy",t);return _w._create(r,n)}class ww extends bw{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ww(e,n,r)}_apply(e){return new Ds(e.firestore,e.converter,Sm(e._query,this._limit,this._limitType))}}function qR(t){return ww._create("limit",t,"F")}function HR(t,e,n){if(typeof(n=cn(n))=="string"){if(n==="")throw new Re(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f4(e)&&n.indexOf("/")!==-1)throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Kt.fromString(n));if(!Ge.isDocumentKey(r))throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sR(t,new Ge(r))}if(n instanceof mn)return sR(t,n._key);throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${d0(n)}.`)}function $R(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fO(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UX{convertValue(e,n="none"){switch(zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return En(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ho(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[wm].arrayValue?.values?.map((r=>En(r.doubleValue)));return new ka(n)}convertGeoPoint(e){return new Da(En(e.latitude),En(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=p0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kf(e));default:return null}}convertTimestamp(e){const n=jo(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Kt.fromString(e);Mt(O4(r),9688,{name:e});const i=new Qf(r.get(1),r.get(3)),a=new Ge(r.popFirst(5));return i.isEqual(n)||Ss(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function hO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jl extends uO{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(D0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jl._jsonSchemaVersion="firestore/documentSnapshot/1.0",jl._jsonSchema={type:zn("string",jl._jsonSchemaVersion),bundleSource:zn("string","DocumentSnapshot"),bundleName:zn("string"),bundle:zn("string")};class Hg extends jl{data(e={}){return super.data(e)}}class Vl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Hg(this._firestore,this._userDataWriter,r.key,r,new hf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Hg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Hg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return c.type!==0&&(f=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:FX(c.type),doc:u,oldIndex:f,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=B_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:t})}}function GX(t){t=Fr(t,mn);const e=Fr(t.firestore,As);return RX(T0(e),t._key).then((n=>pO(e,t,n)))}Vl._jsonSchemaVersion="firestore/querySnapshot/1.0",Vl._jsonSchema={type:zn("string",Vl._jsonSchemaVersion),bundleSource:zn("string","QuerySnapshot"),bundleName:zn("string"),bundle:zn("string")};class Ew extends UX{constructor(e){super(),this.firestore=e}convertBytes(e){return new Si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function $i(t){t=Fr(t,Ds);const e=Fr(t.firestore,As),n=T0(e),r=new Ew(e);return dO(t._query),DX(n,t._query).then((i=>new Vl(e,r,t,i)))}function Yi(t,e,n){t=Fr(t,mn);const r=Fr(t.firestore,As),i=hO(t.converter,e,n);return I0(r,[sO(C0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ri.none())])}function N0(t,e,n,...r){t=Fr(t,mn);const i=Fr(t.firestore,As),a=C0(i);let o;return o=typeof(e=cn(e))=="string"||e instanceof A0?VX(a,"updateDoc",t._key,e,n,r):jX(a,"updateDoc",t._key,e),I0(i,[o.toMutation(t._key,Ri.exists(!0))])}function Ea(t){return I0(Fr(t.firestore,As),[new Y_(t._key,Ri.none())])}function Pu(t,e){const n=Fr(t.firestore,As),r=Ht(t),i=hO(t.converter,e);return I0(n,[sO(C0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ri.exists(!1))]).then((()=>r))}function zl(t,...e){t=cn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||GR(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(GR(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(t instanceof mn)o=Fr(t.firestore,As),c=g0(t._key.path),a={next:u=>{e[r]&&e[r](pO(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Fr(t,Ds);o=Fr(u.firestore,As),c=u._query;const f=new Ew(o);a={next:h=>{e[r]&&e[r](new Vl(o,f,u,h))},error:e[r+1],complete:e[r+2]},dO(t._query)}return(function(f,h,g,m){const x=new hw(m),_=new uw(h,x,g);return f.asyncQueue.enqueueAndForget((async()=>ow(await Nm(f),_))),()=>{x.Nu(),f.asyncQueue.enqueueAndForget((async()=>lw(await Nm(f),_)))}})(T0(o),c,i,a)}function I0(t,e){return(function(r,i){const a=new ms;return r.asyncQueue.enqueueAndForget((async()=>mX(await CX(r),i,a))),a.promise})(T0(t),e)}function pO(t,e,n){const r=n.docs.get(e._key),i=new Ew(t);return new jl(t,i,e._key,r,new hf(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Xu=i})(Yu),Cu(new $l("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new As(new VH(r.getProvider("auth-internal")),new BH(o,r.getProvider("app-check-internal")),(function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qf(f.options.projectId,h)})(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Ao(Y2,X2,e),Ao(Y2,X2,"esm2020")})();var qX="firebase",HX="12.6.0";Ao(qX,HX,"app");function gO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $X=gO,mO=new xh("auth","Firebase",gO());const Mm=new j_("@firebase/auth");function YX(t,...e){Mm.logLevel<=yt.WARN&&Mm.warn(`Auth (${Yu}): ${t}`,...e)}function $g(t,...e){Mm.logLevel<=yt.ERROR&&Mm.error(`Auth (${Yu}): ${t}`,...e)}function na(t,...e){throw Sw(t,...e)}function Na(t,...e){return Sw(t,...e)}function vO(t,e,n){const r={...$X(),[e]:n};return new xh("auth","Firebase",r).create(e,{appName:t.name})}function vs(t){return vO(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mO.create(t,...e)}function Ke(t,e,...n){if(!t)throw Sw(e,...n)}function us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $g(e),new Error(e)}function Cs(t,e){t||us(e)}function ax(){return typeof self<"u"&&self.location?.href||""}function XX(){return YR()==="http:"||YR()==="https:"}function YR(){return typeof self<"u"&&self.location?.protocol||null}function WX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XX()||pq()||"connection"in navigator)?navigator.onLine:!0}function KX(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Rh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cs(n>e,"Short delay should be less than long delay!"),this.isMobile=dq()||gq()}get(){return WX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tw(t,e){Cs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class yO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const QX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ZX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JX=new Rh(3e4,6e4);function ks(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ua(t,e,n,r,i={}){return bO(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=_h({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:u,...a};return hq()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&$u(t.emulatorConfig.host)&&(f.credentials="include"),yO.fetch()(await xO(t,t.config.apiHost,n,c),f)})}async function bO(t,e,n){t._canInitEmulator=!1;const r={...QX,...e};try{const i=new tW(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Rg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,f]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rg(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Rg(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Rg(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw vO(t,h,f);na(t,h)}}catch(i){if(i instanceof Rs)throw i;na(t,"network-request-failed",{message:String(i)})}}async function Dh(t,e,n,r,i={}){const a=await Ua(t,e,n,r,i);return"mfaPendingCredential"in a&&na(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function xO(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?Tw(t.config,i):`${t.config.apiScheme}://${i}`;return ZX.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function eW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Na(this.auth,"network-request-failed")),JX.get())})}}function Rg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Na(t,e,r);return i.customData._tokenResponse=n,i}function XR(t){return t!==void 0&&t.enterprise!==void 0}class nW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rW(t,e){return Ua(t,"GET","/v2/recaptchaConfig",ks(t,e))}async function iW(t,e){return Ua(t,"POST","/v1/accounts:delete",e)}async function Om(t,e){return Ua(t,"POST","/v1/accounts:lookup",e)}function kf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aW(t,e=!1){const n=cn(t),r=await n.getIdToken(e),i=Aw(r);Ke(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:kf(Tb(i.auth_time)),issuedAtTime:kf(Tb(i.iat)),expirationTime:kf(Tb(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Tb(t){return Number(t)*1e3}function Aw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $g("JWT malformed, contained fewer than 3 sections"),null;try{const i=RM(n);return i?JSON.parse(i):($g("Failed to decode base64 JWT payload"),null)}catch(i){return $g("Caught error parsing JWT payload as JSON",i?.toString()),null}}function WR(t){const e=Aw(t);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ju(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rs&&sW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class oW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class sx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kf(this.lastLoginAt),this.creationTime=kf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pm(t){const e=t.auth,n=await t.getIdToken(),r=await ju(t,Om(e,{idToken:n}));Ke(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?_O(i.providerUserInfo):[],o=cW(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,f=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new sx(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function lW(t){const e=cn(t);await Pm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _O(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function uW(t,e){const n=await bO(t,{},async()=>{const r=_h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await xO(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&$u(t.emulatorConfig.host)&&(u.credentials="include"),yO.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dW(t,e){return Ua(t,"POST","/v2/accounts:revokeToken",ks(t,e))}class pu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const n=WR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await uW(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new pu;return r&&(Ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ke(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Ke(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pu,this.toJSON())}_performRefresh(){return us("not implemented")}}function uo(t,e){Ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new oW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ju(this,this.stsTokenManager.getToken(this.auth,e));return Ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aW(this,e)}reload(){return lW(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(vs(this.auth));const e=await this.getIdToken();return await ju(this,iW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,f=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:x,providerData:_,stsTokenManager:E}=n;Ke(g&&E,e,"internal-error");const S=pu.fromJSON(this.name,E);Ke(typeof g=="string",e,"internal-error"),uo(r,e.name),uo(i,e.name),Ke(typeof m=="boolean",e,"internal-error"),Ke(typeof x=="boolean",e,"internal-error"),uo(a,e.name),uo(o,e.name),uo(c,e.name),uo(u,e.name),uo(f,e.name),uo(h,e.name);const T=new Xi({uid:g,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:S,createdAt:f,lastLoginAt:h});return _&&Array.isArray(_)&&(T.providerData=_.map(D=>({...D}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new pu;i.updateFromServerResponse(n);const a=new Xi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Pm(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ke(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?_O(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new pu;c.updateFromIdToken(r);const u=new Xi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new sx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,f),u}}const KR=new Map;function ds(t){Cs(t instanceof Function,"Expected a class definition");let e=KR.get(t);return e?(Cs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KR.set(t,e),e)}class wO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}wO.type="NONE";const QR=wO;function Yg(t,e,n){return`firebase:${t}:${e}:${n}`}class gu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Yg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Yg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Om(this.auth,{idToken:e}).catch(()=>{});return n?Xi._fromGetAccountInfoResponse(this.auth,n,e):null}return Xi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gu(ds(QR),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||ds(QR);const o=Yg(r,e.config.apiKey,e.name);let c=null;for(const f of n)try{const h=await f._get(o);if(h){let g;if(typeof h=="string"){const m=await Om(e,{idToken:h}).catch(()=>{});if(!m)break;g=await Xi._fromGetAccountInfoResponse(e,m,h)}else g=Xi._fromJSON(e,h);f!==a&&(c=g),a=f;break}}catch{}const u=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new gu(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new gu(a,e,r))}}function ZR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RO(e))return"Blackberry";if(DO(e))return"Webos";if(SO(e))return"Safari";if((e.includes("chrome/")||TO(e))&&!e.includes("edge/"))return"Chrome";if(CO(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function EO(t=_r()){return/firefox\//i.test(t)}function SO(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TO(t=_r()){return/crios\//i.test(t)}function AO(t=_r()){return/iemobile/i.test(t)}function CO(t=_r()){return/android/i.test(t)}function RO(t=_r()){return/blackberry/i.test(t)}function DO(t=_r()){return/webos/i.test(t)}function Cw(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fW(t=_r()){return Cw(t)&&!!window.navigator?.standalone}function hW(){return mq()&&document.documentMode===10}function kO(t=_r()){return Cw(t)||CO(t)||DO(t)||RO(t)||/windows phone/i.test(t)||AO(t)}function NO(t,e=[]){let n;switch(t){case"Browser":n=ZR(_r());break;case"Worker":n=`${ZR(_r())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yu}/${r}`}class pW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function gW(t,e={}){return Ua(t,"GET","/v2/passwordPolicy",ks(t,e))}const mW=6;class vW{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mW,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class yW{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JR(this),this.idTokenSubscription=new JR(this),this.beforeStateQueue=new pW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ds(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await gu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Om(this,{idToken:e}),r=await Xi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ei(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KX()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ei(this.app))return Promise.reject(vs(this));const n=e?cn(e):null;return n&&Ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ei(this.app)?Promise.reject(vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gW(this),n=new vW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dW(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ds(e)||this._popupRedirectResolver;Ke(n,this,"argument-error"),this.redirectPersistenceManager=await gu.create(this,[ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YX(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yo(t){return cn(t)}class JR{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sq(n=>this.observer=n)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let M0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bW(t){M0=t}function IO(t){return M0.loadJS(t)}function xW(){return M0.recaptchaEnterpriseScript}function _W(){return M0.gapiScript}function wW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class EW{constructor(){this.enterprise=new SW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const TW="recaptcha-enterprise",MO="NO_RECAPTCHA";class AW{constructor(e){this.type=TW,this.auth=Yo(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{rW(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new nW(u);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;XR(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(MO)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EW().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&XR(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xW();u.length!==0&&(u+=c),IO(u).then(()=>{i(c,a,o)}).catch(f=>{o(f)})}}).catch(c=>{o(c)})})}}async function eD(t,e,n,r=!1,i=!1){const a=new AW(t);let o;if(i)o=MO;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function jm(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await eD(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await eD(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}function CW(t,e){const n=z_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Hl(a,e??{}))return i;na(i,"already-initialized")}return n.initialize({options:e})}function RW(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ds);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function DW(t,e,n){const r=Yo(t);Ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=OO(e),{host:o,port:c}=kW(e),u=c===null?"":`:${c}`,f={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ke(Hl(f,r.config.emulator)&&Hl(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,$u(o)?(IM(`${a}//${o}${u}`),MM("Auth",!0)):NW()}function OO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kW(t){const e=OO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:tD(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:tD(o)}}}function tD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Rw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,n){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}async function IW(t,e){return Ua(t,"POST","/v1/accounts:signUp",e)}async function MW(t,e){return Dh(t,"POST","/v1/accounts:signInWithPassword",ks(t,e))}async function PO(t,e){return Ua(t,"POST","/v1/accounts:sendOobCode",ks(t,e))}async function OW(t,e){return PO(t,e)}async function PW(t,e){return PO(t,e)}async function jW(t,e){return Dh(t,"POST","/v1/accounts:signInWithEmailLink",ks(t,e))}async function VW(t,e){return Dh(t,"POST","/v1/accounts:signInWithEmailLink",ks(t,e))}class nh extends Rw{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new nh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jm(e,n,"signInWithPassword",MW);case"emailLink":return jW(e,{email:this._email,oobCode:this._password});default:na(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jm(e,r,"signUpPassword",IW);case"emailLink":return VW(e,{idToken:n,email:this._email,oobCode:this._password});default:na(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mu(t,e){return Dh(t,"POST","/v1/accounts:signInWithIdp",ks(t,e))}const zW="http://localhost";class Wl extends Rw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):na("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new Wl(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mu(e,n)}buildRequest(){const e={requestUri:zW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_h(n)}return e}}function LW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BW(t){const e=lf(cf(t)).link,n=e?lf(cf(e)).deep_link_id:null,r=lf(cf(t)).deep_link_id;return(r?lf(cf(r)).link:null)||r||n||e||t}class Dw{constructor(e){const n=lf(cf(e)),r=n.apiKey??null,i=n.oobCode??null,a=LW(n.mode??null);Ke(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=BW(e);try{return new Dw(n)}catch{return null}}}class nc{constructor(){this.providerId=nc.PROVIDER_ID}static credential(e,n){return nh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Dw.parseLink(n);return Ke(r,"argument-error"),nh._fromEmailAndCode(e,r.code,r.tenantId)}}nc.PROVIDER_ID="password";nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class jO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kh extends jO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class go extends kh{constructor(){super("facebook.com")}static credential(e){return Wl._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.FACEBOOK_SIGN_IN_METHOD="facebook.com";go.PROVIDER_ID="facebook.com";class mo extends kh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return mo.credential(n,r)}catch{return null}}}mo.GOOGLE_SIGN_IN_METHOD="google.com";mo.PROVIDER_ID="google.com";class vo extends kh{constructor(){super("github.com")}static credential(e){return Wl._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}}vo.GITHUB_SIGN_IN_METHOD="github.com";vo.PROVIDER_ID="github.com";class yo extends kh{constructor(){super("twitter.com")}static credential(e,n){return Wl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yo.credential(n,r)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";async function UW(t,e){return Dh(t,"POST","/v1/accounts:signUp",ks(t,e))}class Kl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Xi._fromIdTokenResponse(e,r,i),o=nD(r);return new Kl({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=nD(r);return new Kl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function nD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Vm extends Rs{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Vm(e,n,r,i)}}function VO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vm._fromErrorAndOperation(t,a,e,r):a})}async function FW(t,e,n=!1){const r=await ju(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kl._forOperation(t,"link",r)}async function zO(t,e,n=!1){const{auth:r}=t;if(Ei(r.app))return Promise.reject(vs(r));const i="reauthenticate";try{const a=await ju(t,VO(r,i,e,t),n);Ke(a.idToken,r,"internal-error");const o=Aw(a.idToken);Ke(o,r,"internal-error");const{sub:c}=o;return Ke(t.uid===c,r,"user-mismatch"),Kl._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&na(r,"user-mismatch"),a}}async function LO(t,e,n=!1){if(Ei(t.app))return Promise.reject(vs(t));const r="signIn",i=await VO(t,r,e),a=await Kl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function GW(t,e){return LO(Yo(t),e)}async function qW(t,e){return zO(cn(t),e)}async function BO(t){const e=Yo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HW(t,e,n){const r=Yo(t);await jm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",PW)}async function $W(t,e,n){if(Ei(t.app))return Promise.reject(vs(t));const r=Yo(t),o=await jm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UW).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&BO(t),u}),c=await Kl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function YW(t,e,n){return Ei(t.app)?Promise.reject(vs(t)):GW(cn(t),nc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&BO(t),r})}async function rD(t,e){const n=cn(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await OW(n.auth,i);a!==t.email&&await t.reload()}async function XW(t,e){return Ua(t,"POST","/v1/accounts:update",e)}async function WW(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=cn(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ju(r,XW(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function KW(t,e,n,r){return cn(t).onIdTokenChanged(e,n,r)}function QW(t,e,n){return cn(t).beforeAuthStateChanged(e,n)}function ZW(t,e,n,r){return cn(t).onAuthStateChanged(e,n,r)}function iD(t){return cn(t).signOut()}async function JW(t){return cn(t).delete()}const zm="__sak";class UO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zm,"1"),this.storage.removeItem(zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const eK=1e3,tK=10;class FO extends UO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);hW()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tK):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}FO.type="LOCAL";const nK=FO;class GO extends UO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GO.type="SESSION";const qO=GO;function rK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class O0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new O0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async f=>f(n.origin,a)),u=await rK(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}O0.receivers=[];function kw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class iK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const f=kw("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===f)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Ia(){return window}function aK(t){Ia().location.href=t}function HO(){return typeof Ia().WorkerGlobalScope<"u"&&typeof Ia().importScripts=="function"}async function sK(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oK(){return navigator?.serviceWorker?.controller||null}function lK(){return HO()?self:null}const $O="firebaseLocalStorageDb",cK=1,Lm="firebaseLocalStorage",YO="fbase_key";class Nh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function P0(t,e){return t.transaction([Lm],e?"readwrite":"readonly").objectStore(Lm)}function uK(){const t=indexedDB.deleteDatabase($O);return new Nh(t).toPromise()}function ox(){const t=indexedDB.open($O,cK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lm,{keyPath:YO})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lm)?e(r):(r.close(),await uK(),e(await ox()))})})}async function aD(t,e,n){const r=P0(t,!0).put({[YO]:e,value:n});return new Nh(r).toPromise()}async function dK(t,e){const n=P0(t,!1).get(e),r=await new Nh(n).toPromise();return r===void 0?null:r.value}function sD(t,e){const n=P0(t,!0).delete(e);return new Nh(n).toPromise()}const fK=800,hK=3;class XO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ox(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=O0._getInstance(lK()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sK(),!this.activeServiceWorker)return;this.sender=new iK(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ox();return await aD(e,zm,"1"),await sD(e,zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>aD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>dK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=P0(i,!1).getAll();return new Nh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XO.type="LOCAL";const pK=XO;new Rh(3e4,6e4);function gK(t,e){return e?ds(e):(Ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Nw extends Rw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mK(t){return LO(t.auth,new Nw(t),t.bypassAuthState)}function vK(t){const{auth:e,user:n}=t;return Ke(n,e,"internal-error"),zO(n,new Nw(t),t.bypassAuthState)}async function yK(t){const{auth:e,user:n}=t;return Ke(n,e,"internal-error"),FW(n,new Nw(t),t.bypassAuthState)}class WO{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mK;case"linkViaPopup":case"linkViaRedirect":return yK;case"reauthViaPopup":case"reauthViaRedirect":return vK;default:na(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bK=new Rh(2e3,1e4);class cu extends WO{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,cu.currentPopupAction&&cu.currentPopupAction.cancel(),cu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){Cs(this.filter.length===1,"Popup operations only handle one event");const e=kw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Na(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Na(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Na(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bK.get())};e()}}cu.currentPopupAction=null;const xK="pendingRedirect",Xg=new Map;class _K extends WO{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xg.get(this.auth._key());if(!e){try{const r=await wK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xg.set(this.auth._key(),e)}return this.bypassAuthState||Xg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wK(t,e){const n=TK(e),r=SK(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function EK(t,e){Xg.set(t._key(),e)}function SK(t){return ds(t._redirectPersistence)}function TK(t){return Yg(xK,t.config.apiKey,t.name)}async function AK(t,e,n=!1){if(Ei(t.app))return Promise.reject(vs(t));const r=Yo(t),i=gK(r,e),o=await new _K(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const CK=600*1e3;class RK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!KO(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Na(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CK&&this.cachedEventUids.clear(),this.cachedEventUids.has(oD(e))}saveEventToCache(e){this.cachedEventUids.add(oD(e)),this.lastProcessedEventTime=Date.now()}}function oD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KO({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function DK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KO(t);default:return!1}}async function kK(t,e={}){return Ua(t,"GET","/v1/projects",e)}const NK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IK=/^https?/;async function MK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kK(t);for(const n of e)try{if(OK(n))return}catch{}na(t,"unauthorized-domain")}function OK(t){const e=ax(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IK.test(n))return!1;if(NK.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const PK=new Rh(3e4,6e4);function lD(){const t=Ia().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jK(t){return new Promise((e,n)=>{function r(){lD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lD(),n(Na(t,"network-request-failed"))},timeout:PK.get()})}if(Ia().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ia().gapi?.load)r();else{const i=wW("iframefcb");return Ia()[i]=()=>{gapi.load?r():n(Na(t,"network-request-failed"))},IO(`${_W()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Wg=null,e})}let Wg=null;function VK(t){return Wg=Wg||jK(t),Wg}const zK=new Rh(5e3,15e3),LK="__/auth/iframe",BK="emulator/auth/iframe",UK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GK(t){const e=t.config;Ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tw(e,BK):`https://${t.config.authDomain}/${LK}`,r={apiKey:e.apiKey,appName:t.name,v:Yu},i=FK.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${_h(r).slice(1)}`}async function qK(t){const e=await VK(t),n=Ia().gapi;return Ke(n,t,"internal-error"),e.open({where:document.body,url:GK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UK,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Na(t,"network-request-failed"),c=Ia().setTimeout(()=>{a(o)},zK.get());function u(){Ia().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const HK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$K=500,YK=600,XK="_blank",WK="http://localhost";class cD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KK(t,e,n,r=$K,i=YK){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...HK,width:r.toString(),height:i.toString(),top:a,left:o},f=_r().toLowerCase();n&&(c=TO(f)?XK:n),EO(f)&&(e=e||WK,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[x,_])=>`${m}${x}=${_},`,"");if(fW(f)&&c!=="_self")return QK(e||"",c),new cD(null);const g=window.open(e||"",c,h);Ke(g,t,"popup-blocked");try{g.focus()}catch{}return new cD(g)}function QK(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const ZK="__/auth/handler",JK="emulator/auth/handler",eQ=encodeURIComponent("fac");async function uD(t,e,n,r,i,a){Ke(t.config.authDomain,t,"auth-domain-config-required"),Ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yu,eventId:i};if(e instanceof jO){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Eq(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof kh){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),f=u?`#${eQ}=${encodeURIComponent(u)}`:"";return`${tQ(t)}?${_h(c).slice(1)}${f}`}function tQ({config:t}){return t.emulator?Tw(t,JK):`https://${t.authDomain}/${ZK}`}const Ab="webStorageSupport";class nQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qO,this._completeRedirectFn=AK,this._overrideRedirectResult=EK}async _openPopup(e,n,r,i){Cs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await uD(e,n,r,ax(),i);return KK(e,a,kw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await uD(e,n,r,ax(),i);return aK(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Cs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await qK(e),r=new RK(e);return n.register("authEvent",i=>(Ke(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ab,{type:Ab},i=>{const a=i?.[0]?.[Ab];a!==void 0&&n(!!a),na(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kO()||SO()||Cw()}}const rQ=nQ;var dD="@firebase/auth",fD="1.11.1";class iQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function aQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sQ(t){Cu(new $l("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NO(t)},f=new yW(r,i,a,u);return RW(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cu(new $l("auth-internal",e=>{const n=Yo(e.getProvider("auth").getImmediate());return(r=>new iQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ao(dD,fD,aQ(t)),Ao(dD,fD,"esm2020")}const oQ=300,lQ=NM("authIdTokenMaxAge")||oQ;let hD=null;const cQ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lQ)return;const i=n?.token;hD!==i&&(hD=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uQ(t=VM()){const e=z_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CW(t,{popupRedirectResolver:rQ,persistence:[pK,nK,qO]}),r=NM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=cQ(a.toString());QW(n,o,()=>o(n.currentUser)),KW(n,c=>o(c))}}const i=DM("auth");return i&&DW(n,`http://${i}`),n}function dQ(){return document.getElementsByTagName("head")?.[0]??document}bW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Na("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",dQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sQ("Browser");const fQ={apiKey:"AIzaSyDwUA0paVI6n01aENV5Q2aLwVz1DEDtNuA",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:d7a8169fd53f437e42aba9"},QO=jM(fQ),fo=uQ(QO),lt=NX(QO),ZO=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,Fn=t=>ZO(t).toISOString(),hQ=t=>{const e=ZO(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},pQ=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Iw=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=Fn(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||hQ(r),description:e.description||"",merchant:e.merchant||void 0,type:pQ(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}};class Il{static instance;static getInstance(){return Il.instance||(Il.instance=new Il),Il.instance}async getEnvelopes(e){try{console.log(" BudgetService.getEnvelopes called for user:",e);const n=lr(lt,"users",e,"envelopes"),a=(await $i(n)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const u=o.orderIndex??0,f=c.orderIndex??0;return u-f});return console.log(" Fetched envelopes:",a.length),a}catch(n){throw console.error(" BudgetService.getEnvelopes failed:",n),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{console.log(" BudgetService.getTransactions: Fetching for user",e);const n=lr(lt,"users",e,"transactions"),r=Ur(n,Ou("date","desc")),a=(await $i(r)).docs.map(o=>{const c={id:o.id,...o.data()};return Iw(c)});return console.log(` Fetched ${a.length} transactions`),a}catch(n){throw console.error(" BudgetService.getTransactions failed:",n),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async createEnvelope(e){try{console.log(" BudgetService.createEnvelope called for user:",e.userId);const n=lr(lt,"users",e.userId,"envelopes"),r=await Pu(n,{...e,createdAt:gt.now(),lastUpdated:gt.now()}),i={...e,id:r.id,createdAt:Fn(gt.now()),lastUpdated:Fn(gt.now())};return console.log(" Created envelope:",i.id),i}catch(n){throw console.error(" BudgetService.createEnvelope failed:",n),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{console.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=Ht(lt,"users",e,"envelopes",n.id);await Yi(r,{...n,lastUpdated:gt.now()},{merge:!0}),console.log(" Updated envelope:",n.id)}catch(r){throw console.error(" BudgetService.updateEnvelope failed:",r),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{console.log(" BudgetService.deleteEnvelope called for envelope:",n);const r=Ht(lt,"users",e,"envelopes",n);await Ea(r),console.log(" Deleted envelope:",n)}catch(r){throw console.error(" BudgetService.deleteEnvelope failed:",r),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{console.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=Ht(lt,"users",e,"envelopes",i.id);return Yi(a,{orderIndex:i.orderIndex,lastUpdated:gt.now()},{merge:!0})});await Promise.all(r),console.log(" Reordered envelopes")}catch(r){throw console.error(" BudgetService.reorderEnvelopes failed:",r),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{console.log(" BudgetService.createTransaction called for user:",e.userId);const n=lr(lt,"users",e.userId,"transactions"),r=await Pu(n,{...e,createdAt:gt.now()}),i={...e,id:r.id};return console.log(" Created transaction:",i.id),i}catch(n){throw console.error(" BudgetService.createTransaction failed:",n),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{console.log(" BudgetService.updateTransaction called for transaction:",n.id);const r=Object.fromEntries(Object.entries(n).filter(([a,o])=>o!==void 0));console.log(" Clean transaction for Firestore:",r);const i=Ht(lt,"users",e,"transactions",n.id);await Yi(i,r,{merge:!0}),console.log(" Updated transaction:",n.id)}catch(r){throw console.error(" BudgetService.updateTransaction failed:",r),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{console.log(" BudgetService.deleteTransaction called for transaction:",n);const r=Ht(lt,"users",e,"transactions",n);await Ea(r),console.log(" Deleted transaction:",n)}catch(r){throw console.error(" BudgetService.deleteTransaction failed:",r),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async getMonthData(e,n){try{console.log(` BudgetService.getMonthData: Fetching for user ${e}, month ${n}`);const r=Ur(lr(lt,"users",e,"incomeSources"),lu("month","==",n)),a=(await $i(r)).docs.map(f=>{const h=f.data();return{id:f.id,userId:h.userId,month:h.month,name:h.name,amount:parseFloat(h.amount),frequency:h.frequency,category:h.category,createdAt:Fn(h.createdAt),updatedAt:Fn(h.updatedAt)}}).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),o=Ur(lr(lt,"users",e,"envelopeAllocations"),lu("month","==",n)),u=(await $i(o)).docs.map(f=>{const h=f.data();return{id:f.id,userId:h.userId,envelopeId:h.envelopeId,month:h.month,budgetedAmount:parseFloat(h.budgetedAmount),createdAt:Fn(h.createdAt),updatedAt:Fn(h.updatedAt)}}).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());return console.log(` Fetched ${a.length} income sources and ${u.length} allocations for ${n}`),{incomeSources:a,allocations:u}}catch(r){throw console.error(" BudgetService.getMonthData failed:",r),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{console.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(g=>g.id));console.log(` Found ${r.length} existing envelopes`);const a=lr(lt,"users",e,"envelopeAllocations"),o=await $i(a),c=[],u=new Set;for(const g of o.docs){const m=g.data();u.add(m.month),i.has(m.envelopeId)||(c.push(g.id),console.log(` Found orphaned allocation: ${g.id} for envelope ${m.envelopeId} in month ${m.month}`))}if(c.length>0){const g=c.map(m=>Ea(Ht(lt,"users",e,"envelopeAllocations",m)));await Promise.all(g),n.orphanedAllocationsDeleted=c.length,n.details.deletedAllocationIds=c,console.log(` Deleted ${c.length} orphaned allocations`)}const f=await this.getTransactions(e),h=[];for(const g of f)i.has(g.envelopeId)||(h.push(g.id),console.log(` Found orphaned transaction: ${g.id} for envelope ${g.envelopeId}`));if(h.length>0){const g=h.map(m=>Ea(Ht(lt,"users",e,"transactions",m)));await Promise.all(g),n.orphanedTransactionsDeleted=h.length,n.details.deletedTransactionIds=h,console.log(` Deleted ${h.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(u),console.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw console.error(" BudgetService.cleanupOrphanedData failed:",n),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const gQ=Il.getInstance(),Cb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),Di=P_()(TM(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await YW(fo,e,n)).user;if(!i.emailVerified)return await iD(fo),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;const a=Cb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await $W(fo,e,n)).user;await WW(a,{displayName:r}),await rD(a);const o=Cb(a);return t({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await iD(fo),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await HW(fo,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=fo.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await rD(e),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=Di.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},deleteAccount:async e=>{const n=fo.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=nc.credential(n.email,e);return await qW(n,r),await JW(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>Di.getState().isInitialized?()=>{}:(t({isInitialized:!1}),ZW(fo,r=>{const i=Date.now(),a=Di.getState(),o=r?Cb(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,f=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,g=r&&h||!!f,m=r?o:f?a.currentUser:null;t({currentUser:m,isAuthenticated:g,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m?console.log(` Auth state: User is signed in (${m.email})`,f?"(offline grace period)":h?"(verified)":"(unverified)"):console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),ir=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:Di},Symbol.toStringTag,{value:"Module"})),Rb=t=>lr(lt,"users",t,"transactions"),mQ={subscribeToTransactions:(t,e)=>{const n=Ur(Rb(t),Ou("date","desc"));return zl(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Ur(Rb(t),Ou("date","desc")),r=(await $i(e)).docs.map(i=>{const a={id:i.id,...i.data()};return Iw(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await Pu(Rb(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(t,e,n)=>{const r=Ht(lt,"users",t,"transactions",e);return await N0(r,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=Ht(lt,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await Ea(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},Db=t=>lr(lt,"users",t,"envelopes"),vQ={subscribeToEnvelopes:(t,e)=>{const n=Ur(Db(t),Ou("orderIndex","asc"));return zl(n,i=>{const a=i.docs.map(o=>{const c=o.data();return{id:o.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=Db(t),i=(await $i(e)).docs.map((a,o)=>{const c=a.data();return{id:a.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated,orderIndex:c.orderIndex??o}}).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await Pu(Db(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=Ht(lt,"users",t,"envelopes",e.id);return await Yi(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=Ht(lt,"users",t,"envelopes",e);return await N0(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=Ht(lt,"users",t,"envelopes",e);await Ea(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},kb=t=>lr(lt,"users",t,"distributionTemplates"),yQ={subscribeToDistributionTemplates:(t,e)=>{const n=Ur(kb(t),Ou("lastUsed","desc"));return zl(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Ur(kb(t),Ou("lastUsed","desc"));return(await $i(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await Pu(kb(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=Ht(lt,"users",t,"distributionTemplates",e.id);return await Yi(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=Ht(lt,"users",t,"distributionTemplates",e);return await N0(r,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=Ht(lt,"users",t,"distributionTemplates",e);await Ea(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},Nb=t=>lr(lt,"users",t,"appSettings"),bQ={subscribeToAppSettings:(t,e)=>{const n=Ur(Nb(t),qR(1));return zl(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Ur(Nb(t),qR(1)),n=await $i(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await Pu(Nb(e),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=Ht(lt,"users",t,"appSettings",e.id);return await Yi(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=Ht(lt,"users",t,"appSettings",e);return await N0(r,n)},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=Ht(lt,"users",t,"appSettings",e);await Ea(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}};class Wi{static instance;static getInstance(){return Wi.instance||(Wi.instance=new Wi),Wi.instance}async getMonthlyBudget(e,n){try{const r=Ht(lt,"users",e,"monthlyBudgets",n),i=await GX(r);if(i.exists()){const a=i.data();return{id:a.id,userId:a.userId,month:a.month,totalIncome:parseFloat(a.totalIncome),availableToBudget:parseFloat(a.availableToBudget),createdAt:Fn(a.createdAt),updatedAt:Fn(a.updatedAt)}}return null}catch(r){throw console.error("Error getting monthly budget:",r),r}}async createOrUpdateMonthlyBudget(e){try{const n=gt.now(),r=`${e.userId}_${e.month}`,i={id:r,userId:e.userId,month:e.month,totalIncome:e.totalIncome.toString(),availableToBudget:e.availableToBudget.toString(),createdAt:n,updatedAt:n};return await Yi(Ht(lt,"users",e.userId,"monthlyBudgets",e.month),i),{...e,id:r,createdAt:Fn(n),updatedAt:Fn(n)}}catch(n){throw console.error("Error creating/updating monthly budget:",n),n}}async getIncomeSources(e,n){try{const r=Ur(lr(lt,"users",e,"incomeSources"),lu("month","==",n));return(await $i(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,month:o.month,name:o.name,amount:parseFloat(o.amount),frequency:o.frequency,category:o.category,createdAt:Fn(o.createdAt),updatedAt:Fn(o.updatedAt)}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting income sources:",r),r}}async createIncomeSource(e){try{const n=gt.now(),r=Ht(lr(lt,"users",e.userId,"incomeSources")),i={id:r.id,userId:e.userId,month:e.month,name:e.name,amount:e.amount.toString(),frequency:e.frequency||"monthly",...e.category&&{category:e.category},createdAt:n,updatedAt:n};return await Yi(r,i),{...e,frequency:e.frequency||"monthly",id:r.id,createdAt:Fn(n),updatedAt:Fn(n)}}catch(n){throw console.error("Error creating income source:",n),n}}async getEnvelopeAllocations(e,n){try{const r=Ur(lr(lt,"users",e,"envelopeAllocations"),lu("month","==",n));return(await $i(r)).docs.map(a=>{const o=a.data();return{id:o.id,userId:o.userId,envelopeId:o.envelopeId,month:o.month,budgetedAmount:parseFloat(o.budgetedAmount),createdAt:Fn(o.createdAt),updatedAt:Fn(o.updatedAt)}}).sort((a,o)=>new Date(a.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){throw console.error("Error getting envelope allocations:",r),r}}async createEnvelopeAllocation(e){try{const n=gt.now(),r=Ht(lr(lt,"users",e.userId,"envelopeAllocations")),i={id:r.id,userId:e.userId,envelopeId:e.envelopeId,month:e.month,budgetedAmount:e.budgetedAmount.toString(),createdAt:n,updatedAt:n};return await Yi(r,i),{...e,id:r.id,createdAt:Fn(n),updatedAt:Fn(n)}}catch(n){throw console.error("Error creating envelope allocation:",n),n}}async copyMonthData(e,n,r){try{const i=await this.getIncomeSources(e,n);for(const f of i)await this.createIncomeSource({...f,month:r});const a=await this.getEnvelopeAllocations(e,n);for(const f of a)await this.createEnvelopeAllocation({...f,month:r});const o=i.reduce((f,h)=>f+h.amount,0),c=a.reduce((f,h)=>f+h.budgetedAmount,0),u=o-c;await this.createOrUpdateMonthlyBudget({userId:e,month:r,totalIncome:o,availableToBudget:u})}catch(i){throw console.error("Error copying month data:",i),i}}async deleteIncomeSource(e,n){try{const r=Ht(lt,"users",e,"incomeSources",n);await Ea(r)}catch(r){throw console.error("Error deleting income source:",r),r}}async updateIncomeSource(e,n,r){try{const i=Ht(lt,"users",e,"incomeSources",n),a={...r,updatedAt:gt.now()};await Yi(i,a,{merge:!0})}catch(i){throw console.error("Error updating income source:",i),i}}async deleteEnvelopeAllocation(e,n){try{const r=Ht(lt,"users",e,"envelopeAllocations",n);await Ea(r)}catch(r){throw console.error("Error deleting envelope allocation:",r),r}}async updateEnvelopeAllocation(e,n,r){try{const i=Ht(lt,"users",e,"envelopeAllocations",n),a={...r,updatedAt:gt.now()};await Yi(i,a,{merge:!0})}catch(i){throw console.error("Error updating envelope allocation:",i),i}}async clearMonthData(e,n){try{const[r,i]=await Promise.all([this.getIncomeSources(e,n),this.getEnvelopeAllocations(e,n)]),a=r.map(c=>this.deleteIncomeSource(e,c.id)),o=i.map(c=>this.deleteEnvelopeAllocation(e,c.id));await Promise.all([...a,...o]),await this.createOrUpdateMonthlyBudget({userId:e,month:n,totalIncome:0,availableToBudget:0})}catch(r){throw console.error("Error clearing month data:",r),r}}async calculateAvailableToBudget(e,n){try{const r=await this.getIncomeSources(e,n),i=await this.getEnvelopeAllocations(e,n),a=r.reduce((c,u)=>c+u.amount,0),o=i.reduce((c,u)=>c+u.budgetedAmount,0);return a-o}catch(r){throw console.error("Error calculating available to budget:",r),r}}subscribeToMonthlyBudget(e,n,r){const i=Ht(lt,"monthlyBudgets",`${e}_${n}`);return zl(i,a=>{if(a.exists()){const o=a.data();r(o)}else r(null)})}subscribeToIncomeSources(e,n,r){const i=Ur(lr(lt,"users",e,"incomeSources"),lu("month","==",n));return zl(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()})).sort((c,u)=>{const f=c.createdAt?.toDate?.()?.getTime()||0,h=u.createdAt?.toDate?.()?.getTime()||0;return f-h});r(o)})}subscribeToEnvelopeAllocations(e,n,r){const i=Ur(lr(lt,"users",e,"envelopeAllocations"),lu("month","==",n));return zl(i,a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));r(o)})}}const JO=Wi.getInstance(),Dg=Object.freeze(Object.defineProperty({__proto__:null,MonthlyBudgetService:Wi,monthlyBudgetService:JO},Symbol.toStringTag,{value:"Module"})),eP=t=>({id:t.id,userId:t.userId,month:t.month,name:t.name,amount:typeof t.amount=="string"?parseFloat(t.amount):t.amount,frequency:t.frequency,category:t.category,createdAt:t.createdAt,updatedAt:t.updatedAt}),tP=t=>({id:t.id,userId:t.userId,month:t.month,envelopeId:t.envelopeId,budgetedAmount:typeof t.budgetedAmount=="string"?parseFloat(t.budgetedAmount):t.budgetedAmount,createdAt:t.createdAt,updatedAt:t.updatedAt}),xQ=t=>Iw(t),_Q=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig}),wQ=t=>({id:t.id,name:t.name||"",distributions:t.distributions||{},lastUsed:t.lastUsed?.toDate?.()?t.lastUsed.toDate().toISOString():t.lastUsed||new Date().toISOString(),note:t.note||"",userId:t.userId||void 0}),pD=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;console.log(" Current month for subscriptions:",n);const r=vQ.subscribeToEnvelopes(e,f=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Envelopes updated",f.length);const g=f.map(_Q);t.setState({envelopes:g})}else console.log(" Real-time sync: BLOCKED envelope update",{isOnline:h.isOnline,pendingSync:h.pendingSync,resetPending:h.resetPending,isImporting:h.isImporting})}),i=mQ.subscribeToTransactions(e,f=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Transactions updated",f.length);const g=f.map(xQ);t.setState({transactions:g})}else console.log(" Real-time sync: BLOCKED transaction update",{isOnline:h.isOnline,pendingSync:h.pendingSync,resetPending:h.resetPending,isImporting:h.isImporting,transactionCount:f.length})}),a=yQ.subscribeToDistributionTemplates(e,f=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Templates updated from Firebase",f.length),console.log(" Firebase templates:",f.map(m=>({id:m.id,name:m.name})));const g=f.map(wQ);console.log(" Setting store templates to:",g.map(m=>({id:m.id,name:m.name})))}else console.log(" Real-time sync: Skipping template update (offline or pending changes)")}),o=bQ.subscribeToAppSettings(e,f=>{const h=t.getState();h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting&&(console.log(" Real-time sync: Settings updated",f?"found":"null"),t.setState({appSettings:f}))}),c=Wi.getInstance().subscribeToIncomeSources(e,n,f=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Income sources updated",f.length);const g=f.map(eP),m=t.getState().incomeSources;t.setState({incomeSources:{...m,[n]:g}})}else console.log(" Real-time sync: BLOCKED income sources update")}),u=Wi.getInstance().subscribeToEnvelopeAllocations(e,n,f=>{const h=t.getState();if(h.isOnline&&!h.pendingSync&&!h.resetPending&&!h.isImporting){console.log(" Real-time sync: Allocations updated",f.length);const g=f.map(tP),m=t.getState().allocations;t.setState({allocations:{...m,[n]:g}})}else console.log(" Real-time sync: BLOCKED allocations update")});window.__firebaseUnsubscribers={envelopes:r,transactions:i,templates:a,settings:o,incomeSources:c,allocations:u},console.log(" Real-time subscriptions active - cross-device sync enabled")},EQ=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),await e.getState().updateOnlineStatus();const u=e.getState();u.isOnline&&(u.pendingSync||u.resetPending)&&(console.log(" Auto-syncing pending operations..."),u.syncData())}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),setTimeout(()=>{e.getState().updateOnlineStatus()},1e3);let i=null;const a=()=>{i&&clearInterval(i),i=setInterval(async()=>{const u=e.getState();if(!u.isOnline&&!u.testingConnectivity){console.log(" Periodic offline retry: testing connectivity..."),e.setState({testingConnectivity:!0});try{await(async()=>(await e.getState().updateOnlineStatus(),e.getState().isOnline))()?(console.log(" Periodic retry succeeded - back online!"),e.setState({isOnline:!0,testingConnectivity:!1}),(u.pendingSync||u.resetPending)&&e.getState().syncData(),i&&(clearInterval(i),i=null)):e.setState({testingConnectivity:!1})}catch(f){console.log(" Periodic retry failed:",f),e.setState({testingConnectivity:!1})}}else u.isOnline&&i&&(clearInterval(i),i=null)},3e4)};a(),e.subscribe(u=>{!u.isOnline&&!i&&(console.log(" Starting periodic connectivity retry"),a())});const o=n.getState();o.isAuthenticated&&o.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),pD(e,r())),n.subscribe(u=>{if(u.isAuthenticated&&u.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),pD(e,r());else if(!u.isAuthenticated&&!u.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const f=window.__firebaseUnsubscribers;f.envelopes&&f.envelopes(),f.transactions&&f.transactions(),f.templates&&f.templates(),f.settings&&f.settings(),f.incomeSources&&f.incomeSources(),f.allocations&&f.allocations(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let c=e.getState().currentMonth;e.subscribe(u=>{if(u.currentMonth!==c&&u.isAuthenticated){console.log(" Month changed from",c,"to",u.currentMonth),c=u.currentMonth;const f=r();if(f&&window.__firebaseUnsubscribers){const h=window.__firebaseUnsubscribers;h.incomeSources&&(h.incomeSources(),console.log(" Unsubscribed from old month income sources")),h.allocations&&(h.allocations(),console.log(" Unsubscribed from old month allocations")),h.incomeSources=Wi.getInstance().subscribeToIncomeSources(f,u.currentMonth,g=>{const m=e.getState();if(m.isOnline&&!m.pendingSync&&!m.resetPending&&!m.isImporting){console.log(" Real-time sync: Income sources updated for new month",g.length);const x=g.map(eP),_=e.getState().incomeSources;e.setState({incomeSources:{..._,[u.currentMonth]:x}})}}),h.allocations=Wi.getInstance().subscribeToEnvelopeAllocations(f,u.currentMonth,g=>{const m=e.getState();if(m.isOnline&&!m.pendingSync&&!m.resetPending&&!m.isImporting){console.log(" Real-time sync: Allocations updated for new month",g.length);const x=g.map(tP),_=e.getState().allocations;e.setState({allocations:{..._,[u.currentMonth]:x}})}}),console.log(" Subscribed to income sources and allocations for new month:",u.currentMonth)}}})},SQ=()=>Di.getState().currentUser?.id||"",ri=Il.getInstance(),Qn=P_()(WG(TM((t,e)=>({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isLoading:!1,error:null,pendingSync:!1,resetPending:!1,isImporting:!1,testingConnectivity:!1,fetchMonthData:async n=>{try{const i=(await pn(()=>Promise.resolve().then(()=>ir),[]).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping month data fetch");return}console.log(`Fetching month data for: ${n}`);const a=await ri.getMonthData(i.id,n),o=e();t({incomeSources:{...o.incomeSources,[n]:a.incomeSources},allocations:{...o.allocations,[n]:a.allocations}}),console.log(` Fetched month data for ${n}`),(async()=>{const u=e(),f=u.allocations[n]||[],h=u.transactions.filter(m=>m.month===n);let g=0;for(const m of f){const x=u.envelopes.find(E=>E.id===m.envelopeId);if(x?.isPiggybank)continue;const _=h.find(E=>E.envelopeId===m.envelopeId&&(E.description==="Monthly Budget Allocation"||E.description==="Monthly Allocation"));_?_.amount!==m.budgetedAmount&&(console.log(` Repairing mismatch for envelope ${x?.name||m.envelopeId}: Alloc ${m.budgetedAmount} vs Tx ${_.amount}`),await u.updateTransaction({..._,amount:m.budgetedAmount}),g++):m.budgetedAmount>0&&(console.log(` Repairing missing transaction for envelope ${x?.name||m.envelopeId}`),await u.addTransaction({description:"Monthly Budget Allocation",amount:m.budgetedAmount,envelopeId:m.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),g++)}g>0&&console.log(` Repaired ${g} allocation discrepancies for ${n}`)})().catch(u=>console.error("Verification failed:",u))}catch(r){console.error(` Failed to fetch month data for ${n}:`,r)}},setMonth:async n=>{t({currentMonth:n});const r=e();(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&(console.log(`Month ${n} data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{console.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}console.log(`Fetching data for user: ${i.id}, month: ${n.currentMonth}`);const[a,o,c]=await Promise.all([ri.getEnvelopes(i.id),ri.getTransactions(i.id),ri.getMonthData(i.id,n.currentMonth)]);t({envelopes:a,transactions:o,incomeSources:{...n.incomeSources,[n.currentMonth]:c.incomeSources},allocations:{...n.allocations,[n.currentMonth]:c.allocations},isLoading:!1,error:null}),console.log(` BudgetStore initialized: ${a.length} envelopes, ${o.length} transactions, ${c.incomeSources.length} income sources, ${c.allocations.length} allocations`)}catch(r){console.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},addEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...n,userId:i.id},o=await ri.createEnvelope(a);return t(c=>c.envelopes.some(f=>f.id===o.id)?{isLoading:!1}:{envelopes:[...c.envelopes,o],isLoading:!1}),console.log(" Added envelope:",o.id),o.id}catch(r){throw console.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await ri.updateEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.map(o=>o.id===n.id?n:o),isLoading:!1})),console.log(" Updated envelope:",n.id)}catch(r){throw console.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await ri.deleteEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.filter(o=>o.id!==n),transactions:a.transactions.filter(o=>o.envelopeId!==n),isLoading:!1})),console.log(" Deleted envelope:",n)}catch(r){throw console.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((f,h)=>{i.set(f,h)});const a=r.envelopes.map(f=>{if(!i.has(f.id))return f;const h=i.get(f.id);return f.orderIndex===h?f:{...f,orderIndex:h}}),o=a.filter((f,h)=>f!==r.envelopes[h]);if(!o.length){t({isLoading:!1});return}const u=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!u)throw new Error("No authenticated user found");await ri.reorderEnvelopes(u.id,o),t({envelopes:a,isLoading:!1}),console.log(" Reordered envelopes")}catch(r){throw console.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},addTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),o=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...n,userId:i.id,month:o},u=await ri.createTransaction(c);t(f=>f.transactions.some(g=>g.id===u.id)?{isLoading:!1}:{transactions:[...f.transactions,u],isLoading:!1}),console.log(" Added transaction:",u.id)}catch(r){throw console.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),o=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...n,month:o};await ri.updateTransaction(i.id,c),t(u=>({transactions:u.transactions.map(f=>f.id===n.id?c:f),isLoading:!1})),console.log(" Updated transaction:",n.id)}catch(r){throw console.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await ri.deleteTransaction(i.id,n),t(a=>({transactions:a.transactions.filter(o=>o.id!==n),isLoading:!1})),console.log(" Deleted transaction:",n)}catch(r){throw console.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{await e().updateTransaction(n)},transferFunds:async(n,r,i,a,o)=>{try{const c=o?typeof o=="string"?o:o.toISOString():new Date().toISOString(),u=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(f=>f.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:c,type:"Expense",transferId:u,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(f=>f.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:c,type:"Income",transferId:u,reconciled:!1}),console.log(" Transfer completed")}catch(c){throw console.error(" transferFunds failed:",c),c}},fetchData:async()=>{await e().init()},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(f=>f.id===n);if(!a)throw new Error("Envelope not found");t(f=>({envelopes:f.envelopes.map(h=>h.id===n?{...h,name:r}:h),isLoading:!0}));const c=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!c)throw new Error("No authenticated user found");const u={...a,name:r};await ri.updateEnvelope(c.id,u),t({isLoading:!1}),console.log(" Renamed envelope:",n)}catch(i){throw console.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(o=>o.id===n);if(!a)return console.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const o=i.transactions.filter(g=>g.envelopeId===n),c=o.filter(g=>g.type==="Expense"),u=o.filter(g=>g.type==="Income"),f=c.reduce((g,m)=>g+(m.amount||0),0);return u.reduce((g,m)=>g+(m.amount||0),0)-f}if(r){const o=i.transactions.filter(g=>g.envelopeId===n&&g.month===r),c=o.filter(g=>g.type==="Expense"),u=o.filter(g=>g.type==="Income"),f=c.reduce((g,m)=>g+(m.amount||0),0);return u.reduce((g,m)=>g+(m.amount||0),0)-f}return console.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0},resetData:async()=>{console.log(" Resetting all data"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null})},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");return n.envelopes&&Array.isArray(n.envelopes)&&t(r=>({envelopes:n.envelopes,transactions:r.transactions})),n.transactions&&Array.isArray(n.transactions)&&t(r=>({envelopes:r.envelopes,transactions:n.transactions})),t({isLoading:!1}),{success:!0,message:"Data imported successfully"}}catch(r){return console.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,userId:n.userId??r.appSettings?.userId};t({appSettings:i,isLoading:!1}),console.log(" Updated app settings")}catch(r){throw console.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;t({appSettings:{id:"default",theme:"system",enableMoveableReorder:!0}}),console.log(" Initialized app settings")}catch(n){throw console.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"}),n}},syncData:async()=>{await e().init()},testConnectivity:async()=>{console.log(" Testing connectivity");try{t({testingConnectivity:!0}),await e().init(),t({testingConnectivity:!1,isOnline:!0}),console.log(" Connectivity test passed")}catch(n){console.error(" Connectivity test failed:",n),t({testingConnectivity:!1,isOnline:!1,error:n instanceof Error?n.message:"Connectivity test failed"})}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const a=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().envelopes.find(u=>u.id===n&&u.isPiggybank);if(!o)throw new Error("Piggybank not found");const c={...o,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:o.piggybankConfig?.targetAmount,color:o.piggybankConfig?.color,icon:o.piggybankConfig?.icon,paused:o.piggybankConfig?.paused??!1}};if(console.log(" Updating envelope in Firestore:",c),await ri.updateEnvelope(a.id,c),console.log(" Envelope updated successfully"),t(u=>({envelopes:u.envelopes.map(f=>f.id===n?c:f),isLoading:!1})),!o.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(f=>f.envelopeId===n&&f.description==="Monthly Budget Allocation")||console.warn(" Monthly allocation transaction not found after update")},1e3)}catch(u){console.error(" Failed to update monthly budget allocation:",u)}console.log(" Piggybank contribution updated successfully")}catch(i){throw console.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}},addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");console.log(" Adding income source:",{month:n,source:r});const{MonthlyBudgetService:o}=await pn(async()=>{const{MonthlyBudgetService:f}=await Promise.resolve().then(()=>Dg);return{MonthlyBudgetService:f}},void 0),u=await o.getInstance().createIncomeSource({...r,userId:a.id,month:n});t(f=>{const h=f.incomeSources[n]||[];return h.some(m=>m.id===u.id)?{isLoading:!1}:{incomeSources:{...f.incomeSources,[n]:[...h,u]},isLoading:!1}}),console.log(" Added income source:",u.id)}catch(i){throw console.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating income source:",{month:n,sourceId:r.id}),t(i=>({incomeSources:{...i.incomeSources,[n]:i.incomeSources[n]?.map(a=>a.id===r.id?{...r,updatedAt:new Date().toISOString()}:a)||[]},isLoading:!1})),console.log(" Updated income source:",r.id)}catch(i){throw console.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Deleting income source:",{month:n,sourceId:r}),t(i=>({incomeSources:{...i.incomeSources,[n]:i.incomeSources[n]?.filter(a=>a.id!==r)||[]},isLoading:!1})),console.log(" Deleted income source:",r)}catch(i){throw console.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(_=>_.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");console.log(" Copying allocations from previous month:",n);const[a,o]=n.split("-").map(Number);let c=a,u=o-1;u<1&&(c=a-1,u=12);const f=`${c}-${String(u).padStart(2,"0")}`,h=e().incomeSources[f]||[];if(console.log(` Found ${h.length} income sources from ${f}`),h.length>0){for(const _ of h){const{id:E,...S}=_;await e().addIncomeSource(n,S)}console.log(` Copied ${h.length} income sources to ${n}`)}const g=e().allocations[f]||[];console.log(` Found ${g.length} allocations from ${f}`);const m=g.filter(_=>!e().envelopes.find(S=>S.id===_.envelopeId)?.isPiggybank);if(m.length>0){for(const _ of m)await e().createEnvelopeAllocation({envelopeId:_.envelopeId,budgetedAmount:_.budgetedAmount,userId:i.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});console.log(` Copied ${m.length} regular allocations to ${n}`)}const x=e().envelopes.filter(_=>_.isPiggybank);console.log(` Processing ${x.length} piggybanks for ${n}`);for(const _ of x){const E=_.piggybankConfig?.monthlyContribution,S=_.piggybankConfig?.paused??!1;if(!S&&E&&E>0)try{console.log(` Setting piggybank allocation for ${_.name}: ${E}`),await e().setEnvelopeAllocation(_.id,E)}catch(T){console.error(` Failed to set allocation for piggybank ${_.name}:`,T)}else console.log(` Skipping piggybank ${_.name} (paused=${S}, contribution=${E})`)}t({isLoading:!1}),console.log(` Complete monthly setup copied to ${n}`)}catch(r){throw console.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().currentMonth,c=e().envelopes.find(h=>h.id===n),u=c?.isPiggybank;console.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${o}, isPiggybank=${u}`);const f=e().allocations[o]?.find(h=>h.envelopeId===n);if(f?await e().updateEnvelopeAllocation(f.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:a.id,month:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),u&&r>0&&!c?.piggybankConfig?.paused&&!e().transactions.find(g=>g.envelopeId===n&&g.month===o&&g.description==="Monthly Allocation")){const g={description:"Monthly Allocation",amount:r,envelopeId:n,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(g)}if(!u&&r>0){const h=e().transactions.find(g=>g.envelopeId===n&&g.month===o&&g.description==="Monthly Budget Allocation");if(h)await e().updateTransaction({...h,amount:r});else{const g={description:"Monthly Budget Allocation",amount:r,envelopeId:n,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(g)}}console.log(" Envelope allocation set successfully")}catch(i){throw console.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const i=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=e().currentMonth,{MonthlyBudgetService:o}=await pn(async()=>{const{MonthlyBudgetService:f}=await Promise.resolve().then(()=>Dg);return{MonthlyBudgetService:f}},void 0),u=await o.getInstance().createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:i.id,month:a});t(f=>{const h=f.allocations[a]||[];return h.some(m=>m.id===u.id)?{isLoading:!1}:{allocations:{...f.allocations,[a]:[...h,u]},isLoading:!1}}),console.log(" Created envelope allocation:",u.id)}catch(r){throw console.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{console.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,o=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(m=>m.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");const c=e().allocations[i]?.find(m=>m.id===n);if(!c)throw new Error("Allocation not found");const u=e().envelopes.find(m=>m.id===c.envelopeId),f=u?.isPiggybank,{MonthlyBudgetService:h}=await pn(async()=>{const{MonthlyBudgetService:m}=await Promise.resolve().then(()=>Dg);return{MonthlyBudgetService:m}},void 0);if(await h.getInstance().updateEnvelopeAllocation(o.id,n,{budgetedAmount:r.budgetedAmount?.toString()}),t(m=>({allocations:{...m.allocations,[i]:m.allocations[i]?.map(x=>x.id===n?{...x,...r,updatedAt:new Date().toISOString()}:x)||[]},isLoading:!1})),f&&r.budgetedAmount!==void 0){const m=e().transactions.find(x=>x.envelopeId===c.envelopeId&&x.month===i&&x.description==="Monthly Allocation");m?r.budgetedAmount>0&&!u?.piggybankConfig?.paused?await e().updateTransaction({...m,amount:r.budgetedAmount}):(r.budgetedAmount===0||u?.piggybankConfig?.paused)&&await e().deleteTransaction(m.id):r.budgetedAmount>0&&!u?.piggybankConfig?.paused&&await e().addTransaction({description:"Monthly Allocation",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!f&&r.budgetedAmount!==void 0){const m=e().transactions.find(x=>x.envelopeId===c.envelopeId&&x.month===i&&x.description==="Monthly Budget Allocation");m?r.budgetedAmount>0?await e().updateTransaction({...m,amount:r.budgetedAmount}):r.budgetedAmount===0&&await e().deleteTransaction(m.id):r.budgetedAmount>0&&await e().addTransaction({description:"Monthly Budget Allocation",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}console.log(" Updated envelope allocation:",n)}catch(i){throw console.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{console.log(" Deleting envelope allocation:",n);const r=e().currentMonth,a=(await pn(()=>Promise.resolve().then(()=>ir),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const{MonthlyBudgetService:o}=await pn(async()=>{const{MonthlyBudgetService:u}=await Promise.resolve().then(()=>Dg);return{MonthlyBudgetService:u}},void 0);await o.getInstance().deleteEnvelopeAllocation(a.id,n),t(u=>({allocations:{...u.allocations,[r]:u.allocations[r]?.filter(f=>f.id!==n)||[]},isLoading:!1})),console.log(" Deleted envelope allocation:",n)}catch(r){throw console.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((u,f)=>u+f.budgetedAmount,0);return i.reduce((u,f)=>u+f.amount,0)-a}catch(n){throw console.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),console.log(" Online status updated:",n)}catch(n){console.error(" Failed to update online status:",n)}},handleUserLogout:()=>{console.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],incomeSources:{},allocations:{},isLoading:!1,error:null})}}),{name:"budget-storage"})));EQ({useBudgetStore:Qn,useAuthStore:Di,getCurrentUserId:SQ});const rc=P_((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},6e3)},hideToast:()=>{t({isVisible:!1})}})),TQ=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},AQ=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,pendingSync:a,syncData:o,testingConnectivity:c,reorderEnvelopes:u}=Qn(),{currentUser:f}=Di(),{currentMonth:h,incomeSources:g,allocations:m,deleteIncomeSource:x,setEnvelopeAllocation:_,copyPreviousMonthAllocations:E,isLoading:S}=Qn(),{showToast:T}=rc(),[D,k]=G.useState(!1),j=G.useRef(null),[B,z]=G.useState(!1),C=!B||r||S,[A,N]=G.useState([]),O=G.useRef([]),L=G.useCallback(Y=>{if(t.find(he=>he.id===Y)?.isPiggybank){const he=Qn.getState().getEnvelopeBalance(Y);return new Ll(he)}const ae=Qn.getState().getEnvelopeBalance(Y,h);return new Ll(ae)},[t,h]),V=t.filter(Y=>{if(!Y.isPiggybank||!Y.isActive)return!1;if(Y.createdAt)try{const ne=TQ(Y.createdAt);if(!ne)return console.error(` Invalid creation date for piggybank ${Y.name}:`,Y.createdAt),!1;const ae=`${ne.getFullYear()}-${String(ne.getMonth()+1).padStart(2,"0")}`;return h>=ae}catch(ne){return console.error(` Error processing piggybank ${Y.name}:`,ne,{createdAt:Y.createdAt,typeofCreatedAt:typeof Y.createdAt}),!1}return!0}),M=A;G.useEffect(()=>(j.current=setTimeout(()=>{k(!0)},8e3),n(),z(!0),()=>{j.current&&clearTimeout(j.current)}),[]),G.useEffect(()=>{B&&!r&&!S&&(k(!1),j.current&&clearTimeout(j.current))},[B,r,S]),G.useEffect(()=>{const Y=t.filter(ne=>!ne.isPiggybank&&ne.isActive!==!1).sort((ne,ae)=>{const he=ne.orderIndex??0,ie=ae.orderIndex??0;return he-ie});N(Y),O.current=Y},[t,m,h]);const J=(g[h]||[]).reduce((Y,ne)=>Y+ne.amount,0),Q=(m[h]||[]).filter(Y=>M.some(ne=>ne.id===Y.envelopeId)||V.some(ne=>ne.id===Y.envelopeId)).reduce((Y,ne)=>Y+ne.budgetedAmount,0),$=J-Q,H=G.useCallback(async Y=>{if(!Y.length)return;const ne=Y.map(ae=>ae.id);try{await u(ne)}catch(ae){console.error("Failed to persist envelope order:",ae),T("Failed to save envelope order","error")}},[u,T]),ee=G.useCallback(async Y=>{await H(Y)},[H]),te=G.useCallback(Y=>{x(h,Y.id).catch(console.error),T(`Deleted "${Y.name}"`,"neutral")},[x,h,T]),ue=G.useCallback(async Y=>{try{const ne=Y||h;console.log(" Copying to month:",ne),await E(ne),T("Previous month budget copied","success")}catch(ne){console.error("Error copying previous month:",ne),T("Failed to copy previous month","error")}},[E,T,h]),U=G.useCallback(async()=>{if(!f||!h){T("Cannot clear data: not logged in or no month selected","error");return}try{await JO.clearMonthData(f.id,h),await n(),T(`"${h}" budget cleared successfully`,"success")}catch(Y){console.error("Error clearing month data:",Y),T("Failed to clear month data","error")}},[f,h,n,T]);return{visibleEnvelopes:M,piggybanks:V,incomeSources:g,availableToBudget:$,currentMonth:h,allocations:m,transactions:e,isLoading:r,isInitialLoading:C,isOnline:i,showTimeoutMessage:D,pendingSync:a,getEnvelopeBalance:L,fetchData:n,syncData:o,reorderEnvelopes:ee,deleteIncomeSource:te,clearMonthData:U,copyFromPreviousMonth:ue,setEnvelopeAllocation:_,testingConnectivity:c,localOrderRef:O,setLocalEnvelopes:N}},CQ=({currentMonth:t,onMonthChange:e})=>{const[n,r]=t.split("-").map(Number),a=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1],o=()=>{let f=n,h=r-1;h<1&&(f=n-1,h=12);const g=`${f}-${h.toString().padStart(2,"0")}`;e(g)},c=()=>{let f=n,h=r+1;h>12&&(f=n+1,h=1);const g=`${f}-${h.toString().padStart(2,"0")}`;e(g)},u=()=>{const f=new Date,h=`${f.getFullYear()}-${(f.getMonth()+1).toString().padStart(2,"0")}`;e(h)};return y.jsx("div",{className:"py-1.5",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{onClick:o,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:y.jsx(P5,{size:20})}),y.jsx("div",{className:"flex-1 text-center",children:y.jsxs("button",{onClick:u,className:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Click to go to current month",children:[a," ",n]})}),y.jsx("button",{onClick:c,className:"p-2 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:y.jsx(_l,{size:20})})]})})},RQ=({amount:t,totalIncome:e,totalAllocated:n,isLoading:r=!1,variant:i="default"})=>{const a=typeof n=="number"?n:parseFloat(n)||0,o=typeof e=="number"?e:parseFloat(e)||0,c=typeof t=="number"?t:parseFloat(t)||0,u=o>0?a/o*100:0,f=c>0,h=Math.abs(c)<.01,g=c<0,m=h?100:Math.min(u,100),x=g?"bg-red-500":"bg-green-500",_=h,E=g,S=f,D=_?{icon:Qg,color:"text-green-600 dark:text-emerald-400",bgColor:"bg-green-50 dark:bg-emerald-900/20",borderColor:"border-green-200 dark:border-emerald-800",title:"Budget Balanced!",subtitle:"Every dollar has a job"}:E?{icon:PV,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",title:"Over Budget",subtitle:"Reduce allocations or add income"}:{icon:NV,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",title:"Available to Budget",subtitle:"Assign money to envelopes"};return r?y.jsxs("div",{className:i==="header"?"py-1.5 px-2":"bg-gray-50 dark:bg-zinc-900 rounded-2xl p-6 border border-gray-200 dark:border-zinc-800 animate-pulse",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-32"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20"})]}),y.jsx("div",{className:"h-2 bg-gray-200 dark:bg-zinc-700 rounded"})]}):y.jsxs("div",{className:i==="header"?"py-1.5 px-2":`rounded-2xl p-6 border ${D.bgColor} ${D.borderColor}`,children:[y.jsxs("div",{className:i==="header"?"flex items-center gap-3 mb-0.5":"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex-shrink-0 text-center",children:[y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Assigned:"}),y.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",a.toFixed(2)]})]}),i==="header"&&y.jsx("div",{className:"flex-1 flex justify-center items-center",children:h?y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400 font-medium",children:"Perfect! Every dollar has a job "})}):g?y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"You're not in Congress!"})}):y.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full",children:y.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${x}`,style:{width:`${m}%`}})})}),y.jsx("div",{className:"flex-shrink-0 text-center",children:f?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Left to Budget:"}),y.jsxs("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["$",c.toFixed(2)]})]}):h?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-green-600 dark:text-emerald-400",children:"All Budgeted!"}),y.jsx("div",{className:"text-base font-semibold text-green-600 dark:text-emerald-400",children:"$0.00"})]}):y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:"Over Budget:"}),y.jsxs("div",{className:"text-base font-semibold text-red-600 dark:text-red-400",children:["-$",Math.abs(c).toFixed(2)]})]})})]}),i!=="header"&&!_&&o>0&&y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx("span",{children:"Allocated"}),y.jsxs("span",{children:[u.toFixed(0),"% of income"]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:y.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${E?"bg-red-500":S?"bg-blue-500":"bg-green-500"}`,style:{width:`${Math.min(u,100)}%`}})}),y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-500",children:[y.jsxs("span",{children:["$",a.toFixed(2)," allocated"]}),y.jsxs("span",{children:["$",o.toFixed(2)," income"]})]})]}),i!=="header"&&y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-zinc-700",children:y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",o.toFixed(2)]}),y.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Total Income"})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["$",a.toFixed(2)]}),y.jsx("div",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Allocated"})]})]})})]})},DQ=()=>{const[t,e]=G.useState(!1),n=G.useRef(null),{currentUser:r,logout:i}=Di(),{handleUserLogout:a}=Qn(),o=La();G.useEffect(()=>{const f=h=>{n.current&&!n.current.contains(h.target)&&e(!1)};if(t)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[t]);const c=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{a(),i(),o("/"),e(!1)}catch(f){console.error("Logout failed:",f)}};if(!r)return null;const u=r.displayName?.charAt(0)?.toUpperCase()||r.email?.charAt(0)?.toUpperCase()||"U";return y.jsxs("div",{className:"relative",ref:n,children:[y.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",children:[y.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:u}),y.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.displayName||r.email?.split("@")[0]||"User"}),y.jsx(PD,{size:16,className:`text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`})]}),t&&y.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-zinc-900 rounded-xl shadow-lg border border-gray-200 dark:border-zinc-800 overflow-hidden z-50",children:[y.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-zinc-800",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:u}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:r.displayName||r.email?.split("@")[0]||"User"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-400 truncate",children:r.email})]})]})}),y.jsxs("div",{className:"py-1",children:[y.jsxs("button",{onClick:()=>{o("/settings"),e(!1)},className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[y.jsx(jD,{size:18,className:"text-gray-500 dark:text-gray-400"}),"Settings"]}),y.jsxs("button",{onClick:c,className:"w-full px-4 py-2.5 flex items-center gap-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[y.jsx(bV,{size:18}),"Log Out"]})]})]})]})},Ih=({children:t,onDelete:e,threshold:n=-100})=>{const r=AU(),[i,a]=G.useState(!1),o=G.useRef(0),c=()=>{a(!0),o.current=Date.now()},u=async(f,h)=>{const g=h.offset.x,m=h.velocity.x;if(setTimeout(()=>a(!1),100),g<n||g<-50&&m<-500){const x=e();x===!1?r.start({x:0}):x instanceof Promise&&x.then(_=>{_===!1&&r.start({x:0})})}else r.start({x:0})};return y.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[y.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:y.jsx(jb,{className:"text-white w-6 h-6"})}),y.jsx(Go.div,{drag:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:r,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${i?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:i?"none":"auto"},children:t})]})},nP=({message:t="Loading your budget...",showTimeout:e=!1})=>y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"relative",children:[y.jsx(Ml,{size:48,className:"text-blue-500 animate-spin"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(px,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),y.jsxs("div",{className:"text-center space-y-3",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),y.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&y.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:y.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),y.jsx("div",{className:"mt-8 w-full max-w-md",children:y.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),kQ=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:o}=Qn(),{showToast:c}=rc(),[u,f]=G.useState(""),[h,g]=G.useState(""),[m,x]=G.useState(!1);G.useEffect(()=>{if(!t)return;const E=window.setTimeout(()=>{n==="edit"&&r?(f(r.name),g(r.amount.toString())):(f(""),g(""))},0);return()=>window.clearTimeout(E)},[t,n,r]);const _=async E=>{if(E.preventDefault(),!u.trim()||!h||parseFloat(h)<=0){c("Please fill in all required fields with valid values","error");return}x(!0);try{if(n==="add")await i(o,{name:u.trim(),amount:parseFloat(h),month:o,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),c("Income source added successfully","success");else{if(!r){c("Error: No income source to edit","error");return}await a(o,{...r,name:u.trim(),amount:parseFloat(h),updatedAt:new Date().toISOString()}),c(`Updated "${u.trim()}" income source`,"success")}e()}catch(S){console.error("Error saving income source:",S),c("Failed to save income source. Please try again.","error")}finally{x(!1)}};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),y.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),y.jsx("input",{type:"text",value:u,onChange:E=>f(E.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",value:h,onChange:E=>g(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:m||!u.trim()||!h||parseFloat(h)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})}):null},NQ=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,isLoading:u=!1})=>{const[f,h]=G.useState(""),[g,m]=G.useState("confirm"),x=S=>{const[T,D]=S.split("-");return new Date(parseInt(T),parseInt(D)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},_=()=>{g==="confirm"?m("type"):g==="type"&&f==="START FRESH"&&n()},E=()=>{m("confirm"),h(""),e()};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",x(r)]}),y.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:u,children:""})]}),y.jsx("div",{className:"p-6 space-y-4",children:g==="confirm"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),y.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:y.jsxs("ul",{className:"space-y-1",children:[y.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),y.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]})]})})]})]})}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[y.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data."]})})]})}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"You can undo this action within 30 seconds if you change your mind."})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"text-center",children:[y.jsxs("p",{className:"text-sm text-gray-900 dark:text-white mb-4",children:["Type ",y.jsx("strong",{children:"START FRESH"})," to confirm:"]}),y.jsx("input",{type:"text",value:f,onChange:S=>h(S.target.value),placeholder:"START FRESH",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent dark:bg-zinc-800 dark:text-white text-center font-mono text-lg",autoFocus:!0})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500 text-center",children:"This action cannot be undone after 30 seconds"})]})}),y.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{type:"button",onClick:E,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:u,children:"Cancel"}),y.jsx("button",{type:"button",onClick:_,disabled:u||g==="type"&&f!=="START FRESH",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Clearing...":g==="confirm"?"Continue":"Start Fresh"})]})]})}):null},IQ=({currentMonth:t,onCopy:e,onDismiss:n,isLoading:r=!1})=>{const i=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},a=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),i(`${f}-${h.toString().padStart(2,"0")}`)};return y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-6",children:[y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx(W5,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100",children:"Copy Previous Month?"}),y.jsxs("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:["Would you like to copy your budget setup from ",a(t)," to get started with ",i(t),"?"]}),y.jsx("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:"This will copy your income sources and envelope allocations, but not transactions."})]})]}),y.jsx("button",{onClick:n,className:"flex-shrink-0 text-blue-400 hover:text-blue-600 dark:hover:text-blue-300 transition-colors","aria-label":"Dismiss",children:y.jsx(Fm,{className:"h-5 w-5"})})]}),y.jsxs("div",{className:"mt-4 flex space-x-3",children:[y.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-white dark:bg-zinc-800 border border-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-zinc-700 transition-colors",disabled:r,children:"Start Fresh"}),y.jsx("button",{onClick:e,disabled:r,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Copying...":"Copy Previous Month"})]})]})},MQ=({piggybank:t,balance:e,onNavigate:n})=>{const r=Qn(O=>O.updatePiggybankContribution),i=rc(O=>O.showToast),a=t.piggybankConfig?.targetAmount,o=t.piggybankConfig?.monthlyContribution??0,c=t.piggybankConfig?.color||"#3B82F6",u=t.piggybankConfig?.paused||!1;console.log(" PiggybankListItem data:",{piggybankId:t.id,piggybankName:t.name,monthlyContribution:o,targetAmount:a,isPaused:u,piggybankConfig:t.piggybankConfig});const f=typeof e=="number"?e:e.toNumber(),h=(O,L=1)=>{const V=O.replace("#",""),M=parseInt(V,16),J=M>>16&255,Q=M>>8&255,$=M&255;return`rgba(${J}, ${Q}, ${$}, ${L})`},g=`linear-gradient(135deg, ${h(c,.14)} 0%, ${h(c,.05)} 100%)`,m=h(c,.4),[x,_]=G.useState(!1),[E,S]=G.useState(o?o.toFixed(2):"0.00"),[T,D]=G.useState(!1),k=G.useRef(null),j=a&&a>0?Math.min(f/a*100,100):0,B=a&&f>=a;G.useEffect(()=>{x||S(o?o.toFixed(2):"0.00")},[o,x]),G.useEffect(()=>{x&&k.current&&(k.current.focus(),k.current.select())},[x]);const z=O=>{O.stopPropagation(),("touches"in O||O.type.startsWith("touch"))&&O.preventDefault(),!T&&(S(o?o.toFixed(2):"0.00"),_(!0))},C=()=>{_(!1),S(o?o.toFixed(2):"0.00")},A=async()=>{if(!x||T)return;const O=parseFloat(E);if(Number.isNaN(O)||O<0){i("Enter a valid contribution amount","error");return}if(O===o){_(!1);return}D(!0);try{console.log(" Calling updatePiggybankContribution:",{piggybankId:t.id,oldContribution:o,newContribution:O}),await r(t.id,O),console.log(" updatePiggybankContribution completed successfully"),i("Monthly contribution updated","success"),S(O.toFixed(2)),_(!1)}catch(L){console.error("Failed to update piggybank contribution",L),i("Failed to update contribution","error")}finally{D(!1)}},N=O=>{O.key==="Enter"?(O.preventDefault(),A()):O.key==="Escape"&&(O.preventDefault(),C())};return y.jsxs("div",{onClick:()=>n(t.id),className:"rounded-xl p-4 border transition-all cursor-pointer shadow-sm hover:shadow-md",style:{background:g,borderColor:m},children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${c}20`},children:y.jsx(Mf,{size:20,style:{color:c}})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),B&&y.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Goal Reached!"})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["$",f.toFixed(2)]}),a&&y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["of $",a.toFixed(2)]})]})]}),a&&a>0&&y.jsxs("div",{className:"mb-3",children:[y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800 rounded-full h-2 overflow-hidden",children:y.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${j}%`,backgroundColor:c}})}),y.jsxs("div",{className:"flex justify-between items-center mt-1",children:[y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:[j.toFixed(0),"% complete"]}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["$",(a-f).toFixed(2)," to go"]}),y.jsx("span",{className:"ml-2 px-2 py-0.5 text-[11px] font-semibold rounded-full uppercase tracking-wide",style:{backgroundColor:h(c,.15),color:c},children:"Piggybank"})]})]}),y.jsx("div",{className:"mt-2",children:u?y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx(wV,{size:14,className:"text-orange-500"}),y.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Paused"})]}):y.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-zinc-400",children:[y.jsx(VV,{size:14,style:{color:c}}),x?y.jsxs("form",{onSubmit:O=>{O.preventDefault(),A()},className:"flex items-center gap-2",children:[y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{ref:k,type:"number",min:"0",step:"0.01",value:E,onChange:O=>S(O.target.value),onBlur:A,onKeyDown:N,disabled:T,autoFocus:!0,className:"w-28 pl-6 pr-3 py-1.5 rounded-lg border border-gray-300 dark:border-zinc-600 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]}),T&&y.jsx(fV,{size:16,className:"animate-spin text-gray-400"})]}):y.jsxs("div",{onClick:z,onTouchEnd:z,className:"font-medium text-gray-900 dark:text-white hover:underline cursor-pointer",children:["$",o.toFixed(2),"/month"]})]})})]})},nf=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${e})`},OQ=12,PQ=(t,e,n)=>Math.min(Math.max(t,e),n),jQ=({env:t,budgetedAmount:e,remainingBalance:n,editingEnvelopeId:r,setEditingEnvelopeId:i,editingAmount:a,setEditingAmount:o,handleBudgetSave:c,navigate:u,inputRef:f,transactions:h,currentMonth:g,setMoveableRef:m,isReorderingActive:x,activelyDraggingId:_,onItemDragStart:E,onMoveUp:S,onMoveDown:T,isFirst:D,isLast:k,isReorderUnlocked:j})=>{const B=!!t.isPiggybank,z=t.piggybankConfig?.color||"#3B82F6",C=B?`linear-gradient(135deg, ${nf(z,.18)} 0%, ${nf(z,.08)} 100%)`:void 0,A=B?nf(z,.5):void 0,N=G.useRef(null),[O,L]=G.useState(!1),V=h.filter(U=>U.envelopeId===t.id&&U.month===g),M=V.filter(U=>U.type==="Expense"),J=V.filter(U=>U.type==="Income"),Q=M.reduce((U,Y)=>U+(Y.amount||0),0),$=J.reduce((U,Y)=>U+(Y.amount||0),0),H=Math.max(0,Q/$*100),ee=U=>{if(O||x){U.preventDefault(),U.stopPropagation();return}if(r===t.id){U.preventDefault(),U.stopPropagation();return}u(`/envelope/${t.id}`)};G.useEffect(()=>{_&&_!==t.id&&L(!1)},[_,t.id]),G.useEffect(()=>{_===t.id&&(L(!0),E(t.id))},[_,t.id,E]),G.useEffect(()=>{if(!_&&O){const U=setTimeout(()=>{L(!1)},300);return()=>clearTimeout(U)}},[_,O]);const te=y.jsxs("div",{className:"flex items-center gap-2 w-full",children:[j&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("button",{onClick:U=>{U.stopPropagation(),S()},disabled:D,className:`p-1 rounded transition-colors ${D?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move up","aria-label":"Move envelope up",children:y.jsx(z5,{size:18})}),y.jsx("button",{onClick:U=>{U.stopPropagation(),T()},disabled:k,className:`p-1 rounded transition-colors ${k?"text-gray-300 dark:text-zinc-700 cursor-not-allowed":"text-gray-500 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20"}`,title:"Move down","aria-label":"Move envelope down",children:y.jsx(PD,{size:18})})]}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[B&&y.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center border",style:{borderColor:nf(z,.4),backgroundColor:nf(z,.15),color:z},children:y.jsx(Mf,{size:16})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),B&&y.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:z},children:"Piggybank"})]})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center space-x-4",onPointerDown:U=>U.stopPropagation(),children:r===t.id?y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsx("form",{onSubmit:U=>{U.preventDefault(),c()},children:y.jsx("input",{ref:f,type:"number",value:a,onChange:U=>o(U.target.value),onBlur:c,className:"w-24 px-2 py-1 text-sm border rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white",step:"0.01",autoFocus:!0})})]}):y.jsxs("div",{onClick:U=>{U.preventDefault(),U.stopPropagation(),i(t.id),o(e.toString())},onTouchEnd:U=>{U.preventDefault(),U.stopPropagation(),i(t.id),o(e.toString())},className:"flex items-center space-x-1 hover:bg-gray-200 dark:hover:bg-zinc-700 px-3 py-2 rounded transition-colors cursor-pointer js-budget-target",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",e.toFixed(2)]})]})}),y.jsxs("div",{className:"text-right",children:[y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 block",children:"Remaining"}),y.jsxs("span",{className:`font-bold ${(typeof n=="number"?n:n.toNumber())<0||100-H<=5?"text-red-500":H>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]})]})]}),e>0&&y.jsx("div",{className:"mt-3",onClick:U=>U.stopPropagation(),children:y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-zinc-400 mb-1",children:[y.jsx("span",{children:"Budget Used"}),y.jsxs("span",{children:[H.toFixed(0),"%"]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2 overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-H<=5?"bg-red-500":H>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-H,2)}%`}})})]})})]})]}),ue=_===t.id;return y.jsx(Go.div,{layout:!ue,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:U=>{m(t.id)(U),N.current=U},onClick:ee,style:{boxShadow:"0 1px 2px rgba(15,23,42,0.08)",background:C,borderColor:A,cursor:"pointer"},className:`p-4 rounded-xl active:scale-[0.99] transition-all select-none border ${B?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:te})},VQ=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:o,isLoading:c,isInitialLoading:u,isOnline:f,showTimeoutMessage:h,pendingSync:g,getEnvelopeBalance:m,syncData:x,reorderEnvelopes:_,deleteIncomeSource:E,clearMonthData:S,copyFromPreviousMonth:T,setEnvelopeAllocation:D,testingConnectivity:k,localOrderRef:j,setLocalEnvelopes:B}=AQ(),{setMonth:z}=Qn(),C=La(),[A,N]=G.useState(!1),[O,L]=G.useState("add"),[V,M]=G.useState(null),[J,Q]=G.useState(!1),[$,H]=G.useState(!1),[ee,te]=G.useState(!1),ue=G.useRef(null),[U,Y]=G.useState(null),[ne,ae]=G.useState(""),he=G.useRef(null),[ie,me]=G.useState(()=>localStorage.getItem("envelopeReorderUnlocked")==="true");G.useEffect(()=>{localStorage.setItem("envelopeReorderUnlocked",ie.toString())},[ie]),G.useEffect(()=>{if(!u&&!c){const je=setTimeout(()=>{const He=(n[i]||[]).length===0&&(a[i]||[]).length===0;console.log(" Copy prompt check:",{currentMonth:i,hasIncome:(n[i]||[]).length>0,hasAllocations:(a[i]||[]).length>0,showPrompt:He}),te(He)},500);return()=>clearTimeout(je)}},[u,c,n,a,i]),G.useEffect(()=>{U&&he.current&&(he.current.focus(),he.current.select())},[U]);const Te=G.useCallback(je=>He=>{He?Ae.current[je]=He:delete Ae.current[je]},[]),Ae=G.useRef({}),De=G.useRef({}),[be,Ee]=G.useState(null),$e=G.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0}),[Pe,ze]=G.useState(!1),Me=G.useRef(null),et=G.useRef(0),dt=G.useCallback(()=>ze(!0),[]),Oe=G.useCallback(()=>{ze(!1),j.current.length&&_(j.current)},[_]),qe=G.useCallback(je=>{},[]),Nt=G.useCallback(je=>{U!==je&&C(`/envelope/${je}`)},[U,C]);G.useEffect(()=>{const je=()=>{Object.values(De.current).forEach(Lt=>Lt?.destroy()),De.current={}};if(!t.length)return;const He=()=>{ie&&t.forEach(Lt=>{const Wt=Ae.current[Lt.id];if(!Wt)return;const yn=De.current[Lt.id];if(yn){yn.target=Wt;return}const Rt=new UG(Me.current,{target:Wt,draggable:ie,throttleDrag:0,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,scalable:!1,resizable:!1,warpable:!1,pinchable:!1,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!1,isDisplayInnerSnapDigit:!1,snapGap:!0,snapDirections:{top:!0,bottom:!0,left:!1,right:!1},elementSnapDirections:{top:!0,bottom:!0,left:!1,right:!1},clickable:!0,preventClickDefault:!1,preventClickEventOnDrag:!0,checkInput:!1,dragArea:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,renderDirections:[]});Rt.on("dragStart",Zn=>{const an=j.current.findIndex(Pt=>Pt.id===Lt.id),We=Zn.target,Et=We.getBoundingClientRect().height+OQ;Ee(Lt.id),$e.current={activeId:Lt.id,startIndex:an,currentIndex:an,itemHeight:Et},We&&(We.style.transition="none",We.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",We.style.zIndex="20"),dt()});let Tt=null;Rt.on("drag",Zn=>{const an=Zn.target;Tt!==null&&cancelAnimationFrame(Tt),Tt=requestAnimationFrame(()=>{const We=$e.current;if(We.activeId!==Lt.id)return;const It=Zn.beforeTranslate[1];an.style.transform=`translateY(${It}px)`,an.style.transition="none";const{itemHeight:Et,startIndex:Pt}=We;if(!Et)return;const Tn=Math.round(It/Et),dn=PQ(Pt+Tn,0,j.current.length-1);dn!==We.currentIndex&&(We.currentIndex=dn,j.current.forEach((ic,Fa)=>{if(ic.id===Lt.id)return;const Dr=Ae.current[ic.id];if(!Dr)return;let oi=0;Pt<dn?Fa>Pt&&Fa<=dn&&(oi=-Et):Pt>dn&&Fa>=dn&&Fa<Pt&&(oi=Et),Dr.style.transform=oi?`translateY(${oi}px)`:"",Dr.style.transition="transform 0.2s ease"})),Tt=null})}),Rt.on("dragEnd",Zn=>{Tt!==null&&(cancelAnimationFrame(Tt),Tt=null);const an=Zn.target,We=$e.current,{startIndex:It,currentIndex:Et}=We;if(an.style.transform="",an.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",an.style.boxShadow="",j.current.forEach(Pt=>{if(Pt.id===Lt.id)return;const Tn=Ae.current[Pt.id];Tn&&(Tn.style.transform="",Tn.style.transition="")}),It!==Et){const Pt=[...j.current],[Tn]=Pt.splice(It,1);Pt.splice(Et,0,Tn),j.current=Pt,B(Pt)}setTimeout(()=>{an.style.zIndex="",an.style.transition="",Ee(null)},300),$e.current={activeId:null,startIndex:0,currentIndex:0,itemHeight:0},et.current=Date.now(),Oe()}),Rt.on("click",Zn=>{const an=Zn.inputEvent.target;an.closest(".js-budget-target")||an.tagName==="INPUT"||Nt(Lt.id)}),De.current[Lt.id]=Rt})},Ii=window.setTimeout(He,80);return()=>{clearTimeout(Ii),je()}},[t,dt,Oe,Nt,ie]);const vn=async()=>{if(U)try{const je=parseFloat(ne)||0;await D(U,je)}catch(je){console.error("Failed to save budget amount:",je)}finally{Y(null),ae("")}},rn=()=>{L("add"),M(null),N(!0)},ft=je=>{ue.current&&clearTimeout(ue.current),!J&&(L("edit"),M(je),N(!0))},Ot=je=>{ue.current&&clearTimeout(ue.current),Q(!0),E(je),setTimeout(()=>Q(!1),500)},fr=()=>{N(!1),M(null)},hr=()=>{H(!0)},Yr=async()=>{H(!1),await S()},Ns=async()=>{te(!1),await T(i)};return u?y.jsx(nP,{message:h?"Still loading... This is normal on slow connections":"Loading your budget...",showTimeout:h}):y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .moveable-control { display: none !important; }
        .moveable-origin { display: none !important; }
        .moveable-line { display: none !important; }
      `}}),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[y.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"flex items-center gap-2",children:f?c?y.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[y.jsx(Ml,{size:16,className:"animate-spin"}),y.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):g?y.jsxs("button",{onClick:x,className:"flex items-center gap-1 text-orange-500 hover:text-orange-600 transition-colors",title:"Sync pending - tap to sync",children:[y.jsx(Ml,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:"Sync"})]}):y.jsxs("div",{className:"flex items-center gap-1 text-green-500",children:[y.jsx(WV,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:"Online"})]}):y.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[y.jsx(YV,{size:16}),y.jsx("span",{className:"text-sm font-medium",children:k?"Testing...":c?"Saving...":"Offline"})]})}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>me(!ie),className:`transition-colors ${ie?"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300":"text-gray-500 hover:text-gray-600 dark:text-zinc-400 dark:hover:text-zinc-300"}`,title:ie?"Lock envelope order":"Unlock to reorder envelopes",children:ie?y.jsx(gV,{size:22}):y.jsx(vV,{size:22})}),y.jsx("button",{onClick:hr,className:"text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",title:"Start Fresh - Clear current month budget",children:y.jsx(Ml,{size:22})}),y.jsx(DQ,{})]})]}),y.jsx(RQ,{amount:r,totalIncome:(n[i]||[]).reduce((je,He)=>je+He.amount,0),totalAllocated:(a[i]||[]).filter(je=>t.some(He=>He.id===je.envelopeId)||e.some(He=>He.id===je.envelopeId)).reduce((je,He)=>je+He.budgetedAmount,0),isLoading:c,variant:"header"}),y.jsx(CQ,{currentMonth:i,onMonthChange:je=>{te(!1),z(je)}})]}),y.jsxs("div",{className:"pt-[calc(10rem+env(safe-area-inset-top))] p-4 max-w-md mx-auto space-y-6",children:[ee&&y.jsx(IQ,{currentMonth:i,onCopy:Ns,onDismiss:()=>te(!1)}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Income Sources"}),y.jsx("button",{onClick:rn,className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:y.jsx(rg,{size:20})})]}),(n[i]||[]).length===0?y.jsx("div",{className:"text-center py-6",children:y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm",children:"No income sources yet. Add your monthly income."})}):y.jsx("div",{className:"space-y-3",children:y.jsx(Bl,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(je=>y.jsx(Go.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Ih,{onDelete:()=>Ot(je),children:y.jsxs("div",{className:"flex justify-between items-center py-3 px-4 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>ft(je),children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:je.name}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly income"})]}),y.jsxs("p",{className:"font-semibold text-green-600 dark:text-emerald-400",children:["$",je.amount.toFixed(2)]})]})})},je.id))})})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Envelopes"}),y.jsx("button",{onClick:()=>C("/add-envelope"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Envelope",children:y.jsx(rg,{size:20})})]}),t.length===0?y.jsxs("div",{className:"text-center py-6",children:[y.jsx(px,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:t.length===0?"No envelopes added to this month. Copy from previous month or add new ones.":"No envelopes yet. Create one to get started."}),y.jsx("button",{onClick:()=>C("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]}):y.jsx("div",{ref:Me,children:y.jsx(Bl,{initial:!1,children:y.jsx("div",{className:"space-y-3",children:t.map((je,He)=>{const Lt=(a[i]||[]).find(Tt=>Tt.envelopeId===je.id)?.budgetedAmount||0,Wt=m(je.id),yn=()=>{if(He===0)return;const Tt=[...j.current];[Tt[He-1],Tt[He]]=[Tt[He],Tt[He-1]],j.current=Tt,B(Tt),_(Tt)},Rt=()=>{if(He===t.length-1)return;const Tt=[...j.current];[Tt[He],Tt[He+1]]=[Tt[He+1],Tt[He]],j.current=Tt,B(Tt),_(Tt)};return y.jsx(jQ,{env:je,budgetedAmount:Lt,remainingBalance:Wt,editingEnvelopeId:U,setEditingEnvelopeId:Y,editingAmount:ne,setEditingAmount:ae,handleBudgetSave:vn,navigate:C,inputRef:he,transactions:o,currentMonth:i,setMoveableRef:Te,isReorderingActive:Pe,activelyDraggingId:be,onItemDragStart:qe,onMoveUp:yn,onMoveDown:Rt,isFirst:He===0,isLast:He===t.length-1,isReorderUnlocked:ie},je.id)})})})})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[y.jsx(Mf,{size:20,className:"text-blue-600 dark:text-blue-400"}),"Piggybanks"]}),y.jsx("button",{onClick:()=>C("/add-envelope?type=piggybank"),className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-200 transition-colors",title:"Create New Piggybank",children:y.jsx(rg,{size:20})})]}),e.length>0?y.jsx("div",{className:"space-y-3",children:e.map(je=>y.jsx(MQ,{piggybank:je,balance:new Ll(typeof m(je.id)=="number"?m(je.id):0),onNavigate:He=>C(`/envelope/${He}`)},je.id))}):y.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:[y.jsx(Mf,{size:48,className:"mx-auto mb-3 opacity-30"}),y.jsx("p",{className:"text-sm",children:"No piggybanks yet"}),y.jsx("p",{className:"text-xs mt-1",children:"Click the + button above to create your first piggybank"})]})]}),y.jsx("button",{onClick:()=>C("/add-transaction"),className:"fixed bottom-32 right-6 md:bottom-20 bg-blue-600 text-white p-4 rounded-full shadow-lg active:scale-90 transition-transform z-40 pointer-events-auto",children:y.jsx(rg,{size:28})}),y.jsx(kQ,{isVisible:A,onClose:fr,mode:O,initialIncomeSource:V}),y.jsx(NQ,{isVisible:$,onClose:()=>H(!1),onConfirm:Yr,currentMonth:i,incomeCount:(n[i]||[]).length,totalIncome:(n[i]||[]).reduce((je,He)=>je+He.amount,0),allocationCount:(a[i]||[]).filter(je=>t.some(He=>He.id===je.envelopeId)||e.some(He=>He.id===je.envelopeId)).length,totalAllocated:(a[i]||[]).filter(je=>t.some(He=>He.id===je.envelopeId)||e.some(He=>He.id===je.envelopeId)).reduce((je,He)=>je+He.budgetedAmount,0)})]})]})]})},zQ=[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}],rP=({selectedCard:t,onCardSelect:e,initialCards:n=zQ,disabled:r=!1,isUserSelected:i=!1})=>{const[a,o]=G.useState(n[0]),[c,u]=G.useState(!1),[f,h]=G.useState(!1),[g,m]=G.useState(n),[x,_]=G.useState(null),[E,S]=G.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),T=t||a;G.useEffect(()=>{!t&&e&&g.length>0&&e(g[0])},[t,e,g]);const D=N=>{r||(N.id==="add-new"?h(!0):(o(N),e?.(N),u(!1)))},k=()=>{r||u(!c)},j=N=>{r||_(N)},B=()=>{if(x&&!r){const N=g.filter(O=>O.id!==x.id);if(m(N),T.id===x.id&&N.length>0){const O=N[0];o(O),e?.(O)}_(null)}},z=()=>{_(null)},C=()=>{if(r)return;if(E.last4.length!==4||!/^\d{4}$/.test(E.last4)){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!E.name.trim()){alert("Please enter a card name");return}const N={id:`custom-${Date.now()}`,name:E.name.trim(),network:E.network,last4:E.last4,color:E.color},O=[...g,N];m(O),o(N),e?.(N),h(!1),u(!1),S({name:"",network:"Visa",last4:"",color:"#3b82f6"})},A=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&y.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),y.jsxs("div",{onClick:k,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:T.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:T.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",T.last4]})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:T.name}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(...",T.last4,")"]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-gray-400",children:c?"":""}),!i&&y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),c&&y.jsx("div",{className:"card-stack-dropdown",children:y.jsx("div",{className:"card-stack",children:y.jsx(Bl,{initial:!1,mode:"popLayout",children:[...g,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((N,O)=>{const L=T.id===N.id,V=N.id==="add-new";return y.jsx(Go.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Ih,{onDelete:()=>!V&&!r&&j(N),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${L?"selected":""} ${V?"add-new-card":""}`,onClick:()=>D(N),style:{backgroundColor:V?"#f3f4f6":N.color,color:V?"#374151":N.color==="#e3e3e3"?"#000":"#fff",zIndex:g.length-O},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:V?"":N.network}),L&&!V&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:N.name}),y.jsx("div",{className:"card-number",children:V?"":` ${N.last4}`})]}),V&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},N.id)})})})})]}),f&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Card"}),y.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Name"}),y.jsx("input",{type:"text",value:E.name,onChange:N=>S({...E,name:N.target.value}),placeholder:"e.g., My Chase Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),y.jsxs("select",{value:E.network,onChange:N=>S({...E,network:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:E.last4,onChange:N=>S({...E,last4:N.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:A.map(N=>y.jsx("button",{onClick:()=>S({...E,color:N}),className:`w-full h-10 rounded-lg border-2 transition-all ${E.color===N?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:N}},N))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:E.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:E.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",E.last4||"0000"]})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add Card"})]})]})]})}),x&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:x.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:z,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:B,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},iP=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c,currentMonth:u}=Qn(),[f,h]=G.useState(""),[g,m]=G.useState(""),[x,_]=G.useState(""),[E,S]=G.useState(new Date().toISOString().split("T")[0]),[T,D]=G.useState(null);if(G.useEffect(()=>{if(!t)return;const C=window.setTimeout(()=>{if(n==="edit"&&i){h(i.amount.toString()),m(i.merchant||""),_(i.description),D(i.paymentMethod||null);try{const A=new Date(i.date);isNaN(A.getTime())?(console.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(A.toISOString().split("T")[0])}catch(A){console.error("Error parsing transaction date:",A),S(new Date().toISOString().split("T")[0])}}else h(""),m(""),_(""),S(new Date().toISOString().split("T")[0]),D(null)},0);return()=>window.clearTimeout(C)},[t,n,i]),!t)return null;const k=async C=>{C.preventDefault();const A=parseFloat(f);if(isNaN(A)||A<=0){console.log(" Invalid amount:",f);return}console.log(" Saving transaction:",{mode:n,amount:A,note:x,date:E,envelopeId:r.id,paymentMethod:T});try{const N=new Date(E),O=`${N.getFullYear()}-${(N.getMonth()+1).toString().padStart(2,"0")}`;if(O!==u){const L=`This transaction date (${O}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(L))return}n==="add"?(console.log(" Adding income transaction"),await a({amount:A,description:x,merchant:g||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?(console.log(" Adding expense transaction"),await a({amount:A,description:x,merchant:g||void 0,date:new Date(E).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:A,description:x,merchant:g||void 0,date:new Date(E).toISOString(),paymentMethod:T||void 0})),console.log(" Transaction saved successfully"),e()}catch(N){console.error(" Error saving transaction:",N),alert("Failed to save transaction: "+(N instanceof Error?N.message:"Unknown error"))}},j=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},B=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",z=n==="add"?"text-green-500":"text-red-500";return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:B}),y.jsx("button",{onClick:k,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0,children:"Save"})]}),y.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${z}`,children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:f,onChange:C=>{const A=C.target.value;(A===""||!isNaN(parseFloat(A))&&parseFloat(A)>=0)&&h(A)},onKeyDown:C=>{(C.key==="e"||C.key==="E"||C.key==="+"||C.key==="-")&&C.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${z} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:g,onChange:C=>m(C.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(rP,{selectedCard:T,onCardSelect:D}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:x,onChange:C=>_(C.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const C=new Date(E);return`${C.getFullYear()}-${(C.getMonth()+1).toString().padStart(2,"0")}`!==u?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(uu,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:E,onChange:C=>{console.log("Date changed to:",C.target.value),S(C.target.value)},required:!0,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),n==="edit"&&y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:y.jsxs("button",{type:"button",onClick:j,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[y.jsx(VD,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})})},LQ=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=Qn(),[a,o]=G.useState(""),[c,u]=G.useState(""),[f,h]=G.useState(""),[g,m]=G.useState(new Date().toISOString().split("T")[0]),x=r.filter(S=>S.id!==n.id);if(G.useEffect(()=>{if(!t)return;const S=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(S)},[t]),!t)return null;const _=S=>{S.preventDefault();const T=parseFloat(c);isNaN(T)||T<=0||!a||(i(n.id,a,T,f,new Date(g)),e())},E=r.find(S=>S.id===a);return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),y.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),y.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),y.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),y.jsxs("select",{value:a,onChange:S=>o(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[y.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),x.map(S=>y.jsx("option",{value:S.id,className:"bg-white dark:bg-zinc-900",children:S.name},S.id))]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:c,onChange:S=>u(S.target.value),onKeyDown:S=>{(S.key==="e"||S.key==="E"||S.key==="+"||S.key==="-")&&S.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),y.jsx("input",{type:"text",value:f,onChange:S=>h(S.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),y.jsx("input",{type:"date",value:g,onChange:S=>m(S.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),E&&c&&parseFloat(c)>0&&y.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",y.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:E.name})]})]})]})})},BQ=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},UQ=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},aP=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;console.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),y.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 transition-colors cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[y.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&y.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[y.jsx("span",{children:BQ(t.date)}),e&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),y.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",UQ(t.amount)]}),n?y.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?y.jsx(yA,{className:"text-green-500",size:20}):y.jsx(xA,{className:"text-gray-400",size:20})}):y.jsx("span",{children:t.reconciled?y.jsx(yA,{className:"text-green-500",size:20}):y.jsx(xA,{className:"text-gray-400",size:20})})]})]})},FQ=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),GQ=()=>{const{id:t}=Cj(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:o,updateTransaction:c,deleteTransaction:u,restoreTransaction:f,getEnvelopeBalance:h,currentMonth:g}=Qn(),{showToast:m}=rc(),x=La(),_=za(),[E,S]=G.useState(!1),[T,D]=G.useState(!1),[k,j]=G.useState(!1),[B,z]=G.useState(null);G.useEffect(()=>{e.length===0&&r()},[]);const C=e.find(V=>V.id===t);if(!C)return i?y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Loading envelope..."})}):y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Envelope not found."})});if(C.isPiggybank){const V=n.filter(M=>M.envelopeId===C.id);console.log(" Piggybank:",C.name),console.log(" Created at:",C.createdAt),console.log(" Transactions:",V.map(M=>({date:M.date,description:M.description,amount:M.amount})))}const A=n.filter(V=>V.envelopeId===C.id).filter(V=>{if(C.isPiggybank){if(V.description==="Monthly Allocation"&&V.isAutomatic||!C.createdAt)return!0;const M=new Date(C.createdAt);return new Date(V.date)>=M}return V.month===g||!V.month}).sort((V,M)=>new Date(M.date).getTime()-new Date(V.date).getTime()),N=()=>{_.state?.fromGlobalFAB?x("/"):x(-1)},O=()=>{t&&(a(t),x(-1))},L=V=>{const M={...V,reconciled:!V.reconciled};c(M)};return y.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-28",children:[y.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[y.jsx("button",{onClick:()=>{const V=prompt("Rename envelope:",C.name);V&&V.trim()&&t&&o(t,V)},className:"text-blue-600 dark:text-blue-400 font-medium",children:"Rename"}),y.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:C.name}),y.jsx("button",{onClick:N,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),y.jsx("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const V=C.isPiggybank?h(C.id):h(C.id,g);return console.log(`Debug: Envelope ${C.name} Balance:`,V),y.jsx("span",{className:`text-xl font-bold ${V<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:FQ(V)})})()]})}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>S(!0),children:[y.jsx(F5,{className:"w-5 h-5 mr-3"}),"Add Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[y.jsx(B5,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>j(!0),children:[y.jsx(k5,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:A.length===0?y.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):y.jsx(Bl,{initial:!1,mode:"popLayout",children:A.map(V=>y.jsx(Go.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Ih,{onDelete:()=>{if(!V.id)return;const M={...V};u(V.id),m("Transaction deleted","neutral",()=>f(M))},children:y.jsx(aP,{transaction:V,onReconcile:()=>L(V),onEdit:()=>z(V)})})},V.id))})})]}),y.jsx("div",{className:"mt-8",children:y.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{confirm(`Are you sure you want to delete "${C.name}"? This will delete all transactions.`)&&O()},children:[y.jsx(VD,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),(E||T||B)&&y.jsx(iP,{isVisible:E||T||!!B,onClose:()=>{S(!1),D(!1),z(null)},mode:E?"add":T?"spend":"edit",currentEnvelope:C,initialTransaction:B}),k&&y.jsx(LQ,{isVisible:k,onClose:()=>j(!1),sourceEnvelope:C})]})},qQ=()=>{const t=La(),e=G.useRef(null),{envelopes:n,transactions:r,resetData:i,importData:a,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:m}=Qn(),{deleteAccount:x,currentUser:_}=Di(),[E,S]=G.useState(null),[T,D]=G.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[k,j]=G.useState(!1),[B,z]=G.useState(""),[C,A]=G.useState(!1),[N,O]=G.useState(!1),[L,V]=G.useState(null),[M,J]=G.useState(!1);console.log(L);const Q=978307200,$=c?.theme??"system";G.useEffect(()=>{c||f().catch(ie=>{console.error("Failed to initialize app settings:",ie)})},[f,c]);const H=(ie,me)=>{S({type:ie,text:me}),setTimeout(()=>S(null),3500)},ee=G.useMemo(()=>{const ie=n.length,me=r.length,Te=m?g[m]||[]:[],Ae=Object.values(h).reduce((ze,Me)=>ze+Me.length,0),De=Te.length,be=n.reduce((ze,Me)=>{const et=o(Me.id);return ze+(typeof et=="number"?et:0)},0),Ee=0,$e=r.reduce((ze,Me)=>{let et=0;if(typeof Me.date=="string"){const dt=Date.parse(Me.date);et=Number.isNaN(dt)?0:dt}else typeof Me.date=="number"&&(et=Me.date<2e9?(Me.date+Q)*1e3:Me.date);return Math.max(ze,et)},0),Pe=Ee||$e?new Date(Math.max(Ee,$e)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:ie,transactionCount:me,incomeSourceCount:Ae,allocationCount:De,totalBalance:be,lastUpdated:Pe}},[n,r,h,g,m]),te=()=>{try{console.log(" Creating backup..."),console.log(" Envelopes in store:",n.map(be=>({id:be.id,name:be.name,isPiggybank:be.isPiggybank,hasPiggybankConfig:!!be.piggybankConfig,piggybankConfig:be.piggybankConfig})));const ie={appVersion:"2.1 (PWA)",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(be=>({...be,currentBalance:(()=>{const Ee=o(be.id);return typeof Ee=="number"?Ee:0})(),lastUpdated:new Date().toISOString()})),transactions:r,allocations:g,incomeSources:h};console.log(" Backup data created:",{envelopeCount:ie.envelopes.length,piggybankEnvelopes:ie.envelopes.filter(be=>be.isPiggybank).length,sampleEnvelope:ie.envelopes.find(be=>be.isPiggybank)||ie.envelopes[0]});const me=new Blob([JSON.stringify(ie,null,2)],{type:"application/json"}),Te=URL.createObjectURL(me),Ae=document.createElement("a");Ae.href=Te,Ae.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(Te);const De=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",De),D(De),V({success:!0,message:"Backup downloaded successfully."})}catch(ie){console.error(ie),V({success:!1,message:"Failed to create backup file.",onRetry:te})}},ue=()=>{O(!0),V(null);try{const ie=["Date","Merchant","Notes","Amount","Type","Envelope","Reconciled"],me=r.map(Ee=>{const $e=n.find(et=>et.id===Ee.envelopeId)?.name||"Unknown",Pe=(Ee.merchant||"").replace(/"/g,'""'),ze=(Ee.description||"").replace(/"/g,'""');let Me="Invalid Date";if(Ee.date){if(typeof Ee.date=="string")Me=Ee.date.split("T")[0];else if(typeof Ee.date=="number"){const et=Ee.date<2e9?(Ee.date+Q)*1e3:Ee.date;Me=new Date(et).toISOString().split("T")[0]}}return[Me,`"${Pe}"`,`"${ze}"`,Ee.amount.toFixed(2),Ee.type,`"${$e}"`,Ee.reconciled?"Yes":"No"].join(",")}),Te=[ie.join(","),...me].join(`
`),Ae=new Blob([Te],{type:"text/csv;charset=utf-8;"}),De=URL.createObjectURL(Ae),be=document.createElement("a");be.href=De,be.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(be),be.click(),document.body.removeChild(be),URL.revokeObjectURL(De),V({success:!0,message:"Transactions CSV exported successfully."})}catch(ie){console.error(ie),V({success:!1,message:"Failed to export CSV. Please try again.",onRetry:ue})}finally{O(!1)}},U=()=>{e.current?.click()},Y=ie=>{const me=ie.target.files?.[0];if(!me)return;const Te=new FileReader;Te.onload=async Ae=>{try{const De=JSON.parse(Ae.target?.result),be=await a(De);if(!be.success){H("error",be.message);return}if(De.appSettings?.theme)try{await u({theme:De.appSettings.theme})}catch(Ee){console.error("Failed to update imported settings:",Ee)}else if(De.appSettings?.isDarkMode!==void 0)try{const Ee=De.appSettings.isDarkMode?"dark":"light";await u({theme:Ee})}catch(Ee){console.error("Failed to update imported settings:",Ee)}H("success",`Loaded ${De.envelopes?.length??0} envelopes, ${De.transactions?.length??0} transactions, ${De.allocations?Object.keys(De.allocations).reduce((Ee,$e)=>Ee+(De.allocations[$e]?.length||0),0):0} allocations, and ${De.incomeSources?Object.keys(De.incomeSources).reduce((Ee,$e)=>Ee+(De.incomeSources[$e]?.length||0),0):0} income sources.`)}catch(De){console.error(De),H("error","Invalid backup file. Please verify the JSON.")}},Te.readAsText(me),ie.target.value=""},ne=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await i(),H("success","All data has been permanently deleted."),t("/")}catch(ie){console.error("Reset failed:",ie),H("error","Failed to delete all data. Some data may remain.")}},ae=async()=>{if(!B.trim()){H("error","Please enter your password to confirm account deletion.");return}j(!0);try{await i(),await x(B)?H("success","Your account has been permanently deleted."):H("error","Failed to delete account. Please try again.")}catch(ie){console.error("Account deletion failed:",ie),H("error","Failed to delete account. Please try again.")}finally{j(!1),A(!1),z("")}},he=async()=>{if(!_){H("error","You must be logged in to clean up data.");return}J(!0);try{const ie=await gQ.cleanupOrphanedData(_.id),me=ie.orphanedAllocationsDeleted+ie.orphanedTransactionsDeleted;me>0?H("success",`Cleaned ${me} orphaned items: ${ie.orphanedAllocationsDeleted} allocations and ${ie.orphanedTransactionsDeleted} transactions from ${ie.details.monthsProcessed.length} months.`):H("success","No orphaned data found. Your database is already clean!")}catch(ie){console.error("Cleanup failed:",ie),H("error","Failed to clean up orphaned data. Please try again.")}finally{J(!1)}};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[y.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),y.jsxs("div",{className:"p-4 space-y-6 max-w-2xl mx-auto pb-24",children:[E&&y.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${E.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[E.type==="success"?y.jsx(Qg,{size:18}):y.jsx(jb,{size:18}),E.text]}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(_A,{className:"text-blue-500",size:22}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.envelopeCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.transactionCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.incomeSourceCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:ee.allocationCount})]})]})]})}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[$==="light"&&y.jsx("span",{className:"text-orange-500 text-lg",children:""}),$==="dark"&&y.jsx("span",{className:"text-purple-500 text-lg",children:""}),$==="system"&&y.jsx("span",{className:"text-gray-500 text-lg",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:$})]}),y.jsx("div",{className:"text-xs text-gray-500 dark:text-zinc-500 mb-3",children:"Choose your preferred appearance."}),y.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(ie=>y.jsx("button",{onClick:async()=>{try{await u({theme:ie.value})}catch(me){console.error("Failed to update theme setting:",me)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${$===ie.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:ie.label},ie.value))})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[y.jsxs("button",{onClick:te,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(_A,{className:"text-blue-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",T]})]})]}),y.jsx(_l,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:U,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(FV,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),y.jsx(_l,{className:"text-gray-400",size:18})]}),y.jsx("div",{className:"p-4",children:y.jsxs("button",{onClick:ue,disabled:N,className:"w-full flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed rounded-xl border border-gray-100 dark:border-zinc-800 px-4 py-3 bg-white dark:bg-zinc-900",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[N?y.jsx(wA,{className:"text-blue-500 animate-spin",size:20}):y.jsx(nV,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:N?"Preparing CSV":"Export Transactions (CSV)"})]}),y.jsx(_l,{className:"text-gray-400",size:18})]})}),y.jsx("input",{type:"file",ref:e,onChange:Y,accept:".json",className:"hidden"})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Tips"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 text-sm text-gray-600 dark:text-zinc-300 space-y-2",children:[y.jsx("p",{children:"Create regular backups before major changes."}),y.jsx("p",{children:"Store backups in iCloud, Files, or another safe location."}),y.jsx("p",{children:"Backups are plain JSON files and can be inspected in any text editor."}),y.jsx("p",{children:"Restoring replaces all current envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[y.jsxs("button",{onClick:ne,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(jb,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete all envelopes, transactions, allocations, income sources, and settings"})]})]}),y.jsx(_l,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:he,disabled:M,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[M?y.jsx(wA,{className:"text-orange-500 animate-spin",size:20}):y.jsx(DV,{className:"text-orange-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:M?"Cleaning Data...":" Purge Orphaned Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),y.jsx(_l,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:()=>A(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(uu,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),y.jsx(_l,{className:"text-gray-400",size:18})]})]})]}),y.jsx("div",{className:"text-center py-4",children:y.jsx("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:"Version 1.2.0 (PWA)"})}),L&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[L.success?y.jsx(Qg,{className:"text-green-500",size:24}):y.jsx(uu,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:L.success?"Success":"Error"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:L.message}),y.jsxs("div",{className:"flex gap-2",children:[L.onRetry&&y.jsx("button",{onClick:()=>{V(null),L.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),y.jsx("button",{onClick:()=>V(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),C&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(uu,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),y.jsx("input",{type:"password",value:B,onChange:ie=>z(ie.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{A(!1),z("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:ae,disabled:k||!B.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Deleting...":"Delete Account"})]})]})})]})]})},HQ=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n}=Qn(),{showToast:r}=rc(),i=La(),[a]=v5(),[o,c]=G.useState(""),[u,f]=G.useState(""),h=a.get("type")==="piggybank",[g,m]=G.useState(""),[x,_]=G.useState(""),[E,S]=G.useState("#3B82F6"),T=async D=>{if(D.preventDefault(),!o.trim())return;const k=parseFloat(u),j=isNaN(k)?0:k,B=Qn.getState().envelopes,C=(B.length>0?Math.max(...B.map(L=>L.orderIndex??0)):-1)+1,A=h?new Date(`${n}-01T00:00:00`):new Date,N={name:o,currentBalance:j,lastUpdated:new Date().toISOString(),createdAt:A.toISOString(),isActive:!0,orderIndex:C};h&&(N.isPiggybank=!0,N.piggybankConfig={targetAmount:g?parseFloat(g):void 0,monthlyContribution:parseFloat(x||"0"),color:E,icon:"piggy-bank"}),t(N).then(L=>{if(L){const V=h?parseFloat(x||"0"):0;e(L,V).catch(M=>console.error("Failed to create allocation:",M)),setTimeout(()=>{i("/")},50)}}).catch(L=>{console.error("Failed to create envelope:",L),r(L.message||"Failed to create envelope","error")})};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-28",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>i("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(If,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h?"New Piggybank":"New Envelope"})]}),y.jsx("div",{className:"p-4 max-w-md mx-auto",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:y.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:h?y.jsx(Mf,{size:40}):y.jsx(iV,{size:40})})}),y.jsxs("form",{onSubmit:T,className:"p-6 space-y-6 pb-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:h?"Piggybank Name":"Envelope Name"}),y.jsx("input",{type:"text",id:"name",value:o,onChange:D=>c(D.target.value),placeholder:h?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),h&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"monthly-contribution",value:x,onChange:D=>_(D.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:h})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"target-amount",value:g,onChange:D=>m(D.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(D=>y.jsx("button",{type:"button",onClick:()=>S(D.value),className:`w-full aspect-square rounded-lg transition-all ${E===D.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:D.value},title:D.label},D.value))})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"balance",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Initial Deposit (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"balance",value:u,onChange:D=>f(D.target.value),onKeyDown:D=>{(D.key==="e"||D.key==="E"||D.key==="+"||D.key==="-")&&D.preventDefault()},placeholder:"0.00",step:"0.01",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:'This creates an "Initial Deposit" income transaction. You can also add money later by editing the envelope budget on the main screen.'})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:()=>i("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!o.trim()||h&&!x,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${o.trim()&&(!h||x)?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:h?"Create Piggybank":"Create Envelope"})]})]})]})})]})},$Q=({envelopes:t,transactionAmount:e,onSplitChange:n})=>{const[r,i]=G.useState([]),[a,o]=G.useState({}),[c,u]=G.useState(e),f=_=>{i(E=>E.includes(_)?E.filter(S=>S!==_):[...E,_])},h=(_,E)=>{o(S=>({...S,[_]:E}))};G.useEffect(()=>{if(r.length===1){const _=r[0];o({[_]:e})}},[r.length,e]),G.useEffect(()=>{const _=Object.values(a).reduce((E,S)=>E+(S||0),0);u(e-_),n(a)},[a,e,n]),G.useEffect(()=>{const _={...a};Object.keys(_).forEach(E=>{r.includes(E)||delete _[E]}),Object.keys(_).length!==Object.keys(a).length&&o(_)},[r,a]);const g=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,x=r.length>0&&Math.abs(c)>.01;return y.jsxs("div",{className:"space-y-3",children:[r.length>1&&y.jsxs("div",{className:`p-3 rounded-lg ${x?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),y.jsxs("span",{className:`font-bold text-lg ${x?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),x&&y.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&y.jsx("button",{type:"button",onClick:g,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(_=>y.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:()=>f(_.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:_.name}),r.includes(_.id)&&r.length>1&&y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",min:"0",step:"0.01",value:a[_.id]||"",onChange:E=>h(_.id,parseFloat(E.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},_.id))})]})},YQ=()=>{const t=La(),{envelopes:e,addTransaction:n,currentMonth:r}=Qn(),[i,a]=G.useState(""),[o,c]=G.useState(""),[u,f]=G.useState(""),[h,g]=G.useState(new Date().toISOString().split("T")[0]),[m,x]=G.useState("expense"),[_,E]=G.useState({}),[S,T]=G.useState(null),[D,k]=G.useState(!1),j=V=>{T(V),S&&k(!0)},B=Object.keys(_).length>0,z=Object.values(_).reduce((V,M)=>V+(M||0),0),C=Math.abs(z-parseFloat(i||"0"))<.01,A=i&&parseFloat(i)>0&&B&&C,N=async V=>{if(V.preventDefault(),!A)return;const[M,J,Q]=h.split("-").map(Number),$=new Date(M,J-1,Q,12,0,0);console.log(" Selected date:",h),console.log(" Parsed date:",$.toISOString());try{const[H,ee]=h.split("-").map(Number),te=`${H}-${ee.toString().padStart(2,"0")}`;if(te!==r){const U=`This transaction date (${te}) does not match the current budget month (${r}). Are you sure you want to save it?`;if(!window.confirm(U))return}const ue=Object.entries(_).filter(([U,Y])=>Y>0);Promise.all(ue.map(([U,Y])=>n({amount:Y,description:u,merchant:o||void 0,date:$.toISOString(),envelopeId:U,type:m==="income"?"Income":"Expense",reconciled:!1,paymentMethod:S||void 0}).catch(ne=>console.error("Failed to create transaction:",ne)))).catch(U=>console.error("Failed to create transactions:",U)),t("/")}catch(H){console.error("Error saving transaction:",H),alert("Failed to save transaction: "+(H instanceof Error?H.message:"Unknown error"))}},O=[...e].sort((V,M)=>{const J=V.orderIndex??0,Q=M.orderIndex??0;return J!==Q?J-Q:V.name.localeCompare(M.name)}),L=m==="income"?"text-green-500":"text-red-500";return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-10 flex items-center justify-between",children:[y.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),y.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),y.jsx("button",{onClick:N,disabled:!A,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),y.jsx("div",{className:"p-4 max-w-md mx-auto pb-24",children:y.jsxs("form",{onSubmit:N,className:"space-y-6",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:y.jsxs("div",{className:"flex",children:[y.jsx("button",{type:"button",onClick:()=>x("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),y.jsx("button",{type:"button",onClick:()=>x("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${m==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${L}`,children:"$"}),y.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:i,onChange:V=>{const M=V.target.value;(M===""||!isNaN(parseFloat(M))&&parseFloat(M)>=0)&&a(M)},onKeyDown:V=>{(V.key==="e"||V.key==="E"||V.key==="+"||V.key==="-")&&V.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${L} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:o,onChange:V=>c(V.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(rP,{selectedCard:S,onCardSelect:j,isUserSelected:D}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:u,onChange:V=>f(V.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[V,M]=h.split("-").map(Number);return`${V}-${M.toString().padStart(2,"0")}`!==r?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(uu,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:h,onChange:V=>g(V.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx($Q,{envelopes:O,transactionAmount:parseFloat(i)||0,onSplitChange:E})})]})})]})},XQ=()=>{const t=La(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:o}=Qn(),{showToast:c}=rc(),[u,f]=G.useState(!1),[h,g]=G.useState(""),[m,x]=G.useState("all"),[_,E]=G.useState("All"),[S,T]=G.useState(!1),[D,k]=G.useState("all"),[j,B]=G.useState(!1),[z,C]=G.useState("all"),[A,N]=G.useState(()=>{const H=new Date;return H.setMonth(H.getMonth()-1),H.toISOString().split("T")[0]}),[O,L]=G.useState(()=>new Date().toISOString().split("T")[0]),[V,M]=G.useState(null),J=G.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:j,currentMonth:o,transactionMonths:e.map(te=>({id:te.id,month:te.month,date:te.date,description:te.description}))});let H=e;return j||(H=e.filter(te=>te.month===o||!te.month),console.log(" After month filter:",{remaining:H.length,currentMonth:o,filteredTransactions:H.map(te=>({id:te.id,description:te.description,month:te.month,matchesCurrentMonth:te.month===o}))})),H.map(te=>{if(!te)return null;let ue=te.date;if(typeof te.date=="number"){const Y=(te.date+978307200)*1e3;ue=new Date(Y).toISOString()}else if(!te.date||typeof te.date!="string")return null;return{...te,date:ue}}).filter(Boolean).filter(te=>{if(h){const U=h.toLowerCase(),Y=n.find(he=>he.id===te.envelopeId)?.name.toLowerCase()||"",ne=te.amount.toFixed(2);if(!(te.description.toLowerCase().includes(U)||Y.includes(U)||ne.includes(U)))return!1}if(m!=="all"&&te.envelopeId!==m||_!=="All"&&te.type!==_||z!=="all"&&(!te.paymentMethod||te.paymentMethod.id!==z)||!te.date||typeof te.date!="string")return!1;const ue=te.date.split("T")[0];return!(D!=="all"&&new Date(ue).getMonth()!==parseInt(D)||S&&!te.reconciled)}).sort((te,ue)=>new Date(ue.date).getTime()-new Date(te.date).getTime())},[e,n,h,m,_,z,A,O,S,j,o]);console.log(" Final filtered transactions:",{count:J.length,transactions:J.map(H=>({id:H.id,description:H.description,amount:H.amount,date:H.date,month:H.month,type:H.type}))});const Q=V?n.find(H=>H.id===V.envelopeId):null,$=H=>{const ee={...H,reconciled:!H.reconciled};r(ee)};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20 transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:y.jsx(If,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),y.jsx("button",{onClick:()=>f(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:y.jsx(sV,{size:20,className:u?"fill-current":""})})]}),y.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[y.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",o]}),y.jsx("button",{onClick:()=>B(!j),className:`text-sm px-3 py-1 rounded-md ${j?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:j?"Current Month Only":"All Time"})]}),y.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),y.jsxs("select",{value:z,onChange:H=>C(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Payment Methods"}),[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}].map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]})]})}),y.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx(AV,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:H=>g(H.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&y.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:y.jsx(Fm,{size:16})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),y.jsxs("select",{value:m,onChange:H=>x(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((H,ee)=>H.name.localeCompare(ee.name)).map(H=>y.jsx("option",{value:H.id,children:H.name},H.id))]})]}),y.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(H=>y.jsx("button",{onClick:()=>E(H),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${_===H?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:H},H))}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),y.jsxs("select",{value:D,onChange:H=>k(H.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(H,ee)=>ee).map(H=>y.jsx("option",{value:H,children:new Date(2022,H).toLocaleString("default",{month:"long"})},H))]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"From"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:A,onChange:H=>N(H.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"To"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:O,onChange:H=>L(H.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),y.jsx("button",{onClick:()=>T(!S),className:`w-11 h-6 rounded-full transition-colors relative ${S?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),y.jsx("button",{onClick:()=>B(!j),className:`w-11 h-6 rounded-full transition-colors relative ${j?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${j?"translate-x-5":"translate-x-0"}`})})]})]})}),y.jsx("div",{className:"p-4 max-w-2xl mx-auto",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:J.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):y.jsx(Bl,{initial:!1,mode:"popLayout",children:J.map(H=>{const ee=n.find(te=>te.id===H.envelopeId);return y.jsx(Go.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Ih,{onDelete:()=>{if(!H.id)return;const te={...H};i(H.id),c("Transaction deleted","neutral",()=>a(te))},children:y.jsx(aP,{transaction:H,envelopeName:ee?.name||"Unknown Envelope",onReconcile:()=>$(H),onEdit:()=>{ee?M(H):alert("Cannot edit: Envelope deleted.")}})})},H.id)})})})}),V&&Q&&y.jsx(iP,{isVisible:!!V,onClose:()=>M(null),mode:"edit",currentEnvelope:Q,initialTransaction:V})]})},sP=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],WQ=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=sP.map(c=>({...c,met:c.regex.test(t)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},Mw=t=>{const e=sP.map(i=>({...i,met:i.regex.test(t)})),n=WQ(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},KQ=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=Mw(t);return r?null:y.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>y.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),y.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},QQ=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=Mw(t);return r?null:y.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?y.jsx(I5,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):y.jsx(Fm,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),y.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},ZQ=()=>{const[t,e]=G.useState(""),[n,r]=G.useState(""),[i,a]=G.useState(""),[o,c]=G.useState(!1),[u,f]=G.useState(!1),[h,g]=G.useState(!1),[m,x]=G.useState(!1),{login:_,register:E,sendPasswordReset:S,isLoading:T,loginError:D,clearError:k}=Di(),j=Mw(n),B=async C=>{if(C.preventDefault(),k(),t.trim()&&n.trim())if(u){if(!i.trim()||!j.isValid)return;await E(t.trim(),n,i.trim())}else await _(t.trim(),n)},z=async C=>{C.preventDefault(),t.trim()&&await S(t.trim())&&x(!0)};return G.useEffect(()=>{e(""),r(""),a(""),x(!1)},[u,h]),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?y.jsxs("form",{onSubmit:z,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-2",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(Pb,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"reset-email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"email"})]})]}),m?y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:y.jsx(Pb,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),y.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),y.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",y.jsx("span",{className:"font-medium",children:t})]}),y.jsxs("button",{type:"button",onClick:()=>g(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[y.jsx(If,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"submit",disabled:T||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?"Sending...":"Send Reset Link"}),y.jsx("div",{className:"mt-4 text-center",children:y.jsxs("button",{type:"button",onClick:()=>g(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:[y.jsx(If,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):y.jsxs("form",{onSubmit:B,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsx("input",{id:"email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"username"})]}),u&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),y.jsx("input",{id:"displayName",type:"text",value:i,onChange:C=>a(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:T})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&y.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:"Forgot password?"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:C=>r(C.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&n&&!j.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:T,autoComplete:u?"new-password":"current-password"}),y.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:T,children:o?y.jsx(Z5,{className:"h-5 w-5"}):y.jsx(eV,{className:"h-5 w-5"})})]}),u&&n&&y.jsx("div",{className:"mt-2",children:y.jsx(KQ,{password:n})}),u&&n&&y.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:y.jsx(QQ,{password:n})})]}),D&&y.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[D,D.includes("verify your email")&&y.jsx("div",{className:"mt-3",children:y.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),y.jsx("button",{type:"submit",disabled:T||!t.trim()||!n.trim()||u&&!i.trim()||u&&!j.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),y.jsx("div",{className:"mt-6 text-center",children:y.jsxs("button",{type:"button",onClick:()=>{f(!u),g(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:T,children:[y.jsx(qV,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},gD=()=>{const[t,e]=G.useState(!1),[n,r]=G.useState(!1),{currentUser:i,resendEmailVerification:a,logout:o,loginError:c}=Di();G.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:y.jsx(Pb,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(Qg,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),y.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[y.jsx("li",{children:"1. Open your email inbox"}),y.jsx("li",{children:"2. Find the email from House Budget"}),y.jsx("li",{children:'3. Click the "Verify Email" link'}),y.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&y.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&y.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),y.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?y.jsxs(y.Fragment,{children:[y.jsx(Ml,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):y.jsxs(y.Fragment,{children:[y.jsx(Ml,{className:"h-4 w-4"}),"Resend verification email"]})}),y.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[y.jsx(If,{className:"h-4 w-4"}),"Back to sign in"]})]})}),y.jsx("div",{className:"text-center",children:y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},mD=[{id:"1",name:"Amazon Prime",network:"Visa",last4:"7474",color:"#232f3e"},{id:"2",name:"Apple Card",network:"Mastercard",last4:"0274",color:"#e3e3e3"},{id:"3",name:"AA Credit Union",network:"Visa",last4:"3386",color:"#5494DA"}],JQ=()=>{const[t,e]=G.useState(mD[0]),[n,r]=G.useState(!1),[i,a]=G.useState(!1),[o,c]=G.useState(mD),[u,f]=G.useState(null),[h,g]=G.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),m=k=>{k.id==="add-new"?a(!0):(e(k),r(!1))},x=()=>{r(!n)},_=k=>{f(k)},E=()=>{if(u){const k=o.filter(j=>j.id!==u.id);c(k),t.id===u.id&&k.length>0&&e(k[0]),f(null)}},S=()=>{f(null)},T=()=>{if(h.last4.length!==4||!/^\d{4}$/.test(h.last4)){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!h.name.trim()){alert("Please enter a card name");return}const k={id:`custom-${Date.now()}`,name:h.name.trim(),network:h.network,last4:h.last4,color:h.color};c([...o,k]),e(k),a(!1),r(!1),g({name:"",network:"Visa",last4:"",color:"#3b82f6"})},D=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black p-8",children:[y.jsxs("div",{className:"max-w-md mx-auto",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Apple Wallet-Style Card Stack"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-6 space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Method"}),y.jsxs("div",{onClick:x,className:"flex items-center gap-4 p-3 border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:t.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:t.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",t.last4]})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(...",t.last4,")"]})]}),y.jsx("div",{className:"text-gray-400",children:n?"":""})]})]}),n&&y.jsx("div",{className:"card-stack-dropdown",children:y.jsx("div",{className:"card-stack",children:y.jsx(Bl,{initial:!1,mode:"popLayout",children:[...o,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((k,j)=>{const B=t.id===k.id,z=k.id==="add-new";return y.jsx(Go.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Ih,{onDelete:()=>!z&&_(k),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${B?"selected":""} ${z?"add-new-card":""}`,onClick:()=>m(k),style:{backgroundColor:z?"#f3f4f6":k.color,color:z?"#374151":k.color==="#e3e3e3"?"#000":"#fff",zIndex:o.length-j},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:z?"":k.network}),B&&!z&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:k.name}),y.jsx("div",{className:"card-number",children:z?"":` ${k.last4}`})]}),z&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},k.id)})})})})]})]}),i&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Card"}),y.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Name"}),y.jsx("input",{type:"text",value:h.name,onChange:k=>g({...h,name:k.target.value}),placeholder:"e.g., My Chase Card",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Network"}),y.jsxs("select",{value:h.network,onChange:k=>g({...h,network:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:h.last4,onChange:k=>g({...h,last4:k.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Card Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:D.map(k=>y.jsx("button",{onClick:()=>g({...h,color:k}),className:`w-full h-10 rounded-lg border-2 transition-all ${h.color===k?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:k}},k))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:h.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:h.network}),y.jsxs("span",{className:"text-left text-[9px] leading-none",children:[" ",h.last4||"0000"]})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:T,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add Card"})]})]})]})}),u&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:u.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},eZ=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=rc(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return y.jsx(Bl,{children:n&&y.jsx(Go.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-4 right-4 z-50 mb-[calc(env(safe-area-inset-bottom)+20px)]",children:y.jsxs("div",{className:`rounded-xl shadow-lg p-4 flex items-center justify-between ${a()}`,children:[y.jsx("div",{className:"flex items-center flex-1 min-w-0",children:y.jsx("span",{className:"text-sm font-medium truncate pr-2",children:t})}),y.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[r&&y.jsxs("button",{onClick:()=>{r(),i()},className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-bold transition-colors",children:[y.jsx(BV,{size:14,className:"inline mr-1"}),"Undo"]}),y.jsx("button",{onClick:i,className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:y.jsx(Fm,{size:16})})]})]})})})};class Gi extends G.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:y.jsx(uu,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[y.jsx(Ml,{className:"h-4 w-4"}),"Try Again"]}),y.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[y.jsx(lV,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const tZ=()=>{const t=La(),e=za(),n=[{path:"/",label:"Budget",icon:y.jsx(px,{className:"w-6 h-6"}),enabled:!0},{path:"/transactions",label:"Transactions",icon:y.jsx(uV,{className:"w-6 h-6"}),enabled:!0},{path:"/settings",label:"Settings",icon:y.jsx(jD,{className:"w-6 h-6"}),enabled:!0},{path:"#",label:"Future",icon:y.jsx(bA,{className:"w-6 h-6"}),enabled:!1},{path:"#",label:"Future",icon:y.jsx(bA,{className:"w-6 h-6"}),enabled:!1}],r=(a,o)=>{o&&a!=="#"&&t(a)},i=a=>a==="/"?e.pathname==="/":e.pathname.startsWith(a);return y.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-zinc-900 border-t border-gray-200 dark:border-zinc-800 safe-area-inset-bottom z-50",children:y.jsx("div",{className:"flex justify-around items-center h-16 max-w-screen-xl mx-auto px-2",children:n.map((a,o)=>y.jsxs("button",{onClick:()=>r(a.path,a.enabled),disabled:!a.enabled,className:`flex flex-col items-center justify-center flex-1 h-full transition-colors ${a.enabled?i(a.path)?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white":"text-gray-300 dark:text-zinc-700 cursor-not-allowed"}`,children:[y.jsx("div",{className:`transition-transform ${i(a.path)&&a.enabled?"scale-110":""}`,children:a.icon}),y.jsx("span",{className:"text-xs mt-1 font-medium",children:a.label})]},o))})})};function nZ(){const[t,e]=G.useState(!0),{appSettings:n}=Qn(),{isAuthenticated:r,isInitialized:i,initializeAuth:a,lastAuthTime:o,offlineGracePeriod:c,currentUser:u}=Di();if(G.useEffect(()=>{const g=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(g)},[]),G.useEffect(()=>a(),[a]),G.useEffect(()=>{const g=document.documentElement,m=window.matchMedia("(prefers-color-scheme: dark)"),x=()=>{const _=n?.theme??"system",E=m.matches;_==="dark"||_==="system"&&E?g.classList.add("dark"):g.classList.remove("dark")};if(x(),n?.theme==="system")return m.addEventListener("change",x),()=>m.removeEventListener("change",x)},[n]),t||!i)return y.jsx(nP,{message:"Initializing Personal Budget..."});if(!r)return u?y.jsx(Gi,{children:y.jsx(gD,{})}):y.jsx(Gi,{children:y.jsx(ZQ,{})});const h=typeof navigator<"u"&&!navigator.onLine&&r&&o&&Date.now()-o<c;return y.jsxs(Gi,{children:[h&&y.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((c-(Date.now()-o))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),y.jsxs(f5,{children:[y.jsxs(Fj,{children:[y.jsx(ls,{path:"/",element:y.jsx(Gi,{children:y.jsx(VQ,{})})}),y.jsx(ls,{path:"/envelope/:id",element:y.jsx(Gi,{children:y.jsx(GQ,{})})}),y.jsx(ls,{path:"/add-envelope",element:y.jsx(Gi,{children:y.jsx(HQ,{})})}),y.jsx(ls,{path:"/add-transaction",element:y.jsx(Gi,{children:y.jsx(YQ,{})})}),y.jsx(ls,{path:"/transactions",element:y.jsx(Gi,{children:y.jsx(XQ,{})})}),y.jsx(ls,{path:"/settings",element:y.jsx(Gi,{children:y.jsx(qQ,{})})}),y.jsx(ls,{path:"/verify-email",element:y.jsx(Gi,{children:y.jsx(gD,{})})}),y.jsx(ls,{path:"/card-stack",element:y.jsx(Gi,{children:y.jsx(JQ,{})})})]}),y.jsx(tZ,{})]}),y.jsx(eZ,{})]})}K3({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});Y3.createRoot(document.getElementById("root")).render(y.jsx(G.StrictMode,{children:y.jsx(nZ,{})}));
