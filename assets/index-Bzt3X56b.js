function Dne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function jl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aA={exports:{}},hm={};var K4;function One(){if(K4)return hm;K4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return hm.Fragment=e,hm.jsx=n,hm.jsxs=n,hm}var W4;function Rne(){return W4||(W4=1,aA.exports=One()),aA.exports}var m=Rne(),sA={exports:{}},ct={};var Y4;function Mne(){if(Y4)return ct;Y4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(U,Z,ee){this.props=U,this.context=Z,this.refs=w,this.updater=ee||b}S.prototype.isReactComponent={},S.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=S.prototype;function P(U,Z,ee){this.props=U,this.context=Z,this.refs=w,this.updater=ee||b}var D=P.prototype=new T;D.constructor=P,x(D,S.prototype),D.isPureReactComponent=!0;var O=Array.isArray;function N(){}var C={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(U,Z,ee){var K=ee.ref;return{$$typeof:t,type:U,key:Z,ref:K!==void 0?K:null,props:ee}}function j(U,Z){return R(U.type,Z,U.props)}function B(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function L(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ee){return Z[ee]})}var z=/\/+/g;function W(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):Z.toString(36)}function Q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(N,N):(U.status="pending",U.then(function(Z){U.status==="pending"&&(U.status="fulfilled",U.value=Z)},function(Z){U.status==="pending"&&(U.status="rejected",U.reason=Z)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function G(U,Z,ee,K,ue){var ne=typeof U;(ne==="undefined"||ne==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(ne){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case t:case e:oe=!0;break;case f:return oe=U._init,G(oe(U._payload),Z,ee,K,ue)}}if(oe)return ue=ue(U),oe=K===""?"."+W(U,0):K,O(ue)?(ee="",oe!=null&&(ee=oe.replace(z,"$&/")+"/"),G(ue,Z,ee,"",function(Ae){return Ae})):ue!=null&&(B(ue)&&(ue=j(ue,ee+(ue.key==null||U&&U.key===ue.key?"":(""+ue.key).replace(z,"$&/")+"/")+oe)),Z.push(ue)),1;oe=0;var Se=K===""?".":K+":";if(O(U))for(var se=0;se<U.length;se++)K=U[se],ne=Se+W(K,se),oe+=G(K,Z,ee,ne,ue);else if(se=v(U),typeof se=="function")for(U=se.call(U),se=0;!(K=U.next()).done;)K=K.value,ne=Se+W(K,se++),oe+=G(K,Z,ee,ne,ue);else if(ne==="object"){if(typeof U.then=="function")return G(Q(U),Z,ee,K,ue);throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return oe}function Y(U,Z,ee){if(U==null)return U;var K=[],ue=0;return G(U,K,"","",function(ne){return Z.call(ee,ne,ue++)}),K}function J(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(ee){(U._status===0||U._status===-1)&&(U._status=1,U._result=ee)},function(ee){(U._status===0||U._status===-1)&&(U._status=2,U._result=ee)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var ie=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},X={map:Y,forEach:function(U,Z,ee){Y(U,function(){Z.apply(this,arguments)},ee)},count:function(U){var Z=0;return Y(U,function(){Z++}),Z},toArray:function(U){return Y(U,function(Z){return Z})||[]},only:function(U){if(!B(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ct.Activity=h,ct.Children=X,ct.Component=S,ct.Fragment=n,ct.Profiler=i,ct.PureComponent=P,ct.StrictMode=r,ct.Suspense=c,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,ct.__COMPILER_RUNTIME={__proto__:null,c:function(U){return C.H.useMemoCache(U)}},ct.cache=function(U){return function(){return U.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(U,Z,ee){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var K=x({},U.props),ue=U.key;if(Z!=null)for(ne in Z.key!==void 0&&(ue=""+Z.key),Z)!I.call(Z,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&Z.ref===void 0||(K[ne]=Z[ne]);var ne=arguments.length-2;if(ne===1)K.children=ee;else if(1<ne){for(var oe=Array(ne),Se=0;Se<ne;Se++)oe[Se]=arguments[Se+2];K.children=oe}return R(U.type,ue,K)},ct.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},ct.createElement=function(U,Z,ee){var K,ue={},ne=null;if(Z!=null)for(K in Z.key!==void 0&&(ne=""+Z.key),Z)I.call(Z,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ue[K]=Z[K]);var oe=arguments.length-2;if(oe===1)ue.children=ee;else if(1<oe){for(var Se=Array(oe),se=0;se<oe;se++)Se[se]=arguments[se+2];ue.children=Se}if(U&&U.defaultProps)for(K in oe=U.defaultProps,oe)ue[K]===void 0&&(ue[K]=oe[K]);return R(U,ne,ue)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(U){return{$$typeof:o,render:U}},ct.isValidElement=B,ct.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:J}},ct.memo=function(U,Z){return{$$typeof:u,type:U,compare:Z===void 0?null:Z}},ct.startTransition=function(U){var Z=C.T,ee={};C.T=ee;try{var K=U(),ue=C.S;ue!==null&&ue(ee,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(N,ie)}catch(ne){ie(ne)}finally{Z!==null&&ee.types!==null&&(Z.types=ee.types),C.T=Z}},ct.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},ct.use=function(U){return C.H.use(U)},ct.useActionState=function(U,Z,ee){return C.H.useActionState(U,Z,ee)},ct.useCallback=function(U,Z){return C.H.useCallback(U,Z)},ct.useContext=function(U){return C.H.useContext(U)},ct.useDebugValue=function(){},ct.useDeferredValue=function(U,Z){return C.H.useDeferredValue(U,Z)},ct.useEffect=function(U,Z){return C.H.useEffect(U,Z)},ct.useEffectEvent=function(U){return C.H.useEffectEvent(U)},ct.useId=function(){return C.H.useId()},ct.useImperativeHandle=function(U,Z,ee){return C.H.useImperativeHandle(U,Z,ee)},ct.useInsertionEffect=function(U,Z){return C.H.useInsertionEffect(U,Z)},ct.useLayoutEffect=function(U,Z){return C.H.useLayoutEffect(U,Z)},ct.useMemo=function(U,Z){return C.H.useMemo(U,Z)},ct.useOptimistic=function(U,Z){return C.H.useOptimistic(U,Z)},ct.useReducer=function(U,Z,ee){return C.H.useReducer(U,Z,ee)},ct.useRef=function(U){return C.H.useRef(U)},ct.useState=function(U){return C.H.useState(U)},ct.useSyncExternalStore=function(U,Z,ee){return C.H.useSyncExternalStore(U,Z,ee)},ct.useTransition=function(){return C.H.useTransition()},ct.version="19.2.4",ct}var X4;function zp(){return X4||(X4=1,sA.exports=Mne()),sA.exports}var A=zp();const al=jl(A),jne=Dne({__proto__:null,default:al},[A]);var oA={exports:{}},pm={},lA={exports:{}},cA={};var Q4;function zne(){return Q4||(Q4=1,(function(t){function e(G,Y){var J=G.length;G.push(Y);e:for(;0<J;){var ie=J-1>>>1,X=G[ie];if(0<i(X,Y))G[ie]=Y,G[J]=X,J=ie;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],J=G.pop();if(J!==Y){G[0]=J;e:for(var ie=0,X=G.length,U=X>>>1;ie<U;){var Z=2*(ie+1)-1,ee=G[Z],K=Z+1,ue=G[K];if(0>i(ee,J))K<X&&0>i(ue,ee)?(G[ie]=ue,G[K]=J,ie=K):(G[ie]=ee,G[Z]=J,ie=Z);else if(K<X&&0>i(ue,J))G[ie]=ue,G[K]=J,ie=K;else break e}}return Y}function i(G,Y){var J=G.sortIndex-Y.sortIndex;return J!==0?J:G.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,v=!1,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=G)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function O(G){if(x=!1,D(G),!b)if(n(c)!==null)b=!0,N||(N=!0,L());else{var Y=n(u);Y!==null&&Q(O,Y.startTime-G)}}var N=!1,C=-1,I=5,R=-1;function j(){return w?!0:!(t.unstable_now()-R<I)}function B(){if(w=!1,N){var G=t.unstable_now();R=G;var Y=!0;try{e:{b=!1,x&&(x=!1,T(C),C=-1),v=!0;var J=g;try{t:{for(D(G),h=n(c);h!==null&&!(h.expirationTime>G&&j());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,g=h.priorityLevel;var X=ie(h.expirationTime<=G);if(G=t.unstable_now(),typeof X=="function"){h.callback=X,D(G),Y=!0;break t}h===n(c)&&r(c),D(G)}else r(c);h=n(c)}if(h!==null)Y=!0;else{var U=n(u);U!==null&&Q(O,U.startTime-G),Y=!1}}break e}finally{h=null,g=J,v=!1}Y=void 0}}finally{Y?L():N=!1}}}var L;if(typeof P=="function")L=function(){P(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=B,L=function(){W.postMessage(null)}}else L=function(){S(B,0)};function Q(G,Y){C=S(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var J=g;g=Y;try{return G()}finally{g=J}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=g;g=G;try{return Y()}finally{g=J}},t.unstable_scheduleCallback=function(G,Y,J){var ie=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,G){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=J+X,G={id:f++,callback:Y,priorityLevel:G,startTime:J,expirationTime:X,sortIndex:-1},J>ie?(G.sortIndex=J,e(u,G),n(c)===null&&G===n(u)&&(x?(T(C),C=-1):x=!0,Q(O,J-ie))):(G.sortIndex=X,e(c,G),b||v||(b=!0,N||(N=!0,L()))),G},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(G){var Y=g;return function(){var J=g;g=Y;try{return G.apply(this,arguments)}finally{g=J}}}})(cA)),cA}var Z4;function Lne(){return Z4||(Z4=1,lA.exports=zne()),lA.exports}var uA={exports:{}},ii={};var J4;function Vne(){if(J4)return ii;J4=1;var t=zp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ii.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ii.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},ii.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},ii.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},ii.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},ii.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ii.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},ii.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ii.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},ii.requestFormReset=function(c){r.d.r(c)},ii.unstable_batchedUpdates=function(c,u){return c(u)},ii.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},ii.useFormStatus=function(){return s.H.useHostTransitionStatus()},ii.version="19.2.4",ii}var eL;function q9(){if(eL)return uA.exports;eL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uA.exports=Vne(),uA.exports}var tL;function Bne(){if(tL)return pm;tL=1;var t=Lne(),e=zp(),n=q9();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,y=d;;){var E=p.return;if(E===null)break;var k=E.alternate;if(k===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===p)return c(E),l;if(k===y)return c(E),d;k=k.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=k;else{for(var V=!1,q=E.child;q;){if(q===p){V=!0,p=E,y=k;break}if(q===y){V=!0,y=E,p=k;break}q=q.sibling}if(!V){for(q=k.child;q;){if(q===p){V=!0,p=k,y=E;break}if(q===y){V=!0,y=k,p=E;break}q=q.sibling}if(!V)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),P=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function L(l){return l===null||typeof l!="object"?null:(l=B&&l[B]||l["@@iterator"],typeof l=="function"?l:null)}var z=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case N:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case P:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case D:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case C:return d=l.displayName||null,d!==null?d:W(l.type)||"Memo";case I:d=l._payload,l=l._init;try{return W(l(d))}catch{}}return null}var Q=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ie=[],X=-1;function U(l){return{current:l}}function Z(l){0>X||(l.current=ie[X],ie[X]=null,X--)}function ee(l,d){X++,ie[X]=l.current,l.current=d}var K=U(null),ue=U(null),ne=U(null),oe=U(null);function Se(l,d){switch(ee(ne,d),ee(ue,l),ee(K,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?m4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=m4(d),l=v4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Z(K),ee(K,l)}function se(){Z(K),Z(ue),Z(ne)}function Ae(l){l.memoizedState!==null&&ee(oe,l);var d=K.current,p=v4(d,l.type);d!==p&&(ee(ue,l),ee(K,p))}function ve(l){ue.current===l&&(Z(K),Z(ue)),oe.current===l&&(Z(oe),cm._currentValue=J)}var te,Pe;function be(l){if(te===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);te=d&&d[1]||"",Pe=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+Pe}var _e=!1;function De(l,d){if(!l||_e)return"";_e=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(we){var ye=we}Reflect.construct(l,[],Ce)}else{try{Ce.call()}catch(we){ye=we}l.call(Ce.prototype)}}else{try{throw Error()}catch(we){ye=we}(Ce=l())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(we){if(we&&ye&&typeof we.stack=="string")return[we.stack,ye.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),V=k[0],q=k[1];if(V&&q){var re=V.split(`
`),ge=q.split(`
`);for(E=y=0;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;for(;E<ge.length&&!ge[E].includes("DetermineComponentFrameRoot");)E++;if(y===re.length||E===ge.length)for(y=re.length-1,E=ge.length-1;1<=y&&0<=E&&re[y]!==ge[E];)E--;for(;1<=y&&0<=E;y--,E--)if(re[y]!==ge[E]){if(y!==1||E!==1)do if(y--,E--,0>E||re[y]!==ge[E]){var Te=`
`+re[y].replace(" at new "," at ");return l.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",l.displayName)),Te}while(1<=y&&0<=E);break}}}finally{_e=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?be(p):""}function Oe(l,d){switch(l.tag){case 26:case 27:case 5:return be(l.type);case 16:return be("Lazy");case 13:return l.child!==d&&d!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return De(l.type,!1);case 11:return De(l.type.render,!1);case 1:return De(l.type,!0);case 31:return be("Activity");default:return""}}function Ye(l){try{var d="",p=null;do d+=Oe(l,p),p=l,l=l.return;while(l);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Ve=Object.prototype.hasOwnProperty,it=t.unstable_scheduleCallback,Ft=t.unstable_cancelCallback,Gn=t.unstable_shouldYield,An=t.unstable_requestPaint,yt=t.unstable_now,Ut=t.unstable_getCurrentPriorityLevel,ei=t.unstable_ImmediatePriority,ti=t.unstable_UserBlockingPriority,ze=t.unstable_NormalPriority,wt=t.unstable_LowPriority,Ir=t.unstable_IdlePriority,Mn=t.log,kn=t.unstable_setDisableYieldValue,dn=null,Mt=null;function fn(l){if(typeof Mn=="function"&&kn(l),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(dn,l)}catch{}}var at=Math.clz32?Math.clz32:pr,ni=Math.log,hn=Math.LN2;function pr(l){return l>>>=0,l===0?32:31-(ni(l)/hn|0)|0}var ut=256,pn=262144,on=4194304;function mi(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ri(l,d,p){var y=l.pendingLanes;if(y===0)return 0;var E=0,k=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var q=y&134217727;return q!==0?(y=q&~k,y!==0?E=mi(y):(V&=q,V!==0?E=mi(V):p||(p=q&~l,p!==0&&(E=mi(p))))):(q=y&~k,q!==0?E=mi(q):V!==0?E=mi(V):p||(p=y&~l,p!==0&&(E=mi(p)))),E===0?0:d!==0&&d!==E&&(d&k)===0&&(k=E&-E,p=d&-d,k>=p||k===32&&(p&4194048)!==0)?d:E}function Cn(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function es(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gl(){var l=on;return on<<=1,(on&62914560)===0&&(on=4194304),l}function js(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function _u(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function uE(l,d,p,y,E,k){var V=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var q=l.entanglements,re=l.expirationTimes,ge=l.hiddenUpdates;for(p=V&~p;0<p;){var Te=31-at(p),Ce=1<<Te;q[Te]=0,re[Te]=-1;var ye=ge[Te];if(ye!==null)for(ge[Te]=null,Te=0;Te<ye.length;Te++){var we=ye[Te];we!==null&&(we.lane&=-536870913)}p&=~Ce}y!==0&&Eu(l,y,0),k!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=k&~(V&~d))}function Eu(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-at(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function pg(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-at(p),E=1<<y;E&d|l[y]&d&&(l[y]|=d),p&=~E}}function gg(l,d){var p=d&-d;return p=(p&42)!==0?1:Tu(p),(p&(l.suspendedLanes|d))!==0?0:p}function Tu(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function zo(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function my(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:B4(l.type))}function ts(l,d){var p=Y.p;try{return Y.p=l,d()}finally{Y.p=p}}var ns=Math.random().toString(36).slice(2),Zn="__reactFiber$"+ns,Pr="__reactProps$"+ns,zs="__reactContainer$"+ns,yf="__reactEvents$"+ns,dE="__reactListeners$"+ns,vy="__reactHandles$"+ns,yy="__reactResources$"+ns,Ls="__reactMarker$"+ns;function bf(l){delete l[Zn],delete l[Pr],delete l[yf],delete l[dE],delete l[vy]}function Vs(l){var d=l[Zn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[zs]||p[Zn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=E4(l);l!==null;){if(p=l[Zn])return p;l=E4(l)}return d}l=p,p=l.parentNode}return null}function Sa(l){if(l=l[Zn]||l[zs]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Zi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Bs(l){var d=l[yy];return d||(d=l[yy]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Jn(l){l[Ls]=!0}var mg=new Set,vg={};function Fs(l,d){Us(l,d),Us(l+"Capture",d)}function Us(l,d){for(vg[l]=d,l=0;l<d.length;l++)mg.add(d[l])}var yg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bg={},xg={};function by(l){return Ve.call(xg,l)?!0:Ve.call(bg,l)?!1:yg.test(l)?xg[l]=!0:(bg[l]=!0,!1)}function xf(l,d,p){if(by(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Ji(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function er(l,d,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+y)}}function Nr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Hl(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function wg(l,d,p){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,k=y.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(V){p=""+V,k.call(this,V)}}),Object.defineProperty(l,d,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(V){p=""+V},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function $t(l){if(!l._valueTracker){var d=Hl(l)?"checked":"value";l._valueTracker=wg(l,d,""+l[d])}}function Au(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=Hl(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function $s(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var ku=/[\n"\\]/g;function Ni(l){return l.replace(ku,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function wf(l,d,p,y,E,k,V,q){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),d!=null?V==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Nr(d)):l.value!==""+Nr(d)&&(l.value=""+Nr(d)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),d!=null?Sg(l,V,Nr(d)):p!=null?Sg(l,V,Nr(p)):y!=null&&l.removeAttribute("value"),E==null&&k!=null&&(l.defaultChecked=!!k),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.name=""+Nr(q):l.removeAttribute("name")}function xy(l,d,p,y,E,k,V,q){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(l.type=k),d!=null||p!=null){if(!(k!=="submit"&&k!=="reset"||d!=null)){$t(l);return}p=p!=null?""+Nr(p):"",d=d!=null?""+Nr(d):p,q||d===l.value||(l.value=d),l.defaultValue=d}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=q?l.checked:!!y,l.defaultChecked=!!y,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),$t(l)}function Sg(l,d,p){d==="number"&&$s(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Kl(l,d,p,y){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+Nr(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function wy(l,d,p){if(d!=null&&(d=""+Nr(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Nr(p):""}function Wl(l,d,p,y){if(d==null){if(y!=null){if(p!=null)throw Error(r(92));if(Q(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),d=p}p=Nr(d),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y),$t(l)}function Di(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var Sy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _g(l,d,p){var y=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,p):typeof p!="number"||p===0||Sy.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function Eg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var E in d)y=d[E],d.hasOwnProperty(E)&&p[E]!==y&&_g(l,E,y)}else for(var k in d)d.hasOwnProperty(k)&&_g(l,k,d[k])}function Sf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _y=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _f(l){return Yl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function rs(){}var Tg=null;function _a(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Xl=null,qs=null;function Cu(l){var d=Sa(l);if(d&&(l=d.stateNode)){var p=l[Pr]||null;e:switch(l=d.stateNode,d.type){case"input":if(wf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ni(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var E=y[Pr]||null;if(!E)throw Error(r(90));wf(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)y=p[d],y.form===l.form&&Au(y)}break e;case"textarea":wy(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Kl(l,!!p.multiple,d,!1)}}}var Ef=!1;function Ql(l,d,p){if(Ef)return l(d,p);Ef=!0;try{var y=l(d);return y}finally{if(Ef=!1,(Xl!==null||qs!==null)&&(mb(),Xl&&(d=Xl,l=qs,qs=Xl=null,Cu(d),l)))for(d=0;d<l.length;d++)Cu(l[d])}}function is(l,d){var p=l.stateNode;if(p===null)return null;var y=p[Pr]||null;if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iu=!1;if(Ea)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){Iu=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{Iu=!1}var Gs=null,Ag=null,Pu=null;function kg(){if(Pu)return Pu;var l,d=Ag,p=d.length,y,E="value"in Gs?Gs.value:Gs.textContent,k=E.length;for(l=0;l<p&&d[l]===E[l];l++);var V=p-l;for(y=1;y<=V&&d[p-y]===E[k-y];y++);return Pu=E.slice(l,1<y?1-y:void 0)}function Nu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Lo(){return!0}function as(){return!1}function Ur(l){function d(p,y,E,k,V){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=k,this.target=V,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(p=l[q],this[q]=p?p(k):k[q]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Lo:as,this.isPropagationStopped=as,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),d}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hs=Ur(Vo),Zl=h({},Vo,{view:0,detail:0}),Cg=Ur(Zl),Jl,Tf,Ks,Af=h({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ec,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ks&&(Ks&&l.type==="mousemove"?(Jl=l.screenX-Ks.screenX,Tf=l.screenY-Ks.screenY):Tf=Jl=0,Ks=l),Jl)},movementY:function(l){return"movementY"in l?l.movementY:Tf}}),Ig=Ur(Af),Du=h({},Af,{dataTransfer:0}),Ey=Ur(Du),Ty=h({},Zl,{relatedTarget:0}),Ou=Ur(Ty),Pg=h({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ay=Ur(Pg),kf=h({},Vo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),ky=Ur(kf),Cy=h({},Vo,{data:0}),Ws=Ur(Cy),Iy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Py={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ny={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Ny[l])?!!d[l]:!1}function ec(){return Dy}var vi=h({},Zl,{key:function(l){if(l.key){var d=Iy[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Nu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Py[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ec,charCode:function(l){return l.type==="keypress"?Nu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Nu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Oy=Ur(vi),Ry=h({},Af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bo=Ur(Ry),_=h({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ec}),M=Ur(_),F=h({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Ur(F),he=h({},Af,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=Ur(he),je=h({},Vo,{newState:0,oldState:0}),dt=Ur(je),Hn=[9,13,27,32],jt=Ea&&"CompositionEvent"in window,wn=null;Ea&&"documentMode"in document&&(wn=document.documentMode);var Ta=Ea&&"TextEvent"in window&&!wn,Ys=Ea&&(!jt||wn&&8<wn&&11>=wn),ss=" ",os=!1;function Ru(l,d){switch(l){case"keyup":return Hn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cf(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var If=!1;function nte(l,d){switch(l){case"compositionend":return Cf(d);case"keypress":return d.which!==32?null:(os=!0,ss);case"textInput":return l=d.data,l===ss&&os?null:l;default:return null}}function rte(l,d){if(If)return l==="compositionend"||!jt&&Ru(l,d)?(l=kg(),Pu=Ag=Gs=null,If=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ys&&d.locale!=="ko"?null:d.data;default:return null}}var ite={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kM(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!ite[l.type]:d==="textarea"}function CM(l,d,p,y){Xl?qs?qs.push(y):qs=[y]:Xl=y,d=_b(d,"onChange"),0<d.length&&(p=new Hs("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var Ng=null,Dg=null;function ate(l){u4(l,0)}function My(l){var d=Zi(l);if(Au(d))return l}function IM(l,d){if(l==="change")return d}var PM=!1;if(Ea){var fE;if(Ea){var hE="oninput"in document;if(!hE){var NM=document.createElement("div");NM.setAttribute("oninput","return;"),hE=typeof NM.oninput=="function"}fE=hE}else fE=!1;PM=fE&&(!document.documentMode||9<document.documentMode)}function DM(){Ng&&(Ng.detachEvent("onpropertychange",OM),Dg=Ng=null)}function OM(l){if(l.propertyName==="value"&&My(Dg)){var d=[];CM(d,Dg,l,_a(l)),Ql(ate,d)}}function ste(l,d,p){l==="focusin"?(DM(),Ng=d,Dg=p,Ng.attachEvent("onpropertychange",OM)):l==="focusout"&&DM()}function ote(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return My(Dg)}function lte(l,d){if(l==="click")return My(d)}function cte(l,d){if(l==="input"||l==="change")return My(d)}function ute(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var ea=typeof Object.is=="function"?Object.is:ute;function Og(l,d){if(ea(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!Ve.call(d,E)||!ea(l[E],d[E]))return!1}return!0}function RM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function MM(l,d){var p=RM(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=RM(p)}}function jM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?jM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function zM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=$s(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=$s(l.document)}return d}function pE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var dte=Ea&&"documentMode"in document&&11>=document.documentMode,Pf=null,gE=null,Rg=null,mE=!1;function LM(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;mE||Pf==null||Pf!==$s(y)||(y=Pf,"selectionStart"in y&&pE(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Rg&&Og(Rg,y)||(Rg=y,y=_b(gE,"onSelect"),0<y.length&&(d=new Hs("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=Pf)))}function Mu(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Nf={animationend:Mu("Animation","AnimationEnd"),animationiteration:Mu("Animation","AnimationIteration"),animationstart:Mu("Animation","AnimationStart"),transitionrun:Mu("Transition","TransitionRun"),transitionstart:Mu("Transition","TransitionStart"),transitioncancel:Mu("Transition","TransitionCancel"),transitionend:Mu("Transition","TransitionEnd")},vE={},VM={};Ea&&(VM=document.createElement("div").style,"AnimationEvent"in window||(delete Nf.animationend.animation,delete Nf.animationiteration.animation,delete Nf.animationstart.animation),"TransitionEvent"in window||delete Nf.transitionend.transition);function ju(l){if(vE[l])return vE[l];if(!Nf[l])return l;var d=Nf[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in VM)return vE[l]=d[p];return l}var BM=ju("animationend"),FM=ju("animationiteration"),UM=ju("animationstart"),fte=ju("transitionrun"),hte=ju("transitionstart"),pte=ju("transitioncancel"),$M=ju("transitionend"),qM=new Map,yE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yE.push("scrollEnd");function ls(l,d){qM.set(l,d),Fs(d,[l])}var jy=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Aa=[],Df=0,bE=0;function zy(){for(var l=Df,d=bE=Df=0;d<l;){var p=Aa[d];Aa[d++]=null;var y=Aa[d];Aa[d++]=null;var E=Aa[d];Aa[d++]=null;var k=Aa[d];if(Aa[d++]=null,y!==null&&E!==null){var V=y.pending;V===null?E.next=E:(E.next=V.next,V.next=E),y.pending=E}k!==0&&GM(p,E,k)}}function Ly(l,d,p,y){Aa[Df++]=l,Aa[Df++]=d,Aa[Df++]=p,Aa[Df++]=y,bE|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function xE(l,d,p,y){return Ly(l,d,p,y),Vy(l)}function zu(l,d){return Ly(l,null,null,d),Vy(l)}function GM(l,d,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var E=!1,k=l.return;k!==null;)k.childLanes|=p,y=k.alternate,y!==null&&(y.childLanes|=p),k.tag===22&&(l=k.stateNode,l===null||l._visibility&1||(E=!0)),l=k,k=k.return;return l.tag===3?(k=l.stateNode,E&&d!==null&&(E=31-at(p),l=k.hiddenUpdates,y=l[E],y===null?l[E]=[d]:y.push(d),d.lane=p|536870912),k):null}function Vy(l){if(50<nm)throw nm=0,IT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Of={};function gte(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(l,d,p,y){return new gte(l,d,p,y)}function wE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Fo(l,d){var p=l.alternate;return p===null?(p=ta(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function HM(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function By(l,d,p,y,E,k){var V=0;if(y=l,typeof l=="function")wE(l)&&(V=1);else if(typeof l=="string")V=xne(l,p,K.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=ta(31,p,d,E),l.elementType=R,l.lanes=k,l;case x:return Lu(p.children,E,k,d);case w:V=8,E|=24;break;case S:return l=ta(12,p,d,E|2),l.elementType=S,l.lanes=k,l;case O:return l=ta(13,p,d,E),l.elementType=O,l.lanes=k,l;case N:return l=ta(19,p,d,E),l.elementType=N,l.lanes=k,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case P:V=10;break e;case T:V=9;break e;case D:V=11;break e;case C:V=14;break e;case I:V=16,y=null;break e}V=29,p=Error(r(130,l===null?"null":typeof l,"")),y=null}return d=ta(V,p,d,E),d.elementType=l,d.type=y,d.lanes=k,d}function Lu(l,d,p,y){return l=ta(7,l,y,d),l.lanes=p,l}function SE(l,d,p){return l=ta(6,l,null,d),l.lanes=p,l}function KM(l){var d=ta(18,null,null,0);return d.stateNode=l,d}function _E(l,d,p){return d=ta(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var WM=new WeakMap;function ka(l,d){if(typeof l=="object"&&l!==null){var p=WM.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Ye(d)},WM.set(l,d),d)}return{value:l,source:d,stack:Ye(d)}}var Rf=[],Mf=0,Fy=null,Mg=0,Ca=[],Ia=0,tc=null,Xs=1,Qs="";function Uo(l,d){Rf[Mf++]=Mg,Rf[Mf++]=Fy,Fy=l,Mg=d}function YM(l,d,p){Ca[Ia++]=Xs,Ca[Ia++]=Qs,Ca[Ia++]=tc,tc=l;var y=Xs;l=Qs;var E=32-at(y)-1;y&=~(1<<E),p+=1;var k=32-at(d)+E;if(30<k){var V=E-E%5;k=(y&(1<<V)-1).toString(32),y>>=V,E-=V,Xs=1<<32-at(d)+E|p<<E|y,Qs=k+l}else Xs=1<<k|p<<E|y,Qs=l}function EE(l){l.return!==null&&(Uo(l,1),YM(l,1,0))}function TE(l){for(;l===Fy;)Fy=Rf[--Mf],Rf[Mf]=null,Mg=Rf[--Mf],Rf[Mf]=null;for(;l===tc;)tc=Ca[--Ia],Ca[Ia]=null,Qs=Ca[--Ia],Ca[Ia]=null,Xs=Ca[--Ia],Ca[Ia]=null}function XM(l,d){Ca[Ia++]=Xs,Ca[Ia++]=Qs,Ca[Ia++]=tc,Xs=d.id,Qs=d.overflow,tc=l}var $r=null,gn=null,It=!1,nc=null,Pa=!1,AE=Error(r(519));function rc(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jg(ka(d,l)),AE}function QM(l){var d=l.stateNode,p=l.type,y=l.memoizedProps;switch(d[Zn]=l,d[Pr]=y,p){case"dialog":_t("cancel",d),_t("close",d);break;case"iframe":case"object":case"embed":_t("load",d);break;case"video":case"audio":for(p=0;p<im.length;p++)_t(im[p],d);break;case"source":_t("error",d);break;case"img":case"image":case"link":_t("error",d),_t("load",d);break;case"details":_t("toggle",d);break;case"input":_t("invalid",d),xy(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":_t("invalid",d);break;case"textarea":_t("invalid",d),Wl(d,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||y.suppressHydrationWarning===!0||p4(d.textContent,p)?(y.popover!=null&&(_t("beforetoggle",d),_t("toggle",d)),y.onScroll!=null&&_t("scroll",d),y.onScrollEnd!=null&&_t("scrollend",d),y.onClick!=null&&(d.onclick=rs),d=!0):d=!1,d||rc(l,!0)}function ZM(l){for($r=l.return;$r;)switch($r.tag){case 5:case 31:case 13:Pa=!1;return;case 27:case 3:Pa=!0;return;default:$r=$r.return}}function jf(l){if(l!==$r)return!1;if(!It)return ZM(l),It=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||qT(l.type,l.memoizedProps)),p=!p),p&&gn&&rc(l),ZM(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));gn=_4(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));gn=_4(l)}else d===27?(d=gn,vc(l.type)?(l=YT,YT=null,gn=l):gn=d):gn=$r?Da(l.stateNode.nextSibling):null;return!0}function Vu(){gn=$r=null,It=!1}function kE(){var l=nc;return l!==null&&(ji===null?ji=l:ji.push.apply(ji,l),nc=null),l}function jg(l){nc===null?nc=[l]:nc.push(l)}var CE=U(null),Bu=null,$o=null;function ic(l,d,p){ee(CE,d._currentValue),d._currentValue=p}function qo(l){l._currentValue=CE.current,Z(CE)}function IE(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function PE(l,d,p,y){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var k=E.dependencies;if(k!==null){var V=E.child;k=k.firstContext;e:for(;k!==null;){var q=k;k=E;for(var re=0;re<d.length;re++)if(q.context===d[re]){k.lanes|=p,q=k.alternate,q!==null&&(q.lanes|=p),IE(k.return,p,l),y||(V=null);break e}k=q.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(r(341));V.lanes|=p,k=V.alternate,k!==null&&(k.lanes|=p),IE(V,p,l),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===l){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function zf(l,d,p,y){l=null;for(var E=d,k=!1;E!==null;){if(!k){if((E.flags&524288)!==0)k=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var q=E.type;ea(E.pendingProps.value,V.value)||(l!==null?l.push(q):l=[q])}}else if(E===oe.current){if(V=E.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(cm):l=[cm])}E=E.return}l!==null&&PE(d,l,p,y),d.flags|=262144}function Uy(l){for(l=l.firstContext;l!==null;){if(!ea(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Fu(l){Bu=l,$o=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function qr(l){return JM(Bu,l)}function $y(l,d){return Bu===null&&Fu(l),JM(l,d)}function JM(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},$o===null){if(l===null)throw Error(r(308));$o=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else $o=$o.next=d;return p}var mte=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},vte=t.unstable_scheduleCallback,yte=t.unstable_NormalPriority,tr={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function NE(){return{controller:new mte,data:new Map,refCount:0}}function zg(l){l.refCount--,l.refCount===0&&vte(yte,function(){l.controller.abort()})}var Lg=null,DE=0,Lf=0,Vf=null;function bte(l,d){if(Lg===null){var p=Lg=[];DE=0,Lf=MT(),Vf={status:"pending",value:void 0,then:function(y){p.push(y)}}}return DE++,d.then(ej,ej),d}function ej(){if(--DE===0&&Lg!==null){Vf!==null&&(Vf.status="fulfilled");var l=Lg;Lg=null,Lf=0,Vf=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function xte(l,d){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var tj=G.S;G.S=function(l,d){Lz=yt(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&bte(l,d),tj!==null&&tj(l,d)};var Uu=U(null);function OE(){var l=Uu.current;return l!==null?l:an.pooledCache}function qy(l,d){d===null?ee(Uu,Uu.current):ee(Uu,d.pool)}function nj(){var l=OE();return l===null?null:{parent:tr._currentValue,pool:l}}var Bf=Error(r(460)),RE=Error(r(474)),Gy=Error(r(542)),Hy={then:function(){}};function rj(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ij(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(rs,rs),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,sj(l),l;default:if(typeof d.status=="string")d.then(rs,rs);else{if(l=an,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=y}},function(y){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,sj(l),l}throw qu=d,Bf}}function $u(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(qu=p,Bf):p}}var qu=null;function aj(){if(qu===null)throw Error(r(459));var l=qu;return qu=null,l}function sj(l){if(l===Bf||l===Gy)throw Error(r(483))}var Ff=null,Vg=0;function Ky(l){var d=Vg;return Vg+=1,Ff===null&&(Ff=[]),ij(Ff,l,d)}function Bg(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Wy(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function oj(l){function d(de,ce){if(l){var pe=de.deletions;pe===null?(de.deletions=[ce],de.flags|=16):pe.push(ce)}}function p(de,ce){if(!l)return null;for(;ce!==null;)d(de,ce),ce=ce.sibling;return null}function y(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function E(de,ce){return de=Fo(de,ce),de.index=0,de.sibling=null,de}function k(de,ce,pe){return de.index=pe,l?(pe=de.alternate,pe!==null?(pe=pe.index,pe<ce?(de.flags|=67108866,ce):pe):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function V(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function q(de,ce,pe,ke){return ce===null||ce.tag!==6?(ce=SE(pe,de.mode,ke),ce.return=de,ce):(ce=E(ce,pe),ce.return=de,ce)}function re(de,ce,pe,ke){var Je=pe.type;return Je===x?Te(de,ce,pe.props.children,ke,pe.key):ce!==null&&(ce.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===I&&$u(Je)===ce.type)?(ce=E(ce,pe.props),Bg(ce,pe),ce.return=de,ce):(ce=By(pe.type,pe.key,pe.props,null,de.mode,ke),Bg(ce,pe),ce.return=de,ce)}function ge(de,ce,pe,ke){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==pe.containerInfo||ce.stateNode.implementation!==pe.implementation?(ce=_E(pe,de.mode,ke),ce.return=de,ce):(ce=E(ce,pe.children||[]),ce.return=de,ce)}function Te(de,ce,pe,ke,Je){return ce===null||ce.tag!==7?(ce=Lu(pe,de.mode,ke,Je),ce.return=de,ce):(ce=E(ce,pe),ce.return=de,ce)}function Ce(de,ce,pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=SE(""+ce,de.mode,pe),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return pe=By(ce.type,ce.key,ce.props,null,de.mode,pe),Bg(pe,ce),pe.return=de,pe;case b:return ce=_E(ce,de.mode,pe),ce.return=de,ce;case I:return ce=$u(ce),Ce(de,ce,pe)}if(Q(ce)||L(ce))return ce=Lu(ce,de.mode,pe,null),ce.return=de,ce;if(typeof ce.then=="function")return Ce(de,Ky(ce),pe);if(ce.$$typeof===P)return Ce(de,$y(de,ce),pe);Wy(de,ce)}return null}function ye(de,ce,pe,ke){var Je=ce!==null?ce.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Je!==null?null:q(de,ce,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case v:return pe.key===Je?re(de,ce,pe,ke):null;case b:return pe.key===Je?ge(de,ce,pe,ke):null;case I:return pe=$u(pe),ye(de,ce,pe,ke)}if(Q(pe)||L(pe))return Je!==null?null:Te(de,ce,pe,ke,null);if(typeof pe.then=="function")return ye(de,ce,Ky(pe),ke);if(pe.$$typeof===P)return ye(de,ce,$y(de,pe),ke);Wy(de,pe)}return null}function we(de,ce,pe,ke,Je){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return de=de.get(pe)||null,q(ce,de,""+ke,Je);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case v:return de=de.get(ke.key===null?pe:ke.key)||null,re(ce,de,ke,Je);case b:return de=de.get(ke.key===null?pe:ke.key)||null,ge(ce,de,ke,Je);case I:return ke=$u(ke),we(de,ce,pe,ke,Je)}if(Q(ke)||L(ke))return de=de.get(pe)||null,Te(ce,de,ke,Je,null);if(typeof ke.then=="function")return we(de,ce,pe,Ky(ke),Je);if(ke.$$typeof===P)return we(de,ce,pe,$y(ce,ke),Je);Wy(ce,ke)}return null}function $e(de,ce,pe,ke){for(var Je=null,Dt=null,We=ce,pt=ce=0,At=null;We!==null&&pt<pe.length;pt++){We.index>pt?(At=We,We=null):At=We.sibling;var Ot=ye(de,We,pe[pt],ke);if(Ot===null){We===null&&(We=At);break}l&&We&&Ot.alternate===null&&d(de,We),ce=k(Ot,ce,pt),Dt===null?Je=Ot:Dt.sibling=Ot,Dt=Ot,We=At}if(pt===pe.length)return p(de,We),It&&Uo(de,pt),Je;if(We===null){for(;pt<pe.length;pt++)We=Ce(de,pe[pt],ke),We!==null&&(ce=k(We,ce,pt),Dt===null?Je=We:Dt.sibling=We,Dt=We);return It&&Uo(de,pt),Je}for(We=y(We);pt<pe.length;pt++)At=we(We,de,pt,pe[pt],ke),At!==null&&(l&&At.alternate!==null&&We.delete(At.key===null?pt:At.key),ce=k(At,ce,pt),Dt===null?Je=At:Dt.sibling=At,Dt=At);return l&&We.forEach(function(Sc){return d(de,Sc)}),It&&Uo(de,pt),Je}function st(de,ce,pe,ke){if(pe==null)throw Error(r(151));for(var Je=null,Dt=null,We=ce,pt=ce=0,At=null,Ot=pe.next();We!==null&&!Ot.done;pt++,Ot=pe.next()){We.index>pt?(At=We,We=null):At=We.sibling;var Sc=ye(de,We,Ot.value,ke);if(Sc===null){We===null&&(We=At);break}l&&We&&Sc.alternate===null&&d(de,We),ce=k(Sc,ce,pt),Dt===null?Je=Sc:Dt.sibling=Sc,Dt=Sc,We=At}if(Ot.done)return p(de,We),It&&Uo(de,pt),Je;if(We===null){for(;!Ot.done;pt++,Ot=pe.next())Ot=Ce(de,Ot.value,ke),Ot!==null&&(ce=k(Ot,ce,pt),Dt===null?Je=Ot:Dt.sibling=Ot,Dt=Ot);return It&&Uo(de,pt),Je}for(We=y(We);!Ot.done;pt++,Ot=pe.next())Ot=we(We,de,pt,Ot.value,ke),Ot!==null&&(l&&Ot.alternate!==null&&We.delete(Ot.key===null?pt:Ot.key),ce=k(Ot,ce,pt),Dt===null?Je=Ot:Dt.sibling=Ot,Dt=Ot);return l&&We.forEach(function(Nne){return d(de,Nne)}),It&&Uo(de,pt),Je}function Jt(de,ce,pe,ke){if(typeof pe=="object"&&pe!==null&&pe.type===x&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case v:e:{for(var Je=pe.key;ce!==null;){if(ce.key===Je){if(Je=pe.type,Je===x){if(ce.tag===7){p(de,ce.sibling),ke=E(ce,pe.props.children),ke.return=de,de=ke;break e}}else if(ce.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===I&&$u(Je)===ce.type){p(de,ce.sibling),ke=E(ce,pe.props),Bg(ke,pe),ke.return=de,de=ke;break e}p(de,ce);break}else d(de,ce);ce=ce.sibling}pe.type===x?(ke=Lu(pe.props.children,de.mode,ke,pe.key),ke.return=de,de=ke):(ke=By(pe.type,pe.key,pe.props,null,de.mode,ke),Bg(ke,pe),ke.return=de,de=ke)}return V(de);case b:e:{for(Je=pe.key;ce!==null;){if(ce.key===Je)if(ce.tag===4&&ce.stateNode.containerInfo===pe.containerInfo&&ce.stateNode.implementation===pe.implementation){p(de,ce.sibling),ke=E(ce,pe.children||[]),ke.return=de,de=ke;break e}else{p(de,ce);break}else d(de,ce);ce=ce.sibling}ke=_E(pe,de.mode,ke),ke.return=de,de=ke}return V(de);case I:return pe=$u(pe),Jt(de,ce,pe,ke)}if(Q(pe))return $e(de,ce,pe,ke);if(L(pe)){if(Je=L(pe),typeof Je!="function")throw Error(r(150));return pe=Je.call(pe),st(de,ce,pe,ke)}if(typeof pe.then=="function")return Jt(de,ce,Ky(pe),ke);if(pe.$$typeof===P)return Jt(de,ce,$y(de,pe),ke);Wy(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,ce!==null&&ce.tag===6?(p(de,ce.sibling),ke=E(ce,pe),ke.return=de,de=ke):(p(de,ce),ke=SE(pe,de.mode,ke),ke.return=de,de=ke),V(de)):p(de,ce)}return function(de,ce,pe,ke){try{Vg=0;var Je=Jt(de,ce,pe,ke);return Ff=null,Je}catch(We){if(We===Bf||We===Gy)throw We;var Dt=ta(29,We,null,de.mode);return Dt.lanes=ke,Dt.return=de,Dt}}}var Gu=oj(!0),lj=oj(!1),ac=!1;function ME(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function sc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function oc(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(zt&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,d=Vy(l),GM(l,null,p),d}return Ly(l,y,d,p),Vy(l)}function Fg(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,pg(l,p)}}function zE(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,k=null;if(p=p.firstBaseUpdate,p!==null){do{var V={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};k===null?E=k=V:k=k.next=V,p=p.next}while(p!==null);k===null?E=k=d:k=k.next=d}else E=k=d;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var LE=!1;function Ug(){if(LE){var l=Vf;if(l!==null)throw l}}function $g(l,d,p,y){LE=!1;var E=l.updateQueue;ac=!1;var k=E.firstBaseUpdate,V=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var re=q,ge=re.next;re.next=null,V===null?k=ge:V.next=ge,V=re;var Te=l.alternate;Te!==null&&(Te=Te.updateQueue,q=Te.lastBaseUpdate,q!==V&&(q===null?Te.firstBaseUpdate=ge:q.next=ge,Te.lastBaseUpdate=re))}if(k!==null){var Ce=E.baseState;V=0,Te=ge=re=null,q=k;do{var ye=q.lane&-536870913,we=ye!==q.lane;if(we?(Tt&ye)===ye:(y&ye)===ye){ye!==0&&ye===Lf&&(LE=!0),Te!==null&&(Te=Te.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var $e=l,st=q;ye=d;var Jt=p;switch(st.tag){case 1:if($e=st.payload,typeof $e=="function"){Ce=$e.call(Jt,Ce,ye);break e}Ce=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=st.payload,ye=typeof $e=="function"?$e.call(Jt,Ce,ye):$e,ye==null)break e;Ce=h({},Ce,ye);break e;case 2:ac=!0}}ye=q.callback,ye!==null&&(l.flags|=64,we&&(l.flags|=8192),we=E.callbacks,we===null?E.callbacks=[ye]:we.push(ye))}else we={lane:ye,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Te===null?(ge=Te=we,re=Ce):Te=Te.next=we,V|=ye;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;we=q,q=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);Te===null&&(re=Ce),E.baseState=re,E.firstBaseUpdate=ge,E.lastBaseUpdate=Te,k===null&&(E.shared.lanes=0),fc|=V,l.lanes=V,l.memoizedState=Ce}}function cj(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function uj(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)cj(p[l],d)}var Uf=U(null),Yy=U(0);function dj(l,d){l=Jo,ee(Yy,l),ee(Uf,d),Jo=l|d.baseLanes}function VE(){ee(Yy,Jo),ee(Uf,Uf.current)}function BE(){Jo=Yy.current,Z(Uf),Z(Yy)}var na=U(null),Na=null;function lc(l){var d=l.alternate;ee(Kn,Kn.current&1),ee(na,l),Na===null&&(d===null||Uf.current!==null||d.memoizedState!==null)&&(Na=l)}function FE(l){ee(Kn,Kn.current),ee(na,l),Na===null&&(Na=l)}function fj(l){l.tag===22?(ee(Kn,Kn.current),ee(na,l),Na===null&&(Na=l)):cc()}function cc(){ee(Kn,Kn.current),ee(na,na.current)}function ra(l){Z(na),Na===l&&(Na=null),Z(Kn)}var Kn=U(0);function Xy(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||KT(p)||WT(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Go=0,ft=null,Qt=null,nr=null,Qy=!1,$f=!1,Hu=!1,Zy=0,qg=0,qf=null,wte=0;function jn(){throw Error(r(321))}function UE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!ea(l[p],d[p]))return!1;return!0}function $E(l,d,p,y,E,k){return Go=k,ft=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,G.H=l===null||l.memoizedState===null?Yj:iT,Hu=!1,k=p(y,E),Hu=!1,$f&&(k=pj(d,p,y,E)),hj(l),k}function hj(l){G.H=Kg;var d=Qt!==null&&Qt.next!==null;if(Go=0,nr=Qt=ft=null,Qy=!1,qg=0,qf=null,d)throw Error(r(300));l===null||rr||(l=l.dependencies,l!==null&&Uy(l)&&(rr=!0))}function pj(l,d,p,y){ft=l;var E=0;do{if($f&&(qf=null),qg=0,$f=!1,25<=E)throw Error(r(301));if(E+=1,nr=Qt=null,l.updateQueue!=null){var k=l.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}G.H=Xj,k=d(p,y)}while($f);return k}function Ste(){var l=G.H,d=l.useState()[0];return d=typeof d.then=="function"?Gg(d):d,l=l.useState()[0],(Qt!==null?Qt.memoizedState:null)!==l&&(ft.flags|=1024),d}function qE(){var l=Zy!==0;return Zy=0,l}function GE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function HE(l){if(Qy){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Qy=!1}Go=0,nr=Qt=ft=null,$f=!1,qg=Zy=0,qf=null}function yi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?ft.memoizedState=nr=l:nr=nr.next=l,nr}function Wn(){if(Qt===null){var l=ft.alternate;l=l!==null?l.memoizedState:null}else l=Qt.next;var d=nr===null?ft.memoizedState:nr.next;if(d!==null)nr=d,Qt=l;else{if(l===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Qt=l,l={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},nr===null?ft.memoizedState=nr=l:nr=nr.next=l}return nr}function Jy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gg(l){var d=qg;return qg+=1,qf===null&&(qf=[]),l=ij(qf,l,d),d=ft,(nr===null?d.memoizedState:nr.next)===null&&(d=d.alternate,G.H=d===null||d.memoizedState===null?Yj:iT),l}function eb(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Gg(l);if(l.$$typeof===P)return qr(l)}throw Error(r(438,String(l)))}function KE(l){var d=null,p=ft.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var y=ft.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=Jy(),ft.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),y=0;y<l;y++)p[y]=j;return d.index++,p}function Ho(l,d){return typeof d=="function"?d(l):d}function tb(l){var d=Wn();return WE(d,Qt,l)}function WE(l,d,p){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var E=l.baseQueue,k=y.pending;if(k!==null){if(E!==null){var V=E.next;E.next=k.next,k.next=V}d.baseQueue=E=k,y.pending=null}if(k=l.baseState,E===null)l.memoizedState=k;else{d=E.next;var q=V=null,re=null,ge=d,Te=!1;do{var Ce=ge.lane&-536870913;if(Ce!==ge.lane?(Tt&Ce)===Ce:(Go&Ce)===Ce){var ye=ge.revertLane;if(ye===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ce===Lf&&(Te=!0);else if((Go&ye)===ye){ge=ge.next,ye===Lf&&(Te=!0);continue}else Ce={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},re===null?(q=re=Ce,V=k):re=re.next=Ce,ft.lanes|=ye,fc|=ye;Ce=ge.action,Hu&&p(k,Ce),k=ge.hasEagerState?ge.eagerState:p(k,Ce)}else ye={lane:Ce,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},re===null?(q=re=ye,V=k):re=re.next=ye,ft.lanes|=Ce,fc|=Ce;ge=ge.next}while(ge!==null&&ge!==d);if(re===null?V=k:re.next=q,!ea(k,l.memoizedState)&&(rr=!0,Te&&(p=Vf,p!==null)))throw p;l.memoizedState=k,l.baseState=V,l.baseQueue=re,y.lastRenderedState=k}return E===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function YE(l){var d=Wn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,k=d.memoizedState;if(E!==null){p.pending=null;var V=E=E.next;do k=l(k,V.action),V=V.next;while(V!==E);ea(k,d.memoizedState)||(rr=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),p.lastRenderedState=k}return[k,y]}function gj(l,d,p){var y=ft,E=Wn(),k=It;if(k){if(p===void 0)throw Error(r(407));p=p()}else p=d();var V=!ea((Qt||E).memoizedState,p);if(V&&(E.memoizedState=p,rr=!0),E=E.queue,ZE(yj.bind(null,y,E,l),[l]),E.getSnapshot!==d||V||nr!==null&&nr.memoizedState.tag&1){if(y.flags|=2048,Gf(9,{destroy:void 0},vj.bind(null,y,E,p,d),null),an===null)throw Error(r(349));k||(Go&127)!==0||mj(y,d,p)}return p}function mj(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=ft.updateQueue,d===null?(d=Jy(),ft.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function vj(l,d,p,y){d.value=p,d.getSnapshot=y,bj(d)&&xj(l)}function yj(l,d,p){return p(function(){bj(d)&&xj(l)})}function bj(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!ea(l,p)}catch{return!0}}function xj(l){var d=zu(l,2);d!==null&&zi(d,l,2)}function XE(l){var d=yi();if(typeof l=="function"){var p=l;if(l=p(),Hu){fn(!0);try{p()}finally{fn(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:l},d}function wj(l,d,p,y){return l.baseState=p,WE(l,Qt,typeof y=="function"?y:Ho)}function _te(l,d,p,y,E){if(ib(l))throw Error(r(485));if(l=d.action,l!==null){var k={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){k.listeners.push(V)}};G.T!==null?p(!0):k.isTransition=!1,y(k),p=d.pending,p===null?(k.next=d.pending=k,Sj(d,k)):(k.next=p.next,d.pending=p.next=k)}}function Sj(l,d){var p=d.action,y=d.payload,E=l.state;if(d.isTransition){var k=G.T,V={};G.T=V;try{var q=p(E,y),re=G.S;re!==null&&re(V,q),_j(l,d,q)}catch(ge){QE(l,d,ge)}finally{k!==null&&V.types!==null&&(k.types=V.types),G.T=k}}else try{k=p(E,y),_j(l,d,k)}catch(ge){QE(l,d,ge)}}function _j(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Ej(l,d,y)},function(y){return QE(l,d,y)}):Ej(l,d,p)}function Ej(l,d,p){d.status="fulfilled",d.value=p,Tj(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,Sj(l,p)))}function QE(l,d,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=p,Tj(d),d=d.next;while(d!==y)}l.action=null}function Tj(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function Aj(l,d){return d}function kj(l,d){if(It){var p=an.formState;if(p!==null){e:{var y=ft;if(It){if(gn){t:{for(var E=gn,k=Pa;E.nodeType!==8;){if(!k){E=null;break t}if(E=Da(E.nextSibling),E===null){E=null;break t}}k=E.data,E=k==="F!"||k==="F"?E:null}if(E){gn=Da(E.nextSibling),y=E.data==="F!";break e}}rc(y)}y=!1}y&&(d=p[0])}}return p=yi(),p.memoizedState=p.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aj,lastRenderedState:d},p.queue=y,p=Hj.bind(null,ft,y),y.dispatch=p,y=XE(!1),k=rT.bind(null,ft,!1,y.queue),y=yi(),E={state:d,dispatch:null,action:l,pending:null},y.queue=E,p=_te.bind(null,ft,E,k,p),E.dispatch=p,y.memoizedState=l,[d,p,!1]}function Cj(l){var d=Wn();return Ij(d,Qt,l)}function Ij(l,d,p){if(d=WE(l,d,Aj)[0],l=tb(Ho)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=Gg(d)}catch(V){throw V===Bf?Gy:V}else y=d;d=Wn();var E=d.queue,k=E.dispatch;return p!==d.memoizedState&&(ft.flags|=2048,Gf(9,{destroy:void 0},Ete.bind(null,E,p),null)),[y,k,l]}function Ete(l,d){l.action=d}function Pj(l){var d=Wn(),p=Qt;if(p!==null)return Ij(d,p,l);Wn(),d=d.memoizedState,p=Wn();var y=p.queue.dispatch;return p.memoizedState=l,[d,y,!1]}function Gf(l,d,p,y){return l={tag:l,create:p,deps:y,inst:d,next:null},d=ft.updateQueue,d===null&&(d=Jy(),ft.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l),l}function Nj(){return Wn().memoizedState}function nb(l,d,p,y){var E=yi();ft.flags|=l,E.memoizedState=Gf(1|d,{destroy:void 0},p,y===void 0?null:y)}function rb(l,d,p,y){var E=Wn();y=y===void 0?null:y;var k=E.memoizedState.inst;Qt!==null&&y!==null&&UE(y,Qt.memoizedState.deps)?E.memoizedState=Gf(d,k,p,y):(ft.flags|=l,E.memoizedState=Gf(1|d,k,p,y))}function Dj(l,d){nb(8390656,8,l,d)}function ZE(l,d){rb(2048,8,l,d)}function Tte(l){ft.flags|=4;var d=ft.updateQueue;if(d===null)d=Jy(),ft.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function Oj(l){var d=Wn().memoizedState;return Tte({ref:d,nextImpl:l}),function(){if((zt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function Rj(l,d){return rb(4,2,l,d)}function Mj(l,d){return rb(4,4,l,d)}function jj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function zj(l,d,p){p=p!=null?p.concat([l]):null,rb(4,4,jj.bind(null,d,l),p)}function JE(){}function Lj(l,d){var p=Wn();d=d===void 0?null:d;var y=p.memoizedState;return d!==null&&UE(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function Vj(l,d){var p=Wn();d=d===void 0?null:d;var y=p.memoizedState;if(d!==null&&UE(d,y[1]))return y[0];if(y=l(),Hu){fn(!0);try{l()}finally{fn(!1)}}return p.memoizedState=[y,d],y}function eT(l,d,p){return p===void 0||(Go&1073741824)!==0&&(Tt&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=Bz(),ft.lanes|=l,fc|=l,p)}function Bj(l,d,p,y){return ea(p,d)?p:Uf.current!==null?(l=eT(l,p,y),ea(l,d)||(rr=!0),l):(Go&42)===0||(Go&1073741824)!==0&&(Tt&261930)===0?(rr=!0,l.memoizedState=p):(l=Bz(),ft.lanes|=l,fc|=l,d)}function Fj(l,d,p,y,E){var k=Y.p;Y.p=k!==0&&8>k?k:8;var V=G.T,q={};G.T=q,rT(l,!1,d,p);try{var re=E(),ge=G.S;if(ge!==null&&ge(q,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Te=xte(re,y);Hg(l,d,Te,sa(l))}else Hg(l,d,y,sa(l))}catch(Ce){Hg(l,d,{then:function(){},status:"rejected",reason:Ce},sa())}finally{Y.p=k,V!==null&&q.types!==null&&(V.types=q.types),G.T=V}}function Ate(){}function tT(l,d,p,y){if(l.tag!==5)throw Error(r(476));var E=Uj(l).queue;Fj(l,E,d,J,p===null?Ate:function(){return $j(l),p(y)})}function Uj(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:J},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function $j(l){var d=Uj(l);d.next===null&&(d=l.alternate.memoizedState),Hg(l,d.next.queue,{},sa())}function nT(){return qr(cm)}function qj(){return Wn().memoizedState}function Gj(){return Wn().memoizedState}function kte(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=sa();l=sc(p);var y=oc(d,l,p);y!==null&&(zi(y,d,p),Fg(y,d,p)),d={cache:NE()},l.payload=d;return}d=d.return}}function Cte(l,d,p){var y=sa();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},ib(l)?Kj(d,p):(p=xE(l,d,p,y),p!==null&&(zi(p,l,y),Wj(p,d,y)))}function Hj(l,d,p){var y=sa();Hg(l,d,p,y)}function Hg(l,d,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(ib(l))Kj(d,E);else{var k=l.alternate;if(l.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var V=d.lastRenderedState,q=k(V,p);if(E.hasEagerState=!0,E.eagerState=q,ea(q,V))return Ly(l,d,E,0),an===null&&zy(),!1}catch{}if(p=xE(l,d,E,y),p!==null)return zi(p,l,y),Wj(p,d,y),!0}return!1}function rT(l,d,p,y){if(y={lane:2,revertLane:MT(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},ib(l)){if(d)throw Error(r(479))}else d=xE(l,p,y,2),d!==null&&zi(d,l,2)}function ib(l){var d=l.alternate;return l===ft||d!==null&&d===ft}function Kj(l,d){$f=Qy=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function Wj(l,d,p){if((p&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,pg(l,p)}}var Kg={readContext:qr,use:eb,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useLayoutEffect:jn,useInsertionEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useSyncExternalStore:jn,useId:jn,useHostTransitionStatus:jn,useFormState:jn,useActionState:jn,useOptimistic:jn,useMemoCache:jn,useCacheRefresh:jn};Kg.useEffectEvent=jn;var Yj={readContext:qr,use:eb,useCallback:function(l,d){return yi().memoizedState=[l,d===void 0?null:d],l},useContext:qr,useEffect:Dj,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,nb(4194308,4,jj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return nb(4194308,4,l,d)},useInsertionEffect:function(l,d){nb(4,2,l,d)},useMemo:function(l,d){var p=yi();d=d===void 0?null:d;var y=l();if(Hu){fn(!0);try{l()}finally{fn(!1)}}return p.memoizedState=[y,d],y},useReducer:function(l,d,p){var y=yi();if(p!==void 0){var E=p(d);if(Hu){fn(!0);try{p(d)}finally{fn(!1)}}}else E=d;return y.memoizedState=y.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},y.queue=l,l=l.dispatch=Cte.bind(null,ft,l),[y.memoizedState,l]},useRef:function(l){var d=yi();return l={current:l},d.memoizedState=l},useState:function(l){l=XE(l);var d=l.queue,p=Hj.bind(null,ft,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:JE,useDeferredValue:function(l,d){var p=yi();return eT(p,l,d)},useTransition:function(){var l=XE(!1);return l=Fj.bind(null,ft,l.queue,!0,!1),yi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var y=ft,E=yi();if(It){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),an===null)throw Error(r(349));(Tt&127)!==0||mj(y,d,p)}E.memoizedState=p;var k={value:p,getSnapshot:d};return E.queue=k,Dj(yj.bind(null,y,k,l),[l]),y.flags|=2048,Gf(9,{destroy:void 0},vj.bind(null,y,k,p,d),null),p},useId:function(){var l=yi(),d=an.identifierPrefix;if(It){var p=Qs,y=Xs;p=(y&~(1<<32-at(y)-1)).toString(32)+p,d="_"+d+"R_"+p,p=Zy++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=wte++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:nT,useFormState:kj,useActionState:kj,useOptimistic:function(l){var d=yi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=rT.bind(null,ft,!0,p),p.dispatch=d,[l,d]},useMemoCache:KE,useCacheRefresh:function(){return yi().memoizedState=kte.bind(null,ft)},useEffectEvent:function(l){var d=yi(),p={impl:l};return d.memoizedState=p,function(){if((zt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},iT={readContext:qr,use:eb,useCallback:Lj,useContext:qr,useEffect:ZE,useImperativeHandle:zj,useInsertionEffect:Rj,useLayoutEffect:Mj,useMemo:Vj,useReducer:tb,useRef:Nj,useState:function(){return tb(Ho)},useDebugValue:JE,useDeferredValue:function(l,d){var p=Wn();return Bj(p,Qt.memoizedState,l,d)},useTransition:function(){var l=tb(Ho)[0],d=Wn().memoizedState;return[typeof l=="boolean"?l:Gg(l),d]},useSyncExternalStore:gj,useId:qj,useHostTransitionStatus:nT,useFormState:Cj,useActionState:Cj,useOptimistic:function(l,d){var p=Wn();return wj(p,Qt,l,d)},useMemoCache:KE,useCacheRefresh:Gj};iT.useEffectEvent=Oj;var Xj={readContext:qr,use:eb,useCallback:Lj,useContext:qr,useEffect:ZE,useImperativeHandle:zj,useInsertionEffect:Rj,useLayoutEffect:Mj,useMemo:Vj,useReducer:YE,useRef:Nj,useState:function(){return YE(Ho)},useDebugValue:JE,useDeferredValue:function(l,d){var p=Wn();return Qt===null?eT(p,l,d):Bj(p,Qt.memoizedState,l,d)},useTransition:function(){var l=YE(Ho)[0],d=Wn().memoizedState;return[typeof l=="boolean"?l:Gg(l),d]},useSyncExternalStore:gj,useId:qj,useHostTransitionStatus:nT,useFormState:Pj,useActionState:Pj,useOptimistic:function(l,d){var p=Wn();return Qt!==null?wj(p,Qt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:KE,useCacheRefresh:Gj};Xj.useEffectEvent=Oj;function aT(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var sT={enqueueSetState:function(l,d,p){l=l._reactInternals;var y=sa(),E=sc(y);E.payload=d,p!=null&&(E.callback=p),d=oc(l,E,y),d!==null&&(zi(d,l,y),Fg(d,l,y))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=sa(),E=sc(y);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=oc(l,E,y),d!==null&&(zi(d,l,y),Fg(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=sa(),y=sc(p);y.tag=2,d!=null&&(y.callback=d),d=oc(l,y,p),d!==null&&(zi(d,l,p),Fg(d,l,p))}};function Qj(l,d,p,y,E,k,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,k,V):d.prototype&&d.prototype.isPureReactComponent?!Og(p,y)||!Og(E,k):!0}function Zj(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&sT.enqueueReplaceState(d,d.state,null)}function Ku(l,d){var p=d;if("ref"in d){p={};for(var y in d)y!=="ref"&&(p[y]=d[y])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function Jj(l){jy(l)}function ez(l){console.error(l)}function tz(l){jy(l)}function ab(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function nz(l,d,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function oT(l,d,p){return p=sc(p),p.tag=3,p.payload={element:null},p.callback=function(){ab(l,d)},p}function rz(l){return l=sc(l),l.tag=3,l}function iz(l,d,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var k=y.value;l.payload=function(){return E(k)},l.callback=function(){nz(d,p,y)}}var V=p.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){nz(d,p,y),typeof E!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function Ite(l,d,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=p.alternate,d!==null&&zf(d,p,E,!0),p=na.current,p!==null){switch(p.tag){case 31:case 13:return Na===null?vb():p.alternate===null&&zn===0&&(zn=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===Hy?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([y]):d.add(y),DT(l,y,E)),!1;case 22:return p.flags|=65536,y===Hy?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([y]):p.add(y)),DT(l,y,E)),!1}throw Error(r(435,p.tag))}return DT(l,y,E),vb(),!1}if(It)return d=na.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,y!==AE&&(l=Error(r(422),{cause:y}),jg(ka(l,p)))):(y!==AE&&(d=Error(r(423),{cause:y}),jg(ka(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,y=ka(y,p),E=oT(l.stateNode,y,E),zE(l,E),zn!==4&&(zn=2)),!1;var k=Error(r(520),{cause:y});if(k=ka(k,p),tm===null?tm=[k]:tm.push(k),zn!==4&&(zn=2),d===null)return!0;y=ka(y,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=oT(p.stateNode,y,l),zE(p,l),!1;case 1:if(d=p.type,k=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(hc===null||!hc.has(k))))return p.flags|=65536,E&=-E,p.lanes|=E,E=rz(E),iz(E,l,p,y),zE(p,E),!1}p=p.return}while(p!==null);return!1}var lT=Error(r(461)),rr=!1;function Gr(l,d,p,y){d.child=l===null?lj(d,null,p,y):Gu(d,l.child,p,y)}function az(l,d,p,y,E){p=p.render;var k=d.ref;if("ref"in y){var V={};for(var q in y)q!=="ref"&&(V[q]=y[q])}else V=y;return Fu(d),y=$E(l,d,p,V,k,E),q=qE(),l!==null&&!rr?(GE(l,d,E),Ko(l,d,E)):(It&&q&&EE(d),d.flags|=1,Gr(l,d,y,E),d.child)}function sz(l,d,p,y,E){if(l===null){var k=p.type;return typeof k=="function"&&!wE(k)&&k.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=k,oz(l,d,k,y,E)):(l=By(p.type,null,y,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(k=l.child,!mT(l,E)){var V=k.memoizedProps;if(p=p.compare,p=p!==null?p:Og,p(V,y)&&l.ref===d.ref)return Ko(l,d,E)}return d.flags|=1,l=Fo(k,y),l.ref=d.ref,l.return=d,d.child=l}function oz(l,d,p,y,E){if(l!==null){var k=l.memoizedProps;if(Og(k,y)&&l.ref===d.ref)if(rr=!1,d.pendingProps=y=k,mT(l,E))(l.flags&131072)!==0&&(rr=!0);else return d.lanes=l.lanes,Ko(l,d,E)}return cT(l,d,p,y,E)}function lz(l,d,p,y){var E=y.children,k=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((d.flags&128)!==0){if(k=k!==null?k.baseLanes|p:p,l!==null){for(y=d.child=l.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~k}else y=0,d.child=null;return cz(l,d,k,p,y)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&qy(d,k!==null?k.cachePool:null),k!==null?dj(d,k):VE(),fj(d);else return y=d.lanes=536870912,cz(l,d,k!==null?k.baseLanes|p:p,p,y)}else k!==null?(qy(d,k.cachePool),dj(d,k),cc(),d.memoizedState=null):(l!==null&&qy(d,null),VE(),cc());return Gr(l,d,E,p),d.child}function Wg(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function cz(l,d,p,y,E){var k=OE();return k=k===null?null:{parent:tr._currentValue,pool:k},d.memoizedState={baseLanes:p,cachePool:k},l!==null&&qy(d,null),VE(),fj(d),l!==null&&zf(l,d,y,!0),d.childLanes=E,null}function sb(l,d){return d=lb({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function uz(l,d,p){return Gu(d,l.child,null,p),l=sb(d,d.pendingProps),l.flags|=2,ra(d),d.memoizedState=null,l}function Pte(l,d,p){var y=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(It){if(y.mode==="hidden")return l=sb(d,y),d.lanes=536870912,Wg(null,l);if(FE(d),(l=gn)?(l=S4(l,Pa),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:tc!==null?{id:Xs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},p=KM(l),p.return=d,d.child=p,$r=d,gn=null)):l=null,l===null)throw rc(d);return d.lanes=536870912,null}return sb(d,y)}var k=l.memoizedState;if(k!==null){var V=k.dehydrated;if(FE(d),E)if(d.flags&256)d.flags&=-257,d=uz(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(rr||zf(l,d,p,!1),E=(p&l.childLanes)!==0,rr||E){if(y=an,y!==null&&(V=gg(y,p),V!==0&&V!==k.retryLane))throw k.retryLane=V,zu(l,V),zi(y,l,V),lT;vb(),d=uz(l,d,p)}else l=k.treeContext,gn=Da(V.nextSibling),$r=d,It=!0,nc=null,Pa=!1,l!==null&&XM(d,l),d=sb(d,y),d.flags|=4096;return d}return l=Fo(l.child,{mode:y.mode,children:y.children}),l.ref=d.ref,d.child=l,l.return=d,l}function ob(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function cT(l,d,p,y,E){return Fu(d),p=$E(l,d,p,y,void 0,E),y=qE(),l!==null&&!rr?(GE(l,d,E),Ko(l,d,E)):(It&&y&&EE(d),d.flags|=1,Gr(l,d,p,E),d.child)}function dz(l,d,p,y,E,k){return Fu(d),d.updateQueue=null,p=pj(d,y,p,E),hj(l),y=qE(),l!==null&&!rr?(GE(l,d,k),Ko(l,d,k)):(It&&y&&EE(d),d.flags|=1,Gr(l,d,p,k),d.child)}function fz(l,d,p,y,E){if(Fu(d),d.stateNode===null){var k=Of,V=p.contextType;typeof V=="object"&&V!==null&&(k=qr(V)),k=new p(y,k),d.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=sT,d.stateNode=k,k._reactInternals=d,k=d.stateNode,k.props=y,k.state=d.memoizedState,k.refs={},ME(d),V=p.contextType,k.context=typeof V=="object"&&V!==null?qr(V):Of,k.state=d.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(aT(d,p,V,y),k.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(V=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),V!==k.state&&sT.enqueueReplaceState(k,k.state,null),$g(d,y,k,E),Ug(),k.state=d.memoizedState),typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){k=d.stateNode;var q=d.memoizedProps,re=Ku(p,q);k.props=re;var ge=k.context,Te=p.contextType;V=Of,typeof Te=="object"&&Te!==null&&(V=qr(Te));var Ce=p.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof k.getSnapshotBeforeUpdate=="function",q=d.pendingProps!==q,Te||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(q||ge!==V)&&Zj(d,k,y,V),ac=!1;var ye=d.memoizedState;k.state=ye,$g(d,y,k,E),Ug(),ge=d.memoizedState,q||ye!==ge||ac?(typeof Ce=="function"&&(aT(d,p,Ce,y),ge=d.memoizedState),(re=ac||Qj(d,p,re,y,ye,ge,V))?(Te||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(d.flags|=4194308)):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ge),k.props=y,k.state=ge,k.context=V,y=re):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{k=d.stateNode,jE(l,d),V=d.memoizedProps,Te=Ku(p,V),k.props=Te,Ce=d.pendingProps,ye=k.context,ge=p.contextType,re=Of,typeof ge=="object"&&ge!==null&&(re=qr(ge)),q=p.getDerivedStateFromProps,(ge=typeof q=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(V!==Ce||ye!==re)&&Zj(d,k,y,re),ac=!1,ye=d.memoizedState,k.state=ye,$g(d,y,k,E),Ug();var we=d.memoizedState;V!==Ce||ye!==we||ac||l!==null&&l.dependencies!==null&&Uy(l.dependencies)?(typeof q=="function"&&(aT(d,p,q,y),we=d.memoizedState),(Te=ac||Qj(d,p,Te,y,ye,we,re)||l!==null&&l.dependencies!==null&&Uy(l.dependencies))?(ge||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,we,re),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,we,re)),typeof k.componentDidUpdate=="function"&&(d.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof k.componentDidUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=we),k.props=y,k.state=we,k.context=re,y=Te):(typeof k.componentDidUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),y=!1)}return k=y,ob(l,d),y=(d.flags&128)!==0,k||y?(k=d.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:k.render(),d.flags|=1,l!==null&&y?(d.child=Gu(d,l.child,null,E),d.child=Gu(d,null,p,E)):Gr(l,d,p,E),d.memoizedState=k.state,l=d.child):l=Ko(l,d,E),l}function hz(l,d,p,y){return Vu(),d.flags|=256,Gr(l,d,p,y),d.child}var uT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dT(l){return{baseLanes:l,cachePool:nj()}}function fT(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=aa),l}function pz(l,d,p){var y=d.pendingProps,E=!1,k=(d.flags&128)!==0,V;if((V=k)||(V=l!==null&&l.memoizedState===null?!1:(Kn.current&2)!==0),V&&(E=!0,d.flags&=-129),V=(d.flags&32)!==0,d.flags&=-33,l===null){if(It){if(E?lc(d):cc(),(l=gn)?(l=S4(l,Pa),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:tc!==null?{id:Xs,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},p=KM(l),p.return=d,d.child=p,$r=d,gn=null)):l=null,l===null)throw rc(d);return WT(l)?d.lanes=32:d.lanes=536870912,null}var q=y.children;return y=y.fallback,E?(cc(),E=d.mode,q=lb({mode:"hidden",children:q},E),y=Lu(y,E,p,null),q.return=d,y.return=d,q.sibling=y,d.child=q,y=d.child,y.memoizedState=dT(p),y.childLanes=fT(l,V,p),d.memoizedState=uT,Wg(null,y)):(lc(d),hT(d,q))}var re=l.memoizedState;if(re!==null&&(q=re.dehydrated,q!==null)){if(k)d.flags&256?(lc(d),d.flags&=-257,d=pT(l,d,p)):d.memoizedState!==null?(cc(),d.child=l.child,d.flags|=128,d=null):(cc(),q=y.fallback,E=d.mode,y=lb({mode:"visible",children:y.children},E),q=Lu(q,E,p,null),q.flags|=2,y.return=d,q.return=d,y.sibling=q,d.child=y,Gu(d,l.child,null,p),y=d.child,y.memoizedState=dT(p),y.childLanes=fT(l,V,p),d.memoizedState=uT,d=Wg(null,y));else if(lc(d),WT(q)){if(V=q.nextSibling&&q.nextSibling.dataset,V)var ge=V.dgst;V=ge,y=Error(r(419)),y.stack="",y.digest=V,jg({value:y,source:null,stack:null}),d=pT(l,d,p)}else if(rr||zf(l,d,p,!1),V=(p&l.childLanes)!==0,rr||V){if(V=an,V!==null&&(y=gg(V,p),y!==0&&y!==re.retryLane))throw re.retryLane=y,zu(l,y),zi(V,l,y),lT;KT(q)||vb(),d=pT(l,d,p)}else KT(q)?(d.flags|=192,d.child=l.child,d=null):(l=re.treeContext,gn=Da(q.nextSibling),$r=d,It=!0,nc=null,Pa=!1,l!==null&&XM(d,l),d=hT(d,y.children),d.flags|=4096);return d}return E?(cc(),q=y.fallback,E=d.mode,re=l.child,ge=re.sibling,y=Fo(re,{mode:"hidden",children:y.children}),y.subtreeFlags=re.subtreeFlags&65011712,ge!==null?q=Fo(ge,q):(q=Lu(q,E,p,null),q.flags|=2),q.return=d,y.return=d,y.sibling=q,d.child=y,Wg(null,y),y=d.child,q=l.child.memoizedState,q===null?q=dT(p):(E=q.cachePool,E!==null?(re=tr._currentValue,E=E.parent!==re?{parent:re,pool:re}:E):E=nj(),q={baseLanes:q.baseLanes|p,cachePool:E}),y.memoizedState=q,y.childLanes=fT(l,V,p),d.memoizedState=uT,Wg(l.child,y)):(lc(d),p=l.child,l=p.sibling,p=Fo(p,{mode:"visible",children:y.children}),p.return=d,p.sibling=null,l!==null&&(V=d.deletions,V===null?(d.deletions=[l],d.flags|=16):V.push(l)),d.child=p,d.memoizedState=null,p)}function hT(l,d){return d=lb({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function lb(l,d){return l=ta(22,l,null,d),l.lanes=0,l}function pT(l,d,p){return Gu(d,l.child,null,p),l=hT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function gz(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),IE(l.return,d,p)}function gT(l,d,p,y,E,k){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:k}:(V.isBackwards=d,V.rendering=null,V.renderingStartTime=0,V.last=y,V.tail=p,V.tailMode=E,V.treeForkCount=k)}function mz(l,d,p){var y=d.pendingProps,E=y.revealOrder,k=y.tail;y=y.children;var V=Kn.current,q=(V&2)!==0;if(q?(V=V&1|2,d.flags|=128):V&=1,ee(Kn,V),Gr(l,d,y,p),y=It?Mg:0,!q&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&gz(l,p,d);else if(l.tag===19)gz(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Xy(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),gT(d,!1,E,p,k,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Xy(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}gT(d,!0,p,null,k,y);break;case"together":gT(d,!1,null,null,void 0,y);break;default:d.memoizedState=null}return d.child}function Ko(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),fc|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(zf(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Fo(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Fo(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function mT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Uy(l)))}function Nte(l,d,p){switch(d.tag){case 3:Se(d,d.stateNode.containerInfo),ic(d,tr,l.memoizedState.cache),Vu();break;case 27:case 5:Ae(d);break;case 4:Se(d,d.stateNode.containerInfo);break;case 10:ic(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,FE(d),null;break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(lc(d),d.flags|=128,null):(p&d.child.childLanes)!==0?pz(l,d,p):(lc(d),l=Ko(l,d,p),l!==null?l.sibling:null);lc(d);break;case 19:var E=(l.flags&128)!==0;if(y=(p&d.childLanes)!==0,y||(zf(l,d,p,!1),y=(p&d.childLanes)!==0),E){if(y)return mz(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ee(Kn,Kn.current),y)break;return null;case 22:return d.lanes=0,lz(l,d,p,d.pendingProps);case 24:ic(d,tr,l.memoizedState.cache)}return Ko(l,d,p)}function vz(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)rr=!0;else{if(!mT(l,p)&&(d.flags&128)===0)return rr=!1,Nte(l,d,p);rr=(l.flags&131072)!==0}else rr=!1,It&&(d.flags&1048576)!==0&&YM(d,Mg,d.index);switch(d.lanes=0,d.tag){case 16:e:{var y=d.pendingProps;if(l=$u(d.elementType),d.type=l,typeof l=="function")wE(l)?(y=Ku(l,y),d.tag=1,d=fz(null,d,l,y,p)):(d.tag=0,d=cT(null,d,l,y,p));else{if(l!=null){var E=l.$$typeof;if(E===D){d.tag=11,d=az(null,d,l,y,p);break e}else if(E===C){d.tag=14,d=sz(null,d,l,y,p);break e}}throw d=W(l)||l,Error(r(306,d,""))}}return d;case 0:return cT(l,d,d.type,d.pendingProps,p);case 1:return y=d.type,E=Ku(y,d.pendingProps),fz(l,d,y,E,p);case 3:e:{if(Se(d,d.stateNode.containerInfo),l===null)throw Error(r(387));y=d.pendingProps;var k=d.memoizedState;E=k.element,jE(l,d),$g(d,y,null,p);var V=d.memoizedState;if(y=V.cache,ic(d,tr,y),y!==k.cache&&PE(d,[tr],p,!0),Ug(),y=V.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:V.cache},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){d=hz(l,d,y,p);break e}else if(y!==E){E=ka(Error(r(424)),d),jg(E),d=hz(l,d,y,p);break e}else for(l=d.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,gn=Da(l.firstChild),$r=d,It=!0,nc=null,Pa=!0,p=lj(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Vu(),y===E){d=Ko(l,d,p);break e}Gr(l,d,y,p)}d=d.child}return d;case 26:return ob(l,d),l===null?(p=C4(d.type,null,d.pendingProps,null))?d.memoizedState=p:It||(p=d.type,l=d.pendingProps,y=Eb(ne.current).createElement(p),y[Zn]=d,y[Pr]=l,Hr(y,p,l),Jn(y),d.stateNode=y):d.memoizedState=C4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Ae(d),l===null&&It&&(y=d.stateNode=T4(d.type,d.pendingProps,ne.current),$r=d,Pa=!0,E=gn,vc(d.type)?(YT=E,gn=Da(y.firstChild)):gn=E),Gr(l,d,d.pendingProps.children,p),ob(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&It&&((E=y=gn)&&(y=one(y,d.type,d.pendingProps,Pa),y!==null?(d.stateNode=y,$r=d,gn=Da(y.firstChild),Pa=!1,E=!0):E=!1),E||rc(d)),Ae(d),E=d.type,k=d.pendingProps,V=l!==null?l.memoizedProps:null,y=k.children,qT(E,k)?y=null:V!==null&&qT(E,V)&&(d.flags|=32),d.memoizedState!==null&&(E=$E(l,d,Ste,null,null,p),cm._currentValue=E),ob(l,d),Gr(l,d,y,p),d.child;case 6:return l===null&&It&&((l=p=gn)&&(p=lne(p,d.pendingProps,Pa),p!==null?(d.stateNode=p,$r=d,gn=null,l=!0):l=!1),l||rc(d)),null;case 13:return pz(l,d,p);case 4:return Se(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=Gu(d,null,y,p):Gr(l,d,y,p),d.child;case 11:return az(l,d,d.type,d.pendingProps,p);case 7:return Gr(l,d,d.pendingProps,p),d.child;case 8:return Gr(l,d,d.pendingProps.children,p),d.child;case 12:return Gr(l,d,d.pendingProps.children,p),d.child;case 10:return y=d.pendingProps,ic(d,d.type,y.value),Gr(l,d,y.children,p),d.child;case 9:return E=d.type._context,y=d.pendingProps.children,Fu(d),E=qr(E),y=y(E),d.flags|=1,Gr(l,d,y,p),d.child;case 14:return sz(l,d,d.type,d.pendingProps,p);case 15:return oz(l,d,d.type,d.pendingProps,p);case 19:return mz(l,d,p);case 31:return Pte(l,d,p);case 22:return lz(l,d,p,d.pendingProps);case 24:return Fu(d),y=qr(tr),l===null?(E=OE(),E===null&&(E=an,k=NE(),E.pooledCache=k,k.refCount++,k!==null&&(E.pooledCacheLanes|=p),E=k),d.memoizedState={parent:y,cache:E},ME(d),ic(d,tr,E)):((l.lanes&p)!==0&&(jE(l,d),$g(d,null,null,p),Ug()),E=l.memoizedState,k=d.memoizedState,E.parent!==y?(E={parent:y,cache:y},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),ic(d,tr,y)):(y=k.cache,ic(d,tr,y),y!==E.cache&&PE(d,[tr],p,!0))),Gr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Wo(l){l.flags|=4}function vT(l,d,p,y,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(qz())l.flags|=8192;else throw qu=Hy,RE}else l.flags&=-16777217}function yz(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!O4(d))if(qz())l.flags|=8192;else throw qu=Hy,RE}function cb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Gl():536870912,l.lanes|=d,Yf|=d)}function Yg(l,d){if(!It)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function mn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function Dte(l,d,p){var y=d.pendingProps;switch(TE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mn(d),null;case 1:return mn(d),null;case 3:return p=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),qo(tr),se(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(jf(d)?Wo(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,kE())),mn(d),null;case 26:var E=d.type,k=d.memoizedState;return l===null?(Wo(d),k!==null?(mn(d),yz(d,k)):(mn(d),vT(d,E,null,y,p))):k?k!==l.memoizedState?(Wo(d),mn(d),yz(d,k)):(mn(d),d.flags&=-16777217):(l=l.memoizedProps,l!==y&&Wo(d),mn(d),vT(d,E,l,y,p)),null;case 27:if(ve(d),p=ne.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Wo(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return mn(d),null}l=K.current,jf(d)?QM(d):(l=T4(E,y,p),d.stateNode=l,Wo(d))}return mn(d),null;case 5:if(ve(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Wo(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return mn(d),null}if(k=K.current,jf(d))QM(d);else{var V=Eb(ne.current);switch(k){case 1:k=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:k=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":k=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":k=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":k=V.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof y.is=="string"?V.createElement("select",{is:y.is}):V.createElement("select"),y.multiple?k.multiple=!0:y.size&&(k.size=y.size);break;default:k=typeof y.is=="string"?V.createElement(E,{is:y.is}):V.createElement(E)}}k[Zn]=d,k[Pr]=y;e:for(V=d.child;V!==null;){if(V.tag===5||V.tag===6)k.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===d)break e;for(;V.sibling===null;){if(V.return===null||V.return===d)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}d.stateNode=k;e:switch(Hr(k,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Wo(d)}}return mn(d),vT(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&Wo(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(l=ne.current,jf(d)){if(l=d.stateNode,p=d.memoizedProps,y=null,E=$r,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}l[Zn]=d,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||p4(l.nodeValue,p)),l||rc(d,!0)}else l=Eb(l).createTextNode(y),l[Zn]=d,d.stateNode=l}return mn(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(y=jf(d),p!==null){if(l===null){if(!y)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Zn]=d}else Vu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;mn(d),l=!1}else p=kE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(ra(d),d):(ra(d),null);if((d.flags&128)!==0)throw Error(r(558))}return mn(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=jf(d),y!==null&&y.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Zn]=d}else Vu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;mn(d),E=!1}else E=kE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(ra(d),d):(ra(d),null)}return ra(d),(d.flags&128)!==0?(d.lanes=p,d):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=d.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),k=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==E&&(y.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),cb(d,d.updateQueue),mn(d),null);case 4:return se(),l===null&&VT(d.stateNode.containerInfo),mn(d),null;case 10:return qo(d.type),mn(d),null;case 19:if(Z(Kn),y=d.memoizedState,y===null)return mn(d),null;if(E=(d.flags&128)!==0,k=y.rendering,k===null)if(E)Yg(y,!1);else{if(zn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(k=Xy(l),k!==null){for(d.flags|=128,Yg(y,!1),l=k.updateQueue,d.updateQueue=l,cb(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)HM(p,l),p=p.sibling;return ee(Kn,Kn.current&1|2),It&&Uo(d,y.treeForkCount),d.child}l=l.sibling}y.tail!==null&&yt()>pb&&(d.flags|=128,E=!0,Yg(y,!1),d.lanes=4194304)}else{if(!E)if(l=Xy(k),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,cb(d,l),Yg(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!It)return mn(d),null}else 2*yt()-y.renderingStartTime>pb&&p!==536870912&&(d.flags|=128,E=!0,Yg(y,!1),d.lanes=4194304);y.isBackwards?(k.sibling=d.child,d.child=k):(l=y.last,l!==null?l.sibling=k:d.child=k,y.last=k)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=yt(),l.sibling=null,p=Kn.current,ee(Kn,E?p&1|2:p&1),It&&Uo(d,y.treeForkCount),l):(mn(d),null);case 22:case 23:return ra(d),BE(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(p&536870912)!==0&&(d.flags&128)===0&&(mn(d),d.subtreeFlags&6&&(d.flags|=8192)):mn(d),p=d.updateQueue,p!==null&&cb(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048),l!==null&&Z(Uu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),qo(tr),mn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function Ote(l,d){switch(TE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return qo(tr),se(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return ve(d),null;case 31:if(d.memoizedState!==null){if(ra(d),d.alternate===null)throw Error(r(340));Vu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(ra(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Vu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Z(Kn),null;case 4:return se(),null;case 10:return qo(d.type),null;case 22:case 23:return ra(d),BE(),l!==null&&Z(Uu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return qo(tr),null;case 25:return null;default:return null}}function bz(l,d){switch(TE(d),d.tag){case 3:qo(tr),se();break;case 26:case 27:case 5:ve(d);break;case 4:se();break;case 31:d.memoizedState!==null&&ra(d);break;case 13:ra(d);break;case 19:Z(Kn);break;case 10:qo(d.type);break;case 22:case 23:ra(d),BE(),l!==null&&Z(Uu);break;case 24:qo(tr)}}function Xg(l,d){try{var p=d.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&l)===l){y=void 0;var k=p.create,V=p.inst;y=k(),V.destroy=y}p=p.next}while(p!==E)}}catch(q){Gt(d,d.return,q)}}function uc(l,d,p){try{var y=d.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var k=E.next;y=k;do{if((y.tag&l)===l){var V=y.inst,q=V.destroy;if(q!==void 0){V.destroy=void 0,E=d;var re=p,ge=q;try{ge()}catch(Te){Gt(E,re,Te)}}}y=y.next}while(y!==k)}}catch(Te){Gt(d,d.return,Te)}}function xz(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{uj(d,p)}catch(y){Gt(l,l.return,y)}}}function wz(l,d,p){p.props=Ku(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){Gt(l,d,y)}}function Qg(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(E){Gt(l,d,E)}}function Zs(l,d){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){Gt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Gt(l,d,E)}else p.current=null}function Sz(l){var d=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){Gt(l,l.return,E)}}function yT(l,d,p){try{var y=l.stateNode;tne(y,l.type,p,d),y[Pr]=d}catch(E){Gt(l,l.return,E)}}function _z(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&vc(l.type)||l.tag===4}function bT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||_z(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&vc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function xT(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=rs));else if(y!==4&&(y===27&&vc(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(xT(l,d,p),l=l.sibling;l!==null;)xT(l,d,p),l=l.sibling}function ub(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(y===27&&vc(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(ub(l,d,p),l=l.sibling;l!==null;)ub(l,d,p),l=l.sibling}function Ez(l){var d=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);Hr(d,y,p),d[Zn]=l,d[Pr]=p}catch(k){Gt(l,l.return,k)}}var Yo=!1,ir=!1,wT=!1,Tz=typeof WeakSet=="function"?WeakSet:Set,Dr=null;function Rte(l,d){if(l=l.containerInfo,UT=Nb,l=zM(l),pE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{p.nodeType,k.nodeType}catch{p=null;break e}var V=0,q=-1,re=-1,ge=0,Te=0,Ce=l,ye=null;t:for(;;){for(var we;Ce!==p||E!==0&&Ce.nodeType!==3||(q=V+E),Ce!==k||y!==0&&Ce.nodeType!==3||(re=V+y),Ce.nodeType===3&&(V+=Ce.nodeValue.length),(we=Ce.firstChild)!==null;)ye=Ce,Ce=we;for(;;){if(Ce===l)break t;if(ye===p&&++ge===E&&(q=V),ye===k&&++Te===y&&(re=V),(we=Ce.nextSibling)!==null)break;Ce=ye,ye=Ce.parentNode}Ce=we}p=q===-1||re===-1?null:{start:q,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for($T={focusedElem:l,selectionRange:p},Nb=!1,Dr=d;Dr!==null;)if(d=Dr,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Dr=l;else for(;Dr!==null;){switch(d=Dr,k=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&k!==null){l=void 0,p=d,E=k.memoizedProps,k=k.memoizedState,y=p.stateNode;try{var $e=Ku(p.type,E);l=y.getSnapshotBeforeUpdate($e,k),y.__reactInternalSnapshotBeforeUpdate=l}catch(st){Gt(p,p.return,st)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)HT(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":HT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Dr=l;break}Dr=d.return}}function Az(l,d,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Qo(l,p),y&4&&Xg(5,p);break;case 1:if(Qo(l,p),y&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(V){Gt(p,p.return,V)}else{var E=Ku(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(V){Gt(p,p.return,V)}}y&64&&xz(p),y&512&&Qg(p,p.return);break;case 3:if(Qo(l,p),y&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{uj(l,d)}catch(V){Gt(p,p.return,V)}}break;case 27:d===null&&y&4&&Ez(p);case 26:case 5:Qo(l,p),d===null&&y&4&&Sz(p),y&512&&Qg(p,p.return);break;case 12:Qo(l,p);break;case 31:Qo(l,p),y&4&&Iz(l,p);break;case 13:Qo(l,p),y&4&&Pz(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=$te.bind(null,p),cne(l,p))));break;case 22:if(y=p.memoizedState!==null||Yo,!y){d=d!==null&&d.memoizedState!==null||ir,E=Yo;var k=ir;Yo=y,(ir=d)&&!k?Zo(l,p,(p.subtreeFlags&8772)!==0):Qo(l,p),Yo=E,ir=k}break;case 30:break;default:Qo(l,p)}}function kz(l){var d=l.alternate;d!==null&&(l.alternate=null,kz(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&bf(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Sn=null,Oi=!1;function Xo(l,d,p){for(p=p.child;p!==null;)Cz(l,d,p),p=p.sibling}function Cz(l,d,p){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(dn,p)}catch{}switch(p.tag){case 26:ir||Zs(p,d),Xo(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:ir||Zs(p,d);var y=Sn,E=Oi;vc(p.type)&&(Sn=p.stateNode,Oi=!1),Xo(l,d,p),sm(p.stateNode),Sn=y,Oi=E;break;case 5:ir||Zs(p,d);case 6:if(y=Sn,E=Oi,Sn=null,Xo(l,d,p),Sn=y,Oi=E,Sn!==null)if(Oi)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(p.stateNode)}catch(k){Gt(p,d,k)}else try{Sn.removeChild(p.stateNode)}catch(k){Gt(p,d,k)}break;case 18:Sn!==null&&(Oi?(l=Sn,x4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),rh(l)):x4(Sn,p.stateNode));break;case 4:y=Sn,E=Oi,Sn=p.stateNode.containerInfo,Oi=!0,Xo(l,d,p),Sn=y,Oi=E;break;case 0:case 11:case 14:case 15:uc(2,p,d),ir||uc(4,p,d),Xo(l,d,p);break;case 1:ir||(Zs(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"&&wz(p,d,y)),Xo(l,d,p);break;case 21:Xo(l,d,p);break;case 22:ir=(y=ir)||p.memoizedState!==null,Xo(l,d,p),ir=y;break;default:Xo(l,d,p)}}function Iz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{rh(l)}catch(p){Gt(d,d.return,p)}}}function Pz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{rh(l)}catch(p){Gt(d,d.return,p)}}function Mte(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Tz),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Tz),d;default:throw Error(r(435,l.tag))}}function db(l,d){var p=Mte(l);d.forEach(function(y){if(!p.has(y)){p.add(y);var E=qte.bind(null,l,y);y.then(E,E)}})}function Ri(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],k=l,V=d,q=V;e:for(;q!==null;){switch(q.tag){case 27:if(vc(q.type)){Sn=q.stateNode,Oi=!1;break e}break;case 5:Sn=q.stateNode,Oi=!1;break e;case 3:case 4:Sn=q.stateNode.containerInfo,Oi=!0;break e}q=q.return}if(Sn===null)throw Error(r(160));Cz(k,V,E),Sn=null,Oi=!1,k=E.alternate,k!==null&&(k.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Nz(d,l),d=d.sibling}var cs=null;function Nz(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ri(d,l),Mi(l),y&4&&(uc(3,l,l.return),Xg(3,l),uc(5,l,l.return));break;case 1:Ri(d,l),Mi(l),y&512&&(ir||p===null||Zs(p,p.return)),y&64&&Yo&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=cs;if(Ri(d,l),Mi(l),y&512&&(ir||p===null||Zs(p,p.return)),y&4){var k=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":k=E.getElementsByTagName("title")[0],(!k||k[Ls]||k[Zn]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=E.createElement(y),E.head.insertBefore(k,E.querySelector("head > title"))),Hr(k,y,p),k[Zn]=l,Jn(k),y=k;break e;case"link":var V=N4("link","href",E).get(y+(p.href||""));if(V){for(var q=0;q<V.length;q++)if(k=V[q],k.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&k.getAttribute("rel")===(p.rel==null?null:p.rel)&&k.getAttribute("title")===(p.title==null?null:p.title)&&k.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){V.splice(q,1);break t}}k=E.createElement(y),Hr(k,y,p),E.head.appendChild(k);break;case"meta":if(V=N4("meta","content",E).get(y+(p.content||""))){for(q=0;q<V.length;q++)if(k=V[q],k.getAttribute("content")===(p.content==null?null:""+p.content)&&k.getAttribute("name")===(p.name==null?null:p.name)&&k.getAttribute("property")===(p.property==null?null:p.property)&&k.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&k.getAttribute("charset")===(p.charSet==null?null:p.charSet)){V.splice(q,1);break t}}k=E.createElement(y),Hr(k,y,p),E.head.appendChild(k);break;default:throw Error(r(468,y))}k[Zn]=l,Jn(k),y=k}l.stateNode=y}else D4(E,l.type,l.stateNode);else l.stateNode=P4(E,y,l.memoizedProps);else k!==y?(k===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):k.count--,y===null?D4(E,l.type,l.stateNode):P4(E,y,l.memoizedProps)):y===null&&l.stateNode!==null&&yT(l,l.memoizedProps,p.memoizedProps)}break;case 27:Ri(d,l),Mi(l),y&512&&(ir||p===null||Zs(p,p.return)),p!==null&&y&4&&yT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Ri(d,l),Mi(l),y&512&&(ir||p===null||Zs(p,p.return)),l.flags&32){E=l.stateNode;try{Di(E,"")}catch($e){Gt(l,l.return,$e)}}y&4&&l.stateNode!=null&&(E=l.memoizedProps,yT(l,E,p!==null?p.memoizedProps:E)),y&1024&&(wT=!0);break;case 6:if(Ri(d,l),Mi(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch($e){Gt(l,l.return,$e)}}break;case 3:if(kb=null,E=cs,cs=Tb(d.containerInfo),Ri(d,l),cs=E,Mi(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{rh(d.containerInfo)}catch($e){Gt(l,l.return,$e)}wT&&(wT=!1,Dz(l));break;case 4:y=cs,cs=Tb(l.stateNode.containerInfo),Ri(d,l),Mi(l),cs=y;break;case 12:Ri(d,l),Mi(l);break;case 31:Ri(d,l),Mi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,db(l,y)));break;case 13:Ri(d,l),Mi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(hb=yt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,db(l,y)));break;case 22:E=l.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,ge=Yo,Te=ir;if(Yo=ge||E,ir=Te||re,Ri(d,l),ir=Te,Yo=ge,Mi(l),y&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||re||Yo||ir||Wu(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){re=p=d;try{if(k=re.stateNode,E)V=k.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{q=re.stateNode;var Ce=re.memoizedProps.style,ye=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;q.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch($e){Gt(re,re.return,$e)}}}else if(d.tag===6){if(p===null){re=d;try{re.stateNode.nodeValue=E?"":re.memoizedProps}catch($e){Gt(re,re.return,$e)}}}else if(d.tag===18){if(p===null){re=d;try{var we=re.stateNode;E?w4(we,!0):w4(re.stateNode,!1)}catch($e){Gt(re,re.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,db(l,p))));break;case 19:Ri(d,l),Mi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,db(l,y)));break;case 30:break;case 21:break;default:Ri(d,l),Mi(l)}}function Mi(l){var d=l.flags;if(d&2){try{for(var p,y=l.return;y!==null;){if(_z(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,k=bT(l);ub(l,k,E);break;case 5:var V=p.stateNode;p.flags&32&&(Di(V,""),p.flags&=-33);var q=bT(l);ub(l,q,V);break;case 3:case 4:var re=p.stateNode.containerInfo,ge=bT(l);xT(l,ge,re);break;default:throw Error(r(161))}}catch(Te){Gt(l,l.return,Te)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function Dz(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;Dz(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Qo(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Az(l,d.alternate,d),d=d.sibling}function Wu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:uc(4,d,d.return),Wu(d);break;case 1:Zs(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&wz(d,d.return,p),Wu(d);break;case 27:sm(d.stateNode);case 26:case 5:Zs(d,d.return),Wu(d);break;case 22:d.memoizedState===null&&Wu(d);break;case 30:Wu(d);break;default:Wu(d)}l=l.sibling}}function Zo(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,E=l,k=d,V=k.flags;switch(k.tag){case 0:case 11:case 15:Zo(E,k,p),Xg(4,k);break;case 1:if(Zo(E,k,p),y=k,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ge){Gt(y,y.return,ge)}if(y=k,E=y.updateQueue,E!==null){var q=y.stateNode;try{var re=E.shared.hiddenCallbacks;if(re!==null)for(E.shared.hiddenCallbacks=null,E=0;E<re.length;E++)cj(re[E],q)}catch(ge){Gt(y,y.return,ge)}}p&&V&64&&xz(k),Qg(k,k.return);break;case 27:Ez(k);case 26:case 5:Zo(E,k,p),p&&y===null&&V&4&&Sz(k),Qg(k,k.return);break;case 12:Zo(E,k,p);break;case 31:Zo(E,k,p),p&&V&4&&Iz(E,k);break;case 13:Zo(E,k,p),p&&V&4&&Pz(E,k);break;case 22:k.memoizedState===null&&Zo(E,k,p),Qg(k,k.return);break;case 30:break;default:Zo(E,k,p)}d=d.sibling}}function ST(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&zg(p))}function _T(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&zg(l))}function us(l,d,p,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Oz(l,d,p,y),d=d.sibling}function Oz(l,d,p,y){var E=d.flags;switch(d.tag){case 0:case 11:case 15:us(l,d,p,y),E&2048&&Xg(9,d);break;case 1:us(l,d,p,y);break;case 3:us(l,d,p,y),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&zg(l)));break;case 12:if(E&2048){us(l,d,p,y),l=d.stateNode;try{var k=d.memoizedProps,V=k.id,q=k.onPostCommit;typeof q=="function"&&q(V,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(re){Gt(d,d.return,re)}}else us(l,d,p,y);break;case 31:us(l,d,p,y);break;case 13:us(l,d,p,y);break;case 23:break;case 22:k=d.stateNode,V=d.alternate,d.memoizedState!==null?k._visibility&2?us(l,d,p,y):Zg(l,d):k._visibility&2?us(l,d,p,y):(k._visibility|=2,Hf(l,d,p,y,(d.subtreeFlags&10256)!==0||!1)),E&2048&&ST(V,d);break;case 24:us(l,d,p,y),E&2048&&_T(d.alternate,d);break;default:us(l,d,p,y)}}function Hf(l,d,p,y,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var k=l,V=d,q=p,re=y,ge=V.flags;switch(V.tag){case 0:case 11:case 15:Hf(k,V,q,re,E),Xg(8,V);break;case 23:break;case 22:var Te=V.stateNode;V.memoizedState!==null?Te._visibility&2?Hf(k,V,q,re,E):Zg(k,V):(Te._visibility|=2,Hf(k,V,q,re,E)),E&&ge&2048&&ST(V.alternate,V);break;case 24:Hf(k,V,q,re,E),E&&ge&2048&&_T(V.alternate,V);break;default:Hf(k,V,q,re,E)}d=d.sibling}}function Zg(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,y=d,E=y.flags;switch(y.tag){case 22:Zg(p,y),E&2048&&ST(y.alternate,y);break;case 24:Zg(p,y),E&2048&&_T(y.alternate,y);break;default:Zg(p,y)}d=d.sibling}}var Jg=8192;function Kf(l,d,p){if(l.subtreeFlags&Jg)for(l=l.child;l!==null;)Rz(l,d,p),l=l.sibling}function Rz(l,d,p){switch(l.tag){case 26:Kf(l,d,p),l.flags&Jg&&l.memoizedState!==null&&wne(p,cs,l.memoizedState,l.memoizedProps);break;case 5:Kf(l,d,p);break;case 3:case 4:var y=cs;cs=Tb(l.stateNode.containerInfo),Kf(l,d,p),cs=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=Jg,Jg=16777216,Kf(l,d,p),Jg=y):Kf(l,d,p));break;default:Kf(l,d,p)}}function Mz(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function em(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];Dr=y,zz(y,l)}Mz(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)jz(l),l=l.sibling}function jz(l){switch(l.tag){case 0:case 11:case 15:em(l),l.flags&2048&&uc(9,l,l.return);break;case 3:em(l);break;case 12:em(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,fb(l)):em(l);break;default:em(l)}}function fb(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];Dr=y,zz(y,l)}Mz(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:uc(8,d,d.return),fb(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,fb(d));break;default:fb(d)}l=l.sibling}}function zz(l,d){for(;Dr!==null;){var p=Dr;switch(p.tag){case 0:case 11:case 15:uc(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:zg(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Dr=y;else e:for(p=l;Dr!==null;){y=Dr;var E=y.sibling,k=y.return;if(kz(y),y===p){Dr=null;break e}if(E!==null){E.return=k,Dr=E;break e}Dr=k}}}var jte={getCacheForType:function(l){var d=qr(tr),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return qr(tr).controller.signal}},zte=typeof WeakMap=="function"?WeakMap:Map,zt=0,an=null,St=null,Tt=0,qt=0,ia=null,dc=!1,Wf=!1,ET=!1,Jo=0,zn=0,fc=0,Yu=0,TT=0,aa=0,Yf=0,tm=null,ji=null,AT=!1,hb=0,Lz=0,pb=1/0,gb=null,hc=null,gr=0,pc=null,Xf=null,el=0,kT=0,CT=null,Vz=null,nm=0,IT=null;function sa(){return(zt&2)!==0&&Tt!==0?Tt&-Tt:G.T!==null?MT():my()}function Bz(){if(aa===0)if((Tt&536870912)===0||It){var l=pn;pn<<=1,(pn&3932160)===0&&(pn=262144),aa=l}else aa=536870912;return l=na.current,l!==null&&(l.flags|=32),aa}function zi(l,d,p){(l===an&&(qt===2||qt===9)||l.cancelPendingCommit!==null)&&(Qf(l,0),gc(l,Tt,aa,!1)),_u(l,p),((zt&2)===0||l!==an)&&(l===an&&((zt&2)===0&&(Yu|=p),zn===4&&gc(l,Tt,aa,!1)),Js(l))}function Fz(l,d,p){if((zt&6)!==0)throw Error(r(327));var y=!p&&(d&127)===0&&(d&l.expiredLanes)===0||Cn(l,d),E=y?Bte(l,d):NT(l,d,!0),k=y;do{if(E===0){Wf&&!y&&gc(l,d,0,!1);break}else{if(p=l.current.alternate,k&&!Lte(p)){E=NT(l,d,!1),k=!1;continue}if(E===2){if(k=d,l.errorRecoveryDisabledLanes&k)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){d=V;e:{var q=l;E=tm;var re=q.current.memoizedState.isDehydrated;if(re&&(Qf(q,V).flags|=256),V=NT(q,V,!1),V!==2){if(ET&&!re){q.errorRecoveryDisabledLanes|=k,Yu|=k,E=4;break e}k=ji,ji=E,k!==null&&(ji===null?ji=k:ji.push.apply(ji,k))}E=V}if(k=!1,E!==2)continue}}if(E===1){Qf(l,0),gc(l,d,0,!0);break}e:{switch(y=l,k=E,k){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:gc(y,d,aa,!dc);break e;case 2:ji=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=hb+300-yt(),10<E)){if(gc(y,d,aa,!dc),ri(y,0,!0)!==0)break e;el=d,y.timeoutHandle=y4(Uz.bind(null,y,p,ji,gb,AT,d,aa,Yu,Yf,dc,k,"Throttled",-0,0),E);break e}Uz(y,p,ji,gb,AT,d,aa,Yu,Yf,dc,k,null,-0,0)}}break}while(!0);Js(l)}function Uz(l,d,p,y,E,k,V,q,re,ge,Te,Ce,ye,we){if(l.timeoutHandle=-1,Ce=d.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rs},Rz(d,k,Ce);var $e=(k&62914560)===k?hb-yt():(k&4194048)===k?Lz-yt():0;if($e=Sne(Ce,$e),$e!==null){el=k,l.cancelPendingCommit=$e(Xz.bind(null,l,d,k,p,y,E,V,q,re,Te,Ce,null,ye,we)),gc(l,k,V,!ge);return}}Xz(l,d,k,p,y,E,V,q,re)}function Lte(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],k=E.getSnapshot;E=E.value;try{if(!ea(k(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function gc(l,d,p,y){d&=~TT,d&=~Yu,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var E=d;0<E;){var k=31-at(E),V=1<<k;y[k]=-1,E&=~V}p!==0&&Eu(l,p,d)}function mb(){return(zt&6)===0?(rm(0),!1):!0}function PT(){if(St!==null){if(qt===0)var l=St.return;else l=St,$o=Bu=null,HE(l),Ff=null,Vg=0,l=St;for(;l!==null;)bz(l.alternate,l),l=l.return;St=null}}function Qf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,ine(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),el=0,PT(),an=l,St=p=Fo(l.current,null),Tt=d,qt=0,ia=null,dc=!1,Wf=Cn(l,d),ET=!1,Yf=aa=TT=Yu=fc=zn=0,ji=tm=null,AT=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var E=31-at(y),k=1<<E;d|=l[E],y&=~k}return Jo=d,zy(),p}function $z(l,d){ft=null,G.H=Kg,d===Bf||d===Gy?(d=aj(),qt=3):d===RE?(d=aj(),qt=4):qt=d===lT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ia=d,St===null&&(zn=1,ab(l,ka(d,l.current)))}function qz(){var l=na.current;return l===null?!0:(Tt&4194048)===Tt?Na===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?l===Na:!1}function Gz(){var l=G.H;return G.H=Kg,l===null?Kg:l}function Hz(){var l=G.A;return G.A=jte,l}function vb(){zn=4,dc||(Tt&4194048)!==Tt&&na.current!==null||(Wf=!0),(fc&134217727)===0&&(Yu&134217727)===0||an===null||gc(an,Tt,aa,!1)}function NT(l,d,p){var y=zt;zt|=2;var E=Gz(),k=Hz();(an!==l||Tt!==d)&&(gb=null,Qf(l,d)),d=!1;var V=zn;e:do try{if(qt!==0&&St!==null){var q=St,re=ia;switch(qt){case 8:PT(),V=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(d=!0);var ge=qt;if(qt=0,ia=null,Zf(l,q,re,ge),p&&Wf){V=0;break e}break;default:ge=qt,qt=0,ia=null,Zf(l,q,re,ge)}}Vte(),V=zn;break}catch(Te){$z(l,Te)}while(!0);return d&&l.shellSuspendCounter++,$o=Bu=null,zt=y,G.H=E,G.A=k,St===null&&(an=null,Tt=0,zy()),V}function Vte(){for(;St!==null;)Kz(St)}function Bte(l,d){var p=zt;zt|=2;var y=Gz(),E=Hz();an!==l||Tt!==d?(gb=null,pb=yt()+500,Qf(l,d)):Wf=Cn(l,d);e:do try{if(qt!==0&&St!==null){d=St;var k=ia;t:switch(qt){case 1:qt=0,ia=null,Zf(l,d,k,1);break;case 2:case 9:if(rj(k)){qt=0,ia=null,Wz(d);break}d=function(){qt!==2&&qt!==9||an!==l||(qt=7),Js(l)},k.then(d,d);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:rj(k)?(qt=0,ia=null,Wz(d)):(qt=0,ia=null,Zf(l,d,k,7));break;case 5:var V=null;switch(St.tag){case 26:V=St.memoizedState;case 5:case 27:var q=St;if(V?O4(V):q.stateNode.complete){qt=0,ia=null;var re=q.sibling;if(re!==null)St=re;else{var ge=q.return;ge!==null?(St=ge,yb(ge)):St=null}break t}}qt=0,ia=null,Zf(l,d,k,5);break;case 6:qt=0,ia=null,Zf(l,d,k,6);break;case 8:PT(),zn=6;break e;default:throw Error(r(462))}}Fte();break}catch(Te){$z(l,Te)}while(!0);return $o=Bu=null,G.H=y,G.A=E,zt=p,St!==null?0:(an=null,Tt=0,zy(),zn)}function Fte(){for(;St!==null&&!Gn();)Kz(St)}function Kz(l){var d=vz(l.alternate,l,Jo);l.memoizedProps=l.pendingProps,d===null?yb(l):St=d}function Wz(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=dz(p,d,d.pendingProps,d.type,void 0,Tt);break;case 11:d=dz(p,d,d.pendingProps,d.type.render,d.ref,Tt);break;case 5:HE(d);default:bz(p,d),d=St=HM(d,Jo),d=vz(p,d,Jo)}l.memoizedProps=l.pendingProps,d===null?yb(l):St=d}function Zf(l,d,p,y){$o=Bu=null,HE(d),Ff=null,Vg=0;var E=d.return;try{if(Ite(l,E,d,p,Tt)){zn=1,ab(l,ka(p,l.current)),St=null;return}}catch(k){if(E!==null)throw St=E,k;zn=1,ab(l,ka(p,l.current)),St=null;return}d.flags&32768?(It||y===1?l=!0:Wf||(Tt&536870912)!==0?l=!1:(dc=l=!0,(y===2||y===9||y===3||y===6)&&(y=na.current,y!==null&&y.tag===13&&(y.flags|=16384))),Yz(d,l)):yb(d)}function yb(l){var d=l;do{if((d.flags&32768)!==0){Yz(d,dc);return}l=d.return;var p=Dte(d.alternate,d,Jo);if(p!==null){St=p;return}if(d=d.sibling,d!==null){St=d;return}St=d=l}while(d!==null);zn===0&&(zn=5)}function Yz(l,d){do{var p=Ote(l.alternate,l);if(p!==null){p.flags&=32767,St=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){St=l;return}St=l=p}while(l!==null);zn=6,St=null}function Xz(l,d,p,y,E,k,V,q,re){l.cancelPendingCommit=null;do bb();while(gr!==0);if((zt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(k=d.lanes|d.childLanes,k|=bE,uE(l,p,k,V,q,re),l===an&&(St=an=null,Tt=0),Xf=d,pc=l,el=p,kT=k,CT=E,Vz=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Gte(ze,function(){return t4(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,E=Y.p,Y.p=2,V=zt,zt|=4;try{Rte(l,d,p)}finally{zt=V,Y.p=E,G.T=y}}gr=1,Qz(),Zz(),Jz()}}function Qz(){if(gr===1){gr=0;var l=pc,d=Xf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var y=Y.p;Y.p=2;var E=zt;zt|=4;try{Nz(d,l);var k=$T,V=zM(l.containerInfo),q=k.focusedElem,re=k.selectionRange;if(V!==q&&q&&q.ownerDocument&&jM(q.ownerDocument.documentElement,q)){if(re!==null&&pE(q)){var ge=re.start,Te=re.end;if(Te===void 0&&(Te=ge),"selectionStart"in q)q.selectionStart=ge,q.selectionEnd=Math.min(Te,q.value.length);else{var Ce=q.ownerDocument||document,ye=Ce&&Ce.defaultView||window;if(ye.getSelection){var we=ye.getSelection(),$e=q.textContent.length,st=Math.min(re.start,$e),Jt=re.end===void 0?st:Math.min(re.end,$e);!we.extend&&st>Jt&&(V=Jt,Jt=st,st=V);var de=MM(q,st),ce=MM(q,Jt);if(de&&ce&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ce.node||we.focusOffset!==ce.offset)){var pe=Ce.createRange();pe.setStart(de.node,de.offset),we.removeAllRanges(),st>Jt?(we.addRange(pe),we.extend(ce.node,ce.offset)):(pe.setEnd(ce.node,ce.offset),we.addRange(pe))}}}}for(Ce=[],we=q;we=we.parentNode;)we.nodeType===1&&Ce.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Ce.length;q++){var ke=Ce[q];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}Nb=!!UT,$T=UT=null}finally{zt=E,Y.p=y,G.T=p}}l.current=d,gr=2}}function Zz(){if(gr===2){gr=0;var l=pc,d=Xf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var y=Y.p;Y.p=2;var E=zt;zt|=4;try{Az(l,d.alternate,d)}finally{zt=E,Y.p=y,G.T=p}}gr=3}}function Jz(){if(gr===4||gr===3){gr=0,An();var l=pc,d=Xf,p=el,y=Vz;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?gr=5:(gr=0,Xf=pc=null,e4(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(hc=null),zo(p),d=d.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(dn,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=G.T,E=Y.p,Y.p=2,G.T=null;try{for(var k=l.onRecoverableError,V=0;V<y.length;V++){var q=y[V];k(q.value,{componentStack:q.stack})}}finally{G.T=d,Y.p=E}}(el&3)!==0&&bb(),Js(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===IT?nm++:(nm=0,IT=l):nm=0,rm(0)}}function e4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,zg(d)))}function bb(){return Qz(),Zz(),Jz(),t4()}function t4(){if(gr!==5)return!1;var l=pc,d=kT;kT=0;var p=zo(el),y=G.T,E=Y.p;try{Y.p=32>p?32:p,G.T=null,p=CT,CT=null;var k=pc,V=el;if(gr=0,Xf=pc=null,el=0,(zt&6)!==0)throw Error(r(331));var q=zt;if(zt|=4,jz(k.current),Oz(k,k.current,V,p),zt=q,rm(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(dn,k)}catch{}return!0}finally{Y.p=E,G.T=y,e4(l,d)}}function n4(l,d,p){d=ka(p,d),d=oT(l.stateNode,d,2),l=oc(l,d,2),l!==null&&(_u(l,2),Js(l))}function Gt(l,d,p){if(l.tag===3)n4(l,l,p);else for(;d!==null;){if(d.tag===3){n4(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(hc===null||!hc.has(y))){l=ka(p,l),p=rz(2),y=oc(d,p,2),y!==null&&(iz(p,y,d,l),_u(y,2),Js(y));break}}d=d.return}}function DT(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new zte;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(p)||(ET=!0,E.add(p),l=Ute.bind(null,l,d,p),d.then(l,l))}function Ute(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,an===l&&(Tt&p)===p&&(zn===4||zn===3&&(Tt&62914560)===Tt&&300>yt()-hb?(zt&2)===0&&Qf(l,0):TT|=p,Yf===Tt&&(Yf=0)),Js(l)}function r4(l,d){d===0&&(d=Gl()),l=zu(l,d),l!==null&&(_u(l,d),Js(l))}function $te(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),r4(l,p)}function qte(l,d){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),r4(l,p)}function Gte(l,d){return it(l,d)}var xb=null,Jf=null,OT=!1,wb=!1,RT=!1,mc=0;function Js(l){l!==Jf&&l.next===null&&(Jf===null?xb=Jf=l:Jf=Jf.next=l),wb=!0,OT||(OT=!0,Kte())}function rm(l,d){if(!RT&&wb){RT=!0;do for(var p=!1,y=xb;y!==null;){if(l!==0){var E=y.pendingLanes;if(E===0)var k=0;else{var V=y.suspendedLanes,q=y.pingedLanes;k=(1<<31-at(42|l)+1)-1,k&=E&~(V&~q),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(p=!0,o4(y,k))}else k=Tt,k=ri(y,y===an?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||Cn(y,k)||(p=!0,o4(y,k));y=y.next}while(p);RT=!1}}function Hte(){i4()}function i4(){wb=OT=!1;var l=0;mc!==0&&rne()&&(l=mc);for(var d=yt(),p=null,y=xb;y!==null;){var E=y.next,k=a4(y,d);k===0?(y.next=null,p===null?xb=E:p.next=E,E===null&&(Jf=p)):(p=y,(l!==0||(k&3)!==0)&&(wb=!0)),y=E}gr!==0&&gr!==5||rm(l),mc!==0&&(mc=0)}function a4(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,k=l.pendingLanes&-62914561;0<k;){var V=31-at(k),q=1<<V,re=E[V];re===-1?((q&p)===0||(q&y)!==0)&&(E[V]=es(q,d)):re<=d&&(l.expiredLanes|=q),k&=~q}if(d=an,p=Tt,p=ri(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===d&&(qt===2||qt===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Ft(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||Cn(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(y!==null&&Ft(y),zo(p)){case 2:case 8:p=ti;break;case 32:p=ze;break;case 268435456:p=Ir;break;default:p=ze}return y=s4.bind(null,l),p=it(p,y),l.callbackPriority=d,l.callbackNode=p,d}return y!==null&&y!==null&&Ft(y),l.callbackPriority=2,l.callbackNode=null,2}function s4(l,d){if(gr!==0&&gr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(bb()&&l.callbackNode!==p)return null;var y=Tt;return y=ri(l,l===an?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(Fz(l,y,d),a4(l,yt()),l.callbackNode!=null&&l.callbackNode===p?s4.bind(null,l):null)}function o4(l,d){if(bb())return null;Fz(l,d,!0)}function Kte(){ane(function(){(zt&6)!==0?it(ei,Hte):i4()})}function MT(){if(mc===0){var l=Lf;l===0&&(l=ut,ut<<=1,(ut&261888)===0&&(ut=256)),mc=l}return mc}function l4(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:_f(""+l)}function c4(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function Wte(l,d,p,y,E){if(d==="submit"&&p&&p.stateNode===E){var k=l4((E[Pr]||null).action),V=y.submitter;V&&(d=(d=V[Pr]||null)?l4(d.formAction):V.getAttribute("formAction"),d!==null&&(k=d,V=null));var q=new Hs("action","action",null,y,E);l.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(mc!==0){var re=V?c4(E,V):new FormData(E);tT(p,{pending:!0,data:re,method:E.method,action:k},null,re)}}else typeof k=="function"&&(q.preventDefault(),re=V?c4(E,V):new FormData(E),tT(p,{pending:!0,data:re,method:E.method,action:k},k,re))},currentTarget:E}]})}}for(var jT=0;jT<yE.length;jT++){var zT=yE[jT],Yte=zT.toLowerCase(),Xte=zT[0].toUpperCase()+zT.slice(1);ls(Yte,"on"+Xte)}ls(BM,"onAnimationEnd"),ls(FM,"onAnimationIteration"),ls(UM,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(fte,"onTransitionRun"),ls(hte,"onTransitionStart"),ls(pte,"onTransitionCancel"),ls($M,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var im="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(im));function u4(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var k=void 0;if(d)for(var V=y.length-1;0<=V;V--){var q=y[V],re=q.instance,ge=q.currentTarget;if(q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ge;try{k(E)}catch(Te){jy(Te)}E.currentTarget=null,k=re}else for(V=0;V<y.length;V++){if(q=y[V],re=q.instance,ge=q.currentTarget,q=q.listener,re!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ge;try{k(E)}catch(Te){jy(Te)}E.currentTarget=null,k=re}}}}function _t(l,d){var p=d[yf];p===void 0&&(p=d[yf]=new Set);var y=l+"__bubble";p.has(y)||(d4(d,l,2,!1),p.add(y))}function LT(l,d,p){var y=0;d&&(y|=4),d4(p,l,y,d)}var Sb="_reactListening"+Math.random().toString(36).slice(2);function VT(l){if(!l[Sb]){l[Sb]=!0,mg.forEach(function(p){p!=="selectionchange"&&(Qte.has(p)||LT(p,!1,l),LT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Sb]||(d[Sb]=!0,LT("selectionchange",!1,d))}}function d4(l,d,p,y){switch(B4(d)){case 2:var E=Tne;break;case 8:E=Ane;break;default:E=eA}p=E.bind(null,d,p,l),E=void 0,!Iu||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function BT(l,d,p,y,E){var k=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var V=y.tag;if(V===3||V===4){var q=y.stateNode.containerInfo;if(q===E)break;if(V===4)for(V=y.return;V!==null;){var re=V.tag;if((re===3||re===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;q!==null;){if(V=Vs(q),V===null)return;if(re=V.tag,re===5||re===6||re===26||re===27){y=k=V;continue e}q=q.parentNode}}y=y.return}Ql(function(){var ge=k,Te=_a(p),Ce=[];e:{var ye=qM.get(l);if(ye!==void 0){var we=Hs,$e=l;switch(l){case"keypress":if(Nu(p)===0)break e;case"keydown":case"keyup":we=Oy;break;case"focusin":$e="focus",we=Ou;break;case"focusout":$e="blur",we=Ou;break;case"beforeblur":case"afterblur":we=Ou;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Ey;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=M;break;case BM:case FM:case UM:we=Ay;break;case $M:we=H;break;case"scroll":case"scrollend":we=Cg;break;case"wheel":we=xe;break;case"copy":case"cut":case"paste":we=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Bo;break;case"toggle":case"beforetoggle":we=dt}var st=(d&4)!==0,Jt=!st&&(l==="scroll"||l==="scrollend"),de=st?ye!==null?ye+"Capture":null:ye;st=[];for(var ce=ge,pe;ce!==null;){var ke=ce;if(pe=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||pe===null||de===null||(ke=is(ce,de),ke!=null&&st.push(am(ce,ke,pe))),Jt)break;ce=ce.return}0<st.length&&(ye=new we(ye,$e,null,p,Te),Ce.push({event:ye,listeners:st}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",ye&&p!==Tg&&($e=p.relatedTarget||p.fromElement)&&(Vs($e)||$e[zs]))break e;if((we||ye)&&(ye=Te.window===Te?Te:(ye=Te.ownerDocument)?ye.defaultView||ye.parentWindow:window,we?($e=p.relatedTarget||p.toElement,we=ge,$e=$e?Vs($e):null,$e!==null&&(Jt=a($e),st=$e.tag,$e!==Jt||st!==5&&st!==27&&st!==6)&&($e=null)):(we=null,$e=ge),we!==$e)){if(st=Ig,ke="onMouseLeave",de="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(st=Bo,ke="onPointerLeave",de="onPointerEnter",ce="pointer"),Jt=we==null?ye:Zi(we),pe=$e==null?ye:Zi($e),ye=new st(ke,ce+"leave",we,p,Te),ye.target=Jt,ye.relatedTarget=pe,ke=null,Vs(Te)===ge&&(st=new st(de,ce+"enter",$e,p,Te),st.target=pe,st.relatedTarget=Jt,ke=st),Jt=ke,we&&$e)t:{for(st=Zte,de=we,ce=$e,pe=0,ke=de;ke;ke=st(ke))pe++;ke=0;for(var Je=ce;Je;Je=st(Je))ke++;for(;0<pe-ke;)de=st(de),pe--;for(;0<ke-pe;)ce=st(ce),ke--;for(;pe--;){if(de===ce||ce!==null&&de===ce.alternate){st=de;break t}de=st(de),ce=st(ce)}st=null}else st=null;we!==null&&f4(Ce,ye,we,st,!1),$e!==null&&Jt!==null&&f4(Ce,Jt,$e,st,!0)}}e:{if(ye=ge?Zi(ge):window,we=ye.nodeName&&ye.nodeName.toLowerCase(),we==="select"||we==="input"&&ye.type==="file")var Dt=IM;else if(kM(ye))if(PM)Dt=cte;else{Dt=ote;var We=ste}else we=ye.nodeName,!we||we.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?ge&&Sf(ge.elementType)&&(Dt=IM):Dt=lte;if(Dt&&(Dt=Dt(l,ge))){CM(Ce,Dt,p,Te);break e}We&&We(l,ye,ge),l==="focusout"&&ge&&ye.type==="number"&&ge.memoizedProps.value!=null&&Sg(ye,"number",ye.value)}switch(We=ge?Zi(ge):window,l){case"focusin":(kM(We)||We.contentEditable==="true")&&(Pf=We,gE=ge,Rg=null);break;case"focusout":Rg=gE=Pf=null;break;case"mousedown":mE=!0;break;case"contextmenu":case"mouseup":case"dragend":mE=!1,LM(Ce,p,Te);break;case"selectionchange":if(dte)break;case"keydown":case"keyup":LM(Ce,p,Te)}var pt;if(jt)e:{switch(l){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else If?Ru(l,p)&&(At="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(At="onCompositionStart");At&&(Ys&&p.locale!=="ko"&&(If||At!=="onCompositionStart"?At==="onCompositionEnd"&&If&&(pt=kg()):(Gs=Te,Ag="value"in Gs?Gs.value:Gs.textContent,If=!0)),We=_b(ge,At),0<We.length&&(At=new Ws(At,l,null,p,Te),Ce.push({event:At,listeners:We}),pt?At.data=pt:(pt=Cf(p),pt!==null&&(At.data=pt)))),(pt=Ta?nte(l,p):rte(l,p))&&(At=_b(ge,"onBeforeInput"),0<At.length&&(We=new Ws("onBeforeInput","beforeinput",null,p,Te),Ce.push({event:We,listeners:At}),We.data=pt)),Wte(Ce,l,ge,p,Te)}u4(Ce,d)})}function am(l,d,p){return{instance:l,listener:d,currentTarget:p}}function _b(l,d){for(var p=d+"Capture",y=[];l!==null;){var E=l,k=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||k===null||(E=is(l,p),E!=null&&y.unshift(am(l,E,k)),E=is(l,d),E!=null&&y.push(am(l,E,k))),l.tag===3)return y;l=l.return}return[]}function Zte(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function f4(l,d,p,y,E){for(var k=d._reactName,V=[];p!==null&&p!==y;){var q=p,re=q.alternate,ge=q.stateNode;if(q=q.tag,re!==null&&re===y)break;q!==5&&q!==26&&q!==27||ge===null||(re=ge,E?(ge=is(p,k),ge!=null&&V.unshift(am(p,ge,re))):E||(ge=is(p,k),ge!=null&&V.push(am(p,ge,re)))),p=p.return}V.length!==0&&l.push({event:d,listeners:V})}var Jte=/\r\n?/g,ene=/\u0000|\uFFFD/g;function h4(l){return(typeof l=="string"?l:""+l).replace(Jte,`
`).replace(ene,"")}function p4(l,d){return d=h4(d),h4(l)===d}function Zt(l,d,p,y,E,k){switch(p){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||Di(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&Di(l,""+y);break;case"className":Ji(l,"class",y);break;case"tabIndex":Ji(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Ji(l,p,y);break;case"style":Eg(l,y,k);break;case"data":if(d!=="object"){Ji(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=_f(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(p==="formAction"?(d!=="input"&&Zt(l,d,"name",E.name,E,null),Zt(l,d,"formEncType",E.formEncType,E,null),Zt(l,d,"formMethod",E.formMethod,E,null),Zt(l,d,"formTarget",E.formTarget,E,null)):(Zt(l,d,"encType",E.encType,E,null),Zt(l,d,"method",E.method,E,null),Zt(l,d,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=_f(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=rs);break;case"onScroll":y!=null&&_t("scroll",l);break;case"onScrollEnd":y!=null&&_t("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=_f(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":_t("beforetoggle",l),_t("toggle",l),xf(l,"popover",y);break;case"xlinkActuate":er(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":er(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":er(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":er(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":er(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":er(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":er(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":er(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":er(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":xf(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=_y.get(p)||p,xf(l,p,y))}}function FT(l,d,p,y,E,k){switch(p){case"style":Eg(l,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Di(l,y):(typeof y=="number"||typeof y=="bigint")&&Di(l,""+y);break;case"onScroll":y!=null&&_t("scroll",l);break;case"onScrollEnd":y!=null&&_t("scrollend",l);break;case"onClick":y!=null&&(l.onclick=rs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vg.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),k=l[Pr]||null,k=k!=null?k[p]:null,typeof k=="function"&&l.removeEventListener(d,k,E),typeof y=="function")){typeof k!="function"&&k!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,y,E);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):xf(l,p,y)}}}function Hr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",l),_t("load",l);var y=!1,E=!1,k;for(k in p)if(p.hasOwnProperty(k)){var V=p[k];if(V!=null)switch(k){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Zt(l,d,k,V,p,null)}}E&&Zt(l,d,"srcSet",p.srcSet,p,null),y&&Zt(l,d,"src",p.src,p,null);return;case"input":_t("invalid",l);var q=k=V=E=null,re=null,ge=null;for(y in p)if(p.hasOwnProperty(y)){var Te=p[y];if(Te!=null)switch(y){case"name":E=Te;break;case"type":V=Te;break;case"checked":re=Te;break;case"defaultChecked":ge=Te;break;case"value":k=Te;break;case"defaultValue":q=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,d));break;default:Zt(l,d,y,Te,p,null)}}xy(l,k,q,re,ge,V,E,!1);return;case"select":_t("invalid",l),y=V=k=null;for(E in p)if(p.hasOwnProperty(E)&&(q=p[E],q!=null))switch(E){case"value":k=q;break;case"defaultValue":V=q;break;case"multiple":y=q;default:Zt(l,d,E,q,p,null)}d=k,p=V,l.multiple=!!y,d!=null?Kl(l,!!y,d,!1):p!=null&&Kl(l,!!y,p,!0);return;case"textarea":_t("invalid",l),k=E=y=null;for(V in p)if(p.hasOwnProperty(V)&&(q=p[V],q!=null))switch(V){case"value":y=q;break;case"defaultValue":E=q;break;case"children":k=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Zt(l,d,V,q,p,null)}Wl(l,y,E,k);return;case"option":for(re in p)p.hasOwnProperty(re)&&(y=p[re],y!=null)&&(re==="selected"?l.selected=y&&typeof y!="function"&&typeof y!="symbol":Zt(l,d,re,y,p,null));return;case"dialog":_t("beforetoggle",l),_t("toggle",l),_t("cancel",l),_t("close",l);break;case"iframe":case"object":_t("load",l);break;case"video":case"audio":for(y=0;y<im.length;y++)_t(im[y],l);break;case"image":_t("error",l),_t("load",l);break;case"details":_t("toggle",l);break;case"embed":case"source":case"link":_t("error",l),_t("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in p)if(p.hasOwnProperty(ge)&&(y=p[ge],y!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Zt(l,d,ge,y,p,null)}return;default:if(Sf(d)){for(Te in p)p.hasOwnProperty(Te)&&(y=p[Te],y!==void 0&&FT(l,d,Te,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&Zt(l,d,q,y,p,null))}function tne(l,d,p,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,k=null,V=null,q=null,re=null,ge=null,Te=null;for(we in p){var Ce=p[we];if(p.hasOwnProperty(we)&&Ce!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":re=Ce;default:y.hasOwnProperty(we)||Zt(l,d,we,null,y,Ce)}}for(var ye in y){var we=y[ye];if(Ce=p[ye],y.hasOwnProperty(ye)&&(we!=null||Ce!=null))switch(ye){case"type":k=we;break;case"name":E=we;break;case"checked":ge=we;break;case"defaultChecked":Te=we;break;case"value":V=we;break;case"defaultValue":q=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:we!==Ce&&Zt(l,d,ye,we,y,Ce)}}wf(l,V,q,re,ge,Te,k,E);return;case"select":we=V=q=ye=null;for(k in p)if(re=p[k],p.hasOwnProperty(k)&&re!=null)switch(k){case"value":break;case"multiple":we=re;default:y.hasOwnProperty(k)||Zt(l,d,k,null,y,re)}for(E in y)if(k=y[E],re=p[E],y.hasOwnProperty(E)&&(k!=null||re!=null))switch(E){case"value":ye=k;break;case"defaultValue":q=k;break;case"multiple":V=k;default:k!==re&&Zt(l,d,E,k,y,re)}d=q,p=V,y=we,ye!=null?Kl(l,!!p,ye,!1):!!y!=!!p&&(d!=null?Kl(l,!!p,d,!0):Kl(l,!!p,p?[]:"",!1));return;case"textarea":we=ye=null;for(q in p)if(E=p[q],p.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Zt(l,d,q,null,y,E)}for(V in y)if(E=y[V],k=p[V],y.hasOwnProperty(V)&&(E!=null||k!=null))switch(V){case"value":ye=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==k&&Zt(l,d,V,E,y,k)}wy(l,ye,we);return;case"option":for(var $e in p)ye=p[$e],p.hasOwnProperty($e)&&ye!=null&&!y.hasOwnProperty($e)&&($e==="selected"?l.selected=!1:Zt(l,d,$e,null,y,ye));for(re in y)ye=y[re],we=p[re],y.hasOwnProperty(re)&&ye!==we&&(ye!=null||we!=null)&&(re==="selected"?l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol":Zt(l,d,re,ye,y,we));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in p)ye=p[st],p.hasOwnProperty(st)&&ye!=null&&!y.hasOwnProperty(st)&&Zt(l,d,st,null,y,ye);for(ge in y)if(ye=y[ge],we=p[ge],y.hasOwnProperty(ge)&&ye!==we&&(ye!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,d));break;default:Zt(l,d,ge,ye,y,we)}return;default:if(Sf(d)){for(var Jt in p)ye=p[Jt],p.hasOwnProperty(Jt)&&ye!==void 0&&!y.hasOwnProperty(Jt)&&FT(l,d,Jt,void 0,y,ye);for(Te in y)ye=y[Te],we=p[Te],!y.hasOwnProperty(Te)||ye===we||ye===void 0&&we===void 0||FT(l,d,Te,ye,y,we);return}}for(var de in p)ye=p[de],p.hasOwnProperty(de)&&ye!=null&&!y.hasOwnProperty(de)&&Zt(l,d,de,null,y,ye);for(Ce in y)ye=y[Ce],we=p[Ce],!y.hasOwnProperty(Ce)||ye===we||ye==null&&we==null||Zt(l,d,Ce,ye,y,we)}function g4(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nne(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],k=E.transferSize,V=E.initiatorType,q=E.duration;if(k&&q&&g4(V)){for(V=0,q=E.responseEnd,y+=1;y<p.length;y++){var re=p[y],ge=re.startTime;if(ge>q)break;var Te=re.transferSize,Ce=re.initiatorType;Te&&g4(Ce)&&(re=re.responseEnd,V+=Te*(re<q?1:(q-ge)/(re-ge)))}if(--y,d+=8*(k+V)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var UT=null,$T=null;function Eb(l){return l.nodeType===9?l:l.ownerDocument}function m4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function qT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var GT=null;function rne(){var l=window.event;return l&&l.type==="popstate"?l===GT?!1:(GT=l,!0):(GT=null,!1)}var y4=typeof setTimeout=="function"?setTimeout:void 0,ine=typeof clearTimeout=="function"?clearTimeout:void 0,b4=typeof Promise=="function"?Promise:void 0,ane=typeof queueMicrotask=="function"?queueMicrotask:typeof b4<"u"?function(l){return b4.resolve(null).then(l).catch(sne)}:y4;function sne(l){setTimeout(function(){throw l})}function vc(l){return l==="head"}function x4(l,d){var p=d,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){l.removeChild(E),rh(d);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")sm(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,sm(p);for(var k=p.firstChild;k;){var V=k.nextSibling,q=k.nodeName;k[Ls]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&k.rel.toLowerCase()==="stylesheet"||p.removeChild(k),k=V}}else p==="body"&&sm(l.ownerDocument.body);p=E}while(p);rh(d)}function w4(l,d){var p=l;l=0;do{var y=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=y}while(p)}function HT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":HT(p),bf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function one(l,d,p,y){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Ls])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(k=l.getAttribute("rel"),k==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(k!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(k=l.getAttribute("src"),(k!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&k&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var k=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===k)return l}else return l;if(l=Da(l.nextSibling),l===null)break}return null}function lne(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Da(l.nextSibling),l===null))return null;return l}function S4(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Da(l.nextSibling),l===null))return null;return l}function KT(l){return l.data==="$?"||l.data==="$~"}function WT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function cne(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var y=function(){d(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Da(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var YT=null;function _4(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Da(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function E4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function T4(l,d,p){switch(d=Eb(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function sm(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);bf(l)}var Oa=new Map,A4=new Set;function Tb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var tl=Y.d;Y.d={f:une,r:dne,D:fne,C:hne,L:pne,m:gne,X:vne,S:mne,M:yne};function une(){var l=tl.f(),d=mb();return l||d}function dne(l){var d=Sa(l);d!==null&&d.tag===5&&d.type==="form"?$j(d):tl.r(l)}var eh=typeof document>"u"?null:document;function k4(l,d,p){var y=eh;if(y&&typeof d=="string"&&d){var E=Ni(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),A4.has(E)||(A4.add(E),l={rel:l,crossOrigin:p,href:d},y.querySelector(E)===null&&(d=y.createElement("link"),Hr(d,"link",l),Jn(d),y.head.appendChild(d)))}}function fne(l){tl.D(l),k4("dns-prefetch",l,null)}function hne(l,d){tl.C(l,d),k4("preconnect",l,d)}function pne(l,d,p){tl.L(l,d,p);var y=eh;if(y&&l&&d){var E='link[rel="preload"][as="'+Ni(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ni(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ni(p.imageSizes)+'"]')):E+='[href="'+Ni(l)+'"]';var k=E;switch(d){case"style":k=th(l);break;case"script":k=nh(l)}Oa.has(k)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Oa.set(k,l),y.querySelector(E)!==null||d==="style"&&y.querySelector(om(k))||d==="script"&&y.querySelector(lm(k))||(d=y.createElement("link"),Hr(d,"link",l),Jn(d),y.head.appendChild(d)))}}function gne(l,d){tl.m(l,d);var p=eh;if(p&&l){var y=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+Ni(y)+'"][href="'+Ni(l)+'"]',k=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=nh(l)}if(!Oa.has(k)&&(l=h({rel:"modulepreload",href:l},d),Oa.set(k,l),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(lm(k)))return}y=p.createElement("link"),Hr(y,"link",l),Jn(y),p.head.appendChild(y)}}}function mne(l,d,p){tl.S(l,d,p);var y=eh;if(y&&l){var E=Bs(y).hoistableStyles,k=th(l);d=d||"default";var V=E.get(k);if(!V){var q={loading:0,preload:null};if(V=y.querySelector(om(k)))q.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Oa.get(k))&&XT(l,p);var re=V=y.createElement("link");Jn(re),Hr(re,"link",l),re._p=new Promise(function(ge,Te){re.onload=ge,re.onerror=Te}),re.addEventListener("load",function(){q.loading|=1}),re.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Ab(V,d,y)}V={type:"stylesheet",instance:V,count:1,state:q},E.set(k,V)}}}function vne(l,d){tl.X(l,d);var p=eh;if(p&&l){var y=Bs(p).hoistableScripts,E=nh(l),k=y.get(E);k||(k=p.querySelector(lm(E)),k||(l=h({src:l,async:!0},d),(d=Oa.get(E))&&QT(l,d),k=p.createElement("script"),Jn(k),Hr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function yne(l,d){tl.M(l,d);var p=eh;if(p&&l){var y=Bs(p).hoistableScripts,E=nh(l),k=y.get(E);k||(k=p.querySelector(lm(E)),k||(l=h({src:l,async:!0,type:"module"},d),(d=Oa.get(E))&&QT(l,d),k=p.createElement("script"),Jn(k),Hr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function C4(l,d,p,y){var E=(E=ne.current)?Tb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=th(p.href),p=Bs(E).hoistableStyles,y=p.get(d),y||(y={type:"style",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=th(p.href);var k=Bs(E).hoistableStyles,V=k.get(l);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(l,V),(k=E.querySelector(om(l)))&&!k._p&&(V.instance=k,V.state.loading=5),Oa.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Oa.set(l,p),k||bne(E,l,p,V.state))),d&&y===null)throw Error(r(528,""));return V}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=nh(p),p=Bs(E).hoistableScripts,y=p.get(d),y||(y={type:"script",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function th(l){return'href="'+Ni(l)+'"'}function om(l){return'link[rel="stylesheet"]['+l+"]"}function I4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function bne(l,d,p,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),Hr(d,"link",p),Jn(d),l.head.appendChild(d))}function nh(l){return'[src="'+Ni(l)+'"]'}function lm(l){return"script[async]"+l}function P4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+Ni(p.href)+'"]');if(y)return d.instance=y,Jn(y),y;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Jn(y),Hr(y,"style",E),Ab(y,p.precedence,l),d.instance=y;case"stylesheet":E=th(p.href);var k=l.querySelector(om(E));if(k)return d.state.loading|=4,d.instance=k,Jn(k),k;y=I4(p),(E=Oa.get(E))&&XT(y,E),k=(l.ownerDocument||l).createElement("link"),Jn(k);var V=k;return V._p=new Promise(function(q,re){V.onload=q,V.onerror=re}),Hr(k,"link",y),d.state.loading|=4,Ab(k,p.precedence,l),d.instance=k;case"script":return k=nh(p.src),(E=l.querySelector(lm(k)))?(d.instance=E,Jn(E),E):(y=p,(E=Oa.get(k))&&(y=h({},p),QT(y,E)),l=l.ownerDocument||l,E=l.createElement("script"),Jn(E),Hr(E,"link",y),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,Ab(y,p.precedence,l));return d.instance}function Ab(l,d,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,k=E,V=0;V<y.length;V++){var q=y[V];if(q.dataset.precedence===d)k=q;else if(k!==E)break}k?k.parentNode.insertBefore(l,k.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function XT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function QT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var kb=null;function N4(l,d,p){if(kb===null){var y=new Map,E=kb=new Map;E.set(p,y)}else E=kb,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var k=p[E];if(!(k[Ls]||k[Zn]||l==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var V=k.getAttribute(d)||"";V=l+V;var q=y.get(V);q?q.push(k):y.set(V,[k])}}return y}function D4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function xne(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;return d.rel==="stylesheet"?(l=d.disabled,typeof d.precedence=="string"&&l==null):!0;case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function O4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function wne(l,d,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=th(y.href),k=d.querySelector(om(E));if(k){d=k._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=Cb.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=k,Jn(k);return}k=d.ownerDocument||d,y=I4(y),(E=Oa.get(E))&&XT(y,E),k=k.createElement("link"),Jn(k);var V=k;V._p=new Promise(function(q,re){V.onload=q,V.onerror=re}),Hr(k,"link",y),p.instance=k}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Cb.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var ZT=0;function Sne(l,d){return l.stylesheets&&l.count===0&&Pb(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var y=setTimeout(function(){if(l.stylesheets&&Pb(l,l.stylesheets),l.unsuspend){var k=l.unsuspend;l.unsuspend=null,k()}},6e4+d);0<l.imgBytes&&ZT===0&&(ZT=62500*nne());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Pb(l,l.stylesheets),l.unsuspend)){var k=l.unsuspend;l.unsuspend=null,k()}},(l.imgBytes>ZT?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function Cb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Ib=null;function Pb(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Ib=new Map,d.forEach(_ne,l),Ib=null,Cb.call(l))}function _ne(l,d){if(!(d.state.loading&4)){var p=Ib.get(l);if(p)var y=p.get(null);else{p=new Map,Ib.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<E.length;k++){var V=E[k];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(p.set(V.dataset.precedence,V),y=V)}y&&p.set(null,y)}E=d.instance,V=E.getAttribute("data-precedence"),k=p.get(V)||y,k===y&&p.set(null,E),p.set(V,E),this.count++,y=Cb.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),k?k.parentNode.insertBefore(E,k.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var cm={$$typeof:P,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Ene(l,d,p,y,E,k,V,q,re){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=js(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=js(0),this.hiddenUpdates=js(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=k,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function R4(l,d,p,y,E,k,V,q,re,ge,Te,Ce){return l=new Ene(l,d,p,V,re,ge,Te,Ce,q),d=1,k===!0&&(d|=24),k=ta(3,null,null,d),l.current=k,k.stateNode=l,d=NE(),d.refCount++,l.pooledCache=d,d.refCount++,k.memoizedState={element:y,isDehydrated:p,cache:d},ME(k),l}function M4(l){return l?(l=Of,l):Of}function j4(l,d,p,y,E,k){E=M4(E),y.context===null?y.context=E:y.pendingContext=E,y=sc(d),y.payload={element:p},k=k===void 0?null:k,k!==null&&(y.callback=k),p=oc(l,y,d),p!==null&&(zi(p,l,d),Fg(p,l,d))}function z4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function JT(l,d){z4(l,d),(l=l.alternate)&&z4(l,d)}function L4(l){if(l.tag===13||l.tag===31){var d=zu(l,67108864);d!==null&&zi(d,l,67108864),JT(l,67108864)}}function V4(l){if(l.tag===13||l.tag===31){var d=sa();d=Tu(d);var p=zu(l,d);p!==null&&zi(p,l,d),JT(l,d)}}var Nb=!0;function Tne(l,d,p,y){var E=G.T;G.T=null;var k=Y.p;try{Y.p=2,eA(l,d,p,y)}finally{Y.p=k,G.T=E}}function Ane(l,d,p,y){var E=G.T;G.T=null;var k=Y.p;try{Y.p=8,eA(l,d,p,y)}finally{Y.p=k,G.T=E}}function eA(l,d,p,y){if(Nb){var E=tA(y);if(E===null)BT(l,d,y,Db,p),F4(l,y);else if(Cne(E,l,d,p,y))y.stopPropagation();else if(F4(l,y),d&4&&-1<kne.indexOf(l)){for(;E!==null;){var k=Sa(E);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var V=mi(k.pendingLanes);if(V!==0){var q=k;for(q.pendingLanes|=2,q.entangledLanes|=2;V;){var re=1<<31-at(V);q.entanglements[1]|=re,V&=~re}Js(k),(zt&6)===0&&(pb=yt()+500,rm(0))}}break;case 31:case 13:q=zu(k,2),q!==null&&zi(q,k,2),mb(),JT(k,2)}if(k=tA(y),k===null&&BT(l,d,y,Db,p),k===E)break;E=k}E!==null&&y.stopPropagation()}else BT(l,d,y,null,p)}}function tA(l){return l=_a(l),nA(l)}var Db=null;function nA(l){if(Db=null,l=Vs(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Db=l,null}function B4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ut()){case ei:return 2;case ti:return 8;case ze:case wt:return 32;case Ir:return 268435456;default:return 32}default:return 32}}var rA=!1,yc=null,bc=null,xc=null,um=new Map,dm=new Map,wc=[],kne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function F4(l,d){switch(l){case"focusin":case"focusout":yc=null;break;case"dragenter":case"dragleave":bc=null;break;case"mouseover":case"mouseout":xc=null;break;case"pointerover":case"pointerout":um.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":dm.delete(d.pointerId)}}function fm(l,d,p,y,E,k){return l===null||l.nativeEvent!==k?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:k,targetContainers:[E]},d!==null&&(d=Sa(d),d!==null&&L4(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function Cne(l,d,p,y,E){switch(d){case"focusin":return yc=fm(yc,l,d,p,y,E),!0;case"dragenter":return bc=fm(bc,l,d,p,y,E),!0;case"mouseover":return xc=fm(xc,l,d,p,y,E),!0;case"pointerover":var k=E.pointerId;return um.set(k,fm(um.get(k)||null,l,d,p,y,E)),!0;case"gotpointercapture":return k=E.pointerId,dm.set(k,fm(dm.get(k)||null,l,d,p,y,E)),!0}return!1}function U4(l){var d=Vs(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,ts(l.priority,function(){V4(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,ts(l.priority,function(){V4(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ob(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=tA(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);Tg=y,p.target.dispatchEvent(y),Tg=null}else return d=Sa(p),d!==null&&L4(d),l.blockedOn=p,!1;d.shift()}return!0}function $4(l,d,p){Ob(l)&&p.delete(d)}function Ine(){rA=!1,yc!==null&&Ob(yc)&&(yc=null),bc!==null&&Ob(bc)&&(bc=null),xc!==null&&Ob(xc)&&(xc=null),um.forEach($4),dm.forEach($4)}function Rb(l,d){l.blockedOn===d&&(l.blockedOn=null,rA||(rA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ine)))}var Mb=null;function q4(l){Mb!==l&&(Mb=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mb===l&&(Mb=null);for(var d=0;d<l.length;d+=3){var p=l[d],y=l[d+1],E=l[d+2];if(typeof y!="function"){if(nA(y||p)===null)continue;break}var k=Sa(p);k!==null&&(l.splice(d,3),d-=3,tT(k,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function rh(l){function d(re){return Rb(re,l)}yc!==null&&Rb(yc,l),bc!==null&&Rb(bc,l),xc!==null&&Rb(xc,l),um.forEach(d),dm.forEach(d);for(var p=0;p<wc.length;p++){var y=wc[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<wc.length&&(p=wc[0],p.blockedOn===null);)U4(p),p.blockedOn===null&&wc.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],k=p[y+1],V=E[Pr]||null;if(typeof k=="function")V||q4(p);else if(V){var q=null;if(k&&k.hasAttribute("formAction")){if(E=k,V=k[Pr]||null)q=V.formAction;else if(nA(E)!==null)continue}else q=V.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),q4(p)}}}function G4(){function l(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function iA(l){this._internalRoot=l}jb.prototype.render=iA.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,y=sa();j4(p,y,l,d,null,null)},jb.prototype.unmount=iA.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;j4(l.current,2,null,l,null,null),mb(),d[zs]=null}};function jb(l){this._internalRoot=l}jb.prototype.unstable_scheduleHydration=function(l){if(l){var d=my();l={blockedOn:null,target:l,priority:d};for(var p=0;p<wc.length&&d!==0&&d<wc[p].priority;p++);wc.splice(p,0,l),p===0&&U4(l)}};var H4=e.version;if(H4!=="19.2.4")throw Error(r(527,H4,"19.2.4"));Y.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var Pne={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zb.isDisabled&&zb.supportsFiber)try{dn=zb.inject(Pne),Mt=zb}catch{}}return pm.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,y="",E=Jj,k=ez,V=tz;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(k=d.onCaughtError),d.onRecoverableError!==void 0&&(V=d.onRecoverableError)),d=R4(l,1,!1,null,null,p,y,null,E,k,V,G4),l[zs]=d.current,VT(l),new iA(d)},pm.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var y=!1,E="",k=Jj,V=ez,q=tz,re=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(k=p.onUncaughtError),p.onCaughtError!==void 0&&(V=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.formState!==void 0&&(re=p.formState)),d=R4(l,1,!0,d,p??null,y,E,re,k,V,q,G4),d.context=M4(null),p=d.current,y=sa(),y=Tu(y),E=sc(y),E.callback=null,oc(p,E,y),p=y,d.current.lanes=p,_u(d,p),Js(d),l[zs]=d.current,VT(l),new jb(d)},pm.version="19.2.4",pm}var nL;function Fne(){if(nL)return oA.exports;nL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oA.exports=Bne(),oA.exports}var Une=Fne();const $ne="modulepreload",qne=function(t){return"/personal-budget-pwa/"+t},rL={},Zh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=qne(u),u in rL)return;rL[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":$ne,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Gne(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await Zh(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const Hne=()=>{};var iL={};const G9=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Kne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},BN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,v=u&63;c||(v=64,s||(g=64)),r.push(n[f],n[h],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(G9(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Kne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new Wne;const g=a<<2|o>>4;if(r.push(g),u!==64){const v=o<<4&240|u>>2;if(r.push(v),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Wne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yne=function(t){const e=G9(t);return BN.encodeByteArray(e,!0)},H9=function(t){return Yne(t).replace(/\./g,"")},K9=function(t){try{return BN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function FN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Xne=()=>FN().__FIREBASE_DEFAULTS__,Qne=()=>{if(typeof process>"u"||typeof iL>"u")return;const t=iL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&K9(t[1]);return e&&JSON.parse(e)},pS=()=>{try{return Hne()||Xne()||Qne()||Zne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W9=t=>pS()?.emulatorHosts?.[t],Jne=t=>{const e=W9(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Y9=()=>pS()?.config,X9=t=>pS()?.[`_${t}`];class bv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function uu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UN(t){return(await fetch(t,{credentials:"include"})).ok}const Qm={};function ere(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qm))Qm[e]?t.emulator.push(e):t.prod.push(e);return t}function tre(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let aL=!1;function Q9(t,e){if(typeof window>"u"||typeof document>"u"||!uu(window.location.host)||Qm[t]===e||Qm[t]||aL)return;Qm[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=ere().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{aL=!0,s()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=tre(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const P=g.element;o(P),f(w,x);const D=u();c(T,S),P.append(T,b,w,D),document.body.appendChild(P)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nre(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Er())}function Z9(){const t=pS()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rre(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ire(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function are(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sre(){const t=Er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function J9(){return!Z9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e8(){return!Z9()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gS(){try{return typeof indexedDB=="object"}catch{return!1}}function ore(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const lre="FirebaseError";class Do extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lre,Object.setPrototypeOf(this,Do.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lp.prototype.create)}}class Lp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?cre(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Do(i,o,r)}}function cre(t,e){return t.replace(ure,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ure=/\{\$([^}]+)}/g;function dre(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(sL(a)&&sL(s)){if(!Zc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function sL(t){return t!==null&&typeof t=="object"}function p0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function jm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fre(t,e){const n=new hre(t,e);return n.subscribe.bind(n)}class hre{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pre(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=dA),i.error===void 0&&(i.error=dA),i.complete===void 0&&(i.complete=dA);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pre(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dA(){}const gre=1e3,mre=2,vre=14400*1e3,yre=.5;function bre(t,e=gre,n=mre){const r=e*Math.pow(n,t),i=Math.round(yre*r*(Math.random()-.5)*2);return Math.min(vre,r+i)}function Vt(t){return t&&t._delegate?t._delegate:t}let Eo=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const td="[DEFAULT]";let xre=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sre(e))try{this.getOrInitializeService({instanceIdentifier:td})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=td){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=td){return this.instances.has(e)}getOptions(e=td){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=td){return this.component?this.component.multipleInstances?e:td:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wre(t){return t===td?void 0:t}function Sre(t){return t.instantiationMode==="EAGER"}class _re{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(kt||(kt={}));const Ere={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},Tre=kt.INFO,Are={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},kre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Are[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let mS=class{constructor(e){this.name=e,this._logLevel=Tre,this._logHandler=kre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ere[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}};const Cre=(t,e)=>e.some(n=>t instanceof n);let oL,lL;function Ire(){return oL||(oL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pre(){return lL||(lL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t8=new WeakMap,ZC=new WeakMap,n8=new WeakMap,fA=new WeakMap,$N=new WeakMap;function Nre(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(qc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&t8.set(n,t)}).catch(()=>{}),$N.set(e,t),e}function Dre(t){if(ZC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});ZC.set(t,e)}let JC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ZC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ore(t){JC=t(JC)}function Rre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hA(this),e,...n);return n8.set(r,e.sort?e.sort():[e]),qc(r)}:Pre().includes(t)?function(...e){return t.apply(hA(this),e),qc(t8.get(this))}:function(...e){return qc(t.apply(hA(this),e))}}function Mre(t){return typeof t=="function"?Rre(t):(t instanceof IDBTransaction&&Dre(t),Cre(t,Ire())?new Proxy(t,JC):t)}function qc(t){if(t instanceof IDBRequest)return Nre(t);if(fA.has(t))return fA.get(t);const e=Mre(t);return e!==t&&(fA.set(t,e),$N.set(e,t)),e}const hA=t=>$N.get(t);function jre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=qc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(qc(s.result),c.oldVersion,c.newVersion,qc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const zre=["get","getKey","getAll","getAllKeys","count"],Lre=["put","add","delete","clear"],pA=new Map;function cL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pA.get(e))return pA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Lre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zre.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return pA.set(e,a),a}Ore(t=>({...t,get:(e,n,r)=>cL(e,n)||t.get(e,n,r),has:(e,n)=>!!cL(e,n)||t.has(e,n)}));class Vre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bre(t){return t.getComponent()?.type==="VERSION"}const eI="@firebase/app",uL="0.14.8";const bl=new mS("@firebase/app"),Fre="@firebase/app-compat",Ure="@firebase/analytics-compat",$re="@firebase/analytics",qre="@firebase/app-check-compat",Gre="@firebase/app-check",Hre="@firebase/auth",Kre="@firebase/auth-compat",Wre="@firebase/database",Yre="@firebase/data-connect",Xre="@firebase/database-compat",Qre="@firebase/functions",Zre="@firebase/functions-compat",Jre="@firebase/installations",eie="@firebase/installations-compat",tie="@firebase/messaging",nie="@firebase/messaging-compat",rie="@firebase/performance",iie="@firebase/performance-compat",aie="@firebase/remote-config",sie="@firebase/remote-config-compat",oie="@firebase/storage",lie="@firebase/storage-compat",cie="@firebase/firestore",uie="@firebase/ai",die="@firebase/firestore-compat",fie="firebase",hie="12.9.0";const tI="[DEFAULT]",pie={[eI]:"fire-core",[Fre]:"fire-core-compat",[$re]:"fire-analytics",[Ure]:"fire-analytics-compat",[Gre]:"fire-app-check",[qre]:"fire-app-check-compat",[Hre]:"fire-auth",[Kre]:"fire-auth-compat",[Wre]:"fire-rtdb",[Yre]:"fire-data-connect",[Xre]:"fire-rtdb-compat",[Qre]:"fire-fn",[Zre]:"fire-fn-compat",[Jre]:"fire-iid",[eie]:"fire-iid-compat",[tie]:"fire-fcm",[nie]:"fire-fcm-compat",[rie]:"fire-perf",[iie]:"fire-perf-compat",[aie]:"fire-rc",[sie]:"fire-rc-compat",[oie]:"fire-gcs",[lie]:"fire-gcs-compat",[cie]:"fire-fst",[die]:"fire-fst-compat",[uie]:"fire-vertex","fire-js":"fire-js",[fie]:"fire-js-all"};const yw=new Map,gie=new Map,nI=new Map;function dL(t,e){try{t.container.addComponent(e)}catch(n){bl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xl(t){const e=t.name;if(nI.has(e))return bl.debug(`There were multiple attempts to register component ${e}.`),!1;nI.set(e,t);for(const n of yw.values())dL(n,t);for(const n of gie.values())dL(n,t);return!0}function Vp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fa(t){return t==null?!1:t.settings!==void 0}const mie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gc=new Lp("app","Firebase",mie);class vie{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gc.create("app-deleted",{appName:this._name})}}const Bp=hie;function r8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:tI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Gc.create("bad-app-name",{appName:String(i)});if(n||(n=Y9()),!n)throw Gc.create("no-options");const a=yw.get(i);if(a){if(Zc(n,a.options)&&Zc(r,a.config))return a;throw Gc.create("duplicate-app",{appName:i})}const s=new _re(i);for(const c of nI.values())s.addComponent(c);const o=new vie(n,r,s);return yw.set(i,o),o}function qN(t=tI){const e=yw.get(t);if(!e&&t===tI&&Y9())return r8();if(!e)throw Gc.create("no-app",{appName:t});return e}function ws(t,e,n){let r=pie[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bl.warn(s.join(" "));return}xl(new Eo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const yie="firebase-heartbeat-database",bie=1,xv="firebase-heartbeat-store";let gA=null;function i8(){return gA||(gA=jre(yie,bie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xv)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gc.create("idb-open",{originalErrorMessage:t.message})})),gA}async function xie(t){try{const n=(await i8()).transaction(xv),r=await n.objectStore(xv).get(a8(t));return await n.done,r}catch(e){if(e instanceof Do)bl.warn(e.message);else{const n=Gc.create("idb-get",{originalErrorMessage:e?.message});bl.warn(n.message)}}}async function fL(t,e){try{const r=(await i8()).transaction(xv,"readwrite");await r.objectStore(xv).put(e,a8(t)),await r.done}catch(n){if(n instanceof Do)bl.warn(n.message);else{const r=Gc.create("idb-set",{originalErrorMessage:n?.message});bl.warn(r.message)}}}function a8(t){return`${t.name}!${t.options.appId}`}const wie=1024,Sie=30;class _ie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=hL();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Sie){const i=Aie(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=hL(),{heartbeatsToSend:n,unsentEntries:r}=Eie(this._heartbeatsCache.heartbeats),i=H9(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return bl.warn(e),""}}}function hL(){return new Date().toISOString().substring(0,10)}function Eie(t,e=wie){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),pL(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Tie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gS()?ore().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xie(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function pL(t){return H9(JSON.stringify({version:2,heartbeats:t})).length}function Aie(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function kie(t){xl(new Eo("platform-logger",e=>new Vre(e),"PRIVATE")),xl(new Eo("heartbeat",e=>new _ie(e),"PRIVATE")),ws(eI,uL,t),ws(eI,uL,"esm2020"),ws("fire-js","")}kie("");function s8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cie=s8,o8=new Lp("auth","Firebase",s8());const bw=new mS("@firebase/auth");function Iie(t,...e){bw.logLevel<=kt.WARN&&bw.warn(`Auth (${Bp}): ${t}`,...e)}function Lx(t,...e){bw.logLevel<=kt.ERROR&&bw.error(`Auth (${Bp}): ${t}`,...e)}function Cs(t,...e){throw GN(t,...e)}function vo(t,...e){return GN(t,...e)}function l8(t,e,n){const r={...Cie(),[e]:n};return new Lp("auth","Firebase",r).create(e,{appName:t.name})}function fl(t){return l8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return o8.create(t,...e)}function nt(t,e,...n){if(!t)throw GN(e,...n)}function sl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lx(e),new Error(e)}function wl(t,e){t||sl(e)}function rI(){return typeof self<"u"&&self.location?.href||""}function Pie(){return gL()==="http:"||gL()==="https:"}function gL(){return typeof self<"u"&&self.location?.protocol||null}function Nie(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pie()||ire()||"connection"in navigator)?navigator.onLine:!0}function Die(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class g0{constructor(e,n){this.shortDelay=e,this.longDelay=n,wl(n>e,"Short delay should be less than long delay!"),this.isMobile=nre()||are()}get(){return Nie()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function HN(t,e){wl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class c8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Oie={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Rie=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mie=new g0(3e4,6e4);function Os(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ya(t,e,n,r,i={}){return u8(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=p0({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return rre()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&uu(t.emulatorConfig.host)&&(u.credentials="include"),c8.fetch()(await d8(t,t.config.apiHost,n,o),u)})}async function u8(t,e,n){t._canInitEmulator=!1;const r={...Oie,...e};try{const i=new zie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Lb(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lb(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Lb(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Lb(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw l8(t,f,u);Cs(t,f)}}catch(i){if(i instanceof Do)throw i;Cs(t,"network-request-failed",{message:String(i)})}}async function m0(t,e,n,r,i={}){const a=await Ya(t,e,n,r,i);return"mfaPendingCredential"in a&&Cs(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function d8(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?HN(t.config,i):`${t.config.apiScheme}://${i}`;return Rie.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function jie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zie{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vo(this.auth,"network-request-failed")),Mie.get())})}}function Lb(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vo(t,e,r);return i.customData._tokenResponse=n,i}function mL(t){return t!==void 0&&t.enterprise!==void 0}class Lie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Vie(t,e){return Ya(t,"GET","/v2/recaptchaConfig",Os(t,e))}async function Bie(t,e){return Ya(t,"POST","/v1/accounts:delete",e)}async function xw(t,e){return Ya(t,"POST","/v1/accounts:lookup",e)}function Zm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Fie(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),i=KN(r);nt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:Zm(mA(i.auth_time)),issuedAtTime:Zm(mA(i.iat)),expirationTime:Zm(mA(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function mA(t){return Number(t)*1e3}function KN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lx("JWT malformed, contained fewer than 3 sections"),null;try{const i=K9(n);return i?JSON.parse(i):(Lx("Failed to decode base64 JWT payload"),null)}catch(i){return Lx("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vL(t){const e=KN(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Jh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Do&&Uie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Uie({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class $ie{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class iI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zm(this.lastLoginAt),this.creationTime=Zm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ww(t){const e=t.auth,n=await t.getIdToken(),r=await Jh(t,xw(e,{idToken:n}));nt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?f8(i.providerUserInfo):[],s=Gie(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new iI(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function qie(t){const e=Vt(t);await ww(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gie(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function f8(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Hie(t,e){const n=await u8(t,{},async()=>{const r=p0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await d8(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&uu(t.emulatorConfig.host)&&(c.credentials="include"),c8.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Kie(t,e){return Ya(t,"POST","/v2/accounts:revokeToken",Os(t,e))}class Fh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=vL(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Hie(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Fh;return r&&(nt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(nt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(nt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fh,this.toJSON())}_performRefresh(){return sl("not implemented")}}function _c(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class bs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new $ie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new iI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Jh(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Fie(this,e)}reload(){return qie(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ww(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fa(this.auth.app))return Promise.reject(fl(this.auth));const e=await this.getIdToken();return await Jh(this,Bie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:x}=n;nt(h&&x,e,"internal-error");const w=Fh.fromJSON(this.name,x);nt(typeof h=="string",e,"internal-error"),_c(r,e.name),_c(i,e.name),nt(typeof g=="boolean",e,"internal-error"),nt(typeof v=="boolean",e,"internal-error"),_c(a,e.name),_c(s,e.name),_c(o,e.name),_c(c,e.name),_c(u,e.name),_c(f,e.name);const S=new bs({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(T=>({...T}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Fh;i.updateFromServerResponse(n);const a=new bs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ww(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];nt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?f8(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new Fh;o.updateFromIdToken(r);const c=new bs({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new iI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const yL=new Map;function ol(t){wl(t instanceof Function,"Expected a class definition");let e=yL.get(t);return e?(wl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yL.set(t,e),e)}class h8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}h8.type="NONE";const bL=h8;function Vx(t,e,n){return`firebase:${t}:${e}:${n}`}class Uh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Vx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Vx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xw(this.auth,{idToken:e}).catch(()=>{});return n?bs._fromGetAccountInfoResponse(this.auth,n,e):null}return bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Uh(ol(bL),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||ol(bL);const s=Vx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await xw(e,{idToken:f}).catch(()=>{});if(!g)break;h=await bs._fromGetAccountInfoResponse(e,g,f)}else h=bs._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Uh(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new Uh(a,e,r))}}function xL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b8(e))return"Blackberry";if(x8(e))return"Webos";if(g8(e))return"Safari";if((e.includes("chrome/")||m8(e))&&!e.includes("edge/"))return"Chrome";if(y8(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function p8(t=Er()){return/firefox\//i.test(t)}function g8(t=Er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m8(t=Er()){return/crios\//i.test(t)}function v8(t=Er()){return/iemobile/i.test(t)}function y8(t=Er()){return/android/i.test(t)}function b8(t=Er()){return/blackberry/i.test(t)}function x8(t=Er()){return/webos/i.test(t)}function WN(t=Er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wie(t=Er()){return WN(t)&&!!window.navigator?.standalone}function Yie(){return sre()&&document.documentMode===10}function w8(t=Er()){return WN(t)||y8(t)||x8(t)||b8(t)||/windows phone/i.test(t)||v8(t)}function S8(t,e=[]){let n;switch(t){case"Browser":n=xL(Er());break;case"Worker":n=`${xL(Er())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bp}/${r}`}class Xie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Qie(t,e={}){return Ya(t,"GET","/v2/passwordPolicy",Os(t,e))}const Zie=6;class Jie{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Zie,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class eae{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wL(this),this.idTokenSubscription=new wL(this),this.beforeStateQueue=new Xie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ol(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Uh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xw(this,{idToken:e}),r=await bs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(fa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ww(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Die()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fa(this.app))return Promise.reject(fl(this));const n=e?Vt(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fa(this.app)?Promise.reject(fl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fa(this.app)?Promise.reject(fl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ol(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qie(this),n=new Jie(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Kie(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ol(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await Uh.create(this,[ol(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(fa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Iie(`Error while retrieving App Check token: ${e.error}`),e?.token}}function du(t){return Vt(t)}class wL{constructor(e){this.auth=e,this.observer=null,this.addObserver=fre(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tae(t){vS=t}function _8(t){return vS.loadJS(t)}function nae(){return vS.recaptchaEnterpriseScript}function rae(){return vS.gapiScript}function iae(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class aae{constructor(){this.enterprise=new sae}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sae{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const oae="recaptcha-enterprise",E8="NO_RECAPTCHA";class lae{constructor(e){this.type=oae,this.auth=du(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{Vie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Lie(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;mL(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(E8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aae().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&mL(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=nae();c.length!==0&&(c+=o),_8(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function SL(t,e,n,r=!1,i=!1){const a=new lae(t);let s;if(i)s=E8;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Sw(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await SL(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await SL(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function cae(t,e){const n=Vp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Zc(a,e??{}))return i;Cs(i,"already-initialized")}return n.initialize({options:e})}function uae(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ol);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function dae(t,e,n){const r=du(t);nt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=T8(e),{host:s,port:o}=fae(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),nt(Zc(u,r.config.emulator)&&Zc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,uu(s)?(UN(`${a}//${s}${c}`),Q9("Auth",!0)):hae()}function T8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fae(t){const e=T8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:_L(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:_L(s)}}}function _L(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hae(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class YN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sl("not implemented")}_getIdTokenResponse(e){return sl("not implemented")}_linkToIdToken(e,n){return sl("not implemented")}_getReauthenticationResolver(e){return sl("not implemented")}}async function pae(t,e){return Ya(t,"POST","/v1/accounts:resetPassword",Os(t,e))}async function gae(t,e){return Ya(t,"POST","/v1/accounts:signUp",e)}async function mae(t,e){return Ya(t,"POST","/v1/accounts:update",Os(t,e))}async function vae(t,e){return m0(t,"POST","/v1/accounts:signInWithPassword",Os(t,e))}async function A8(t,e){return Ya(t,"POST","/v1/accounts:sendOobCode",Os(t,e))}async function yae(t,e){return A8(t,e)}async function bae(t,e){return A8(t,e)}async function xae(t,e){return m0(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}async function wae(t,e){return m0(t,"POST","/v1/accounts:signInWithEmailLink",Os(t,e))}class wv extends YN{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new wv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new wv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sw(e,n,"signInWithPassword",vae);case"emailLink":return xae(e,{email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sw(e,r,"signUpPassword",gae);case"emailLink":return wae(e,{idToken:n,email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function $h(t,e){return m0(t,"POST","/v1/accounts:signInWithIdp",Os(t,e))}const Sae="http://localhost";class jd extends YN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new jd(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return $h(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$h(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$h(e,n)}buildRequest(){const e={requestUri:Sae,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=p0(n)}return e}}function _ae(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Eae(t){const e=Mm(jm(t)).link,n=e?Mm(jm(e)).deep_link_id:null,r=Mm(jm(t)).deep_link_id;return(r?Mm(jm(r)).link:null)||r||n||e||t}class XN{constructor(e){const n=Mm(jm(e)),r=n.apiKey??null,i=n.oobCode??null,a=_ae(n.mode??null);nt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Eae(e);try{return new XN(n)}catch{return null}}}class of{constructor(){this.providerId=of.PROVIDER_ID}static credential(e,n){return wv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=XN.parseLink(n);return nt(r,"argument-error"),wv._fromEmailAndCode(e,r.code,r.tenantId)}}of.PROVIDER_ID="password";of.EMAIL_PASSWORD_SIGN_IN_METHOD="password";of.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class k8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class v0 extends k8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Nc extends v0{constructor(){super("facebook.com")}static credential(e){return jd._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nc.credential(e.oauthAccessToken)}catch{return null}}}Nc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nc.PROVIDER_ID="facebook.com";class Dc extends v0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jd._fromParams({providerId:Dc.PROVIDER_ID,signInMethod:Dc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dc.credentialFromTaggedObject(e)}static credentialFromError(e){return Dc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Dc.credential(n,r)}catch{return null}}}Dc.GOOGLE_SIGN_IN_METHOD="google.com";Dc.PROVIDER_ID="google.com";class Oc extends v0{constructor(){super("github.com")}static credential(e){return jd._fromParams({providerId:Oc.PROVIDER_ID,signInMethod:Oc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oc.credentialFromTaggedObject(e)}static credentialFromError(e){return Oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oc.credential(e.oauthAccessToken)}catch{return null}}}Oc.GITHUB_SIGN_IN_METHOD="github.com";Oc.PROVIDER_ID="github.com";class Rc extends v0{constructor(){super("twitter.com")}static credential(e,n){return jd._fromParams({providerId:Rc.PROVIDER_ID,signInMethod:Rc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rc.credentialFromTaggedObject(e)}static credentialFromError(e){return Rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Rc.credential(n,r)}catch{return null}}}Rc.TWITTER_SIGN_IN_METHOD="twitter.com";Rc.PROVIDER_ID="twitter.com";async function Tae(t,e){return m0(t,"POST","/v1/accounts:signUp",Os(t,e))}class zd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await bs._fromIdTokenResponse(e,r,i),s=EL(r);return new zd({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=EL(r);return new zd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function EL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class _w extends Do{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_w.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _w(e,n,r,i)}}function C8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_w._fromErrorAndOperation(t,a,e,r):a})}async function Aae(t,e,n=!1){const r=await Jh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zd._forOperation(t,"link",r)}async function I8(t,e,n=!1){const{auth:r}=t;if(fa(r.app))return Promise.reject(fl(r));const i="reauthenticate";try{const a=await Jh(t,C8(r,i,e,t),n);nt(a.idToken,r,"internal-error");const s=KN(a.idToken);nt(s,r,"internal-error");const{sub:o}=s;return nt(t.uid===o,r,"user-mismatch"),zd._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Cs(r,"user-mismatch"),a}}async function P8(t,e,n=!1){if(fa(t.app))return Promise.reject(fl(t));const r="signIn",i=await C8(t,r,e),a=await zd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function kae(t,e){return P8(du(t),e)}async function Cae(t,e){return I8(Vt(t),e)}function Iae(t,e,n){nt(n.url?.length>0,t,"invalid-continue-uri"),nt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),nt(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(nt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(nt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function QN(t){const e=du(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Pae(t,e,n){const r=du(t);await Sw(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bae)}async function Nae(t,e,n){await pae(Vt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QN(t),r})}async function Dae(t,e){await mae(Vt(t),{oobCode:e})}async function Oae(t,e,n){if(fa(t.app))return Promise.reject(fl(t));const r=du(t),s=await Sw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tae).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&QN(t),c}),o=await zd._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Rae(t,e,n){return fa(t.app)?Promise.reject(fl(t)):kae(Vt(t),of.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QN(t),r})}async function TL(t,e){const n=Vt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Iae(n.auth,i,e);const{email:a}=await yae(n.auth,i);a!==t.email&&await t.reload()}async function Mae(t,e){return Ya(t,"POST","/v1/accounts:update",e)}async function jae(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Vt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Jh(r,Mae(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function zae(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function Lae(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function Vae(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function AL(t){return Vt(t).signOut()}async function Bae(t){return Vt(t).delete()}const Ew="__sak";class N8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ew,"1"),this.storage.removeItem(Ew),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fae=1e3,Uae=10;class D8 extends N8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);Yie()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Uae):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Fae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D8.type="LOCAL";const $ae=D8;class O8 extends N8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}O8.type="SESSION";const R8=O8;function qae(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class yS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new yS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await qae(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yS.receivers=[];function ZN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Gae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=ZN("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function yo(){return window}function Hae(t){yo().location.href=t}function M8(){return typeof yo().WorkerGlobalScope<"u"&&typeof yo().importScripts=="function"}async function Kae(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wae(){return navigator?.serviceWorker?.controller||null}function Yae(){return M8()?self:null}const j8="firebaseLocalStorageDb",Xae=1,Tw="firebaseLocalStorage",z8="fbase_key";class y0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bS(t,e){return t.transaction([Tw],e?"readwrite":"readonly").objectStore(Tw)}function Qae(){const t=indexedDB.deleteDatabase(j8);return new y0(t).toPromise()}function aI(){const t=indexedDB.open(j8,Xae);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tw,{keyPath:z8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tw)?e(r):(r.close(),await Qae(),e(await aI()))})})}async function kL(t,e,n){const r=bS(t,!0).put({[z8]:e,value:n});return new y0(r).toPromise()}async function Zae(t,e){const n=bS(t,!1).get(e),r=await new y0(n).toPromise();return r===void 0?null:r.value}function CL(t,e){const n=bS(t,!0).delete(e);return new y0(n).toPromise()}const Jae=800,ese=3;class L8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await aI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ese)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yS._getInstance(Yae()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Kae(),!this.activeServiceWorker)return;this.sender=new Gae(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Wae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await aI();return await kL(e,Ew,"1"),await CL(e,Ew),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kL(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Zae(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CL(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=bS(i,!1).getAll();return new y0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L8.type="LOCAL";const tse=L8;new g0(3e4,6e4);function nse(t,e){return e?ol(e):(nt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class JN extends YN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $h(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $h(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $h(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rse(t){return P8(t.auth,new JN(t),t.bypassAuthState)}function ise(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),I8(n,new JN(t),t.bypassAuthState)}async function ase(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),Aae(n,new JN(t),t.bypassAuthState)}class V8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rse;case"linkViaPopup":case"linkViaRedirect":return ase;case"reauthViaPopup":case"reauthViaRedirect":return ise;default:Cs(this.auth,"internal-error")}}resolve(e){wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sse=new g0(2e3,1e4);class kh extends V8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,kh.currentPopupAction&&kh.currentPopupAction.cancel(),kh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){wl(this.filter.length===1,"Popup operations only handle one event");const e=ZN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sse.get())};e()}}kh.currentPopupAction=null;const ose="pendingRedirect",Bx=new Map;class lse extends V8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bx.get(this.auth._key());if(!e){try{const r=await cse(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bx.set(this.auth._key(),e)}return this.bypassAuthState||Bx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cse(t,e){const n=fse(e),r=dse(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function use(t,e){Bx.set(t._key(),e)}function dse(t){return ol(t._redirectPersistence)}function fse(t){return Vx(ose,t.config.apiKey,t.name)}async function hse(t,e,n=!1){if(fa(t.app))return Promise.reject(fl(t));const r=du(t),i=nse(r,e),s=await new lse(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const pse=600*1e3;class gse{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mse(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!B8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(vo(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pse&&this.cachedEventUids.clear(),this.cachedEventUids.has(IL(e))}saveEventToCache(e){this.cachedEventUids.add(IL(e)),this.lastProcessedEventTime=Date.now()}}function IL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function B8({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function mse(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B8(t);default:return!1}}async function vse(t,e={}){return Ya(t,"GET","/v1/projects",e)}const yse=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bse=/^https?/;async function xse(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vse(t);for(const n of e)try{if(wse(n))return}catch{}Cs(t,"unauthorized-domain")}function wse(t){const e=rI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!bse.test(n))return!1;if(yse.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Sse=new g0(3e4,6e4);function PL(){const t=yo().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _se(t){return new Promise((e,n)=>{function r(){PL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PL(),n(vo(t,"network-request-failed"))},timeout:Sse.get()})}if(yo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yo().gapi?.load)r();else{const i=iae("iframefcb");return yo()[i]=()=>{gapi.load?r():n(vo(t,"network-request-failed"))},_8(`${rae()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Fx=null,e})}let Fx=null;function Ese(t){return Fx=Fx||_se(t),Fx}const Tse=new g0(5e3,15e3),Ase="__/auth/iframe",kse="emulator/auth/iframe",Cse={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ise=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pse(t){const e=t.config;nt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?HN(e,kse):`https://${t.config.authDomain}/${Ase}`,r={apiKey:e.apiKey,appName:t.name,v:Bp},i=Ise.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${p0(r).slice(1)}`}async function Nse(t){const e=await Ese(t),n=yo().gapi;return nt(n,t,"internal-error"),e.open({where:document.body,url:Pse(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cse,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=vo(t,"network-request-failed"),o=yo().setTimeout(()=>{a(s)},Tse.get());function c(){yo().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const Dse={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ose=500,Rse=600,Mse="_blank",jse="http://localhost";class NL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zse(t,e,n,r=Ose,i=Rse){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...Dse,width:r.toString(),height:i.toString(),top:a,left:s},u=Er().toLowerCase();n&&(o=m8(u)?Mse:n),p8(u)&&(e=e||jse,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(Wie(u)&&o!=="_self")return Lse(e||"",o),new NL(null);const h=window.open(e||"",o,f);nt(h,t,"popup-blocked");try{h.focus()}catch{}return new NL(h)}function Lse(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Vse="__/auth/handler",Bse="emulator/auth/handler",Fse=encodeURIComponent("fac");async function DL(t,e,n,r,i,a){nt(t.config.authDomain,t,"auth-domain-config-required"),nt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bp,eventId:i};if(e instanceof k8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",dre(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof v0){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${Fse}=${encodeURIComponent(c)}`:"";return`${Use(t)}?${p0(o).slice(1)}${u}`}function Use({config:t}){return t.emulator?HN(t,Bse):`https://${t.authDomain}/${Vse}`}const vA="webStorageSupport";class $se{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R8,this._completeRedirectFn=hse,this._overrideRedirectResult=use}async _openPopup(e,n,r,i){wl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await DL(e,n,r,rI(),i);return zse(e,a,ZN())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await DL(e,n,r,rI(),i);return Hae(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(wl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Nse(e),r=new gse(e);return n.register("authEvent",i=>(nt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vA,{type:vA},i=>{const a=i?.[0]?.[vA];a!==void 0&&n(!!a),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xse(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return w8()||g8()||WN()}}const qse=$se;var OL="@firebase/auth",RL="1.12.0";class Gse{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Hse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kse(t){xl(new Eo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;nt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S8(t)},u=new eae(r,i,a,c);return uae(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xl(new Eo("auth-internal",e=>{const n=du(e.getProvider("auth").getImmediate());return(r=>new Gse(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(OL,RL,Hse(t)),ws(OL,RL,"esm2020")}const Wse=300,Yse=X9("authIdTokenMaxAge")||Wse;let ML=null;const Xse=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Yse)return;const i=n?.token;ML!==i&&(ML=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function F8(t=qN()){const e=Vp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cae(t,{popupRedirectResolver:qse,persistence:[tse,$ae,R8]}),r=X9("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=Xse(a.toString());Lae(n,s,()=>s(n.currentUser)),zae(n,o=>s(o))}}const i=W9("auth");return i&&dae(n,`http://${i}`),n}function Qse(){return document.getElementsByTagName("head")?.[0]??document}tae({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=vo("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Qse().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kse("Browser");var jL="popstate";function Zse(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=lf(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),sI("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:Sv(a))}function r(i,a){$a(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return eoe(e,n,r,t)}function On(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $a(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jse(){return Math.random().toString(36).substring(2,10)}function zL(t,e){return{usr:t.state,key:t.key,idx:e}}function sI(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?lf(e):e,state:n,key:e&&e.key||r||Jse()}}function Sv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function lf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function eoe(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),S=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:S})}function g(w,S){o="PUSH";let T=sI(x.location,w,S);n&&n(T,w),u=f()+1;let P=zL(T,u),D=x.createHref(T);try{s.pushState(P,"",D)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(D)}a&&c&&c({action:o,location:x.location,delta:1})}function v(w,S){o="REPLACE";let T=sI(x.location,w,S);n&&n(T,w),u=f();let P=zL(T,u),D=x.createHref(T);s.replaceState(P,"",D),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return toe(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(jL,h),c=w,()=>{i.removeEventListener(jL,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:v,go(w){return s.go(w)}};return x}function toe(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),On(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Sv(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function U8(t,e,n="/"){return noe(t,e,n,!1)}function noe(t,e,n,r){let i=typeof e=="string"?lf(e):e,a=Sl(i.pathname||"/",n);if(a==null)return null;let s=$8(t);roe(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=poe(a);o=foe(s[c],u,r)}return o}function $8(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;On(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=hl([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(On(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),$8(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:uoe(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of q8(s.path))a(s,o,!0,c)}),e}function q8(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=q8(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function roe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:doe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ioe=/^:[\w-]+$/,aoe=3,soe=2,ooe=1,loe=10,coe=-2,LL=t=>t==="*";function uoe(t,e){let n=t.split("/"),r=n.length;return n.some(LL)&&(r+=coe),e&&(r+=soe),n.filter(i=>!LL(i)).reduce((i,a)=>i+(ioe.test(a)?aoe:a===""?ooe:loe),r)}function doe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function foe(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=Aw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Aw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:hl([a,h.pathname]),pathnameBase:yoe(hl([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=hl([a,h.pathnameBase]))}return s}function Aw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hoe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=o[g];return h&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function hoe(t,e=!1,n=!0){$a(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function poe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $a(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Sl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var goe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function moe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?lf(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=VL(n.substring(1),"/"):a=VL(n,e)):a=e,{pathname:a,search:boe(r),hash:xoe(i)}}function VL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function yA(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function voe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function G8(t){let e=voe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function H8(t,e,n,r=!1){let i;typeof t=="string"?i=lf(t):(i={...t},On(!i.pathname||!i.pathname.includes("?"),yA("?","pathname","search",i)),On(!i.pathname||!i.pathname.includes("#"),yA("#","pathname","hash",i)),On(!i.search||!i.search.includes("#"),yA("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=moe(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var hl=t=>t.join("/").replace(/\/\/+/g,"/"),yoe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),boe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xoe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,woe=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Soe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function _oe(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var K8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function W8(t,e){let n=t;if(typeof n!="string"||!goe.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(K8)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=Sl(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{$a(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Y8=["POST","PUT","PATCH","DELETE"];new Set(Y8);var Eoe=["GET",...Y8];new Set(Eoe);var Fp=A.createContext(null);Fp.displayName="DataRouter";var xS=A.createContext(null);xS.displayName="DataRouterState";var Toe=A.createContext(!1),X8=A.createContext({isTransitioning:!1});X8.displayName="ViewTransition";var Aoe=A.createContext(new Map);Aoe.displayName="Fetchers";var koe=A.createContext(null);koe.displayName="Await";var Xa=A.createContext(null);Xa.displayName="Navigation";var b0=A.createContext(null);b0.displayName="Location";var Oo=A.createContext({outlet:null,matches:[],isDataRoute:!1});Oo.displayName="Route";var eD=A.createContext(null);eD.displayName="RouteError";var Q8="REACT_ROUTER_ERROR",Coe="REDIRECT",Ioe="ROUTE_ERROR_RESPONSE";function Poe(t){if(t.startsWith(`${Q8}:${Coe}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Noe(t){if(t.startsWith(`${Q8}:${Ioe}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new woe(e.status,e.statusText,e.data)}catch{}}function Doe(t,{relative:e}={}){On(x0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Xa),{hash:i,pathname:a,search:s}=w0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:hl([n,a])),r.createHref({pathname:o,search:s,hash:i})}function x0(){return A.useContext(b0)!=null}function Rs(){return On(x0(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(b0).location}var Z8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function J8(t){A.useContext(Xa).static||A.useLayoutEffect(t)}function Qa(){let{isDataRoute:t}=A.useContext(Oo);return t?Hoe():Ooe()}function Ooe(){On(x0(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Fp),{basename:e,navigator:n}=A.useContext(Xa),{matches:r}=A.useContext(Oo),{pathname:i}=Rs(),a=JSON.stringify(G8(r)),s=A.useRef(!1);return J8(()=>{s.current=!0}),A.useCallback((c,u={})=>{if($a(s.current,Z8),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=H8(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:hl([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}A.createContext(null);function Roe(){let{matches:t}=A.useContext(Oo),e=t[t.length-1];return e?e.params:{}}function w0(t,{relative:e}={}){let{matches:n}=A.useContext(Oo),{pathname:r}=Rs(),i=JSON.stringify(G8(n));return A.useMemo(()=>H8(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Moe(t,e){return eq(t,e)}function eq(t,e,n,r,i){On(x0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Xa),{matches:s}=A.useContext(Oo),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";nq(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Rs(),v;if(e){let T=typeof e=="string"?lf(e):e;On(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=g;let b=v.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=U8(t,{pathname:x});$a(h||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),$a(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Boe(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:hl([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:hl([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&S?A.createElement(b0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function joe(){let t=Goe(),e=Soe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var zoe=A.createElement(joe,null),tq=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Noe(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(Oo.Provider,{value:this.props.routeContext},A.createElement(eD.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(Loe,{error:t},e):e}};tq.contextType=Toe;var bA=new WeakMap;function Loe({children:t,error:e}){let{basename:n}=A.useContext(Xa);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Poe(e.digest);if(r){let i=bA.get(e);if(i)throw i;let a=W8(r.location,n);if(K8&&!bA.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw bA.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function Voe({routeContext:t,match:e,children:n}){let r=A.useContext(Fp);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Oo.Provider,{value:t},n)}function Boe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);On(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:_oe(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let v,b=!1,x=null,w=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||zoe,o&&(c<0&&g===0?(nq("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),T=()=>{let P;return v?P=x:b?P=w:h.route.Component?P=A.createElement(h.route.Component,null):h.route.element?P=h.route.element:P=f,A.createElement(Voe,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:P})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(tq,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):T()},null)}function tD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Foe(t){let e=A.useContext(Fp);return On(e,tD(t)),e}function Uoe(t){let e=A.useContext(xS);return On(e,tD(t)),e}function $oe(t){let e=A.useContext(Oo);return On(e,tD(t)),e}function nD(t){let e=$oe(t),n=e.matches[e.matches.length-1];return On(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function qoe(){return nD("useRouteId")}function Goe(){let t=A.useContext(eD),e=Uoe("useRouteError"),n=nD("useRouteError");return t!==void 0?t:e.errors?.[n]}function Hoe(){let{router:t}=Foe("useNavigate"),e=nD("useNavigate"),n=A.useRef(!1);return J8(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{$a(n.current,Z8),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var BL={};function nq(t,e,n){!e&&!BL[t]&&(BL[t]=!0,$a(!1,n))}A.memo(Koe);function Koe({routes:t,future:e,state:n,onError:r}){return eq(t,void 0,n,r,e)}function ao(t){On(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Woe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){On(!x0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=lf(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,b=A.useMemo(()=>{let x=Sl(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:v},navigationType:r}},[o,u,f,h,g,v,r]);return $a(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Xa.Provider,{value:c},A.createElement(b0.Provider,{children:e,value:b}))}function Yoe({children:t,location:e}){return Moe(oI(t),e)}function oI(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,oI(r.props.children,a));return}On(r.type===ao,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),On(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=oI(r.props.children,a)),n.push(s)}),n}var Ux="get",$x="application/x-www-form-urlencoded";function wS(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Xoe(t){return wS(t)&&t.tagName.toLowerCase()==="button"}function Qoe(t){return wS(t)&&t.tagName.toLowerCase()==="form"}function Zoe(t){return wS(t)&&t.tagName.toLowerCase()==="input"}function Joe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ele(t,e){return t.button===0&&(!e||e==="_self")&&!Joe(t)}function lI(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function tle(t,e){let n=lI(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Vb=null;function nle(){if(Vb===null)try{new FormData(document.createElement("form"),0),Vb=!1}catch{Vb=!0}return Vb}var rle=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xA(t){return t!=null&&!rle.has(t)?($a(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$x}"`),null):t}function ile(t,e){let n,r,i,a,s;if(Qoe(t)){let o=t.getAttribute("action");r=o?Sl(o,e):null,n=t.getAttribute("method")||Ux,i=xA(t.getAttribute("enctype"))||$x,a=new FormData(t)}else if(Xoe(t)||Zoe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?Sl(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Ux,i=xA(t.getAttribute("formenctype"))||xA(o.getAttribute("enctype"))||$x,a=new FormData(o,t),!nle()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(wS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ux,r=null,i=$x,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ale(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Sl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function sle(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ole(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function lle(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await sle(a,n);return s.links?s.links():[]}return[]}));return fle(r.flat(1).filter(ole).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function FL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function cle(t,e,{includeHydrateFallback:n}={}){return ule(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function ule(t){return[...new Set(t)]}function dle(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function fle(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(dle(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function rq(){let t=A.useContext(Fp);return rD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function hle(){let t=A.useContext(xS);return rD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var iD=A.createContext(void 0);iD.displayName="FrameworkContext";function iq(){let t=A.useContext(iD);return rD(t,"You must render this element inside a <HydratedRouter> element"),t}function ple(t,e){let n=A.useContext(iD),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=S=>{S.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:gm(o,v),onBlur:gm(c,b),onMouseEnter:gm(u,v),onMouseLeave:gm(f,b),onTouchStart:gm(h,v)}]:[!1,g,{}]}function gm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function gle({page:t,...e}){let{router:n}=rq(),r=A.useMemo(()=>U8(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(vle,{page:t,matches:r,...e}):null}function mle(t){let{manifest:e,routeModules:n}=iq(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return lle(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function vle({page:t,matches:e,...n}){let r=Rs(),{future:i,manifest:a,routeModules:s}=iq(),{basename:o}=rq(),{loaderData:c,matches:u}=hle(),f=A.useMemo(()=>FL(t,e,u,a,r,"data"),[t,e,u,a,r]),h=A.useMemo(()=>FL(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let P=a.routes[T.route.id];!P||!P.hasLoader||(!f.some(D=>D.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||P.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let S=ale(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),v=A.useMemo(()=>cle(h,a),[h,a]),b=mle(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function yle(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ble=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ble&&(window.__reactRouterVersion="7.13.0")}catch{}function xle({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=Zse({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(u=>{n===!1?o(u):A.startTransition(()=>o(u))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(Woe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var aq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sq=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b){let{basename:x,unstable_useTransitions:w}=A.useContext(Xa),S=typeof u=="string"&&aq.test(u),T=W8(u,x);u=T.to;let P=Doe(u,{relative:i}),[D,O,N]=ple(r,v),C=Ele(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function I(j){e&&e(j),j.defaultPrevented||C(j)}let R=A.createElement("a",{...v,...N,href:T.absoluteURL||P,onClick:T.isExternal||a?e:I,ref:yle(b,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return D&&!S?A.createElement(A.Fragment,null,R,A.createElement(gle,{page:P})):R});sq.displayName="Link";var wle=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=w0(s,{relative:u.relative}),g=Rs(),v=A.useContext(xS),{navigator:b,basename:x}=A.useContext(Xa),w=v!=null&&Ile(h)&&o===!0,S=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,P=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(T=T.toLowerCase(),P=P?P.toLowerCase():null,S=S.toLowerCase()),P&&x&&(P=Sl(P,x)||P);const D=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=T===S||!i&&T.startsWith(S)&&T.charAt(D)==="/",N=P!=null&&(P===S||!i&&P.startsWith(S)&&P.charAt(S.length)==="/"),C={isActive:O,isPending:N,isTransitioning:w},I=O?e:void 0,R;typeof r=="function"?R=r(C):R=[r,O?"active":null,N?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(C):a;return A.createElement(sq,{...u,"aria-current":I,className:R,ref:f,style:j,to:s,viewTransition:o},typeof c=="function"?c(C):c)});wle.displayName="NavLink";var Sle=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Ux,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b)=>{let{unstable_useTransitions:x}=A.useContext(Xa),w=kle(),S=Cle(o,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",P=typeof o=="string"&&aq.test(o),D=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let N=O.nativeEvent.submitter,C=N?.getAttribute("formmethod")||s,I=()=>w(N||O.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>I()):I()};return A.createElement("form",{ref:b,method:T,action:S,onSubmit:r?c:D,...v,"data-discover":!P&&t==="render"?"true":void 0})});Sle.displayName="Form";function _le(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oq(t){let e=A.useContext(Fp);return On(e,_le(t)),e}function Ele(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=Qa(),f=Rs(),h=w0(t,{relative:a});return A.useCallback(g=>{if(ele(g,e)){g.preventDefault();let v=n!==void 0?n:Sv(f)===Sv(h),b=()=>u(t,{replace:v,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function lq(t){$a(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(lI(t)),n=A.useRef(!1),r=Rs(),i=A.useMemo(()=>tle(r.search,n.current?null:e.current),[r.search]),a=Qa(),s=A.useCallback((o,c)=>{const u=lI(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var Tle=0,Ale=()=>`__${String(++Tle)}__`;function kle(){let{router:t}=oq("useSubmit"),{basename:e}=A.useContext(Xa),n=qoe(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=ile(a,e);if(s.navigate===!1){let g=s.fetcherKey||Ale();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Cle(t,{relative:e}={}){let{basename:n}=A.useContext(Xa),r=A.useContext(Oo);On(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...w0(t||".",{relative:e})},s=Rs();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:hl([n,a.pathname])),Sv(a)}function Ile(t,{relative:e}={}){let n=A.useContext(X8);On(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=oq("useViewTransitionState"),i=w0(t,{relative:e});if(!n.isTransitioning)return!1;let a=Sl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Sl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Aw(i.pathname,s)!=null||Aw(i.pathname,a)!=null}var cq=q9();const Ple=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nle=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),UL=t=>{const e=Nle(t);return e.charAt(0).toUpperCase()+e.slice(1)},uq=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Dle=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Ole={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rle=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...Ole,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:uq("lucide",i),...!a&&!Dle(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>A.createElement(u,f)),...Array.isArray(a)?a:[a]]));const Qe=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(Rle,{ref:a,iconNode:e,className:uq(`lucide-${Ple(UL(t))}`,`lucide-${t}`,r),...i}));return n.displayName=UL(t),n};const Mle=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_l=Qe("arrow-left",Mle);const jle=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],zle=Qe("arrow-right-left",jle);const Lle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Vle=Qe("arrow-right",Lle);const Ble=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Fle=Qe("bug",Ble);const Ule=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$le=Qe("calendar",Ule);const qle=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],kw=Qe("chart-column",qle);const Gle=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],dq=Qe("chart-pie",Gle);const Hle=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],aD=Qe("check",Hle);const Kle=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wle=Qe("chevron-down",Kle);const Yle=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xle=Qe("chevron-left",Yle);const Qle=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fs=Qe("chevron-right",Qle);const Zle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Jle=Qe("circle-alert",Zle);const ece=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],tce=Qe("circle-arrow-down",ece);const nce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],rce=Qe("circle-arrow-up",nce);const ice=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cw=Qe("circle-check-big",ice);const ace=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],oo=Qe("circle-check",ace);const sce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$L=Qe("circle",sce);const oce=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lce=Qe("clock",oce);const cce=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],zm=Qe("dollar-sign",cce);const uce=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cI=Qe("download",uce);const dce=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],fce=Qe("ellipsis",dce);const hce=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fq=Qe("eye-off",hce);const pce=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hq=Qe("eye",pce);const gce=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],mce=Qe("file-text",gce);const vce=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],sD=Qe("folder-open",vce);const yce=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],bce=Qe("folder",yce);const xce=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],pq=Qe("funnel",xce);const wce=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],ep=Qe("grip-vertical",wce);const Sce=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],_ce=Qe("house",Sce);const Ece=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],qL=Qe("info",Ece);const Tce=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ace=Qe("list",Tce);const kce=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],GL=Qe("loader",kce);const Cce=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],HL=Qe("lock",Cce);const Ice=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Pce=Qe("log-out",Ice);const Nce=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uI=Qe("mail",Nce);const Dce=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],KL=Qe("mic",Dce);const Oce=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Rce=Qe("pause",Oce);const Mce=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],jce=Qe("pen",Mce);const zce=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],cf=Qe("piggy-bank",zce);const Lce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],uf=Qe("plus",Lce);const Vce=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tp=Qe("refresh-cw",Vce);const Bce=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fce=Qe("rotate-ccw",Bce);const Uce=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],gq=Qe("search",Uce);const $ce=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qce=Qe("settings",$ce);const Gce=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],mq=Qe("skip-forward",Gce);const Hce=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],qh=Qe("sparkles",Hce);const Kce=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],Wce=Qe("tags",Kce);const Yce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xce=Qe("target",Yce);const Qce=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_v=Qe("trash-2",Qce);const Zce=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vq=Qe("trash",Zce);const Jce=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],vd=Qe("trending-up",Jce);const eue=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ad=Qe("triangle-alert",eue);const tue=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],nue=Qe("undo-2",tue);const rue=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],iue=Qe("upload",rue);const aue=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],sue=Qe("user-plus",aue);const oue=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lue=Qe("user",oue);const cue=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],np=Qe("wallet",cue);const uue=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],S0=Qe("x",uue),WL=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(v=>v(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},due=(t=>t?WL(t):WL),fue=t=>t;function hue(t,e=fue){const n=al.useSyncExternalStore(t.subscribe,al.useCallback(()=>e(t.getState()),[t,e]),al.useCallback(()=>e(t.getInitialState()),[t,e]));return al.useDebugValue(n),n}const YL=t=>{const e=due(t),n=r=>hue(e,r);return Object.assign(n,e),n},oD=(t=>t?YL(t):YL),XL={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},QL=t=>!!t.dispatchFromDevtools&&typeof t.dispatch=="function",Ev=new Map,Bb=t=>{const e=Ev.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},pue=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Ev.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Ev.set(n.name,i),{type:"tracked",store:t,...i}},gue=(t,e)=>{if(e===void 0)return;const n=Ev.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Ev.delete(t))},mue=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},vue=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(XL?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=pue(o,u,c);let g=!0;i.setState=((x,w,S)=>{const T=n(x,w);if(!g)return T;const P=S===void 0?{type:s||mue(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(f?.send(P,r()),T):(f?.send({...P,type:`${o}/${P.type}`},{...Bb(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),gue(c.name,o)}};const v=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),QL(i)){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(XL?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return wA(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){v(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=S.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&v(T);return}QL(i)&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return v(b),o===void 0?f?.init(i.getState()):f?.init(Bb(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Bb(c.name));case"ROLLBACK":return wA(x.state,S=>{if(o===void 0){v(S),f?.init(i.getState());return}v(S[o]),f?.init(Bb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return wA(x.state,S=>{if(o===void 0){v(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&v(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,T=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;v(o===void 0?T:T[o]),f?.send(null,S);return}case"PAUSE_RECORDING":return g=!g}return}}),b},yue=vue,wA=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function bue(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const dI=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return dI(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return dI(r)(n)}}}},xue=(t,e)=>(n,r,i)=>{let a={storage:bue(()=>window.localStorage),partialize:w=>w,version:0,merge:(w,S)=>({...S,...w}),...e},s=!1,o=0;const c=new Set,u=new Set;let f=a.storage;if(!f)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return f.setItem(a.name,{state:w,version:a.version})},g=i.setState;i.setState=(w,S)=>(g(w,S),h());const v=t((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>v;let b;const x=()=>{var w,S;if(!f)return;const T=++o;s=!1,c.forEach(D=>{var O;return D((O=r())!=null?O:v)});const P=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(w=r())!=null?w:v))||void 0;return dI(f.getItem.bind(f))(a.name).then(D=>{if(D)if(typeof D.version=="number"&&D.version!==a.version){if(a.migrate){const O=a.migrate(D.state,D.version);return O instanceof Promise?O.then(N=>[!0,N]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,D.state];return[!1,void 0]}).then(D=>{var O;if(T!==o)return;const[N,C]=D;if(b=a.merge(C,(O=r())!=null?O:v),n(b,!0),N)return h()}).then(()=>{T===o&&(P?.(b,void 0),b=r(),s=!0,u.forEach(D=>D(b)))}).catch(D=>{T===o&&P?.(void 0,D)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>s,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||x(),b||v},yq=xue;var wue="firebase",Sue="12.9.0";ws(wue,Sue,"app");var ZL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hc,bq;(function(){var t;function e(C,I){function R(){}R.prototype=I.prototype,C.F=I.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(j,B,L){for(var z=Array(arguments.length-2),W=2;W<arguments.length;W++)z[W-2]=arguments[W];return I.prototype[B].apply(j,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,R){R||(R=0);const j=Array(16);if(typeof I=="string")for(var B=0;B<16;++B)j[B]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(B=0;B<16;++B)j[B]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=C.g[0],R=C.g[1],B=C.g[2];let L=C.g[3],z;z=I+(L^R&(B^L))+j[0]+3614090360&4294967295,I=R+(z<<7&4294967295|z>>>25),z=L+(B^I&(R^B))+j[1]+3905402710&4294967295,L=I+(z<<12&4294967295|z>>>20),z=B+(R^L&(I^R))+j[2]+606105819&4294967295,B=L+(z<<17&4294967295|z>>>15),z=R+(I^B&(L^I))+j[3]+3250441966&4294967295,R=B+(z<<22&4294967295|z>>>10),z=I+(L^R&(B^L))+j[4]+4118548399&4294967295,I=R+(z<<7&4294967295|z>>>25),z=L+(B^I&(R^B))+j[5]+1200080426&4294967295,L=I+(z<<12&4294967295|z>>>20),z=B+(R^L&(I^R))+j[6]+2821735955&4294967295,B=L+(z<<17&4294967295|z>>>15),z=R+(I^B&(L^I))+j[7]+4249261313&4294967295,R=B+(z<<22&4294967295|z>>>10),z=I+(L^R&(B^L))+j[8]+1770035416&4294967295,I=R+(z<<7&4294967295|z>>>25),z=L+(B^I&(R^B))+j[9]+2336552879&4294967295,L=I+(z<<12&4294967295|z>>>20),z=B+(R^L&(I^R))+j[10]+4294925233&4294967295,B=L+(z<<17&4294967295|z>>>15),z=R+(I^B&(L^I))+j[11]+2304563134&4294967295,R=B+(z<<22&4294967295|z>>>10),z=I+(L^R&(B^L))+j[12]+1804603682&4294967295,I=R+(z<<7&4294967295|z>>>25),z=L+(B^I&(R^B))+j[13]+4254626195&4294967295,L=I+(z<<12&4294967295|z>>>20),z=B+(R^L&(I^R))+j[14]+2792965006&4294967295,B=L+(z<<17&4294967295|z>>>15),z=R+(I^B&(L^I))+j[15]+1236535329&4294967295,R=B+(z<<22&4294967295|z>>>10),z=I+(B^L&(R^B))+j[1]+4129170786&4294967295,I=R+(z<<5&4294967295|z>>>27),z=L+(R^B&(I^R))+j[6]+3225465664&4294967295,L=I+(z<<9&4294967295|z>>>23),z=B+(I^R&(L^I))+j[11]+643717713&4294967295,B=L+(z<<14&4294967295|z>>>18),z=R+(L^I&(B^L))+j[0]+3921069994&4294967295,R=B+(z<<20&4294967295|z>>>12),z=I+(B^L&(R^B))+j[5]+3593408605&4294967295,I=R+(z<<5&4294967295|z>>>27),z=L+(R^B&(I^R))+j[10]+38016083&4294967295,L=I+(z<<9&4294967295|z>>>23),z=B+(I^R&(L^I))+j[15]+3634488961&4294967295,B=L+(z<<14&4294967295|z>>>18),z=R+(L^I&(B^L))+j[4]+3889429448&4294967295,R=B+(z<<20&4294967295|z>>>12),z=I+(B^L&(R^B))+j[9]+568446438&4294967295,I=R+(z<<5&4294967295|z>>>27),z=L+(R^B&(I^R))+j[14]+3275163606&4294967295,L=I+(z<<9&4294967295|z>>>23),z=B+(I^R&(L^I))+j[3]+4107603335&4294967295,B=L+(z<<14&4294967295|z>>>18),z=R+(L^I&(B^L))+j[8]+1163531501&4294967295,R=B+(z<<20&4294967295|z>>>12),z=I+(B^L&(R^B))+j[13]+2850285829&4294967295,I=R+(z<<5&4294967295|z>>>27),z=L+(R^B&(I^R))+j[2]+4243563512&4294967295,L=I+(z<<9&4294967295|z>>>23),z=B+(I^R&(L^I))+j[7]+1735328473&4294967295,B=L+(z<<14&4294967295|z>>>18),z=R+(L^I&(B^L))+j[12]+2368359562&4294967295,R=B+(z<<20&4294967295|z>>>12),z=I+(R^B^L)+j[5]+4294588738&4294967295,I=R+(z<<4&4294967295|z>>>28),z=L+(I^R^B)+j[8]+2272392833&4294967295,L=I+(z<<11&4294967295|z>>>21),z=B+(L^I^R)+j[11]+1839030562&4294967295,B=L+(z<<16&4294967295|z>>>16),z=R+(B^L^I)+j[14]+4259657740&4294967295,R=B+(z<<23&4294967295|z>>>9),z=I+(R^B^L)+j[1]+2763975236&4294967295,I=R+(z<<4&4294967295|z>>>28),z=L+(I^R^B)+j[4]+1272893353&4294967295,L=I+(z<<11&4294967295|z>>>21),z=B+(L^I^R)+j[7]+4139469664&4294967295,B=L+(z<<16&4294967295|z>>>16),z=R+(B^L^I)+j[10]+3200236656&4294967295,R=B+(z<<23&4294967295|z>>>9),z=I+(R^B^L)+j[13]+681279174&4294967295,I=R+(z<<4&4294967295|z>>>28),z=L+(I^R^B)+j[0]+3936430074&4294967295,L=I+(z<<11&4294967295|z>>>21),z=B+(L^I^R)+j[3]+3572445317&4294967295,B=L+(z<<16&4294967295|z>>>16),z=R+(B^L^I)+j[6]+76029189&4294967295,R=B+(z<<23&4294967295|z>>>9),z=I+(R^B^L)+j[9]+3654602809&4294967295,I=R+(z<<4&4294967295|z>>>28),z=L+(I^R^B)+j[12]+3873151461&4294967295,L=I+(z<<11&4294967295|z>>>21),z=B+(L^I^R)+j[15]+530742520&4294967295,B=L+(z<<16&4294967295|z>>>16),z=R+(B^L^I)+j[2]+3299628645&4294967295,R=B+(z<<23&4294967295|z>>>9),z=I+(B^(R|~L))+j[0]+4096336452&4294967295,I=R+(z<<6&4294967295|z>>>26),z=L+(R^(I|~B))+j[7]+1126891415&4294967295,L=I+(z<<10&4294967295|z>>>22),z=B+(I^(L|~R))+j[14]+2878612391&4294967295,B=L+(z<<15&4294967295|z>>>17),z=R+(L^(B|~I))+j[5]+4237533241&4294967295,R=B+(z<<21&4294967295|z>>>11),z=I+(B^(R|~L))+j[12]+1700485571&4294967295,I=R+(z<<6&4294967295|z>>>26),z=L+(R^(I|~B))+j[3]+2399980690&4294967295,L=I+(z<<10&4294967295|z>>>22),z=B+(I^(L|~R))+j[10]+4293915773&4294967295,B=L+(z<<15&4294967295|z>>>17),z=R+(L^(B|~I))+j[1]+2240044497&4294967295,R=B+(z<<21&4294967295|z>>>11),z=I+(B^(R|~L))+j[8]+1873313359&4294967295,I=R+(z<<6&4294967295|z>>>26),z=L+(R^(I|~B))+j[15]+4264355552&4294967295,L=I+(z<<10&4294967295|z>>>22),z=B+(I^(L|~R))+j[6]+2734768916&4294967295,B=L+(z<<15&4294967295|z>>>17),z=R+(L^(B|~I))+j[13]+1309151649&4294967295,R=B+(z<<21&4294967295|z>>>11),z=I+(B^(R|~L))+j[4]+4149444226&4294967295,I=R+(z<<6&4294967295|z>>>26),z=L+(R^(I|~B))+j[11]+3174756917&4294967295,L=I+(z<<10&4294967295|z>>>22),z=B+(I^(L|~R))+j[2]+718787259&4294967295,B=L+(z<<15&4294967295|z>>>17),z=R+(L^(B|~I))+j[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(B+(z<<21&4294967295|z>>>11))&4294967295,C.g[2]=C.g[2]+B&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.v=function(C,I){I===void 0&&(I=C.length);const R=I-this.blockSize,j=this.C;let B=this.h,L=0;for(;L<I;){if(B==0)for(;L<=R;)i(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<I;)if(j[B++]=C.charCodeAt(L++),B==this.blockSize){i(this,j),B=0;break}}else for(;L<I;)if(j[B++]=C[L++],B==this.blockSize){i(this,j),B=0;break}}this.h=B,this.o+=I},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,R=0;R<4;++R)for(let j=0;j<32;j+=8)C[I++]=this.g[R]>>>j&255;return C};function a(C,I){var R=o;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=I(C)}function s(C,I){this.h=I;const R=[];let j=!0;for(let B=C.length-1;B>=0;B--){const L=C[B]|0;j&&L==I||(R[B]=L,j=!1)}this.g=R}var o={};function c(C){return-128<=C&&C<128?a(C,function(I){return new s([I|0],I<0?-1:0)}):new s([C|0],C<0?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(C<0)return w(u(-C));const I=[];let R=1;for(let j=0;C>=R;j++)I[j]=C/R|0,R*=4294967296;return new s(I,0)}function f(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return w(f(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(I,8));let j=h;for(let L=0;L<C.length;L+=8){var B=Math.min(8,C.length-L);const z=parseInt(C.substring(L,L+B),I);B<8?(B=u(Math.pow(I,B)),j=j.j(B).add(u(z))):(j=j.j(R),j=j.add(u(z)))}return j}var h=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let C=0,I=1;for(let R=0;R<this.g.length;R++){const j=this.i(R);C+=(j>=0?j:4294967296+j)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(x(this))return"-"+w(this).toString(C);const I=u(Math.pow(C,6));var R=this;let j="";for(;;){const B=D(R,I).g;R=S(R,B.j(I));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=B,b(R))return L+j;for(;L.length<6;)L="0"+L;j=L+j}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=S(this,C),x(C)?-1:b(C)?0:1};function w(C){const I=C.g.length,R=[];for(let j=0;j<I;j++)R[j]=~C.g[j];return new s(R,~C.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(C){const I=Math.max(this.g.length,C.g.length),R=[];let j=0;for(let B=0;B<=I;B++){let L=j+(this.i(B)&65535)+(C.i(B)&65535),z=(L>>>16)+(this.i(B)>>>16)+(C.i(B)>>>16);j=z>>>16,L&=65535,z&=65535,R[B]=z<<16|L}return new s(R,R[R.length-1]&-2147483648?-1:0)};function S(C,I){return C.add(w(I))}t.j=function(C){if(b(this)||b(C))return h;if(x(this))return x(C)?w(this).j(w(C)):w(w(this).j(C));if(x(C))return w(this.j(w(C)));if(this.l(v)<0&&C.l(v)<0)return u(this.m()*C.m());const I=this.g.length+C.g.length,R=[];for(var j=0;j<2*I;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(let B=0;B<C.g.length;B++){const L=this.i(j)>>>16,z=this.i(j)&65535,W=C.i(B)>>>16,Q=C.i(B)&65535;R[2*j+2*B]+=z*Q,T(R,2*j+2*B),R[2*j+2*B+1]+=L*Q,T(R,2*j+2*B+1),R[2*j+2*B+1]+=z*W,T(R,2*j+2*B+1),R[2*j+2*B+2]+=L*W,T(R,2*j+2*B+2)}for(C=0;C<I;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=I;C<2*I;C++)R[C]=0;return new s(R,0)};function T(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function P(C,I){this.g=C,this.h=I}function D(C,I){if(b(I))throw Error("division by zero");if(b(C))return new P(h,h);if(x(C))return I=D(w(C),I),new P(w(I.g),w(I.h));if(x(I))return I=D(C,w(I)),new P(w(I.g),I.h);if(C.g.length>30){if(x(C)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var R=g,j=I;j.l(C)<=0;)R=O(R),j=O(j);var B=N(R,1),L=N(j,1);for(j=N(j,2),R=N(R,2);!b(j);){var z=L.add(j);z.l(C)<=0&&(B=B.add(R),L=z),j=N(j,1),R=N(R,1)}return I=S(C,B.j(I)),new P(B,I)}for(B=h;C.l(I)>=0;){for(R=Math.max(1,Math.floor(C.m()/I.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),L=u(R),z=L.j(I);x(z)||z.l(C)>0;)R-=j,L=u(R),z=L.j(I);b(L)&&(L=g),B=B.add(L),C=S(C,z)}return new P(B,C)}t.B=function(C){return D(this,C).h},t.and=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<I;j++)R[j]=this.i(j)&C.i(j);return new s(R,this.h&C.h)},t.or=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<I;j++)R[j]=this.i(j)|C.i(j);return new s(R,this.h|C.h)},t.xor=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<I;j++)R[j]=this.i(j)^C.i(j);return new s(R,this.h^C.h)};function O(C){const I=C.g.length+1,R=[];for(let j=0;j<I;j++)R[j]=C.i(j)<<1|C.i(j-1)>>>31;return new s(R,C.h)}function N(C,I){const R=I>>5;I%=32;const j=C.g.length-R,B=[];for(let L=0;L<j;L++)B[L]=I>0?C.i(L+R)>>>I|C.i(L+R+1)<<32-I:C.i(L+R);return new s(B,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bq=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Hc=s}).apply(typeof ZL<"u"?ZL:typeof self<"u"?self:typeof window<"u"?window:{});var Fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xq,Lm,wq,qx,fI,Sq,_q,Eq;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fb=="object"&&Fb];for(var M=0;M<_.length;++M){var F=_[M];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(_,M){if(M)e:{var F=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var he=_[H];if(!(he in F))break e;F=F[he]}_=_[_.length-1],H=F[_],M=M(H),M!=H&&M!=null&&e(F,_,{configurable:!0,writable:!0,value:M})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(M){var F=[],H;for(H in M)Object.prototype.hasOwnProperty.call(M,H)&&F.push([H,M[H]]);return F}});var a=a||{},s=this||self;function o(_){var M=typeof _;return M=="object"&&_!=null||M=="function"}function c(_,M,F){return _.call.apply(_.bind,arguments)}function u(_,M,F){return u=c,u.apply(null,arguments)}function f(_,M){var F=Array.prototype.slice.call(arguments,1);return function(){var H=F.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function h(_,M){function F(){}F.prototype=M.prototype,_.Z=M.prototype,_.prototype=new F,_.prototype.constructor=_,_.Ob=function(H,he,xe){for(var je=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)je[dt-2]=arguments[dt];return M.prototype[he].apply(H,je)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function v(_){const M=_.length;if(M>0){const F=Array(M);for(let H=0;H<M;H++)F[H]=_[H];return F}return[]}function b(_,M){for(let H=1;H<arguments.length;H++){const he=arguments[H];var F=typeof he;if(F=F!="object"?F:he?Array.isArray(he)?"array":F:"null",F=="array"||F=="object"&&typeof he.length=="number"){F=_.length||0;const xe=he.length||0;_.length=F+xe;for(let je=0;je<xe;je++)_[F+je]=he[je]}else _.push(he)}}class x{constructor(M,F){this.i=M,this.j=F,this.h=0,this.g=null}get(){let M;return this.h>0?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function w(_){s.setTimeout(()=>{throw _},0)}function S(){var _=C;let M=null;return _.g&&(M=_.g,_.g=_.g.next,_.g||(_.h=null),M.next=null),M}class T{constructor(){this.h=this.g=null}add(M,F){const H=P.get();H.set(M,F),this.h?this.h.next=H:this.g=H,this.h=H}}var P=new x(()=>new D,_=>_.reset());class D{constructor(){this.next=this.g=this.h=null}set(M,F){this.h=M,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let O,N=!1,C=new T,I=()=>{const _=Promise.resolve(void 0);O=()=>{_.then(R)}};function R(){for(var _;_=S();){try{_.h.call(_.g)}catch(F){w(F)}var M=P;M.j(_),M.h<100&&(M.h++,_.next=M.g,M.g=_)}N=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(_,M){this.type=_,this.g=this.target=M,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,M=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const F=()=>{};s.addEventListener("test",F,M),s.removeEventListener("test",F,M)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function W(_,M){B.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,M)}h(W,B),W.prototype.init=function(_,M){const F=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=M,M=_.relatedTarget,M||(F=="mouseover"?M=_.fromElement:F=="mouseout"&&(M=_.toElement)),this.relatedTarget=M,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),G=0;function Y(_,M,F,H,he){this.listener=_,this.proxy=null,this.src=M,this.type=F,this.capture=!!H,this.ha=he,this.key=++G,this.da=this.fa=!1}function J(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ie(_,M,F){for(const H in _)M.call(F,_[H],H,_)}function X(_,M){for(const F in _)M.call(void 0,_[F],F,_)}function U(_){const M={};for(const F in _)M[F]=_[F];return M}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(_,M){let F,H;for(let he=1;he<arguments.length;he++){H=arguments[he];for(F in H)_[F]=H[F];for(let xe=0;xe<Z.length;xe++)F=Z[xe],Object.prototype.hasOwnProperty.call(H,F)&&(_[F]=H[F])}}function K(_){this.src=_,this.g={},this.h=0}K.prototype.add=function(_,M,F,H,he){const xe=_.toString();_=this.g[xe],_||(_=this.g[xe]=[],this.h++);const je=ne(_,M,H,he);return je>-1?(M=_[je],F||(M.fa=!1)):(M=new Y(M,this.src,xe,!!H,he),M.fa=F,_.push(M)),M};function ue(_,M){const F=M.type;if(F in _.g){var H=_.g[F],he=Array.prototype.indexOf.call(H,M,void 0),xe;(xe=he>=0)&&Array.prototype.splice.call(H,he,1),xe&&(J(M),_.g[F].length==0&&(delete _.g[F],_.h--))}}function ne(_,M,F,H){for(let he=0;he<_.length;++he){const xe=_[he];if(!xe.da&&xe.listener==M&&xe.capture==!!F&&xe.ha==H)return he}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),Se={};function se(_,M,F,H,he){if(Array.isArray(M)){for(let xe=0;xe<M.length;xe++)se(_,M[xe],F,H,he);return null}return F=Ye(F),_&&_[Q]?_.J(M,F,o(H)?!!H.capture:!1,he):Ae(_,M,F,!1,H,he)}function Ae(_,M,F,H,he,xe){if(!M)throw Error("Invalid event type");const je=o(he)?!!he.capture:!!he;let dt=De(_);if(dt||(_[oe]=dt=new K(_)),F=dt.add(M,F,H,je,xe),F.proxy)return F;if(H=ve(),F.proxy=H,H.src=_,H.listener=F,_.addEventListener)L||(he=je),he===void 0&&(he=!1),_.addEventListener(M.toString(),H,he);else if(_.attachEvent)_.attachEvent(be(M.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return F}function ve(){function _(F){return M.call(_.src,_.listener,F)}const M=_e;return _}function te(_,M,F,H,he){if(Array.isArray(M))for(var xe=0;xe<M.length;xe++)te(_,M[xe],F,H,he);else H=o(H)?!!H.capture:!!H,F=Ye(F),_&&_[Q]?(_=_.i,xe=String(M).toString(),xe in _.g&&(M=_.g[xe],F=ne(M,F,H,he),F>-1&&(J(M[F]),Array.prototype.splice.call(M,F,1),M.length==0&&(delete _.g[xe],_.h--)))):_&&(_=De(_))&&(M=_.g[M.toString()],_=-1,M&&(_=ne(M,F,H,he)),(F=_>-1?M[_]:null)&&Pe(F))}function Pe(_){if(typeof _!="number"&&_&&!_.da){var M=_.src;if(M&&M[Q])ue(M.i,_);else{var F=_.type,H=_.proxy;M.removeEventListener?M.removeEventListener(F,H,_.capture):M.detachEvent?M.detachEvent(be(F),H):M.addListener&&M.removeListener&&M.removeListener(H),(F=De(M))?(ue(F,_),F.h==0&&(F.src=null,M[oe]=null)):J(_)}}}function be(_){return _ in Se?Se[_]:Se[_]="on"+_}function _e(_,M){if(_.da)_=!0;else{M=new W(M,this);const F=_.listener,H=_.ha||_.src;_.fa&&Pe(_),_=F.call(H,M)}return _}function De(_){return _=_[oe],_ instanceof K?_:null}var Oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ye(_){return typeof _=="function"?_:(_[Oe]||(_[Oe]=function(M){return _.handleEvent(M)}),_[Oe])}function Ve(){j.call(this),this.i=new K(this),this.M=this,this.G=null}h(Ve,j),Ve.prototype[Q]=!0,Ve.prototype.removeEventListener=function(_,M,F,H){te(this,_,M,F,H)};function it(_,M){var F,H=_.G;if(H)for(F=[];H;H=H.G)F.push(H);if(_=_.M,H=M.type||M,typeof M=="string")M=new B(M,_);else if(M instanceof B)M.target=M.target||_;else{var he=M;M=new B(H,_),ee(M,he)}he=!0;let xe,je;if(F)for(je=F.length-1;je>=0;je--)xe=M.g=F[je],he=Ft(xe,H,!0,M)&&he;if(xe=M.g=_,he=Ft(xe,H,!0,M)&&he,he=Ft(xe,H,!1,M)&&he,F)for(je=0;je<F.length;je++)xe=M.g=F[je],he=Ft(xe,H,!1,M)&&he}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var _=this.i;for(const M in _.g){const F=_.g[M];for(let H=0;H<F.length;H++)J(F[H]);delete _.g[M],_.h--}}this.G=null},Ve.prototype.J=function(_,M,F,H){return this.i.add(String(_),M,!1,F,H)},Ve.prototype.K=function(_,M,F,H){return this.i.add(String(_),M,!0,F,H)};function Ft(_,M,F,H){if(M=_.i.g[String(M)],!M)return!0;M=M.concat();let he=!0;for(let xe=0;xe<M.length;++xe){const je=M[xe];if(je&&!je.da&&je.capture==F){const dt=je.listener,Hn=je.ha||je.src;je.fa&&ue(_.i,je),he=dt.call(Hn,H)!==!1&&he}}return he&&!H.defaultPrevented}function Gn(_,M){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(M)>2147483647?-1:s.setTimeout(_,M||0)}function An(_){_.g=Gn(()=>{_.g=null,_.i&&(_.i=!1,An(_))},_.l);const M=_.h;_.h=null,_.m.apply(null,M)}class yt extends j{constructor(M,F){super(),this.m=M,this.l=F,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:An(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ut(_){j.call(this),this.h=_,this.g={}}h(Ut,j);var ei=[];function ti(_){ie(_.g,function(M,F){this.g.hasOwnProperty(F)&&Pe(M)},_),_.g={}}Ut.prototype.N=function(){Ut.Z.N.call(this),ti(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ze=s.JSON.stringify,wt=s.JSON.parse,Ir=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function Mn(){}function kn(){}var dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){B.call(this,"d")}h(Mt,B);function fn(){B.call(this,"c")}h(fn,B);var at={},ni=null;function hn(){return ni=ni||new Ve}at.Ia="serverreachability";function pr(_){B.call(this,at.Ia,_)}h(pr,B);function ut(_){const M=hn();it(M,new pr(M))}at.STAT_EVENT="statevent";function pn(_,M){B.call(this,at.STAT_EVENT,_),this.stat=M}h(pn,B);function on(_){const M=hn();it(M,new pn(M,_))}at.Ja="timingevent";function mi(_,M){B.call(this,at.Ja,_),this.size=M}h(mi,B);function ri(_,M){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},M)}function Cn(){this.g=!0}Cn.prototype.ua=function(){this.g=!1};function es(_,M,F,H,he,xe){_.info(function(){if(_.g)if(xe){var je="",dt=xe.split("&");for(let jt=0;jt<dt.length;jt++){var Hn=dt[jt].split("=");if(Hn.length>1){const wn=Hn[0];Hn=Hn[1];const Ta=wn.split("_");je=Ta.length>=2&&Ta[1]=="type"?je+(wn+"="+Hn+"&"):je+(wn+"=redacted&")}}}else je=null;else je=xe;return"XMLHTTP REQ ("+H+") [attempt "+he+"]: "+M+`
`+F+`
`+je})}function Gl(_,M,F,H,he,xe,je){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+he+"]: "+M+`
`+F+`
`+xe+" "+je})}function js(_,M,F,H){_.info(function(){return"XMLHTTP TEXT ("+M+"): "+uE(_,F)+(H?" "+H:"")})}function _u(_,M){_.info(function(){return"TIMEOUT: "+M})}Cn.prototype.info=function(){};function uE(_,M){if(!_.g)return M;if(!M)return null;try{const xe=JSON.parse(M);if(xe){for(_=0;_<xe.length;_++)if(Array.isArray(xe[_])){var F=xe[_];if(!(F.length<2)){var H=F[1];if(Array.isArray(H)&&!(H.length<1)){var he=H[0];if(he!="noop"&&he!="stop"&&he!="close")for(let je=1;je<H.length;je++)H[je]=""}}}}return ze(xe)}catch{return M}}var Eu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},gg;function Tu(){}h(Tu,Mn),Tu.prototype.g=function(){return new XMLHttpRequest},gg=new Tu;function zo(_){return encodeURIComponent(String(_))}function my(_){var M=1;_=_.split(":");const F=[];for(;M>0&&_.length;)F.push(_.shift()),M--;return _.length&&F.push(_.join(":")),F}function ts(_,M,F,H){this.j=_,this.i=M,this.l=F,this.S=H||1,this.V=new Ut(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var Zn={},Pr={};function zs(_,M,F){_.M=1,_.A=Au(er(M)),_.u=F,_.R=!0,yf(_,null)}function yf(_,M){_.F=Date.now(),Ls(_),_.B=er(_.A);var F=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),Sf(F.i,"t",H),_.C=0,F=_.j.L,_.h=new ns,_.g=Ny(_.j,F?M:null,!_.u),_.P>0&&(_.O=new yt(u(_.Y,_,_.g),_.P)),M=_.V,F=_.g,H=_.ba;var he="readystatechange";Array.isArray(he)||(he&&(ei[0]=he.toString()),he=ei);for(let xe=0;xe<he.length;xe++){const je=se(F,he[xe],H||M.handleEvent,!1,M.h||M);if(!je)break;M.g[je.key]=je}M=_.J?U(_.J):{},_.u?(_.v||(_.v="POST"),M["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,M)):(_.v="GET",_.g.ea(_.B,_.v,null,M)),ut(),es(_.i,_.v,_.B,_.l,_.S,_.u)}ts.prototype.ba=function(_){_=_.target;const M=this.O;M&&as(_)==3?M.j():this.Y(_)},ts.prototype.Y=function(_){try{if(_==this.g)e:{const dt=as(this.g),Hn=this.g.ya(),jt=this.g.ca();if(!(dt<3)&&(dt!=3||this.g&&(this.h.h||this.g.la()||Ur(this.g)))){this.K||dt!=4||Hn==7||(Hn==8||jt<=0?ut(3):ut(2)),Vs(this);var M=this.g.ca();this.X=M;var F=dE(this);if(this.o=M==200,Gl(this.i,this.v,this.B,this.l,this.S,dt,M),this.o){if(this.U&&!this.L){t:{if(this.g){var H,he=this.g;if((H=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(H)){var xe=H;break t}}xe=null}if(_=xe)js(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Bs(this,_);else{this.o=!1,this.m=3,on(12),Zi(this),Sa(this);break e}}if(this.R){_=!0;let wn;for(;!this.K&&this.C<F.length;)if(wn=yy(this,F),wn==Pr){dt==4&&(this.m=4,on(14),_=!1),js(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==Zn){this.m=4,on(15),js(this.i,this.l,F,"[Invalid Chunk]"),_=!1;break}else js(this.i,this.l,wn,null),Bs(this,wn);if(vy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||F.length!=0||this.h.h||(this.m=1,on(16),_=!1),this.o=this.o&&_,!_)js(this.i,this.l,F,"[Invalid Chunked Response]"),Zi(this),Sa(this);else if(F.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Pg(je),je.P=!0,on(11))}}else js(this.i,this.l,F,null),Bs(this,F);dt==4&&Zi(this),this.o&&!this.K&&(dt==4?ky(this.j,this):(this.o=!1,Ls(this)))}else Vo(this.g),M==400&&F.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),Zi(this),Sa(this)}}}catch{}};function dE(_){if(!vy(_))return _.g.la();const M=Ur(_.g);if(M==="")return"";let F="";const H=M.length,he=as(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Zi(_),Sa(_),"";_.h.i=new s.TextDecoder}for(let xe=0;xe<H;xe++)_.h.h=!0,F+=_.h.i.decode(M[xe],{stream:!(he&&xe==H-1)});return M.length=0,_.h.g+=F,_.C=0,_.h.g}function vy(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function yy(_,M){var F=_.C,H=M.indexOf(`
`,F);return H==-1?Pr:(F=Number(M.substring(F,H)),isNaN(F)?Zn:(H+=1,H+F>M.length?Pr:(M=M.slice(H,H+F),_.C=H+F,M)))}ts.prototype.cancel=function(){this.K=!0,Zi(this)};function Ls(_){_.T=Date.now()+_.H,bf(_,_.H)}function bf(_,M){if(_.D!=null)throw Error("WatchDog timer not null");_.D=ri(u(_.aa,_),M)}function Vs(_){_.D&&(s.clearTimeout(_.D),_.D=null)}ts.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(_u(this.i,this.B),this.M!=2&&(ut(),on(17)),Zi(this),this.m=2,Sa(this)):bf(this,this.T-_)};function Sa(_){_.j.I==0||_.K||ky(_.j,_)}function Zi(_){Vs(_);var M=_.O;M&&typeof M.dispose=="function"&&M.dispose(),_.O=null,ti(_.V),_.g&&(M=_.g,_.g=null,M.abort(),M.dispose())}function Bs(_,M){try{var F=_.j;if(F.I!=0&&(F.g==_||Us(F.h,_))){if(!_.L&&Us(F.h,_)&&F.I==3){try{var H=F.Ba.g.parse(M)}catch{H=null}if(Array.isArray(H)&&H.length==3){var he=H;if(he[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<_.F)kf(F),Jl(F);else break e;Ou(F),on(18)}}else F.xa=he[1],0<F.xa-F.K&&he[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=ri(u(F.Va,F),6e3));Fs(F.h)<=1&&F.ta&&(F.ta=void 0)}else Ws(F,11)}else if((_.L||F.g==_)&&kf(F),!z(M))for(he=F.Ba.g.parse(M),M=0;M<he.length;M++){let jt=he[M];const wn=jt[0];if(!(wn<=F.K))if(F.K=wn,jt=jt[1],F.I==2)if(jt[0]=="c"){F.M=jt[1],F.ba=jt[2];const Ta=jt[3];Ta!=null&&(F.ka=Ta,F.j.info("VER="+F.ka));const Ys=jt[4];Ys!=null&&(F.za=Ys,F.j.info("SVER="+F.za));const ss=jt[5];ss!=null&&typeof ss=="number"&&ss>0&&(H=1.5*ss,F.O=H,F.j.info("backChannelRequestTimeoutMs_="+H)),H=F;const os=_.g;if(os){const Ru=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var xe=H.h;xe.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(yg(xe,xe.h),xe.h=null))}if(H.G){const Cf=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Cf&&(H.wa=Cf,$t(H.J,H.G,Cf))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-_.F,F.j.info("Handshake RTT: "+F.T+"ms")),H=F;var je=_;if(H.na=Py(H,H.L?H.ba:null,H.W),je.L){bg(H.h,je);var dt=je,Hn=H.O;Hn&&(dt.H=Hn),dt.D&&(Vs(dt),Ls(dt)),H.g=je}else Ty(H);F.i.length>0&&Ks(F)}else jt[0]!="stop"&&jt[0]!="close"||Ws(F,7);else F.I==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?Ws(F,7):Cg(F):jt[0]!="noop"&&F.l&&F.l.qa(jt),F.A=0)}}ut(4)}catch{}}var Jn=class{constructor(_,M){this.g=_,this.map=M}};function mg(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vg(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Fs(_){return _.h?1:_.g?_.g.size:0}function Us(_,M){return _.h?_.h==M:_.g?_.g.has(M):!1}function yg(_,M){_.g?_.g.add(M):_.h=M}function bg(_,M){_.h&&_.h==M?_.h=null:_.g&&_.g.has(M)&&_.g.delete(M)}mg.prototype.cancel=function(){if(this.i=xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function xg(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let M=_.i;for(const F of _.g.values())M=M.concat(F.G);return M}return v(_.i)}var by=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xf(_,M){if(_){_=_.split("&");for(let F=0;F<_.length;F++){const H=_[F].indexOf("=");let he,xe=null;H>=0?(he=_[F].substring(0,H),xe=_[F].substring(H+1)):he=_[F],M(he,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Ji(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let M;_ instanceof Ji?(this.l=_.l,Nr(this,_.j),this.o=_.o,this.g=_.g,Hl(this,_.u),this.h=_.h,wg(this,_y(_.i)),this.m=_.m):_&&(M=String(_).match(by))?(this.l=!1,Nr(this,M[1]||"",!0),this.o=$s(M[2]||""),this.g=$s(M[3]||"",!0),Hl(this,M[4]),this.h=$s(M[5]||"",!0),wg(this,M[6]||"",!0),this.m=$s(M[7]||"")):(this.l=!1,this.i=new Wl(null,this.l))}Ji.prototype.toString=function(){const _=[];var M=this.j;M&&_.push(ku(M,wf,!0),":");var F=this.g;return(F||M=="file")&&(_.push("//"),(M=this.o)&&_.push(ku(M,wf,!0),"@"),_.push(zo(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&_.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&_.push("/"),_.push(ku(F,F.charAt(0)=="/"?Sg:xy,!0))),(F=this.i.toString())&&_.push("?",F),(F=this.m)&&_.push("#",ku(F,wy)),_.join("")},Ji.prototype.resolve=function(_){const M=er(this);let F=!!_.j;F?Nr(M,_.j):F=!!_.o,F?M.o=_.o:F=!!_.g,F?M.g=_.g:F=_.u!=null;var H=_.h;if(F)Hl(M,_.u);else if(F=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var he=M.h.lastIndexOf("/");he!=-1&&(H=M.h.slice(0,he+1)+H)}if(he=H,he==".."||he==".")H="";else if(he.indexOf("./")!=-1||he.indexOf("/.")!=-1){H=he.lastIndexOf("/",0)==0,he=he.split("/");const xe=[];for(let je=0;je<he.length;){const dt=he[je++];dt=="."?H&&je==he.length&&xe.push(""):dt==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),H&&je==he.length&&xe.push("")):(xe.push(dt),H=!0)}H=xe.join("/")}else H=he}return F?M.h=H:F=_.i.toString()!=="",F?wg(M,_y(_.i)):F=!!_.m,F&&(M.m=_.m),M};function er(_){return new Ji(_)}function Nr(_,M,F){_.j=F?$s(M,!0):M,_.j&&(_.j=_.j.replace(/:$/,""))}function Hl(_,M){if(M){if(M=Number(M),isNaN(M)||M<0)throw Error("Bad port number "+M);_.u=M}else _.u=null}function wg(_,M,F){M instanceof Wl?(_.i=M,_f(_.i,_.l)):(F||(M=ku(M,Kl)),_.i=new Wl(M,_.l))}function $t(_,M,F){_.i.set(M,F)}function Au(_){return $t(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function $s(_,M){return _?M?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function ku(_,M,F){return typeof _=="string"?(_=encodeURI(_).replace(M,Ni),F&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ni(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var wf=/[#\/\?@]/g,xy=/[#\?:]/g,Sg=/[#\?]/g,Kl=/[#\?@]/g,wy=/#/g;function Wl(_,M){this.h=this.g=null,this.i=_||null,this.j=!!M}function Di(_){_.g||(_.g=new Map,_.h=0,_.i&&xf(_.i,function(M,F){_.add(decodeURIComponent(M.replace(/\+/g," ")),F)}))}t=Wl.prototype,t.add=function(_,M){Di(this),this.i=null,_=Yl(this,_);let F=this.g.get(_);return F||this.g.set(_,F=[]),F.push(M),this.h+=1,this};function Sy(_,M){Di(_),M=Yl(_,M),_.g.has(M)&&(_.i=null,_.h-=_.g.get(M).length,_.g.delete(M))}function _g(_,M){return Di(_),M=Yl(_,M),_.g.has(M)}t.forEach=function(_,M){Di(this),this.g.forEach(function(F,H){F.forEach(function(he){_.call(M,he,H,this)},this)},this)};function Eg(_,M){Di(_);let F=[];if(typeof M=="string")_g(_,M)&&(F=F.concat(_.g.get(Yl(_,M))));else for(_=Array.from(_.g.values()),M=0;M<_.length;M++)F=F.concat(_[M]);return F}t.set=function(_,M){return Di(this),this.i=null,_=Yl(this,_),_g(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[M]),this.h+=1,this},t.get=function(_,M){return _?(_=Eg(this,_),_.length>0?String(_[0]):M):M};function Sf(_,M,F){Sy(_,M),F.length>0&&(_.i=null,_.g.set(Yl(_,M),v(F)),_.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],M=Array.from(this.g.keys());for(let H=0;H<M.length;H++){var F=M[H];const he=zo(F);F=Eg(this,F);for(let xe=0;xe<F.length;xe++){let je=he;F[xe]!==""&&(je+="="+zo(F[xe])),_.push(je)}}return this.i=_.join("&")};function _y(_){const M=new Wl;return M.i=_.i,_.g&&(M.g=new Map(_.g),M.h=_.h),M}function Yl(_,M){return M=String(M),_.j&&(M=M.toLowerCase()),M}function _f(_,M){M&&!_.j&&(Di(_),_.i=null,_.g.forEach(function(F,H){const he=H.toLowerCase();H!=he&&(Sy(this,H),Sf(this,he,F))},_)),_.j=M}function rs(_,M){const F=new Cn;if(s.Image){const H=new Image;H.onload=f(_a,F,"TestLoadImage: loaded",!0,M,H),H.onerror=f(_a,F,"TestLoadImage: error",!1,M,H),H.onabort=f(_a,F,"TestLoadImage: abort",!1,M,H),H.ontimeout=f(_a,F,"TestLoadImage: timeout",!1,M,H),s.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else M(!1)}function Tg(_,M){const F=new Cn,H=new AbortController,he=setTimeout(()=>{H.abort(),_a(F,"TestPingServer: timeout",!1,M)},1e4);fetch(_,{signal:H.signal}).then(xe=>{clearTimeout(he),xe.ok?_a(F,"TestPingServer: ok",!0,M):_a(F,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(he),_a(F,"TestPingServer: error",!1,M)})}function _a(_,M,F,H,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),H(F)}catch{}}function Xl(){this.g=new Ir}function qs(_){this.i=_.Sb||null,this.h=_.ab||!1}h(qs,Mn),qs.prototype.g=function(){return new Cu(this.i,this.h)};function Cu(_,M){Ve.call(this),this.H=_,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Cu,Ve),t=Cu.prototype,t.open=function(_,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=M,this.readyState=1,is(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const M={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(M.body=_),(this.H||s).fetch(new Request(this.D,M)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ql(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ef(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ef(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var M=_.value?_.value:new Uint8Array(0);(M=this.B.decode(M,{stream:!_.done}))&&(this.response=this.responseText+=M)}_.done?Ql(this):is(this),this.readyState==3&&Ef(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,Ql(this))},t.Na=function(_){this.g&&(this.response=_,Ql(this))},t.ga=function(){this.g&&Ql(this)};function Ql(_){_.readyState=4,_.l=null,_.j=null,_.B=null,is(_)}t.setRequestHeader=function(_,M){this.A.append(_,M)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],M=this.h.entries();for(var F=M.next();!F.done;)F=F.value,_.push(F[0]+": "+F[1]),F=M.next();return _.join(`\r
`)};function is(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Ea(_){let M="";return ie(_,function(F,H){M+=H,M+=":",M+=F,M+=`\r
`}),M}function Iu(_,M,F){e:{for(H in F){var H=!1;break e}H=!0}H||(F=Ea(F),typeof _=="string"?F!=null&&zo(F):$t(_,M,F))}function Xt(_){Ve.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Xt,Ve);var Gs=/^https?$/i,Ag=["POST","PUT"];t=Xt.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,M,F,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);M=M?M.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():gg.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(M,String(_),!0),this.B=!1}catch(xe){Pu(this,xe);return}if(_=F||"",F=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var he in H)F.set(he,H[he]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const xe of H.keys())F.set(xe,H.get(xe));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(F.keys()).find(xe=>xe.toLowerCase()=="content-type"),he=s.FormData&&_ instanceof s.FormData,!(Array.prototype.indexOf.call(Ag,M,void 0)>=0)||H||he||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,je]of F)this.g.setRequestHeader(xe,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(xe){Pu(this,xe)}};function Pu(_,M){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=M,_.o=5,kg(_),Lo(_)}function kg(_){_.A||(_.A=!0,it(_,"complete"),it(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,it(this,"complete"),it(this,"abort"),Lo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lo(this,!0)),Xt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Nu(this):this.Xa())},t.Xa=function(){Nu(this)};function Nu(_){if(_.h&&typeof a<"u"){if(_.v&&as(_)==4)setTimeout(_.Ca.bind(_),0);else if(it(_,"readystatechange"),as(_)==4){_.h=!1;try{const xe=_.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var F;if(!(F=M)){var H;if(H=xe===0){let je=String(_.D).match(by)[1]||null;!je&&s.self&&s.self.location&&(je=s.self.location.protocol.slice(0,-1)),H=!Gs.test(je?je.toLowerCase():"")}F=H}if(F)it(_,"complete"),it(_,"success");else{_.o=6;try{var he=as(_)>2?_.g.statusText:""}catch{he=""}_.l=he+" ["+_.ca()+"]",kg(_)}}finally{Lo(_)}}}}function Lo(_,M){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const F=_.g;_.g=null,M||it(_,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function as(_){return _.g?_.g.readyState:0}t.ca=function(){try{return as(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var M=this.g.responseText;return _&&M.indexOf(_)==0&&(M=M.substring(_.length)),wt(M)}};function Ur(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Vo(_){const M={};_=(_.g&&as(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(z(_[H]))continue;var F=my(_[H]);const he=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const xe=M[he]||[];M[he]=xe,xe.push(F)}X(M,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(_,M,F){return F&&F.internalChannelParams&&F.internalChannelParams[_]||M}function Zl(_){this.za=0,this.i=[],this.j=new Cn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hs("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hs("baseRetryDelayMs",5e3,_),this.Za=Hs("retryDelaySeedMs",1e4,_),this.Ta=Hs("forwardChannelMaxRetries",2,_),this.va=Hs("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new mg(_&&_.concurrentRequestLimit),this.Ba=new Xl,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Zl.prototype,t.ka=8,t.I=1,t.connect=function(_,M,F,H){on(0),this.W=_,this.H=M||{},F&&H!==void 0&&(this.H.OSID=F,this.H.OAID=H),this.F=this.X,this.J=Py(this,null,this.W),Ks(this)};function Cg(_){if(Tf(_),_.I==3){var M=_.V++,F=er(_.J);if($t(F,"SID",_.M),$t(F,"RID",M),$t(F,"TYPE","terminate"),Du(_,F),M=new ts(_,_.j,M),M.M=2,M.A=Au(er(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(M.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=M.A,F=!0),F||(M.g=Ny(M.j,null),M.g.ea(M.A)),M.F=Date.now(),Ls(M)}Iy(_)}function Jl(_){_.g&&(Pg(_),_.g.cancel(),_.g=null)}function Tf(_){Jl(_),_.v&&(s.clearTimeout(_.v),_.v=null),kf(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&s.clearTimeout(_.m),_.m=null)}function Ks(_){if(!vg(_.h)&&!_.m){_.m=!0;var M=_.Ea;O||I(),N||(O(),N=!0),C.add(M,_),_.D=0}}function Af(_,M){return Fs(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=M.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=ri(u(_.Ea,_,M),Cy(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const he=new ts(this,this.j,_);let xe=this.o;if(this.U&&(xe?(xe=U(xe),ee(xe,this.U)):xe=this.U),this.u!==null||this.R||(he.J=xe,xe=null),this.S)e:{for(var M=0,F=0;F<this.i.length;F++){t:{var H=this.i[F];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(M+=H,M>4096){M=F;break e}if(M===4096||F===this.i.length-1){M=F+1;break e}}M=1e3}else M=1e3;M=Ey(this,he,M),F=er(this.J),$t(F,"RID",_),$t(F,"CVER",22),this.G&&$t(F,"X-HTTP-Session-Id",this.G),Du(this,F),xe&&(this.R?M="headers="+zo(Ea(xe))+"&"+M:this.u&&Iu(F,this.u,xe)),yg(this.h,he),this.Ra&&$t(F,"TYPE","init"),this.S?($t(F,"$req",M),$t(F,"SID","null"),he.U=!0,zs(he,F,null)):zs(he,F,M),this.I=2}}else this.I==3&&(_?Ig(this,_):this.i.length==0||vg(this.h)||Ig(this))};function Ig(_,M){var F;M?F=M.l:F=_.V++;const H=er(_.J);$t(H,"SID",_.M),$t(H,"RID",F),$t(H,"AID",_.K),Du(_,H),_.u&&_.o&&Iu(H,_.u,_.o),F=new ts(_,_.j,F,_.D+1),_.u===null&&(F.J=_.o),M&&(_.i=M.G.concat(_.i)),M=Ey(_,F,1e3),F.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),yg(_.h,F),zs(F,H,M)}function Du(_,M){_.H&&ie(_.H,function(F,H){$t(M,H,F)}),_.l&&ie({},function(F,H){$t(M,H,F)})}function Ey(_,M,F){F=Math.min(_.i.length,F);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var he=_.i;let dt=-1;for(;;){const Hn=["count="+F];dt==-1?F>0?(dt=he[0].g,Hn.push("ofs="+dt)):dt=0:Hn.push("ofs="+dt);let jt=!0;for(let wn=0;wn<F;wn++){var xe=he[wn].g;const Ta=he[wn].map;if(xe-=dt,xe<0)dt=Math.max(0,he[wn].g-100),jt=!1;else try{xe="req"+xe+"_"||"";try{var je=Ta instanceof Map?Ta:Object.entries(Ta);for(const[Ys,ss]of je){let os=ss;o(ss)&&(os=ze(ss)),Hn.push(xe+Ys+"="+encodeURIComponent(os))}}catch(Ys){throw Hn.push(xe+"type="+encodeURIComponent("_badmap")),Ys}}catch{H&&H(Ta)}}if(jt){je=Hn.join("&");break e}}je=void 0}return _=_.i.splice(0,F),M.G=_,je}function Ty(_){if(!_.g&&!_.v){_.Y=1;var M=_.Da;O||I(),N||(O(),N=!0),C.add(M,_),_.A=0}}function Ou(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=ri(u(_.Da,_),Cy(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,Ay(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=ri(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),Jl(this),Ay(this))};function Pg(_){_.B!=null&&(s.clearTimeout(_.B),_.B=null)}function Ay(_){_.g=new ts(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var M=er(_.na);$t(M,"RID","rpc"),$t(M,"SID",_.M),$t(M,"AID",_.K),$t(M,"CI",_.F?"0":"1"),!_.F&&_.ia&&$t(M,"TO",_.ia),$t(M,"TYPE","xmlhttp"),Du(_,M),_.u&&_.o&&Iu(M,_.u,_.o),_.O&&(_.g.H=_.O);var F=_.g;_=_.ba,F.M=1,F.A=Au(er(M)),F.u=null,F.R=!0,yf(F,_)}t.Va=function(){this.C!=null&&(this.C=null,Jl(this),Ou(this),on(19))};function kf(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function ky(_,M){var F=null;if(_.g==M){kf(_),Pg(_),_.g=null;var H=2}else if(Us(_.h,M))F=M.G,bg(_.h,M),H=1;else return;if(_.I!=0){if(M.o)if(H==1){F=M.u?M.u.length:0,M=Date.now()-M.F;var he=_.D;H=hn(),it(H,new mi(H,F)),Ks(_)}else Ty(_);else if(he=M.m,he==3||he==0&&M.X>0||!(H==1&&Af(_,M)||H==2&&Ou(_)))switch(F&&F.length>0&&(M=_.h,M.i=M.i.concat(F)),he){case 1:Ws(_,5);break;case 4:Ws(_,10);break;case 3:Ws(_,6);break;default:Ws(_,2)}}}function Cy(_,M){let F=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(F*=2),F*M}function Ws(_,M){if(_.j.info("Error code "+M),M==2){var F=u(_.bb,_),H=_.Ua;const he=!H;H=new Ji(H||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Nr(H,"https"),Au(H),he?rs(H.toString(),F):Tg(H.toString(),F)}else on(2);_.I=0,_.l&&_.l.pa(M),Iy(_),Tf(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Iy(_){if(_.I=0,_.ja=[],_.l){const M=xg(_.h);(M.length!=0||_.i.length!=0)&&(b(_.ja,M),b(_.ja,_.i),_.h.i.length=0,v(_.i),_.i.length=0),_.l.oa()}}function Py(_,M,F){var H=F instanceof Ji?er(F):new Ji(F);if(H.g!="")M&&(H.g=M+"."+H.g),Hl(H,H.u);else{var he=s.location;H=he.protocol,M=M?M+"."+he.hostname:he.hostname,he=+he.port;const xe=new Ji(null);H&&Nr(xe,H),M&&(xe.g=M),he&&Hl(xe,he),F&&(xe.h=F),H=xe}return F=_.G,M=_.wa,F&&M&&$t(H,F,M),$t(H,"VER",_.ka),Du(_,H),H}function Ny(_,M,F){if(M&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return M=_.Aa&&!_.ma?new Xt(new qs({ab:F})):new Xt(_.ma),M.Fa(_.L),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dy(){}t=Dy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ec(){}ec.prototype.g=function(_,M){return new vi(_,M)};function vi(_,M){Ve.call(this),this.g=new Zl(M),this.l=_,this.h=M&&M.messageUrlParams||null,_=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(_?_["X-WebChannel-Content-Type"]=M.messageContentType:_={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.sa&&(_?_["X-WebChannel-Client-Profile"]=M.sa:_={"X-WebChannel-Client-Profile":M.sa}),this.g.U=_,(_=M&&M.Qb)&&!z(_)&&(this.g.u=_),this.A=M&&M.supportsCrossDomainXhr||!1,this.v=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!z(M)&&(this.g.G=M,_=this.h,_!==null&&M in _&&(_=this.h,M in _&&delete _[M])),this.j=new Bo(this)}h(vi,Ve),vi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vi.prototype.close=function(){Cg(this.g)},vi.prototype.o=function(_){var M=this.g;if(typeof _=="string"){var F={};F.__data__=_,_=F}else this.v&&(F={},F.__data__=ze(_),_=F);M.i.push(new Jn(M.Ya++,_)),M.I==3&&Ks(M)},vi.prototype.N=function(){this.g.l=null,delete this.j,Cg(this.g),delete this.g,vi.Z.N.call(this)};function Oy(_){Mt.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var M=_.__sm__;if(M){e:{for(const F in M){_=F;break e}_=void 0}(this.i=_)&&(_=this.i,M=M!==null&&_ in M?M[_]:void 0),this.data=M}else this.data=_}h(Oy,Mt);function Ry(){fn.call(this),this.status=1}h(Ry,fn);function Bo(_){this.g=_}h(Bo,Dy),Bo.prototype.ra=function(){it(this.g,"a")},Bo.prototype.qa=function(_){it(this.g,new Oy(_))},Bo.prototype.pa=function(_){it(this.g,new Ry)},Bo.prototype.oa=function(){it(this.g,"b")},ec.prototype.createWebChannel=ec.prototype.g,vi.prototype.send=vi.prototype.o,vi.prototype.open=vi.prototype.m,vi.prototype.close=vi.prototype.close,Eq=function(){return new ec},_q=function(){return hn()},Sq=at,fI={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Eu.NO_ERROR=0,Eu.TIMEOUT=8,Eu.HTTP_ERROR=6,qx=Eu,pg.COMPLETE="complete",wq=pg,kn.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Lm=kn,Xt.prototype.listenOnce=Xt.prototype.K,Xt.prototype.getLastError=Xt.prototype.Ha,Xt.prototype.getLastErrorCode=Xt.prototype.ya,Xt.prototype.getStatus=Xt.prototype.ca,Xt.prototype.getResponseJson=Xt.prototype.La,Xt.prototype.getResponseText=Xt.prototype.la,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Fa,xq=Xt}).apply(typeof Fb<"u"?Fb:typeof self<"u"?self:typeof window<"u"?window:{});class oi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let Up="12.9.0";function _ue(t){Up=t}const Ld=new mS("@firebase/firestore");function bh(){return Ld.logLevel}function Ne(t,...e){if(Ld.logLevel<=kt.DEBUG){const n=e.map(lD);Ld.debug(`Firestore (${Up}): ${t}`,...n)}}function Yn(t,...e){if(Ld.logLevel<=kt.ERROR){const n=e.map(lD);Ld.error(`Firestore (${Up}): ${t}`,...n)}}function rp(t,...e){if(Ld.logLevel<=kt.WARN){const n=e.map(lD);Ld.warn(`Firestore (${Up}): ${t}`,...n)}}function lD(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Tq(t,r,n)}function Tq(t,e,n){let r=`FIRESTORE (${Up}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Yn(r),new Error(r)}function Xe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Tq(e,i,r)}function Ke(t,e){return t}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Do{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Eue{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(oi.UNAUTHENTICATED)))}shutdown(){}}class Aue{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new bo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new bo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bo)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new Eue(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new oi(e)}}class kue{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Cue{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new kue(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(oi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class JL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Iue{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const r=a=>{a.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ne("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new JL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JL(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Pue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class cD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Pue(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function hI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return SA(i)===SA(a)?ot(i,a):SA(i)?1:-1}return ot(t.length,e.length)}const Nue=55296,Due=57343;function SA(t){const e=t.charCodeAt(0);return e>=Nue&&e<=Due}function ip(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function Aq(t){return t+"\0"}const e3="__name__";class lo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=lo.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return ot(e.length,n.length)}static compareSegments(e,n){const r=lo.isNumericId(e),i=lo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?lo.extractNumericId(e).compare(lo.extractNumericId(n)):hI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hc.fromString(e.substring(4,e.length-2))}}class Lt extends lo{construct(e,n,r){return new Lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Lt(n)}static emptyPath(){return new Lt([])}}const Oue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends lo{construct(e,n,r){return new Nn(e,n,r)}static isValidIdentifier(e){return Oue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e3}static keyField(){return new Nn([e3])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Me(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Me(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Me(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(n)}static emptyPath(){return new Nn([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Lt.fromString(e))}static fromName(e){return new Le(Lt.fromString(e).popFirst(5))}static empty(){return new Le(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Lt(e.slice()))}}function kq(t,e,n){if(!n)throw new Me(Ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rue(t,e,n,r){if(e===!0&&r===!0)throw new Me(Ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t3(t){if(!Le.isDocumentKey(t))throw new Me(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n3(t){if(Le.isDocumentKey(t))throw new Me(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cq(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function SS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function Ki(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=SS(t);throw new Me(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function cr(t,e){const n={typeString:t};return e&&(n.value=e),n}function _0(t,e){if(!Cq(t))throw new Me(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Me(Ee.INVALID_ARGUMENT,n);return!0}const r3=-62135596800,i3=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i3);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r3)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i3}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_0(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:cr("string",gt._jsonSchemaVersion),seconds:cr("number"),nanoseconds:cr("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new gt(0,0))}static max(){return new et(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ap=-1;class Iw{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function pI(t){return t.fields.find((e=>e.kind===2))}function nd(t){return t.fields.filter((e=>e.kind!==2))}Iw.UNKNOWN_ID=-1;class Gx{constructor(e,n){this.fieldPath=e,this.kind=n}}class Tv{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Tv(0,ya.min())}}function Iq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=et.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new ya(i,Le.empty(),e)}function Pq(t){return new ya(t.readTime,t.key,ap)}class ya{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ya(et.min(),Le.empty(),ap)}static max(){return new ya(et.max(),Le.empty(),ap)}}function uD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Le.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}const Nq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function fu(t){if(t.code!==Ee.FAILED_PRECONDITION||t.message!==Nq)throw t;Ne("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,r)=>{n(e)}))}static reject(e){return new fe(((n,r)=>{r(e)}))}static waitFor(e){return new fe(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next((i=>i?fe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new fe(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new fe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const ca="SimpleDb";class _S{static open(e,n,r,i){try{return new _S(n,e.transaction(i,r))}catch(a){throw new Jm(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new bo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Jm(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=dD(r.target.error);this.S.reject(new Jm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ne(ca,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new jue(n)}}class Kc{static delete(e){return Ne(ca,"Removing database:",e),cd(FN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gS())return!1;if(Kc.F())return!0;const e=Er(),n=Kc.M(e),r=0<n&&n<10,i=Oq(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Kc.M(Er())===12.2&&Yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ne(ca,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new Jm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Me(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Me(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Jm(e,s))},i.onupgradeneeded=a=>{Ne(ca,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{Ne(ca,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=_S.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),fe.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(Ne(ca,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Oq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Mue{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return cd(this.U.delete())}}class Jm extends Me{constructor(e,n){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function hu(t){return t.name==="IndexedDbTransactionError"}class jue{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Ne(ca,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ne(ca,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cd(r)}add(e){return Ne(ca,"ADD",this.store.name,e,e),cd(this.store.add(e))}get(e){return cd(this.store.get(e)).next((n=>(n===void 0&&(n=null),Ne(ca,"GET",this.store.name,e,n),n)))}delete(e){return Ne(ca,"DELETE",this.store.name,e),cd(this.store.delete(e))}count(){return Ne(ca,"COUNT",this.store.name),cd(this.store.count())}H(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new fe(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.J(a,((o,c)=>{s.push(c)})).next((()=>s))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new fe(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}X(e,n){Ne(ca,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.J(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}te(e){const n=this.cursor({});return new fe(((r,i)=>{n.onerror=a=>{const s=dD(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}J(e,n){const r=[];return new fe(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new Mue(o),u=n(o.primaryKey,o.value,c);if(u instanceof fe){const f=u.catch((h=>(c.done(),fe.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>fe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function cd(t){return new fe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=dD(r.target.error);n(i)}}))}let a3=!1;function dD(t){const e=Kc.M(Er());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return a3||(a3=!0,setTimeout((()=>{throw r}),0)),r}}return t}const ev="IndexBackfiller";class zue{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ne(ev,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Ne(ev,`Documents written: ${n}`)}catch(n){hu(n)?Ne(ev,"Ignoring IndexedDB error during index backfill: ",n):await fu(n)}await this.re(6e4)}))}}class Lue{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return fe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return Ne(ev,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(Ne(ev,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=Pq(a);uD(s,r)>0&&(r=s)})),new ya(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Bi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bi.ce=-1;const kd=-1;function ES(t){return t==null}function Av(t){return t===0&&1/t==-1/0}function Rq(t){return typeof t=="number"&&Number.isInteger(t)&&!Av(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Pw="";function fi(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=s3(e)),e=Vue(t.get(n),e);return s3(e)}function Vue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Pw:n+="";break;default:n+=a}}return n}function s3(t){return t+Pw+""}function fo(t){const e=t.length;if(Xe(e>=2,64408,{path:t}),e===2)return Xe(t.charAt(0)===Pw&&t.charAt(1)==="",56145,{path:t}),Lt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(Pw,a);switch((s<0||s>n)&&Fe(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Fe(61167,{path:t})}a=s+2}return new Lt(r)}const rd="remoteDocuments",E0="owner",ih="owner",kv="mutationQueues",Bue="userId",ps="mutations",o3="batchId",yd="userMutationsIndex",l3=["userId","batchId"];function Hx(t,e){return[t,fi(e)]}function Mq(t,e,n){return[t,fi(e),n]}const Fue={},sp="documentMutations",Nw="remoteDocumentsV14",Uue=["prefixPath","collectionGroup","readTime","documentId"],Kx="documentKeyIndex",$ue=["prefixPath","collectionGroup","documentId"],jq="collectionGroupIndex",que=["collectionGroup","readTime","prefixPath","documentId"],Cv="remoteDocumentGlobal",gI="remoteDocumentGlobalKey",op="targets",zq="queryTargetsIndex",Gue=["canonicalId","targetId"],lp="targetDocuments",Hue=["targetId","path"],fD="documentTargetsIndex",Kue=["path","targetId"],Dw="targetGlobalKey",Cd="targetGlobal",Iv="collectionParents",Wue=["collectionId","parent"],cp="clientMetadata",Yue="clientId",TS="bundles",Xue="bundleId",AS="namedQueries",Que="name",hD="indexConfiguration",Zue="indexId",mI="collectionGroupIndex",Jue="collectionGroup",tv="indexState",ede=["indexId","uid"],Lq="sequenceNumberIndex",tde=["uid","sequenceNumber"],nv="indexEntries",nde=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vq="documentKeyIndex",rde=["indexId","uid","orderedDocumentKey"],kS="documentOverlays",ide=["userId","collectionPath","documentId"],vI="collectionPathOverlayIndex",ade=["userId","collectionPath","largestBatchId"],Bq="collectionGroupOverlayIndex",sde=["userId","collectionGroup","largestBatchId"],pD="globals",ode="name",Fq=[kv,ps,sp,rd,op,E0,Cd,lp,cp,Cv,Iv,TS,AS],lde=[...Fq,kS],Uq=[kv,ps,sp,Nw,op,E0,Cd,lp,cp,Cv,Iv,TS,AS,kS],$q=Uq,gD=[...$q,hD,tv,nv],cde=gD,qq=[...gD,pD],ude=qq;class yI extends Dq{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Tr(t,e){const n=Ke(t);return Kc.O(n.le,e)}function c3(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class un{constructor(e,n){this.comparator=e,this.root=n||Zr.EMPTY}insert(e,n){return new un(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ub(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ub(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ub(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ub(this.root,e,this.comparator,!0)}}class Ub{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Zr.RED,this.left=i??Zr.EMPTY,this.right=a??Zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Zr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Zr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1;Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Zr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wt{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u3(this.data.getIterator())}getIteratorFrom(e){return new u3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class u3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ah(t){return t.hasNext()?t.getNext():void 0}class Fi{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new Fi([])}unionWith(e){let n=new Wt(Nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Fi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ip(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Hq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Hq("Invalid base64 string: "+a):a}})(e);return new Xn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const dde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(t){if(Xe(!!t,39018),typeof t=="string"){let e=0;const n=dde.exec(t);if(Xe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:En(t.seconds),nanos:En(t.nanos)}}function En(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tl(t){return typeof t=="string"?Xn.fromBase64String(t):Xn.fromUint8Array(t)}const Kq="server_timestamp",Wq="__type__",Yq="__previous_value__",Xq="__local_write_time__";function mD(t){return(t?.mapValue?.fields||{})[Wq]?.stringValue===Kq}function CS(t){const e=t.mapValue.fields[Yq];return mD(e)?CS(e):e}function Pv(t){const e=El(t.mapValue.fields[Xq].timestampValue);return new gt(e.seconds,e.nanos)}class fde{constructor(e,n,r,i,a,s,o,c,u,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f,this.apiKey=h}}const Ow="(default)";class Vd{constructor(e,n){this.projectId=e,this.database=n||Ow}static empty(){return new Vd("","")}get isDefaultDatabase(){return this.database===Ow}isEqual(e){return e instanceof Vd&&e.projectId===this.projectId&&e.database===this.database}}function hde(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Me(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(t.options.projectId,e)}const vD="__type__",Qq="__max__",zc={mapValue:{fields:{__type__:{stringValue:Qq}}}},yD="__vector__",up="value",Wx={nullValue:"NULL_VALUE"};function Jc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mD(t)?4:Zq(t)?9007199254740991:IS(t)?10:11:Fe(28295,{value:t})}function To(t,e){if(t===e)return!0;const n=Jc(t);if(n!==Jc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pv(t).isEqual(Pv(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=El(i.timestampValue),o=El(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Tl(i.bytesValue).isEqual(Tl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return En(i.geoPointValue.latitude)===En(a.geoPointValue.latitude)&&En(i.geoPointValue.longitude)===En(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return En(i.integerValue)===En(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=En(i.doubleValue),o=En(a.doubleValue);return s===o?Av(s)===Av(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return ip(t.arrayValue.values||[],e.arrayValue.values||[],To);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(c3(s)!==c3(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!To(s[c],o[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function Nv(t,e){return(t.values||[]).find((n=>To(n,e)))!==void 0}function eu(t,e){if(t===e)return 0;const n=Jc(t),r=Jc(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=En(a.integerValue||a.doubleValue),c=En(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return d3(t.timestampValue,e.timestampValue);case 4:return d3(Pv(t),Pv(e));case 5:return hI(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=Tl(a),c=Tl(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=ot(o[u],c[u]);if(f!==0)return f}return ot(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=ot(En(a.latitude),En(s.latitude));return o!==0?o:ot(En(a.longitude),En(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return f3(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[up]?.arrayValue,f=c[up]?.arrayValue,h=ot(u?.values?.length||0,f?.values?.length||0);return h!==0?h:f3(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===zc.mapValue&&s===zc.mapValue)return 0;if(a===zc.mapValue)return 1;if(s===zc.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=hI(c[h],f[h]);if(g!==0)return g;const v=eu(o[c[h]],u[f[h]]);if(v!==0)return v}return ot(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function d3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=El(t),r=El(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function f3(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=eu(n[i],r[i]);if(a)return a}return ot(n.length,r.length)}function dp(t){return bI(t)}function bI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=El(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Tl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=bI(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${bI(n.fields[s])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function Yx(t){switch(Jc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=CS(t);return e?16+Yx(e):16;case 5:return 2*t.stringValue.length;case 6:return Tl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Yx(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return pu(r.fields,((a,s)=>{i+=a.length+Yx(s)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function Dv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xI(t){return!!t&&"integerValue"in t}function Ov(t){return!!t&&"arrayValue"in t}function h3(t){return!!t&&"nullValue"in t}function p3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xx(t){return!!t&&"mapValue"in t}function IS(t){return(t?.mapValue?.fields||{})[vD]?.stringValue===yD}function rv(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return pu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=rv(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rv(t.arrayValue.values[n]);return e}return{...t}}function Zq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Qq}const Jq={mapValue:{fields:{[vD]:{stringValue:yD},[up]:{arrayValue:{}}}}};function pde(t){return"nullValue"in t?Wx:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Dv(Vd.empty(),Le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?IS(t)?Jq:{mapValue:{}}:Fe(35942,{value:t})}function gde(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Dv(Vd.empty(),Le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Jq:"mapValue"in t?IS(t)?{mapValue:{}}:zc:Fe(61959,{value:t})}function g3(t,e){const n=eu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function m3(t,e){const n=eu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rv(n)}setAll(e){let n=Nn.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=rv(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Xx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return To(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pu(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ui(rv(this.value))}}function eG(t){const e=[];return pu(t.fields,((n,r)=>{const i=new Nn([n]);if(Xx(r)){const a=eG(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Fi(e)}class Un{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Un(e,0,et.min(),et.min(),et.min(),ui.empty(),0)}static newFoundDocument(e,n,r,i){return new Un(e,1,n,et.min(),r,i,0)}static newNoDocument(e,n){return new Un(e,2,n,et.min(),et.min(),ui.empty(),0)}static newUnknownDocument(e,n){return new Un(e,3,n,et.min(),et.min(),ui.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fp{constructor(e,n){this.position=e,this.inclusive=n}}function v3(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Le.comparator(Le.fromName(s.referenceValue),n.key):r=eu(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function y3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!To(t.position[n],e.position[n]))return!1;return!0}class Rv{constructor(e,n="asc"){this.field=e,this.dir=n}}function mde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class tG{}class Ct extends tG{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vde(e,n,r):n==="array-contains"?new xde(e,r):n==="in"?new oG(e,r):n==="not-in"?new wde(e,r):n==="array-contains-any"?new Sde(e,r):new Ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yde(e,r):new bde(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(eu(n,this.value)):n!==null&&Jc(this.value)===Jc(n)&&this.matchesComparison(eu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends tG{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kt(e,n)}matches(e){return hp(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hp(t){return t.op==="and"}function wI(t){return t.op==="or"}function bD(t){return nG(t)&&hp(t)}function nG(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function SI(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+dp(t.value);if(bD(t))return t.filters.map((e=>SI(e))).join(",");{const e=t.filters.map((n=>SI(n))).join(",");return`${t.op}(${e})`}}function rG(t,e){return t instanceof Ct?(function(r,i){return i instanceof Ct&&r.op===i.op&&r.field.isEqual(i.field)&&To(r.value,i.value)})(t,e):t instanceof Kt?(function(r,i){return i instanceof Kt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&rG(s,i.filters[o])),!0):!1})(t,e):void Fe(19439)}function iG(t,e){const n=t.filters.concat(e);return Kt.create(n,t.op)}function aG(t){return t instanceof Ct?(function(n){return`${n.field.canonicalString()} ${n.op} ${dp(n.value)}`})(t):t instanceof Kt?(function(n){return n.op.toString()+" {"+n.getFilters().map(aG).join(" ,")+"}"})(t):"Filter"}class vde extends Ct{constructor(e,n,r){super(e,n,r),this.key=Le.fromName(r.referenceValue)}matches(e){const n=Le.comparator(e.key,this.key);return this.matchesComparison(n)}}class yde extends Ct{constructor(e,n){super(e,"in",n),this.keys=sG("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class bde extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=sG("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function sG(t,e){return(e.arrayValue?.values||[]).map((n=>Le.fromName(n.referenceValue)))}class xde extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ov(n)&&Nv(n.arrayValue,this.value)}}class oG extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nv(this.value.arrayValue,n)}}class wde extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nv(this.value.arrayValue,n)}}class Sde extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ov(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Nv(this.value.arrayValue,r)))}}class _de{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function _I(t,e=null,n=[],r=[],i=null,a=null,s=null){return new _de(t,e,n,r,i,a,s)}function Bd(t){const e=Ke(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>SI(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ES(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>dp(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>dp(r))).join(",")),e.Te=n}return e.Te}function T0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rG(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y3(t.startAt,e.startAt)&&y3(t.endAt,e.endAt)}function Rw(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Mw(t,e){return t.filters.filter((n=>n instanceof Ct&&n.field.isEqual(e)))}function b3(t,e,n){let r=Wx,i=!0;for(const a of Mw(t,e)){let s=Wx,o=!0;switch(a.op){case"<":case"<=":s=pde(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=Wx}g3({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];g3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function x3(t,e,n){let r=zc,i=!0;for(const a of Mw(t,e)){let s=zc,o=!0;switch(a.op){case">=":case">":s=gde(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=zc}m3({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];m3({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class $p{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function lG(t,e,n,r,i,a,s,o){return new $p(t,e,n,r,i,a,s,o)}function A0(t){return new $p(t)}function w3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ede(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function cG(t){return t.collectionGroup!==null}function iv(t){const e=Ke(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Wt(Nn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Rv(a,r))})),n.has(Nn.keyField().canonicalString())||e.Ie.push(new Rv(Nn.keyField(),r))}return e.Ie}function ma(t){const e=Ke(t);return e.Ee||(e.Ee=Tde(e,iv(t))),e.Ee}function Tde(t,e){if(t.limitType==="F")return _I(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Rv(i.field,a)}));const n=t.endAt?new fp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fp(t.startAt.position,t.startAt.inclusive):null;return _I(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function EI(t,e){const n=t.filters.concat([e]);return new $p(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ade(t,e){const n=t.explicitOrderBy.concat([e]);return new $p(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function jw(t,e,n){return new $p(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function PS(t,e){return T0(ma(t),ma(e))&&t.limitType===e.limitType}function uG(t){return`${Bd(ma(t))}|lt:${t.limitType}`}function xh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>aG(i))).join(", ")}]`),ES(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>dp(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>dp(i))).join(",")),`Target(${r})`})(ma(t))}; limitType=${t.limitType})`}function k0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of iv(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=v3(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,iv(r),i)||r.endAt&&!(function(s,o,c){const u=v3(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,iv(r),i))})(t,e)}function dG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fG(t){return(e,n)=>{let r=!1;for(const i of iv(t)){const a=kde(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function kde(t,e,n){const r=t.field.isKeyField()?Le.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?eu(c,u):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}class zl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pu(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Gq(this.inner)}size(){return this.innerSize}}const Cde=new un(Le.comparator);function pa(){return Cde}const hG=new un(Le.comparator);function Vm(...t){let e=hG;for(const n of t)e=e.insert(n.key,n);return e}function pG(t){let e=hG;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ho(){return av()}function gG(){return av()}function av(){return new zl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ide=new un(Le.comparator),Pde=new Wt(Le.comparator);function vt(...t){let e=Pde;for(const n of t)e=e.add(n);return e}const Nde=new Wt(ot);function xD(){return Nde}function wD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Av(e)?"-0":e}}function mG(t){return{integerValue:""+t}}function Dde(t,e){return Rq(e)?mG(e):wD(t,e)}class NS{constructor(){this._=void 0}}function Ode(t,e,n){return t instanceof Mv?(function(i,a){const s={fields:{[Wq]:{stringValue:Kq},[Xq]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&mD(a)&&(a=CS(a)),a&&(s.fields[Yq]=a),{mapValue:s}})(n,e):t instanceof Fd?yG(t,e):t instanceof pp?bG(t,e):(function(i,a){const s=vG(i,a),o=S3(s)+S3(i.Ae);return xI(s)&&xI(i.Ae)?mG(o):wD(i.serializer,o)})(t,e)}function Rde(t,e,n){return t instanceof Fd?yG(t,e):t instanceof pp?bG(t,e):n}function vG(t,e){return t instanceof jv?(function(r){return xI(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Mv extends NS{}class Fd extends NS{constructor(e){super(),this.elements=e}}function yG(t,e){const n=xG(e);for(const r of t.elements)n.some((i=>To(i,r)))||n.push(r);return{arrayValue:{values:n}}}class pp extends NS{constructor(e){super(),this.elements=e}}function bG(t,e){let n=xG(e);for(const r of t.elements)n=n.filter((i=>!To(i,r)));return{arrayValue:{values:n}}}class jv extends NS{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function S3(t){return En(t.integerValue||t.doubleValue)}function xG(t){return Ov(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class wG{constructor(e,n){this.field=e,this.transform=n}}function Mde(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Fd&&i instanceof Fd||r instanceof pp&&i instanceof pp?ip(r.elements,i.elements,To):r instanceof jv&&i instanceof jv?To(r.Ae,i.Ae):r instanceof Mv&&i instanceof Mv})(t.transform,e.transform)}class jde{constructor(e,n){this.version=e,this.transformResults=n}}class Sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class DS{}function SG(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new C0(t.key,Sr.none()):new qp(t.key,t.data,Sr.none());{const n=t.data,r=ui.empty();let i=new Wt(Nn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Ll(t.key,r,new Fi(i.toArray()),Sr.none())}}function zde(t,e,n){t instanceof qp?(function(i,a,s){const o=i.value.clone(),c=E3(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Ll?(function(i,a,s){if(!Qx(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=E3(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(_G(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function sv(t,e,n,r){return t instanceof qp?(function(a,s,o,c){if(!Qx(a.precondition,s))return o;const u=a.value.clone(),f=T3(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ll?(function(a,s,o,c){if(!Qx(a.precondition,s))return o;const u=T3(a.fieldTransforms,c,s),f=s.data;return f.setAll(_G(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return Qx(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function Lde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=vG(r.transform,i||null);a!=null&&(n===null&&(n=ui.empty()),n.set(r.field,a))}return n||null}function _3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ip(r,i,((a,s)=>Mde(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qp extends DS{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ll extends DS{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function _G(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function E3(t,e,n){const r=new Map;Xe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Rde(s,o,n[i]))}return r}function T3(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Ode(a,s,e))}return r}class C0 extends DS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EG extends DS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&zde(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gG();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=SG(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(et.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),vt())}isEqual(e){return this.batchId===e.batchId&&ip(this.mutations,e.mutations,((n,r)=>_3(n,r)))&&ip(this.baseMutations,e.baseMutations,((n,r)=>_3(n,r)))}}class _D{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Ide})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new _D(e,n,r,i)}}class ED{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Vde{constructor(e,n){this.count=e,this.unchangedNames=n}}var sr,Pt;function Bde(t){switch(t){case Ee.OK:return Fe(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function TG(t){if(t===void 0)return Yn("GRPC error has no .code"),Ee.UNKNOWN;switch(t){case sr.OK:return Ee.OK;case sr.CANCELLED:return Ee.CANCELLED;case sr.UNKNOWN:return Ee.UNKNOWN;case sr.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case sr.INTERNAL:return Ee.INTERNAL;case sr.UNAVAILABLE:return Ee.UNAVAILABLE;case sr.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case sr.NOT_FOUND:return Ee.NOT_FOUND;case sr.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case sr.ABORTED:return Ee.ABORTED;case sr.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case sr.DATA_LOSS:return Ee.DATA_LOSS;default:return Fe(39323,{code:t})}}(Pt=sr||(sr={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";function Fde(){return new TextEncoder}const Ude=new Hc([4294967295,4294967295],0);function A3(t){const e=Fde().encode(t),n=new bq;return n.update(e),new Uint8Array(n.digest())}function k3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Hc([n,r],0),new Hc([i,a],0)]}class TD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bm(`Invalid padding: ${n}`);if(r<0)throw new Bm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bm(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Hc.fromNumber(r)));return i.compare(Ude)===1&&(i=new Hc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=A3(e),[r,i]=k3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new TD(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=A3(e),[r,i]=k3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.be(s)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class I0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,P0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new I0(et.min(),i,new un(ot),pa(),vt())}}class P0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new P0(r,n,vt(),vt(),vt())}}class Zx{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class AG{constructor(e,n){this.targetId=e,this.Ce=n}}class kG{constructor(e,n,r=Xn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class C3{constructor(){this.ve=0,this.Fe=I3(),this.Me=Xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=vt(),n=vt(),r=vt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:a})}})),new P0(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=I3()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class $de{constructor(e){this.Ge=e,this.ze=new Map,this.je=pa(),this.He=$b(),this.Je=$b(),this.Ze=new un(ot)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Rw(a))if(r===0){const s=new Le(a.path);this.et(n,s,Un.newNoDocument(s,et.min()))}else Xe(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Tl(r).toUint8Array()}catch(c){if(c instanceof Hq)return rp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new TD(s,i,a)}catch(c){return rp(c instanceof Bm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&Rw(o.target)){const c=new Le(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Un.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.Ke())}}));let r=vt();this.Je.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new I0(e,n,this.Ze,this.je,r);return this.je=pa(),this.He=$b(),this.Je=$b(),this.Ze=new un(ot),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new C3,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Wt(ot),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Wt(ot),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new C3),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $b(){return new un(Le.comparator)}function I3(){return new un(Le.comparator)}const qde={asc:"ASCENDING",desc:"DESCENDING"},Gde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hde={and:"AND",or:"OR"};class Kde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function TI(t,e){return t.useProto3Json||ES(e)?e:{value:e}}function gp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CG(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wde(t,e){return gp(t,e.toTimestamp())}function ki(t){return Xe(!!t,49232),et.fromTimestamp((function(n){const r=El(n);return new gt(r.seconds,r.nanos)})(t))}function AD(t,e){return AI(t,e).canonicalString()}function AI(t,e){const n=(function(i){return new Lt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function IG(t){const e=Lt.fromString(t);return Xe(LG(e),10190,{key:e.toString()}),e}function zw(t,e){return AD(t.databaseId,e.path)}function Id(t,e){const n=IG(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Le(DG(n))}function PG(t,e){return AD(t.databaseId,e)}function NG(t){const e=IG(t);return e.length===4?Lt.emptyPath():DG(e)}function kI(t){return new Lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DG(t){return Xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function P3(t,e,n){return{name:zw(t,e),fields:n.value.mapValue.fields}}function Yde(t,e,n){const r=Id(t,e.name),i=ki(e.updateTime),a=e.createTime?ki(e.createTime):et.min(),s=new ui({mapValue:{fields:e.fields}}),o=Un.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Xde(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(Xe(f===void 0||typeof f=="string",58123),Xn.fromBase64String(f||"")):(Xe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Xn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?Ee.UNKNOWN:TG(u.code);return new Me(f,u.message||"")})(s);n=new kG(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Id(t,r.document.name),a=ki(r.document.updateTime),s=r.document.createTime?ki(r.document.createTime):et.min(),o=new ui({mapValue:{fields:r.document.fields}}),c=Un.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Zx(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Id(t,r.document),a=r.readTime?ki(r.readTime):et.min(),s=Un.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Zx([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Id(t,r.document),a=r.removedTargetIds||[];n=new Zx([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Vde(i,a),o=r.targetId;n=new AG(o,s)}}return n}function Lw(t,e){let n;if(e instanceof qp)n={update:P3(t,e.key,e.value)};else if(e instanceof C0)n={delete:zw(t,e.key)};else if(e instanceof Ll)n={update:P3(t,e.key,e.data),updateMask:nfe(e.fieldMask)};else{if(!(e instanceof EG))return Fe(16599,{dt:e.type});n={verify:zw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof Mv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Fd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof pp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof jv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Fe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Wde(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),n}function CI(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?Sr.updateTime(ki(a.updateTime)):a.exists!==void 0?Sr.exists(a.exists):Sr.none()})(e.currentDocument):Sr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)Xe(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new Mv;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Fd(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new pp(f)}else"increment"in o?c=new jv(s,o.increment):Fe(16584,{proto:o});const u=Nn.fromServerFormat(o.fieldPath);return new wG(u,c)})(t,i))):[];if(e.update){e.update.name;const i=Id(t,e.update.name),a=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new Fi(u.map((f=>Nn.fromServerFormat(f))))})(e.updateMask);return new Ll(i,a,s,n,r)}return new qp(i,a,n,r)}if(e.delete){const i=Id(t,e.delete);return new C0(i,n)}if(e.verify){const i=Id(t,e.verify);return new EG(i,n)}return Fe(1463,{proto:e})}function Qde(t,e){return t&&t.length>0?(Xe(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?ki(i.updateTime):ki(a);return s.isEqual(et.min())&&(s=ki(a)),new jde(s,i.transformResults||[])})(n,e)))):[]}function OG(t,e){return{documents:[PG(t,e.path)]}}function RG(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PG(t,i);const a=(function(u){if(u.length!==0)return zG(Kt.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:wh(g.field),direction:Jde(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=TI(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function MG(t){let e=NG(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xe(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=jG(h);return g instanceof Kt&&bD(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new Rv(Sh(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,ES(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,v=h.values||[];return new fp(v,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,v=h.values||[];return new fp(v,g)})(n.endAt)),lG(e,i,s,a,o,"F",c,u)}function Zde(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jG(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Sh(n.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Sh(n.unaryFilter.field);return Ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sh(n.unaryFilter.field);return Ct.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Sh(n.unaryFilter.field);return Ct.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ct.create(Sh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Kt.create(n.compositeFilter.filters.map((r=>jG(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function Jde(t){return qde[t]}function efe(t){return Gde[t]}function tfe(t){return Hde[t]}function wh(t){return{fieldPath:t.canonicalString()}}function Sh(t){return Nn.fromServerFormat(t.fieldPath)}function zG(t){return t instanceof Ct?(function(n){if(n.op==="=="){if(p3(n.value))return{unaryFilter:{field:wh(n.field),op:"IS_NAN"}};if(h3(n.value))return{unaryFilter:{field:wh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p3(n.value))return{unaryFilter:{field:wh(n.field),op:"IS_NOT_NAN"}};if(h3(n.value))return{unaryFilter:{field:wh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wh(n.field),op:efe(n.op),value:n.value}}})(t):t instanceof Kt?(function(n){const r=n.getFilters().map((i=>zG(i)));return r.length===1?r[0]:{compositeFilter:{op:tfe(n.op),filters:r}}})(t):Fe(54877,{filter:t})}function nfe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LG(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function VG(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class ll{constructor(e,n,r,i,a=et.min(),s=et.min(),o=Xn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new ll(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class BG{constructor(e){this.yt=e}}function rfe(t,e){let n;if(e.document)n=Yde(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Le.fromSegments(e.noDocument.path),i=$d(e.noDocument.readTime);n=Un.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=Le.fromSegments(e.unknownDocument.path),i=$d(e.unknownDocument.version);n=Un.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new gt(i[0],i[1]);return et.fromTimestamp(a)})(e.readTime)),n}function N3(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:zw(a,s.key),fields:s.data.value.mapValue.fields,updateTime:gp(a,s.version.toTimestamp()),createTime:gp(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ud(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ud(e.version)}}return r}function Vw(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ud(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $d(t){const e=new gt(t.seconds,t.nanoseconds);return et.fromTimestamp(e)}function ud(t,e){const n=(e.baseMutations||[]).map((a=>CI(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>CI(t.yt,a))),i=gt.fromMillis(e.localWriteTimeMs);return new SD(e.batchId,i,n,r)}function Fm(t){const e=$d(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$d(t.lastLimboFreeSnapshotVersion):et.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return Xe(s===1,1966,{count:s}),ma(A0(NG(a.documents[0])))})(t.query):(function(a){return ma(MG(a))})(t.query),new ll(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xn.fromBase64String(t.resumeToken))}function FG(t,e){const n=Ud(e.snapshotVersion),r=Ud(e.lastLimboFreeSnapshotVersion);let i;i=Rw(e.target)?OG(t.yt,e.target):RG(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bd(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function UG(t){const e=MG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jw(e,e.limit,"L"):e}function _A(t,e){return new ED(e.largestBatchId,CI(t.yt,e.overlayMutation))}function D3(t,e){const n=e.path.lastSegment();return[t,fi(e.path.popLast()),n]}function O3(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ud(r.readTime),documentKey:fi(r.documentKey.path),largestBatchId:r.largestBatchId}}class ife{getBundleMetadata(e,n){return R3(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:$d(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return R3(e).put((function(i){return{bundleId:i.id,createTime:Ud(ki(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return M3(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:UG(a.bundledQuery),readTime:$d(a.readTime)}})(r)}))}saveNamedQuery(e,n){return M3(e).put((function(i){return{name:i.name,readTime:Ud(ki(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function R3(t){return Tr(t,TS)}function M3(t){return Tr(t,AS)}class OS{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new OS(e,r)}getOverlay(e,n){return mm(e).get(D3(this.userId,n)).next((r=>r?_A(this.serializer,r):null))}getOverlays(e,n){const r=ho();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new ED(n,s);i.push(this.bt(e,o))})),fe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(fi(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(mm(e).X(vI,o))})),fe.waitFor(a)}getOverlaysForCollection(e,n,r){const i=ho(),a=fi(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return mm(e).H(vI,s).next((o=>{for(const c of o){const u=_A(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=ho();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return mm(e).ee({index:Bq,range:o},((c,u,f)=>{const h=_A(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}bt(e,n){return mm(e).put((function(i,a,s){const[o,c,u]=D3(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Lw(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function mm(t){return Tr(t,kS)}class afe{St(e){return Tr(e,pD)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?Xn.fromUint8Array(r):Xn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class dd{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(En(e.integerValue));else if("doubleValue"in e){const r=En(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Av(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=El(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Tl(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Zq(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):IS(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):Fe(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=up,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(En(a)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Le.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}dd.Wt=new dd;const sh=255;function sfe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function j3(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=sfe(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class ofe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=n.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const n=this.en(e),r=j3(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=j3(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(sh),this.sn(255)}_n(){this.an(sh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===sh?(this.sn(sh),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===sh?(this.an(sh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lfe{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class cfe{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class vm{constructor(){this.cn=new ofe,this.ascending=new lfe(this.cn),this.descending=new cfe(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class fd{constructor(e,n,r,i){this.hn=e,this.Pn=n,this.Tn=r,this.In=i}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new fd(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:Jx(this.Tn),directionalValue:Jx(this.In),orderedDocumentKey:Jx(n),documentKey:r.path.toArray()}}An(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Ec(t,e){let n=t.hn-e.hn;return n!==0?n:(n=z3(t.Tn,e.Tn),n!==0?n:(n=z3(t.In,e.In),n!==0?n:Le.comparator(t.Pn,e.Pn)))}function z3(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Jx(t){return e8()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function L3(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class V3{constructor(e){this.Vn=new Wt(((n,r)=>Nn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Xe(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=pI(e);if(n!==void 0&&!this.pn(n))return!1;const r=nd(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.pn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const o=this.Vn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.yn(o,c)||!this.wn(this.dn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.dn.length||!this.wn(this.dn[s++],o))return!1}return!0}bn(){if(this.fn)return null;let e=new Wt(Nn.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Gx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Gx(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Gx(r.field,r.dir==="asc"?0:1)));return new Iw(Iw.UNKNOWN_ID,this.collectionId,n,Tv.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function $G(t){if(Xe(t instanceof Ct||t instanceof Kt,20012),t instanceof Ct){if(t instanceof oG){const n=t.value.arrayValue?.values?.map((r=>Ct.create(t.field,"==",r)))||[];return Kt.create(n,"or")}return t}const e=t.filters.map((n=>$G(n)));return Kt.create(e,t.op)}function ufe(t){if(t.getFilters().length===0)return[];const e=NI($G(t));return Xe(qG(e),7391),II(e)||PI(e)?[e]:e.getFilters()}function II(t){return t instanceof Ct}function PI(t){return t instanceof Kt&&bD(t)}function qG(t){return II(t)||PI(t)||(function(n){if(n instanceof Kt&&wI(n)){for(const r of n.getFilters())if(!II(r)&&!PI(r))return!1;return!0}return!1})(t)}function NI(t){if(Xe(t instanceof Ct||t instanceof Kt,34018),t instanceof Ct)return t;if(t.filters.length===1)return NI(t.filters[0]);const e=t.filters.map((r=>NI(r)));let n=Kt.create(e,t.op);return n=Bw(n),qG(n)?n:(Xe(n instanceof Kt,64498),Xe(hp(n),40251),Xe(n.filters.length>1,57927),n.filters.reduce(((r,i)=>kD(r,i))))}function kD(t,e){let n;return Xe(t instanceof Ct||t instanceof Kt,38388),Xe(e instanceof Ct||e instanceof Kt,25473),n=t instanceof Ct?e instanceof Ct?(function(i,a){return Kt.create([i,a],"and")})(t,e):B3(t,e):e instanceof Ct?B3(e,t):(function(i,a){if(Xe(i.filters.length>0&&a.filters.length>0,48005),hp(i)&&hp(a))return iG(i,a.getFilters());const s=wI(i)?i:a,o=wI(i)?a:i,c=s.filters.map((u=>kD(u,o)));return Kt.create(c,"or")})(t,e),Bw(n)}function B3(t,e){if(hp(e))return iG(e,t.getFilters());{const n=e.filters.map((r=>kD(t,r)));return Kt.create(n,"or")}}function Bw(t){if(Xe(t instanceof Ct||t instanceof Kt,11850),t instanceof Ct)return t;const e=t.getFilters();if(e.length===1)return Bw(e[0]);if(nG(t))return t;const n=e.map((i=>Bw(i))),r=[];return n.forEach((i=>{i instanceof Ct?r.push(i):i instanceof Kt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Kt.create(r,t.op)}class dfe{constructor(){this.Sn=new CD}addToCollectionParentIndex(e,n){return this.Sn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(ya.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(ya.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class CD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Wt(Lt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wt(Lt.comparator)).toArray()}}const F3="IndexedDbIndexManager",qb=new Uint8Array(0);class ffe{constructor(e,n){this.databaseId=n,this.Dn=new CD,this.Cn=new zl((r=>Bd(r)),((r,i)=>T0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const a={collectionId:r,parent:fi(i)};return U3(e).put(a)}return fe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Aq(n),""],!1,!0);return U3(e).H(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(fo(s.parent))}return r}))}addFieldIndex(e,n){const r=ym(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=lh(e);return a.next((o=>{s.put(O3(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=ym(e),i=lh(e),a=oh(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=ym(e),r=oh(e),i=lh(e);return n.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,n){return fe.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new V3(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=oh(e);let i=!0;const a=new Map;return fe.forEach(this.vn(n),(s=>this.Fn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=vt();const o=[];return fe.forEach(a,((c,u)=>{Ne(F3,`Using index ${(function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map((D=>`${D.fieldPath}:${D.kind}`)).join(",")}`})(c)} to execute ${Bd(n)}`);const f=(function(P,D){const O=pI(D);if(O===void 0)return null;for(const N of Mw(P,O.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null})(u,c),h=(function(P,D){const O=new Map;for(const N of nd(D))for(const C of Mw(P,N.fieldPath))switch(C.op){case"==":case"in":O.set(N.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return O.set(N.fieldPath.canonicalString(),C.value),Array.from(O.values())}return null})(u,c),g=(function(P,D){const O=[];let N=!0;for(const C of nd(D)){const I=C.kind===0?b3(P,C.fieldPath,P.startAt):x3(P,C.fieldPath,P.startAt);O.push(I.value),N&&(N=I.inclusive)}return new fp(O,N)})(u,c),v=(function(P,D){const O=[];let N=!0;for(const C of nd(D)){const I=C.kind===0?x3(P,C.fieldPath,P.endAt):b3(P,C.fieldPath,P.endAt);O.push(I.value),N&&(N=I.inclusive)}return new fp(O,N)})(u,c),b=this.Mn(c,u,g),x=this.Mn(c,u,v),w=this.xn(c,u,h),S=this.On(c.indexId,f,b,g.inclusive,x,v.inclusive,w);return fe.forEach(S,(T=>r.Z(T,n.limit).next((P=>{P.forEach((D=>{const O=Le.fromSegments(D.documentKey);s.has(O)||(s=s.add(O),o.push(O))}))}))))})).next((()=>o))}return fe.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=ufe(Kt.create(e.filters,"and")).map((r=>_I(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Nn(n[h/u]):qb,v=this.Bn(e,g,r[h%u],i),b=this.Ln(e,g,a[h%u],s),x=o.map((w=>this.Bn(e,g,w,!0)));f.push(...this.createRange(v,b,x))}return f}Bn(e,n,r,i){const a=new fd(e,Le.empty(),n,r);return i?a:a.En()}Ln(e,n,r,i){const a=new fd(e,Le.empty(),n,r);return i?a.En():a}Fn(e,n){const r=new V3(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.gn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.vn(n);return fe.forEach(i,(a=>this.Fn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Wt(Nn.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}kn(e,n){const r=new vm;for(const i of nd(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.ln(i.kind);dd.Wt.Dt(a,s)}return r.un()}Nn(e){const n=new vm;return dd.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new vm;return dd.Wt.Dt(Dv(this.databaseId,n),r.ln((function(a){const s=nd(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let i=[];i.push(new vm);let a=0;for(const s of nd(e)){const o=r[a++];for(const c of i)if(this.qn(n,s.fieldPath)&&Ov(o))i=this.Un(i,s,o);else{const u=c.ln(s.kind);dd.Wt.Dt(o,u)}}return this.$n(i)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new vm;c.seed(o.un()),dd.Wt.Dt(s,c.ln(n.kind)),a.push(c)}return a}qn(e,n){return!!e.filters.find((r=>r instanceof Ct&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=ym(e),i=lh(e);return(n?r.H(mI,IDBKeyRange.bound(n,n)):r.H()).next((a=>{const s=[];return fe.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new Tv(h.sequenceNumber,new ya($d(h.readTime),new Le(fo(h.documentKey)),h.largestBatchId)):Tv.empty(),v=f.fields.map((([b,x])=>new Gx(Nn.fromServerFormat(b),x)));return new Iw(f.indexId,f.collectionGroup,v,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:ot(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=ym(e),a=lh(e);return this.Wn(e).next((s=>i.H(mI,IDBKeyRange.bound(n,n)).next((o=>fe.forEach(o,(c=>a.put(O3(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return fe.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?fe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),fe.forEach(o,(c=>this.Qn(e,i,c).next((u=>{const f=this.Gn(a,c);return u.isEqual(f)?fe.resolve():this.zn(e,a,c,u,f)})))))))}))}jn(e,n,r,i){return oh(e).put(i.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,i){return oh(e).delete(i.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const i=oh(e);let a=new Wt(Ec);return i.ee({index:Vq,range:IDBKeyRange.only([r.indexId,this.uid,Jx(this.Kn(r,n))])},((s,o)=>{a=a.add(new fd(r.indexId,n,L3(o.arrayValue),L3(o.directionalValue)))})).next((()=>a))}Gn(e,n){let r=new Wt(Ec);const i=this.kn(n,e);if(i==null)return r;const a=pI(n);if(a!=null){const s=e.data.field(a.fieldPath);if(Ov(s))for(const o of s.arrayValue.values||[])r=r.add(new fd(n.indexId,e.key,this.Nn(o),i))}else r=r.add(new fd(n.indexId,e.key,qb,i));return r}zn(e,n,r,i,a){Ne(F3,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const v=c.getIterator(),b=u.getIterator();let x=ah(v),w=ah(b);for(;x||w;){let S=!1,T=!1;if(x&&w){const P=f(x,w);P<0?T=!0:P>0&&(S=!0)}else x!=null?T=!0:S=!0;S?(h(w),w=ah(b)):T?(g(x),x=ah(v)):(x=ah(v),w=ah(b))}})(i,a,Ec,(o=>{s.push(this.jn(e,n,r,o))}),(o=>{s.push(this.Hn(e,n,r,o))})),fe.waitFor(s)}Wn(e){let n=1;return lh(e).ee({index:Lq,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>Ec(s,o))).filter(((s,o,c)=>!o||Ec(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=Ec(s,e),c=Ec(s,n);if(o===0)i[0]=e.En();else if(o>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Jn(i[s],i[s+1]))return[];const o=i[s].An(this.uid,qb,Le.empty()),c=i[s+1].An(this.uid,qb,Le.empty());a.push(IDBKeyRange.bound(o,c))}return a}Jn(e,n){return Ec(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($3)}getMinOffset(e,n){return fe.mapArray(this.vn(n),(r=>this.Fn(e,r).next((i=>i||Fe(44426))))).next($3)}}function U3(t){return Tr(t,Iv)}function oh(t){return Tr(t,nv)}function ym(t){return Tr(t,hD)}function lh(t){return Tr(t,tv)}function $3(t){Xe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;uD(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ya(e.readTime,e.documentKey,n)}const q3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GG=41943040;class li{static withCacheSize(e){return new li(e,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function HG(t,e,n){const r=t.store(ps),i=t.store(sp),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{Xe(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=Mq(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return fe.waitFor(a).next((()=>u))}function Fw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fe(14731);e=t.noDocument}return JSON.stringify(e).length}li.DEFAULT_COLLECTION_PERCENTILE=10,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,li.DEFAULT=new li(GG,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),li.DISABLED=new li(-1,0,0);class RS{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,n,r,i){Xe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new RS(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tc(e).ee({index:yd,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=_h(e),s=Tc(e);return s.add({}).next((o=>{Xe(typeof o=="number",49019);const c=new SD(o,n,r,i),u=(function(v,b,x){const w=x.baseMutations.map((T=>Lw(v.yt,T))),S=x.mutations.map((T=>Lw(v.yt,T)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:S}})(this.serializer,this.userId,c),f=[];let h=new Wt(((g,v)=>ot(g.canonicalString(),v.canonicalString())));for(const g of i){const v=Mq(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(v,Fue))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Zn[o]=c.keys()})),fe.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return Tc(e).get(n).next((r=>r?(Xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ud(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?fe.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Tc(e).ee({index:yd,range:i},((s,o,c)=>{o.userId===this.userId&&(Xe(o.batchId>=r,47524,{Yn:r}),a=ud(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=kd;return Tc(e).ee({index:yd,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,kd],[this.userId,Number.POSITIVE_INFINITY]);return Tc(e).H(yd,n).next((r=>r.map((i=>ud(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Hx(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return _h(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=fo(f);if(u===this.userId&&n.path.isEqual(g))return Tc(e).get(h).next((v=>{if(!v)throw Fe(61480,{er:s,batchId:h});Xe(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:h}),a.push(ud(this.serializer,v))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Wt(ot);const i=[];return n.forEach((a=>{const s=Hx(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=_h(e).ee({range:o},((u,f,h)=>{const[g,v,b]=u,x=fo(v);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),fe.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Hx(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Wt(ot);return _h(e).ee({range:s},((c,u,f)=>{const[h,g,v]=c,b=fo(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(v)):f.done()})).next((()=>this.tr(e,o)))}tr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(Tc(e).get(a).next((s=>{if(s===null)throw Fe(35274,{batchId:a});Xe(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(ud(this.serializer,s))})))})),fe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return HG(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),fe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return fe.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return _h(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=fo(a[1]);i.push(c)}else o.done()})).next((()=>{Xe(i.length===0,56720,{rr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return KG(e,this.userId,n)}ir(e){return WG(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:kd,lastStreamToken:""}))}}function KG(t,e,n){const r=Hx(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return _h(t).ee({range:a,Y:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function Tc(t){return Tr(t,ps)}function _h(t){return Tr(t,sp)}function WG(t){return Tr(t,kv)}class qd{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new qd(0)}static ar(){return new qd(-1)}}class hfe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new qd(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>et.fromTimestamp(new gt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.cr(e,i))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>ch(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(Xe(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return ch(e).ee(((s,o)=>{const c=Fm(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>fe.waitFor(a))).next((()=>i))}forEachTarget(e,n){return ch(e).ee(((r,i)=>{const a=Fm(i);n(a)}))}ur(e){return G3(e).get(Dw).next((n=>(Xe(n!==null,2888),n)))}cr(e,n){return G3(e).put(Dw,n)}lr(e,n){return ch(e).put(FG(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Bd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ch(e).ee({range:i,index:zq},((s,o,c)=>{const u=Fm(o);T0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Mc(e);return n.forEach((s=>{const o=fi(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),fe.waitFor(i)}removeMatchingKeys(e,n,r){const i=Mc(e);return fe.forEach(n,(a=>{const s=fi(a.path);return fe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Mc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Mc(e);let a=vt();return i.ee({range:r,Y:!0},((s,o,c)=>{const u=fo(s[1]),f=new Le(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=fi(n.path),i=IDBKeyRange.bound([r],[Aq(r)],!1,!0);let a=0;return Mc(e).ee({index:fD,Y:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return ch(e).get(n).next((r=>r?Fm(r):null))}}function ch(t){return Tr(t,op)}function G3(t){return Tr(t,Cd)}function Mc(t){return Tr(t,lp)}const H3="LruGarbageCollector",YG=1048576;function K3([t,e],[n,r]){const i=ot(t,n);return i===0?ot(e,r):i}class pfe{constructor(e){this.Pr=e,this.buffer=new Wt(K3),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();K3(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ne(H3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hu(n)?Ne(H3,"Ignoring IndexedDB error during garbage collection: ",n):await fu(n)}await this.Ar(3e5)}))}}class gfe{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(Bi.ce);const r=new pfe(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(q3)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q3):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),bh()<=kt.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function QG(t,e){return new gfe(t,e)}class mfe{constructor(e,n){this.db=e,this.garbageCollector=QG(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,i)=>n(i)))}addReference(e,n,r){return Gb(e,r)}removeReference(e,n,r){return Gb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Gb(e,n)}wr(e,n){return(function(i,a){let s=!1;return WG(i).te((o=>KG(i,o,a).next((c=>(c&&(s=!0),fe.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.yr(e,((s,o)=>{if(o<=n){const c=this.wr(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,et.min()),Mc(e).delete((function(h){return[0,fi(h.path)]})(s)))))}));i.push(c)}})).next((()=>fe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Gb(e,n)}yr(e,n){const r=Mc(e);let i,a=Bi.ce;return r.ee({index:fD},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==Bi.ce&&n(new Le(fo(i)),a),a=u,i=c):a=Bi.ce})).next((()=>{a!==Bi.ce&&n(new Le(fo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gb(t,e){return Mc(t).put((function(r,i){return{targetId:0,path:fi(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class ZG{constructor(){this.changes=new zl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vfe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Xu(e).put(r)}removeEntry(e,n,r){return Xu(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Vw(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=Un.newInvalidDocument(n);return Xu(e).ee({index:Kx,range:IDBKeyRange.only(bm(n))},((i,a)=>{r=this.Sr(n,a)})).next((()=>r))}Dr(e,n){let r={size:0,document:Un.newInvalidDocument(n)};return Xu(e).ee({index:Kx,range:IDBKeyRange.only(bm(n))},((i,a)=>{r={document:this.Sr(n,a),size:Fw(a)}})).next((()=>r))}getEntries(e,n){let r=pa();return this.Cr(e,n,((i,a)=>{const s=this.Sr(i,a);r=r.insert(i,s)})).next((()=>r))}vr(e,n){let r=pa(),i=new un(Le.comparator);return this.Cr(e,n,((a,s)=>{const o=this.Sr(a,s);r=r.insert(a,o),i=i.insert(a,Fw(s))})).next((()=>({documents:r,Fr:i})))}Cr(e,n,r){if(n.isEmpty())return fe.resolve();let i=new Wt(X3);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(bm(i.first()),bm(i.last())),s=i.getIterator();let o=s.getNext();return Xu(e).ee({index:Kx,range:a},((c,u,f)=>{const h=Le.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&X3(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(bm(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Vw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xu(e).H(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=pa();for(const h of u){const g=this.Sr(Le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(k0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=pa();const s=Y3(n,r),o=Y3(n,ya.max());return Xu(e).ee({index:jq,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Sr(Le.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new yfe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return W3(e).get(gI).next((n=>(Xe(!!n,20021),n)))}br(e,n){return W3(e).put(gI,n)}Sr(e,n){if(n){const r=rfe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(et.min())))return r}return Un.newInvalidDocument(e)}}function JG(t){return new vfe(t)}class yfe extends ZG{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new zl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Wt(((a,s)=>ot(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Or.get(a);if(n.push(this.Mr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=N3(this.Mr.serializer,s);i=i.add(a.path.popLast());const u=Fw(c);r+=u-o.size,n.push(this.Mr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=N3(this.Mr.serializer,s.convertToNoDocument(et.min()));n.push(this.Mr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Mr.updateMetadata(e,r)),fe.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:i})=>(i.forEach(((a,s)=>{this.Or.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function W3(t){return Tr(t,Cv)}function Xu(t){return Tr(t,Nw)}function bm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y3(t,e){const n=e.documentKey.path.toArray();return[t,Vw(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function X3(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=ot(n[a],r[a]),i)return i;return i=ot(n.length,r.length),i||(i=ot(n[n.length-2],r[r.length-2]),i||ot(n[n.length-1],r[r.length-1]))}class bfe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class e7{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&sv(r.mutation,i,Fi.empty(),gt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,vt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=vt()){const i=ho();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=Vm();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=ho();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,vt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=pa();const s=av(),o=(function(){return av()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Ll)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),sv(f.mutation,u,f.mutation.getFieldMask(),gt.now())):s.set(u.key,Fi.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new bfe(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=av();let i=new un(((s,o)=>s-o)),a=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Fi.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||vt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=gG();f.forEach((g=>{if(!a.has(g)){const v=SG(n.get(g),r.get(g));v!==null&&h.set(g,v),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return fe.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return Ede(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):fe.resolve(ho());let o=ap,c=a;return s.next((u=>fe.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,vt()))).next((f=>({batchId:o,changes:pG(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Le(n)).next((r=>{let i=Vm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Vm();return this.indexManager.getCollectionParents(e,a).next((o=>fe.forEach(o,(c=>{const u=(function(h,g){return new $p(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,Un.newInvalidDocument(f)))}));let o=Vm();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&sv(f.mutation,u,Fi.empty(),gt.now()),k0(n,u)&&(o=o.insert(c,u))})),o}))}}class xfe{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return fe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:ki(i.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:UG(i.bundledQuery),readTime:ki(i.readTime)}})(n)),fe.resolve()}}class wfe{constructor(){this.overlays=new un(Le.comparator),this.Lr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ho();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),fe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const i=ho(),a=n.length+1,s=new Le(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new un(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=ho(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=ho(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return fe.resolve(o)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ED(n,r));let a=this.Lr.get(n);a===void 0&&(a=vt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class Sfe{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}class ID{constructor(){this.kr=new Wt(Mr.Kr),this.qr=new Wt(Mr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Mr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Mr(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Le(new Lt([])),r=new Mr(n,e),i=new Mr(n,e+1),a=[];return this.qr.forEachInRange([r,i],(s=>{this.Wr(s),a.push(s.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Le(new Lt([])),r=new Mr(n,e),i=new Mr(n,e+1);let a=vt();return this.qr.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Mr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Le.comparator(e.key,n.key)||ot(e.Hr,n.Hr)}static Ur(e,n){return ot(e.Hr,n.Hr)||Le.comparator(e.key,n.key)}}class _fe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Wt(Mr.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new SD(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Jr=this.Jr.add(new Mr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fe.resolve(s)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?kd:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mr(n,0),i=new Mr(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(s=>{const o=this.Zr(s.Hr);a.push(o)})),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Wt(ot);return n.forEach((i=>{const a=new Mr(i,0),s=new Mr(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,s],(o=>{r=r.add(o.Hr)}))})),fe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Le.isDocumentKey(a)||(a=a.child(""));const s=new Mr(new Le(a),0);let o=new Wt(ot);return this.Jr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Hr)),!0)}),s),fe.resolve(this.Yr(o))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Xe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return fe.forEach(n.mutations,(i=>{const a=new Mr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Mr(n,0),i=this.Jr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Efe{constructor(e){this.ti=e,this.docs=(function(){return new un(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(n))}getEntries(e,n){let r=pa();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Un.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=pa();const s=n.path,o=new Le(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||uD(Pq(f),r)<=0||(i.has(f.key)||k0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ni(e,n){return fe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Tfe(this)}getSize(e){return fe.resolve(this.size)}}class Tfe extends ZG{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),fe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class Afe{constructor(e){this.persistence=e,this.ri=new zl((n=>Bd(n)),T0),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.ii=0,this.si=new ID,this.targetCount=0,this.oi=qd._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),fe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new qd(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.lr(n),fe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.ri.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),fe.waitFor(a).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this.si.containsKey(n))}}class PD{constructor(e,n){this._i={},this.overlays={},this.ai=new Bi(0),this.ui=!1,this.ui=!0,this.ci=new Sfe,this.referenceDelegate=e(this),this.li=new Afe(this),this.indexManager=new dfe,this.remoteDocumentCache=(function(i){return new Efe(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new BG(n),this.Pi=new xfe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wfe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new _fe(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new kfe(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return fe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class kfe extends Dq{constructor(e){super(),this.currentSequenceNumber=e}}class MS{constructor(e){this.persistence=e,this.Ri=new ID,this.Ai=null}static Vi(e){return new MS(e)}get di(){if(this.Ai)return this.Ai;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(r=>{const i=Le.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,et.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Uw{constructor(e,n){this.persistence=e,this.fi=new zl((r=>fi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=QG(this,n)}static Vi(e,n){return new Uw(e,n)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return fe.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?fe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(s=>this.wr(e,s,n).next((o=>{o||(r++,a.removeEntry(s,et.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Yx(e.data.value)),n}wr(e,n,r){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Cfe{constructor(e){this.serializer=e}k(e,n,r,i){const a=new _S("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(E0)})(e),(function(c){c.createObjectStore(kv,{keyPath:Bue}),c.createObjectStore(ps,{keyPath:o3,autoIncrement:!0}).createIndex(yd,l3,{unique:!0}),c.createObjectStore(sp)})(e),Q3(e),(function(c){c.createObjectStore(rd)})(e));let s=fe.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(lp),c.deleteObjectStore(op),c.deleteObjectStore(Cd)})(e),Q3(e)),s=s.next((()=>(function(c){const u=c.store(Cd),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:et.min().toTimestamp(),targetCount:0};return u.put(Dw,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(ps).H().next((h=>{c.deleteObjectStore(ps),c.createObjectStore(ps,{keyPath:o3,autoIncrement:!0}).createIndex(yd,l3,{unique:!0});const g=u.store(ps),v=h.map((b=>g.put(b)));return fe.waitFor(v)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(cp,{keyPath:Yue})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.gi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(Cv)})(e),this.pi(a))))),r<7&&i>=7&&(s=s.next((()=>this.yi(a)))),r<8&&i>=8&&(s=s.next((()=>this.wi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.bi(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(TS,{keyPath:Xue})})(e),(function(c){c.createObjectStore(AS,{keyPath:Que})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(kS,{keyPath:ide});u.createIndex(vI,ade,{unique:!1}),u.createIndex(Bq,sde,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(Nw,{keyPath:Uue});u.createIndex(Kx,$ue),u.createIndex(jq,que)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(rd)))),r<14&&i>=14&&(s=s.next((()=>this.Di(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(hD,{keyPath:Zue,autoIncrement:!0}).createIndex(mI,Jue,{unique:!1}),c.createObjectStore(tv,{keyPath:ede}).createIndex(Lq,tde,{unique:!1}),c.createObjectStore(nv,{keyPath:nde}).createIndex(Vq,rde,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(tv).clear()})).next((()=>{n.objectStore(nv).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(pD,{keyPath:ode})})(e)}))),r<18&&i>=18&&e8()&&(s=s.next((()=>{n.objectStore(tv).clear()})).next((()=>{n.objectStore(nv).clear()}))),s}pi(e){let n=0;return e.store(rd).ee(((r,i)=>{n+=Fw(i)})).next((()=>{const r={byteSize:n};return e.store(Cv).put(gI,r)}))}gi(e){const n=e.store(kv),r=e.store(ps);return n.H().next((i=>fe.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,kd],[a.userId,a.lastAcknowledgedBatchId]);return r.H(yd,s).next((o=>fe.forEach(o,(c=>{Xe(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=ud(this.serializer,c);return HG(e,a.userId,u).next((()=>{}))}))))}))))}yi(e){const n=e.store(lp),r=e.store(rd);return e.store(Cd).get(Dw).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new Lt(s),u=(function(h){return[0,fi(h)]})(c);a.push(n.get(u).next((f=>f?fe.resolve():(h=>n.put({targetId:0,path:fi(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>fe.waitFor(a)))}))}wi(e,n){e.createObjectStore(Iv,{keyPath:Wue});const r=n.store(Iv),i=new CD,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:fi(c)})}};return n.store(rd).ee({Y:!0},((s,o)=>{const c=new Lt(s);return a(c.popLast())})).next((()=>n.store(sp).ee({Y:!0},(([s,o,c],u)=>{const f=fo(o);return a(f.popLast())}))))}bi(e){const n=e.store(op);return n.ee(((r,i)=>{const a=Fm(i),s=FG(this.serializer,a);return n.put(s)}))}Si(e,n){const r=n.store(rd),i=[];return r.ee(((a,s)=>{const o=n.store(Nw),c=(function(h){return h.document?new Le(Lt.fromString(h.document.name).popFirst(5)):h.noDocument?Le.fromSegments(h.noDocument.path):h.unknownDocument?Le.fromSegments(h.unknownDocument.path):Fe(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>fe.waitFor(i)))}Di(e,n){const r=n.store(ps),i=JG(this.serializer),a=new PD(MS.Vi,this.serializer.yt);return r.H().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??vt();ud(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),fe.forEach(o,((c,u)=>{const f=new oi(u),h=OS.wt(this.serializer,f),g=a.getIndexManager(f),v=RS.wt(f,this.serializer,g,a.referenceDelegate);return new e7(i,v,h,g).recalculateAndSaveOverlaysForDocumentKeys(new yI(n,Bi.ce),c).next()}))}))}}function Q3(t){t.createObjectStore(lp,{keyPath:Hue}).createIndex(fD,Kue,{unique:!0}),t.createObjectStore(op,{keyPath:"targetId"}).createIndex(zq,Gue,{unique:!0}),t.createObjectStore(Cd)}const Ac="IndexedDbPersistence",EA=18e5,TA=5e3,AA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ife="main";class ND{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=a,this.window=s,this.document=o,this.Fi=u,this.Mi=f,this.xi=h,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=g=>Promise.resolve(),!ND.v())throw new Me(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mfe(this,i),this.Ki=n+Ife,this.serializer=new BG(c),this.qi=new Kc(this.Ki,this.xi,new Cfe(this.serializer)),this.ci=new afe,this.li=new hfe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=JG(this.serializer),this.Pi=new ife,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,f===!1&&Yn(Ac,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(Ee.FAILED_PRECONDITION,AA);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Bi(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Hb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(hu(e))return Ne(Ac,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne(Ac,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return xm(e).get(ih).next((n=>fe.resolve(this.Xi(n))))}Yi(e){return Hb(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,EA)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Tr(n,cp);return r.H().next((i=>{const a=this.ns(i,EA),s=i.filter((o=>a.indexOf(o)===-1));return fe.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?fe.resolve(!0):xm(e).get(ih).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,TA)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new Me(Ee.FAILED_PRECONDITION,AA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hb(e).H().next((r=>this.ns(r,TA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Ne(Ac,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[E0,cp],(e=>{const n=new yI(e,Bi.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Hb(e).H().next((n=>this.ns(n,EA).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return RS.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ffe(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return OS.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ne(Ac,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?ude:c===17?qq:c===16?cde:c===15?gD:c===14?$q:c===13?Uq:c===12?lde:c===11?Fq:void Fe(60245)})(this.xi);let s;return this.qi.runTransaction(e,i,a,(o=>(s=new yI(o,this.ai?this.ai.next():Bi.ce),n==="readwrite-primary"?this.ji(s).next((c=>!!c||this.Hi(s))).next((c=>{if(!c)throw Yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Me(Ee.FAILED_PRECONDITION,Nq);return r(s)})).next((c=>this.Zi(s).next((()=>c)))):this.Ps(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Ps(e){return xm(e).get(ih).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,TA)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Me(Ee.FAILED_PRECONDITION,AA)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xm(e).put(ih,n)}static v(){return Kc.v()}Ji(e){const n=xm(e);return n.get(ih).next((r=>this.Xi(r)?(Ne(Ac,"Releasing primary lease."),n.delete(ih)):fe.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Yn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;J9()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return Ne(Ac,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Yn(Ac,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Yn("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xm(t){return Tr(t,E0)}function Hb(t){return Tr(t,cp)}function t7(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class DD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=vt(),i=vt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new DD(e,n.fromCache,r,i)}}class Pfe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class n7{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return J9()?8:Oq(Er())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Pfe;return this.ys(e,n,s).next((o=>{if(a.result=o,this.As)return this.ws(e,n,s,o.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(bh()<=kt.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",xh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(bh()<=kt.DEBUG&&Ne("QueryEngine","Query:",xh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(bh()<=kt.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",xh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ma(n))):fe.resolve())}gs(e,n){if(w3(n))return fe.resolve(null);let r=ma(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=jw(n,null,"F"),r=ma(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=vt(...a);return this.fs.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.bs(n,o);return this.Ss(n,u,s,c.readTime)?this.gs(e,jw(n,null,"F")):this.Ds(e,u,n,c)}))))})))))}ps(e,n,r,i){return w3(n)||i.isEqual(et.min())?fe.resolve(null):this.fs.getDocuments(e,r).next((a=>{const s=this.bs(n,a);return this.Ss(n,s,r,i)?fe.resolve(null):(bh()<=kt.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xh(n)),this.Ds(e,s,n,Iq(i,ap)).next((o=>o)))}))}bs(e,n){let r=new Wt(fG(e));return n.forEach(((i,a)=>{k0(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return bh()<=kt.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",xh(n)),this.fs.getDocumentsMatchingQuery(e,n,ya.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const OD="LocalStore",Nfe=3e8;class Dfe{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new un(ot),this.Fs=new zl((a=>Bd(a)),T0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e7(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function r7(t,e,n,r){return new Dfe(t,e,n,r)}async function i7(t,e){const n=Ke(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=vt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ns:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function Ofe(t,e){const n=Ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let v=fe.resolve();return g.forEach((b=>{v=v.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);Xe(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),v.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=vt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function a7(t){const e=Ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function Rfe(t,e){const n=Ke(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.li.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.li.addMatchingKeys(a,f.addedDocuments,h))));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(Xn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(h,v),(function(x,w,S){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Nfe?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,v,f)&&o.push(n.li.updateTargetData(a,v))}));let c=pa(),u=vt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(Mfe(a,s,e.documentUpdates).next((f=>{c=f.Bs,u=f.Ls}))),!r.isEqual(et.min())){const f=n.li.getLastRemoteSnapshotVersion(a).next((h=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return fe.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.vs=i,a)))}function Mfe(t,e,n){let r=vt(),i=vt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=pa();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(et.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ne(OD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{Bs:s,Ls:i}}))}function jfe(t,e){const n=Ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=kd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $w(t,e){const n=Ke(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,fe.resolve(i)):n.li.allocateTargetId(r).next((s=>(i=new ll(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function mp(t,e,n){const r=Ke(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!hu(s))throw s;Ne(OD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function DI(t,e,n){const r=Ke(t);let i=et.min(),a=vt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=Ke(c),g=h.Fs.get(f);return g!==void 0?fe.resolve(h.vs.get(g)):h.li.getTargetData(u,f)})(r,s,ma(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:et.min(),n?a:vt()))).next((o=>(l7(r,dG(e),o),{documents:o,ks:a})))))}function s7(t,e){const n=Ke(t),r=Ke(n.li),i=n.vs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function o7(t,e){const n=Ke(t),r=n.Ms.get(e)||et.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.xs.getAllFromCollectionGroup(i,e,Iq(r,ap),Number.MAX_SAFE_INTEGER))).then((i=>(l7(n,e,i),i)))}function l7(t,e,n){let r=t.Ms.get(e)||et.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}const c7="firestore_clients";function Z3(t,e){return`${c7}_${t}_${e}`}const u7="firestore_mutations";function J3(t,e,n){let r=`${u7}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const d7="firestore_targets";function kA(t,e){return`${d7}_${t}_${e}`}const uo="SharedClientState";class qw{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static $s(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Me(i.error.code,i.error.message))),s?new qw(e,n,i.state,a):(Yn(uo,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ov{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Me(r.error.code,r.error.message))),a?new ov(e,r.state,i):(Yn(uo,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gw{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=xD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Rq(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new Gw(e,a):(Yn(uo,`Failed to parse client data for instance '${e}': ${n}`),null)}}class RD{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new RD(n.clientId,n.onlineState):(Yn(uo,`Failed to parse online state: ${e}`),null)}}class OI{constructor(){this.activeTargetIds=xD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CA{constructor(e,n,r,i,a){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new un(ot),this.started=!1,this.Zs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=Z3(this.persistenceKey,this.zs),this.Ys=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new OI),this.eo=new RegExp(`^${c7}_${s}_([^_]*)$`),this.no=new RegExp(`^${u7}_${s}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${d7}_${s}_(\\d+)$`),this.io=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this.so=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const i=this.getItem(Z3(this.persistenceKey,r));if(i){const a=Gw.$s(r,i);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(kA(this.persistenceKey,e));if(i){const a=ov.$s(e,i);a&&(r=a.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.lo(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ne(uo,"READ",e,n),n}setItem(e,n){Ne(uo,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ne(uo,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(Ne(uo,"EVENT",n.key,n.newValue),n.key===this.Xs)return void Yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(a){let s=Bi.ce;if(a!=null)try{const o=JSON.parse(a);Xe(typeof o=="number",30636,{yo:a}),s=o}catch(o){Yn(uo,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==Bi.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.bo(i))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const i=new qw(this.currentUser,e,n,r),a=J3(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ws())}lo(e){const n=J3(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const i=kA(this.persistenceKey,e),a=new ov(e,n,r);this.setItem(i,a.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return Gw.$s(r,n)}Vo(e,n){const r=this.no.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return qw.$s(new oi(a),i,n)}fo(e,n){const r=this.ro.exec(e),i=Number(r[1]);return ov.$s(i,n)}_o(e){return RD.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);Ne(uo,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),i=this.uo(this.Js),a=this.uo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Co(s,o).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=xD();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class f7{constructor(){this.vo=new OI,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new OI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zfe{Mo(e){}shutdown(){}}const e5="ConnectivityMonitor";class t5{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ne(e5,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ne(e5,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Kb=null;function RI(){return Kb===null?Kb=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kb++,"0x"+Kb.toString(16)}const IA="RestConnection",Lfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Vfe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Ow?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const s=RI(),o=this.Qo(e,n.toUriEncodedString());Ne(IA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,a);const{host:u}=new URL(o),f=uu(u);return this.zo(e,o,c,r,f).then((h=>(Ne(IA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw rp(IA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}jo(e,n,r,i,a,s){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Up})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=Lfe[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class Bfe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ai="WebChannelConnection",wm=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Gh extends Vfe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Gh.c_){const e=_q();wm(e,Sq.STAT_EVENT,(n=>{n.stat===fI.PROXY?Ne(ai,"STAT_EVENT: detected buffering proxy"):n.stat===fI.NOPROXY&&Ne(ai,"STAT_EVENT: detected no buffering proxy")})),Gh.c_=!0}}zo(e,n,r,i,a){const s=RI();return new Promise(((o,c)=>{const u=new xq;u.setWithCredentials(!0),u.listenOnce(wq.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case qx.NO_ERROR:const h=u.getResponseJson();Ne(ai,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case qx.TIMEOUT:Ne(ai,`RPC '${e}' ${s} timed out`),c(new Me(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case qx.HTTP_ERROR:const g=u.getStatus();if(Ne(ai,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v?.error;if(b&&b.status&&b.message){const x=(function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(T)>=0?T:Ee.UNKNOWN})(b.status);c(new Me(x,b.message))}else c(new Me(Ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Me(Ee.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ne(ai,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Ne(ai,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=RI(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,n,r),o.encodeInitMessageHeaders=!0;const u=a.join("");Ne(ai,`Creating RPC '${e}' stream ${i}: ${u}`,o);const f=s.createWebChannel(u,o);this.I_(f);let h=!1,g=!1;const v=new Bfe({Ho:b=>{g?Ne(ai,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(h||(Ne(ai,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Ne(ai,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},Jo:()=>f.close()});return wm(f,Lm.EventType.OPEN,(()=>{g||(Ne(ai,`RPC '${e}' stream ${i} transport opened.`),v.i_())})),wm(f,Lm.EventType.CLOSE,(()=>{g||(g=!0,Ne(ai,`RPC '${e}' stream ${i} transport closed`),v.o_(),this.E_(f))})),wm(f,Lm.EventType.ERROR,(b=>{g||(g=!0,rp(ai,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),v.o_(new Me(Ee.UNAVAILABLE,"The operation could not be completed")))})),wm(f,Lm.EventType.MESSAGE,(b=>{if(!g){const x=b.data[0];Xe(!!x,16349);const w=x,S=w?.error||w[0]?.error;if(S){Ne(ai,`RPC '${e}' stream ${i} received error:`,S);const T=S.status;let P=(function(N){const C=sr[N];if(C!==void 0)return TG(C)})(T),D=S.message;T==="NOT_FOUND"&&D.includes("database")&&D.includes("does not exist")&&D.includes(this.databaseId.database)&&rp(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),P===void 0&&(P=Ee.INTERNAL,D="Unknown error status: "+T+" with message "+S.message),g=!0,v.o_(new Me(P,D)),f.close()}else Ne(ai,`RPC '${e}' stream ${i} received:`,x),v.__(x)}})),Gh.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Eq()}}function Ffe(t){return new Gh(t)}function h7(){return typeof window<"u"?window:null}function ew(){return typeof document<"u"?document:null}function jS(t){return new Kde(t,!0)}Gh.c_=!1;class p7{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const n5="PersistentStream";class g7{constructor(e,n,r,i,a,s,o,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new p7(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Me(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(n5,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ne(n5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ufe extends g7{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Xde(this.serializer,e),r=(function(a){if(!("targetChange"in a))return et.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?et.min():s.readTime?ki(s.readTime):et.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=kI(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=Rw(c)?{documents:OG(a,c)}:{query:RG(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=CG(a,s.resumeToken);const u=TI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(et.min())>0){o.readTime=gp(a,s.snapshotVersion.toTimestamp());const u=TI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=Zde(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=kI(this.serializer),n.removeTarget=e,this.K_(n)}}class $fe extends g7{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Qde(e.writeResults,e.commitTime),r=ki(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=kI(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Lw(this.serializer,r)))};this.K_(n)}}class qfe{}class Gfe extends qfe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Me(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Wo(e,AI(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(Ee.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.jo(e,AI(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(Ee.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Hfe(t,e,n,r){return new Gfe(t,e,n,r)}class Kfe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yn(n),this.aa=!1):Ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Gd="RemoteStore";class Wfe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((s=>{r.enqueueAndForget((async()=>{df(this)&&(Ne(Gd,"Restarting streams for network reachability change."),await(async function(c){const u=Ke(c);u.Ea.add(4),await N0(u),u.Va.set("Unknown"),u.Ea.delete(4),await zS(u)})(this))}))})),this.Va=new Kfe(r,i)}}async function zS(t){if(df(t))for(const e of t.Ra)await e(!0)}async function N0(t){for(const e of t.Ra)await e(!1)}function LS(t,e){const n=Ke(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zD(n)?jD(n):Hp(n).O_()&&MD(n,e))}function vp(t,e){const n=Ke(t),r=Hp(n);n.Ia.delete(e),r.O_()&&m7(n,e),n.Ia.size===0&&(r.O_()?r.L_():df(n)&&n.Va.set("Unknown"))}function MD(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hp(t).Z_(e)}function m7(t,e){t.da.$e(e),Hp(t).X_(e)}function jD(t){t.da=new $de({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Hp(t).start(),t.Va.ua()}function zD(t){return df(t)&&!Hp(t).x_()&&t.Ia.size>0}function df(t){return Ke(t).Ea.size===0}function v7(t){t.da=void 0}async function Yfe(t){t.Va.set("Online")}async function Xfe(t){t.Ia.forEach(((e,n)=>{MD(t,e)}))}async function Qfe(t,e){v7(t),zD(t)?(t.Va.ha(e),jD(t)):t.Va.set("Unknown")}async function Zfe(t,e,n){if(t.Va.set("Online"),e instanceof kG&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.da.removeTarget(o))})(t,e)}catch(r){Ne(Gd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hw(t,r)}else if(e instanceof Zx?t.da.Xe(e):e instanceof AG?t.da.st(e):t.da.tt(e),!n.isEqual(et.min()))try{const r=await a7(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.da.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Xn.EMPTY_BYTE_STRING,f.snapshotVersion)),m7(a,c);const h=new ll(f.target,c,u,f.sequenceNumber);MD(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){Ne(Gd,"Failed to raise snapshot:",r),await Hw(t,r)}}async function Hw(t,e,n){if(!hu(e))throw e;t.Ea.add(1),await N0(t),t.Va.set("Offline"),n||(n=()=>a7(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ne(Gd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zS(t)}))}function y7(t,e){return e().catch((n=>Hw(t,n,e)))}async function Gp(t){const e=Ke(t),n=tu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kd;for(;Jfe(e);)try{const i=await jfe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,ehe(e,i)}catch(i){await Hw(e,i)}b7(e)&&x7(e)}function Jfe(t){return df(t)&&t.Ta.length<10}function ehe(t,e){t.Ta.push(e);const n=tu(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function b7(t){return df(t)&&!tu(t).x_()&&t.Ta.length>0}function x7(t){tu(t).start()}async function the(t){tu(t).ra()}async function nhe(t){const e=tu(t);for(const n of t.Ta)e.ea(n.mutations)}async function rhe(t,e,n){const r=t.Ta.shift(),i=_D.from(r,e,n);await y7(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Gp(t)}async function ihe(t,e){e&&tu(t).Y_&&await(async function(r,i){if((function(s){return Bde(s)&&s!==Ee.ABORTED})(i.code)){const a=r.Ta.shift();tu(r).B_(),await y7(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Gp(r)}})(t,e),b7(t)&&x7(t)}async function r5(t,e){const n=Ke(t);n.asyncQueue.verifyOperationInProgress(),Ne(Gd,"RemoteStore received new credentials");const r=df(n);n.Ea.add(3),await N0(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zS(n)}async function MI(t,e){const n=Ke(t);e?(n.Ea.delete(2),await zS(n)):e||(n.Ea.add(2),await N0(n),n.Va.set("Unknown"))}function Hp(t){return t.ma||(t.ma=(function(n,r,i){const a=Ke(n);return a.sa(),new Ufe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:Yfe.bind(null,t),Yo:Xfe.bind(null,t),t_:Qfe.bind(null,t),J_:Zfe.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),zD(t)?jD(t):t.Va.set("Unknown")):(await t.ma.stop(),v7(t))}))),t.ma}function tu(t){return t.fa||(t.fa=(function(n,r,i){const a=Ke(n);return a.sa(),new $fe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:the.bind(null,t),t_:ihe.bind(null,t),ta:nhe.bind(null,t),na:rhe.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Gp(t)):(await t.fa.stop(),t.Ta.length>0&&(Ne(Gd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class LD{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new LD(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function VD(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),hu(t))return new Me(Ee.UNAVAILABLE,`${e}: ${t}`);throw t}class Hh{static emptySet(e){return new Hh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Le.comparator(n.key,r.key):(n,r)=>Le.comparator(n.key,r.key),this.keyedMap=Vm(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Hh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class i5{constructor(){this.ga=new un(Le.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class yp{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new yp(e,n,Hh.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&PS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class ahe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class she{constructor(){this.queries=a5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ke(n),a=i.queries;i.queries=a5(),a.forEach(((s,o)=>{for(const c of o.ba)c.onError(r)}))})(this,new Me(Ee.ABORTED,"Firestore shutting down"))}}function a5(){return new zl((t=>uG(t)),PS)}async function BD(t,e){const n=Ke(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new ahe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=VD(s,`Initialization of query '${xh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&UD(n)}async function FD(t,e){const n=Ke(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.ba.indexOf(e);s>=0&&(a.ba.splice(s,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ohe(t,e){const n=Ke(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.ba)o.Fa(i)&&(r=!0);s.wa=i}}r&&UD(n)}function lhe(t,e,n){const r=Ke(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function UD(t){t.Ca.forEach((e=>{e.next()}))}var jI,s5;(s5=jI||(jI={})).Ma="default",s5.Cache="cache";class $D{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jI.Cache}}class w7{constructor(e){this.key=e}}class S7{constructor(e){this.key=e}}class che{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=vt(),this.mutatedKeys=vt(),this.eu=fG(e),this.tu=new Hh(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new i5,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),v=k0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),w=!0):this.su(g,v)||(r.track({type:2,doc:v}),w=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(o=!0)):!g&&v?(r.track({type:0,doc:v}),w=!0):g&&!v&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(v?(s=s.add(v),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Ss:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(v,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Vt:w})}};return x(v)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Xa;return this.Xa=c,s.length!==0||u?{snapshot:new yp(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new i5,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=vt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new S7(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new w7(r))})),n}cu(e){this.Za=e.ks,this.Ya=vt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Kp="SyncEngine";class uhe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dhe{constructor(e){this.key=e,this.hu=!1}}class fhe{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new zl((o=>uG(o)),PS),this.Iu=new Map,this.Eu=new Set,this.Ru=new un(Le.comparator),this.Au=new Map,this.Vu=new ID,this.du={},this.mu=new Map,this.fu=qd.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hhe(t,e,n=!0){const r=VS(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await _7(r,e,n,!0),i}async function phe(t,e){const n=VS(t);await _7(n,e,!0,!1)}async function _7(t,e,n,r){const i=await $w(t.localStore,ma(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await qD(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&LS(t.remoteStore,i),o}async function qD(t,e,n,r,i){t.pu=(h,g,v)=>(async function(x,w,S,T){let P=w.view.ru(S);P.Ss&&(P=await DI(x.localStore,w.query,!1).then((({documents:C})=>w.view.ru(C,P))));const D=T&&T.targetChanges.get(w.targetId),O=T&&T.targetMismatches.get(w.targetId)!=null,N=w.view.applyChanges(P,x.isPrimaryClient,D,O);return zI(x,w.targetId,N.au),N.snapshot})(t,h,g,v);const a=await DI(t.localStore,e,!0),s=new che(e,a.ks),o=s.ru(a.documents),c=P0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);zI(t,n,u.au);const f=new uhe(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function ghe(t,e,n){const r=Ke(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!PS(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vp(r.remoteStore,i.targetId),bp(r,i.targetId)})).catch(fu)):(bp(r,i.targetId),await mp(r.localStore,i.targetId,!0))}async function mhe(t,e){const n=Ke(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vp(n.remoteStore,r.targetId))}async function vhe(t,e,n){const r=WD(t);try{const i=await(function(s,o){const c=Ke(s),u=gt.now(),f=o.reduce(((v,b)=>v.add(b.key)),vt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let b=pa(),x=vt();return c.xs.getEntries(v,f).next((w=>{b=w,b.forEach(((S,T)=>{T.isValidDocument()||(x=x.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,b))).next((w=>{h=w;const S=[];for(const T of o){const P=Lde(T,h.get(T.key).overlayedDocument);P!=null&&S.push(new Ll(T.key,P,eG(P.value.mapValue),Sr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,S,o)})).next((w=>{g=w;const S=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(v,w.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:pG(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.du[s.currentUser.toKey()];u||(u=new un(ot)),u=u.insert(o,c),s.du[s.currentUser.toKey()]=u})(r,i.batchId,n),await gu(r,i.changes),await Gp(r.remoteStore)}catch(i){const a=VD(i,"Failed to persist write");n.reject(a)}}async function E7(t,e){const n=Ke(t);try{const r=await Rfe(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Xe(s.hu,14607):i.removedDocuments.size>0&&(Xe(s.hu,42227),s.hu=!1))})),await gu(n,r,e)}catch(r){await fu(r)}}function o5(t,e,n){const r=Ke(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=Ke(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.ba)g.va(o)&&(u=!0)})),u&&UD(c)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yhe(t,e,n){const r=Ke(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new un(Le.comparator);s=s.insert(a,Un.newNoDocument(a,et.min()));const o=vt().add(a),c=new I0(et.min(),new Map,new un(ot),s,o);await E7(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),KD(r)}else await mp(r.localStore,e,!1).then((()=>bp(r,e,n))).catch(fu)}async function bhe(t,e){const n=Ke(t),r=e.batch.batchId;try{const i=await Ofe(n.localStore,e);HD(n,r,null),GD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gu(n,i)}catch(i){await fu(i)}}async function xhe(t,e,n){const r=Ke(t);try{const i=await(function(s,o){const c=Ke(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(Xe(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);HD(r,e,n),GD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gu(r,i)}catch(i){await fu(i)}}function GD(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function HD(t,e,n){const r=Ke(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function bp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||T7(t,r)}))}function T7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(vp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),KD(t))}function zI(t,e,n){for(const r of n)r instanceof w7?(t.Vu.addReference(r.key,e),whe(t,r)):r instanceof S7?(Ne(Kp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||T7(t,r.key)):Fe(19791,{wu:r})}function whe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ne(Kp,"New document in limbo: "+n),t.Eu.add(r),KD(t))}function KD(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Le(Lt.fromString(e)),r=t.fu.next();t.Au.set(r,new dhe(n)),t.Ru=t.Ru.insert(n,r),LS(t.remoteStore,new ll(ma(A0(n.path)),r,"TargetPurposeLimboResolution",Bi.ce))}}async function gu(t,e,n){const r=Ke(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=DD.Es(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.J_(i),await(async function(c,u){const f=Ke(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>fe.forEach(u,(g=>fe.forEach(g.Ts,(v=>f.persistence.referenceDelegate.addReference(h,g.targetId,v))).next((()=>fe.forEach(g.Is,(v=>f.persistence.referenceDelegate.removeReference(h,g.targetId,v)))))))))}catch(h){if(!hu(h))throw h;Ne(OD,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const v=f.vs.get(g),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);f.vs=f.vs.insert(g,x)}}})(r.localStore,a))}async function She(t,e){const n=Ke(t);if(!n.currentUser.isEqual(e)){Ne(Kp,"User change. New user:",e.toKey());const r=await i7(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Me(Ee.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(n,r.Ns)}}function _he(t,e){const n=Ke(t),r=n.Au.get(e);if(r&&r.hu)return vt().add(r.key);{let i=vt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function Ehe(t,e){const n=Ke(t),r=await DI(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&zI(n,e.targetId,i.au),i}async function The(t,e){const n=Ke(t);return o7(n.localStore,e).then((r=>gu(n,r)))}async function Ahe(t,e,n,r){const i=Ke(t),a=await(function(o,c){const u=Ke(o),f=Ke(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.Xn(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):fe.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Gp(i.remoteStore):n==="acknowledged"||n==="rejected"?(HD(i,e,r||null),GD(i,e),(function(o,c){Ke(Ke(o).mutationQueue).nr(c)})(i.localStore,e)):Fe(6720,"Unknown batchState",{bu:n}),await gu(i,a)):Ne(Kp,"Cannot apply mutation batch with id: "+e)}async function khe(t,e){const n=Ke(t);if(VS(n),WD(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await l5(n,r.toArray());n.gu=!0,await MI(n.remoteStore,!0);for(const a of i)LS(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(bp(n,s),mp(n.localStore,s,!0)))),vp(n.remoteStore,s)})),await i,await l5(n,r),(function(s){const o=Ke(s);o.Au.forEach(((c,u)=>{vp(o.remoteStore,u)})),o.Vu.zr(),o.Au=new Map,o.Ru=new un(Le.comparator)})(n),n.gu=!1,await MI(n.remoteStore,!1)}}async function l5(t,e,n){const r=Ke(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await $w(r.localStore,ma(c[0]));for(const u of c){const f=r.Tu.get(u),h=await Ehe(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await s7(r.localStore,s);o=await $w(r.localStore,u),await qD(r,A7(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.J_(a),i}function A7(t){return lG(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Che(t){return(function(n){return Ke(Ke(n).persistence).hs()})(Ke(t).localStore)}async function Ihe(t,e,n,r){const i=Ke(t);if(i.gu)return void Ne(Kp,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await o7(i.localStore,dG(a[0])),o=I0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Xn.EMPTY_BYTE_STRING);await gu(i,s,o);break}case"rejected":await mp(i.localStore,e,!0),bp(i,e,r);break;default:Fe(64155,n)}}async function Phe(t,e,n){const r=VS(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ne(Kp,"Adding an already active target "+i);continue}const a=await s7(r.localStore,i),s=await $w(r.localStore,a);await qD(r,A7(a),s.targetId,!1,s.resumeToken),LS(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await mp(r.localStore,i,!1).then((()=>{vp(r.remoteStore,i),bp(r,i)})).catch(fu)}}function VS(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=E7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_he.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yhe.bind(null,e),e.Pu.J_=ohe.bind(null,e.eventManager),e.Pu.yu=lhe.bind(null,e.eventManager),e}function WD(t){const e=Ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bhe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xhe.bind(null,e),e}class zv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jS(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return r7(this.persistence,new n7,e.initialUser,this.serializer)}Cu(e){return new PD(MS.Vi,this.serializer)}Du(e){return new f7}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zv.provider={build:()=>new zv};class Nhe extends zv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof Uw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new XG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new PD((r=>Uw.Vi(r,n)),this.serializer)}}class k7 extends zv{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await WD(this.xu.syncEngine),await Gp(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return r7(this.persistence,new n7,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new XG(r,e.asyncQueue,n)}Mu(e,n){const r=new Lue(n,this.persistence);return new zue(e.asyncQueue,r)}Cu(e){const n=t7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new ND(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,h7(),ew(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new f7}}class Dhe extends k7{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof CA&&(this.sharedClientState.syncEngine={So:Ahe.bind(null,n),Do:Ihe.bind(null,n),Co:Phe.bind(null,n),hs:Che.bind(null,n),bo:The.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await khe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=h7();if(!CA.v(n))throw new Me(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=t7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Lv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=She.bind(null,this.syncEngine),await MI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new she})()}createDatastore(e){const n=jS(e.databaseInfo.databaseId),r=Ffe(e.databaseInfo);return Hfe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new Wfe(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>o5(this.syncEngine,n,0)),(function(){return t5.v()?new t5:new zfe})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new fhe(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ke(n);Ne(Gd,"RemoteStore shutting down."),r.Ea.add(5),await N0(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lv.provider={build:()=>new Lv};class YD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const nu="FirestoreClient";class Ohe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=oi.UNAUTHENTICATED,this.clientId=cD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{Ne(nu,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Ne(nu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=VD(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function PA(t,e){t.asyncQueue.verifyOperationInProgress(),Ne(nu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await i7(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function c5(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Rhe(t);Ne(nu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>r5(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>r5(e.remoteStore,i))),t._onlineComponents=e}async function Rhe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ne(nu,"Using user provided OfflineComponentProvider");try{await PA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;rp("Error using user provided cache. Falling back to memory cache: "+n),await PA(t,new zv)}}else Ne(nu,"Using default OfflineComponentProvider"),await PA(t,new Nhe(void 0));return t._offlineComponents}async function C7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ne(nu,"Using user provided OnlineComponentProvider"),await c5(t,t._uninitializedComponentsProvider._online)):(Ne(nu,"Using default OnlineComponentProvider"),await c5(t,new Lv))),t._onlineComponents}function Mhe(t){return C7(t).then((e=>e.syncEngine))}async function Kw(t){const e=await C7(t),n=e.eventManager;return n.onListen=hhe.bind(null,e.syncEngine),n.onUnlisten=ghe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=phe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mhe.bind(null,e.syncEngine),n}function jhe(t,e,n,r){const i=new YD(r),a=new $D(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>BD(await Kw(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>FD(await Kw(t),a)))}}function zhe(t,e,n={}){const r=new bo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new YD({next:g=>{f.Nu(),s.enqueueAndForget((()=>FD(a,h)));const v=g.docs.has(o);!v&&g.fromCache?u.reject(new Me(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?u.reject(new Me(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new $D(A0(o.path),f,{includeMetadataChanges:!0,Ka:!0});return BD(a,h)})(await Kw(t),t.asyncQueue,e,n,r))),r.promise}function Lhe(t,e,n={}){const r=new bo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new YD({next:g=>{f.Nu(),s.enqueueAndForget((()=>FD(a,h))),g.fromCache&&c.source==="server"?u.reject(new Me(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new $D(o,f,{includeMetadataChanges:!0,Ka:!0});return BD(a,h)})(await Kw(t),t.asyncQueue,e,n,r))),r.promise}function Vhe(t,e){const n=new bo;return t.asyncQueue.enqueueAndForget((async()=>vhe(await Mhe(t),e,n))),n.promise}function I7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Bhe="ComponentProvider",u5=new Map;function Fhe(t,e,n,r,i){return new fde(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,I7(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const Uhe="firestore.googleapis.com",d5=!0;class f5{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uhe,this.ssl=d5}else this.host=e.host,this.ssl=e.ssl??d5;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=GG;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YG)throw new Me(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Me(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class XD{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f5(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Tue;switch(r.type){case"firstParty":return new Cue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=u5.get(n);r&&(Ne(Bhe,"Removing Datastore"),u5.delete(n),r.terminate())})(this),Promise.resolve()}}class Vl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vl(this.firestore,e,this._query)}}class $n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}toJSON(){return{type:$n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_0(n,$n._jsonSchema))return new $n(e,r||null,new Le(Lt.fromString(n.referencePath)))}}$n._jsonSchemaVersion="firestore/documentReference/1.0",$n._jsonSchema={type:cr("string",$n._jsonSchemaVersion),referencePath:cr("string")};class Wc extends Vl{constructor(e,n,r){super(e,n,A0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Le(e))}withConverter(e){return new Wc(this.firestore,e,this._path)}}function Xr(t,e,...n){if(t=Vt(t),kq("collection","path",e),t instanceof XD){const r=Lt.fromString(e,...n);return n3(r),new Wc(t,null,r)}{if(!(t instanceof $n||t instanceof Wc))throw new Me(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return n3(r),new Wc(t.firestore,null,r)}}function Et(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=cD.newId()),kq("doc","path",e),t instanceof XD){const r=Lt.fromString(e,...n);return t3(r),new $n(t,null,new Le(r))}{if(!(t instanceof $n||t instanceof Wc))throw new Me(Ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Lt.fromString(e,...n));return t3(r),new $n(t.firestore,t instanceof Wc?t.converter:null,new Le(r))}}const h5="AsyncQueue";class p5{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new p7(this,"async_queue_retry"),this._c=()=>{const r=ew();r&&Ne(h5,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ew();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ew();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!hu(e))throw e;Ne(h5,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Yn("INTERNAL UNHANDLED ERROR: ",g5(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=LD.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:g5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function g5(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ao extends XD{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new p5,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p5(e),this._firestoreClient=void 0,await e}}}function $he(t,e,n){n||(n=Ow);const r=Vp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Zc(a,e))return i;throw new Me(Ee.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Me(Ee.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YG)throw new Me(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&uu(e.host)&&UN(e.host),r.initialize({options:e,instanceIdentifier:n})}function D0(t){if(t._terminated)throw new Me(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qhe(t),t._firestoreClient}function qhe(t){const e=t._freezeSettings(),n=Fhe(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Ohe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(Xn.fromBase64String(e))}catch(n){throw new Me(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new La(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:La._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_0(e,La._jsonSchema))return La.fromBase64String(e.bytes)}}La._jsonSchemaVersion="firestore/bytes/1.0",La._jsonSchema={type:cr("string",La._jsonSchemaVersion),bytes:cr("string")};class BS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Me(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class FS{constructor(e){this._methodName=e}}class xo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xo._jsonSchemaVersion}}static fromJSON(e){if(_0(e,xo._jsonSchema))return new xo(e.latitude,e.longitude)}}xo._jsonSchemaVersion="firestore/geoPoint/1.0",xo._jsonSchema={type:cr("string",xo._jsonSchemaVersion),latitude:cr("number"),longitude:cr("number")};class Ss{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_0(e,Ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ss(e.vectorValues);throw new Me(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ss._jsonSchemaVersion="firestore/vectorValue/1.0",Ss._jsonSchema={type:cr("string",Ss._jsonSchemaVersion),vectorValues:cr("object")};const Ghe=/^__.*__$/;class Hhe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ll(e,this.data,this.fieldMask,n,this.fieldTransforms):new qp(e,this.data,n,this.fieldTransforms)}}class P7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ll(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function N7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{dataSource:t})}}class US{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new US({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ww(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(N7(this.dataSource)&&Ghe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Khe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jS(e)}createContext(e,n,r,i=!1){return new US({dataSource:e,methodName:n,targetDoc:r,path:Nn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function O0(t){const e=t._freezeSettings(),n=jS(t._databaseId);return new Khe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QD(t,e,n,r,i,a={}){const s=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);JD("Data must be an object, but it was:",s,r);const o=R7(r,s);let c,u;if(a.merge)c=new Fi(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=Hd(e,h,n);if(!s.contains(g))throw new Me(Ee.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);z7(f,g)||f.push(g)}c=new Fi(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new Hhe(new ui(o),c,u)}class R0 extends FS{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof R0}}function Whe(t,e,n){return new US({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ZD extends FS{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=Whe(this,e,!0),r=this.Ac.map((a=>Wp(a,n))),i=new Fd(r);return new wG(e.path,i)}isEqual(e){return e instanceof ZD&&Zc(this.Ac,e.Ac)}}function D7(t,e,n,r){const i=t.createContext(1,e,n);JD("Data must be an object, but it was:",i,r);const a=[],s=ui.empty();pu(r,((c,u)=>{const f=j7(e,c,n);u=Vt(u);const h=i.childContextForFieldPath(f);if(u instanceof R0)a.push(f);else{const g=Wp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new Fi(a);return new P7(s,o,i.fieldTransforms)}function O7(t,e,n,r,i,a){const s=t.createContext(1,e,n),o=[Hd(e,r,n)],c=[i];if(a.length%2!=0)throw new Me(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(Hd(e,a[g])),c.push(a[g+1]);const u=[],f=ui.empty();for(let g=o.length-1;g>=0;--g)if(!z7(u,o[g])){const v=o[g];let b=c[g];b=Vt(b);const x=s.childContextForFieldPath(v);if(b instanceof R0)u.push(v);else{const w=Wp(b,x);w!=null&&(u.push(v),f.set(v,w))}}const h=new Fi(u);return new P7(f,h,s.fieldTransforms)}function Yhe(t,e,n,r=!1){return Wp(n,t.createContext(r?4:3,e))}function Wp(t,e){if(M7(t=Vt(t)))return JD("Unsupported field value:",e,t),R7(t,e);if(t instanceof FS)return(function(r,i){if(!N7(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=Wp(o,i.childContextForArray(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Dde(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:gp(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gp(i.serializer,a)}}if(r instanceof xo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof La)return{bytesValue:CG(i.serializer,r._byteString)};if(r instanceof $n){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.createError(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:AD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ss)return(function(s,o){const c=s instanceof Ss?s.toArray():s;return{mapValue:{fields:{[vD]:{stringValue:yD},[up]:{arrayValue:{values:c.map((f=>{if(typeof f!="number")throw o.createError("VectorValues must only contain numeric values.");return wD(o.serializer,f)}))}}}}}})(r,i);if(VG(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${SS(r)}`)})(t,e)}function R7(t,e){const n={};return Gq(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pu(t,((r,i)=>{const a=Wp(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function M7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof xo||t instanceof La||t instanceof $n||t instanceof FS||t instanceof Ss||VG(t))}function JD(t,e,n){if(!M7(n)||!Cq(n)){const r=SS(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Hd(t,e,n){if((e=Vt(e))instanceof BS)return e._internalPath;if(typeof e=="string")return j7(t,e);throw Ww("Field path arguments must be of type string or ",t,!1,void 0,n)}const Xhe=new RegExp("[~\\*/\\[\\]]");function j7(t,e,n){if(e.search(Xhe)>=0)throw Ww(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new BS(...e.split("."))._internalPath}catch{throw Ww(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ww(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Me(Ee.INVALID_ARGUMENT,o+t+c)}function z7(t,e){return t.some((n=>n.isEqual(e)))}class Qhe{convertValue(e,n="none"){switch(Jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return En(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pu(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[up].arrayValue?.values?.map((r=>En(r.doubleValue)));return new Ss(n)}convertGeoPoint(e){return new xo(En(e.latitude),En(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=CS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pv(e));default:return null}}convertTimestamp(e){const n=El(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Lt.fromString(e);Xe(LG(r),9688,{name:e});const i=new Vd(r.get(1),r.get(3)),a=new Le(r.popFirst(5));return i.isEqual(n)||Yn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class eO extends Qhe{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,n)}}function m5(){return new R0("deleteField")}function Zhe(...t){return new ZD("arrayUnion",t)}const v5="@firebase/firestore",y5="4.11.0";function b5(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class L7{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Hd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Jhe extends L7{data(){return super.data()}}function V7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Me(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tO{}class nO extends tO{}function Ui(t,e,...n){let r=[];e instanceof tO&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof rO)).length,o=a.filter((c=>c instanceof $S)).length;if(s>1||s>0&&o>0)throw new Me(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class $S extends nO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $S(e,n,r)}_apply(e){const n=this._parse(e);return B7(e._query,n),new Vl(e.firestore,e.converter,EI(e._query,n))}_parse(e){const n=O0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Me(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){S5(h,f);const b=[];for(const x of h)b.push(w5(c,a,x));g={arrayValue:{values:b}}}else g=w5(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||S5(h,f),g=Yhe(o,s,h,f==="in"||f==="not-in");return Ct.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tw(t,e,n){const r=e,i=Hd("where",t);return $S._create(i,r,n)}class rO extends tO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rO(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)B7(s,c),s=EI(s,c)})(e._query,n),new Vl(e.firestore,e.converter,EI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iO extends nO{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new iO(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rv(a,s)})(e._query,this._field,this._direction);return new Vl(e.firestore,e.converter,Ade(e._query,n))}}function _s(t,e="asc"){const n=e,r=Hd("orderBy",t);return iO._create(r,n)}class aO extends nO{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new aO(e,n,r)}_apply(e){return new Vl(e.firestore,e.converter,jw(e._query,this._limit,this._limitType))}}function x5(t){return aO._create("limit",t,"F")}function w5(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new Me(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cG(e)&&n.indexOf("/")!==-1)throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Lt.fromString(n));if(!Le.isDocumentKey(r))throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dv(t,new Le(r))}if(n instanceof $n)return Dv(t,n._key);throw new Me(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SS(n)}.`)}function S5(t,e){if(!Array.isArray(t)||t.length===0)throw new Me(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B7(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Me(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function sO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class epe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=ipe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function tpe(t){return new epe(t)}class npe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Lv.provider,this._offlineComponentProvider={build:n=>new k7(n,e?.cacheSizeBytes,this.forceOwnership)}}}class rpe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Lv.provider,this._offlineComponentProvider={build:n=>new Dhe(n,e?.cacheSizeBytes)}}}function ipe(t){return new npe(t?.forceOwnership)}function ape(){return new rpe}class Um{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pd extends L7{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Pd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Pd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pd._jsonSchema={type:cr("string",Pd._jsonSchemaVersion),bundleSource:cr("string","DocumentSnapshot"),bundleName:cr("string"),bundle:cr("string")};class nw extends Pd{data(e={}){return super.data(e)}}class Nd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Um(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new nw(this._firestore,this._userDataWriter,r.key,r,new Um(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new nw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Um(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new nw(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Um(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:spe(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cD.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function spe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}Nd._jsonSchemaVersion="firestore/querySnapshot/1.0",Nd._jsonSchema={type:cr("string",Nd._jsonSchemaVersion),bundleSource:cr("string","QuerySnapshot"),bundleName:cr("string"),bundle:cr("string")};class ope{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=O0(e)}set(e,n,r){this._verifyNotCommitted();const i=NA(e,this._firestore),a=sO(i.converter,n,r),s=QD(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Sr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=NA(e,this._firestore);let s;return s=typeof(n=Vt(n))=="string"||n instanceof BS?O7(this._dataReader,"WriteBatch.update",a._key,n,r,i):D7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=NA(e,this._firestore);return this._mutations=this._mutations.concat(new C0(n._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function NA(t,e){if((t=Vt(t)).firestore!==e)throw new Me(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function DA(t){t=Ki(t,$n);const e=Ki(t.firestore,Ao),n=D0(e);return zhe(n,t._key).then((r=>F7(e,t,r)))}function la(t){t=Ki(t,Vl);const e=Ki(t.firestore,Ao),n=D0(e),r=new eO(e);return V7(t._query),Lhe(n,t._query).then((i=>new Nd(e,r,t,i)))}function ua(t,e,n){t=Ki(t,$n);const r=Ki(t.firestore,Ao),i=sO(t.converter,e,n),a=O0(r);return M0(r,[QD(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sr.none())])}function co(t,e,n,...r){t=Ki(t,$n);const i=Ki(t.firestore,Ao),a=O0(i);let s;return s=typeof(e=Vt(e))=="string"||e instanceof BS?O7(a,"updateDoc",t._key,e,n,r):D7(a,"updateDoc",t._key,e),M0(i,[s.toMutation(t._key,Sr.exists(!0))])}function da(t){return M0(Ki(t.firestore,Ao),[new C0(t._key,Sr.none())])}function qS(t,e){const n=Ki(t.firestore,Ao),r=Et(t),i=sO(t.converter,e),a=O0(t.firestore);return M0(n,[QD(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then((()=>r))}function ru(t,...e){t=Vt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||b5(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(b5(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,s,o;if(t instanceof $n)s=Ki(t.firestore,Ao),o=A0(t._key.path),a={next:u=>{e[r]&&e[r](F7(s,t,u))},error:e[r+1],complete:e[r+2]};else{const u=Ki(t,Vl);s=Ki(u.firestore,Ao),o=u._query;const f=new eO(s);a={next:h=>{e[r]&&e[r](new Nd(s,f,u,h))},error:e[r+1],complete:e[r+2]},V7(t._query)}const c=D0(s);return jhe(c,o,i,a)}function M0(t,e){const n=D0(t);return Vhe(n,e)}function F7(t,e,n){const r=n.docs.get(e._key),i=new eO(t);return new Pd(t,i,e._key,r,new Um(n.hasPendingWrites,n.fromCache),e.converter)}function LI(t){return t=Ki(t,Ao),D0(t),new ope(t,(e=>M0(t,e)))}(function(e,n=!0){_ue(Bp),xl(new Eo("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new Ao(new Aue(r.getProvider("auth-internal")),new Iue(s,r.getProvider("app-check-internal")),hde(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),ws(v5,y5,e),ws(v5,y5,"esm2020")})();const VI=new Map,U7={activated:!1,tokenObservers:[]},lpe={initialized:!1,enabled:!1};function _r(t){return VI.get(t)||{...U7}}function cpe(t,e){return VI.set(t,e),VI.get(t)}function GS(){return lpe}const $7="https://content-firebaseappcheck.googleapis.com/v1",upe="exchangeRecaptchaEnterpriseToken",dpe="exchangeDebugToken",_5={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},fpe=1440*60*1e3;class hpe{constructor(e,n,r,i,a){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new bv,this.pending.promise.catch(n=>{}),await ppe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new bv,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function ppe(t){return new Promise(e=>{setTimeout(e,t)})}const gpe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},$i=new Lp("appCheck","AppCheck",gpe);function E5(t=!1){return t?self.grecaptcha?.enterprise:self.grecaptcha}function oO(t){if(!_r(t).activated)throw $i.create("use-before-activation",{appName:t.name})}function q7(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),a=e-n*3600*24-r*3600-i*60;let s="";return n&&(s+=Wb(n)+"d:"),r&&(s+=Wb(r)+"h:"),s+=Wb(i)+"m:"+Wb(a)+"s",s}function Wb(t){return t===0?"00":t>=10?t.toString():"0"+t}async function lO({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const a={method:"POST",body:JSON.stringify(e),headers:r};let s;try{s=await fetch(t,a)}catch(h){throw $i.create("fetch-network-error",{originalErrorMessage:h?.message})}if(s.status!==200)throw $i.create("fetch-status-error",{httpStatus:s.status});let o;try{o=await s.json()}catch(h){throw $i.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=o.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const u=Number(c[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function mpe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${$7}/projects/${n}/apps/${r}:${upe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function G7(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${$7}/projects/${n}/apps/${r}:${dpe}?key=${i}`,body:{debug_token:e}}}const vpe="firebase-app-check-database",ype=1,Vv="firebase-app-check-store",H7="debug-token";let Yb=null;function K7(){return Yb||(Yb=new Promise((t,e)=>{try{const n=indexedDB.open(vpe,ype);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e($i.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{const i=r.target.result;r.oldVersion===0&&i.createObjectStore(Vv,{keyPath:"compositeKey"})}}catch(n){e($i.create("storage-open",{originalErrorMessage:n?.message}))}}),Yb)}function bpe(t){return Y7(X7(t))}function xpe(t,e){return W7(X7(t),e)}function wpe(t){return W7(H7,t)}function Spe(){return Y7(H7)}async function W7(t,e){const r=(await K7()).transaction(Vv,"readwrite"),a=r.objectStore(Vv).put({compositeKey:t,value:e});return new Promise((s,o)=>{a.onsuccess=c=>{s()},r.onerror=c=>{o($i.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}async function Y7(t){const n=(await K7()).transaction(Vv,"readonly"),i=n.objectStore(Vv).get(t);return new Promise((a,s)=>{i.onsuccess=o=>{const c=o.target.result;a(c?c.value:void 0)},n.onerror=o=>{s($i.create("storage-get",{originalErrorMessage:o.target.error?.message}))}})}function X7(t){return`${t.options.appId}-${t.name}`}const Lc=new mS("@firebase/app-check");async function _pe(t){if(gS()){let e;try{e=await bpe(t)}catch(n){Lc.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function OA(t,e){return gS()?xpe(t,e).catch(n=>{Lc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Epe(){let t;try{t=await Spe()}catch{}if(t)return t;{const e=crypto.randomUUID();return wpe(e).catch(n=>Lc.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}function cO(){return GS().enabled}async function uO(){const t=GS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Tpe(){const t=FN(),e=GS();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new bv;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Epe())}const Ape={error:"UNKNOWN_ERROR"};function kpe(t){return BN.encodeString(JSON.stringify(t),!1)}async function BI(t,e=!1,n=!1){const r=t.app;oO(r);const i=_r(r);let a=i.token,s;if(a&&!Ch(a)&&(i.token=void 0,a=void 0),!a){const u=await i.cachedTokenPromise;u&&(Ch(u)?a=u:await OA(r,void 0))}if(!e&&a&&Ch(a))return{token:a.token};let o=!1;if(cO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=lO(G7(r,await uO()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=await i.exchangeTokenPromise;return await OA(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Lc.warn(u.message):n&&Lc.error(u),RA(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),a=await _r(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Lc.warn(u.message):n&&Lc.error(u),s=u}let c;return a?s?Ch(a)?c={token:a.token,internalError:s}:c=RA(s):(c={token:a.token},i.token=a,await OA(r,a)):c=RA(s),o&&J7(r,c),c}async function Cpe(t){const e=t.app;oO(e);const{provider:n}=_r(e);if(cO()){const r=await uO(),{token:i}=await lO(G7(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function Q7(t,e,n,r){const{app:i}=t,a=_r(i),s={next:n,error:r,type:e};if(a.tokenObservers=[...a.tokenObservers,s],a.token&&Ch(a.token)){const o=a.token;Promise.resolve().then(()=>{n({token:o.token}),T5(t)}).catch(()=>{})}a.cachedTokenPromise.then(()=>T5(t))}function Z7(t,e){const n=_r(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function T5(t){const{app:e}=t,n=_r(e);let r=n.tokenRefresher;r||(r=Ipe(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Ipe(t){const{app:e}=t;return new hpe(async()=>{const n=_r(e);let r;if(n.token?r=await BI(t,!0):r=await BI(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=_r(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},_5.RETRIAL_MIN_WAIT,_5.RETRIAL_MAX_WAIT)}function J7(t,e){const n=_r(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ch(t){return t.expireTimeMillis-Date.now()>0}function RA(t){return{token:kpe(Ape),error:t}}class Ppe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=_r(this.app);for(const n of e)Z7(this.app,n.next);return Promise.resolve()}}function Npe(t,e){return new Ppe(t,e)}function Dpe(t){return{getToken:e=>BI(t,e),getLimitedUseToken:()=>Cpe(t),addTokenListener:e=>Q7(t,"INTERNAL",e),removeTokenListener:e=>Z7(t.app,e)}}const Ope="@firebase/app-check",Rpe="0.11.0",Mpe="https://www.google.com/recaptcha/enterprise.js";function jpe(t,e){const n=new bv,r=_r(t);r.reCAPTCHAState={initialized:n};const i=zpe(t),a=E5(!0);return a?A5(t,e,a,i,n):Bpe(()=>{const s=E5(!0);if(!s)throw new Error("no recaptcha");A5(t,e,s,i,n)}),n.promise}function A5(t,e,n,r,i){n.ready(()=>{Vpe(t,e,n,r),i.resolve(n)})}function zpe(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function Lpe(t){oO(t);const n=await _r(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const a=_r(t).reCAPTCHAState;n.ready(()=>{r(n.execute(a.widgetId,{action:"fire_app_check"}))})})}function Vpe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{_r(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{_r(t).reCAPTCHAState.succeeded=!1}}),a=_r(t);a.reCAPTCHAState={...a.reCAPTCHAState,widgetId:i}}function Bpe(t){const e=document.createElement("script");e.src=Mpe,e.onload=t,document.head.appendChild(e)}class dO{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){Upe(this._throttleData);const e=await Lpe(this._app).catch(r=>{throw $i.create("recaptcha-error")});if(!_r(this._app).reCAPTCHAState?.succeeded)throw $i.create("recaptcha-error");let n;try{n=await lO(mpe(this._app,e),this._heartbeatServiceProvider)}catch(r){throw r.code?.includes("fetch-status-error")?(this._throttleData=Fpe(Number(r.customData?.httpStatus),this._throttleData),$i.create("initial-throttle",{time:q7(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=Vp(e,"heartbeat"),jpe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof dO?this._siteKey===e._siteKey:!1}}function Fpe(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+fpe,httpStatus:t};{const n=e?e.backoffCount:0,r=bre(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function Upe(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw $i.create("throttled",{time:q7(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function $pe(t=qN(),e){t=Vt(t);const n=Vp(t,"app-check");if(GS().initialized||Tpe(),cO()&&uO().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return i;throw $i.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return qpe(t,e.provider,e.isTokenAutoRefreshEnabled),_r(t).isTokenAutoRefreshEnabled&&Q7(r,"INTERNAL",()=>{}),r}function qpe(t,e,n=!1){const r=cpe(t,{...U7});r.activated=!0,r.provider=e,r.cachedTokenPromise=_pe(t).then(i=>(i&&Ch(i)&&(r.token=i,J7(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&Lc.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const Gpe="app-check",k5="app-check-internal";function Hpe(){xl(new Eo(Gpe,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Npe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(k5).initialize()})),xl(new Eo(k5,t=>{const e=t.getProvider("app-check").getImmediate();return Dpe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ws(Ope,Rpe)}Hpe();const Kpe={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},fO=r8(Kpe);$pe(fO,{provider:new dO("6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"),isTokenAutoRefreshEnabled:!0});const bi=F8(fO),rt=$he(fO,{localCache:tpe({tabManager:ape()})}),Vi={DEBUG:0,INFO:1,WARN:2,ERROR:3};class Wpe{logs=[];maxLogs=1e3;sessionId;subscribers=new Set;constructor(){this.sessionId=this.generateSessionId(),this.info("Logger","Session started",{sessionId:this.sessionId})}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}createEntry(e,n,r,i){return{id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),level:e,message:r,source:n,data:i,userId:this.getUserId(),sessionId:this.sessionId}}getUserId(){try{const e=localStorage.getItem("auth-storage");if(e)return JSON.parse(e).state?.user?.uid}catch{}}addLog(e){this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.notifySubscribers();const r=["DEBUG","INFO","WARN","ERROR"][e.level],i=e.level===Vi.ERROR?"error":e.level===Vi.WARN?"warn":"log";console[i](`[${r}] ${e.source}: ${e.message}`,e.data||"")}notifySubscribers(){const e=[...this.logs];this.subscribers.forEach(n=>n(e))}debug(e,n,r){this.addLog(this.createEntry(Vi.DEBUG,e,n,r))}info(e,n,r){this.addLog(this.createEntry(Vi.INFO,e,n,r))}warn(e,n,r){this.addLog(this.createEntry(Vi.WARN,e,n,r))}error(e,n,r){this.addLog(this.createEntry(Vi.ERROR,e,n,r))}getLogs(e){let n=[...this.logs];if(e?.level!==void 0&&(n=n.filter(r=>r.level>=e.level)),e?.source&&(n=n.filter(r=>r.source.toLowerCase().includes(e.source.toLowerCase()))),e?.search){const r=e.search.toLowerCase();n=n.filter(i=>i.message.toLowerCase().includes(r)||i.data&&JSON.stringify(i.data).toLowerCase().includes(r))}return e?.startTime&&(n=n.filter(r=>r.timestamp>=e.startTime)),e?.endTime&&(n=n.filter(r=>r.timestamp<=e.endTime)),n.reverse()}subscribe(e){return this.subscribers.add(e),e([...this.logs]),()=>{this.subscribers.delete(e)}}exportLogs(e){const n=this.getLogs(e),r={exportedAt:new Date().toISOString(),sessionId:this.sessionId,totalLogs:n.length,logs:n.map(i=>({...i,timestamp:new Date(i.timestamp).toISOString(),level:["DEBUG","INFO","WARN","ERROR"][i.level]}))};return JSON.stringify(r,null,2)}downloadLogs(e){const n=this.exportLogs(e),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`budget-app-logs-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}clearLogs(){this.logs=[],this.notifySubscribers(),this.info("Logger","Logs cleared")}getStats(){const e={},n={},r=["DEBUG","INFO","WARN","ERROR"];this.logs.forEach(a=>{const s=r[a.level];e[s]=(e[s]||0)+1,n[a.source]=(n[a.source]||0)+1});const i=this.logs.length>0?Date.now()-this.logs[0].timestamp:0;return{total:this.logs.length,byLevel:e,bySource:n,sessionDuration:i}}}const In=new Wpe;function MA(t){if(typeof t=="string"){const e=t.match(/^[^\w]*\s*([A-Za-z]+):\s*(.*)/);return e?{source:e[1],message:e[2]}:{source:"App",message:t}}return{source:"App",message:String(t)}}const $={log:(...t)=>{const{source:e,message:n}=MA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;In.info(e,n,r)},warn:(...t)=>{const{source:e,message:n}=MA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;In.warn(e,n,r)},error:(...t)=>{const{source:e,message:n}=MA(t[0]),r=t.length>1?t.length===2?t[1]:t.slice(1):void 0;In.error(e,n,r)}},C5=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),Xb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),rn=oD()(yq(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Rae(bi,e,n)).user;if($.log(` Checking email verification for: ${i.email}`),$.log(" emailVerified status:",i.emailVerified),$.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return $.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await AL(bi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),$.log(` Login blocked: ${i.email} not verified`),!1;$.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=Xb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),$.log(` User logged in: ${a.email}`),!0}catch(r){$.error("Login error:",r),$.error("Error code:",r.code),$.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:$.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else $.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await Oae(bi,e,n)).user;await jae(a,{displayName:r}),await TL(a,C5());const s=Xb(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),$.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){$.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await AL(bi),$.log(" User logged out")}catch(e){$.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await Pae(bi,e),t({isLoading:!1}),!0}catch(n){$.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=bi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await TL(e,C5()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),$.log(` Verification email sent to: ${e.email}`),!0}catch(n){$.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";return n.code==="auth/too-many-requests"&&(r="Too many verification emails sent. Please wait before trying again."),t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=rn.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=bi.currentUser;if(!e)return!1;try{await e.reload();const n=bi.currentUser;if(n?.emailVerified){const r=Xb(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),$.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return $.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=bi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=of.credential(n.email,e);return await Cae(n,r),await Bae(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),$.log(` Account permanently deleted: ${n.email}`),!0}catch(r){$.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await Nae(bi,e,n),t({isLoading:!1}),$.log(" Password reset successful"),!0}catch(r){$.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>rn.getState().isInitialized?()=>{}:(t({isInitialized:!1}),Vae(bi,async r=>{const i=Date.now(),a=rn.getState(),s=r?Xb(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if($.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),$.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:u,willCheckOnboarding:f&&!u}),f&&!u){$.log(" Loading budgetStore to check onboarding...");const v=await Zh(()=>Promise.resolve().then(()=>GY),[]).then(b=>b.useBudgetStore.getState());$.log(" Calling budgetStore.checkAndStartOnboarding()..."),await v.checkAndStartOnboarding()}else $.log(" Skipping onboarding check (not verified or offline grace period)");else $.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),eH=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],Ype=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=eH.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},HS=t=>{const e=eH.map(i=>({...i,met:i.regex.test(t)})),n=Ype(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},tH=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=HS(t);return r?null:m.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>m.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),m.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},nH=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=HS(t);return r?null:m.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?m.jsx(aD,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):m.jsx(S0,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},Xpe=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(!1),[f,h]=A.useState(!1),[g,v]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:S,loginError:T,clearError:P}=rn(),D=HS(n),O=async C=>{if(C.preventDefault(),P(),t.trim()&&n.trim())if(c){if(!i.trim()||!D.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},N=async C=>{C.preventDefault(),t.trim()&&await w(t.trim())&&v(!0)};return A.useEffect(()=>{e(""),r(""),a(""),v(!1)},[c,f]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?m.jsxs("form",{onSubmit:N,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-2",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(uI,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"reset-email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"email"})]})]}),g?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx(uI,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),m.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),m.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",m.jsx("span",{className:"font-medium",children:t})]}),m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[m.jsx(_l,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"submit",disabled:S||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?"Sending...":"Send Reset Link"}),m.jsx("div",{className:"mt-4 text-center",children:m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:[m.jsx(_l,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):m.jsxs("form",{onSubmit:O,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"username"})]}),c&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),m.jsx("input",{id:"displayName",type:"text",value:i,onChange:C=>a(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:S})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&m.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:"Forgot password?"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:C=>r(C.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!D.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:S,autoComplete:c?"new-password":"current-password"}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:S,children:s?m.jsx(fq,{className:"h-5 w-5"}):m.jsx(hq,{className:"h-5 w-5"})})]}),c&&n&&m.jsx("div",{className:"mt-2",children:m.jsx(tH,{password:n})}),c&&n&&m.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:m.jsx(nH,{password:n})})]}),T&&m.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&m.jsx("div",{className:"mt-3",children:m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),m.jsx("button",{type:"submit",disabled:S||!t.trim()||!n.trim()||c&&!i.trim()||c&&!D.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:S,children:[m.jsx(sue,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Qpe=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[u,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:v,clearError:b}=rn(),x=HS(r);A.useEffect(()=>{b()},[b]);const w=async S=>{if(S.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:m.jsx(Cw,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),m.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(HL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),m.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?m.jsx(fq,{className:"h-5 w-5"}):m.jsx(hq,{className:"h-5 w-5"})})]}),m.jsx("div",{className:"mt-2",children:m.jsx(tH,{password:r})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(HL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:S=>s(S.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),m.jsx(nH,{password:r}),v&&m.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:v}),m.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[m.jsx(_l,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},rH=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=rn();A.useEffect(()=>{i||$.warn("EmailVerificationView: No current user, this should not happen")},[i]),A.useEffect(()=>{const h=()=>{$.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:m.jsx(uI,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Cw,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),m.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[m.jsx("li",{children:"1. Open your email inbox"}),m.jsx("li",{children:"2. Find the email from House Budget"}),m.jsx("li",{children:'3. Click the "Verify Email" link'}),m.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&m.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&m.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),m.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?m.jsxs(m.Fragment,{children:[m.jsx(tp,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):m.jsxs(m.Fragment,{children:[m.jsx(tp,{className:"h-4 w-4"}),"Resend verification email"]})}),m.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[m.jsx(_l,{className:"h-4 w-4"}),"Back to sign in"]})]})}),m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},iH=({message:t="Loading your budget...",showTimeout:e=!1})=>m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"relative",children:[m.jsx(tp,{size:48,className:"text-blue-500 animate-spin"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx(np,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),m.jsxs("div",{className:"text-center space-y-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),m.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),m.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&m.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:m.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),m.jsx("div",{className:"mt-8 w-full max-w-md",children:m.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),hO=A.createContext({});function KS(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const aH=typeof window<"u",pO=aH?A.useLayoutEffect:A.useEffect,WS=A.createContext(null);function gO(t,e){t.indexOf(e)===-1&&t.push(e)}function Yw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ko=(t,e,n)=>n>e?e:n<t?t:n;let mO=()=>{};const Al={},sH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function oH(t){return typeof t=="object"&&t!==null}const lH=t=>/^0[^.\s]+$/u.test(t);function vO(t){let e;return()=>(e===void 0&&(e=t()),e)}const Fa=t=>t,Zpe=(t,e)=>n=>e(t(n)),j0=(...t)=>t.reduce(Zpe),Bv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class yO{constructor(){this.subscriptions=[]}add(e){return gO(this.subscriptions,e),()=>Yw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Es=t=>t*1e3,Va=t=>t/1e3;function cH(t,e){return e?t*(1e3/e):0}const uH=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Jpe=1e-7,ege=12;function tge(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=uH(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Jpe&&++o<ege);return s}function z0(t,e,n,r){if(t===e&&n===r)return Fa;const i=a=>tge(a,0,1,t,n);return a=>a===0||a===1?a:uH(i(a),e,r)}const dH=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,fH=t=>e=>1-t(1-e),hH=z0(.33,1.53,.69,.99),bO=fH(hH),pH=dH(bO),gH=t=>(t*=2)<1?.5*bO(t):.5*(2-Math.pow(2,-10*(t-1))),xO=t=>1-Math.sin(Math.acos(t)),mH=fH(xO),vH=dH(xO),nge=z0(.42,0,1,1),rge=z0(0,0,.58,1),yH=z0(.42,0,.58,1),ige=t=>Array.isArray(t)&&typeof t[0]!="number",bH=t=>Array.isArray(t)&&typeof t[0]=="number",age={linear:Fa,easeIn:nge,easeInOut:yH,easeOut:rge,circIn:xO,circInOut:vH,circOut:mH,backIn:bO,backInOut:pH,backOut:hH,anticipate:gH},sge=t=>typeof t=="string",I5=t=>{if(bH(t)){mO(t.length===4);const[e,n,r,i]=t;return z0(e,n,r,i)}else if(sge(t))return age[t];return t},Qb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oge(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const lge=40;function xH(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Qb.reduce((P,D)=>(P[D]=oge(a),P),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:v,postRender:b}=s,x=()=>{const P=Al.useManualTiming?i.timestamp:performance.now();n=!1,Al.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(P-i.timestamp,lge),1)),i.timestamp=P,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Qb.reduce((P,D)=>{const O=s[D];return P[D]=(N,C=!1,I=!1)=>(n||w(),O.schedule(N,C,I)),P},{}),cancel:P=>{for(let D=0;D<Qb.length;D++)s[Qb[D]].cancel(P)},state:i,steps:s}}const{schedule:cn,cancel:iu,state:Yr,steps:jA}=xH(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fa,!0);let rw;function cge(){rw=void 0}const _i={now:()=>(rw===void 0&&_i.set(Yr.isProcessing||Al.useManualTiming?Yr.timestamp:performance.now()),rw),set:t=>{rw=t,queueMicrotask(cge)}},wH=t=>e=>typeof e=="string"&&e.startsWith(t),SH=wH("--"),uge=wH("var(--"),wO=t=>uge(t)?dge.test(t.split("/*")[0].trim()):!1,dge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function P5(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Yp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Fv={...Yp,transform:t=>ko(0,1,t)},Zb={...Yp,default:1},lv=t=>Math.round(t*1e5)/1e5,SO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fge(t){return t==null}const hge=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_O=(t,e)=>n=>!!(typeof n=="string"&&hge.test(n)&&n.startsWith(t)||e&&!fge(n)&&Object.prototype.hasOwnProperty.call(n,e)),_H=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(SO);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},pge=t=>ko(0,255,t),zA={...Yp,transform:t=>Math.round(pge(t))},bd={test:_O("rgb","red"),parse:_H("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+zA.transform(t)+", "+zA.transform(e)+", "+zA.transform(n)+", "+lv(Fv.transform(r))+")"};function gge(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const FI={test:_O("#"),parse:gge,transform:bd.transform},L0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Cc=L0("deg"),wo=L0("%"),qe=L0("px"),mge=L0("vh"),vge=L0("vw"),N5={...wo,parse:t=>wo.parse(t)/100,transform:t=>wo.transform(t*100)},Ih={test:_O("hsl","hue"),parse:_H("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+wo.transform(lv(e))+", "+wo.transform(lv(n))+", "+lv(Fv.transform(r))+")"},or={test:t=>bd.test(t)||FI.test(t)||Ih.test(t),parse:t=>bd.test(t)?bd.parse(t):Ih.test(t)?Ih.parse(t):FI.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bd.transform(t):Ih.transform(t),getAnimatableNone:t=>{const e=or.parse(t);return e.alpha=0,or.transform(e)}},yge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bge(t){return isNaN(t)&&typeof t=="string"&&(t.match(SO)?.length||0)+(t.match(yge)?.length||0)>0}const EH="number",TH="color",xge="var",wge="var(",D5="${}",Sge=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Uv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Sge,c=>(or.test(c)?(r.color.push(a),i.push(TH),n.push(or.parse(c))):c.startsWith(wge)?(r.var.push(a),i.push(xge),n.push(c)):(r.number.push(a),i.push(EH),n.push(parseFloat(c))),++a,D5)).split(D5);return{values:n,split:o,indexes:r,types:i}}function AH(t){return Uv(t).values}function kH(t){const{split:e,types:n}=Uv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===EH?a+=lv(i[s]):o===TH?a+=or.transform(i[s]):a+=i[s]}return a}}const _ge=t=>typeof t=="number"?0:or.test(t)?or.getAnimatableNone(t):t;function Ege(t){const e=AH(t);return kH(t)(e.map(_ge))}const au={test:bge,parse:AH,createTransformer:kH,getAnimatableNone:Ege};function LA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Tge({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=LA(c,o,t+1/3),a=LA(c,o,t),s=LA(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Xw(t,e){return n=>n>0?e:t}const Dn=(t,e,n)=>t+(e-t)*n,VA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Age=[FI,bd,Ih],kge=t=>Age.find(e=>e.test(t));function O5(t){const e=kge(t);if(!e)return!1;let n=e.parse(t);return e===Ih&&(n=Tge(n)),n}const R5=(t,e)=>{const n=O5(t),r=O5(e);if(!n||!r)return Xw(t,e);const i={...n};return a=>(i.red=VA(n.red,r.red,a),i.green=VA(n.green,r.green,a),i.blue=VA(n.blue,r.blue,a),i.alpha=Dn(n.alpha,r.alpha,a),bd.transform(i))},UI=new Set(["none","hidden"]);function Cge(t,e){return UI.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ige(t,e){return n=>Dn(t,e,n)}function EO(t){return typeof t=="number"?Ige:typeof t=="string"?wO(t)?Xw:or.test(t)?R5:Dge:Array.isArray(t)?CH:typeof t=="object"?or.test(t)?R5:Pge:Xw}function CH(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>EO(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function Pge(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=EO(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function Nge(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const Dge=(t,e)=>{const n=au.createTransformer(e),r=Uv(t),i=Uv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?UI.has(t)&&!i.values.length||UI.has(e)&&!r.values.length?Cge(t,e):j0(CH(Nge(r,i),i.values),n):Xw(t,e)};function IH(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Dn(t,e,n):EO(t)(t,e)}const Oge=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>cn.update(e,n),stop:()=>iu(e),now:()=>Yr.isProcessing?Yr.timestamp:_i.now()}},PH=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qw=2e4;function TO(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Qw;)e+=n,r=t.next(e);return e>=Qw?1/0:e}function Rge(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(TO(r),Qw);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Va(i)}}const Mge=5;function NH(t,e,n){const r=Math.max(e-Mge,0);return cH(n-t(r),e-r)}const Vn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},BA=.001;function jge({duration:t=Vn.duration,bounce:e=Vn.bounce,velocity:n=Vn.velocity,mass:r=Vn.mass}){let i,a,s=1-e;s=ko(Vn.minDamping,Vn.maxDamping,s),t=ko(Vn.minDuration,Vn.maxDuration,Va(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,v=$I(u,s),b=Math.exp(-h);return BA-g/v*b},a=u=>{const h=u*s*t,g=h*n+n,v=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=$I(Math.pow(u,2),s);return(-i(u)+BA>0?-1:1)*((g-v)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-BA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=Lge(i,a,o);if(t=Es(t),isNaN(c))return{stiffness:Vn.stiffness,damping:Vn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const zge=12;function Lge(t,e,n){let r=n;for(let i=1;i<zge;i++)r=r-t(r)/e(r);return r}function $I(t,e){return t*Math.sqrt(1-e*e)}const Vge=["duration","bounce"],Bge=["stiffness","damping","mass"];function M5(t,e){return e.some(n=>t[n]!==void 0)}function Fge(t){let e={velocity:Vn.velocity,stiffness:Vn.stiffness,damping:Vn.damping,mass:Vn.mass,isResolvedFromDuration:!1,...t};if(!M5(t,Bge)&&M5(t,Vge))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ko(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Vn.mass,stiffness:i,damping:a}}else{const n=jge(t);e={...e,...n,mass:Vn.mass},e.isResolvedFromDuration=!0}return e}function Zw(t=Vn.visualDuration,e=Vn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:v}=Fge({...n,velocity:-Va(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,S=Va(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Vn.restSpeed.granular:Vn.restSpeed.default),i||(i=T?Vn.restDelta.granular:Vn.restDelta.default);let P;if(x<1){const O=$I(S,x);P=N=>{const C=Math.exp(-x*S*N);return s-C*((b+x*S*w)/O*Math.sin(O*N)+w*Math.cos(O*N))}}else if(x===1)P=O=>s-Math.exp(-S*O)*(w+(b+S*w)*O);else{const O=S*Math.sqrt(x*x-1);P=N=>{const C=Math.exp(-x*S*N),I=Math.min(O*N,300);return s-C*((b+x*S*w)*Math.sinh(I)+O*w*Math.cosh(I))/O}}const D={calculatedDuration:v&&h||null,next:O=>{const N=P(O);if(v)o.done=O>=h;else{let C=O===0?b:0;x<1&&(C=O===0?Es(b):NH(P,O,N));const I=Math.abs(C)<=r,R=Math.abs(s-N)<=i;o.done=I&&R}return o.value=o.done?s:N,o},toString:()=>{const O=Math.min(TO(D),Qw),N=PH(C=>D.next(O*C).value,O,30);return O+"ms "+N},toTransition:()=>{}};return D}Zw.applyToOptions=t=>{const e=Rge(t,100,Zw);return t.ease=e.ease,t.duration=Es(e.duration),t.type="keyframes",t};function qI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},v=I=>o!==void 0&&I<o||c!==void 0&&I>c,b=I=>o===void 0?c:c===void 0||Math.abs(o-I)<Math.abs(c-I)?o:c;let x=n*e;const w=h+x,S=s===void 0?w:s(w);S!==w&&(x=S-h);const T=I=>-x*Math.exp(-I/r),P=I=>S+T(I),D=I=>{const R=T(I),j=P(I);g.done=Math.abs(R)<=u,g.value=g.done?S:j};let O,N;const C=I=>{v(g.value)&&(O=I,N=Zw({keyframes:[g.value,b(g.value)],velocity:NH(P,I,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return C(0),{calculatedDuration:null,next:I=>{let R=!1;return!N&&O===void 0&&(R=!0,D(I),C(I)),O!==void 0&&I>=O?N.next(I-O):(!R&&D(I),g)}}}function Uge(t,e,n){const r=[],i=n||Al.mix||IH,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Fa:e;o=j0(c,o)}r.push(o)}return r}function $ge(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(mO(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Uge(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=Bv(t[h],t[h+1],f);return o[h](g)};return n?f=>u(ko(t[0],t[a-1],f)):u}function qge(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Bv(0,e,r);t.push(Dn(n,1,i))}}function Gge(t){const e=[0];return qge(e,t.length-1),e}function Hge(t,e){return t.map(n=>n*e)}function Kge(t,e){return t.map(()=>e||yH).splice(0,t.length-1)}function cv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=ige(r)?r.map(I5):I5(r),a={done:!1,value:e[0]},s=Hge(n&&n.length===e.length?n:Gge(e),t),o=$ge(s,e,{ease:Array.isArray(i)?i:Kge(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const Wge=t=>t!==null;function AO(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Wge),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const Yge={decay:qI,inertia:qI,tween:cv,keyframes:cv,spring:Zw};function DH(t){typeof t.type=="string"&&(t.type=Yge[t.type])}class kO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Xge=t=>t/100;class CO extends kO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==_i.now()&&this.tick(_i.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;DH(e);const{type:n=cv,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||cv;c!==cv&&typeof o[0]!="number"&&(this.mixKeyframes=j0(Xge,IH(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=TO(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let P=this.currentTime,D=r;if(h){const I=Math.min(this.currentTime,i)/o;let R=Math.floor(I),j=I%1;!j&&I>=1&&(j=1),j===1&&R--,R=Math.min(R,h+1),R%2&&(g==="reverse"?(j=1-j,v&&(j-=v/o)):g==="mirror"&&(D=s)),P=ko(0,1,j)*o}const O=T?{done:!1,value:f[0]}:D.next(P);a&&(O.value=a(O.value));let{done:N}=O;!T&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return C&&b!==qI&&(O.value=AO(f,this.options,w,this.speed)),x&&x(O.value),C&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return Va(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Va(e)}get time(){return Va(this.currentTime)}set time(e){e=Es(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(_i.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Va(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Oge,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_i.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Qge(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const xd=t=>t*180/Math.PI,GI=t=>{const e=xd(Math.atan2(t[1],t[0]));return HI(e)},Zge={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:GI,rotateZ:GI,skewX:t=>xd(Math.atan(t[1])),skewY:t=>xd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},HI=t=>(t=t%360,t<0&&(t+=360),t),j5=GI,z5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),L5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Jge={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:z5,scaleY:L5,scale:t=>(z5(t)+L5(t))/2,rotateX:t=>HI(xd(Math.atan2(t[6],t[5]))),rotateY:t=>HI(xd(Math.atan2(-t[2],t[0]))),rotateZ:j5,rotate:j5,skewX:t=>xd(Math.atan(t[4])),skewY:t=>xd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function KI(t){return t.includes("scale")?1:0}function WI(t,e){if(!t||t==="none")return KI(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Jge,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Zge,i=o}if(!i)return KI(e);const a=r[e],s=i[1].split(",").map(tme);return typeof a=="function"?a(s):s[a]}const eme=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return WI(n,e)};function tme(t){return parseFloat(t.trim())}const Xp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qp=new Set(Xp),V5=t=>t===Yp||t===qe,nme=new Set(["x","y","z"]),rme=Xp.filter(t=>!nme.has(t));function ime(t){const e=[];return rme.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>WI(e,"x"),y:(t,{transform:e})=>WI(e,"y")};Vc.translateX=Vc.x;Vc.translateY=Vc.y;const Dd=new Set;let YI=!1,XI=!1,QI=!1;function OH(){if(XI){const t=Array.from(Dd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=ime(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}XI=!1,YI=!1,Dd.forEach(t=>t.complete(QI)),Dd.clear()}function RH(){Dd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(XI=!0)})}function ame(){QI=!0,RH(),OH(),QI=!1}class IO{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Dd.add(this),YI||(YI=!0,cn.read(RH),cn.resolveKeyframes(OH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Qge(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Dd.delete(this)}cancel(){this.state==="scheduled"&&(Dd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sme=t=>t.startsWith("--");function ome(t,e,n){sme(e)?t.style.setProperty(e,n):t.style[e]=n}const lme=vO(()=>window.ScrollTimeline!==void 0),cme={};function ume(t,e){const n=vO(t);return()=>cme[e]??n()}const MH=ume(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$m=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,B5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$m([0,.65,.55,1]),circOut:$m([.55,0,1,.45]),backIn:$m([.31,.01,.66,-.59]),backOut:$m([.33,1.53,.69,.99])};function jH(t,e){if(t)return typeof t=="function"?MH()?PH(t,e):"ease-out":bH(t)?$m(t):Array.isArray(t)?t.map(n=>jH(n,e)||B5.easeOut):B5[t]}function dme(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=jH(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function zH(t){return typeof t=="function"&&"applyToOptions"in t}function fme({type:t,...e}){return zH(t)&&MH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class LH extends kO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,mO(typeof e.type!="string");const u=fme(e);this.animation=dme(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=AO(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):ome(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Va(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Va(e)}get time(){return Va(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Es(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&lme()?(this.animation.timeline=e,Fa):n(this)}}const VH={anticipate:gH,backInOut:pH,circInOut:vH};function hme(t){return t in VH}function pme(t){typeof t.ease=="string"&&hme(t.ease)&&(t.ease=VH[t.ease])}const FA=10;class gme extends LH{constructor(e){pme(e),DH(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new CO({...s,autoplay:!1}),c=Math.max(FA,_i.now()-this.startTime),u=ko(0,FA,c-FA);n.setWithVelocity(o.sample(Math.max(0,c-u)).value,o.sample(c).value,u),o.stop()}}const F5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(au.test(t)||t==="0")&&!t.startsWith("url("));function mme(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function vme(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=F5(i,e),o=F5(a,e);return!s||!o?!1:mme(t)||(n==="spring"||zH(n))&&r}function ZI(t){t.duration=0,t.type="keyframes"}const yme=new Set(["opacity","clipPath","filter","transform"]),bme=vO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function xme(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return bme()&&n&&yme.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const wme=40;class Sme extends kO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=_i.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},v=f?.KeyframeResolver||IO;this.keyframeResolver=new v(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=_i.now(),vme(e,a,s,o)||((Al.instantAnimations||!c)&&f?.(AO(e,r,n)),e[0]=e[e.length-1],ZI(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>wme?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!u&&xme(g),b=g.motionValue?.owner?.current,x=v?new gme({...g,element:b}):new CO(g);x.finished.then(()=>{this.notifyFinished()}).catch(Fa),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ame()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function BH(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}const _me=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Eme(t){const e=_me.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function FH(t,e,n=1){const[r,i]=Eme(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return sH(s)?parseFloat(s):s}return wO(i)?FH(i,e,n+1):i}const Tme={type:"spring",stiffness:500,damping:25,restSpeed:10},Ame=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),kme={type:"keyframes",duration:.8},Cme={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ime=(t,{keyframes:e})=>e.length>2?kme:Qp.has(t)?t.startsWith("scale")?Ame(e[1]):Tme:Cme,Pme=t=>t!==null;function Nme(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Pme),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}function UH(t,e){if(t?.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function PO(t,e){const n=t?.[e]??t?.default??t;return n!==t?UH(n,t):n}function Dme({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const NO=(t,e,n,r={},i,a)=>s=>{const o=PO(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Es(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};Dme(o)||Object.assign(f,Ime(t,f)),f.duration&&(f.duration=Es(f.duration)),f.repeatDelay&&(f.repeatDelay=Es(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(ZI(f),f.delay===0&&(h=!0)),(Al.instantAnimations||Al.skipAnimations||i?.shouldSkipAnimations)&&(h=!0,ZI(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=Nme(f.keyframes,o);if(g!==void 0){cn.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new CO(f):new Sme(f)};function U5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function DO(t,e,n,r){if(typeof e=="function"){const[i,a]=U5(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=U5(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Kh(t,e,n){const r=t.getProps();return DO(r,e,n!==void 0?n:r.custom,t)}const $H=new Set(["width","height","top","left","right","bottom",...Xp]),$5=30,Ome=t=>!isNaN(parseFloat(t));class Rme{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=_i.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=_i.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ome(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new yO);const r=this.events[e].add(n);return e==="change"?()=>{r(),cn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_i.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>$5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$5);return cH(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xp(t,e){return new Rme(t,e)}const JI=t=>Array.isArray(t);function Mme(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,xp(n))}function jme(t){return JI(t)?t[t.length-1]||0:t}function OO(t,e){const n=Kh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=jme(a[s]);Mme(t,s,o)}}const di=t=>!!(t&&t.getVelocity);function zme(t){return!!(di(t)&&t.add)}function eP(t,e){const n=t.getValue("willChange");if(zme(n))return n.add(e);if(!n&&Al.WillChange){const r=new Al.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function RO(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Lme="framerAppearId",qH="data-"+RO(Lme);function GH(t){return t.props[qH]}function Vme({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function HH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a,transitionEnd:s,...o}=e;const c=t.getDefaultTransition();a=a?UH(a,c):c;const u=a?.reduceMotion;r&&(a=r);const f=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const g in o){const v=t.getValue(g,t.latestValues[g]??null),b=o[g];if(b===void 0||h&&Vme(h,g))continue;const x={delay:n,...PO(a||{},g)},w=v.get();if(w!==void 0&&!v.isAnimating&&!Array.isArray(b)&&b===w&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const D=GH(t);if(D){const O=window.MotionHandoffAnimation(D,g,cn);O!==null&&(x.startTime=O,S=!0)}}eP(t,g);const T=u??t.shouldReduceMotion;v.start(NO(g,v,b,T&&$H.has(g)?{type:!1}:x,t,S));const P=v.animation;P&&f.push(P)}if(s){const g=()=>cn.update(()=>{s&&OO(t,s)});f.length?Promise.all(f).then(g):g()}return f}function tP(t,e,n={}){const r=Kh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(HH(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return Bme(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function Bme(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(tP(c,e,{...s,delay:n+(typeof r=="function"?0:r)+BH(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function KH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>tP(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=tP(t,e,n);else{const i=typeof e=="function"?Kh(t,e,n.custom):e;r=Promise.all(HH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Fme={test:t=>t==="auto",parse:t=>t},WH=t=>e=>e.test(t),YH=[Yp,qe,wo,Cc,vge,mge,Fme],q5=t=>YH.find(WH(t));function Ume(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lH(t):!0}const $me=new Set(["brightness","contrast","saturate","opacity"]);function qme(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(SO)||[];if(!r)return t;const i=n.replace(r,"");let a=$me.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Gme=/\b([a-z-]*)\(.*?\)/gu,nP={...au,getAnimatableNone:t=>{const e=t.match(Gme);return e?e.map(qme).join(" "):t}},G5={...Yp,transform:Math.round},Hme={rotate:Cc,rotateX:Cc,rotateY:Cc,rotateZ:Cc,scale:Zb,scaleX:Zb,scaleY:Zb,scaleZ:Zb,skew:Cc,skewX:Cc,skewY:Cc,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:Fv,originX:N5,originY:N5,originZ:qe},MO={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,inset:qe,insetBlock:qe,insetBlockStart:qe,insetBlockEnd:qe,insetInline:qe,insetInlineStart:qe,insetInlineEnd:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,paddingBlock:qe,paddingBlockStart:qe,paddingBlockEnd:qe,paddingInline:qe,paddingInlineStart:qe,paddingInlineEnd:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,marginBlock:qe,marginBlockStart:qe,marginBlockEnd:qe,marginInline:qe,marginInlineStart:qe,marginInlineEnd:qe,fontSize:qe,backgroundPositionX:qe,backgroundPositionY:qe,...Hme,zIndex:G5,fillOpacity:Fv,strokeOpacity:Fv,numOctaves:G5},Kme={...MO,color:or,backgroundColor:or,outlineColor:or,fill:or,stroke:or,borderColor:or,borderTopColor:or,borderRightColor:or,borderBottomColor:or,borderLeftColor:or,filter:nP,WebkitFilter:nP},XH=t=>Kme[t];function QH(t,e){let n=XH(t);return n!==nP&&(n=au),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Wme=new Set(["auto","none","0"]);function Yme(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Wme.has(a)&&Uv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=QH(n,i)}class Xme extends IO{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),wO(h))){const g=FH(h,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!$H.has(r)||e.length!==2)return;const[i,a]=e,s=q5(i),o=q5(a),c=P5(i),u=P5(a);if(c!==u&&Vc[r]){this.needsMeasurement=!0;return}if(s!==o)if(V5(s)&&V5(o))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else Vc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Ume(e[i]))&&r.push(i);r.length&&Yme(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Vc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}const Qme=new Set(["opacity","clipPath","filter","transform"]);function ZH(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const JH=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function rP(t){return oH(t)&&"offsetHeight"in t}const{schedule:jO}=xH(queueMicrotask,!1),hs={x:!1,y:!1};function eK(){return hs.x||hs.y}function Zme(t){return t==="x"||t==="y"?hs[t]?null:(hs[t]=!0,()=>{hs[t]=!1}):hs.x||hs.y?null:(hs.x=hs.y=!0,()=>{hs.x=hs.y=!1})}function tK(t,e){const n=ZH(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Jme(t){return!(t.pointerType==="touch"||eK())}function eve(t,e,n={}){const[r,i,a]=tK(t,n);return r.forEach(s=>{let o=!1,c=!1,u;const f=()=>{s.removeEventListener("pointerleave",b)},h=w=>{u&&(u(w),u=void 0),f()},g=w=>{o=!1,window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),c&&(c=!1,h(w))},v=()=>{o=!0,window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",g,i)},b=w=>{if(w.pointerType!=="touch"){if(o){c=!0;return}h(w)}},x=w=>{if(!Jme(w))return;c=!1;const S=e(s,w);typeof S=="function"&&(u=S,s.addEventListener("pointerleave",b,i))};s.addEventListener("pointerenter",x,i),s.addEventListener("pointerdown",v,i)}),a}const nK=(t,e)=>e?t===e?!0:nK(t,e.parentElement):!1,zO=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,tve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nve(t){return tve.has(t.tagName)||t.isContentEditable===!0}const rve=new Set(["INPUT","SELECT","TEXTAREA"]);function ive(t){return rve.has(t.tagName)||t.isContentEditable===!0}const iw=new WeakSet;function H5(t){return e=>{e.key==="Enter"&&t(e)}}function UA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ave=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=H5(()=>{if(iw.has(n))return;UA(n,"down");const i=H5(()=>{UA(n,"up")}),a=()=>UA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function K5(t){return zO(t)&&!eK()}const W5=new WeakSet;function sve(t,e,n={}){const[r,i,a]=tK(t,n),s=o=>{const c=o.currentTarget;if(!K5(o)||W5.has(o))return;iw.add(c),n.stopPropagation&&W5.add(o);const u=e(c,o),f=(v,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),iw.has(c)&&iw.delete(c),K5(v)&&typeof u=="function"&&u(v,{success:b})},h=v=>{f(v,c===window||c===document||n.useGlobalTarget||nK(c,v.target))},g=v=>{f(v,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),rP(o)&&(o.addEventListener("focus",u=>ave(u,i)),!nve(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function LO(t){return oH(t)&&"ownerSVGElement"in t}const aw=new WeakMap;let sw;const rK=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:LO(r)&&"getBBox"in r?r.getBBox()[e]:r[n],ove=rK("inline","width","offsetWidth"),lve=rK("block","height","offsetHeight");function cve({target:t,borderBoxSize:e}){aw.get(t)?.forEach(n=>{n(t,{get width(){return ove(t,e)},get height(){return lve(t,e)}})})}function uve(t){t.forEach(cve)}function dve(){typeof ResizeObserver>"u"||(sw=new ResizeObserver(uve))}function fve(t,e){sw||dve();const n=ZH(t);return n.forEach(r=>{let i=aw.get(r);i||(i=new Set,aw.set(r,i)),i.add(e),sw?.observe(r)}),()=>{n.forEach(r=>{const i=aw.get(r);i?.delete(e),i?.size||sw?.unobserve(r)})}}const ow=new Set;let Ph;function hve(){Ph=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};ow.forEach(e=>e(t))},window.addEventListener("resize",Ph)}function pve(t){return ow.add(t),Ph||hve(),()=>{ow.delete(t),!ow.size&&typeof Ph=="function"&&(window.removeEventListener("resize",Ph),Ph=void 0)}}function Y5(t,e){return typeof t=="function"?pve(t):fve(t,e)}function gve(t){return LO(t)&&t.tagName==="svg"}const mve=[...YH,or,au],vve=t=>mve.find(WH(t)),X5=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nh=()=>({x:X5(),y:X5()}),Q5=()=>({min:0,max:0}),vr=()=>({x:Q5(),y:Q5()}),yve=new WeakMap;function YS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $v(t){return typeof t=="string"||Array.isArray(t)}const VO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],BO=["initial",...VO];function XS(t){return YS(t.animate)||BO.some(e=>$v(t[e]))}function iK(t){return!!(XS(t)||t.variants)}function bve(t,e,n){for(const r in e){const i=e[r],a=n[r];if(di(i))t.addValue(r,i);else if(di(a))t.addValue(r,xp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,xp(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const iP={current:null},aK={current:!1},xve=typeof window<"u";function wve(){if(aK.current=!0,!!xve)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>iP.current=t.matches;t.addEventListener("change",e),e()}else iP.current=!1}const Z5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Jw={};function sK(t){Jw=t}function Sve(){return Jw}class _ve{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=IO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=_i.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,cn.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=XS(n),this.isVariantNode=iK(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in g){const b=g[v];u[v]!==void 0&&di(b)&&b.set(u[v])}}mount(e){if(this.hasBeenMounted)for(const n in this.initialValues)this.values.get(n)?.jump(this.initialValues[n]),this.latestValues[n]=this.initialValues[n];this.current=e,yve.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(aK.current||wve(),this.shouldReduceMotion=iP.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),iu(this.notifyUpdate),iu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&Qme.has(e)&&this.current instanceof HTMLElement){const{factory:s,keyframes:o,times:c,ease:u,duration:f}=n.accelerate,h=new LH({element:this.current,name:e,keyframes:o,times:c,ease:u,duration:Es(f)}),g=s(h);this.valueSubscriptions.set(e,()=>{g(),h.cancel()});return}const r=Qp.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&cn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Jw){const n=Jw[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Z5.length;r++){const i=Z5[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=bve(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=xp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(sH(r)||lH(r))?r=parseFloat(r):!vve(r)&&au.test(n)&&(r=QH(e,n)),this.setBaseTarget(e,di(r)?r.get():r)),di(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=DO(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!di(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new yO),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){jO.render(this.render)}}class oK extends _ve{constructor(){super(...arguments),this.KeyframeResolver=Xme}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;di(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class mu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function lK({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Eve({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Tve(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function $A(t){return t===void 0||t===1}function aP({scale:t,scaleX:e,scaleY:n}){return!$A(t)||!$A(e)||!$A(n)}function id(t){return aP(t)||cK(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function cK(t){return J5(t.x)||J5(t.y)}function J5(t){return t&&t!=="0%"}function e1(t,e,n){const r=t-n,i=e*r;return n+i}function eV(t,e,n,r,i){return i!==void 0&&(t=e1(t,i,r)),e1(t,n,r)+e}function sP(t,e=0,n=1,r,i){t.min=eV(t.min,e,n,r,i),t.max=eV(t.max,e,n,r,i)}function uK(t,{x:e,y:n}){sP(t.x,e.translate,e.scale,e.originPoint),sP(t.y,n.translate,n.scale,n.originPoint)}const tV=.999999999999,nV=1.0000000000001;function Ave(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Oh(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,uK(t,s)),r&&id(a.latestValues)&&Oh(t,a.latestValues))}e.x<nV&&e.x>tV&&(e.x=1),e.y<nV&&e.y>tV&&(e.y=1)}function Dh(t,e){t.min=t.min+e,t.max=t.max+e}function rV(t,e,n,r,i=.5){const a=Dn(t.min,t.max,i);sP(t,e,n,a,r)}function Oh(t,e){rV(t.x,e.x,e.scaleX,e.scale,e.originX),rV(t.y,e.y,e.scaleY,e.scale,e.originY)}function dK(t,e){return lK(Tve(t.getBoundingClientRect(),e))}function kve(t,e,n){const r=dK(t,n),{scroll:i}=e;return i&&(Dh(r.x,i.offset.x),Dh(r.y,i.offset.y)),r}const Cve={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ive=Xp.length;function Pve(t,e,n){let r="",i=!0;for(let a=0;a<Ive;a++){const s=Xp[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number")c=o===(s.startsWith("scale")?1:0);else{const u=parseFloat(o);c=s.startsWith("scale")?u===1:u===0}if(!c||n){const u=JH(o,MO[s]);if(!c){i=!1;const f=Cve[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function FO(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(Qp.has(c)){s=!0;continue}else if(SH(c)){i[c]=u;continue}else{const f=JH(u,MO[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=Pve(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}function fK(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function iV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Sm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(qe.test(t))t=parseFloat(t);else return t;const n=iV(t,e.target.x),r=iV(t,e.target.y);return`${n}% ${r}%`}},Nve={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=au.parse(t);if(i.length>5)return r;const a=au.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=Dn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}},oP={borderRadius:{...Sm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sm,borderTopRightRadius:Sm,borderBottomLeftRadius:Sm,borderBottomRightRadius:Sm,boxShadow:Nve};function hK(t,{layout:e,layoutId:n}){return Qp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!oP[t]||t==="opacity")}function UO(t,e,n){const r=t.style,i=e?.style,a={};if(!r)return a;for(const s in r)(di(r[s])||i&&di(i[s])||hK(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(a[s]=r[s]);return a}function Dve(t){return window.getComputedStyle(t)}class Ove extends oK{constructor(){super(...arguments),this.type="html",this.renderInstance=fK}readValueFromInstance(e,n){if(Qp.has(n))return this.projection?.isProjecting?KI(n):eme(e,n);{const r=Dve(e),i=(SH(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return dK(e,n)}build(e,n,r){FO(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return UO(e,n,r)}}const Rve={offset:"stroke-dashoffset",array:"stroke-dasharray"},Mve={offset:"strokeDashoffset",array:"strokeDasharray"};function jve(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Rve:Mve;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const zve=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function pK(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(FO(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox);for(const v of zve)h[v]!==void 0&&(g[v]=h[v],delete h[v]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&jve(h,i,a,s,!1)}const gK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),mK=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Lve(t,e,n,r){fK(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(gK.has(i)?i:RO(i),e.attrs[i])}function vK(t,e,n){const r=UO(t,e,n);for(const i in t)if(di(t[i])||di(e[i])){const a=Xp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}class Vve extends oK{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=vr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qp.has(n)){const r=XH(n);return r&&r.default||0}return n=gK.has(n)?n:RO(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return vK(e,n,r)}build(e,n,r){pK(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Lve(e,n,r,i)}mount(e){this.isSVGTag=mK(e.tagName),super.mount(e)}}const Bve=BO.length;function yK(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?yK(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Bve;n++){const r=BO[n],i=t.props[r];($v(i)||i===!1)&&(e[r]=i)}return e}function bK(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Fve=[...VO].reverse(),Uve=VO.length;function $ve(t){return e=>Promise.all(e.map(({animation:n,options:r})=>KH(t,n,r)))}function qve(t){let e=$ve(t),n=aV(),r=!0;const i=c=>(u,f)=>{const h=Kh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=yK(t.parent)||{},h=[],g=new Set;let v={},b=1/0;for(let w=0;w<Uve;w++){const S=Fve[w],T=n[S],P=u[S]!==void 0?u[S]:f[S],D=$v(P),O=S===c?T.isActive:null;O===!1&&(b=w);let N=P===f[S]&&P!==u[S]&&D;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),T.protectedKeys={...v},!T.isActive&&O===null||!P&&!T.prevProp||YS(P)||typeof P=="boolean")continue;if(S==="exit"&&T.isActive&&O!==!0){T.prevResolvedValues&&(v={...v,...T.prevResolvedValues});continue}const C=Gve(T.prevProp,P);let I=C||S===c&&T.isActive&&!N&&D||w>b&&D,R=!1;const j=Array.isArray(P)?P:[P];let B=j.reduce(i(S),{});O===!1&&(B={});const{prevResolvedValues:L={}}=T,z={...L,...B},W=Y=>{I=!0,g.has(Y)&&(R=!0,g.delete(Y)),T.needsAnimating[Y]=!0;const J=t.getValue(Y);J&&(J.liveStyle=!1)};for(const Y in z){const J=B[Y],ie=L[Y];if(v.hasOwnProperty(Y))continue;let X=!1;JI(J)&&JI(ie)?X=!bK(J,ie):X=J!==ie,X?J!=null?W(Y):g.add(Y):J!==void 0&&g.has(Y)?W(Y):T.protectedKeys[Y]=!0}T.prevProp=P,T.prevResolvedValues=B,T.isActive&&(v={...v,...B}),r&&t.blockInitialAnimation&&(I=!1);const Q=N&&C;I&&(!Q||R)&&h.push(...j.map(Y=>{const J={type:S};if(typeof Y=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:ie}=t,X=Kh(ie,Y);if(ie.enteringChildren&&X){const{delayChildren:U}=X.transition||{};J.delay=BH(ie.enteringChildren,t,U)}}return{animation:Y,options:J}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const S=Kh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(w.transition=S.transition)}g.forEach(S=>{const T=t.getBaseTarget(S),P=t.getValue(S);P&&(P.liveStyle=!0),w[S]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=aV()}}}function Gve(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!bK(e,t):!1}function Qu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aV(){return{animate:Qu(!0),whileInView:Qu(),whileHover:Qu(),whileTap:Qu(),whileDrag:Qu(),whileFocus:Qu(),exit:Qu()}}function sV(t,e){t.min=e.min,t.max=e.max}function ds(t,e){sV(t.x,e.x),sV(t.y,e.y)}function oV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const xK=1e-4,Hve=1-xK,Kve=1+xK,wK=.01,Wve=0-wK,Yve=0+wK;function Ei(t){return t.max-t.min}function Xve(t,e,n){return Math.abs(t-e)<=n}function lV(t,e,n,r=.5){t.origin=r,t.originPoint=Dn(e.min,e.max,t.origin),t.scale=Ei(n)/Ei(e),t.translate=Dn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Hve&&t.scale<=Kve||isNaN(t.scale))&&(t.scale=1),(t.translate>=Wve&&t.translate<=Yve||isNaN(t.translate))&&(t.translate=0)}function uv(t,e,n,r){lV(t.x,e.x,n.x,r?r.originX:void 0),lV(t.y,e.y,n.y,r?r.originY:void 0)}function cV(t,e,n){t.min=n.min+e.min,t.max=t.min+Ei(e)}function Qve(t,e,n){cV(t.x,e.x,n.x),cV(t.y,e.y,n.y)}function uV(t,e,n){t.min=e.min-n.min,t.max=t.min+Ei(e)}function t1(t,e,n){uV(t.x,e.x,n.x),uV(t.y,e.y,n.y)}function dV(t,e,n,r,i){return t-=e,t=e1(t,1/n,r),i!==void 0&&(t=e1(t,1/i,r)),t}function Zve(t,e=0,n=1,r=.5,i,a=t,s=t){if(wo.test(e)&&(e=parseFloat(e),e=Dn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Dn(a.min,a.max,r);t===a&&(o-=e),t.min=dV(t.min,e,n,o,i),t.max=dV(t.max,e,n,o,i)}function fV(t,e,[n,r,i],a,s){Zve(t,e[n],e[r],e[i],e.scale,a,s)}const Jve=["x","scaleX","originX"],e0e=["y","scaleY","originY"];function hV(t,e,n,r){fV(t.x,e,Jve,n?n.x:void 0,r?r.x:void 0),fV(t.y,e,e0e,n?n.y:void 0,r?r.y:void 0)}function pV(t){return t.translate===0&&t.scale===1}function SK(t){return pV(t.x)&&pV(t.y)}function gV(t,e){return t.min===e.min&&t.max===e.max}function t0e(t,e){return gV(t.x,e.x)&&gV(t.y,e.y)}function mV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function _K(t,e){return mV(t.x,e.x)&&mV(t.y,e.y)}function vV(t){return Ei(t.x)/Ei(t.y)}function yV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function so(t){return[t("x"),t("y")]}function n0e(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:v,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const EK=["TopLeft","TopRight","BottomLeft","BottomRight"],r0e=EK.length,bV=t=>typeof t=="string"?parseFloat(t):t,xV=t=>typeof t=="number"||qe.test(t);function i0e(t,e,n,r,i,a){i?(t.opacity=Dn(0,n.opacity??1,a0e(r)),t.opacityExit=Dn(e.opacity??1,0,s0e(r))):a&&(t.opacity=Dn(e.opacity??1,n.opacity??1,r));for(let s=0;s<r0e;s++){const o=`border${EK[s]}Radius`;let c=wV(e,o),u=wV(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||xV(c)===xV(u)?(t[o]=Math.max(Dn(bV(c),bV(u),r),0),(wo.test(u)||wo.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Dn(e.rotate||0,n.rotate||0,r))}function wV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const a0e=TK(0,.5,mH),s0e=TK(.5,.95,Fa);function TK(t,e,n){return r=>r<t?0:r>e?1:n(Bv(t,e,r))}function o0e(t,e,n){const r=di(t)?t:xp(t);return r.start(NO("",r,e,n)),r.animation}function qv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const l0e=(t,e)=>t.depth-e.depth;class c0e{constructor(){this.children=[],this.isDirty=!1}add(e){gO(this.children,e),this.isDirty=!0}remove(e){Yw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(l0e),this.isDirty=!1,this.children.forEach(e)}}function u0e(t,e){const n=_i.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(iu(r),t(a-e))};return cn.setup(r,!0),()=>iu(r)}function lw(t){return di(t)?t.get():t}class d0e{constructor(){this.members=[]}add(e){gO(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&Yw(this.members,r)}e.scheduleRender()}remove(e){if(Yw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i],s=a.instance;if(a.isPresent!==!1&&(!s||s.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,a=e.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const cw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},qA=["","X","Y","Z"],f0e=1e3;let h0e=0;function GA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function AK(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=GH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",cn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&AK(r)}function kK({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=h0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(m0e),this.nodes.forEach(x0e),this.nodes.forEach(w0e),this.nodes.forEach(v0e)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new c0e)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new yO),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=LO(s)&&!gve(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;cn.read(()=>{h=window.innerWidth}),t(s,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,f&&f(),f=u0e(g,250),cw.hasAnimatedSinceResize&&(cw.hasAnimatedSinceResize=!1,this.nodes.forEach(EV)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||A0e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),S=!this.targetLayout||!_K(this.targetLayout,v),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...PO(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(f,T)}else h||EV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),iu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S0e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&AK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_V);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(b0e),this.nodes.forEach(p0e),this.nodes.forEach(g0e)):this.nodes.forEach(_V),this.clearAllSnapshots();const o=_i.now();Yr.delta=ko(0,1e3/60,o-Yr.timestamp),Yr.timestamp=o,Yr.isProcessing=!0,jA.update.process(Yr),jA.preRender.process(Yr),jA.render.process(Yr),Yr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(y0e),this.sharedNodes.forEach(_0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ei(this.snapshot.measuredBox.x)&&!Ei(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=vr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!SK(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||id(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),k0e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return vr();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(C0e))){const{scroll:u}=this.root;u&&(Dh(o.x,u.offset.x),Dh(o.y,u.offset.y))}return o}removeElementScroll(s){const o=vr();if(ds(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ds(o,s),Dh(o.x,f.offset.x),Dh(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=vr();ds(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Oh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),id(f.latestValues)&&Oh(c,f.latestValues)}return id(this.latestValues)&&Oh(c,this.latestValues),c}removeTransform(s){const o=vr();ds(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!id(u.latestValues))continue;aP(u.latestValues)&&u.updateSnapshot();const f=vr(),h=u.measurePageBox();ds(f,h),hV(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return id(this.latestValues)&&hV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!this.layout||!(f||h))return;this.resolvedRelativeTargetAt=Yr.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=vr(),this.targetWithTransforms=vr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qve(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ds(this.target,this.layout.layoutBox),uK(this.target,this.targetDelta)):ds(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||aP(this.parent.latestValues)||cK(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,c){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vr(),this.relativeTargetOrigin=vr(),t1(this.relativeTargetOrigin,o,c),ds(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Yr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;ds(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;Ave(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=vr());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oV(this.prevProjectionDelta.x,this.projectionDelta.x),oV(this.prevProjectionDelta.y,this.projectionDelta.y)),uv(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!yV(this.projectionDelta.x,this.prevProjectionDelta.x)||!yV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nh(),this.projectionDelta=Nh(),this.projectionDeltaWithTransform=Nh()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=Nh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=vr(),v=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,w=this.getStack(),S=!w||w.members.length<=1,T=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(T0e));this.animationProgress=0;let P;this.mixTargetDelta=D=>{const O=D/1e3;TV(h.x,s.x,O),TV(h.y,s.y,O),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(t1(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),E0e(this.relativeTarget,this.relativeTargetOrigin,g,O),P&&t0e(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=vr()),ds(P,this.relativeTarget)),x&&(this.animationValues=f,i0e(f,u,this.latestValues,O,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(iu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cn.update(()=>{cw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xp(0)),this.currentAnimation=o0e(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(f0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&CK(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||vr();const h=Ei(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=Ei(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}ds(o,c),Oh(o,f),uv(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new d0e),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&GA("z",s,u,this.animationValues);for(let f=0;f<qA.length;f++)GA(`rotate${qA[f]}`,s,u,this.animationValues),GA(`skew${qA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=lw(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=lw(o?.pointerEvents)||""),this.hasProjected&&!id(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=n0e(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:v}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in oP){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=oP[b],T=h==="none"?f[b]:x(f[b],u);if(w){const P=w.length;for(let D=0;D<P;D++)s[w[D]]=T}else S?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=u===this?lw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(SV),this.root.sharedNodes.clear()}}}function p0e(t){t.updateLayout()}function g0e(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?so(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=Ei(h);h.min=n[f].min,h.max=h.min+g}):CK(i,e.layoutBox,n)&&so(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=Ei(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=Nh();uv(s,n,e.layoutBox);const o=Nh();a?uv(o,t.applyTransform(r,!0),e.measuredBox):uv(o,n,e.layoutBox);const c=!SK(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const v=vr();t1(v,e.layoutBox,h.layoutBox);const b=vr();t1(b,n,g.layoutBox),_K(v,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function m0e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function v0e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function y0e(t){t.clearSnapshot()}function SV(t){t.clearMeasurements()}function _V(t){t.isLayoutDirty=!1}function b0e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function EV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function x0e(t){t.resolveTargetDelta()}function w0e(t){t.calcProjection()}function S0e(t){t.resetSkewAndRotation()}function _0e(t){t.removeLeadSnapshot()}function TV(t,e,n){t.translate=Dn(e.translate,0,n),t.scale=Dn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AV(t,e,n,r){t.min=Dn(e.min,n.min,r),t.max=Dn(e.max,n.max,r)}function E0e(t,e,n,r){AV(t.x,e.x,n.x,r),AV(t.y,e.y,n.y,r)}function T0e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const A0e={duration:.45,ease:[.4,0,.1,1]},kV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),CV=kV("applewebkit/")&&!kV("chrome/")?Math.round:Fa;function IV(t){t.min=CV(t.min),t.max=CV(t.max)}function k0e(t){IV(t.x),IV(t.y)}function CK(t,e,n){return t==="position"||t==="preserve-aspect"&&!Xve(vV(e),vV(n),.2)}function C0e(t){return t!==t.root&&t.scroll?.wasRoot}const I0e=kK({attachResizeListener:(t,e)=>qv(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),HA={current:void 0},IK=kK({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!HA.current){const t=new I0e({});t.mount(window),t.setOptions({layoutScroll:!0}),HA.current=t}return HA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$O=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function PV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function P0e(...t){return e=>{let n=!1;const r=t.map(i=>{const a=PV(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():PV(t[i],null)}}}}function N0e(...t){return A.useCallback(P0e(...t),t)}class D0e extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=rP(r)&&r.offsetWidth||0,a=rP(r)&&r.offsetHeight||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function O0e({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:a}){const s=A.useId(),o=A.useRef(null),c=A.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=A.useContext($O),f=t.props?.ref??t?.ref,h=N0e(o,f);return A.useInsertionEffect(()=>{const{width:g,height:v,top:b,left:x,right:w,bottom:S}=c.current;if(e||a===!1||!o.current||!g||!v)return;const T=n==="left"?`left: ${x}`:`right: ${w}`,P=r==="bottom"?`bottom: ${S}`:`top: ${b}`;o.current.dataset.motionPopId=s;const D=document.createElement("style");u&&(D.nonce=u);const O=i??document.head;return O.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${v}px !important;
            ${T}px !important;
            ${P}px !important;
          }
        `),()=>{O.contains(D)&&O.removeChild(D)}},[e]),m.jsx(D0e,{isPresent:e,childRef:o,sizeRef:c,pop:a,children:a===!1?t:A.cloneElement(t,{ref:h})})}const R0e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,anchorY:c,root:u})=>{const f=KS(M0e),h=A.useId();let g=!0,v=A.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:b=>{f.set(b,!0);for(const x of f.values())if(!x)return;r&&r()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,r]);return a&&g&&(v={...v}),A.useMemo(()=>{f.forEach((b,x)=>f.set(x,!1))},[n]),A.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),t=m.jsx(O0e,{pop:s==="popLayout",isPresent:n,anchorX:o,anchorY:c,root:u,children:t}),m.jsx(WS.Provider,{value:v,children:t})};function M0e(){return new Map}function PK(t=!0){const e=A.useContext(WS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const Jb=t=>t.key||"";function NV(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const fr=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",anchorY:c="top",root:u})=>{const[f,h]=PK(s),g=A.useMemo(()=>NV(t),[t]),v=s&&!f?[]:g.map(Jb),b=A.useRef(!0),x=A.useRef(g),w=KS(()=>new Map),S=A.useRef(new Set),[T,P]=A.useState(g),[D,O]=A.useState(g);pO(()=>{b.current=!1,x.current=g;for(let I=0;I<D.length;I++){const R=Jb(D[I]);v.includes(R)?(w.delete(R),S.current.delete(R)):w.get(R)!==!0&&w.set(R,!1)}},[D,v.length,v.join("-")]);const N=[];if(g!==T){let I=[...g];for(let R=0;R<D.length;R++){const j=D[R],B=Jb(j);v.includes(B)||(I.splice(R,0,j),N.push(j))}return a==="wait"&&N.length&&(I=N),O(NV(I)),P(g),null}const{forceRender:C}=A.useContext(hO);return m.jsx(m.Fragment,{children:D.map(I=>{const R=Jb(I),j=s&&!f?!1:g===D||v.includes(R),B=()=>{if(S.current.has(R))return;if(S.current.add(R),w.has(R))w.set(R,!0);else return;let L=!0;w.forEach(z=>{z||(L=!1)}),L&&(C?.(),O(x.current),s&&h?.(),r&&r())};return m.jsx(R0e,{isPresent:j,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:j?void 0:B,anchorX:o,anchorY:c,children:I},R)})})},NK=A.createContext({strict:!1}),DV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let OV=!1;function j0e(){if(OV)return;const t={};for(const e in DV)t[e]={isEnabled:n=>DV[e].some(r=>!!n[r])};sK(t),OV=!0}function DK(){return j0e(),Sve()}function z0e(t){const e=DK();for(const n in t)e[n]={...e[n],...t[n]};sK(e)}const L0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function n1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||L0e.has(t)}let OK=t=>!n1(t);function V0e(t){typeof t=="function"&&(OK=e=>e.startsWith("on")?!n1(e):t(e))}try{V0e(require("@emotion/is-prop-valid").default)}catch{}function B0e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(OK(i)||n===!0&&n1(i)||!e&&!n1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const QS=A.createContext({});function F0e(t,e){if(XS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$v(n)?n:void 0,animate:$v(r)?r:void 0}}return t.inherit!==!1?e:{}}function U0e(t){const{initial:e,animate:n}=F0e(t,A.useContext(QS));return A.useMemo(()=>({initial:e,animate:n}),[RV(e),RV(n)])}function RV(t){return Array.isArray(t)?t.join(" "):t}const qO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RK(t,e,n){for(const r in e)!di(e[r])&&!hK(r,n)&&(t[r]=e[r])}function $0e({transformTemplate:t},e){return A.useMemo(()=>{const n=qO();return FO(n,e,t),Object.assign({},n.vars,n.style)},[e])}function q0e(t,e){const n=t.style||{},r={};return RK(r,n,t),Object.assign(r,$0e(t,e)),r}function G0e(t,e){const n={},r=q0e(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const MK=()=>({...qO(),attrs:{}});function H0e(t,e,n,r){const i=A.useMemo(()=>{const a=MK();return pK(a,e,mK(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};RK(a,t.style,t),i.style={...a,...i.style}}return i}const K0e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function GO(t){return typeof t!="string"||t.includes("-")?!1:!!(K0e.indexOf(t)>-1||/[A-Z]/u.test(t))}function W0e(t,e,n,{latestValues:r},i,a=!1,s){const c=(s??GO(t)?H0e:G0e)(e,r,i,t),u=B0e(e,typeof t=="string",a),f=t!==A.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=A.useMemo(()=>di(h)?h.get():h,[h]);return A.createElement(t,{...f,children:g})}function Y0e({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:X0e(n,r,i,t),renderState:e()}}function X0e(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=lw(a[g]);let{initial:s,animate:o}=t;const c=XS(t),u=iK(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!YS(h)){const g=Array.isArray(h)?h:[h];for(let v=0;v<g.length;v++){const b=DO(t,g[v]);if(b){const{transitionEnd:x,transition:w,...S}=b;for(const T in S){let P=S[T];if(Array.isArray(P)){const D=f?P.length-1:0;P=P[D]}P!==null&&(i[T]=P)}for(const T in x)i[T]=x[T]}}}return i}const jK=t=>(e,n)=>{const r=A.useContext(QS),i=A.useContext(WS),a=()=>Y0e(t,e,r,i);return n?a():KS(a)},Q0e=jK({scrapeMotionValuesFromProps:UO,createRenderState:qO}),Z0e=jK({scrapeMotionValuesFromProps:vK,createRenderState:MK}),J0e=Symbol.for("motionComponentSymbol");function eye(t,e,n){const r=A.useRef(n);A.useInsertionEffect(()=>{r.current=n});const i=A.useRef(null);return A.useCallback(a=>{a&&t.onMount?.(a),e&&(a?e.mount(a):e.unmount());const s=r.current;if(typeof s=="function")if(a){const o=s(a);typeof o=="function"&&(i.current=o)}else i.current?(i.current(),i.current=null):s(a);else s&&(s.current=a)},[e])}const zK=A.createContext({});function Eh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function tye(t,e,n,r,i,a){const{visualElement:s}=A.useContext(QS),o=A.useContext(NK),c=A.useContext(WS),u=A.useContext($O),f=u.reducedMotion,h=u.skipAnimations,g=A.useRef(null),v=A.useRef(!1);r=r||o.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:s,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f,skipAnimations:h,isSVG:a}),v.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const b=g.current,x=A.useContext(zK);b&&!b.projection&&i&&(b.type==="html"||b.type==="svg")&&nye(g.current,n,i,x);const w=A.useRef(!1);A.useInsertionEffect(()=>{b&&w.current&&b.update(n,c)});const S=n[qH],T=A.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return pO(()=>{v.current=!0,b&&(w.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),T.current&&b.animationState&&b.animationState.animateChanges())}),A.useEffect(()=>{b&&(!T.current&&b.animationState&&b.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),T.current=!1),b.enteringChildren=void 0)}),b}function nye(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:LK(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Eh(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function LK(t){if(t)return t.options.allowProjection!==!1?t.projection:LK(t.parent)}function KA(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&z0e(r);const a=n?n==="svg":GO(t),s=a?Z0e:Q0e;function o(u,f){let h;const g={...A.useContext($O),...u,layoutId:rye(u)},{isStatic:v}=g,b=U0e(u),x=s(u,v);if(!v&&aH){iye();const w=aye(g);h=w.MeasureLayout,b.visualElement=tye(t,x,g,i,w.ProjectionNode,a)}return m.jsxs(QS.Provider,{value:b,children:[h&&b.visualElement?m.jsx(h,{visualElement:b.visualElement,...g}):null,W0e(t,u,eye(x,b.visualElement,f),x,v,e,a)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=A.forwardRef(o);return c[J0e]=t,c}function rye({layoutId:t}){const e=A.useContext(hO).id;return e&&t!==void 0?e+"-"+t:t}function iye(t,e){A.useContext(NK).strict}function aye(t){const e=DK(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n?.isEnabled(t)||r?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function sye(t,e){if(typeof Proxy>"u")return KA;const n=new Map,r=(a,s)=>KA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,KA(s,void 0,t,e)),n.get(s))})}const oye=(t,e)=>e.isSVG??GO(t)?new Vve(e):new Ove(e,{allowProjection:t!==A.Fragment});class lye extends mu{constructor(e){super(e),e.animationState||(e.animationState=qve(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();YS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let cye=0;class uye extends mu{constructor(){super(...arguments),this.id=cye++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const dye={animation:{Feature:lye},exit:{Feature:uye}};function V0(t){return{point:{x:t.pageX,y:t.pageY}}}const fye=t=>e=>zO(e)&&t(e,V0(e));function dv(t,e,n,r){return qv(t,e,fye(n),r)}const VK=({current:t})=>t?t.ownerDocument.defaultView:null,MV=(t,e)=>Math.abs(t-e);function hye(t,e){const n=MV(t.x,e.x),r=MV(t.y,e.y);return Math.sqrt(n**2+r**2)}const jV=new Set(["auto","scroll"]);class BK{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=YA(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=hye(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:w}=v,{timestamp:S}=Yr;this.history.push({...w,timestamp:S});const{onStart:T,onMove:P}=this.handlers;b||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=WA(b,this.transformPagePoint),cn.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:x,onSessionEnd:w,resumeAnimation:S}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=YA(v.type==="pointercancel"?this.lastMoveEventInfo:WA(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,T),w&&w(v,T)},!zO(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const c=V0(e),u=WA(c,this.transformPagePoint),{point:f}=u,{timestamp:h}=Yr;this.history=[{...f,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,YA(u,this.history)),this.removeListeners=j0(dv(this.contextWindow,"pointermove",this.handlePointerMove),dv(this.contextWindow,"pointerup",this.handlePointerUp),dv(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(jV.has(r.overflowX)||jV.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-n.x,y:i.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),cn.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),iu(this.updatePoint)}}function WA(t,e){return e?{point:e(t.point)}:t}function zV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function YA({point:t},e){return{point:t,delta:zV(t,FK(e)),offset:zV(t,pye(e)),velocity:gye(e,.1)}}function pye(t){return t[0]}function FK(t){return t[t.length-1]}function gye(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=FK(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Es(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>Es(e)*2&&(r=t[1]);const a=Va(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function mye(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Dn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Dn(n,t,r.max):Math.min(t,n)),t}function LV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vye(t,{top:e,left:n,bottom:r,right:i}){return{x:LV(t.x,n,i),y:LV(t.y,e,r)}}function VV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function yye(t,e){return{x:VV(t.x,e.x),y:VV(t.y,e.y)}}function bye(t,e){let n=.5;const r=Ei(t),i=Ei(e);return i>r?n=Bv(e.min,e.max-r,t.min):r>i&&(n=Bv(t.min,t.max-i,e.min)),ko(0,1,n)}function xye(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const lP=.35;function wye(t=lP){return t===!1?t=0:t===!0&&(t=lP),{x:BV(t,"left","right"),y:BV(t,"top","bottom")}}function BV(t,e,n){return{min:FV(t,e),max:FV(t,n)}}function FV(t,e){return typeof t=="number"?t:t[e]||0}const Sye=new WeakMap;class _ye{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{n&&this.snapToCursor(V0(h).point),this.stopAnimation()},s=(h,g)=>{const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Zme(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),so(S=>{let T=this.getAxisMotionValue(S).get()||0;if(wo.test(T)){const{projection:P}=this.visualElement;if(P&&P.layout){const D=P.layout.layoutBox[S];D&&(T=Ei(D)*(parseFloat(T)/100))}}this.originPoint[S]=T}),x&&cn.update(()=>x(h,g),!1,!0),eP(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:S}=g;if(b&&this.currentDirection===null){this.currentDirection=Tye(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),w&&cn.update(()=>w(h,g),!1,!0)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:f}=this.getProps();this.panSession=new BK(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:VK(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&cn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ex(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=mye(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Eh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=vye(r.layoutBox,e):this.constraints=!1,this.elastic=wye(n),i!==this.constraints&&!Eh(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&so(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=xye(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Eh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=kve(r,i.root,this.visualElement.getTransformPagePoint());let s=yye(i.layout.layoutBox,a);if(n){const o=n(Eve(s));this.hasMutatedConstraints=!!o,o&&(s=lK(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=so(f=>{if(!ex(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return eP(this.visualElement,e),r.start(NO(e,r,0,n,this.visualElement,!1))}stopAnimation(){so(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){so(n=>{const{drag:r}=this.getProps();if(!ex(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-Dn(s,o,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Eh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};so(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=bye({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),so(s=>{if(!ex(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Dn(c,u,i[s]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Sye.set(this.visualElement,this);const e=this.visualElement.current,n=dv(e,"pointerdown",u=>{const{drag:f,dragListener:h=!0}=this.getProps(),g=u.target,v=g!==e&&ive(g);f&&h&&!v&&this.start(u)});let r;const i=()=>{const{dragConstraints:u}=this.getProps();Eh(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=Eye(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),cn.read(i);const o=qv(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(so(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=lP,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function UV(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function Eye(t,e,n){const r=Y5(t,UV(n)),i=Y5(e,UV(n));return()=>{r(),i()}}function ex(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Tye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Aye extends mu{constructor(e){super(e),this.removeGroupControls=Fa,this.removeListeners=Fa,this.controls=new _ye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fa}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const XA=t=>(e,n)=>{t&&cn.update(()=>t(e,n),!1,!0)};class kye extends mu{constructor(){super(...arguments),this.removePointerDownListener=Fa}onPointerDown(e){this.session=new BK(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VK(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:XA(e),onStart:XA(n),onMove:XA(r),onEnd:(a,s)=>{delete this.session,i&&cn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=dv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let QA=!1;class Cye extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),QA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),cw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,e.layoutDependency!==n&&s.setOptions({...s.options,layoutDependency:n}),QA=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||cn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;QA=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function UK(t){const[e,n]=PK(),r=A.useContext(hO);return m.jsx(Cye,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(zK),isPresent:e,safeToRemove:n})}const Iye={pan:{Feature:kye},drag:{Feature:Aye,ProjectionNode:IK,MeasureLayout:UK}};function $V(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&cn.postRender(()=>a(e,V0(e)))}class Pye extends mu{mount(){const{current:e}=this.node;e&&(this.unmount=eve(e,(n,r)=>($V(this.node,r,"Start"),i=>$V(this.node,i,"End"))))}unmount(){}}class Nye extends mu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=j0(qv(this.node.current,"focus",()=>this.onFocus()),qv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&cn.postRender(()=>a(e,V0(e)))}class Dye extends mu{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=sve(e,(i,a)=>(qV(this.node,a,"Start"),(s,{success:o})=>qV(this.node,s,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:r?.tap===!1})}unmount(){}}const cP=new WeakMap,ZA=new WeakMap,Oye=t=>{const e=cP.get(t.target);e&&e(t)},Rye=t=>{t.forEach(Oye)};function Mye({root:t,...e}){const n=t||document;ZA.has(n)||ZA.set(n,{});const r=ZA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Rye,{root:t,...e})),r[i]}function jye(t,e,n){const r=Mye(e);return cP.set(t,n),r.observe(t),()=>{cP.delete(t),r.unobserve(t)}}const zye={some:0,all:1};class Lye extends mu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:zye[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return jye(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Vye(e,n))&&this.startObserver()}unmount(){}}function Vye({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Bye={inView:{Feature:Lye},tap:{Feature:Dye},focus:{Feature:Nye},hover:{Feature:Pye}},Fye={layout:{ProjectionNode:IK,MeasureLayout:UK}},Uye={...dye,...Bye,...Iye,...Fye},xt=sye(Uye,oye);function $ye(t){t.values.forEach(e=>e.stop())}function uP(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&OO(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{uP(a,e)})})}function qye(t,e){if(Array.isArray(e))return uP(t,e);if(typeof e=="string")return uP(t,[e]);OO(t,e)}function Gye(){const t=new Set,e={subscribe(n){return t.add(n),()=>{t.delete(n)}},start(n,r){const i=[];return t.forEach(a=>{i.push(KH(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{qye(r,n)})},stop(){t.forEach(n=>{$ye(n)})},mount(){return()=>{e.stop()}}};return e}function Hye(){const t=KS(Gye);return pO(t.mount,[]),t}const Kye=Hye,vu=oD((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),tx=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=vu(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return m.jsx(fr,{children:n&&m.jsx(xt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:m.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[m.jsx("div",{className:"flex items-center flex-1 min-w-0",children:m.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),m.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&m.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[m.jsx(nue,{size:12,className:"inline mr-1"}),"Undo"]}),m.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:m.jsx(S0,{size:14})})]})]})})})};class oa extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){$.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[m.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:m.jsx(Ad,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[m.jsx(tp,{className:"h-4 w-4"}),"Try Again"]}),m.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[m.jsx(_ce,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Wye=({onAddTransaction:t})=>{const e=Qa(),n=Rs(),[r,i]=A.useState(!1),a=A.useRef(null),s=u=>n.pathname===u;A.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:m.jsx(kw,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:m.jsx(vd,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:m.jsx(dq,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return m.jsxs("button",{onClick:v=>{v.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[m.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),m.jsx("span",{className:"sr-only",children:h}),g&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return m.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:m.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[m.jsx(c,{path:"/",label:"Budget",icon:m.jsx(np,{className:"w-6 h-6"})}),m.jsx(c,{path:"/transactions",label:"Transactions",icon:m.jsx(Ace,{className:"w-6 h-6"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:m.jsx(uf,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsxs("div",{className:"relative",ref:a,children:[m.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[m.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:m.jsx(fce,{className:"w-6 h-6"})}),m.jsx("span",{className:"sr-only",children:"More"}),r&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&m.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:m.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>m.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[m.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),m.jsx(c,{path:"/settings",label:"Settings",icon:m.jsx(qce,{className:"w-6 h-6"})})]})})};function Yye(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Xye(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function pl(t,e){return function(n){n&&(t[e]=n)}}function $K(t,e,n){return function(r){r&&(t[e][n]=r)}}function GV(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function Qye(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var Zye="function",Jye="object",ebe="string",tbe="number",HO="undefined",qK=typeof window!==HO,nbe=typeof document!==HO&&document,rbe=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],lr=1e-7,nx={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function ibe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function r1(t,e,n,r){return(t*r+e*n)/(n+r)}function ZS(t){return typeof t===HO}function Is(t){return t&&typeof t===Jye}function hr(t){return Array.isArray(t)}function Wi(t){return typeof t===ebe}function wp(t){return typeof t===tbe}function KO(t){return typeof t===Zye}function abe(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function GK(t,e,n,r,i){var a=WO(t,e,n);return a?n:sbe(t,e,n+1,r,i)}function WO(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function sbe(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!WO(t,e,u))return{value:u};var h=u,g=Yi(i,function(v){var b=v.open;return b===f});if(g&&(h=GK(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function YO(t,e){var n=Wi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?rbe:u,h=f.map(function(C){var I=C.open,R=C.close;return I===R?I:I+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",v=new RegExp(g,"g"),b=t.split(v).filter(function(C){return C&&C!=="undefined"}),x=b.length,w=[],S=[];function T(){return S.length?(w.push(S.join("")),S=[],!0):!1}for(var P=function(C){var I=b[C].trim(),R=C,j=Yi(f,function(z){var W=z.open;return W===I}),B=Yi(f,function(z){var W=z.close;return W===I});if(j){if(R=GK(j,b,C,x,f),R!==-1&&c)return T()&&a||(w.push(b.slice(C,R+1).join("")),C=R,a)?(D=C,"break"):(D=C,"continue")}else if(B&&!WO(B,b,C)){var L=ibe(f);return L.splice(f.indexOf(B),1),{value:YO(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:L})}}else if(abe(I,i)&&!s)return T(),a?(D=C,"break"):(D=C,"continue");R===-1&&(R=x-1),S.push(b.slice(C,R+1).join("")),C=R,D=C},D,O=0;O<x;++O){var N=P(O);if(O=D,typeof N=="object")return N.value;if(N==="break")break}return S.length&&w.push(S.join("")),w}function su(t){return YO(t,"")}function wd(t){return YO(t,",")}function HK(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function B0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function obe(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function uw(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Gv(){return Date.now?Date.now():new Date().getTime()}function kl(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Yi(t,e,n){var r=kl(t,e);return r>-1?t[r]:n}var KK=(function(){var t=Gv(),e=qK&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Gv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),lbe=(function(){var t=qK&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function Cl(t){return Object.keys(t)}function cbe(t){var e=Cl(t);return e.map(function(n){return t[n]})}function tn(t,e){var n=B0(t),r=n.value,i=n.unit;if(Is(e)){var a=e[i];if(a){if(KO(a))return a(r);if(nx[i])return nx[i](r,a)}}else if(i==="%")return r*e/100;return nx[i]?nx[i](r):r}function dP(t,e,n){return Math.max(e,Math.min(t,n))}function HV(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[lt(e[0],lr),lt(e[0]/r,lr)],[lt(e[1]*r,lr),lt(e[1],lr)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=lt(o,lr);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function WK(t,e,n,r){if(!r)return t.map(function(v,b){return dP(v,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=HV(t,e,!1,s),c=o[0],u=o[1],f=HV(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function ube(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function fP(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Qn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function dbe(t){return[0,1].map(function(e){return fP(t.map(function(n){return n[e]}))})}function KV(t){var e=dbe(t),n=Qn(e,t[0]),r=Qn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function gl(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function lt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function WV(t,e){return t.forEach(function(n,r){t[r]=lt(t[r],e)}),t}function fbe(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function YK(t){return t.reduce(function(e,n){return e.concat(n)},[])}function XK(t,e){t.indexOf(e)===-1&&t.push(e)}function xr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function QK(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function ZK(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Kr(t,e,n,r){t.addEventListener(e,n,r)}function mr(t,e,n,r){t.removeEventListener(e,n,r)}function Zp(t){return t?.ownerDocument||nbe}function XO(t){return Zp(t).documentElement}function yu(t){return Zp(t).body}function Yc(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function JK(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Jp(t){return Is(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var hbe=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),pbe=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),gbe=typeof Map=="function",mbe=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function vbe(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new mbe;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var ybe=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=vbe(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function F0(t,e,n){var r=gbe?Map:n?pbe:hbe,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],v=[],b={},x=[],w=0,S=0;return c.forEach(function(T,P){f.set(T,P)}),u.forEach(function(T,P){h.set(T,P)}),c.forEach(function(T,P){var D=h.get(T);typeof D>"u"?(++S,s.push(P)):b[D]=S}),u.forEach(function(T,P){var D=f.get(T);typeof D>"u"?(a.push(P),++w):(o.push([D,P]),S=b[P]||0,g.push([D-S,P-w]),v.push(P===D),D!==P&&x.push([D,P]))}),s.reverse(),new ybe(t,e,a,s,x,o,g,v)}var bbe=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=F0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),hP=function(t,e){return hP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},hP(t,e)};function U0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var po=function(){return po=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},po.apply(this,arguments)};function eW(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function YV(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function XV(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function tW(t){var e=[];return t.forEach(function(n){e=e.concat(hr(n)?tW(n):n)}),e}function JA(t,e){if(!e)return t;for(var n in e)ZS(t[n])&&(t[n]=e[n]);return t}function i1(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function QV(t){var e=t.className,n=eW(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function ZV(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function JS(t){if(!t)return null;var e=t.b;return Jp(e)?e:JS(t.c)}function nW(t){var e=t.parentNode;e&&e.removeChild(t)}function rW(t){t.forEach(function(e){e()})}function xbe(){return this.constructor(this.props,this.context)}var QO=0,e_=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=cbe(r).filter(function(b){return b.$_req}),f=tW(u.map(function(b){return b.$_subs})),h=Yi(f,function(b){return b.d===c});if(o.b&&!Wi(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){$0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var v=o.ps;return Wi(i)||(o.ps=i.props,o.ref=i.ref),ZO(this),o.r(n,r,o.b?v:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function iW(){return Object.__CROACT_CURRENT_INSTNACE__}function wbe(){return QO}function Sbe(t){QO=t}function ZO(t){return Object.__CROACT_CURRENT_INSTNACE__=t,QO=0,t}var JO=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=po(po({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=$0(a.c,[a],[a.o],i,a._cs,po(po({},this.state),this.$_state),r);s&&(n&&i.push(n),rW(i),ZO(null))},t})(),aW=(function(t){U0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return i1(this.props,r)||i1(this.state,i)},e})(JO);function sW(t){var e=function(n){e.current=n};return e.current=t,e}function _be(t){return t._fr=!0,t}function Ebe(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new JO(e,n),a.constructor=t,t._fr?(r.fr=sW(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=xbe),a.$_p=r,a}var Tbe=(function(t){U0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,JA(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(JA(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=JA(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,v=c.b,b=g?.get(c);c._cs=i,h?(v=Ebe(u,f,b,c),c.b=v):(v.props=f,v.context=b);var x=v.state;c._usefs=[],c._uefs=[];var w=v.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var S=po(po({},i),v.$_cs);$0(c,c._ps,w?[w]:[],r,S),h?c._uefs.push(function(){g?.register(c),v.componentDidMount()}):c._uefs.push(function(){v.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(e_);function Abe(t,e,n){var r=e2(QV(t),QV(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function kbe(t,e,n){var r=e2(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function e2(t,e){var n=Cl(t),r=Cl(e),i=F0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function Cbe(t,e,n){var r=n.style,i=e2(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=uw(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=uw(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=uw(c,"-");r.removeProperty(h)}}function Ibe(t){return t.replace(/^on/g,"").toLowerCase()}var Pbe=(function(t){U0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=Ibe(r);i?(mr(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},Kr(o,c,s[r]))},n.s=function(r){return i1(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=JS(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],v=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=Zp(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",v):g=b.createElement(v)}o.b=g}$0(o,o._ps,u.children,r,i);var x=o.b,w=ZV(a),S=w[0],T=w[1],P=ZV(u),D=P[0],O=P[1];return Abe(S,D,x),kbe(T,O,o),Cbe(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)mr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||nW(a)},e})(e_);function Hv(t){if(!t||Jp(t))return t;var e=t.$_p._ps;return e.length?Hv(e[0].b):null}function oW(t){if(t){if(t.b&&Jp(t.b))return t;var e=t._ps;return e.length?oW(e[0]):null}}function Ts(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=eW(i,["key","ref"]);return{type:t,key:a,ref:s,props:po(po({},o),{children:YK(n).filter(function(c){return c!=null&&c!==!1})})}}var lW=(function(t){U0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(e_),Nbe=(function(t){U0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=JS(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||Zp(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){nW(this.b)},e})(e_);function Dbe(t,e,n){var r=n.map(function(c){return Wi(c)?null:c.key}),i=XV(e.map(function(c){return c.k})),a=XV(r),s=F0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=Hv(h.b),v=Hv(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,v)}),s.added.forEach(function(c){e.splice(c,0,JV(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=Wi(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,JV(f,r[u],u,t)),!0):(h.i=u,!1)});return YV(YV([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function Obe(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Hv(n[i].b);if(a)return a}return null}function JV(t,e,n,r){var i=r.d+1;if(Wi(t)||wp(t))return new Nbe("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?Pbe:Tbe;return new s(a,i,e,n,r,t.ref,t.props)}function $0(t,e,n,r,i,a,s){var o=Dbe(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=oW(h);g&&(g._sel=!0)}),t._hyd=null;var f=JS(t);return f&&o.reverse().forEach(function(h){var g=e[h],v=Hv(g.b);if(v&&f!==v&&!v.parentNode){var b=Obe(t,g);f.insertBefore(v,b)}}),u.length>0}function Rbe(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new lW(e));var a=[];return $0(n,n._ps,t?[t]:[],a,r,void 0,void 0),rW(a),ZO(null),i||(e.__CROACT__=n),n}function eB(t,e,n){return!n&&t&&(n=new lW(e.parentElement),n._hyd=[e],n._sel=!0),Rbe(t,e,n),n}function cW(t){var e=iW(),n=e._hs||(e._hs=[]),r=wbe(),i=n[r];if(Sbe(r+1),i){if(!i1(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function Mbe(t,e){var n=cW({func:t,deps:e});return n.value}function jbe(t){return Mbe(function(){return sW(t)},[])}function uW(t,e,n){var r=iW(),i=cW({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function zbe(t,e,n){uW(function(){t?.(e())},n,!0)}function t2(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function dW(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function fW(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function n2(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Lbe(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Vbe(t,e){var n=n2("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function pP(t){return t.replace(/_/g,".")}function qm(t,e){var n=null,r="-1";return t2(t,function(i){var a=n2("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=Vbe(i.versionTest.toLowerCase(),e)||r),r=pP(r),!0)}),{preset:n,version:r}}function rx(t,e){var n={brand:"",version:"-1"};return t2(t,function(r){var i=hW(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function hW(t,e){return dW(t,function(n){var r=n.brand;return n2(""+e.test,r.toLowerCase())})}var pW=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],gW=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],gP=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],mW=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],vW=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function yW(t){return!!qm(mW,t).preset}function Bbe(t){var e=fW(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:yW(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=qm(pW,e),s=a.preset,o=a.version,c=qm(vW,e),u=c.preset,f=c.version,h=qm(gW,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=qm(gP,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function Fbe(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!rx(mW,n).brand||yW(fW())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&t2(gP,function(g){return hW(n,g)});var c=rx(gW,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=rx(gP,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=dW(vW,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=rx(pW,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=pP(o.version),s.version=pP(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function Ube(t){return Lbe()?Fbe():Bbe(t)}function $be(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function qbe(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function Gbe(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function bW(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Co(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=yn(e),i=0;i<e;++i){var a=e*i+i;if(!lt(n[a],lr)){for(var s=i+1;s<e;++s)if(n[e*i+s]){qbe(n,r,i,s,e);break}}if(!lt(n[a],lr))return[];Gbe(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!lt(u,lr)||i===s||$be(n,r,o,i,e,-u)}}return r}function Hbe(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function xW(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Kbe(t,e){for(var n=yn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Kd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Ps(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=yn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function a1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=yn(t);return e.forEach(function(i){r=nn(r,i,t)}),r}function nn(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Nt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function tt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Wbe(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function wW(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function pi(t,e,n){n===void 0&&(n=e.length);var r=nn(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function Ybe(t,e){return nn(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Xbe(t,e){return nn(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Qbe(t,e){return nn(t,G0(e,4))}function ix(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return nn(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function q0(t,e){return pi(G0(e,3),Kd(t,3))}function ek(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return nn(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function tB(t,e){return nn(t,e,4)}function G0(t,e){var n=Math.cos(t),r=Math.sin(t),i=yn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function yn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function r2(t,e){for(var n=yn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Wd(t,e){for(var n=yn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function i2(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],v=n[1],b=r[0],x=r[1],w=i[0],S=i[1],T=a[0],P=a[1],D=s[0],O=s[1],N=o[0],C=o[1],I=[c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,-w*c,-S*c,-T*f,-P*f,-D*g,-O*g,-N*b,-C*b,-w*u,-S*u,-T*h,-P*h,-D*v,-O*v,-N*x,-C*x],R=Co(I,8);if(!R.length)return[];var j=nn(R,[w,S,T,P,D,O,N,C],8);return j[8]=1,Ps(Hbe(j),3,4)}var fv=function(){return fv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fv.apply(this,arguments)};function Zbe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Kv(t,e){return e===void 0&&(e=0),Th(Sp(t,e))}function Jbe(t,e){var n=pi(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Th(t){var e=Zbe();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function Sp(t,e){e===void 0&&(e=0);var n=hr(t)?t:su(t);return n.map(function(r){var i=HK(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=Is(e)?fv(fv({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=wd(s).map(function(z,W){return W===0&&"x%"in f?f["%"]=e["x%"]:W===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],tn(z,f)}),g=h[0],v=h[1],b=v===void 0?0:v,x=h[2],w=x===void 0?0:x;o=ek,u=[g,b,w]}else if(a==="translateY"){var S=Is(e)?fv({"%":e["y%"]},e):{"%":e},b=tn(s,S);o=ek,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=ek,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=wd(s).map(function(z){return parseFloat(z)}),P=T[0],D=T[1],O=D===void 0?P:D,N=T[2],C=N===void 0?1:N;o=ix,u=[P,O,C]}else if(a==="scaleX"){var P=parseFloat(s);o=ix,u=[P,1,1]}else if(a==="scaleY"){var O=parseFloat(s);o=ix,u=[1,O,1]}else if(a==="scaleZ"){var C=parseFloat(s);o=ix,u=[1,1,C]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var I=B0(s),R=I.unit,j=I.value,B=R==="rad"?j:j*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=Qbe):a==="rotateX"?o=Ybe:a==="rotateY"&&(o=Xbe),u=B}else if(a==="matrix3d")o=tB,u=wd(s).map(function(z){return parseFloat(z)});else if(a==="matrix"){var L=wd(s).map(function(z){return parseFloat(z)});o=tB,u=[L[0],L[1],0,0,L[2],L[3],0,0,0,0,1,0,L[4],L[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var mP=function(t,e){return mP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},mP(t,e)};function exe(t,e){mP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var SW=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),_W=(function(t){exe(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,SW)||this}return e})(bbe);function txe(t,e){return F0(t,e,SW)}var vP=function(){return vP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vP.apply(this,arguments)};function nxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var t_=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Is(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Is(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=kl(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,nxe(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(vP({listener:r},i))},t})();var yP=function(t,e){return yP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},yP(t,e)};function rxe(t,e){yP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Rh=function(){return Rh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rh.apply(this,arguments)};function ixe(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function nB(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function ax(t){if(t){if(Wi(t))return document.querySelector(t)}else return null;if(KO(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var axe=(function(t){rxe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=ax(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(Rh(Rh({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),v=g[0]-s[0],b=g[1]-s[1],x=o||[v?Math.abs(v)/v:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!v&&!b?!1:(this.emit("move",{offsetX:x[0]?v:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?ixe:s;return o({container:ax(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=Gv(),v=Math.max(c+this._prevTime-g,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:ax(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(Rh(Rh({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?nB:i,s=ax(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=nB(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(t_);function sxe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Li(t){return lt(t,lr)}function oxe(t,e){return t.every(function(n,r){return Li(n-e[r])===0})}function lxe(t,e){return!Li(t[0]-e[0])&&!Li(t[1]-e[1])}function EW(t){return t.length<3?0:Math.abs(ube(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function rB(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Yd(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(v){return[i+(v[0]-o)*h,a+(v[1]-c)*g]})}function Yd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function bP(t,e,n){var r=t[0],i=t[1],a=Yd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=s1(c[0],c[1]),f=xP(e),h=[];if(f.forEach(function(b){var x=s1(b[0],b[1]),w=b[0];if(oxe(u,x))h.push({pos:t,line:b,type:"line"});else{var S=TW(a2(u,x),[c,b]);S.forEach(function(T){b.some(function(P){return lxe(P,T)})?h.push({pos:T,line:b,type:"point"}):Li(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),Yi(h,function(b){return b[0]===r}))return!0;var g=0,v={};return h.forEach(function(b){var x=b.pos,w=b.type,S=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=Yi(S,function(O){return O[1]!==i}),P=v[x[0]],D=T[1]>i?1:-1;P?P!==D&&++g:v[x[0]]=D}}}),g%2===1}function s1(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<lr&&(s=0),Math.abs(o)<lr&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function a2(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var v=-i/n,b=-o/a;return v!==b?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(S){return[S[0],S[1]]})}function TW(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Li(a-t[1][0])){if(!Li(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(Li(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(Li(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],v=h[1];return n.every(function(b){return 0<=Li(g-b[0][0])&&0<=Li(b[0][1]-g)&&0<=Li(v-b[1][0])&&0<=Li(b[1][1]-v)})})),r.map(function(h){return[Li(h[0]),Li(h[1])]})}function xP(t){return sxe(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function cxe(t,e){var n=t.slice(),r=e.slice();KV(n)===-1&&n.reverse(),KV(r)===-1&&r.reverse();var i=xP(n),a=xP(r),s=i.map(function(f){return s1(f[0],f[1])}),o=a.map(function(f){return s1(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],v=[];o.forEach(function(b,x){var w=a2(f,b),S=TW(w,[g,a[x]]);v.push.apply(v,S.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),v.sort(function(b,x){return gl(g[0],b.pos)-gl(g[0],x.pos)}),c.push.apply(c,v),bP(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(bP(f[1],n)){var g=!1,v=kl(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});v===-1&&(g=!1,v=kl(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),v===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(v,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function uxe(t,e){var n=cxe(t,e);return n.map(function(r){var i=r.pos;return i})}function dxe(t,e){var n=uxe(t,e);return EW(n)}var wP=function(t,e){return wP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},wP(t,e)};function fxe(t,e){wP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ar=function(){return ar=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ar.apply(this,arguments)};function hxe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function tk(t){return hxe([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function pxe(t){return t.touches&&t.touches.length>=2}function sx(t){return t?t.touches?mxe(t.touches):[AW(t)]:[]}function gxe(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function iB(t,e,n){var r=n.length,i=hv(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=hv(e,r),f=u.clientX,h=u.clientY,g=hv(n,r),v=g.clientX,b=g.clientY,x=a-f,w=s-h,S=a-v,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:S,distY:T}}function nk(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function mxe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(AW(t[r]));return n}function AW(t){return{clientX:t.clientX,clientY:t.clientY}}function hv(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var rk=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),tk(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),tk(e)-tk(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=iB(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=iB([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=hv(e,this.length),i=hv(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),nk(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),nk(e)/nk(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),aB=["textarea","input"],vxe=(function(t){fxe(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,v){if(v===void 0&&(v=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,S=x.pinchOutside,T=x.preventWheelClick,P=x.preventRightClick,D=x.preventDefault,O=x.checkInput,N=x.dragFocusedInput,C=x.preventClickEventOnDragStart,I=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,j=i._useTouch,B=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||P&&(g.which===3||g.button===2))return i.stop(),!1;if(B){var L=i._window.document.activeElement,z=g.target;if(z){var W=z.tagName.toLowerCase(),Q=aB.indexOf(W)>-1,G=z.isContentEditable;if(Q||G){if(O||!N&&L===z)return!1;if(L&&(L===z||G&&L.isContentEditable&&L.contains(z)))if(N)z.blur();else return!1}else if((D||g.type==="touchstart")&&L){var Y=L.tagName.toLowerCase();(L.isContentEditable||aB.indexOf(Y)>-1)&&L.blur()}(C||I||R)&&Kr(i._window,"click",i._onClick,!0)}i.clientStores=[new rk(sx(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=Gv()-i.prevTime<200,i._isMouseEvent=gxe(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var J=i._preventMouseEvent||i.emit("dragStart",ar(ar({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));J===!1&&i.stop(),i._isMouseEvent&&i.flag&&D&&g.preventDefault()}if(!i.flag)return!1;var ie=0;if(B?(i._attchDragEvent(),j&&S&&(ie=setTimeout(function(){Kr(w,"touchstart",i.onDragStart,{passive:!1})}))):j&&S&&mr(w,"touchstart",i.onDragStart),i.flag&&pxe(g)){if(clearTimeout(ie),B&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,v){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=sx(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var S=i._preventMouseEvent||i.emit("drag",ar(ar({},w),{isScroll:!!v,inputEvent:g}));if(S===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var v=i.options,b=v.pinchOutside,x=v.container,w=v.preventClickEventOnDrag,S=v.preventClickEventOnDragStart,T=v.preventClickEventByCondition,P=i.isDrag;(w||S||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!S&&w&&!P&&i._allowClickEvent(),i._useTouch&&b&&mr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var D=g?.touches?sx(g):[],O=D.length;O===0||!i.options.keepDragging?i.flag=!1:i._addStore(new rk(D));var N=i._getPosition(),C=Gv(),I=!P&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=P||I?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",ar({data:i.data,datas:i.data,isDouble:I,isDrag:P,isClick:!P,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},N)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){mr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var v=i.options.preventClickEventByCondition;v?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var v=i.options;v.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=JK(s)?s:Yc(s),i.options=ar({checkInput:!1,container:s&&!("document"in s)?Yc(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Kr(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Kr(g,"mousedown",i.onDragStart),Kr(g,"mousemove",i._passCallback)}),Kr(c,"contextmenu",i._onContextMenu)),f&&Kr(Yc(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Kr(g,"touchstart",i.onDragStart,h),Kr(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),ar(ar({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),mr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){mr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){mr(a,"mousedown",n.onDragStart)}),mr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){mr(a,"touchstart",n.onDragStart)}),mr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new rk(sx(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",ar(ar({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",ar(ar({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",ar(ar({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),ar(ar({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return ar(ar({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Kr(r,"dragover",this.onDrag,i),Kr(n,"dragend",this.onDragEnd)),this._useMouse&&(Kr(r,"mousemove",this.onDrag),Kr(n,"mouseup",this.onDragEnd)),this._useTouch&&(Kr(r,"touchmove",this.onDrag,i),Kr(n,"touchend",this.onDragEnd,i),Kr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(mr(r,"dragover",this.onDrag),mr(n,"dragend",this.onDragEnd)),this._useMouse&&(mr(r,"mousemove",this.onDrag),mr(n,"mouseup",this.onDragEnd)),this._useTouch&&(mr(r,"touchstart",this.onDragStart),mr(r,"touchmove",this.onDrag),mr(n,"touchend",this.onDragEnd),mr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(t_);function yxe(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var bxe=yxe;function xxe(t){return bxe(t).toString(36)}function wxe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Sxe(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?wd(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function _xe(t,e,n,r,i){var a=Zp(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=Sxe(t,e,n),(i||a.head||a.body).appendChild(s),s}function Exe(t){var e="rCS"+xxe(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=wxe(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=_xe(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var SP=function(){return SP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},SP.apply(this,arguments)};function Txe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kW(t,e){var n=Exe(e),r=n.className;return _be(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=Txe(i,["className","cspNonce"]),u=jbe();return zbe(a,function(){return u.current},[]),uW(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),Ts(t,SP({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var _P=function(t,e){return _P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},_P(t,e)};function H0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_P(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ae=function(){return ae=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ae.apply(this,arguments)};function Axe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kxe(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function Cxe(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Re(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function K0(t,e){return ae({events:[],props:[],name:t},e)}var Ixe=["n","w","s","e"],s2=["n","w","s","e","nw","ne","sw","se"];function Pxe(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function Nxe(t){var e=Pxe(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var eg=Ube(),CW=eg.browser.webkit,IW=CW&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),PW=eg.browser.name,NW=parseInt(eg.browser.version,10),Dxe=PW==="chrome",Oxe=eg.browser.chromium,Rxe=parseInt(eg.browser.chromiumVersion,10)||0,Mxe=Dxe&&NW>=109||Oxe&&Rxe>=109,jxe=PW==="firefox",zxe=parseInt(eg.browser.webkitVersion,10)>=612||NW>=15,o2="moveable-",Lxe=s2.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),Vxe=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Lxe,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(Nxe(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(IW?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Bxe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],EP=1e-4,Ci=1e-7,ox=1e-9,TP=Math.pow(10,10),sB=-TP,Fxe={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},l2={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},DW={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},OW=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function W0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return ae(ae({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var _p=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ae(ae({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Wh(t,e,n,r){var i=t.length===16,a=i?4:3,s=hf(t,n,r,a),o=le(s,4),c=le(o[0],2),u=c[0],f=c[1],h=le(o[1],2),g=h[0],v=h[1],b=le(o[2],2),x=b[0],w=b[1],S=le(o[3],2),T=S[0],P=S[1],D=le(Pn(t,e,a),2),O=D[0],N=D[1],C=Math.min(u,g,x,T),I=Math.min(f,v,w,P),R=Math.max(u,g,x,T),j=Math.max(f,v,w,P);u=u-C||0,g=g-C||0,x=x-C||0,T=T-C||0,f=f-I||0,v=v-I||0,w=w-I||0,P=P-I||0,O=O-C||0,N=N-I||0;var B=t[0],L=t[a+1],z=wi(B*L);return{left:C,top:I,right:R,bottom:j,origin:[O,N],pos1:[u,f],pos2:[g,v],pos3:[x,w],pos4:[T,P],direction:z}}function RW(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,v=le(tt(Ap(o,[n-f,r-h],g),u),2),b=v[0],x=v[1],w=le(Ro({datas:i,distX:b,distY:x}),2),S=w[0],T=w[1];return[S,T]}function ff(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=Co(i,v),n.inverseBeforeMatrix=Co(a,v),n.absoluteOrigin=Kd(Nt([o,c],u),v),n.startDragBeforeDist=pi(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=pi(n.inverseMatrix,n.absoluteOrigin,v)}function Uxe(t){return Wh(t.datas.beforeTransform,[50,50],100,100).direction}function n_(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=kl(s,function(v){return v.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):Yi(c,function(v){return v.index===a&&v.functionName===n})?u=a:u=a+c.filter(function(v){return v.index<a}).length;var f=p1e(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Re(Re([],le(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function r_(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function $xe(t){var e=t.datas,n=t.distX,r=t.distY,i=le(jW({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=MW(e,Kbe([a,s],4));return pi(o,Kd([0,0,0],4),4)}function MW(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?nn(o,e,4):nn(e,o,4),u=nn(Co(n?a:r,4),c,4),f=nn(u,Co(n?s:i,4),4);return f}function jW(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return tt(pi(i,Nt(o,[n,r]),c),s)}function Ro(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return tt(pi(e?a:s,Nt(f,[r,i]),h),e?c:u)}function qxe(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return tt(pi(a,Nt(o,[r,i]),u),c)}function Gxe(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=B0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var v=h?a[o]/h:0;return g*v}else if(f!=="%")return u;return g*u/100}):a}function zW(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Hxe(t,e){return zW(e).map(function(n){return t[n]})}function ik(t,e){var n=(e+1)/2;return[r1(t[0][0],t[1][0],n,1-n),r1(t[0][1],t[1][1],n,1-n)]}function wr(t,e){var n=ik([t[0],t[1]],e[0]),r=ik([t[2],t[3]],e[0]);return ik([n,r],e[1])}function Kxe(t,e,n,r,i,a){var s=hf(e,n,r,i),o=wr(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function Y0(t,e,n,r){return nn(t,gv(e,r,n),r)}function Wxe(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(Wi(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=Ps(Kv(n),4,o):c=Ps(nn(nn(u,Kv([n]),4),f,4),4,o)}else c=n;return Y0(a,c,i,o)}function Yxe(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return Y0(r,nn(s||a,r2(e,o),o),n,o)}function i_(t,e){var n=tg(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=hr(r)?r:su(r),AP(t,e,i)},setTransformIndex:function(r){AP(t,e,r)}}}function a_(t,e,n){var r=tg(e),i=r.startTransforms;AP(t,e,kl(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function AP(t,e,n){var r=tg(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=Sp([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function c2(t,e){var n=tg(t);n.nextTransforms=su(e)}function tg(t){return t.originalDatas.beforeRenderable}function o1(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function lx(t){return(o1(t)||[]).join(" ")}function cx(t){return tg(t).nextStyle}function LW(t,e,n,r,i){c2(i,e);var a=xi.drag(t,W0(i,t.state,n,r)),s=a?a.transform:e;return ae(ae({transform:e,drag:a},Ti({transform:s},i)),{afterTransform:s})}function u2(t,e,n,r,i,a){var s=Wxe(t.state,i,e,a),o=Zxe(t,n,r,s);return o}function VW(t,e,n,r,i,a,s){var o=u2(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,v=h?f:0,b=tt(r,o);return tt(b,[g,v])}function Xxe(t,e,n,r,i,a,s){var o=VW(t,e,n,r,i,a,s);return o}function Qxe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function Zxe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return Pn(r,u,c)}function Jxe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return VW(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function ewe(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,v=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,S=f?4:3,T=Gxe(i,e,n,h,g,c),P=s?v:0,D=s?b:0,O=Y0(u,w,T,S),N=Kxe(r,O,e,n,S,x);return tt(N,[P,D])}function twe(t,e){return wr(Ga(t.state),e)}function nwe(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function rwe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function iwe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function BW(t,e,n){for(var r=t,i=[],a=XO(t)||yu(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,v=!1,b=Yv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=Xi(r),S=w("position"),T=uY(r),P=S==="fixed",D=iwe(w),O=Wbe(t1e(T)),N=void 0,C=!1,I=!1,R=0,j=0,B=0,L=0,z={hasTransform:!1,fixedContainer:null};P&&(v=!0,z=s1e(r),b=z.fixedContainer);var W=O.length;!c&&(W===16||D.length)&&(c=!0,u=4,DP(i),g&&(g=Ps(g,3,4))),c&&W===9&&(O=Ps(O,3,4));var Q=a1e(r,t),G=Q.tagName,Y=Q.hasOffset,J=Q.isSVG,ie=Q.origin,X=Q.targetOrigin,U=Q.offset,Z=le(U,2),ee=Z[0],K=Z[1];G==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:o1e(r,u)}),i.push({type:"offset",target:r,matrix:yn(u)}));var ue=parseFloat(w("zoom"))||1;if(P)N=z.fixedContainer,C=!0;else{var ne=Yv(r,e,!1,!0,w),oe=ne.offsetZoom;if(N=ne.offsetParent,C=ne.isEnd,I=ne.isStatic,x*=oe,(ne.isCustomElement||oe!==1)&&I)ee-=N.offsetLeft,K-=N.offsetTop;else if(jxe||Mxe){var Se=ne.parentSlotElement;if(Se){for(var se=N,Ae=0,ve=0;se&&rwe(se);)Ae+=se.offsetLeft,ve+=se.offsetTop,se=se.offsetParent;ee-=Ae,K-=ve}}}if(CW&&!zxe&&Y&&!J&&I&&(S==="relative"||S==="static")&&(ee-=N.offsetLeft,K-=N.offsetTop,s=s||C),P)Y&&z.hasTransform&&(B=N.clientLeft,L=N.clientTop);else if(Y&&b!==N&&(R=N.clientLeft,j=N.clientTop),Y&&N===a){var te=dY(r,!1);ee+=te[0],K+=te[1]}if(i.push({type:"target",target:r,matrix:gv(O,u,ie)}),D.length&&(i.push({type:"offset",target:r,matrix:yn(u)}),i.push({type:"target",target:r,matrix:gv(Kv(D),u,ie)})),Y){var Pe=r===t,be=Pe?0:r.scrollLeft,_e=Pe?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Wd([ee-be+R-B,K-_e+j-L],u)})}else i.push({type:"offset",target:r,origin:ie});if(ue!==1&&i.push({type:"zoom",target:r,matrix:gv(r2([ue,ue],u),u,[0,0])}),g||(g=O),f||(f=ie),h||(h=X),o||P)break;r=N,s=C,(!n||r===a)&&(o=s)}return g||(g=yn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:v}}var hd=null,pd=null,Mh=null;function Ep(t){t?(window.Map&&(hd=new Map,pd=new Map),Mh=[]):(hd=null,Mh=null,pd=null)}function awe(t){var e=pd?.get(t);if(e)return e;var n=mv(t,!0);return pd&&pd.set(t,n),n}function swe(t,e){if(Mh){var n=Yi(Mh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=BW(t,e,!0);return Mh&&Mh.push([[t,e],r]),r}function Xi(t){var e=hd?.get(t);if(!e){var n=Yc(t).getComputedStyle(t);if(!hd)return function(a){return n[a]};e={style:n,cached:{}},hd.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function As(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},ae(ae({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function ak(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=As(t,e.name,i),g=t.moveables,v=[],b=h.map(function(x,w){var S=g[w],T=S.state,P=T.gestos,D=x;if(o)D=new _p(s).dragStart(r,x),v.push(D);else{if(P[s]||(P[s]=f.childGestos[w]),!P[s])return;D=W0(x,T,r,u,a,s),v.push(D)}var O=e[n](S,ae(ae({},D),{parentFlag:!0}));return c&&(P[s]=null),O});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:v}}function ml(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=As(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],v=f;v=i(g,f);var b=e[n](g,ae(ae({},v),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function l1(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||Ga(e.state),o=wr(s,i),c=le(pi(G0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function FW(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Xd(t.props,e).zoom,u=pv(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var v=wi(o);return n.map(function(b){var x=b.data,w=b.classNames,S=b.dir,T=l2[S];if(!T||!f[S])return null;g[S]=!0;var P=(lt(u,15)+v*DW[S]+720)%180,D={};return Cl(x).forEach(function(O){D["data-".concat(O)]=x[O]}),r.createElement("div",ae({className:Ze.apply(void 0,Re(["control","direction",S,e],le(w),!1)),"data-rotation":P,"data-direction":S},D,{key:"direction-".concat(S),style:f1.apply(void 0,Re([s,c],le(T.map(function(O){return a[O]})),!1))}))})}function UW(t,e,n,r){var i=Xd(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?s2:s;return Re(Re([],le(o?HW(t,r,n,c):[]),!1),le(FW(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Wv(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Qn(n,r),u=e?lt(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Ze.apply(void 0,Re(["line","direction",e?"edge":"",e],le(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Hm(n,r,i,c)})}function $W(t,e,n,r,i){var a=n===!0?Ixe:n;return a.map(function(s,o){var c=le(l2[s],2),u=c[0],f=c[1];if(f!=null)return Wv(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function qW(t){return function(e,n){var r=Xd(e.props,t).edge;return r&&(r===!0||r.length)?Re(Re([],le($W(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),le(owe(e,t,n)),!1):GW(e,t,n)}}function GW(t,e,n){return UW(t,s2,e,n)}function owe(t,e,n){return UW(t,["nw","ne","sw","se"],e,n)}function HW(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=wi(c),g=o/Math.PI*180;return(r||Cl(u)).map(function(v){var b=l2[v];if(!b)return null;var x=(lt(g,15)+h*DW[v]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Ze.apply(void 0,Re([],le(w),!1)),"data-rotation":x,"data-direction":v,key:"direction-around-".concat(v),style:f1.apply(void 0,Re([o,f],le(b.map(function(S){return s[S]})),!1))})})}function d2(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,v=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:v};return{vertical:oB(b,e,!0),horizontal:oB(b,n,!1)}}function s_(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,v=e||t.props.bounds||{},b=v.position||"client",x=b==="css",w=v.left,S=w===void 0?-1/0:w,T=v.top,P=T===void 0?-1/0:T,D=v.right,O=D===void 0?x?-1/0:1/0:D,N=v.bottom,C=N===void 0?x?-1/0:1/0:N;return x&&(O=a+h-u-O,C=i+g-f-C),{left:S+u-s,right:O+u-s,top:P+f-o,bottom:C+f-o}}function lwe(t,e,n){var r=s_(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=le(n,2),u=c[0],f=c[1],h=le(tt(n,e),2),g=h[0],v=h[1];Ie(g)<Ci&&(g=0),Ie(v)<Ci&&(v=0);var b=v>0,x=g>0,w={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:w,horizontal:S};if(g===0)b?o<f&&(S.pos=o,S.offset=f-o):a>f&&(S.pos=a,S.offset=f-a);else if(v===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var T=v/g,P=n[1]-T*u,D=0,O=0,N=!1;x&&s<=u?(D=T*s+P,O=s,N=!0):!x&&u<=i&&(D=T*i+P,O=i,N=!0),N&&(D<a||D>o)&&(N=!1),N||(b&&o<=f?(D=o,O=(D-P)/T,N=!0):!b&&f<=a&&(D=a,O=(D-P)/T,N=!0)),N&&(w.isBound=!0,w.pos=O,w.offset=u-O,S.isBound=!0,S.pos=D,S.offset=f-D)}return{vertical:w,horizontal:S}}function oB(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return Ie(u.offset)-Ie(c.offset)})}function lB(t,e,n){var r=n?t.map(function(i){return q0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Ie(i[0]-e.left)>.1||i[0]>e.right&&Ie(i[0]-e.right)>.1||i[1]<e.top&&Ie(i[1]-e.top)>.1||i[1]>e.bottom&&Ie(i[1]-e.bottom)>.1})}function cwe(t,e,n){var r=qa(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Ie(a-t[n?0:1])-Ie(s-t[n?0:1])}).map(function(a){return Qn([0,0],n?[a,e]:[e,a])})}function uwe(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=s_(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],v=c-r[1],b=f-r[1],x={left:h,top:v,right:g,bottom:b};if(!lB(n,x,0))return[];var w=[];return[[h,0],[g,0],[v,1],[b,1]].forEach(function(S){var T=le(S,2),P=T[0],D=T[1];n.forEach(function(O){var N=Qn([0,0],O);w.push.apply(w,Re([],le(cwe(O,P,D).map(function(C){return a+C-N}).filter(function(C){return!lB(e,x,C)}).map(function(C){return lt(C*180/Math.PI,Ci)})),!1))})}),w}var dwe=["left","right","center"],fwe=["top","bottom","middle"],cB={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},ou={start:"left",end:"right",center:"center"},lu={start:"top",end:"bottom",center:"middle"};function jh(){return{left:!1,top:!1,right:!1,bottom:!1}}function ng(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function f2(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function hwe(t,e){var n=f2(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function h2(t,e){var n=hwe(t,e),r=fwe.filter(function(a){return a in n}),i=dwe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function pwe(t,e,n){var r=Pn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function gwe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<lr&&(i=0),Math.abs(a)<lr&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return lt(u,lr)})}var KW="snapRotationThreshold",WW="snapRotationDegrees",YW="snapHorizontalThreshold",XW="snapVerticalThreshold";function o_(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=EB(s,c[YW],5),h=EB(a,c[XW],5);return QW(t.state.guidelines,e,n,r,i,f,h,u)}function QW(t,e,n,r,i,a,s,o){return{vertical:dB(t,"vertical",e,s*o[0],r),horizontal:dB(t,"horizontal",n,a*o[1],i)}}function mwe(t,e,n){var r=le(n,2),i=r[0],a=r[1],s=le(e,2),o=s[0],c=s[1],u=le(tt(n,e),2),f=u[0],h=u[1],g=h>0,v=f>0;f=h1(f),h=h1(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=o_(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),S=w.vertical,T=w.horizontal;S.posInfos.filter(function(G){var Y=G.pos;return v?Y>=o:Y<=o}),T.posInfos.filter(function(G){var Y=G.pos;return g?Y>=c:Y<=c}),S.isSnap=S.posInfos.length>0,T.isSnap=T.posInfos.length>0;var P=kP(S),D=P.isSnap,O=P.guideline,N=kP(T),C=N.isSnap,I=N.guideline,R=C?I.pos[1]:0,j=D?O.pos[0]:0;if(f===0)C&&(x.isSnap=!0,x.pos=I.pos[1],x.offset=a-x.pos);else if(h===0)D&&(b.isSnap=!0,b.pos=j,b.offset=i-j);else{var B=h/f,L=n[1]-B*i,z=0,W=0,Q=!1;D?(W=j,z=B*W+L,Q=!0):C&&(z=R,W=(z-L)/B,Q=!0),Q&&(b.isSnap=!0,b.pos=W,b.offset=i-W,x.isSnap=!0,x.pos=z,x.offset=a-z)}return{vertical:b,horizontal:x}}function Bc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function uB(t,e,n,r){var i=h2(t.props.snapDirections,e),a=o_(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Bc(c)}),i.horizontalNames.map(function(c){return Bc(c)}),n,r),s=Bc(i.horizontalNames[a.horizontal.index]),o=Bc(i.verticalNames[a.vertical.index]);return{vertical:ae(ae({},a.vertical),{direction:o}),horizontal:ae(ae({},a.horizontal),{direction:s})}}function kP(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function dB(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var v=i[g]||"",b=t.map(function(x){var w=x.pos,S=h-w[c];return{offset:S,dist:Ie(S),guideline:x,direction:v}}).filter(function(x){var w=x.guideline,S=x.dist,T=w.type;return!(T!==e||S>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:v}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function vwe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,v,b){var x=b[v+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Re([],le(Hxe([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return wr(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=o_(t,o,c,a.map(function(g){return Bc(g[0])}),a.map(function(g){return Bc(g[1])}),r,i),f=Bc(a.map(function(g){return g[0]})[u.vertical.index]),h=Bc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:ae(ae({},u.vertical),{direction:f}),horizontal:ae(ae({},u.horizontal),{direction:h})}}function ZW(t,e){var n=Ie(t.offset),r=Ie(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ci?1:r<Ci?-1:n-r}function c1(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return ZW({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function ywe(t,e,n){var r=[];if(n)Ie(e[0])!==1||Ie(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Ie(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ie(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function JW(t,e){var n=fP([e[0][0],e[1][0]]),r=fP([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function p2(t,e){var n=le(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Ie(a)<Ci&&(a=0),Ie(s)<Ci&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function eY(t,e,n,r){return r===void 0&&(r=Ci),t.every(function(i){var a=p2(i,e),s=a<=0;return s===n||Ie(a)<=r})}function fB(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function bwe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],v=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(eY([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=Fc(n,s,v,i),S=Fc(n,s,x,i),T=Fc(n,s,g,a),P=Fc(n,s,b,a),D=w.isBound&&S.isBound,O=w.isBound||S.isBound,N=T.isBound&&P.isBound,C=T.isBound||P.isBound,I=Tp(w.offset,S.offset),R=Tp(T.offset,P.offset),j=[0,0],B=!1,L=!1;return Ie(R)<Ie(I)?(j=[I,0],B=O,L=D):(j=[0,R],B=C,L=N),{isAllBound:L,isVerticalBound:O,isHorizontalBound:C,isBound:B,offset:j}}function Fc(t,e,n,r,i,a){var s=le(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=h1(h[1]-f[1]),v=h1(h[0]-f[0]),b=c,x=o,w=-o/c;if(v){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var D=(f[1]-u[1])/w+u[0];return fB(D,f[0],h[0],r,i)}else{var T=f[1]-u[1],P=Ie(T)<=(i||0);return{isBound:P,offset:P?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var S=w*(f[0]-u[0])+u[1];return fB(S,f[1],h[1],r,i)}else{var T=f[0]-u[0],P=Ie(T)<=(i||0);return{isBound:P,offset:P?T:0}}}return{isBound:!1,offset:0}}function tY(t,e,n){return e.map(function(r){var i=bwe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=Ro({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function xwe(t,e,n){var r,i=g2(t,e,[0,0],!1).map(function(g){return ae(ae({},g),{multiple:g.multiple.map(function(v){return Ie(v)*2})})}),a=tY(t,i,n),s=c1(a,0),o=c1(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=le(qxe({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function wwe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function g2(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=hf(a,100,100,s?4:3),c=wr(o,[0,0]);return wwe(n,r).map(function(u){var f=le(u,3),h=f[0],g=f[1],v=f[2],b=[wr(o,g),wr(o,v)],x=gwe(b),w=JW(c,b),S=w.vertical,T=w.horizontal,P=p2(c,b)<=0;return{multiple:h,centerSign:P,verticalSign:S,horizontalSign:T,lineConstants:x,line:[wr(e,g),wr(e,v)]}})}function hB(t,e,n,r){var i=r?t.map(function(a){return q0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=p2(n,a)<=0;return!eY(e,a,s)})}function Swe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Ie(n[0]);if(!a)return Ie(n[1]);var s=a/i;return Ie((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function _we(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function Ewe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],v=c-r[1],b=c+f-r[1],x=[[h,v],[g,v],[h,b],[g,b]],w=wr(n,[0,0]);if(!hB(n,x,w,0))return[];var S=[],T=x.map(function(P){return[qa(P),Qn([0,0],P)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(P){var D=Qn([0,0],_we(P)),O=Swe(P);S.push.apply(S,Re([],le(T.filter(function(N){var C=le(N,1),I=C[0];return I&&O<=I}).map(function(N){var C=le(N,2),I=C[0],R=C[1],j=Math.acos(I?O/I:0),B=R+j,L=R-j;return[s+B-D,s+L-D]}).reduce(function(N,C){return N.push.apply(N,Re([],le(C),!1)),N},[]).filter(function(N){return!hB(e,x,w,N)}).map(function(N){return lt(N*180/Math.PI,Ci)})),!1))}),S}function Twe(t){var e=t.props.innerBounds,n=jh();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=wr(c,[0,0]),f=e.left,h=e.top,g=e.width,v=e.height,b=[[f,h],[f,h+v]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+v]],S=[[f,h+v],[f+g,h+v]],T=g2(t,c,[0,0],!1),P=[],D=[];return T.forEach(function(O){var N=O.line,C=O.lineConstants,I=JW(u,N),R=I.horizontal,j=I.vertical,B=Fc(N,C,x,j,1,!0),L=Fc(N,C,S,j,1,!0),z=Fc(N,C,b,R,1,!0),W=Fc(N,C,w,R,1,!0);B.isBound&&!n.top&&(P.push(h),n.top=!0),L.isBound&&!n.bottom&&(P.push(h+v),n.bottom=!0),z.isBound&&!n.left&&(D.push(f),n.left=!0),W.isBound&&!n.right&&(D.push(f+g),n.right=!0)}),{boundMap:n,horizontal:P,vertical:D}}function Awe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Ie(i)<lr&&(i=0),Ie(a)<lr&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function CP(t,e,n,r,i){var a=Awe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=gl(t,e),o=gl(a,t),c=gl(a,e),u=o>s||c>s,f=le(Ro({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function u1(t,e){return t.isBound?t.offset:e.isSnap?kP(e).offset:0}function kwe(t,e,n,r,i){var a=le(e,2),s=a[0],o=a[1],c=le(n,2),u=c[0],f=c[1],h=le(r,2),g=h[0],v=h[1],b=le(i,2),x=b[0],w=b[1],S=-x,T=-w;if(t&&s&&o){S=0,T=0;var P=[];if(u&&f?P.push([0,w],[x,0]):u?P.push([x,0]):f?P.push([0,w]):g&&v?P.push([0,w],[x,0]):g?P.push([x,0]):v&&P.push([0,w]),P.length){P.sort(function(C,I){return qa(tt([s,o],C))-qa(tt([s,o],I))});var D=P[0];if(D[0]&&Ie(s)>lr)S=-D[0],T=o*Ie(s+S)/Ie(s)-o;else if(D[1]&&Ie(o)>lr){var O=o;T=-D[1],S=s*Ie(o+T)/Ie(O)-s}if(t&&f&&u)if(Ie(S)>lr&&Ie(S)<Ie(x)){var N=Ie(x)/Ie(S);S*=N,T*=N}else if(Ie(T)>lr&&Ie(T)<Ie(w)){var N=Ie(w)/Ie(T);S*=N,T*=N}else S=Tp(-x,S),T=Tp(-w,T)}}else S=s||u?-x:0,T=o||f?-w:0;return[S,T]}function Cwe(t,e,n,r,i,a){if(!ng(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=y2(a.absolutePoses,[e,n]),o=Ua(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(W){return W[1]}),vertical:s.map(function(W){return W[0]})},v=f2(t.props.snapDirections),b=h2(v,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=l_(t,i,b,g),w=x.vertical,S=x.horizontal,T=xwe(t,s,a),P=T.vertical,D=T.horizontal,O=w.isSnap,N=S.isSnap,C=w.isBound||P.isBound,I=S.isBound||D.isBound,R=Tp(w.offset,P.offset),j=Tp(S.offset,D.offset),B=le(kwe(r,[e,n],[C,I],[O,N],[R,j]),2),L=B[0],z=B[1];return[{isBound:C,isSnap:O,offset:L},{isBound:I,isSnap:N,offset:z}]}function l_(t,e,n,r){r===void 0&&(r=n);var i=d2(s_(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:o_(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=u1(a[0],c),h=u1(s[0],u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:v,bounds:s,snap:u}}}function pB(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=d2(e,n,r),c=o.horizontal,u=o.vertical,f=QW(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,v=u1(c[0],h),b=u1(u[0],g),x=Ie(v),w=Ie(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function Iwe(t,e,n,r){var i=Qn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,v=i%180,b=v<3||v>177,x=v>87&&v<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function Pwe(t,e,n,r,i,a){return n.map(function(s){var o=le(s,2),c=o[0],u=o[1],f=wr(e,c),h=wr(e,u),g=r?Nwe(t,f,h,i):l_(t,i,{vertical:[h[0]],horizontal:[h[1]]}),v=g.horizontal,b=v.offset,x=v.isBound,w=v.isSnap,S=g.vertical,T=S.offset,P=S.isBound,D=S.isSnap,O=tt(u,c);if(!T&&!b)return{isBound:P||x,isSnap:D||w,sign:O,offset:[0,0]};var N=Iwe(f,h,g,r);if(!N)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var C=N==="vertical",I=[0,0];return!r&&Ie(u[0])===1&&Ie(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?I=Ro({datas:a,distX:-T,distY:-b}):I=CP(f,h,-(C?T:b),C,a).offset,I=I.map(function(R,j){return R*(O[j]?2/O[j]:0)}),{sign:O,isBound:C?P:x,isSnap:C?D:w,offset:I}})}function gB(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Nwe(t,e,n,r){var i=lwe(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:mwe(t,e,n),c=o.horizontal,u=o.vertical,f=gB(a,c),h=gB(s,u),g=Ie(f),v=Ie(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:v}}}function Dwe(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],v=u.left,b=v===void 0?-1/0:v,x=u.top,w=x===void 0?-1/0:x,S=u.right,T=S===void 0?1/0:S,P=u.bottom,D=P===void 0?1/0:P;g.forEach(function(O){var N=O[0]!==a[0],C=O[1]!==a[1],I=wr(e,O),R=Qn(r,I)*360/Math.PI;if(C){var j=I.slice();(Ie(R-360)<2||Ie(R-180)<2)&&(j[1]=r[1]);var B=CP(r,j,(r[1]<I[1]?D:w)-I[1],!1,i),L=le(B.offset,2),z=L[1],W=B.isOutside;isNaN(z)||(h=c+(W?1:-1)*Ie(z))}if(N){var j=I.slice();(Ie(R-90)<2||Ie(R-270)<2)&&(j[0]=r[0]);var Q=CP(r,j,(r[0]<I[0]?T:b)-I[0],!0,i),G=le(Q.offset,1),Y=G[0],J=Q.isOutside;isNaN(Y)||(f=o+(J?1:-1)*Ie(Y))}})}return{maxWidth:f,maxHeight:h}}var xi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=qa(u),h=Qn(u,[0,0]);return[e.createElement("div",{className:Ze("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],ff(t,e),a_(t,e,"translate"),Qwe(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=ht(t,e,ae({set:function(f){n.startValue=f}},i_(t,e))),u=r||Be(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){n_(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,v=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(v){s&&(h+=s[0],g+=s[1]);var S=t.props,T=S.parentMoveable,P=u?0:S.throttleDrag||f||0,D=r?0:S.throttleDragRotate||0,O=0,N=!1,C=!1,I=!1,R=!1;if(!r&&D>0&&(h||g)){var j=S.startDragRotate||0,B=lt(j+Qn([0,0],[h,g])*180/Math.PI,D)-j,L=g*Math.abs(Math.cos((B-90)/180*Math.PI)),z=h*Math.abs(Math.cos(B/180*Math.PI)),W=qa([z,L]);O=B*Math.PI/180,h=W*Math.cos(O),g=W*Math.sin(O)}if(!a&&!r&&!i){var Q=le(Cwe(t,h,g,D,!o&&c||s,n),2),G=Q[0],Y=Q[1];N=G.isSnap,C=G.isBound,I=Y.isSnap,R=Y.isBound;var J=G.offset,ie=Y.offset;h+=J,g+=ie}var X=Nt(jW({datas:n,distX:h,distY:g}),w),U=Nt($xe({datas:n,distX:h,distY:g}),w);WV(U,Ci),WV(X,Ci),D||(!N&&!C&&(U[0]=lt(U[0],P),X[0]=lt(X[0],P)),!I&&!R&&(U[1]=lt(U[1],P),X[1]=lt(X[1],P)));var Z=tt(X,w),ee=tt(U,w),K=tt(ee,b),ue=tt(Z,x);n.prevDist=ee,n.prevBeforeDist=Z,n.passDelta=K,n.passDist=ee;var ne=n.left+Z[0],oe=n.top+Z[1],Se=n.right-Z[0],se=n.bottom-Z[1],Ae=r_(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(ee[0],"px, ").concat(ee[1],"px)"));if(c2(e,Ae),t.state.dragInfo.dist=r?[0,0]:ee,!(!r&&!T&&K.every(function(_e){return!_e})&&ue.some(function(_e){return!_e}))){var ve=t.state,te=ve.width,Pe=ve.height,be=ht(t,e,ae({transform:Ae,dist:ee,delta:K,translate:U,beforeDist:Z,beforeDelta:ue,beforeTranslate:X,left:ne,top:oe,right:Se,bottom:se,width:te,height:Pe,isPinch:a},Ti({transform:Ae},e)));return!r&&Be(t,"onDrag",be),be}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,ae(ae({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ba(t,e,{});return!n&&Be(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=ak(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=ae(ae({},o),{targets:t.props.targets,events:f}),g=Be(t,"onDragGroupStart",h);i.isDrag=g!==!1;var v=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[v[0]%1,v[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,ae(ae({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=ak(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=ae({targets:t.props.targets,events:a},r);return Be(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=ak(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Be(t,"onDragGroupEnd",ba(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function nY(t,e){var n=wr(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Owe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=Pn(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function rY(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=Qxe(e,i,a),c=Pn(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var mB=w2("resizable"),IP={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:qW("resizable"),dragControlCondition:mB,viewClassName:x2("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=mY(s,i,r,c),g=t.state,v=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!v||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&ff(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var S=t.props.transformOrigin||"% %";c.transformOrigin=Wi(S)?S.split(" "):S,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=Ga(t.state);function P(R){var j=nY(c.startPositions,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function D(R){var j=rY(t.state,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function O(R){c.minSize=[tn("".concat(R[0]),0)||0,tn("".concat(R[1]),0)||0]}function N(R){var j=[R[0]||1/0,R[1]||1/0];(!wp(j[0])||isFinite(j[0]))&&(j[0]=tn("".concat(j[0]),0)||1/0),(!wp(j[1])||isFinite(j[1]))&&(j[1]=tn("".concat(j[1]),0)||1/0),c.maxSize=j}T(b/x),P(u||[-h[0],-h[1]]),c.setFixedDirection=P,c.setFixedPosition=D,c.setMin=O,c.setMax=N;var C=ht(t,e,{direction:h,startRatio:c.ratio,set:function(R){var j=le(R,2),B=j[0],L=j[1];c.startWidth=B,c.startHeight=L},setMin:O,setMax:N,setRatio:T,setFixedDirection:P,setFixedPosition:D,setOrigin:function(R){c.transformOrigin=R},dragStart:xi.dragStart(t,new _p().dragStart([0,0],e))}),I=f||Be(t,"onResizeStart",C);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,I!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?C:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,v=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,S=r.startHeight,T=r.prevWidth,P=r.prevHeight,D=r.minSize,O=r.maxSize,N=r.ratio,C=r.startOffsetWidth,I=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(v){var j=t.state.is3d,B=r.startOffsetMatrix,L=r.startTransformOrigin,z=j?4:3,W=Kv(o1(e)),Q=Math.sqrt(W.length);z!==Q&&(W=Ps(W,Q,z));var G=Y0(B,W,L,z),Y=hf(G,C,I,z);r.startPositions=Y,r.nextTargetMatrix=W,r.nextAllMatrix=G}var J=Xd(t.props,"resizable"),ie=J.resizeFormat,X=J.throttleResize,U=X===void 0?i?0:1:X,Z=J.parentMoveable,ee=J.keepRatioFinally,K=r.direction,ue=K,ne=0,oe=0;!K[0]&&!K[1]&&(ue=[1,1]);var Se=N&&(s??J.keepRatio)||!1;function se(){var yt=r.fixedDirection,Ut=SY(ue,Se,r,e);ne=Ut.distWidth,oe=Ut.distHeight;var ei=ue[0]-yt[0]||Se?Math.max(C+ne,Ci):C,ti=ue[1]-yt[1]||Se?Math.max(I+oe,Ci):I;return Se&&C&&I&&(R?ti=ei/N:ei=ti*N),[ei,ti]}var Ae=le(se(),2),ve=Ae[0],te=Ae[1];g||(r.setFixedDirection(r.fixedDirection),Be(t,"onBeforeResize",ht(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(yt){var Ut;return r.setFixedDirection(yt),Ut=le(se(),2),ve=Ut[0],te=Ut[1],[ve,te]},setFixedPosition:function(yt){var Ut;return r.setFixedPosition(yt),Ut=le(se(),2),ve=Ut[0],te=Ut[1],[ve,te]},boundingWidth:ve,boundingHeight:te,setSize:function(yt){var Ut;Ut=le(yt,2),ve=Ut[0],te=Ut[1]}},!0)));var Pe=o;o||(!i&&a?Pe=twe(t,[0,0]):Pe=r.fixedPosition);var be=[0,0];a||(be=Ywe(t,ve,te,K,Pe,!u&&f,r)),c&&(!c[0]&&(be[0]=0),!c[1]&&(be[1]=0));function _e(){var yt;ie&&(yt=le(ie([ve,te]),2),ve=yt[0],te=yt[1]),ve=lt(ve,U),te=lt(te,U)}if(Se){ue[0]&&ue[1]&&be[0]&&be[1]&&(Ie(be[0])>Ie(be[1])?be[1]=0:be[0]=0);var De=!be[0]&&!be[1];De&&_e(),ue[0]&&!ue[1]||be[0]&&!be[1]||De&&R?(ve+=be[0],te=ve/N):(!ue[0]&&ue[1]||!be[0]&&be[1]||De&&!R)&&(te+=be[1],ve=te*N)}else ve+=be[0],te+=be[1],ve=Math.max(0,ve),te=Math.max(0,te);n=le(WK([ve,te],D,O,Se?N:!1),2),ve=n[0],te=n[1],_e(),Se&&(h||ee)&&(R?te=ve/N:ve=te*N),ne=ve-C,oe=te-I;var Oe=[ne-T,oe-P];r.prevWidth=ne,r.prevHeight=oe;var Ye=ewe(t,ve,te,Pe,x,r);if(!(!Z&&Oe.every(function(yt){return!yt})&&Ye.every(function(yt){return!yt}))){var Ve=xi.drag(t,W0(e,t.state,Ye,!!a,!1,"draggable")),it=Ve.transform,Ft=w+ne,Gn=S+oe,An=ht(t,e,ae({width:Ft,height:Gn,offsetWidth:Math.round(ve),offsetHeight:Math.round(te),startRatio:N,boundingWidth:ve,boundingHeight:te,direction:K,dist:[ne,oe],delta:Oe,isPinch:!!a,drag:Ve},yY({style:{width:"".concat(Ft,"px"),height:"".concat(Gn,"px")},transform:it},Ve,e)));return!g&&Be(t,"onResize",An),An}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),v=Ie(h)>3,b=Ie(g)>3;if(v&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),v||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ba(t,e,{});return!r&&Be(t,"onResizeEnd",i),i}},dragGroupControlCondition:mB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,ae(ae({},e),{isGroup:!0}));if(!r)return!1;var i=As(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var v=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,S=x.startOffsetWidth,T=x.startOffsetHeight,P=a*(S?w[0]/S:0),D=s*(T?w[1]/T:0);v[0]=Math.max(v[0],P),v[1]=Math.max(v[1],D)})}function c(){var v=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,S=x.startOffsetWidth,T=x.startOffsetHeight,P=a*(S?w[0]/S:0),D=s*(T?w[1]/T:0);v[0]=Math.min(v[0],P),v[1]=Math.min(v[1],D)})}var u=ml(t,this,"dragControlStart",e,function(v,b){return l1(t,v,n,b)});o(),c();var f=function(v){r.setFixedDirection(v),u.forEach(function(b,x){b.setFixedDirection(v),l1(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=ae(ae({},r),{targets:t.props.targets,events:u.map(function(v){return ae(ae({},v),{setMin:function(b){v.setMin(b),o()},setMax:function(b){v.setMax(b),c()}})}),setFixedDirection:f,setMin:function(v){r.setMin(v),o()},setMax:function(v){r.setMax(v),c()}}),g=Be(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Xd(t.props,"resizable");u_(t,"onBeforeResize",function(v){Be(t,"onBeforeResizeGroup",ht(t,e,ae(ae({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,ae(ae({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=ml(t,this,"dragControl",e,function(v,b){var x=le(pi(G0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],S=x[1];return ae(ae({},b),{parentDist:null,parentScale:u,dragClient:Nt(f,[w,S]),parentKeepRatio:c})}),g=ae({targets:r.targets,events:h},i);return Be(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=ml(t,this,"dragControlEnd",e),a=ba(t,e,{targets:t.props.targets,events:i});return Be(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function sk(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=Pn(t.state.rootMatrix,tt([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Nt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Qn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=gl(f,[n,r])}function dw(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function ok(t,e,n,r){return dw(Qn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function lk(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=Wwe(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=lt(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function iY(t,e,n){var r=le(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(hr(t))return t.map(function(w){return iY(w,[i,a,s,o],n)[0]});var c=le((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],v=pY(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,v]]}function PP(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(xr(n,Ze("rotation-control"))||t.props.rotateAroundControls&&xr(n,Ze("around-control"))||xr(n,Ze("control"))&&xr(n,Ze("rotatable")))return!0;var r=t.props.rotationTarget;return r?S2(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Rwe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Mwe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Rwe],viewClassName:function(t){return t.isDragging("rotatable")?Ze("view-rotation-dragging"):""},render:function(t,e){var n=Xd(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=iY(i,f,h),v=[];if(g.forEach(function(S,T){var P=le(S,2),D=P[0],O=P[1];v.push(e.createElement("div",{key:"rotation".concat(T),className:Ze("rotation"),style:{transform:"translate(-50%) translate(".concat(D[0],"px, ").concat(D[1],"px) rotate(").concat(O,"rad)")}},e.createElement("div",{className:Ze("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Ze("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=Cl(c||{}),x={};b.forEach(function(S){c[S].forEach(function(T){x[T]=S})});var w=[];hr(s)&&(w=s.map(function(S){var T=x[S];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:S}})),v.push.apply(v,Re([],le(FW(t,"rotatable",w,e)),!1))}return o&&v.push.apply(v,Re([],le(HW(t,e)),!1)),v},dragControlCondition:PP,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,v=h.left,b=h.top,x=h.direction,w=h.beforeDirection,S=h.targetTransform,T=h.moveableClientRect,P=h.offsetMatrix,D=h.targetMatrix,O=h.allMatrix,N=h.width,C=h.height;if(!f&&!g)return!1;var I=t.getRect();i.rect=I,i.transform=S,i.left=v,i.top=b;var R=function(ue){var ne=rY(t.state,ue);i.fixedDirection=ne.fixedDirection,i.fixedOffset=ne.fixedOffset,i.fixedPosition=ne.fixedPosition,U&&U.setFixedPosition(ue)},j=function(ue){var ne=Owe(t.state,ue);i.fixedDirection=ne.fixedDirection,i.fixedOffset=ne.fixedOffset,i.fixedPosition=ne.fixedPosition,U&&U.setFixedDirection(ue)},B=a,L=s;if(f||u||c){var z=o||0;i.beforeInfo={origin:I.beforeOrigin,prevDeg:z,defaultDeg:z,prevSnapDeg:0,startDist:0},i.afterInfo=ae(ae({},i.beforeInfo),{origin:I.origin}),i.absoluteInfo=ae(ae({},i.beforeInfo),{origin:I.origin,startValue:z})}else{var W=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(W){var Q=W.getAttribute("data-direction")||"",G=Fxe[Q];if(G){i.isControl=!0,i.isAroundControl=xr(W,Ze("around-control")),i.controlDirection=G;var Y=W.getAttribute("data-resolve");Y&&(i.resolveAble=Y);var J=u1e(h.rootMatrix,h.renderPoses,T);n=le(wr(J,G),2),B=n[0],L=n[1]}}i.beforeInfo={origin:I.beforeOrigin},i.afterInfo={origin:I.origin},i.absoluteInfo={origin:I.origin,startValue:I.rotation};var ie=R;R=function(ue){var ne=h.is3d?4:3,oe=le(Nt(xW(D,ne),ue),2),Se=oe[0],se=oe[1],Ae=pi(P,Kd([Se,se],ne)),ve=pi(O,Kd([ue[0],ue[1]],ne));ie(ue);var te=h.posDelta;i.beforeInfo.origin=tt(Ae,te),i.afterInfo.origin=tt(ve,te),i.absoluteInfo.origin=tt(ve,te),sk(t,i.beforeInfo,B,L,T),sk(t,i.afterInfo,B,L,T),sk(t,i.absoluteInfo,B,L,T)},j=function(ue){var ne=wr([[0,0],[N,0],[0,C],[N,C]],ue);R(ne)}}i.startClientX=B,i.startClientY=L,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},a_(t,e,"rotate");var X=!1,U=!1;if(i.isControl&&i.resolveAble){var Z=i.resolveAble;Z==="resizable"&&(U=IP.dragControlStart(t,ae(ae({},new _p("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(X=xi.dragStart(t,new _p().dragStart([0,0],e))),R(d1e(t));var ee=ht(t,e,ae(ae({set:function(ue){i.startValue=ue*Math.PI/180},setFixedDirection:j,setFixedPosition:R},i_(t,e)),{dragStart:X,resizeStart:U})),K=Be(t,"onRotateStart",ee);return i.isRotate=K!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?ee:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,v=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,S=a.isRotate,T=a.startValue,P=a.rect,D=a.startClientX,O=a.startClientY;if(S){n_(t,e,"rotate");var N=Uxe(e),C=v*N,I=t.props.parentMoveable,R=0,j,B,L=0,z,W,Q=0,G,Y,J=180/Math.PI*T,ie=w.startValue,X=!1,U=D+s,Z=O+o;if(!u&&"parentDist"in e){var ee=e.parentDist;j=ee,z=ee,G=ee}else f||u?(j=dw(c,v,b),z=dw(c,C,x),G=dw(c,C,w)):(j=ok(U,Z,v,b),z=ok(U,Z,C,x),G=ok(U,Z,C,w),X=!0);if(B=J+j,W=J+z,Y=ie+G,Be(t,"onBeforeRotate",ht(t,e,{beforeRotation:B,rotation:W,absoluteRotation:Y,setRotation:function(Pe){z=Pe-J,j=z,G=z}},!0)),n=le(lk(t,P,b,j,J,X),3),R=n[0],j=n[1],B=n[2],r=le(lk(t,P,x,z,J,X),3),L=r[0],z=r[1],W=r[2],i=le(lk(t,P,w,G,ie,X),3),Q=i[0],G=i[1],Y=i[2],!(!Q&&!L&&!R&&!I&&!g)){var K=r_(a,"rotate(".concat(W,"deg)"),"rotate(".concat(z,"deg)"));g&&(a.fixedPosition=u2(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ue=Jxe(t,z,a),ne=tt(Nt(h||[0,0],ue),a.prevInverseDist||[0,0]);a.prevInverseDist=ue,a.requestValue=null;var oe=LW(t,K,ne,f,e),Se=oe,se=gl([U,Z],w.startAbsoluteOrigin)-w.startDist,Ae=void 0;if(a.resolveAble==="resizable"){var ve=IP.dragControl(t,ae(ae({},W0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:se}));ve&&(Ae=ve,Se=yY(Se,ve,e))}var te=ht(t,e,ae(ae({delta:L,dist:z,rotate:W,rotation:W,beforeDist:j,beforeDelta:R,beforeRotate:B,beforeRotation:B,absoluteDist:G,absoluteDelta:Q,absoluteRotate:Y,absoluteRotation:Y,isPinch:!!f,resize:Ae},oe),Se));return Be(t,"onRotate",te),te}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ba(t,e,{});return Be(t,"onRotateEnd",r),r}},dragGroupControlCondition:PP,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=ml(t,this,"dragControlStart",e,function(h,g){var v=h.state,b=v.left,x=v.top,w=v.beforeOrigin,S=Nt(tt([b,x],[i,a]),tt(w,s));return g.datas.startGroupClient=S,g.datas.groupClient=S,ae(ae({},g),{parentRotate:0})}),u=ae(ae({},o),{targets:t.props.targets,events:c}),f=Be(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){u_(t,"onBeforeRotate",function(u){Be(t,"onBeforeRotateGroup",ht(t,e,ae(ae({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=ml(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=le(f.datas.groupClient,2),v=g[0],b=g[1],x=le(q0(h,s*i),2),w=x[0],S=x[1],T=[w-v,S-b];return f.datas.groupClient=[w,S],ae(ae({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=ae({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Be(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=ml(t,this,"dragControlEnd",e),a=ba(t,e,{targets:t.props.targets,events:i});return Be(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function jwe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function m2(t,e){return jwe(ae(ae({},t),{classNames:Re([Ze("line","guideline",t.direction)],le(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(lt(n,.1),"px")})}),e)}function vB(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+g,m2({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Ze("target","bold",h)],posValue:v,sizeValue:a,zoom:c,direction:e},o)})}function yB(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?ou:lu,f=i[u.start],h=i[u.end];return n.filter(function(g){var v=g.hide,b=g.elementRect;if(v)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,v){var b=g.pos,x=g.size,w=g.element,S=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return m2({key:"".concat(e,"-default-guideline-").concat(v),classNames:w?[Ze("bold"),S]:[Ze("normal"),S],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function Gm(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,v=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(O,N){return O}:b,w=u.zoom,S=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",P=Math.abs(i),D=v?parseFloat(P.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Ze("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(P,"px"),c)},m2({direction:e,classNames:[Ze(n),s],size:"100%",posValue:[0,0],sizeValue:P,zoom:w},o),o.createElement("div",{className:Ze("size-value","gap"),style:{transform:"translate".concat(S,"(-50%) scale(").concat(w,")")}},D>0?x(D,e):""))}function zwe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?ou:lu,o=n[s.start],c=n[s.end];return bY(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(v){var b,x,w=v.element,S=v.elementRect.rect;if(S[s.end]<o)f.push(v);else if(c<S[s.start])h.push(v);else if(S[s.start]<=o&&c<=S[s.end]&&r){var T=v.pos,P={element:w,rect:ae(ae({},S),(b={},b[s.end]=S[s.start],b))},D={element:w,rect:ae(ae({},S),(x={},x[s.start]=S[s.end],x))},O=[0,0],N=[0,0];O[i]=T[i],O[a]=T[a],N[i]=T[i],N[a]=T[a]+v.size,f.push({type:t,pos:O,size:0,elementRect:P,direction:"",elementDirection:"end"}),h.push({type:t,pos:N,size:0,elementRect:D,direction:"",elementDirection:"start"})}}),f.sort(function(v,b){return b.pos[a]-v.pos[a]}),h.sort(function(v,b){return v.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function Lwe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=zwe(o,c,r,a),g=u?lu:ou,v=u?ou:lu,b=r[g.start],x=r[g.end];h.forEach(function(w){var S=w.total,T=w.start,P=w.end,D=w.inner,O=n[f]+S[0].pos[f]-r[v.start],N=r;T.forEach(function(C){var I=C.elementRect.rect,R=N[g.start]-I[g.end];if(R>0){var j=[0,0];j[u]=n[u]+N[g.start]-b-R,j[f]=O,s.push(Gm(t,o,"dashed",s.length,R,j,C.className,i))}N=I}),N=r,P.forEach(function(C){var I=C.elementRect.rect,R=I[g.start]-N[g.end];if(R>0){var j=[0,0];j[u]=n[u]+N[g.end]-b,j[f]=O,s.push(Gm(t,o,"dashed",s.length,R,j,C.className,i))}N=I}),D.forEach(function(C){var I=C.elementRect.rect,R=b-I[g.start],j=I[g.end]-x,B=[0,0],L=[0,0];B[u]=n[u]-R,B[f]=O,L[u]=n[u]+x-b,L[f]=O,s.push(Gm(t,o,"dashed",s.length,R,B,C.className,i)),s.push(Gm(t,o,"dashed",s.length,j,L,C.className,i))})})}),s}function Vwe(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?lu:ou,h=c?ou:lu,g=r[f.start],v=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var S=w.gap,T=w.gapRects,P=Math.max.apply(Math,Re([b],le(T.map(function(N){var C=N.rect;return C[h.start]})),!1)),D=Math.min.apply(Math,Re([x],le(T.map(function(N){var C=N.rect;return C[h.end]})),!1)),O=(P+D)/2;P===D||O===(b+x)/2||T.forEach(function(N){var C=N.rect,I=N.className,R=[n[0],n[1]];if(C[f.end]<g)R[c]+=C[f.end]-g;else if(v<C[f.start])R[c]+=C[f.start]-g-S;else return;R[u]+=O-b,a.push(Gm(t,c?"vertical":"horizontal","gap",a.length,S,R,I,i))})})}),a}function NP(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,v=t.props,b=v.snapGap,x=b===void 0?!0:b,w=v.verticalGuidelines,S=v.horizontalGuidelines,T=v.snapThreshold,P=T===void 0?5:T,D=v.maxSnapElementGuidelineDistance,O=D===void 0?1/0:D,N=v.isDisplayGridGuidelines,C=Ua(Ga(t.state)),I=C.top,R=C.left,j=C.bottom,B=C.right,L={top:I,left:R,bottom:j,right:B,center:(R+B)/2,middle:(I+j)/2},z=$we(t),W=Re([],le(z),!1),Q=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ie){return ie*P});x&&W.push.apply(W,Re([],le(Bwe(t,L,Q)),!1));var G=ae({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(W.push.apply(W,Re([],le(Uwe(t,s?c:f,s?o:u,h,g,G,N)),!1)),a){var Y=i.left,J=i.top;G.left+=Y,G.top+=J,G.right+=Y,G.bottom+=J}return W.push.apply(W,Re([],le(sY(S||!1,w||!1,s?c:f,s?o:u,h,g,G)),!1)),W=W.filter(function(ie){var X=ie.element,U=ie.elementRect,Z=ie.type;if(!X||!U)return!0;var ee=U.rect;return aY(L,ee,Z,O)}),W}function Bwe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",ou,lu],["horizontal",lu,ou]].forEach(function(f){var h=le(f,3),g=h[0],v=h[1],b=h[2],x=e[v.start],w=e[v.end],S=e[v.center],T=e[b.start],P=e[b.end],D={left:n[0],top:n[1]};function O(I){var R=I.rect,j=D[v.start];return R[v.end]<x+j?x-R[v.end]:w-j<R[v.start]?R[v.start]-w:-1}var N=c.filter(function(I){var R=I.rect;return R[b.start]>P||R[b.end]<T?!1:O(I)>0}).sort(function(I,R){return O(I)-O(R)}),C=[];N.forEach(function(I){N.forEach(function(R){if(I!==R){var j=I.rect,B=R.rect,L=j[b.start],z=j[b.end],W=B[b.start],Q=B[b.end];L>Q||W>z||C.push([I,R])}})}),C.forEach(function(I){var R=le(I,2),j=R[0],B=R[1],L=j.rect,z=B.rect,W=L[v.start],Q=L[v.end],G=z[v.start],Y=z[v.end],J=D[v.start],ie=0,X=0,U=!1,Z=!1,ee=!1;if(Q<=x&&w<=G){if(Z=!0,ie=(G-Q-(w-x))/2,X=Q+ie+(w-x)/2,Ie(X-S)>J)return}else if(Q<G&&Y<x+J){if(U=!0,ie=G-Q,X=Y+ie,Ie(X-x)>J)return}else if(Q<G&&w-J<W){if(ee=!0,ie=G-Q,X=W-ie,Ie(X-w)>J)return}else return;ie&&aY(e,z,g,a)&&(ie>o||u.push({type:g,pos:g==="vertical"?[X,0]:[0,X],element:B.element,size:0,className:B.className,isStart:U,isCenter:Z,isEnd:ee,gap:ie,hide:!0,gapRects:[j,B],direction:"",elementDirection:""}))})}),u}function Fwe(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,v=o.snapRenderInfo,b=v&&(((i=v.direction)===null||i===void 0?void 0:i[0])||((a=v.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),S=w.children,T=v.direction;if(S){var P=T.map(function(O,N){var C=N===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},I=C.snapSize,R=C.posName,j=C.sizeName,B=C.clientOffset;if(!I)return{dir:O,multiple:1,snapSize:I,snapOffset:0};var L=w[j],z=w[R],W=YK(S.map(function(U){return[U[R]-z,U[j],L-U[j]-U[R]+z]})).filter(function(U){return U}).sort(function(U,Z){return U-Z}),Q=W[0],G=W.map(function(U){return lt(U/Q,.1)*I}),Y=1,J=lt(L/Q,.1);for(Y=1;Y<=10&&!G.every(function(U){return U*Y%1===0});++Y);var ie=(-O+1)/2,X=r1(z-B,z-B+L,ie,1-ie);return{multiple:J*Y,dir:O,snapSize:I,snapOffset:Math.round(X/I)}}),D=P.map(function(O){return O.multiple||1});o.snapThresholdInfo.multiples=D,o.snapThresholdInfo.offset=P.map(function(O){return O.snapOffset}),P.forEach(function(O,N){O.snapSize})}}else o.snapThresholdInfo=null}function Uwe(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,v=[],b=a.left,x=a.top,w=[0,0];Fwe(t,r,i,a);var S=c.snapThresholdInfo,T=f,P=g;if(S&&(f*=S.multiples[0]||1,g*=S.multiples[1]||1,w=S.offset),g){for(var D=function(N){v.push({type:"horizontal",pos:[b,lt(w[1]*P+N-i+x,.1)],className:Ze("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},O=0;O<=n*2;O+=g)D(O);for(var O=-g;O>=-n;O-=g)D(O)}if(f){for(var D=function(C){v.push({type:"vertical",pos:[lt(w[0]*T+C-r+b,.1),x],className:Ze("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},O=0;O<=e*2;O+=f)D(O);for(var O=-f;O>=-e;O-=f)D(O)}return v}function aY(t,e,n,r){return n==="horizontal"?Ie(t.right-e.left)<=r||Ie(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Ie(t.bottom-e.top)<=r||Ie(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function $we(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return Is(g)&&"element"in g?ae(ae({},g),{element:So(g.element,!0)}):{element:So(g,!0)}}).filter(function(g){return g.element}),s=txe(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var v=le(g,2),b=v[0],x=v[1];u[x]=i[b]}),qwe(t,c.map(function(g){return a[g]})).map(function(g,v){u[c[v]]=g}),e.elementRects=u;var f=f2(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var v=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,S=w===void 0?f.left:w,T=g.right,P=T===void 0?f.right:T,D=g.bottom,O=D===void 0?f.bottom:D,N=g.center,C=N===void 0?f.center:N,I=g.middle,R=I===void 0?f.middle:I,j=g.className,B=g.rect,L=h2({top:x,right:P,left:S,bottom:O,center:C,middle:R},B),z=L.horizontal,W=L.vertical,Q=L.horizontalNames,G=L.verticalNames,Y=B.top,J=B.left,ie=B.right-J,X=B.bottom-Y,U=[ie,X];W.forEach(function(Z,ee){h.push({type:"vertical",element:v,pos:[lt(Z,.1),Y],size:X,sizes:U,className:j,elementRect:g,elementDirection:cB[G[ee]]||G[ee],direction:""})}),z.forEach(function(Z,ee){h.push({type:"horizontal",element:v,pos:[J,lt(Z,.1)],size:ie,sizes:U,className:j,elementRect:g,elementDirection:cB[Q[ee]]||Q[ee],direction:""})})}),h}function bB(t,e){return t?t.map(function(n){var r=Is(n)?n:{pos:n},i=r.pos;return wp(i)?r:ae(ae({},r),{pos:tn(i,e)})}):[]}function sY(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,v=r+f-u;return bB(t,v).forEach(function(b){o.push({type:"horizontal",pos:[c,lt(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),bB(e,g).forEach(function(b){o.push({type:"vertical",pos:[lt(b.pos-i+c,.1),u],size:v,className:b.className,direction:""})}),o}function qwe(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=le(pwe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],v=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,S=x.top-h-v,T=S+x.height,P=w+x.width,D=le(Ap(a,[w,S],c),2),O=D[0],N=D[1],C=le(Ap(a,[P,T],c),2),I=C[0],R=C[1];return ae(ae({},b),{rect:{left:O,right:I,top:N,bottom:R,center:(O+I)/2,middle:(N+R)/2}})})}function ux(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=So(r,!0);if(s){var o=mv(s),c=TB(e,[o.left-i.left,o.top-i.top]),u=TB(e,[o.right-i.right,o.bottom-i.bottom]);a.left=lt(c[0],1e-5),a.top=lt(c[1],1e-5),a.right=lt(u[0],1e-5),a.bottom=lt(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=NP(t),e.enableSnap=!0,!0}function oY(t,e,n,r,i,a){var s=hf(t,e,n,a?4:3),o=wr(s,r);return y2(s,tt(i,o))}function xB(t){return t?t/Ie(t):0}function Gwe(t,e,n,r,i,a){var s=a.fixedDirection,o=ywe(n,s,r),c=g2(t,e,n,r),u=Re(Re([],le(Pwe(t,e,o,r,i,a)),!1),le(tY(t,c,a)),!1),f=c1(u,0),h=c1(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function Hwe(t,e,n,r,i,a,s,o,c){var u=wr(e,s),f=l_(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(lt(g,EP)||lt(h,EP)){var v=le(Ro({datas:c,distX:-g,distY:-h}),2),b=v[0],x=v[1],w=Math.min(i||1/0,n+s[0]*b),S=Math.min(a||1/0,r+s[1]*x);return[w-n,S-r]}return[0,0]}function lY(t,e,n,r,i,a,s,o){for(var c=Ga(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var v=e(f,h),b=Gwe(t,v,i,u,s,o),x=b.width,w=b.height,S=x.isBound,T=w.isBound,P=x.offset,D=w.offset;if(g===1&&(S||(P=0),T||(D=0)),g===0&&s&&!S&&!T)return[0,0];if(u){var O=Ie(P)*(n?1/n:1),N=Ie(D)*(r?1/r:1),C=S&&T?O<N:T||!S&&O<N;C?P=n*D/r:D=r*P/n}f+=P,h+=D}if(!u&&i[0]&&i[1]){var I=Dwe(t,c,i,a,o),R=I.maxWidth,j=I.maxHeight,B=le(Hwe(t,e(f,h).map(function(W){return W.map(function(Q){return lt(Q,EP)})}),n+f,r+h,R,j,i,s,o),2),P=B[0],D=B[1];f+=P,h+=D}return[f,h]}function pv(t){return t<0&&(t=t%360+360),t%=360,t}function Kwe(t,e){e=pv(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Ie(t-r)<Ie(t-i)?r:i}function ck(t,e){t=pv(t),e=pv(e);var n=pv(t-e);return Math.min(n,360-n)}function Wwe(t,e,n,r){var i,a=t.props,s=(i=a[KW])!==null&&i!==void 0?i:5,o=a[WW];if(ng(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,v=n*Math.PI/180,b=[c,u,f,h].map(function(D){return tt(D,g)}),x=b.map(function(D){return q0(D,v)}),w=Re(Re([],le(uwe(t,b,x,g,n)),!1),le(Ewe(t,b,x,g,n)),!1);w.sort(function(D,O){return Ie(D-n)-Ie(O-n)});var S=w.length>0;if(S)return{isSnap:S,dist:S?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(D,O){return ck(D,r)-ck(O,r)}),P=T[0];if(ck(P,r)<=s)return{isSnap:!0,dist:n+Kwe(r,P)-r}}return{isSnap:!1,dist:n}}function Ywe(t,e,n,r,i,a,s){if(!ng(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return lY(t,function(g,v){return oY(c||f,e+g,n+v,o,i,h)},e,n,r,i,a,s)}function Xwe(t,e,n,r,i){if(!ng(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=lY(t,function(h,g){return oY(Yxe(i,Nt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function Qwe(t,e){e.absolutePoses=Ga(t.state)}function wB(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Yi(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return ae(ae({},r),{direction:i.direction})})}function SB(t,e,n,r,i,a){var s=d2(s_(t,a),e,n),o=s.vertical,c=s.horizontal,u=jh();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=Twe(t),h=f.boundMap,g=f.vertical,v=f.horizontal;return g.forEach(function(b){kl(r,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||r.push({type:"bounds",pos:b})}),v.forEach(function(b){kl(i,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var Zwe=w2("",["resizable","scalable"]),Jwe={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",KW,WW,YW,XW,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!ng(t,""))return Lh(t,"boundMap",jh(),function(K){return JSON.stringify(K)}),Lh(t,"innerBoundMap",jh(),function(K){return JSON.stringify(K)}),[];n.guidelines=NP(t);var g=Math.min(a[0],s[0],o[0],c[0]),v=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=Ga(t.state),w=[],S=[],T=[],P=[],D=[],O=Ua(x),N=O.width,C=O.height,I=O.top,R=O.left,j=O.bottom,B=O.right,L={left:R,right:B,top:I,bottom:j,center:(R+B)/2,middle:(I+j)/2},z=b.length>0,W=z?Ua(b):{};if(!u.request){if(u.direction&&D.push(vwe(t,x,u.direction,h,h)),u.snap){var Q=Ua(x);u.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),D.push(uB(t,Q,h,h))}z&&(u.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),D.push(uB(t,W,h,h))),D.forEach(function(K){var ue=K.vertical.posInfos,ne=K.horizontal.posInfos;w.push.apply(w,Re([],le(ue.filter(function(oe){var Se=oe.guidelineInfos;return Se.some(function(se){var Ae=se.guideline;return!Ae.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),S.push.apply(S,Re([],le(ne.filter(function(oe){var Se=oe.guidelineInfos;return Se.some(function(se){var Ae=se.guideline;return!Ae.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),T.push.apply(T,Re([],le(wB(ue)),!1)),P.push.apply(P,Re([],le(wB(ne)),!1))})}var G=SB(t,[R,B],[I,j],w,S),Y=G.boundMap,J=G.innerBoundMap;z&&SB(t,[W.left,W.right],[W.top,W.bottom],w,S,u.externalBounds);var ie=Re(Re([],le(T),!1),le(P),!1),X=ie.filter(function(K){return K.element&&!K.gapRects}),U=ie.filter(function(K){return K.gapRects}).sort(function(K,ue){return K.gap-ue.gap});Be(t,"onSnap",{guidelines:ie.filter(function(K){var ue=K.element;return!ue}),elements:X,gaps:U},!0);var Z=Lh(t,"boundMap",Y,function(K){return JSON.stringify(K)},jh()),ee=Lh(t,"innerBoundMap",J,function(K){return JSON.stringify(K)},jh());return(Y===Z||J===ee)&&Be(t,"onBound",{bounds:Y,innerBounds:J},!0),Re(Re(Re(Re(Re(Re([],le(Lwe(t,X,[g,v],L,e)),!1),le(Vwe(t,U,[g,v],L,e)),!1),le(yB(t,"horizontal",P,[i,r],L,e)),!1),le(yB(t,"vertical",T,[i,r],L,e)),!1),le(vB(t,"horizontal",S,g,r,N,0,e)),!1),le(vB(t,"vertical",w,v,i,C,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},ux(t)},drag:function(t){var e=t.state;ux(t)||(e.guidelines=NP(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Zwe(t,e)||PP(t,e))return!0;if(!e.isRequest&&e.inputEvent)return xr(e.inputEvent.target,Ze("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,ux(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ux(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function e1e(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ze(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Yye.apply(void 0,Re([o2],le(t),!1))}function cY(t){t()}function t1e(t){return!t||t==="none"?[1,0,0,1,0,0]:Is(t)?t:Kv(t)}function gv(t,e,n){return a1(e,Wd(n,e),t,Wd(n.map(function(r){return-r}),e))}function n1e(t,e,n){if(e==="%"){var r=v2(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function r1e(t){var e=i1e(b2(t,":before"));return e.map(function(n,r){var i=B0(n),a=i.value,s=i.unit;return a*n1e(t,s,r===0)})}function d1(t){return t?t.split(" "):["0","0"]}function i1e(t){return d1(t.transformOrigin)}function uY(t){var e=Xi(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function Yv(t,e,n,r,i){var a,s,o=XO(t)||yu(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var v=!1,b=t===e||u===e,x="relative",w=1,S=parseFloat(i?.("zoom"))||1,T=i?.("position");u&&u!==o;){e===u&&(b=!0);var P=Xi(u),D=u.tagName.toLowerCase(),O=uY(u),N=P("willChange"),C=parseFloat(P("zoom"))||1;if(x=P("position"),r&&C!==1){w=C;break}if(!n&&r&&S!==1&&T&&T!=="absolute"||D==="svg"||D==="foreignobject"||x!=="static"||O&&O!=="none"||N==="transform")break;var I=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=u.parentNode;I&&(c=!0,f=R);var j=R;if(j&&j.nodeType===11){u=j.host,v=!0,x=Xi(u)("position");break}u=j,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:v,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function a1e(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=Xi(t),o=ZS(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=IW?r1e(t):d1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=le(l1e(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=d1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function dY(t,e){var n=Xi(t),r=Xi(yu(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function DP(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Ps(n,3,4))})}function s1e(t){for(var e=t.parentElement,n=!1,r=yu(t);e;){var i=b2(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function c_(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(wW(t,!e).join(","),")")}function v2(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function o1e(t,e){var n,r=v2(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,v=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,S=Math.floor((h-2)/3);v[0]=i*w/2,v[1]=a*S/2;var T=g===2?Math.max(u,c):Math.min(c,u);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*S}var P=r2(b,e);return n=le(x,2),P[e*(e-1)]=n[0],P[e*(e-1)+1]=n[1],gv(P,e,v)}function l1e(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Xi(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=v2(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,v=a?e[1]:e[1]-h;return[f,h,g,v]}function Pn(t,e,n){return pi(t,Kd(e,n),n)}function hf(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Pn(t,i,r)})}function Ua(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,Re([],le(e),!1)),i=Math.min.apply(Math,Re([],le(n),!1)),a=Math.max.apply(Math,Re([],le(e),!1)),s=Math.max.apply(Math,Re([],le(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function _B(t,e,n,r){var i=hf(t,e,n,r);return Ua(i)}function c1e(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=hY(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),v=[0,0];n===yu(n)&&(v=dY(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+v[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+v[1],S=b.width,T=b.height,P=a1(r,i,c),D=_B(P,f,h,r),O=D.left,N=D.top,C=D.width,I=D.height,R=Pn(P,o,r),j=tt(R,[O,N]),B=[x+j[0]*S/C,w+j[1]*T/I],L=[0,0],z=0;++z<10;){var W=Co(i,r);a=le(tt(Pn(W,B,r),Pn(W,R,r)),2),L[0]=a[0],L[1]=a[1];var Q=a1(r,i,Wd(L,r),c),G=_B(Q,f,h,r),Y=G.left,J=G.top,ie=Y-x,X=J-w;if(Ie(ie)<2&&Ie(X)<2)break;B[0]-=ie,B[1]-=X}return L.map(function(U){return Math.round(U)})}function u1e(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return Pn(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function qa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function fY(t,e){return qa([e[0]-t[0],e[1]-t[1]])}function Hm(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Qn(t,e));var i=fY(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function f1(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Xd(t,e){var n=t[e];return Is(n)?ae(ae({},t),n):t}function hY(t){var e=t&&!ZS(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,v=0,b=1/0,x=1/0,w=1/0,S=1/0,T=0,P=0,D=!1;if(t)if(!e&&t.ownerSVGElement){var O=t.getBBox();D=!0,n=O.width,r=O.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var N=Xi(t),C=t.style,I=N("boxSizing")==="border-box",R=parseFloat(N("borderLeftWidth"))||0,j=parseFloat(N("borderRightWidth"))||0,B=parseFloat(N("borderTopWidth"))||0,L=parseFloat(N("borderBottomWidth"))||0,z=parseFloat(N("paddingLeft"))||0,W=parseFloat(N("paddingRight"))||0,Q=parseFloat(N("paddingTop"))||0,G=parseFloat(N("paddingBottom"))||0,Y=z+W,J=Q+G,ie=R+j,X=B+L,U=Y+ie,Z=J+X,ee=N("position"),K=0,ue=0;if("clientLeft"in t){var ne=null;if(ee==="absolute"){var oe=Yv(t,yu(t));ne=oe.offsetParent}else ne=t.parentElement;if(ne){var Se=Xi(ne);K=parseFloat(Se("width")),ue=parseFloat(Se("height"))}}f=Math.max(Y,tn(N("minWidth"),K)||0),h=Math.max(J,tn(N("minHeight"),ue)||0),b=tn(N("maxWidth"),K),x=tn(N("maxHeight"),ue),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=tn(C.width,0)||0,P=tn(C.height,0)||0,s=parseFloat(N("width"))||0,o=parseFloat(N("height"))||0,c=Ie(s-T)<1?dP(f,T||s,b):s,u=Ie(o-P)<1?dP(h,P||o,x):o,n=c,r=u,i=c,a=u,I?(w=b,S=x,g=f,v=h,c=n-U,u=r-Z):(w=b+U,S=x+Z,g=f+U,v=h+Z,n=c+U,r=u+Z),i=c+Y,a=u+J}return{svg:D,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:T,inlineCSSHeight:P,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:v,maxOffsetWidth:w,maxOffsetHeight:S}}function pY(t,e){return Qn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function dx(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function gY(t,e){var n=t===yu(t)||t===XO(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Xi(t)("overflow")!=="visible",ae(ae({},e),r)}function uk(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?gY(n,f):f}function mv(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?gY(t,o):o}function d1e(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?_2(r,a,s):c}function mY(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=vY(a,r)}return i}function vY(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function y2(t,e){return[Nt(e,t[0]),Nt(e,t[1]),Nt(e,t[2]),Nt(e,t[3])]}function Ga(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return y2([r,i,a,s],[e,n])}function OP(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function zh(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&OP(t,e),r?.unset(),t[n]=null}function Ti(t,e){if(e){var n=tg(e);n.nextStyle=ae(ae({},n.nextStyle),t)}return{style:t,cssText:Cl(t).map(function(r){return"".concat(uw(r,"-"),": ").concat(t[r],";")}).join("")}}function yY(t,e,n){var r=e.afterTransform||e.transform;return ae(ae({},Ti(ae(ae(ae({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ht(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=ae(ae({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ba(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),ae(ae({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function u_(t,e,n){t._emitter.on(e,n)}function Be(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function b2(t,e){return Yc(t).getComputedStyle(t,e)}function fx(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function RP(t,e){return t===e||t==null&&e==null}function EB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!ZS(i))return i}return t[n]}function bY(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function f1e(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function xY(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Tp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Ie(r)-Ie(n)}),t[0]}function Ap(t,e,n){return pi(Co(t,n),Kd(e,n),n)}function h1e(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=le(Ap(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Ra(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Pn(t,[xB(n[0]||1),0],r),a=Pn(t,[0,xB(n[1]||1)],r),s=Pn(t,[n[0]/qa(i),n[1]/qa(a)],r);return Nt(e,s)}function gs(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function h1(t){return Ie(t)<=Ci?0:t}function x2(t){return function(e){if(!e.isDragging(t))return"";var n=nwe(e,t),r=n.deg;return r?Ze("view-control-rotation".concat(r)):""}}function w2(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return xr(i,Ze("direction"))&&(!t||xr(i,Ze(t)))}}function p1e(t,e,n){var r,i=Sp(t,{"x%":function(O){return O/100*e.offsetWidth},"y%":function(O){return O/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:Sp([""])[0],v=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=Th(f),S=Th(h),T=Th(v),P=Th(b),D=nn(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:S,targetFunctionMatrix:Th(x),afterFunctionMatrix:T,afterFunctionMatrix2:P,allFunctionMatrix:D,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:v,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function g1e(t){return!t||!Is(t)||Jp(t)?!1:hr(t)||"length"in t}function So(t,e){return t?Jp(t)?t:Wi(t)?e?document.querySelector(t):t:KO(t)?t():JK(t)?t:"current"in t?t.current:t:null}function S2(t,e){if(!t)return[];var n=g1e(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Wi(i)&&e?Re(Re([],le(r),!1),le([].slice.call(document.querySelectorAll(i))),!1):(hr(i)?r.push(S2(i,e)):r.push(So(i,e)),r)},[])}function m1e(t,e,n){var r=Qn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function TB(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=Co(n,i);return r||(a=Ps(a,3,4)),a[12]=0,a[13]=0,a[14]=0,Jbe(a,e)}function wY(t,e,n,r,i){var a=le(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Qn([0,0],e),h=Qn([0,0],r),g=qa(e),v=Math.cos(f-h)*g;if(!r[0])u=v,c=u*n;else if(!r[1])c=v,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),S=Math.atan2(b,x);w<0&&(w+=Math.PI*2),S<0&&(S+=Math.PI*2);var T=0;Ie(w-S)<Math.PI/2||Ie(w-S)>Math.PI/2*3||(S+=Math.PI),T=w-S,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var P=qa([b+e[0],x+e[1]])*Math.cos(T);c=P*Math.sin(S)-b,u=P*Math.cos(S)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function SY(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,v=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,S=[0,1].map(function(C){return Ie(t[C]-w[C])}),T=[0,1].map(function(C){var I=S[C];return I!==0&&(I=2/I),I});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(wp(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(v){var P=s*S[0],D=o*S[1],O=qa([P,D]);c=v/O*P*T[0],u=v/O*D*T[1]}else{var N=Ro({datas:n,distX:f,distY:h});N=T.map(function(C,I){return N[I]*C}),i=le(wY([s,o],N,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function MP(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=le(t.split(" "),2),r=n[0],i=n[1],a=MP(r||""),s=MP(i||""),o=ae(ae({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function _2(t,e,n){var r=MP(t,!0),i=r.x,a=r.y;return[tn(i,e)||0,tn(a,n)||0]}function v1e(t,e,n){var r=t.map(function(a){return tt(a,e)}),i=r.map(function(a){return q0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Nt(a,e)})}}function _Y(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=hr(n),s=hr(i);return a&&s?_Y(n,i):!a&&!s?n===i:!1})}function Lh(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function wi(t){return t>=0?1:-1}function Ie(t){return Math.abs(t)}function dk(t,e){return fbe(t).map(function(n){return e(n)})}function EY(t){return wp(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var y1e=K0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=ht(t,e,{});r&&(g.targets=r);var v=Be(t,u,g);n.isPinch=v!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=ae(ae({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=ht(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Be(t,h,f);var g=n.ables,v="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[v]&&b[v](t,ae(ae({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=ba(t,e,{isDrag:r});a&&(c.targets=a),Be(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,ae(ae({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ae(ae({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ae(ae({},e),{targets:t.props.targets}))}}),AB=w2("scalable"),b1e={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:qW("scalable"),dragControlCondition:AB,viewClassName:x2("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=mY(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,v=o.pos2,b=o.pos4;if(!s||!h)return!1;r||ff(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];a_(t,e,"scale"),n.isWidth=x;function w(N){n.ratio=N&&isFinite(N)?N:0}n.startPositions=Ga(t.state);function S(N){var C=nY(n.startPositions,N);n.fixedDirection=C.fixedDirection,n.fixedPosition=C.fixedPosition,n.fixedOffset=C.fixedOffset}n.setFixedDirection=S,w(gl(g,v)/gl(v,b)),S([-s[0],-s[1]]);var T=function(N){n.minScaleSize=N},P=function(N){n.maxScaleSize=N};T([-1/0,-1/0]),P([1/0,1/0]);var D=ht(t,e,ae(ae({direction:s,set:function(N){n.startValue=N},setRatio:w,setFixedDirection:S,setMinScaleSize:T,setMaxScaleSize:P},i_(t,e)),{dragStart:xi.dragStart(t,new _p().dragStart([0,0],e))})),O=Be(t,"onScaleStart",D);return n.startFixedDirection=n.fixedDirection,O!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?D:!1},dragControl:function(t,e){n_(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,v=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,S=n.ratio;if(!b)return!1;var T=t.props,P=T.throttleScale,D=T.parentMoveable,O=h;!h[0]&&!h[1]&&(O=[1,1]);var N=S&&(r??T.keepRatio)||!1,C=t.state,I=[x[0],x[1]];function R(){var ve=SY(O,N,n,e),te=ve.distWidth,Pe=ve.distHeight,be=g?(g+te)/g:1,_e=v?(v+Pe)/v:1;x[0]||(I[0]=te/g),x[1]||(I[1]=Pe/v);var De=(O[0]||N?be:1)*I[0],Oe=(O[1]||N?_e:1)*I[1];return De===0&&(De=wi(f[0])*ox),Oe===0&&(Oe=wi(f[1])*ox),[De,Oe]}var j=R();if(!a&&t.props.groupable){var B=C.snapRenderInfo||{},L=B.direction;hr(L)&&(L[0]||L[1])&&(C.snapRenderInfo={direction:h,request:e.isRequest})}Be(t,"onBeforeScale",ht(t,e,{scale:j,setFixedDirection:function(ve){return n.setFixedDirection(ve),j=R(),j},startFixedDirection:n.startFixedDirection,setScale:function(ve){j=ve}},!0));var z=[j[0]/I[0],j[1]/I[1]],W=s,Q=[0,0],G=wi(z[0]*z[1]),Y=!s&&!i&&a;if(Y||u?W=u2(t,n.targetAllTransform,[0,0],[0,0],n):s||(W=n.fixedPosition),a||(Q=Xwe(t,z,h,!c&&o,n)),N){O[0]&&O[1]&&Q[0]&&Q[1]&&(Math.abs(Q[0]*g)>Math.abs(Q[1]*v)?Q[1]=0:Q[0]=0);var J=!Q[0]&&!Q[1];if(J&&(w?z[0]=lt(z[0]*I[0],P)/I[0]:z[1]=lt(z[1]*I[1],P)/I[1]),O[0]&&!O[1]||Q[0]&&!Q[1]||J&&w){z[0]+=Q[0];var ie=g*z[0]*I[0]/S;z[1]=wi(G*z[0])*Ie(ie/v/I[1])}else if(!O[0]&&O[1]||!Q[0]&&Q[1]||J&&!w){z[1]+=Q[1];var X=v*z[1]*I[1]*S;z[0]=wi(G*z[1])*Ie(X/g/I[0])}}else z[0]+=Q[0],z[1]+=Q[1],Q[0]||(z[0]=lt(z[0]*I[0],P)/I[0]),Q[1]||(z[1]=lt(z[1]*I[1],P)/I[1]);z[0]===0&&(z[0]=wi(f[0])*ox),z[1]===0&&(z[1]=wi(f[1])*ox),j=e1e(z,[I[0],I[1]]);var U=[g,v],Z=[g*j[0],v*j[1]];Z=WK(Z,n.minScaleSize,n.maxScaleSize,N?S:!1),j=dk(2,function(ve){return U[ve]?Z[ve]/U[ve]:Z[ve]}),z=dk(2,function(ve){return j[ve]/I[ve]});var ee=dk(2,function(ve){return f[ve]?z[ve]/f[ve]:z[ve]}),K="scale(".concat(z.join(", "),")"),ue="scale(".concat(j.join(", "),")"),ne=r_(n,ue,K),oe=!x[0]||!x[1],Se=Xxe(t,oe?ue:K,n.fixedDirection,W,n.fixedOffset,n,oe),se=Y?Se:tt(Se,n.prevInverseDist||[0,0]);if(n.prevDist=z,n.prevInverseDist=Se,j[0]===f[0]&&j[1]===f[1]&&se.every(function(ve){return!ve})&&!D&&!Y)return!1;var Ae=ht(t,e,ae({offsetWidth:g,offsetHeight:v,direction:h,scale:j,dist:z,delta:ee,isPinch:!!a},LW(t,ne,se,a,e)));return Be(t,"onScale",Ae),Ae},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ba(t,e,{});return Be(t,"onScaleEnd",r),r},dragGroupControlCondition:AB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=As(t,"resizable",e);n.moveableScale=t.scale;var a=ml(t,this,"dragControlStart",e,function(u,f){return l1(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),l1(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=ae(ae({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Be(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){u_(t,"onBeforeScale",function(f){Be(t,"onBeforeScaleGroup",ht(t,e,ae(ae({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=ml(t,this,"dragControl",e,function(f,h){var g=le(pi(G0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),v=g[0],b=g[1];return ae(ae({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Nt(o,[v,b])})}),u=ae({targets:t.props.targets,events:c},r);return Be(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=ml(t,this,"dragControlEnd",e),a=ba(t,e,{targets:t.props.targets,events:i});return Be(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function kc(t,e){return t.map(function(n,r){return r1(n,e[r],1,2)})}function kB(t,e,n){var r=Qn(t,e),i=Qn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function x1e(t,e){var n=kB(t[0],t[1],t[2]),r=kB(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var w1e={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:x2("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=kc(c,u),v=kc(u,c),b=kc(c,f),x=kc(f,c),w=kc(f,h),S=kc(h,f),T=kc(u,h),P=kc(h,u);return Re([e.createElement("div",{className:Ze("line"),key:"middeLine1",style:Hm(g,w,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine2",style:Hm(v,S,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine3",style:Hm(b,T,s)}),e.createElement("div",{className:Ze("line"),key:"middeLine4",style:Hm(x,P,s)})],le(GW(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return xr(n,Ze("direction"))&&xr(n,Ze("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=vY(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,v=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:Ps(h,3,4),n.targetInverseMatrix=bW(Co(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,v],[g,v]].map(function(T){return tt(T,c)}),n.nextPoses=n.poses.map(function(T){var P=le(T,2),D=P[0],O=P[1];return pi(n.warpTargetMatrix,[D,O,0,1],4)}),n.startValue=yn(4),n.prevMatrix=yn(4),n.absolutePoses=Ga(o),n.posIndexes=zW(s),ff(t,e),a_(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=ht(t,e,ae({set:function(T){n.startValue=T}},i_(t,e))),S=Be(t,"onWarpStart",w);return S!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(n_(t,e,"matrix3d"),ng(t,"warpable")){var v=h.map(function(R){return g[R]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var b=l_(t,r,{horizontal:v.map(function(R){return R[1]+a}),vertical:v.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var S=Ro({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(R){T[R]=Nt(T[R],S)}),!Bxe.every(function(R){return x1e(R.map(function(j){return f[j]}),R.map(function(j){return T[j]}))}))return!1;var P=i2(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!P.length)return!1;var D=nn(s,P,4),O=MW(n,D,!0),N=nn(Co(o,4),O,4);n.prevMatrix=O;var C=nn(u,O,4),I=r_(n,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(O.join(", "),")"));return c2(e,I),Be(t,"onWarp",ht(t,e,ae({delta:N,matrix:C,dist:O,multiply:nn,transform:I},Ti({transform:I},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Be(t,"onWarpEnd",ba(t,e,{})),r):!1}},S1e=Ze("area-pieces"),hx=Ze("area-piece"),TY=Ze("avoid"),_1e=Ze("view-dragging");function fk(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;ZK(e,TY),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function CB(t){return t.createElement("div",{key:"area_pieces",className:S1e},t.createElement("div",{className:hx}),t.createElement("div",{className:hx}),t.createElement("div",{className:hx}),t.createElement("div",{className:hx}))}var AY={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Ze("area","pass"):Ze("area");if(a)return[e.createElement("div",{key:"area",ref:pl(t,"areaElement"),className:h}),CB(e)];if(!r||!i)return[];var g=i2([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),v=g.length?c_(g,!0):"none";return[e.createElement("div",{key:"area",ref:pl(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:v}}),CB(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,v=c.top,b=Ua(u),x=b.left,w=b.top,S=b.width,T=b.height,P=h?4:3,D=le(Ap(f,[r-g,i-v],P),2),O=D[0],N=D[1];O-=x,N-=w;var C=[{left:x,top:w,width:S,height:N-10},{left:x,top:w,width:O-10,height:T},{left:x,top:w+N+10,width:S,height:T-N-10},{left:x+O+10,top:w,width:S-O-10,height:T}],I=[].slice.call(s.nextElementSibling.children);C.forEach(function(R,j){I[j].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),QK(s,TY),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,fk(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||fk(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){fk(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&KK(function(){e.disableNativeEvent=!1})}},E1e=K0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,v=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var S=le(_2(i,b,x),2),T=S[0],P=S[1],D=h?4:3,O=Pn(f,[T,P],D);w=f1(c,r,tt(O,[g,v]))}else w=f1(c,r,o);return[e.createElement("div",{className:Ze("control","origin"),style:w,key:"beforeOrigin"})]}});function T1e(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var A1e={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new axe,o=So(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,v=ht(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(v.targets=u),Be(t,b,v)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,v=f.inputEvent;t[c].scrollBy(h,g,v.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,ae({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?T1e:f,g=r.scrollOptions;return n.drag(e,ae({container:a,threshold:o,throttleTime:u,getScrollPosition:function(v){return h({scrollContainer:v.container,direction:v.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ae(ae({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ae(ae({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ae(ae({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},kY={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},k1e=K0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=EY(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,v=c.pos4,b=[f,h,g,v],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,S){var T=le(w,2),P=T[0],D=T[1],O=b[P],N=b[D],C=u[P],I=u[D],R=i2([0,0],[100,0],[0,100],[100,100],O,N,C,I);if(R.length)return e.createElement("div",{key:"padding".concat(S),className:Ze("padding"),style:{transform:c_(R,!0)}})})}}),IB=["nw","ne","se","sw"];function px(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var C1e=[1,2,5,6],I1e=[0,3,4,7],gd=[1,-1,-1,1],md=[1,1,-1,-1];function E2(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var v=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(gs(w,r,e)),w}else{var w=Math.max(0,v===1?x[0]-i:s-x[0]);return c.push(gs(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function CY(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function IY(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,v=t.slice(0,g),b=t.slice(g+1),x=v.length,w=b.length,S=w>0,T=le(v,4),P=T[0],D=P===void 0?"0px":P,O=T[1],N=O===void 0?D:O,C=T[2],I=C===void 0?D:C,R=T[3],j=R===void 0?N:R,B=le(b,4),L=B[0],z=L===void 0?D:L,W=B[1],Q=W===void 0?S?z:N:W,G=B[2],Y=G===void 0?S?z:I:G,J=B[3],ie=J===void 0?S?Q:j:J,X=[D,N,I,j].map(function(ne){return tn(ne,e)}),U=[z,Q,Y,ie].map(function(ne){return tn(ne,n)}),Z=X.slice(),ee=U.slice();o=le(px([Z[0],Z[1]],e),2),Z[0]=o[0],Z[1]=o[1],c=le(px([Z[3],Z[2]],e),2),Z[3]=c[0],Z[2]=c[1],u=le(px([ee[0],ee[3]],n),2),ee[0]=u[0],ee[3]=u[1],f=le(px([ee[1],ee[2]],n),2),ee[1]=f[0],ee[2]=f[1];var K=s?Z:Z.slice(0,Math.max(a[0],x)),ue=s?ee:ee.slice(0,Math.max(a[1],w));return Re(Re([],le(K.map(function(ne,oe){var Se=IB[oe];return{virtual:oe>=x,horizontal:gd[oe],vertical:0,pos:[r+ne,i+(md[oe]===-1?n:0)],sub:!0,raw:X[oe],direction:Se}})),!1),le(ue.map(function(ne,oe){var Se=IB[oe];return{virtual:oe>=w,horizontal:0,vertical:md[oe],pos:[r+(gd[oe]===-1?e:0),i+ne],sub:!0,raw:U[oe],direction:Se}})),!1)}function P1e(t,e,n,r,i){i===void 0&&(i=e.length);var a=CY(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function N1e(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=CY(t.slice(n)),g=h.horizontalRange,v=h.verticalRange;if(r>-1)for(var b=gd[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=md[x]===1?f:c,S=0;if(r===x?S=a:x===0?S=u+b:gd[x]===-1&&(S=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:gd[x],vertical:0,pos:[S,w]}),e.splice(n+x,0,[S,w]),x===0)break}else if(i>-1){var T=md[i]===1?s-f:c-s;if(g[1]===0&&v[1]===0){var P=[u+T,f];t.push({horizontal:gd[0],vertical:0,pos:P}),e.push(P)}for(var D=v[0],x=v[1];x<=i;++x){var S=gd[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+T:md[x]===1?w=e[n+D][1]:md[x]===-1&&(w=c-(e[n+D][1]-f)),t.push({horizontal:0,vertical:md[x],pos:[S,w]}),e.push([S,w]),x===0)break}}}function D1e(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var O1e=[[0,-1,"n"],[1,0,"e"]],R1e=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function T2(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(N){return"".concat(gs(N[0],a,r)," ").concat(gs(N[1],s,r))});if(f||c==="inset"){var g=n[1][1],v=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,v,x,b].map(function(N){return"".concat(N,"px")});var w=[g,a-v,s-x,b].map(function(N,C){return gs(N,C%2?a:s,r)});if(n.length>8){var S=le(tt(n[4],n[0]),2),T=S[0],P=S[1];w.push.apply(w,Re(["round"],le(E2(u.slice(8).map(function(N,C){return ae(ae({},N),{pos:n[C]})}),r,T,P,b,g,v,x).styles),!1))}return w}else if(h||c==="ellipse"){var D=n[0],O=gs(Ie(n[1][1]-D[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[O]:[gs(Ie(n[2][0]-D[0]),a,r),O];return w.push("at",gs(D[0],a,r),gs(D[1],s,r)),w}}function p1(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return R1e.map(function(s){var o=le(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:Ie(u),horizontal:Ie(c),direction:f,pos:[h,g]}})}function PY(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Ie(e[1]-e[0]),Ie(n[1]-n[0])]}function PB(t,e,n,r,i){var a,s,o,c,u,f,h,g,v;if(t){var b=i;if(!b){var x=Xi(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var S=HK(b),T=S.prefix,P=T===void 0?b:T,D=S.value,O=D===void 0?"":D,N=P==="circle",C=" ";if(P==="polygon"){var I=wd(O||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var R=I.map(function(Ft){var Gn=le(Ft.split(" "),2),An=Gn[0],yt=Gn[1];return{vertical:1,horizontal:1,pos:[tn(An,e),tn(yt,n)]}}),j=Yd(R.map(function(Ft){return Ft.pos}));return{type:P,clipText:b,poses:R,splitter:C,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(N||P==="ellipse"){var B="",L="",z=0,W=0,I=su(O);if(N){var Q="";a=le(I,4),s=a[0],Q=s===void 0?"50%":s,o=a[2],B=o===void 0?"50%":o,c=a[3],L=c===void 0?"50%":c,z=tn(Q,Math.sqrt((e*e+n*n)/2)),W=z}else{var G="",Y="";u=le(I,5),f=u[0],G=f===void 0?"50%":f,h=u[1],Y=h===void 0?"50%":h,g=u[3],B=g===void 0?"50%":g,v=u[4],L=v===void 0?"50%":v,z=tn(G,e),W=tn(Y,n)}var J=[tn(B,e),tn(L,n)],R=Re([{vertical:1,horizontal:1,pos:J,direction:"nesw"}],le(O1e.slice(0,N?1:2).map(function(An){return{vertical:Ie(An[1]),horizontal:An[0],direction:An[2],sub:!0,pos:[J[0]+An[0]*z,J[1]+An[1]*W]}})),!1);return{type:P,clipText:b,radiusX:z,radiusY:W,left:J[0]-z,top:J[1]-W,right:J[0]+z,bottom:J[1]+W,poses:R,splitter:C}}else if(P==="inset"){var I=su(O||"0 0 0 0"),ie=I.indexOf("round"),X=(ie>-1?I.slice(0,ie):I).length,U=I.slice(X+1),Z=le(I.slice(0,X),4),ee=Z[0],K=Z[1],ue=K===void 0?ee:K,ne=Z[2],oe=ne===void 0?ee:ne,Se=Z[3],se=Se===void 0?ue:Se,Ae=le([ee,oe].map(function(An){return tn(An,n)}),2),ve=Ae[0],te=Ae[1],Pe=le([se,ue].map(function(An){return tn(An,e)}),2),be=Pe[0],_e=Pe[1],De=e-_e,Oe=n-te,Ye=IY(U,De-be,Oe-ve,be,ve),R=Re(Re([],le(p1(ve,De,Oe,be)),!1),le(Ye),!1);return{type:"inset",clipText:b,poses:R,top:ve,left:be,right:De,bottom:Oe,radius:U,splitter:C}}else if(P==="rect"){var I=wd(O||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));C=",";var Ve=le(I.map(function(ei){var ti=B0(ei).value;return ti}),4),it=Ve[0],_e=Ve[1],te=Ve[2],be=Ve[3],R=p1(it,_e,te,be);return{type:"rect",clipText:b,poses:R,top:it,right:_e,bottom:te,left:be,values:I,splitter:C}}}}}function M1e(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(z){return z==="w"||z==="e"}),h=u.filter(function(z){return z==="n"||z==="s"}),g=f[0],v=h[0];c[e]=n;var b=le(PY(t),2),x=b[0],w=b[1],S=x&&w?x/w:0;if(S&&i){var T=(e+4)%8,P=t[T].pos,D=[0,0];s.indexOf("w")>-1?D[0]=-1:s.indexOf("e")>-1&&(D[0]=1),s.indexOf("n")>-1?D[1]=-1:s.indexOf("s")>-1&&(D[1]=1);var O=wY([x,w],n,S,D,!0),N=x+O[0],C=w+O[1],I=P[1],R=P[1],j=P[0],B=P[0];D[0]===-1?j=B-N:D[0]===1?B=j+N:(j=j-N/2,B=B+N/2),D[1]===-1?I=R-C:(D[1]===1||(I=R-C/2),R=I+C);var L=p1(I,B,R,j);t.forEach(function(z,W){c[W][0]=L[W].pos[0]-z.pos[0],c[W][1]=L[W].pos[1]-z.pos[1]})}else t.forEach(function(z,W){var Q=z.direction;Q&&(Q.indexOf(g)>-1&&(c[W][0]=n[0]),Q.indexOf(v)>-1&&(c[W][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),v&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(z){var W=z==="n"||z==="s";t.forEach(function(Q,G){var Y=Q.direction,J=Q.horizontal,ie=Q.vertical;!Y||Y.indexOf(z)===-1||(c[G]=[W||!J?0:n[0],!W||!ie?0:n[1]])})}):c[e]=n;return c}function j1e(t,e){var n=le(RW(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var v=C1e.indexOf(o),b=I1e.indexOf(o),x=f.length;if(N1e(f,g,8,v,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=T2(t,s,g),S="".concat(u,"(").concat(w.join(h),")");Be(t,"onClip",ht(t,e,ae({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:S,distX:0,distY:0},Ti({clipPath:S},e))))}function z1e(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(v){return v.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(P1e(o,u,i,8,f),f===o.length))return}else return;var h=T2(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Be(t,"onClip",ht(t,e,ae({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},Ti({clipPath:g},e))))}var L1e={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,v=c.is3d,b=c.left,x=c.top,w=c.pos1,S=c.pos2,T=c.pos3,P=c.pos4,D=c.clipPathState,O=c.snapBoundInfos,N=c.rotation;if(!u||o)return[];var C=PB(u,f,h,i||"inset",D||r);if(!C)return[];var I=v?4:3,R=C.type,j=C.poses,B=j.map(function(_e){var De=Pn(g,_e.pos,I);return[De[0]-b,De[1]-x]}),L=[],z=[],W=R==="rect",Q=R==="inset",G=R==="polygon";if(W||Q||G){var Y=Q?B.slice(0,8):B;z=Y.map(function(_e,De){var Oe=De===0?Y[Y.length-1]:Y[De-1],Ye=Qn(Oe,_e),Ve=fY(Oe,_e);return e.createElement("div",{key:"clipLine".concat(De),className:Ze("line","clip-line","snap-control"),"data-clip-index":De,style:{width:"".concat(Ve,"px"),transform:"translate(".concat(Oe[0],"px, ").concat(Oe[1],"px) rotate(").concat(Ye,"rad) scaleY(").concat(s,")")}})})}if(L=B.map(function(_e,De){return e.createElement("div",{key:"clipControl".concat(De),className:Ze("control","clip-control","snap-control"),"data-clip-index":De,style:{transform:"translate(".concat(_e[0],"px, ").concat(_e[1],"px) rotate(").concat(N,"rad) scale(").concat(s,")")}})}),Q&&L.push.apply(L,Re([],le(B.slice(8).map(function(_e,De){return e.createElement("div",{key:"clipRadiusControl".concat(De),className:Ze("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+De,style:{transform:"translate(".concat(_e[0],"px, ").concat(_e[1],"px) rotate(").concat(N,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var J=C.left,ie=C.top,X=C.radiusX,U=C.radiusY,Z=le(tt(Pn(g,[J,ie],I),Pn(g,[0,0],I)),2),ee=Z[0],K=Z[1],ue="none";if(!a){for(var ne=Math.max(10,X/5,U/5),oe=[],Se=0;Se<=ne;++Se){var se=Math.PI*2/ne*Se;oe.push([X+(X-s)*Math.cos(se),U+(U-s)*Math.sin(se)])}oe.push([X,-2]),oe.push([-2,-2]),oe.push([-2,U*2+2]),oe.push([X*2+2,U*2+2]),oe.push([X*2+2,-2]),oe.push([X,-2]),ue="polygon(".concat(oe.map(function(_e){return"".concat(_e[0],"px ").concat(_e[1],"px")}).join(", "),")")}L.push(e.createElement("div",{key:"clipEllipse",className:Ze("clip-ellipse","snap-control"),style:{width:"".concat(X*2,"px"),height:"".concat(U*2,"px"),clipPath:ue,transform:"translate(".concat(-b+ee,"px, ").concat(-x+K,"px) ").concat(c_(g))}}))}if(a){var Ae=Ua(Re([w,S,T,P],le(B),!1)),ve=Ae.width,te=Ae.height,Pe=Ae.left,be=Ae.top;if(G||W||Q){var oe=Q?B.slice(0,8):B;L.push(e.createElement("div",{key:"clipArea",className:Ze("clip-area","snap-control"),style:{width:"".concat(ve,"px"),height:"".concat(te,"px"),transform:"translate(".concat(Pe,"px, ").concat(be,"px)"),clipPath:"polygon(".concat(oe.map(function(De){return"".concat(De[0]-Pe,"px ").concat(De[1]-be,"px")}).join(", "),")")}}))}}return O&&["vertical","horizontal"].forEach(function(_e){var De=O[_e],Oe=_e==="horizontal";De.isSnap&&z.push.apply(z,Re([],le(De.snap.posInfos.map(function(Ye,Ve){var it=Ye.pos,Ft=tt(Pn(g,Oe?[0,it]:[it,0],I),[b,x]),Gn=tt(Pn(g,Oe?[f,it]:[it,h],I),[b,x]);return Wv(e,"",Ft,Gn,s,"clip".concat(_e,"snap").concat(Ve),"guideline")})),!1)),De.isBound&&z.push.apply(z,Re([],le(De.bounds.map(function(Ye,Ve){var it=Ye.pos,Ft=tt(Pn(g,Oe?[0,it]:[it,0],I),[b,x]),Gn=tt(Pn(g,Oe?[f,it]:[it,h],I),[b,x]);return Wv(e,"",Ft,Gn,s,"clip".concat(_e,"bounds").concat(Ve),"guideline","bounds","bold")})),!1))}),Re(Re([],le(L),!1),le(z),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ae(ae({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=PB(s,o,c,i||"inset",a);if(!g)return!1;var v=g.clipText,b=g.type,x=g.poses,w=Be(t,"onClipStart",ht(t,e,{clipType:b,clipStyle:v,poses:x.map(function(S){return S.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=v,ff(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,v=c.clipPath;if(!v)return!1;var b=Xd(t.props,"clippable"),x=b.keepRatio,w=0,S=0,T=s.draggable,P=Ro(e);o&&T?(n=le(T.prevBeforeDist,2),w=n[0],S=n[1]):(r=le(P,2),w=r[0],S=r[1]);var D=[w,S],O=t.state,N=O.width,C=O.height,I=!h&&!u&&!f,R=v.type,j=v.poses,B=v.splitter,L=j.map(function(ut){return ut.pos});I&&(w=-w,S=-S);var z=!u||j[g].direction==="nesw",W=R==="inset"||R==="rect",Q=j.map(function(){return[0,0]});if(u&&!z){var G=j[g],Y=G.horizontal,J=G.vertical,ie=[w*Ie(Y),S*Ie(J)];Q=M1e(j,g,ie,W,x)}else z&&(Q=L.map(function(){return[w,S]}));var X=L.map(function(ut,pn){return Nt(ut,Q[pn])}),U=Re([],le(X),!1);O.snapBoundInfos=null;var Z=v.type==="circle",ee=v.type==="ellipse";if(Z||ee){var K=Ua(X),ue=Ie(K.bottom-K.top),ne=Ie(ee?K.right-K.left:ue),oe=X[0][1]+ue,Se=X[0][0]-ne,se=X[0][0]+ne;Z&&(U.push([se,K.bottom]),Q.push([1,0])),U.push([K.left,oe]),Q.push([0,1]),U.push([Se,K.bottom]),Q.push([1,0])}var Ae=sY((b.clipHorizontalGuidelines||[]).map(function(ut){return tn("".concat(ut),C)}),(b.clipVerticalGuidelines||[]).map(function(ut){return tn("".concat(ut),N)}),N,C),ve=[],te=[];if(Z||ee)ve=[U[4][0],U[2][0]],te=[U[1][1],U[3][1]];else if(W){var Pe=[U[0],U[2],U[4],U[6]],be=[Q[0],Q[2],Q[4],Q[6]];ve=Pe.filter(function(ut,pn){return be[pn][0]}).map(function(ut){return ut[0]}),te=Pe.filter(function(ut,pn){return be[pn][1]}).map(function(ut){return ut[1]})}else ve=U.filter(function(ut,pn){return Q[pn][0]}).map(function(ut){return ut[0]}),te=U.filter(function(ut,pn){return Q[pn][1]}).map(function(ut){return ut[1]});var _e=[0,0],De=pB(Ae,b.clipTargetBounds&&{left:0,top:0,right:N,bottom:C},ve,te,5,5),Oe=De.horizontal,Ye=De.vertical,Ve=Oe.offset,it=Ye.offset;if(Oe.isBound&&(_e[1]+=Ve),Ye.isBound&&(_e[0]+=it),(ee||Z)&&Q[0][0]===0&&Q[0][1]===0){var K=Ua(X),Ft=K.bottom-K.top,Gn=ee?K.right-K.left:Ft,An=Ye.isBound?Ie(it):Ye.snapIndex===0?-it:it,yt=Oe.isBound?Ie(Ve):Oe.snapIndex===0?-Ve:Ve;Gn-=An,Ft-=yt,Z&&(Ft=ZW(Ye,Oe)>0?Ft:Gn,Gn=Ft);var Ut=U[0];U[1][1]=Ut[1]-Ft,U[2][0]=Ut[0]+Gn,U[3][1]=Ut[1]+Ft,U[4][0]=Ut[0]-Gn}else if(W&&x&&u){var ei=le(PY(j),2),ti=ei[0],ze=ei[1],wt=ti&&ze?ti/ze:0,Ir=j[g],Mn=Ir.direction||"",kn=U[1][1],oe=U[5][1],Se=U[7][0],se=U[3][0];Ie(Ve)<=Ie(it)?Ve=wi(Ve)*Ie(it)/wt:it=wi(it)*Ie(Ve)*wt,Mn.indexOf("w")>-1?Se-=it:Mn.indexOf("e")>-1?se-=it:(Se+=it/2,se-=it/2),Mn.indexOf("n")>-1?kn-=Ve:Mn.indexOf("s")>-1?oe-=Ve:(kn+=Ve/2,oe-=Ve/2);var dn=p1(kn,se,oe,Se);U.forEach(function(mi,ri){var Cn;Cn=le(dn[ri].pos,2),mi[0]=Cn[0],mi[1]=Cn[1]})}else U.forEach(function(ut,pn){var on=Q[pn];on[0]&&(ut[0]-=it),on[1]&&(ut[1]-=Ve)});var Mt=T2(t,v,X),fn="".concat(R,"(").concat(Mt.join(B),")");if(O.clipPathState=fn,Z||ee)ve=[U[4][0],U[2][0]],te=[U[1][1],U[3][1]];else if(W){var Pe=[U[0],U[2],U[4],U[6]];ve=Pe.map(function(pn){return pn[0]}),te=Pe.map(function(pn){return pn[1]})}else ve=U.map(function(ut){return ut[0]}),te=U.map(function(ut){return ut[1]});if(O.snapBoundInfos=pB(Ae,b.clipTargetBounds&&{left:0,top:0,right:N,bottom:C},ve,te,1,1),T){var at=O.is3d,ni=O.allMatrix,hn=at?4:3,pr=_e;o&&(pr=[D[0]+_e[0]-P[0],D[1]+_e[1]-P[1]]),T.deltaOffset=nn(ni,[pr[0],pr[1],0,0],hn)}return Be(t,"onClip",ht(t,e,ae({clipEventType:"changed",clipType:R,poses:X,clipStyle:fn,clipStyles:Mt,distX:w,distY:S},Ti((i={},i[R==="rect"?"clip":"clipPath"]=fn,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Be(t,"onClipEnd",ba(t,e,{})),i&&(o?z1e(t,e):a&&j1e(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},V1e={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":xr(e.inputEvent.target,Ze("origin"))},dragControlStart:function(t,e){var n=e.datas;ff(t,e);var r=ht(t,e,{dragStart:xi.dragStart(t,new _p().dragStart([0,0],e))}),i=Be(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=le(Ro(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,v=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=v?4:3,S=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(S=T)}var P=Nt(n.startOrigin,S),D=Nt(n.startTargetOrigin,S),O=tt(S,n.prevOrigin),N=Y0(h,g,P,w),C=t.getRect(),I=Ua(hf(N,u,f,w)),R=[C.left-I.left,C.top-I.top];n.prevOrigin=S;var j=[gs(D[0],u,x),gs(D[1],f,x)].join(" "),B=xi.drag(t,W0(e,t.state,R,!!r)),L=ht(t,e,ae(ae({width:u,height:f,origin:P,dist:S,delta:O,transformOrigin:j,drag:B},Ti({transformOrigin:j,transform:B.transform},e)),{afterTransform:B.transform}));return Be(t,"onDragOrigin",L),L},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Be(t,"onDragOriginEnd",ba(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function B1e(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];F1e(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function F1e(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function U1e(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function NB(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=su(t),IY(a,e,n,0,0,r,i)}function DB(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=E2(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=D1e(h,u),v=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=ht(t,e,ae({horizontals:v,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},Ti({borderRadius:x},e)));return Be(t,"onRound",w),w}function OB(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=b2(s).borderRadius,r.borderRadius=i))}return i}var $1e={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Ze("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,v=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,S=h.roundPadding,T=S===void 0?0:S,P=h.isDisplayShadowRoundControls,D=h.groupable;if(!r)return null;var O=f||OB(t),N=o?4:3,C=NB(O,i,a,v,!0);if(!C)return null;var I=0,R=0,j=D?[0,0]:[c,u];return C.map(function(B,L){var z=B.horizontal,W=B.vertical,Q=B.direction||"",G=Re([],le(B.pos),!1);R+=Math.abs(z),I+=Math.abs(W),z&&Q.indexOf("n")>-1&&(G[1]-=T),W&&Q.indexOf("w")>-1&&(G[0]-=T),z&&Q.indexOf("s")>-1&&(G[1]+=T),W&&Q.indexOf("e")>-1&&(G[0]+=T);var Y=tt(Pn(s,G,N),j),J=P&&P!=="horizontal",ie=B.vertical?I<=x[1]&&(J||!B.virtual):R<=x[0]&&(P||!B.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(L),className:Ze("control","border-radius",B.vertical?"vertical":"",B.virtual?"virtual":""),"data-radius-index":L,style:{display:ie?"block":"none",transform:"translate(".concat(Y[0],"px, ").concat(Y[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=ht(t,e,{}),g=Be(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,ff(t,e);var v=t.props,b=v.roundRelative,x=v.minRoundControls,w=x===void 0?[0,0]:x,S=t.state,T=S.width,P=S.height;r.isRound=!0,r.prevDist=[0,0];var D=OB(t),O=NB(D||"",T,P,w,!0)||[];return r.controlPoses=O,S.borderRadiusState=E2(O,b,T,P).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=le(Ro(e),2),s=a[0],o=a[1],c=[s,o],u=tt(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,v=g.width,b=g.height,x=r[i],w=x.vertical,S=x.horizontal,T=r.map(function(D){var O=D.horizontal,N=D.vertical,C=[O*S*c[0],N*w*c[1]];if(O){if(h[0]===1)return C;if(h[0]<4&&O!==S)return C}else{if(h[1]===0)return C[1]=N*S*c[0]/v*b,C;if(w){if(h[1]===1)return C;if(h[1]<4&&N!==w)return C}}return[0,0]});T[i]=c;var P=r.map(function(D,O){return ae(ae({},D),{pos:Nt(D.pos,T[O])})});return i<4?P.slice(0,i+1).forEach(function(D){D.virtual=!1}):P.slice(4,i+1).forEach(function(D){D.virtual=!1}),n.prevDist=[s,o],DB(t,e,c,u,P)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(S){var T=S.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))U1e(u,s);else if(o&&(g===!0||g==="line")){var v=le(RW(t,e),2),b=v[0],x=v[1];B1e(u,c,b,x)}f!==u.filter(function(S){var T=S.virtual;return T}).length&&DB(t,e,[0,0],[0,0],u)}var w=ba(t,e,{});return Be(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=As(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Be(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=As(t,"roundable",e),s=ae({targets:t.props.targets,events:a.map(function(o,c){return ae(ae(ae({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),Ti({borderRadius:n.borderRadius},o))})},n);return Be(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=As(t,"roundable",e);u_(t,"onRound",function(o){var c=ae({targets:t.props.targets,events:i.map(function(u,f){return ae(ae(ae({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),Ti({borderRadius:o.borderRadius},u))})},o);Be(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=ae({targets:t.props.targets,events:i.map(function(o,c){var u;return ae(ae({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Be(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function q1e(t,e){var n=e?4:3,r=yn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var NY={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(wW(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=q1e(o,r)?[]:su(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ht(t,e,{setTransform:function(n){e.datas.startTransforms=hr(n)?n:su(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ht(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Be(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Be(t,"onBeforeRender",ht(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Be(t,"onBeforeRenderEnd",ht(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=As(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Be(t,"onBeforeRenderGroupStart",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=As(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Be(t,"onBeforeRenderGroup",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Be(t,"onBeforeRenderGroupEnd",ht(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},DY={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Be(t,"onRenderStart",ht(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Be(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Be(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Be(t,"onRenderGroupStart",ht(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=As(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Be(t,"onRenderGroup",ht(t,e,ae(ae({isPinch:!!e.isPinch,targets:t.props.targets,transform:lx(e),transformObject:{}},Ti(cx(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=As(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Be(t,"onRenderGroupEnd",ht(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:lx(e)},Ti(cx(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return Sp(o1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ht(t,e,ae({isPinch:!!e.isPinch,transformObject:n,transform:lx(e)},Ti(cx(e))))},fillDragEndParams:function(t,e){var n={};return Sp(o1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ht(t,e,ae({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:lx(e)},Ti(cx(e))))}};function vv(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var v=Re([],le(e),!1);if(h){var b=a.requestAble;v.some(function(L){return L.name===b})||v.push.apply(v,Re([],le(t.props.ables.filter(function(L){return L.name===b})),!1))}if(!v.length||v.every(function(L){return L.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var S=!1,T=function(){var L;S=!0,(L=a.stop)===null||L===void 0||L.call(a)},P=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());P&&t.updateRect(i,!0,!1);var D=a.datas,O=g?"controlGesto":"targetGesto",N=t[O],C=function(L,z,W){if(!(z in L)||N!==t[O])return!1;var Q=L.name,G=D[Q]||(D[Q]={});if(o&&(G.isEventStart=!W||!L[W]||L[W](t,a)),!G.isEventStart)return!1;var Y=L[z](t,ae(ae({},a),{stop:T,datas:G,originalDatas:D,inputTarget:w}));return t._emitter.off(),o&&Y===!1&&(G.isEventStart=!1),Y};P&&v.forEach(function(L){L.unset&&L.unset(t)}),C(NY,"drag".concat(r).concat(i));var I=0,R=0;n.forEach(function(L){if(S)return!1;var z="".concat(L).concat(r).concat(i),W="".concat(L).concat(r,"Condition");i===""&&!h&&h1e(t.state,a);var Q=v.filter(function(J){return J[z]});Q=Q.filter(function(J,ie){return J.name&&Q.indexOf(J)===ie});var G=Q.filter(function(J){return C(J,z,W)}),Y=G.length;S&&++I,Y&&++R,!S&&o&&Q.length&&!Y&&(I+=Q.filter(function(J){var ie=J.name,X=D[ie];return X.isEventStart?J.dragRelation!=="strong":!1}).length?1:0)}),(!u||R)&&C(DY,"drag".concat(r).concat(i));var j=N!==t[O]||I===n.length;if((c||S||j)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(L){L.state.gestos={}}),v.forEach(function(L){L.unset&&L.unset(t)})),o&&!j&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||j)return!1;if(!o&&R&&!s||c){var B=t.props.flushSync||cY;B(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&R&&!s&&vv(t,e,n,r,i+"After",a),!0}function A2(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||xr(a,"moveable-area")||xr(a,"moveable-padding")||xr(a,"moveable-edgeDraggable")}}function OY(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=A2(t);return MY(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function RY(t,e){var n=t.controlBox,r=[];r.push(n);var i=A2(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return MY(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function MY(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,v=s.preventDefault,b=v===void 0?!0:v,x=s.preventRightClick,w=x===void 0?!0:x,S=s.preventWheelClick,T=S===void 0?!0:S,P=s.dragContainer,D=So(P,!0),O={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:D||Yc(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(I){return t.controlBox.contains(I.target)},checkInput:a?h:!1,dragFocusedInput:g},N=new vxe(e,O),C=r==="Control";return["drag","pinch"].forEach(function(I){["Start","","End"].forEach(function(R){N.on("".concat(I).concat(R),function(j){var B,L=j.eventType,z=I==="drag"&&j.isPinch;if(i[L]&&!i[L](j)){j.stop();return}if(!z){var W=I==="drag"?[I]:["drag",I],Q=Re([],le(t[n]),!1),G=vv(t,Q,W,r,R,j);G?(t.props.stopPropagation||R==="Start"&&C)&&((B=j?.inputEvent)===null||B===void 0||B.stopPropagation()):j.stop()}})})}),N}var G1e=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function H1e(t,e,n,r){var i;n===void 0&&(n=e);var a=BW(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,v=a.zoom,b=swe(h,n),x=b.matrixes,w=b.is3d,S=b.offsetContainer,T=b.zoom,P=r,D=4,O=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,N=c,C=yn(D),I=yn(D),R=yn(D),j=yn(D),B=s.length,L=x.map(function(ie){return ae(ae({},ie),{matrix:ie.matrix?Re([],le(ie.matrix),!1):void 0})}).reverse();s.reverse(),!o&&P&&(N=Ps(N,3,4),DP(s)),!w&&P&&DP(L),L.forEach(function(ie){I=nn(I,ie.matrix,D)});var z=n||yu(t),W=((i=L[0])===null||i===void 0?void 0:i.target)||Yv(z,z,!0).offsetParent,Q=L.slice(1).reduce(function(ie,X){return nn(ie,X.matrix,D)},yn(D));s.forEach(function(ie,X){if(B-2===X&&(R=C.slice()),B-1===X&&(j=C.slice()),!ie.matrix){var U=s[X+1],Z=c1e(ie,U,W,D,nn(Q,C,D));ie.matrix=Wd(Z,D)}C=nn(C,ie.matrix,D)});var G=!O&&o;N||(N=yn(G?4:3));var Y=c_(O&&N.length===16?Ps(N,4,3):N,G),J=I;return I=bW(I,D,D),{hasZoom:v!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:I,originalRootMatrix:J,beforeMatrix:R,offsetMatrix:j,allMatrix:C,targetMatrix:N,targetTransform:Y,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:P,offsetContainer:h,offsetRootContainer:S}}function K1e(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=hY(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=H1e(t,e,n,r),f=Wh(u.allMatrix,u.transformOrigin,i,a);o=ae(ae({},u),f);var h=Wh(u.allMatrix,[50,50],100,100);s=pY([h.pos1,h.pos2],h.direction)}var g=4;return ae(ae(ae({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:yn(g),rootMatrix:yn(g),beforeMatrix:yn(g),offsetMatrix:yn(g),allMatrix:yn(g),targetMatrix:yn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function jP(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=dx(),u=dx(),f=dx(),h=dx(),g=[0,0],v={},b=K1e(e,n,i,!0);if(e){var x=Xi(e);a.forEach(function(L){v[L]=x(L)});var w=b.is3d?4:3,S=Wh(b.offsetMatrix,Nt(b.transformOrigin,xW(b.targetMatrix,w)),b.width,b.height);s=S.direction,o=Nt(S.origin,[S.left-b.left,S.top-b.top]),h=mv(b.offsetRootContainer);var T=Yv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var P=Wh(nn(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),D=Wh(b.originalRootMatrix,d1(Xi(T)("transformOrigin")).map(function(L){return parseFloat(L)}),T.offsetWidth,T.offsetHeight);if(c=uk(P,h),f=uk(D,h,T,!0),t){var O=P.left,N=P.top;u=uk({left:O,top:N,bottom:N,right:N},h)}}else{c=mv(e),f=awe(T),t&&(u=mv(t));var C=f.left,I=f.top,R=f.clientLeft,j=f.clientTop,B=[c.left-C,c.top-I];g=tt(Ap(b.rootMatrix,B,4),[R+b.left,j+b.top])}}return ae({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:g},b)}function RB(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Yd([e,n,r,i]),s=[a.minX,a.minY],o=tt(t.origin,s);return e=tt(e,s),n=tt(n,s),r=tt(r,s),i=tt(i,s),ae(ae({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var kp=(function(t){H0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=ae({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},jP(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new t_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}lbe(n._observerId),n._observerId=KK(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,v=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=le(i||[0,0],2),x=b[0],w=b[1],S=r.left,T=r.top,P=r.target,D=r.direction,O=r.hasFixed,N=r.offsetDelta,C=n.targets,I=this.isDragging(),R={};this.getEnabledAbles().forEach(function(Q){R["data-able-".concat(Q.name.toLowerCase())]=!0});var j=this._getAbleClassName(),B=C&&C.length&&(P||h)||s||!this._hasFirstTarget&&this.state.isPersisted,L=this.controlBox||this.props.firstRenderState||this.props.persistData,z=[S-x,T-w];!h&&n.useAccuratePosition&&(z[0]+=N[0],z[1]+=N[1]);var W={position:O?"fixed":"absolute",display:B?"block":"none",visibility:L?"visible":"hidden",transform:"translate3d(".concat(z[0],"px, ").concat(z[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(W["--moveable-line-padding"]=g),v&&(W["--moveable-control-padding"]=v),Ts(f,ae({cspNonce:c,ref:pl(this,"controlBox"),className:"".concat(Ze("control-box",D===-1?"reverse":"",I?"dragging":"")," ").concat(j," ").concat(a)},R,{onClick:this._onPreventClick,style:W}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),zh(this,!1),zh(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Yi(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(o2)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&A2(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if(Jp(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=ae({width:0,height:0},n);var g=f.left,v=f.top,b=f.width,x=f.height,w=rB([a,s,c,o],u),S=dxe(w,[[g,v],[g+b,v],[g+b,v+x],[g,v+x]]),T=EW(w);return!S||!T?0:Math.min(100,S/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?bP([n,r],rB([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&Ep(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=jP(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var v=RB(a.persistData);for(var b in v)g[b]=v[b]}s&&Ep(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Ga(this.state),i=le(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=Ua(r),f=n.width,h=n.height,g=u.width,v=u.height,b=u.left,x=u.top,w=[n.left,n.top],S=Nt(w,n.origin),T=Nt(w,n.beforeOrigin),P=n.transformOrigin;return{width:g,height:v,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:S,transformOrigin:P,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&OP(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&OP(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return m1e(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=Yi(c,function(S){return S.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,v=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=Re([],le(o[v]),!1),w={request:function(S){return vv(a,x,["drag"],b,"",ae(ae({},h.request(S)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return vv(a,x,["drag"],b,"End",ae(ae({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return vv(a,x,["drag"],b,"Start",ae(ae({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,v=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var S=EY(i||{}),T=S.left,P=S.top,D=S.bottom,O=S.right,N=c?4:3,C=[];x?C=s:this.controlBox&&r.groupable?C=a:C=Nt(a,[v,b]);var I=a1(N,Wd(C.map(function(W){return-W}),N),o,Wd(s,N)),R=Ra(I,u,[-T,-P],N),j=Ra(I,f,[O,-P],N),B=Ra(I,h,[-T,D],N),L=Ra(I,g,[O,D],N);n.renderPoses=[R,j,B,L],n.renderLines=[[R,j],[j,L],[L,B],[B,R]];{var z=w/2;n.renderLines=[[Ra(I,u,[-T-z,-P],N),Ra(I,f,[O+z,-P],N)],[Ra(I,f,[O,-P-z],N),Ra(I,g,[O,D+z],N)],[Ra(I,g,[O+z,D],N),Ra(I,h,[-T-z,D],N)],[Ra(I,h,[-T,D+z],N),Ra(I,u,[-T,-P-z],N)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!RP(o,r),f=u||!RP(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=kW(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=RB(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=fx(s,[o,c],a),h=fx(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Ts};return this.renderState={},f1e(xY(fx(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},Re([],le(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(zh(this,!1),this.updateState({gestos:{}})),r||zh(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=OY(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=RY(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=So(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:Ts};return c.renderLines.map(function(f,h){return Wv(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=Cl(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=fx(u,[f]),g=h.length>0,v=a[f];if(!g){v&&(v.destroy(),a[f]=null);return}v||(v=new G1e(i,n,f),a[f]=v),v.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=So(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=So(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Re(Re([],le(this._getAbleViewClassNames()),!1),[this.isDragging()?_1e:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=bY(n.filter(Boolean),function(u){return u}).map(function(u){var f=le(u,1),h=f[0];return h}),a=this._viewClassNames,s=F0(a,i),o=s.removed,c=s.added;o.forEach(function(u){ZK(r,a[u])}),c.forEach(function(u){QK(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,v=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[v])===null||h===void 0)&&h.isEventStart||!((g=c[v])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Ze("".concat(v).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=Yc(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=Yc(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=Cxe(u),v=g.next();!v.done;v=g.next()){var b=v.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:cY,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(aW),k2={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=Lh(t,"parentPosition",[s,o],function(b){return b.join(",")}),v=Lh(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),Re(Re([],le(i.map(function(b,x){return e.createElement(kp,{key:"moveable"+x,ref:$K(t,"moveables",x),target:b,origin:!1,requestStyles:v,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),le(xY(f.map(function(b,x){var w=b.pos1,S=b.pos2,T=b.pos3,P=b.pos4,D=[w,S,T,P];return[[0,1],[1,3],[3,2],[2,0]].map(function(O,N){var C=le(O,2),I=C[0],R=C[1];return Wv(e,"",tt(D[I],g),tt(D[R],g),u,"group-rect-".concat(x,"-").concat(N))})}))),!1)}},W1e=K0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Be(t,"onClick",ht(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=kl(i,function(c){return c.contains(r)}),o=a>-1),Be(t,"onClickGroup",ht(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function uh(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ae(ae({},t),{datas:e})}var Y1e=K0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?$W(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&xr(i,Ze("direction"))&&xr(i,Ze("edge"))&&xr(i,Ze("edgeDraggable"))},dragStart:function(t,e){return xi.dragStart(t,uh(e))},drag:function(t,e){return xi.drag(t,uh(e))},dragEnd:function(t,e){return xi.dragEnd(t,uh(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&xr(i,Ze("direction"))&&xr(i,Ze("line"))},dragGroupStart:function(t,e){return xi.dragGroupStart(t,uh(e))},dragGroup:function(t,e){return xi.dragGroup(t,uh(e))},dragGroupEnd:function(t,e){return xi.dragGroupEnd(t,uh(e))},unset:function(t){return xi.unset(t)}}),jY={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},C2=[NY,kY,Jwe,y1e,xi,Y1e,IP,b1e,w1e,Mwe,A1e,k1e,E1e,V1e,L1e,$1e,k2,jY,W1e,AY,DY],X1e=C2.reduce(function(t,e){return(e.events||[]).forEach(function(n){XK(t,n)}),t},[]),Q1e=C2.reduce(function(t,e){return(e.props||[]).forEach(function(n){XK(t,n)}),t},[]);function MB(t,e){var n=le(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function gx(t,e){var n=le(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function jB(t,e){return Math.max.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function zB(t,e){return Math.min.apply(Math,Re([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function Z1e(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=lt(e,Ci);if(h%90){var g=h/180*Math.PI,v=Math.tan(g),b=-1/v,x=[TP,sB],w=[[0,0],[0,0]],S=[TP,sB],T=[[0,0],[0,0]];t.forEach(function(ee){ee.forEach(function(K){var ue=MB([-v,1,0],K),ne=MB([-b,1,0],K);x[0]>ue&&(w[0]=K,x[0]=ue),x[1]<ue&&(w[1]=K,x[1]=ue),S[0]>ne&&(T[0]=K,S[0]=ne),S[1]<ne&&(T[1]=K,S[1]=ne)})});var P=le(w,2),D=P[0],O=P[1],N=le(T,2),C=N[0],I=N[1],R=[-v,1,gx([-v,1],D)],j=[-v,1,gx([-v,1],O)],B=[-b,1,gx([-b,1],C)],L=[-b,1,gx([-b,1],I)];n=le([[R,B],[R,L],[j,B],[j,L]].map(function(ee){var K=le(ee,2),ue=K[0],ne=K[1];return a2(ue,ne)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=S[1]-S[0],f=x[1]-x[0]}else{var z=zB(t,0),W=zB(t,1),Q=jB(t,0),G=jB(t,1);if(a=[z,W],s=[Q,W],o=[z,G],c=[Q,G],u=Q-z,f=G-W,h%180){var Y=[o,a,c,s];r=le(Y,4),a=r[0],s=r[1],o=r[2],c=r[3],u=G-W,f=Q-z}}if(h%360>180){var Y=[c,o,s,a];i=le(Y,4),a=i[0],s=i[1],o=i[2],c=i[3]}var J=Yd([a,s,o,c]),ie=J.minX,X=J.minY,U=J.maxX,Z=J.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:ie,minY:X,maxX:U,maxY:Z,rotation:e}}function zY(t,e){var n=e.map(function(r){if(hr(r)){var i=zY(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Yi(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&hr(n[0])?n[0]:n}var J1e=(function(t){H0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new _W,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;Ep(!0),this.moveables.forEach(function(Se){Se.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(Se){return{finded:!1,manager:Se}}),h=this.props.targetGroups||[],g=zY(f,h),v=o.useDefaultGroupRotate;g.push.apply(g,Re([],le(f.filter(function(Se){var se=Se.finded;return!se}).map(function(Se){var se=Se.manager;return se})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=(a=o.persistData)===null||a===void 0?void 0:a.rotation;S!=null&&(w=S)}function T(Se,se,Ae){var ve=Se.map(function(Ye){if(hr(Ye)){var Ve=T(Ye,se),it=[Ve.pos1,Ve.pos2,Ve.pos3,Ve.pos4];return b.push(Ve),{poses:it,rotation:Ve.rotation}}else return{poses:Ga(Ye.state),rotation:Ye.getRotation()}}),te=ve.map(function(Ye){var Ve=Ye.rotation;return Ve}),Pe=0,be=te[0],_e=te.every(function(Ye){return Math.abs(be-Ye)<.1});x?Pe=!v&&_e?be:w:Pe=!v&&!Ae&&_e?be:se;var De=ve.map(function(Ye){var Ve=Ye.poses;return Ve}),Oe=Z1e(De,Pe);return Oe}var P=T(g,this.rotation,!0);x&&(this.rotation=P.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var D=this.transformOrigin,O=this.rotation,N=this.scale,C=P.width,I=P.height,R=P.minX,j=P.minY,B=v1e([[0,0],[C,0],[0,I],[C,I]],_2(D,C,I),this.rotation/180*Math.PI),L=Yd(B.result),z=L.minX,W=L.minY,Q=" rotate(".concat(O,"deg)")+" scale(".concat(wi(N[0]),", ").concat(wi(N[1]),")"),G="translate(".concat(-z,"px, ").concat(-W,"px)").concat(Q);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(D,";")+"width:".concat(C,"px;height:").concat(I,"px;")+"transform: ".concat(G),s.width=C,s.height=I;var Y=this.getContainer(),J=jP(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),ie=[J.left,J.top],X=le(Ga(J),4),U=X[0],Z=X[1],ee=X[2],K=X[3],ue=Yd([U,Z,ee,K]),ne=[ue.minX,ue.minY],oe=wi(N[0]*N[1]);J.pos1=tt(U,ne),J.pos2=tt(Z,ne),J.pos3=tt(ee,ne),J.pos4=tt(K,ne),J.left=R-J.left+ne[0],J.top=j-J.top+ne[1],J.origin=tt(Nt(ie,J.origin),ne),J.beforeOrigin=tt(Nt(ie,J.beforeOrigin),ne),J.originalBeforeOrigin=Nt(ie,J.originalBeforeOrigin),J.transformOrigin=tt(Nt(ie,J.transformOrigin),ne),u.style.transform="translate(".concat(-z-ne[0],"px, ").concat(-W-ne[1],"px)")+Q,Ep(),this.updateState(ae(ae({},J),{posDelta:ne,direction:oe,beforeDirection:oe}),i)},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Re(Re([],le(r),!1),le(o),!1)},[]);return n},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Re(Re([],le(this.props.ables),!1),[k2],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=So(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(zh(this,!1),zh(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=OY(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=RY(this,"GroupControl")));var g=!RP(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!_Y(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=ae(ae({},kp.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(kp),eSe=(function(t){H0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),Ts(s,{cspNonce:a,ref:pl(this,"controlBox"),className:Ze("control-box")},c.map(function(g,v){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,v))!==null&&x!==void 0?x:{};return Ts(kp,ae({key:"moveable"+v,ref:$K(n,"moveables",v)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[v]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Ep(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Ep()},e.prototype.getRect=function(){return ae(ae({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,ae(ae({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Yi(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Re([],le(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(kp);function LY(t,e){var n=[];return t.forEach(function(r){if(r){if(Wi(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}hr(r)?n.push.apply(n,Re([],le(LY(r,e)),!1)):n.push(r)}}),n}function VY(t,e){var n=[];return t.forEach(function(r){if(r){if(Wi(r)){e[r]&&n.push.apply(n,Re([],le(e[r]),!1));return}hr(r)?n.push(VY(r,e)):n.push(r)}}),n}function BY(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?hr(n)&&hr(i)?BY(n,i):!0:!1})}var tSe=(function(t){H0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new _W,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=Cl(n).join(`
`);this.defaultStyled=kW("div",Xye(o2,Vxe+i))},e.getTotalAbles=function(){return Re([kY,k2,jY,AY],le(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=Axe(i,["ables","props"]),c=le(this._updateRefs(!0),2),u=c[0],f=c[1],h=LY(u,f),g=h.length>1,v=r.getTotalAbles(),b=Re(Re([],le(v),!1),le(a||[]),!1),x=ae(ae(ae({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,S=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return Ts(eSe,ae({key:"individual-group",ref:pl(this,"moveable")},x,{target:null,targets:h}));if(g){var P=VY(u,f);if(S&&!S.props.groupable&&!S.props.individualGroupable){var D=S.props.target;D&&h.indexOf(D)>-1&&(w=ae({},S.state))}return Ts(J1e,ae({key:"group",ref:pl(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:P,firstRenderState:w}))}else{var O=h[0];if(S&&(S.props.groupable||S.props.individualGroupable)){var N=S.moveables||[],C=Yi(N,function(I){return I.props.target===O});C&&(w=ae({},C.state))}return Ts(kp,ae({key:"single",ref:pl(this,"moveable")},x,{target:O,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=S2(this.props.target||this.props.targets),a=typeof document<"u",s=BY(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(Wi(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else hr(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=le(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,kxe([Qye(OW)],e.prototype,"moveable",void 0),e})(aW),nSe=(function(t){H0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=C2,e})(tSe),zP=function(t,e){return zP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},zP(t,e)};function I2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Xv=function(){return Xv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xv.apply(this,arguments)};function rSe(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var iSe=(function(t){I2(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Ts(nSe,Xv({ref:pl(this,"moveable")},this.state))},e})(JO),aSe=Q1e,sSe=OW,oSe=X1e,lSe=(function(t){I2(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=Xv({},i),o={};oSe.forEach(function(f){o[obe("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=Zp(r).createElement("div"),r.appendChild(c)),a.containerProvider=eB(Ts(iSe,Xv({ref:pl(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return hr(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;eB(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=rSe([GV(sSe,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),GV(aSe,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(t_),FY=(function(t){I2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(lSe),Uc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Uc||{}),Km=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(Km||{});const cSe=["mousedown","mousemove","mouseup","mouseleave","mouseout"],uSe=["touchstart","touchmove","touchend","touchcancel"],dSe=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function fSe(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function hSe(t){var e;return cSe.includes((e=t?.nativeEvent)==null?void 0:e.type)}function UY(t){var e;return uSe.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function pSe(t){const{nativeEvent:e}=t;return e?dSe.includes(e?.type)||"pointerId"in e:!1}function hk(t){return hSe(t)||UY(t)||pSe(t)}function LB(t){var e;const n=UY(t)?(e=t?.touches)==null?void 0:e[0]:t;return fSe(n)?{x:n.pageX,y:n.pageY}:null}function gSe(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function P2(t,{threshold:e=400,captureEvent:n=!1,detect:r=Uc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),v=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),S=A.useCallback(O=>N=>{g.current||hk(N)&&(s!==void 0&&!s(N)||(n&&N.persist(),o?.(N,{context:O}),w.current=LB(N),g.current=!0,v.current=N.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(N,{context:O}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(O=>(N,C)=>{hk(N)&&g.current&&(w.current=null,n&&N.persist(),h.current?u?.(N,{context:O}):g.current&&f?.(N,{context:O,reason:C??Km.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),P=A.useCallback(O=>N=>{if(hk(N)&&(c?.(N,{context:O}),i!==!1&&w.current)){const C=LB(N);if(C){const I=i===!0?25:i,R={x:Math.abs(C.x-w.current.x),y:Math.abs(C.y-w.current.y)};(R.x>I||R.y>I)&&T(O)(N,Km.CancelledByMovement)}}},[T,i,c]),D=A.useCallback(O=>{if(t===null)return{};switch(r){case Uc.Mouse:{const N={onMouseDown:S(O),onMouseMove:P(O),onMouseUp:T(O)};return a&&(N.onMouseLeave=C=>{T(O)(C,Km.CancelledOutsideElement)}),N}case Uc.Touch:return{onTouchStart:S(O),onTouchMove:P(O),onTouchEnd:T(O)};case Uc.Pointer:{const N={onPointerDown:S(O),onPointerMove:P(O),onPointerUp:T(O)};return a&&(N.onPointerLeave=C=>T(O)(C,Km.CancelledOutsideElement)),N}}},[t,T,a,r,P,S]);return A.useEffect(()=>{function O(N){const C=gSe(N);T()(C)}return window.addEventListener("mouseup",O),window.addEventListener("touchend",O),window.addEventListener("pointerup",O),()=>{window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O),window.removeEventListener("pointerup",O)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),D}const $Y=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},g1=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,ad=t=>g1(t).toISOString(),mSe=t=>{const e=g1(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},vSe=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Yh=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=ad(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||mSe(r),description:e.description||"",merchant:e.merchant||void 0,type:vSe(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}},mx=t=>Xr(rt,"users",t,"transactions"),ySe={subscribeToTransactions:(t,e)=>{const n=Ui(mx(t),_s("date","desc"));return ru(n,i=>{const a=i.docs.map(s=>Yh({id:s.id,...s.data()}));e(a)})},subscribeToTransactionsByMonth:(t,e,n)=>{$.log(` TransactionService: Subscribing to transactions for ${e}`);const r=Ui(mx(t),tw("month","==",e),_s("date","desc"));return ru(r,i=>{const a=i.docs.map(s=>Yh({id:s.id,...s.data()}));n(a)},i=>{$.error(` TransactionService: Subscription failed for ${e}:`,i)})},getAllTransactions:async t=>{$.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Ui(mx(t),_s("date","desc")),r=(await la(e)).docs.map(i=>Yh({id:i.id,...i.data()}));return $.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");$.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),$.log(` Original transaction had temp ID: ${n}`);try{$.log(" About to call addDoc with:",r);const i=await qS(mx(e),r);$.log(" addDoc succeeded, docRef:",i),$.log(` Document ID: ${i.id}`),$.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return $.log(" Final result object:",a),a}catch(i){$.error(" addDoc failed:",i);const a=i;throw $.error("Error message:",a.message),i}},updateTransaction:async(t,e,n)=>{const r=Et(rt,"users",t,"transactions",e);return await co(r,n)},deleteTransaction:async(t,e)=>{$.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=Et(rt,"users",t,"transactions",e);$.log(` Deleting document at path: ${n.path}`),await da(n),$.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){$.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n);const r=n;throw $.error("Error message:",r.message),n}}},pk=t=>Xr(rt,"users",t,"envelopes"),bSe={subscribeToEnvelopes:(t,e)=>{const n=Ui(pk(t),_s("orderIndex","asc"));return ru(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{$.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=pk(t),i=(await la(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return $.log(" Fetched envelopes:",i.length),i}catch(e){return $.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await qS(pk(e),r)).id,...r,userId:e}}catch(i){throw $.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=Et(rt,"users",t,"envelopes",e.id);return await ua(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=Et(rt,"users",t,"envelopes",e);return await co(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{$.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=Et(rt,"users",t,"envelopes",e);await da(n),$.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},gk=t=>Xr(rt,"users",t,"distributionTemplates"),xSe={subscribeToDistributionTemplates:(t,e)=>{const n=Ui(gk(t),_s("lastUsed","desc"));return ru(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Ui(gk(t),_s("lastUsed","desc"));return(await la(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");$.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await qS(gk(e),r);$.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return $.log(" Final template result object:",a),a}catch(i){throw $.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=Et(rt,"users",t,"distributionTemplates",e.id);return await ua(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=Et(rt,"users",t,"distributionTemplates",e);return await co(r,n)},deleteDistributionTemplate:async(t,e)=>{$.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=Et(rt,"users",t,"distributionTemplates",e);await da(n),$.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},mk=t=>Xr(rt,"users",t,"appSettings"),qY={subscribeToAppSettings:(t,e)=>{const n=Ui(mk(t),x5(1));return ru(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Ui(mk(t),x5(1)),n=await la(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");$.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await qS(mk(e),n);$.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return $.log(" Final settings result object:",i),i}catch(r){throw $.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=Et(rt,"users",t,"appSettings",e.id);return await ua(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=Et(rt,"users",t,"appSettings",e);return await ua(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{$.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=Et(rt,"users",t,"appSettings",e);await da(n),$.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},VB=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:qY},Symbol.toStringTag,{value:"Module"}));class cl{static instance;constructor(){}static getInstance(){return cl.instance||(cl.instance=new cl),cl.instance}createId(){return Et(Xr(rt,"temp")).id}async createCategory(e){const n=Et(rt,`users/${e.userId}/categories`,e.id);return await ua(n,e),e}async getCategories(e){const n=Ui(Xr(rt,`users/${e}/categories`),_s("orderIndex","asc"));return(await la(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=Et(rt,`users/${e}/categories`,n.id);await ua(r,n,{merge:!0})}async deleteCategory(e,n){const r=Et(rt,`users/${e}/categories`,n);await da(r)}async reorderCategories(e,n){const r=LI(rt);n.forEach((i,a)=>{const s=Et(rt,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return $.log(" No duplicate categories found"),0;$.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=LI(rt);i.slice(s,s+a).forEach(u=>{const f=Et(rt,`users/${e}/categories`,u);o.delete(f)}),await o.commit(),$.log(` Deleted batch ${Math.floor(s/a)+1}`)}return $.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=Ui(Xr(rt,`users/${e}/categories`),_s("orderIndex","asc"));return ru(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{$.error(" Category subscription error:",i)})}}cl.getInstance();class xs{static instance;static getInstance(){return xs.instance||(xs.instance=new xs),xs.instance}async restoreUserData(e,n){try{$.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=Et(rt,"users",e,s,f);i.push({ref:h,data:u})}$.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=LI(rt);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),$.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}$.log(" Restore completed successfully.")}catch(r){throw $.warn(` BudgetService.restoreUserData failed: ${r}`),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{$.log(" BudgetService.getEnvelopes called for user:",e);const n=Xr(rt,"users",e,"envelopes"),a=(await la(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return $.log(" Fetched envelopes:",a.length),a}catch(n){throw $.warn(` BudgetService.getEnvelopes failed: ${n}`),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{$.log(" BudgetService.getTransactions: Fetching for user",e);const n=Xr(rt,"users",e,"transactions"),r=Ui(n,_s("date","desc")),a=(await la(r)).docs.map(s=>{const o={id:s.id,...s.data()};return Yh(o)});return $.log(` Fetched ${a.length} transactions`),a}catch(n){throw $.warn(` BudgetService.getTransactions failed: ${n}`),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactionsByMonth(e,n){try{$.log(` BudgetService.getTransactionsByMonth: Fetching for user ${e}, month ${n}`);const r=Xr(rt,"users",e,"transactions"),i=Ui(r,tw("month","==",n),_s("date","desc")),s=(await la(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Yh(c)});return $.log(` Fetched ${s.length} transactions for ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByMonth failed: ${r}`),new Error(`Failed to fetch transactions for month ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionsByEnvelope(e,n){try{$.log(` BudgetService.getTransactionsByEnvelope: Fetching for user ${e}, envelope ${n}`);const r=Xr(rt,"users",e,"transactions"),i=Ui(r,tw("envelopeId","==",n),_s("date","desc")),s=(await la(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Yh(c)});return $.log(` Fetched ${s.length} transactions for envelope ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByEnvelope failed: ${r}`),new Error(`Failed to fetch transactions for envelope ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async createEnvelope(e){try{$.log(" BudgetService.createEnvelope called for user:",e.userId);const n=Xr(rt,"users",e.userId,"envelopes"),r=Et(n),i=gt.now(),a={...e,createdAt:i,lastUpdated:i};ua(r,a).catch(o=>$.warn(`Create env failed: ${o}`));const s={...e,id:r.id,createdAt:ad(i),lastUpdated:ad(i)};return $.log(" Created envelope (optimistic):",s.id),s}catch(n){throw $.warn(` BudgetService.createEnvelope failed: ${n}`),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{$.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=Et(rt,"users",e,"envelopes",n.id);ua(r,{...n,lastUpdated:gt.now()},{merge:!0}).catch(i=>$.warn(`Update env failed: ${i}`)),$.log(" Updated envelope (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateEnvelope failed: ${r}`),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=Et(rt,"users",e,"envelopes",n),i=Ui(Xr(rt,"users",e,"transactions"),tw("envelopeId","==",n)),s=(await la(i)).docs.map(o=>da(o.ref));await Promise.all([da(r),...s]),$.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw $.warn(` BudgetService.deleteEnvelope failed: ${r}`),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{$.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=Et(rt,"users",e,"envelopes",i.id);return ua(a,{orderIndex:i.orderIndex,lastUpdated:gt.now()},{merge:!0})});Promise.all(r).catch(i=>$.warn(`Reorder env failed: ${i}`)),$.log(" Reordered envelopes (optimistic)")}catch(r){throw $.warn(` BudgetService.reorderEnvelopes failed: ${r}`),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{$.log(" BudgetService.createTransaction called for user:",e.userId);const n=Xr(rt,"users",e.userId,"transactions"),r=Et(n),i=gt.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};ua(r,s).catch(c=>$.warn(`Create tx failed: ${c}`));const o={...e,id:r.id};return $.log(" Created transaction (optimistic):",o.id),o}catch(n){throw $.warn(` BudgetService.createTransaction failed: ${n}`),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if($.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=Et(rt,"users",e,"transactions",n.id);ua(i,r,{merge:!0}).catch(a=>$.warn(`Update tx failed: ${a}`)),$.log(" Updated transaction (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateTransaction failed: ${r}`),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{$.log(" BudgetService.deleteTransaction called for transaction:",n);const r=Et(rt,"users",e,"transactions",n);da(r).catch(i=>$.warn(`Delete tx failed: ${i}`)),$.log(" Deleted transaction (optimistic):",n)}catch(r){throw $.warn(` BudgetService.deleteTransaction failed: ${r}`),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{$.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=Et(rt,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};co(n,{incomeSources:Zhe(a),updatedAt:r}).catch(o=>{o.code==="not-found"?ua(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>$.warn(`Failed to create monthly budget doc: ${c}`)):$.warn(`Create income failed: ${o}`)});const s={...e,id:i,amount:Number(e.amount),createdAt:ad(r),updatedAt:ad(r)};return $.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw $.warn(` BudgetService.createIncomeSource failed: ${n}`),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{$.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=Et(rt,"users",e,"monthlyBudgets",r);DA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:gt.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});co(a,{incomeSources:u,updatedAt:gt.now()})}).catch(s=>$.warn(`Update income failed: ${s}`)),$.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateIncomeSource failed: ${a}`),a}}async deleteIncomeSource(e,n,r){try{$.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=Et(rt,"users",e,"monthlyBudgets",r);DA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);co(i,{incomeSources:c,updatedAt:gt.now()})}).catch(a=>$.warn(`Delete income failed: ${a}`)),$.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteIncomeSource failed: ${i}`),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{$.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=Et(rt,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};co(n,i).catch(s=>{s.code==="not-found"?ua(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>$.warn(`Failed to create monthly budget doc: ${o}`)):$.warn(`Create allocation failed: ${s}`)});const a={...e,id:e.envelopeId,createdAt:ad(r),updatedAt:ad(r)};return $.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw $.warn(` BudgetService.createEnvelopeAllocation failed: ${n}`),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{$.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=Et(rt,"users",e,"monthlyBudgets",r),s={updatedAt:gt.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),co(a,s).catch(o=>$.warn(`Update allocation failed: ${o}`)),$.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateEnvelopeAllocation failed: ${a}`),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{$.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=Et(rt,"users",e,"monthlyBudgets",r);co(i,{[`allocations.${n}`]:m5(),updatedAt:gt.now()}).catch(a=>$.warn(`Delete allocation failed: ${a}`)),$.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteEnvelopeAllocation failed: ${i}`),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{$.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=Et(rt,"users",e,"monthlyBudgets",n),i=await DA(r);if(!i.exists())return $.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return $.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw $.warn(` BudgetService.getMonthData failed: ${r}`),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{$.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(v=>v.id));$.log(` Found ${r.length} existing envelopes`);const a=Xr(rt,"users",e,"envelopeAllocations"),s=await la(a),o=[],c=new Set;for(const v of s.docs){const b=v.data();c.add(b.month),i.has(b.envelopeId)||(o.push(v.id),$.log(` Found orphaned allocation: ${v.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const v=o.map(b=>da(Et(rt,"users",e,"envelopeAllocations",b)));await Promise.all(v),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),$.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=Xr(rt,"users",e,"monthlyBudgets"),f=await la(u);for(const v of f.docs){const x=v.data().allocations||{},w={};let S=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=m5(),S=!0,$.log(` Found orphaned embedded allocation in ${v.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${v.id}_${T}`))}),S&&(w.updatedAt=gt.now(),await co(v.ref,w),c.add(v.id))}const h=await this.getTransactions(e),g=[];for(const v of h)i.has(v.envelopeId)||(g.push(v.id),$.log(` Found orphaned transaction: ${v.id} for envelope ${v.envelopeId}`));if(g.length>0){const v=g.map(b=>da(Et(rt,"users",e,"transactions",b)));await Promise.all(v),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,$.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),$.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw $.warn(` BudgetService.cleanupOrphanedData failed: ${n}`),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=Et(rt,"users",e,"monthlyBudgets",n);return ru(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{$.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){$.log(` Deleting collection: ${r}...`);const i=Xr(rt,"users",e,r),a=await la(i);if(a.empty){$.log("   (Empty collection)");continue}const s=a.docs.map(o=>da(o.ref));await Promise.all(s),$.log(`    Deleted ${a.size} documents from ${r}`)}$.log(" All user data deleted successfully.")}catch(n){throw $.warn(` BudgetService.deleteAllUserData failed: ${n}`),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const N2=xs.getInstance(),wSe=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),SSe=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),BB=(t,e)=>{if(window.__firebaseUnsubscribers){$.log(" Real-time subscriptions already active, skipping setup");return}$.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;$.log(" Current month for subscriptions:",n);const r=bSe.subscribeToEnvelopes(e,g=>{$.log(" Real-time sync: Envelopes updated",g.length);const v=g.map(wSe),b=t.getState(),x=new Set(b.envelopes.map(T=>T.id)),w=new Set(v.map(T=>T.id)),S=[...v.filter(T=>x.has(T.id)),...b.envelopes.filter(T=>!w.has(T.id))];t.setState({envelopes:S})}),i={},a=g=>{i[g]||(i[g]=ySe.subscribeToTransactionsByMonth(e,g,v=>{$.log(` Real-time sync: Transactions updated for ${g}`,v.length);const w=[...t.getState().transactions.filter(S=>S.month!==g),...v];t.setState({transactions:w})}))},s=[t.getState().currentMonth,...t.getState().loadedTransactionMonths||[]];Array.from(new Set(s)).forEach(g=>{g&&a(g)});const c=cl.getInstance().subscribeToCategories(e,g=>{$.log(" Real-time sync: Categories updated",g.length);const v=g.map(SSe),b=Array.from(new Map(v.map(x=>[x.id,x])).values());b.length!==v.length&&$.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:b})}),u=xSe.subscribeToDistributionTemplates(e,g=>{$.log(" Real-time sync: Templates updated from Firebase",g.length)}),f=qY.subscribeToAppSettings(e,g=>{$.log(" Real-time sync: Settings updated",g?"found":"null");const v=t.getState();if(g){const b={...v.appSettings,...g,paymentSources:g.paymentSources??v.appSettings?.paymentSources??[]};t.setState({appSettings:b})}else $.log(" Firebase settings null, preserving local state")}),h=N2.subscribeToMonthlyBudget(e,n,g=>{$.log(` Real-time sync: Monthly budget updated (${g.incomeSources.length} sources, ${g.allocations.length} allocations)`);const v=t.getState();t.setState({incomeSources:{...v.incomeSources,[n]:g.incomeSources},allocations:{...v.allocations,[n]:g.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactionMonths:i,categories:c,templates:u,settings:f,monthlyBudget:h,setupTransactionSubscription:a},$.log(" Real-time subscriptions active - cross-device sync enabled")},_Se=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{$.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{$.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&($.log(" User already authenticated on app load, setting up real-time subscriptions"),BB(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)$.log(" User authenticated, setting up real-time subscriptions"),BB(e,r());else if(!s.isAuthenticated&&!s.isLoading){if($.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactionMonths&&Object.values(o.transactionMonths).forEach(c=>c()),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,$.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=[];e.subscribe(s=>{if(!n.getState().isAuthenticated)return;const c=Array.from(new Set([s.currentMonth,...s.loadedTransactionMonths||[]])).filter(Boolean).sort();if(c.some(f=>!a.includes(f))&&window.__firebaseUnsubscribers){const f=window.__firebaseUnsubscribers,h=f.setupTransactionSubscription;h&&c.forEach(v=>{a.includes(v)||h(v)});const g=a.find(v=>v===s.currentMonth)?s.currentMonth:null;if(s.currentMonth&&g!==s.currentMonth){const v=r();v&&f.monthlyBudget&&(f.monthlyBudget(),f.monthlyBudget=N2.subscribeToMonthlyBudget(v,s.currentMonth,b=>{$.log(` Real-time sync: Monthly budget updated for ${s.currentMonth}`);const x=e.getState();e.setState({incomeSources:{...x.incomeSources,[s.currentMonth]:b.incomeSources},allocations:{...x.allocations,[s.currentMonth]:b.allocations}})}))}a=c}})},Zu=xs.getInstance(),vx=()=>{const{currentUser:t}=rn.getState();if(!t)throw new Error("No authenticated user found");return t},ESe=({set:t,get:e})=>({addTransaction:async n=>{try{t({isLoading:!0,error:null});const r=vx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,userId:r.id,month:a},o=await Zu.createTransaction(s);t(c=>c.transactions.some(f=>f.id===o.id)?{isLoading:!1}:{transactions:[...c.transactions,o],isLoading:!1}),$.log(" Added transaction:",o.id)}catch(r){throw $.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const r=vx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Zu.updateTransaction(r.id,s),t(o=>({transactions:o.transactions.map(c=>c.id===n.id?s:c),isLoading:!1})),$.log(" Updated transaction:",n.id)}catch(r){throw $.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const r=vx();await Zu.deleteTransaction(r.id,n),t(i=>({transactions:i.transactions.filter(a=>a.id!==n),isLoading:!1})),$.log(" Deleted transaction:",n)}catch(r){throw $.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const r=vx(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await Zu.updateTransaction(r.id,s),t(o=>{const c=o.transactions.findIndex(f=>f.id===n.id);let u;return c>=0?u=o.transactions.map(f=>f.id===n.id?s:f):u=[...o.transactions,s],{transactions:u,isLoading:!1}}),$.log(" Restored transaction:",n.id)}catch(r){throw $.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),$.log(" Transfer completed")}catch(o){throw $.error(" transferFunds failed:",o),o}},fetchTransactionsForMonth:async n=>{const r=e();if(!(r.areAllTransactionsLoaded||r.loadedTransactionMonths.includes(n)))try{const{currentUser:i}=rn.getState();if(!i)return;t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]})),$.log(` Fetching transactions for month: ${n}`);const a=await Zu.getTransactionsByMonth(i.id,n);t(s=>({transactions:[...s.transactions.filter(o=>o.month!==n),...a]})),$.log(` Loaded ${a.length} transactions for ${n}`)}catch(i){$.error(` Failed to fetch transactions for ${n}:`,i),t(a=>({loadedTransactionMonths:a.loadedTransactionMonths.filter(s=>s!==n)}))}},fetchTransactionsForEnvelope:async n=>{if(!e().areAllTransactionsLoaded)try{const{currentUser:i}=rn.getState();if(!i)return;$.log(` Fetching transactions for envelope: ${n}`);const a=await Zu.getTransactionsByEnvelope(i.id,n);t(s=>{const o=new Map(s.transactions.map(c=>[c.id,c]));return a.forEach(c=>{o.set(c.id,c)}),{transactions:Array.from(o.values())}}),$.log(` Loaded ${a.length} transactions for envelope ${n}`)}catch(i){$.error(` Failed to fetch transactions for envelope ${n}:`,i)}},fetchAllTransactions:async()=>{if(!e().areAllTransactionsLoaded)try{t({isLoading:!0});const{currentUser:r}=rn.getState();if(!r){t({isLoading:!1});return}$.log(" Fetching ALL transactions history...");const i=await Zu.getTransactions(r.id);t({transactions:i,areAllTransactionsLoaded:!0,isLoading:!1}),$.log(` Loaded complete history: ${i.length} transactions`)}catch(r){$.error(" Failed to fetch all transactions:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to fetch transaction history"})}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return $.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return $.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0}}),dh=xs.getInstance(),fh=()=>{const{currentUser:t}=rn.getState();if(!t)throw new Error("No authenticated user found");return t},TSe=({set:t,get:e})=>({addEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=fh(),i={...n,userId:r.id},a=await dh.createEnvelope(i);return t(s=>s.envelopes.some(c=>c.id===a.id)?{isLoading:!1}:{envelopes:[...s.envelopes,a],isLoading:!1}),$.log(" Added envelope:",a.id),a.id}catch(r){throw $.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=fh();await dh.updateEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.map(a=>a.id===n.id?n:a),isLoading:!1})),$.log(" Updated envelope:",n.id)}catch(r){throw $.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=fh();await dh.deleteEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.filter(a=>a.id!==n),transactions:i.transactions.filter(a=>a.envelopeId!==n),isLoading:!1})),$.log(" Deleted envelope:",n)}catch(r){throw $.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((c,u)=>{i.set(c,u)});const a=r.envelopes.map(c=>{if(!i.has(c.id))return c;const u=i.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}}),s=a.filter((c,u)=>c!==r.envelopes[u]);if(!s.length){t({isLoading:!1});return}const o=fh();await dh.reorderEnvelopes(o.id,s),t({envelopes:a,isLoading:!1}),$.log(" Reordered envelopes")}catch(r){throw $.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(c=>c.id===n);if(!a)throw new Error("Envelope not found");t(c=>({envelopes:c.envelopes.map(u=>u.id===n?{...u,name:r}:u),isLoading:!0}));const s=fh(),o={...a,name:r};await dh.updateEnvelope(s.id,o),t({isLoading:!1}),$.log(" Renamed envelope:",n)}catch(i){throw $.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):$.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&($.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),$.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw $.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const i=fh(),a=e().envelopes.find(o=>o.id===n&&o.isPiggybank);if(!a)throw new Error("Piggybank not found");const s={...a,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:a.piggybankConfig?.targetAmount,color:a.piggybankConfig?.color,icon:a.piggybankConfig?.icon,paused:a.piggybankConfig?.paused??!1}};if($.log(" Updating envelope in Firestore:",s),await dh.updateEnvelope(i.id,s),$.log(" Envelope updated successfully"),t(o=>({envelopes:o.envelopes.map(c=>c.id===n?s:c),isLoading:!1})),!a.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(c=>c.envelopeId===n&&(c.description==="Monthly Allocation"||c.description==="Piggybank Contribution"))||$.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(o){$.error(" Failed to update piggybank contribution:",o)}$.log(" Piggybank contribution updated successfully")}catch(i){throw $.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}}}),hh=xs.getInstance(),ph=()=>{const{currentUser:t}=rn.getState();if(!t)throw new Error("No authenticated user found");return t},ASe=({set:t,get:e})=>({addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const i=ph();$.log(" Adding income source:",{month:n,source:r});const a=await hh.createIncomeSource({...r,userId:i.id,month:n});t(s=>{const o=s.incomeSources[n]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{incomeSources:{...s.incomeSources,[n]:[...o,a]},isLoading:!1}}),$.log(" Added income source:",a.id)}catch(i){throw $.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating income source:",{month:n,sourceId:r.id}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.map(s=>s.id===r.id?{...r,updatedAt:new Date().toISOString()}:s)||[]},isLoading:!1}));const{currentUser:i}=rn.getState();if(!i)return;await hh.updateIncomeSource(i.id,r.id,n,r),$.log(" Updated income source:",r.id)}catch(i){throw $.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Deleting income source:",{month:n,sourceId:r}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.filter(s=>s.id!==r)||[]},isLoading:!1}));const{currentUser:i}=rn.getState();if(!i)return;await hh.deleteIncomeSource(i.id,r,n),$.log(" Deleted income source:",r)}catch(i){throw $.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const r=ph();$.log(" Copying allocations from previous month:",n);const[i,a]=n.split("-").map(Number);let s=i,o=a-1;o<1&&(s=i-1,o=12);const c=`${s}-${String(o).padStart(2,"0")}`;(!e().incomeSources[c]||!e().allocations[c])&&($.log(` Previous month ${c} data missing, fetching...`),await e().fetchMonthData(c));const u=e().incomeSources[c]||[];if($.log(` Found ${u.length} income sources from ${c}`),u.length>0){for(const v of u){const{id:b,...x}=v;await e().addIncomeSource(n,x)}$.log(` Copied ${u.length} income sources to ${n}`)}const f=e().allocations[c]||[];$.log(` Found ${f.length} allocations from ${c}`);const h=f.filter(v=>{const b=e().envelopes.find(x=>x.id===v.envelopeId);return!!b&&!b.isPiggybank});if(h.length>0){for(const v of h)await e().createEnvelopeAllocation({envelopeId:v.envelopeId,budgetedAmount:v.budgetedAmount,userId:r.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:v.budgetedAmount,envelopeId:v.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});$.log(` Copied ${h.length} regular allocations to ${n}`)}const g=e().envelopes.filter(v=>v.isPiggybank);$.log(` Processing ${g.length} piggybanks for ${n}`);for(const v of g){const b=v.piggybankConfig?.monthlyContribution,x=v.piggybankConfig?.paused??!1;if(!x&&b&&b>0)try{$.log(` Setting piggybank allocation for ${v.name}: ${b}`),await e().setEnvelopeAllocation(v.id,b)}catch(w){$.error(` Failed to set allocation for piggybank ${v.name}:`,w)}else $.log(` Skipping piggybank ${v.name} (paused=${x}, contribution=${b})`)}t({isLoading:!1}),$.log(` Complete monthly setup copied to ${n}`)}catch(r){throw $.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const i=ph(),a=e().currentMonth,s=e().envelopes.find(u=>u.id===n);if(!s){$.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const o=!!s.isPiggybank;$.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${a}, isPiggybank=${o}`);const c=e().allocations[a]?.find(u=>u.envelopeId===n);if(c?await e().updateEnvelopeAllocation(c.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:i.id,month:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o&&r>0&&!s?.piggybankConfig?.paused){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));if(u){const f={...u,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(f)}else{const f={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}if(!o&&r>0){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));if(u){const f={...u,amount:r,description:"Budgeted"};await e().updateTransaction(f)}else{const f={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}$.log(" Envelope allocation set successfully")}catch(i){throw $.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const r=ph(),i=e().currentMonth,a=await hh.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:r.id,month:i});t(s=>{const o=s.allocations[i]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{allocations:{...s.allocations,[i]:[...o,a]},isLoading:!1}}),$.log(" Created envelope allocation:",a.id)}catch(r){throw $.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{$.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,a=ph(),s=e().allocations[i]?.find(u=>u.id===n);if(!s)throw new Error("Allocation not found");const o=e().envelopes.find(u=>u.id===s.envelopeId),c=o?.isPiggybank;if(await hh.updateEnvelopeAllocation(a.id,s.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(u=>({allocations:{...u.allocations,[i]:u.allocations[i]?.map(f=>f.id===n?{...f,...r,updatedAt:new Date().toISOString()}:f)||[]},isLoading:!1})),c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));u?r.budgetedAmount>0&&!o?.piggybankConfig?.paused?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||o?.piggybankConfig?.paused)&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&!o?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));u?r.budgetedAmount>0?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}$.log(" Updated envelope allocation:",n)}catch(i){throw $.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{$.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(s=>s.id===n);if(!i){$.warn("Allocation not found in store, skipping delete");return}const a=ph();await hh.deleteEnvelopeAllocation(a.id,i.envelopeId,r),t(s=>({allocations:{...s.allocations,[r]:s.allocations[r]?.filter(o=>o.id!==n)||[]},isLoading:!1})),$.log(" Deleted envelope allocation:",n)}catch(r){throw $.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw $.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}}}),eo=cl.getInstance(),_m=()=>{const{currentUser:t}=rn.getState();if(!t)throw new Error("No authenticated user found");return t},kSe=({set:t,get:e})=>({fetchCategories:async()=>{try{t({isLoading:!0,error:null});const{currentUser:n}=rn.getState();if(!n)return;const r=await eo.getCategories(n.id),i=Array.from(new Map(r.map(a=>[a.id,a])).values());t({categories:i,isLoading:!1})}catch(n){$.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const r=_m(),i=e().categories.find(o=>o.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(i)return $.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),i.id;const a=eo.createId(),s={...n,id:a,userId:r.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await eo.createCategory(s),t(o=>o.categories.some(u=>u.id===a)?{isLoading:!1}:{categories:[...o.categories,s],isLoading:!1}),a}catch(r){throw $.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const r=_m(),i={...n,updatedAt:new Date().toISOString()};await eo.updateCategory(r.id,i),t(a=>({categories:a.categories.map(s=>s.id===n.id?i:s),isLoading:!1}))}catch(r){throw $.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const r=_m(),i=e().envelopes.filter(a=>a.categoryId===n);if(i.length>0){let a=e().categories.find(s=>s.name.toLowerCase().trim()==="uncategorized"&&s.id!==n);if(!a){const s=eo.createId(),o=new Date().toISOString();a={id:s,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:o,updatedAt:o},await eo.createCategory(a),t(c=>c.categories.some(f=>f.id===s)?{}:{categories:[...c.categories,a]}),$.log(' Created new "Uncategorized" category for orphaned envelopes:',s)}for(const s of i){const o={...s,categoryId:a.id};await e().updateEnvelope(o)}$.log(` Reassigned ${i.length} envelopes to "Uncategorized"`)}await eo.deleteCategory(r.id,n),t(a=>({categories:a.categories.filter(s=>s.id!==n),isLoading:!1}))}catch(r){throw $.error("Failed to delete category:",r),t({isLoading:!1}),r}},ensureDefaultCategory:async()=>{const n=e().categories.find(o=>o.isDefault);if(n)return n.id;const r=_m(),i=eo.createId(),a=new Date().toISOString(),s={id:i,userId:r.id,name:"Uncategorized",orderIndex:e().categories.length,isDefault:!0,createdAt:a,updatedAt:a};return await eo.createCategory(s),t(o=>o.categories.some(u=>u.id===i)?{}:{categories:[...o.categories,s]}),$.log(' Created default "Uncategorized" category:',i),i},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const r=_m(),i=e(),a=new Map;n.forEach((o,c)=>a.set(o,c));const s=i.categories.map(o=>{if(!a.has(o.id))return o;const c=a.get(o.id);return o.orderIndex===c?o:{...o,orderIndex:c}});t({categories:s.sort((o,c)=>o.orderIndex-c.orderIndex)}),await eo.reorderCategories(r.id,s),t({isLoading:!1})}catch(r){throw $.error("Failed to reorder categories:",r),t({isLoading:!1}),r}}}),CSe=xs.getInstance(),Ju=()=>rn.getState().currentUser?.id||"",ISe=({set:t,get:e})=>({setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=Ju();if(!n){$.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;$.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)});const a=`guidedTutorialCompleted_${n}`,s=typeof localStorage<"u"?localStorage.getItem(a)==="true":!1;if(i){t({isOnboardingCompleted:!0,guidedTutorialCompleted:s}),$.log(" Skipping onboarding: already completed (localStorage)",{isTutorialCompleted:s});return}try{if((await CSe.getEnvelopes(n)).length>0){$.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(o){$.error(" Failed to check existing envelopes for onboarding:",o),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||($.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),$.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=Ju();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),$.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=Ju();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),$.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},startGuidedTutorial:()=>{$.log(" Starting guided tutorial"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})},advanceGuidedTutorial:()=>{const n=e().guidedTutorialStep;if(n===null)return;const r=n+1;if(r>=4){const a=Ju();a&&localStorage.setItem(`guidedTutorialCompleted_${a}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})}else $.log(" Advancing guided tutorial to step:",r),t({guidedTutorialStep:r})},skipGuidedTutorial:()=>{const n=Ju();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial skipped"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},completeGuidedTutorial:()=>{const n=Ju();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},resetGuidedTutorial:()=>{const n=Ju();n&&localStorage.removeItem(`guidedTutorialCompleted_${n}`),$.log(" Guided tutorial reset  starting at step 0"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})}}),PSe=({set:t,get:e})=>({updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(s=>{const o={...s};return o.last4===void 0&&delete o.last4,o}));const{currentUser:a}=rn.getState();if(a){const{AppSettingsService:s}=await Zh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>VB);return{AppSettingsService:o}},void 0);await s.updateAppSettings(a.id,i.id,i)}t({appSettings:i,isLoading:!1}),$.log(" Updated app settings")}catch(r){throw $.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const{currentUser:r}=rn.getState();if(r){const{AppSettingsService:a}=await Zh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>VB);return{AppSettingsService:o}},void 0),s=await a.getAppSettings(r.id);if(s){t({appSettings:s}),$.log(" Loaded app settings from Firestore");return}}const i={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};r&&(i.userId=r.id),t({appSettings:i}),$.log(" Initialized default app settings")}catch(n){$.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),$.log(" Online status updated:",n)}catch(n){$.error(" Failed to update online status:",n)}}}),Em=xs.getInstance(),vk=cl.getInstance(),FB=()=>{const{currentUser:t}=rn.getState();if(!t)throw new Error("No authenticated user found");return t},NSe=({set:t,get:e})=>({setMonth:async n=>{t({currentMonth:n});const r=e();r.loadedTransactionMonths.includes(n)||t(a=>({loadedTransactionMonths:[...a.loadedTransactionMonths,n]})),(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&($.log(`Month ${n} budget data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{$.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const{currentUser:r}=rn.getState();if(!r){$.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}$.log(`Fetching data for user: ${r.id}, month: ${n.currentMonth}`);const[i,a,s]=await Promise.all([Em.getEnvelopes(r.id),vk.getCategories(r.id).catch(b=>($.error(" Failed to load categories:",b),[])),Em.getMonthData(r.id,n.currentMonth)]),o=[n.currentMonth];let c=Array.from(new Map(a.map(b=>[b.id,b])).values());const u=new Set;let f=!1;for(const b of c){const x=b.name.toLowerCase().trim();if(u.has(x)){f=!0;break}u.add(x)}f&&r&&($.log(" Duplicate category names detected, running Firestore cleanup..."),await vk.deduplicateCategories(r.id)>0&&(c=await vk.getCategories(r.id))),t({envelopes:i,loadedTransactionMonths:o,areAllTransactionsLoaded:!1,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:s.incomeSources},allocations:{...n.allocations,[n.currentMonth]:s.allocations},isLoading:!1,error:null}),$.log(` BudgetStore initialized: ${i.length} envelopes, current month: ${n.currentMonth}`);const h=e(),g=new Set(h.transactions.map(b=>b.month)),v=Array.from(g).filter(b=>b!==void 0&&b!==h.currentMonth&&(!h.incomeSources[b]||!h.allocations[b]));if(v.length>0){$.log(` Auto-fixing ${v.length} lazy loading gaps: ${v.join(", ")}`);for(const b of v)try{await e().fetchMonthData(b);const x=e();(!x.incomeSources[b]||!x.allocations[b])&&($.log(` Creating empty month data for ${b} (no budget data found in Firestore)`),t(w=>({incomeSources:{...w.incomeSources,[b]:[]},allocations:{...w.allocations,[b]:[]}}))),$.log(` Fixed lazy loading gap for ${b}`)}catch(x){$.error(` Failed to fix lazy loading gap for ${b}:`,x)}}else $.log(" No lazy loading gaps detected for current month transactions")}catch(r){$.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchData:async()=>{await e().init()},fetchMonthData:async n=>{try{const{currentUser:r}=rn.getState();if(!r){$.log("No user logged in, skipping month data fetch");return}$.log(`Fetching month data for: ${n}`),e().loadedTransactionMonths.includes(n)||t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]}));const i=await Em.getMonthData(r.id,n),a=e();if(t({incomeSources:{...a.incomeSources,[n]:i.incomeSources},allocations:{...a.allocations,[n]:i.allocations}}),$.log(` Fetched budget data for ${n}`),n===e().currentMonth){const s=async()=>{try{const o=e(),c=o.allocations[n]||[],u=o.transactions.filter(h=>h.month===n);let f=0;for(const h of c){const g=o.envelopes.find(b=>b.id===h.envelopeId);if(g?.isPiggybank)continue;const v=u.find(b=>b.envelopeId===h.envelopeId&&(b.description==="Monthly Budget Allocation"||b.description==="Monthly Allocation"||b.description==="Budgeted"||b.description==="Piggybank Contribution"));v?v.amount!==h.budgetedAmount&&($.log(` Repairing mismatch for envelope ${g?.name||h.envelopeId}: Alloc ${h.budgetedAmount} vs Tx ${v.amount}`),await o.updateTransaction({...v,amount:h.budgetedAmount}),f++):h.budgetedAmount>0&&($.log(` Repairing missing transaction for envelope ${g?.name||h.envelopeId}`),await o.addTransaction({description:"Budgeted",amount:h.budgetedAmount,envelopeId:h.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),f++)}f>0&&$.log(` Repaired ${f} allocation discrepancies for ${n}`)}catch(o){$.error(` Verification failed for ${n}:`,o)}};setTimeout(()=>{s().catch(o=>$.error("Verification failed:",o))},1e3)}}catch(r){$.error(` Failed to fetch month data for ${n}:`,r)}},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),$.log(` Clearing all data for month: ${n}`);const r=FB(),{monthlyBudgetService:i}=await Zh(async()=>{const{monthlyBudgetService:a}=await import("./MonthlyBudgetService-DyvyKRZC.js");return{monthlyBudgetService:a}},[]);await i.clearMonthData(r.id,n),await e().init(),$.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw $.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},resetData:async()=>{$.log(" Resetting all data"),t({isLoading:!0});try{const{currentUser:n}=rn.getState();n?($.log(" Deleting all data from Firestore for user:",n.id),await Em.deleteAllUserData(n.id)):$.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),$.log(" Reset data complete")}catch(n){throw $.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const r=FB();return $.log(" Starting Time Machine Restore for user:",r.id),await Em.restoreUserData(r.id,n),$.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return $.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},handleUserLogout:()=>{$.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),DSe=()=>rn.getState().currentUser?.id||"",bt=oD()(yue(yq((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},loadedTransactionMonths:[],areAllTransactionsLoaded:!1,currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,guidedTutorialStep:null,guidedTutorialCompleted:!1,isLoading:!1,error:null,...ESe({set:t,get:e}),...TSe({set:t,get:e}),...ASe({set:t,get:e}),...kSe({set:t,get:e}),...ISe({set:t,get:e}),...PSe({set:t,get:e}),...NSe({set:t,get:e})}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));_Se({useBudgetStore:bt,useAuthStore:rn,getCurrentUserId:DSe});const GY=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:bt},Symbol.toStringTag,{value:"Module"})),UB=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},OSe=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=bt(),{currentUser:s}=rn(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:v}=bt(),{showToast:b}=vu(),[x,w]=A.useState(!1),S=A.useRef(null),[T,P]=A.useState(!1),D=!T||r||v,[O,N]=A.useState([]),C=A.useRef([]),[I,R]=A.useState([]),j=A.useRef([]),B=A.useCallback(ee=>t.find(ne=>ne.id===ee)?.isPiggybank?bt.getState().getEnvelopeBalance(ee):bt.getState().getEnvelopeBalance(ee,o),[t,o]);A.useEffect(()=>{const ee=t.filter(K=>{if(!K.isPiggybank||!K.isActive)return!1;if(K.createdAt)try{const ue=UB(K.createdAt);if(!ue)return $.error(` Invalid creation date for piggybank ${K.name}:`,K.createdAt),!1;const ne=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}`;return o>=ne}catch(ue){return $.error(` Error processing piggybank ${K.name}:`,ue,{createdAt:K.createdAt,typeofCreatedAt:typeof K.createdAt}),!1}return!0}).sort((K,ue)=>{const ne=K.orderIndex??0,oe=ue.orderIndex??0;return ne-oe});R(ee),j.current=ee},[t,o]);const L=I,z=O;A.useEffect(()=>(S.current=setTimeout(()=>{w(!0)},8e3),n(),P(!0),()=>{S.current&&clearTimeout(S.current)}),[]),A.useEffect(()=>{T&&!r&&!v&&(w(!1),S.current&&clearTimeout(S.current))},[T,r,v]),A.useEffect(()=>{const ee=t.filter(K=>{if(K.isPiggybank||K.isActive===!1)return!1;const ne=(u[o]||[]).some(Se=>Se.envelopeId===K.id),oe=e.some(Se=>Se.envelopeId===K.id&&(Se.month===o||Se.date.startsWith(o)));return ne||oe}).sort((K,ue)=>{const ne=K.orderIndex??0,oe=ue.orderIndex??0;return ne-oe});N(ee),C.current=ee},[t,u,o,e]);const W=(c[o]||[]).reduce((ee,K)=>ee+K.amount,0),Q=(u[o]||[]).filter(ee=>z.some(K=>K.id===ee.envelopeId)||L.some(K=>K.id===ee.envelopeId)).reduce((ee,K)=>ee+K.budgetedAmount,0),G=W-Q,Y=A.useCallback(async ee=>{if(!ee.length)return;const K=ee.map(ue=>ue.id);try{await a(K)}catch(ue){$.error("Failed to persist envelope order:",ue),b("Failed to save envelope order","error")}},[a,b]),J=A.useCallback(async ee=>{await Y(ee)},[Y]),ie=A.useCallback(ee=>{f(o,ee.id).catch($.error),b(`Deleted "${ee.name}"`,"neutral")},[f,o,b]),X=A.useCallback(async ee=>{try{const K=ee||o;$.log(" Copying to month:",K),await g(K),b("Previous month budget copied","success")}catch(K){$.error("Error copying previous month:",K),b("Failed to copy previous month","error")}},[g,b,o]),U=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await bt.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(ee){$.error("Error clearing month data:",ee),b("Failed to clear month data","error")}},[s,o,b]),Z=A.useCallback(async(ee,K)=>{try{await h(ee,K),setTimeout(()=>{const ue=bt.getState(),ne=ue.currentMonth,oe=ue.incomeSources[ne]||[],Se=ue.allocations[ne]||[],se=new Set(ue.envelopes.filter(Pe=>{if(Pe.isPiggybank){if(!Pe.isActive)return!1;if(Pe.createdAt){const be=UB(Pe.createdAt);if(!be)return!1;const _e=`${be.getFullYear()}-${String(be.getMonth()+1).padStart(2,"0")}`;return ne>=_e}return!0}return Pe.isActive!==!1}).map(Pe=>Pe.id)),Ae=Se.filter(Pe=>se.has(Pe.envelopeId)),ve=oe.reduce((Pe,be)=>Pe+be.amount,0),te=Ae.reduce((Pe,be)=>Pe+be.budgetedAmount,0);ve-te<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(ve-te)<.005&&ve>0&&b("Every dollar has a job ","success")},100)}catch(ue){$.error("Failed to set allocation:",ue),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:z,piggybanks:L,incomeSources:c,availableToBudget:G,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:D,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:B,fetchData:n,reorderEnvelopes:J,deleteIncomeSource:ie,clearMonthData:U,copyFromPreviousMonth:X,setEnvelopeAllocation:Z,localOrderRef:C,setLocalEnvelopes:N,localPiggybankOrderRef:j,setLocalPiggybanks:R}},RSe=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:v}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof v=="number"?v:0,S=Math.abs(b)<.005,T=b<-.005,P=x>0?w/x*100:0;let D="text-gray-900 dark:text-white",O="bg-green-500",N="Left to Budget",C=x>0?Math.min(P,100):0,I=!0;return x===0?(N="Add income to start budgeting",C=0,I=!1,D="text-gray-500 dark:text-zinc-500"):S?(D="text-green-600 dark:text-emerald-400",O="bg-green-500",N="Perfect! Every dollar has a job ",C=100,I=!1):T&&(D="text-red-600 dark:text-red-400",O="bg-red-500",N="You're not in Congress! Try again.",C=100),m.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[m.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[m.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${D}`,children:N}),I&&m.jsxs("span",{className:`text-sm font-bold truncate ${D}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${O}`,style:{width:`${C}%`}})})]})};return m.jsxs("div",{className:"py-2 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-center gap-4",children:[m.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:m.jsx(Xle,{size:20})}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),m.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:m.jsx(fs,{size:20})})]}),n&&m.jsx("div",{className:"px-1",children:f()})]})},d_=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=Kye(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,v=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&v<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return m.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[m.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:m.jsx(_v,{className:"text-white w-6 h-6"})}),m.jsx(xt.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},MSe=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=bt(),{showToast:o}=vu(),[c,u]=A.useState(""),[f,h]=A.useState(""),[g,v]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}v(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){$.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{v(!1)}};return m.jsx(fr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(xt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),m.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},jSe=({isVisible:t,onClose:e,categories:n,currentCategoryId:r,envelopeName:i,onSelect:a})=>(A.useEffect(()=>{if(t){const s=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${s}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,s)}}},[t]),m.jsx(fr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:[m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(xt.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-t-2xl sm:rounded-2xl w-full sm:max-w-sm max-h-[70vh] overflow-hidden relative z-10 pb-[calc(env(safe-area-inset-bottom)+5rem)]",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(sD,{size:18,className:"text-blue-600 dark:text-blue-400"}),m.jsx("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Move Envelope"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors text-lg",children:""})]}),m.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-zinc-800/50",children:m.jsxs("p",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Moving ",m.jsx("span",{className:"font-medium text-gray-700 dark:text-zinc-300",children:i})," to:"]})}),m.jsx("div",{className:"overflow-y-auto max-h-[50vh]",children:n.map(s=>{const o=s.id===r;return m.jsxs("button",{onClick:()=>{o||a(s.id)},disabled:o,className:`w-full flex items-center justify-between px-4 py-3 transition-colors ${o?"bg-blue-50 dark:bg-blue-900/20 cursor-default":"hover:bg-gray-50 dark:hover:bg-zinc-800 active:bg-gray-100 dark:active:bg-zinc-700"}`,children:[m.jsx("span",{className:`text-sm ${o?"font-semibold text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:s.name}),o&&m.jsx(aD,{size:16,className:"text-blue-600 dark:text-blue-400"})]},s.id)})})]})]})})),zSe=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return m.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),m.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[m.jsx($le,{className:"w-12 h-12 text-blue-500"}),m.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:m.jsx(qh,{size:14})})]})]}),m.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),m.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),m.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:m.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":m.jsx(m.Fragment,{children:m.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},LSe="/personal-budget-pwa/icon-512.png",yk="/personal-budget-pwa/images/budget-balanced.png",yx=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],VSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-green-400 dark:border-green-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(uf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Salary"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$3,500.00"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Freelance"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$800.00"})]})]})]}),BSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-purple-400 dark:border-purple-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-purple-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Food"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(uf,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Groceries"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-10 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$350 / $500"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Dining Out"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-6 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$75 / $200"})]})]})]}),FSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-blue-400 dark:border-blue-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between text-[10px] font-medium mb-1",children:[m.jsx("span",{className:"text-gray-700 dark:text-zinc-300",children:"Left to Budget"}),m.jsx("span",{className:"font-bold text-green-600",children:"$0.00"})]}),m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:"w-full h-2 bg-green-500 rounded-full"})}),m.jsx("div",{className:"text-[9px] text-green-600 dark:text-emerald-400 text-center mt-1 font-medium",children:"Every dollar has a job!"})]}),USe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-pink-400 dark:border-pink-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-pink-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsx("div",{className:"flex justify-between items-center mb-2",children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(cf,{size:12,className:"text-pink-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Piggybanks"})]})}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Vacation Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$1,200 / $3,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-2/5 h-1.5 bg-pink-500 rounded-full"})})]}),m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Emergency Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$4,500 / $10,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-[45%] h-1.5 bg-pink-500 rounded-full"})})]})]})]}),$Se=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-cyan-400 dark:border-cyan-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-cyan-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"ANALYTICS"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[m.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-gray-200 dark:text-zinc-700"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#8B5CF6",strokeWidth:"3",strokeDasharray:"35 65",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"25 75",strokeDashoffset:"-35",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:"20 80",strokeDashoffset:"-60",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:"15 85",strokeDashoffset:"-80",strokeLinecap:"round"})]}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"text-[8px] text-gray-500 dark:text-zinc-500",children:"Total"}),m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"$4,300"})]})]}),m.jsxs("div",{className:"space-y-1 flex-1",children:[m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Housing 35%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Food 25%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Transport 20%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Personal 15%"})]})]})]})]}),qSe=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-teal-400 dark:border-teal-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-teal-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"TRENDS"}),m.jsx("div",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300 mb-2",children:"Monthly Spending"}),m.jsx("div",{className:"flex items-end gap-1 h-12",children:[65,45,80,55,70,40].map((t,e)=>m.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[m.jsx("div",{className:"w-full rounded-t",style:{height:`${t}%`,background:`hsl(${200+e*20}, 70%, 55%)`}}),m.jsx("span",{className:"text-[7px] text-gray-400",children:["Jan","Feb","Mar","Apr","May","Jun"][e]})]},e))})]}),to=[{id:"housing",label:"Housing",sub:"Rent, Utilities"},{id:"food",label:"Food",sub:"Groceries, Dining"},{id:"transport",label:"Transportation",sub:"Gas, Insurance"},{id:"savings",label:"Savings",sub:"Emergency, Goals"}],GSe=()=>{const[t,e]=A.useState(to),n=al.useRef(0);return A.useEffect(()=>{const r=[()=>e([to[1],to[0],to[2],to[3]]),()=>e([to[3],to[1],to[0],to[2]]),()=>e(to)],i=setInterval(()=>{n.current=(n.current+1)%r.length,r[n.current]()},2e3);return()=>clearInterval(i)},[]),m.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-2 border border-indigo-300 dark:border-indigo-700 space-y-1",children:[m.jsx(fr,{mode:"popLayout",children:t.map(r=>m.jsxs(xt.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"flex items-center gap-2 py-1.5 px-2 bg-indigo-50 dark:bg-indigo-900/40 rounded-lg",children:[m.jsx(ep,{size:14,className:"text-indigo-400 dark:text-indigo-500 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"text-[11px] font-medium text-indigo-900 dark:text-indigo-200",children:r.label}),m.jsx("div",{className:"text-[9px] text-indigo-600 dark:text-indigo-400",children:r.sub})]})]},r.id))}),m.jsx("p",{className:"text-[9px] text-indigo-500 dark:text-indigo-400 text-center italic mt-1",children:"Categories reordering automatically..."})]})},HSe=({currentMonth:t,onComplete:e,onSkip:n})=>{const[r,i]=A.useState(0),[a,s]=A.useState(0),[o,c]=A.useState(2500),[u,f]=A.useState(yx),[h,g]=A.useState(!1),{addCategory:v}=bt(),b=j=>{f(B=>B.includes(j)?B.filter(L=>L!==j):[...B,j])},x=async()=>{for(let j=0;j<u.length;j++)await v({name:u[j],orderIndex:j,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()},w=async()=>{for(let j=0;j<yx.length;j++)await v({name:yx[j],orderIndex:j,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});n()};A.useEffect(()=>{if(r===5){c(2500);const j=2e3,B=20,L=j/B,z=2500/B;let W=0;const Q=setInterval(()=>{W++;const G=Math.max(0,2500-z*W);c(G),W>=B&&(clearInterval(Q),setTimeout(()=>{let Y=0;const J=10,ie=200,X=500/J,U=setInterval(()=>{Y++;const Z=-(X*Y);c(Z),Y>=J&&clearInterval(U)},ie)},1e3))},L);return()=>clearInterval(Q)}},[a,r]);const T=(j=>{const[B,L]=j.split("-");return new Date(parseInt(B),parseInt(L)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),P=[{icon:qh,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${T}`,content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",m.jsx("strong",{children:"zero-based budgeting"})," method."]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),m.jsxs("div",{className:"bg-gray-100 dark:bg-zinc-800/50 rounded-xl p-3 space-y-2",children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 text-center mb-1",children:"Your budget will look like this:"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-2 flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"February 2026"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600",children:"$0.00 left"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(zm,{size:14,className:"text-green-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Income"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(np,{size:14,className:"text-purple-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Envelopes"})]})]})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:"This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:Wce,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:yx.map(j=>m.jsxs("button",{onClick:()=>b(j),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${u.includes(j)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[m.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u.includes(j)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:u.includes(j)&&m.jsx(oo,{size:12,className:"text-white"})}),j]},j))}),u.length===0&&m.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:zm,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Add your income sources for the month. This could be:"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(oo,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(oo,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(oo,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),m.jsx(VSe,{}),m.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[m.jsxs("strong",{children:["Tap the ",m.jsx(uf,{className:"w-4 h-4 inline"})," button"]}),' next to "Income Sources" to add your income.']})})]}),color:"green"},{icon:np,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),m.jsx(BSe,{}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(oo,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Groceries"})," (Food)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(oo,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(oo,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),m.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[m.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:ep,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",m.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),m.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[m.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[m.jsx(ep,{className:"w-4 h-4"}),"Drag to Reorder"]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"PC:"})," Click and hold on the ",m.jsx("strong",{children:"dots"}),", then drag"]})]}),m.jsx(GSe,{}),m.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400 mt-3",children:[m.jsx("li",{children:"- Reorder categories: Settings  Manage Categories"}),m.jsx("li",{children:"- Reorder envelopes: On the main budget screen"})]})]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Try organizing: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:vd,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),m.jsx(FSe,{}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[m.jsx("button",{onClick:()=>s(j=>j+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:m.jsx(Fce,{className:"w-4 h-4"})}),m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),m.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",m.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[m.jsx("span",{children:"Left to Budget"}),m.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),m.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:m.jsx(xt.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),m.jsxs(xt.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job!",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},a)]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Start with essential expenses (rent, utilities, groceries) first, then allocate what's left."]})})]}),color:"blue"},{icon:cf,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",m.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),m.jsx(USe,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Xce,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(zm,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set a monthly amount to save"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(vd,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]})]}),color:"pink"},{icon:kw,title:"Analytics: Spending Insights",description:"Visualize where your money goes",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["The ",m.jsx("strong",{children:"Analytics"})," screen gives you powerful insights into your spending habits over time."]}),m.jsx($Se,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(dq,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Totals"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See a donut chart of spending by category"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(kw,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Breakdown"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly stacked bar chart by category"})]})]})]}),m.jsx("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 border border-cyan-200 dark:border-cyan-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-cyan-900 dark:text-cyan-200",children:[m.jsx("strong",{children:"Access Analytics"}),' from the bottom navigation bar under the "More" menu.']})})]}),color:"blue"},{icon:vd,title:"Analytics: Income & Savings",description:"Track your financial health over time",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Monitor your ",m.jsx("strong",{children:"income trends"})," and ",m.jsx("strong",{children:"savings rate"})," to stay on track."]}),m.jsx(qSe,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(zm,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Income"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Track income by source over time with stacked bars"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(vd,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Savings Rate"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See what percentage of income you're saving each month"})]})]})]}),m.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-teal-900 dark:text-teal-200",children:[m.jsx("strong",{children:"Time frames:"})," View 1, 3, 6, 9, or 12 months of data, or filter by year."]})})]}),color:"blue"},{icon:yk,title:"You're Ready to Budget!",description:"Start taking control of your money",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),m.jsx("div",{className:"space-y-2",children:["Choose your categories","Add your income sources","Create envelopes in categories","Organize your budget order","Allocate until Left to Budget = $0","Set up Piggybanks for savings goals","Track trends in Analytics"].map((j,B)=>m.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[m.jsx("div",{className:"w-7 h-7 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:m.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold text-xs",children:B+1})}),m.jsx("span",{className:"text-sm",children:j})]},B))}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-4",children:m.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:`Click "Start Budgeting" below and we'll guide you through your first setup!`})})]}),color:"green",useCustomIcon:!0}],D=P[r],O=D.useCustomIcon?yk:D.icon,N=r===P.length-1,C=r===0,I={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}},R=I[D.color]||I.blue;return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-2xl",children:[m.jsx(fr,{children:h&&m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(xt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Onboarding?"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"We'll set up default categories for you. You can always restart this guide from Settings."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Continue Guide"}),m.jsx("button",{onClick:w,className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})}),m.jsx(fr,{mode:"wait",children:m.jsxs(xt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"flex justify-end px-4 pt-3",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800",children:[m.jsx(mq,{size:14}),"Skip"]})}),m.jsx("div",{className:"px-6 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:D.title}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:D.description})]}),m.jsx("div",{className:"flex flex-col items-center mx-4",children:r===0?m.jsx("img",{src:LSe,alt:"Dollars At Work",className:`w-20 h-20 ${R.text}`}):D.useCustomIcon?m.jsx("img",{src:yk,alt:"Budget Balanced",className:`w-32 h-32 ${R.text}`}):m.jsx("div",{className:`${R.bg} p-3 rounded-xl`,children:typeof O=="string"?null:m.jsx(O,{className:`w-8 h-8 ${R.text}`})})})]})}),m.jsx("div",{className:"px-6 pb-6 pt-2 max-h-[55vh] overflow-y-auto",children:D.content}),m.jsx("div",{className:"px-6 pb-2 flex justify-center gap-1.5",children:P.map((j,B)=>m.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${B===r?`w-8 ${R.button}`:B<r?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},B))}),m.jsx("div",{className:"text-center pb-2",children:m.jsxs("span",{className:"text-xs text-gray-400 dark:text-zinc-500",children:[r+1," of ",P.length]})}),m.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!C&&m.jsxs("button",{onClick:()=>i(j=>j-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[m.jsx(_l,{className:"w-5 h-5"}),"Back"]}),m.jsx("button",{onClick:()=>{if(N)x();else{if(D.title.includes("Choose Categories")&&u.length===0)return;i(j=>j+1)}},disabled:D.title.includes("Choose Categories")&&u.length===0,className:`${C?"flex-1":"flex-[2]"} py-3 px-4 ${R.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:N?m.jsxs(m.Fragment,{children:[m.jsx(qh,{className:"w-5 h-5"}),"Start Budgeting"]}):m.jsxs(m.Fragment,{children:["Next",m.jsx(Vle,{className:"w-5 h-5"})]})})]})]},r)})]})})},KSe=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o,onMoveCategory:c})=>{const u=A.useRef(null),[f,h]=A.useState(!1),g=P2(j=>{$Y(),o(j,t.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch}),v=t.piggybankConfig?.targetAmount,b=t.piggybankConfig?.monthlyContribution??0,x=t.piggybankConfig?.color||"#3B82F6",w=t.piggybankConfig?.paused||!1,S=e,T=(j,B=1)=>{const L=j.replace("#",""),z=parseInt(L,16),W=z>>16&255,Q=z>>8&255,G=z&255;return`rgba(${W}, ${Q}, ${G}, ${B})`},P=`linear-gradient(135deg, ${T(x,.14)} 0%, ${T(x,.05)} 100%)`,D=T(x,.4),O=v&&v>0?Math.min(S/v*100,100):0,N=v&&S>=v;A.useEffect(()=>{a&&a!==t.id&&h(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(h(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&f){const j=setTimeout(()=>{h(!1)},300);return()=>clearTimeout(j)}},[a,f]);const C=j=>{if(f||i){j.preventDefault(),j.stopPropagation();return}n(t.id)},I=a===t.id,R=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:j=>o(j,t.id),children:m.jsx(ep,{size:20})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${x}20`},children:m.jsx(cf,{size:12,style:{color:x}})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx(vd,{size:10,style:{color:x}}),m.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",b.toFixed(2),"/mo"]}),w&&m.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[m.jsx(Rce,{size:8})," PAUSED"]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c&&m.jsx("button",{onClick:j=>{j.stopPropagation(),c(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(sD,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",S.toFixed(2)]}),m.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",v?.toFixed(0)||"0"]})]})]})]}),v&&v>0&&m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${O}%`,backgroundColor:x}})}),N&&!v&&m.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return m.jsx(xt.div,{...g(),layout:!I,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:j=>{r&&r(j),u.current=j},onClick:C,style:{background:P,borderColor:D,boxShadow:I?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:I?50:1,scale:I?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:R})},Tm=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},WSe=12,YSe=(t,e,n)=>Math.min(Math.max(t,e),n),XSe=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f,onMoveCategory:h})=>{const g=!!t.isPiggybank,v=t.piggybankConfig?.color||"#3B82F6",b=g?`linear-gradient(135deg, ${Tm(v,.18)} 0%, ${Tm(v,.08)} 100%)`:void 0,x=g?Tm(v,.5):void 0,[w,S]=A.useState(!1),T=P2(L=>{$Y(),f(L,t.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch}),P=i.filter(L=>L.envelopeId===t.id&&L.month===a),D=P.filter(L=>L.type==="Expense"),O=P.filter(L=>L.type==="Income"),N=D.reduce((L,z)=>L+(z.amount||0),0),C=O.reduce((L,z)=>L+(z.amount||0),0),I=C>0?Math.max(0,N/C*100):0,R=L=>{if(w||o){L.preventDefault(),L.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&S(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(S(!0),u(t.id))},[c,t.id,u]),A.useEffect(()=>{if(!c&&w){const L=setTimeout(()=>{S(!1)},300);return()=>clearTimeout(L)}},[c,w]);const j=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:L=>f(L,t.id),children:m.jsx(ep,{size:20})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[g&&m.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:Tm(v,.4),backgroundColor:Tm(v,.15),color:v},children:m.jsx(cf,{size:10})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:L=>{L.stopPropagation(),h(t)},className:"p-1 text-gray-300 dark:text-zinc-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors rounded-md",title:"Move to category",children:m.jsx(sD,{size:14})}),m.jsxs("div",{className:"text-right",children:[m.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-I<=5?"text-red-500":I>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),m.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]})]}),e>0&&m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-I<=5?"bg-red-500":I>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-I,2)}%`}})})})]})]}),B=c===t.id;return m.jsx(xt.div,{...T(),layout:!B,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:R,style:{boxShadow:B?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:b,borderColor:x,cursor:B?"grabbing":"pointer",zIndex:B?50:1,scale:B?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${g?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:j})},QSe=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o,isFirstCategory:c=!1,onMoveCategory:u})=>{const[f,h]=A.useState(e),g=A.useRef(e),[v,b]=A.useState(!1),[x,w]=A.useState(null),S=A.useRef(!1),T=A.useRef(null),P=A.useRef({}),D=A.useRef({}),O=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{v||(h(e),g.current=e)},[e,v]);const N=A.useCallback((I,R)=>{const j=D.current[R];if(j){S.current=!0;const B=I.nativeEvent||I;j.dragStart(B)}},[]),C=A.useCallback(I=>R=>{R?P.current[I]=R:delete P.current[I]},[]);return A.useEffect(()=>{const I=()=>{Object.values(D.current).forEach(B=>B?.destroy()),D.current={}};if(!f.length)return;const R=()=>{f.forEach(B=>{const L=P.current[B.id];if(!L||!T.current)return;const z=new FY(T.current,{target:L,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});z.on("dragStart",Q=>{if(!S.current){Q.stop();return}const G=Q.inputEvent.target;if(G.closest(".js-budget-target")||G.tagName==="INPUT"){Q.stop();return}const Y=g.current.findIndex(X=>X.id===B.id),J=Q.target,ie=J.getBoundingClientRect();w(B.id),O.current={activeId:B.id,startIndex:Y,currentIndex:Y,itemHeight:ie.height+WSe},J.style.transition="none",J.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",J.style.zIndex="20",b(!0)});let W=null;z.on("drag",Q=>{const G=Q.target;W!==null&&cancelAnimationFrame(W),W=requestAnimationFrame(()=>{const Y=O.current;if(Y.activeId!==B.id)return;const J=Q.beforeTranslate[1];G.style.transform=`translateY(${J}px)`,G.style.transition="none";const{itemHeight:ie,startIndex:X}=Y,U=Math.round(J/ie),Z=YSe(X+U,0,g.current.length-1);Z!==Y.currentIndex&&(Y.currentIndex=Z,g.current.forEach((ee,K)=>{if(ee.id===B.id)return;const ue=P.current[ee.id];if(!ue)return;let ne=0;X<Z&&K>X&&K<=Z?ne=-ie:X>Z&&K>=Z&&K<X&&(ne=ie),ue.style.transform=ne?`translateY(${ne}px)`:"",ue.style.transition="transform 0.2s ease"})),W=null})}),z.on("dragEnd",Q=>{W!==null&&(cancelAnimationFrame(W),W=null);const G=Q.target,{startIndex:Y,currentIndex:J}=O.current;if(G.style.transform="",G.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",G.style.boxShadow="",g.current.forEach(ie=>{const X=P.current[ie.id];X&&(X.style.transform="",X.style.transition="")}),Y!==J){const ie=[...g.current],[X]=ie.splice(Y,1);ie.splice(J,0,X),g.current=ie,h(ie),o(ie.map(U=>U.id))}setTimeout(()=>{G.style.zIndex="",w(null),b(!1),S.current=!1},300)}),z.on("click",()=>{const Q=window.event?.target;Q&&(Q.closest(".js-budget-target")||Q.tagName==="INPUT")||a(`/envelope/${B.id}`)}),D.current[B.id]=z})},j=window.setTimeout(R,80);return()=>{clearTimeout(j),I()}},[f,a,o]),e.length===0&&t.id==="uncategorized"?null:m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),m.jsx("button",{id:c?"tutorial-add-envelope":void 0,onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:m.jsx(uf,{size:20})})]}),m.jsx("div",{id:c?"tutorial-allocation-area":void 0,ref:T,className:"space-y-2 relative",children:f.length===0?m.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):m.jsx(fr,{initial:!1,children:f.map(I=>{const j=(n[r]||[]).find(L=>L.envelopeId===I.id)?.budgetedAmount||0,B=s(I.id);return I.isPiggybank?m.jsx(KSe,{piggybank:I,balance:B,onNavigate:L=>a(`/envelope/${L}`),setMoveableRef:C(I.id),isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:N,onMoveCategory:u},I.id):m.jsx(XSe,{env:I,budgetedAmount:j,remainingBalance:B,navigate:a,transactions:i,currentMonth:r,setMoveableRef:C,isReorderingActive:v,activelyDraggingId:x,onItemDragStart:()=>{},onLongPressTrigger:N,onMoveCategory:u},I.id)})})})]})},ZSe=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=OSe(),{setMonth:g,setIsOnboardingActive:v,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:S,fetchCategories:T,ensureDefaultCategory:P,envelopes:D,reorderEnvelopes:O,startGuidedTutorial:N,updateEnvelope:C}=bt(),I=Qa(),[R,j]=A.useState(!1),[B,L]=A.useState("add"),[z,W]=A.useState(null),[Q,G]=A.useState(!1),[Y,J]=A.useState(!1),[ie,X]=A.useState(null),U=A.useRef(null),Z=A.useRef(null),[ee,K]=A.useState(0);A.useEffect(()=>{S.length===0&&T()},[S.length,T]),A.useEffect(()=>{const be=[...t,...e],_e=new Set(S.map(Oe=>Oe.id)),De=be.filter(Oe=>!Oe.categoryId||!_e.has(Oe.categoryId));De.length>0&&S.length>0&&P().then(Oe=>{De.forEach(Ye=>{C({...Ye,categoryId:Oe})})})},[t,e,S,P,C]);const ue=A.useMemo(()=>{const be={};return S.forEach(De=>be[De.id]=[]),[...t,...e].sort((De,Oe)=>(De.orderIndex??0)-(Oe.orderIndex??0)).forEach(De=>{if(De.categoryId&&be[De.categoryId])be[De.categoryId].push(De);else{const Oe=S.find(Ye=>Ye.isDefault);Oe&&be[Oe.id]?.push(De)}}),{groups:be}},[S,t,e]),ne=A.useCallback(async be=>{const _e=[...D.map(Ve=>Ve.id)],De=new Set(be),Oe=[];let Ye=0;_e.forEach(Ve=>{De.has(Ve)?Oe.push(be[Ye++]):Oe.push(Ve)}),await O(Oe)},[D,O]);A.useLayoutEffect(()=>{if(b)return;const be=Z.current;if(!be)return;const _e=()=>K(be.getBoundingClientRect().height);_e();const De=new ResizeObserver(()=>_e());return De.observe(be),window.addEventListener("resize",_e),()=>{window.removeEventListener("resize",_e),De.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const be=setTimeout(()=>{if(b)return;if(x){v(!1);const Oe=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ye=Object.keys(n).some(Ve=>(n[Ve]||[]).length>0)||Object.keys(a).some(Ve=>(a[Ve]||[]).length>0);J(!!(Oe&&Ye));return}const _e=(n[i]||[]).length===0&&(a[i]||[]).length===0,De=Object.keys(n).some(Oe=>(n[Oe]||[]).length>0)||Object.keys(a).some(Oe=>(a[Oe]||[]).length>0);_e?De?(J(!0),v(!1)):(v(!0),J(!1)):(J(!1),v(!1))},500);return()=>clearTimeout(be)}},[c,o,i,n,a,x]);const oe=()=>{L("add"),W(null),j(!0)},Se=be=>{U.current&&clearTimeout(U.current),!Q&&(L("edit"),W(be),j(!0))},se=be=>{U.current&&clearTimeout(U.current),G(!0),h(be),setTimeout(()=>G(!1),500)},Ae=()=>{j(!1),W(null)},ve=async()=>{J(!1);const{copyPreviousMonthAllocations:be}=bt.getState();await be(i)},te=()=>{w(),v(!1),N()},Pe=()=>{w(),v(!1),N()};return c?m.jsx(iH,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&m.jsx("header",{ref:Z,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:m.jsx(RSe,{currentMonth:i,onMonthChange:be=>{J(!1),g(be)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((be,_e)=>be+_e.amount,0),totalAllocated:(a[i]||[]).filter(be=>t.some(_e=>_e.id===be.envelopeId)||e.some(_e=>_e.id===be.envelopeId)).reduce((be,_e)=>be+_e.budgetedAmount,0)}})}),m.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,ee+16)},children:[b?m.jsx(HSe,{currentMonth:i,onComplete:te,onSkip:Pe}):Y?m.jsx(zSe,{currentMonth:i,onCopy:ve}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"tutorial-income-section",className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("button",{onClick:oe,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:m.jsx(uf,{size:20})})]}),(n[i]||[]).length===0?m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):m.jsx("div",{className:"space-y-2",children:m.jsx(fr,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(be=>m.jsx(xt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(d_,{onDelete:()=>se(be),children:m.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>Se(be),children:[m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:be.name})}),m.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",be.amount.toFixed(2)]})]})})},be.id))})})]}),S.map((be,_e)=>m.jsx(QSe,{category:be,envelopes:ue.groups[be.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:I,getEnvelopeBalance:f,onReorderGlobal:ne,isFirstCategory:_e===0,onMoveCategory:X},be.id)),S.length===0&&m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[m.jsx(np,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),m.jsx("button",{onClick:()=>I("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),m.jsx(MSe,{isVisible:R,onClose:Ae,mode:B,initialIncomeSource:z}),m.jsx(jSe,{isVisible:!!ie,onClose:()=>X(null),categories:S,currentCategoryId:ie?.categoryId||"",envelopeName:ie?.name||"",onSelect:async be=>{if(ie)try{const _e=D.find(Oe=>Oe.id===ie.id);if(!_e)return;const De={id:_e.id,name:_e.name,currentBalance:_e.currentBalance,lastUpdated:_e.lastUpdated,isActive:_e.isActive,orderIndex:_e.orderIndex,categoryId:be};_e.userId&&(De.userId=_e.userId),_e.createdAt&&(De.createdAt=_e.createdAt),_e.isPiggybank!==void 0&&(De.isPiggybank=_e.isPiggybank),_e.piggybankConfig&&(De.piggybankConfig=_e.piggybankConfig),await C(De),X(null)}catch(_e){console.error("Move category failed:",_e)}}})]})]})]})},JSe=[],HY=({selectedCard:t,onCardSelect:e,initialCards:n=JSe,disabled:r=!1,isUserSelected:i=!1})=>{const a=bt(X=>X.appSettings),s=bt(X=>X.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=A.useState(!1),[h,g]=A.useState(!1),[v,b]=A.useState(n),[x,w]=A.useState(null),[S,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[P,D]=A.useState(null),[O,N]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const C=t||o;A.useEffect(()=>{!t&&e&&v.length>0&&e(v[0])},[t,e,v]);const I=X=>{r||(X.id==="add-new"?g(!0):(c(X),e?.(X),f(!1)))},R=()=>{r||f(!u)},j=X=>{r||w(X)},B=async()=>{if(x&&!r){const X=v.filter(U=>U.id!==x.id);if(b(X),C?.id===x.id){const U=X.length>0?X[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(U),e?.(U)}w(null),f(!1);try{await s({paymentSources:X})}catch(U){$.error("Failed to delete card from app settings:",U),b(v),alert("Failed to delete card. Please try again.");return}}},L=()=>{w(null)},z=async()=>{if(r)return;const X=!["Cash","Venmo"].includes(S.network);if(X&&(S.last4.length!==4||!/^\d{4}$/.test(S.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!S.name.trim()){alert("Please enter a name");return}const U={id:`custom-${Date.now()}`,name:S.name.trim(),network:S.network,last4:X?S.last4:void 0,color:S.color},Z=[...v,U];b(Z),c(U),e?.(U),g(!1),f(!1);try{await s({paymentSources:Z})}catch(ee){$.error("Failed to save card to app settings:",ee),b(v),c(C),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},W=(X,U)=>{r||(D(U),X.dataTransfer.effectAllowed="move")},Q=(X,U)=>{r||!P||(X.preventDefault(),X.dataTransfer.dropEffect="move",N(U))},G=()=>{N(null)},Y=async(X,U)=>{if(r||!P)return;X.preventDefault(),N(null);const Z=v.findIndex(K=>K.id===P.id);if(Z===-1||Z===U)return;const ee=[...v];ee.splice(Z,1),ee.splice(U,0,P),b(ee),D(null);try{await s({paymentSources:ee})}catch(K){$.error("Failed to reorder cards:",K),b(v),alert("Failed to reorder cards. Please try again.")}},J=()=>{D(null),N(null)},ie=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&m.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),m.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[m.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:C.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:C.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(C.network)?C.network==="Cash"?"$$$":"@":` ${C.last4||""}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:C.name}),m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(C.network)?C.network:`(...${C.last4})`})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&m.jsxs("div",{className:"card-stack-dropdown",children:[v.length>1&&m.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),m.jsx("div",{className:"card-stack",children:m.jsx(fr,{initial:!1,mode:"popLayout",children:[...v,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((X,U)=>{const Z=C.id===X.id,ee=X.id==="add-new",K=["Cash","Venmo"].includes(X.network);return m.jsx(xt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(d_,{onDelete:()=>!ee&&!r&&j(X),threshold:-80,children:m.jsxs("div",{className:`card-stack-item ${Z?"selected":""} ${ee?"add-new-card":""} ${P?.id===X.id?"dragging":""} ${O===U?"drag-over":""}`,onClick:()=>I(X),draggable:!ee&&!r,onDragStart:ee?void 0:ue=>W(ue,X),onDragOver:ee?void 0:ue=>Q(ue,U),onDragLeave:ee?void 0:G,onDrop:ee?void 0:ue=>Y(ue,U),onDragEnd:ee?void 0:J,style:{backgroundColor:ee?"#f3f4f6":X.color,color:ee?"#374151":X.color==="#e3e3e3"?"#000":"#fff",zIndex:v.length-U,opacity:P?.id===X.id?.5:1,transform:O===U?"scale(1.02)":"scale(1)"},children:[m.jsxs("div",{className:"card-header",children:[m.jsx("span",{className:"card-network",children:ee?"":X.network}),Z&&!ee&&m.jsx("span",{className:"selected-indicator",children:""})]}),m.jsxs("div",{className:"card-details",children:[m.jsx("div",{className:"card-name",children:X.name}),m.jsx("div",{className:"card-number",children:ee?"":K?X.network==="Cash"?"$$$":"@":` ${X.last4}`})]}),ee&&m.jsx("div",{className:"add-icon",children:m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},X.id)})})})]})]}),h&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),m.jsx("input",{type:"text",value:S.name,onChange:X=>T({...S,name:X.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),m.jsxs("select",{value:S.network,onChange:X=>T({...S,network:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[m.jsx("option",{value:"Visa",children:"Visa"}),m.jsx("option",{value:"Mastercard",children:"Mastercard"}),m.jsx("option",{value:"Amex",children:"Amex"}),m.jsx("option",{value:"Cash",children:"Cash"}),m.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(S.network)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),m.jsx("input",{type:"text",value:S.last4,onChange:X=>T({...S,last4:X.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:ie.map(X=>m.jsx("button",{type:"button",onClick:()=>T({...S,color:X}),className:`w-full h-10 rounded-lg border-2 transition-all ${S.color===X?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:X}},X))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),m.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:S.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:S.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(S.network)?S.network==="Cash"?"$$$":"@":` ${S.last4||"0000"}`})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:x.name}),"?"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:B,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},KY=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const{categories:i}=bt(),[a,s]=A.useState([]),[o,c]=A.useState(!1),u=A.useRef(null);A.useEffect(()=>{r&&!o&&t.some(N=>N.id===r)&&(s([r]),c(!0))},[r,t,o]);const[f,h]=A.useState({}),[g,v]=A.useState(e),b=A.useMemo(()=>{const O=[],N=[],C={};return i.forEach(I=>{C[I.id]=[]}),t.forEach(I=>{I.categoryId&&C[I.categoryId]?C[I.categoryId].push(I):N.push(I)}),i.sort((I,R)=>(I.orderIndex??0)-(R.orderIndex??0)).forEach(I=>{C[I.id].length>0&&O.push({name:I.name,id:I.id,envelopes:C[I.id]})}),N.length>0&&O.push({name:"Other",id:"uncategorized",envelopes:N}),O},[t,i]),x=O=>{s(N=>N.includes(O)?N.filter(C=>C!==O):[...N,O])},w=(O,N)=>{h(C=>({...C,[O]:N}))},S=al.useRef(a.length);A.useEffect(()=>{if(a.length===1){const O=a[0];h({[O]:e})}else if(a.length>1&&S.current<=1){const O={};a.forEach(N=>{O[N]=0}),h(O)}S.current=a.length},[a.length,a,e]),A.useEffect(()=>{const O=Object.values(f).reduce((N,C)=>N+(C||0),0);v(e-O),n(f)},[f,e,n]),A.useEffect(()=>{const O={...f};Object.keys(O).forEach(N=>{a.includes(N)||delete O[N]}),Object.keys(O).length!==Object.keys(f).length&&h(O)},[a,f]),A.useEffect(()=>{const O=u.current;if(!O)return;const N=()=>{const{scrollTop:C,scrollHeight:I,clientHeight:R}=O;C===0?O.scrollTop=1:C+R>=I&&(O.scrollTop=I-R-1)};return O.addEventListener("touchstart",N,{passive:!0}),()=>O.removeEventListener("touchstart",N)},[]);const T=()=>{s([]),h({})},P=Math.abs(g)<.01&&a.length>0,D=a.length>0&&Math.abs(g)>.01;return m.jsxs("div",{className:"space-y-3",children:[a.length>1&&m.jsxs("div",{className:`p-3 rounded-lg ${D?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":P?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),m.jsxs("span",{className:`font-bold text-lg ${D?"text-red-600 dark:text-red-400":P?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",g.toFixed(2)]})]}),D&&m.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:a.length>1?"Split Across Envelopes":"Select Envelope"}),a.length>0&&m.jsx("button",{type:"button",onClick:T,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),m.jsx("div",{ref:u,className:"max-h-72 overflow-y-auto rounded-lg border border-gray-200 dark:border-zinc-800 overscroll-contain",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:b.map(O=>m.jsxs("div",{children:[m.jsx("div",{className:"sticky top-0 z-10 px-3 py-1.5 bg-gray-100 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:m.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:O.name})}),O.envelopes.map(N=>{const C=a.includes(N.id);return m.jsxs("div",{onClick:()=>x(N.id),className:`flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 transition-colors cursor-pointer active:bg-gray-100 dark:active:bg-zinc-700 ${C?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 transition-colors ${C?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-zinc-600"}`,children:C&&m.jsx(aD,{size:14,className:"text-white",strokeWidth:3})}),m.jsx("span",{className:`flex-1 text-sm ${C?"text-blue-900 dark:text-blue-100 font-medium":"text-gray-900 dark:text-white"}`,children:N.name}),C&&a.length>1&&m.jsxs("div",{className:"flex items-center",onClick:I=>I.stopPropagation(),children:[m.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400 text-sm",children:"$"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:f[N.id]||"",onChange:I=>w(N.id,parseFloat(I.target.value)||0),className:"w-24 px-2 py-1 text-sm border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},N.id)})]},O.id))})]})},WY=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:u}=bt(),[f,h]=A.useState(""),[g,v]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(new Date().toISOString().split("T")[0]),[T,P]=A.useState(null),[D,O]=A.useState(null),[N,C]=A.useState({}),I=a?[...a].filter(z=>z.isActive!==!1).sort((z,W)=>{const Q=z.orderIndex??0,G=W.orderIndex??0;return Q!==G?Q-G:z.name.localeCompare(W.name)}):[];A.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),v(i.merchant||""),x(i.description),P(i.paymentMethod||null),a){const z=a.find(W=>W.id===i.envelopeId);O(z||r),C({[i.envelopeId]:i.amount})}try{const z=new Date(i.date);isNaN(z.getTime())?($.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(z.toISOString().split("T")[0])}catch(z){$.error("Error parsing transaction date:",z),S(new Date().toISOString().split("T")[0])}}else h(""),v(""),x(""),S(new Date().toISOString().split("T")[0]),O(r),C({})},[t,n,i,r,a]);const R=async z=>{z.preventDefault();const W=parseFloat(f);if(isNaN(W)||W<=0){$.log(" Invalid amount:",f);return}const Q=n==="edit"&&Object.keys(N).length>0;$.log(" Saving transaction:",{mode:n,amount:W,note:b,date:w,splitAmounts:N,paymentMethod:T});try{const G=new Date(w),Y=`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}`;if(Y!==u){const J=`This transaction date (${Y}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(J))return}n==="add"?($.log(" Adding income transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(D||r).id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?($.log(" Adding expense transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(D||r).id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&($.log(" Updating transaction"),Q?await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(N)[0]||i.envelopeId,paymentMethod:T||void 0}):await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(D||r).id,paymentMethod:T||void 0})),$.log(" Transaction saved successfully"),e()}catch(G){$.error(" Error saving transaction:",G),alert("Failed to save transaction: "+(G instanceof Error?G.message:"Unknown error"))}},j=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},B=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",L=n==="add"?"text-green-500":"text-red-500";return m.jsx(fr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(xt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:B}),m.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),m.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${L}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:z=>{const W=z.target.value.replace(/\D/g,"");if(!W){h("");return}const G=(parseInt(W,10)/100).toFixed(2);h(G)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${L} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:g,onChange:z=>v(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&m.jsx(HY,{selectedCard:T,onCardSelect:P}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:b,onChange:z=>x(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const z=new Date(w);return`${z.getFullYear()}-${(z.getMonth()+1).toString().padStart(2,"0")}`!==u?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Ad,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:w,onChange:z=>{$.log("Date changed to:",z.target.value),S(z.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(KY,{envelopes:I,transactionAmount:parseFloat(f)||0,onSplitChange:C,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&m.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:m.jsxs("button",{type:"button",onClick:j,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[m.jsx(vq,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},e_e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=bt(),[a,s]=A.useState(""),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),v=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const S=parseFloat(o);isNaN(S)||S<=0||!a||(i(n.id,a,S,u,new Date(h)),e())},x=r.find(w=>w.id===a);return m.jsx(fr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(xt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),m.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),m.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),m.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[m.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),v.map(w=>m.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const S=w.target.value.replace(/\D/g,"");if(!S){c("");return}const P=(parseInt(S,10)/100).toFixed(2);c(P)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),m.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),m.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&m.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",m.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},t_e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,v]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,S]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),v(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),v("piggy-bank"),x(!1))},[r,t]);const T=async D=>{if(D.preventDefault(),!(!i.trim()||!c)){S(!0);try{const O={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(O.piggybankConfig.targetAmount=parseFloat(s)),r&&(O.id=r.id,O.currentBalance=r.currentBalance,O.lastUpdated=new Date().toISOString(),O.isActive=r.isActive,O.orderIndex=r.orderIndex,O.userId=r.userId),await n(O),e()}catch(O){$.error("Error saving piggybank:",O),alert("Failed to save piggybank")}finally{S(!1)}}},P=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return m.jsx(fr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsxs(xt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:m.jsx(cf,{size:20,className:"text-blue-600 dark:text-blue-400"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:m.jsx(S0,{size:24})})]}),m.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),m.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:D=>a(D.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:D=>{const O=D.target.value.replace(/\D/g,"");if(!O){u("");return}const C=(parseInt(O,10)/100).toFixed(2);u(C)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:D=>{const O=D.target.value.replace(/\D/g,"");if(!O){o("");return}const C=(parseInt(O,10)/100).toFixed(2);o(C)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsx("div",{className:"space-y-2",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:b,onChange:D=>x(D.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:P.map(D=>m.jsx("button",{type:"button",onClick:()=>h(D.value),className:`w-full aspect-square rounded-lg transition-all ${f===D.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:D.value},title:D.label},D.value))})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},n_e=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return $.error("Date error:",e),"Error"}},r_e=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},YY=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;$.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),m.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[m.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&m.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&m.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),m.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[m.jsx("span",{children:n_e(t.date)}),e&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),m.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",r_e(t.amount)]}),n?m.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?m.jsx(oo,{className:"text-green-500",size:20}):m.jsx($L,{className:"text-gray-400",size:20})}):m.jsx("span",{children:t.reconciled?m.jsx(oo,{className:"text-green-500",size:20}):m.jsx($L,{className:"text-gray-400",size:20})})]})]})},bk=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),i_e=()=>{const{id:t}=Roe(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:v,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w,fetchTransactionsForEnvelope:S}=bt(),{showToast:T}=vu(),P=Qa(),D=Rs(),[O,N]=A.useState(!1),[C,I]=A.useState(!1),[R,j]=A.useState(!1),[B,L]=A.useState(null),[z,W]=A.useState(!1),[Q,G]=A.useState(!1),[Y,J]=A.useState(""),ie=A.useRef(null),X=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const U=e.find(te=>te.id===t);A.useEffect(()=>{U?.isPiggybank&&U.id&&S(U.id)},[U?.isPiggybank,U?.id,S]);const Z=async te=>{if(U)try{const Pe={...U,...te,id:U.id,userId:U.userId,currentBalance:U.currentBalance,lastUpdated:new Date().toISOString(),isActive:U.isActive,orderIndex:U.orderIndex};await w(Pe),T("Piggybank updated successfully","success"),W(!1)}catch(Pe){$.error("Failed to update piggybank:",Pe),T("Failed to update piggybank","error")}},ee=U?.isPiggybank?U.piggybankConfig?.monthlyContribution||0:g[h]?.find(te=>te.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{Q&&(J(ee.toString()),setTimeout(()=>{ie.current?.focus(),ie.current?.select()},50))},[Q,ee]);const K=te=>{const Pe=(v[h]||[]).reduce((Oe,Ye)=>Oe+Ye.amount,0),be=g[h]||[];let De=be.map(Oe=>U&&Oe.envelopeId===U.id&&te!==void 0?{...Oe,budgetedAmount:te}:Oe).filter(Oe=>{const Ye=e.find(Ve=>Ve.id===Oe.envelopeId);return Ye?Ye.isActive!==!1:!1}).reduce((Oe,Ye)=>Oe+Ye.budgetedAmount,0);return te!==void 0&&U&&(be.some(Ye=>Ye.envelopeId===U.id)||(De+=te)),Pe-De},ne=Q?K(parseFloat(Y)||0):K(),oe=async()=>{if(!U||X.current)return;const te=parseFloat(Y);if(isNaN(te)||te<0){T("Please enter a valid positive number","error");return}X.current=!0;try{U.isPiggybank?await x(U.id,te):await b(U.id,te),G(!1)}catch(Pe){$.error("Failed to save budget:",Pe),T("Failed to update budget","error")}finally{X.current=!1}};if(!U)return i?m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Loading envelope..."})}):m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Envelope not found."})});const Se=n.filter(te=>te.envelopeId===U.id).filter(te=>{if(te.description==="Budgeted"||te.description==="Piggybank Contribution")return!1;if(U.isPiggybank){if(!U.createdAt)return!0;const Pe=g1(U.createdAt).toISOString().split("T")[0];return g1(te.date).toISOString().split("T")[0]>=Pe}return te.month===h||!te.month}).sort((te,Pe)=>new Date(Pe.date).getTime()-new Date(te.date).getTime()),se=()=>{D.state?.fromGlobalFAB?P("/"):P(-1)},Ae=()=>{t&&(a(t),P(-1))},ve=te=>{const Pe={...te,reconciled:!te.reconciled};o(Pe)};return m.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[m.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[m.jsx("button",{onClick:()=>{if(U.isPiggybank)W(!0);else{const te=prompt("Rename envelope:",U.name);te&&te.trim()&&t&&s(t,te)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:U.isPiggybank?"Edit":"Rename"}),m.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.name}),m.jsx("button",{onClick:se,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),m.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const te=U.isPiggybank?f(U.id):f(U.id,h);return m.jsx("span",{className:`text-xl font-bold ${te<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:bk(te)})})()]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:U.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Q?m.jsx("form",{onSubmit:te=>{te.preventDefault(),oe()},className:"flex items-center gap-2",children:m.jsx("input",{ref:ie,type:"number",step:"0.01",value:Y,onChange:te=>J(te.target.value),onBlur:oe,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):m.jsx("div",{onClick:()=>G(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:m.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:bk(ee)})})]}),m.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${ne<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":ne===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[m.jsx("span",{children:"Left to Budget:"}),m.jsx("span",{children:bk(ne)})]})]})]}),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>N(!0),children:[m.jsx(rce,{className:"w-5 h-5 mr-3"}),"Add Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>I(!0),children:[m.jsx(tce,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>j(!0),children:[m.jsx(zle,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),m.jsxs("section",{className:"mt-6",children:[m.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:Se.length===0?m.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):m.jsx(fr,{initial:!1,mode:"popLayout",children:Se.map(te=>m.jsx(xt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(d_,{disabled:te.isAutomatic,onDelete:()=>{if(!te.id)return;const Pe={...te};c(te.id),T("Transaction deleted","neutral",()=>u(Pe))},children:m.jsx(YY,{transaction:te,onReconcile:()=>ve(te),onEdit:()=>{te.isAutomatic||L(te)}})})},te.id))})})]}),m.jsx("div",{className:"mt-8",children:m.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const te=U.isPiggybank?`Are you sure you want to delete "${U.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${U.name}" from ${h}? This will delete all transactions for this month only.`;confirm(te)&&Ae()},children:[m.jsx(vq,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),m.jsx(WY,{isVisible:O||C||!!B,onClose:()=>{N(!1),I(!1),L(null)},mode:O?"add":C?"spend":"edit",currentEnvelope:U,initialTransaction:B}),m.jsx(e_e,{isVisible:R,onClose:()=>j(!1),sourceEnvelope:U}),m.jsx(t_e,{isOpen:z,onClose:()=>W(!1),onSave:Z,existingPiggybank:U})]})},a_e=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),v=w=>{const[S,T]=w.split("-");return new Date(parseInt(S),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return m.jsx(fr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(xt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",v(r)]}),m.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),m.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),m.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:m.jsxs("ul",{className:"space-y-1",children:[m.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),m.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),m.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[m.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:m.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",m.jsx("strong",{children:v(r)})," will be permanently removed."]})]})}),m.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),m.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},s_e=({isOpen:t,onClose:e})=>{const[n,r]=A.useState([]),[i,a]=A.useState({level:void 0,source:"",search:""}),[s,o]=A.useState(!1),[c,u]=A.useState(!0);A.useEffect(()=>{if(t)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[t]),A.useEffect(()=>In.subscribe(T=>{r(T),c&&setTimeout(()=>{const P=document.getElementById("log-container");P&&(P.scrollTop=P.scrollHeight)},100)}),[c]);const f=A.useMemo(()=>In.getLogs({level:i.level,source:i.source||void 0,search:i.search||void 0}),[n,i]),h=A.useMemo(()=>{const S=new Set;return n.forEach(T=>S.add(T.source)),Array.from(S).sort()},[n]),g=A.useMemo(()=>In.getStats(),[n]),v=S=>new Date(S).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),b=S=>{switch(S){case Vi.DEBUG:return{icon:Fle,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"};case Vi.INFO:return{icon:qL,color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900"};case Vi.WARN:return{icon:Ad,color:"text-yellow-500",bgColor:"bg-yellow-100 dark:bg-yellow-900"};case Vi.ERROR:return{icon:Jle,color:"text-red-500",bgColor:"bg-red-100 dark:bg-red-900"};default:return{icon:qL,color:"text-gray-500",bgColor:"bg-gray-100 dark:bg-gray-800"}}},x=()=>{In.downloadLogs({level:i.level,source:i.source||void 0,search:i.search||void 0})},w=()=>{In.clearLogs()};return t?m.jsx(fr,{children:m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:e,children:m.jsxs(xt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-gray-200 dark:border-zinc-800 overscroll-contain",onClick:S=>S.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Real-time Logs"}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-zinc-400",children:[m.jsx(lce,{className:"w-4 h-4"}),m.jsxs("span",{children:[g.total," entries"]}),m.jsx("span",{children:""}),m.jsxs("span",{children:["Session: ",Math.floor(g.sessionDuration/1e3),"s"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>u(!c),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${c?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-zinc-800 dark:text-zinc-300"}`,children:"Auto-scroll"}),m.jsx("button",{onClick:x,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Export logs",children:m.jsx(cI,{className:"w-4 h-4"})}),m.jsx("button",{onClick:w,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",title:"Clear logs",children:m.jsx(_v,{className:"w-4 h-4"})}),m.jsx("button",{onClick:e,className:"p-2 text-gray-600 dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:m.jsx(S0,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("button",{onClick:()=>o(!s),className:"w-full px-4 py-3 flex items-center justify-between text-sm text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(pq,{className:"w-4 h-4"}),m.jsx("span",{children:"Filters"}),(i.level!==void 0||i.source||i.search)&&m.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 rounded-full text-xs",children:"Active"})]}),m.jsx(Wle,{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`})]}),m.jsx(fr,{children:s&&m.jsxs(xt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Level"}),m.jsxs("select",{value:i.level??"",onChange:S=>a(T=>({...T,level:S.target.value?Number(S.target.value):void 0})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Levels"}),m.jsx("option",{value:Vi.DEBUG,children:"Debug"}),m.jsx("option",{value:Vi.INFO,children:"Info"}),m.jsx("option",{value:Vi.WARN,children:"Warning"}),m.jsx("option",{value:Vi.ERROR,children:"Error"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Source"}),m.jsxs("select",{value:i.source,onChange:S=>a(T=>({...T,source:S.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white",children:[m.jsx("option",{value:"",children:"All Sources"}),h.map(S=>m.jsx("option",{value:S,children:S},S))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Search"}),m.jsxs("div",{className:"relative",children:[m.jsx(gq,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),m.jsx("input",{type:"text",value:i.search,onChange:S=>a(T=>({...T,search:S.target.value})),placeholder:"Search messages...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-400"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-zinc-400",children:[m.jsxs("span",{children:["Debug: ",g.byLevel.DEBUG||0]}),m.jsxs("span",{children:["Info: ",g.byLevel.INFO||0]}),m.jsxs("span",{children:["Warn: ",g.byLevel.WARN||0]}),m.jsxs("span",{children:["Error: ",g.byLevel.ERROR||0]})]})]})})]}),m.jsx("div",{id:"log-container",className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-sm overscroll-contain touch-pan-y",style:{maxHeight:"calc(90vh - 280px)"},children:f.length===0?m.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-zinc-400",children:n.length===0?"No logs yet":"No logs match current filters"}):f.map(S=>{const T=b(S.level),P=T.icon;return m.jsxs(xt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`flex items-start gap-3 p-2 rounded-lg ${T.bgColor} hover:opacity-80 transition-opacity`,children:[m.jsx(P,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${T.color}`}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:v(S.timestamp)}),m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:S.source}),S.userId&&m.jsx("div",{className:"w-3 h-3 text-gray-400 flex items-center justify-center",title:`User: ${S.userId}`,children:m.jsx(lue,{className:"w-3 h-3"})})]}),m.jsx("div",{className:"text-gray-900 dark:text-white break-words",children:S.message}),S.data&&m.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-zinc-400 bg-black/5 dark:bg-white/5 p-2 rounded overflow-x-auto",children:m.jsx("pre",{children:JSON.stringify(S.data,null,2)})})]})]},S.id)})})]})})}):null},o_e=()=>{const t=Qa(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:v,clearMonthData:b,handleUserLogout:x,resetOnboarding:w,resetGuidedTutorial:S}=bt(),{deleteAccount:T,currentUser:P,logout:D}=rn(),[O,N]=A.useState(null),[C,I]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[R,j]=A.useState(!1),[B,L]=A.useState(""),[z,W]=A.useState(!1),[Q,G]=A.useState(!1),[Y,J]=A.useState(null),[ie,X]=A.useState(!1),[U,Z]=A.useState(!1),[ee,K]=A.useState(!1),[ue,ne]=A.useState(null),oe=()=>{const ze=window.setTimeout(()=>{K(!0),In.info("Settings","Log viewer opened via long press")},500);ne(ze)},Se=()=>{ue&&(clearTimeout(ue),ne(null))},se=ze=>{ze.preventDefault();const wt=window.setTimeout(()=>{K(!0),In.info("Settings","Log viewer opened via long press (mobile)")},500);ne(wt)},Ae=ze=>{ze.preventDefault(),ue&&(clearTimeout(ue),ne(null))},ve=()=>{K(!0),In.info("Settings","Log viewer opened via double click")},te=978307200,Pe=c?.theme??"system",be=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(ze=>{In.error("Settings","Failed to initialize app settings",{error:ze})})},[f,c]);const _e=(ze,wt)=>{N({type:ze,text:wt}),setTimeout(()=>N(null),3500)},De=A.useMemo(()=>{const ze=n.length,wt=r.length,Ir=v?g[v]||[]:[],Mn=Object.values(h).reduce((ni,hn)=>ni+hn.length,0),kn=Ir.length,dn=n.reduce((ni,hn)=>{const pr=hn.isPiggybank?o(hn.id):o(hn.id,v);return ni+(typeof pr=="number"?pr:0)},0),Mt=0,fn=r.reduce((ni,hn)=>{let pr=0;if(typeof hn.date=="string"){const ut=Date.parse(hn.date);pr=Number.isNaN(ut)?0:ut}else typeof hn.date=="number"&&(pr=hn.date<2e9?(hn.date+te)*1e3:hn.date);return Math.max(ni,pr)},0),at=Mt||fn?new Date(Math.max(Mt,fn)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:ze,transactionCount:wt,incomeSourceCount:Mn,allocationCount:kn,totalBalance:dn,lastUpdated:at}},[n,r,h,g,v]),Oe=()=>{try{In.info("Settings","Creating backup...");const ze={appVersion:"1.10.4",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(dn=>({...dn,currentBalance:(()=>{const Mt=dn.isPiggybank?o(dn.id):o(dn.id,v);return typeof Mt=="number"?Mt:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},wt=new Blob([JSON.stringify(ze,null,2)],{type:"application/json"}),Ir=URL.createObjectURL(wt),Mn=document.createElement("a");Mn.href=Ir,Mn.download=`budgetBackup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Mn),Mn.click(),document.body.removeChild(Mn),URL.revokeObjectURL(Ir);const kn=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",kn),I(kn),J({success:!0,message:"Backup downloaded successfully."})}catch(ze){In.error("Settings","Backup creation failed",{error:ze}),J({success:!1,message:"Failed to create backup file.",onRetry:Oe})}},Ye=()=>{G(!0),J(null);try{const ze=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],wt=r.filter(at=>at.description!=="Budgeted"&&at.description!=="Piggybank Contribution"),Ir=new Set,Mn=[];for(const at of wt){let ni,hn,pr;if(at.splitGroupId&&!Ir.has(at.splitGroupId)){Ir.add(at.splitGroupId);const Cn=wt.filter(es=>es.splitGroupId===at.splitGroupId);ni=Cn.reduce((es,Gl)=>es+Gl.amount,0),hn=Cn.map(es=>n.find(Gl=>Gl.id===es.envelopeId)?.name||"Unknown").join(", "),pr=Cn.every(es=>es.reconciled)}else{if(at.splitGroupId&&Ir.has(at.splitGroupId))continue;ni=at.amount,hn=n.find(Cn=>Cn.id===at.envelopeId)?.name||"Unknown",pr=at.reconciled}const ut=(at.merchant||"").replace(/"/g,'""'),pn=(at.description||"").replace(/"/g,'""');let on="";at.paymentMethod&&(on=`${at.paymentMethod.name} (...${at.paymentMethod.last4})`);const mi=on.replace(/"/g,'""');let ri="Invalid Date";if(at.date){if(typeof at.date=="string")ri=at.date.split("T")[0];else if(typeof at.date=="number"){const Cn=at.date<2e9?(at.date+te)*1e3:at.date;ri=new Date(Cn).toISOString().split("T")[0]}}Mn.push([ri,`"${ut}"`,`"${mi}"`,`"${pn}"`,ni.toFixed(2),at.type,`"${hn}"`,pr?"Yes":"No"].join(","))}const kn=[ze.join(","),...Mn].join(`
`),dn=new Blob([kn],{type:"text/csv;charset=utf-8;"}),Mt=URL.createObjectURL(dn),fn=document.createElement("a");fn.href=Mt,fn.download=`budgetTransactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(fn),fn.click(),document.body.removeChild(fn),URL.revokeObjectURL(Mt),J({success:!0,message:"Transactions CSV exported successfully."})}catch(ze){In.error("Settings","CSV export failed",{error:ze}),J({success:!1,message:"Failed to export CSV. Please try again.",onRetry:Ye})}finally{G(!1)}},Ve=()=>{e.current?.click()},it=ze=>{const wt=ze.target.files?.[0];if(!wt)return;const Ir=new FileReader;Ir.onload=async Mn=>{try{const kn=JSON.parse(Mn.target?.result),dn=await s(kn);if(!dn.success){_e("error",dn.message);return}if(kn.appSettings?.theme)try{await u({theme:kn.appSettings.theme})}catch(Mt){In.error("Settings","Failed to update imported settings",{error:Mt})}_e("success",`Loaded ${kn.envelopes?.length??0} envelopes, ${kn.transactions?.length??0} transactions.`)}catch(kn){In.error("Settings","Import failed",{error:kn}),_e("error","Invalid backup file. Please verify the JSON.")}},Ir.readAsText(wt),ze.target.value=""},Ft=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),_e("success","All data has been permanently deleted."),t("/")}catch(ze){In.error("Settings","Reset failed",{error:ze}),_e("error","Failed to delete all data. Some data may remain.")}},Gn=async()=>{if(!B.trim()){_e("error","Please enter your password to confirm account deletion.");return}j(!0);try{await a(),await T(B)?_e("success","Your account has been permanently deleted."):_e("error","Failed to delete account. Please try again.")}catch(ze){In.error("Settings","Account deletion failed",{error:ze}),_e("error","Failed to delete account. Please try again.")}finally{j(!1),W(!1),L("")}},An=async()=>{if(!P){_e("error","You must be logged in to clean up data.");return}X(!0);try{const ze=await N2.cleanupOrphanedData(P.id),wt=ze.orphanedAllocationsDeleted+ze.orphanedTransactionsDeleted;wt>0?_e("success",`Cleaned ${wt} orphaned items: ${ze.orphanedAllocationsDeleted} allocations and ${ze.orphanedTransactionsDeleted} transactions.`):_e("success","No orphaned data found. Your database is already clean!")}catch(ze){In.error("Settings","Cleanup failed",{error:ze}),_e("error","Failed to clean up orphaned data. Please try again.")}finally{X(!1)}},yt=()=>{Z(!0)},Ut=async()=>{Z(!1),await b(v),_e("success","Month data has been reset.")},ei=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),D(),t("/")}catch(ze){In.error("Settings","Logout failed",{error:ze})}},ti=P?.displayName?.charAt(0)?.toUpperCase()||P?.email?.charAt(0)?.toUpperCase()||"U";return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[m.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),m.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[O&&m.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${O.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[O.type==="success"?m.jsx(Cw,{size:18}):m.jsx(_v,{size:18}),O.text]}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:ti}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:P?.displayName||P?.email?.split("@")[0]||"User"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:P?.email}),m.jsxs("button",{onClick:ei,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[m.jsx(Pce,{size:14})," Log Out"]})]})]})}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(cI,{className:"text-blue-500",size:22}),m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:De.envelopeCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:De.transactionCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:De.incomeSourceCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:De.allocationCount})]})]})]})}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:m.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),m.jsx(fs,{className:"text-gray-400",size:18})]})})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Pe==="light"&&m.jsx("span",{className:"text-orange-500 text-lg",children:""}),Pe==="dark"&&m.jsx("span",{className:"text-purple-500 text-lg",children:""}),Pe==="system"&&m.jsx("span",{className:"text-gray-500 text-lg",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Pe})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(ze=>m.jsx("button",{onClick:async()=>{try{await u({theme:ze.value})}catch(wt){In.error("Settings","Failed to update theme setting",{error:wt})}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${Pe===ze.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:ze.label},ze.value))})]}),m.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:be})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(ze=>m.jsx("button",{onClick:async()=>{try{await u({fontSize:ze.value})}catch(wt){In.error("Settings","Failed to update font size setting",{error:wt})}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${be===ze.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:m.jsx("span",{className:ze.sizeClass,children:ze.label})},ze.value))})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(qh,{className:"text-purple-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),m.jsx(fs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>{S(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(qh,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Guided Tutorial"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Walk through the hands-on setup again"})]})]}),m.jsx(fs,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:Oe,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(cI,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),m.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",C]})]})]}),m.jsx(fs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Ve,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(iue,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),m.jsx(fs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Ye,disabled:Q,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Q?m.jsx(GL,{className:"text-blue-500 animate-spin",size:20}):m.jsx(mce,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Q?"Preparing CSV":"Export Transactions (CSV)"})]}),m.jsx(fs,{className:"text-gray-400",size:18})]}),m.jsx("input",{type:"file",ref:e,onChange:it,accept:".json",className:"hidden"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[m.jsxs("button",{onClick:yt,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(tp,{className:"text-orange-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),m.jsx(fs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:An,disabled:ie,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[ie?m.jsx(GL,{className:"text-yellow-500 animate-spin",size:20}):m.jsx(qh,{className:"text-yellow-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:ie?"Cleaning Data...":"Purge Orphaned Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),m.jsx(fs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Ft,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(_v,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),m.jsx(fs,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>W(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Ad,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),m.jsx(fs,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:m.jsxs("div",{className:"p-4",children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),m.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),_e("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:m.jsx("div",{className:"flex items-center gap-1",children:m.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),m.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const ze=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:ze}),_e("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:m.jsx(tp,{size:20})})]}):m.jsx("button",{onClick:async()=>{const ze=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:ze}),_e("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),m.jsx("div",{className:"text-center py-4",children:m.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500 cursor-pointer select-none hover:text-gray-300 dark:hover:text-zinc-400 transition-colors",onMouseDown:oe,onMouseUp:Se,onMouseLeave:Se,onTouchStart:se,onTouchEnd:Ae,onTouchCancel:Ae,onDoubleClick:ve,title:"Long press or double-click to view logs",children:["Version ","1.10.4"," (PWA)"]})}),Y&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Y.success?m.jsx(Cw,{className:"text-green-500",size:24}):m.jsx(Ad,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Y.success?"Success":"Error"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:Y.message}),m.jsxs("div",{className:"flex gap-2",children:[Y.onRetry&&m.jsx("button",{onClick:()=>{J(null),Y.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),m.jsx("button",{onClick:()=>J(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),m.jsx(a_e,{isVisible:U,onClose:()=>Z(!1),onConfirm:Ut,currentMonth:v,incomeCount:(h[v]||[]).length,totalIncome:(h[v]||[]).reduce((ze,wt)=>ze+wt.amount,0),allocationCount:(g[v]||[]).filter(ze=>n.some(wt=>wt.id===ze.envelopeId)).length,totalAllocated:(g[v]||[]).filter(ze=>n.some(wt=>wt.id===ze.envelopeId)).reduce((ze,wt)=>ze+wt.budgetedAmount,0),transactionCount:r.filter(ze=>ze.month===v).length,totalTransactionAmount:r.filter(ze=>ze.month===v).reduce((ze,wt)=>ze+wt.amount,0)}),z&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(Ad,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),m.jsx("input",{type:"password",value:B,onChange:ze=>L(ze.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{W(!1),L("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:Gn,disabled:R||!B.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Deleting...":"Delete Account"})]})]})}),m.jsx(s_e,{isOpen:ee,onClose:()=>K(!1)})]})]})},l_e=({category:t,isBeingDragged:e,isEditing:n,editName:r,setEditName:i,handleUpdate:a,setEditingId:s,handleDelete:o,handleLongPressTrigger:c,setMoveableRef:u})=>{const f=P2(h=>{c(h,t.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch});return m.jsx("div",{...f(),ref:u(t.id),style:{cursor:e?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:n?m.jsxs("div",{className:"flex-1 flex gap-2",children:[m.jsx("input",{type:"text",value:r,onChange:h=>i(h.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{onClick:()=>a(t.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),m.jsx("button",{onClick:()=>s(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:h=>c(h,t.id),children:m.jsx(ep,{size:20})}),m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.name})]}),m.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>{s(t.id),i(t.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:m.jsx(jce,{size:18})}),m.jsx("button",{onClick:()=>o(t.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:m.jsx(_v,{size:18})})]})]})})},c_e=()=>{const t=Qa(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=bt(),{showToast:s}=vu(),[o,c]=A.useState(!1),[u,f]=A.useState(""),[h,g]=A.useState(null),[v,b]=A.useState(""),[x,w]=A.useState(e),S=A.useRef(e),[T,P]=A.useState(!1),[D,O]=A.useState(null),N=A.useRef(!1),C=A.useRef(null),I=A.useRef({}),R=A.useRef({}),j=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),S.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const B=A.useCallback((ie,X)=>{$.log(" Long press triggered for category:",X);const U=R.current[X];if(U){$.log(" Moveable instance found, starting drag"),N.current=!0;const Z=ie.nativeEvent||ie;U.dragStart(Z)}else $.log(" No moveable instance found for:",X)},[]),L=A.useCallback(ie=>X=>{X?I.current[ie]=X:delete I.current[ie]},[]),z=async ie=>{if(ie.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(X){$.error(X),s("Failed to add category","error")}},W=async ie=>{if(!v.trim())return;const X=e.find(U=>U.id===ie);if(X)try{await r({...X,name:v.trim()}),g(null),s("Category updated","success")}catch(U){$.error(U),s("Failed to update category","error")}},Q=async ie=>{if(e.length<=1){s("Cannot delete the last category","error");return}if(confirm('Are you sure? Envelopes in this category will be moved to "Uncategorized".'))try{await i(ie),s("Category deleted","success")}catch(X){$.error(X),s("Failed to delete category","error")}},G=8,Y=(ie,X,U)=>Math.max(X,Math.min(U,ie)),J=A.useCallback(async ie=>{if(!ie.length)return;const X=ie.map(U=>U.id);try{await a(X)}catch(U){$.error("Failed to persist category order:",U),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const ie=()=>{Object.values(R.current).forEach(Z=>Z?.destroy()),R.current={}};if(!x.length)return;const X=()=>{x.forEach(Z=>{const ee=I.current[Z.id];if(!ee||!C.current)return;const K=new FY(C.current,{target:ee,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});K.on("dragStart",ne=>{if($.log(" Moveable dragStart event",{isManualDrag:N.current,categoryId:Z.id}),!N.current){$.log(" Stopping drag - not manual"),ne.stop();return}const oe=ne.inputEvent.target;if(oe.tagName==="INPUT"||oe.tagName==="BUTTON"||oe.closest("button")){$.log(" Stopping drag - clicked on button/input"),ne.stop();return}$.log(" Drag starting for category:",Z.id);const Se=S.current.findIndex(ve=>ve.id===Z.id),se=ne.target,Ae=se.getBoundingClientRect();O(Z.id),j.current={activeId:Z.id,startIndex:Se,currentIndex:Se,itemHeight:Ae.height+G},se.style.transition="none",se.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",se.style.zIndex="20",P(!0)});let ue=null;K.on("drag",ne=>{const oe=ne.target;ue!==null&&cancelAnimationFrame(ue),ue=requestAnimationFrame(()=>{const Se=j.current;if(Se.activeId!==Z.id)return;const se=ne.beforeTranslate[1];oe.style.transform=`translateY(${se}px)`,oe.style.transition="none";const{itemHeight:Ae,startIndex:ve}=Se,te=Math.round(se/Ae),Pe=Y(ve+te,0,S.current.length-1);Pe!==Se.currentIndex&&(Se.currentIndex=Pe,S.current.forEach((be,_e)=>{if(be.id===Z.id)return;const De=I.current[be.id];if(!De)return;let Oe=0;ve<Pe&&_e>ve&&_e<=Pe?Oe=-Ae:ve>Pe&&_e>=Pe&&_e<ve&&(Oe=Ae),De.style.transform=Oe?`translateY(${Oe}px)`:"",De.style.transition="transform 0.2s ease"})),ue=null})}),K.on("dragEnd",ne=>{ue!==null&&(cancelAnimationFrame(ue),ue=null);const oe=ne.target,{startIndex:Se,currentIndex:se}=j.current;if(oe.style.transform="",oe.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",oe.style.boxShadow="",S.current.forEach(Ae=>{const ve=I.current[Ae.id];ve&&(ve.style.transform="",ve.style.transition="")}),Se!==se){const Ae=[...S.current],[ve]=Ae.splice(Se,1);Ae.splice(se,0,ve),S.current=Ae,w(Ae),J(Ae)}setTimeout(()=>{oe.style.zIndex="",O(null),P(!1),N.current=!1},300)}),R.current[Z.id]=K})},U=window.setTimeout(X,80);return()=>{clearTimeout(U),ie()}},[x,J]),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[m.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(_l,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),m.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?m.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:u,onChange:ie=>f(ie.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),m.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):m.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[m.jsx(uf,{size:20}),"Add Category"]})}),m.jsxs("div",{ref:C,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(ie=>m.jsx(l_e,{category:ie,isBeingDragged:D===ie.id,isEditing:h===ie.id,editName:v,setEditName:b,handleUpdate:W,setEditingId:g,handleDelete:Q,handleLongPressTrigger:B,setMoveableRef:L},ie.id)),x.length===0&&!o&&m.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},u_e=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=bt(),{showToast:a}=vu(),s=Qa(),[o]=lq();al.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,v]=A.useState(o.get("categoryId")||"");al.useEffect(()=>{if(!o.get("categoryId")&&r.length>0&&!g){const C=r.find(I=>I.isDefault);C&&v(C.id)}},[r,o,g]);const[b,x]=A.useState(""),[w,S]=A.useState(""),[T,P]=A.useState("#3B82F6"),[D,O]=A.useState(!1),N=async C=>{if(C.preventDefault(),!c.trim()||D)return;O(!0);const I=bt.getState().envelopes,j=(I.length>0?Math.max(...I.map(W=>W.orderIndex??0)):-1)+1,B=f?new Date(`${n}-01T00:00:00`):new Date,L={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:B.toISOString(),isActive:!0,orderIndex:j,categoryId:g||void 0};if(f){L.isPiggybank=!0;const W={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(W.targetAmount=parseFloat(b)),L.piggybankConfig=W}t(L).then(W=>{if(W){const Q=f?parseFloat(w||"0"):0;e(W,Q).catch(G=>$.error("Failed to create allocation:",G)),setTimeout(()=>{s("/")},50)}}).catch(W=>{$.error("Failed to create envelope:",W),a(W.message||"Failed to create envelope","error"),O(!1)})};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(_l,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:m.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?m.jsx(cf,{size:40}):m.jsx(bce,{size:40})})}),m.jsxs("form",{onSubmit:N,className:"p-6 space-y-6 pb-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),m.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),m.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),m.jsx("select",{id:"category",value:g,onChange:C=>v(C.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:r.map(C=>m.jsx("option",{value:C.id,children:C.name},C.id))})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),m.jsx("input",{type:"text",id:"name",value:c,onChange:C=>u(C.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:C=>S(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"target-amount",value:b,onChange:C=>x(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(C=>m.jsx("button",{type:"button",onClick:()=>P(C.value),className:`w-full aspect-square rounded-lg transition-all ${T===C.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:C.value},title:C.label},C.value))})]})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||D,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!D?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:D?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const d_e="type.googleapis.com/google.protobuf.Int64Value",f_e="type.googleapis.com/google.protobuf.UInt64Value";function XY(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function m1(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>m1(e));if(typeof t=="function"||typeof t=="object")return XY(t,e=>m1(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Cp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case d_e:case f_e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Cp(e)):typeof t=="function"||typeof t=="object"?XY(t,e=>Cp(e)):t}const D2="functions";const $B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qi extends Do{constructor(e,n,r){super(`${D2}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,qi.prototype)}}function h_e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function v1(t,e){let n=h_e(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!$B[s])return new qi("internal","internal");n=$B[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=Cp(i))}}catch{}return n==="ok"?null:new qi(n,r,i)}class p_e{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,fa(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const LP="us-central1",g_e=/^data: (.*?)(?:\n|$)/;function m_e(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new qi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class v_e{constructor(e,n,r,i,a=LP,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new p_e(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=LP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function y_e(t,e,n){const r=uu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(UN(t.emulatorOrigin+"/backends"),Q9("Functions",!0))}function b_e(t,e,n){const r=i=>w_e(t,e,i,{});return r.stream=(i,a)=>__e(t,e,i,a),r}function QY(t){return t.emulatorOrigin&&uu(t.emulatorOrigin)?"include":void 0}async function x_e(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:QY(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function ZY(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function w_e(t,e,n,r){const i=t._url(e);return S_e(t,i,n,r)}async function S_e(t,e,n,r){n=m1(n);const i={data:n},a=await ZY(t,r),s=r.timeout||7e4,o=m_e(s),c=await Promise.race([x_e(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new qi("cancelled","Firebase Functions instance was deleted.");const u=v1(c.status,c.json);if(u)throw u;if(!c.json)throw new qi("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new qi("internal","Response is missing data field.");return{data:Cp(f)}}function __e(t,e,n,r){const i=t._url(e);return E_e(t,i,n,r||{})}async function E_e(t,e,n,r){n=m1(n);const i={data:n},a=await ZY(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:QY(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new qi("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const v=v1(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,c;const u=new Promise((g,v)=>{o=g,c=v});r?.signal?.addEventListener("abort",()=>{const g=new qi("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=T_e(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:v,done:b}=await g.read();return{value:v,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function T_e(t,e,n,r){const i=(s,o)=>{const c=s.match(g_e);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(Cp(f.result));return}if("message"in f){o.enqueue(Cp(f.message));return}if("error"in f){const h=v1(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof qi){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new qi("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new qi("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof qi?u:v1(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const qB="@firebase/functions",GB="0.13.1";const A_e="auth-internal",k_e="app-check-internal",C_e="messaging-internal";function I_e(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(A_e),s=n.getProvider(C_e),o=n.getProvider(k_e);return new v_e(i,a,s,o,r)};xl(new Eo(D2,e,"PUBLIC").setMultipleInstances(!0)),ws(qB,GB,t),ws(qB,GB,"esm2020")}function P_e(t=qN(),e=LP){const r=Vp(Vt(t),D2).getImmediate({identifier:e}),i=Jne("functions");return i&&N_e(r,...i),r}function N_e(t,e,n){y_e(Vt(t),e,n)}function D_e(t,e,n){return b_e(Vt(t),e)}I_e();function JY(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const v=s[1].trim();v.length>0&&v.length<60&&(n.paymentMethodName=v,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const v of c){const b=r.match(v);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const v=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(v){const b=parseFloat(v[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(v[0]," ").trim(),a++)}}const u=e.filter(v=>v.isActive!==!1);let f=null;for(const v of u){const b=v.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:v,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),S=b.split(/\s+/);for(const T of S)if(!(T.length<3)){for(const P of w)if(!(P.length<3)&&(P.startsWith(T.slice(0,-1))||T.startsWith(P.slice(0,-1)))){const D=Math.min(P.length,T.length)/Math.max(P.length,T.length);D>=.6&&(!f||D>f.score)&&(f={envelope:v,score:D})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const v=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(v," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function O_e(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{const a=F8().currentUser;$.log(" Siri: AI parsing request starting...",{user:a?a.email:"NOT_LOGGED_IN",isEmailVerified:a?.emailVerified}),$.log(" Siri: Calling Cloud Function to parse:",t);const s=P_e(),u=(await D_e(s,"parseTransaction")({text:t,userEnvelopes:r})).data;$.log(" Siri: Cloud Function response:",u);let f=null,h=u.envelope;if(u.envelope){const g=n.find(v=>v.name.toLowerCase()===u.envelope.toLowerCase());g&&(f=g.id,h=g.name)}return{amount:u.amount,merchant:u.merchant,envelope:h,envelopeId:f,description:u.description||t,paymentMethodName:u.paymentMethodName||null,type:u.type||"Expense",confidence:.9}}catch(i){return $.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),JY(t,e)}}function R_e(t,e){return $.log(" Siri: Parsing locally with regex:",t),JY(t,e)}function M_e(t){const e=[/ignore\s+previous\s+instructions/gi,/system\s*:/gi,/human\s*:/gi,/assistant\s*:/gi,/\[INST\]/gi,/\[/g,/\]/g,/\{/g,/\}/g];let n=t;return e.forEach(r=>{n=n.replace(r,"")}),n.length>500&&(n=n.substring(0,500)),n=n.trim(),n}async function VP(t,e){const n=M_e(t);return $.log(" Siri: parseSiriQuery called with text:",n),typeof navigator<"u"&&!navigator.onLine?($.log(" Siri: Offline  using local parser"),R_e(n,e)):($.log(" Siri: Online  attempting AI parsing"),O_e(n,e))}function j_e(){const[t,e]=lq(),{envelopes:n}=bt(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if($.log(" Siri: Hook checking URL params - query:",f),!f||f.trim().length===0){$.log(" Siri: No query parameter found"),c(null);return}$.log(" Siri: Found query parameter, parsing:",f),c(f),s(!0),VP(f,n).then(g=>{$.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{$.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n,VP]);const u=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const eX=({onClose:t,onSaved:e})=>{const n=Qa(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=bt(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=j_e(),h=()=>{const oe=sessionStorage.getItem("siriParsedData"),Se=sessionStorage.getItem("siriQuery");if(oe&&Se)try{const se=JSON.parse(oe);if($.log(" Siri: Loaded stored data from sessionStorage:",se),se.amount!==null&&v(se.amount.toFixed(2)),se.merchant&&x(se.merchant),se.description&&S(se.description),se.type&&R(se.type==="Income"?"income":"expense"),se.envelopeId&&Y(se.envelopeId),se.paymentMethodName&&s?.paymentSources?.length){const Ae=se.paymentMethodName.toLowerCase(),ve=s.paymentSources.find(te=>{const Pe=te.name.toLowerCase();return Pe===Ae||Pe.includes(Ae)||Ae.includes(Pe)});ve&&(z(ve),Q(!1))}P(!0),O(Se),$.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(se){$.error(" Siri: Failed to parse stored data:",se)}};A.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),A.useEffect(()=>{const oe=()=>{$.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",oe),()=>window.removeEventListener("siri-query-ready",oe)},[s?.paymentSources]);const[g,v]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,P]=A.useState(!1),[D,O]=A.useState(null),[N,C]=A.useState(()=>{const oe=new Date;return new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[I,R]=A.useState("expense"),[j,B]=A.useState({}),[L,z]=A.useState(null),[W,Q]=A.useState(!1),[G,Y]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&v(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&S(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&Y(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const oe=o.paymentMethodName.toLowerCase(),Se=s.paymentSources.find(se=>{const Ae=se.name.toLowerCase();return Ae===oe||Ae.includes(oe)||oe.includes(Ae)});Se&&(z(Se),Q(!1))}P(!0),$.log(" Siri: Pre-filled form with parsed data:",o)}},[o,T,s?.paymentSources]);const J=()=>{if(t){t();return}n("/")},ie=oe=>{z(oe),L&&Q(!0)},X=Object.keys(j).length>0,U=Object.values(j).reduce((oe,Se)=>oe+(Se||0),0),Z=Math.abs(U-parseFloat(g||"0"))<.01,ee=g&&parseFloat(g)>0&&X&&Z,K=async oe=>{if(oe.preventDefault(),!ee)return;const[Se,se,Ae]=N.split("-").map(Number),ve=new Date(Se,se-1,Ae,12,0,0);$.log(" Selected date:",N),$.log(" Parsed date:",ve.toISOString());try{const[te,Pe]=N.split("-").map(Number),be=`${te}-${Pe.toString().padStart(2,"0")}`;if(be!==a){const Oe=`This transaction date (${be}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Oe))return}const _e=Object.entries(j).filter(([Oe,Ye])=>Ye>0),De=_e.length>1?crypto.randomUUID():void 0;Promise.all(_e.map(([Oe,Ye])=>i({amount:Ye,description:w,merchant:b||void 0,date:ve.toISOString(),envelopeId:Oe,type:I==="income"?"Income":"Expense",reconciled:!1,paymentMethod:L||void 0,splitGroupId:De}).catch(Ve=>$.error("Failed to create transaction:",Ve)))).catch(Oe=>$.error("Failed to create transactions:",Oe)),e&&e(),t?t():n("/")}catch(te){$.error("Error saving transaction:",te),alert("Failed to save transaction: "+(te instanceof Error?te.message:"Unknown error"))}},ue=[...r].filter(oe=>oe.isActive!==!1).sort((oe,Se)=>{const se=oe.orderIndex??0,Ae=Se.orderIndex??0;return se!==Ae?se-Ae:oe.name.localeCompare(Se.name)}),ne=I==="income"?"text-green-500":"text-red-500";return m.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[m.jsx("button",{onClick:J,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),m.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),m.jsx("button",{onClick:K,disabled:!ee,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[m.jsx(KL,{size:18,className:"text-purple-500 animate-pulse"}),m.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(u||D)&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(KL,{size:14,className:"text-purple-500"}),m.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&m.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),m.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||D,'"']}),m.jsx("button",{type:"button",onClick:()=>{f(),P(!1),O(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:m.jsxs("form",{onSubmit:K,className:"space-y-6",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:m.jsxs("div",{className:"flex",children:[m.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${I==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),m.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${I==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${ne}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:oe=>{const Se=oe.target.value.replace(/\D/g,"");if(!Se){v("");return}const Ae=(parseInt(Se,10)/100).toFixed(2);v(Ae)},onKeyDown:oe=>{(oe.key==="e"||oe.key==="E"||oe.key==="+"||oe.key==="-")&&oe.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${ne} placeholder-gray-700`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:b,onChange:oe=>x(oe.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsx(HY,{selectedCard:L,onCardSelect:ie,isUserSelected:W}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:w,onChange:oe=>S(oe.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[oe,Se]=N.split("-").map(Number);return`${oe}-${Se.toString().padStart(2,"0")}`!==a?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Ad,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:N,onChange:oe=>C(oe.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(KY,{envelopes:ue,transactionAmount:parseFloat(g)||0,onSplitChange:B,initialSelectedEnvelopeId:G})})]})})]})},z_e=()=>{const t=Qa(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o,fetchAllTransactions:c,areAllTransactionsLoaded:u,isLoading:f}=bt(),{showToast:h}=vu(),[g,v]=A.useState(!1),[b,x]=A.useState(""),[w,S]=A.useState("all"),[T,P]=A.useState("All"),[D,O]=A.useState(!1),[N,C]=A.useState("all"),[I,R]=A.useState(!1),[j,B]=A.useState("all"),[L,z]=A.useState(!1),[W,Q]=A.useState(()=>{const K=new Date;return K.setMonth(K.getMonth()-1),K.toISOString().split("T")[0]}),[G,Y]=A.useState(()=>new Date().toISOString().split("T")[0]),[J,ie]=A.useState(null),X=A.useMemo(()=>{$.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:I,currentMonth:s,transactionMonths:e.map(ne=>({id:ne.id,month:ne.month,date:ne.date,description:ne.description}))});let K=e;return I||(K=e.filter(ne=>ne.month===s||!ne.month),$.log(" After month filter:",{remaining:K.length,currentMonth:s,filteredTransactions:K.map(ne=>({id:ne.id,description:ne.description,month:ne.month,matchesCurrentMonth:ne.month===s}))})),K.map(ne=>{if(!ne)return null;let oe=ne.date;if(typeof ne.date=="number"){const se=(ne.date+978307200)*1e3;oe=new Date(se).toISOString()}else if(!ne.date||typeof ne.date!="string")return null;return{...ne,date:oe}}).filter(Boolean).filter(ne=>{if(ne.description==="Budgeted"||ne.description==="Piggybank Contribution")return!1;if(b){const Se=b.toLowerCase(),se=n.find(te=>te.id===ne.envelopeId)?.name.toLowerCase()||"",Ae=ne.amount.toFixed(2);if(!(ne.description.toLowerCase().includes(Se)||se.includes(Se)||Ae.includes(Se)))return!1}if(w!=="all"&&ne.envelopeId!==w||T!=="All"&&ne.type!==T||j!=="all"&&(!ne.paymentMethod||ne.paymentMethod.id!==j)||!ne.date||typeof ne.date!="string")return!1;const oe=ne.date.split("T")[0];return!(L&&(oe<W||oe>G)||N!=="all"&&new Date(oe).getMonth()!==parseInt(N)||D&&!ne.reconciled)}).sort((ne,oe)=>new Date(oe.date).getTime()-new Date(ne.date).getTime())},[e,n,b,w,T,j,W,G,D,I,s,L]);$.log(" Final filtered transactions:",{count:X.length,transactions:X.map(K=>({id:K.id,description:K.description,amount:K.amount,date:K.date,month:K.month,type:K.type}))});const U=A.useMemo(()=>{const K=[],ue=new Set;for(const ne of X)if(ne.splitGroupId&&!ue.has(ne.splitGroupId)){ue.add(ne.splitGroupId);const oe=X.filter(Ae=>Ae.splitGroupId===ne.splitGroupId),Se=oe.reduce((Ae,ve)=>Ae+ve.amount,0),se=oe.map(Ae=>n.find(ve=>ve.id===Ae.envelopeId)?.name||"Unknown").join(", ");K.push({key:`split-${ne.splitGroupId}`,transaction:ne,totalAmount:Se,envelopeNames:se,splitTransactions:oe,isSplitGroup:!0})}else{if(ne.splitGroupId&&ue.has(ne.splitGroupId))continue;{const oe=n.find(Se=>Se.id===ne.envelopeId)?.name||"Unknown Envelope";K.push({key:ne.id,transaction:ne,totalAmount:ne.amount,envelopeNames:oe,splitTransactions:[ne],isSplitGroup:!1})}}return K},[X,n]),Z=J?n.find(K=>K.id===J.envelopeId):null,ee=K=>{const ue={...K,reconciled:!K.reconciled};r(ue)};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:m.jsx(_l,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),m.jsx("button",{onClick:()=>v(!g),className:`p-2 rounded-full transition-colors ${g?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:m.jsx(pq,{size:20,className:g?"fill-current":""})})]}),m.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),m.jsx("button",{onClick:()=>{const K=!I;R(K),K&&!u&&c()},disabled:f,className:`text-sm px-3 py-1 rounded-md transition-colors ${I?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"} ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Loading...":I?"Current Month Only":"All Time"})]}),m.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:m.jsxs("div",{className:"relative",children:[m.jsx(gq,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:K=>x(K.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),b&&m.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:m.jsx(S0,{size:16})})]})}),m.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${g?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),m.jsxs("select",{value:j,onChange:K=>B(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(K=>m.jsx("option",{value:K.id,children:K.name},K.id))]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),m.jsxs("select",{value:w,onChange:K=>S(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((K,ue)=>K.name.localeCompare(ue.name)).map(K=>m.jsx("option",{value:K.id,children:K.name},K.id))]})]}),m.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(K=>m.jsx("button",{onClick:()=>P(K),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${T===K?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:K},K))}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),m.jsxs("select",{value:N,onChange:K=>C(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(K,ue)=>ue).map(K=>m.jsx("option",{value:K,children:new Date(2022,K).toLocaleString("default",{month:"long"})},K))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),m.jsx("button",{onClick:()=>z(!L),className:`w-9 h-5 rounded-full transition-colors relative ${L?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${L?"translate-x-4":"translate-x-0"}`})})]})]}),m.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${L?"opacity-100":"opacity-50 pointer-events-none"}`,children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:W,onChange:K=>Q(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:G,onChange:K=>Y(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),m.jsx("button",{onClick:()=>O(!D),className:`w-11 h-6 rounded-full transition-colors relative ${D?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${D?"translate-x-5":"translate-x-0"}`})})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),m.jsx("button",{onClick:()=>R(!I),className:`w-11 h-6 rounded-full transition-colors relative ${I?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${I?"translate-x-5":"translate-x-0"}`})})]})]})}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:U.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):m.jsx(fr,{initial:!1,mode:"popLayout",children:U.map(K=>{const ue=K.transaction;return m.jsx(xt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(d_,{disabled:ue.isAutomatic,onDelete:()=>{const ne=K.splitTransactions.map(oe=>({...oe}));for(const oe of K.splitTransactions)oe.id&&i(oe.id);h(K.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const oe of ne)a(oe)})},children:m.jsx(YY,{transaction:{...ue,amount:K.totalAmount},envelopeName:K.envelopeNames,onReconcile:()=>{for(const ne of K.splitTransactions)ee(ne)},onEdit:()=>{if(ue.isAutomatic)return;n.find(oe=>oe.id===ue.envelopeId)?ie(ue):alert("Cannot edit: Envelope deleted.")}})})},K.key)})})})}),m.jsx(WY,{isVisible:!!J&&!!Z,onClose:()=>ie(null),mode:"edit",currentEnvelope:Z||{},initialTransaction:J,envelopes:n})]})};function tX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=tX(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Yt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=tX(t))&&(r&&(r+=" "),r+=e);return r}var L_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function O2(t){if(typeof t!="string")return!1;var e=L_e;return e.includes(t)}var V_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],B_e=new Set(V_e);function nX(t){return typeof t!="string"?!1:B_e.has(t)}function rX(t){return typeof t=="string"&&t.startsWith("data-")}function Ns(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(nX(n)||rX(n))&&(e[n]=t[n]);return e}function Qv(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ns(e)}return typeof t=="object"&&!Array.isArray(t)?Ns(t):null}function xa(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(nX(n)||rX(n)||O2(n))&&(e[n]=t[n]);return e}var F_e=["children","width","height","viewBox","className","style","title","desc"];function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BP.apply(null,arguments)}function U_e(t,e){if(t==null)return{};var n,r,i=$_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var iX=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=U_e(t,F_e),h=a||{width:r,height:i,x:0,y:0},g=Yt("recharts-surface",s);return A.createElement("svg",BP({},xa(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),n)}),q_e=["children","className"];function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FP.apply(null,arguments)}function G_e(t,e){if(t==null)return{};var n,r,i=H_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function H_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gi=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=G_e(t,q_e),a=Yt("recharts-layer",r);return A.createElement("g",FP({className:a},xa(i),{ref:e}),n)}),K_e=A.createContext(null);function ln(t){return function(){return t}}const aX=Math.cos,y1=Math.sin,Ms=Math.sqrt,b1=Math.PI,f_=2*b1,UP=Math.PI,$P=2*UP,sd=1e-6,W_e=$P-sd;function sX(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Y_e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sX;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class X_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?sX:Y_e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>sd)if(!(Math.abs(h*c-u*f)>sd)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,b=i-o,x=c*c+u*u,w=v*v+b*b,S=Math.sqrt(x),T=Math.sqrt(g),P=a*Math.tan((UP-Math.acos((x+g-w)/(2*S*T)))/2),D=P/T,O=P/S;Math.abs(D-1)>sd&&this._append`L${e+D*f},${n+D*h}`,this._append`A${a},${a},0,0,${+(h*v>f*b)},${this._x1=e+O*c},${this._y1=n+O*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>sd||Math.abs(this._y1-f)>sd)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%$P+$P),g>W_e?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>sd&&this._append`A${r},${r},0,${+(g>=UP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function R2(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new X_e(e)}function M2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oX(t){this._context=t}oX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function h_(t){return new oX(t)}function lX(t){return t[0]}function cX(t){return t[1]}function uX(t,e){var n=ln(!0),r=null,i=h_,a=null,s=R2(o);t=typeof t=="function"?t:t===void 0?lX:ln(t),e=typeof e=="function"?e:e===void 0?cX:ln(e);function o(c){var u,f=(c=M2(c)).length,h,g=!1,v;for(r==null&&(a=i(v=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(v)return a=null,v+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:ln(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:ln(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ln(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function bx(t,e,n){var r=null,i=ln(!0),a=null,s=h_,o=null,c=R2(u);t=typeof t=="function"?t:t===void 0?lX:ln(+t),e=typeof e=="function"?e:ln(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?cX:ln(+n);function u(h){var g,v,b,x=(h=M2(h)).length,w,S=!1,T,P=new Array(x),D=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===S)if(S=!S)v=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=v;--b)o.point(P[b],D[b]);o.lineEnd(),o.areaEnd()}S&&(P[g]=+t(w,g,h),D[g]=+e(w,g,h),o.point(r?+r(w,g,h):P[g],n?+n(w,g,h):D[g]))}if(T)return o=null,T+""||null}function f(){return uX().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:ln(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:ln(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:ln(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:ln(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:ln(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ln(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:ln(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class dX{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Q_e(t){return new dX(t,!0)}function Z_e(t){return new dX(t,!1)}const j2={draw(t,e){const n=Ms(e/b1);t.moveTo(n,0),t.arc(0,0,n,0,f_)}},J_e={draw(t,e){const n=Ms(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},fX=Ms(1/3),eEe=fX*2,tEe={draw(t,e){const n=Ms(e/eEe),r=n*fX;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},nEe={draw(t,e){const n=Ms(e),r=-n/2;t.rect(r,r,n,n)}},rEe=.8908130915292852,hX=y1(b1/10)/y1(7*b1/10),iEe=y1(f_/10)*hX,aEe=-aX(f_/10)*hX,sEe={draw(t,e){const n=Ms(e*rEe),r=iEe*n,i=aEe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=f_*a/5,o=aX(s),c=y1(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},xk=Ms(3),oEe={draw(t,e){const n=-Ms(e/(xk*3));t.moveTo(0,n*2),t.lineTo(-xk*n,-n),t.lineTo(xk*n,-n),t.closePath()}},Ma=-.5,ja=Ms(3)/2,qP=1/Ms(12),lEe=(qP/2+1)*3,cEe={draw(t,e){const n=Ms(e/lEe),r=n/2,i=n*qP,a=r,s=n*qP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Ma*r-ja*i,ja*r+Ma*i),t.lineTo(Ma*a-ja*s,ja*a+Ma*s),t.lineTo(Ma*o-ja*c,ja*o+Ma*c),t.lineTo(Ma*r+ja*i,Ma*i-ja*r),t.lineTo(Ma*a+ja*s,Ma*s-ja*a),t.lineTo(Ma*o+ja*c,Ma*c-ja*o),t.closePath()}};function uEe(t,e){let n=null,r=R2(i);t=typeof t=="function"?t:ln(t||j2),e=typeof e=="function"?e:ln(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:ln(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:ln(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function x1(){}function w1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function pX(t){this._context=t}pX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:w1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:w1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dEe(t){return new pX(t)}function gX(t){this._context=t}gX.prototype={areaStart:x1,areaEnd:x1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:w1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fEe(t){return new gX(t)}function mX(t){this._context=t}mX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:w1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function hEe(t){return new mX(t)}function vX(t){this._context=t}vX.prototype={areaStart:x1,areaEnd:x1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function pEe(t){return new vX(t)}function HB(t){return t<0?-1:1}function KB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(HB(a)+HB(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function WB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function wk(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function S1(t){this._context=t}S1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wk(this,this._t0,WB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,wk(this,WB(this,n=KB(this,t,e)),n);break;default:wk(this,this._t0,n=KB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function yX(t){this._context=new bX(t)}(yX.prototype=Object.create(S1.prototype)).point=function(t,e){S1.prototype.point.call(this,e,t)};function bX(t){this._context=t}bX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function gEe(t){return new S1(t)}function mEe(t){return new yX(t)}function xX(t){this._context=t}xX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=YB(t),i=YB(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function YB(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function vEe(t){return new xX(t)}function p_(t,e){this._context=t,this._t=e}p_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function yEe(t){return new p_(t,.5)}function bEe(t){return new p_(t,0)}function xEe(t){return new p_(t,1)}function Qd(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function GP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function wEe(t,e){return t[e]}function SEe(t){const e=[];return e.key=t,e}function _Ee(){var t=ln([]),e=GP,n=Qd,r=wEe;function i(a){var s=Array.from(t.apply(this,arguments),SEe),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=M2(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:ln(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:ln(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?GP:typeof a=="function"?a:ln(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Qd,i):n},i}function EEe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Qd(t,e)}}function TEe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Qd(t,e)}}function AEe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,v=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,S=x[r-1][1]||0;v+=w-S}c+=h,u+=v*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Qd(t,e)}}var Sk={},_k={},XB;function kEe(){return XB||(XB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(_k)),_k}var Ek={},QB;function wX(){return QB||(QB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Ek)),Ek}var Tk={},ZB;function z2(){return ZB||(ZB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(Tk)),Tk}var Ak={},kk={},JB;function CEe(){return JB||(JB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(kk)),kk}var e6;function L2(){return e6||(e6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CEe(),n=z2();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(Ak)),Ak}var t6;function V2(){return t6||(t6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kEe(),n=wX(),r=z2(),i=L2();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(Sk)),Sk}var Ck,n6;function IEe(){return n6||(n6=1,Ck=V2().get),Ck}var PEe=IEe();const Zd=jl(PEe);var NEe=4;function $c(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NEe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Bn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+$c(o)+a:i+a},"")}var zr=t=>t===0?0:t>0?1:-1,Io=t=>typeof t=="number"&&t!=+t,Jd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,He=t=>(typeof t=="number"||t instanceof Number)&&!Io(t),Ha=t=>He(t)||typeof t=="string",DEe=0,Zv=t=>{var e=++DEe;return"".concat(t||"").concat(e)},hi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!He(e)&&typeof e!="string")return r;var a;if(Jd(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Io(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},SX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function yr(t,e,n){return He(t)&&He(e)?$c(t+n*(e-t)):e}function OEe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Zd(r,e))===n)}var Vr=t=>t===null||typeof t>"u",X0=t=>Vr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Gi(t){return t!=null}function rg(){}var REe=["type","size","sizeType"];function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HP.apply(null,arguments)}function r6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r6(Object(n),!0).forEach(function(r){MEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MEe(t,e,n){return(e=jEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jEe(t){var e=zEe(t,"string");return typeof e=="symbol"?e:e+""}function zEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LEe(t,e){if(t==null)return{};var n,r,i=VEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _X={symbolCircle:j2,symbolCross:J_e,symbolDiamond:tEe,symbolSquare:nEe,symbolStar:sEe,symbolTriangle:oEe,symbolWye:cEe},BEe=Math.PI/180,FEe=t=>{var e="symbol".concat(X0(t));return _X[e]||j2},UEe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*BEe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},$Ee=(t,e)=>{_X["symbol".concat(X0(t))]=e},EX=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=LEe(t,REe),a=i6(i6({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=FEe(s),v=uEe().type(g).size(UEe(n,r,s)),b=v();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=xa(a);return He(u)&&He(f)&&He(n)?A.createElement("path",HP({},h,{className:Yt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};EX.registerSymbol=$Ee;var TX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,qEe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{O2(i)&&(r[i]=(a=>n[i](n,a)))}),r},GEe=(t,e,n)=>r=>(t(e,n,r),null),g_=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];O2(i)&&typeof a=="function"&&(r||(r={}),r[i]=GEe(a,e,n))}),r};function a6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(n),!0).forEach(function(r){KEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KEe(t,e,n){return(e=WEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WEe(t){var e=YEe(t,"string");return typeof e=="symbol"?e:e+""}function YEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jr(t,e){var n=HEe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var Ik={},Pk={},s6;function XEe(){return s6||(s6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s,a,n);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(Pk)),Pk}var Nk={},o6;function QEe(){return o6||(o6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(Nk)),Nk}var Dk={},l6;function AX(){return l6||(l6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Dk)),Dk}var Ok={},Rk={},Mk={},c6;function ZEe(){return c6||(c6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Mk)),Mk}var u6;function B2(){return u6||(u6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZEe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Rk)),Rk}var jk={},d6;function JEe(){return d6||(d6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(jk)),jk}var f6;function eTe(){return f6||(f6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=B2(),n=JEe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(Ok)),Ok}var zk={},Lk={},h6;function tTe(){return h6||(h6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=V2();function n(r){return function(i){return e.get(i,r)}}t.property=n})(Lk)),Lk}var Vk={},Bk={},Fk={},Uk={},p6;function kX(){return p6||(p6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Uk)),Uk}var $k={},g6;function CX(){return g6||(g6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})($k)),$k}var qk={},m6;function IX(){return m6||(m6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(qk)),qk}var v6;function nTe(){return v6||(v6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kX(),n=CX(),r=IX();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function v(b,x,w,S,T,P){const D=g(b,x,w,S,T,P);return D!==void 0?!!D:a(b,x,v,P)},new Map)}function a(f,h,g,v){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,v);case"function":return Object.keys(h).length>0?a(f,{...h},g,v):r.isEqualsSameValueZero(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.isEqualsSameValueZero(f,h)}}function s(f,h,g,v){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,v);if(h instanceof Map)return o(f,h,g,v);if(h instanceof Set)return u(f,h,g,v);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(v?.has(h))return v.get(h)===f;v?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,v))return!1}return!0}finally{v?.delete(h)}}function o(f,h,g,v){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,v)===!1)return!1}return!0}function c(f,h,g,v){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let S=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const P=f[T];let D=!1;if(g(P,w,x,f,h,v)&&(D=!0),D){b.add(T),S=!0;break}}if(!S)return!1}return!0}function u(f,h,g,v){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,v):!1}t.isMatchWith=i,t.isSetMatch=u})(Fk)),Fk}var y6;function PX(){return y6||(y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nTe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Bk)),Bk}var Gk={},Hk={},Kk={},b6;function rTe(){return b6||(b6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Kk)),Kk}var Wk={},x6;function F2(){return x6||(x6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Wk)),Wk}var Yk={},w6;function NX(){return w6||(w6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",v="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",P="[object Uint32Array]",D="[object BigUint64Array]",O="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",I="[object BigInt64Array]",R="[object Float32Array]",j="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=I,t.bigUint64ArrayTag=D,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=j,t.functionTag=h,t.int16ArrayTag=N,t.int32ArrayTag=C,t.int8ArrayTag=O,t.mapTag=c,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=P,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=S})(Yk)),Yk}var Xk={},S6;function iTe(){return S6||(S6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Xk)),Xk}var _6;function DX(){return _6||(_6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rTe(),n=F2(),r=NX(),i=CX(),a=iTe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,v=new Map,b=void 0){const x=b?.(f,h,g,v);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const w=new Array(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;v.set(f,w);for(const[S,T]of f)w.set(S,o(T,S,g,v,b));return w}if(f instanceof Set){const w=new Set;v.set(f,w);for(const S of f)w.add(o(S,void 0,g,v,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,w),c(w,f,g,v,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Error){const w=new f.constructor;return v.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,v,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof String){const w=new String(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return v.set(f,w),c(w,f,g,v,b),w}return f}function c(f,h,g=f,v,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const S=x[w],T=Object.getOwnPropertyDescriptor(f,S);(T==null||T.writable)&&(f[S]=o(h[S],S,g,v,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(Hk)),Hk}var E6;function aTe(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DX();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Gk)),Gk}var T6;function sTe(){return T6||(T6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PX(),n=aTe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(Vk)),Vk}var Qk={},Zk={},Jk={},A6;function oTe(){return A6||(A6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DX(),n=F2(),r=NX();function i(a,s){return e.cloneDeepWith(a,(o,c,u,f)=>{const h=s?.(o,c,u,f);if(h!==void 0)return h;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const g={};return f.set(a,g),e.copyProperties(g,a,u,f),g}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new a.constructor(a?.valueOf());return e.copyProperties(g,a),g}case r.argumentsTag:{const g={};return e.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}}})}t.cloneDeepWith=i})(Jk)),Jk}var k6;function lTe(){return k6||(k6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oTe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Zk)),Zk}var eC={},tC={},C6;function OX(){return C6||(C6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(tC)),tC}var nC={},I6;function cTe(){return I6||(I6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=F2();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(nC)),nC}var P6;function uTe(){return P6||(P6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wX(),n=OX(),r=cTe(),i=L2();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(eC)),eC}var N6;function dTe(){return N6||(N6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PX(),n=z2(),r=lTe(),i=V2(),a=uTe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(Qk)),Qk}var D6;function fTe(){return D6||(D6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AX(),n=tTe(),r=sTe(),i=dTe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(zk)),zk}var O6;function hTe(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XEe(),n=QEe(),r=AX(),i=eTe(),a=fTe();function s(o,c=r.identity){return i.isArrayLikeObject(o)?e.uniqBy(Array.from(o),n.ary(a.iteratee(c),1)):[]}t.uniqBy=s})(Ik)),Ik}var rC,R6;function pTe(){return R6||(R6=1,rC=hTe().uniqBy),rC}var gTe=pTe();const M6=jl(gTe);function mTe(t,e,n){return e===!0?M6(t,n):typeof e=="function"?M6(t,e):t}var iC={exports:{}},aC={},sC={exports:{}},oC={};var j6;function vTe(){if(j6)return oC;j6=1;var t=zp();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=v,x.getSnapshot=g,c(x)&&w({inst:x})},[h,v,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(v),v}function c(h){var g=h.getSnapshot;h=h.value;try{var v=g();return!n(h,v)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return oC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,oC}var z6;function yTe(){return z6||(z6=1,sC.exports=vTe()),sC.exports}var L6;function bTe(){if(L6)return aC;L6=1;var t=zp(),e=yTe();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return aC.useSyncExternalStoreWithSelector=function(u,f,h,g,v){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function S(N){if(!T){if(T=!0,P=N,N=g(N),v!==void 0&&x.hasValue){var C=x.value;if(v(C,N))return D=C}return D=N}if(C=D,r(P,N))return C;var I=g(N);return v!==void 0&&v(C,I)?(P=N,C):(P=N,D=I)}var T=!1,P,D,O=h===void 0?null:h;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,h,g,v]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},aC}var V6;function xTe(){return V6||(V6=1,iC.exports=bTe()),iC.exports}var wTe=xTe(),U2=A.createContext(null),STe=t=>t,xn=()=>{var t=A.useContext(U2);return t?t.store.dispatch:STe},fw=()=>{},_Te=()=>fw,ETe=(t,e)=>t===e;function Ge(t){var e=A.useContext(U2),n=A.useMemo(()=>e?r=>{if(r!=null)return t(r)}:fw,[e,t]);return wTe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:_Te,e?e.store.getState:fw,e?e.store.getState:fw,n,ETe)}function TTe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function ATe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function kTe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var B6=t=>Array.isArray(t)?t:[t];function CTe(t){const e=Array.isArray(t[0])?t[0]:t;return kTe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ITe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var PTe=class{constructor(t){this.value=t}deref(){return this.value}},NTe=typeof WeakRef<"u"?WeakRef:PTe,DTe=0,F6=1;function xx(){return{s:DTe,v:void 0,o:null,p:null}}function RX(t,e={}){let n=xx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(v);x===void 0?(o=xx(),b.set(v,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(v);x===void 0?(o=xx(),b.set(v,o)):o=x}}const u=o;let f;if(o.s===F6)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new NTe(f):f}return u.s=F6,u.v=f,f}return s.clearCache=()=>{n=xx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function OTe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),TTe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:v=RX,argsMemoizeOptions:b=[]}=f,x=B6(g),w=B6(b),S=CTe(i),T=h(function(){return a++,u.apply(null,arguments)},...x),P=v(function(){s++;const O=ITe(S,arguments);return o=T.apply(null,O),o},...w);return Object.assign(P,{resultFunc:u,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var me=OTe(RX),RTe=Object.assign((t,e=me)=>{ATe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>RTe}),lC={},cC={},uC={},U6;function MTe(){return U6||(U6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(uC)),uC}var dC={},fC={},$6;function MX(){return $6||($6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(fC)),fC}var q6;function jTe(){return q6||(q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MX(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(dC)),dC}var G6;function zTe(){return G6||(G6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MTe(),n=jTe(),r=L2();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(v=>String(v));const u=(v,b)=>{let x=v;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:u(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?u(b,v):typeof b=="object"?b[v]:b,h=s.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return a.map(v=>({original:v,criteria:h.map(b=>f(b,v))})).slice().sort((v,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(v.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(v=>v.original)}t.orderBy=i})(cC)),cC}var hC={},H6;function LTe(){return H6||(H6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(hC)),hC}var pC={},K6;function jX(){return K6||(K6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OX(),n=B2(),r=kX(),i=IX();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.isEqualsSameValueZero(c[o],s):!1}t.isIterateeCall=a})(pC)),pC}var W6;function VTe(){return W6||(W6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zTe(),n=LTe(),r=jX();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(lC)),lC}var gC,Y6;function BTe(){return Y6||(Y6=1,gC=VTe().sortBy),gC}var FTe=BTe();const m_=jl(FTe);var zX=t=>t.legend.settings,UTe=t=>t.legend.size,$Te=t=>t.legend.payload;me([$Te,zX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?m_(r,n):r});var wx=1;function qTe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>wx||Math.abs(s.left-e.left)>wx||Math.abs(s.top-e.top)>wx||Math.abs(s.width-e.width)>wx)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Wr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var GTe=typeof Symbol=="function"&&Symbol.observable||"@@observable",X6=GTe,mC=()=>Math.random().toString(36).substring(7).split("").join("."),HTe={INIT:`@@redux/INIT${mC()}`,REPLACE:`@@redux/REPLACE${mC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mC()}`},_1=HTe;function $2(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function LX(t,e,n){if(typeof t!="function")throw new Error(Wr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Wr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Wr(1));return n(LX)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,S)=>{s.set(S,w)}))}function f(){if(c)throw new Error(Wr(3));return i}function h(w){if(typeof w!="function")throw new Error(Wr(4));if(c)throw new Error(Wr(5));let S=!0;u();const T=o++;return s.set(T,w),function(){if(S){if(c)throw new Error(Wr(6));S=!1,u(),s.delete(T),a=null}}}function g(w){if(!$2(w))throw new Error(Wr(7));if(typeof w.type>"u")throw new Error(Wr(8));if(typeof w.type!="string")throw new Error(Wr(17));if(c)throw new Error(Wr(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function v(w){if(typeof w!="function")throw new Error(Wr(10));r=w,g({type:_1.REPLACE})}function b(){const w=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Wr(11));function T(){const D=S;D.next&&D.next(f())}return T(),{unsubscribe:w(T)}},[X6](){return this}}}return g({type:_1.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:v,[X6]:b}}function KTe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:_1.INIT})>"u")throw new Error(Wr(12));if(typeof n(void 0,{type:_1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Wr(13))})}function VX(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{KTe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],v=s[h],b=g(v,o);if(typeof b>"u")throw o&&o.type,new Error(Wr(14));u[h]=b,c=c||b!==v}return c=c||r.length!==Object.keys(s).length,c?u:s}}function E1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function WTe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Wr(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=E1(...o)(i.dispatch),{...i,dispatch:a}}}function BX(t){return $2(t)&&"type"in t&&typeof t.type=="string"}var FX=Symbol.for("immer-nothing"),Q6=Symbol.for("immer-draftable"),Ii=Symbol.for("immer-state");function ms(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ga=Object,Ip=ga.getPrototypeOf,T1="constructor",v_="prototype",KP="configurable",A1="enumerable",hw="writable",Jv="value",Il=t=>!!t&&!!t[Ii];function Ds(t){return t?UX(t)||b_(t)||!!t[Q6]||!!t[T1]?.[Q6]||x_(t)||w_(t):!1}var YTe=ga[v_][T1].toString(),Z6=new WeakMap;function UX(t){if(!t||!q2(t))return!1;const e=Ip(t);if(e===null||e===ga[v_])return!0;const n=ga.hasOwnProperty.call(e,T1)&&e[T1];if(n===Object)return!0;if(!Ah(n))return!1;let r=Z6.get(n);return r===void 0&&(r=Function.toString.call(n),Z6.set(n,r)),r===YTe}function y_(t,e,n=!0){Q0(t)===0?(n?Reflect.ownKeys(t):ga.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Q0(t){const e=t[Ii];return e?e.type_:b_(t)?1:x_(t)?2:w_(t)?3:0}var J6=(t,e,n=Q0(t))=>n===2?t.has(e):ga[v_].hasOwnProperty.call(t,e),WP=(t,e,n=Q0(t))=>n===2?t.get(e):t[e],k1=(t,e,n,r=Q0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function XTe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var b_=Array.isArray,x_=t=>t instanceof Map,w_=t=>t instanceof Set,q2=t=>typeof t=="object",Ah=t=>typeof t=="function",vC=t=>typeof t=="boolean";function QTe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var rl=t=>t.copy_||t.base_,G2=t=>t.modified_?t.copy_:t.base_;function YP(t,e){if(x_(t))return new Map(t);if(w_(t))return new Set(t);if(b_(t))return Array[v_].slice.call(t);const n=UX(t);if(e===!0||e==="class_only"&&!n){const r=ga.getOwnPropertyDescriptors(t);delete r[Ii];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[hw]===!1&&(o[hw]=!0,o[KP]=!0),(o.get||o.set)&&(r[s]={[KP]:!0,[hw]:!0,[A1]:o[A1],[Jv]:t[s]})}return ga.create(Ip(t),r)}else{const r=Ip(t);if(r!==null&&n)return{...t};const i=ga.create(r);return ga.assign(i,t)}}function H2(t,e=!1){return S_(t)||Il(t)||!Ds(t)||(Q0(t)>1&&ga.defineProperties(t,{set:Sx,add:Sx,clear:Sx,delete:Sx}),ga.freeze(t),e&&y_(t,(n,r)=>{H2(r,!0)},!1)),t}function ZTe(){ms(2)}var Sx={[Jv]:ZTe};function S_(t){return t===null||!q2(t)?!0:ga.isFrozen(t)}var C1="MapSet",XP="Patches",eF="ArrayMethods",$X={};function ef(t){const e=$X[t];return e||ms(0,t),e}var tF=t=>!!$X[t],e0,qX=()=>e0,JTe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:tF(C1)?ef(C1):void 0,arrayMethodsPlugin_:tF(eF)?ef(eF):void 0});function nF(t,e){e&&(t.patchPlugin_=ef(XP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function QP(t){ZP(t),t.drafts_.forEach(eAe),t.drafts_=null}function ZP(t){t===e0&&(e0=t.parent_)}var rF=t=>e0=JTe(e0,t);function eAe(t){const e=t[Ii];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function iF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Ii].modified_&&(QP(e),ms(4)),Ds(t)&&(t=aF(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Ii].base_,t,e)}else t=aF(e,n);return tAe(e,t,!0),QP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==FX?t:void 0}function aF(t,e){if(S_(e))return e;const n=e[Ii];if(!n)return I1(e,t.handledSet_,t);if(!__(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);KX(n,t)}return n.copy_}function tAe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&H2(e,n)}function GX(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var __=(t,e)=>t.scope_===e,nAe=[];function HX(t,e,n,r){const i=rl(t),a=t.type_;if(r!==void 0&&WP(i,r,a)===e){k1(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;y_(i,(c,u)=>{if(Il(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??nAe;for(const o of s)k1(i,o,n,a)}function rAe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!__(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=G2(a);HX(t,a.draft_??a,s,n),KX(a,i)})}function KX(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}GX(t)}}function iAe(t,e,n){const{scope_:r}=t;if(Il(n)){const i=n[Ii];__(i,r)&&i.callbacks_.push(function(){pw(t);const s=G2(i);HX(t,n,s,e)})}else Ds(n)&&t.callbacks_.push(function(){const a=rl(t);t.type_===3?a.has(n)&&I1(n,r.handledSet_,r):WP(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&I1(WP(t.copy_,e,t.type_),r.handledSet_,r)})}function I1(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Il(t)||e.has(t)||!Ds(t)||S_(t)||(e.add(t),y_(t,(r,i)=>{if(Il(i)){const a=i[Ii];if(__(a,n)){const s=G2(a);k1(t,r,s,t.type_),GX(a)}}else Ds(i)&&I1(i,e,n)})),t}function aAe(t,e){const n=b_(t),r={type_:n?1:0,scope_:e?e.scope_:qX(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=P1;n&&(i=[r],a=t0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var P1={get(t,e){if(e===Ii)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=rl(t);if(!J6(i,e,t.type_))return sAe(t,i,e);const a=i[e];if(t.finalized_||!Ds(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&QTe(e))return a;if(a===yC(t.base_,e)){pw(t);const s=t.type_===1?+e:e,o=eN(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in rl(t)},ownKeys(t){return Reflect.ownKeys(rl(t))},set(t,e,n){const r=WX(rl(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=yC(rl(t),e),a=i?.[Ii];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(XTe(n,i)&&(n!==void 0||J6(t.base_,e,t.type_)))return!0;pw(t),JP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),iAe(t,e,n)),!0},deleteProperty(t,e){return pw(t),yC(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),JP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=rl(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[hw]:!0,[KP]:t.type_!==1||e!=="length",[A1]:r[A1],[Jv]:n[e]}},defineProperty(){ms(11)},getPrototypeOf(t){return Ip(t.base_)},setPrototypeOf(){ms(12)}},t0={};for(let t in P1){let e=P1[t];t0[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}t0.deleteProperty=function(t,e){return t0.set.call(this,t,e,void 0)};t0.set=function(t,e,n){return P1.set.call(this,t[0],e,n,t[0])};function yC(t,e){const n=t[Ii];return(n?rl(n):t)[e]}function sAe(t,e,n){const r=WX(e,n);return r?Jv in r?r[Jv]:r.get?.call(t.draft_):void 0}function WX(t,e){if(!(e in t))return;let n=Ip(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ip(n)}}function JP(t){t.modified_||(t.modified_=!0,t.parent_&&JP(t.parent_))}function pw(t){t.copy_||(t.assigned_=new Map,t.copy_=YP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var oAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Ah(n)&&!Ah(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}Ah(r)||ms(6),i!==void 0&&!Ah(i)&&ms(7);let a;if(Ds(n)){const s=rF(this),o=eN(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?QP(s):ZP(s)}return nF(s,i),iF(a,s)}else if(!n||!q2(n)){if(a=r(n),a===void 0&&(a=n),a===FX&&(a=void 0),this.autoFreeze_&&H2(a,!0),i){const s=[],o=[];ef(XP).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else ms(1,n)},this.produceWithPatches=(n,r)=>{if(Ah(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},vC(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),vC(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),vC(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ds(e)||ms(8),Il(e)&&(e=ks(e));const n=rF(this),r=eN(n,e,void 0);return r[Ii].isManual_=!0,ZP(n),r}finishDraft(e,n){const r=e&&e[Ii];(!r||!r.isManual_)&&ms(9);const{scope_:i}=r;return nF(i,n),iF(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=ef(XP).applyPatches_;return Il(e)?i(e,n):this.produce(e,a=>i(a,n))}};function eN(t,e,n,r){const[i,a]=x_(e)?ef(C1).proxyMap_(e,n):w_(e)?ef(C1).proxySet_(e,n):aAe(e,n);return(n?.scope_??qX()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?rAe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function ks(t){return Il(t)||ms(10,t),YX(t)}function YX(t){if(!Ds(t)||S_(t))return t;const e=t[Ii];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=YP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=YP(t,!0);return y_(n,(i,a)=>{k1(n,i,YX(a))},r),e&&(e.finalized_=!1),n}var lAe=new oAe,XX=lAe.produce;function QX(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var cAe=QX(),uAe=QX,dAe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?E1:E1.apply(null,arguments)};function Ka(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(va(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>BX(r)&&r.type===t,n}var ZX=class Wm extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Wm.prototype)}static get[Symbol.species](){return Wm}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Wm(...e[0].concat(this)):new Wm(...e.concat(this))}};function sF(t){return Ds(t)?XX(t,()=>{}):t}function _x(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function fAe(t){return typeof t=="boolean"}var hAe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new ZX;return n&&(fAe(n)?s.push(cAe):s.push(uAe(n.extraArgument))),s},JX="RTK_autoBatch",_n=()=>t=>({payload:t,meta:{[JX]:!0}}),oF=t=>e=>{setTimeout(e,t)},eQ=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:oF(10):t.type==="callback"?t.queueNotification:oF(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[JX],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},pAe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new ZX(t);return r&&i.push(eQ(typeof r=="object"?r:void 0)),i};function gAe(t){const e=hAe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if($2(n))o=VX(n);else throw new Error(va(1));let c;typeof r=="function"?c=r(e):c=e();let u=E1;i&&(u=dAe({trace:!1,...typeof i=="object"&&i}));const f=WTe(...c),h=pAe(f);let g=typeof s=="function"?s(h):h();const v=u(...g);return LX(o,a,v)}function tQ(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(va(28));if(o in e)throw new Error(va(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function mAe(t){return typeof t=="function"}function vAe(t,e){let[n,r,i]=tQ(e),a;if(mAe(t))a=()=>sF(t());else{const o=sF(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Il(f)){const v=h(f,c);return v===void 0?f:v}else{if(Ds(f))return XX(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var yAe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",bAe=(t=21)=>{let e="",n=t;for(;n--;)e+=yAe[Math.random()*64|0];return e},xAe=Symbol.for("rtk-slice-createasyncthunk");function wAe(t,e){return`${t}/${e}`}function SAe({creators:t}={}){const e=t?.asyncThunk?.[xAe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(va(11));const s=(typeof r.reducers=="function"?r.reducers(EAe()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(P,D){const O=typeof P=="string"?P:P.type;if(!O)throw new Error(va(12));if(O in c.sliceCaseReducersByType)throw new Error(va(13));return c.sliceCaseReducersByType[O]=D,u},addMatcher(P,D){return c.sliceMatchers.push({matcher:P,reducer:D}),u},exposeAction(P,D){return c.actionCreators[P]=D,u},exposeCaseReducer(P,D){return c.sliceCaseReducersByName[P]=D,u}};o.forEach(P=>{const D=s[P],O={reducerName:P,type:wAe(i,P),createNotation:typeof r.reducers=="function"};AAe(D)?CAe(O,D,u,e):TAe(O,D,u)});function f(){const[P={},D=[],O=void 0]=typeof r.extraReducers=="function"?tQ(r.extraReducers):[r.extraReducers],N={...P,...c.sliceCaseReducersByType};return vAe(r.initialState,C=>{for(let I in N)C.addCase(I,N[I]);for(let I of c.sliceMatchers)C.addMatcher(I.matcher,I.reducer);for(let I of D)C.addMatcher(I.matcher,I.reducer);O&&C.addDefaultCase(O)})}const h=P=>P,g=new Map,v=new WeakMap;let b;function x(P,D){return b||(b=f()),b(P,D)}function w(){return b||(b=f()),b.getInitialState()}function S(P,D=!1){function O(C){let I=C[P];return typeof I>"u"&&D&&(I=_x(v,O,w)),I}function N(C=h){const I=_x(g,D,()=>new WeakMap);return _x(I,C,()=>{const R={};for(const[j,B]of Object.entries(r.selectors??{}))R[j]=_Ae(B,C,()=>_x(v,C,w),D);return R})}return{reducerPath:P,getSelectors:N,get selectors(){return N(O)},selectSlice:O}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(a),injectInto(P,{reducerPath:D,...O}={}){const N=D??a;return P.inject({reducerPath:N,reducer:x},O),{...T,...S(N,!0)}}};return T}}function _Ae(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Qi=SAe();function EAe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function TAe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!kAe(r))throw new Error(va(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Ka(t,s):Ka(t))}function AAe(t){return t._reducerDefinitionType==="asyncThunk"}function kAe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function CAe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(va(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||Ex,pending:o||Ex,rejected:c||Ex,settled:u||Ex})}function Ex(){}var IAe="task",nQ="listener",rQ="completed",K2="cancelled",PAe=`task-${K2}`,NAe=`task-${rQ}`,tN=`${nQ}-${K2}`,DAe=`${nQ}-${rQ}`,E_=class{constructor(t){this.code=t,this.message=`${IAe} ${K2} (reason: ${t})`}name="TaskAbortError";message},W2=(t,e)=>{if(typeof t!="function")throw new TypeError(va(32))},N1=()=>{},iQ=(t,e=N1)=>(t.catch(e),t),aQ=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Od=t=>{if(t.aborted)throw new E_(t.reason)};function sQ(t,e){let n=N1;return new Promise((r,i)=>{const a=()=>i(new E_(t.reason));if(t.aborted){a();return}n=aQ(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=N1})}var OAe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof E_?"cancelled":"rejected",error:n}}finally{e?.()}},D1=t=>e=>iQ(sQ(t,e).then(n=>(Od(t),n))),oQ=t=>{const e=D1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Xh}=Object,lF={},T_="listenerMiddleware",RAe=(t,e)=>{const n=r=>aQ(t,()=>r.abort(t.reason));return(r,i)=>{W2(r);const a=new AbortController;n(a);const s=OAe(async()=>{Od(t),Od(a.signal);const o=await r({pause:D1(a.signal),delay:oQ(a.signal),signal:a.signal});return Od(a.signal),o},()=>a.abort(NAe));return i?.autoJoin&&e.push(s.catch(N1)),{result:D1(t)(s),cancel(){a.abort(PAe)}}}},MAe=(t,e)=>{const n=async(r,i)=>{Od(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await sQ(e,Promise.race(o));return Od(e),c}finally{a()}};return(r,i)=>iQ(n(r,i))},lQ=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Ka(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(va(21));return W2(a),{predicate:i,type:e,effect:a}},cQ=Xh(t=>{const{type:e,predicate:n,effect:r}=lQ(t);return{id:bAe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(va(22))}}},{withTypes:()=>cQ}),cF=(t,e)=>{const{type:n,effect:r,predicate:i}=lQ(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},nN=t=>{t.pending.forEach(e=>{e.abort(tN)})},jAe=(t,e)=>()=>{for(const n of e.keys())nN(n);t.clear()},uF=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},uQ=Xh(Ka(`${T_}/add`),{withTypes:()=>uQ}),zAe=Ka(`${T_}/removeAll`),dQ=Xh(Ka(`${T_}/remove`),{withTypes:()=>dQ}),LAe=(...t)=>{console.error(`${T_}/error`,...t)},Z0=(t={})=>{const e=new Map,n=new Map,r=v=>{const b=n.get(v)??0;n.set(v,b+1)},i=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:a,onError:s=LAe}=t;W2(s);const o=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),b=>{v.unsubscribe(),b?.cancelActive&&nN(v)}),c=v=>{const b=cF(e,v)??cQ(v);return o(b)};Xh(c,{withTypes:()=>c});const u=v=>{const b=cF(e,v);return b&&(b.unsubscribe(),v.cancelActive&&nN(b)),!!b};Xh(u,{withTypes:()=>u});const f=async(v,b,x,w)=>{const S=new AbortController,T=MAe(c,S.signal),P=[];try{v.pending.add(S),r(v),await Promise.resolve(v.effect(b,Xh({},x,{getOriginalState:w,condition:(D,O)=>T(D,O).then(Boolean),take:T,delay:oQ(S.signal),pause:D1(S.signal),extra:a,signal:S.signal,fork:RAe(S.signal,P),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((D,O,N)=>{D!==S&&(D.abort(tN),N.delete(D))})},cancel:()=>{S.abort(tN),v.pending.delete(S)},throwIfCancelled:()=>{Od(S.signal)}})))}catch(D){D instanceof E_||uF(s,D,{raisedBy:"effect"})}finally{await Promise.all(P),S.abort(DAe),i(v),v.pending.delete(S)}},h=jAe(e,n);return{middleware:v=>b=>x=>{if(!BX(x))return b(x);if(uQ.match(x))return c(x.payload);if(zAe.match(x)){h();return}if(dQ.match(x))return u(x.payload);let w=v.getState();const S=()=>{if(w===lF)throw new Error(va(23));return w};let T;try{if(T=b(x),e.size>0){const P=v.getState(),D=Array.from(e.values());for(const O of D){let N=!1;try{N=O.predicate(x,P,w)}catch(C){N=!1,uF(s,C,{raisedBy:"predicate"})}N&&f(O,x,v,S)}}}finally{w=lF}return T},startListening:c,stopListening:u,clearListeners:h}};function va(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var VAe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},fQ=Qi({name:"chartLayout",initialState:VAe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:BAe,setLayout:FAe,setChartSize:UAe,setScale:$Ae}=fQ.actions,qAe=fQ.reducer;function hQ(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function mt(t){return Number.isFinite(t)}function Po(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function dF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(n),!0).forEach(function(r){GAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GAe(t,e,n){return(e=HAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HAe(t){var e=KAe(t,"string");return typeof e=="symbol"?e:e+""}function KAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bn(t,e,n){return Vr(t)||Vr(e)?n:Ha(e)?Zd(t,e,n):typeof e=="function"?e(t):n}var WAe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&He(t[a]))return Vh(Vh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&He(t[s]))return Vh(Vh({},t),{},{[s]:t[s]+(i||0)})}return t},bu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",pQ=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},gQ=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:v}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=v==="angleAxis"&&a&&a.length>=2?zr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((S,T)=>{var P=r?r.indexOf(S):S,D=s.map(P);return mt(D)?{coordinate:D+x,value:S,offset:x,index:T}:null}).filter(Gi);return w}return c&&u?u.map((S,T)=>{var P=s.map(S);return mt(P)?{coordinate:P+x,value:S,index:T,offset:x}:null}).filter(Gi):s.ticks&&f!=null?s.ticks(f).map((S,T)=>{var P=s.map(S);return mt(P)?{coordinate:P+x,value:S,index:T,offset:x}:null}).filter(Gi):s.domain().map((S,T)=>{var P=s.map(S);return mt(P)?{coordinate:P+x,value:r?r[S]:S,index:T,offset:x}:null}).filter(Gi)},YAe=(t,e)=>{if(!e||e.length!==2||!He(e[0])||!He(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!He(t[0])||t[0]<n)&&(i[0]=n),(!He(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},XAe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=Io(f)?h:f;g>=0?(u[0]=a,a+=g,u[1]=a):(u[0]=s,s+=g,u[1]=s)}}}},QAe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=Io(c[1])?c[0]:c[1];u>=0?(c[0]=a,a+=u,c[1]=a):(c[0]=0,c[1]=0)}}}},ZAe={sign:XAe,expand:EEe,none:Qd,silhouette:TEe,wiggle:AEe,positive:QAe},JAe=(t,e,n)=>{var r,i=(r=ZAe[n])!==null&&r!==void 0?r:Qd,a=_Ee().keys(e).value((o,c)=>Number(bn(o,c,0))).order(GP).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=bn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&He(h[0])&&He(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function eke(t){return t==null?void 0:String(t)}var fF=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=bn(a,e.dataKey,e.scale.domain()[s]);if(Vr(o))return null;var c=e.scale.map(o);return He(c)?c-i/2+r:null},tke=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},nke=t=>{var e=t.flat(2).filter(He);return[Math.min(...e),Math.max(...e)]},rke=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],ike=(t,e,n)=>{if(t!=null)return rke(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=hQ(u,e,n),h=nke(f);return!mt(h[0])||!mt(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},hF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,O1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=m_(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function gF(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Vh(Vh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function A_(t,e){if(t)return String(t);if(typeof e=="string")return e}var ake=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},ske=(t,e)=>e==="centric"?t.angle:t.radius,Bl=t=>t.layout.width,Fl=t=>t.layout.height,oke=t=>t.layout.scale,mQ=t=>t.layout.margin,k_=me(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),C_=me(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),vQ="data-recharts-item-index",yQ="data-recharts-item-id",J0=60;function mF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mF(Object(n),!0).forEach(function(r){lke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lke(t,e,n){return(e=cke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cke(t){var e=uke(t,"string");return typeof e=="symbol"?e:e+""}function uke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dke=t=>t.brush.height;function fke(t){var e=C_(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:J0;return n+i}return n},0)}function hke(t){var e=C_(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:J0;return n+i}return n},0)}function pke(t){var e=k_(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function gke(t){var e=k_(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ar=me([Bl,Fl,mQ,dke,fke,hke,pke,gke,zX,UTe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=Tx(Tx({},h),f),v=g.bottom;g.bottom+=r,g=WAe(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return Tx(Tx({brushBottom:v},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),mke=me(Ar,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),Y2=me(Bl,Fl,(t,e)=>({x:0,y:0,width:t,height:e})),vke=A.createContext(null),Pi=()=>A.useContext(vke)!=null,I_=t=>t.brush,P_=me([I_,Ar,mQ],(t,e,n)=>({height:t.height,x:He(t.x)?t.x:e.left,y:He(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:He(t.width)?t.width:e.width})),bC={},xC={},wC={},vF;function yke(){return vF||(vF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},S=function(...T){if(i?.aborted)return;s=this,o=T;const P=g==null;v(),c&&P&&f()};return S.schedule=v,S.cancel=x,S.flush=w,i?.addEventListener("abort",x,{once:!0}),S}t.debounce=e})(wC)),wC}var yF;function bke(){return yF||(yF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yke();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),v=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return v.cancel=g.cancel,v.flush=b,v}t.debounce=n})(xC)),xC}var bF;function xke(){return bF||(bF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bke();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(bC)),bC}var SC,xF;function wke(){return xF||(xF=1,SC=xke().throttle),SC}var Ske=wke();const _ke=jl(Ske);var R1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},go={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},bQ=(t,e,n)=>{var{width:r=go.width,height:i=go.height,aspect:a,maxHeight:s}=n,o=Jd(r)?t:Number(r),c=Jd(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},Eke={width:0,height:0,overflow:"visible"},Tke={width:0,overflowX:"visible"},Ake={height:0,overflowY:"visible"},kke={},Cke=t=>{var{width:e,height:n}=t,r=Jd(e),i=Jd(n);return r&&i?Eke:r?Tke:i?Ake:kke};function Ike(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=go.width,a=go.height):i===void 0?i=r&&r>0?void 0:go.width:a===void 0&&(a=r&&r>0?void 0:go.height),{width:i,height:a}}function rN(){return rN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rN.apply(null,arguments)}function wF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wF(Object(n),!0).forEach(function(r){Pke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pke(t,e,n){return(e=Nke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nke(t){var e=Dke(t,"string");return typeof e=="symbol"?e:e+""}function Dke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xQ=A.createContext(go.initialDimension);function Oke(t){return Po(t.width)&&Po(t.height)}function wQ(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return Oke(i)?A.createElement(xQ.Provider,{value:i},e):null}var X2=()=>A.useContext(xQ),Rke=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=go.initialDimension,width:i,height:a,minWidth:s=go.minWidth,minHeight:o,maxHeight:c,children:u,debounce:f=go.debounce,id:h,className:g,onResize:v,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=v,A.useImperativeHandle(e,()=>x.current);var[S,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),P=A.useCallback((I,R)=>{T(j=>{var B=Math.round(I),L=Math.round(R);return j.containerWidth===B&&j.containerHeight===L?j:{containerWidth:B,containerHeight:L}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return rg;var I=L=>{var z,W=L[0];if(W!=null){var{width:Q,height:G}=W.contentRect;P(Q,G),(z=w.current)===null||z===void 0||z.call(w,Q,G)}};f>0&&(I=_ke(I,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(I),{width:j,height:B}=x.current.getBoundingClientRect();return P(j,B),R.observe(x.current),()=>{R.disconnect()}},[P,f]);var{containerWidth:D,containerHeight:O}=S;R1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:N,calculatedHeight:C}=bQ(D,O,{width:i,height:a,aspect:n,maxHeight:c});return R1(N!=null&&N>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,C,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Yt("recharts-responsive-container",g),style:SF(SF({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:Cke({width:i,height:a})},A.createElement(wQ,{width:N,height:C},u)))}),N_=A.forwardRef((t,e)=>{var n=X2();if(Po(n.width)&&Po(n.height))return t.children;var{width:r,height:i}=Ike({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=bQ(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return He(a)&&He(s)?A.createElement(wQ,{width:a,height:s},t.children):A.createElement(Rke,rN({},t,{width:r,height:i,ref:e}))});function Q2(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var ey=()=>{var t,e=Pi(),n=Ge(mke),r=Ge(P_),i=(t=Ge(I_))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Mke={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},SQ=()=>{var t;return(t=Ge(Ar))!==null&&t!==void 0?t:Mke},_Q=()=>Ge(Bl),EQ=()=>Ge(Fl),Bt=t=>t.layout.layoutType,ig=()=>Ge(Bt),TQ=()=>{var t=ig();if(t==="horizontal"||t==="vertical")return t},AQ=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},jke=()=>{var t=ig();return t!==void 0},ty=t=>{var e=xn(),n=Pi(),{width:r,height:i}=t,a=X2(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&Po(s)&&Po(o)&&e(UAe({width:s,height:o}))},[e,n,s,o]),null},kQ=Symbol.for("immer-nothing"),_F=Symbol.for("immer-draftable"),wa=Symbol.for("immer-state");function vs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var n0=Object.getPrototypeOf;function Pp(t){return!!t&&!!t[wa]}function tf(t){return t?CQ(t)||Array.isArray(t)||!!t[_F]||!!t.constructor?.[_F]||ny(t)||O_(t):!1}var zke=Object.prototype.constructor.toString(),EF=new WeakMap;function CQ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=EF.get(n);return r===void 0&&(r=Function.toString.call(n),EF.set(n,r)),r===zke}function M1(t,e,n=!0){D_(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function D_(t){const e=t[wa];return e?e.type_:Array.isArray(t)?1:ny(t)?2:O_(t)?3:0}function iN(t,e){return D_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function IQ(t,e,n){const r=D_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Lke(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ny(t){return t instanceof Map}function O_(t){return t instanceof Set}function od(t){return t.copy_||t.base_}function aN(t,e){if(ny(t))return new Map(t);if(O_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=CQ(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[wa];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(n0(t),r)}else{const r=n0(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Z2(t,e=!1){return R_(t)||Pp(t)||!tf(t)||(D_(t)>1&&Object.defineProperties(t,{set:Ax,add:Ax,clear:Ax,delete:Ax}),Object.freeze(t),e&&Object.values(t).forEach(n=>Z2(n,!0))),t}function Vke(){vs(2)}var Ax={value:Vke};function R_(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Bke={};function nf(t){const e=Bke[t];return e||vs(0,t),e}var r0;function PQ(){return r0}function Fke(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TF(t,e){e&&(nf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function sN(t){oN(t),t.drafts_.forEach(Uke),t.drafts_=null}function oN(t){t===r0&&(r0=t.parent_)}function AF(t){return r0=Fke(r0,t)}function Uke(t){const e=t[wa];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function kF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[wa].modified_&&(sN(e),vs(4)),tf(t)&&(t=j1(e,t),e.parent_||z1(e,t)),e.patches_&&nf("Patches").generateReplacementPatches_(n[wa].base_,t,e.patches_,e.inversePatches_)):t=j1(e,n,[]),sN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==kQ?t:void 0}function j1(t,e,n){if(R_(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[wa];if(!i)return M1(e,(a,s)=>CF(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return z1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),M1(s,(c,u)=>CF(t,i,a,c,u,n,o),r),z1(t,a,!1),n&&t.patches_&&nf("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function CF(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=R_(i);if(!(o&&!s)){if(Pp(i)){const c=a&&e&&e.type_!==3&&!iN(e.assigned_,r)?a.concat(r):void 0,u=j1(t,i,c);if(IQ(n,r,u),Pp(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(tf(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;j1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(ny(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&z1(t,i)}}}function z1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Z2(e,n)}function $ke(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:PQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=J2;n&&(i=[r],a=i0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var J2={get(t,e){if(e===wa)return t;const n=od(t);if(!iN(n,e))return qke(t,n,e);const r=n[e];return t.finalized_||!tf(r)?r:r===_C(t.base_,e)?(EC(t),t.copy_[e]=cN(r,t)):r},has(t,e){return e in od(t)},ownKeys(t){return Reflect.ownKeys(od(t))},set(t,e,n){const r=NQ(od(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=_C(od(t),e),a=i?.[wa];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Lke(n,i)&&(n!==void 0||iN(t.base_,e)))return!0;EC(t),lN(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return _C(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,EC(t),lN(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=od(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){vs(11)},getPrototypeOf(t){return n0(t.base_)},setPrototypeOf(){vs(12)}},i0={};M1(J2,(t,e)=>{i0[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});i0.deleteProperty=function(t,e){return i0.set.call(this,t,e,void 0)};i0.set=function(t,e,n){return J2.set.call(this,t[0],e,n,t[0])};function _C(t,e){const n=t[wa];return(n?od(n):t)[e]}function qke(t,e,n){const r=NQ(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function NQ(t,e){if(!(e in t))return;let n=n0(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=n0(n)}}function lN(t){t.modified_||(t.modified_=!0,t.parent_&&lN(t.parent_))}function EC(t){t.copy_||(t.copy_=aN(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Gke=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&vs(6),r!==void 0&&typeof r!="function"&&vs(7);let i;if(tf(e)){const a=AF(this),s=cN(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?sN(a):oN(a)}return TF(a,r),kF(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===kQ&&(i=void 0),this.autoFreeze_&&Z2(i,!0),r){const a=[],s=[];nf("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else vs(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){tf(t)||vs(8),Pp(t)&&(t=Hke(t));const e=AF(this),n=cN(t,void 0);return n[wa].isManual_=!0,oN(e),n}finishDraft(t,e){const n=t&&t[wa];(!n||!n.isManual_)&&vs(9);const{scope_:r}=n;return TF(r,e),kF(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=nf("Patches").applyPatches_;return Pp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function cN(t,e){const n=ny(t)?nf("MapSet").proxyMap_(t,e):O_(t)?nf("MapSet").proxySet_(t,e):$ke(t,e);return(e?e.scope_:PQ()).drafts_.push(n),n}function Hke(t){return Pp(t)||vs(10,t),DQ(t)}function DQ(t){if(!tf(t)||R_(t))return t;const e=t[wa];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=aN(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=aN(t,!0);return M1(n,(i,a)=>{IQ(n,i,DQ(a))},r),e&&(e.finalized_=!1),n}var Kke=new Gke;Kke.produce;var Wke={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},OQ=Qi({name:"legend",initialState:Wke,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:_n()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ks(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:_n()},removeLegendPayload:{reducer(t,e){var n=ks(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:_n()}}}),{setLegendSize:G5e,setLegendSettings:H5e,addLegendPayload:RQ,replaceLegendPayload:MQ,removeLegendPayload:jQ}=OQ.actions,Yke=OQ.reducer;function uN(){return uN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uN.apply(null,arguments)}function IF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Am(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IF(Object(n),!0).forEach(function(r){Xke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xke(t,e,n){return(e=Qke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qke(t){var e=Zke(t,"string");return typeof e=="symbol"?e:e+""}function Zke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jke(t){return Array.isArray(t)&&Ha(t[0])&&Ha(t[1])?t.join(" ~ "):t}var gh={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},eCe=t=>{var{separator:e=gh.separator,contentStyle:n,itemStyle:r,labelStyle:i=gh.labelStyle,payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=gh.accessibilityLayer}=t,v=()=>{if(a&&a.length){var O={padding:0,margin:0},N=(o?m_(a,o):a).map((C,I)=>{if(C.type==="none")return null;var R=C.formatter||s||Jke,{value:j,name:B}=C,L=j,z=B;if(R){var W=R(j,B,C,I,a);if(Array.isArray(W))[L,z]=W;else if(W!=null)L=W;else return null}var Q=Am(Am({},gh.itemStyle),{},{color:C.color||gh.itemStyle.color},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:Q},Ha(z)?A.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Ha(z)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},L),A.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:O},N)}return null},b=Am(Am({},gh.contentStyle),n),x=Am({margin:0},i),w=!Vr(f),S=w?f:"",T=Yt("recharts-default-tooltip",c),P=Yt("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(S=h(f,a));var D=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",uN({className:T,style:b},D),A.createElement("p",{className:P,style:x},A.isValidElement(S)?S:"".concat(S)),v())},km="recharts-tooltip-wrapper",tCe={visibility:"hidden"};function nCe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Yt(km,{["".concat(km,"-right")]:He(n)&&e&&He(e.x)&&n>=e.x,["".concat(km,"-left")]:He(n)&&e&&He(e.x)&&n<e.x,["".concat(km,"-bottom")]:He(r)&&e&&He(e.y)&&r>=e.y,["".concat(km,"-top")]:He(r)&&e&&He(e.y)&&r<e.y})}function PF(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&He(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var v=f,b=g;return v<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function rCe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function iCe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:c,viewBox:u}=t,f,h,g;return o.height>0&&o.width>0&&n?(h=PF({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),g=PF({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),f=rCe({translateX:h,translateY:g,useTranslate3d:c})):f=tCe,{cssProperties:f,cssClasses:nCe({translateX:h,translateY:g,coordinate:n})}}function NF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(n),!0).forEach(function(r){dN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dN(t,e,n){return(e=aCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aCe(t){var e=sCe(t,"string");return typeof e=="symbol"?e:e+""}function sCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class oCe extends A.PureComponent{constructor(){super(...arguments),dN(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),dN(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:v,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:S}=this.props,T=typeof u=="number"?u:u.x,P=typeof u=="number"?u:u.y,{cssClasses:D,cssProperties:O}=iCe({allowEscapeViewBox:n,coordinate:s,offsetLeft:T,offsetTop:P,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:v}),N=S?{}:kx(kx({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),C=kx(kx({},N),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:D,style:C,ref:w},a)}}var zQ=()=>{var t;return(t=Ge(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function fN(){return fN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fN.apply(null,arguments)}function DF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DF(Object(n),!0).forEach(function(r){lCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lCe(t,e,n){return(e=cCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cCe(t){var e=uCe(t,"string");return typeof e=="symbol"?e:e+""}function uCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RF={curveBasisClosed:fEe,curveBasisOpen:hEe,curveBasis:dEe,curveBumpX:Q_e,curveBumpY:Z_e,curveLinearClosed:pEe,curveLinear:h_,curveMonotoneX:gEe,curveMonotoneY:mEe,curveNatural:vEe,curveStep:yEe,curveStepAfter:xEe,curveStepBefore:bEe},L1=t=>mt(t.x)&&mt(t.y),MF=t=>t.base!=null&&L1(t.base)&&L1(t),Cm=t=>t.x,Im=t=>t.y,dCe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(X0(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=RF["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return RF[n]||h_},jF={connectNulls:!1,type:"linear"},fCe=t=>{var{type:e=jF.type,points:n=[],baseLine:r,layout:i,connectNulls:a=jF.connectNulls}=t,s=dCe(e,i),o=a?n.filter(L1):n;if(Array.isArray(r)){var c,u=n.map((b,x)=>OF(OF({},b),{},{base:r[x]}));i==="vertical"?c=bx().y(Im).x1(Cm).x0(b=>b.base.x):c=bx().x(Cm).y1(Im).y0(b=>b.base.y);var f=c.defined(MF).curve(s),h=a?u.filter(MF):u;return f(h)}var g;i==="vertical"&&He(r)?g=bx().y(Im).x1(Cm).x0(r):He(r)?g=bx().x(Cm).y1(Im).y0(r):g=uX().x(Cm).y(Im);var v=g.defined(L1).curve(s);return v(o)},eR=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=ig();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?fCe(s):r;return A.createElement("path",fN({},Ns(t),qEe(t),{className:Yt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},hCe=["x","y","top","left","width","height","className"];function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hN.apply(null,arguments)}function zF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(n),!0).forEach(function(r){gCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gCe(t,e,n){return(e=mCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mCe(t){var e=vCe(t,"string");return typeof e=="symbol"?e:e+""}function vCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yCe(t,e){if(t==null)return{};var n,r,i=bCe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xCe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),wCe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=yCe(t,hCe),u=pCe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!He(e)||!He(n)||!He(a)||!He(s)||!He(r)||!He(i)?null:A.createElement("path",hN({},xa(u),{className:Yt("recharts-cross",o),d:xCe(e,n,a,s,r,i)}))};function SCe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function LF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LF(Object(n),!0).forEach(function(r){_Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ce(t,e,n){return(e=ECe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ECe(t){var e=TCe(t,"string");return typeof e=="symbol"?e:e+""}function TCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ACe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),LQ=(t,e,n)=>t.map(r=>"".concat(ACe(r)," ").concat(e,"ms ").concat(n)).join(","),kCe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),a0=(t,e)=>Object.keys(e).reduce((n,r)=>VF(VF({},n),{},{[r]:t(r,e[r])}),{});function BF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BF(Object(n),!0).forEach(function(r){CCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CCe(t,e,n){return(e=ICe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ICe(t){var e=PCe(t,"string");return typeof e=="symbol"?e:e+""}function PCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V1=(t,e,n)=>t+(e-t)*n,pN=t=>{var{from:e,to:n}=t;return e!==n},VQ=(t,e,n)=>{var r=a0((i,a)=>{if(pN(a)){var[s,o]=t(a.from,a.to,a.velocity);return br(br({},a),{},{from:s,velocity:o})}return a},e);return n<1?a0((i,a)=>pN(a)&&r[i]!=null?br(br({},a),{},{velocity:V1(a.velocity,r[i].velocity,n),from:V1(a.from,r[i].from,n)}):a,e):VQ(t,r,n-1)};function NCe(t,e,n,r,i,a){var s,o=r.reduce((g,v)=>br(br({},g),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),c=()=>a0((g,v)=>v.from,o),u=()=>!Object.values(o).filter(pN).length,f=null,h=g=>{s||(s=g);var v=g-s,b=v/n.dt;o=VQ(n,o,b),i(br(br(br({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function DCe(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var v=t[g],b=e[g];return v==null||b==null?h:br(br({},h),{},{[g]:[v,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,v=a0((x,w)=>V1(...w,n(g)),c);if(a(br(br(br({},t),e),v)),g<1)o=s.setTimeout(f);else{var b=a0((x,w)=>V1(...w,n(1)),c);a(br(br(br({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const OCe=(t,e,n,r,i,a)=>{var s=kCe(t,e);return n==null?()=>(i(br(br({},t),e)),()=>{}):n.isStepper===!0?NCe(t,e,n,s,i,a):DCe(t,e,n,r,s,i,a)};var B1=1e-4,BQ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],FQ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),FF=(t,e)=>n=>{var r=BQ(t,e);return FQ(r,n)},RCe=(t,e)=>n=>{var r=BQ(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return FQ(i,n)},MCe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},jCe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=MCe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},zCe=(t,e,n,r)=>{var i=FF(t,n),a=FF(e,r),s=RCe(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var v=i(h)-f,b=s(h);if(Math.abs(v-f)<B1||b<B1)return a(h);h=o(h-v/b)}return a(h)};return c.isStepper=!1,c},UF=function(){return zCe(...jCe(...arguments))},LCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<B1&&Math.abs(h)<B1?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},VCe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return UF(t);case"spring":return LCe();default:if(t.split("(")[0]==="cubic-bezier")return UF(t)}return typeof t=="function"?t:null};function BCe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class FCe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function UCe(){return BCe(new FCe)}var $Ce=A.createContext(UCe);function qCe(t,e){var n=A.useContext($Ce);return A.useMemo(()=>e??n(t),[t,e,n])}var GCe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),M_={isSsr:GCe()},HCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},$F={t:0},TC={t:1};function j_(t){var e=Jr(t,HCe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!M_.isSsr:n,h=qCe(e.animationId,e.animationManager),[g,v]=A.useState(f?$F:TC),b=A.useRef(null);return A.useEffect(()=>{f||v(TC)},[f]),A.useEffect(()=>{if(!f||!r)return rg;var x=OCe($F,TC,VCe(a),i,v,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function z_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Zv(e)),r=A.useRef(t);return r.current!==t&&(n.current=Zv(e),r.current=t),n.current}var KCe=["radius"],WCe=["radius"],qF,GF,HF,KF,WF,YF,XF,QF,ZF,JF;function eU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eU(Object(n),!0).forEach(function(r){YCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YCe(t,e,n){return(e=XCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XCe(t){var e=QCe(t,"string");return typeof e=="symbol"?e:e+""}function QCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F1.apply(null,arguments)}function nU(t,e){if(t==null)return{};var n,r,i=ZCe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ZCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function no(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var rU=(t,e,n,r,i)=>{var a=$c(n),s=$c(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&Array.isArray(i)){for(var g=[0,0,0,0],v=0,b=4;v<b;v++){var x,w=(x=i[v])!==null&&x!==void 0?x:0;g[v]=w>o?o:w}h=Bn(qF||(qF=no(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Bn(GF||(GF=no(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=Bn(HF||(HF=no(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=Bn(KF||(KF=no(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Bn(WF||(WF=no(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Bn(YF||(YF=no(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=Bn(XF||(XF=no(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=Bn(QF||(QF=no(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);h=Bn(ZF||(ZF=no(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*S,S,S,f,t+u*S,e,t+n-u*S,e,S,S,f,t+n,e+c*S,t+n,e+r-c*S,S,S,f,t+n-u*S,e+r,t+u*S,e+r,S,S,f,t,e+r-c*S)}else h=Bn(JF||(JF=no(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},iU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UQ=t=>{var e=Jr(t,iU),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Y=n.current.getTotalLength();Y&&i(Y)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),S=A.useRef(c),T=A.useRef(a),P=A.useRef(s),D=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),O=z_(D,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var N=Yt("recharts-rectangle",f);if(!x){var C=xa(e),{radius:I}=C,R=nU(C,KCe);return A.createElement("path",F1({},R,{x:$c(a),y:$c(s),width:$c(o),height:$c(c),radius:typeof u=="number"?u:void 0,className:N,d:rU(a,s,o,c,u)}))}var j=w.current,B=S.current,L=T.current,z=P.current,W="0px ".concat(r===-1?1:r,"px"),Q="".concat(r,"px 0px"),G=LQ(["strokeDasharray"],g,typeof h=="string"?h:iU.animationEasing);return A.createElement(j_,{animationId:O,key:O,canBegin:r>0,duration:g,easing:h,isActive:x,begin:v},Y=>{var J=yr(j,o,Y),ie=yr(B,c,Y),X=yr(L,a,Y),U=yr(z,s,Y);n.current&&(w.current=J,S.current=ie,T.current=X,P.current=U);var Z;b?Y>0?Z={transition:G,strokeDasharray:Q}:Z={strokeDasharray:W}:Z={strokeDasharray:Q};var ee=xa(e),{radius:K}=ee,ue=nU(ee,WCe);return A.createElement("path",F1({},ue,{radius:typeof u=="number"?u:void 0,className:N,d:rU(X,U,J,ie,u),ref:n,style:tU(tU({},Z),e.style)}))})};function aU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(n),!0).forEach(function(r){JCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JCe(t,e,n){return(e=eIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eIe(t){var e=tIe(t,"string");return typeof e=="symbol"?e:e+""}function tIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U1=Math.PI/180,nIe=t=>t*180/Math.PI,ur=(t,e,n,r)=>({x:t+Math.cos(-U1*r)*n,y:e+Math.sin(-U1*r)*n}),$Q=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},rIe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},iIe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=rIe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:nIe(c),angleInRadian:c}},aIe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},sIe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},oIe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=iIe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=aIe(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?sU(sU({},e),{},{radius:i,angle:sIe(f,e)}):null};function qQ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=ur(e,n,r,i),o=ur(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var oU,lU,cU,uU,dU,fU,hU;function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(null,arguments)}function Sd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var lIe=(t,e)=>{var n=zr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Cx=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/U1,h=c?i:i+a*f,g=ur(e,n,u,h),v=ur(e,n,r,h),b=c?i-a*f:i,x=ur(e,n,u*Math.cos(f*U1),b);return{center:g,circleTangency:v,lineTangency:x,theta:f}},GQ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=lIe(a,s),c=a+o,u=ur(e,n,i,a),f=ur(e,n,i,c),h=Bn(oU||(oU=Sd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=ur(e,n,r,a),v=ur(e,n,r,c);h+=Bn(lU||(lU=Sd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Bn(cU||(cU=Sd(["L ",","," Z"])),e,n);return h},cIe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=zr(u-c),{circleTangency:h,lineTangency:g,theta:v}=Cx({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=Cx({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-v-w;if(S<0)return s?Bn(uU||(uU=Sd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):GQ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var T=Bn(dU||(dU=Sd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:P,lineTangency:D,theta:O}=Cx({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:N,lineTangency:C,theta:I}=Cx({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-u):Math.abs(c-u)-O-I;if(R<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Bn(fU||(fU=Sd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),C.x,C.y,a,a,+(f<0),N.x,N.y,r,r,+(R>180),+(f>0),P.x,P.y,a,a,+(f<0),D.x,D.y)}else T+=Bn(hU||(hU=Sd(["L",",","Z"])),e,n);return T},uIe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},HQ=t=>{var e=Jr(t,uIe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Yt("recharts-sector",h),v=a-i,b=hi(s,v,0,!0),x;return b>0&&Math.abs(u-f)<360?x=cIe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,v/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=GQ({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),A.createElement("path",gN({},xa(e),{className:g,d:x}))};function dIe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(TX(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=ur(r,i,a,o),u=ur(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return qQ(e)}}var AC={},kC={},CC={},pU;function fIe(){return pU||(pU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MX();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(CC)),CC}var gU;function hIe(){return gU||(gU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fIe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(kC)),kC}var mU;function pIe(){return mU||(mU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jX(),n=hIe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(AC)),AC}var IC,vU;function gIe(){return vU||(vU=1,IC=pIe().range),IC}var mIe=gIe();const KQ=jl(mIe);function Xc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vIe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tR(t){let e,n,r;t.length!==2?(e=Xc,n=(o,c)=>Xc(t(o),c),r=(o,c)=>t(o)-c):(e=t===Xc||t===vIe?t:yIe,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function yIe(){return 0}function WQ(t){return t===null?NaN:+t}function*bIe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const xIe=tR(Xc),ry=xIe.right;tR(WQ).center;class yU extends Map{constructor(e,n=_Ie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(bU(this,e))}has(e){return super.has(bU(this,e))}set(e,n){return super.set(wIe(this,e),n)}delete(e){return super.delete(SIe(this,e))}}function bU({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function wIe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function SIe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function _Ie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function EIe(t=Xc){if(t===Xc)return YQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function YQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const TIe=Math.sqrt(50),AIe=Math.sqrt(10),kIe=Math.sqrt(2);function $1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=TIe?10:a>=AIe?5:a>=kIe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?$1(t,e,n*2):[o,c,u]}function mN(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?$1(e,t,n):$1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function vN(t,e,n){return e=+e,t=+t,n=+n,$1(t,e,n)[2]}function yN(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?vN(e,t,n):vN(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function xU(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function wU(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function XQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?YQ:EIe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),v=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));XQ(t,e,v,b,i)}const a=t[e];let s=n,o=r;for(Pm(t,n,e),i(t[r],a)>0&&Pm(t,n,r);s<o;){for(Pm(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Pm(t,n,o):(++o,Pm(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Pm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function CIe(t,e,n){if(t=Float64Array.from(bIe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return wU(t);if(e>=1)return xU(t);var r,i=(r-1)*e,a=Math.floor(i),s=xU(XQ(t,a).subarray(0,a+1)),o=wU(t.subarray(a+1));return s+(o-s)*(i-a)}}function IIe(t,e,n=WQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function PIe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Za(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ul(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const bN=Symbol("implicit");function nR(){var t=new yU,e=[],n=[],r=bN;function i(a){let s=t.get(a);if(s===void 0){if(r!==bN)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new yU;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return nR(e,n).unknown(r)},Za.apply(i,arguments),i}function rR(){var t=nR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,v=i<r,b=v?i:r,x=v?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=PIe(g).map(function(S){return b+a*S});return n(v?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return rR(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},Za.apply(h(),arguments)}function QQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return QQ(e())},t}function NIe(){return QQ(rR.apply(null,arguments).paddingInner(1))}function iR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ZQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function iy(){}var s0=.7,q1=1/s0,Qh="\\s*([+-]?\\d+)\\s*",o0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DIe=/^#([0-9a-f]{3,8})$/,OIe=new RegExp(`^rgb\\(${Qh},${Qh},${Qh}\\)$`),RIe=new RegExp(`^rgb\\(${_o},${_o},${_o}\\)$`),MIe=new RegExp(`^rgba\\(${Qh},${Qh},${Qh},${o0}\\)$`),jIe=new RegExp(`^rgba\\(${_o},${_o},${_o},${o0}\\)$`),zIe=new RegExp(`^hsl\\(${o0},${_o},${_o}\\)$`),LIe=new RegExp(`^hsla\\(${o0},${_o},${_o},${o0}\\)$`),SU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iR(iy,l0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_U,formatHex:_U,formatHex8:VIe,formatHsl:BIe,formatRgb:EU,toString:EU});function _U(){return this.rgb().formatHex()}function VIe(){return this.rgb().formatHex8()}function BIe(){return JQ(this).formatHsl()}function EU(){return this.rgb().formatRgb()}function l0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=DIe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?TU(e):n===3?new Hi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ix(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ix(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=OIe.exec(t))?new Hi(e[1],e[2],e[3],1):(e=RIe.exec(t))?new Hi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=MIe.exec(t))?Ix(e[1],e[2],e[3],e[4]):(e=jIe.exec(t))?Ix(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zIe.exec(t))?CU(e[1],e[2]/100,e[3]/100,1):(e=LIe.exec(t))?CU(e[1],e[2]/100,e[3]/100,e[4]):SU.hasOwnProperty(t)?TU(SU[t]):t==="transparent"?new Hi(NaN,NaN,NaN,0):null}function TU(t){return new Hi(t>>16&255,t>>8&255,t&255,1)}function Ix(t,e,n,r){return r<=0&&(t=e=n=NaN),new Hi(t,e,n,r)}function FIe(t){return t instanceof iy||(t=l0(t)),t?(t=t.rgb(),new Hi(t.r,t.g,t.b,t.opacity)):new Hi}function xN(t,e,n,r){return arguments.length===1?FIe(t):new Hi(t,e,n,r??1)}function Hi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}iR(Hi,xN,ZQ(iy,{brighter(t){return t=t==null?q1:Math.pow(q1,t),new Hi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?s0:Math.pow(s0,t),new Hi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Hi(Rd(this.r),Rd(this.g),Rd(this.b),G1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:AU,formatHex:AU,formatHex8:UIe,formatRgb:kU,toString:kU}));function AU(){return`#${_d(this.r)}${_d(this.g)}${_d(this.b)}`}function UIe(){return`#${_d(this.r)}${_d(this.g)}${_d(this.b)}${_d((isNaN(this.opacity)?1:this.opacity)*255)}`}function kU(){const t=G1(this.opacity);return`${t===1?"rgb(":"rgba("}${Rd(this.r)}, ${Rd(this.g)}, ${Rd(this.b)}${t===1?")":`, ${t})`}`}function G1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _d(t){return t=Rd(t),(t<16?"0":"")+t.toString(16)}function CU(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ys(t,e,n,r)}function JQ(t){if(t instanceof ys)return new ys(t.h,t.s,t.l,t.opacity);if(t instanceof iy||(t=l0(t)),!t)return new ys;if(t instanceof ys)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new ys(s,o,c,t.opacity)}function $Ie(t,e,n,r){return arguments.length===1?JQ(t):new ys(t,e,n,r??1)}function ys(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}iR(ys,$Ie,ZQ(iy,{brighter(t){return t=t==null?q1:Math.pow(q1,t),new ys(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?s0:Math.pow(s0,t),new ys(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Hi(PC(t>=240?t-240:t+120,i,r),PC(t,i,r),PC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ys(IU(this.h),Px(this.s),Px(this.l),G1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=G1(this.opacity);return`${t===1?"hsl(":"hsla("}${IU(this.h)}, ${Px(this.s)*100}%, ${Px(this.l)*100}%${t===1?")":`, ${t})`}`}}));function IU(t){return t=(t||0)%360,t<0?t+360:t}function Px(t){return Math.max(0,Math.min(1,t||0))}function PC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const aR=t=>()=>t;function qIe(t,e){return function(n){return t+n*e}}function GIe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function HIe(t){return(t=+t)==1?eZ:function(e,n){return n-e?GIe(e,n,t):aR(isNaN(e)?n:e)}}function eZ(t,e){var n=e-t;return n?qIe(t,n):aR(isNaN(t)?e:t)}const PU=(function t(e){var n=HIe(e);function r(i,a){var s=n((i=xN(i)).r,(a=xN(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=eZ(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function KIe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function WIe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function YIe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=ag(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function XIe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function H1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function QIe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ag(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var wN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,NC=new RegExp(wN.source,"g");function ZIe(t){return function(){return t}}function JIe(t){return function(e){return t(e)+""}}function ePe(t,e){var n=wN.lastIndex=NC.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=wN.exec(t))&&(i=NC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:H1(r,i)})),n=NC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?JIe(c[0].x):ZIe(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function ag(t,e){var n=typeof e,r;return e==null||n==="boolean"?aR(e):(n==="number"?H1:n==="string"?(r=l0(e))?(e=r,PU):ePe:e instanceof l0?PU:e instanceof Date?XIe:WIe(e)?KIe:Array.isArray(e)?YIe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?QIe:H1)(t,e)}function sR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function tPe(t,e){e===void 0&&(e=t,t=ag);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function nPe(t){return function(){return t}}function K1(t){return+t}var NU=[0,1];function Ai(t){return t}function SN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:nPe(isNaN(e)?NaN:.5)}function rPe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function iPe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=SN(i,r),a=n(s,a)):(r=SN(r,i),a=n(a,s)),function(o){return a(r(o))}}function aPe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=SN(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=ry(t,o,1,r)-1;return a[c](i[c](o))}}function ay(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function L_(){var t=NU,e=NU,n=ag,r,i,a,s=Ai,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==Ai&&(s=rPe(t[0],t[g-1])),o=g>2?aPe:iPe,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),H1)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,K1),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=sR,f()},h.clamp=function(g){return arguments.length?(s=g?!0:Ai,f()):s!==Ai},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,v){return r=g,i=v,f()}}function oR(){return L_()(Ai,Ai)}function sPe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function W1(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Np(t){return t=W1(Math.abs(t)),t?t[1]:NaN}function oPe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function lPe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var cPe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function c0(t){if(!(e=cPe.exec(t)))throw new Error("invalid format: "+t);var e;return new lR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}c0.prototype=lR.prototype;function lR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}lR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function uPe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Y1;function dPe(t,e){var n=W1(t,e);if(!n)return Y1=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(Y1=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+W1(t,Math.max(0,e+a-1))[0]}function DU(t,e){var n=W1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const OU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:sPe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>DU(t*100,e),r:DU,s:dPe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function RU(t){return t}var MU=Array.prototype.map,jU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function fPe(t){var e=t.grouping===void 0||t.thousands===void 0?RU:oPe(MU.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?RU:lPe(MU.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h,g){h=c0(h);var v=h.fill,b=h.align,x=h.sign,w=h.symbol,S=h.zero,T=h.width,P=h.comma,D=h.precision,O=h.trim,N=h.type;N==="n"?(P=!0,N="g"):OU[N]||(D===void 0&&(D=12),O=!0,N="g"),(S||v==="0"&&b==="=")&&(S=!0,v="0",b="=");var C=(g&&g.prefix!==void 0?g.prefix:"")+(w==="$"?n:w==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():""),I=(w==="$"?r:/[%p]/.test(N)?s:"")+(g&&g.suffix!==void 0?g.suffix:""),R=OU[N],j=/[defgprs%]/.test(N);D=D===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function B(L){var z=C,W=I,Q,G,Y;if(N==="c")W=R(L)+W,L="";else{L=+L;var J=L<0||1/L<0;if(L=isNaN(L)?c:R(Math.abs(L),D),O&&(L=uPe(L)),J&&+L==0&&x!=="+"&&(J=!1),z=(J?x==="("?x:o:x==="-"||x==="("?"":x)+z,W=(N==="s"&&!isNaN(L)&&Y1!==void 0?jU[8+Y1/3]:"")+W+(J&&x==="("?")":""),j){for(Q=-1,G=L.length;++Q<G;)if(Y=L.charCodeAt(Q),48>Y||Y>57){W=(Y===46?i+L.slice(Q+1):L.slice(Q))+W,L=L.slice(0,Q);break}}}P&&!S&&(L=e(L,1/0));var ie=z.length+L.length+W.length,X=ie<T?new Array(T-ie+1).join(v):"";switch(P&&S&&(L=e(X+L,X.length?T-W.length:1/0),X=""),b){case"<":L=z+L+W+X;break;case"=":L=z+X+L+W;break;case"^":L=X.slice(0,ie=X.length>>1)+z+L+W+X.slice(ie);break;default:L=X+z+L+W;break}return a(L)}return B.toString=function(){return h+""},B}function f(h,g){var v=Math.max(-8,Math.min(8,Math.floor(Np(g)/3)))*3,b=Math.pow(10,-v),x=u((h=c0(h),h.type="f",h),{suffix:jU[8+v/3]});return function(w){return x(b*w)}}return{format:u,formatPrefix:f}}var Nx,cR,tZ;hPe({thousands:",",grouping:[3],currency:["$",""]});function hPe(t){return Nx=fPe(t),cR=Nx.format,tZ=Nx.formatPrefix,Nx}function pPe(t){return Math.max(0,-Np(Math.abs(t)))}function gPe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Np(e)/3)))*3-Np(Math.abs(t)))}function mPe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Np(e)-Np(t))+1}function nZ(t,e,n,r){var i=yN(t,e,n),a;switch(r=c0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=gPe(i,s))&&(r.precision=a),tZ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=mPe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=pPe(i))&&(r.precision=a-(r.type==="%")*2);break}}return cR(r)}function xu(t){var e=t.domain;return t.ticks=function(n){var r=e();return mN(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return nZ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=vN(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function rZ(){var t=oR();return t.copy=function(){return ay(t,rZ())},Za.apply(t,arguments),xu(t)}function iZ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,K1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return iZ(t).unknown(e)},t=arguments.length?Array.from(t,K1):[0,1],xu(n)}function aZ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function zU(t){return Math.log(t)}function LU(t){return Math.exp(t)}function vPe(t){return-Math.log(-t)}function yPe(t){return-Math.exp(-t)}function bPe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function xPe(t){return t===10?bPe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function wPe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function VU(t){return(e,n)=>-t(-e,n)}function uR(t){const e=t(zU,LU),n=e.domain;let r=10,i,a;function s(){return i=wPe(r),a=xPe(r),n()[0]<0?(i=VU(i),a=VU(a),t(vPe,yPe)):t(zU,LU),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),v=i(f),b,x;const w=o==null?10:+o;let S=[];if(!(r%1)&&v-g<w){if(g=Math.floor(g),v=Math.ceil(v),u>0){for(;g<=v;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}}else for(;g<=v;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}S.length*2<w&&(S=mN(u,f,w))}else S=mN(g,v,Math.min(v-g,w)).map(a);return h?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=c0(c)).precision==null&&(c.trim=!0),c=cR(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(aZ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function sZ(){const t=uR(L_()).domain([1,10]);return t.copy=()=>ay(t,sZ()).base(t.base()),Za.apply(t,arguments),t}function BU(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function FU(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function dR(t){var e=1,n=t(BU(e),FU(e));return n.constant=function(r){return arguments.length?t(BU(e=+r),FU(e)):e},xu(n)}function oZ(){var t=dR(L_());return t.copy=function(){return ay(t,oZ()).constant(t.constant())},Za.apply(t,arguments)}function UU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function SPe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _Pe(t){return t<0?-t*t:t*t}function fR(t){var e=t(Ai,Ai),n=1;function r(){return n===1?t(Ai,Ai):n===.5?t(SPe,_Pe):t(UU(n),UU(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},xu(e)}function hR(){var t=fR(L_());return t.copy=function(){return ay(t,hR()).exponent(t.exponent())},Za.apply(t,arguments),t}function EPe(){return hR.apply(null,arguments).exponent(.5)}function $U(t){return Math.sign(t)*t*t}function TPe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function lZ(){var t=oR(),e=[0,1],n=!1,r;function i(a){var s=TPe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert($U(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,K1)).map($U)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return lZ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Za.apply(i,arguments),xu(i)}function cZ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=IIe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[ry(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Xc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return cZ().domain(t).range(e).unknown(r)},Za.apply(a,arguments)}function uZ(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[ry(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return uZ().domain([t,e]).range(i).unknown(a)},Za.apply(xu(s),arguments)}function dZ(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[ry(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return dZ().domain(t).range(e).unknown(n)},Za.apply(i,arguments)}const DC=new Date,OC=new Date;function kr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>kr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(DC.setTime(+a),OC.setTime(+s),t(DC),t(OC),Math.floor(n(DC,OC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const X1=kr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);X1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?kr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):X1);X1.range;const ul=1e3,Ba=ul*60,dl=Ba*60,Pl=dl*24,pR=Pl*7,qU=Pl*30,RC=Pl*365,Ed=kr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ul)},(t,e)=>(e-t)/ul,t=>t.getUTCSeconds());Ed.range;const gR=kr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ul)},(t,e)=>{t.setTime(+t+e*Ba)},(t,e)=>(e-t)/Ba,t=>t.getMinutes());gR.range;const mR=kr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ba)},(t,e)=>(e-t)/Ba,t=>t.getUTCMinutes());mR.range;const vR=kr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ul-t.getMinutes()*Ba)},(t,e)=>{t.setTime(+t+e*dl)},(t,e)=>(e-t)/dl,t=>t.getHours());vR.range;const yR=kr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*dl)},(t,e)=>(e-t)/dl,t=>t.getUTCHours());yR.range;const sy=kr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ba)/Pl,t=>t.getDate()-1);sy.range;const V_=kr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pl,t=>t.getUTCDate()-1);V_.range;const fZ=kr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pl,t=>Math.floor(t/Pl));fZ.range;function pf(t){return kr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ba)/pR)}const B_=pf(0),Q1=pf(1),APe=pf(2),kPe=pf(3),Dp=pf(4),CPe=pf(5),IPe=pf(6);B_.range;Q1.range;APe.range;kPe.range;Dp.range;CPe.range;IPe.range;function gf(t){return kr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/pR)}const F_=gf(0),Z1=gf(1),PPe=gf(2),NPe=gf(3),Op=gf(4),DPe=gf(5),OPe=gf(6);F_.range;Z1.range;PPe.range;NPe.range;Op.range;DPe.range;OPe.range;const bR=kr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());bR.range;const xR=kr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());xR.range;const Nl=kr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Nl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Nl.range;const Dl=kr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Dl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Dl.range;function hZ(t,e,n,r,i,a){const s=[[Ed,1,ul],[Ed,5,5*ul],[Ed,15,15*ul],[Ed,30,30*ul],[a,1,Ba],[a,5,5*Ba],[a,15,15*Ba],[a,30,30*Ba],[i,1,dl],[i,3,3*dl],[i,6,6*dl],[i,12,12*dl],[r,1,Pl],[r,2,2*Pl],[n,1,pR],[e,1,qU],[e,3,3*qU],[t,1,RC]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const v=h&&typeof h.range=="function"?h:c(u,f,h),b=v?v.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,v=tR(([,,w])=>w).right(s,g);if(v===s.length)return t.every(yN(u/RC,f/RC,h));if(v===0)return X1.every(Math.max(yN(u,f,h),1));const[b,x]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return b.every(x)}return[o,c]}const[RPe,MPe]=hZ(Dl,xR,F_,fZ,yR,mR),[jPe,zPe]=hZ(Nl,bR,B_,sy,vR,gR);function MC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Nm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function LPe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=Dm(i),f=Om(i),h=Dm(a),g=Om(a),v=Dm(s),b=Om(s),x=Dm(o),w=Om(o),S=Dm(c),T=Om(c),P={a:Y,A:J,b:ie,B:X,c:null,d:XU,e:XU,f:oNe,g:vNe,G:bNe,H:iNe,I:aNe,j:sNe,L:pZ,m:lNe,M:cNe,p:U,q:Z,Q:JU,s:e$,S:uNe,u:dNe,U:fNe,V:hNe,w:pNe,W:gNe,x:null,X:null,y:mNe,Y:yNe,Z:xNe,"%":ZU},D={a:ee,A:K,b:ue,B:ne,c:null,d:QU,e:QU,f:ENe,g:RNe,G:jNe,H:wNe,I:SNe,j:_Ne,L:mZ,m:TNe,M:ANe,p:oe,q:Se,Q:JU,s:e$,S:kNe,u:CNe,U:INe,V:PNe,w:NNe,W:DNe,x:null,X:null,y:ONe,Y:MNe,Z:zNe,"%":ZU},O={a:j,A:B,b:L,B:z,c:W,d:WU,e:WU,f:eNe,g:KU,G:HU,H:YU,I:YU,j:XPe,L:JPe,m:YPe,M:QPe,p:R,q:WPe,Q:nNe,s:rNe,S:ZPe,u:$Pe,U:qPe,V:GPe,w:UPe,W:HPe,x:Q,X:G,y:KU,Y:HU,Z:KPe,"%":tNe};P.x=N(n,P),P.X=N(r,P),P.c=N(e,P),D.x=N(n,D),D.X=N(r,D),D.c=N(e,D);function N(se,Ae){return function(ve){var te=[],Pe=-1,be=0,_e=se.length,De,Oe,Ye;for(ve instanceof Date||(ve=new Date(+ve));++Pe<_e;)se.charCodeAt(Pe)===37&&(te.push(se.slice(be,Pe)),(Oe=GU[De=se.charAt(++Pe)])!=null?De=se.charAt(++Pe):Oe=De==="e"?" ":"0",(Ye=Ae[De])&&(De=Ye(ve,Oe)),te.push(De),be=Pe+1);return te.push(se.slice(be,Pe)),te.join("")}}function C(se,Ae){return function(ve){var te=Nm(1900,void 0,1),Pe=I(te,se,ve+="",0),be,_e;if(Pe!=ve.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Ae&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(be=jC(Nm(te.y,0,1)),_e=be.getUTCDay(),be=_e>4||_e===0?Z1.ceil(be):Z1(be),be=V_.offset(be,(te.V-1)*7),te.y=be.getUTCFullYear(),te.m=be.getUTCMonth(),te.d=be.getUTCDate()+(te.w+6)%7):(be=MC(Nm(te.y,0,1)),_e=be.getDay(),be=_e>4||_e===0?Q1.ceil(be):Q1(be),be=sy.offset(be,(te.V-1)*7),te.y=be.getFullYear(),te.m=be.getMonth(),te.d=be.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),_e="Z"in te?jC(Nm(te.y,0,1)).getUTCDay():MC(Nm(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(_e+5)%7:te.w+te.U*7-(_e+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,jC(te)):MC(te)}}function I(se,Ae,ve,te){for(var Pe=0,be=Ae.length,_e=ve.length,De,Oe;Pe<be;){if(te>=_e)return-1;if(De=Ae.charCodeAt(Pe++),De===37){if(De=Ae.charAt(Pe++),Oe=O[De in GU?Ae.charAt(Pe++):De],!Oe||(te=Oe(se,ve,te))<0)return-1}else if(De!=ve.charCodeAt(te++))return-1}return te}function R(se,Ae,ve){var te=u.exec(Ae.slice(ve));return te?(se.p=f.get(te[0].toLowerCase()),ve+te[0].length):-1}function j(se,Ae,ve){var te=v.exec(Ae.slice(ve));return te?(se.w=b.get(te[0].toLowerCase()),ve+te[0].length):-1}function B(se,Ae,ve){var te=h.exec(Ae.slice(ve));return te?(se.w=g.get(te[0].toLowerCase()),ve+te[0].length):-1}function L(se,Ae,ve){var te=S.exec(Ae.slice(ve));return te?(se.m=T.get(te[0].toLowerCase()),ve+te[0].length):-1}function z(se,Ae,ve){var te=x.exec(Ae.slice(ve));return te?(se.m=w.get(te[0].toLowerCase()),ve+te[0].length):-1}function W(se,Ae,ve){return I(se,e,Ae,ve)}function Q(se,Ae,ve){return I(se,n,Ae,ve)}function G(se,Ae,ve){return I(se,r,Ae,ve)}function Y(se){return s[se.getDay()]}function J(se){return a[se.getDay()]}function ie(se){return c[se.getMonth()]}function X(se){return o[se.getMonth()]}function U(se){return i[+(se.getHours()>=12)]}function Z(se){return 1+~~(se.getMonth()/3)}function ee(se){return s[se.getUTCDay()]}function K(se){return a[se.getUTCDay()]}function ue(se){return c[se.getUTCMonth()]}function ne(se){return o[se.getUTCMonth()]}function oe(se){return i[+(se.getUTCHours()>=12)]}function Se(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Ae=N(se+="",P);return Ae.toString=function(){return se},Ae},parse:function(se){var Ae=C(se+="",!1);return Ae.toString=function(){return se},Ae},utcFormat:function(se){var Ae=N(se+="",D);return Ae.toString=function(){return se},Ae},utcParse:function(se){var Ae=C(se+="",!0);return Ae.toString=function(){return se},Ae}}}var GU={"-":"",_:" ",0:"0"},Br=/^\s*\d+/,VPe=/^%/,BPe=/[\\^$*+?|[\]().{}]/g;function Rt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function FPe(t){return t.replace(BPe,"\\$&")}function Dm(t){return new RegExp("^(?:"+t.map(FPe).join("|")+")","i")}function Om(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function UPe(t,e,n){var r=Br.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $Pe(t,e,n){var r=Br.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function qPe(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function GPe(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function HPe(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function HU(t,e,n){var r=Br.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function KU(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function KPe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function WPe(t,e,n){var r=Br.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function YPe(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function WU(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function XPe(t,e,n){var r=Br.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function YU(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function QPe(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ZPe(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function JPe(t,e,n){var r=Br.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function eNe(t,e,n){var r=Br.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function tNe(t,e,n){var r=VPe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function nNe(t,e,n){var r=Br.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function rNe(t,e,n){var r=Br.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function XU(t,e){return Rt(t.getDate(),e,2)}function iNe(t,e){return Rt(t.getHours(),e,2)}function aNe(t,e){return Rt(t.getHours()%12||12,e,2)}function sNe(t,e){return Rt(1+sy.count(Nl(t),t),e,3)}function pZ(t,e){return Rt(t.getMilliseconds(),e,3)}function oNe(t,e){return pZ(t,e)+"000"}function lNe(t,e){return Rt(t.getMonth()+1,e,2)}function cNe(t,e){return Rt(t.getMinutes(),e,2)}function uNe(t,e){return Rt(t.getSeconds(),e,2)}function dNe(t){var e=t.getDay();return e===0?7:e}function fNe(t,e){return Rt(B_.count(Nl(t)-1,t),e,2)}function gZ(t){var e=t.getDay();return e>=4||e===0?Dp(t):Dp.ceil(t)}function hNe(t,e){return t=gZ(t),Rt(Dp.count(Nl(t),t)+(Nl(t).getDay()===4),e,2)}function pNe(t){return t.getDay()}function gNe(t,e){return Rt(Q1.count(Nl(t)-1,t),e,2)}function mNe(t,e){return Rt(t.getFullYear()%100,e,2)}function vNe(t,e){return t=gZ(t),Rt(t.getFullYear()%100,e,2)}function yNe(t,e){return Rt(t.getFullYear()%1e4,e,4)}function bNe(t,e){var n=t.getDay();return t=n>=4||n===0?Dp(t):Dp.ceil(t),Rt(t.getFullYear()%1e4,e,4)}function xNe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Rt(e/60|0,"0",2)+Rt(e%60,"0",2)}function QU(t,e){return Rt(t.getUTCDate(),e,2)}function wNe(t,e){return Rt(t.getUTCHours(),e,2)}function SNe(t,e){return Rt(t.getUTCHours()%12||12,e,2)}function _Ne(t,e){return Rt(1+V_.count(Dl(t),t),e,3)}function mZ(t,e){return Rt(t.getUTCMilliseconds(),e,3)}function ENe(t,e){return mZ(t,e)+"000"}function TNe(t,e){return Rt(t.getUTCMonth()+1,e,2)}function ANe(t,e){return Rt(t.getUTCMinutes(),e,2)}function kNe(t,e){return Rt(t.getUTCSeconds(),e,2)}function CNe(t){var e=t.getUTCDay();return e===0?7:e}function INe(t,e){return Rt(F_.count(Dl(t)-1,t),e,2)}function vZ(t){var e=t.getUTCDay();return e>=4||e===0?Op(t):Op.ceil(t)}function PNe(t,e){return t=vZ(t),Rt(Op.count(Dl(t),t)+(Dl(t).getUTCDay()===4),e,2)}function NNe(t){return t.getUTCDay()}function DNe(t,e){return Rt(Z1.count(Dl(t)-1,t),e,2)}function ONe(t,e){return Rt(t.getUTCFullYear()%100,e,2)}function RNe(t,e){return t=vZ(t),Rt(t.getUTCFullYear()%100,e,2)}function MNe(t,e){return Rt(t.getUTCFullYear()%1e4,e,4)}function jNe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Op(t):Op.ceil(t),Rt(t.getUTCFullYear()%1e4,e,4)}function zNe(){return"+0000"}function ZU(){return"%"}function JU(t){return+t}function e$(t){return Math.floor(+t/1e3)}var mh,yZ,bZ;LNe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function LNe(t){return mh=LPe(t),yZ=mh.format,mh.parse,bZ=mh.utcFormat,mh.utcParse,mh}function VNe(t){return new Date(t)}function BNe(t){return t instanceof Date?+t:+new Date(+t)}function wR(t,e,n,r,i,a,s,o,c,u){var f=oR(),h=f.invert,g=f.domain,v=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),S=u("%a %d"),T=u("%b %d"),P=u("%B"),D=u("%Y");function O(N){return(c(N)<N?v:o(N)<N?b:s(N)<N?x:a(N)<N?w:r(N)<N?i(N)<N?S:T:n(N)<N?P:D)(N)}return f.invert=function(N){return new Date(h(N))},f.domain=function(N){return arguments.length?g(Array.from(N,BNe)):g().map(VNe)},f.ticks=function(N){var C=g();return t(C[0],C[C.length-1],N??10)},f.tickFormat=function(N,C){return C==null?O:u(C)},f.nice=function(N){var C=g();return(!N||typeof N.range!="function")&&(N=e(C[0],C[C.length-1],N??10)),N?g(aZ(C,N)):f},f.copy=function(){return ay(f,wR(t,e,n,r,i,a,s,o,c,u))},f}function FNe(){return Za.apply(wR(jPe,zPe,Nl,bR,B_,sy,vR,gR,Ed,yZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function UNe(){return Za.apply(wR(RPe,MPe,Dl,xR,F_,V_,yR,mR,Ed,bZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function U_(){var t=0,e=1,n,r,i,a,s=Ai,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var v,b;return arguments.length?([v,b]=g,s=h(v,b),u):[s(0),s(1)]}}return u.range=f(ag),u.rangeRound=f(sR),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function wu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function xZ(){var t=xu(U_()(Ai));return t.copy=function(){return wu(t,xZ())},Ul.apply(t,arguments)}function wZ(){var t=uR(U_()).domain([1,10]);return t.copy=function(){return wu(t,wZ()).base(t.base())},Ul.apply(t,arguments)}function SZ(){var t=dR(U_());return t.copy=function(){return wu(t,SZ()).constant(t.constant())},Ul.apply(t,arguments)}function SR(){var t=fR(U_());return t.copy=function(){return wu(t,SR()).exponent(t.exponent())},Ul.apply(t,arguments)}function $Ne(){return SR.apply(null,arguments).exponent(.5)}function _Z(){var t=[],e=Ai;function n(r){if(r!=null&&!isNaN(r=+r))return e((ry(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Xc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>CIe(t,a/r))},n.copy=function(){return _Z(e).domain(t)},Ul.apply(n,arguments)}function $_(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Ai,f,h=!1,g;function v(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v):[t,e,n]},v.clamp=function(x){return arguments.length?(h=!!x,v):h},v.interpolator=function(x){return arguments.length?(u=x,v):u};function b(x){return function(w){var S,T,P;return arguments.length?([S,T,P]=w,u=tPe(x,[S,T,P]),v):[u(0),u(.5),u(1)]}}return v.range=b(ag),v.rangeRound=b(sR),v.unknown=function(x){return arguments.length?(g=x,v):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v}}function EZ(){var t=xu($_()(Ai));return t.copy=function(){return wu(t,EZ())},Ul.apply(t,arguments)}function TZ(){var t=uR($_()).domain([.1,1,10]);return t.copy=function(){return wu(t,TZ()).base(t.base())},Ul.apply(t,arguments)}function AZ(){var t=dR($_());return t.copy=function(){return wu(t,AZ()).constant(t.constant())},Ul.apply(t,arguments)}function _R(){var t=fR($_());return t.copy=function(){return wu(t,_R()).exponent(t.exponent())},Ul.apply(t,arguments)}function qNe(){return _R.apply(null,arguments).exponent(.5)}const Ym=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rR,scaleDiverging:EZ,scaleDivergingLog:TZ,scaleDivergingPow:_R,scaleDivergingSqrt:qNe,scaleDivergingSymlog:AZ,scaleIdentity:iZ,scaleImplicit:bN,scaleLinear:rZ,scaleLog:sZ,scaleOrdinal:nR,scalePoint:NIe,scalePow:hR,scaleQuantile:cZ,scaleQuantize:uZ,scaleRadial:lZ,scaleSequential:xZ,scaleSequentialLog:wZ,scaleSequentialPow:SR,scaleSequentialQuantile:_Z,scaleSequentialSqrt:$Ne,scaleSequentialSymlog:SZ,scaleSqrt:EPe,scaleSymlog:oZ,scaleThreshold:dZ,scaleTime:FNe,scaleUtc:UNe,tickFormat:nZ},Symbol.toStringTag,{value:"Module"}));var $l=t=>t.chartData,q_=me([$l],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),kZ=(t,e,n,r)=>r?q_(t):$l(t),GNe=(t,e,n)=>n?q_(t):$l(t);function Ol(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(mt(e)&&mt(n))return!0}return!1}function t$(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function CZ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(mt(n))i=n;else if(typeof n=="function")return;if(mt(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Ol(s))return s}}function HNe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ol(r))return t$(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(He(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&hF.test(i)){var c=hF.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(He(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&pF.test(a)){var f=pF.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(Ol(g))return e==null?g:t$(g,e,n)}}}var sg=1e9,KNe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},TR,Tn=!0,Wa="[DecimalError] ",Md=Wa+"Invalid argument: ",ER=Wa+"Exponent out of range: ",og=Math.floor,ld=Math.pow,WNe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ha,jr=1e7,vn=7,IZ=9007199254740991,J1=og(IZ/vn),Ue={};Ue.absoluteValue=Ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ue.comparedTo=Ue.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*vn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(t){return vl(this,new this.constructor(t))};Ue.dividedToIntegerBy=Ue.idiv=function(t){var e=this,n=e.constructor;return sn(vl(e,new n(t),0,1),n.precision)};Ue.equals=Ue.eq=function(t){return!this.cmp(t)};Ue.exponent=function(){return dr(this)};Ue.greaterThan=Ue.gt=function(t){return this.cmp(t)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(t){return this.cmp(t)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(t){return this.cmp(t)<0};Ue.lessThanOrEqualTo=Ue.lte=function(t){return this.cmp(t)<1};Ue.logarithm=Ue.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ha))throw Error(Wa+"NaN");if(n.s<1)throw Error(Wa+(n.s?"NaN":"-Infinity"));return n.eq(ha)?new r(0):(Tn=!1,e=vl(u0(n,a),u0(t,a),a),Tn=!0,sn(e,i))};Ue.minus=Ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?DZ(e,t):PZ(e,(t.s=-t.s,t))};Ue.modulo=Ue.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Wa+"NaN");return n.s?(Tn=!1,e=vl(n,t,0,1).times(t),Tn=!0,n.minus(e)):sn(new r(n),i)};Ue.naturalExponential=Ue.exp=function(){return NZ(this)};Ue.naturalLogarithm=Ue.ln=function(){return u0(this)};Ue.negated=Ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ue.plus=Ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?PZ(e,t):DZ(e,(t.s=-t.s,t))};Ue.precision=Ue.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Md+t);if(e=dr(i)+1,r=i.d.length-1,n=r*vn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ue.squareRoot=Ue.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Wa+"NaN")}for(t=dr(o),Tn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=mo(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=og((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(vl(o,a,s+2)).times(.5),mo(a.d).slice(0,s)===(e=mo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(sn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return Tn=!0,sn(r,n)};Ue.times=Ue.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,v=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=v.length,c<u&&(a=g,g=v,v=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+v[r]*g[i-r-1]+e,a[i--]=o%jr|0,e=o/jr|0;a[i]=(a[i]+e)%jr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Tn?sn(t,h.precision):t};Ue.toDecimalPlaces=Ue.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(No(t,0,sg),e===void 0?e=r.rounding:No(e,0,8),sn(n,t+dr(n)+1,e))};Ue.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=rf(r,!0):(No(t,0,sg),e===void 0?e=i.rounding:No(e,0,8),r=sn(new i(r),t+1,e),n=rf(r,!0,t+1)),n};Ue.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?rf(i):(No(t,0,sg),e===void 0?e=a.rounding:No(e,0,8),r=sn(new a(i),t+dr(i)+1,e),n=rf(r.abs(),!1,t+dr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var t=this,e=t.constructor;return sn(new e(t),dr(t)+1,e.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(ha);if(o=new c(o),!o.s){if(t.s<1)throw Error(Wa+"Infinity");return o}if(o.eq(ha))return o;if(r=c.precision,t.eq(ha))return sn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=IZ){for(i=new c(ha),e=Math.ceil(r/vn+4),Tn=!1;n%2&&(i=i.times(o),r$(i.d,e)),n=og(n/2),n!==0;)o=o.times(o),r$(o.d,e);return Tn=!0,t.s<0?new c(ha).div(i):sn(i,r)}}else if(a<0)throw Error(Wa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Tn=!1,i=t.times(u0(o,r+u)),Tn=!0,i=NZ(i),i.s=a,i};Ue.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=dr(i),r=rf(i,n<=a.toExpNeg||n>=a.toExpPos)):(No(t,1,sg),e===void 0?e=a.rounding:No(e,0,8),i=sn(new a(i),t,e),n=dr(i),r=rf(i,t<=n||n<=a.toExpNeg,t)),r};Ue.toSignificantDigits=Ue.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(No(t,1,sg),e===void 0?e=r.rounding:No(e,0,8)),sn(new r(n),t,e)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=dr(t),n=t.constructor;return rf(t,e<=n.toExpNeg||e>=n.toExpPos)};function PZ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Tn?sn(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/vn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/jr|0,c[a]%=jr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,Tn?sn(e,h):e}function No(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Md+t)}function mo(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=vn-r.length,n&&(a+=Ic(n)),a+=r;s=t[e],r=s+"",n=vn-r.length,n&&(a+=Ic(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var vl=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%jr|0,s=a/jr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*jr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,v,b,x,w,S,T,P,D,O,N,C,I,R=r.constructor,j=r.s==i.s?1:-1,B=r.d,L=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Wa+"Division by zero");for(c=r.e-i.e,C=L.length,O=B.length,v=new R(j),b=v.d=[],u=0;L[u]==(B[u]||0);)++u;if(L[u]>(B[u]||0)&&--c,a==null?T=a=R.precision:s?T=a+(dr(r)-dr(i))+1:T=a,T<0)return new R(0);if(T=T/vn+2|0,u=0,C==1)for(f=0,L=L[0],T++;(u<O||f)&&T--;u++)P=f*jr+(B[u]||0),b[u]=P/L|0,f=P%L|0;else{for(f=jr/(L[0]+1)|0,f>1&&(L=t(L,f),B=t(B,f),C=L.length,O=B.length),D=C,x=B.slice(0,C),w=x.length;w<C;)x[w++]=0;I=L.slice(),I.unshift(0),N=L[0],L[1]>=jr/2&&++N;do f=0,o=e(L,x,C,w),o<0?(S=x[0],C!=w&&(S=S*jr+(x[1]||0)),f=S/N|0,f>1?(f>=jr&&(f=jr-1),h=t(L,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,C<g?I:L,g))):(f==0&&(o=f=1),h=L.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(L,x,C,w),o<1&&(f++,n(x,C<w?I:L,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=B[D]||0:(x=[B[D]],w=1);while((D++<O||x[0]!==void 0)&&T--)}return b[0]||b.shift(),v.e=c,sn(v,s?a+dr(v)+1:a)}})();function NZ(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(dr(t)>16)throw Error(ER+dr(t));if(!t.s)return new f(ha);for(Tn=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(ld(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(ha),f.precision=o;;){if(i=sn(i.times(t),o),n=n.times(++c),s=a.plus(vl(i,n,o)),mo(s.d).slice(0,o)===mo(a.d).slice(0,o)){for(;u--;)a=sn(a.times(a),o);return f.precision=h,e==null?(Tn=!0,sn(a,h)):a}a=s}}function dr(t){for(var e=t.e*vn,n=t.d[0];n>=10;n/=10)e++;return e}function zC(t,e,n){if(e>t.LN10.sd())throw Tn=!0,n&&(t.precision=n),Error(Wa+"LN10 precision limit exceeded");return sn(new t(t.LN10),e)}function Ic(t){for(var e="";t--;)e+="0";return e}function u0(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,v=t,b=v.d,x=v.constructor,w=x.precision;if(v.s<1)throw Error(Wa+(v.s?"NaN":"-Infinity"));if(v.eq(ha))return new x(0);if(e==null?(Tn=!1,u=w):u=e,v.eq(10))return e==null&&(Tn=!0),zC(x,u);if(u+=g,x.precision=u,n=mo(b),r=n.charAt(0),a=dr(v),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=mo(v.d),r=n.charAt(0),h++;a=dr(v),r>1?(v=new x("0."+n),a++):v=new x(r+"."+n.slice(1))}else return c=zC(x,u+2,w).times(a+""),v=u0(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(Tn=!0,sn(v,w)):v;for(o=s=v=vl(v.minus(ha),v.plus(ha),u),f=sn(v.times(v),u),i=3;;){if(s=sn(s.times(f),u),c=o.plus(vl(s,new x(i),u)),mo(c.d).slice(0,u)===mo(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(zC(x,u+2,w).times(a+""))),o=vl(o,new x(h),u),x.precision=w,e==null?(Tn=!0,sn(o,w)):o;o=c,i+=2}}function n$(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=og(n/vn),t.d=[],r=(n+1)%vn,n<0&&(r+=vn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=vn;r<i;)t.d.push(+e.slice(r,r+=vn));e=e.slice(r),r=vn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Tn&&(t.e>J1||t.e<-J1))throw Error(ER+n)}else t.s=0,t.e=0,t.d=[0];return t}function sn(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=vn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/vn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=vn,i=r-vn+s}if(n!==void 0&&(a=ld(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/ld(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=dr(t),h.length=1,e=e-a-1,h[0]=ld(10,(vn-e%vn)%vn),t.e=og(-e/vn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=ld(10,vn-r),h[f]=i>0?(u/ld(10,s-i)%ld(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==jr&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=jr)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(Tn&&(t.e>J1||t.e<-J1))throw Error(ER+dr(t));return t}function DZ(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Tn?sn(e,v):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(v/vn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=jr-1;--c[a],c[i]+=jr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Tn?sn(e,v):e):new g(0)}function rf(t,e,n){var r,i=dr(t),a=mo(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ic(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ic(-i-1)+a,n&&(r=n-s)>0&&(a+=Ic(r))):i>=s?(a+=Ic(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Ic(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Ic(r))),t.s<0?"-"+a:a}function r$(t,e){if(t.length>e)return t.length=e,!0}function OZ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Md+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return n$(s,a.toString())}else if(typeof a!="string")throw Error(Md+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,WNe.test(a))n$(s,a);else throw Error(Md+a)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=OZ,i.config=i.set=YNe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function YNe(t){if(!t||typeof t!="object")throw Error(Wa+"Object expected");var e,n,r,i=["precision",1,sg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(og(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Md+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Md+n+": "+r);return this}var TR=OZ(KNe);ha=new TR(1);const Ht=TR;function RZ(t){var e;return t===0?e=1:e=Math.floor(new Ht(t).abs().log(10).toNumber())+1,e}function MZ(t,e,n){for(var r=new Ht(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var jZ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},zZ=(t,e,n)=>{if(t.lte(0))return new Ht(0);var r=RZ(t.toNumber()),i=new Ht(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Ht(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new Ht(c.toNumber()):new Ht(Math.ceil(c.toNumber()))},XNe=(t,e,n)=>{var r=new Ht(1),i=new Ht(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Ht(10).pow(RZ(t)-1),i=new Ht(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ht(Math.floor(t)))}else t===0?i=new Ht(Math.floor((e-1)/2)):n||(i=new Ht(Math.floor(t)));for(var s=Math.floor((e-1)/2),o=[],c=0;c<e;c++)o.push(i.add(new Ht(c-s).mul(r)).toNumber());return o},LZ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Ht(0),tickMin:new Ht(0),tickMax:new Ht(0)};var s=zZ(new Ht(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new Ht(0):(o=new Ht(e).add(n).div(2),o=o.sub(new Ht(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new Ht(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?LZ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new Ht(c).mul(s)),tickMax:o.add(new Ht(u).mul(s))})},QNe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=jZ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),c];return n>r?u.reverse():u}if(o===c)return XNe(o,i,a);var{step:f,tickMin:h,tickMax:g}=LZ(o,c,s,a,0),v=MZ(h,g.add(new Ht(.1).mul(f)),f);return n>r?v.reverse():v},ZNe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=jZ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=zZ(new Ht(o).sub(s).div(c-1),a,0),f=[...MZ(new Ht(s),new Ht(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},VZ=t=>t.rootProps.maxBarSize,JNe=t=>t.rootProps.barGap,BZ=t=>t.rootProps.barCategoryGap,eDe=t=>t.rootProps.barSize,oy=t=>t.rootProps.stackOffset,FZ=t=>t.rootProps.reverseStackOrder,AR=t=>t.options.chartName,kR=t=>t.rootProps.syncId,UZ=t=>t.rootProps.syncMethod,CR=t=>t.options.eventEmitter,Lr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ed={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},ro={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},G_=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function H_(t,e,n){if(n!=="auto")return n;if(t!=null)return bu(t,e)?"category":"number"}function i$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i$(Object(n),!0).forEach(function(r){tDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tDe(t,e,n){return(e=nDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nDe(t){var e=rDe(t,"string");return typeof e=="symbol"?e:e+""}function rDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a$={allowDataOverflow:ed.allowDataOverflow,allowDecimals:ed.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ed.angleAxisId,includeHidden:!1,name:void 0,reversed:ed.reversed,scale:ed.scale,tick:ed.tick,tickCount:void 0,ticks:void 0,type:ed.type,unit:void 0},s$={allowDataOverflow:ro.allowDataOverflow,allowDecimals:ro.allowDecimals,allowDuplicatedCategory:ro.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ro.radiusAxisId,includeHidden:ro.includeHidden,name:void 0,reversed:ro.reversed,scale:ro.scale,tick:ro.tick,tickCount:ro.tickCount,ticks:void 0,type:ro.type,unit:void 0},iDe=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},IR=me([iDe,AQ],(t,e)=>{var n;if(t!=null)return t;var r=(n=H_(e,"angleAxis",a$.type))!==null&&n!==void 0?n:"category";return eS(eS({},a$),{},{type:r})}),aDe=(t,e)=>t.polarAxis.radiusAxis[e],PR=me([aDe,AQ],(t,e)=>{var n;if(t!=null)return t;var r=(n=H_(e,"radiusAxis",s$.type))!==null&&n!==void 0?n:"category";return eS(eS({},s$),{},{type:r})}),K_=t=>t.polarOptions,NR=me([Bl,Fl,Ar],$Q),$Z=me([K_,NR],(t,e)=>{if(t!=null)return hi(t.innerRadius,e,0)}),qZ=me([K_,NR],(t,e)=>{if(t!=null)return hi(t.outerRadius,e,e*.8)}),sDe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},GZ=me([K_],sDe);me([IR,GZ],G_);var HZ=me([NR,$Z,qZ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});me([PR,HZ],G_);var KZ=me([Bt,K_,$Z,qZ,Bl,Fl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:hi(s,i,i/2),cy:hi(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),Rn=(t,e)=>e,ly=(t,e,n)=>n;function DR(t){return t?.id}function WZ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=DR(o);u.forEach((h,g)=>{var v=a==null||i?g:String(bn(h,a,null)),b=bn(h,o.dataKey,0),x;s.has(v)?x=s.get(v):x={},Object.assign(x,{[f]:b}),s.set(v,x)})}}),Array.from(s.values())}function W_(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var Y_=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function X_(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function oDe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Fr=t=>{var e=Bt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},lg=t=>t.tooltip.settings.axisId;function lDe(t){if(t in Ym)return Ym[t]();var e="scale".concat(X0(t));if(e in Ym)return Ym[e]()}function o$(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var s=i[0],o=i[1];return s<=o?a>=s&&a<=o:a>=o&&a<=s},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,s)=>{var o=t(a);if(o!=null){if(t.bandwidth&&s!==null&&s!==void 0&&s.position){var c=t.bandwidth();switch(s.position){case"middle":o+=c/2;break;case"end":o+=c;break}}return o}}}}function l$(t,e,n){if(typeof t=="function")return o$(t.copy().domain(e).range(n));if(t!=null){var r=lDe(t);if(r!=null)return r.domain(e).range(n),o$(r)}}var YZ=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Ol(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];mt(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function c$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(n),!0).forEach(function(r){cDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cDe(t,e,n){return(e=uDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uDe(t){var e=dDe(t,"string");return typeof e=="symbol"?e:e+""}function dDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _N=[0,"auto"],Or={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},XZ=(t,e)=>t.cartesianAxis.xAxis[e],Mo=(t,e)=>{var n=XZ(t,e);return n??Or},Rr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:_N,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:J0},QZ=(t,e)=>t.cartesianAxis.yAxis[e],jo=(t,e)=>{var n=QZ(t,e);return n??Rr},fDe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},OR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??fDe},qn=(t,e,n)=>{switch(e){case"xAxis":return Mo(t,n);case"yAxis":return jo(t,n);case"zAxis":return OR(t,n);case"angleAxis":return IR(t,n);case"radiusAxis":return PR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},hDe=(t,e,n)=>{switch(e){case"xAxis":return Mo(t,n);case"yAxis":return jo(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},cg=(t,e,n)=>{switch(e){case"xAxis":return Mo(t,n);case"yAxis":return jo(t,n);case"angleAxis":return IR(t,n);case"radiusAxis":return PR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ZZ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function RR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var MR=t=>t.graphicalItems.cartesianItems,pDe=me([Rn,ly],RR),jR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),cy=me([MR,qn,pDe],jR,{memoizeOptions:{resultEqualityCheck:X_}}),JZ=me([cy],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(W_)),eJ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),gDe=me([cy],eJ),zR=t=>t.map(e=>e.data).filter(Boolean).flat(1),mDe=me([cy],zR,{memoizeOptions:{resultEqualityCheck:X_}}),LR=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},VR=me([mDe,kZ],LR),BR=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:bn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:bn(i,r)}))):t.map(r=>({value:r})),Q_=me([VR,qn,cy],BR);function tJ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function gw(t){if(Ha(t)||t instanceof Date){var e=Number(t);if(mt(e))return e}}function u$(t){if(Array.isArray(t)){var e=[gw(t[0]),gw(t[1])];return Ol(e)?e:void 0}var n=gw(t);if(n!=null)return[n,n]}function Rl(t){return t.map(gw).filter(Gi)}function vDe(t,e,n){return!n||typeof e!="number"||Io(e)?[]:n.length?Rl(n.flatMap(r=>{var i=bn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!mt(a)||!mt(s)))return[e-a,e+s]})):[]}var Cr=t=>{var e=Fr(t),n=lg(t);return cg(t,e,n)},uy=me([Cr],t=>t?.dataKey),yDe=me([JZ,kZ,Cr],WZ),nJ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map(DR);return[o,{stackedData:JAe(t,f,n),graphicalItems:u}]}))},EN=me([yDe,JZ,oy,FZ],nJ),rJ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=ike(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},bDe=me([qn],t=>t.allowDataOverflow),FR=t=>{var e;if(t==null||!("domain"in t))return _N;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Rl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:_N},UR=me([qn],FR),$R=me([UR,bDe],CZ),xDe=me([EN,$l,Rn,$R],rJ,{memoizeOptions:{resultEqualityCheck:Y_}}),Z_=t=>t.errorBars,wDe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>tJ(n,r)),nS=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},qR=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(S=>tJ(i,S)),g=bn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),v=vDe(o,g,h);if(v.length>=2){var b=Math.min(...v),x=Math.max(...v);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=u$(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=u$(bn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),mt(a)&&mt(s))return[a,s]},SDe=me([VR,qn,gDe,Z_,Rn],qR,{memoizeOptions:{resultEqualityCheck:Y_}});function _De(t){var{value:e}=t;if(Ha(e)||e instanceof Date)return e}var EDe=(t,e,n)=>{var r=t.map(_De).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&SX(r))?KQ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},iJ=t=>t.referenceElements.dots,ug=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),TDe=me([iJ,Rn,ly],ug),aJ=t=>t.referenceElements.areas,ADe=me([aJ,Rn,ly],ug),sJ=t=>t.referenceElements.lines,kDe=me([sJ,Rn,ly],ug),oJ=(t,e)=>{if(t!=null){var n=Rl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},CDe=me(TDe,Rn,oJ),lJ=(t,e)=>{if(t!=null){var n=Rl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},IDe=me([ADe,Rn],lJ);function PDe(t){var e;if(t.x!=null)return Rl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Rl(n)}function NDe(t){var e;if(t.y!=null)return Rl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Rl(n)}var cJ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?PDe(r):NDe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},DDe=me([kDe,Rn],cJ),ODe=me(CDe,DDe,IDe,(t,e,n)=>nS(t,n,e)),GR=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?nS(r,a,i):nS(a,i);return HNe(e,u,t.allowDataOverflow)},RDe=me([qn,UR,$R,xDe,SDe,ODe,Bt,Rn],GR,{memoizeOptions:{resultEqualityCheck:Y_}}),MDe=[0,1],HR=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=bu(e,a);if(u&&o==null){var f;return KQ(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?EDe(r,t,u):i==="expand"?MDe:s}},KR=me([qn,Bt,VR,Q_,oy,Rn,RDe],HR);function jDe(t){return t in Ym}var uJ=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(X0(r));return jDe(a)?a:"point"}}},Su=me([qn,ZZ,AR],uJ);function WR(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?l$(t.scale,n,r):l$(e,n,r)}var YR=(t,e,n)=>{var r=FR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ol(t))return QNe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ol(t))return ZNe(t,e.tickCount,e.allowDecimals)}},XR=me([KR,cg,Su],YR),QR=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Ol(e)&&Array.isArray(n)&&n.length>0){var i,a,s=e[0],o=(i=n[0])!==null&&i!==void 0?i:0,c=e[1],u=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(s,o),Math.max(c,u)]}return e},zDe=me([qn,KR,XR,Rn],QR),LDe=me(Q_,qn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Rl(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),dJ=me(LDe,Bt,BZ,Ar,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!mt(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=hi(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),VDe=(t,e,n)=>{var r=Mo(t,e);return r==null||typeof r.padding!="string"?0:dJ(t,"xAxis",e,n,r.padding)},BDe=(t,e,n)=>{var r=jo(t,e);return r==null||typeof r.padding!="string"?0:dJ(t,"yAxis",e,n,r.padding)},FDe=me(Mo,VDe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),UDe=me(jo,BDe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),$De=me([Ar,FDe,P_,I_,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),qDe=me([Ar,Bt,UDe,P_,I_,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),dy=(t,e,n,r)=>{var i;switch(e){case"xAxis":return $De(t,n,r);case"yAxis":return qDe(t,n,r);case"zAxis":return(i=OR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return GZ(t);case"radiusAxis":return HZ(t,n);default:return}},fJ=me([qn,dy],G_),GDe=me([Su,zDe],YZ),Rp=me([qn,Su,GDe,fJ],WR);me([cy,Z_,Rn],wDe);function hJ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var J_=(t,e)=>e,eE=(t,e,n)=>n,HDe=me(k_,J_,eE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(hJ)),KDe=me(C_,J_,eE,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(hJ)),pJ=(t,e)=>({width:t.width,height:e.height}),WDe=(t,e)=>{var n=typeof e.width=="number"?e.width:J0;return{width:n,height:t.height}},gJ=me(Ar,Mo,pJ),YDe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},XDe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},QDe=me(Fl,Ar,HDe,J_,eE,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=pJ(e,o);s==null&&(s=YDe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),ZDe=me(Bl,Ar,KDe,J_,eE,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=WDe(e,o);s==null&&(s=XDe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),JDe=(t,e)=>{var n=Mo(t,e);if(n!=null)return QDe(t,n.orientation,n.mirror)},eOe=me([Ar,Mo,JDe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),tOe=(t,e)=>{var n=jo(t,e);if(n!=null)return ZDe(t,n.orientation,n.mirror)},nOe=me([Ar,jo,tOe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),mJ=me(Ar,jo,(t,e)=>{var n=typeof e.width=="number"?e.width:J0;return{width:n,height:t.height}}),d$=(t,e,n)=>{switch(e){case"xAxis":return gJ(t,n).width;case"yAxis":return mJ(t,n).height;default:return}},vJ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=bu(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&SX(c))return c}},ZR=me([Bt,Q_,qn,Rn],vJ),yJ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=bu(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},JR=me([Bt,Q_,cg,Rn],yJ),f$=me([Bt,hDe,Su,Rp,ZR,JR,dy,XR,Rn],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=bu(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),rOe=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=bu(t,c),{type:f,ticks:h,tickCount:g}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/v:0;b=c==="angleAxis"&&a!=null&&a.length>=2?zr(a[0]-a[1])*2*b:b;var x=h||i;return x?x.map((w,S)=>{var T=s?s.indexOf(w):w,P=r.map(T);return mt(P)?{index:S,coordinate:P+b,value:w,offset:b}:null}).filter(Gi):u&&o?o.map((w,S)=>{var T=r.map(w);return mt(T)?{coordinate:T+b,value:w,index:S,offset:b}:null}).filter(Gi):r.ticks?r.ticks(g).map((w,S)=>{var T=r.map(w);return mt(T)?{coordinate:T+b,value:w,index:S,offset:b}:null}).filter(Gi):r.domain().map((w,S)=>{var T=r.map(w);return mt(T)?{coordinate:T+b,value:s?s[w]:w,index:S,offset:b}:null}).filter(Gi)}},bJ=me([Bt,cg,Su,Rp,XR,dy,ZR,JR,Rn],rOe),iOe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=bu(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?zr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>{var g=n.map(f);return mt(g)?{coordinate:g+u,value:f,index:h,offset:u}:null}).filter(Gi):n.ticks?n.ticks(c).map((f,h)=>{var g=n.map(f);return mt(g)?{coordinate:g+u,value:f,index:h,offset:u}:null}).filter(Gi):n.domain().map((f,h)=>{var g=n.map(f);return mt(g)?{coordinate:g+u,value:i?i[f]:f,index:h,offset:u}:null}).filter(Gi)}},Mp=me([Bt,cg,Rp,dy,ZR,JR,Rn],iOe),jp=me(qn,Rp,(t,e)=>{if(!(t==null||e==null))return tS(tS({},t),{},{scale:e})}),aOe=me([qn,Su,KR,fJ],WR);me((t,e,n)=>OR(t,n),aOe,(t,e)=>{if(!(t==null||e==null))return tS(tS({},t),{},{scale:e})});var sOe=me([Bt,k_,C_],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),xJ=t=>t.options.defaultTooltipEventType,wJ=t=>t.options.validateTooltipEventTypes;function SJ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function eM(t,e){var n=xJ(t),r=wJ(t);return SJ(e,n,r)}function oOe(t){return Ge(e=>eM(e,t))}var _J=(t,e)=>{var n,r=Number(e);if(!(Io(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},lOe=t=>t.tooltip.settings,jc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},cOe={itemInteraction:{click:jc,hover:jc},axisInteraction:{click:jc,hover:jc},keyboardInteraction:jc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},EJ=Qi({name:"tooltip",initialState:cOe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:_n()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ks(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:_n()},removeTooltipEntrySettings:{reducer(t,e){var n=ks(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:_n()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:uOe,replaceTooltipEntrySettings:dOe,removeTooltipEntrySettings:fOe,setTooltipSettingsState:hOe,setActiveMouseOverItemIndex:TJ,mouseLeaveItem:pOe,mouseLeaveChart:AJ,setActiveClickItemIndex:gOe,setMouseOverAxisIndex:kJ,setMouseClickAxisIndex:mOe,setSyncInteraction:TN,setKeyboardInteraction:AN}=EJ.actions,vOe=EJ.reducer;function h$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(n),!0).forEach(function(r){yOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yOe(t,e,n){return(e=bOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bOe(t){var e=xOe(t,"string");return typeof e=="symbol"?e:e+""}function xOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wOe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function SOe(t){return t.index!=null}var CJ=(t,e,n,r)=>{if(e==null)return jc;var i=wOe(t,e,n);if(i==null)return jc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(SOe(i)){if(a)return Dx(Dx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Dx(Dx({},jc),{},{coordinate:i.coordinate})};function _Oe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function EOe(t,e){var n=_Oe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function TOe(t,e,n){if(n==null||e==null)return!0;var r=bn(t,e);return r==null||!Ol(n)?!0:EOe(r,n)}var tM=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!mt(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||TOe(u,n,r)?String(c):null},IJ=(t,e,n,r,i,a,s)=>{if(a!=null){var o=s[0],c=o?.getPosition(a);if(c!=null)return c;var u=i?.[Number(a)];if(u)return n==="horizontal"?{x:u.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:u.coordinate}}},PJ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},NJ=t=>t.options.tooltipPayloadSearcher,dg=t=>t.tooltip;function p$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function g$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(n),!0).forEach(function(r){AOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AOe(t,e,n){return(e=kOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kOe(t){var e=COe(t,"string");return typeof e=="symbol"?e:e+""}function COe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IOe(t,e){return t??e}var DJ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,v)=>{var b,{dataDefinedOnItem:x,settings:w}=v,S=IOe(x,o),T=Array.isArray(S)?hQ(S,u,f):S,P=(b=w?.dataKey)!==null&&b!==void 0?b:r,D=w?.nameKey,O;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?O=OEe(T,r,i):O=a(T,e,c,D),Array.isArray(O))O.forEach(C=>{var I=g$(g$({},w),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});g.push(gF({tooltipEntrySettings:I,dataKey:C.dataKey,payload:C.payload,value:bn(C.payload,C.dataKey),name:C.name}))});else{var N;g.push(gF({tooltipEntrySettings:w,dataKey:P,payload:O,value:bn(O,P),name:(N=bn(O,D))!==null&&N!==void 0?N:w?.name}))}return g},h)}},nM=me([Cr,ZZ,AR],uJ),POe=me([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),NOe=me([Fr,lg],RR),fg=me([POe,Cr,NOe],jR,{memoizeOptions:{resultEqualityCheck:X_}}),DOe=me([fg],t=>t.filter(W_)),OOe=me([fg],zR,{memoizeOptions:{resultEqualityCheck:X_}}),hg=me([OOe,$l],LR),ROe=me([DOe,$l,Cr],WZ),rM=me([hg,Cr,fg],BR),OJ=me([Cr],FR),MOe=me([Cr],t=>t.allowDataOverflow),RJ=me([OJ,MOe],CZ),jOe=me([fg],t=>t.filter(W_)),zOe=me([ROe,jOe,oy,FZ],nJ),LOe=me([zOe,$l,Fr,RJ],rJ),VOe=me([fg],eJ),BOe=me([hg,Cr,VOe,Z_,Fr],qR,{memoizeOptions:{resultEqualityCheck:Y_}}),FOe=me([iJ,Fr,lg],ug),UOe=me([FOe,Fr],oJ),$Oe=me([aJ,Fr,lg],ug),qOe=me([$Oe,Fr],lJ),GOe=me([sJ,Fr,lg],ug),HOe=me([GOe,Fr],cJ),KOe=me([UOe,HOe,qOe],nS),WOe=me([Cr,OJ,RJ,LOe,BOe,KOe,Bt,Fr],GR),fy=me([Cr,Bt,hg,rM,oy,Fr,WOe],HR),YOe=me([fy,Cr,nM],YR),XOe=me([Cr,fy,YOe,Fr],QR),MJ=t=>{var e=Fr(t),n=lg(t),r=!1;return dy(t,e,n,r)},jJ=me([Cr,MJ],G_),zJ=me([Cr,nM,XOe,jJ],WR),QOe=me([Bt,rM,Cr,Fr],vJ),ZOe=me([Bt,rM,Cr,Fr],yJ),JOe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=bu(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?zr(i[0]-i[1])*2*h:h,u&&s?s.map((g,v)=>{var b=r.map(g);return mt(b)?{coordinate:b+h,value:g,index:v,offset:h}:null}).filter(Gi):r.domain().map((g,v)=>{var b=r.map(g);return mt(b)?{coordinate:b+h,value:a?a[g]:g,index:v,offset:h}:null}).filter(Gi)}}},ql=me([Bt,Cr,nM,zJ,MJ,QOe,ZOe,Fr],JOe),iM=me([xJ,wJ,lOe],(t,e,n)=>SJ(n.shared,t,e)),LJ=t=>t.tooltip.settings.trigger,aM=t=>t.tooltip.settings.defaultIndex,hy=me([dg,iM,LJ,aM],CJ),af=me([hy,hg,uy,fy],tM),VJ=me([ql,af],_J),sM=me([hy],t=>{if(t)return t.dataKey}),e2e=me([hy],t=>{if(t)return t.graphicalItemId}),BJ=me([dg,iM,LJ,aM],PJ),t2e=me([Bl,Fl,Bt,Ar,ql,aM,BJ],IJ),n2e=me([hy,t2e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),r2e=me([hy],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),i2e=me([BJ,af,$l,uy,VJ,NJ,iM],DJ);me([i2e],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function m$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(n),!0).forEach(function(r){a2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a2e(t,e,n){return(e=s2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s2e(t){var e=o2e(t,"string");return typeof e=="symbol"?e:e+""}function o2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l2e=()=>Ge(Cr),c2e=()=>{var t=l2e(),e=Ge(ql),n=Ge(zJ);return O1(!t||!n?void 0:v$(v$({},t),{},{scale:n}),e)};function y$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y$(Object(n),!0).forEach(function(r){u2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u2e(t,e,n){return(e=d2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d2e(t){var e=f2e(t,"string");return typeof e=="symbol"?e:e+""}function f2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h2e=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},p2e=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return vh(vh(vh({},r),ur(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return vh(vh(vh({},r),ur(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function g2e(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var FJ=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,v=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(v==null||b==null||x==null))if(zr(b-v)!==zr(x-b)){var S=[];if(zr(x-b)===zr(i[1]-i[0])){w=x;var T=b+i[1]-i[0];S[0]=Math.min(T,(T+v)/2),S[1]=Math.max(T,(T+v)/2)}else{w=v;var P=x+i[1]-i[0];S[0]=Math.min(b,(P+b)/2),S[1]=Math.max(b,(P+b)/2)}var D=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>D[0]&&t<=D[1]||t>=S[0]&&t<=S[1]){var O;return(O=n[o])===null||O===void 0?void 0:O.index}}else{var N=Math.min(v,x),C=Math.max(v,x);if(t>(N+b)/2&&t<=(C+b)/2){var I;return(I=n[o])===null||I===void 0?void 0:I.index}}}else if(e)for(var R=0;R<s;R++){var j=e[R];if(j!=null){var B=e[R+1],L=e[R-1];if(R===0&&B!=null&&t<=(j.coordinate+B.coordinate)/2||R===s-1&&L!=null&&t>(j.coordinate+L.coordinate)/2||R>0&&R<s-1&&L!=null&&B!=null&&t>(j.coordinate+L.coordinate)/2&&t<=(j.coordinate+B.coordinate)/2)return j.index}}return-1},m2e=()=>Ge(AR),oM=(t,e)=>e,UJ=(t,e,n)=>n,lM=(t,e,n,r)=>r,v2e=me(ql,t=>m_(t,e=>e.coordinate)),cM=me([dg,oM,UJ,lM],CJ),uM=me([cM,hg,uy,fy],tM),y2e=(t,e,n)=>{if(e!=null){var r=dg(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},$J=me([dg,oM,UJ,lM],PJ),rS=me([Bl,Fl,Bt,Ar,ql,lM,$J],IJ),b2e=me([cM,rS],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),qJ=me([ql,uM],_J),x2e=me([$J,uM,$l,uy,qJ,NJ,oM],DJ),w2e=me([cM,uM],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),S2e=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&g2e(t,s)){var o=ake(t,e),c=FJ(o,a,i,n,r),u=h2e(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},_2e=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=oIe(t,n);if(o){var c=ske(o,e),u=FJ(c,s,a,r,i),f=p2e(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},E2e=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?S2e(t,e,r,i,a,s,o):_2e(t,e,n,r,i,a,s)},T2e=me(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),A2e=me(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Lr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:oDe}});function b$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(n),!0).forEach(function(r){k2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k2e(t,e,n){return(e=C2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C2e(t){var e=I2e(t,"string");return typeof e=="symbol"?e:e+""}function I2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P2e={},N2e={zIndexMap:Object.values(Lr).reduce((t,e)=>x$(x$({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),P2e)},D2e=new Set(Object.values(Lr));function O2e(t){return D2e.has(t)}var GJ=Qi({name:"zIndex",initialState:N2e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:_n()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!O2e(n)&&delete t.zIndexMap[n])},prepare:_n()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:_n()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:_n()}}}),{registerZIndexPortal:R2e,unregisterZIndexPortal:M2e,registerZIndexPortalElement:j2e,unregisterZIndexPortalElement:z2e}=GJ.actions,L2e=GJ.reducer;function Ja(t){var{zIndex:e,children:n}=t,r=jke(),i=r&&e!==void 0&&e!==0,a=Pi(),s=xn();A.useLayoutEffect(()=>i?(s(R2e({zIndex:e})),()=>{s(M2e({zIndex:e}))}):rg,[s,e,i]);var o=Ge(c=>T2e(c,e,a));return i?o?cq.createPortal(n,o):null:n}function kN(){return kN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kN.apply(null,arguments)}function w$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ox(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w$(Object(n),!0).forEach(function(r){V2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V2e(t,e,n){return(e=B2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B2e(t){var e=F2e(t,"string");return typeof e=="symbol"?e:e+""}function F2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U2e(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function $2e(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,v=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=wCe,w=Lr.cursorLine;else if(f==="BarChart")b=SCe(o,h,a,s),x=UQ,w=Lr.cursorRectangle;else if(o==="radial"&&TX(h)){var{cx:S,cy:T,radius:P,startAngle:D,endAngle:O}=qQ(h);b={cx:S,cy:T,startAngle:D,endAngle:O,innerRadius:P,outerRadius:P},x=HQ,w=Lr.cursorLine}else b={points:dIe(o,h,a)},x=eR,w=Lr.cursorLine;var N=typeof c=="object"&&"className"in c?c.className:void 0,C=Ox(Ox(Ox(Ox({stroke:"#ccc",pointerEvents:"none"},a),b),Qv(c)),{},{payload:g,payloadIndex:v,className:Yt("recharts-tooltip-cursor",N)});return A.createElement(Ja,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(U2e,{cursor:c,cursorComp:x,cursorProps:C}))}function q2e(t){var e=c2e(),n=SQ(),r=ig(),i=m2e();return e==null||n==null||r==null||i==null?null:A.createElement($2e,kN({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var HJ=A.createContext(null),G2e=()=>A.useContext(HJ),LC={exports:{}},S$;function H2e(){return S$||(S$=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],v]:c._events[b].push(v):(c._events[b]=v,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,v=h.length,b=new Array(v);g<v;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,v,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],S=arguments.length,T,P;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,v),!0;case 6:return w.fn.call(w.context,f,h,g,v,b),!0}for(P=1,T=new Array(S-1);P<S;P++)T[P-1]=arguments[P];w.fn.apply(w.context,T)}else{var D=w.length,O;for(P=0;P<D;P++)switch(w[P].once&&this.removeListener(u,w[P].fn,void 0,!0),S){case 1:w[P].fn.call(w[P].context);break;case 2:w[P].fn.call(w[P].context,f);break;case 3:w[P].fn.call(w[P].context,f,h);break;case 4:w[P].fn.call(w[P].context,f,h,g);break;default:if(!T)for(O=1,T=new Array(S-1);O<S;O++)T[O-1]=arguments[O];w[P].fn.apply(w[P].context,T)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var v=n?n+u:u;if(!this._events[v])return this;if(!f)return s(this,v),this;var b=this._events[v];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,v);else{for(var x=0,w=[],S=b.length;x<S;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(LC)),LC.exports}var K2e=H2e();const W2e=jl(K2e);var d0=new W2e,CN="recharts.syncEvent.tooltip",_$="recharts.syncEvent.brush",KJ=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Io(n))return t[n]}},Y2e={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},WJ=Qi({name:"options",initialState:Y2e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),X2e=WJ.reducer,{createEventEmitter:Q2e}=WJ.actions;function Z2e(t){return t.tooltip.syncInteraction}var J2e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},YJ=Qi({name:"chartData",initialState:J2e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:E$,setDataStartEndIndexes:eRe,setComputedData:K5e}=YJ.actions,tRe=YJ.reducer,nRe=["x","y"];function T$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(n),!0).forEach(function(r){rRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rRe(t,e,n){return(e=iRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iRe(t){var e=aRe(t,"string");return typeof e=="symbol"?e:e+""}function aRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sRe(t,e){if(t==null)return{};var n,r,i=oRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lRe(){var t=Ge(kR),e=Ge(CR),n=xn(),r=Ge(UZ),i=Ge(ql),a=ig(),s=ey(),o=Ge(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return rg;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:b,y:x}=v,w=sRe(v,nRe),{x:S,y:T,width:P,height:D}=f.payload.sourceViewBox,O=yh(yh({},w),{},{x:s.x+(P?(b-S)/P:0)*s.width,y:s.y+(D?(x-T)/D:0)*s.height});n(yh(yh({},f),{},{payload:yh(yh({},f.payload),{},{coordinate:O})}))}else n(f);return}if(i!=null){var N;if(typeof r=="function"){var C={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},I=r(i,C);N=i[I]}else r==="value"&&(N=i.find(G=>String(G.value)===f.payload.label));var{coordinate:R}=f.payload;if(N==null||f.payload.active===!1||R==null||s==null){n(TN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:j,y:B}=R,L=Math.min(j,s.x+s.width),z=Math.min(B,s.y+s.height),W={x:a==="horizontal"?N.coordinate:L,y:a==="horizontal"?z:N.coordinate},Q=TN({active:f.payload.active,coordinate:W,dataKey:f.payload.dataKey,index:String(N.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Q)}}};return d0.on(CN,c),()=>{d0.off(CN,c)}},[o,n,e,t,r,i,a,s])}function cRe(){var t=Ge(kR),e=Ge(CR),n=xn();A.useEffect(()=>{if(t==null)return rg;var r=(i,a,s)=>{e!==s&&t===i&&n(eRe(a))};return d0.on(_$,r),()=>{d0.off(_$,r)}},[n,e,t])}function uRe(){var t=xn();A.useEffect(()=>{t(Q2e())},[t]),lRe(),cRe()}function dRe(t,e,n,r,i,a){var s=Ge(v=>y2e(v,t,e)),o=Ge(CR),c=Ge(kR),u=Ge(UZ),f=Ge(Z2e),h=f?.active,g=ey();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var v=TN({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});d0.emit(CN,c,v,o)}},[h,n,s,i,r,o,c,u,a,g])}function A$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(n),!0).forEach(function(r){fRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fRe(t,e,n){return(e=hRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hRe(t){var e=pRe(t,"string");return typeof e=="symbol"?e:e+""}function pRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gRe(t){return t.dataKey}function mRe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(eCe,e)}var C$=[],vRe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function tE(t){var e,n,r=Jr(t,vRe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:v,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:S,shared:T,trigger:P,defaultIndex:D,portal:O,axisId:N}=r,C=xn(),I=typeof D=="number"?String(D):D;A.useEffect(()=>{C(hOe({shared:T,trigger:P,axisId:N,active:i,defaultIndex:I}))},[C,T,P,N,i,I]);var R=ey(),j=zQ(),B=oOe(T),{activeIndex:L,isActive:z}=(e=Ge(oe=>w2e(oe,B,P,I)))!==null&&e!==void 0?e:{},W=Ge(oe=>x2e(oe,B,P,I)),Q=Ge(oe=>qJ(oe,B,P,I)),G=Ge(oe=>b2e(oe,B,P,I)),Y=W,J=G2e(),ie=(n=i??z)!==null&&n!==void 0?n:!1,[X,U]=qTe([Y,ie]),Z=B==="axis"?Q:void 0;dRe(B,P,G,Z,L,ie);var ee=O??J;if(ee==null||R==null||B==null)return null;var K=Y??C$;ie||(K=C$),u&&K.length&&(K=mTe(K.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),g,gRe));var ue=K.length>0,ne=A.createElement(oCe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ie,coordinate:G,hasPayload:ue,offset:h,position:v,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:X,innerRef:U,hasPortalFromProps:!!O},mRe(c,k$(k$({},r),{},{payload:K,label:Z,active:ie,activeIndex:L,coordinate:G,accessibilityLayer:j})));return A.createElement(A.Fragment,null,cq.createPortal(ne,ee),ie&&A.createElement(q2e,{cursor:S,tooltipEventType:B,coordinate:G,payload:K,index:L}))}var py=t=>null;py.displayName="Cell";function yRe(t,e,n){return(e=bRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bRe(t){var e=xRe(t,"string");return typeof e=="symbol"?e:e+""}function xRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class wRe{constructor(e){yRe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function I$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SRe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(n),!0).forEach(function(r){_Re(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Re(t,e,n){return(e=ERe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ERe(t){var e=TRe(t,"string");return typeof e=="symbol"?e:e+""}function TRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ARe={cacheSize:2e3,enableCache:!0},XJ=SRe({},ARe),P$=new wRe(XJ.cacheSize),kRe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},N$="recharts_measurement_span";function CRe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var D$=(t,e)=>{try{var n=document.getElementById(N$);n||(n=document.createElement("span"),n.setAttribute("id",N$),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,kRe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},yv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||M_.isSsr)return{width:0,height:0};if(!XJ.enableCache)return D$(e,n);var r=CRe(e,n),i=P$.get(r);if(i)return i;var a=D$(e,n);return P$.set(r,a),a},QJ;function IRe(t,e,n){return(e=PRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PRe(t){var e=NRe(t,"string");return typeof e=="symbol"?e:e+""}function NRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,R$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DRe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ORe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RRe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},MRe=["cm","mm","pt","pc","in","Q","px"];function jRe(t){return MRe.includes(t)}var Bh="NaN";function zRe(t,e){return t*RRe[e]}class Qr{static parse(e){var n,[,r,i]=(n=ORe.exec(e))!==null&&n!==void 0?n:[];return r==null?Qr.NaN:new Qr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Io(e)&&(this.unit=""),n!==""&&!DRe.test(n)&&(this.num=NaN,this.unit=""),jRe(n)&&(this.num=zRe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Io(this.num)}}QJ=Qr;IRe(Qr,"NaN",new QJ(NaN,""));function ZJ(t){if(t==null||t.includes(Bh))return Bh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=O$.exec(e))!==null&&n!==void 0?n:[],s=Qr.parse(r??""),o=Qr.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Bh;e=e.replace(O$,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=R$.exec(e))!==null&&u!==void 0?u:[],v=Qr.parse(f??""),b=Qr.parse(g??""),x=h==="+"?v.add(b):v.subtract(b);if(x.isNaN())return Bh;e=e.replace(R$,x.toString())}return e}var M$=/\(([^()]*)\)/;function LRe(t){for(var e=t,n;(n=M$.exec(e))!=null;){var[,r]=n;e=e.replace(M$,ZJ(r))}return e}function VRe(t){var e=t.replace(/\s+/g,"");return e=LRe(e),e=ZJ(e),e}function BRe(t){try{return VRe(t)}catch{return Bh}}function VC(t){var e=BRe(t.slice(5,-1));return e===Bh?"":e}var FRe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],URe=["dx","dy","angle","className","breakAll"];function IN(){return IN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IN.apply(null,arguments)}function j$(t,e){if(t==null)return{};var n,r,i=$Re(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $Re(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var JJ=/[ \f\n\r\t\v\u2028\u2029]+/,eee=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Vr(e)||(n?i=e.toString().split(""):i=e.toString().split(JJ));var a=i.map(o=>({word:o,width:yv(o,r).width})),s=n?0:yv("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function qRe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var tee=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),nee=t=>t.reduce((e,n)=>e.width>n.width?e:n),GRe="",z$=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=eee({breakAll:n,style:r,children:c+GRe});if(!u)return[!1,[]];var f=tee(u.wordsWithComputedWidth,a,s,o),h=f.length>i||nee(f).width>Number(a);return[h,f]},HRe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=He(a),f=String(s),h=tee(e,r,n,i);if(!u||i)return h;var g=h.length>a||nee(h).width>Number(r);if(!g)return h;for(var v=0,b=f.length-1,x=0,w;v<=b&&x<=f.length-1;){var S=Math.floor((v+b)/2),T=S-1,[P,D]=z$(f,T,c,o,a,r,n,i),[O]=z$(f,S,c,o,a,r,n,i);if(!P&&!O&&(v=S+1),P&&O&&(b=S-1),!P&&O){w=D;break}x++}return w||h},L$=t=>{var e=Vr(t)?[]:t.toString().split(JJ);return[{words:e,width:void 0}]},KRe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!M_.isSsr){var o,c,u=eee({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return L$(r);return HRe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return L$(r)},ree="#808080",WRe={angle:0,breakAll:!1,capHeight:"0.71em",fill:ree,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},nE=A.forwardRef((t,e)=>{var n=Jr(t,WRe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=j$(n,FRe),g=A.useMemo(()=>KRe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:v,dy:b,angle:x,className:w,breakAll:S}=h,T=j$(h,URe);if(!Ha(r)||!Ha(i)||g.length===0)return null;var P=Number(r)+(He(v)?v:0),D=Number(i)+(He(b)?b:0);if(!mt(P)||!mt(D))return null;var O;switch(f){case"start":O=VC("calc(".concat(s,")"));break;case"middle":O=VC("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:O=VC("calc(".concat(g.length-1," * -").concat(a,")"));break}var N=[],C=g[0];if(c&&C!=null){var I=C.width,{width:R}=h;N.push("scale(".concat(He(R)&&He(I)?R/I:1,")"))}return x&&N.push("rotate(".concat(x,", ").concat(P,", ").concat(D,")")),N.length&&(T.transform=N.join(" ")),A.createElement("text",IN({},xa(T),{ref:e,x:P,y:D,className:Yt("recharts-text",w),textAnchor:u,fill:o.includes("url")?ree:o}),g.map((j,B)=>{var L=j.words.join(S?"":" ");return A.createElement("tspan",{x:P,dy:B===0?O:a,key:"".concat(L,"-").concat(B)},L)}))});nE.displayName="Text";function V$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V$(Object(n),!0).forEach(function(r){YRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YRe(t,e,n){return(e=XRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XRe(t){var e=QRe(t,"string");return typeof e=="symbol"?e:e+""}function QRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZRe=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:s,height:o,upperWidth:c,lowerWidth:u}=Q2(e),f=a,h=a+(c-u)/2,g=(f+h)/2,v=(c+u)/2,b=f+c/2,x=o>=0?1:-1,w=x*r,S=x>0?"end":"start",T=x>0?"start":"end",P=c>=0?1:-1,D=P*r,O=P>0?"end":"start",N=P>0?"start":"end",C=i;if(n==="top"){var I={x:f+c/2,y:s-w,horizontalAnchor:"middle",verticalAnchor:S};return C&&(I.height=Math.max(s-C.y,0),I.width=c),I}if(n==="bottom"){var R={x:h+u/2,y:s+o+w,horizontalAnchor:"middle",verticalAnchor:T};return C&&(R.height=Math.max(C.y+C.height-(s+o),0),R.width=u),R}if(n==="left"){var j={x:g-D,y:s+o/2,horizontalAnchor:O,verticalAnchor:"middle"};return C&&(j.width=Math.max(j.x-C.x,0),j.height=o),j}if(n==="right"){var B={x:g+v+D,y:s+o/2,horizontalAnchor:N,verticalAnchor:"middle"};return C&&(B.width=Math.max(C.x+C.width-B.x,0),B.height=o),B}var L=C?{width:v,height:o}:{};return n==="insideLeft"?io({x:g+D,y:s+o/2,horizontalAnchor:N,verticalAnchor:"middle"},L):n==="insideRight"?io({x:g+v-D,y:s+o/2,horizontalAnchor:O,verticalAnchor:"middle"},L):n==="insideTop"?io({x:f+c/2,y:s+w,horizontalAnchor:"middle",verticalAnchor:T},L):n==="insideBottom"?io({x:h+u/2,y:s+o-w,horizontalAnchor:"middle",verticalAnchor:S},L):n==="insideTopLeft"?io({x:f+D,y:s+w,horizontalAnchor:N,verticalAnchor:T},L):n==="insideTopRight"?io({x:f+c-D,y:s+w,horizontalAnchor:O,verticalAnchor:T},L):n==="insideBottomLeft"?io({x:h+D,y:s+o-w,horizontalAnchor:N,verticalAnchor:S},L):n==="insideBottomRight"?io({x:h+u-D,y:s+o-w,horizontalAnchor:O,verticalAnchor:S},L):n&&typeof n=="object"&&(He(n.x)||Jd(n.x))&&(He(n.y)||Jd(n.y))?io({x:a+hi(n.x,v),y:s+hi(n.y,o),horizontalAnchor:"end",verticalAnchor:"end"},L):io({x:b,y:s+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},L)},JRe=["labelRef"],eMe=["content"];function B$(t,e){if(t==null)return{};var n,r,i=tMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function F$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(n),!0).forEach(function(r){nMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nMe(t,e,n){return(e=rMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rMe(t){var e=iMe(t,"string");return typeof e=="symbol"?e:e+""}function iMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function il(){return il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},il.apply(null,arguments)}var iee=A.createContext(null),aee=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(iee.Provider,{value:c},o)},see=()=>{var t=A.useContext(iee),e=ey();return t||(e?Q2(e):void 0)},aMe=A.createContext(null),sMe=()=>{var t=A.useContext(aMe),e=Ge(KZ);return t||e},oMe=t=>{var{value:e,formatter:n}=t,r=Vr(t.children)?e:t.children;return typeof n=="function"?n(r):r},dM=t=>t!=null&&typeof t=="function",lMe=(t,e)=>{var n=zr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},cMe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:v}=i,b=(u+f)/2,x=lMe(h,g),w=x>=0?1:-1,S,T;switch(e){case"insideStart":S=h+w*a,T=v;break;case"insideEnd":S=g-w*a,T=!v;break;case"end":S=g+w*a,T=v;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var P=ur(o,c,b,S),D=ur(o,c,b,S+(T?1:-1)*359),O="M".concat(P.x,",").concat(P.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(D.x,",").concat(D.y),N=Vr(t.id)?Zv("recharts-radial-line-"):t.id;return A.createElement("text",il({},r,{dominantBaseline:"central",className:Yt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:N,d:O})),A.createElement("textPath",{xlinkHref:"#".concat(N)},n))},uMe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=ur(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:v,y:b}=ur(r,i,g,u);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},mw=t=>t!=null&&"cx"in t&&He(t.cx),dMe={angle:0,offset:5,zIndex:Lr.label,position:"middle",textBreakAll:!1};function fMe(t){if(!mw(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function Pc(t){var e=Jr(t,dMe),{viewBox:n,parentViewBox:r,position:i,value:a,children:s,content:o,className:c="",textBreakAll:u,labelRef:f}=e,h=sMe(),g=see(),v=i==="center"?g:h??g,b,x,w;n==null?b=v:mw(n)?b=n:b=Q2(n);var S=fMe(b);if(!b||Vr(a)&&Vr(s)&&!A.isValidElement(o)&&typeof o!="function")return null;var T=Xm(Xm({},e),{},{viewBox:b});if(A.isValidElement(o)){var{labelRef:P}=T,D=B$(T,JRe);return A.cloneElement(o,D)}if(typeof o=="function"){var{content:O}=T,N=B$(T,eMe);if(x=A.createElement(o,N),A.isValidElement(x))return x}else x=oMe(e);var C=xa(e);if(mw(b)){if(i==="insideStart"||i==="insideEnd"||i==="end")return cMe(e,i,x,C,b);w=uMe(b,e.offset,e.position)}else{if(!S)return null;var I=ZRe({viewBox:S,position:i,offset:e.offset,parentViewBox:mw(r)?void 0:r});w=Xm(Xm({x:I.x,y:I.y,textAnchor:I.horizontalAnchor,verticalAnchor:I.verticalAnchor},I.width!==void 0?{width:I.width}:{}),I.height!==void 0?{height:I.height}:{})}return A.createElement(Ja,{zIndex:e.zIndex},A.createElement(nE,il({ref:f,className:Yt("recharts-label",c)},C,w,{textAnchor:qRe(C.textAnchor)?C.textAnchor:w.textAnchor,breakAll:u}),x))}Pc.displayName="Label";var hMe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(Pc,il({key:"label-implicit"},r)):Ha(t)?A.createElement(Pc,il({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===Pc?A.cloneElement(t,Xm({key:"label-implicit"},r)):A.createElement(Pc,il({key:"label-implicit",content:t},r)):dM(t)?A.createElement(Pc,il({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(Pc,il({},t,{key:"label-implicit"},r)):null};function oee(t){var{label:e,labelRef:n}=t,r=see();return hMe(e,r,n)||null}var BC={},FC={},U$;function pMe(){return U$||(U$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(FC)),FC}var UC={},$$;function gMe(){return $$||($$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(UC)),UC}var q$;function mMe(){return q$||(q$=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pMe(),n=gMe(),r=B2();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(BC)),BC}var $C,G$;function vMe(){return G$||(G$=1,$C=mMe().last),$C}var yMe=vMe();const bMe=jl(yMe);var xMe=["valueAccessor"],wMe=["dataKey","clockWise","id","textBreakAll","zIndex"];function iS(){return iS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iS.apply(null,arguments)}function H$(t,e){if(t==null)return{};var n,r,i=SMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function SMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _Me=t=>Array.isArray(t.value)?bMe(t.value):t.value,lee=A.createContext(void 0),EMe=lee.Provider,cee=A.createContext(void 0),TMe=cee.Provider;function AMe(){return A.useContext(lee)}function kMe(){return A.useContext(cee)}function vw(t){var{valueAccessor:e=_Me}=t,n=H$(t,xMe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=H$(n,wMe),u=AMe(),f=kMe(),h=u||f;return!h||!h.length?null:A.createElement(Ja,{zIndex:o??Lr.label},A.createElement(gi,{className:"recharts-label-list"},h.map((g,v)=>{var b,x=Vr(r)?e(g,v):bn(g.payload,r),w=Vr(a)?{}:{id:"".concat(a,"-").concat(v)};return A.createElement(Pc,iS({key:"label-".concat(v)},xa(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:v,zIndex:0}))})))}vw.displayName="LabelList";function uee(t){var{label:e}=t;return e?e===!0?A.createElement(vw,{key:"labelList-implicit"}):A.isValidElement(e)||dM(e)?A.createElement(vw,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(vw,iS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var dee=t=>t.graphicalItems.polarItems,CMe=me([Rn,ly],RR),rE=me([dee,qn,CMe],jR),IMe=me([rE],zR),iE=me([IMe,q_],LR),PMe=me([iE,qn,rE],BR);me([iE,qn,rE],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=bn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:bn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var K$=()=>{},NMe=me([iE,qn,rE,Z_,Rn],qR),DMe=me([qn,UR,$R,K$,NMe,K$,Bt,Rn],GR),fee=me([qn,Bt,iE,PMe,oy,Rn,DMe],HR),OMe=me([fee,cg,Su],YR),RMe=me([qn,fee,OMe,Rn],QR);me([Su,RMe],YZ);var MMe={radiusAxis:{},angleAxis:{}},hee=Qi({name:"polarAxis",initialState:MMe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:W5e,removeRadiusAxis:Y5e,addAngleAxis:X5e,removeAngleAxis:Q5e}=hee.actions,jMe=hee.reducer;function pee(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}function W$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Y$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(n),!0).forEach(function(r){zMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zMe(t,e,n){return(e=LMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LMe(t){var e=VMe(t,"string");return typeof e=="symbol"?e:e+""}function VMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BMe=(t,e)=>e,fM=me([dee,BMe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),FMe=[],hM=(t,e,n)=>n?.length===0?FMe:n,gee=me([q_,fM,hM],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>Y$(Y$({},e.presentationProps),a.props))),i!=null)return i}}),UMe=me([gee,fM,hM],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=bn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:A_(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),$Me=me([gee,fM,hM,Ar],(t,e,n,r)=>{if(!(e==null||t==null))return Hje({offset:r,pieSettings:e,displayedData:t,cells:n})}),qC={exports:{}},en={};var X$;function qMe(){if(X$)return en;X$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return en.ContextConsumer=a,en.ContextProvider=s,en.Element=t,en.ForwardRef=o,en.Fragment=n,en.Lazy=h,en.Memo=f,en.Portal=e,en.Profiler=i,en.StrictMode=r,en.Suspense=c,en.SuspenseList=u,en.isContextConsumer=function(x){return b(x)===a},en.isContextProvider=function(x){return b(x)===s},en.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},en.isForwardRef=function(x){return b(x)===o},en.isFragment=function(x){return b(x)===n},en.isLazy=function(x){return b(x)===h},en.isMemo=function(x){return b(x)===f},en.isPortal=function(x){return b(x)===e},en.isProfiler=function(x){return b(x)===i},en.isStrictMode=function(x){return b(x)===r},en.isSuspense=function(x){return b(x)===c},en.isSuspenseList=function(x){return b(x)===u},en.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===v||x.getModuleId!==void 0)},en.typeOf=b,en}var Q$;function GMe(){return Q$||(Q$=1,qC.exports=qMe()),qC.exports}var HMe=GMe(),Z$=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",J$=null,GC=null,mee=t=>{if(t===J$&&Array.isArray(GC))return GC;var e=[];return A.Children.forEach(t,n=>{Vr(n)||(HMe.isFragment(n)?e=e.concat(mee(n.props.children)):e.push(n))}),GC=e,J$=t,e};function pM(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>Z$(i)):r=[Z$(e)],mee(t).forEach(i=>{var a=Zd(i,"type.displayName")||Zd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var HC={},e9;function KMe(){return e9||(e9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(HC)),HC}var KC,t9;function WMe(){return t9||(t9=1,KC=KMe().isPlainObject),KC}var YMe=WMe();const XMe=jl(YMe);var n9,r9,i9,a9,s9;function o9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o9(Object(n),!0).forEach(function(r){QMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QMe(t,e,n){return(e=ZMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZMe(t){var e=JMe(t,"string");return typeof e=="symbol"?e:e+""}function JMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aS(){return aS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aS.apply(null,arguments)}function Rm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var c9=(t,e,n,r,i)=>{var a=n-r,s;return s=Bn(n9||(n9=Rm(["M ",",",""])),t,e),s+=Bn(r9||(r9=Rm(["L ",",",""])),t+n,e),s+=Bn(i9||(i9=Rm(["L ",",",""])),t+n-a/2,e+i),s+=Bn(a9||(a9=Rm(["L ",",",""])),t+n-a/2-r,e+i),s+=Bn(s9||(s9=Rm(["L ",","," Z"])),t,e),s},eje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tje=t=>{var e=Jr(t,eje),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[v,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),S=A.useRef(s),T=A.useRef(n),P=A.useRef(r),D=z_(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var W=g.current.getTotalLength();W&&b(W)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var O=Yt("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",aS({},xa(e),{className:O,d:c9(n,r,i,a,s)})));var N=x.current,C=w.current,I=S.current,R=T.current,j=P.current,B="0px ".concat(v===-1?1:v,"px"),L="".concat(v,"px 0px"),z=LQ(["strokeDasharray"],u,c);return A.createElement(j_,{animationId:D,key:D,canBegin:v>0,duration:u,easing:c,isActive:h,begin:f},W=>{var Q=yr(N,i,W),G=yr(C,a,W),Y=yr(I,s,W),J=yr(R,n,W),ie=yr(j,r,W);g.current&&(x.current=Q,w.current=G,S.current=Y,T.current=J,P.current=ie);var X=W>0?{transition:z,strokeDasharray:L}:{strokeDasharray:B};return A.createElement("path",aS({},xa(e),{className:O,d:c9(J,ie,Q,G,Y),ref:g,style:l9(l9({},X),e.style)}))})},nje=["option","shapeType","activeClassName"];function rje(t,e){if(t==null)return{};var n,r,i=ije(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ije(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function u9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u9(Object(n),!0).forEach(function(r){aje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aje(t,e,n){return(e=sje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sje(t){var e=oje(t,"string");return typeof e=="symbol"?e:e+""}function oje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lje(t,e){return sS(sS({},e),t)}function cje(t,e){return t==="symbols"}function d9(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(UQ,n);case"trapezoid":return A.createElement(tje,n);case"sector":return A.createElement(HQ,n);case"symbols":if(cje(e))return A.createElement(EX,n);break;case"curve":return A.createElement(eR,n);default:return null}}function uje(t){return A.isValidElement(t)?t.props:t}function vee(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=rje(t,nje),a;if(A.isValidElement(e))a=A.cloneElement(e,sS(sS({},i),uje(e)));else if(typeof e=="function")a=e(i,i.index);else if(XMe(e)&&typeof e!="boolean"){var s=lje(e,i);a=A.createElement(d9,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(d9,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(gi,{className:r},a):a}var gM=(t,e,n)=>{var r=xn();return(i,a)=>s=>{t?.(i,a,s),r(TJ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},mM=t=>{var e=xn();return(n,r)=>i=>{t?.(n,r,i),e(pOe())}},vM=(t,e,n)=>{var r=xn();return(i,a)=>s=>{t?.(i,a,s),r(gOe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function yee(t){var{tooltipEntrySettings:e}=t,n=xn(),r=Pi(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(uOe(e)):i.current!==e&&n(dOe({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(fOe(i.current)),i.current=null)},[n]),null}function dje(t){var{legendPayload:e}=t,n=xn(),r=Pi(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(RQ(e)):i.current!==e&&n(MQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(jQ(i.current)),i.current=null)},[n]),null}function fje(t){var{legendPayload:e}=t,n=xn(),r=Ge(Bt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(RQ(e)):i.current!==e&&n(MQ({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(jQ(i.current)),i.current=null)},[n]),null}var WC,hje=()=>{var[t]=A.useState(()=>Zv("uid-"));return t},pje=(WC=jne.useId)!==null&&WC!==void 0?WC:hje;function gje(t,e){var n=pje();return e||(t?"".concat(t,"-").concat(n):n)}var mje=A.createContext(void 0),bee=t=>{var{id:e,type:n,children:r}=t,i=gje("recharts-".concat(n),e);return A.createElement(mje.Provider,{value:i},r(i))},vje={cartesianItems:[],polarItems:[]},xee=Qi({name:"graphicalItems",initialState:vje,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:_n()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ks(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:_n()},removeCartesianGraphicalItem:{reducer(t,e){var n=ks(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:_n()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:_n()},removePolarGraphicalItem:{reducer(t,e){var n=ks(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:_n()}}}),{addCartesianGraphicalItem:yje,replaceCartesianGraphicalItem:bje,removeCartesianGraphicalItem:xje,addPolarGraphicalItem:wje,removePolarGraphicalItem:Sje}=xee.actions,_je=xee.reducer,Eje=t=>{var e=xn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(yje(t)):n.current!==t&&e(bje({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(xje(n.current)),n.current=null)},[e]),null},Tje=A.memo(Eje);function Aje(t){var e=xn();return A.useLayoutEffect(()=>(e(wje(t)),()=>{e(Sje(t))}),[e,t]),null}var kje=["key"],Cje=["onMouseEnter","onClick","onMouseLeave"],Ije=["id"],Pje=["id"];function f9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(n),!0).forEach(function(r){Nje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nje(t,e,n){return(e=Dje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dje(t){var e=Oje(t,"string");return typeof e=="symbol"?e:e+""}function Oje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cu.apply(null,arguments)}function aE(t,e){if(t==null)return{};var n,r,i=Rje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Mje(t){var e=A.useMemo(()=>pM(t.children,py),[t.children]),n=Ge(r=>UMe(r,t.id,e));return n==null?null:A.createElement(fje,{legendPayload:n})}var jje=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),getPosition:g=>{var v;return(v=r[Number(g)])===null||v===void 0?void 0:v.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:A_(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return A.createElement(yee,{tooltipEntrySettings:h})}),zje=(t,e)=>t>e?"start":t<e?"end":"middle",Lje=(t,e,n)=>hi(typeof e=="function"?e(t):e,n,n*.8),Vje=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=$Q(a,s),c=i+hi(t.cx,a,a/2),u=r+hi(t.cy,s,s/2),f=hi(t.innerRadius,o,0),h=Lje(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},Bje=(t,e)=>{var n=zr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Fje=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Yt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=aE(e,kje);return A.createElement(eR,cu({},i,{type:"linear",className:n}))},Uje=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Yt("recharts-pie-label-text",pee(t));return A.createElement(nE,cu({},e,{alignmentBaseline:"middle",className:i}),r)};function $je(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Ns(n),c=Qv(i),u=Qv(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,v)=>{var b=(g.startAngle+g.endAngle)/2,x=ur(g.cx,g.cy,g.outerRadius+f,b),w=Fn(Fn(Fn(Fn({},o),g),{},{stroke:"none"},c),{},{index:v,textAnchor:zje(x.x,g.cx)},x),S=Fn(Fn(Fn(Fn({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:v,points:[ur(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(Ja,{zIndex:Lr.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},A.createElement(gi,null,a&&Fje(a,S),Uje(i,w,bn(g,s))))});return A.createElement(gi,{className:"recharts-pie-labels"},h)}function qje(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(uee,{label:i}):A.createElement($je,{sectors:e,props:n,showLabels:r})}function Gje(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=Ge(af),c=Ge(sM),u=Ge(e2e),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,v=aE(i,Cje),b=gM(f,i.dataKey,s),x=mM(g),w=vM(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((S,T)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var P=u==null||u===s,D=String(T)===o&&(c==null||i.dataKey===c)&&P,O=o?r:null,N=n&&D?n:O,C=Fn(Fn({},S),{},{stroke:S.stroke,tabIndex:-1,[vQ]:T,[yQ]:s});return A.createElement(gi,cu({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},g_(v,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),A.createElement(vee,cu({option:a??N,index:T,shapeType:"sector",isActive:D},C)))}))}function Hje(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),v=Bje(o,c),b=Math.abs(v),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(N=>bn(N,u,0)!==0).length,S=(b>=360?w:w-1)*x,T=b-w*g-S,P=r.reduce((N,C)=>{var I=bn(C,u,0);return N+(He(I)?I:0)},0),D;if(P>0){var O;D=r.map((N,C)=>{var I=bn(N,u,0),R=bn(N,f,C),j=Vje(n,a,N),B=(He(I)?I:0)/P,L,z=Fn(Fn({},N),i&&i[C]&&i[C].props);C?L=O.endAngle+zr(v)*x*(I!==0?1:0):L=o;var W=L+zr(v)*((I!==0?g:0)+B*T),Q=(L+W)/2,G=(j.innerRadius+j.outerRadius)/2,Y=[{name:R,value:I,payload:z,dataKey:u,type:h,graphicalItemId:n.id}],J=ur(j.cx,j.cy,G,Q);return O=Fn(Fn(Fn(Fn({},n.presentationProps),{},{percent:B,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:Y,midAngle:Q,middleRadius:G,tooltipPosition:J},z),j),{},{value:I,dataKey:u,startAngle:L,endAngle:W,payload:z,paddingAngle:zr(v)*x}),O})}return D}function Kje(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement(TMe,{value:e?i:void 0},r)}function Wje(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,v=z_(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),S=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement(Kje,{showLabels:!x,sectors:i},A.createElement(j_,{animationId:v,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:S,key:v},P=>{var D,O=[],N=i&&i[0],C=(D=N?.startAngle)!==null&&D!==void 0?D:0;return i?.forEach((I,R)=>{var j=b&&b[R],B=R>0?Zd(I,"paddingAngle",0):0;if(j){var L=yr(j.endAngle-j.startAngle,I.endAngle-I.startAngle,P),z=Fn(Fn({},I),{},{startAngle:C+B,endAngle:C+L+B});O.push(z),C=z.endAngle}else{var{endAngle:W,startAngle:Q}=I,G=yr(0,W-Q,P),Y=Fn(Fn({},I),{},{startAngle:C+B,endAngle:C+G+B});O.push(Y),C=Y.endAngle}}),n.current=O,A.createElement(gi,null,A.createElement(Gje,{sectors:O,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(qje,{showLabels:!x,sectors:i,props:e}),e.children)}var Yje={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Lr.area};function Xje(t){var{id:e}=t,n=aE(t,Ije),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>pM(t.children,py),[t.children]),o=Ge(f=>$Me(f,e,s)),c=A.useRef(null),u=Yt("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(gi,{tabIndex:a,className:u})):A.createElement(Ja,{zIndex:t.zIndex},A.createElement(jje,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(gi,{tabIndex:a,className:u},A.createElement(Wje,{props:Fn(Fn({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function wee(t){var e=Jr(t,Yje),{id:n}=e,r=aE(e,Pje),i=Ns(r);return A.createElement(bee,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement(Aje,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(Mje,cu({},r,{id:a})),A.createElement(Xje,cu({},r,{id:a}))))}wee.displayName="Pie";function h9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function p9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h9(Object(n),!0).forEach(function(r){Qje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qje(t,e,n){return(e=Zje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zje(t){var e=Jje(t,"string");return typeof e=="symbol"?e:e+""}function Jje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var See=0,eze={xAxis:{},yAxis:{},zAxis:{}},_ee=Qi({name:"cartesianAxis",initialState:eze,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:_n()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:_n()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:_n()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:_n()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:_n()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:_n()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:_n()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:_n()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:_n()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-((a=s[0])!==null&&a!==void 0?a:0))<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=p9(p9({},i),{},{width:r,widthHistory:o})}}}}),{addXAxis:tze,replaceXAxis:nze,removeXAxis:rze,addYAxis:ize,replaceYAxis:aze,removeYAxis:sze,addZAxis:Z5e,replaceZAxis:J5e,removeZAxis:eVe,updateYAxisWidth:oze}=_ee.actions,lze=_ee.reducer,cze=me([Ar],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),uze=me([cze,Bl,Fl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),Eee=()=>Ge(uze),g9=(t,e,n)=>{var r=n??t;if(!Vr(r))return hi(r,e,0)},dze=(t,e,n)=>{var r={},i=t.filter(W_),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>{var h=u[f.stackId];return h==null&&(h=[]),h.push(f),u[f.stackId]=h,u},r),o=Object.entries(s).map(u=>{var f,[h,g]=u,v=g.map(x=>x.dataKey),b=g9(e,n,(f=g[0])===null||f===void 0?void 0:f.barSize);return{stackId:h,dataKeys:v,barSize:b}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=g9(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function m9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m9(Object(n),!0).forEach(function(r){fze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fze(t,e,n){return(e=hze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hze(t){var e=pze(t,"string");return typeof e=="symbol"?e:e+""}function pze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gze(t,e,n,r,i){var a,s=r.length;if(!(s<1)){var o=hi(t,n,0,!0),c,u=[];if(mt((a=r[0])===null||a===void 0?void 0:a.barSize)){var f=!1,h=n/s,g=r.reduce((T,P)=>T+(P.barSize||0),0);g+=(s-1)*o,g>=n&&(g-=(s-1)*o,o=0),g>=n&&h>0&&(f=!0,h*=.9,g=s*h);var v=(n-g)/2>>0,b={offset:v-o,size:0};c=r.reduce((T,P)=>{var D,O={stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:b.offset+b.size+o,size:f?h:(D=P.barSize)!==null&&D!==void 0?D:0}},N=[...T,O];return b=O.position,N},u)}else{var x=hi(e,n,0,!0);n-2*x-(s-1)*o<=0&&(o=0);var w=(n-2*x-(s-1)*o)/s;w>1&&(w>>=0);var S=mt(i)?Math.min(w,i):w;c=r.reduce((T,P,D)=>[...T,{stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:x+(w+o)*D+(w-S)/2,size:S}}],u)}return c}}var mze=(t,e,n,r,i,a,s)=>{var o=Vr(s)?e:s,c=gze(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>Rx(Rx({},u),{},{position:Rx(Rx({},u.position),{},{offset:u.position.offset-i/2})}))),c},vze=(t,e)=>{var n=DR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}},yze=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function bze(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&mt(t.zIndex)?t.zIndex:e}var Tee=t=>{var{chartData:e}=t,n=xn(),r=Pi();return A.useEffect(()=>r?()=>{}:(n(E$(e)),()=>{n(E$(void 0))}),[e,n,r]),null},v9={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Aee=Qi({name:"brush",initialState:v9,reducers:{setBrushSettings(t,e){return e.payload==null?v9:e.payload}}}),{setBrushSettings:tVe}=Aee.actions,xze=Aee.reducer,wze=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},Sze=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return wze({x:e,y:n},{x:r,y:i})};function _ze(t){return(t%180+180)%180}var Eze=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=_ze(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},Tze={dots:[],areas:[],lines:[]},kee=Qi({name:"referenceElements",initialState:Tze,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ks(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ks(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ks(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:nVe,removeDot:rVe,addArea:iVe,removeArea:aVe,addLine:Aze,removeLine:kze}=kee.actions,Cze=kee.reducer,Cee=A.createContext(void 0),Ize=t=>{var{children:e}=t,[n]=A.useState("".concat(Zv("recharts"),"-clip")),r=Eee();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(Cee.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},Pze=()=>A.useContext(Cee);class Nze{constructor(e){var{x:n,y:r}=e;this.xAxisScale=n,this.yAxisScale=r}map(e,n){var r,i,{position:a}=n;return{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:0,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:0}}mapWithFallback(e,n){var r,i,{position:a,fallback:s}=n,o,c;return s==="rangeMin"?o=this.yAxisScale.rangeMin():s==="rangeMax"?o=this.yAxisScale.rangeMax():o=0,s==="rangeMin"?c=this.xAxisScale.rangeMin():s==="rangeMax"?c=this.xAxisScale.rangeMax():c=0,{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:c,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:o}}isInRange(e){var{x:n,y:r}=e,i=n==null||this.xAxisScale.isInRange(n),a=r==null||this.yAxisScale.isInRange(r);return i&&a}}function y9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y9(Object(n),!0).forEach(function(r){Dze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dze(t,e,n){return(e=Oze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oze(t){var e=Rze(t,"string");return typeof e=="symbol"?e:e+""}function Rze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oS(){return oS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oS.apply(null,arguments)}var Mze=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!mt(e.x1)||!mt(e.y1)||!mt(e.x2)||!mt(e.y2))return null;n=A.createElement("line",oS({},e,{className:"recharts-reference-line-line"}))}return n},jze=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.map(t,{position:n});if(!mt(c)||e==="discard"&&!i.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},zze=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.map(t,{position:n});if(!mt(c)||e==="discard"&&!i.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},Lze=(t,e,n,r)=>{var i=[r.mapWithFallback(t[0],{position:n,fallback:"rangeMin"}),r.mapWithFallback(t[1],{position:n,fallback:"rangeMax"})];return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},Vze=(t,e,n,r,i,a,s)=>{var{x:o,y:c,segment:u,ifOverflow:f}=s,h=Ha(o),g=Ha(c);return g?jze(c,f,r,a,e,n):h?zze(o,f,r,i,t,n):u!=null&&u.length===2?Lze(u,f,r,new Nze({x:t,y:e})):null};function Bze(t){var e=xn();return A.useEffect(()=>(e(Aze(t)),()=>{e(kze(t))})),null}function Fze(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=Pi(),o=Pze(),c=Ge(C=>Mo(C,e)),u=Ge(C=>jo(C,n)),f=Ge(C=>Rp(C,"xAxis",e,s)),h=Ge(C=>Rp(C,"yAxis",n,s)),g=ey();if(!o||!g||c==null||u==null||f==null||h==null)return null;var v=Vze(f,h,g,t.position,c.orientation,u.orientation,t);if(!v)return null;var b=v[0],x=v[1];if(b==null||x==null)return null;var{x:w,y:S}=b,{x:T,y:P}=x,D=a==="hidden"?"url(#".concat(o,")"):void 0,O=b9(b9({clipPath:D},xa(t)),{},{x1:w,y1:S,x2:T,y2:P}),N=Sze({x1:w,y1:S,x2:T,y2:P});return A.createElement(Ja,{zIndex:t.zIndex},A.createElement(gi,{className:Yt("recharts-reference-line",i)},Mze(r,O),A.createElement(aee,oS({},N,{lowerWidth:N.width,upperWidth:N.width}),A.createElement(oee,{label:t.label}),t.children)))}var Uze={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Lr.line};function yM(t){var e=Jr(t,Uze);return A.createElement(A.Fragment,null,A.createElement(Bze,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(Fze,e))}yM.displayName="ReferenceLine";function Iee(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function $ze(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Eze(r,n)}function qze(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function f0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Gze(t,e){return Iee(t,e+1)}function Hze(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:Iee(r,u)};var x=c,w,S=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,P=c===0||f0(t,T,S,f,o);P||(c=0,f=s,u+=1),P&&(f=T+t*(S()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function Kze(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,v=function(){var D=r[x];if(D==null)return 0;var O=x,N,C=()=>(N===void 0&&(N=n(D,O)),N),I=D.coordinate,R=x===f||f0(t,I,C,h,c);if(!R)return g=!1,1;R&&(h=I+t*(C()/2+i))},b,x=f;x<s&&(b=v(),!(b!==0&&b===1));x+=u);if(g){for(var w=[],S=f;S<s;S+=u){var T=r[S];T!=null&&w.push(T)}return w}}return[]}function x9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x9(Object(n),!0).forEach(function(r){Wze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wze(t,e,n){return(e=Yze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yze(t){var e=Xze(t,"string");return typeof e=="symbol"?e:e+""}function Xze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qze(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var v=a[g];if(v==null)return 1;var b=v,x,w=()=>(x===void 0&&(x=n(v,g)),x);if(g===s-1){var S=t*(b.coordinate+t*w()/2-c);a[g]=b=si(si({},b),{},{tickCoord:S>0?b.coordinate-S*t:b.coordinate})}else a[g]=b=si(si({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var T=f0(t,b.tickCoord,w,o,c);T&&(c=b.tickCoord-t*(w()/2+i),a[g]=si(si({},b),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function Zze(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1];if(f!=null){var h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=si(si({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var v=f0(t,f.tickCoord,()=>h,c,u);v&&(u=f.tickCoord-t*(h/2+i),s[o-1]=si(si({},f),{},{isShow:!0}))}}}for(var b=a?o-1:o,x=function(T){var P=s[T];if(P==null)return 1;var D=P,O,N=()=>(O===void 0&&(O=n(P,T)),O);if(T===0){var C=t*(D.coordinate-t*N()/2-c);s[T]=D=si(si({},D),{},{tickCoord:C<0?D.coordinate-C*t:D.coordinate})}else s[T]=D=si(si({},D),{},{tickCoord:D.coordinate});if(D.tickCoord!=null){var I=f0(t,D.tickCoord,N,c,u);I&&(c=D.tickCoord+t*(N()/2+i),s[T]=si(si({},D),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function bM(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(He(c)||M_.isSsr){var g;return(g=Gze(i,He(c)?c:0))!==null&&g!==void 0?g:[]}var v=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?yv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(O,N)=>{var C=typeof u=="function"?u(O.value,N):O.value;return b==="width"?$ze(yv(C,{fontSize:e,letterSpacing:n}),x,h):yv(C,{fontSize:e,letterSpacing:n})[b]},S=i[0],T=i[1],P=i.length>=2&&S!=null&&T!=null?zr(T.coordinate-S.coordinate):1,D=qze(a,P,b);return c==="equidistantPreserveStart"?Hze(P,D,w,i,s):c==="equidistantPreserveEnd"?Kze(P,D,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?v=Zze(P,D,w,i,s,c==="preserveStartEnd"):v=Qze(P,D,w,i,s),v.filter(O=>O.isShow))}var Jze=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},e4e=["axisLine","width","height","className","hide","ticks","axisType"];function t4e(t,e){if(t==null)return{};var n,r,i=n4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function n4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sf.apply(null,arguments)}function w9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w9(Object(n),!0).forEach(function(r){r4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r4e(t,e,n){return(e=i4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i4e(t){var e=a4e(t,"string");return typeof e=="symbol"?e:e+""}function a4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Lr.axis};function s4e(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=Ln(Ln(Ln({},c),Ns(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=Ln(Ln({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=Ln(Ln({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",sf({},u,{className:Yt("recharts-cartesian-axis-line",Zd(o,"className"))}))}function o4e(t,e,n,r,i,a,s,o,c){var u,f,h,g,v,b,x=o?-1:1,w=t.tickSize||s,S=He(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,v=S;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,v=u-x*c,b=S;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,v=u+x*c,b=S;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,v=S;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:v,y:b}}}function l4e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function c4e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function u4e(t){var{option:e,tickProps:n,value:r}=t,i,a=Yt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,Ln(Ln({},n),{},{className:a}));else if(typeof e=="function")i=e(Ln(Ln({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Yt(s,pee(e))),i=A.createElement(nE,sf({},n,{className:s}),r)}return i}var d4e=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:v,width:b,height:x,tickSize:w,tickMargin:S,fontSize:T,letterSpacing:P,getTicksConfig:D,events:O,axisType:N}=t,C=bM(Ln(Ln({},D),{},{ticks:n}),T,P),I=l4e(f,h),R=c4e(f,h),j=Ns(D),B=Qv(r),L={};typeof i=="object"&&(L=i);var z=Ln(Ln({},j),{},{fill:"none"},L),W=C.map(Y=>Ln({entry:Y},o4e(Y,g,v,b,x,f,w,h,S))),Q=W.map(Y=>{var{entry:J,line:ie}=Y;return A.createElement(gi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&A.createElement("line",sf({},z,ie,{className:Yt("recharts-cartesian-axis-tick-line",Zd(i,"className"))})))}),G=W.map((Y,J)=>{var ie,X,{entry:U,tick:Z}=Y,ee=Ln(Ln(Ln(Ln({verticalAnchor:R},j),{},{textAnchor:I,stroke:"none",fill:a},Z),{},{index:J,payload:U,visibleTicksCount:C.length,tickFormatter:s,padding:c},u),{},{angle:(ie=(X=u?.angle)!==null&&X!==void 0?X:j.angle)!==null&&ie!==void 0?ie:0}),K=Ln(Ln({},ee),B);return A.createElement(gi,sf({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},g_(O,U,J)),r&&A.createElement(u4e,{option:r,tickProps:K,value:"".concat(typeof s=="function"?s(U.value,J):U.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},G.length>0&&A.createElement(Ja,{zIndex:Lr.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:e},G)),Q.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},Q))}),f4e=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=t4e(t,e4e),[f,h]=A.useState(""),[g,v]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return Jze({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var T=S[0];if(T){var P=window.getComputedStyle(T),D=P.fontSize,O=P.letterSpacing;(D!==f||O!==g)&&(h(D),v(O))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(Ja,{zIndex:t.zIndex},A.createElement(gi,{className:Yt("recharts-cartesian-axis",a)},A.createElement(s4e,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ns(t)}),A.createElement(d4e,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(aee,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(oee,{label:t.label,labelRef:t.labelRef}),t.children)))}),xM=A.forwardRef((t,e)=>{var n=Jr(t,yl);return A.createElement(f4e,sf({},n,{ref:e}))});xM.displayName="CartesianAxis";var h4e=["x1","y1","x2","y2","key"],p4e=["offset"],g4e=["xAxisId","yAxisId"],m4e=["xAxisId","yAxisId"];function S9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(n),!0).forEach(function(r){v4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v4e(t,e,n){return(e=y4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y4e(t){var e=b4e(t,"string");return typeof e=="symbol"?e:e+""}function b4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(null,arguments)}function lS(t,e){if(t==null)return{};var n,r,i=x4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function x4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var w4e=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Pee(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=lS(n,h4e),h=(i=Ns(f))!==null&&i!==void 0?i:{},{offset:g}=h,v=lS(h,p4e);r=A.createElement("line",Td({},v,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function S4e(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=lS(t,g4e),c=i.map((u,f)=>{var h=ci(ci({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return A.createElement(Pee,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function _4e(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=lS(t,m4e),c=i.map((u,f)=>{var h=ci(ci({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(Pee,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function E4e(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=u[g+1],b=v==null,x=b?i+s-h:v-h;if(x<=0)return null;var w=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:x,width:a,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function T4e(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=u[g+1],b=v==null,x=b?i+s-h:v-h;if(x<=0)return null;var w=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:x,height:o,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var A4e=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return pQ(bM(ci(ci(ci({},yl),n),{},{ticks:gQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},k4e=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return pQ(bM(ci(ci(ci({},yl),n),{},{ticks:gQ(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},C4e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Lr.grid};function sE(t){var e=_Q(),n=EQ(),r=SQ(),i=ci(ci({},Jr(t,C4e)),{},{x:He(t.x)?t.x:r.left,y:He(t.y)?t.y:r.top,width:He(t.width)?t.width:r.width,height:He(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:v}=i,b=Pi(),x=Ge(R=>f$(R,"xAxis",a,b)),w=Ge(R=>f$(R,"yAxis",s,b));if(!Po(u)||!Po(f)||!He(o)||!He(c))return null;var S=i.verticalCoordinatesGenerator||A4e,T=i.horizontalCoordinatesGenerator||k4e,{horizontalPoints:P,verticalPoints:D}=i;if((!P||!P.length)&&typeof T=="function"){var O=g&&g.length,N=T({yAxis:w?ci(ci({},w),{},{ticks:O?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},O?!0:h);R1(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(P=N)}if((!D||!D.length)&&typeof S=="function"){var C=v&&v.length,I=S({xAxis:x?ci(ci({},x),{},{ticks:C?v:x.ticks}):void 0,width:e??u,height:n??f,offset:r},C?!0:h);R1(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(D=I)}return A.createElement(Ja,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(w4e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(E4e,Td({},i,{horizontalPoints:P})),A.createElement(T4e,Td({},i,{verticalPoints:D})),A.createElement(S4e,Td({},i,{offset:r,horizontalPoints:P,xAxis:x,yAxis:w})),A.createElement(_4e,Td({},i,{offset:r,verticalPoints:D,xAxis:x,yAxis:w}))))}sE.displayName="CartesianGrid";var I4e={},Nee=Qi({name:"errorBars",initialState:I4e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:sVe,replaceErrorBar:oVe,removeErrorBar:lVe}=Nee.actions,P4e=Nee.reducer,N4e=["children"];function D4e(t,e){if(t==null)return{};var n,r,i=O4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function O4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var R4e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},M4e=A.createContext(R4e);function j4e(t){var{children:e}=t,n=D4e(t,N4e);return A.createElement(M4e.Provider,{value:n},e)}function Dee(t,e){var n,r,i=Ge(u=>Mo(u,t)),a=Ge(u=>jo(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Or.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Rr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function z4e(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=Eee(),{needClipX:a,needClipY:s,needClip:o}=Dee(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var YC={exports:{}},XC={};var _9;function L4e(){if(_9)return XC;_9=1;var t=zp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return XC.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=s(function(){function w(O){if(!S){if(S=!0,T=O,O=h(O),g!==void 0&&b.hasValue){var N=b.value;if(g(N,O))return P=N}return P=O}if(N=P,n(T,O))return N;var C=h(O);return g!==void 0&&g(N,C)?(T=O,N):(T=O,P=C)}var S=!1,T,P,D=f===void 0?null:f;return[function(){return w(u())},D===null?void 0:function(){return w(D())}]},[u,f,h,g]);var x=r(c,v[0],v[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},XC}var E9;function V4e(){return E9||(E9=1,YC.exports=L4e()),YC.exports}V4e();function B4e(t){t()}function F4e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){B4e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var T9={notify(){},get:()=>[]};function U4e(t,e){let n,r=T9,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let S=!1;return()=>{S||(S=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=F4e())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=T9)}function g(){a||(a=!0,f())}function v(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return b}var $4e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",q4e=$4e(),G4e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",H4e=G4e(),K4e=()=>q4e||H4e?A.useLayoutEffect:A.useEffect,W4e=K4e();function A9(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Y4e(t,e){if(A9(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!A9(t[n[i]],e[n[i]]))return!1;return!0}var X4e=Symbol.for("react-redux-context"),Q4e=typeof globalThis<"u"?globalThis:{};function Z4e(){if(!A.createContext)return{};const t=Q4e[X4e]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var J4e=Z4e();function eLe(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=U4e(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);W4e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||J4e;return A.createElement(o.Provider,{value:a},e)}var tLe=eLe,nLe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function rLe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function wM(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(nLe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Y4e(t[r],e[r]))return!1}else if(!rLe(t[r],e[r]))return!1;return!0}function mf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:See}function vf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:See}var iLe="Invariant failed";function aLe(t,e){throw new Error(iLe)}function PN(){return PN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PN.apply(null,arguments)}function cS(t){return A.createElement(vee,PN({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var sLe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(He(e))return e;var a=He(r)||Vr(r);return a?e(r,i):(a||aLe(),n)}},oLe=(t,e,n)=>n,lLe=(t,e)=>e,gy=me([MR,lLe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),cLe=me([gy],t=>t?.maxBarSize),uLe=(t,e,n,r)=>r,dLe=me([Bt,MR,mf,vf,oLe],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),fLe=(t,e,n)=>{var r=Bt(t),i=mf(t,e),a=vf(t,e);if(!(i==null||a==null))return r==="horizontal"?EN(t,"yAxis",a,n):EN(t,"xAxis",i,n)},hLe=(t,e)=>{var n=Bt(t),r=mf(t,e),i=vf(t,e);if(!(r==null||i==null))return n==="horizontal"?d$(t,"xAxis",r):d$(t,"yAxis",i)},pLe=me([dLe,eDe,hLe],dze),gLe=(t,e,n)=>{var r,i,a=gy(t,e);if(a==null)return 0;var s=mf(t,e),o=vf(t,e);if(s==null||o==null)return 0;var c=Bt(t),u=VZ(t),{maxBarSize:f}=a,h=Vr(f)?u:f,g,v;return c==="horizontal"?(g=jp(t,"xAxis",s,n),v=Mp(t,"xAxis",s,n)):(g=jp(t,"yAxis",o,n),v=Mp(t,"yAxis",o,n)),(r=(i=O1(g,v,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0},Oee=(t,e,n)=>{var r=Bt(t),i=mf(t,e),a=vf(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=jp(t,"xAxis",i,n),o=Mp(t,"xAxis",i,n)):(s=jp(t,"yAxis",a,n),o=Mp(t,"yAxis",a,n)),O1(s,o)}},mLe=me([pLe,VZ,JNe,BZ,gLe,Oee,cLe],mze),vLe=(t,e,n)=>{var r=mf(t,e);if(r!=null)return jp(t,"xAxis",r,n)},yLe=(t,e,n)=>{var r=vf(t,e);if(r!=null)return jp(t,"yAxis",r,n)},bLe=(t,e,n)=>{var r=mf(t,e);if(r!=null)return Mp(t,"xAxis",r,n)},xLe=(t,e,n)=>{var r=vf(t,e);if(r!=null)return Mp(t,"yAxis",r,n)},wLe=me([mLe,gy],yze),SLe=me([fLe,gy],vze),_Le=me([Ar,Y2,vLe,yLe,bLe,xLe,wLe,Bt,GNe,Oee,SLe,gy,uLe],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,S;if(w!=null&&w.length>0?S=w:S=v?.slice(b,x+1),S!=null)return QLe({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:S,offset:t,cells:g,dataStartIndex:b})}}),ELe=["index"];function NN(){return NN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NN.apply(null,arguments)}function TLe(t,e){if(t==null)return{};var n,r,i=ALe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ALe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ree=A.createContext(void 0),kLe=t=>{var e=A.useContext(Ree);if(e!=null)return e.stackId;if(t!=null)return eke(t)},CLe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),ILe=t=>{var e=A.useContext(Ree);if(e!=null){var{stackId:n}=e;return"url(#".concat(CLe(n,t),")")}},Mee=t=>{var{index:e}=t,n=TLe(t,ELe),r=ILe(e);return A.createElement(gi,NN({className:"recharts-bar-stack-layer",clipPath:r},n))},PLe=["onMouseEnter","onMouseLeave","onClick"],NLe=["value","background","tooltipPosition"],DLe=["id"],OLe=["onMouseEnter","onClick","onMouseLeave"];function Ml(){return Ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ml.apply(null,arguments)}function k9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(n),!0).forEach(function(r){RLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RLe(t,e,n){return(e=MLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MLe(t){var e=jLe(t,"string");return typeof e=="symbol"?e:e+""}function jLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uS(t,e){if(t==null)return{};var n,r,i=zLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var LLe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:A_(n,e),payload:t}]},VLe=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,getPosition:rg,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:A_(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return A.createElement(yee,{tooltipEntrySettings:f})});function BLe(t){var e=Ge(af),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=uS(a,PLe),f=gM(s,r,a.id),h=mM(o),g=vM(c,r,a.id);if(!i||n==null)return null;var v=Qv(i);return A.createElement(Ja,{zIndex:bze(i,Lr.barBackground)},n.map((b,x)=>{var{value:w,background:S,tooltipPosition:T}=b,P=uS(b,NLe);if(!S)return null;var D=f(b,x),O=h(b,x),N=g(b,x),C=Si(Si(Si(Si(Si({option:i,isActive:String(x)===e},P),{},{fill:"#eee"},S),v),g_(u,b,x)),{},{onMouseEnter:D,onMouseLeave:O,onClick:N,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(cS,Ml({key:"background-bar-".concat(x)},C))}))}function FLe(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Si(Si({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(EMe,{value:e?i:void 0},n)}function ULe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=Ge(af),c=Ge(sM),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?A.createElement(Ja,{zIndex:Lr.activeBar},A.createElement(Mee,{index:a},A.createElement(cS,Ml({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s})))):A.createElement(cS,Ml({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function $Le(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(cS,Ml({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function qLe(t){var e,{data:n,props:r}=t,i=(e=Ns(r))!==null&&e!==void 0?e:{},{id:a}=i,s=uS(i,DLe),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,v=uS(r,OLe),b=gM(f,c,a),x=mM(g),w=vM(h,c,a);return n?A.createElement(A.Fragment,null,n.map((S,T)=>A.createElement(Mee,Ml({index:T,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(T),className:"recharts-bar-rectangle"},g_(v,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),u?A.createElement(ULe,{shape:o,activeBar:u,baseProps:s,entry:S,index:T,dataKey:c}):A.createElement($Le,{shape:o,baseProps:s,entry:S,index:T,dataKey:c})))):null}function GLe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=z_(e,"recharts-bar-"),[v,b]=A.useState(!1),x=!v,w=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),S=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(FLe,{showLabels:x,rects:r},A.createElement(j_,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:S,key:g},T=>{var P=T===1?r:r?.map((D,O)=>{var N=h&&h[O];if(N)return Si(Si({},D),{},{x:yr(N.x,D.x,T),y:yr(N.y,D.y,T),width:yr(N.width,D.width,T),height:yr(N.height,D.height,T)});if(i==="horizontal"){var C=yr(0,D.height,T),I=yr(D.stackedBarStart,D.y,T);return Si(Si({},D),{},{y:I,height:C})}var R=yr(0,D.width,T),j=yr(D.stackedBarStart,D.x,T);return Si(Si({},D),{},{width:R,x:j})});return T>0&&(n.current=P??null),P==null?null:A.createElement(gi,null,A.createElement(qLe,{props:e,data:P}))}),A.createElement(uee,{label:e.label}),e.children)}function HLe(t){var e=A.useRef(null);return A.createElement(GLe,{previousRectanglesRef:e,props:t})}var jee=0,KLe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:bn(t,e)}};class WLe extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Yt("recharts-bar",i),h=u;return A.createElement(gi,{className:f,id:u},o&&A.createElement("defs",null,A.createElement(z4e,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(gi,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(BLe,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(HLe,this.props)))}}var YLe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:jee,xAxisId:0,yAxisId:0,zIndex:Lr.bar};function XLe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=Dee(e,n),g=ig(),v=Pi(),b=pM(t.children,py),x=Ge(T=>_Le(T,t.id,v,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,S=x?.[0];return S==null||S.height==null||S.width==null?w=0:w=g==="vertical"?S.height/2:S.width/2,A.createElement(j4e,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:KLe,errorBarOffset:w},A.createElement(WLe,Ml({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function QLe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:v,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,S=f?w.scale.domain():null,T=tke({numericAxis:w}),P=w.scale.map(T);return h.map((D,O)=>{var N,C,I,R,j,B;if(f){var L=f[O+x];if(L==null)return null;N=YAe(L,S)}else N=bn(D,n),Array.isArray(N)||(N=[T,N]);var z=sLe(r,jee)(N[1],O);if(e==="horizontal"){var W,Q=o.scale.map(N[0]),G=o.scale.map(N[1]);if(Q==null||G==null)return null;C=fF({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:D,index:O}),I=(W=G??Q)!==null&&W!==void 0?W:void 0,R=i.size;var Y=Q-G;if(j=Io(Y)?0:Y,B={x:C,y:g.top,width:R,height:g.height},Math.abs(z)>0&&Math.abs(j)<Math.abs(z)){var J=zr(j||z)*(Math.abs(z)-Math.abs(j));I-=J,j+=J}}else{var ie=s.scale.map(N[0]),X=s.scale.map(N[1]);if(ie==null||X==null)return null;if(C=ie,I=fF({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:D,index:O}),R=X-ie,j=i.size,B={x:g.left,y:I,width:g.width,height:j},Math.abs(z)>0&&Math.abs(R)<Math.abs(z)){var U=zr(R||z)*(Math.abs(z)-Math.abs(R));R+=U}}if(C==null||I==null||R==null||j==null)return null;var Z=Si(Si({},D),{},{stackedBarStart:P,x:C,y:I,width:R,height:j,value:f?N:N[1],payload:D,background:B,tooltipPosition:{x:C+R/2,y:I+j/2},parentViewBox:b},v&&v[O]&&v[O].props);return Z}).filter(Boolean)}function ZLe(t){var e=Jr(t,YLe),n=kLe(e.stackId),r=Pi();return A.createElement(bee,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(dje,{legendPayload:LLe(e)}),A.createElement(VLe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(Tje,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(Ja,{zIndex:e.zIndex},A.createElement(XLe,Ml({},e,{id:i})))))}var h0=A.memo(ZLe,wM);h0.displayName="Bar";var JLe=["domain","range"],e3e=["domain","range"];function C9(t,e){if(t==null)return{};var n,r,i=t3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function t3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function I9(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function zee(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=C9(t,JLe),{domain:a,range:s}=e,o=C9(e,e3e);return!I9(n,a)||!I9(r,s)?!1:wM(i,o)}var n3e=["type"],r3e=["dangerouslySetInnerHTML","ticks","scale"],i3e=["id","scale"];function DN(){return DN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DN.apply(null,arguments)}function P9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P9(Object(n),!0).forEach(function(r){a3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a3e(t,e,n){return(e=s3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s3e(t){var e=o3e(t,"string");return typeof e=="symbol"?e:e+""}function o3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ON(t,e){if(t==null)return{};var n,r,i=l3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function l3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function c3e(t){var e=xn(),n=A.useRef(null),r=TQ(),{type:i}=t,a=ON(t,n3e),s=H_(r,"xAxis",i),o=A.useMemo(()=>{if(s!=null)return N9(N9({},a),{},{type:s})},[a,s]);return A.useLayoutEffect(()=>{o!=null&&(n.current===null?e(tze(o)):n.current!==o&&e(nze({prev:n.current,next:o})),n.current=o)},[o,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(rze(n.current)),n.current=null)},[e]),null}var u3e=t=>{var{xAxisId:e,className:n}=t,r=Ge(Y2),i=Pi(),a="xAxis",s=Ge(S=>bJ(S,a,e,i)),o=Ge(S=>gJ(S,e)),c=Ge(S=>eOe(S,e)),u=Ge(S=>XZ(S,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,v=ON(t,r3e),{id:b,scale:x}=u,w=ON(u,i3e);return A.createElement(xM,DN({},v,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Yt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},d3e={allowDataOverflow:Or.allowDataOverflow,allowDecimals:Or.allowDecimals,allowDuplicatedCategory:Or.allowDuplicatedCategory,angle:Or.angle,axisLine:yl.axisLine,height:Or.height,hide:!1,includeHidden:Or.includeHidden,interval:Or.interval,label:!1,minTickGap:Or.minTickGap,mirror:Or.mirror,orientation:Or.orientation,padding:Or.padding,reversed:Or.reversed,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,tickLine:yl.tickLine,tickSize:yl.tickSize,type:Or.type,xAxisId:0},f3e=t=>{var e=Jr(t,d3e);return A.createElement(A.Fragment,null,A.createElement(c3e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(u3e,e))},oE=A.memo(f3e,zee);oE.displayName="XAxis";var h3e=["type"],p3e=["dangerouslySetInnerHTML","ticks","scale"],g3e=["id","scale"];function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RN.apply(null,arguments)}function D9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(n),!0).forEach(function(r){m3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m3e(t,e,n){return(e=v3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v3e(t){var e=y3e(t,"string");return typeof e=="symbol"?e:e+""}function y3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MN(t,e){if(t==null)return{};var n,r,i=b3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function b3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function x3e(t){var e=xn(),n=A.useRef(null),r=TQ(),{type:i}=t,a=MN(t,h3e),s=H_(r,"yAxis",i),o=A.useMemo(()=>{if(s!=null)return O9(O9({},a),{},{type:s})},[s,a]);return A.useLayoutEffect(()=>{o!=null&&(n.current===null?e(ize(o)):n.current!==o&&e(aze({prev:n.current,next:o})),n.current=o)},[o,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(sze(n.current)),n.current=null)},[e]),null}function w3e(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=Ge(Y2),c=Pi(),u=xn(),f="yAxis",h=Ge(N=>mJ(N,e)),g=Ge(N=>nOe(N,e)),v=Ge(N=>bJ(N,f,e,c)),b=Ge(N=>QZ(N,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||dM(i)||A.isValidElement(i)||b==null)){var N=a.current;if(N){var C=N.getCalculatedWidth();Math.round(h.width)!==Math.round(C)&&u(oze({id:e,width:C}))}}},[v,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:S}=t,T=MN(t,p3e),{id:P,scale:D}=b,O=MN(b,g3e);return A.createElement(xM,RN({},T,O,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Yt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:v,axisType:f}))}var S3e={allowDataOverflow:Rr.allowDataOverflow,allowDecimals:Rr.allowDecimals,allowDuplicatedCategory:Rr.allowDuplicatedCategory,angle:Rr.angle,axisLine:yl.axisLine,hide:!1,includeHidden:Rr.includeHidden,interval:Rr.interval,label:!1,minTickGap:Rr.minTickGap,mirror:Rr.mirror,orientation:Rr.orientation,padding:Rr.padding,reversed:Rr.reversed,scale:Rr.scale,tick:Rr.tick,tickCount:Rr.tickCount,tickLine:yl.tickLine,tickSize:yl.tickSize,type:Rr.type,width:Rr.width,yAxisId:0},_3e=t=>{var e=Jr(t,S3e);return A.createElement(A.Fragment,null,A.createElement(x3e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(w3e,e))},lE=A.memo(_3e,zee);lE.displayName="YAxis";var E3e=(t,e)=>e,SM=me([E3e,Bt,KZ,Fr,jJ,ql,v2e,Ar],E2e),_M=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},Lee=Ka("mouseClick"),Vee=Z0();Vee.startListening({actionCreator:Lee,effect:(t,e)=>{var n=t.payload,r=SM(e.getState(),_M(n));r?.activeIndex!=null&&e.dispatch(mOe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var jN=Ka("mouseMove"),Bee=Z0(),Mx=null;Bee.startListening({actionCreator:jN,effect:(t,e)=>{var n=t.payload;Mx!==null&&cancelAnimationFrame(Mx);var r=_M(n);Mx=requestAnimationFrame(()=>{var i=e.getState(),a=eM(i,i.tooltip.settings.shared);if(a==="axis"){var s=SM(i,r);s?.activeIndex!=null?e.dispatch(kJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(AJ())}Mx=null})}});function T3e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var R9={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Fee=Qi({name:"rootProps",initialState:R9,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:R9.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),A3e=Fee.reducer,{updateOptions:k3e}=Fee.actions,C3e=null,I3e={updatePolarOptions:(t,e)=>e.payload},Uee=Qi({name:"polarOptions",initialState:C3e,reducers:I3e}),{updatePolarOptions:P3e}=Uee.actions,N3e=Uee.reducer,$ee=Ka("keyDown"),qee=Ka("focus"),EM=Z0();EM.startListening({actionCreator:$ee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=tM(i,hg(n),uy(n),fy(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=ql(n);if(a==="Enter"){var u=rS(n,"axis","hover",String(i.index));e.dispatch(AN({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=sOe(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,v=o+g*h;if(!(c==null||v>=c.length||v<0)){var b=rS(n,"axis","hover",String(v));e.dispatch(AN({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});EM.startListening({actionCreator:qee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=rS(n,"axis","hover",String(a));e.dispatch(AN({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var za=Ka("externalEvent"),Gee=Z0(),QC=new Map;Gee.startListening({actionCreator:za,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=QC.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:n2e(o),activeDataKey:sM(o),activeIndex:af(o),activeLabel:VJ(o),activeTooltipIndex:af(o),isTooltipActive:r2e(o)};n(c,r)}finally{QC.delete(i)}});QC.set(i,s)}}});var D3e=me([dg],t=>t.tooltipItemPayloads),O3e=me([D3e,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),Hee=Ka("touchMove"),Kee=Z0();Kee.startListening({actionCreator:Hee,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=eM(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=SM(r,_M({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(kJ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(vQ),h=(o=u.getAttribute(yQ))!==null&&o!==void 0?o:void 0,g=fg(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:v}=g,b=O3e(r,f,h);e.dispatch(TJ({activeDataKey:v,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var R3e=VX({brush:xze,cartesianAxis:lze,chartData:tRe,errorBars:P4e,graphicalItems:_je,layout:qAe,legend:Yke,options:X2e,polarAxis:jMe,polarOptions:N3e,referenceElements:Cze,rootProps:A3e,tooltip:vOe,zIndex:L2e}),M3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return gAe({reducer:R3e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Vee.middleware,Bee.middleware,EM.middleware,Gee.middleware,Kee.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(eQ({type:"raf"}))},devTools:{serialize:{replacer:T3e},name:"recharts-".concat(n)}})};function Wee(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Pi(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=M3e(e,r));var s=U2;return A.createElement(tLe,{context:s,store:a.current},n)}function j3e(t){var{layout:e,margin:n}=t,r=xn(),i=Pi();return A.useEffect(()=>{i||(r(FAe(e)),r(BAe(n)))},[r,i,e,n]),null}var Yee=A.memo(j3e,wM);function Xee(t){var e=xn();return A.useEffect(()=>{e(k3e(t))},[e,t]),null}function M9(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=xn();return A.useLayoutEffect(()=>(r.current&&i(j2e({zIndex:e,element:r.current,isPanorama:n})),()=>{i(z2e({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function j9(t){var{children:e,isPanorama:n}=t,r=Ge(A2e);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(M9,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(M9,{key:s,zIndex:s,isPanorama:n})))}var z3e=["children"];function L3e(t,e){if(t==null)return{};var n,r,i=V3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function V3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dS.apply(null,arguments)}var B3e={width:"100%",height:"100%",display:"block"},F3e=A.forwardRef((t,e)=>{var n=_Q(),r=EQ(),i=zQ();if(!Po(n)||!Po(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(iX,dS({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:B3e,ref:e}),a)}),U3e=t=>{var{children:e}=t,n=Ge(P_);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(iX,{width:r,height:i,x:s,y:a},e)},z9=A.forwardRef((t,e)=>{var{children:n}=t,r=L3e(t,z3e),i=Pi();return i?A.createElement(U3e,null,A.createElement(j9,{isPanorama:!0},n)):A.createElement(F3e,dS({ref:e},r),A.createElement(j9,{isPanorama:!1},n))});function $3e(){var t=xn(),[e,n]=A.useState(null),r=Ge(oke);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;mt(a)&&a!==r&&t($Ae(a))}},[e,t,r]),n}function L9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(n),!0).forEach(function(r){G3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G3e(t,e,n){return(e=H3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H3e(t){var e=K3e(t,"string");return typeof e=="symbol"?e:e+""}function K3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qc(){return Qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qc.apply(null,arguments)}var W3e=()=>(uRe(),null);function fS(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Y3e=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:fS((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:fS((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((u,f)=>{s(h=>{var g=Math.round(u),v=Math.round(f);return h.containerWidth===g&&h.containerHeight===v?h:{containerWidth:g,containerHeight:v}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var x=b[0];if(x!=null){var{width:w,height:S}=x.contentRect;o(w,S)}},v=new ResizeObserver(g);v.observe(u),i.current=v}},[e,o]);return A.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(ty,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",Qc({ref:c},t)))}),X3e=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:fS(n),containerHeight:fS(r)}),s=A.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(ty,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Qc({ref:o},t)))}),Q3e=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(ty,{width:n,height:r}),A.createElement("div",Qc({ref:e},t)))}),Z3e=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?A.createElement(X3e,Qc({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?A.createElement(Q3e,Qc({},t,{width:n,height:r,ref:e})):A.createElement(A.Fragment,null,A.createElement(ty,{width:n,height:r}),A.createElement("div",Qc({ref:e},t)))});function J3e(t){return t?Y3e:Z3e}var e5e=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:v,onTouchMove:b,onTouchStart:x,style:w,width:S,responsive:T,dispatchTouchEvents:P=!0}=t,D=A.useRef(null),O=xn(),[N,C]=A.useState(null),[I,R]=A.useState(null),j=$3e(),B=X2(),L=B?.width>0?B.width:S,z=B?.height>0?B.height:i,W=A.useCallback(se=>{j(se),typeof e=="function"&&e(se),C(se),R(se),se!=null&&(D.current=se)},[j,e,C,R]),Q=A.useCallback(se=>{O(Lee(se)),O(za({handler:a,reactEvent:se}))},[O,a]),G=A.useCallback(se=>{O(jN(se)),O(za({handler:u,reactEvent:se}))},[O,u]),Y=A.useCallback(se=>{O(AJ()),O(za({handler:f,reactEvent:se}))},[O,f]),J=A.useCallback(se=>{O(jN(se)),O(za({handler:h,reactEvent:se}))},[O,h]),ie=A.useCallback(()=>{O(qee())},[O]),X=A.useCallback(se=>{O($ee(se.key))},[O]),U=A.useCallback(se=>{O(za({handler:s,reactEvent:se}))},[O,s]),Z=A.useCallback(se=>{O(za({handler:o,reactEvent:se}))},[O,o]),ee=A.useCallback(se=>{O(za({handler:c,reactEvent:se}))},[O,c]),K=A.useCallback(se=>{O(za({handler:g,reactEvent:se}))},[O,g]),ue=A.useCallback(se=>{O(za({handler:x,reactEvent:se}))},[O,x]),ne=A.useCallback(se=>{P&&O(Hee(se)),O(za({handler:b,reactEvent:se}))},[O,P,b]),oe=A.useCallback(se=>{O(za({handler:v,reactEvent:se}))},[O,v]),Se=J3e(T);return A.createElement(HJ.Provider,{value:N},A.createElement(K_e.Provider,{value:I},A.createElement(Se,{width:L??w?.width,height:z??w?.height,className:Yt("recharts-wrapper",r),style:q3e({position:"relative",cursor:"default",width:L,height:z},w),onClick:Q,onContextMenu:U,onDoubleClick:Z,onFocus:ie,onKeyDown:X,onMouseDown:ee,onMouseEnter:G,onMouseLeave:Y,onMouseMove:J,onMouseUp:K,onTouchEnd:oe,onTouchMove:ne,onTouchStart:ue,ref:W},A.createElement(W3e,null),n)))}),t5e=["width","height","responsive","children","className","style","compact","title","desc"];function n5e(t,e){if(t==null)return{};var n,r,i=r5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function r5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Qee=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=n5e(t,t5e),g=Ns(h);return c?A.createElement(A.Fragment,null,A.createElement(ty,{width:n,height:r}),A.createElement(z9,{otherAttributes:g,title:u,desc:f},a)):A.createElement(e5e,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(z9,{otherAttributes:g,title:u,desc:f,ref:e},A.createElement(Ize,null,a)))});function zN(){return zN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zN.apply(null,arguments)}var i5e={top:5,right:5,bottom:5,left:5},a5e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:i5e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},s5e=A.forwardRef(function(e,n){var r,i=Jr(e.categoricalChartProps,a5e),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(Wee,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},A.createElement(Tee,{chartData:u.data}),A.createElement(Yee,{layout:i.layout,margin:i.margin}),A.createElement(Xee,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(Qee,zN({},i,{ref:n})))}),o5e=["axis","item"],TM=A.forwardRef((t,e)=>A.createElement(s5e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:o5e,tooltipPayloadSearcher:KJ,categoricalChartProps:t,ref:e}));function l5e(t){var e=xn();return A.useEffect(()=>{e(P3e(t))},[e,t]),null}var c5e=["layout"];function LN(){return LN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LN.apply(null,arguments)}function u5e(t,e){if(t==null)return{};var n,r,i=d5e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var f5e={top:5,right:5,bottom:5,left:5},Zee={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:f5e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},h5e=A.forwardRef(function(e,n){var r,i=Jr(e.categoricalChartProps,Zee),{layout:a}=i,s=u5e(i,c5e),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(Wee,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(Tee,{chartData:i.data}),A.createElement(Yee,{layout:a,margin:i.margin}),A.createElement(Xee,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(l5e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(Qee,LN({},s,{ref:n})))});function V9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(n),!0).forEach(function(r){p5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p5e(t,e,n){return(e=g5e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g5e(t){var e=m5e(t,"string");return typeof e=="symbol"?e:e+""}function m5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v5e=["item"],y5e=B9(B9({},Zee),{},{layout:"centric",startAngle:0,endAngle:360}),b5e=A.forwardRef((t,e)=>{var n=Jr(t,y5e);return A.createElement(h5e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:v5e,tooltipPayloadSearcher:KJ,categoricalChartProps:n,ref:e})});const F9=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],U9=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function Jee(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const x5e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function jx(t){const e=parseInt(t.split("-")[1],10);return x5e[e-1]||t}function w5e(t){const e={};return t.forEach((n,r)=>{e[n.id]=F9[r%F9.length]}),e}function S5e(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=U9[i%U9.length]}),e}function _5e(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=bt(),s=A.useMemo(()=>Jee(t,a),[t,a]),o=A.useMemo(()=>{const x={};return n.forEach(w=>{x[w.id]=w.categoryId||"uncategorized"}),x},[n]),c=A.useMemo(()=>w5e(r),[r]),u=A.useMemo(()=>{const x={};return r.forEach(w=>{x[w.id]=w.name}),x},[r]),f=A.useMemo(()=>{const x=new Set(s);return e.filter(w=>w.type==="Expense"&&w.month&&x.has(w.month))},[e,s]),h=A.useMemo(()=>{const x={};r.forEach(T=>{x[T.id]=0}),f.forEach(T=>{const P=o[T.envelopeId]||"uncategorized";x[P]=(x[P]||0)+Math.abs(T.amount)});const w=Object.entries(x).map(([T,P])=>({categoryId:T,categoryName:u[T]||"Uncategorized",color:c[T]||"#9CA3AF",amount:Math.round(P*100)/100})).sort((T,P)=>P.amount-T.amount),S=w.reduce((T,P)=>T+P.amount,0);return{items:w,total:Math.round(S*100)/100}},[f,o,u,c,r]),g=A.useMemo(()=>{const x=new Set(r.map(N=>N.id)),w={};s.forEach(N=>{w[N]={}}),f.forEach(N=>{const C=o[N.envelopeId]||"uncategorized",I=N.month;w[I]&&(w[I][C]=(w[I][C]||0)+Math.abs(N.amount),x.add(C))});const S=[...x],T={};S.forEach(N=>{T[N]=c[N]||"#9CA3AF"});const P=s.map(N=>{const C={month:N,monthLabel:jx(N)};return S.forEach(I=>{C[I]=Math.round((w[N][I]||0)*100)/100}),C}),D=P.map(N=>S.reduce((C,I)=>C+(N[I]||0),0)),O=D.length>0?Math.round(D.reduce((N,C)=>N+C,0)/D.length):0;return{data:P,categoryKeys:S,colorMap:T,average:O}},[s,f,o,c,r]),v=A.useMemo(()=>{const x=[],w={};s.forEach(N=>{w[N]={}}),s.forEach(N=>{(i[N]||[]).forEach(I=>{x.push(I.name),w[N][I.name]=(w[N][I.name]||0)+I.amount})});const S=[...new Set(x)],T=S5e(S),P=s.map(N=>{const C={month:N,monthLabel:jx(N)};return S.forEach(I=>{C[I]=Math.round((w[N][I]||0)*100)/100}),C}),D=P.map(N=>S.reduce((C,I)=>C+(N[I]||0),0)),O=D.length>0?Math.round(D.reduce((N,C)=>N+C,0)/D.length):0;return{data:P,sourceKeys:S,colorMap:T,average:O}},[s,i]),b=A.useMemo(()=>({data:s.map(w=>{const T=(i[w]||[]).reduce((I,R)=>I+R.amount,0),D=f.filter(I=>I.month===w).reduce((I,R)=>I+Math.abs(R.amount),0),O=Math.max(0,T-D);if(T<=0)return{month:w,monthLabel:jx(w),savingsPercent:0,spendingPercent:100};const N=Math.min(100,Math.round(O/T*1e3)/10),C=Math.round((100-N)*10)/10;return{month:w,monthLabel:jx(w),savingsPercent:N,spendingPercent:C}})}),[s,i,f]);return{months:s,spendingTotals:h,spendingBreakdown:g,monthlyIncome:v,savingsData:b,categoryNameMap:u,categoryColorMap:c}}const E5e=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],T5e=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function A5e(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const AM=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),hS=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),ete=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),m.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),m.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:hS(a.value)})]},s)),m.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[m.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),m.jsx("span",{className:"text-zinc-900 dark:text-white",children:hS(i)})]})]})},k5e=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},C5e=()=>{const t=Qa(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a}=bt(),s=bt(b=>b.fetchMonthData),o=A.useMemo(()=>A5e(),[]),c=A.useRef(new Set);A.useEffect(()=>{const b=Jee(r,a),x=bt.getState(),w=b.filter(T=>{if(c.current.has(T)||x.areAllTransactionsLoaded)return!1;const P=x.incomeSources[T]!==void 0,D=x.loadedTransactionMonths.includes(T);return!P||!D});if(w.length===0)return;w.forEach(T=>c.current.add(T)),(async()=>{for(const T of w)try{await s(T)}catch(P){console.error(`Failed to fetch data for month ${T}:`,P),c.current.delete(T)}})()},[r,a,s]);const{spendingTotals:u,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:v}=_5e(r);return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx(_l,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Analytics"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:E5e.map(({key:b,label:x})=>m.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),m.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[T5e.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),o.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),m.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&m.jsx(I5e,{items:u.items,total:u.total}),e==="breakdown"&&m.jsx(P5e,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:v,average:f.average}),e==="income"&&m.jsx(N5e,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&m.jsx(D5e,{data:g.data})]})]})},I5e=({items:t,total:e})=>t.length===0?m.jsx(cE,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:m.jsxs("div",{className:"relative no-select-chart",children:[m.jsx(N_,{width:"100%",height:280,children:m.jsxs(b5e,{children:[m.jsx(wee,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,children:t.map((n,r)=>m.jsx(py,{fill:n.color},r))}),m.jsx(tE,{content:({active:n,payload:r})=>{if(!n||!r?.length)return null;const i=r[0].payload,a=e>0?(i.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:i.color}}),m.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName})]}),m.jsxs("div",{className:"text-zinc-600 dark:text-zinc-300",children:[hS(i.amount)," (",a,"%)"]})]})},contentStyle:{backgroundColor:"transparent",border:"none",padding:0,borderRadius:0,boxShadow:"none"}})]})}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-10",children:[m.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),m.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:AM(e)})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=e>0?(n.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2.5",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),m.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:n.categoryName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[r,"%"]}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:hS(n.amount)})]})]},n.categoryId)})})]})]}),P5e=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?m.jsx(cE,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),m.jsx(N_,{width:"100%",height:300,children:m.jsxs(TM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(sE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(oE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tE,{cursor:!1,content:a=>m.jsx(ete,{...a,colorMap:n,nameMap:r})}),m.jsx(yM,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${AM(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(h0,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(tte,{keys:e,colorMap:n,nameMap:r})]}),N5e=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?m.jsx(cE,{message:"No income data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),m.jsx(N_,{width:"100%",height:300,children:m.jsxs(TM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(sE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(oE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tE,{cursor:!1,content:a=>m.jsx(ete,{...a,colorMap:n,nameMap:i})}),m.jsx(yM,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${AM(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(h0,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(tte,{keys:e,colorMap:n,nameMap:i})]})},D5e=({data:t})=>{if(t.length===0)return m.jsx(cE,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),m.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),m.jsx(N_,{width:"100%",height:300,children:m.jsxs(TM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(sE,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(oE,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(lE,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(tE,{content:k5e}),m.jsx(h0,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),m.jsx(h0,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),m.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),m.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),m.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},tte=({keys:t,colorMap:e,nameMap:n})=>m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),m.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),m.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),cE=({message:t})=>m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:m.jsx(kw,{className:"w-8 h-8 text-zinc-400"})}),m.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),nl=({children:t})=>m.jsx(xt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),O5e=()=>{const t=Rs();return m.jsx(fr,{mode:"wait",children:m.jsxs(Yoe,{location:t,children:[m.jsx(ao,{path:"/",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(ZSe,{})})})}),m.jsx(ao,{path:"/envelope/:id",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(i_e,{})})})}),m.jsx(ao,{path:"/add-envelope",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(u_e,{})})})}),m.jsx(ao,{path:"/add-transaction",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(eX,{})})})}),m.jsx(ao,{path:"/transactions",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(z_e,{})})})}),m.jsx(ao,{path:"/settings",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(o_e,{})})})}),m.jsx(ao,{path:"/settings/categories",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(c_e,{})})})}),m.jsx(ao,{path:"/verify-email",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(rH,{})})})}),m.jsx(ao,{path:"/analytics",element:m.jsx(nl,{children:m.jsx(oa,{children:m.jsx(C5e,{})})})})]},t.pathname)})},R5e=()=>{const t=Qa(),{envelopes:e,appSettings:n}=bt(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if($.log(" Siri: Handler checking - siriToken:",i,"envelopes count:",e.length),!i||e.length===0){$.log(" Siri: Handler not ready - missing token or envelopes");return}const a=Et(rt,"siriQueries",i);$.log(" Siri: Setting up Firestore listener for token:",i);const s=ru(a,async o=>{if($.log(" Siri: Firestore snapshot received, exists:",o.exists()),!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await da(a)}catch(f){$.error("Failed to cleanup stale Siri query",f)}return}$.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await da(a);const f=await VP(c.query,e);$.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){$.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{$.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null},VN=[{id:"income",targetId:"tutorial-income-section",title:"Add Your Income",description:"Tap the + button to add your first income source (e.g., Salary, Freelance).",icon:zm,color:"green",encouragement:"Great start! Every budget begins with income."},{id:"envelope",targetId:"tutorial-add-envelope",title:"Create a Spending Envelope",description:"Tap the + on any category to create your first spending envelope.",icon:np,color:"purple",encouragement:"Nice! Envelopes help you track where money goes."},{id:"allocate",targetId:"tutorial-allocation-area",title:"Assign Money to Envelopes",description:"Tap the budget amount on an envelope and enter how much to allocate.",icon:vd,color:"blue",encouragement:"Almost there! Give every dollar a job."},{id:"piggybank",targetId:"tutorial-add-envelope",title:"Create a Piggybank",description:'Create a savings goal envelope. Toggle "Piggybank" when adding a new envelope.',icon:cf,color:"pink",encouragement:"You did it! Your budget is set up!"}],zx=VN.length,$9={green:{bg:"bg-green-50 dark:bg-green-900/30",border:"border-green-300 dark:border-green-700",text:"text-green-700 dark:text-green-300",ring:"ring-green-400",progressBg:"bg-green-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/30",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400",progressBg:"bg-purple-500"},blue:{bg:"bg-blue-50 dark:bg-blue-900/30",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400",progressBg:"bg-blue-500"},pink:{bg:"bg-pink-50 dark:bg-pink-900/30",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",ring:"ring-pink-400",progressBg:"bg-pink-500"}};function M5e(){const[t,e]=A.useState(!1);return A.useEffect(()=>{const n=()=>{const i=document.querySelectorAll(".fixed.inset-0.z-50");e(i.length>0)};n();const r=new MutationObserver(n);return r.observe(document.body,{childList:!0,subtree:!0}),()=>r.disconnect()},[]),t}const j5e=({targetRect:t,visible:e})=>{if(!e||!t)return null;const n=8,r=16,i=t.left-n,a=t.top-n,s=t.width+n*2,o=t.height+n*2;return m.jsxs("div",{className:"fixed inset-0 z-[48] pointer-events-none",children:[m.jsxs("svg",{className:"w-full h-full pointer-events-none",children:[m.jsx("defs",{children:m.jsxs("mask",{id:"spotlight-mask",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"white"}),m.jsx("rect",{x:i,y:a,width:s,height:o,rx:r,ry:r,fill:"black"})]})}),m.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#spotlight-mask)"})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 pointer-events-auto",style:{height:Math.max(0,a)}}),m.jsx("div",{className:"absolute left-0 right-0 bottom-0 pointer-events-auto",style:{top:a+o}}),m.jsx("div",{className:"absolute left-0 pointer-events-auto",style:{top:a,height:o,width:Math.max(0,i)}}),m.jsx("div",{className:"absolute right-0 pointer-events-auto",style:{top:a,height:o,left:i+s}}),m.jsx(xt.div,{className:"absolute border-2 border-white/60 rounded-2xl pointer-events-none",style:{left:i,top:a,width:s,height:o},animate:{boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 8px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0}})]})},z5e=()=>{const t=bt(I=>I.guidedTutorialStep),e=bt(I=>I.skipGuidedTutorial),n=bt(I=>I.advanceGuidedTutorial),r=bt(I=>I.incomeSources),i=bt(I=>I.currentMonth),a=bt(I=>I.envelopes),s=bt(I=>I.allocations),o=A.useMemo(()=>a.filter(I=>I.isPiggybank),[a]),c=M5e(),[u,f]=A.useState(null),[h,g]=A.useState(!1),[v,b]=A.useState(!1),x=A.useRef(null),w=t,S=w!==null&&w>=0&&w<zx,T=S?VN[w]:null,P=!c&&!h&&!v,D=A.useCallback(()=>{if(!T){f(null);return}const I=document.getElementById(T.targetId);f(I?I.getBoundingClientRect():null)},[T]);if(A.useEffect(()=>{D();const I=setInterval(D,500);return window.addEventListener("resize",D),window.addEventListener("scroll",D,!0),()=>{clearInterval(I),window.removeEventListener("resize",D),window.removeEventListener("scroll",D,!0)}},[D]),A.useEffect(()=>{if(w===null)return;if((()=>{switch(w){case 0:return(r[i]||[]).length>0;case 1:return a.filter(R=>!R.isPiggybank).length>0;case 2:return(s[i]||[]).filter(R=>R.budgetedAmount>0).length>0;case 3:return o.length>0;default:return!1}})())return b(!0),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{b(!1),n(),x.current=null},1500),()=>{x.current&&(clearTimeout(x.current),x.current=null)}},[w,r,i,a,s,o,n]),!S||!T)return null;const O=$9[T.color]||$9.blue,N=T.icon,C=(w+1)/zx*100;return m.jsxs(m.Fragment,{children:[P&&m.jsx(j5e,{targetRect:u,visible:!0}),m.jsxs(fr,{mode:"wait",children:[!v&&!h&&!c&&m.jsx(xt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"fixed left-4 right-4 z-[49] max-w-md mx-auto pointer-events-auto",style:u?{bottom:u.top>window.innerHeight/2?window.innerHeight-u.top+20:void 0,top:u.top<=window.innerHeight/2?u.bottom+20:void 0}:{bottom:24},children:m.jsxs("div",{className:`${O.bg} border ${O.border} rounded-2xl p-4 shadow-2xl`,children:[m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:"Setup Progress"}),m.jsxs("span",{className:"text-xs font-bold text-gray-700 dark:text-zinc-300",children:[Math.round(C),"%"]})]}),m.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx(xt.div,{className:`h-full rounded-full ${O.progressBg}`,initial:{width:`${w/zx*100}%`},animate:{width:`${C}%`},transition:{duration:.5,ease:"easeOut"}})}),m.jsx("div",{className:"flex justify-between mt-1",children:VN.map((I,R)=>m.jsx("div",{className:"flex flex-col items-center",children:m.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${R<w?"bg-green-500":R===w?O.progressBg:"bg-gray-300 dark:bg-zinc-600"}`})},I.id))})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:`${O.bg} p-2 rounded-xl border ${O.border} flex-shrink-0`,children:m.jsx(N,{className:`w-6 h-6 ${O.text}`})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm mb-1",children:["Step ",w+1,": ",T.title]}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-zinc-400 leading-relaxed",children:T.description})]})]}),m.jsx("div",{className:"mt-3 flex justify-end",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-white/50 dark:hover:bg-zinc-800/50",children:[m.jsx(mq,{size:12}),"Skip Tutorial"]})})]})},`step-${w}`),v&&m.jsx(xt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-[49] flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-2xl border border-green-200 dark:border-green-800 text-center max-w-xs",children:[m.jsx(xt.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:m.jsx(oo,{className:"w-12 h-12 text-green-500 mx-auto mb-2"})}),m.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1",children:w<zx-1?"Step Complete!":"All Done!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:T.encouragement})]})},"celebration")]}),m.jsx(fr,{children:h&&m.jsx(xt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(xt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Tutorial?"}),m.jsxs("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-1",children:["You're ",m.jsxs("strong",{children:[Math.round(C),"%"]})," through the setup!"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"You can always restart from Settings if you change your mind."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Keep Going"}),m.jsx("button",{onClick:()=>{g(!1),e()},className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})})]})};function L5e(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=bt(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:v}=rn(),{showToast:b}=vu();if(A.useEffect(()=>{const S=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(S)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const T=new URLSearchParams(window.location.search),P=T.get("mode"),D=T.get("oobCode");if(P==="resetPassword"&&D){$.log(" Processing password reset from URL"),a(D);return}if(P==="verifyEmail"&&D){$.log(" Processing email verification from URL");try{await Dae(bi,D),$.log(" Email verification successful");const O=window.location.pathname;if(window.history.replaceState({},document.title,O),bi.currentUser){await bi.currentUser.reload(),$.log(" User reloaded after verification");const N=await Zh(()=>Promise.resolve().then(()=>GY),void 0).then(C=>C.useBudgetStore.getState());$.log(" Triggering onboarding check after email verification..."),await N.checkAndStartOnboarding()}b("Email verified successfully! You can now sign in.","success"),setTimeout(async()=>{await bi.signOut()},2e3)}catch(O){$.error(" Email verification failed:",O),b("Email verification failed. The link may be expired or invalid.","error")}}})()},[]),A.useEffect(()=>{const S=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)"),P=()=>{const D=s?.theme??"system",O=T.matches;D==="dark"||D==="system"&&O?S.classList.add("dark"):S.classList.remove("dark")};if(P(),s?.theme==="system")return T.addEventListener("change",P),()=>T.removeEventListener("change",P)},[s]),A.useEffect(()=>{const S=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":S.style.fontSize="75%";break;case"small":S.style.fontSize="87.5%";break;case"large":S.style.fontSize="112.5%";break;case"extra-large":S.style.fontSize="125%";break;default:S.style.fontSize="100%"}},[s?.fontSize]),t||!u)return m.jsxs(m.Fragment,{children:[m.jsx(iH,{message:"Initializing Personal Budget..."}),m.jsx(tx,{})]});if(i)return m.jsxs(oa,{children:[m.jsx(Qpe,{oobCode:i,onSuccess:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)},onCancel:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)}}),m.jsx(tx,{})]});if(!c)return v?m.jsxs(oa,{children:[m.jsx(rH,{}),m.jsx(tx,{})]}):m.jsxs(oa,{children:[m.jsx(Xpe,{}),m.jsx(tx,{})]});const w=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:m.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:m.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),m.jsxs(oa,{children:[w&&m.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),m.jsxs(xle,{children:[m.jsx(R5e,{}),m.jsx(O5e,{}),n&&m.jsxs("div",{className:"fixed inset-0 z-[60]",children:[m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),m.jsx("div",{className:"absolute inset-0",children:m.jsx(eX,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),m.jsx(z5e,{}),!o&&m.jsx(Wye,{onAddTransaction:()=>r(!0)})]})]})]})}Gne({onNeedRefresh(){},onOfflineReady(){$.log("App is ready for offline work")}});Une.createRoot(document.getElementById("root")).render(m.jsx(A.StrictMode,{children:m.jsx(L5e,{})}));export{gt as T,rt as a,Zhe as b,m5 as c,Et as d,Xr as e,la as f,DA as g,da as h,$ as l,ru as o,Ui as q,ua as s,ad as t,co as u,tw as w};
