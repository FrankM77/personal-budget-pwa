function Qte(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Il(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var HT={exports:{}},tm={};var I4;function Zte(){if(I4)return tm;I4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return tm.Fragment=e,tm.jsx=n,tm.jsxs=n,tm}var P4;function Jte(){return P4||(P4=1,HT.exports=Zte()),HT.exports}var m=Jte(),KT={exports:{}},lt={};var N4;function ene(){if(N4)return lt;N4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(U,X,re){this.props=U,this.context=X,this.refs=w,this.updater=re||b}S.prototype.isReactComponent={},S.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=S.prototype;function I(U,X,re){this.props=U,this.context=X,this.refs=w,this.updater=re||b}var O=I.prototype=new T;O.constructor=I,x(O,S.prototype),O.isPureReactComponent=!0;var D=Array.isArray;function N(){}var C={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function R(U,X,re){var K=re.ref;return{$$typeof:t,type:U,key:X,ref:K!==void 0?K:null,props:re}}function j(U,X){return R(U.type,X,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function B(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(re){return X[re]})}var z=/\/+/g;function W(U,X){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):X.toString(36)}function Z(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(N,N):(U.status="pending",U.then(function(X){U.status==="pending"&&(U.status="fulfilled",U.value=X)},function(X){U.status==="pending"&&(U.status="rejected",U.reason=X)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function G(U,X,re,K,ue){var ne=typeof U;(ne==="undefined"||ne==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(ne){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case t:case e:oe=!0;break;case f:return oe=U._init,G(oe(U._payload),X,re,K,ue)}}if(oe)return ue=ue(U),oe=K===""?"."+W(U,0):K,D(ue)?(re="",oe!=null&&(re=oe.replace(z,"$&/")+"/"),G(ue,X,re,"",function(ge){return ge})):ue!=null&&(L(ue)&&(ue=j(ue,re+(ue.key==null||U&&U.key===ue.key?"":(""+ue.key).replace(z,"$&/")+"/")+oe)),X.push(ue)),1;oe=0;var _e=K===""?".":K+":";if(D(U))for(var ae=0;ae<U.length;ae++)K=U[ae],ne=_e+W(K,ae),oe+=G(K,X,re,ne,ue);else if(ae=v(U),typeof ae=="function")for(U=ae.call(U),ae=0;!(K=U.next()).done;)K=K.value,ne=_e+W(K,ae++),oe+=G(K,X,re,ne,ue);else if(ne==="object"){if(typeof U.then=="function")return G(Z(U),X,re,K,ue);throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return oe}function Y(U,X,re){if(U==null)return U;var K=[],ue=0;return G(U,K,"","",function(ne){return X.call(re,ne,ue++)}),K}function Q(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(re){(U._status===0||U._status===-1)&&(U._status=1,U._result=re)},function(re){(U._status===0||U._status===-1)&&(U._status=2,U._result=re)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var J=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},te={map:Y,forEach:function(U,X,re){Y(U,function(){X.apply(this,arguments)},re)},count:function(U){var X=0;return Y(U,function(){X++}),X},toArray:function(U){return Y(U,function(X){return X})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return lt.Activity=h,lt.Children=te,lt.Component=S,lt.Fragment=n,lt.Profiler=i,lt.PureComponent=I,lt.StrictMode=r,lt.Suspense=c,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,lt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return C.H.useMemoCache(U)}},lt.cache=function(U){return function(){return U.apply(null,arguments)}},lt.cacheSignal=function(){return null},lt.cloneElement=function(U,X,re){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var K=x({},U.props),ue=U.key;if(X!=null)for(ne in X.key!==void 0&&(ue=""+X.key),X)!P.call(X,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&X.ref===void 0||(K[ne]=X[ne]);var ne=arguments.length-2;if(ne===1)K.children=re;else if(1<ne){for(var oe=Array(ne),_e=0;_e<ne;_e++)oe[_e]=arguments[_e+2];K.children=oe}return R(U.type,ue,K)},lt.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},lt.createElement=function(U,X,re){var K,ue={},ne=null;if(X!=null)for(K in X.key!==void 0&&(ne=""+X.key),X)P.call(X,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ue[K]=X[K]);var oe=arguments.length-2;if(oe===1)ue.children=re;else if(1<oe){for(var _e=Array(oe),ae=0;ae<oe;ae++)_e[ae]=arguments[ae+2];ue.children=_e}if(U&&U.defaultProps)for(K in oe=U.defaultProps,oe)ue[K]===void 0&&(ue[K]=oe[K]);return R(U,ne,ue)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:o,render:U}},lt.isValidElement=L,lt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:Q}},lt.memo=function(U,X){return{$$typeof:u,type:U,compare:X===void 0?null:X}},lt.startTransition=function(U){var X=C.T,re={};C.T=re;try{var K=U(),ue=C.S;ue!==null&&ue(re,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(N,J)}catch(ne){J(ne)}finally{X!==null&&re.types!==null&&(X.types=re.types),C.T=X}},lt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},lt.use=function(U){return C.H.use(U)},lt.useActionState=function(U,X,re){return C.H.useActionState(U,X,re)},lt.useCallback=function(U,X){return C.H.useCallback(U,X)},lt.useContext=function(U){return C.H.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U,X){return C.H.useDeferredValue(U,X)},lt.useEffect=function(U,X){return C.H.useEffect(U,X)},lt.useEffectEvent=function(U){return C.H.useEffectEvent(U)},lt.useId=function(){return C.H.useId()},lt.useImperativeHandle=function(U,X,re){return C.H.useImperativeHandle(U,X,re)},lt.useInsertionEffect=function(U,X){return C.H.useInsertionEffect(U,X)},lt.useLayoutEffect=function(U,X){return C.H.useLayoutEffect(U,X)},lt.useMemo=function(U,X){return C.H.useMemo(U,X)},lt.useOptimistic=function(U,X){return C.H.useOptimistic(U,X)},lt.useReducer=function(U,X,re){return C.H.useReducer(U,X,re)},lt.useRef=function(U){return C.H.useRef(U)},lt.useState=function(U){return C.H.useState(U)},lt.useSyncExternalStore=function(U,X,re){return C.H.useSyncExternalStore(U,X,re)},lt.useTransition=function(){return C.H.useTransition()},lt.version="19.2.0",lt}var D4;function kp(){return D4||(D4=1,KT.exports=ene()),KT.exports}var A=kp();const Pc=Il(A),tne=Qte({__proto__:null,default:Pc},[A]);var WT={exports:{}},nm={},YT={exports:{}},XT={};var O4;function nne(){return O4||(O4=1,(function(t){function e(G,Y){var Q=G.length;G.push(Y);e:for(;0<Q;){var J=Q-1>>>1,te=G[J];if(0<i(te,Y))G[J]=Y,G[Q]=te,Q=J;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],Q=G.pop();if(Q!==Y){G[0]=Q;e:for(var J=0,te=G.length,U=te>>>1;J<U;){var X=2*(J+1)-1,re=G[X],K=X+1,ue=G[K];if(0>i(re,Q))K<te&&0>i(ue,re)?(G[J]=ue,G[K]=Q,J=K):(G[J]=re,G[X]=Q,J=X);else if(K<te&&0>i(ue,Q))G[J]=ue,G[K]=Q,J=K;else break e}}return Y}function i(G,Y){var Q=G.sortIndex-Y.sortIndex;return Q!==0?Q:G.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,v=!1,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function O(G){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=G)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function D(G){if(x=!1,O(G),!b)if(n(c)!==null)b=!0,N||(N=!0,B());else{var Y=n(u);Y!==null&&Z(D,Y.startTime-G)}}var N=!1,C=-1,P=5,R=-1;function j(){return w?!0:!(t.unstable_now()-R<P)}function L(){if(w=!1,N){var G=t.unstable_now();R=G;var Y=!0;try{e:{b=!1,x&&(x=!1,T(C),C=-1),v=!0;var Q=g;try{t:{for(O(G),h=n(c);h!==null&&!(h.expirationTime>G&&j());){var J=h.callback;if(typeof J=="function"){h.callback=null,g=h.priorityLevel;var te=J(h.expirationTime<=G);if(G=t.unstable_now(),typeof te=="function"){h.callback=te,O(G),Y=!0;break t}h===n(c)&&r(c),O(G)}else r(c);h=n(c)}if(h!==null)Y=!0;else{var U=n(u);U!==null&&Z(D,U.startTime-G),Y=!1}}break e}finally{h=null,g=Q,v=!1}Y=void 0}}finally{Y?B():N=!1}}}var B;if(typeof I=="function")B=function(){I(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,W=z.port2;z.port1.onmessage=L,B=function(){W.postMessage(null)}}else B=function(){S(L,0)};function Z(G,Y){C=S(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Q=g;g=Y;try{return G()}finally{g=Q}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Q=g;g=G;try{return Y()}finally{g=Q}},t.unstable_scheduleCallback=function(G,Y,Q){var J=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?J+Q:J):Q=J,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Q+te,G={id:f++,callback:Y,priorityLevel:G,startTime:Q,expirationTime:te,sortIndex:-1},Q>J?(G.sortIndex=Q,e(u,G),n(c)===null&&G===n(u)&&(x?(T(C),C=-1):x=!0,Z(D,Q-J))):(G.sortIndex=te,e(c,G),b||v||(b=!0,N||(N=!0,B()))),G},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(G){var Y=g;return function(){var Q=g;g=Y;try{return G.apply(this,arguments)}finally{g=Q}}}})(XT)),XT}var R4;function rne(){return R4||(R4=1,YT.exports=nne()),YT.exports}var QT={exports:{}},Qr={};var M4;function ine(){if(M4)return Qr;M4=1;var t=kp();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qr.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},Qr.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},Qr.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Qr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Qr.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:v}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Qr.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Qr.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Qr.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Qr.requestFormReset=function(c){r.d.r(c)},Qr.unstable_batchedUpdates=function(c,u){return c(u)},Qr.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},Qr.useFormStatus=function(){return s.H.useHostTransitionStatus()},Qr.version="19.2.0",Qr}var j4;function v$(){if(j4)return QT.exports;j4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),QT.exports=ine(),QT.exports}var z4;function ane(){if(z4)return nm;z4=1;var t=rne(),e=kp(),n=v$();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,y=d;;){var E=p.return;if(E===null)break;var k=E.alternate;if(k===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===p)return c(E),l;if(k===y)return c(E),d;k=k.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=k;else{for(var V=!1,q=E.child;q;){if(q===p){V=!0,p=E,y=k;break}if(q===y){V=!0,y=E,p=k;break}q=q.sibling}if(!V){for(q=k.child;q;){if(q===p){V=!0,p=k,y=E;break}if(q===y){V=!0,y=k,p=E;break}q=q.sibling}if(!V)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=L&&l[L]||l["@@iterator"],typeof l=="function"?l:null)}var z=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case I:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case O:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case C:return d=l.displayName||null,d!==null?d:W(l.type)||"Memo";case P:d=l._payload,l=l._init;try{return W(l(d))}catch{}}return null}var Z=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},J=[],te=-1;function U(l){return{current:l}}function X(l){0>te||(l.current=J[te],J[te]=null,te--)}function re(l,d){te++,J[te]=l.current,l.current=d}var K=U(null),ue=U(null),ne=U(null),oe=U(null);function _e(l,d){switch(re(ne,d),re(ue,l),re(K,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?Zz(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=Zz(d),l=Jz(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}X(K),re(K,l)}function ae(){X(K),X(ue),X(ne)}function ge(l){l.memoizedState!==null&&re(oe,l);var d=K.current,p=Jz(d,l.type);d!==p&&(re(ue,l),re(K,p))}function fe(l){ue.current===l&&(X(K),X(ue)),oe.current===l&&(X(oe),Qg._currentValue=Q)}var ee,Ae;function Ie(l){if(ee===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);ee=d&&d[1]||"",Ae=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+l+Ae}var Re=!1;function Le(l,d){if(!l||Re)return"";Re=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(we){var be=we}Reflect.construct(l,[],Ce)}else{try{Ce.call()}catch(we){be=we}l.call(Ce.prototype)}}else{try{throw Error()}catch(we){be=we}(Ce=l())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(we){if(we&&be&&typeof we.stack=="string")return[we.stack,be.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),V=k[0],q=k[1];if(V&&q){var ie=V.split(`
`),ve=q.split(`
`);for(E=y=0;y<ie.length&&!ie[y].includes("DetermineComponentFrameRoot");)y++;for(;E<ve.length&&!ve[E].includes("DetermineComponentFrameRoot");)E++;if(y===ie.length||E===ve.length)for(y=ie.length-1,E=ve.length-1;1<=y&&0<=E&&ie[y]!==ve[E];)E--;for(;1<=y&&0<=E;y--,E--)if(ie[y]!==ve[E]){if(y!==1||E!==1)do if(y--,E--,0>E||ie[y]!==ve[E]){var Te=`
`+ie[y].replace(" at new "," at ");return l.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",l.displayName)),Te}while(1<=y&&0<=E);break}}}finally{Re=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Ie(p):""}function Be(l,d){switch(l.tag){case 26:case 27:case 5:return Ie(l.type);case 16:return Ie("Lazy");case 13:return l.child!==d&&d!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return Le(l.type,!1);case 11:return Le(l.type.render,!1);case 1:return Le(l.type,!0);case 31:return Ie("Activity");default:return""}}function nt(l){try{var d="",p=null;do d+=Be(l,p),p=l,l=l.return;while(l);return d}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Ee=Object.prototype.hasOwnProperty,je=t.unstable_scheduleCallback,gt=t.unstable_cancelCallback,Nt=t.unstable_shouldYield,St=t.unstable_requestPaint,it=t.unstable_now,vt=t.unstable_getCurrentPriorityLevel,_n=t.unstable_ImmediatePriority,ct=t.unstable_UserBlockingPriority,Vn=t.unstable_NormalPriority,Sn=t.unstable_LowPriority,jr=t.unstable_IdlePriority,Si=t.log,Ds=t.unstable_setDisableYieldValue,Xr=null,Nn=null;function Wn(l){if(typeof Si=="function"&&Ds(l),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(Xr,l)}catch{}}var zt=Math.clz32?Math.clz32:Ll,Ei=Math.log,ya=Math.LN2;function Ll(l){return l>>>=0,l===0?32:31-(Ei(l)/ya|0)|0}var bt=256,En=262144,Tn=4194304;function Gi(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ba(l,d,p){var y=l.pendingLanes;if(y===0)return 0;var E=0,k=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var q=y&134217727;return q!==0?(y=q&~k,y!==0?E=Gi(y):(V&=q,V!==0?E=Gi(V):p||(p=q&~l,p!==0&&(E=Gi(p))))):(q=y&~k,q!==0?E=Gi(q):V!==0?E=Gi(V):p||(p=y&~l,p!==0&&(E=Gi(p)))),E===0?0:d!==0&&d!==E&&(d&k)===0&&(k=E&-E,p=d&-d,k>=p||k===32&&(p&4194048)!==0)?d:E}function ci(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function XS(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sy(){var l=Tn;return Tn<<=1,(Tn&62914560)===0&&(Tn=4194304),l}function Os(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function pu(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function QS(l,d,p,y,E,k){var V=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var q=l.entanglements,ie=l.expirationTimes,ve=l.hiddenUpdates;for(p=V&~p;0<p;){var Te=31-zt(p),Ce=1<<Te;q[Te]=0,ie[Te]=-1;var be=ve[Te];if(be!==null)for(ve[Te]=null,Te=0;Te<be.length;Te++){var we=be[Te];we!==null&&(we.lane&=-536870913)}p&=~Ce}y!==0&&gu(l,y,0),k!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=k&~(V&~d))}function gu(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-zt(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|p&261930}function ng(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var y=31-zt(p),E=1<<y;E&d|l[y]&d&&(l[y]|=d),p&=~E}}function rg(l,d){var p=d&-d;return p=(p&42)!==0?1:mu(p),(p&(l.suspendedLanes|d))!==0?0:p}function mu(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Io(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function oy(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:_4(l.type))}function es(l,d){var p=Y.p;try{return Y.p=l,d()}finally{Y.p=p}}var ts=Math.random().toString(36).slice(2),Yn="__reactFiber$"+ts,Tr="__reactProps$"+ts,Rs="__reactContainer$"+ts,lf="__reactEvents$"+ts,ZS="__reactListeners$"+ts,ly="__reactHandles$"+ts,cy="__reactResources$"+ts,Ms="__reactMarker$"+ts;function cf(l){delete l[Yn],delete l[Tr],delete l[lf],delete l[ZS],delete l[ly]}function js(l){var d=l[Yn];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Rs]||p[Yn]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=s4(l);l!==null;){if(p=l[Yn])return p;l=s4(l)}return d}l=p,p=l.parentNode}return null}function xa(l){if(l=l[Yn]||l[Rs]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Hi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function zs(l){var d=l[cy];return d||(d=l[cy]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Xn(l){l[Ms]=!0}var ig=new Set,ag={};function Ls(l,d){Vs(l,d),Vs(l+"Capture",d)}function Vs(l,d){for(ag[l]=d,l=0;l<d.length;l++)ig.add(d[l])}var sg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),og={},lg={};function uy(l){return Ee.call(lg,l)?!0:Ee.call(og,l)?!1:sg.test(l)?lg[l]=!0:(og[l]=!0,!1)}function uf(l,d,p){if(uy(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Ki(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Qn(l,d,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+y)}}function Ar(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Vl(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function cg(l,d,p){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,k=y.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(V){p=""+V,k.call(this,V)}}),Object.defineProperty(l,d,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(V){p=""+V},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Ut(l){if(!l._valueTracker){var d=Vl(l)?"checked":"value";l._valueTracker=cg(l,d,""+l[d])}}function vu(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),y="";return l&&(y=Vl(l)?l.checked?"true":"false":l.value),l=y,l!==p?(d.setValue(l),!0):!1}function Bs(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var yu=/[\n"\\]/g;function Ti(l){return l.replace(yu,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function df(l,d,p,y,E,k,V,q){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),d!=null?V==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Ar(d)):l.value!==""+Ar(d)&&(l.value=""+Ar(d)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),d!=null?ug(l,V,Ar(d)):p!=null?ug(l,V,Ar(p)):y!=null&&l.removeAttribute("value"),E==null&&k!=null&&(l.defaultChecked=!!k),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?l.name=""+Ar(q):l.removeAttribute("name")}function dy(l,d,p,y,E,k,V,q){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(l.type=k),d!=null||p!=null){if(!(k!=="submit"&&k!=="reset"||d!=null)){Ut(l);return}p=p!=null?""+Ar(p):"",d=d!=null?""+Ar(d):p,q||d===l.value||(l.value=d),l.defaultValue=d}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=q?l.checked:!!y,l.defaultChecked=!!y,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Ut(l)}function ug(l,d,p){d==="number"&&Bs(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Bl(l,d,p,y){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&y&&(l[p].defaultSelected=!0)}else{for(p=""+Ar(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,y&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function fy(l,d,p){if(d!=null&&(d=""+Ar(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Ar(p):""}function Fl(l,d,p,y){if(d==null){if(y!=null){if(p!=null)throw Error(r(92));if(Z(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),d=p}p=Ar(d),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y),Ut(l)}function Ai(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var hy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dg(l,d,p){var y=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,p):typeof p!="number"||p===0||hy.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function fg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var E in d)y=d[E],d.hasOwnProperty(E)&&p[E]!==y&&dg(l,E,y)}else for(var k in d)d.hasOwnProperty(k)&&dg(l,k,d[k])}function ff(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var py=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ul=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hf(l){return Ul.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ns(){}var hg=null;function wa(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var $l=null,Fs=null;function bu(l){var d=xa(l);if(d&&(l=d.stateNode)){var p=l[Tr]||null;e:switch(l=d.stateNode,d.type){case"input":if(df(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ti(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var y=p[d];if(y!==l&&y.form===l.form){var E=y[Tr]||null;if(!E)throw Error(r(90));df(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)y=p[d],y.form===l.form&&vu(y)}break e;case"textarea":fy(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Bl(l,!!p.multiple,d,!1)}}}var pf=!1;function ql(l,d,p){if(pf)return l(d,p);pf=!0;try{var y=l(d);return y}finally{if(pf=!1,($l!==null||Fs!==null)&&(ob(),$l&&(d=$l,l=Fs,Fs=$l=null,bu(d),l)))for(d=0;d<l.length;d++)bu(l[d])}}function rs(l,d){var p=l.stateNode;if(p===null)return null;var y=p[Tr]||null;if(y===null)return null;p=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xu=!1;if(_a)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){xu=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{xu=!1}var Us=null,pg=null,wu=null;function gg(){if(wu)return wu;var l,d=pg,p=d.length,y,E="value"in Us?Us.value:Us.textContent,k=E.length;for(l=0;l<p&&d[l]===E[l];l++);var V=p-l;for(y=1;y<=V&&d[p-y]===E[k-y];y++);return wu=E.slice(l,1<y?1-y:void 0)}function _u(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Po(){return!0}function is(){return!1}function zr(l){function d(p,y,E,k,V){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=k,this.target=V,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(p=l[q],this[q]=p?p(k):k[q]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Po:is,this.isPropagationStopped=is,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),d}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$s=zr(No),Gl=h({},No,{view:0,detail:0}),mg=zr(Gl),Hl,gf,qs,mf=h({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==qs&&(qs&&l.type==="mousemove"?(Hl=l.screenX-qs.screenX,gf=l.screenY-qs.screenY):gf=Hl=0,qs=l),Hl)},movementY:function(l){return"movementY"in l?l.movementY:gf}}),vg=zr(mf),Su=h({},mf,{dataTransfer:0}),gy=zr(Su),my=h({},Gl,{relatedTarget:0}),Eu=zr(my),yg=h({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),vy=zr(yg),vf=h({},No,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),yy=zr(vf),by=h({},No,{data:0}),Gs=zr(by),xy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sy(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=_y[l])?!!d[l]:!1}function Kl(){return Sy}var ui=h({},Gl,{key:function(l){if(l.key){var d=xy[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=_u(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?wy[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kl,charCode:function(l){return l.type==="keypress"?_u(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?_u(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Ey=zr(ui),Ty=h({},mf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Do=zr(Ty),_=h({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kl}),M=zr(_),F=h({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=zr(F),pe=h({},mf,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xe=zr(pe),Me=h({},No,{newState:0,oldState:0}),ut=zr(Me),Bn=[9,13,27,32],Lt=_a&&"CompositionEvent"in window,gn=null;_a&&"documentMode"in document&&(gn=document.documentMode);var Sa=_a&&"TextEvent"in window&&!gn,Hs=_a&&(!Lt||gn&&8<gn&&11>=gn),as=" ",ss=!1;function Tu(l,d){switch(l){case"keyup":return Bn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yf(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var bf=!1;function wee(l,d){switch(l){case"compositionend":return yf(d);case"keypress":return d.which!==32?null:(ss=!0,as);case"textInput":return l=d.data,l===as&&ss?null:l;default:return null}}function _ee(l,d){if(bf)return l==="compositionend"||!Lt&&Tu(l,d)?(l=gg(),wu=pg=Us=null,bf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Hs&&d.locale!=="ko"?null:d.data;default:return null}}var See={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cM(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!See[l.type]:d==="textarea"}function uM(l,d,p,y){$l?Fs?Fs.push(y):Fs=[y]:$l=y,d=pb(d,"onChange"),0<d.length&&(p=new $s("onChange","change",null,p,y),l.push({event:p,listeners:d}))}var bg=null,xg=null;function Eee(l){Hz(l,0)}function Ay(l){var d=Hi(l);if(vu(d))return l}function dM(l,d){if(l==="change")return d}var fM=!1;if(_a){var JS;if(_a){var eE="oninput"in document;if(!eE){var hM=document.createElement("div");hM.setAttribute("oninput","return;"),eE=typeof hM.oninput=="function"}JS=eE}else JS=!1;fM=JS&&(!document.documentMode||9<document.documentMode)}function pM(){bg&&(bg.detachEvent("onpropertychange",gM),xg=bg=null)}function gM(l){if(l.propertyName==="value"&&Ay(xg)){var d=[];uM(d,xg,l,wa(l)),ql(Eee,d)}}function Tee(l,d,p){l==="focusin"?(pM(),bg=d,xg=p,bg.attachEvent("onpropertychange",gM)):l==="focusout"&&pM()}function Aee(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Ay(xg)}function kee(l,d){if(l==="click")return Ay(d)}function Cee(l,d){if(l==="input"||l==="change")return Ay(d)}function Iee(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Wi=typeof Object.is=="function"?Object.is:Iee;function wg(l,d){if(Wi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),y=Object.keys(d);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!Ee.call(d,E)||!Wi(l[E],d[E]))return!1}return!0}function mM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function vM(l,d){var p=mM(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=d&&y>=d)return{node:p,offset:d-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=mM(p)}}function yM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?yM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function bM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Bs(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Bs(l.document)}return d}function tE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Pee=_a&&"documentMode"in document&&11>=document.documentMode,xf=null,nE=null,_g=null,rE=!1;function xM(l,d,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;rE||xf==null||xf!==Bs(y)||(y=xf,"selectionStart"in y&&tE(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),_g&&wg(_g,y)||(_g=y,y=pb(nE,"onSelect"),0<y.length&&(d=new $s("onSelect","select",null,d,p),l.push({event:d,listeners:y}),d.target=xf)))}function Au(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var wf={animationend:Au("Animation","AnimationEnd"),animationiteration:Au("Animation","AnimationIteration"),animationstart:Au("Animation","AnimationStart"),transitionrun:Au("Transition","TransitionRun"),transitionstart:Au("Transition","TransitionStart"),transitioncancel:Au("Transition","TransitionCancel"),transitionend:Au("Transition","TransitionEnd")},iE={},wM={};_a&&(wM=document.createElement("div").style,"AnimationEvent"in window||(delete wf.animationend.animation,delete wf.animationiteration.animation,delete wf.animationstart.animation),"TransitionEvent"in window||delete wf.transitionend.transition);function ku(l){if(iE[l])return iE[l];if(!wf[l])return l;var d=wf[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in wM)return iE[l]=d[p];return l}var _M=ku("animationend"),SM=ku("animationiteration"),EM=ku("animationstart"),Nee=ku("transitionrun"),Dee=ku("transitionstart"),Oee=ku("transitioncancel"),TM=ku("transitionend"),AM=new Map,aE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");aE.push("scrollEnd");function os(l,d){AM.set(l,d),Ls(d,[l])}var ky=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ea=[],_f=0,sE=0;function Cy(){for(var l=_f,d=sE=_f=0;d<l;){var p=Ea[d];Ea[d++]=null;var y=Ea[d];Ea[d++]=null;var E=Ea[d];Ea[d++]=null;var k=Ea[d];if(Ea[d++]=null,y!==null&&E!==null){var V=y.pending;V===null?E.next=E:(E.next=V.next,V.next=E),y.pending=E}k!==0&&kM(p,E,k)}}function Iy(l,d,p,y){Ea[_f++]=l,Ea[_f++]=d,Ea[_f++]=p,Ea[_f++]=y,sE|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function oE(l,d,p,y){return Iy(l,d,p,y),Py(l)}function Cu(l,d){return Iy(l,null,null,d),Py(l)}function kM(l,d,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var E=!1,k=l.return;k!==null;)k.childLanes|=p,y=k.alternate,y!==null&&(y.childLanes|=p),k.tag===22&&(l=k.stateNode,l===null||l._visibility&1||(E=!0)),l=k,k=k.return;return l.tag===3?(k=l.stateNode,E&&d!==null&&(E=31-zt(p),l=k.hiddenUpdates,y=l[E],y===null?l[E]=[d]:y.push(d),d.lane=p|536870912),k):null}function Py(l){if(50<qg)throw qg=0,mT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Sf={};function Ree(l,d,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(l,d,p,y){return new Ree(l,d,p,y)}function lE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Oo(l,d){var p=l.alternate;return p===null?(p=Yi(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function CM(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Ny(l,d,p,y,E,k){var V=0;if(y=l,typeof l=="function")lE(l)&&(V=1);else if(typeof l=="string")V=Vte(l,p,K.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Yi(31,p,d,E),l.elementType=R,l.lanes=k,l;case x:return Iu(p.children,E,k,d);case w:V=8,E|=24;break;case S:return l=Yi(12,p,d,E|2),l.elementType=S,l.lanes=k,l;case D:return l=Yi(13,p,d,E),l.elementType=D,l.lanes=k,l;case N:return l=Yi(19,p,d,E),l.elementType=N,l.lanes=k,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:V=10;break e;case T:V=9;break e;case O:V=11;break e;case C:V=14;break e;case P:V=16,y=null;break e}V=29,p=Error(r(130,l===null?"null":typeof l,"")),y=null}return d=Yi(V,p,d,E),d.elementType=l,d.type=y,d.lanes=k,d}function Iu(l,d,p,y){return l=Yi(7,l,y,d),l.lanes=p,l}function cE(l,d,p){return l=Yi(6,l,null,d),l.lanes=p,l}function IM(l){var d=Yi(18,null,null,0);return d.stateNode=l,d}function uE(l,d,p){return d=Yi(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var PM=new WeakMap;function Ta(l,d){if(typeof l=="object"&&l!==null){var p=PM.get(l);return p!==void 0?p:(d={value:l,source:d,stack:nt(d)},PM.set(l,d),d)}return{value:l,source:d,stack:nt(d)}}var Ef=[],Tf=0,Dy=null,Sg=0,Aa=[],ka=0,Wl=null,Ks=1,Ws="";function Ro(l,d){Ef[Tf++]=Sg,Ef[Tf++]=Dy,Dy=l,Sg=d}function NM(l,d,p){Aa[ka++]=Ks,Aa[ka++]=Ws,Aa[ka++]=Wl,Wl=l;var y=Ks;l=Ws;var E=32-zt(y)-1;y&=~(1<<E),p+=1;var k=32-zt(d)+E;if(30<k){var V=E-E%5;k=(y&(1<<V)-1).toString(32),y>>=V,E-=V,Ks=1<<32-zt(d)+E|p<<E|y,Ws=k+l}else Ks=1<<k|p<<E|y,Ws=l}function dE(l){l.return!==null&&(Ro(l,1),NM(l,1,0))}function fE(l){for(;l===Dy;)Dy=Ef[--Tf],Ef[Tf]=null,Sg=Ef[--Tf],Ef[Tf]=null;for(;l===Wl;)Wl=Aa[--ka],Aa[ka]=null,Ws=Aa[--ka],Aa[ka]=null,Ks=Aa[--ka],Aa[ka]=null}function DM(l,d){Aa[ka++]=Ks,Aa[ka++]=Ws,Aa[ka++]=Wl,Ks=d.id,Ws=d.overflow,Wl=l}var Lr=null,cn=null,Ct=!1,Yl=null,Ca=!1,hE=Error(r(519));function Xl(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eg(Ta(d,l)),hE}function OM(l){var d=l.stateNode,p=l.type,y=l.memoizedProps;switch(d[Yn]=l,d[Tr]=y,p){case"dialog":wt("cancel",d),wt("close",d);break;case"iframe":case"object":case"embed":wt("load",d);break;case"video":case"audio":for(p=0;p<Hg.length;p++)wt(Hg[p],d);break;case"source":wt("error",d);break;case"img":case"image":case"link":wt("error",d),wt("load",d);break;case"details":wt("toggle",d);break;case"input":wt("invalid",d),dy(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":wt("invalid",d);break;case"textarea":wt("invalid",d),Fl(d,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||y.suppressHydrationWarning===!0||Xz(d.textContent,p)?(y.popover!=null&&(wt("beforetoggle",d),wt("toggle",d)),y.onScroll!=null&&wt("scroll",d),y.onScrollEnd!=null&&wt("scrollend",d),y.onClick!=null&&(d.onclick=ns),d=!0):d=!1,d||Xl(l,!0)}function RM(l){for(Lr=l.return;Lr;)switch(Lr.tag){case 5:case 31:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:Lr=Lr.return}}function Af(l){if(l!==Lr)return!1;if(!Ct)return RM(l),Ct=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||NT(l.type,l.memoizedProps)),p=!p),p&&cn&&Xl(l),RM(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));cn=a4(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));cn=a4(l)}else d===27?(d=cn,uc(l.type)?(l=jT,jT=null,cn=l):cn=d):cn=Lr?Pa(l.stateNode.nextSibling):null;return!0}function Pu(){cn=Lr=null,Ct=!1}function pE(){var l=Yl;return l!==null&&(Pi===null?Pi=l:Pi.push.apply(Pi,l),Yl=null),l}function Eg(l){Yl===null?Yl=[l]:Yl.push(l)}var gE=U(null),Nu=null,Mo=null;function Ql(l,d,p){re(gE,d._currentValue),d._currentValue=p}function jo(l){l._currentValue=gE.current,X(gE)}function mE(l,d,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===p)break;l=l.return}}function vE(l,d,p,y){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var k=E.dependencies;if(k!==null){var V=E.child;k=k.firstContext;e:for(;k!==null;){var q=k;k=E;for(var ie=0;ie<d.length;ie++)if(q.context===d[ie]){k.lanes|=p,q=k.alternate,q!==null&&(q.lanes|=p),mE(k.return,p,l),y||(V=null);break e}k=q.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(r(341));V.lanes|=p,k=V.alternate,k!==null&&(k.lanes|=p),mE(V,p,l),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===l){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function kf(l,d,p,y){l=null;for(var E=d,k=!1;E!==null;){if(!k){if((E.flags&524288)!==0)k=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var q=E.type;Wi(E.pendingProps.value,V.value)||(l!==null?l.push(q):l=[q])}}else if(E===oe.current){if(V=E.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(Qg):l=[Qg])}E=E.return}l!==null&&vE(d,l,p,y),d.flags|=262144}function Oy(l){for(l=l.firstContext;l!==null;){if(!Wi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Du(l){Nu=l,Mo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Vr(l){return MM(Nu,l)}function Ry(l,d){return Nu===null&&Du(l),MM(l,d)}function MM(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Mo===null){if(l===null)throw Error(r(308));Mo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Mo=Mo.next=d;return p}var Mee=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},jee=t.unstable_scheduleCallback,zee=t.unstable_NormalPriority,Zn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yE(){return{controller:new Mee,data:new Map,refCount:0}}function Tg(l){l.refCount--,l.refCount===0&&jee(zee,function(){l.controller.abort()})}var Ag=null,bE=0,Cf=0,If=null;function Lee(l,d){if(Ag===null){var p=Ag=[];bE=0,Cf=_T(),If={status:"pending",value:void 0,then:function(y){p.push(y)}}}return bE++,d.then(jM,jM),d}function jM(){if(--bE===0&&Ag!==null){If!==null&&(If.status="fulfilled");var l=Ag;Ag=null,Cf=0,If=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Vee(l,d){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var zM=G.S;G.S=function(l,d){xz=it(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Lee(l,d),zM!==null&&zM(l,d)};var Ou=U(null);function xE(){var l=Ou.current;return l!==null?l:rn.pooledCache}function My(l,d){d===null?re(Ou,Ou.current):re(Ou,d.pool)}function LM(){var l=xE();return l===null?null:{parent:Zn._currentValue,pool:l}}var Pf=Error(r(460)),wE=Error(r(474)),jy=Error(r(542)),zy={then:function(){}};function VM(l){return l=l.status,l==="fulfilled"||l==="rejected"}function BM(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(ns,ns),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,UM(l),l;default:if(typeof d.status=="string")d.then(ns,ns);else{if(l=rn,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=y}},function(y){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,UM(l),l}throw Mu=d,Pf}}function Ru(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Mu=p,Pf):p}}var Mu=null;function FM(){if(Mu===null)throw Error(r(459));var l=Mu;return Mu=null,l}function UM(l){if(l===Pf||l===jy)throw Error(r(483))}var Nf=null,kg=0;function Ly(l){var d=kg;return kg+=1,Nf===null&&(Nf=[]),BM(Nf,l,d)}function Cg(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Vy(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function $M(l){function d(de,ce){if(l){var me=de.deletions;me===null?(de.deletions=[ce],de.flags|=16):me.push(ce)}}function p(de,ce){if(!l)return null;for(;ce!==null;)d(de,ce),ce=ce.sibling;return null}function y(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function E(de,ce){return de=Oo(de,ce),de.index=0,de.sibling=null,de}function k(de,ce,me){return de.index=me,l?(me=de.alternate,me!==null?(me=me.index,me<ce?(de.flags|=67108866,ce):me):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function V(de){return l&&de.alternate===null&&(de.flags|=67108866),de}function q(de,ce,me,ke){return ce===null||ce.tag!==6?(ce=cE(me,de.mode,ke),ce.return=de,ce):(ce=E(ce,me),ce.return=de,ce)}function ie(de,ce,me,ke){var Xe=me.type;return Xe===x?Te(de,ce,me.props.children,ke,me.key):ce!==null&&(ce.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===P&&Ru(Xe)===ce.type)?(ce=E(ce,me.props),Cg(ce,me),ce.return=de,ce):(ce=Ny(me.type,me.key,me.props,null,de.mode,ke),Cg(ce,me),ce.return=de,ce)}function ve(de,ce,me,ke){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==me.containerInfo||ce.stateNode.implementation!==me.implementation?(ce=uE(me,de.mode,ke),ce.return=de,ce):(ce=E(ce,me.children||[]),ce.return=de,ce)}function Te(de,ce,me,ke,Xe){return ce===null||ce.tag!==7?(ce=Iu(me,de.mode,ke,Xe),ce.return=de,ce):(ce=E(ce,me),ce.return=de,ce)}function Ce(de,ce,me){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=cE(""+ce,de.mode,me),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return me=Ny(ce.type,ce.key,ce.props,null,de.mode,me),Cg(me,ce),me.return=de,me;case b:return ce=uE(ce,de.mode,me),ce.return=de,ce;case P:return ce=Ru(ce),Ce(de,ce,me)}if(Z(ce)||B(ce))return ce=Iu(ce,de.mode,me,null),ce.return=de,ce;if(typeof ce.then=="function")return Ce(de,Ly(ce),me);if(ce.$$typeof===I)return Ce(de,Ry(de,ce),me);Vy(de,ce)}return null}function be(de,ce,me,ke){var Xe=ce!==null?ce.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Xe!==null?null:q(de,ce,""+me,ke);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case v:return me.key===Xe?ie(de,ce,me,ke):null;case b:return me.key===Xe?ve(de,ce,me,ke):null;case P:return me=Ru(me),be(de,ce,me,ke)}if(Z(me)||B(me))return Xe!==null?null:Te(de,ce,me,ke,null);if(typeof me.then=="function")return be(de,ce,Ly(me),ke);if(me.$$typeof===I)return be(de,ce,Ry(de,me),ke);Vy(de,me)}return null}function we(de,ce,me,ke,Xe){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return de=de.get(me)||null,q(ce,de,""+ke,Xe);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case v:return de=de.get(ke.key===null?me:ke.key)||null,ie(ce,de,ke,Xe);case b:return de=de.get(ke.key===null?me:ke.key)||null,ve(ce,de,ke,Xe);case P:return ke=Ru(ke),we(de,ce,me,ke,Xe)}if(Z(ke)||B(ke))return de=de.get(me)||null,Te(ce,de,ke,Xe,null);if(typeof ke.then=="function")return we(de,ce,me,Ly(ke),Xe);if(ke.$$typeof===I)return we(de,ce,me,Ry(ce,ke),Xe);Vy(ce,ke)}return null}function $e(de,ce,me,ke){for(var Xe=null,Dt=null,He=ce,ht=ce=0,Tt=null;He!==null&&ht<me.length;ht++){He.index>ht?(Tt=He,He=null):Tt=He.sibling;var Ot=be(de,He,me[ht],ke);if(Ot===null){He===null&&(He=Tt);break}l&&He&&Ot.alternate===null&&d(de,He),ce=k(Ot,ce,ht),Dt===null?Xe=Ot:Dt.sibling=Ot,Dt=Ot,He=Tt}if(ht===me.length)return p(de,He),Ct&&Ro(de,ht),Xe;if(He===null){for(;ht<me.length;ht++)He=Ce(de,me[ht],ke),He!==null&&(ce=k(He,ce,ht),Dt===null?Xe=He:Dt.sibling=He,Dt=He);return Ct&&Ro(de,ht),Xe}for(He=y(He);ht<me.length;ht++)Tt=we(He,de,ht,me[ht],ke),Tt!==null&&(l&&Tt.alternate!==null&&He.delete(Tt.key===null?ht:Tt.key),ce=k(Tt,ce,ht),Dt===null?Xe=Tt:Dt.sibling=Tt,Dt=Tt);return l&&He.forEach(function(gc){return d(de,gc)}),Ct&&Ro(de,ht),Xe}function rt(de,ce,me,ke){if(me==null)throw Error(r(151));for(var Xe=null,Dt=null,He=ce,ht=ce=0,Tt=null,Ot=me.next();He!==null&&!Ot.done;ht++,Ot=me.next()){He.index>ht?(Tt=He,He=null):Tt=He.sibling;var gc=be(de,He,Ot.value,ke);if(gc===null){He===null&&(He=Tt);break}l&&He&&gc.alternate===null&&d(de,He),ce=k(gc,ce,ht),Dt===null?Xe=gc:Dt.sibling=gc,Dt=gc,He=Tt}if(Ot.done)return p(de,He),Ct&&Ro(de,ht),Xe;if(He===null){for(;!Ot.done;ht++,Ot=me.next())Ot=Ce(de,Ot.value,ke),Ot!==null&&(ce=k(Ot,ce,ht),Dt===null?Xe=Ot:Dt.sibling=Ot,Dt=Ot);return Ct&&Ro(de,ht),Xe}for(He=y(He);!Ot.done;ht++,Ot=me.next())Ot=we(He,de,ht,Ot.value,ke),Ot!==null&&(l&&Ot.alternate!==null&&He.delete(Ot.key===null?ht:Ot.key),ce=k(Ot,ce,ht),Dt===null?Xe=Ot:Dt.sibling=Ot,Dt=Ot);return l&&He.forEach(function(Xte){return d(de,Xte)}),Ct&&Ro(de,ht),Xe}function Zt(de,ce,me,ke){if(typeof me=="object"&&me!==null&&me.type===x&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case v:e:{for(var Xe=me.key;ce!==null;){if(ce.key===Xe){if(Xe=me.type,Xe===x){if(ce.tag===7){p(de,ce.sibling),ke=E(ce,me.props.children),ke.return=de,de=ke;break e}}else if(ce.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===P&&Ru(Xe)===ce.type){p(de,ce.sibling),ke=E(ce,me.props),Cg(ke,me),ke.return=de,de=ke;break e}p(de,ce);break}else d(de,ce);ce=ce.sibling}me.type===x?(ke=Iu(me.props.children,de.mode,ke,me.key),ke.return=de,de=ke):(ke=Ny(me.type,me.key,me.props,null,de.mode,ke),Cg(ke,me),ke.return=de,de=ke)}return V(de);case b:e:{for(Xe=me.key;ce!==null;){if(ce.key===Xe)if(ce.tag===4&&ce.stateNode.containerInfo===me.containerInfo&&ce.stateNode.implementation===me.implementation){p(de,ce.sibling),ke=E(ce,me.children||[]),ke.return=de,de=ke;break e}else{p(de,ce);break}else d(de,ce);ce=ce.sibling}ke=uE(me,de.mode,ke),ke.return=de,de=ke}return V(de);case P:return me=Ru(me),Zt(de,ce,me,ke)}if(Z(me))return $e(de,ce,me,ke);if(B(me)){if(Xe=B(me),typeof Xe!="function")throw Error(r(150));return me=Xe.call(me),rt(de,ce,me,ke)}if(typeof me.then=="function")return Zt(de,ce,Ly(me),ke);if(me.$$typeof===I)return Zt(de,ce,Ry(de,me),ke);Vy(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ce!==null&&ce.tag===6?(p(de,ce.sibling),ke=E(ce,me),ke.return=de,de=ke):(p(de,ce),ke=cE(me,de.mode,ke),ke.return=de,de=ke),V(de)):p(de,ce)}return function(de,ce,me,ke){try{kg=0;var Xe=Zt(de,ce,me,ke);return Nf=null,Xe}catch(He){if(He===Pf||He===jy)throw He;var Dt=Yi(29,He,null,de.mode);return Dt.lanes=ke,Dt.return=de,Dt}finally{}}}var ju=$M(!0),qM=$M(!1),Zl=!1;function _E(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function SE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Jl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ec(l,d,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Vt&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,d=Py(l),kM(l,null,p),d}return Iy(l,y,d,p),Py(l)}function Ig(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,ng(l,p)}}function EE(l,d){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,k=null;if(p=p.firstBaseUpdate,p!==null){do{var V={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};k===null?E=k=V:k=k.next=V,p=p.next}while(p!==null);k===null?E=k=d:k=k.next=d}else E=k=d;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var TE=!1;function Pg(){if(TE){var l=If;if(l!==null)throw l}}function Ng(l,d,p,y){TE=!1;var E=l.updateQueue;Zl=!1;var k=E.firstBaseUpdate,V=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var ie=q,ve=ie.next;ie.next=null,V===null?k=ve:V.next=ve,V=ie;var Te=l.alternate;Te!==null&&(Te=Te.updateQueue,q=Te.lastBaseUpdate,q!==V&&(q===null?Te.firstBaseUpdate=ve:q.next=ve,Te.lastBaseUpdate=ie))}if(k!==null){var Ce=E.baseState;V=0,Te=ve=ie=null,q=k;do{var be=q.lane&-536870913,we=be!==q.lane;if(we?(Et&be)===be:(y&be)===be){be!==0&&be===Cf&&(TE=!0),Te!==null&&(Te=Te.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var $e=l,rt=q;be=d;var Zt=p;switch(rt.tag){case 1:if($e=rt.payload,typeof $e=="function"){Ce=$e.call(Zt,Ce,be);break e}Ce=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=rt.payload,be=typeof $e=="function"?$e.call(Zt,Ce,be):$e,be==null)break e;Ce=h({},Ce,be);break e;case 2:Zl=!0}}be=q.callback,be!==null&&(l.flags|=64,we&&(l.flags|=8192),we=E.callbacks,we===null?E.callbacks=[be]:we.push(be))}else we={lane:be,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Te===null?(ve=Te=we,ie=Ce):Te=Te.next=we,V|=be;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;we=q,q=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);Te===null&&(ie=Ce),E.baseState=ie,E.firstBaseUpdate=ve,E.lastBaseUpdate=Te,k===null&&(E.shared.lanes=0),ac|=V,l.lanes=V,l.memoizedState=Ce}}function GM(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function HM(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)GM(p[l],d)}var Df=U(null),By=U(0);function KM(l,d){l=Go,re(By,l),re(Df,d),Go=l|d.baseLanes}function AE(){re(By,Go),re(Df,Df.current)}function kE(){Go=By.current,X(Df),X(By)}var Xi=U(null),Ia=null;function tc(l){var d=l.alternate;re(Fn,Fn.current&1),re(Xi,l),Ia===null&&(d===null||Df.current!==null||d.memoizedState!==null)&&(Ia=l)}function CE(l){re(Fn,Fn.current),re(Xi,l),Ia===null&&(Ia=l)}function WM(l){l.tag===22?(re(Fn,Fn.current),re(Xi,l),Ia===null&&(Ia=l)):nc()}function nc(){re(Fn,Fn.current),re(Xi,Xi.current)}function Qi(l){X(Xi),Ia===l&&(Ia=null),X(Fn)}var Fn=U(0);function Fy(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||RT(p)||MT(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var zo=0,dt=null,Xt=null,Jn=null,Uy=!1,Of=!1,zu=!1,$y=0,Dg=0,Rf=null,Bee=0;function Dn(){throw Error(r(321))}function IE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Wi(l[p],d[p]))return!1;return!0}function PE(l,d,p,y,E,k){return zo=k,dt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,G.H=l===null||l.memoizedState===null?Nj:GE,zu=!1,k=p(y,E),zu=!1,Of&&(k=XM(d,p,y,E)),YM(l),k}function YM(l){G.H=Mg;var d=Xt!==null&&Xt.next!==null;if(zo=0,Jn=Xt=dt=null,Uy=!1,Dg=0,Rf=null,d)throw Error(r(300));l===null||er||(l=l.dependencies,l!==null&&Oy(l)&&(er=!0))}function XM(l,d,p,y){dt=l;var E=0;do{if(Of&&(Rf=null),Dg=0,Of=!1,25<=E)throw Error(r(301));if(E+=1,Jn=Xt=null,l.updateQueue!=null){var k=l.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}G.H=Dj,k=d(p,y)}while(Of);return k}function Fee(){var l=G.H,d=l.useState()[0];return d=typeof d.then=="function"?Og(d):d,l=l.useState()[0],(Xt!==null?Xt.memoizedState:null)!==l&&(dt.flags|=1024),d}function NE(){var l=$y!==0;return $y=0,l}function DE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function OE(l){if(Uy){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Uy=!1}zo=0,Jn=Xt=dt=null,Of=!1,Dg=$y=0,Rf=null}function di(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?dt.memoizedState=Jn=l:Jn=Jn.next=l,Jn}function Un(){if(Xt===null){var l=dt.alternate;l=l!==null?l.memoizedState:null}else l=Xt.next;var d=Jn===null?dt.memoizedState:Jn.next;if(d!==null)Jn=d,Xt=l;else{if(l===null)throw dt.alternate===null?Error(r(467)):Error(r(310));Xt=l,l={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},Jn===null?dt.memoizedState=Jn=l:Jn=Jn.next=l}return Jn}function qy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Og(l){var d=Dg;return Dg+=1,Rf===null&&(Rf=[]),l=BM(Rf,l,d),d=dt,(Jn===null?d.memoizedState:Jn.next)===null&&(d=d.alternate,G.H=d===null||d.memoizedState===null?Nj:GE),l}function Gy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Og(l);if(l.$$typeof===I)return Vr(l)}throw Error(r(438,String(l)))}function RE(l){var d=null,p=dt.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var y=dt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=qy(),dt.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),y=0;y<l;y++)p[y]=j;return d.index++,p}function Lo(l,d){return typeof d=="function"?d(l):d}function Hy(l){var d=Un();return ME(d,Xt,l)}function ME(l,d,p){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var E=l.baseQueue,k=y.pending;if(k!==null){if(E!==null){var V=E.next;E.next=k.next,k.next=V}d.baseQueue=E=k,y.pending=null}if(k=l.baseState,E===null)l.memoizedState=k;else{d=E.next;var q=V=null,ie=null,ve=d,Te=!1;do{var Ce=ve.lane&-536870913;if(Ce!==ve.lane?(Et&Ce)===Ce:(zo&Ce)===Ce){var be=ve.revertLane;if(be===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),Ce===Cf&&(Te=!0);else if((zo&be)===be){ve=ve.next,be===Cf&&(Te=!0);continue}else Ce={lane:0,revertLane:ve.revertLane,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},ie===null?(q=ie=Ce,V=k):ie=ie.next=Ce,dt.lanes|=be,ac|=be;Ce=ve.action,zu&&p(k,Ce),k=ve.hasEagerState?ve.eagerState:p(k,Ce)}else be={lane:Ce,revertLane:ve.revertLane,gesture:ve.gesture,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},ie===null?(q=ie=be,V=k):ie=ie.next=be,dt.lanes|=Ce,ac|=Ce;ve=ve.next}while(ve!==null&&ve!==d);if(ie===null?V=k:ie.next=q,!Wi(k,l.memoizedState)&&(er=!0,Te&&(p=If,p!==null)))throw p;l.memoizedState=k,l.baseState=V,l.baseQueue=ie,y.lastRenderedState=k}return E===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function jE(l){var d=Un(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,k=d.memoizedState;if(E!==null){p.pending=null;var V=E=E.next;do k=l(k,V.action),V=V.next;while(V!==E);Wi(k,d.memoizedState)||(er=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),p.lastRenderedState=k}return[k,y]}function QM(l,d,p){var y=dt,E=Un(),k=Ct;if(k){if(p===void 0)throw Error(r(407));p=p()}else p=d();var V=!Wi((Xt||E).memoizedState,p);if(V&&(E.memoizedState=p,er=!0),E=E.queue,VE(ej.bind(null,y,E,l),[l]),E.getSnapshot!==d||V||Jn!==null&&Jn.memoizedState.tag&1){if(y.flags|=2048,Mf(9,{destroy:void 0},JM.bind(null,y,E,p,d),null),rn===null)throw Error(r(349));k||(zo&127)!==0||ZM(y,d,p)}return p}function ZM(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=dt.updateQueue,d===null?(d=qy(),dt.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function JM(l,d,p,y){d.value=p,d.getSnapshot=y,tj(d)&&nj(l)}function ej(l,d,p){return p(function(){tj(d)&&nj(l)})}function tj(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Wi(l,p)}catch{return!0}}function nj(l){var d=Cu(l,2);d!==null&&Ni(d,l,2)}function zE(l){var d=di();if(typeof l=="function"){var p=l;if(l=p(),zu){Wn(!0);try{p()}finally{Wn(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:l},d}function rj(l,d,p,y){return l.baseState=p,ME(l,Xt,typeof y=="function"?y:Lo)}function Uee(l,d,p,y,E){if(Yy(l))throw Error(r(485));if(l=d.action,l!==null){var k={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){k.listeners.push(V)}};G.T!==null?p(!0):k.isTransition=!1,y(k),p=d.pending,p===null?(k.next=d.pending=k,ij(d,k)):(k.next=p.next,d.pending=p.next=k)}}function ij(l,d){var p=d.action,y=d.payload,E=l.state;if(d.isTransition){var k=G.T,V={};G.T=V;try{var q=p(E,y),ie=G.S;ie!==null&&ie(V,q),aj(l,d,q)}catch(ve){LE(l,d,ve)}finally{k!==null&&V.types!==null&&(k.types=V.types),G.T=k}}else try{k=p(E,y),aj(l,d,k)}catch(ve){LE(l,d,ve)}}function aj(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){sj(l,d,y)},function(y){return LE(l,d,y)}):sj(l,d,p)}function sj(l,d,p){d.status="fulfilled",d.value=p,oj(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,ij(l,p)))}function LE(l,d,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=p,oj(d),d=d.next;while(d!==y)}l.action=null}function oj(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function lj(l,d){return d}function cj(l,d){if(Ct){var p=rn.formState;if(p!==null){e:{var y=dt;if(Ct){if(cn){t:{for(var E=cn,k=Ca;E.nodeType!==8;){if(!k){E=null;break t}if(E=Pa(E.nextSibling),E===null){E=null;break t}}k=E.data,E=k==="F!"||k==="F"?E:null}if(E){cn=Pa(E.nextSibling),y=E.data==="F!";break e}}Xl(y)}y=!1}y&&(d=p[0])}}return p=di(),p.memoizedState=p.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lj,lastRenderedState:d},p.queue=y,p=Cj.bind(null,dt,y),y.dispatch=p,y=zE(!1),k=qE.bind(null,dt,!1,y.queue),y=di(),E={state:d,dispatch:null,action:l,pending:null},y.queue=E,p=Uee.bind(null,dt,E,k,p),E.dispatch=p,y.memoizedState=l,[d,p,!1]}function uj(l){var d=Un();return dj(d,Xt,l)}function dj(l,d,p){if(d=ME(l,d,lj)[0],l=Hy(Lo)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=Og(d)}catch(V){throw V===Pf?jy:V}else y=d;d=Un();var E=d.queue,k=E.dispatch;return p!==d.memoizedState&&(dt.flags|=2048,Mf(9,{destroy:void 0},$ee.bind(null,E,p),null)),[y,k,l]}function $ee(l,d){l.action=d}function fj(l){var d=Un(),p=Xt;if(p!==null)return dj(d,p,l);Un(),d=d.memoizedState,p=Un();var y=p.queue.dispatch;return p.memoizedState=l,[d,y,!1]}function Mf(l,d,p,y){return l={tag:l,create:p,deps:y,inst:d,next:null},d=dt.updateQueue,d===null&&(d=qy(),dt.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,d.lastEffect=l),l}function hj(){return Un().memoizedState}function Ky(l,d,p,y){var E=di();dt.flags|=l,E.memoizedState=Mf(1|d,{destroy:void 0},p,y===void 0?null:y)}function Wy(l,d,p,y){var E=Un();y=y===void 0?null:y;var k=E.memoizedState.inst;Xt!==null&&y!==null&&IE(y,Xt.memoizedState.deps)?E.memoizedState=Mf(d,k,p,y):(dt.flags|=l,E.memoizedState=Mf(1|d,k,p,y))}function pj(l,d){Ky(8390656,8,l,d)}function VE(l,d){Wy(2048,8,l,d)}function qee(l){dt.flags|=4;var d=dt.updateQueue;if(d===null)d=qy(),dt.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function gj(l){var d=Un().memoizedState;return qee({ref:d,nextImpl:l}),function(){if((Vt&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function mj(l,d){return Wy(4,2,l,d)}function vj(l,d){return Wy(4,4,l,d)}function yj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function bj(l,d,p){p=p!=null?p.concat([l]):null,Wy(4,4,yj.bind(null,d,l),p)}function BE(){}function xj(l,d){var p=Un();d=d===void 0?null:d;var y=p.memoizedState;return d!==null&&IE(d,y[1])?y[0]:(p.memoizedState=[l,d],l)}function wj(l,d){var p=Un();d=d===void 0?null:d;var y=p.memoizedState;if(d!==null&&IE(d,y[1]))return y[0];if(y=l(),zu){Wn(!0);try{l()}finally{Wn(!1)}}return p.memoizedState=[y,d],y}function FE(l,d,p){return p===void 0||(zo&1073741824)!==0&&(Et&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=_z(),dt.lanes|=l,ac|=l,p)}function _j(l,d,p,y){return Wi(p,d)?p:Df.current!==null?(l=FE(l,p,y),Wi(l,d)||(er=!0),l):(zo&42)===0||(zo&1073741824)!==0&&(Et&261930)===0?(er=!0,l.memoizedState=p):(l=_z(),dt.lanes|=l,ac|=l,d)}function Sj(l,d,p,y,E){var k=Y.p;Y.p=k!==0&&8>k?k:8;var V=G.T,q={};G.T=q,qE(l,!1,d,p);try{var ie=E(),ve=G.S;if(ve!==null&&ve(q,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Te=Vee(ie,y);Rg(l,d,Te,ea(l))}else Rg(l,d,y,ea(l))}catch(Ce){Rg(l,d,{then:function(){},status:"rejected",reason:Ce},ea())}finally{Y.p=k,V!==null&&q.types!==null&&(V.types=q.types),G.T=V}}function Gee(){}function UE(l,d,p,y){if(l.tag!==5)throw Error(r(476));var E=Ej(l).queue;Sj(l,E,d,Q,p===null?Gee:function(){return Tj(l),p(y)})}function Ej(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:Q},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Tj(l){var d=Ej(l);d.next===null&&(d=l.alternate.memoizedState),Rg(l,d.next.queue,{},ea())}function $E(){return Vr(Qg)}function Aj(){return Un().memoizedState}function kj(){return Un().memoizedState}function Hee(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=ea();l=Jl(p);var y=ec(d,l,p);y!==null&&(Ni(y,d,p),Ig(y,d,p)),d={cache:yE()},l.payload=d;return}d=d.return}}function Kee(l,d,p){var y=ea();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Yy(l)?Ij(d,p):(p=oE(l,d,p,y),p!==null&&(Ni(p,l,y),Pj(p,d,y)))}function Cj(l,d,p){var y=ea();Rg(l,d,p,y)}function Rg(l,d,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Yy(l))Ij(d,E);else{var k=l.alternate;if(l.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var V=d.lastRenderedState,q=k(V,p);if(E.hasEagerState=!0,E.eagerState=q,Wi(q,V))return Iy(l,d,E,0),rn===null&&Cy(),!1}catch{}finally{}if(p=oE(l,d,E,y),p!==null)return Ni(p,l,y),Pj(p,d,y),!0}return!1}function qE(l,d,p,y){if(y={lane:2,revertLane:_T(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Yy(l)){if(d)throw Error(r(479))}else d=oE(l,p,y,2),d!==null&&Ni(d,l,2)}function Yy(l){var d=l.alternate;return l===dt||d!==null&&d===dt}function Ij(l,d){Of=Uy=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function Pj(l,d,p){if((p&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,p|=y,d.lanes=p,ng(l,p)}}var Mg={readContext:Vr,use:Gy,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useLayoutEffect:Dn,useInsertionEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useSyncExternalStore:Dn,useId:Dn,useHostTransitionStatus:Dn,useFormState:Dn,useActionState:Dn,useOptimistic:Dn,useMemoCache:Dn,useCacheRefresh:Dn};Mg.useEffectEvent=Dn;var Nj={readContext:Vr,use:Gy,useCallback:function(l,d){return di().memoizedState=[l,d===void 0?null:d],l},useContext:Vr,useEffect:pj,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Ky(4194308,4,yj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Ky(4194308,4,l,d)},useInsertionEffect:function(l,d){Ky(4,2,l,d)},useMemo:function(l,d){var p=di();d=d===void 0?null:d;var y=l();if(zu){Wn(!0);try{l()}finally{Wn(!1)}}return p.memoizedState=[y,d],y},useReducer:function(l,d,p){var y=di();if(p!==void 0){var E=p(d);if(zu){Wn(!0);try{p(d)}finally{Wn(!1)}}}else E=d;return y.memoizedState=y.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},y.queue=l,l=l.dispatch=Kee.bind(null,dt,l),[y.memoizedState,l]},useRef:function(l){var d=di();return l={current:l},d.memoizedState=l},useState:function(l){l=zE(l);var d=l.queue,p=Cj.bind(null,dt,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:BE,useDeferredValue:function(l,d){var p=di();return FE(p,l,d)},useTransition:function(){var l=zE(!1);return l=Sj.bind(null,dt,l.queue,!0,!1),di().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var y=dt,E=di();if(Ct){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),rn===null)throw Error(r(349));(Et&127)!==0||ZM(y,d,p)}E.memoizedState=p;var k={value:p,getSnapshot:d};return E.queue=k,pj(ej.bind(null,y,k,l),[l]),y.flags|=2048,Mf(9,{destroy:void 0},JM.bind(null,y,k,p,d),null),p},useId:function(){var l=di(),d=rn.identifierPrefix;if(Ct){var p=Ws,y=Ks;p=(y&~(1<<32-zt(y)-1)).toString(32)+p,d="_"+d+"R_"+p,p=$y++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=Bee++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:$E,useFormState:cj,useActionState:cj,useOptimistic:function(l){var d=di();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=qE.bind(null,dt,!0,p),p.dispatch=d,[l,d]},useMemoCache:RE,useCacheRefresh:function(){return di().memoizedState=Hee.bind(null,dt)},useEffectEvent:function(l){var d=di(),p={impl:l};return d.memoizedState=p,function(){if((Vt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},GE={readContext:Vr,use:Gy,useCallback:xj,useContext:Vr,useEffect:VE,useImperativeHandle:bj,useInsertionEffect:mj,useLayoutEffect:vj,useMemo:wj,useReducer:Hy,useRef:hj,useState:function(){return Hy(Lo)},useDebugValue:BE,useDeferredValue:function(l,d){var p=Un();return _j(p,Xt.memoizedState,l,d)},useTransition:function(){var l=Hy(Lo)[0],d=Un().memoizedState;return[typeof l=="boolean"?l:Og(l),d]},useSyncExternalStore:QM,useId:Aj,useHostTransitionStatus:$E,useFormState:uj,useActionState:uj,useOptimistic:function(l,d){var p=Un();return rj(p,Xt,l,d)},useMemoCache:RE,useCacheRefresh:kj};GE.useEffectEvent=gj;var Dj={readContext:Vr,use:Gy,useCallback:xj,useContext:Vr,useEffect:VE,useImperativeHandle:bj,useInsertionEffect:mj,useLayoutEffect:vj,useMemo:wj,useReducer:jE,useRef:hj,useState:function(){return jE(Lo)},useDebugValue:BE,useDeferredValue:function(l,d){var p=Un();return Xt===null?FE(p,l,d):_j(p,Xt.memoizedState,l,d)},useTransition:function(){var l=jE(Lo)[0],d=Un().memoizedState;return[typeof l=="boolean"?l:Og(l),d]},useSyncExternalStore:QM,useId:Aj,useHostTransitionStatus:$E,useFormState:fj,useActionState:fj,useOptimistic:function(l,d){var p=Un();return Xt!==null?rj(p,Xt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:RE,useCacheRefresh:kj};Dj.useEffectEvent=gj;function HE(l,d,p,y){d=l.memoizedState,p=p(y,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var KE={enqueueSetState:function(l,d,p){l=l._reactInternals;var y=ea(),E=Jl(y);E.payload=d,p!=null&&(E.callback=p),d=ec(l,E,y),d!==null&&(Ni(d,l,y),Ig(d,l,y))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var y=ea(),E=Jl(y);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=ec(l,E,y),d!==null&&(Ni(d,l,y),Ig(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=ea(),y=Jl(p);y.tag=2,d!=null&&(y.callback=d),d=ec(l,y,p),d!==null&&(Ni(d,l,p),Ig(d,l,p))}};function Oj(l,d,p,y,E,k,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,k,V):d.prototype&&d.prototype.isPureReactComponent?!wg(p,y)||!wg(E,k):!0}function Rj(l,d,p,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,y),d.state!==l&&KE.enqueueReplaceState(d,d.state,null)}function Lu(l,d){var p=d;if("ref"in d){p={};for(var y in d)y!=="ref"&&(p[y]=d[y])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function Mj(l){ky(l)}function jj(l){console.error(l)}function zj(l){ky(l)}function Xy(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function Lj(l,d,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function WE(l,d,p){return p=Jl(p),p.tag=3,p.payload={element:null},p.callback=function(){Xy(l,d)},p}function Vj(l){return l=Jl(l),l.tag=3,l}function Bj(l,d,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var k=y.value;l.payload=function(){return E(k)},l.callback=function(){Lj(d,p,y)}}var V=p.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){Lj(d,p,y),typeof E!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var q=y.stack;this.componentDidCatch(y.value,{componentStack:q!==null?q:""})})}function Wee(l,d,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=p.alternate,d!==null&&kf(d,p,E,!0),p=Xi.current,p!==null){switch(p.tag){case 31:case 13:return Ia===null?lb():p.alternate===null&&On===0&&(On=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===zy?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([y]):d.add(y),bT(l,y,E)),!1;case 22:return p.flags|=65536,y===zy?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([y]):p.add(y)),bT(l,y,E)),!1}throw Error(r(435,p.tag))}return bT(l,y,E),lb(),!1}if(Ct)return d=Xi.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,y!==hE&&(l=Error(r(422),{cause:y}),Eg(Ta(l,p)))):(y!==hE&&(d=Error(r(423),{cause:y}),Eg(Ta(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,y=Ta(y,p),E=WE(l.stateNode,y,E),EE(l,E),On!==4&&(On=2)),!1;var k=Error(r(520),{cause:y});if(k=Ta(k,p),$g===null?$g=[k]:$g.push(k),On!==4&&(On=2),d===null)return!0;y=Ta(y,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=WE(p.stateNode,y,l),EE(p,l),!1;case 1:if(d=p.type,k=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(sc===null||!sc.has(k))))return p.flags|=65536,E&=-E,p.lanes|=E,E=Vj(E),Bj(E,l,p,y),EE(p,E),!1}p=p.return}while(p!==null);return!1}var YE=Error(r(461)),er=!1;function Br(l,d,p,y){d.child=l===null?qM(d,null,p,y):ju(d,l.child,p,y)}function Fj(l,d,p,y,E){p=p.render;var k=d.ref;if("ref"in y){var V={};for(var q in y)q!=="ref"&&(V[q]=y[q])}else V=y;return Du(d),y=PE(l,d,p,V,k,E),q=NE(),l!==null&&!er?(DE(l,d,E),Vo(l,d,E)):(Ct&&q&&dE(d),d.flags|=1,Br(l,d,y,E),d.child)}function Uj(l,d,p,y,E){if(l===null){var k=p.type;return typeof k=="function"&&!lE(k)&&k.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=k,$j(l,d,k,y,E)):(l=Ny(p.type,null,y,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(k=l.child,!rT(l,E)){var V=k.memoizedProps;if(p=p.compare,p=p!==null?p:wg,p(V,y)&&l.ref===d.ref)return Vo(l,d,E)}return d.flags|=1,l=Oo(k,y),l.ref=d.ref,l.return=d,d.child=l}function $j(l,d,p,y,E){if(l!==null){var k=l.memoizedProps;if(wg(k,y)&&l.ref===d.ref)if(er=!1,d.pendingProps=y=k,rT(l,E))(l.flags&131072)!==0&&(er=!0);else return d.lanes=l.lanes,Vo(l,d,E)}return XE(l,d,p,y,E)}function qj(l,d,p,y){var E=y.children,k=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((d.flags&128)!==0){if(k=k!==null?k.baseLanes|p:p,l!==null){for(y=d.child=l.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~k}else y=0,d.child=null;return Gj(l,d,k,p,y)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&My(d,k!==null?k.cachePool:null),k!==null?KM(d,k):AE(),WM(d);else return y=d.lanes=536870912,Gj(l,d,k!==null?k.baseLanes|p:p,p,y)}else k!==null?(My(d,k.cachePool),KM(d,k),nc(),d.memoizedState=null):(l!==null&&My(d,null),AE(),nc());return Br(l,d,E,p),d.child}function jg(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Gj(l,d,p,y,E){var k=xE();return k=k===null?null:{parent:Zn._currentValue,pool:k},d.memoizedState={baseLanes:p,cachePool:k},l!==null&&My(d,null),AE(),WM(d),l!==null&&kf(l,d,y,!0),d.childLanes=E,null}function Qy(l,d){return d=Jy({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function Hj(l,d,p){return ju(d,l.child,null,p),l=Qy(d,d.pendingProps),l.flags|=2,Qi(d),d.memoizedState=null,l}function Yee(l,d,p){var y=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Ct){if(y.mode==="hidden")return l=Qy(d,y),d.lanes=536870912,jg(null,l);if(CE(d),(l=cn)?(l=i4(l,Ca),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Wl!==null?{id:Ks,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},p=IM(l),p.return=d,d.child=p,Lr=d,cn=null)):l=null,l===null)throw Xl(d);return d.lanes=536870912,null}return Qy(d,y)}var k=l.memoizedState;if(k!==null){var V=k.dehydrated;if(CE(d),E)if(d.flags&256)d.flags&=-257,d=Hj(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(er||kf(l,d,p,!1),E=(p&l.childLanes)!==0,er||E){if(y=rn,y!==null&&(V=rg(y,p),V!==0&&V!==k.retryLane))throw k.retryLane=V,Cu(l,V),Ni(y,l,V),YE;lb(),d=Hj(l,d,p)}else l=k.treeContext,cn=Pa(V.nextSibling),Lr=d,Ct=!0,Yl=null,Ca=!1,l!==null&&DM(d,l),d=Qy(d,y),d.flags|=4096;return d}return l=Oo(l.child,{mode:y.mode,children:y.children}),l.ref=d.ref,d.child=l,l.return=d,l}function Zy(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function XE(l,d,p,y,E){return Du(d),p=PE(l,d,p,y,void 0,E),y=NE(),l!==null&&!er?(DE(l,d,E),Vo(l,d,E)):(Ct&&y&&dE(d),d.flags|=1,Br(l,d,p,E),d.child)}function Kj(l,d,p,y,E,k){return Du(d),d.updateQueue=null,p=XM(d,y,p,E),YM(l),y=NE(),l!==null&&!er?(DE(l,d,k),Vo(l,d,k)):(Ct&&y&&dE(d),d.flags|=1,Br(l,d,p,k),d.child)}function Wj(l,d,p,y,E){if(Du(d),d.stateNode===null){var k=Sf,V=p.contextType;typeof V=="object"&&V!==null&&(k=Vr(V)),k=new p(y,k),d.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=KE,d.stateNode=k,k._reactInternals=d,k=d.stateNode,k.props=y,k.state=d.memoizedState,k.refs={},_E(d),V=p.contextType,k.context=typeof V=="object"&&V!==null?Vr(V):Sf,k.state=d.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(HE(d,p,V,y),k.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(V=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),V!==k.state&&KE.enqueueReplaceState(k,k.state,null),Ng(d,y,k,E),Pg(),k.state=d.memoizedState),typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){k=d.stateNode;var q=d.memoizedProps,ie=Lu(p,q);k.props=ie;var ve=k.context,Te=p.contextType;V=Sf,typeof Te=="object"&&Te!==null&&(V=Vr(Te));var Ce=p.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof k.getSnapshotBeforeUpdate=="function",q=d.pendingProps!==q,Te||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(q||ve!==V)&&Rj(d,k,y,V),Zl=!1;var be=d.memoizedState;k.state=be,Ng(d,y,k,E),Pg(),ve=d.memoizedState,q||be!==ve||Zl?(typeof Ce=="function"&&(HE(d,p,Ce,y),ve=d.memoizedState),(ie=Zl||Oj(d,p,ie,y,be,ve,V))?(Te||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(d.flags|=4194308)):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ve),k.props=y,k.state=ve,k.context=V,y=ie):(typeof k.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{k=d.stateNode,SE(l,d),V=d.memoizedProps,Te=Lu(p,V),k.props=Te,Ce=d.pendingProps,be=k.context,ve=p.contextType,ie=Sf,typeof ve=="object"&&ve!==null&&(ie=Vr(ve)),q=p.getDerivedStateFromProps,(ve=typeof q=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(V!==Ce||be!==ie)&&Rj(d,k,y,ie),Zl=!1,be=d.memoizedState,k.state=be,Ng(d,y,k,E),Pg();var we=d.memoizedState;V!==Ce||be!==we||Zl||l!==null&&l.dependencies!==null&&Oy(l.dependencies)?(typeof q=="function"&&(HE(d,p,q,y),we=d.memoizedState),(Te=Zl||Oj(d,p,Te,y,be,we,ie)||l!==null&&l.dependencies!==null&&Oy(l.dependencies))?(ve||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,we,ie),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,we,ie)),typeof k.componentDidUpdate=="function"&&(d.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof k.componentDidUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=we),k.props=y,k.state=we,k.context=ie,y=Te):(typeof k.componentDidUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&be===l.memoizedState||(d.flags|=1024),y=!1)}return k=y,Zy(l,d),y=(d.flags&128)!==0,k||y?(k=d.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:k.render(),d.flags|=1,l!==null&&y?(d.child=ju(d,l.child,null,E),d.child=ju(d,null,p,E)):Br(l,d,p,E),d.memoizedState=k.state,l=d.child):l=Vo(l,d,E),l}function Yj(l,d,p,y){return Pu(),d.flags|=256,Br(l,d,p,y),d.child}var QE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ZE(l){return{baseLanes:l,cachePool:LM()}}function JE(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=Ji),l}function Xj(l,d,p){var y=d.pendingProps,E=!1,k=(d.flags&128)!==0,V;if((V=k)||(V=l!==null&&l.memoizedState===null?!1:(Fn.current&2)!==0),V&&(E=!0,d.flags&=-129),V=(d.flags&32)!==0,d.flags&=-33,l===null){if(Ct){if(E?tc(d):nc(),(l=cn)?(l=i4(l,Ca),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Wl!==null?{id:Ks,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},p=IM(l),p.return=d,d.child=p,Lr=d,cn=null)):l=null,l===null)throw Xl(d);return MT(l)?d.lanes=32:d.lanes=536870912,null}var q=y.children;return y=y.fallback,E?(nc(),E=d.mode,q=Jy({mode:"hidden",children:q},E),y=Iu(y,E,p,null),q.return=d,y.return=d,q.sibling=y,d.child=q,y=d.child,y.memoizedState=ZE(p),y.childLanes=JE(l,V,p),d.memoizedState=QE,jg(null,y)):(tc(d),eT(d,q))}var ie=l.memoizedState;if(ie!==null&&(q=ie.dehydrated,q!==null)){if(k)d.flags&256?(tc(d),d.flags&=-257,d=tT(l,d,p)):d.memoizedState!==null?(nc(),d.child=l.child,d.flags|=128,d=null):(nc(),q=y.fallback,E=d.mode,y=Jy({mode:"visible",children:y.children},E),q=Iu(q,E,p,null),q.flags|=2,y.return=d,q.return=d,y.sibling=q,d.child=y,ju(d,l.child,null,p),y=d.child,y.memoizedState=ZE(p),y.childLanes=JE(l,V,p),d.memoizedState=QE,d=jg(null,y));else if(tc(d),MT(q)){if(V=q.nextSibling&&q.nextSibling.dataset,V)var ve=V.dgst;V=ve,y=Error(r(419)),y.stack="",y.digest=V,Eg({value:y,source:null,stack:null}),d=tT(l,d,p)}else if(er||kf(l,d,p,!1),V=(p&l.childLanes)!==0,er||V){if(V=rn,V!==null&&(y=rg(V,p),y!==0&&y!==ie.retryLane))throw ie.retryLane=y,Cu(l,y),Ni(V,l,y),YE;RT(q)||lb(),d=tT(l,d,p)}else RT(q)?(d.flags|=192,d.child=l.child,d=null):(l=ie.treeContext,cn=Pa(q.nextSibling),Lr=d,Ct=!0,Yl=null,Ca=!1,l!==null&&DM(d,l),d=eT(d,y.children),d.flags|=4096);return d}return E?(nc(),q=y.fallback,E=d.mode,ie=l.child,ve=ie.sibling,y=Oo(ie,{mode:"hidden",children:y.children}),y.subtreeFlags=ie.subtreeFlags&65011712,ve!==null?q=Oo(ve,q):(q=Iu(q,E,p,null),q.flags|=2),q.return=d,y.return=d,y.sibling=q,d.child=y,jg(null,y),y=d.child,q=l.child.memoizedState,q===null?q=ZE(p):(E=q.cachePool,E!==null?(ie=Zn._currentValue,E=E.parent!==ie?{parent:ie,pool:ie}:E):E=LM(),q={baseLanes:q.baseLanes|p,cachePool:E}),y.memoizedState=q,y.childLanes=JE(l,V,p),d.memoizedState=QE,jg(l.child,y)):(tc(d),p=l.child,l=p.sibling,p=Oo(p,{mode:"visible",children:y.children}),p.return=d,p.sibling=null,l!==null&&(V=d.deletions,V===null?(d.deletions=[l],d.flags|=16):V.push(l)),d.child=p,d.memoizedState=null,p)}function eT(l,d){return d=Jy({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Jy(l,d){return l=Yi(22,l,null,d),l.lanes=0,l}function tT(l,d,p){return ju(d,l.child,null,p),l=eT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function Qj(l,d,p){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),mE(l.return,d,p)}function nT(l,d,p,y,E,k){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:k}:(V.isBackwards=d,V.rendering=null,V.renderingStartTime=0,V.last=y,V.tail=p,V.tailMode=E,V.treeForkCount=k)}function Zj(l,d,p){var y=d.pendingProps,E=y.revealOrder,k=y.tail;y=y.children;var V=Fn.current,q=(V&2)!==0;if(q?(V=V&1|2,d.flags|=128):V&=1,re(Fn,V),Br(l,d,y,p),y=Ct?Sg:0,!q&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Qj(l,p,d);else if(l.tag===19)Qj(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Fy(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),nT(d,!1,E,p,k,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Fy(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}nT(d,!0,p,null,k,y);break;case"together":nT(d,!1,null,null,void 0,y);break;default:d.memoizedState=null}return d.child}function Vo(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),ac|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(kf(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Oo(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Oo(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function rT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Oy(l)))}function Xee(l,d,p){switch(d.tag){case 3:_e(d,d.stateNode.containerInfo),Ql(d,Zn,l.memoizedState.cache),Pu();break;case 27:case 5:ge(d);break;case 4:_e(d,d.stateNode.containerInfo);break;case 10:Ql(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,CE(d),null;break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(tc(d),d.flags|=128,null):(p&d.child.childLanes)!==0?Xj(l,d,p):(tc(d),l=Vo(l,d,p),l!==null?l.sibling:null);tc(d);break;case 19:var E=(l.flags&128)!==0;if(y=(p&d.childLanes)!==0,y||(kf(l,d,p,!1),y=(p&d.childLanes)!==0),E){if(y)return Zj(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),re(Fn,Fn.current),y)break;return null;case 22:return d.lanes=0,qj(l,d,p,d.pendingProps);case 24:Ql(d,Zn,l.memoizedState.cache)}return Vo(l,d,p)}function Jj(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)er=!0;else{if(!rT(l,p)&&(d.flags&128)===0)return er=!1,Xee(l,d,p);er=(l.flags&131072)!==0}else er=!1,Ct&&(d.flags&1048576)!==0&&NM(d,Sg,d.index);switch(d.lanes=0,d.tag){case 16:e:{var y=d.pendingProps;if(l=Ru(d.elementType),d.type=l,typeof l=="function")lE(l)?(y=Lu(l,y),d.tag=1,d=Wj(null,d,l,y,p)):(d.tag=0,d=XE(null,d,l,y,p));else{if(l!=null){var E=l.$$typeof;if(E===O){d.tag=11,d=Fj(null,d,l,y,p);break e}else if(E===C){d.tag=14,d=Uj(null,d,l,y,p);break e}}throw d=W(l)||l,Error(r(306,d,""))}}return d;case 0:return XE(l,d,d.type,d.pendingProps,p);case 1:return y=d.type,E=Lu(y,d.pendingProps),Wj(l,d,y,E,p);case 3:e:{if(_e(d,d.stateNode.containerInfo),l===null)throw Error(r(387));y=d.pendingProps;var k=d.memoizedState;E=k.element,SE(l,d),Ng(d,y,null,p);var V=d.memoizedState;if(y=V.cache,Ql(d,Zn,y),y!==k.cache&&vE(d,[Zn],p,!0),Pg(),y=V.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:V.cache},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){d=Yj(l,d,y,p);break e}else if(y!==E){E=Ta(Error(r(424)),d),Eg(E),d=Yj(l,d,y,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(cn=Pa(l.firstChild),Lr=d,Ct=!0,Yl=null,Ca=!0,p=qM(d,null,y,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Pu(),y===E){d=Vo(l,d,p);break e}Br(l,d,y,p)}d=d.child}return d;case 26:return Zy(l,d),l===null?(p=u4(d.type,null,d.pendingProps,null))?d.memoizedState=p:Ct||(p=d.type,l=d.pendingProps,y=gb(ne.current).createElement(p),y[Yn]=d,y[Tr]=l,Fr(y,p,l),Xn(y),d.stateNode=y):d.memoizedState=u4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return ge(d),l===null&&Ct&&(y=d.stateNode=o4(d.type,d.pendingProps,ne.current),Lr=d,Ca=!0,E=cn,uc(d.type)?(jT=E,cn=Pa(y.firstChild)):cn=E),Br(l,d,d.pendingProps.children,p),Zy(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Ct&&((E=y=cn)&&(y=Ate(y,d.type,d.pendingProps,Ca),y!==null?(d.stateNode=y,Lr=d,cn=Pa(y.firstChild),Ca=!1,E=!0):E=!1),E||Xl(d)),ge(d),E=d.type,k=d.pendingProps,V=l!==null?l.memoizedProps:null,y=k.children,NT(E,k)?y=null:V!==null&&NT(E,V)&&(d.flags|=32),d.memoizedState!==null&&(E=PE(l,d,Fee,null,null,p),Qg._currentValue=E),Zy(l,d),Br(l,d,y,p),d.child;case 6:return l===null&&Ct&&((l=p=cn)&&(p=kte(p,d.pendingProps,Ca),p!==null?(d.stateNode=p,Lr=d,cn=null,l=!0):l=!1),l||Xl(d)),null;case 13:return Xj(l,d,p);case 4:return _e(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=ju(d,null,y,p):Br(l,d,y,p),d.child;case 11:return Fj(l,d,d.type,d.pendingProps,p);case 7:return Br(l,d,d.pendingProps,p),d.child;case 8:return Br(l,d,d.pendingProps.children,p),d.child;case 12:return Br(l,d,d.pendingProps.children,p),d.child;case 10:return y=d.pendingProps,Ql(d,d.type,y.value),Br(l,d,y.children,p),d.child;case 9:return E=d.type._context,y=d.pendingProps.children,Du(d),E=Vr(E),y=y(E),d.flags|=1,Br(l,d,y,p),d.child;case 14:return Uj(l,d,d.type,d.pendingProps,p);case 15:return $j(l,d,d.type,d.pendingProps,p);case 19:return Zj(l,d,p);case 31:return Yee(l,d,p);case 22:return qj(l,d,p,d.pendingProps);case 24:return Du(d),y=Vr(Zn),l===null?(E=xE(),E===null&&(E=rn,k=yE(),E.pooledCache=k,k.refCount++,k!==null&&(E.pooledCacheLanes|=p),E=k),d.memoizedState={parent:y,cache:E},_E(d),Ql(d,Zn,E)):((l.lanes&p)!==0&&(SE(l,d),Ng(d,null,null,p),Pg()),E=l.memoizedState,k=d.memoizedState,E.parent!==y?(E={parent:y,cache:y},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),Ql(d,Zn,y)):(y=k.cache,Ql(d,Zn,y),y!==E.cache&&vE(d,[Zn],p,!0))),Br(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Bo(l){l.flags|=4}function iT(l,d,p,y,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(Az())l.flags|=8192;else throw Mu=zy,wE}else l.flags&=-16777217}function ez(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!g4(d))if(Az())l.flags|=8192;else throw Mu=zy,wE}function eb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?sy():536870912,l.lanes|=d,Vf|=d)}function zg(l,d){if(!Ct)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function un(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,d}function Qee(l,d,p){var y=d.pendingProps;switch(fE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(d),null;case 1:return un(d),null;case 3:return p=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),jo(Zn),ae(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Af(d)?Bo(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,pE())),un(d),null;case 26:var E=d.type,k=d.memoizedState;return l===null?(Bo(d),k!==null?(un(d),ez(d,k)):(un(d),iT(d,E,null,y,p))):k?k!==l.memoizedState?(Bo(d),un(d),ez(d,k)):(un(d),d.flags&=-16777217):(l=l.memoizedProps,l!==y&&Bo(d),un(d),iT(d,E,l,y,p)),null;case 27:if(fe(d),p=ne.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Bo(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return un(d),null}l=K.current,Af(d)?OM(d):(l=o4(E,y,p),d.stateNode=l,Bo(d))}return un(d),null;case 5:if(fe(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&Bo(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return un(d),null}if(k=K.current,Af(d))OM(d);else{var V=gb(ne.current);switch(k){case 1:k=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:k=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":k=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":k=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":k=V.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof y.is=="string"?V.createElement("select",{is:y.is}):V.createElement("select"),y.multiple?k.multiple=!0:y.size&&(k.size=y.size);break;default:k=typeof y.is=="string"?V.createElement(E,{is:y.is}):V.createElement(E)}}k[Yn]=d,k[Tr]=y;e:for(V=d.child;V!==null;){if(V.tag===5||V.tag===6)k.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===d)break e;for(;V.sibling===null;){if(V.return===null||V.return===d)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}d.stateNode=k;e:switch(Fr(k,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Bo(d)}}return un(d),iT(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&Bo(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(l=ne.current,Af(d)){if(l=d.stateNode,p=d.memoizedProps,y=null,E=Lr,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}l[Yn]=d,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||Xz(l.nodeValue,p)),l||Xl(d,!0)}else l=gb(l).createTextNode(y),l[Yn]=d,d.stateNode=l}return un(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(y=Af(d),p!==null){if(l===null){if(!y)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[Yn]=d}else Pu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;un(d),l=!1}else p=pE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(Qi(d),d):(Qi(d),null);if((d.flags&128)!==0)throw Error(r(558))}return un(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=Af(d),y!==null&&y.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Yn]=d}else Pu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;un(d),E=!1}else E=pE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(Qi(d),d):(Qi(d),null)}return Qi(d),(d.flags&128)!==0?(d.lanes=p,d):(p=y!==null,l=l!==null&&l.memoizedState!==null,p&&(y=d.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),k=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==E&&(y.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),eb(d,d.updateQueue),un(d),null);case 4:return ae(),l===null&&AT(d.stateNode.containerInfo),un(d),null;case 10:return jo(d.type),un(d),null;case 19:if(X(Fn),y=d.memoizedState,y===null)return un(d),null;if(E=(d.flags&128)!==0,k=y.rendering,k===null)if(E)zg(y,!1);else{if(On!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(k=Fy(l),k!==null){for(d.flags|=128,zg(y,!1),l=k.updateQueue,d.updateQueue=l,eb(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)CM(p,l),p=p.sibling;return re(Fn,Fn.current&1|2),Ct&&Ro(d,y.treeForkCount),d.child}l=l.sibling}y.tail!==null&&it()>ab&&(d.flags|=128,E=!0,zg(y,!1),d.lanes=4194304)}else{if(!E)if(l=Fy(k),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,eb(d,l),zg(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Ct)return un(d),null}else 2*it()-y.renderingStartTime>ab&&p!==536870912&&(d.flags|=128,E=!0,zg(y,!1),d.lanes=4194304);y.isBackwards?(k.sibling=d.child,d.child=k):(l=y.last,l!==null?l.sibling=k:d.child=k,y.last=k)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=it(),l.sibling=null,p=Fn.current,re(Fn,E?p&1|2:p&1),Ct&&Ro(d,y.treeForkCount),l):(un(d),null);case 22:case 23:return Qi(d),kE(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(p&536870912)!==0&&(d.flags&128)===0&&(un(d),d.subtreeFlags&6&&(d.flags|=8192)):un(d),p=d.updateQueue,p!==null&&eb(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==p&&(d.flags|=2048),l!==null&&X(Ou),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),jo(Zn),un(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function Zee(l,d){switch(fE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return jo(Zn),ae(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return fe(d),null;case 31:if(d.memoizedState!==null){if(Qi(d),d.alternate===null)throw Error(r(340));Pu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Qi(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Pu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return X(Fn),null;case 4:return ae(),null;case 10:return jo(d.type),null;case 22:case 23:return Qi(d),kE(),l!==null&&X(Ou),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return jo(Zn),null;case 25:return null;default:return null}}function tz(l,d){switch(fE(d),d.tag){case 3:jo(Zn),ae();break;case 26:case 27:case 5:fe(d);break;case 4:ae();break;case 31:d.memoizedState!==null&&Qi(d);break;case 13:Qi(d);break;case 19:X(Fn);break;case 10:jo(d.type);break;case 22:case 23:Qi(d),kE(),l!==null&&X(Ou);break;case 24:jo(Zn)}}function Lg(l,d){try{var p=d.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&l)===l){y=void 0;var k=p.create,V=p.inst;y=k(),V.destroy=y}p=p.next}while(p!==E)}}catch(q){qt(d,d.return,q)}}function rc(l,d,p){try{var y=d.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var k=E.next;y=k;do{if((y.tag&l)===l){var V=y.inst,q=V.destroy;if(q!==void 0){V.destroy=void 0,E=d;var ie=p,ve=q;try{ve()}catch(Te){qt(E,ie,Te)}}}y=y.next}while(y!==k)}}catch(Te){qt(d,d.return,Te)}}function nz(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{HM(d,p)}catch(y){qt(l,l.return,y)}}}function rz(l,d,p){p.props=Lu(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){qt(l,d,y)}}function Vg(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(E){qt(l,d,E)}}function Ys(l,d){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){qt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){qt(l,d,E)}else p.current=null}function iz(l){var d=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){qt(l,l.return,E)}}function aT(l,d,p){try{var y=l.stateNode;xte(y,l.type,p,d),y[Tr]=d}catch(E){qt(l,l.return,E)}}function az(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&uc(l.type)||l.tag===4}function sT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||az(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&uc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function oT(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=ns));else if(y!==4&&(y===27&&uc(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(oT(l,d,p),l=l.sibling;l!==null;)oT(l,d,p),l=l.sibling}function tb(l,d,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(y!==4&&(y===27&&uc(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(tb(l,d,p),l=l.sibling;l!==null;)tb(l,d,p),l=l.sibling}function sz(l){var d=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);Fr(d,y,p),d[Yn]=l,d[Tr]=p}catch(k){qt(l,l.return,k)}}var Fo=!1,tr=!1,lT=!1,oz=typeof WeakSet=="function"?WeakSet:Set,kr=null;function Jee(l,d){if(l=l.containerInfo,IT=_b,l=bM(l),tE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{p.nodeType,k.nodeType}catch{p=null;break e}var V=0,q=-1,ie=-1,ve=0,Te=0,Ce=l,be=null;t:for(;;){for(var we;Ce!==p||E!==0&&Ce.nodeType!==3||(q=V+E),Ce!==k||y!==0&&Ce.nodeType!==3||(ie=V+y),Ce.nodeType===3&&(V+=Ce.nodeValue.length),(we=Ce.firstChild)!==null;)be=Ce,Ce=we;for(;;){if(Ce===l)break t;if(be===p&&++ve===E&&(q=V),be===k&&++Te===y&&(ie=V),(we=Ce.nextSibling)!==null)break;Ce=be,be=Ce.parentNode}Ce=we}p=q===-1||ie===-1?null:{start:q,end:ie}}else p=null}p=p||{start:0,end:0}}else p=null;for(PT={focusedElem:l,selectionRange:p},_b=!1,kr=d;kr!==null;)if(d=kr,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,kr=l;else for(;kr!==null;){switch(d=kr,k=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&k!==null){l=void 0,p=d,E=k.memoizedProps,k=k.memoizedState,y=p.stateNode;try{var $e=Lu(p.type,E);l=y.getSnapshotBeforeUpdate($e,k),y.__reactInternalSnapshotBeforeUpdate=l}catch(rt){qt(p,p.return,rt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)OT(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":OT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,kr=l;break}kr=d.return}}function lz(l,d,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:$o(l,p),y&4&&Lg(5,p);break;case 1:if($o(l,p),y&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(V){qt(p,p.return,V)}else{var E=Lu(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(V){qt(p,p.return,V)}}y&64&&nz(p),y&512&&Vg(p,p.return);break;case 3:if($o(l,p),y&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{HM(l,d)}catch(V){qt(p,p.return,V)}}break;case 27:d===null&&y&4&&sz(p);case 26:case 5:$o(l,p),d===null&&y&4&&iz(p),y&512&&Vg(p,p.return);break;case 12:$o(l,p);break;case 31:$o(l,p),y&4&&dz(l,p);break;case 13:$o(l,p),y&4&&fz(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=lte.bind(null,p),Cte(l,p))));break;case 22:if(y=p.memoizedState!==null||Fo,!y){d=d!==null&&d.memoizedState!==null||tr,E=Fo;var k=tr;Fo=y,(tr=d)&&!k?qo(l,p,(p.subtreeFlags&8772)!==0):$o(l,p),Fo=E,tr=k}break;case 30:break;default:$o(l,p)}}function cz(l){var d=l.alternate;d!==null&&(l.alternate=null,cz(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&cf(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var mn=null,ki=!1;function Uo(l,d,p){for(p=p.child;p!==null;)uz(l,d,p),p=p.sibling}function uz(l,d,p){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Xr,p)}catch{}switch(p.tag){case 26:tr||Ys(p,d),Uo(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:tr||Ys(p,d);var y=mn,E=ki;uc(p.type)&&(mn=p.stateNode,ki=!1),Uo(l,d,p),Wg(p.stateNode),mn=y,ki=E;break;case 5:tr||Ys(p,d);case 6:if(y=mn,E=ki,mn=null,Uo(l,d,p),mn=y,ki=E,mn!==null)if(ki)try{(mn.nodeType===9?mn.body:mn.nodeName==="HTML"?mn.ownerDocument.body:mn).removeChild(p.stateNode)}catch(k){qt(p,d,k)}else try{mn.removeChild(p.stateNode)}catch(k){qt(p,d,k)}break;case 18:mn!==null&&(ki?(l=mn,n4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Kf(l)):n4(mn,p.stateNode));break;case 4:y=mn,E=ki,mn=p.stateNode.containerInfo,ki=!0,Uo(l,d,p),mn=y,ki=E;break;case 0:case 11:case 14:case 15:rc(2,p,d),tr||rc(4,p,d),Uo(l,d,p);break;case 1:tr||(Ys(p,d),y=p.stateNode,typeof y.componentWillUnmount=="function"&&rz(p,d,y)),Uo(l,d,p);break;case 21:Uo(l,d,p);break;case 22:tr=(y=tr)||p.memoizedState!==null,Uo(l,d,p),tr=y;break;default:Uo(l,d,p)}}function dz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Kf(l)}catch(p){qt(d,d.return,p)}}}function fz(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Kf(l)}catch(p){qt(d,d.return,p)}}function ete(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new oz),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new oz),d;default:throw Error(r(435,l.tag))}}function nb(l,d){var p=ete(l);d.forEach(function(y){if(!p.has(y)){p.add(y);var E=cte.bind(null,l,y);y.then(E,E)}})}function Ci(l,d){var p=d.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],k=l,V=d,q=V;e:for(;q!==null;){switch(q.tag){case 27:if(uc(q.type)){mn=q.stateNode,ki=!1;break e}break;case 5:mn=q.stateNode,ki=!1;break e;case 3:case 4:mn=q.stateNode.containerInfo,ki=!0;break e}q=q.return}if(mn===null)throw Error(r(160));uz(k,V,E),mn=null,ki=!1,k=E.alternate,k!==null&&(k.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)hz(d,l),d=d.sibling}var ls=null;function hz(l,d){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ci(d,l),Ii(l),y&4&&(rc(3,l,l.return),Lg(3,l),rc(5,l,l.return));break;case 1:Ci(d,l),Ii(l),y&512&&(tr||p===null||Ys(p,p.return)),y&64&&Fo&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=ls;if(Ci(d,l),Ii(l),y&512&&(tr||p===null||Ys(p,p.return)),y&4){var k=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":k=E.getElementsByTagName("title")[0],(!k||k[Ms]||k[Yn]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=E.createElement(y),E.head.insertBefore(k,E.querySelector("head > title"))),Fr(k,y,p),k[Yn]=l,Xn(k),y=k;break e;case"link":var V=h4("link","href",E).get(y+(p.href||""));if(V){for(var q=0;q<V.length;q++)if(k=V[q],k.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&k.getAttribute("rel")===(p.rel==null?null:p.rel)&&k.getAttribute("title")===(p.title==null?null:p.title)&&k.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){V.splice(q,1);break t}}k=E.createElement(y),Fr(k,y,p),E.head.appendChild(k);break;case"meta":if(V=h4("meta","content",E).get(y+(p.content||""))){for(q=0;q<V.length;q++)if(k=V[q],k.getAttribute("content")===(p.content==null?null:""+p.content)&&k.getAttribute("name")===(p.name==null?null:p.name)&&k.getAttribute("property")===(p.property==null?null:p.property)&&k.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&k.getAttribute("charset")===(p.charSet==null?null:p.charSet)){V.splice(q,1);break t}}k=E.createElement(y),Fr(k,y,p),E.head.appendChild(k);break;default:throw Error(r(468,y))}k[Yn]=l,Xn(k),y=k}l.stateNode=y}else p4(E,l.type,l.stateNode);else l.stateNode=f4(E,y,l.memoizedProps);else k!==y?(k===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):k.count--,y===null?p4(E,l.type,l.stateNode):f4(E,y,l.memoizedProps)):y===null&&l.stateNode!==null&&aT(l,l.memoizedProps,p.memoizedProps)}break;case 27:Ci(d,l),Ii(l),y&512&&(tr||p===null||Ys(p,p.return)),p!==null&&y&4&&aT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Ci(d,l),Ii(l),y&512&&(tr||p===null||Ys(p,p.return)),l.flags&32){E=l.stateNode;try{Ai(E,"")}catch($e){qt(l,l.return,$e)}}y&4&&l.stateNode!=null&&(E=l.memoizedProps,aT(l,E,p!==null?p.memoizedProps:E)),y&1024&&(lT=!0);break;case 6:if(Ci(d,l),Ii(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch($e){qt(l,l.return,$e)}}break;case 3:if(yb=null,E=ls,ls=mb(d.containerInfo),Ci(d,l),ls=E,Ii(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Kf(d.containerInfo)}catch($e){qt(l,l.return,$e)}lT&&(lT=!1,pz(l));break;case 4:y=ls,ls=mb(l.stateNode.containerInfo),Ci(d,l),Ii(l),ls=y;break;case 12:Ci(d,l),Ii(l);break;case 31:Ci(d,l),Ii(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,nb(l,y)));break;case 13:Ci(d,l),Ii(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ib=it()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,nb(l,y)));break;case 22:E=l.memoizedState!==null;var ie=p!==null&&p.memoizedState!==null,ve=Fo,Te=tr;if(Fo=ve||E,tr=Te||ie,Ci(d,l),tr=Te,Fo=ve,Ii(l),y&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||ie||Fo||tr||Vu(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){ie=p=d;try{if(k=ie.stateNode,E)V=k.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{q=ie.stateNode;var Ce=ie.memoizedProps.style,be=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;q.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch($e){qt(ie,ie.return,$e)}}}else if(d.tag===6){if(p===null){ie=d;try{ie.stateNode.nodeValue=E?"":ie.memoizedProps}catch($e){qt(ie,ie.return,$e)}}}else if(d.tag===18){if(p===null){ie=d;try{var we=ie.stateNode;E?r4(we,!0):r4(ie.stateNode,!1)}catch($e){qt(ie,ie.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,nb(l,p))));break;case 19:Ci(d,l),Ii(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,nb(l,y)));break;case 30:break;case 21:break;default:Ci(d,l),Ii(l)}}function Ii(l){var d=l.flags;if(d&2){try{for(var p,y=l.return;y!==null;){if(az(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,k=sT(l);tb(l,k,E);break;case 5:var V=p.stateNode;p.flags&32&&(Ai(V,""),p.flags&=-33);var q=sT(l);tb(l,q,V);break;case 3:case 4:var ie=p.stateNode.containerInfo,ve=sT(l);oT(l,ve,ie);break;default:throw Error(r(161))}}catch(Te){qt(l,l.return,Te)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function pz(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;pz(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function $o(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)lz(l,d.alternate,d),d=d.sibling}function Vu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:rc(4,d,d.return),Vu(d);break;case 1:Ys(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&rz(d,d.return,p),Vu(d);break;case 27:Wg(d.stateNode);case 26:case 5:Ys(d,d.return),Vu(d);break;case 22:d.memoizedState===null&&Vu(d);break;case 30:Vu(d);break;default:Vu(d)}l=l.sibling}}function qo(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,E=l,k=d,V=k.flags;switch(k.tag){case 0:case 11:case 15:qo(E,k,p),Lg(4,k);break;case 1:if(qo(E,k,p),y=k,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ve){qt(y,y.return,ve)}if(y=k,E=y.updateQueue,E!==null){var q=y.stateNode;try{var ie=E.shared.hiddenCallbacks;if(ie!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ie.length;E++)GM(ie[E],q)}catch(ve){qt(y,y.return,ve)}}p&&V&64&&nz(k),Vg(k,k.return);break;case 27:sz(k);case 26:case 5:qo(E,k,p),p&&y===null&&V&4&&iz(k),Vg(k,k.return);break;case 12:qo(E,k,p);break;case 31:qo(E,k,p),p&&V&4&&dz(E,k);break;case 13:qo(E,k,p),p&&V&4&&fz(E,k);break;case 22:k.memoizedState===null&&qo(E,k,p),Vg(k,k.return);break;case 30:break;default:qo(E,k,p)}d=d.sibling}}function cT(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Tg(p))}function uT(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Tg(l))}function cs(l,d,p,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)gz(l,d,p,y),d=d.sibling}function gz(l,d,p,y){var E=d.flags;switch(d.tag){case 0:case 11:case 15:cs(l,d,p,y),E&2048&&Lg(9,d);break;case 1:cs(l,d,p,y);break;case 3:cs(l,d,p,y),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Tg(l)));break;case 12:if(E&2048){cs(l,d,p,y),l=d.stateNode;try{var k=d.memoizedProps,V=k.id,q=k.onPostCommit;typeof q=="function"&&q(V,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ie){qt(d,d.return,ie)}}else cs(l,d,p,y);break;case 31:cs(l,d,p,y);break;case 13:cs(l,d,p,y);break;case 23:break;case 22:k=d.stateNode,V=d.alternate,d.memoizedState!==null?k._visibility&2?cs(l,d,p,y):Bg(l,d):k._visibility&2?cs(l,d,p,y):(k._visibility|=2,jf(l,d,p,y,(d.subtreeFlags&10256)!==0||!1)),E&2048&&cT(V,d);break;case 24:cs(l,d,p,y),E&2048&&uT(d.alternate,d);break;default:cs(l,d,p,y)}}function jf(l,d,p,y,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var k=l,V=d,q=p,ie=y,ve=V.flags;switch(V.tag){case 0:case 11:case 15:jf(k,V,q,ie,E),Lg(8,V);break;case 23:break;case 22:var Te=V.stateNode;V.memoizedState!==null?Te._visibility&2?jf(k,V,q,ie,E):Bg(k,V):(Te._visibility|=2,jf(k,V,q,ie,E)),E&&ve&2048&&cT(V.alternate,V);break;case 24:jf(k,V,q,ie,E),E&&ve&2048&&uT(V.alternate,V);break;default:jf(k,V,q,ie,E)}d=d.sibling}}function Bg(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,y=d,E=y.flags;switch(y.tag){case 22:Bg(p,y),E&2048&&cT(y.alternate,y);break;case 24:Bg(p,y),E&2048&&uT(y.alternate,y);break;default:Bg(p,y)}d=d.sibling}}var Fg=8192;function zf(l,d,p){if(l.subtreeFlags&Fg)for(l=l.child;l!==null;)mz(l,d,p),l=l.sibling}function mz(l,d,p){switch(l.tag){case 26:zf(l,d,p),l.flags&Fg&&l.memoizedState!==null&&Bte(p,ls,l.memoizedState,l.memoizedProps);break;case 5:zf(l,d,p);break;case 3:case 4:var y=ls;ls=mb(l.stateNode.containerInfo),zf(l,d,p),ls=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=Fg,Fg=16777216,zf(l,d,p),Fg=y):zf(l,d,p));break;default:zf(l,d,p)}}function vz(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Ug(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];kr=y,bz(y,l)}vz(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)yz(l),l=l.sibling}function yz(l){switch(l.tag){case 0:case 11:case 15:Ug(l),l.flags&2048&&rc(9,l,l.return);break;case 3:Ug(l);break;case 12:Ug(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,rb(l)):Ug(l);break;default:Ug(l)}}function rb(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var y=d[p];kr=y,bz(y,l)}vz(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:rc(8,d,d.return),rb(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,rb(d));break;default:rb(d)}l=l.sibling}}function bz(l,d){for(;kr!==null;){var p=kr;switch(p.tag){case 0:case 11:case 15:rc(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Tg(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,kr=y;else e:for(p=l;kr!==null;){y=kr;var E=y.sibling,k=y.return;if(cz(y),y===p){kr=null;break e}if(E!==null){E.return=k,kr=E;break e}kr=k}}}var tte={getCacheForType:function(l){var d=Vr(Zn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Vr(Zn).controller.signal}},nte=typeof WeakMap=="function"?WeakMap:Map,Vt=0,rn=null,xt=null,Et=0,$t=0,Zi=null,ic=!1,Lf=!1,dT=!1,Go=0,On=0,ac=0,Bu=0,fT=0,Ji=0,Vf=0,$g=null,Pi=null,hT=!1,ib=0,xz=0,ab=1/0,sb=null,sc=null,dr=0,oc=null,Bf=null,Ho=0,pT=0,gT=null,wz=null,qg=0,mT=null;function ea(){return(Vt&2)!==0&&Et!==0?Et&-Et:G.T!==null?_T():oy()}function _z(){if(Ji===0)if((Et&536870912)===0||Ct){var l=En;En<<=1,(En&3932160)===0&&(En=262144),Ji=l}else Ji=536870912;return l=Xi.current,l!==null&&(l.flags|=32),Ji}function Ni(l,d,p){(l===rn&&($t===2||$t===9)||l.cancelPendingCommit!==null)&&(Ff(l,0),lc(l,Et,Ji,!1)),pu(l,p),((Vt&2)===0||l!==rn)&&(l===rn&&((Vt&2)===0&&(Bu|=p),On===4&&lc(l,Et,Ji,!1)),Xs(l))}function Sz(l,d,p){if((Vt&6)!==0)throw Error(r(327));var y=!p&&(d&127)===0&&(d&l.expiredLanes)===0||ci(l,d),E=y?ate(l,d):yT(l,d,!0),k=y;do{if(E===0){Lf&&!y&&lc(l,d,0,!1);break}else{if(p=l.current.alternate,k&&!rte(p)){E=yT(l,d,!1),k=!1;continue}if(E===2){if(k=d,l.errorRecoveryDisabledLanes&k)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){d=V;e:{var q=l;E=$g;var ie=q.current.memoizedState.isDehydrated;if(ie&&(Ff(q,V).flags|=256),V=yT(q,V,!1),V!==2){if(dT&&!ie){q.errorRecoveryDisabledLanes|=k,Bu|=k,E=4;break e}k=Pi,Pi=E,k!==null&&(Pi===null?Pi=k:Pi.push.apply(Pi,k))}E=V}if(k=!1,E!==2)continue}}if(E===1){Ff(l,0),lc(l,d,0,!0);break}e:{switch(y=l,k=E,k){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:lc(y,d,Ji,!ic);break e;case 2:Pi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=ib+300-it(),10<E)){if(lc(y,d,Ji,!ic),ba(y,0,!0)!==0)break e;Ho=d,y.timeoutHandle=e4(Ez.bind(null,y,p,Pi,sb,hT,d,Ji,Bu,Vf,ic,k,"Throttled",-0,0),E);break e}Ez(y,p,Pi,sb,hT,d,Ji,Bu,Vf,ic,k,null,-0,0)}}break}while(!0);Xs(l)}function Ez(l,d,p,y,E,k,V,q,ie,ve,Te,Ce,be,we){if(l.timeoutHandle=-1,Ce=d.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},mz(d,k,Ce);var $e=(k&62914560)===k?ib-it():(k&4194048)===k?xz-it():0;if($e=Fte(Ce,$e),$e!==null){Ho=k,l.cancelPendingCommit=$e(Dz.bind(null,l,d,k,p,y,E,V,q,ie,Te,Ce,null,be,we)),lc(l,k,V,!ve);return}}Dz(l,d,k,p,y,E,V,q,ie)}function rte(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],k=E.getSnapshot;E=E.value;try{if(!Wi(k(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function lc(l,d,p,y){d&=~fT,d&=~Bu,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var E=d;0<E;){var k=31-zt(E),V=1<<k;y[k]=-1,E&=~V}p!==0&&gu(l,p,d)}function ob(){return(Vt&6)===0?(Gg(0),!1):!0}function vT(){if(xt!==null){if($t===0)var l=xt.return;else l=xt,Mo=Nu=null,OE(l),Nf=null,kg=0,l=xt;for(;l!==null;)tz(l.alternate,l),l=l.return;xt=null}}function Ff(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,Ste(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Ho=0,vT(),rn=l,xt=p=Oo(l.current,null),Et=d,$t=0,Zi=null,ic=!1,Lf=ci(l,d),dT=!1,Vf=Ji=fT=Bu=ac=On=0,Pi=$g=null,hT=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var E=31-zt(y),k=1<<E;d|=l[E],y&=~k}return Go=d,Cy(),p}function Tz(l,d){dt=null,G.H=Mg,d===Pf||d===jy?(d=FM(),$t=3):d===wE?(d=FM(),$t=4):$t=d===YE?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Zi=d,xt===null&&(On=1,Xy(l,Ta(d,l.current)))}function Az(){var l=Xi.current;return l===null?!0:(Et&4194048)===Et?Ia===null:(Et&62914560)===Et||(Et&536870912)!==0?l===Ia:!1}function kz(){var l=G.H;return G.H=Mg,l===null?Mg:l}function Cz(){var l=G.A;return G.A=tte,l}function lb(){On=4,ic||(Et&4194048)!==Et&&Xi.current!==null||(Lf=!0),(ac&134217727)===0&&(Bu&134217727)===0||rn===null||lc(rn,Et,Ji,!1)}function yT(l,d,p){var y=Vt;Vt|=2;var E=kz(),k=Cz();(rn!==l||Et!==d)&&(sb=null,Ff(l,d)),d=!1;var V=On;e:do try{if($t!==0&&xt!==null){var q=xt,ie=Zi;switch($t){case 8:vT(),V=6;break e;case 3:case 2:case 9:case 6:Xi.current===null&&(d=!0);var ve=$t;if($t=0,Zi=null,Uf(l,q,ie,ve),p&&Lf){V=0;break e}break;default:ve=$t,$t=0,Zi=null,Uf(l,q,ie,ve)}}ite(),V=On;break}catch(Te){Tz(l,Te)}while(!0);return d&&l.shellSuspendCounter++,Mo=Nu=null,Vt=y,G.H=E,G.A=k,xt===null&&(rn=null,Et=0,Cy()),V}function ite(){for(;xt!==null;)Iz(xt)}function ate(l,d){var p=Vt;Vt|=2;var y=kz(),E=Cz();rn!==l||Et!==d?(sb=null,ab=it()+500,Ff(l,d)):Lf=ci(l,d);e:do try{if($t!==0&&xt!==null){d=xt;var k=Zi;t:switch($t){case 1:$t=0,Zi=null,Uf(l,d,k,1);break;case 2:case 9:if(VM(k)){$t=0,Zi=null,Pz(d);break}d=function(){$t!==2&&$t!==9||rn!==l||($t=7),Xs(l)},k.then(d,d);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:VM(k)?($t=0,Zi=null,Pz(d)):($t=0,Zi=null,Uf(l,d,k,7));break;case 5:var V=null;switch(xt.tag){case 26:V=xt.memoizedState;case 5:case 27:var q=xt;if(V?g4(V):q.stateNode.complete){$t=0,Zi=null;var ie=q.sibling;if(ie!==null)xt=ie;else{var ve=q.return;ve!==null?(xt=ve,cb(ve)):xt=null}break t}}$t=0,Zi=null,Uf(l,d,k,5);break;case 6:$t=0,Zi=null,Uf(l,d,k,6);break;case 8:vT(),On=6;break e;default:throw Error(r(462))}}ste();break}catch(Te){Tz(l,Te)}while(!0);return Mo=Nu=null,G.H=y,G.A=E,Vt=p,xt!==null?0:(rn=null,Et=0,Cy(),On)}function ste(){for(;xt!==null&&!Nt();)Iz(xt)}function Iz(l){var d=Jj(l.alternate,l,Go);l.memoizedProps=l.pendingProps,d===null?cb(l):xt=d}function Pz(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=Kj(p,d,d.pendingProps,d.type,void 0,Et);break;case 11:d=Kj(p,d,d.pendingProps,d.type.render,d.ref,Et);break;case 5:OE(d);default:tz(p,d),d=xt=CM(d,Go),d=Jj(p,d,Go)}l.memoizedProps=l.pendingProps,d===null?cb(l):xt=d}function Uf(l,d,p,y){Mo=Nu=null,OE(d),Nf=null,kg=0;var E=d.return;try{if(Wee(l,E,d,p,Et)){On=1,Xy(l,Ta(p,l.current)),xt=null;return}}catch(k){if(E!==null)throw xt=E,k;On=1,Xy(l,Ta(p,l.current)),xt=null;return}d.flags&32768?(Ct||y===1?l=!0:Lf||(Et&536870912)!==0?l=!1:(ic=l=!0,(y===2||y===9||y===3||y===6)&&(y=Xi.current,y!==null&&y.tag===13&&(y.flags|=16384))),Nz(d,l)):cb(d)}function cb(l){var d=l;do{if((d.flags&32768)!==0){Nz(d,ic);return}l=d.return;var p=Qee(d.alternate,d,Go);if(p!==null){xt=p;return}if(d=d.sibling,d!==null){xt=d;return}xt=d=l}while(d!==null);On===0&&(On=5)}function Nz(l,d){do{var p=Zee(l.alternate,l);if(p!==null){p.flags&=32767,xt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){xt=l;return}xt=l=p}while(l!==null);On=6,xt=null}function Dz(l,d,p,y,E,k,V,q,ie){l.cancelPendingCommit=null;do ub();while(dr!==0);if((Vt&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(k=d.lanes|d.childLanes,k|=sE,QS(l,p,k,V,q,ie),l===rn&&(xt=rn=null,Et=0),Bf=d,oc=l,Ho=p,pT=k,gT=E,wz=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,ute(Vn,function(){return zz(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=G.T,G.T=null,E=Y.p,Y.p=2,V=Vt,Vt|=4;try{Jee(l,d,p)}finally{Vt=V,Y.p=E,G.T=y}}dr=1,Oz(),Rz(),Mz()}}function Oz(){if(dr===1){dr=0;var l=oc,d=Bf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=G.T,G.T=null;var y=Y.p;Y.p=2;var E=Vt;Vt|=4;try{hz(d,l);var k=PT,V=bM(l.containerInfo),q=k.focusedElem,ie=k.selectionRange;if(V!==q&&q&&q.ownerDocument&&yM(q.ownerDocument.documentElement,q)){if(ie!==null&&tE(q)){var ve=ie.start,Te=ie.end;if(Te===void 0&&(Te=ve),"selectionStart"in q)q.selectionStart=ve,q.selectionEnd=Math.min(Te,q.value.length);else{var Ce=q.ownerDocument||document,be=Ce&&Ce.defaultView||window;if(be.getSelection){var we=be.getSelection(),$e=q.textContent.length,rt=Math.min(ie.start,$e),Zt=ie.end===void 0?rt:Math.min(ie.end,$e);!we.extend&&rt>Zt&&(V=Zt,Zt=rt,rt=V);var de=vM(q,rt),ce=vM(q,Zt);if(de&&ce&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ce.node||we.focusOffset!==ce.offset)){var me=Ce.createRange();me.setStart(de.node,de.offset),we.removeAllRanges(),rt>Zt?(we.addRange(me),we.extend(ce.node,ce.offset)):(me.setEnd(ce.node,ce.offset),we.addRange(me))}}}}for(Ce=[],we=q;we=we.parentNode;)we.nodeType===1&&Ce.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Ce.length;q++){var ke=Ce[q];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}_b=!!IT,PT=IT=null}finally{Vt=E,Y.p=y,G.T=p}}l.current=d,dr=2}}function Rz(){if(dr===2){dr=0;var l=oc,d=Bf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=G.T,G.T=null;var y=Y.p;Y.p=2;var E=Vt;Vt|=4;try{lz(l,d.alternate,d)}finally{Vt=E,Y.p=y,G.T=p}}dr=3}}function Mz(){if(dr===4||dr===3){dr=0,St();var l=oc,d=Bf,p=Ho,y=wz;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?dr=5:(dr=0,Bf=oc=null,jz(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(sc=null),Io(p),d=d.stateNode,Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Xr,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=G.T,E=Y.p,Y.p=2,G.T=null;try{for(var k=l.onRecoverableError,V=0;V<y.length;V++){var q=y[V];k(q.value,{componentStack:q.stack})}}finally{G.T=d,Y.p=E}}(Ho&3)!==0&&ub(),Xs(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===mT?qg++:(qg=0,mT=l):qg=0,Gg(0)}}function jz(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Tg(d)))}function ub(){return Oz(),Rz(),Mz(),zz()}function zz(){if(dr!==5)return!1;var l=oc,d=pT;pT=0;var p=Io(Ho),y=G.T,E=Y.p;try{Y.p=32>p?32:p,G.T=null,p=gT,gT=null;var k=oc,V=Ho;if(dr=0,Bf=oc=null,Ho=0,(Vt&6)!==0)throw Error(r(331));var q=Vt;if(Vt|=4,yz(k.current),gz(k,k.current,V,p),Vt=q,Gg(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Xr,k)}catch{}return!0}finally{Y.p=E,G.T=y,jz(l,d)}}function Lz(l,d,p){d=Ta(p,d),d=WE(l.stateNode,d,2),l=ec(l,d,2),l!==null&&(pu(l,2),Xs(l))}function qt(l,d,p){if(l.tag===3)Lz(l,l,p);else for(;d!==null;){if(d.tag===3){Lz(d,l,p);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(sc===null||!sc.has(y))){l=Ta(p,l),p=Vj(2),y=ec(d,p,2),y!==null&&(Bj(p,y,d,l),pu(y,2),Xs(y));break}}d=d.return}}function bT(l,d,p){var y=l.pingCache;if(y===null){y=l.pingCache=new nte;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(p)||(dT=!0,E.add(p),l=ote.bind(null,l,d,p),d.then(l,l))}function ote(l,d,p){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,rn===l&&(Et&p)===p&&(On===4||On===3&&(Et&62914560)===Et&&300>it()-ib?(Vt&2)===0&&Ff(l,0):fT|=p,Vf===Et&&(Vf=0)),Xs(l)}function Vz(l,d){d===0&&(d=sy()),l=Cu(l,d),l!==null&&(pu(l,d),Xs(l))}function lte(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),Vz(l,p)}function cte(l,d){var p=0;switch(l.tag){case 31:case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),Vz(l,p)}function ute(l,d){return je(l,d)}var db=null,$f=null,xT=!1,fb=!1,wT=!1,cc=0;function Xs(l){l!==$f&&l.next===null&&($f===null?db=$f=l:$f=$f.next=l),fb=!0,xT||(xT=!0,fte())}function Gg(l,d){if(!wT&&fb){wT=!0;do for(var p=!1,y=db;y!==null;){if(l!==0){var E=y.pendingLanes;if(E===0)var k=0;else{var V=y.suspendedLanes,q=y.pingedLanes;k=(1<<31-zt(42|l)+1)-1,k&=E&~(V&~q),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(p=!0,$z(y,k))}else k=Et,k=ba(y,y===rn?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||ci(y,k)||(p=!0,$z(y,k));y=y.next}while(p);wT=!1}}function dte(){Bz()}function Bz(){fb=xT=!1;var l=0;cc!==0&&_te()&&(l=cc);for(var d=it(),p=null,y=db;y!==null;){var E=y.next,k=Fz(y,d);k===0?(y.next=null,p===null?db=E:p.next=E,E===null&&($f=p)):(p=y,(l!==0||(k&3)!==0)&&(fb=!0)),y=E}dr!==0&&dr!==5||Gg(l),cc!==0&&(cc=0)}function Fz(l,d){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,k=l.pendingLanes&-62914561;0<k;){var V=31-zt(k),q=1<<V,ie=E[V];ie===-1?((q&p)===0||(q&y)!==0)&&(E[V]=XS(q,d)):ie<=d&&(l.expiredLanes|=q),k&=~q}if(d=rn,p=Et,p=ba(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===d&&($t===2||$t===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&gt(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||ci(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(y!==null&&gt(y),Io(p)){case 2:case 8:p=ct;break;case 32:p=Vn;break;case 268435456:p=jr;break;default:p=Vn}return y=Uz.bind(null,l),p=je(p,y),l.callbackPriority=d,l.callbackNode=p,d}return y!==null&&y!==null&&gt(y),l.callbackPriority=2,l.callbackNode=null,2}function Uz(l,d){if(dr!==0&&dr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(ub()&&l.callbackNode!==p)return null;var y=Et;return y=ba(l,l===rn?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(Sz(l,y,d),Fz(l,it()),l.callbackNode!=null&&l.callbackNode===p?Uz.bind(null,l):null)}function $z(l,d){if(ub())return null;Sz(l,d,!0)}function fte(){Ete(function(){(Vt&6)!==0?je(_n,dte):Bz()})}function _T(){if(cc===0){var l=Cf;l===0&&(l=bt,bt<<=1,(bt&261888)===0&&(bt=256)),cc=l}return cc}function qz(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:hf(""+l)}function Gz(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function hte(l,d,p,y,E){if(d==="submit"&&p&&p.stateNode===E){var k=qz((E[Tr]||null).action),V=y.submitter;V&&(d=(d=V[Tr]||null)?qz(d.formAction):V.getAttribute("formAction"),d!==null&&(k=d,V=null));var q=new $s("action","action",null,y,E);l.push({event:q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(cc!==0){var ie=V?Gz(E,V):new FormData(E);UE(p,{pending:!0,data:ie,method:E.method,action:k},null,ie)}}else typeof k=="function"&&(q.preventDefault(),ie=V?Gz(E,V):new FormData(E),UE(p,{pending:!0,data:ie,method:E.method,action:k},k,ie))},currentTarget:E}]})}}for(var ST=0;ST<aE.length;ST++){var ET=aE[ST],pte=ET.toLowerCase(),gte=ET[0].toUpperCase()+ET.slice(1);os(pte,"on"+gte)}os(_M,"onAnimationEnd"),os(SM,"onAnimationIteration"),os(EM,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(Nee,"onTransitionRun"),os(Dee,"onTransitionStart"),os(Oee,"onTransitionCancel"),os(TM,"onTransitionEnd"),Vs("onMouseEnter",["mouseout","mouseover"]),Vs("onMouseLeave",["mouseout","mouseover"]),Vs("onPointerEnter",["pointerout","pointerover"]),Vs("onPointerLeave",["pointerout","pointerover"]),Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hg));function Hz(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],E=y.event;y=y.listeners;e:{var k=void 0;if(d)for(var V=y.length-1;0<=V;V--){var q=y[V],ie=q.instance,ve=q.currentTarget;if(q=q.listener,ie!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ve;try{k(E)}catch(Te){ky(Te)}E.currentTarget=null,k=ie}else for(V=0;V<y.length;V++){if(q=y[V],ie=q.instance,ve=q.currentTarget,q=q.listener,ie!==k&&E.isPropagationStopped())break e;k=q,E.currentTarget=ve;try{k(E)}catch(Te){ky(Te)}E.currentTarget=null,k=ie}}}}function wt(l,d){var p=d[lf];p===void 0&&(p=d[lf]=new Set);var y=l+"__bubble";p.has(y)||(Kz(d,l,2,!1),p.add(y))}function TT(l,d,p){var y=0;d&&(y|=4),Kz(p,l,y,d)}var hb="_reactListening"+Math.random().toString(36).slice(2);function AT(l){if(!l[hb]){l[hb]=!0,ig.forEach(function(p){p!=="selectionchange"&&(mte.has(p)||TT(p,!1,l),TT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[hb]||(d[hb]=!0,TT("selectionchange",!1,d))}}function Kz(l,d,p,y){switch(_4(d)){case 2:var E=qte;break;case 8:E=Gte;break;default:E=FT}p=E.bind(null,d,p,l),E=void 0,!xu||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function kT(l,d,p,y,E){var k=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var V=y.tag;if(V===3||V===4){var q=y.stateNode.containerInfo;if(q===E)break;if(V===4)for(V=y.return;V!==null;){var ie=V.tag;if((ie===3||ie===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;q!==null;){if(V=js(q),V===null)return;if(ie=V.tag,ie===5||ie===6||ie===26||ie===27){y=k=V;continue e}q=q.parentNode}}y=y.return}ql(function(){var ve=k,Te=wa(p),Ce=[];e:{var be=AM.get(l);if(be!==void 0){var we=$s,$e=l;switch(l){case"keypress":if(_u(p)===0)break e;case"keydown":case"keyup":we=Ey;break;case"focusin":$e="focus",we=Eu;break;case"focusout":$e="blur",we=Eu;break;case"beforeblur":case"afterblur":we=Eu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=vg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=gy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=M;break;case _M:case SM:case EM:we=vy;break;case TM:we=H;break;case"scroll":case"scrollend":we=mg;break;case"wheel":we=xe;break;case"copy":case"cut":case"paste":we=yy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Do;break;case"toggle":case"beforetoggle":we=ut}var rt=(d&4)!==0,Zt=!rt&&(l==="scroll"||l==="scrollend"),de=rt?be!==null?be+"Capture":null:be;rt=[];for(var ce=ve,me;ce!==null;){var ke=ce;if(me=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||me===null||de===null||(ke=rs(ce,de),ke!=null&&rt.push(Kg(ce,ke,me))),Zt)break;ce=ce.return}0<rt.length&&(be=new we(be,$e,null,p,Te),Ce.push({event:be,listeners:rt}))}}if((d&7)===0){e:{if(be=l==="mouseover"||l==="pointerover",we=l==="mouseout"||l==="pointerout",be&&p!==hg&&($e=p.relatedTarget||p.fromElement)&&(js($e)||$e[Rs]))break e;if((we||be)&&(be=Te.window===Te?Te:(be=Te.ownerDocument)?be.defaultView||be.parentWindow:window,we?($e=p.relatedTarget||p.toElement,we=ve,$e=$e?js($e):null,$e!==null&&(Zt=a($e),rt=$e.tag,$e!==Zt||rt!==5&&rt!==27&&rt!==6)&&($e=null)):(we=null,$e=ve),we!==$e)){if(rt=vg,ke="onMouseLeave",de="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(rt=Do,ke="onPointerLeave",de="onPointerEnter",ce="pointer"),Zt=we==null?be:Hi(we),me=$e==null?be:Hi($e),be=new rt(ke,ce+"leave",we,p,Te),be.target=Zt,be.relatedTarget=me,ke=null,js(Te)===ve&&(rt=new rt(de,ce+"enter",$e,p,Te),rt.target=me,rt.relatedTarget=Zt,ke=rt),Zt=ke,we&&$e)t:{for(rt=vte,de=we,ce=$e,me=0,ke=de;ke;ke=rt(ke))me++;ke=0;for(var Xe=ce;Xe;Xe=rt(Xe))ke++;for(;0<me-ke;)de=rt(de),me--;for(;0<ke-me;)ce=rt(ce),ke--;for(;me--;){if(de===ce||ce!==null&&de===ce.alternate){rt=de;break t}de=rt(de),ce=rt(ce)}rt=null}else rt=null;we!==null&&Wz(Ce,be,we,rt,!1),$e!==null&&Zt!==null&&Wz(Ce,Zt,$e,rt,!0)}}e:{if(be=ve?Hi(ve):window,we=be.nodeName&&be.nodeName.toLowerCase(),we==="select"||we==="input"&&be.type==="file")var Dt=dM;else if(cM(be))if(fM)Dt=Cee;else{Dt=Aee;var He=Tee}else we=be.nodeName,!we||we.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?ve&&ff(ve.elementType)&&(Dt=dM):Dt=kee;if(Dt&&(Dt=Dt(l,ve))){uM(Ce,Dt,p,Te);break e}He&&He(l,be,ve),l==="focusout"&&ve&&be.type==="number"&&ve.memoizedProps.value!=null&&ug(be,"number",be.value)}switch(He=ve?Hi(ve):window,l){case"focusin":(cM(He)||He.contentEditable==="true")&&(xf=He,nE=ve,_g=null);break;case"focusout":_g=nE=xf=null;break;case"mousedown":rE=!0;break;case"contextmenu":case"mouseup":case"dragend":rE=!1,xM(Ce,p,Te);break;case"selectionchange":if(Pee)break;case"keydown":case"keyup":xM(Ce,p,Te)}var ht;if(Lt)e:{switch(l){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else bf?Tu(l,p)&&(Tt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Tt="onCompositionStart");Tt&&(Hs&&p.locale!=="ko"&&(bf||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&bf&&(ht=gg()):(Us=Te,pg="value"in Us?Us.value:Us.textContent,bf=!0)),He=pb(ve,Tt),0<He.length&&(Tt=new Gs(Tt,l,null,p,Te),Ce.push({event:Tt,listeners:He}),ht?Tt.data=ht:(ht=yf(p),ht!==null&&(Tt.data=ht)))),(ht=Sa?wee(l,p):_ee(l,p))&&(Tt=pb(ve,"onBeforeInput"),0<Tt.length&&(He=new Gs("onBeforeInput","beforeinput",null,p,Te),Ce.push({event:He,listeners:Tt}),He.data=ht)),hte(Ce,l,ve,p,Te)}Hz(Ce,d)})}function Kg(l,d,p){return{instance:l,listener:d,currentTarget:p}}function pb(l,d){for(var p=d+"Capture",y=[];l!==null;){var E=l,k=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||k===null||(E=rs(l,p),E!=null&&y.unshift(Kg(l,E,k)),E=rs(l,d),E!=null&&y.push(Kg(l,E,k))),l.tag===3)return y;l=l.return}return[]}function vte(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Wz(l,d,p,y,E){for(var k=d._reactName,V=[];p!==null&&p!==y;){var q=p,ie=q.alternate,ve=q.stateNode;if(q=q.tag,ie!==null&&ie===y)break;q!==5&&q!==26&&q!==27||ve===null||(ie=ve,E?(ve=rs(p,k),ve!=null&&V.unshift(Kg(p,ve,ie))):E||(ve=rs(p,k),ve!=null&&V.push(Kg(p,ve,ie)))),p=p.return}V.length!==0&&l.push({event:d,listeners:V})}var yte=/\r\n?/g,bte=/\u0000|\uFFFD/g;function Yz(l){return(typeof l=="string"?l:""+l).replace(yte,`
`).replace(bte,"")}function Xz(l,d){return d=Yz(d),Yz(l)===d}function Qt(l,d,p,y,E,k){switch(p){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||Ai(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&Ai(l,""+y);break;case"className":Ki(l,"class",y);break;case"tabIndex":Ki(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Ki(l,p,y);break;case"style":fg(l,y,k);break;case"data":if(d!=="object"){Ki(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=hf(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(p==="formAction"?(d!=="input"&&Qt(l,d,"name",E.name,E,null),Qt(l,d,"formEncType",E.formEncType,E,null),Qt(l,d,"formMethod",E.formMethod,E,null),Qt(l,d,"formTarget",E.formTarget,E,null)):(Qt(l,d,"encType",E.encType,E,null),Qt(l,d,"method",E.method,E,null),Qt(l,d,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=hf(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=ns);break;case"onScroll":y!=null&&wt("scroll",l);break;case"onScrollEnd":y!=null&&wt("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=hf(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":wt("beforetoggle",l),wt("toggle",l),uf(l,"popover",y);break;case"xlinkActuate":Qn(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Qn(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Qn(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Qn(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Qn(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Qn(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Qn(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Qn(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Qn(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":uf(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=py.get(p)||p,uf(l,p,y))}}function CT(l,d,p,y,E,k){switch(p){case"style":fg(l,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Ai(l,y):(typeof y=="number"||typeof y=="bigint")&&Ai(l,""+y);break;case"onScroll":y!=null&&wt("scroll",l);break;case"onScrollEnd":y!=null&&wt("scrollend",l);break;case"onClick":y!=null&&(l.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ag.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),k=l[Tr]||null,k=k!=null?k[p]:null,typeof k=="function"&&l.removeEventListener(d,k,E),typeof y=="function")){typeof k!="function"&&k!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,y,E);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):uf(l,p,y)}}}function Fr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wt("error",l),wt("load",l);var y=!1,E=!1,k;for(k in p)if(p.hasOwnProperty(k)){var V=p[k];if(V!=null)switch(k){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Qt(l,d,k,V,p,null)}}E&&Qt(l,d,"srcSet",p.srcSet,p,null),y&&Qt(l,d,"src",p.src,p,null);return;case"input":wt("invalid",l);var q=k=V=E=null,ie=null,ve=null;for(y in p)if(p.hasOwnProperty(y)){var Te=p[y];if(Te!=null)switch(y){case"name":E=Te;break;case"type":V=Te;break;case"checked":ie=Te;break;case"defaultChecked":ve=Te;break;case"value":k=Te;break;case"defaultValue":q=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,d));break;default:Qt(l,d,y,Te,p,null)}}dy(l,k,q,ie,ve,V,E,!1);return;case"select":wt("invalid",l),y=V=k=null;for(E in p)if(p.hasOwnProperty(E)&&(q=p[E],q!=null))switch(E){case"value":k=q;break;case"defaultValue":V=q;break;case"multiple":y=q;default:Qt(l,d,E,q,p,null)}d=k,p=V,l.multiple=!!y,d!=null?Bl(l,!!y,d,!1):p!=null&&Bl(l,!!y,p,!0);return;case"textarea":wt("invalid",l),k=E=y=null;for(V in p)if(p.hasOwnProperty(V)&&(q=p[V],q!=null))switch(V){case"value":y=q;break;case"defaultValue":E=q;break;case"children":k=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Qt(l,d,V,q,p,null)}Fl(l,y,E,k);return;case"option":for(ie in p)if(p.hasOwnProperty(ie)&&(y=p[ie],y!=null))switch(ie){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Qt(l,d,ie,y,p,null)}return;case"dialog":wt("beforetoggle",l),wt("toggle",l),wt("cancel",l),wt("close",l);break;case"iframe":case"object":wt("load",l);break;case"video":case"audio":for(y=0;y<Hg.length;y++)wt(Hg[y],l);break;case"image":wt("error",l),wt("load",l);break;case"details":wt("toggle",l);break;case"embed":case"source":case"link":wt("error",l),wt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in p)if(p.hasOwnProperty(ve)&&(y=p[ve],y!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Qt(l,d,ve,y,p,null)}return;default:if(ff(d)){for(Te in p)p.hasOwnProperty(Te)&&(y=p[Te],y!==void 0&&CT(l,d,Te,y,p,void 0));return}}for(q in p)p.hasOwnProperty(q)&&(y=p[q],y!=null&&Qt(l,d,q,y,p,null))}function xte(l,d,p,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,k=null,V=null,q=null,ie=null,ve=null,Te=null;for(we in p){var Ce=p[we];if(p.hasOwnProperty(we)&&Ce!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ie=Ce;default:y.hasOwnProperty(we)||Qt(l,d,we,null,y,Ce)}}for(var be in y){var we=y[be];if(Ce=p[be],y.hasOwnProperty(be)&&(we!=null||Ce!=null))switch(be){case"type":k=we;break;case"name":E=we;break;case"checked":ve=we;break;case"defaultChecked":Te=we;break;case"value":V=we;break;case"defaultValue":q=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,d));break;default:we!==Ce&&Qt(l,d,be,we,y,Ce)}}df(l,V,q,ie,ve,Te,k,E);return;case"select":we=V=q=be=null;for(k in p)if(ie=p[k],p.hasOwnProperty(k)&&ie!=null)switch(k){case"value":break;case"multiple":we=ie;default:y.hasOwnProperty(k)||Qt(l,d,k,null,y,ie)}for(E in y)if(k=y[E],ie=p[E],y.hasOwnProperty(E)&&(k!=null||ie!=null))switch(E){case"value":be=k;break;case"defaultValue":q=k;break;case"multiple":V=k;default:k!==ie&&Qt(l,d,E,k,y,ie)}d=q,p=V,y=we,be!=null?Bl(l,!!p,be,!1):!!y!=!!p&&(d!=null?Bl(l,!!p,d,!0):Bl(l,!!p,p?[]:"",!1));return;case"textarea":we=be=null;for(q in p)if(E=p[q],p.hasOwnProperty(q)&&E!=null&&!y.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Qt(l,d,q,null,y,E)}for(V in y)if(E=y[V],k=p[V],y.hasOwnProperty(V)&&(E!=null||k!=null))switch(V){case"value":be=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==k&&Qt(l,d,V,E,y,k)}fy(l,be,we);return;case"option":for(var $e in p)if(be=p[$e],p.hasOwnProperty($e)&&be!=null&&!y.hasOwnProperty($e))switch($e){case"selected":l.selected=!1;break;default:Qt(l,d,$e,null,y,be)}for(ie in y)if(be=y[ie],we=p[ie],y.hasOwnProperty(ie)&&be!==we&&(be!=null||we!=null))switch(ie){case"selected":l.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:Qt(l,d,ie,be,y,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in p)be=p[rt],p.hasOwnProperty(rt)&&be!=null&&!y.hasOwnProperty(rt)&&Qt(l,d,rt,null,y,be);for(ve in y)if(be=y[ve],we=p[ve],y.hasOwnProperty(ve)&&be!==we&&(be!=null||we!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,d));break;default:Qt(l,d,ve,be,y,we)}return;default:if(ff(d)){for(var Zt in p)be=p[Zt],p.hasOwnProperty(Zt)&&be!==void 0&&!y.hasOwnProperty(Zt)&&CT(l,d,Zt,void 0,y,be);for(Te in y)be=y[Te],we=p[Te],!y.hasOwnProperty(Te)||be===we||be===void 0&&we===void 0||CT(l,d,Te,be,y,we);return}}for(var de in p)be=p[de],p.hasOwnProperty(de)&&be!=null&&!y.hasOwnProperty(de)&&Qt(l,d,de,null,y,be);for(Ce in y)be=y[Ce],we=p[Ce],!y.hasOwnProperty(Ce)||be===we||be==null&&we==null||Qt(l,d,Ce,be,y,we)}function Qz(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wte(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],k=E.transferSize,V=E.initiatorType,q=E.duration;if(k&&q&&Qz(V)){for(V=0,q=E.responseEnd,y+=1;y<p.length;y++){var ie=p[y],ve=ie.startTime;if(ve>q)break;var Te=ie.transferSize,Ce=ie.initiatorType;Te&&Qz(Ce)&&(ie=ie.responseEnd,V+=Te*(ie<q?1:(q-ve)/(ie-ve)))}if(--y,d+=8*(k+V)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var IT=null,PT=null;function gb(l){return l.nodeType===9?l:l.ownerDocument}function Zz(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jz(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function NT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var DT=null;function _te(){var l=window.event;return l&&l.type==="popstate"?l===DT?!1:(DT=l,!0):(DT=null,!1)}var e4=typeof setTimeout=="function"?setTimeout:void 0,Ste=typeof clearTimeout=="function"?clearTimeout:void 0,t4=typeof Promise=="function"?Promise:void 0,Ete=typeof queueMicrotask=="function"?queueMicrotask:typeof t4<"u"?function(l){return t4.resolve(null).then(l).catch(Tte)}:e4;function Tte(l){setTimeout(function(){throw l})}function uc(l){return l==="head"}function n4(l,d){var p=d,y=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){l.removeChild(E),Kf(d);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")Wg(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,Wg(p);for(var k=p.firstChild;k;){var V=k.nextSibling,q=k.nodeName;k[Ms]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&k.rel.toLowerCase()==="stylesheet"||p.removeChild(k),k=V}}else p==="body"&&Wg(l.ownerDocument.body);p=E}while(p);Kf(d)}function r4(l,d){var p=l;l=0;do{var y=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=y}while(p)}function OT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":OT(p),cf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function Ate(l,d,p,y){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Ms])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(k=l.getAttribute("rel"),k==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(k!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(k=l.getAttribute("src"),(k!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&k&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var k=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===k)return l}else return l;if(l=Pa(l.nextSibling),l===null)break}return null}function kte(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Pa(l.nextSibling),l===null))return null;return l}function i4(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Pa(l.nextSibling),l===null))return null;return l}function RT(l){return l.data==="$?"||l.data==="$~"}function MT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function Cte(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var y=function(){d(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Pa(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var jT=null;function a4(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Pa(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function s4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function o4(l,d,p){switch(d=gb(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Wg(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);cf(l)}var Na=new Map,l4=new Set;function mb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ko=Y.d;Y.d={f:Ite,r:Pte,D:Nte,C:Dte,L:Ote,m:Rte,X:jte,S:Mte,M:zte};function Ite(){var l=Ko.f(),d=ob();return l||d}function Pte(l){var d=xa(l);d!==null&&d.tag===5&&d.type==="form"?Tj(d):Ko.r(l)}var qf=typeof document>"u"?null:document;function c4(l,d,p){var y=qf;if(y&&typeof d=="string"&&d){var E=Ti(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),l4.has(E)||(l4.add(E),l={rel:l,crossOrigin:p,href:d},y.querySelector(E)===null&&(d=y.createElement("link"),Fr(d,"link",l),Xn(d),y.head.appendChild(d)))}}function Nte(l){Ko.D(l),c4("dns-prefetch",l,null)}function Dte(l,d){Ko.C(l,d),c4("preconnect",l,d)}function Ote(l,d,p){Ko.L(l,d,p);var y=qf;if(y&&l&&d){var E='link[rel="preload"][as="'+Ti(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ti(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ti(p.imageSizes)+'"]')):E+='[href="'+Ti(l)+'"]';var k=E;switch(d){case"style":k=Gf(l);break;case"script":k=Hf(l)}Na.has(k)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Na.set(k,l),y.querySelector(E)!==null||d==="style"&&y.querySelector(Yg(k))||d==="script"&&y.querySelector(Xg(k))||(d=y.createElement("link"),Fr(d,"link",l),Xn(d),y.head.appendChild(d)))}}function Rte(l,d){Ko.m(l,d);var p=qf;if(p&&l){var y=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+Ti(y)+'"][href="'+Ti(l)+'"]',k=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=Hf(l)}if(!Na.has(k)&&(l=h({rel:"modulepreload",href:l},d),Na.set(k,l),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Xg(k)))return}y=p.createElement("link"),Fr(y,"link",l),Xn(y),p.head.appendChild(y)}}}function Mte(l,d,p){Ko.S(l,d,p);var y=qf;if(y&&l){var E=zs(y).hoistableStyles,k=Gf(l);d=d||"default";var V=E.get(k);if(!V){var q={loading:0,preload:null};if(V=y.querySelector(Yg(k)))q.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Na.get(k))&&zT(l,p);var ie=V=y.createElement("link");Xn(ie),Fr(ie,"link",l),ie._p=new Promise(function(ve,Te){ie.onload=ve,ie.onerror=Te}),ie.addEventListener("load",function(){q.loading|=1}),ie.addEventListener("error",function(){q.loading|=2}),q.loading|=4,vb(V,d,y)}V={type:"stylesheet",instance:V,count:1,state:q},E.set(k,V)}}}function jte(l,d){Ko.X(l,d);var p=qf;if(p&&l){var y=zs(p).hoistableScripts,E=Hf(l),k=y.get(E);k||(k=p.querySelector(Xg(E)),k||(l=h({src:l,async:!0},d),(d=Na.get(E))&&LT(l,d),k=p.createElement("script"),Xn(k),Fr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function zte(l,d){Ko.M(l,d);var p=qf;if(p&&l){var y=zs(p).hoistableScripts,E=Hf(l),k=y.get(E);k||(k=p.querySelector(Xg(E)),k||(l=h({src:l,async:!0,type:"module"},d),(d=Na.get(E))&&LT(l,d),k=p.createElement("script"),Xn(k),Fr(k,"link",l),p.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(E,k))}}function u4(l,d,p,y){var E=(E=ne.current)?mb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=Gf(p.href),p=zs(E).hoistableStyles,y=p.get(d),y||(y={type:"style",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Gf(p.href);var k=zs(E).hoistableStyles,V=k.get(l);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(l,V),(k=E.querySelector(Yg(l)))&&!k._p&&(V.instance=k,V.state.loading=5),Na.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Na.set(l,p),k||Lte(E,l,p,V.state))),d&&y===null)throw Error(r(528,""));return V}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Hf(p),p=zs(E).hoistableScripts,y=p.get(d),y||(y={type:"script",instance:null,count:0,state:null},p.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Gf(l){return'href="'+Ti(l)+'"'}function Yg(l){return'link[rel="stylesheet"]['+l+"]"}function d4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function Lte(l,d,p,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),Fr(d,"link",p),Xn(d),l.head.appendChild(d))}function Hf(l){return'[src="'+Ti(l)+'"]'}function Xg(l){return"script[async]"+l}function f4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+Ti(p.href)+'"]');if(y)return d.instance=y,Xn(y),y;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Xn(y),Fr(y,"style",E),vb(y,p.precedence,l),d.instance=y;case"stylesheet":E=Gf(p.href);var k=l.querySelector(Yg(E));if(k)return d.state.loading|=4,d.instance=k,Xn(k),k;y=d4(p),(E=Na.get(E))&&zT(y,E),k=(l.ownerDocument||l).createElement("link"),Xn(k);var V=k;return V._p=new Promise(function(q,ie){V.onload=q,V.onerror=ie}),Fr(k,"link",y),d.state.loading|=4,vb(k,p.precedence,l),d.instance=k;case"script":return k=Hf(p.src),(E=l.querySelector(Xg(k)))?(d.instance=E,Xn(E),E):(y=p,(E=Na.get(k))&&(y=h({},p),LT(y,E)),l=l.ownerDocument||l,E=l.createElement("script"),Xn(E),Fr(E,"link",y),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,vb(y,p.precedence,l));return d.instance}function vb(l,d,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,k=E,V=0;V<y.length;V++){var q=y[V];if(q.dataset.precedence===d)k=q;else if(k!==E)break}k?k.parentNode.insertBefore(l,k.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function zT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function LT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var yb=null;function h4(l,d,p){if(yb===null){var y=new Map,E=yb=new Map;E.set(p,y)}else E=yb,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var k=p[E];if(!(k[Ms]||k[Yn]||l==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var V=k.getAttribute(d)||"";V=l+V;var q=y.get(V);q?q.push(k):y.set(V,[k])}}return y}function p4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function Vte(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function g4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function Bte(l,d,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=Gf(y.href),k=d.querySelector(Yg(E));if(k){d=k._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=bb.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=k,Xn(k);return}k=d.ownerDocument||d,y=d4(y),(E=Na.get(E))&&zT(y,E),k=k.createElement("link"),Xn(k);var V=k;V._p=new Promise(function(q,ie){V.onload=q,V.onerror=ie}),Fr(k,"link",y),p.instance=k}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=bb.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var VT=0;function Fte(l,d){return l.stylesheets&&l.count===0&&wb(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var y=setTimeout(function(){if(l.stylesheets&&wb(l,l.stylesheets),l.unsuspend){var k=l.unsuspend;l.unsuspend=null,k()}},6e4+d);0<l.imgBytes&&VT===0&&(VT=62500*wte());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&wb(l,l.stylesheets),l.unsuspend)){var k=l.unsuspend;l.unsuspend=null,k()}},(l.imgBytes>VT?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function bb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var xb=null;function wb(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,xb=new Map,d.forEach(Ute,l),xb=null,bb.call(l))}function Ute(l,d){if(!(d.state.loading&4)){var p=xb.get(l);if(p)var y=p.get(null);else{p=new Map,xb.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<E.length;k++){var V=E[k];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(p.set(V.dataset.precedence,V),y=V)}y&&p.set(null,y)}E=d.instance,V=E.getAttribute("data-precedence"),k=p.get(V)||y,k===y&&p.set(null,E),p.set(V,E),this.count++,y=bb.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),k?k.parentNode.insertBefore(E,k.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var Qg={$$typeof:I,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function $te(l,d,p,y,E,k,V,q,ie){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.hiddenUpdates=Os(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=k,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function m4(l,d,p,y,E,k,V,q,ie,ve,Te,Ce){return l=new $te(l,d,p,V,ie,ve,Te,Ce,q),d=1,k===!0&&(d|=24),k=Yi(3,null,null,d),l.current=k,k.stateNode=l,d=yE(),d.refCount++,l.pooledCache=d,d.refCount++,k.memoizedState={element:y,isDehydrated:p,cache:d},_E(k),l}function v4(l){return l?(l=Sf,l):Sf}function y4(l,d,p,y,E,k){E=v4(E),y.context===null?y.context=E:y.pendingContext=E,y=Jl(d),y.payload={element:p},k=k===void 0?null:k,k!==null&&(y.callback=k),p=ec(l,y,d),p!==null&&(Ni(p,l,d),Ig(p,l,d))}function b4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function BT(l,d){b4(l,d),(l=l.alternate)&&b4(l,d)}function x4(l){if(l.tag===13||l.tag===31){var d=Cu(l,67108864);d!==null&&Ni(d,l,67108864),BT(l,67108864)}}function w4(l){if(l.tag===13||l.tag===31){var d=ea();d=mu(d);var p=Cu(l,d);p!==null&&Ni(p,l,d),BT(l,d)}}var _b=!0;function qte(l,d,p,y){var E=G.T;G.T=null;var k=Y.p;try{Y.p=2,FT(l,d,p,y)}finally{Y.p=k,G.T=E}}function Gte(l,d,p,y){var E=G.T;G.T=null;var k=Y.p;try{Y.p=8,FT(l,d,p,y)}finally{Y.p=k,G.T=E}}function FT(l,d,p,y){if(_b){var E=UT(y);if(E===null)kT(l,d,y,Sb,p),S4(l,y);else if(Kte(E,l,d,p,y))y.stopPropagation();else if(S4(l,y),d&4&&-1<Hte.indexOf(l)){for(;E!==null;){var k=xa(E);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var V=Gi(k.pendingLanes);if(V!==0){var q=k;for(q.pendingLanes|=2,q.entangledLanes|=2;V;){var ie=1<<31-zt(V);q.entanglements[1]|=ie,V&=~ie}Xs(k),(Vt&6)===0&&(ab=it()+500,Gg(0))}}break;case 31:case 13:q=Cu(k,2),q!==null&&Ni(q,k,2),ob(),BT(k,2)}if(k=UT(y),k===null&&kT(l,d,y,Sb,p),k===E)break;E=k}E!==null&&y.stopPropagation()}else kT(l,d,y,null,p)}}function UT(l){return l=wa(l),$T(l)}var Sb=null;function $T(l){if(Sb=null,l=js(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Sb=l,null}function _4(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case _n:return 2;case ct:return 8;case Vn:case Sn:return 32;case jr:return 268435456;default:return 32}default:return 32}}var qT=!1,dc=null,fc=null,hc=null,Zg=new Map,Jg=new Map,pc=[],Hte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function S4(l,d){switch(l){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":fc=null;break;case"mouseover":case"mouseout":hc=null;break;case"pointerover":case"pointerout":Zg.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(d.pointerId)}}function em(l,d,p,y,E,k){return l===null||l.nativeEvent!==k?(l={blockedOn:d,domEventName:p,eventSystemFlags:y,nativeEvent:k,targetContainers:[E]},d!==null&&(d=xa(d),d!==null&&x4(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function Kte(l,d,p,y,E){switch(d){case"focusin":return dc=em(dc,l,d,p,y,E),!0;case"dragenter":return fc=em(fc,l,d,p,y,E),!0;case"mouseover":return hc=em(hc,l,d,p,y,E),!0;case"pointerover":var k=E.pointerId;return Zg.set(k,em(Zg.get(k)||null,l,d,p,y,E)),!0;case"gotpointercapture":return k=E.pointerId,Jg.set(k,em(Jg.get(k)||null,l,d,p,y,E)),!0}return!1}function E4(l){var d=js(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,es(l.priority,function(){w4(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,es(l.priority,function(){w4(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Eb(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=UT(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);hg=y,p.target.dispatchEvent(y),hg=null}else return d=xa(p),d!==null&&x4(d),l.blockedOn=p,!1;d.shift()}return!0}function T4(l,d,p){Eb(l)&&p.delete(d)}function Wte(){qT=!1,dc!==null&&Eb(dc)&&(dc=null),fc!==null&&Eb(fc)&&(fc=null),hc!==null&&Eb(hc)&&(hc=null),Zg.forEach(T4),Jg.forEach(T4)}function Tb(l,d){l.blockedOn===d&&(l.blockedOn=null,qT||(qT=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Wte)))}var Ab=null;function A4(l){Ab!==l&&(Ab=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ab===l&&(Ab=null);for(var d=0;d<l.length;d+=3){var p=l[d],y=l[d+1],E=l[d+2];if(typeof y!="function"){if($T(y||p)===null)continue;break}var k=xa(p);k!==null&&(l.splice(d,3),d-=3,UE(k,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function Kf(l){function d(ie){return Tb(ie,l)}dc!==null&&Tb(dc,l),fc!==null&&Tb(fc,l),hc!==null&&Tb(hc,l),Zg.forEach(d),Jg.forEach(d);for(var p=0;p<pc.length;p++){var y=pc[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<pc.length&&(p=pc[0],p.blockedOn===null);)E4(p),p.blockedOn===null&&pc.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],k=p[y+1],V=E[Tr]||null;if(typeof k=="function")V||A4(p);else if(V){var q=null;if(k&&k.hasAttribute("formAction")){if(E=k,V=k[Tr]||null)q=V.formAction;else if($T(E)!==null)continue}else q=V.action;typeof q=="function"?p[y+1]=q:(p.splice(y,3),y-=3),A4(p)}}}function k4(){function l(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function GT(l){this._internalRoot=l}kb.prototype.render=GT.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,y=ea();y4(p,y,l,d,null,null)},kb.prototype.unmount=GT.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;y4(l.current,2,null,l,null,null),ob(),d[Rs]=null}};function kb(l){this._internalRoot=l}kb.prototype.unstable_scheduleHydration=function(l){if(l){var d=oy();l={blockedOn:null,target:l,priority:d};for(var p=0;p<pc.length&&d!==0&&d<pc[p].priority;p++);pc.splice(p,0,l),p===0&&E4(l)}};var C4=e.version;if(C4!=="19.2.0")throw Error(r(527,C4,"19.2.0"));Y.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var Yte={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cb.isDisabled&&Cb.supportsFiber)try{Xr=Cb.inject(Yte),Nn=Cb}catch{}}return nm.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,y="",E=Mj,k=jj,V=zj;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(k=d.onCaughtError),d.onRecoverableError!==void 0&&(V=d.onRecoverableError)),d=m4(l,1,!1,null,null,p,y,null,E,k,V,k4),l[Rs]=d.current,AT(l),new GT(d)},nm.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var y=!1,E="",k=Mj,V=jj,q=zj,ie=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(k=p.onUncaughtError),p.onCaughtError!==void 0&&(V=p.onCaughtError),p.onRecoverableError!==void 0&&(q=p.onRecoverableError),p.formState!==void 0&&(ie=p.formState)),d=m4(l,1,!0,d,p??null,y,E,ie,k,V,q,k4),d.context=v4(null),p=d.current,y=ea(),y=mu(y),E=Jl(y),E.callback=null,ec(p,E,y),p=y,d.current.lanes=p,pu(d,p),Xs(d),l[Rs]=d.current,AT(l),new kb(d)},nm.version="19.2.0",nm}var L4;function sne(){if(L4)return WT.exports;L4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),WT.exports=ane(),WT.exports}var one=sne();const lne="modulepreload",cne=function(t){return"/personal-budget-pwa/"+t},V4={},Uh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=cne(u),u in V4)return;V4[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":lne,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function une(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await Uh(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const dne=()=>{};var B4={};const y$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},SN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,v=u&63;c||(v=64,s||(g=64)),r.push(n[f],n[h],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(y$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new hne;const g=a<<2|o>>4;if(r.push(g),u!==64){const v=o<<4&240|u>>2;if(r.push(v),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pne=function(t){const e=y$(t);return SN.encodeByteArray(e,!0)},b$=function(t){return pne(t).replace(/\./g,"")},x$=function(t){try{return SN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function EN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const gne=()=>EN().__FIREBASE_DEFAULTS__,mne=()=>{if(typeof process>"u"||typeof B4>"u")return;const t=B4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&x$(t[1]);return e&&JSON.parse(e)},Z1=()=>{try{return dne()||gne()||mne()||vne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w$=t=>Z1()?.emulatorHosts?.[t],yne=t=>{const e=w$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_$=()=>Z1()?.config,S$=t=>Z1()?.[`_${t}`];class av{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function ru(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TN(t){return(await fetch(t,{credentials:"include"})).ok}const jm={};function bne(){const t={prod:[],emulator:[]};for(const e of Object.keys(jm))jm[e]?t.emulator.push(e):t.prod.push(e);return t}function xne(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let F4=!1;function E$(t,e){if(typeof window>"u"||typeof document>"u"||!ru(window.location.host)||jm[t]===e||jm[t]||F4)return;jm[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=bne().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{F4=!0,s()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=xne(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;o(I),f(w,x);const O=u();c(T,S),I.append(T,b,w,O),document.body.appendChild(I)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function br(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function T$(){const t=Z1()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _ne(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sne(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ene(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tne(){const t=br();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A$(){return!T$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k$(){return!T$()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function J1(){try{return typeof indexedDB=="object"}catch{return!1}}function Ane(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const kne="FirebaseError";class Eo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kne,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cp.prototype.create)}}class Cp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?Cne(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Eo(i,o,r)}}function Cne(t,e){return t.replace(Ine,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Ine=/\{\$([^}]+)}/g;function Pne(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(U4(a)&&U4(s)){if(!qc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function U4(t){return t!==null&&typeof t=="object"}function t0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wm(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function _m(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Nne(t,e){const n=new Dne(t,e);return n.subscribe.bind(n)}class Dne{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");One(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ZT),i.error===void 0&&(i.error=ZT),i.complete===void 0&&(i.complete=ZT);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function One(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ZT(){}const Rne=1e3,Mne=2,jne=14400*1e3,zne=.5;function Lne(t,e=Rne,n=Mne){const r=e*Math.pow(n,t),i=Math.round(zne*r*(Math.random()-.5)*2);return Math.min(jne,r+i)}function Ft(t){return t&&t._delegate?t._delegate:t}let yo=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const Gu="[DEFAULT]";let Vne=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new av;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fne(e))try{this.getOrInitializeService({instanceIdentifier:Gu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Gu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gu){return this.instances.has(e)}getOptions(e=Gu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bne(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gu){return this.component?this.component.multipleInstances?e:Gu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Bne(t){return t===Gu?void 0:t}function Fne(t){return t.instantiationMode==="EAGER"}class Une{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vne(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const $ne={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},qne=At.INFO,Gne={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},Hne=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Gne[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e_{constructor(e){this.name=e,this._logLevel=qne,this._logHandler=Hne,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$ne[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}}const Kne=(t,e)=>e.some(n=>t instanceof n);let $4,q4;function Wne(){return $4||($4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Yne(){return q4||(q4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C$=new WeakMap,zC=new WeakMap,I$=new WeakMap,JT=new WeakMap,AN=new WeakMap;function Xne(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(zc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&C$.set(n,t)}).catch(()=>{}),AN.set(e,t),e}function Qne(t){if(zC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});zC.set(t,e)}let LC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||I$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Zne(t){LC=t(LC)}function Jne(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(eA(this),e,...n);return I$.set(r,e.sort?e.sort():[e]),zc(r)}:Yne().includes(t)?function(...e){return t.apply(eA(this),e),zc(C$.get(this))}:function(...e){return zc(t.apply(eA(this),e))}}function ere(t){return typeof t=="function"?Jne(t):(t instanceof IDBTransaction&&Qne(t),Kne(t,Wne())?new Proxy(t,LC):t)}function zc(t){if(t instanceof IDBRequest)return Xne(t);if(JT.has(t))return JT.get(t);const e=ere(t);return e!==t&&(JT.set(t,e),AN.set(e,t)),e}const eA=t=>AN.get(t);function tre(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=zc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(zc(s.result),c.oldVersion,c.newVersion,zc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const nre=["get","getKey","getAll","getAllKeys","count"],rre=["put","add","delete","clear"],tA=new Map;function G4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tA.get(e))return tA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nre.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return tA.set(e,a),a}Zne(t=>({...t,get:(e,n,r)=>G4(e,n)||t.get(e,n,r),has:(e,n)=>!!G4(e,n)||t.has(e,n)}));class ire{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(are(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function are(t){return t.getComponent()?.type==="VERSION"}const VC="@firebase/app",H4="0.14.6";const dl=new e_("@firebase/app"),sre="@firebase/app-compat",ore="@firebase/analytics-compat",lre="@firebase/analytics",cre="@firebase/app-check-compat",ure="@firebase/app-check",dre="@firebase/auth",fre="@firebase/auth-compat",hre="@firebase/database",pre="@firebase/data-connect",gre="@firebase/database-compat",mre="@firebase/functions",vre="@firebase/functions-compat",yre="@firebase/installations",bre="@firebase/installations-compat",xre="@firebase/messaging",wre="@firebase/messaging-compat",_re="@firebase/performance",Sre="@firebase/performance-compat",Ere="@firebase/remote-config",Tre="@firebase/remote-config-compat",Are="@firebase/storage",kre="@firebase/storage-compat",Cre="@firebase/firestore",Ire="@firebase/ai",Pre="@firebase/firestore-compat",Nre="firebase",Dre="12.6.0";const BC="[DEFAULT]",Ore={[VC]:"fire-core",[sre]:"fire-core-compat",[lre]:"fire-analytics",[ore]:"fire-analytics-compat",[ure]:"fire-app-check",[cre]:"fire-app-check-compat",[dre]:"fire-auth",[fre]:"fire-auth-compat",[hre]:"fire-rtdb",[pre]:"fire-data-connect",[gre]:"fire-rtdb-compat",[mre]:"fire-fn",[vre]:"fire-fn-compat",[yre]:"fire-iid",[bre]:"fire-iid-compat",[xre]:"fire-fcm",[wre]:"fire-fcm-compat",[_re]:"fire-perf",[Sre]:"fire-perf-compat",[Ere]:"fire-rc",[Tre]:"fire-rc-compat",[Are]:"fire-gcs",[kre]:"fire-gcs-compat",[Cre]:"fire-fst",[Pre]:"fire-fst-compat",[Ire]:"fire-vertex","fire-js":"fire-js",[Nre]:"fire-js-all"};const sw=new Map,Rre=new Map,FC=new Map;function K4(t,e){try{t.container.addComponent(e)}catch(n){dl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fl(t){const e=t.name;if(FC.has(e))return dl.debug(`There were multiple attempts to register component ${e}.`),!1;FC.set(e,t);for(const n of sw.values())K4(n,t);for(const n of Rre.values())K4(n,t);return!0}function Ip(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function oa(t){return t==null?!1:t.settings!==void 0}const Mre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lc=new Cp("app","Firebase",Mre);class jre{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lc.create("app-deleted",{appName:this._name})}}const Pp=Dre;function P$(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:BC,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Lc.create("bad-app-name",{appName:String(i)});if(n||(n=_$()),!n)throw Lc.create("no-options");const a=sw.get(i);if(a){if(qc(n,a.options)&&qc(r,a.config))return a;throw Lc.create("duplicate-app",{appName:i})}const s=new Une(i);for(const c of FC.values())s.addComponent(c);const o=new jre(n,r,s);return sw.set(i,o),o}function kN(t=BC){const e=sw.get(t);if(!e&&t===BC&&_$())return P$();if(!e)throw Lc.create("no-app",{appName:t});return e}function bs(t,e,n){let r=Ore[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dl.warn(s.join(" "));return}fl(new yo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const zre="firebase-heartbeat-database",Lre=1,sv="firebase-heartbeat-store";let nA=null;function N$(){return nA||(nA=tre(zre,Lre,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sv)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lc.create("idb-open",{originalErrorMessage:t.message})})),nA}async function Vre(t){try{const n=(await N$()).transaction(sv),r=await n.objectStore(sv).get(D$(t));return await n.done,r}catch(e){if(e instanceof Eo)dl.warn(e.message);else{const n=Lc.create("idb-get",{originalErrorMessage:e?.message});dl.warn(n.message)}}}async function W4(t,e){try{const r=(await N$()).transaction(sv,"readwrite");await r.objectStore(sv).put(e,D$(t)),await r.done}catch(n){if(n instanceof Eo)dl.warn(n.message);else{const r=Lc.create("idb-set",{originalErrorMessage:n?.message});dl.warn(r.message)}}}function D$(t){return`${t.name}!${t.options.appId}`}const Bre=1024,Fre=30;class Ure{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qre(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Y4();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Fre){const i=Gre(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Y4(),{heartbeatsToSend:n,unsentEntries:r}=$re(this._heartbeatsCache.heartbeats),i=b$(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return dl.warn(e),""}}}function Y4(){return new Date().toISOString().substring(0,10)}function $re(t,e=Bre){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),X4(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),X4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J1()?Ane().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Vre(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return W4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return W4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function X4(t){return b$(JSON.stringify({version:2,heartbeats:t})).length}function Gre(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Hre(t){fl(new yo("platform-logger",e=>new ire(e),"PRIVATE")),fl(new yo("heartbeat",e=>new Ure(e),"PRIVATE")),bs(VC,H4,t),bs(VC,H4,"esm2020"),bs("fire-js","")}Hre("");function O$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Kre=O$,R$=new Cp("auth","Firebase",O$());const ow=new e_("@firebase/auth");function Wre(t,...e){ow.logLevel<=At.WARN&&ow.warn(`Auth (${Pp}): ${t}`,...e)}function Px(t,...e){ow.logLevel<=At.ERROR&&ow.error(`Auth (${Pp}): ${t}`,...e)}function Es(t,...e){throw CN(t,...e)}function lo(t,...e){return CN(t,...e)}function M$(t,e,n){const r={...Kre(),[e]:n};return new Cp("auth","Firebase",r).create(e,{appName:t.name})}function il(t){return M$(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return R$.create(t,...e)}function Je(t,e,...n){if(!t)throw CN(e,...n)}function Zo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Px(e),new Error(e)}function hl(t,e){t||Zo(e)}function UC(){return typeof self<"u"&&self.location?.href||""}function Yre(){return Q4()==="http:"||Q4()==="https:"}function Q4(){return typeof self<"u"&&self.location?.protocol||null}function Xre(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yre()||Sne()||"connection"in navigator)?navigator.onLine:!0}function Qre(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class n0{constructor(e,n){this.shortDelay=e,this.longDelay=n,hl(n>e,"Short delay should be less than long delay!"),this.isMobile=wne()||Ene()}get(){return Xre()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function IN(t,e){hl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class j${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zre={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Jre=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eie=new n0(3e4,6e4);function Is(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ya(t,e,n,r,i={}){return z$(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=t0({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return _ne()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ru(t.emulatorConfig.host)&&(u.credentials="include"),j$.fetch()(await L$(t,t.config.apiHost,n,o),u)})}async function z$(t,e,n){t._canInitEmulator=!1;const r={...Zre,...e};try{const i=new nie(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Ib(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ib(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Ib(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Ib(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw M$(t,f,u);Es(t,f)}}catch(i){if(i instanceof Eo)throw i;Es(t,"network-request-failed",{message:String(i)})}}async function r0(t,e,n,r,i={}){const a=await Ya(t,e,n,r,i);return"mfaPendingCredential"in a&&Es(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function L$(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?IN(t.config,i):`${t.config.apiScheme}://${i}`;return Jre.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function tie(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nie{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lo(this.auth,"network-request-failed")),eie.get())})}}function Ib(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=lo(t,e,r);return i.customData._tokenResponse=n,i}function Z4(t){return t!==void 0&&t.enterprise!==void 0}class rie{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tie(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iie(t,e){return Ya(t,"GET","/v2/recaptchaConfig",Is(t,e))}async function aie(t,e){return Ya(t,"POST","/v1/accounts:delete",e)}async function lw(t,e){return Ya(t,"POST","/v1/accounts:lookup",e)}function zm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sie(t,e=!1){const n=Ft(t),r=await n.getIdToken(e),i=PN(r);Je(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:zm(rA(i.auth_time)),issuedAtTime:zm(rA(i.iat)),expirationTime:zm(rA(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function rA(t){return Number(t)*1e3}function PN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Px("JWT malformed, contained fewer than 3 sections"),null;try{const i=x$(n);return i?JSON.parse(i):(Px("Failed to decode base64 JWT payload"),null)}catch(i){return Px("Caught error parsing JWT payload as JSON",i?.toString()),null}}function J4(t){const e=PN(t);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $h(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Eo&&oie(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oie({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class lie{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $C{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zm(this.lastLoginAt),this.creationTime=zm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cw(t){const e=t.auth,n=await t.getIdToken(),r=await $h(t,lw(e,{idToken:n}));Je(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?V$(i.providerUserInfo):[],s=uie(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new $C(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function cie(t){const e=Ft(t);await cw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uie(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function V$(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function die(t,e){const n=await z$(t,{},async()=>{const r=t0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await L$(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&ru(t.emulatorConfig.host)&&(c.credentials="include"),j$.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fie(t,e){return Ya(t,"POST","/v2/accounts:revokeToken",Is(t,e))}class Nh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const n=J4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await die(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Nh;return r&&(Je(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Je(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Je(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nh,this.toJSON())}_performRefresh(){return Zo("not implemented")}}function mc(t,e){Je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new lie(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $C(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $h(this,this.stsTokenManager.getToken(this.auth,e));return Je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sie(this,e)}reload(){return cie(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oa(this.auth.app))return Promise.reject(il(this.auth));const e=await this.getIdToken();return await $h(this,aie(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:x}=n;Je(h&&x,e,"internal-error");const w=Nh.fromJSON(this.name,x);Je(typeof h=="string",e,"internal-error"),mc(r,e.name),mc(i,e.name),Je(typeof g=="boolean",e,"internal-error"),Je(typeof v=="boolean",e,"internal-error"),mc(a,e.name),mc(s,e.name),mc(o,e.name),mc(c,e.name),mc(u,e.name),mc(f,e.name);const S=new vs({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(T=>({...T}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nh;i.updateFromServerResponse(n);const a=new vs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await cw(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Je(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?V$(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new Nh;o.updateFromIdToken(r);const c=new vs({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $C(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const eL=new Map;function Jo(t){hl(t instanceof Function,"Expected a class definition");let e=eL.get(t);return e?(hl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eL.set(t,e),e)}class B${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}B$.type="NONE";const tL=B$;function Nx(t,e,n){return`firebase:${t}:${e}:${n}`}class Dh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Nx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Nx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lw(this.auth,{idToken:e}).catch(()=>{});return n?vs._fromGetAccountInfoResponse(this.auth,n,e):null}return vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Dh(Jo(tL),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Jo(tL);const s=Nx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await lw(e,{idToken:f}).catch(()=>{});if(!g)break;h=await vs._fromGetAccountInfoResponse(e,g,f)}else h=vs._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Dh(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new Dh(a,e,r))}}function nL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H$(e))return"Blackberry";if(K$(e))return"Webos";if(U$(e))return"Safari";if((e.includes("chrome/")||$$(e))&&!e.includes("edge/"))return"Chrome";if(G$(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function F$(t=br()){return/firefox\//i.test(t)}function U$(t=br()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $$(t=br()){return/crios\//i.test(t)}function q$(t=br()){return/iemobile/i.test(t)}function G$(t=br()){return/android/i.test(t)}function H$(t=br()){return/blackberry/i.test(t)}function K$(t=br()){return/webos/i.test(t)}function NN(t=br()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hie(t=br()){return NN(t)&&!!window.navigator?.standalone}function pie(){return Tne()&&document.documentMode===10}function W$(t=br()){return NN(t)||G$(t)||K$(t)||H$(t)||/windows phone/i.test(t)||q$(t)}function Y$(t,e=[]){let n;switch(t){case"Browser":n=nL(br());break;case"Worker":n=`${nL(br())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pp}/${r}`}class gie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function mie(t,e={}){return Ya(t,"GET","/v2/passwordPolicy",Is(t,e))}const vie=6;class yie{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vie,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class bie{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rL(this),this.idTokenSubscription=new rL(this),this.beforeStateQueue=new gie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jo(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Dh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lw(this,{idToken:e}),r=await vs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cw(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qre()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oa(this.app))return Promise.reject(il(this));const n=e?Ft(e):null;return n&&Je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oa(this.app)?Promise.reject(il(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oa(this.app)?Promise.reject(il(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mie(this),n=new yie(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fie(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jo(e)||this._popupRedirectResolver;Je(n,this,"argument-error"),this.redirectPersistenceManager=await Dh.create(this,[Jo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(oa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Wre(`Error while retrieving App Check token: ${e.error}`),e?.token}}function iu(t){return Ft(t)}class rL{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nne(n=>this.observer=n)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let t_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xie(t){t_=t}function X$(t){return t_.loadJS(t)}function wie(){return t_.recaptchaEnterpriseScript}function _ie(){return t_.gapiScript}function Sie(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Eie{constructor(){this.enterprise=new Tie}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Tie{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Aie="recaptcha-enterprise",Q$="NO_RECAPTCHA";class kie{constructor(e){this.type=Aie,this.auth=iu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{iie(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new rie(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;Z4(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(Q$)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Eie().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&Z4(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=wie();c.length!==0&&(c+=o),X$(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function iL(t,e,n,r=!1,i=!1){const a=new kie(t);let s;if(i)s=Q$;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function uw(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await iL(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await iL(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function Cie(t,e){const n=Ip(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(qc(a,e??{}))return i;Es(i,"already-initialized")}return n.initialize({options:e})}function Iie(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Jo);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Pie(t,e,n){const r=iu(t);Je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=Z$(e),{host:s,port:o}=Nie(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Je(qc(u,r.config.emulator)&&qc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,ru(s)?(TN(`${a}//${s}${c}`),E$("Auth",!0)):Die()}function Z$(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Nie(t){const e=Z$(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:aL(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:aL(s)}}}function aL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Die(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class DN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zo("not implemented")}_getIdTokenResponse(e){return Zo("not implemented")}_linkToIdToken(e,n){return Zo("not implemented")}_getReauthenticationResolver(e){return Zo("not implemented")}}async function Oie(t,e){return Ya(t,"POST","/v1/accounts:resetPassword",Is(t,e))}async function Rie(t,e){return Ya(t,"POST","/v1/accounts:signUp",e)}async function Mie(t,e){return Ya(t,"POST","/v1/accounts:update",Is(t,e))}async function jie(t,e){return r0(t,"POST","/v1/accounts:signInWithPassword",Is(t,e))}async function J$(t,e){return Ya(t,"POST","/v1/accounts:sendOobCode",Is(t,e))}async function zie(t,e){return J$(t,e)}async function Lie(t,e){return J$(t,e)}async function Vie(t,e){return r0(t,"POST","/v1/accounts:signInWithEmailLink",Is(t,e))}async function Bie(t,e){return r0(t,"POST","/v1/accounts:signInWithEmailLink",Is(t,e))}class ov extends DN{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ov(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ov(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uw(e,n,"signInWithPassword",jie);case"emailLink":return Vie(e,{email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uw(e,r,"signUpPassword",Rie);case"emailLink":return Bie(e,{idToken:n,email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Oh(t,e){return r0(t,"POST","/v1/accounts:signInWithIdp",Is(t,e))}const Fie="http://localhost";class Ad extends DN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ad(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Es("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new Ad(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Oh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oh(e,n)}buildRequest(){const e={requestUri:Fie,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=t0(n)}return e}}function Uie(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $ie(t){const e=wm(_m(t)).link,n=e?wm(_m(e)).deep_link_id:null,r=wm(_m(t)).deep_link_id;return(r?wm(_m(r)).link:null)||r||n||e||t}class ON{constructor(e){const n=wm(_m(e)),r=n.apiKey??null,i=n.oobCode??null,a=Uie(n.mode??null);Je(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=$ie(e);try{return new ON(n)}catch{return null}}}class Yd{constructor(){this.providerId=Yd.PROVIDER_ID}static credential(e,n){return ov._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ON.parseLink(n);return Je(r,"argument-error"),ov._fromEmailAndCode(e,r.code,r.tenantId)}}Yd.PROVIDER_ID="password";Yd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class e8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class i0 extends e8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ec extends i0{constructor(){super("facebook.com")}static credential(e){return Ad._fromParams({providerId:Ec.PROVIDER_ID,signInMethod:Ec.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ec.credentialFromTaggedObject(e)}static credentialFromError(e){return Ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ec.credential(e.oauthAccessToken)}catch{return null}}}Ec.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ec.PROVIDER_ID="facebook.com";class Tc extends i0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ad._fromParams({providerId:Tc.PROVIDER_ID,signInMethod:Tc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Tc.credentialFromTaggedObject(e)}static credentialFromError(e){return Tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Tc.credential(n,r)}catch{return null}}}Tc.GOOGLE_SIGN_IN_METHOD="google.com";Tc.PROVIDER_ID="google.com";class Ac extends i0{constructor(){super("github.com")}static credential(e){return Ad._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ac.credential(e.oauthAccessToken)}catch{return null}}}Ac.GITHUB_SIGN_IN_METHOD="github.com";Ac.PROVIDER_ID="github.com";class kc extends i0{constructor(){super("twitter.com")}static credential(e,n){return Ad._fromParams({providerId:kc.PROVIDER_ID,signInMethod:kc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return kc.credentialFromTaggedObject(e)}static credentialFromError(e){return kc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return kc.credential(n,r)}catch{return null}}}kc.TWITTER_SIGN_IN_METHOD="twitter.com";kc.PROVIDER_ID="twitter.com";async function qie(t,e){return r0(t,"POST","/v1/accounts:signUp",Is(t,e))}class kd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await vs._fromIdTokenResponse(e,r,i),s=sL(r);return new kd({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=sL(r);return new kd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function sL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class dw extends Eo{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,dw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new dw(e,n,r,i)}}function t8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?dw._fromErrorAndOperation(t,a,e,r):a})}async function Gie(t,e,n=!1){const r=await $h(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kd._forOperation(t,"link",r)}async function n8(t,e,n=!1){const{auth:r}=t;if(oa(r.app))return Promise.reject(il(r));const i="reauthenticate";try{const a=await $h(t,t8(r,i,e,t),n);Je(a.idToken,r,"internal-error");const s=PN(a.idToken);Je(s,r,"internal-error");const{sub:o}=s;return Je(t.uid===o,r,"user-mismatch"),kd._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Es(r,"user-mismatch"),a}}async function r8(t,e,n=!1){if(oa(t.app))return Promise.reject(il(t));const r="signIn",i=await t8(t,r,e),a=await kd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Hie(t,e){return r8(iu(t),e)}async function Kie(t,e){return n8(Ft(t),e)}function Wie(t,e,n){Je(n.url?.length>0,t,"invalid-continue-uri"),Je(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Je(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Je(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Je(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function RN(t){const e=iu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Yie(t,e,n){const r=iu(t);await uw(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Lie)}async function Xie(t,e,n){await Oie(Ft(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&RN(t),r})}async function Qie(t,e){await Mie(Ft(t),{oobCode:e})}async function Zie(t,e,n){if(oa(t.app))return Promise.reject(il(t));const r=iu(t),s=await uw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qie).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&RN(t),c}),o=await kd._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Jie(t,e,n){return oa(t.app)?Promise.reject(il(t)):Hie(Ft(t),Yd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&RN(t),r})}async function oL(t,e){const n=Ft(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Wie(n.auth,i,e);const{email:a}=await zie(n.auth,i);a!==t.email&&await t.reload()}async function eae(t,e){return Ya(t,"POST","/v1/accounts:update",e)}async function tae(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ft(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await $h(r,eae(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function nae(t,e,n,r){return Ft(t).onIdTokenChanged(e,n,r)}function rae(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function iae(t,e,n,r){return Ft(t).onAuthStateChanged(e,n,r)}function lL(t){return Ft(t).signOut()}async function aae(t){return Ft(t).delete()}const fw="__sak";class i8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fw,"1"),this.storage.removeItem(fw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const sae=1e3,oae=10;class a8 extends i8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);pie()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oae):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}a8.type="LOCAL";const lae=a8;class s8 extends i8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}s8.type="SESSION";const o8=s8;function cae(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class n_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new n_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await cae(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n_.receivers=[];function MN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class uae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=MN("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function co(){return window}function dae(t){co().location.href=t}function l8(){return typeof co().WorkerGlobalScope<"u"&&typeof co().importScripts=="function"}async function fae(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hae(){return navigator?.serviceWorker?.controller||null}function pae(){return l8()?self:null}const c8="firebaseLocalStorageDb",gae=1,hw="firebaseLocalStorage",u8="fbase_key";class a0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function r_(t,e){return t.transaction([hw],e?"readwrite":"readonly").objectStore(hw)}function mae(){const t=indexedDB.deleteDatabase(c8);return new a0(t).toPromise()}function qC(){const t=indexedDB.open(c8,gae);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hw,{keyPath:u8})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hw)?e(r):(r.close(),await mae(),e(await qC()))})})}async function cL(t,e,n){const r=r_(t,!0).put({[u8]:e,value:n});return new a0(r).toPromise()}async function vae(t,e){const n=r_(t,!1).get(e),r=await new a0(n).toPromise();return r===void 0?null:r.value}function uL(t,e){const n=r_(t,!0).delete(e);return new a0(n).toPromise()}const yae=800,bae=3;class d8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qC(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>bae)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=n_._getInstance(pae()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fae(),!this.activeServiceWorker)return;this.sender=new uae(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qC();return await cL(e,fw,"1"),await uL(e,fw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>cL(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vae(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uL(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=r_(i,!1).getAll();return new a0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d8.type="LOCAL";const xae=d8;new n0(3e4,6e4);function wae(t,e){return e?Jo(e):(Je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class jN extends DN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _ae(t){return r8(t.auth,new jN(t),t.bypassAuthState)}function Sae(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),n8(n,new jN(t),t.bypassAuthState)}async function Eae(t){const{auth:e,user:n}=t;return Je(n,e,"internal-error"),Gie(n,new jN(t),t.bypassAuthState)}class f8{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _ae;case"linkViaPopup":case"linkViaRedirect":return Eae;case"reauthViaPopup":case"reauthViaRedirect":return Sae;default:Es(this.auth,"internal-error")}}resolve(e){hl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tae=new n0(2e3,1e4);class mh extends f8{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,mh.currentPopupAction&&mh.currentPopupAction.cancel(),mh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){hl(this.filter.length===1,"Popup operations only handle one event");const e=MN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(lo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(lo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tae.get())};e()}}mh.currentPopupAction=null;const Aae="pendingRedirect",Dx=new Map;class kae extends f8{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dx.get(this.auth._key());if(!e){try{const r=await Cae(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dx.set(this.auth._key(),e)}return this.bypassAuthState||Dx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Cae(t,e){const n=Nae(e),r=Pae(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Iae(t,e){Dx.set(t._key(),e)}function Pae(t){return Jo(t._redirectPersistence)}function Nae(t){return Nx(Aae,t.config.apiKey,t.name)}async function Dae(t,e,n=!1){if(oa(t.app))return Promise.reject(il(t));const r=iu(t),i=wae(r,e),s=await new kae(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const Oae=600*1e3;class Rae{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mae(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!h8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(lo(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Oae&&this.cachedEventUids.clear(),this.cachedEventUids.has(dL(e))}saveEventToCache(e){this.cachedEventUids.add(dL(e)),this.lastProcessedEventTime=Date.now()}}function dL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function h8({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Mae(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h8(t);default:return!1}}async function jae(t,e={}){return Ya(t,"GET","/v1/projects",e)}const zae=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lae=/^https?/;async function Vae(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jae(t);for(const n of e)try{if(Bae(n))return}catch{}Es(t,"unauthorized-domain")}function Bae(t){const e=UC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Lae.test(n))return!1;if(zae.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Fae=new n0(3e4,6e4);function fL(){const t=co().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Uae(t){return new Promise((e,n)=>{function r(){fL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fL(),n(lo(t,"network-request-failed"))},timeout:Fae.get()})}if(co().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(co().gapi?.load)r();else{const i=Sie("iframefcb");return co()[i]=()=>{gapi.load?r():n(lo(t,"network-request-failed"))},X$(`${_ie()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Ox=null,e})}let Ox=null;function $ae(t){return Ox=Ox||Uae(t),Ox}const qae=new n0(5e3,15e3),Gae="__/auth/iframe",Hae="emulator/auth/iframe",Kae={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wae=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yae(t){const e=t.config;Je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?IN(e,Hae):`https://${t.config.authDomain}/${Gae}`,r={apiKey:e.apiKey,appName:t.name,v:Pp},i=Wae.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${t0(r).slice(1)}`}async function Xae(t){const e=await $ae(t),n=co().gapi;return Je(n,t,"internal-error"),e.open({where:document.body,url:Yae(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kae,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=lo(t,"network-request-failed"),o=co().setTimeout(()=>{a(s)},qae.get());function c(){co().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const Qae={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zae=500,Jae=600,ese="_blank",tse="http://localhost";class hL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nse(t,e,n,r=Zae,i=Jae){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...Qae,width:r.toString(),height:i.toString(),top:a,left:s},u=br().toLowerCase();n&&(o=$$(u)?ese:n),F$(u)&&(e=e||tse,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(hie(u)&&o!=="_self")return rse(e||"",o),new hL(null);const h=window.open(e||"",o,f);Je(h,t,"popup-blocked");try{h.focus()}catch{}return new hL(h)}function rse(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const ise="__/auth/handler",ase="emulator/auth/handler",sse=encodeURIComponent("fac");async function pL(t,e,n,r,i,a){Je(t.config.authDomain,t,"auth-domain-config-required"),Je(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pp,eventId:i};if(e instanceof e8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Pne(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof i0){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${sse}=${encodeURIComponent(c)}`:"";return`${ose(t)}?${t0(o).slice(1)}${u}`}function ose({config:t}){return t.emulator?IN(t,ase):`https://${t.authDomain}/${ise}`}const iA="webStorageSupport";class lse{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o8,this._completeRedirectFn=Dae,this._overrideRedirectResult=Iae}async _openPopup(e,n,r,i){hl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await pL(e,n,r,UC(),i);return nse(e,a,MN())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await pL(e,n,r,UC(),i);return dae(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(hl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Xae(e),r=new Rae(e);return n.register("authEvent",i=>(Je(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(iA,{type:iA},i=>{const a=i?.[0]?.[iA];a!==void 0&&n(!!a),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Vae(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W$()||U$()||NN()}}const cse=lse;var gL="@firebase/auth",mL="1.11.1";class use{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fse(t){fl(new yo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;Je(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y$(t)},u=new bie(r,i,a,c);return Iie(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fl(new yo("auth-internal",e=>{const n=iu(e.getProvider("auth").getImmediate());return(r=>new use(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(gL,mL,dse(t)),bs(gL,mL,"esm2020")}const hse=300,pse=S$("authIdTokenMaxAge")||hse;let vL=null;const gse=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pse)return;const i=n?.token;vL!==i&&(vL=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function p8(t=kN()){const e=Ip(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Cie(t,{popupRedirectResolver:cse,persistence:[xae,lae,o8]}),r=S$("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=gse(a.toString());rae(n,s,()=>s(n.currentUser)),nae(n,o=>s(o))}}const i=w$("auth");return i&&Pie(n,`http://${i}`),n}function mse(){return document.getElementsByTagName("head")?.[0]??document}xie({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=lo("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",mse().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fse("Browser");var yL="popstate";function vse(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=Xd(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),GC("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:lv(a))}function r(i,a){$a(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return bse(e,n,r,t)}function In(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $a(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yse(){return Math.random().toString(36).substring(2,10)}function bL(t,e){return{usr:t.state,key:t.key,idx:e}}function GC(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Xd(e):e,state:n,key:e&&e.key||r||yse()}}function lv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function bse(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),S=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:S})}function g(w,S){o="PUSH";let T=GC(x.location,w,S);n&&n(T,w),u=f()+1;let I=bL(T,u),O=x.createHref(T);try{s.pushState(I,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(O)}a&&c&&c({action:o,location:x.location,delta:1})}function v(w,S){o="REPLACE";let T=GC(x.location,w,S);n&&n(T,w),u=f();let I=bL(T,u),O=x.createHref(T);s.replaceState(I,"",O),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return xse(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(yL,h),c=w,()=>{i.removeEventListener(yL,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:v,go(w){return s.go(w)}};return x}function xse(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),In(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:lv(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function g8(t,e,n="/"){return wse(t,e,n,!1)}function wse(t,e,n,r){let i=typeof e=="string"?Xd(e):e,a=pl(i.pathname||"/",n);if(a==null)return null;let s=m8(t);_se(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=Ose(a);o=Nse(s[c],u,r)}return o}function m8(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;In(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=al([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(In(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),m8(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:Ise(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of v8(s.path))a(s,o,!0,c)}),e}function v8(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=v8(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function _se(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Pse(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Sse=/^:[\w-]+$/,Ese=3,Tse=2,Ase=1,kse=10,Cse=-2,xL=t=>t==="*";function Ise(t,e){let n=t.split("/"),r=n.length;return n.some(xL)&&(r+=Cse),e&&(r+=Tse),n.filter(i=>!xL(i)).reduce((i,a)=>i+(Sse.test(a)?Ese:a===""?Ase:kse),r)}function Pse(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Nse(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=pw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=pw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:al([a,h.pathname]),pathnameBase:zse(al([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=al([a,h.pathnameBase]))}return s}function pw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Dse(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=o[g];return h&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function Dse(t,e=!1,n=!0){$a(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Ose(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $a(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function pl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Rse=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Mse(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xd(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=wL(n.substring(1),"/"):a=wL(n,e)):a=e,{pathname:a,search:Lse(r),hash:Vse(i)}}function wL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function aA(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jse(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function y8(t){let e=jse(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function b8(t,e,n,r=!1){let i;typeof t=="string"?i=Xd(t):(i={...t},In(!i.pathname||!i.pathname.includes("?"),aA("?","pathname","search",i)),In(!i.pathname||!i.pathname.includes("#"),aA("#","pathname","hash",i)),In(!i.search||!i.search.includes("#"),aA("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=Mse(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var al=t=>t.join("/").replace(/\/\/+/g,"/"),zse=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Lse=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Vse=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Bse=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Fse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Use(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var x8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function w8(t,e){let n=t;if(typeof n!="string"||!Rse.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(x8)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=pl(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{$a(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _8=["POST","PUT","PATCH","DELETE"];new Set(_8);var $se=["GET",..._8];new Set($se);var Np=A.createContext(null);Np.displayName="DataRouter";var i_=A.createContext(null);i_.displayName="DataRouterState";var qse=A.createContext(!1),S8=A.createContext({isTransitioning:!1});S8.displayName="ViewTransition";var Gse=A.createContext(new Map);Gse.displayName="Fetchers";var Hse=A.createContext(null);Hse.displayName="Await";var Xa=A.createContext(null);Xa.displayName="Navigation";var s0=A.createContext(null);s0.displayName="Location";var To=A.createContext({outlet:null,matches:[],isDataRoute:!1});To.displayName="Route";var zN=A.createContext(null);zN.displayName="RouteError";var E8="REACT_ROUTER_ERROR",Kse="REDIRECT",Wse="ROUTE_ERROR_RESPONSE";function Yse(t){if(t.startsWith(`${E8}:${Kse}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Xse(t){if(t.startsWith(`${E8}:${Wse}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Bse(e.status,e.statusText,e.data)}catch{}}function Qse(t,{relative:e}={}){In(o0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Xa),{hash:i,pathname:a,search:s}=l0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:al([n,a])),r.createHref({pathname:o,search:s,hash:i})}function o0(){return A.useContext(s0)!=null}function Ps(){return In(o0(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(s0).location}var T8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function A8(t){A.useContext(Xa).static||A.useLayoutEffect(t)}function Qa(){let{isDataRoute:t}=A.useContext(To);return t?doe():Zse()}function Zse(){In(o0(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Np),{basename:e,navigator:n}=A.useContext(Xa),{matches:r}=A.useContext(To),{pathname:i}=Ps(),a=JSON.stringify(y8(r)),s=A.useRef(!1);return A8(()=>{s.current=!0}),A.useCallback((c,u={})=>{if($a(s.current,T8),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=b8(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:al([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}A.createContext(null);function Jse(){let{matches:t}=A.useContext(To),e=t[t.length-1];return e?e.params:{}}function l0(t,{relative:e}={}){let{matches:n}=A.useContext(To),{pathname:r}=Ps(),i=JSON.stringify(y8(n));return A.useMemo(()=>b8(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function eoe(t,e){return k8(t,e)}function k8(t,e,n,r,i){In(o0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Xa),{matches:s}=A.useContext(To),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";I8(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Ps(),v;if(e){let T=typeof e=="string"?Xd(e):e;In(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=g;let b=v.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=g8(t,{pathname:x});$a(h||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),$a(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=aoe(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:al([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:al([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&S?A.createElement(s0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function toe(){let t=uoe(),e=Fse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var noe=A.createElement(toe,null),C8=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Xse(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(To.Provider,{value:this.props.routeContext},A.createElement(zN.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(roe,{error:t},e):e}};C8.contextType=qse;var sA=new WeakMap;function roe({children:t,error:e}){let{basename:n}=A.useContext(Xa);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Yse(e.digest);if(r){let i=sA.get(e);if(i)throw i;let a=w8(r.location,n);if(x8&&!sA.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw sA.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function ioe({routeContext:t,match:e,children:n}){let r=A.useContext(Np);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(To.Provider,{value:t},n)}function aoe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);In(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Use(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let v,b=!1,x=null,w=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||noe,o&&(c<0&&g===0?(I8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),T=()=>{let I;return v?I=x:b?I=w:h.route.Component?I=A.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=f,A.createElement(ioe,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(C8,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):T()},null)}function LN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function soe(t){let e=A.useContext(Np);return In(e,LN(t)),e}function ooe(t){let e=A.useContext(i_);return In(e,LN(t)),e}function loe(t){let e=A.useContext(To);return In(e,LN(t)),e}function VN(t){let e=loe(t),n=e.matches[e.matches.length-1];return In(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function coe(){return VN("useRouteId")}function uoe(){let t=A.useContext(zN),e=ooe("useRouteError"),n=VN("useRouteError");return t!==void 0?t:e.errors?.[n]}function doe(){let{router:t}=soe("useNavigate"),e=VN("useNavigate"),n=A.useRef(!1);return A8(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{$a(n.current,T8),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var _L={};function I8(t,e,n){!e&&!_L[t]&&(_L[t]=!0,$a(!1,n))}A.memo(foe);function foe({routes:t,future:e,state:n,onError:r}){return k8(t,void 0,n,r,e)}function Js(t){In(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hoe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){In(!o0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=Xd(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,b=A.useMemo(()=>{let x=pl(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:v},navigationType:r}},[o,u,f,h,g,v,r]);return $a(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Xa.Provider,{value:c},A.createElement(s0.Provider,{children:e,value:b}))}function poe({children:t,location:e}){return eoe(HC(t),e)}function HC(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,HC(r.props.children,a));return}In(r.type===Js,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),In(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=HC(r.props.children,a)),n.push(s)}),n}var Rx="get",Mx="application/x-www-form-urlencoded";function a_(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function goe(t){return a_(t)&&t.tagName.toLowerCase()==="button"}function moe(t){return a_(t)&&t.tagName.toLowerCase()==="form"}function voe(t){return a_(t)&&t.tagName.toLowerCase()==="input"}function yoe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function boe(t,e){return t.button===0&&(!e||e==="_self")&&!yoe(t)}function KC(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function xoe(t,e){let n=KC(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Pb=null;function woe(){if(Pb===null)try{new FormData(document.createElement("form"),0),Pb=!1}catch{Pb=!0}return Pb}var _oe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oA(t){return t!=null&&!_oe.has(t)?($a(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mx}"`),null):t}function Soe(t,e){let n,r,i,a,s;if(moe(t)){let o=t.getAttribute("action");r=o?pl(o,e):null,n=t.getAttribute("method")||Rx,i=oA(t.getAttribute("enctype"))||Mx,a=new FormData(t)}else if(goe(t)||voe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?pl(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Rx,i=oA(t.getAttribute("formenctype"))||oA(o.getAttribute("enctype"))||Mx,a=new FormData(o,t),!woe()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(a_(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Rx,r=null,i=Mx,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function BN(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Eoe(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&pl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Toe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Aoe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function koe(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await Toe(a,n);return s.links?s.links():[]}return[]}));return Noe(r.flat(1).filter(Aoe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function SL(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Coe(t,e,{includeHydrateFallback:n}={}){return Ioe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Ioe(t){return[...new Set(t)]}function Poe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Noe(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(Poe(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function P8(){let t=A.useContext(Np);return BN(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Doe(){let t=A.useContext(i_);return BN(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FN=A.createContext(void 0);FN.displayName="FrameworkContext";function N8(){let t=A.useContext(FN);return BN(t,"You must render this element inside a <HydratedRouter> element"),t}function Ooe(t,e){let n=A.useContext(FN),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=S=>{S.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let v=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:rm(o,v),onBlur:rm(c,b),onMouseEnter:rm(u,v),onMouseLeave:rm(f,b),onTouchStart:rm(h,v)}]:[!1,g,{}]}function rm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Roe({page:t,...e}){let{router:n}=P8(),r=A.useMemo(()=>g8(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(joe,{page:t,matches:r,...e}):null}function Moe(t){let{manifest:e,routeModules:n}=N8(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return koe(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function joe({page:t,matches:e,...n}){let r=Ps(),{future:i,manifest:a,routeModules:s}=N8(),{basename:o}=P8(),{loaderData:c,matches:u}=Doe(),f=A.useMemo(()=>SL(t,e,u,a,r,"data"),[t,e,u,a,r]),h=A.useMemo(()=>SL(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let I=a.routes[T.route.id];!I||!I.hasLoader||(!f.some(O=>O.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||I.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let S=Eoe(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),v=A.useMemo(()=>Coe(h,a),[h,a]),b=Moe(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function zoe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Loe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Loe&&(window.__reactRouterVersion="7.13.0")}catch{}function Voe({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=vse({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(u=>{n===!1?o(u):A.startTransition(()=>o(u))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(hoe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var D8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O8=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b){let{basename:x,unstable_useTransitions:w}=A.useContext(Xa),S=typeof u=="string"&&D8.test(u),T=w8(u,x);u=T.to;let I=Qse(u,{relative:i}),[O,D,N]=Ooe(r,v),C=$oe(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function P(j){e&&e(j),j.defaultPrevented||C(j)}let R=A.createElement("a",{...v,...N,href:T.absoluteURL||I,onClick:T.isExternal||a?e:P,ref:zoe(b,D),target:c,"data-discover":!S&&n==="render"?"true":void 0});return O&&!S?A.createElement(A.Fragment,null,R,A.createElement(Roe,{page:I})):R});O8.displayName="Link";var Boe=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=l0(s,{relative:u.relative}),g=Ps(),v=A.useContext(i_),{navigator:b,basename:x}=A.useContext(Xa),w=v!=null&&Woe(h)&&o===!0,S=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,I=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(T=T.toLowerCase(),I=I?I.toLowerCase():null,S=S.toLowerCase()),I&&x&&(I=pl(I,x)||I);const O=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=T===S||!i&&T.startsWith(S)&&T.charAt(O)==="/",N=I!=null&&(I===S||!i&&I.startsWith(S)&&I.charAt(S.length)==="/"),C={isActive:D,isPending:N,isTransitioning:w},P=D?e:void 0,R;typeof r=="function"?R=r(C):R=[r,D?"active":null,N?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(C):a;return A.createElement(O8,{...u,"aria-current":P,className:R,ref:f,style:j,to:s,viewTransition:o},typeof c=="function"?c(C):c)});Boe.displayName="NavLink";var Foe=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Rx,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...v},b)=>{let{unstable_useTransitions:x}=A.useContext(Xa),w=Hoe(),S=Koe(o,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",I=typeof o=="string"&&D8.test(o),O=D=>{if(c&&c(D),D.defaultPrevented)return;D.preventDefault();let N=D.nativeEvent.submitter,C=N?.getAttribute("formmethod")||s,P=()=>w(N||D.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>P()):P()};return A.createElement("form",{ref:b,method:T,action:S,onSubmit:r?c:O,...v,"data-discover":!I&&t==="render"?"true":void 0})});Foe.displayName="Form";function Uoe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R8(t){let e=A.useContext(Np);return In(e,Uoe(t)),e}function $oe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=Qa(),f=Ps(),h=l0(t,{relative:a});return A.useCallback(g=>{if(boe(g,e)){g.preventDefault();let v=n!==void 0?n:lv(f)===lv(h),b=()=>u(t,{replace:v,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function M8(t){$a(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(KC(t)),n=A.useRef(!1),r=Ps(),i=A.useMemo(()=>xoe(r.search,n.current?null:e.current),[r.search]),a=Qa(),s=A.useCallback((o,c)=>{const u=KC(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var qoe=0,Goe=()=>`__${String(++qoe)}__`;function Hoe(){let{router:t}=R8("useSubmit"),{basename:e}=A.useContext(Xa),n=coe(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=Soe(a,e);if(s.navigate===!1){let g=s.fetcherKey||Goe();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Koe(t,{relative:e}={}){let{basename:n}=A.useContext(Xa),r=A.useContext(To);In(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...l0(t||".",{relative:e})},s=Ps();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:al([n,a.pathname])),lv(a)}function Woe(t,{relative:e}={}){let n=A.useContext(S8);In(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=R8("useViewTransitionState"),i=l0(t,{relative:e});if(!n.isTransitioning)return!1;let a=pl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=pl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return pw(i.pathname,s)!=null||pw(i.pathname,a)!=null}var j8=v$();const Yoe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xoe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),EL=t=>{const e=Xoe(t);return e.charAt(0).toUpperCase()+e.slice(1)},z8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Qoe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Zoe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Joe=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...Zoe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:z8("lucide",i),...!a&&!Qoe(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>A.createElement(u,f)),...Array.isArray(a)?a:[a]]));const tt=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(Joe,{ref:a,iconNode:e,className:z8(`lucide-${Yoe(EL(t))}`,`lucide-${t}`,r),...i}));return n.displayName=EL(t),n};const ele=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gl=tt("arrow-left",ele);const tle=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],nle=tt("arrow-right-left",tle);const rle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ile=tt("arrow-right",rle);const ale=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],sle=tt("bug",ale);const ole=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],lle=tt("calendar",ole);const cle=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gw=tt("chart-column",cle);const ule=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],L8=tt("chart-pie",ule);const dle=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],V8=tt("check",dle);const fle=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],hle=tt("chevron-left",fle);const ple=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],us=tt("chevron-right",ple);const gle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],mle=tt("circle-arrow-down",gle);const vle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],yle=tt("circle-arrow-up",vle);const ble=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mw=tt("circle-check-big",ble);const xle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],eo=tt("circle-check",xle);const wle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],TL=tt("circle",wle);const _le=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Sm=tt("dollar-sign",_le);const Sle=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],AL=tt("download",Sle);const Ele=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Tle=tt("ellipsis",Ele);const Ale=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],B8=tt("eye-off",Ale);const kle=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F8=tt("eye",kle);const Cle=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ile=tt("file-text",Cle);const Ple=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Nle=tt("folder",Ple);const Dle=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ole=tt("funnel",Dle);const Rle=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],qh=tt("grip-vertical",Rle);const Mle=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],jle=tt("house",Mle);const zle=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Lle=tt("list",zle);const Vle=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],kL=tt("loader",Vle);const Ble=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],CL=tt("lock",Ble);const Fle=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ule=tt("log-out",Fle);const $le=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],WC=tt("mail",$le);const qle=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],IL=tt("mic",qle);const Gle=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Hle=tt("pause",Gle);const Kle=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Wle=tt("pen",Kle);const Yle=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],Qd=tt("piggy-bank",Yle);const Xle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zd=tt("plus",Xle);const Qle=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gh=tt("refresh-cw",Qle);const Zle=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Jle=tt("rotate-ccw",Zle);const ece=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tce=tt("search",ece);const nce=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rce=tt("settings",nce);const ice=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],U8=tt("skip-forward",ice);const ace=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Rh=tt("sparkles",ace);const sce=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],oce=tt("tags",sce);const lce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],cce=tt("target",lce);const uce=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vw=tt("trash-2",uce);const dce=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$8=tt("trash",dce);const fce=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],od=tt("trending-up",fce);const hce=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Mh=tt("triangle-alert",hce);const pce=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],gce=tt("undo-2",pce);const mce=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vce=tt("upload",mce);const yce=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bce=tt("user-plus",yce);const xce=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Hh=tt("wallet",xce);const wce=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],s_=tt("x",wce),PL=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(v=>v(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},_ce=(t=>t?PL(t):PL),Sce=t=>t;function Ece(t,e=Sce){const n=Pc.useSyncExternalStore(t.subscribe,Pc.useCallback(()=>e(t.getState()),[t,e]),Pc.useCallback(()=>e(t.getInitialState()),[t,e]));return Pc.useDebugValue(n),n}const NL=t=>{const e=_ce(t),n=r=>Ece(e,r);return Object.assign(n,e),n},UN=(t=>t?NL(t):NL),DL={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app",VITE_RECAPTCHA_ENTERPRISE_SITE_KEY:"6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"},cv=new Map,Nb=t=>{const e=cv.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},Tce=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=cv.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return cv.set(n.name,i),{type:"tracked",store:t,...i}},Ace=(t,e)=>{if(e===void 0)return;const n=cv.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&cv.delete(t))},kce=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},Cce=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(DL?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=Tce(o,u,c);let g=!0;i.setState=((x,w,S)=>{const T=n(x,w);if(!g)return T;const I=S===void 0?{type:s||kce(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(f?.send(I,r()),T):(f?.send({...I,type:`${o}/${I.type}`},{...Nb(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),Ace(c.name,o)}};const v=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(DL?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return lA(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){v(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=S.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&v(T);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return v(b),o===void 0?f?.init(i.getState()):f?.init(Nb(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Nb(c.name));case"ROLLBACK":return lA(x.state,S=>{if(o===void 0){v(S),f?.init(i.getState());return}v(S[o]),f?.init(Nb(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return lA(x.state,S=>{if(o===void 0){v(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&v(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,T=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;v(o===void 0?T:T[o]),f?.send(null,S);return}case"PAUSE_RECORDING":return g=!g}return}}),b},Ice=Cce,lA=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function Pce(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const YC=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return YC(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return YC(r)(n)}}}},Nce=(t,e)=>(n,r,i)=>{let a={storage:Pce(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},s=!1;const o=new Set,c=new Set;let u=a.storage;if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,i);const f=()=>{const x=a.partialize({...r()});return u.setItem(a.name,{state:x,version:a.version})},h=i.setState;i.setState=(x,w)=>(h(x,w),f());const g=t((...x)=>(n(...x),f()),r,i);i.getInitialState=()=>g;let v;const b=()=>{var x,w;if(!u)return;s=!1,o.forEach(T=>{var I;return T((I=r())!=null?I:g)});const S=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(x=r())!=null?x:g))||void 0;return YC(u.getItem.bind(u))(a.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==a.version){if(a.migrate){const I=a.migrate(T.state,T.version);return I instanceof Promise?I.then(O=>[!0,O]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var I;const[O,D]=T;if(v=a.merge(D,(I=r())!=null?I:g),n(v,!0),O)return f()}).then(()=>{S?.(v,void 0),v=r(),s=!0,c.forEach(T=>T(v))}).catch(T=>{S?.(void 0,T)})};return i.persist={setOptions:x=>{a={...a,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},a.skipHydration||b(),v||g},q8=Nce;var Dce="firebase",Oce="12.6.0";bs(Dce,Oce,"app");var OL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vc,G8;(function(){var t;function e(C,P){function R(){}R.prototype=P.prototype,C.F=P.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(j,L,B){for(var z=Array(arguments.length-2),W=2;W<arguments.length;W++)z[W-2]=arguments[W];return P.prototype[L].apply(j,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,P,R){R||(R=0);const j=Array(16);if(typeof P=="string")for(var L=0;L<16;++L)j[L]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(L=0;L<16;++L)j[L]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=C.g[0],R=C.g[1],L=C.g[2];let B=C.g[3],z;z=P+(B^R&(L^B))+j[0]+3614090360&4294967295,P=R+(z<<7&4294967295|z>>>25),z=B+(L^P&(R^L))+j[1]+3905402710&4294967295,B=P+(z<<12&4294967295|z>>>20),z=L+(R^B&(P^R))+j[2]+606105819&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(P^L&(B^P))+j[3]+3250441966&4294967295,R=L+(z<<22&4294967295|z>>>10),z=P+(B^R&(L^B))+j[4]+4118548399&4294967295,P=R+(z<<7&4294967295|z>>>25),z=B+(L^P&(R^L))+j[5]+1200080426&4294967295,B=P+(z<<12&4294967295|z>>>20),z=L+(R^B&(P^R))+j[6]+2821735955&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(P^L&(B^P))+j[7]+4249261313&4294967295,R=L+(z<<22&4294967295|z>>>10),z=P+(B^R&(L^B))+j[8]+1770035416&4294967295,P=R+(z<<7&4294967295|z>>>25),z=B+(L^P&(R^L))+j[9]+2336552879&4294967295,B=P+(z<<12&4294967295|z>>>20),z=L+(R^B&(P^R))+j[10]+4294925233&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(P^L&(B^P))+j[11]+2304563134&4294967295,R=L+(z<<22&4294967295|z>>>10),z=P+(B^R&(L^B))+j[12]+1804603682&4294967295,P=R+(z<<7&4294967295|z>>>25),z=B+(L^P&(R^L))+j[13]+4254626195&4294967295,B=P+(z<<12&4294967295|z>>>20),z=L+(R^B&(P^R))+j[14]+2792965006&4294967295,L=B+(z<<17&4294967295|z>>>15),z=R+(P^L&(B^P))+j[15]+1236535329&4294967295,R=L+(z<<22&4294967295|z>>>10),z=P+(L^B&(R^L))+j[1]+4129170786&4294967295,P=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(P^R))+j[6]+3225465664&4294967295,B=P+(z<<9&4294967295|z>>>23),z=L+(P^R&(B^P))+j[11]+643717713&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^P&(L^B))+j[0]+3921069994&4294967295,R=L+(z<<20&4294967295|z>>>12),z=P+(L^B&(R^L))+j[5]+3593408605&4294967295,P=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(P^R))+j[10]+38016083&4294967295,B=P+(z<<9&4294967295|z>>>23),z=L+(P^R&(B^P))+j[15]+3634488961&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^P&(L^B))+j[4]+3889429448&4294967295,R=L+(z<<20&4294967295|z>>>12),z=P+(L^B&(R^L))+j[9]+568446438&4294967295,P=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(P^R))+j[14]+3275163606&4294967295,B=P+(z<<9&4294967295|z>>>23),z=L+(P^R&(B^P))+j[3]+4107603335&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^P&(L^B))+j[8]+1163531501&4294967295,R=L+(z<<20&4294967295|z>>>12),z=P+(L^B&(R^L))+j[13]+2850285829&4294967295,P=R+(z<<5&4294967295|z>>>27),z=B+(R^L&(P^R))+j[2]+4243563512&4294967295,B=P+(z<<9&4294967295|z>>>23),z=L+(P^R&(B^P))+j[7]+1735328473&4294967295,L=B+(z<<14&4294967295|z>>>18),z=R+(B^P&(L^B))+j[12]+2368359562&4294967295,R=L+(z<<20&4294967295|z>>>12),z=P+(R^L^B)+j[5]+4294588738&4294967295,P=R+(z<<4&4294967295|z>>>28),z=B+(P^R^L)+j[8]+2272392833&4294967295,B=P+(z<<11&4294967295|z>>>21),z=L+(B^P^R)+j[11]+1839030562&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^P)+j[14]+4259657740&4294967295,R=L+(z<<23&4294967295|z>>>9),z=P+(R^L^B)+j[1]+2763975236&4294967295,P=R+(z<<4&4294967295|z>>>28),z=B+(P^R^L)+j[4]+1272893353&4294967295,B=P+(z<<11&4294967295|z>>>21),z=L+(B^P^R)+j[7]+4139469664&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^P)+j[10]+3200236656&4294967295,R=L+(z<<23&4294967295|z>>>9),z=P+(R^L^B)+j[13]+681279174&4294967295,P=R+(z<<4&4294967295|z>>>28),z=B+(P^R^L)+j[0]+3936430074&4294967295,B=P+(z<<11&4294967295|z>>>21),z=L+(B^P^R)+j[3]+3572445317&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^P)+j[6]+76029189&4294967295,R=L+(z<<23&4294967295|z>>>9),z=P+(R^L^B)+j[9]+3654602809&4294967295,P=R+(z<<4&4294967295|z>>>28),z=B+(P^R^L)+j[12]+3873151461&4294967295,B=P+(z<<11&4294967295|z>>>21),z=L+(B^P^R)+j[15]+530742520&4294967295,L=B+(z<<16&4294967295|z>>>16),z=R+(L^B^P)+j[2]+3299628645&4294967295,R=L+(z<<23&4294967295|z>>>9),z=P+(L^(R|~B))+j[0]+4096336452&4294967295,P=R+(z<<6&4294967295|z>>>26),z=B+(R^(P|~L))+j[7]+1126891415&4294967295,B=P+(z<<10&4294967295|z>>>22),z=L+(P^(B|~R))+j[14]+2878612391&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~P))+j[5]+4237533241&4294967295,R=L+(z<<21&4294967295|z>>>11),z=P+(L^(R|~B))+j[12]+1700485571&4294967295,P=R+(z<<6&4294967295|z>>>26),z=B+(R^(P|~L))+j[3]+2399980690&4294967295,B=P+(z<<10&4294967295|z>>>22),z=L+(P^(B|~R))+j[10]+4293915773&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~P))+j[1]+2240044497&4294967295,R=L+(z<<21&4294967295|z>>>11),z=P+(L^(R|~B))+j[8]+1873313359&4294967295,P=R+(z<<6&4294967295|z>>>26),z=B+(R^(P|~L))+j[15]+4264355552&4294967295,B=P+(z<<10&4294967295|z>>>22),z=L+(P^(B|~R))+j[6]+2734768916&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~P))+j[13]+1309151649&4294967295,R=L+(z<<21&4294967295|z>>>11),z=P+(L^(R|~B))+j[4]+4149444226&4294967295,P=R+(z<<6&4294967295|z>>>26),z=B+(R^(P|~L))+j[11]+3174756917&4294967295,B=P+(z<<10&4294967295|z>>>22),z=L+(P^(B|~R))+j[2]+718787259&4294967295,L=B+(z<<15&4294967295|z>>>17),z=R+(B^(L|~P))+j[9]+3951481745&4294967295,C.g[0]=C.g[0]+P&4294967295,C.g[1]=C.g[1]+(L+(z<<21&4294967295|z>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+B&4294967295}r.prototype.v=function(C,P){P===void 0&&(P=C.length);const R=P-this.blockSize,j=this.C;let L=this.h,B=0;for(;B<P;){if(L==0)for(;B<=R;)i(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<P;)if(j[L++]=C.charCodeAt(B++),L==this.blockSize){i(this,j),L=0;break}}else for(;B<P;)if(j[L++]=C[B++],L==this.blockSize){i(this,j),L=0;break}}this.h=L,this.o+=P},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var P=1;P<C.length-8;++P)C[P]=0;P=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=P&255,P/=256;for(this.v(C),C=Array(16),P=0,R=0;R<4;++R)for(let j=0;j<32;j+=8)C[P++]=this.g[R]>>>j&255;return C};function a(C,P){var R=o;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=P(C)}function s(C,P){this.h=P;const R=[];let j=!0;for(let L=C.length-1;L>=0;L--){const B=C[L]|0;j&&B==P||(R[L]=B,j=!1)}this.g=R}var o={};function c(C){return-128<=C&&C<128?a(C,function(P){return new s([P|0],P<0?-1:0)}):new s([C|0],C<0?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(C<0)return w(u(-C));const P=[];let R=1;for(let j=0;C>=R;j++)P[j]=C/R|0,R*=4294967296;return new s(P,0)}function f(C,P){if(C.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(C.charAt(0)=="-")return w(f(C.substring(1),P));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(P,8));let j=h;for(let B=0;B<C.length;B+=8){var L=Math.min(8,C.length-B);const z=parseInt(C.substring(B,B+L),P);L<8?(L=u(Math.pow(P,L)),j=j.j(L).add(u(z))):(j=j.j(R),j=j.add(u(z)))}return j}var h=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let C=0,P=1;for(let R=0;R<this.g.length;R++){const j=this.i(R);C+=(j>=0?j:4294967296+j)*P,P*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(x(this))return"-"+w(this).toString(C);const P=u(Math.pow(C,6));var R=this;let j="";for(;;){const L=O(R,P).g;R=S(R,L.j(P));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=L,b(R))return B+j;for(;B.length<6;)B="0"+B;j=B+j}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(let P=0;P<C.g.length;P++)if(C.g[P]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=S(this,C),x(C)?-1:b(C)?0:1};function w(C){const P=C.g.length,R=[];for(let j=0;j<P;j++)R[j]=~C.g[j];return new s(R,~C.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(C){const P=Math.max(this.g.length,C.g.length),R=[];let j=0;for(let L=0;L<=P;L++){let B=j+(this.i(L)&65535)+(C.i(L)&65535),z=(B>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);j=z>>>16,B&=65535,z&=65535,R[L]=z<<16|B}return new s(R,R[R.length-1]&-2147483648?-1:0)};function S(C,P){return C.add(w(P))}t.j=function(C){if(b(this)||b(C))return h;if(x(this))return x(C)?w(this).j(w(C)):w(w(this).j(C));if(x(C))return w(this.j(w(C)));if(this.l(v)<0&&C.l(v)<0)return u(this.m()*C.m());const P=this.g.length+C.g.length,R=[];for(var j=0;j<2*P;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(let L=0;L<C.g.length;L++){const B=this.i(j)>>>16,z=this.i(j)&65535,W=C.i(L)>>>16,Z=C.i(L)&65535;R[2*j+2*L]+=z*Z,T(R,2*j+2*L),R[2*j+2*L+1]+=B*Z,T(R,2*j+2*L+1),R[2*j+2*L+1]+=z*W,T(R,2*j+2*L+1),R[2*j+2*L+2]+=B*W,T(R,2*j+2*L+2)}for(C=0;C<P;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=P;C<2*P;C++)R[C]=0;return new s(R,0)};function T(C,P){for(;(C[P]&65535)!=C[P];)C[P+1]+=C[P]>>>16,C[P]&=65535,P++}function I(C,P){this.g=C,this.h=P}function O(C,P){if(b(P))throw Error("division by zero");if(b(C))return new I(h,h);if(x(C))return P=O(w(C),P),new I(w(P.g),w(P.h));if(x(P))return P=O(C,w(P)),new I(w(P.g),P.h);if(C.g.length>30){if(x(C)||x(P))throw Error("slowDivide_ only works with positive integers.");for(var R=g,j=P;j.l(C)<=0;)R=D(R),j=D(j);var L=N(R,1),B=N(j,1);for(j=N(j,2),R=N(R,2);!b(j);){var z=B.add(j);z.l(C)<=0&&(L=L.add(R),B=z),j=N(j,1),R=N(R,1)}return P=S(C,L.j(P)),new I(L,P)}for(L=h;C.l(P)>=0;){for(R=Math.max(1,Math.floor(C.m()/P.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),B=u(R),z=B.j(P);x(z)||z.l(C)>0;)R-=j,B=u(R),z=B.j(P);b(B)&&(B=g),L=L.add(B),C=S(C,z)}return new I(L,C)}t.B=function(C){return O(this,C).h},t.and=function(C){const P=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)&C.i(j);return new s(R,this.h&C.h)},t.or=function(C){const P=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)|C.i(j);return new s(R,this.h|C.h)},t.xor=function(C){const P=Math.max(this.g.length,C.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)^C.i(j);return new s(R,this.h^C.h)};function D(C){const P=C.g.length+1,R=[];for(let j=0;j<P;j++)R[j]=C.i(j)<<1|C.i(j-1)>>>31;return new s(R,C.h)}function N(C,P){const R=P>>5;P%=32;const j=C.g.length-R,L=[];for(let B=0;B<j;B++)L[B]=P>0?C.i(B+R)>>>P|C.i(B+R+1)<<32-P:C.i(B+R);return new s(L,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,G8=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Vc=s}).apply(typeof OL<"u"?OL:typeof self<"u"?self:typeof window<"u"?window:{});var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var H8,Em,K8,jx,XC,W8,Y8,X8;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Db=="object"&&Db];for(var M=0;M<_.length;++M){var F=_[M];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(_,M){if(M)e:{var F=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var pe=_[H];if(!(pe in F))break e;F=F[pe]}_=_[_.length-1],H=F[_],M=M(H),M!=H&&M!=null&&e(F,_,{configurable:!0,writable:!0,value:M})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(M){var F=[],H;for(H in M)Object.prototype.hasOwnProperty.call(M,H)&&F.push([H,M[H]]);return F}});var a=a||{},s=this||self;function o(_){var M=typeof _;return M=="object"&&_!=null||M=="function"}function c(_,M,F){return _.call.apply(_.bind,arguments)}function u(_,M,F){return u=c,u.apply(null,arguments)}function f(_,M){var F=Array.prototype.slice.call(arguments,1);return function(){var H=F.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function h(_,M){function F(){}F.prototype=M.prototype,_.Z=M.prototype,_.prototype=new F,_.prototype.constructor=_,_.Ob=function(H,pe,xe){for(var Me=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Me[ut-2]=arguments[ut];return M.prototype[pe].apply(H,Me)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function v(_){const M=_.length;if(M>0){const F=Array(M);for(let H=0;H<M;H++)F[H]=_[H];return F}return[]}function b(_,M){for(let H=1;H<arguments.length;H++){const pe=arguments[H];var F=typeof pe;if(F=F!="object"?F:pe?Array.isArray(pe)?"array":F:"null",F=="array"||F=="object"&&typeof pe.length=="number"){F=_.length||0;const xe=pe.length||0;_.length=F+xe;for(let Me=0;Me<xe;Me++)_[F+Me]=pe[Me]}else _.push(pe)}}class x{constructor(M,F){this.i=M,this.j=F,this.h=0,this.g=null}get(){let M;return this.h>0?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function w(_){s.setTimeout(()=>{throw _},0)}function S(){var _=C;let M=null;return _.g&&(M=_.g,_.g=_.g.next,_.g||(_.h=null),M.next=null),M}class T{constructor(){this.h=this.g=null}add(M,F){const H=I.get();H.set(M,F),this.h?this.h.next=H:this.g=H,this.h=H}}var I=new x(()=>new O,_=>_.reset());class O{constructor(){this.next=this.g=this.h=null}set(M,F){this.h=M,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let D,N=!1,C=new T,P=()=>{const _=Promise.resolve(void 0);D=()=>{_.then(R)}};function R(){for(var _;_=S();){try{_.h.call(_.g)}catch(F){w(F)}var M=I;M.j(_),M.h<100&&(M.h++,_.next=M.g,M.g=_)}N=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(_,M){this.type=_,this.g=this.target=M,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,M=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const F=()=>{};s.addEventListener("test",F,M),s.removeEventListener("test",F,M)}catch{}return _})();function z(_){return/^[\s\xa0]*$/.test(_)}function W(_,M){L.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,M)}h(W,L),W.prototype.init=function(_,M){const F=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=M,M=_.relatedTarget,M||(F=="mouseover"?M=_.fromElement:F=="mouseout"&&(M=_.toElement)),this.relatedTarget=M,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),G=0;function Y(_,M,F,H,pe){this.listener=_,this.proxy=null,this.src=M,this.type=F,this.capture=!!H,this.ha=pe,this.key=++G,this.da=this.fa=!1}function Q(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function J(_,M,F){for(const H in _)M.call(F,_[H],H,_)}function te(_,M){for(const F in _)M.call(void 0,_[F],F,_)}function U(_){const M={};for(const F in _)M[F]=_[F];return M}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(_,M){let F,H;for(let pe=1;pe<arguments.length;pe++){H=arguments[pe];for(F in H)_[F]=H[F];for(let xe=0;xe<X.length;xe++)F=X[xe],Object.prototype.hasOwnProperty.call(H,F)&&(_[F]=H[F])}}function K(_){this.src=_,this.g={},this.h=0}K.prototype.add=function(_,M,F,H,pe){const xe=_.toString();_=this.g[xe],_||(_=this.g[xe]=[],this.h++);const Me=ne(_,M,H,pe);return Me>-1?(M=_[Me],F||(M.fa=!1)):(M=new Y(M,this.src,xe,!!H,pe),M.fa=F,_.push(M)),M};function ue(_,M){const F=M.type;if(F in _.g){var H=_.g[F],pe=Array.prototype.indexOf.call(H,M,void 0),xe;(xe=pe>=0)&&Array.prototype.splice.call(H,pe,1),xe&&(Q(M),_.g[F].length==0&&(delete _.g[F],_.h--))}}function ne(_,M,F,H){for(let pe=0;pe<_.length;++pe){const xe=_[pe];if(!xe.da&&xe.listener==M&&xe.capture==!!F&&xe.ha==H)return pe}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),_e={};function ae(_,M,F,H,pe){if(Array.isArray(M)){for(let xe=0;xe<M.length;xe++)ae(_,M[xe],F,H,pe);return null}return F=nt(F),_&&_[Z]?_.J(M,F,o(H)?!!H.capture:!1,pe):ge(_,M,F,!1,H,pe)}function ge(_,M,F,H,pe,xe){if(!M)throw Error("Invalid event type");const Me=o(pe)?!!pe.capture:!!pe;let ut=Le(_);if(ut||(_[oe]=ut=new K(_)),F=ut.add(M,F,H,Me,xe),F.proxy)return F;if(H=fe(),F.proxy=H,H.src=_,H.listener=F,_.addEventListener)B||(pe=Me),pe===void 0&&(pe=!1),_.addEventListener(M.toString(),H,pe);else if(_.attachEvent)_.attachEvent(Ie(M.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return F}function fe(){function _(F){return M.call(_.src,_.listener,F)}const M=Re;return _}function ee(_,M,F,H,pe){if(Array.isArray(M))for(var xe=0;xe<M.length;xe++)ee(_,M[xe],F,H,pe);else H=o(H)?!!H.capture:!!H,F=nt(F),_&&_[Z]?(_=_.i,xe=String(M).toString(),xe in _.g&&(M=_.g[xe],F=ne(M,F,H,pe),F>-1&&(Q(M[F]),Array.prototype.splice.call(M,F,1),M.length==0&&(delete _.g[xe],_.h--)))):_&&(_=Le(_))&&(M=_.g[M.toString()],_=-1,M&&(_=ne(M,F,H,pe)),(F=_>-1?M[_]:null)&&Ae(F))}function Ae(_){if(typeof _!="number"&&_&&!_.da){var M=_.src;if(M&&M[Z])ue(M.i,_);else{var F=_.type,H=_.proxy;M.removeEventListener?M.removeEventListener(F,H,_.capture):M.detachEvent?M.detachEvent(Ie(F),H):M.addListener&&M.removeListener&&M.removeListener(H),(F=Le(M))?(ue(F,_),F.h==0&&(F.src=null,M[oe]=null)):Q(_)}}}function Ie(_){return _ in _e?_e[_]:_e[_]="on"+_}function Re(_,M){if(_.da)_=!0;else{M=new W(M,this);const F=_.listener,H=_.ha||_.src;_.fa&&Ae(_),_=F.call(H,M)}return _}function Le(_){return _=_[oe],_ instanceof K?_:null}var Be="__closure_events_fn_"+(Math.random()*1e9>>>0);function nt(_){return typeof _=="function"?_:(_[Be]||(_[Be]=function(M){return _.handleEvent(M)}),_[Be])}function Ee(){j.call(this),this.i=new K(this),this.M=this,this.G=null}h(Ee,j),Ee.prototype[Z]=!0,Ee.prototype.removeEventListener=function(_,M,F,H){ee(this,_,M,F,H)};function je(_,M){var F,H=_.G;if(H)for(F=[];H;H=H.G)F.push(H);if(_=_.M,H=M.type||M,typeof M=="string")M=new L(M,_);else if(M instanceof L)M.target=M.target||_;else{var pe=M;M=new L(H,_),re(M,pe)}pe=!0;let xe,Me;if(F)for(Me=F.length-1;Me>=0;Me--)xe=M.g=F[Me],pe=gt(xe,H,!0,M)&&pe;if(xe=M.g=_,pe=gt(xe,H,!0,M)&&pe,pe=gt(xe,H,!1,M)&&pe,F)for(Me=0;Me<F.length;Me++)xe=M.g=F[Me],pe=gt(xe,H,!1,M)&&pe}Ee.prototype.N=function(){if(Ee.Z.N.call(this),this.i){var _=this.i;for(const M in _.g){const F=_.g[M];for(let H=0;H<F.length;H++)Q(F[H]);delete _.g[M],_.h--}}this.G=null},Ee.prototype.J=function(_,M,F,H){return this.i.add(String(_),M,!1,F,H)},Ee.prototype.K=function(_,M,F,H){return this.i.add(String(_),M,!0,F,H)};function gt(_,M,F,H){if(M=_.i.g[String(M)],!M)return!0;M=M.concat();let pe=!0;for(let xe=0;xe<M.length;++xe){const Me=M[xe];if(Me&&!Me.da&&Me.capture==F){const ut=Me.listener,Bn=Me.ha||Me.src;Me.fa&&ue(_.i,Me),pe=ut.call(Bn,H)!==!1&&pe}}return pe&&!H.defaultPrevented}function Nt(_,M){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(M)>2147483647?-1:s.setTimeout(_,M||0)}function St(_){_.g=Nt(()=>{_.g=null,_.i&&(_.i=!1,St(_))},_.l);const M=_.h;_.h=null,_.m.apply(null,M)}class it extends j{constructor(M,F){super(),this.m=M,this.l=F,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:St(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vt(_){j.call(this),this.h=_,this.g={}}h(vt,j);var _n=[];function ct(_){J(_.g,function(M,F){this.g.hasOwnProperty(F)&&Ae(M)},_),_.g={}}vt.prototype.N=function(){vt.Z.N.call(this),ct(this)},vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=s.JSON.stringify,Sn=s.JSON.parse,jr=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function Si(){}function Ds(){}var Xr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nn(){L.call(this,"d")}h(Nn,L);function Wn(){L.call(this,"c")}h(Wn,L);var zt={},Ei=null;function ya(){return Ei=Ei||new Ee}zt.Ia="serverreachability";function Ll(_){L.call(this,zt.Ia,_)}h(Ll,L);function bt(_){const M=ya();je(M,new Ll(M))}zt.STAT_EVENT="statevent";function En(_,M){L.call(this,zt.STAT_EVENT,_),this.stat=M}h(En,L);function Tn(_){const M=ya();je(M,new En(M,_))}zt.Ja="timingevent";function Gi(_,M){L.call(this,zt.Ja,_),this.size=M}h(Gi,L);function ba(_,M){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},M)}function ci(){this.g=!0}ci.prototype.ua=function(){this.g=!1};function XS(_,M,F,H,pe,xe){_.info(function(){if(_.g)if(xe){var Me="",ut=xe.split("&");for(let Lt=0;Lt<ut.length;Lt++){var Bn=ut[Lt].split("=");if(Bn.length>1){const gn=Bn[0];Bn=Bn[1];const Sa=gn.split("_");Me=Sa.length>=2&&Sa[1]=="type"?Me+(gn+"="+Bn+"&"):Me+(gn+"=redacted&")}}}else Me=null;else Me=xe;return"XMLHTTP REQ ("+H+") [attempt "+pe+"]: "+M+`
`+F+`
`+Me})}function sy(_,M,F,H,pe,xe,Me){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+pe+"]: "+M+`
`+F+`
`+xe+" "+Me})}function Os(_,M,F,H){_.info(function(){return"XMLHTTP TEXT ("+M+"): "+QS(_,F)+(H?" "+H:"")})}function pu(_,M){_.info(function(){return"TIMEOUT: "+M})}ci.prototype.info=function(){};function QS(_,M){if(!_.g)return M;if(!M)return null;try{const xe=JSON.parse(M);if(xe){for(_=0;_<xe.length;_++)if(Array.isArray(xe[_])){var F=xe[_];if(!(F.length<2)){var H=F[1];if(Array.isArray(H)&&!(H.length<1)){var pe=H[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(let Me=1;Me<H.length;Me++)H[Me]=""}}}}return Vn(xe)}catch{return M}}var gu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ng={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rg;function mu(){}h(mu,Si),mu.prototype.g=function(){return new XMLHttpRequest},rg=new mu;function Io(_){return encodeURIComponent(String(_))}function oy(_){var M=1;_=_.split(":");const F=[];for(;M>0&&_.length;)F.push(_.shift()),M--;return _.length&&F.push(_.join(":")),F}function es(_,M,F,H){this.j=_,this.i=M,this.l=F,this.S=H||1,this.V=new vt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ts}function ts(){this.i=null,this.g="",this.h=!1}var Yn={},Tr={};function Rs(_,M,F){_.M=1,_.A=vu(Qn(M)),_.u=F,_.R=!0,lf(_,null)}function lf(_,M){_.F=Date.now(),Ms(_),_.B=Qn(_.A);var F=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),ff(F.i,"t",H),_.C=0,F=_.j.L,_.h=new ts,_.g=_y(_.j,F?M:null,!_.u),_.P>0&&(_.O=new it(u(_.Y,_,_.g),_.P)),M=_.V,F=_.g,H=_.ba;var pe="readystatechange";Array.isArray(pe)||(pe&&(_n[0]=pe.toString()),pe=_n);for(let xe=0;xe<pe.length;xe++){const Me=ae(F,pe[xe],H||M.handleEvent,!1,M.h||M);if(!Me)break;M.g[Me.key]=Me}M=_.J?U(_.J):{},_.u?(_.v||(_.v="POST"),M["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,M)):(_.v="GET",_.g.ea(_.B,_.v,null,M)),bt(),XS(_.i,_.v,_.B,_.l,_.S,_.u)}es.prototype.ba=function(_){_=_.target;const M=this.O;M&&is(_)==3?M.j():this.Y(_)},es.prototype.Y=function(_){try{if(_==this.g)e:{const ut=is(this.g),Bn=this.g.ya(),Lt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||zr(this.g)))){this.K||ut!=4||Bn==7||(Bn==8||Lt<=0?bt(3):bt(2)),js(this);var M=this.g.ca();this.X=M;var F=ZS(this);if(this.o=M==200,sy(this.i,this.v,this.B,this.l,this.S,ut,M),this.o){if(this.U&&!this.L){t:{if(this.g){var H,pe=this.g;if((H=pe.g?pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(H)){var xe=H;break t}}xe=null}if(_=xe)Os(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zs(this,_);else{this.o=!1,this.m=3,Tn(12),Hi(this),xa(this);break e}}if(this.R){_=!0;let gn;for(;!this.K&&this.C<F.length;)if(gn=cy(this,F),gn==Tr){ut==4&&(this.m=4,Tn(14),_=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Yn){this.m=4,Tn(15),Os(this.i,this.l,F,"[Invalid Chunk]"),_=!1;break}else Os(this.i,this.l,gn,null),zs(this,gn);if(ly(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||F.length!=0||this.h.h||(this.m=1,Tn(16),_=!1),this.o=this.o&&_,!_)Os(this.i,this.l,F,"[Invalid Chunked Response]"),Hi(this),xa(this);else if(F.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),yg(Me),Me.P=!0,Tn(11))}}else Os(this.i,this.l,F,null),zs(this,F);ut==4&&Hi(this),this.o&&!this.K&&(ut==4?yy(this.j,this):(this.o=!1,Ms(this)))}else No(this.g),M==400&&F.indexOf("Unknown SID")>0?(this.m=3,Tn(12)):(this.m=0,Tn(13)),Hi(this),xa(this)}}}catch{}finally{}};function ZS(_){if(!ly(_))return _.g.la();const M=zr(_.g);if(M==="")return"";let F="";const H=M.length,pe=is(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Hi(_),xa(_),"";_.h.i=new s.TextDecoder}for(let xe=0;xe<H;xe++)_.h.h=!0,F+=_.h.i.decode(M[xe],{stream:!(pe&&xe==H-1)});return M.length=0,_.h.g+=F,_.C=0,_.h.g}function ly(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function cy(_,M){var F=_.C,H=M.indexOf(`
`,F);return H==-1?Tr:(F=Number(M.substring(F,H)),isNaN(F)?Yn:(H+=1,H+F>M.length?Tr:(M=M.slice(H,H+F),_.C=H+F,M)))}es.prototype.cancel=function(){this.K=!0,Hi(this)};function Ms(_){_.T=Date.now()+_.H,cf(_,_.H)}function cf(_,M){if(_.D!=null)throw Error("WatchDog timer not null");_.D=ba(u(_.aa,_),M)}function js(_){_.D&&(s.clearTimeout(_.D),_.D=null)}es.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(pu(this.i,this.B),this.M!=2&&(bt(),Tn(17)),Hi(this),this.m=2,xa(this)):cf(this,this.T-_)};function xa(_){_.j.I==0||_.K||yy(_.j,_)}function Hi(_){js(_);var M=_.O;M&&typeof M.dispose=="function"&&M.dispose(),_.O=null,ct(_.V),_.g&&(M=_.g,_.g=null,M.abort(),M.dispose())}function zs(_,M){try{var F=_.j;if(F.I!=0&&(F.g==_||Vs(F.h,_))){if(!_.L&&Vs(F.h,_)&&F.I==3){try{var H=F.Ba.g.parse(M)}catch{H=null}if(Array.isArray(H)&&H.length==3){var pe=H;if(pe[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<_.F)vf(F),Hl(F);else break e;Eu(F),Tn(18)}}else F.xa=pe[1],0<F.xa-F.K&&pe[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=ba(u(F.Va,F),6e3));Ls(F.h)<=1&&F.ta&&(F.ta=void 0)}else Gs(F,11)}else if((_.L||F.g==_)&&vf(F),!z(M))for(pe=F.Ba.g.parse(M),M=0;M<pe.length;M++){let Lt=pe[M];const gn=Lt[0];if(!(gn<=F.K))if(F.K=gn,Lt=Lt[1],F.I==2)if(Lt[0]=="c"){F.M=Lt[1],F.ba=Lt[2];const Sa=Lt[3];Sa!=null&&(F.ka=Sa,F.j.info("VER="+F.ka));const Hs=Lt[4];Hs!=null&&(F.za=Hs,F.j.info("SVER="+F.za));const as=Lt[5];as!=null&&typeof as=="number"&&as>0&&(H=1.5*as,F.O=H,F.j.info("backChannelRequestTimeoutMs_="+H)),H=F;const ss=_.g;if(ss){const Tu=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tu){var xe=H.h;xe.g||Tu.indexOf("spdy")==-1&&Tu.indexOf("quic")==-1&&Tu.indexOf("h2")==-1||(xe.j=xe.l,xe.g=new Set,xe.h&&(sg(xe,xe.h),xe.h=null))}if(H.G){const yf=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;yf&&(H.wa=yf,Ut(H.J,H.G,yf))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-_.F,F.j.info("Handshake RTT: "+F.T+"ms")),H=F;var Me=_;if(H.na=wy(H,H.L?H.ba:null,H.W),Me.L){og(H.h,Me);var ut=Me,Bn=H.O;Bn&&(ut.H=Bn),ut.D&&(js(ut),Ms(ut)),H.g=Me}else my(H);F.i.length>0&&qs(F)}else Lt[0]!="stop"&&Lt[0]!="close"||Gs(F,7);else F.I==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Gs(F,7):mg(F):Lt[0]!="noop"&&F.l&&F.l.qa(Lt),F.A=0)}}bt(4)}catch{}}var Xn=class{constructor(_,M){this.g=_,this.map=M}};function ig(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ag(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Ls(_){return _.h?1:_.g?_.g.size:0}function Vs(_,M){return _.h?_.h==M:_.g?_.g.has(M):!1}function sg(_,M){_.g?_.g.add(M):_.h=M}function og(_,M){_.h&&_.h==M?_.h=null:_.g&&_.g.has(M)&&_.g.delete(M)}ig.prototype.cancel=function(){if(this.i=lg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function lg(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let M=_.i;for(const F of _.g.values())M=M.concat(F.G);return M}return v(_.i)}var uy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uf(_,M){if(_){_=_.split("&");for(let F=0;F<_.length;F++){const H=_[F].indexOf("=");let pe,xe=null;H>=0?(pe=_[F].substring(0,H),xe=_[F].substring(H+1)):pe=_[F],M(pe,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Ki(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let M;_ instanceof Ki?(this.l=_.l,Ar(this,_.j),this.o=_.o,this.g=_.g,Vl(this,_.u),this.h=_.h,cg(this,py(_.i)),this.m=_.m):_&&(M=String(_).match(uy))?(this.l=!1,Ar(this,M[1]||"",!0),this.o=Bs(M[2]||""),this.g=Bs(M[3]||"",!0),Vl(this,M[4]),this.h=Bs(M[5]||"",!0),cg(this,M[6]||"",!0),this.m=Bs(M[7]||"")):(this.l=!1,this.i=new Fl(null,this.l))}Ki.prototype.toString=function(){const _=[];var M=this.j;M&&_.push(yu(M,df,!0),":");var F=this.g;return(F||M=="file")&&(_.push("//"),(M=this.o)&&_.push(yu(M,df,!0),"@"),_.push(Io(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&_.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&_.push("/"),_.push(yu(F,F.charAt(0)=="/"?ug:dy,!0))),(F=this.i.toString())&&_.push("?",F),(F=this.m)&&_.push("#",yu(F,fy)),_.join("")},Ki.prototype.resolve=function(_){const M=Qn(this);let F=!!_.j;F?Ar(M,_.j):F=!!_.o,F?M.o=_.o:F=!!_.g,F?M.g=_.g:F=_.u!=null;var H=_.h;if(F)Vl(M,_.u);else if(F=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var pe=M.h.lastIndexOf("/");pe!=-1&&(H=M.h.slice(0,pe+1)+H)}if(pe=H,pe==".."||pe==".")H="";else if(pe.indexOf("./")!=-1||pe.indexOf("/.")!=-1){H=pe.lastIndexOf("/",0)==0,pe=pe.split("/");const xe=[];for(let Me=0;Me<pe.length;){const ut=pe[Me++];ut=="."?H&&Me==pe.length&&xe.push(""):ut==".."?((xe.length>1||xe.length==1&&xe[0]!="")&&xe.pop(),H&&Me==pe.length&&xe.push("")):(xe.push(ut),H=!0)}H=xe.join("/")}else H=pe}return F?M.h=H:F=_.i.toString()!=="",F?cg(M,py(_.i)):F=!!_.m,F&&(M.m=_.m),M};function Qn(_){return new Ki(_)}function Ar(_,M,F){_.j=F?Bs(M,!0):M,_.j&&(_.j=_.j.replace(/:$/,""))}function Vl(_,M){if(M){if(M=Number(M),isNaN(M)||M<0)throw Error("Bad port number "+M);_.u=M}else _.u=null}function cg(_,M,F){M instanceof Fl?(_.i=M,hf(_.i,_.l)):(F||(M=yu(M,Bl)),_.i=new Fl(M,_.l))}function Ut(_,M,F){_.i.set(M,F)}function vu(_){return Ut(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Bs(_,M){return _?M?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function yu(_,M,F){return typeof _=="string"?(_=encodeURI(_).replace(M,Ti),F&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ti(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var df=/[#\/\?@]/g,dy=/[#\?:]/g,ug=/[#\?]/g,Bl=/[#\?@]/g,fy=/#/g;function Fl(_,M){this.h=this.g=null,this.i=_||null,this.j=!!M}function Ai(_){_.g||(_.g=new Map,_.h=0,_.i&&uf(_.i,function(M,F){_.add(decodeURIComponent(M.replace(/\+/g," ")),F)}))}t=Fl.prototype,t.add=function(_,M){Ai(this),this.i=null,_=Ul(this,_);let F=this.g.get(_);return F||this.g.set(_,F=[]),F.push(M),this.h+=1,this};function hy(_,M){Ai(_),M=Ul(_,M),_.g.has(M)&&(_.i=null,_.h-=_.g.get(M).length,_.g.delete(M))}function dg(_,M){return Ai(_),M=Ul(_,M),_.g.has(M)}t.forEach=function(_,M){Ai(this),this.g.forEach(function(F,H){F.forEach(function(pe){_.call(M,pe,H,this)},this)},this)};function fg(_,M){Ai(_);let F=[];if(typeof M=="string")dg(_,M)&&(F=F.concat(_.g.get(Ul(_,M))));else for(_=Array.from(_.g.values()),M=0;M<_.length;M++)F=F.concat(_[M]);return F}t.set=function(_,M){return Ai(this),this.i=null,_=Ul(this,_),dg(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[M]),this.h+=1,this},t.get=function(_,M){return _?(_=fg(this,_),_.length>0?String(_[0]):M):M};function ff(_,M,F){hy(_,M),F.length>0&&(_.i=null,_.g.set(Ul(_,M),v(F)),_.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],M=Array.from(this.g.keys());for(let H=0;H<M.length;H++){var F=M[H];const pe=Io(F);F=fg(this,F);for(let xe=0;xe<F.length;xe++){let Me=pe;F[xe]!==""&&(Me+="="+Io(F[xe])),_.push(Me)}}return this.i=_.join("&")};function py(_){const M=new Fl;return M.i=_.i,_.g&&(M.g=new Map(_.g),M.h=_.h),M}function Ul(_,M){return M=String(M),_.j&&(M=M.toLowerCase()),M}function hf(_,M){M&&!_.j&&(Ai(_),_.i=null,_.g.forEach(function(F,H){const pe=H.toLowerCase();H!=pe&&(hy(this,H),ff(this,pe,F))},_)),_.j=M}function ns(_,M){const F=new ci;if(s.Image){const H=new Image;H.onload=f(wa,F,"TestLoadImage: loaded",!0,M,H),H.onerror=f(wa,F,"TestLoadImage: error",!1,M,H),H.onabort=f(wa,F,"TestLoadImage: abort",!1,M,H),H.ontimeout=f(wa,F,"TestLoadImage: timeout",!1,M,H),s.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else M(!1)}function hg(_,M){const F=new ci,H=new AbortController,pe=setTimeout(()=>{H.abort(),wa(F,"TestPingServer: timeout",!1,M)},1e4);fetch(_,{signal:H.signal}).then(xe=>{clearTimeout(pe),xe.ok?wa(F,"TestPingServer: ok",!0,M):wa(F,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(pe),wa(F,"TestPingServer: error",!1,M)})}function wa(_,M,F,H,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),H(F)}catch{}}function $l(){this.g=new jr}function Fs(_){this.i=_.Sb||null,this.h=_.ab||!1}h(Fs,Si),Fs.prototype.g=function(){return new bu(this.i,this.h)};function bu(_,M){Ee.call(this),this.H=_,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(bu,Ee),t=bu.prototype,t.open=function(_,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=M,this.readyState=1,rs(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const M={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(M.body=_),(this.H||s).fetch(new Request(this.D,M)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ql(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pf(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function pf(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var M=_.value?_.value:new Uint8Array(0);(M=this.B.decode(M,{stream:!_.done}))&&(this.response=this.responseText+=M)}_.done?ql(this):rs(this),this.readyState==3&&pf(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,ql(this))},t.Na=function(_){this.g&&(this.response=_,ql(this))},t.ga=function(){this.g&&ql(this)};function ql(_){_.readyState=4,_.l=null,_.j=null,_.B=null,rs(_)}t.setRequestHeader=function(_,M){this.A.append(_,M)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],M=this.h.entries();for(var F=M.next();!F.done;)F=F.value,_.push(F[0]+": "+F[1]),F=M.next();return _.join(`\r
`)};function rs(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function _a(_){let M="";return J(_,function(F,H){M+=H,M+=":",M+=F,M+=`\r
`}),M}function xu(_,M,F){e:{for(H in F){var H=!1;break e}H=!0}H||(F=_a(F),typeof _=="string"?F!=null&&Io(F):Ut(_,M,F))}function Yt(_){Ee.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Yt,Ee);var Us=/^https?$/i,pg=["POST","PUT"];t=Yt.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,M,F,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);M=M?M.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rg.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(M,String(_),!0),this.B=!1}catch(xe){wu(this,xe);return}if(_=F||"",F=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var pe in H)F.set(pe,H[pe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const xe of H.keys())F.set(xe,H.get(xe));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(F.keys()).find(xe=>xe.toLowerCase()=="content-type"),pe=s.FormData&&_ instanceof s.FormData,!(Array.prototype.indexOf.call(pg,M,void 0)>=0)||H||pe||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xe,Me]of F)this.g.setRequestHeader(xe,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(xe){wu(this,xe)}};function wu(_,M){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=M,_.o=5,gg(_),Po(_)}function gg(_){_.A||(_.A=!0,je(_,"complete"),je(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,je(this,"complete"),je(this,"abort"),Po(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Po(this,!0)),Yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?_u(this):this.Xa())},t.Xa=function(){_u(this)};function _u(_){if(_.h&&typeof a<"u"){if(_.v&&is(_)==4)setTimeout(_.Ca.bind(_),0);else if(je(_,"readystatechange"),is(_)==4){_.h=!1;try{const xe=_.ca();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var F;if(!(F=M)){var H;if(H=xe===0){let Me=String(_.D).match(uy)[1]||null;!Me&&s.self&&s.self.location&&(Me=s.self.location.protocol.slice(0,-1)),H=!Us.test(Me?Me.toLowerCase():"")}F=H}if(F)je(_,"complete"),je(_,"success");else{_.o=6;try{var pe=is(_)>2?_.g.statusText:""}catch{pe=""}_.l=pe+" ["+_.ca()+"]",gg(_)}}finally{Po(_)}}}}function Po(_,M){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const F=_.g;_.g=null,M||je(_,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function is(_){return _.g?_.g.readyState:0}t.ca=function(){try{return is(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var M=this.g.responseText;return _&&M.indexOf(_)==0&&(M=M.substring(_.length)),Sn(M)}};function zr(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function No(_){const M={};_=(_.g&&is(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(z(_[H]))continue;var F=oy(_[H]);const pe=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const xe=M[pe]||[];M[pe]=xe,xe.push(F)}te(M,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(_,M,F){return F&&F.internalChannelParams&&F.internalChannelParams[_]||M}function Gl(_){this.za=0,this.i=[],this.j=new ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$s("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$s("baseRetryDelayMs",5e3,_),this.Za=$s("retryDelaySeedMs",1e4,_),this.Ta=$s("forwardChannelMaxRetries",2,_),this.va=$s("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new ig(_&&_.concurrentRequestLimit),this.Ba=new $l,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Gl.prototype,t.ka=8,t.I=1,t.connect=function(_,M,F,H){Tn(0),this.W=_,this.H=M||{},F&&H!==void 0&&(this.H.OSID=F,this.H.OAID=H),this.F=this.X,this.J=wy(this,null,this.W),qs(this)};function mg(_){if(gf(_),_.I==3){var M=_.V++,F=Qn(_.J);if(Ut(F,"SID",_.M),Ut(F,"RID",M),Ut(F,"TYPE","terminate"),Su(_,F),M=new es(_,_.j,M),M.M=2,M.A=vu(Qn(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(M.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=M.A,F=!0),F||(M.g=_y(M.j,null),M.g.ea(M.A)),M.F=Date.now(),Ms(M)}xy(_)}function Hl(_){_.g&&(yg(_),_.g.cancel(),_.g=null)}function gf(_){Hl(_),_.v&&(s.clearTimeout(_.v),_.v=null),vf(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&s.clearTimeout(_.m),_.m=null)}function qs(_){if(!ag(_.h)&&!_.m){_.m=!0;var M=_.Ea;D||P(),N||(D(),N=!0),C.add(M,_),_.D=0}}function mf(_,M){return Ls(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=M.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=ba(u(_.Ea,_,M),by(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const pe=new es(this,this.j,_);let xe=this.o;if(this.U&&(xe?(xe=U(xe),re(xe,this.U)):xe=this.U),this.u!==null||this.R||(pe.J=xe,xe=null),this.S)e:{for(var M=0,F=0;F<this.i.length;F++){t:{var H=this.i[F];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(M+=H,M>4096){M=F;break e}if(M===4096||F===this.i.length-1){M=F+1;break e}}M=1e3}else M=1e3;M=gy(this,pe,M),F=Qn(this.J),Ut(F,"RID",_),Ut(F,"CVER",22),this.G&&Ut(F,"X-HTTP-Session-Id",this.G),Su(this,F),xe&&(this.R?M="headers="+Io(_a(xe))+"&"+M:this.u&&xu(F,this.u,xe)),sg(this.h,pe),this.Ra&&Ut(F,"TYPE","init"),this.S?(Ut(F,"$req",M),Ut(F,"SID","null"),pe.U=!0,Rs(pe,F,null)):Rs(pe,F,M),this.I=2}}else this.I==3&&(_?vg(this,_):this.i.length==0||ag(this.h)||vg(this))};function vg(_,M){var F;M?F=M.l:F=_.V++;const H=Qn(_.J);Ut(H,"SID",_.M),Ut(H,"RID",F),Ut(H,"AID",_.K),Su(_,H),_.u&&_.o&&xu(H,_.u,_.o),F=new es(_,_.j,F,_.D+1),_.u===null&&(F.J=_.o),M&&(_.i=M.G.concat(_.i)),M=gy(_,F,1e3),F.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),sg(_.h,F),Rs(F,H,M)}function Su(_,M){_.H&&J(_.H,function(F,H){Ut(M,H,F)}),_.l&&J({},function(F,H){Ut(M,H,F)})}function gy(_,M,F){F=Math.min(_.i.length,F);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var pe=_.i;let ut=-1;for(;;){const Bn=["count="+F];ut==-1?F>0?(ut=pe[0].g,Bn.push("ofs="+ut)):ut=0:Bn.push("ofs="+ut);let Lt=!0;for(let gn=0;gn<F;gn++){var xe=pe[gn].g;const Sa=pe[gn].map;if(xe-=ut,xe<0)ut=Math.max(0,pe[gn].g-100),Lt=!1;else try{xe="req"+xe+"_"||"";try{var Me=Sa instanceof Map?Sa:Object.entries(Sa);for(const[Hs,as]of Me){let ss=as;o(as)&&(ss=Vn(as)),Bn.push(xe+Hs+"="+encodeURIComponent(ss))}}catch(Hs){throw Bn.push(xe+"type="+encodeURIComponent("_badmap")),Hs}}catch{H&&H(Sa)}}if(Lt){Me=Bn.join("&");break e}}Me=void 0}return _=_.i.splice(0,F),M.G=_,Me}function my(_){if(!_.g&&!_.v){_.Y=1;var M=_.Da;D||P(),N||(D(),N=!0),C.add(M,_),_.A=0}}function Eu(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=ba(u(_.Da,_),by(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,vy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=ba(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tn(10),Hl(this),vy(this))};function yg(_){_.B!=null&&(s.clearTimeout(_.B),_.B=null)}function vy(_){_.g=new es(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var M=Qn(_.na);Ut(M,"RID","rpc"),Ut(M,"SID",_.M),Ut(M,"AID",_.K),Ut(M,"CI",_.F?"0":"1"),!_.F&&_.ia&&Ut(M,"TO",_.ia),Ut(M,"TYPE","xmlhttp"),Su(_,M),_.u&&_.o&&xu(M,_.u,_.o),_.O&&(_.g.H=_.O);var F=_.g;_=_.ba,F.M=1,F.A=vu(Qn(M)),F.u=null,F.R=!0,lf(F,_)}t.Va=function(){this.C!=null&&(this.C=null,Hl(this),Eu(this),Tn(19))};function vf(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function yy(_,M){var F=null;if(_.g==M){vf(_),yg(_),_.g=null;var H=2}else if(Vs(_.h,M))F=M.G,og(_.h,M),H=1;else return;if(_.I!=0){if(M.o)if(H==1){F=M.u?M.u.length:0,M=Date.now()-M.F;var pe=_.D;H=ya(),je(H,new Gi(H,F)),qs(_)}else my(_);else if(pe=M.m,pe==3||pe==0&&M.X>0||!(H==1&&mf(_,M)||H==2&&Eu(_)))switch(F&&F.length>0&&(M=_.h,M.i=M.i.concat(F)),pe){case 1:Gs(_,5);break;case 4:Gs(_,10);break;case 3:Gs(_,6);break;default:Gs(_,2)}}}function by(_,M){let F=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(F*=2),F*M}function Gs(_,M){if(_.j.info("Error code "+M),M==2){var F=u(_.bb,_),H=_.Ua;const pe=!H;H=new Ki(H||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ar(H,"https"),vu(H),pe?ns(H.toString(),F):hg(H.toString(),F)}else Tn(2);_.I=0,_.l&&_.l.pa(M),xy(_),gf(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))};function xy(_){if(_.I=0,_.ja=[],_.l){const M=lg(_.h);(M.length!=0||_.i.length!=0)&&(b(_.ja,M),b(_.ja,_.i),_.h.i.length=0,v(_.i),_.i.length=0),_.l.oa()}}function wy(_,M,F){var H=F instanceof Ki?Qn(F):new Ki(F);if(H.g!="")M&&(H.g=M+"."+H.g),Vl(H,H.u);else{var pe=s.location;H=pe.protocol,M=M?M+"."+pe.hostname:pe.hostname,pe=+pe.port;const xe=new Ki(null);H&&Ar(xe,H),M&&(xe.g=M),pe&&Vl(xe,pe),F&&(xe.h=F),H=xe}return F=_.G,M=_.wa,F&&M&&Ut(H,F,M),Ut(H,"VER",_.ka),Su(_,H),H}function _y(_,M,F){if(M&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return M=_.Aa&&!_.ma?new Yt(new Fs({ab:F})):new Yt(_.ma),M.Fa(_.L),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sy(){}t=Sy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Kl(){}Kl.prototype.g=function(_,M){return new ui(_,M)};function ui(_,M){Ee.call(this),this.g=new Gl(M),this.l=_,this.h=M&&M.messageUrlParams||null,_=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(_?_["X-WebChannel-Content-Type"]=M.messageContentType:_={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.sa&&(_?_["X-WebChannel-Client-Profile"]=M.sa:_={"X-WebChannel-Client-Profile":M.sa}),this.g.U=_,(_=M&&M.Qb)&&!z(_)&&(this.g.u=_),this.A=M&&M.supportsCrossDomainXhr||!1,this.v=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!z(M)&&(this.g.G=M,_=this.h,_!==null&&M in _&&(_=this.h,M in _&&delete _[M])),this.j=new Do(this)}h(ui,Ee),ui.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ui.prototype.close=function(){mg(this.g)},ui.prototype.o=function(_){var M=this.g;if(typeof _=="string"){var F={};F.__data__=_,_=F}else this.v&&(F={},F.__data__=Vn(_),_=F);M.i.push(new Xn(M.Ya++,_)),M.I==3&&qs(M)},ui.prototype.N=function(){this.g.l=null,delete this.j,mg(this.g),delete this.g,ui.Z.N.call(this)};function Ey(_){Nn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var M=_.__sm__;if(M){e:{for(const F in M){_=F;break e}_=void 0}(this.i=_)&&(_=this.i,M=M!==null&&_ in M?M[_]:void 0),this.data=M}else this.data=_}h(Ey,Nn);function Ty(){Wn.call(this),this.status=1}h(Ty,Wn);function Do(_){this.g=_}h(Do,Sy),Do.prototype.ra=function(){je(this.g,"a")},Do.prototype.qa=function(_){je(this.g,new Ey(_))},Do.prototype.pa=function(_){je(this.g,new Ty)},Do.prototype.oa=function(){je(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,ui.prototype.send=ui.prototype.o,ui.prototype.open=ui.prototype.m,ui.prototype.close=ui.prototype.close,X8=function(){return new Kl},Y8=function(){return ya()},W8=zt,XC={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gu.NO_ERROR=0,gu.TIMEOUT=8,gu.HTTP_ERROR=6,jx=gu,ng.COMPLETE="complete",K8=ng,Ds.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",Ee.prototype.listen=Ee.prototype.J,Em=Ds,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,H8=Yt}).apply(typeof Db<"u"?Db:typeof self<"u"?self:typeof window<"u"?window:{});const RL="@firebase/firestore",ML="4.9.2";class ei{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let Dp="12.3.0";const Cd=new e_("@firebase/firestore");function ch(){return Cd.logLevel}function Ne(t,...e){if(Cd.logLevel<=At.DEBUG){const n=e.map($N);Cd.debug(`Firestore (${Dp}): ${t}`,...n)}}function Gn(t,...e){if(Cd.logLevel<=At.ERROR){const n=e.map($N);Cd.error(`Firestore (${Dp}): ${t}`,...n)}}function uv(t,...e){if(Cd.logLevel<=At.WARN){const n=e.map($N);Cd.warn(`Firestore (${Dp}): ${t}`,...n)}}function $N(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Q8(t,r,n)}function Q8(t,e,n){let r=`FIRESTORE (${Dp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function We(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Q8(e,i,r)}function Ge(t,e){return t}const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Eo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class uo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Rce{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ei.UNAUTHENTICATED)))}shutdown(){}}class jce{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new uo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new uo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new uo)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new Rce(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new ei(e)}}class zce{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ei.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lce{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zce(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ei.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vce{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const r=a=>{a.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ne("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jL(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Bce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class qN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Bce(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function QC(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return cA(i)===cA(a)?st(i,a):cA(i)?1:-1}return st(t.length,e.length)}const Fce=55296,Uce=57343;function cA(t){const e=t.charCodeAt(0);return e>=Fce&&e<=Uce}function Kh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function Z8(t){return t+"\0"}const zL="__name__";class to{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return to.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof to?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=to.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return st(e.length,n.length)}static compareSegments(e,n){const r=to.isNumericId(e),i=to.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?to.extractNumericId(e).compare(to.extractNumericId(n)):QC(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vc.fromString(e.substring(4,e.length-2))}}class Bt extends to{construct(e,n,r){return new Bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Bt(n)}static emptyPath(){return new Bt([])}}const $ce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends to{construct(e,n,r){return new kn(e,n,r)}static isValidIdentifier(e){return $ce.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zL}static keyField(){return new kn([zL])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Oe(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Oe(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Oe(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Oe(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(n)}static emptyPath(){return new kn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Bt.fromString(e))}static fromName(e){return new ze(Bt.fromString(e).popFirst(5))}static empty(){return new ze(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Bt(e.slice()))}}function J8(t,e,n){if(!n)throw new Oe(Se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qce(t,e,n,r){if(e===!0&&r===!0)throw new Oe(Se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LL(t){if(!ze.isDocumentKey(t))throw new Oe(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VL(t){if(ze.isDocumentKey(t))throw new Oe(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eq(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function o_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function Bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=o_(t);throw new Oe(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function or(t,e){const n={typeString:t};return e&&(n.value=e),n}function c0(t,e){if(!eq(t))throw new Oe(Se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Oe(Se.INVALID_ARGUMENT,n);return!0}const BL=-62135596800,FL=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*FL);return new pt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Oe(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oe(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<BL)throw new Oe(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FL}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(c0(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-BL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:or("string",pt._jsonSchemaVersion),seconds:or("number"),nanoseconds:or("number")};class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new pt(0,0))}static max(){return new Qe(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Wh=-1;class yw{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function ZC(t){return t.fields.find((e=>e.kind===2))}function Hu(t){return t.fields.filter((e=>e.kind!==2))}yw.UNKNOWN_ID=-1;class zx{constructor(e,n){this.fieldPath=e,this.kind=n}}class dv{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new dv(0,ha.min())}}function tq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Qe.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new ha(i,ze.empty(),e)}function nq(t){return new ha(t.readTime,t.key,Wh)}class ha{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ha(Qe.min(),ze.empty(),Wh)}static max(){return new ha(Qe.max(),ze.empty(),Wh)}}function GN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ze.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}const rq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function au(t){if(t.code!==Se.FAILED_PRECONDITION||t.message!==rq)throw t;Ne("LocalStore","Unexpectedly lost primary lease")}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):he.reject(n)}static resolve(e){return new he(((n,r)=>{n(e)}))}static reject(e){return new he(((n,r)=>{r(e)}))}static waitFor(e){return new he(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next((i=>i?he.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new he(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new he(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const ra="SimpleDb";class l_{static open(e,n,r,i){try{return new l_(n,e.transaction(i,r))}catch(a){throw new Lm(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new uo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Lm(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=HN(r.target.error);this.S.reject(new Lm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ne(ra,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Hce(n)}}class Bc{static delete(e){return Ne(ra,"Removing database:",e),Ju(EN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!J1())return!1;if(Bc.F())return!0;const e=br(),n=Bc.M(e),r=0<n&&n<10,i=aq(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Bc.M(br())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ne(ra,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new Lm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Oe(Se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Oe(Se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Lm(e,s))},i.onupgradeneeded=a=>{Ne(ra,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{Ne(ra,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=l_.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),he.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(Ne(ra,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Gce{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ju(this.U.delete())}}class Lm extends Oe{constructor(e,n){super(Se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function su(t){return t.name==="IndexedDbTransactionError"}class Hce{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Ne(ra,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Ne(ra,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ju(r)}add(e){return Ne(ra,"ADD",this.store.name,e,e),Ju(this.store.add(e))}get(e){return Ju(this.store.get(e)).next((n=>(n===void 0&&(n=null),Ne(ra,"GET",this.store.name,e,n),n)))}delete(e){return Ne(ra,"DELETE",this.store.name,e),Ju(this.store.delete(e))}count(){return Ne(ra,"COUNT",this.store.name),Ju(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new he(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.H(a,((o,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new he(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){Ne(ra,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new he(((r,i)=>{n.onerror=a=>{const s=HN(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}H(e,n){const r=[];return new he(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new Gce(o),u=n(o.primaryKey,o.value,c);if(u instanceof he){const f=u.catch((h=>(c.done(),he.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>he.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ju(t){return new he(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=HN(r.target.error);n(i)}}))}let UL=!1;function HN(t){const e=Bc.M(br());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return UL||(UL=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Vm="IndexBackfiller";class Kce{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ne(Vm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Ne(Vm,`Documents written: ${n}`)}catch(n){su(n)?Ne(Vm,"Ignoring IndexedDB error during index backfill: ",n):await au(n)}await this.re(6e4)}))}}class Wce{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return he.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return Ne(Vm,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(Ne(Vm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=nq(a);GN(s,r)>0&&(r=s)})),new ha(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Oi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oi.ce=-1;const md=-1;function c_(t){return t==null}function fv(t){return t===0&&1/t==-1/0}function sq(t){return typeof t=="number"&&Number.isInteger(t)&&!fv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const bw="";function ai(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$L(e)),e=Yce(t.get(n),e);return $L(e)}function Yce(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case bw:n+="";break;default:n+=a}}return n}function $L(t){return t+bw+""}function io(t){const e=t.length;if(We(e>=2,64408,{path:t}),e===2)return We(t.charAt(0)===bw&&t.charAt(1)==="",56145,{path:t}),Bt.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(bw,a);switch((s<0||s>n)&&Fe(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Fe(61167,{path:t})}a=s+2}return new Bt(r)}const Ku="remoteDocuments",u0="owner",Wf="owner",hv="mutationQueues",Xce="userId",fs="mutations",qL="batchId",ld="userMutationsIndex",GL=["userId","batchId"];function Lx(t,e){return[t,ai(e)]}function oq(t,e,n){return[t,ai(e),n]}const Qce={},Yh="documentMutations",xw="remoteDocumentsV14",Zce=["prefixPath","collectionGroup","readTime","documentId"],Vx="documentKeyIndex",Jce=["prefixPath","collectionGroup","documentId"],lq="collectionGroupIndex",eue=["collectionGroup","readTime","prefixPath","documentId"],pv="remoteDocumentGlobal",JC="remoteDocumentGlobalKey",Xh="targets",cq="queryTargetsIndex",tue=["canonicalId","targetId"],Qh="targetDocuments",nue=["targetId","path"],KN="documentTargetsIndex",rue=["path","targetId"],ww="targetGlobalKey",vd="targetGlobal",gv="collectionParents",iue=["collectionId","parent"],Zh="clientMetadata",aue="clientId",u_="bundles",sue="bundleId",d_="namedQueries",oue="name",WN="indexConfiguration",lue="indexId",eI="collectionGroupIndex",cue="collectionGroup",Bm="indexState",uue=["indexId","uid"],uq="sequenceNumberIndex",due=["uid","sequenceNumber"],Fm="indexEntries",fue=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dq="documentKeyIndex",hue=["indexId","uid","orderedDocumentKey"],f_="documentOverlays",pue=["userId","collectionPath","documentId"],tI="collectionPathOverlayIndex",gue=["userId","collectionPath","largestBatchId"],fq="collectionGroupOverlayIndex",mue=["userId","collectionGroup","largestBatchId"],YN="globals",vue="name",hq=[hv,fs,Yh,Ku,Xh,u0,vd,Qh,Zh,pv,gv,u_,d_],yue=[...hq,f_],pq=[hv,fs,Yh,xw,Xh,u0,vd,Qh,Zh,pv,gv,u_,d_,f_],gq=pq,XN=[...gq,WN,Bm,Fm],bue=XN,mq=[...XN,YN],xue=mq;class nI extends iq{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function xr(t,e){const n=Ge(t);return Bc.O(n.le,e)}function HL(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ou(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ln{constructor(e,n){this.comparator=e,this.root=n||Kr.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ob(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ob(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ob(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ob(this.root,e,this.comparator,!0)}}class Ob{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Kr.RED,this.left=i??Kr.EMPTY,this.right=a??Kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Kr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Kr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1;Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Kr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kt{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KL(this.data.getIterator())}getIteratorFrom(e){return new KL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class KL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yf(t){return t.hasNext()?t.getNext():void 0}class Ri{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Ri([])}unionWith(e){let n=new Kt(kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class yq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new yq("Invalid base64 string: "+a):a}})(e);return new Hn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const wue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=wue.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(t.seconds),nanos:yn(t.nanos)}}function yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vl(t){return typeof t=="string"?Hn.fromBase64String(t):Hn.fromUint8Array(t)}const bq="server_timestamp",xq="__type__",wq="__previous_value__",_q="__local_write_time__";function QN(t){return(t?.mapValue?.fields||{})[xq]?.stringValue===bq}function h_(t){const e=t.mapValue.fields[wq];return QN(e)?h_(e):e}function mv(t){const e=ml(t.mapValue.fields[_q].timestampValue);return new pt(e.seconds,e.nanos)}class _ue{constructor(e,n,r,i,a,s,o,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}}const _w="(default)";class Id{constructor(e,n){this.projectId=e,this.database=n||_w}static empty(){return new Id("","")}get isDefaultDatabase(){return this.database===_w}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}const ZN="__type__",Sq="__max__",Nc={mapValue:{fields:{__type__:{stringValue:Sq}}}},JN="__vector__",Jh="value",Bx={nullValue:"NULL_VALUE"};function Gc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?QN(t)?4:Eq(t)?9007199254740991:p_(t)?10:11:Fe(28295,{value:t})}function bo(t,e){if(t===e)return!0;const n=Gc(t);if(n!==Gc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mv(t).isEqual(mv(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=ml(i.timestampValue),o=ml(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return vl(i.bytesValue).isEqual(vl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return yn(i.geoPointValue.latitude)===yn(a.geoPointValue.latitude)&&yn(i.geoPointValue.longitude)===yn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return yn(i.integerValue)===yn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=yn(i.doubleValue),o=yn(a.doubleValue);return s===o?fv(s)===fv(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return Kh(t.arrayValue.values||[],e.arrayValue.values||[],bo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(HL(s)!==HL(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!bo(s[c],o[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function vv(t,e){return(t.values||[]).find((n=>bo(n,e)))!==void 0}function Hc(t,e){if(t===e)return 0;const n=Gc(t),r=Gc(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=yn(a.integerValue||a.doubleValue),c=yn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return WL(t.timestampValue,e.timestampValue);case 4:return WL(mv(t),mv(e));case 5:return QC(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=vl(a),c=vl(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=st(o[u],c[u]);if(f!==0)return f}return st(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=st(yn(a.latitude),yn(s.latitude));return o!==0?o:st(yn(a.longitude),yn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return YL(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[Jh]?.arrayValue,f=c[Jh]?.arrayValue,h=st(u?.values?.length||0,f?.values?.length||0);return h!==0?h:YL(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Nc.mapValue&&s===Nc.mapValue)return 0;if(a===Nc.mapValue)return 1;if(s===Nc.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=QC(c[h],f[h]);if(g!==0)return g;const v=Hc(o[c[h]],u[f[h]]);if(v!==0)return v}return st(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:n})}}function WL(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=ml(t),r=ml(e),i=st(n.seconds,r.seconds);return i!==0?i:st(n.nanos,r.nanos)}function YL(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Hc(n[i],r[i]);if(a)return a}return st(n.length,r.length)}function ep(t){return rI(t)}function rI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ml(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return vl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ze.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=rI(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${rI(n.fields[s])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function Fx(t){switch(Gc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=h_(t);return e?16+Fx(e):16;case 5:return 2*t.stringValue.length;case 6:return vl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Fx(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ou(r.fields,((a,s)=>{i+=a.length+Fx(s)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function yv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iI(t){return!!t&&"integerValue"in t}function bv(t){return!!t&&"arrayValue"in t}function XL(t){return!!t&&"nullValue"in t}function QL(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ux(t){return!!t&&"mapValue"in t}function p_(t){return(t?.mapValue?.fields||{})[ZN]?.stringValue===JN}function Um(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ou(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Um(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Um(t.arrayValue.values[n]);return e}return{...t}}function Eq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Sq}const Tq={mapValue:{fields:{[ZN]:{stringValue:JN},[Jh]:{arrayValue:{}}}}};function Sue(t){return"nullValue"in t?Bx:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?yv(Id.empty(),ze.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?p_(t)?Tq:{mapValue:{}}:Fe(35942,{value:t})}function Eue(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?yv(Id.empty(),ze.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Tq:"mapValue"in t?p_(t)?{mapValue:{}}:Nc:Fe(61959,{value:t})}function ZL(t,e){const n=Hc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function JL(t,e){const n=Hc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ux(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Um(n)}setAll(e){let n=kn.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Um(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Ux(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ux(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ou(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ri(Um(this.value))}}function Aq(t){const e=[];return ou(t.fields,((n,r)=>{const i=new kn([n]);if(Ux(r)){const a=Aq(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Ri(e)}class zn{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new zn(e,0,Qe.min(),Qe.min(),Qe.min(),ri.empty(),0)}static newFoundDocument(e,n,r,i){return new zn(e,1,n,Qe.min(),r,i,0)}static newNoDocument(e,n){return new zn(e,2,n,Qe.min(),Qe.min(),ri.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,Qe.min(),Qe.min(),ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tp{constructor(e,n){this.position=e,this.inclusive=n}}function e3(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=ze.comparator(ze.fromName(s.referenceValue),n.key):r=Hc(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function t3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bo(t.position[n],e.position[n]))return!1;return!0}class xv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Tue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class kq{}class kt extends kq{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Aue(e,n,r):n==="array-contains"?new Iue(e,r):n==="in"?new Oq(e,r):n==="not-in"?new Pue(e,r):n==="array-contains-any"?new Nue(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kue(e,r):new Cue(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hc(n,this.value)):n!==null&&Gc(this.value)===Gc(n)&&this.matchesComparison(Hc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends kq{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ht(e,n)}matches(e){return np(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function np(t){return t.op==="and"}function aI(t){return t.op==="or"}function eD(t){return Cq(t)&&np(t)}function Cq(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function sI(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+ep(t.value);if(eD(t))return t.filters.map((e=>sI(e))).join(",");{const e=t.filters.map((n=>sI(n))).join(",");return`${t.op}(${e})`}}function Iq(t,e){return t instanceof kt?(function(r,i){return i instanceof kt&&r.op===i.op&&r.field.isEqual(i.field)&&bo(r.value,i.value)})(t,e):t instanceof Ht?(function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&Iq(s,i.filters[o])),!0):!1})(t,e):void Fe(19439)}function Pq(t,e){const n=t.filters.concat(e);return Ht.create(n,t.op)}function Nq(t){return t instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ep(n.value)}`})(t):t instanceof Ht?(function(n){return n.op.toString()+" {"+n.getFilters().map(Nq).join(" ,")+"}"})(t):"Filter"}class Aue extends kt{constructor(e,n,r){super(e,n,r),this.key=ze.fromName(r.referenceValue)}matches(e){const n=ze.comparator(e.key,this.key);return this.matchesComparison(n)}}class kue extends kt{constructor(e,n){super(e,"in",n),this.keys=Dq("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Cue extends kt{constructor(e,n){super(e,"not-in",n),this.keys=Dq("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Dq(t,e){return(e.arrayValue?.values||[]).map((n=>ze.fromName(n.referenceValue)))}class Iue extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bv(n)&&vv(n.arrayValue,this.value)}}class Oq extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vv(this.value.arrayValue,n)}}class Pue extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(vv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vv(this.value.arrayValue,n)}}class Nue extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>vv(this.value.arrayValue,r)))}}class Due{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function oI(t,e=null,n=[],r=[],i=null,a=null,s=null){return new Due(t,e,n,r,i,a,s)}function Pd(t){const e=Ge(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>sI(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),c_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>ep(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>ep(r))).join(",")),e.Te=n}return e.Te}function d0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Tue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Iq(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t3(t.startAt,e.startAt)&&t3(t.endAt,e.endAt)}function Sw(t){return ze.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ew(t,e){return t.filters.filter((n=>n instanceof kt&&n.field.isEqual(e)))}function n3(t,e,n){let r=Bx,i=!0;for(const a of Ew(t,e)){let s=Bx,o=!0;switch(a.op){case"<":case"<=":s=Sue(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=Bx}ZL({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];ZL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function r3(t,e,n){let r=Nc,i=!0;for(const a of Ew(t,e)){let s=Nc,o=!0;switch(a.op){case">=":case">":s=Eue(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=Nc}JL({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];JL({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class Op{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rq(t,e,n,r,i,a,s,o){return new Op(t,e,n,r,i,a,s,o)}function f0(t){return new Op(t)}function i3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mq(t){return t.collectionGroup!==null}function $m(t){const e=Ge(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Kt(kn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new xv(a,r))})),n.has(kn.keyField().canonicalString())||e.Ie.push(new xv(kn.keyField(),r))}return e.Ie}function da(t){const e=Ge(t);return e.Ee||(e.Ee=Oue(e,$m(t))),e.Ee}function Oue(t,e){if(t.limitType==="F")return oI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new xv(i.field,a)}));const n=t.endAt?new tp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tp(t.startAt.position,t.startAt.inclusive):null;return oI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lI(t,e){const n=t.filters.concat([e]);return new Op(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Tw(t,e,n){return new Op(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function g_(t,e){return d0(da(t),da(e))&&t.limitType===e.limitType}function jq(t){return`${Pd(da(t))}|lt:${t.limitType}`}function uh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Nq(i))).join(", ")}]`),c_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>ep(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>ep(i))).join(",")),`Target(${r})`})(da(t))}; limitType=${t.limitType})`}function h0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ze.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of $m(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=e3(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,$m(r),i)||r.endAt&&!(function(s,o,c){const u=e3(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,$m(r),i))})(t,e)}function zq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Lq(t){return(e,n)=>{let r=!1;for(const i of $m(t)){const a=Rue(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Rue(t,e,n){const r=t.field.isKeyField()?ze.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?Hc(c,u):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe(19790,{direction:t.dir})}}class Pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ou(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return vq(this.inner)}size(){return this.innerSize}}const Mue=new ln(ze.comparator);function ca(){return Mue}const Vq=new ln(ze.comparator);function Tm(...t){let e=Vq;for(const n of t)e=e.insert(n.key,n);return e}function Bq(t){let e=Vq;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ao(){return qm()}function Fq(){return qm()}function qm(){return new Pl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const jue=new ln(ze.comparator),zue=new Kt(ze.comparator);function mt(...t){let e=zue;for(const n of t)e=e.add(n);return e}const Lue=new Kt(st);function tD(){return Lue}function nD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fv(e)?"-0":e}}function Uq(t){return{integerValue:""+t}}function Vue(t,e){return sq(e)?Uq(e):nD(t,e)}class m_{constructor(){this._=void 0}}function Bue(t,e,n){return t instanceof wv?(function(i,a){const s={fields:{[xq]:{stringValue:bq},[_q]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&QN(a)&&(a=h_(a)),a&&(s.fields[wq]=a),{mapValue:s}})(n,e):t instanceof Nd?qq(t,e):t instanceof rp?Gq(t,e):(function(i,a){const s=$q(i,a),o=a3(s)+a3(i.Ae);return iI(s)&&iI(i.Ae)?Uq(o):nD(i.serializer,o)})(t,e)}function Fue(t,e,n){return t instanceof Nd?qq(t,e):t instanceof rp?Gq(t,e):n}function $q(t,e){return t instanceof _v?(function(r){return iI(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class wv extends m_{}class Nd extends m_{constructor(e){super(),this.elements=e}}function qq(t,e){const n=Hq(e);for(const r of t.elements)n.some((i=>bo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class rp extends m_{constructor(e){super(),this.elements=e}}function Gq(t,e){let n=Hq(e);for(const r of t.elements)n=n.filter((i=>!bo(i,r)));return{arrayValue:{values:n}}}class _v extends m_{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function a3(t){return yn(t.integerValue||t.doubleValue)}function Hq(t){return bv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Kq{constructor(e,n){this.field=e,this.transform=n}}function Uue(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Nd&&i instanceof Nd||r instanceof rp&&i instanceof rp?Kh(r.elements,i.elements,bo):r instanceof _v&&i instanceof _v?bo(r.Ae,i.Ae):r instanceof wv&&i instanceof wv})(t.transform,e.transform)}class $ue{constructor(e,n){this.version=e,this.transformResults=n}}class vr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $x(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class v_{}function Wq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new p0(t.key,vr.none()):new Rp(t.key,t.data,vr.none());{const n=t.data,r=ri.empty();let i=new Kt(kn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Nl(t.key,r,new Ri(i.toArray()),vr.none())}}function que(t,e,n){t instanceof Rp?(function(i,a,s){const o=i.value.clone(),c=o3(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Nl?(function(i,a,s){if(!$x(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=o3(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(Yq(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Gm(t,e,n,r){return t instanceof Rp?(function(a,s,o,c){if(!$x(a.precondition,s))return o;const u=a.value.clone(),f=l3(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Nl?(function(a,s,o,c){if(!$x(a.precondition,s))return o;const u=l3(a.fieldTransforms,c,s),f=s.data;return f.setAll(Yq(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return $x(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function Gue(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=$q(r.transform,i||null);a!=null&&(n===null&&(n=ri.empty()),n.set(r.field,a))}return n||null}function s3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Kh(r,i,((a,s)=>Uue(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rp extends v_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nl extends v_{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Yq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function o3(t,e,n){const r=new Map;We(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Fue(s,o,n[i]))}return r}function l3(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Bue(a,s,e))}return r}class p0 extends v_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xq extends v_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&que(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Fq();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=Wq(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Qe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),mt())}isEqual(e){return this.batchId===e.batchId&&Kh(this.mutations,e.mutations,((n,r)=>s3(n,r)))&&Kh(this.baseMutations,e.baseMutations,((n,r)=>s3(n,r)))}}class iD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){We(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return jue})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new iD(e,n,r,i)}}class aD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Hue{constructor(e,n){this.count=e,this.unchangedNames=n}}var rr,It;function Kue(t){switch(t){case Se.OK:return Fe(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function Qq(t){if(t===void 0)return Gn("GRPC error has no .code"),Se.UNKNOWN;switch(t){case rr.OK:return Se.OK;case rr.CANCELLED:return Se.CANCELLED;case rr.UNKNOWN:return Se.UNKNOWN;case rr.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case rr.INTERNAL:return Se.INTERNAL;case rr.UNAVAILABLE:return Se.UNAVAILABLE;case rr.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case rr.NOT_FOUND:return Se.NOT_FOUND;case rr.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case rr.ABORTED:return Se.ABORTED;case rr.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case rr.DATA_LOSS:return Se.DATA_LOSS;default:return Fe(39323,{code:t})}}(It=rr||(rr={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";function Wue(){return new TextEncoder}const Yue=new Vc([4294967295,4294967295],0);function c3(t){const e=Wue().encode(t),n=new G8;return n.update(e),new Uint8Array(n.digest())}function u3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Vc([n,r],0),new Vc([i,a],0)]}class sD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Am(`Invalid padding: ${n}`);if(r<0)throw new Am(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Am(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Am(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Vc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Vc.fromNumber(r)));return i.compare(Yue)===1&&(i=new Vc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=c3(e),[r,i]=u3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new sD(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=c3(e),[r,i]=u3(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Am extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class g0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,m0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new g0(Qe.min(),i,new ln(st),ca(),mt())}}class m0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new m0(r,n,mt(),mt(),mt())}}class qx{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Zq{constructor(e,n){this.targetId=e,this.Ce=n}}class Jq{constructor(e,n,r=Hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class d3{constructor(){this.ve=0,this.Fe=f3(),this.Me=Hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=mt(),n=mt(),r=mt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe(38017,{changeType:a})}})),new m0(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=f3()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Xue{constructor(e){this.Ge=e,this.ze=new Map,this.je=ca(),this.Je=Rb(),this.He=Rb(),this.Ye=new ln(st)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Sw(a))if(r===0){const s=new ze(a.path);this.et(n,s,zn.newNoDocument(s,Qe.min()))}else We(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=vl(r).toUint8Array()}catch(c){if(c instanceof yq)return uv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new sD(s,i,a)}catch(c){return uv(c instanceof Am?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&Sw(o.target)){const c=new ze(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,zn.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.qe())}}));let r=mt();this.He.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new g0(e,n,this.Ye,this.je,r);return this.je=ca(),this.Je=Rb(),this.He=Rb(),this.Ye=new ln(st),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new d3,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Kt(st),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Kt(st),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new d3),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Rb(){return new ln(ze.comparator)}function f3(){return new ln(ze.comparator)}const Que={asc:"ASCENDING",desc:"DESCENDING"},Zue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jue={and:"AND",or:"OR"};class ede{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cI(t,e){return t.useProto3Json||c_(e)?e:{value:e}}function ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eG(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tde(t,e){return ip(t,e.toTimestamp())}function bi(t){return We(!!t,49232),Qe.fromTimestamp((function(n){const r=ml(n);return new pt(r.seconds,r.nanos)})(t))}function oD(t,e){return uI(t,e).canonicalString()}function uI(t,e){const n=(function(i){return new Bt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function tG(t){const e=Bt.fromString(t);return We(uG(e),10190,{key:e.toString()}),e}function Aw(t,e){return oD(t.databaseId,e.path)}function yd(t,e){const n=tG(e);if(n.get(1)!==t.databaseId.projectId)throw new Oe(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Oe(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ze(iG(n))}function nG(t,e){return oD(t.databaseId,e)}function rG(t){const e=tG(t);return e.length===4?Bt.emptyPath():iG(e)}function dI(t){return new Bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iG(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function h3(t,e,n){return{name:Aw(t,e),fields:n.value.mapValue.fields}}function nde(t,e,n){const r=yd(t,e.name),i=bi(e.updateTime),a=e.createTime?bi(e.createTime):Qe.min(),s=new ri({mapValue:{fields:e.fields}}),o=zn.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function rde(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Fe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(We(f===void 0||typeof f=="string",58123),Hn.fromBase64String(f||"")):(We(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Hn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?Se.UNKNOWN:Qq(u.code);return new Oe(f,u.message||"")})(s);n=new Jq(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yd(t,r.document.name),a=bi(r.document.updateTime),s=r.document.createTime?bi(r.document.createTime):Qe.min(),o=new ri({mapValue:{fields:r.document.fields}}),c=zn.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new qx(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yd(t,r.document),a=r.readTime?bi(r.readTime):Qe.min(),s=zn.newNoDocument(i,a),o=r.removedTargetIds||[];n=new qx([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yd(t,r.document),a=r.removedTargetIds||[];n=new qx([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Hue(i,a),o=r.targetId;n=new Zq(o,s)}}return n}function kw(t,e){let n;if(e instanceof Rp)n={update:h3(t,e.key,e.value)};else if(e instanceof p0)n={delete:Aw(t,e.key)};else if(e instanceof Nl)n={update:h3(t,e.key,e.data),updateMask:cde(e.fieldMask)};else{if(!(e instanceof Xq))return Fe(16599,{Vt:e.type});n={verify:Aw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof wv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Nd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof rp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof _v)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Fe(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:tde(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),n}function fI(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?vr.updateTime(bi(a.updateTime)):a.exists!==void 0?vr.exists(a.exists):vr.none()})(e.currentDocument):vr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)We(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new wv;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Nd(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new rp(f)}else"increment"in o?c=new _v(s,o.increment):Fe(16584,{proto:o});const u=kn.fromServerFormat(o.fieldPath);return new Kq(u,c)})(t,i))):[];if(e.update){e.update.name;const i=yd(t,e.update.name),a=new ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new Ri(u.map((f=>kn.fromServerFormat(f))))})(e.updateMask);return new Nl(i,a,s,n,r)}return new Rp(i,a,n,r)}if(e.delete){const i=yd(t,e.delete);return new p0(i,n)}if(e.verify){const i=yd(t,e.verify);return new Xq(i,n)}return Fe(1463,{proto:e})}function ide(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?bi(i.updateTime):bi(a);return s.isEqual(Qe.min())&&(s=bi(a)),new $ue(s,i.transformResults||[])})(n,e)))):[]}function aG(t,e){return{documents:[nG(t,e.path)]}}function sG(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nG(t,i);const a=(function(u){if(u.length!==0)return cG(Ht.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:dh(g.field),direction:sde(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=cI(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function oG(t){let e=rG(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){We(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=lG(h);return g instanceof Ht&&eD(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new xv(fh(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,c_(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,v=h.values||[];return new tp(v,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,v=h.values||[];return new tp(v,g)})(n.endAt)),Rq(e,i,s,a,o,"F",c,u)}function ade(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lG(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fh(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fh(n.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fh(n.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=fh(n.unaryFilter.field);return kt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kt.create(fh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ht.create(n.compositeFilter.filters.map((r=>lG(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function sde(t){return Que[t]}function ode(t){return Zue[t]}function lde(t){return Jue[t]}function dh(t){return{fieldPath:t.canonicalString()}}function fh(t){return kn.fromServerFormat(t.fieldPath)}function cG(t){return t instanceof kt?(function(n){if(n.op==="=="){if(QL(n.value))return{unaryFilter:{field:dh(n.field),op:"IS_NAN"}};if(XL(n.value))return{unaryFilter:{field:dh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(QL(n.value))return{unaryFilter:{field:dh(n.field),op:"IS_NOT_NAN"}};if(XL(n.value))return{unaryFilter:{field:dh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dh(n.field),op:ode(n.op),value:n.value}}})(t):t instanceof Ht?(function(n){const r=n.getFilters().map((i=>cG(i)));return r.length===1?r[0]:{compositeFilter:{op:lde(n.op),filters:r}}})(t):Fe(54877,{filter:t})}function cde(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function uG(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class el{constructor(e,n,r,i,a=Qe.min(),s=Qe.min(),o=Hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new el(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class dG{constructor(e){this.yt=e}}function ude(t,e){let n;if(e.document)n=nde(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=Od(e.noDocument.readTime);n=zn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe(56709);{const r=ze.fromSegments(e.unknownDocument.path),i=Od(e.unknownDocument.version);n=zn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new pt(i[0],i[1]);return Qe.fromTimestamp(a)})(e.readTime)),n}function p3(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Cw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:Aw(a,s.key),fields:s.data.value.mapValue.fields,updateTime:ip(a,s.version.toTimestamp()),createTime:ip(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Dd(e.version)};else{if(!e.isUnknownDocument())return Fe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Dd(e.version)}}return r}function Cw(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Dd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Od(t){const e=new pt(t.seconds,t.nanoseconds);return Qe.fromTimestamp(e)}function ed(t,e){const n=(e.baseMutations||[]).map((a=>fI(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>fI(t.yt,a))),i=pt.fromMillis(e.localWriteTimeMs);return new rD(e.batchId,i,n,r)}function km(t){const e=Od(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Od(t.lastLimboFreeSnapshotVersion):Qe.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return We(s===1,1966,{count:s}),da(f0(rG(a.documents[0])))})(t.query):(function(a){return da(oG(a))})(t.query),new el(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Hn.fromBase64String(t.resumeToken))}function fG(t,e){const n=Dd(e.snapshotVersion),r=Dd(e.lastLimboFreeSnapshotVersion);let i;i=Sw(e.target)?aG(t.yt,e.target):sG(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pd(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function hG(t){const e=oG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tw(e,e.limit,"L"):e}function uA(t,e){return new aD(e.largestBatchId,fI(t.yt,e.overlayMutation))}function g3(t,e){const n=e.path.lastSegment();return[t,ai(e.path.popLast()),n]}function m3(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Dd(r.readTime),documentKey:ai(r.documentKey.path),largestBatchId:r.largestBatchId}}class dde{getBundleMetadata(e,n){return v3(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Od(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return v3(e).put((function(i){return{bundleId:i.id,createTime:Dd(bi(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return y3(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:hG(a.bundledQuery),readTime:Od(a.readTime)}})(r)}))}saveNamedQuery(e,n){return y3(e).put((function(i){return{name:i.name,readTime:Dd(bi(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function v3(t){return xr(t,u_)}function y3(t){return xr(t,d_)}class y_{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new y_(e,r)}getOverlay(e,n){return im(e).get(g3(this.userId,n)).next((r=>r?uA(this.serializer,r):null))}getOverlays(e,n){const r=ao();return he.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new aD(n,s);i.push(this.St(e,o))})),he.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(ai(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(im(e).Z(tI,o))})),he.waitFor(a)}getOverlaysForCollection(e,n,r){const i=ao(),a=ai(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return im(e).J(tI,s).next((o=>{for(const c of o){const u=uA(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=ao();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return im(e).ee({index:fq,range:o},((c,u,f)=>{const h=uA(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}St(e,n){return im(e).put((function(i,a,s){const[o,c,u]=g3(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:kw(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function im(t){return xr(t,f_)}class fde{bt(e){return xr(e,YN)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Hn.fromUint8Array(r):Hn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class td{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(yn(e.integerValue));else if("doubleValue"in e){const r=yn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),fv(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=ml(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(vl(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Eq(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):p_(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Fe(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=Jh,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(yn(a)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),ze.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}td.Kt=new td;const Xf=255;function hde(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function b3(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=hde(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class pde{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=b3(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=b3(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Xf),this.sn(255)}_n(){this.an(Xf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Xf?(this.sn(Xf),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Xf?(this.an(Xf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class gde{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class mde{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class am{constructor(){this.cn=new pde,this.ln=new gde(this.cn),this.hn=new mde(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class nd{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new nd(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Gx(this.En),directionalValue:Gx(this.dn),orderedDocumentKey:Gx(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function vc(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=x3(t.En,e.En),n!==0?n:(n=x3(t.dn,e.dn),n!==0?n:ze.comparator(t.In,e.In)))}function x3(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Gx(t){return k$()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function w3(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class _3{constructor(e){this.mn=new Kt(((n,r)=>kn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(We(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=ZC(e);if(n!==void 0&&!this.wn(n))return!1;const r=Hu(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.Sn(o,c)||!this.bn(this.fn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.fn.length||!this.bn(this.fn[s++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Kt(kn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new zx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new zx(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new zx(r.field,r.dir==="asc"?0:1)));return new yw(yw.UNKNOWN_ID,this.collectionId,n,dv.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function pG(t){if(We(t instanceof kt||t instanceof Ht,20012),t instanceof kt){if(t instanceof Oq){const n=t.value.arrayValue?.values?.map((r=>kt.create(t.field,"==",r)))||[];return Ht.create(n,"or")}return t}const e=t.filters.map((n=>pG(n)));return Ht.create(e,t.op)}function vde(t){if(t.getFilters().length===0)return[];const e=gI(pG(t));return We(gG(e),7391),hI(e)||pI(e)?[e]:e.getFilters()}function hI(t){return t instanceof kt}function pI(t){return t instanceof Ht&&eD(t)}function gG(t){return hI(t)||pI(t)||(function(n){if(n instanceof Ht&&aI(n)){for(const r of n.getFilters())if(!hI(r)&&!pI(r))return!1;return!0}return!1})(t)}function gI(t){if(We(t instanceof kt||t instanceof Ht,34018),t instanceof kt)return t;if(t.filters.length===1)return gI(t.filters[0]);const e=t.filters.map((r=>gI(r)));let n=Ht.create(e,t.op);return n=Iw(n),gG(n)?n:(We(n instanceof Ht,64498),We(np(n),40251),We(n.filters.length>1,57927),n.filters.reduce(((r,i)=>lD(r,i))))}function lD(t,e){let n;return We(t instanceof kt||t instanceof Ht,38388),We(e instanceof kt||e instanceof Ht,25473),n=t instanceof kt?e instanceof kt?(function(i,a){return Ht.create([i,a],"and")})(t,e):S3(t,e):e instanceof kt?S3(e,t):(function(i,a){if(We(i.filters.length>0&&a.filters.length>0,48005),np(i)&&np(a))return Pq(i,a.getFilters());const s=aI(i)?i:a,o=aI(i)?a:i,c=s.filters.map((u=>lD(u,o)));return Ht.create(c,"or")})(t,e),Iw(n)}function S3(t,e){if(np(e))return Pq(e,t.getFilters());{const n=e.filters.map((r=>lD(t,r)));return Ht.create(n,"or")}}function Iw(t){if(We(t instanceof kt||t instanceof Ht,11850),t instanceof kt)return t;const e=t.getFilters();if(e.length===1)return Iw(e[0]);if(Cq(t))return t;const n=e.map((i=>Iw(i))),r=[];return n.forEach((i=>{i instanceof kt?r.push(i):i instanceof Ht&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ht.create(r,t.op)}class yde{constructor(){this.Cn=new cD}addToCollectionParentIndex(e,n){return this.Cn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(ha.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(ha.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class cD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Kt(Bt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(Bt.comparator)).toArray()}}const E3="IndexedDbIndexManager",Mb=new Uint8Array(0);class bde{constructor(e,n){this.databaseId=n,this.vn=new cD,this.Fn=new Pl((r=>Pd(r)),((r,i)=>d0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const a={collectionId:r,parent:ai(i)};return T3(e).put(a)}return he.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Z8(n),""],!1,!0);return T3(e).J(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(io(s.parent))}return r}))}addFieldIndex(e,n){const r=sm(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=Zf(e);return a.next((o=>{s.put(m3(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=sm(e),i=Zf(e),a=Qf(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=sm(e),r=Qf(e),i=Zf(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return he.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new _3(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=Qf(e);let i=!0;const a=new Map;return he.forEach(this.Mn(n),(s=>this.xn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=mt();const o=[];return he.forEach(a,((c,u)=>{Ne(E3,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((O=>`${O.fieldPath}:${O.kind}`)).join(",")}`})(c)} to execute ${Pd(n)}`);const f=(function(I,O){const D=ZC(O);if(D===void 0)return null;for(const N of Ew(I,D.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null})(u,c),h=(function(I,O){const D=new Map;for(const N of Hu(O))for(const C of Ew(I,N.fieldPath))switch(C.op){case"==":case"in":D.set(N.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return D.set(N.fieldPath.canonicalString(),C.value),Array.from(D.values())}return null})(u,c),g=(function(I,O){const D=[];let N=!0;for(const C of Hu(O)){const P=C.kind===0?n3(I,C.fieldPath,I.startAt):r3(I,C.fieldPath,I.startAt);D.push(P.value),N&&(N=P.inclusive)}return new tp(D,N)})(u,c),v=(function(I,O){const D=[];let N=!0;for(const C of Hu(O)){const P=C.kind===0?r3(I,C.fieldPath,I.endAt):n3(I,C.fieldPath,I.endAt);D.push(P.value),N&&(N=P.inclusive)}return new tp(D,N)})(u,c),b=this.On(c,u,g),x=this.On(c,u,v),w=this.Nn(c,u,h),S=this.Bn(c.indexId,f,b,g.inclusive,x,v.inclusive,w);return he.forEach(S,(T=>r.Y(T,n.limit).next((I=>{I.forEach((O=>{const D=ze.fromSegments(O.documentKey);s.has(D)||(s=s.add(D),o.push(D))}))}))))})).next((()=>o))}return he.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=vde(Ht.create(e.filters,"and")).map((r=>oI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Ln(n[h/u]):Mb,v=this.kn(e,g,r[h%u],i),b=this.qn(e,g,a[h%u],s),x=o.map((w=>this.kn(e,g,w,!0)));f.push(...this.createRange(v,b,x))}return f}kn(e,n,r,i){const a=new nd(e,ze.empty(),n,r);return i?a:a.An()}qn(e,n,r,i){const a=new nd(e,ze.empty(),n,r);return i?a.An():a}xn(e,n){const r=new _3(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.yn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return he.forEach(i,(a=>this.xn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Kt(kn.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new am;for(const i of Hu(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.Pn(i.kind);td.Kt.Dt(a,s)}return r.un()}Ln(e){const n=new am;return td.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new am;return td.Kt.Dt(yv(this.databaseId,n),r.Pn((function(a){const s=Hu(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new am);let a=0;for(const s of Hu(e)){const o=r[a++];for(const c of i)if(this.Un(n,s.fieldPath)&&bv(o))i=this.Kn(i,s,o);else{const u=c.Pn(s.kind);td.Kt.Dt(o,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new am;c.seed(o.un()),td.Kt.Dt(s,c.Pn(n.kind)),a.push(c)}return a}Un(e,n){return!!e.filters.find((r=>r instanceof kt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=sm(e),i=Zf(e);return(n?r.J(eI,IDBKeyRange.bound(n,n)):r.J()).next((a=>{const s=[];return he.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new dv(h.sequenceNumber,new ha(Od(h.readTime),new ze(io(h.documentKey)),h.largestBatchId)):dv.empty(),v=f.fields.map((([b,x])=>new zx(kn.fromServerFormat(b),x)));return new yw(f.indexId,f.collectionGroup,v,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:st(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=sm(e),a=Zf(e);return this.Gn(e).next((s=>i.J(eI,IDBKeyRange.bound(n,n)).next((o=>he.forEach(o,(c=>a.put(m3(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return he.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?he.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),he.forEach(o,(c=>this.zn(e,i,c).next((u=>{const f=this.jn(a,c);return u.isEqual(f)?he.resolve():this.Jn(e,a,c,u,f)})))))))}))}Hn(e,n,r,i){return Qf(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Qf(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Qf(e);let a=new Kt(vc);return i.ee({index:dq,range:IDBKeyRange.only([r.indexId,this.uid,Gx(this.$n(r,n))])},((s,o)=>{a=a.add(new nd(r.indexId,n,w3(o.arrayValue),w3(o.directionalValue)))})).next((()=>a))}jn(e,n){let r=new Kt(vc);const i=this.Qn(n,e);if(i==null)return r;const a=ZC(n);if(a!=null){const s=e.data.field(a.fieldPath);if(bv(s))for(const o of s.arrayValue.values||[])r=r.add(new nd(n.indexId,e.key,this.Ln(o),i))}else r=r.add(new nd(n.indexId,e.key,Mb,i));return r}Jn(e,n,r,i,a){Ne(E3,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const v=c.getIterator(),b=u.getIterator();let x=Yf(v),w=Yf(b);for(;x||w;){let S=!1,T=!1;if(x&&w){const I=f(x,w);I<0?T=!0:I>0&&(S=!0)}else x!=null?T=!0:S=!0;S?(h(w),w=Yf(b)):T?(g(x),x=Yf(v)):(x=Yf(v),w=Yf(b))}})(i,a,vc,(o=>{s.push(this.Hn(e,n,r,o))}),(o=>{s.push(this.Yn(e,n,r,o))})),he.waitFor(s)}Gn(e){let n=1;return Zf(e).ee({index:uq,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>vc(s,o))).filter(((s,o,c)=>!o||vc(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=vc(s,e),c=vc(s,n);if(o===0)i[0]=e.An();else if(o>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const o=i[s].Vn(this.uid,Mb,ze.empty()),c=i[s+1].Vn(this.uid,Mb,ze.empty());a.push(IDBKeyRange.bound(o,c))}return a}Zn(e,n){return vc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(A3)}getMinOffset(e,n){return he.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Fe(44426))))).next(A3)}}function T3(t){return xr(t,gv)}function Qf(t){return xr(t,Fm)}function sm(t){return xr(t,WN)}function Zf(t){return xr(t,Bm)}function A3(t){We(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;GN(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ha(e.readTime,e.documentKey,n)}const k3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mG=41943040;class ti{static withCacheSize(e){return new ti(e,ti.DEFAULT_COLLECTION_PERCENTILE,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function vG(t,e,n){const r=t.store(fs),i=t.store(Yh),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{We(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=oq(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return he.waitFor(a).next((()=>u))}function Pw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fe(14731);e=t.noDocument}return JSON.stringify(e).length}ti.DEFAULT_COLLECTION_PERCENTILE=10,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ti.DEFAULT=new ti(mG,ti.DEFAULT_COLLECTION_PERCENTILE,ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ti.DISABLED=new ti(-1,0,0);class b_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){We(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new b_(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yc(e).ee({index:ld,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=hh(e),s=yc(e);return s.add({}).next((o=>{We(typeof o=="number",49019);const c=new rD(o,n,r,i),u=(function(v,b,x){const w=x.baseMutations.map((T=>kw(v.yt,T))),S=x.mutations.map((T=>kw(v.yt,T)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:S}})(this.serializer,this.userId,c),f=[];let h=new Kt(((g,v)=>st(g.canonicalString(),v.canonicalString())));for(const g of i){const v=oq(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(v,Qce))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=c.keys()})),he.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return yc(e).get(n).next((r=>r?(We(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ed(this.serializer,r)):null))}er(e,n){return this.Xn[n]?he.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return yc(e).ee({index:ld,range:i},((s,o,c)=>{o.userId===this.userId&&(We(o.batchId>=r,47524,{tr:r}),a=ed(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=md;return yc(e).ee({index:ld,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,md],[this.userId,Number.POSITIVE_INFINITY]);return yc(e).J(ld,n).next((r=>r.map((i=>ed(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Lx(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return hh(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=io(f);if(u===this.userId&&n.path.isEqual(g))return yc(e).get(h).next((v=>{if(!v)throw Fe(61480,{nr:s,batchId:h});We(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:h}),a.push(ed(this.serializer,v))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(st);const i=[];return n.forEach((a=>{const s=Lx(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=hh(e).ee({range:o},((u,f,h)=>{const[g,v,b]=u,x=io(v);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),he.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Lx(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Kt(st);return hh(e).ee({range:s},((c,u,f)=>{const[h,g,v]=c,b=io(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(v)):f.done()})).next((()=>this.rr(e,o)))}rr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(yc(e).get(a).next((s=>{if(s===null)throw Fe(35274,{batchId:a});We(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(ed(this.serializer,s))})))})),he.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return vG(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),he.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return he.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return hh(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=io(a[1]);i.push(c)}else o.done()})).next((()=>{We(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return yG(e,this.userId,n)}_r(e){return bG(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:md,lastStreamToken:""}))}}function yG(t,e,n){const r=Lx(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return hh(t).ee({range:a,X:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function yc(t){return xr(t,fs)}function hh(t){return xr(t,Yh)}function bG(t){return xr(t,hv)}class Rd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rd(0)}static cr(){return new Rd(-1)}}class xde{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Rd(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Qe.fromTimestamp(new pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Jf(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(We(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return Jf(e).ee(((s,o)=>{const c=km(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>he.waitFor(a))).next((()=>i))}forEachTarget(e,n){return Jf(e).ee(((r,i)=>{const a=km(i);n(a)}))}lr(e){return C3(e).get(ww).next((n=>(We(n!==null,2888),n)))}hr(e,n){return C3(e).put(ww,n)}Pr(e,n){return Jf(e).put(fG(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Pd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Jf(e).ee({range:i,index:cq},((s,o,c)=>{const u=km(o);d0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=Cc(e);return n.forEach((s=>{const o=ai(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),he.waitFor(i)}removeMatchingKeys(e,n,r){const i=Cc(e);return he.forEach(n,(a=>{const s=ai(a.path);return he.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=Cc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Cc(e);let a=mt();return i.ee({range:r,X:!0},((s,o,c)=>{const u=io(s[1]),f=new ze(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=ai(n.path),i=IDBKeyRange.bound([r],[Z8(r)],!1,!0);let a=0;return Cc(e).ee({index:KN,X:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return Jf(e).get(n).next((r=>r?km(r):null))}}function Jf(t){return xr(t,Xh)}function C3(t){return xr(t,vd)}function Cc(t){return xr(t,Qh)}const I3="LruGarbageCollector",xG=1048576;function P3([t,e],[n,r]){const i=st(t,n);return i===0?st(e,r):i}class wde{constructor(e){this.Ir=e,this.buffer=new Kt(P3),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();P3(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ne(I3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){su(n)?Ne(I3,"Ignoring IndexedDB error during garbage collection: ",n):await au(n)}await this.Vr(3e5)}))}}class _de{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return he.resolve(Oi.ce);const r=new wde(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(k3)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k3):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),ch()<=At.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function _G(t,e){return new _de(t,e)}class Sde{constructor(e,n){this.db=e,this.garbageCollector=_G(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return jb(e,r)}removeReference(e,n,r){return jb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return jb(e,n)}br(e,n){return(function(i,a){let s=!1;return bG(i).te((o=>yG(i,o,a).next((c=>(c&&(s=!0),he.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((s,o)=>{if(o<=n){const c=this.br(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Qe.min()),Cc(e).delete((function(h){return[0,ai(h.path)]})(s)))))}));i.push(c)}})).next((()=>he.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return jb(e,n)}Sr(e,n){const r=Cc(e);let i,a=Oi.ce;return r.ee({index:KN},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==Oi.ce&&n(new ze(io(i)),a),a=u,i=c):a=Oi.ce})).next((()=>{a!==Oi.ce&&n(new ze(io(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jb(t,e){return Cc(t).put((function(r,i){return{targetId:0,path:ai(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class SG{constructor(){this.changes=new Pl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ede{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Fu(e).put(r)}removeEntry(e,n,r){return Fu(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Cw(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=zn.newInvalidDocument(n);return Fu(e).ee({index:Vx,range:IDBKeyRange.only(om(n))},((i,a)=>{r=this.Cr(n,a)})).next((()=>r))}vr(e,n){let r={size:0,document:zn.newInvalidDocument(n)};return Fu(e).ee({index:Vx,range:IDBKeyRange.only(om(n))},((i,a)=>{r={document:this.Cr(n,a),size:Pw(a)}})).next((()=>r))}getEntries(e,n){let r=ca();return this.Fr(e,n,((i,a)=>{const s=this.Cr(i,a);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=ca(),i=new ln(ze.comparator);return this.Fr(e,n,((a,s)=>{const o=this.Cr(a,s);r=r.insert(a,o),i=i.insert(a,Pw(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return he.resolve();let i=new Kt(O3);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(om(i.first()),om(i.last())),s=i.getIterator();let o=s.getNext();return Fu(e).ee({index:Vx,range:a},((c,u,f)=>{const h=ze.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&O3(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(om(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Cw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fu(e).J(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=ca();for(const h of u){const g=this.Cr(ze.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(h0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=ca();const s=D3(n,r),o=D3(n,ha.max());return Fu(e).ee({index:lq,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Cr(ze.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new Tde(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return N3(e).get(JC).next((n=>(We(!!n,20021),n)))}Dr(e,n){return N3(e).put(JC,n)}Cr(e,n){if(n){const r=ude(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Qe.min())))return r}return zn.newInvalidDocument(e)}}function EG(t){return new Ede(t)}class Tde extends SG{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Pl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Kt(((a,s)=>st(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Br.get(a);if(n.push(this.Nr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=p3(this.Nr.serializer,s);i=i.add(a.path.popLast());const u=Pw(c);r+=u-o.size,n.push(this.Nr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=p3(this.Nr.serializer,s.convertToNoDocument(Qe.min()));n.push(this.Nr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Nr.updateMetadata(e,r)),he.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((a,s)=>{this.Br.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function N3(t){return xr(t,pv)}function Fu(t){return xr(t,xw)}function om(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function D3(t,e){const n=e.documentKey.path.toArray();return[t,Cw(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function O3(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=st(n[a],r[a]),i)return i;return i=st(n.length,r.length),i||(i=st(n[n.length-2],r[r.length-2]),i||st(n[n.length-1],r[r.length-1]))}class Ade{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class TG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Gm(r.mutation,i,Ri.empty(),pt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,mt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=mt()){const i=ao();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=Tm();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=ao();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,mt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=ca();const s=qm(),o=(function(){return qm()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Nl)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),Gm(f.mutation,u,f.mutation.getFieldMask(),pt.now())):s.set(u.key,Ri.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new Ade(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=qm();let i=new ln(((s,o)=>s-o)),a=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Ri.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||mt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=Fq();f.forEach((g=>{if(!a.has(g)){const v=Wq(n.get(g),r.get(g));v!==null&&h.set(g,v),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return he.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return ze.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mq(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):he.resolve(ao());let o=Wh,c=a;return s.next((u=>he.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?he.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,mt()))).next((f=>({batchId:o,changes:Bq(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ze(n)).next((r=>{let i=Tm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Tm();return this.indexManager.getCollectionParents(e,a).next((o=>he.forEach(o,(c=>{const u=(function(h,g){return new Op(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,zn.newInvalidDocument(f)))}));let o=Tm();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&Gm(f.mutation,u,Ri.empty(),pt.now()),h0(n,u)&&(o=o.insert(c,u))})),o}))}}class kde{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return he.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:bi(i.createTime)}})(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:hG(i.bundledQuery),readTime:bi(i.readTime)}})(n)),he.resolve()}}class Cde{constructor(){this.overlays=new ln(ze.comparator),this.qr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ao();return he.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),he.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const i=ao(),a=n.length+1,s=new ze(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return he.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ln(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=ao(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=ao(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return he.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new aD(n,r));let a=this.qr.get(n);a===void 0&&(a=mt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class Ide{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}class uD{constructor(){this.Qr=new Kt(Pr.$r),this.Ur=new Kt(Pr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Pr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Pr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ze(new Bt([])),r=new Pr(n,e),i=new Pr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ze(new Bt([])),r=new Pr(n,e),i=new Pr(n,e+1);let a=mt();return this.Ur.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Pr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ze.comparator(e.key,n.key)||st(e.Yr,n.Yr)}static Kr(e,n){return st(e.Yr,n.Yr)||ze.comparator(e.key,n.key)}}class Pde{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Pr.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new rD(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new Pr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return he.resolve(s)}lookupMutationBatch(e,n){return he.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?md:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pr(n,0),i=new Pr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(s=>{const o=this.Xr(s.Yr);a.push(o)})),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(st);return n.forEach((i=>{const a=new Pr(i,0),s=new Pr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(o=>{r=r.add(o.Yr)}))})),he.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const s=new Pr(new ze(a),0);let o=new Kt(st);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Yr)),!0)}),s),he.resolve(this.ti(o))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return he.forEach(n.mutations,(i=>{const a=new Pr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Pr(n,0),i=this.Zr.firstAfterOrEqual(r);return he.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Nde{constructor(e){this.ri=e,this.docs=(function(){return new ln(ze.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let r=ca();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))})),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ca();const s=n.path,o=new ze(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||GN(nq(f),r)<=0||(i.has(f.key)||h0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Fe(9500)}ii(e,n){return he.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Dde(this)}getSize(e){return he.resolve(this.size)}}class Dde extends SG{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),he.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class Ode{constructor(e){this.persistence=e,this.si=new Pl((n=>Pd(n)),d0),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.oi=0,this._i=new uD,this.targetCount=0,this.ai=Rd.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),he.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Rd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Pr(n),he.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),he.waitFor(a).next((()=>i))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),he.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),he.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this._i.containsKey(n))}}class dD{constructor(e,n){this.ui={},this.overlays={},this.ci=new Oi(0),this.li=!1,this.li=!0,this.hi=new Ide,this.referenceDelegate=e(this),this.Pi=new Ode(this),this.indexManager=new yde,this.remoteDocumentCache=(function(i){return new Nde(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new dG(n),this.Ii=new kde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Cde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Pde(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new Rde(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return he.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class Rde extends iq{constructor(e){super(),this.currentSequenceNumber=e}}class x_{constructor(e){this.persistence=e,this.Ri=new uD,this.Vi=null}static mi(e){return new x_(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(r=>{const i=ze.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,Qe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return he.or([()=>he.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Nw{constructor(e,n){this.persistence=e,this.pi=new Pl((r=>ai(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=_G(this,n)}static mi(e,n){return new Nw(e,n)}Ei(){}di(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return he.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?he.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((o=>{o||(r++,a.removeEntry(s,Qe.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fx(e.data.value)),n}br(e,n,r){return he.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return he.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Mde{constructor(e){this.serializer=e}k(e,n,r,i){const a=new l_("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(u0)})(e),(function(c){c.createObjectStore(hv,{keyPath:Xce}),c.createObjectStore(fs,{keyPath:qL,autoIncrement:!0}).createIndex(ld,GL,{unique:!0}),c.createObjectStore(Yh)})(e),R3(e),(function(c){c.createObjectStore(Ku)})(e));let s=he.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Qh),c.deleteObjectStore(Xh),c.deleteObjectStore(vd)})(e),R3(e)),s=s.next((()=>(function(c){const u=c.store(vd),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Qe.min().toTimestamp(),targetCount:0};return u.put(ww,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(fs).J().next((h=>{c.deleteObjectStore(fs),c.createObjectStore(fs,{keyPath:qL,autoIncrement:!0}).createIndex(ld,GL,{unique:!0});const g=u.store(fs),v=h.map((b=>g.put(b)));return he.waitFor(v)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(Zh,{keyPath:aue})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(pv)})(e),this.wi(a))))),r<7&&i>=7&&(s=s.next((()=>this.Si(a)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(u_,{keyPath:sue})})(e),(function(c){c.createObjectStore(d_,{keyPath:oue})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(f_,{keyPath:pue});u.createIndex(tI,gue,{unique:!1}),u.createIndex(fq,mue,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(xw,{keyPath:Zce});u.createIndex(Vx,Jce),u.createIndex(lq,eue)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Ku)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(WN,{keyPath:lue,autoIncrement:!0}).createIndex(eI,cue,{unique:!1}),c.createObjectStore(Bm,{keyPath:uue}).createIndex(uq,due,{unique:!1}),c.createObjectStore(Fm,{keyPath:fue}).createIndex(dq,hue,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(Bm).clear()})).next((()=>{n.objectStore(Fm).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(YN,{keyPath:vue})})(e)}))),r<18&&i>=18&&k$()&&(s=s.next((()=>{n.objectStore(Bm).clear()})).next((()=>{n.objectStore(Fm).clear()}))),s}wi(e){let n=0;return e.store(Ku).ee(((r,i)=>{n+=Pw(i)})).next((()=>{const r={byteSize:n};return e.store(pv).put(JC,r)}))}yi(e){const n=e.store(hv),r=e.store(fs);return n.J().next((i=>he.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,md],[a.userId,a.lastAcknowledgedBatchId]);return r.J(ld,s).next((o=>he.forEach(o,(c=>{We(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=ed(this.serializer,c);return vG(e,a.userId,u).next((()=>{}))}))))}))))}Si(e){const n=e.store(Qh),r=e.store(Ku);return e.store(vd).get(ww).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new Bt(s),u=(function(h){return[0,ai(h)]})(c);a.push(n.get(u).next((f=>f?he.resolve():(h=>n.put({targetId:0,path:ai(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>he.waitFor(a)))}))}bi(e,n){e.createObjectStore(gv,{keyPath:iue});const r=n.store(gv),i=new cD,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:ai(c)})}};return n.store(Ku).ee({X:!0},((s,o)=>{const c=new Bt(s);return a(c.popLast())})).next((()=>n.store(Yh).ee({X:!0},(([s,o,c],u)=>{const f=io(o);return a(f.popLast())}))))}Di(e){const n=e.store(Xh);return n.ee(((r,i)=>{const a=km(i),s=fG(this.serializer,a);return n.put(s)}))}Ci(e,n){const r=n.store(Ku),i=[];return r.ee(((a,s)=>{const o=n.store(xw),c=(function(h){return h.document?new ze(Bt.fromString(h.document.name).popFirst(5)):h.noDocument?ze.fromSegments(h.noDocument.path):h.unknownDocument?ze.fromSegments(h.unknownDocument.path):Fe(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>he.waitFor(i)))}Fi(e,n){const r=n.store(fs),i=EG(this.serializer),a=new dD(x_.mi,this.serializer.yt);return r.J().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??mt();ed(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),he.forEach(o,((c,u)=>{const f=new ei(u),h=y_.wt(this.serializer,f),g=a.getIndexManager(f),v=b_.wt(f,this.serializer,g,a.referenceDelegate);return new TG(i,v,h,g).recalculateAndSaveOverlaysForDocumentKeys(new nI(n,Oi.ce),c).next()}))}))}}function R3(t){t.createObjectStore(Qh,{keyPath:nue}).createIndex(KN,rue,{unique:!0}),t.createObjectStore(Xh,{keyPath:"targetId"}).createIndex(cq,tue,{unique:!0}),t.createObjectStore(vd)}const bc="IndexedDbPersistence",dA=18e5,fA=5e3,hA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jde="main";class fD{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=s,this.document=o,this.xi=u,this.Oi=f,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!fD.v())throw new Oe(Se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sde(this,i),this.$i=n+jde,this.serializer=new dG(c),this.Ui=new Bc(this.$i,this.Ni,new Mde(this.serializer)),this.hi=new fde,this.Pi=new xde(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EG(this.serializer),this.Ii=new dde,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Gn(bc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(Se.FAILED_PRECONDITION,hA);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Oi(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>zb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(su(e))return Ne(bc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne(bc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return lm(e).get(Wf).next((n=>he.resolve(this.es(n))))}ts(e){return zb(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,dA)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=xr(n,Zh);return r.J().next((i=>{const a=this.ss(i,dA),s=i.filter((o=>a.indexOf(o)===-1));return he.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?he.resolve(!0):lm(e).get(Wf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,fA)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Oe(Se.FAILED_PRECONDITION,hA);return!1}}return!(!this.networkEnabled||!this.inForeground)||zb(e).J().next((r=>this.ss(r,fA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Ne(bc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[u0,Zh],(e=>{const n=new nI(e,Oi.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>zb(e).J().next((n=>this.ss(n,dA).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return b_.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bde(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return y_.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ne(bc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?xue:c===17?mq:c===16?bue:c===15?XN:c===14?gq:c===13?pq:c===12?yue:c===11?hq:void Fe(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,a,(o=>(s=new nI(o,this.ci?this.ci.next():Oi.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Oe(Se.FAILED_PRECONDITION,rq);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Is(e){return lm(e).get(Wf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,fA)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Oe(Se.FAILED_PRECONDITION,hA)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lm(e).put(Wf,n)}static v(){return Bc.v()}Zi(e){const n=lm(e);return n.get(Wf).next((r=>this.es(r)?(Ne(bc,"Releasing primary lease."),n.delete(Wf)):he.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Gn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;A$()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return Ne(bc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Gn(bc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lm(t){return xr(t,u0)}function zb(t){return xr(t,Zh)}function AG(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class hD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=mt(),i=mt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hD(e,n.fromCache,r,i)}}class zde{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kG{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return A$()?8:aq(br())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new zde;return this.Ss(e,n,s).next((o=>{if(a.result=o,this.Vs)return this.bs(e,n,s,o.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(ch()<=At.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",uh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(ch()<=At.DEBUG&&Ne("QueryEngine","Query:",uh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ch()<=At.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",uh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,da(n))):he.resolve())}ys(e,n){if(i3(n))return he.resolve(null);let r=da(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Tw(n,null,"F"),r=da(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=mt(...a);return this.ps.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(n,o);return this.Cs(n,u,s,c.readTime)?this.ys(e,Tw(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,r,i){return i3(n)||i.isEqual(Qe.min())?he.resolve(null):this.ps.getDocuments(e,r).next((a=>{const s=this.Ds(n,a);return this.Cs(n,s,r,i)?he.resolve(null):(ch()<=At.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uh(n)),this.vs(e,s,n,tq(i,Wh)).next((o=>o)))}))}Ds(e,n){let r=new Kt(Lq(e));return n.forEach(((i,a)=>{h0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return ch()<=At.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",uh(n)),this.ps.getDocumentsMatchingQuery(e,n,ha.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const pD="LocalStore",Lde=3e8;class Vde{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ln(st),this.xs=new Pl((a=>Pd(a)),d0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TG(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function CG(t,e,n,r){return new Vde(t,e,n,r)}async function IG(t,e){const n=Ge(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=mt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function Bde(t,e){const n=Ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let v=he.resolve();return g.forEach((b=>{v=v.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);We(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),v.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=mt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function PG(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Fde(t,e){const n=Ge(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(a,f.addedDocuments,h))));let v=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(Hn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(h,v),(function(x,w,S){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Lde?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,v,f)&&o.push(n.Pi.updateTargetData(a,v))}));let c=ca(),u=mt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(Ude(a,s,e.documentUpdates).next((f=>{c=f.ks,u=f.qs}))),!r.isEqual(Qe.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next((h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return he.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.Ms=i,a)))}function Ude(t,e,n){let r=mt(),i=mt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=ca();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Qe.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ne(pD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function $de(t,e){const n=Ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=md),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Dw(t,e){const n=Ge(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,he.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new el(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function ap(t,e,n){const r=Ge(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!su(s))throw s;Ne(pD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function mI(t,e,n){const r=Ge(t);let i=Qe.min(),a=mt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=Ge(c),g=h.xs.get(f);return g!==void 0?he.resolve(h.Ms.get(g)):h.Pi.getTargetData(u,f)})(r,s,da(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Qe.min(),n?a:mt()))).next((o=>(OG(r,zq(e),o),{documents:o,Qs:a})))))}function NG(t,e){const n=Ge(t),r=Ge(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function DG(t,e){const n=Ge(t),r=n.Os.get(e)||Qe.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,tq(r,Wh),Number.MAX_SAFE_INTEGER))).then((i=>(OG(n,e,i),i)))}function OG(t,e,n){let r=t.Os.get(e)||Qe.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}const RG="firestore_clients";function M3(t,e){return`${RG}_${t}_${e}`}const MG="firestore_mutations";function j3(t,e,n){let r=`${MG}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const jG="firestore_targets";function pA(t,e){return`${jG}_${t}_${e}`}const ro="SharedClientState";class Ow{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Oe(i.error.code,i.error.message))),s?new Ow(e,n,i.state,a):(Gn(ro,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hm{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Oe(r.error.code,r.error.message))),a?new Hm(e,r.state,i):(Gn(ro,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rw{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=tD();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=sq(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new Rw(e,a):(Gn(ro,`Failed to parse client data for instance '${e}': ${n}`),null)}}class gD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new gD(n.clientId,n.onlineState):(Gn(ro,`Failed to parse online state: ${e}`),null)}}class vI{constructor(){this.activeTargetIds=tD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gA{constructor(e,n,r,i,a){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ln(st),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=M3(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new vI),this.ro=new RegExp(`^${RG}_${s}_([^_]*)$`),this.io=new RegExp(`^${MG}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${jG}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(M3(this.persistenceKey,r));if(i){const a=Rw.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(pA(this.persistenceKey,e));if(i){const a=Hm.Ws(e,i);a&&(r=a.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ne(ro,"READ",e,n),n}setItem(e,n){Ne(ro,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ne(ro,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Ne(ro,"EVENT",n.key,n.newValue),n.key===this.eo)return void Gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(a){let s=Oi.ce;if(a!=null)try{const o=JSON.parse(a);We(typeof o=="number",30636,{So:a}),s=o}catch(o){Gn(ro,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==Oi.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Ow(this.currentUser,e,n,r),a=j3(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const n=j3(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=pA(this.persistenceKey,e),a=new Hm(e,n,r);this.setItem(i,a.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Rw.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Ow.Ws(new ei(a),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Hm.Ws(i,n)}uo(e){return gD.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Ne(ro,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Fo(s,o).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=tD();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class zG{constructor(){this.Mo=new vI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qde{Oo(e){}shutdown(){}}const z3="ConnectivityMonitor";class L3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ne(z3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ne(z3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Lb=null;function yI(){return Lb===null?Lb=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lb++,"0x"+Lb.toString(16)}const mA="RestConnection",Gde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hde{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_w?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const s=yI(),o=this.zo(e,n.toUriEncodedString());Ne(mA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:u}=new URL(o),f=ru(u);return this.Jo(e,o,c,r,f).then((h=>(Ne(mA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw uv(mA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}Ho(e,n,r,i,a,s){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=Gde[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class Kde{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Zr="WebChannelConnection";class Wde extends Hde{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const s=yI();return new Promise(((o,c)=>{const u=new H8;u.setWithCredentials(!0),u.listenOnce(K8.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case jx.NO_ERROR:const h=u.getResponseJson();Ne(Zr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case jx.TIMEOUT:Ne(Zr,`RPC '${e}' ${s} timed out`),c(new Oe(Se.DEADLINE_EXCEEDED,"Request time out"));break;case jx.HTTP_ERROR:const g=u.getStatus();if(Ne(Zr,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v?.error;if(b&&b.status&&b.message){const x=(function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(T)>=0?T:Se.UNKNOWN})(b.status);c(new Oe(x,b.message))}else c(new Oe(Se.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Oe(Se.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ne(Zr,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);Ne(Zr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=yI(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=X8(),o=Y8(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=a.join("");Ne(Zr,`Creating RPC '${e}' stream ${i}: ${f}`,c);const h=s.createWebChannel(f,c);this.I_(h);let g=!1,v=!1;const b=new Kde({Yo:w=>{v?Ne(Zr,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(Ne(Zr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),Ne(Zr,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Zo:()=>h.close()}),x=(w,S,T)=>{w.listen(S,(I=>{try{T(I)}catch(O){setTimeout((()=>{throw O}),0)}}))};return x(h,Em.EventType.OPEN,(()=>{v||(Ne(Zr,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),x(h,Em.EventType.CLOSE,(()=>{v||(v=!0,Ne(Zr,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(h))})),x(h,Em.EventType.ERROR,(w=>{v||(v=!0,uv(Zr,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),b.a_(new Oe(Se.UNAVAILABLE,"The operation could not be completed")))})),x(h,Em.EventType.MESSAGE,(w=>{if(!v){const S=w.data[0];We(!!S,16349);const T=S,I=T?.error||T[0]?.error;if(I){Ne(Zr,`RPC '${e}' stream ${i} received error:`,I);const O=I.status;let D=(function(P){const R=rr[P];if(R!==void 0)return Qq(R)})(O),N=I.message;D===void 0&&(D=Se.INTERNAL,N="Unknown error status: "+O+" with message "+I.message),v=!0,b.a_(new Oe(D,N)),h.close()}else Ne(Zr,`RPC '${e}' stream ${i} received:`,S),b.u_(S)}})),x(o,W8.STAT_EVENT,(w=>{w.stat===XC.PROXY?Ne(Zr,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===XC.NOPROXY&&Ne(Zr,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function LG(){return typeof window<"u"?window:null}function Hx(){return typeof document<"u"?document:null}function w_(t){return new ede(t,!0)}class VG{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const V3="PersistentStream";class BG{constructor(e,n,r,i,a,s,o,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new VG(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Se.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Oe(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ne(V3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ne(V3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Yde extends BG{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rde(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Qe.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Qe.min():s.readTime?bi(s.readTime):Qe.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=dI(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=Sw(c)?{documents:aG(a,c)}:{query:sG(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=eG(a,s.resumeToken);const u=cI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Qe.min())>0){o.readTime=ip(a,s.snapshotVersion.toTimestamp());const u=cI(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=ade(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=dI(this.serializer),n.removeTarget=e,this.q_(n)}}class Xde extends BG{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ide(e.writeResults,e.commitTime),r=bi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=dI(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>kw(this.serializer,r)))};this.q_(n)}}class Qde{}class Zde extends Qde{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Oe(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,uI(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(Se.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Ho(e,uI(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Oe(Se.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Jde{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):Ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Md="RemoteStore";class efe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Jd(this)&&(Ne(Md,"Restarting streams for network reachability change."),await(async function(c){const u=Ge(c);u.Ea.add(4),await v0(u),u.Ra.set("Unknown"),u.Ea.delete(4),await __(u)})(this))}))})),this.Ra=new Jde(r,i)}}async function __(t){if(Jd(t))for(const e of t.da)await e(!0)}async function v0(t){for(const e of t.da)await e(!1)}function S_(t,e){const n=Ge(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yD(n)?vD(n):jp(n).O_()&&mD(n,e))}function sp(t,e){const n=Ge(t),r=jp(n);n.Ia.delete(e),r.O_()&&FG(n,e),n.Ia.size===0&&(r.O_()?r.L_():Jd(n)&&n.Ra.set("Unknown"))}function mD(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jp(t).Y_(e)}function FG(t,e){t.Va.Ue(e),jp(t).Z_(e)}function vD(t){t.Va=new Xue({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),jp(t).start(),t.Ra.ua()}function yD(t){return Jd(t)&&!jp(t).x_()&&t.Ia.size>0}function Jd(t){return Ge(t).Ea.size===0}function UG(t){t.Va=void 0}async function tfe(t){t.Ra.set("Online")}async function nfe(t){t.Ia.forEach(((e,n)=>{mD(t,e)}))}async function rfe(t,e){UG(t),yD(t)?(t.Ra.ha(e),vD(t)):t.Ra.set("Unknown")}async function ife(t,e,n){if(t.Ra.set("Online"),e instanceof Jq&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))})(t,e)}catch(r){Ne(Md,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mw(t,r)}else if(e instanceof qx?t.Va.Ze(e):e instanceof Zq?t.Va.st(e):t.Va.tt(e),!n.isEqual(Qe.min()))try{const r=await PG(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Hn.EMPTY_BYTE_STRING,f.snapshotVersion)),FG(a,c);const h=new el(f.target,c,u,f.sequenceNumber);mD(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){Ne(Md,"Failed to raise snapshot:",r),await Mw(t,r)}}async function Mw(t,e,n){if(!su(e))throw e;t.Ea.add(1),await v0(t),t.Ra.set("Offline"),n||(n=()=>PG(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ne(Md,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await __(t)}))}function $G(t,e){return e().catch((n=>Mw(t,n,e)))}async function Mp(t){const e=Ge(t),n=Kc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:md;for(;afe(e);)try{const i=await $de(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,sfe(e,i)}catch(i){await Mw(e,i)}qG(e)&&GG(e)}function afe(t){return Jd(t)&&t.Ta.length<10}function sfe(t,e){t.Ta.push(e);const n=Kc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qG(t){return Jd(t)&&!Kc(t).x_()&&t.Ta.length>0}function GG(t){Kc(t).start()}async function ofe(t){Kc(t).ra()}async function lfe(t){const e=Kc(t);for(const n of t.Ta)e.ea(n.mutations)}async function cfe(t,e,n){const r=t.Ta.shift(),i=iD.from(r,e,n);await $G(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Mp(t)}async function ufe(t,e){e&&Kc(t).X_&&await(async function(r,i){if((function(s){return Kue(s)&&s!==Se.ABORTED})(i.code)){const a=r.Ta.shift();Kc(r).B_(),await $G(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Mp(r)}})(t,e),qG(t)&&GG(t)}async function B3(t,e){const n=Ge(t);n.asyncQueue.verifyOperationInProgress(),Ne(Md,"RemoteStore received new credentials");const r=Jd(n);n.Ea.add(3),await v0(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await __(n)}async function bI(t,e){const n=Ge(t);e?(n.Ea.delete(2),await __(n)):e||(n.Ea.add(2),await v0(n),n.Ra.set("Unknown"))}function jp(t){return t.ma||(t.ma=(function(n,r,i){const a=Ge(n);return a.sa(),new Yde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:tfe.bind(null,t),t_:nfe.bind(null,t),r_:rfe.bind(null,t),H_:ife.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),yD(t)?vD(t):t.Ra.set("Unknown")):(await t.ma.stop(),UG(t))}))),t.ma}function Kc(t){return t.fa||(t.fa=(function(n,r,i){const a=Ge(n);return a.sa(),new Xde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ofe.bind(null,t),r_:ufe.bind(null,t),ta:lfe.bind(null,t),na:cfe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Mp(t)):(await t.fa.stop(),t.Ta.length>0&&(Ne(Md,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class bD{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new uo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new bD(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xD(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),su(t))return new Oe(Se.UNAVAILABLE,`${e}: ${t}`);throw t}class jh{static emptySet(e){return new jh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ze.comparator(n.key,r.key):(n,r)=>ze.comparator(n.key,r.key),this.keyedMap=Tm(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class F3{constructor(){this.ga=new ln(ze.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class op{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new op(e,n,jh.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&g_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class dfe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ffe{constructor(){this.queries=U3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ge(n),a=i.queries;i.queries=U3(),a.forEach(((s,o)=>{for(const c of o.Sa)c.onError(r)}))})(this,new Oe(Se.ABORTED,"Firestore shutting down"))}}function U3(){return new Pl((t=>jq(t)),g_)}async function wD(t,e){const n=Ge(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new dfe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=xD(s,`Initialization of query '${uh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&SD(n)}async function _D(t,e){const n=Ge(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hfe(t,e){const n=Ge(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(r=!0);s.wa=i}}r&&SD(n)}function pfe(t,e,n){const r=Ge(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function SD(t){t.Ca.forEach((e=>{e.next()}))}var xI,$3;($3=xI||(xI={})).Ma="default",$3.Cache="cache";class ED{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new op(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=op.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xI.Cache}}class HG{constructor(e){this.key=e}}class KG{constructor(e){this.key=e}}class gfe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=mt(),this.mutatedKeys=mt(),this.eu=Lq(e),this.tu=new jh(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new F3,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),v=h0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;g&&v?g.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),w=!0):this.su(g,v)||(r.track({type:2,doc:v}),w=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(o=!0)):!g&&v?(r.track({type:0,doc:v}),w=!0):g&&!v&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(v?(s=s.add(v),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(v,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:w})}};return x(v)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new op(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=mt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new KG(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new HG(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=mt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return op.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zp="SyncEngine";class mfe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vfe{constructor(e){this.key=e,this.hu=!1}}class yfe{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Pl((o=>jq(o)),g_),this.Iu=new Map,this.Eu=new Set,this.du=new ln(ze.comparator),this.Au=new Map,this.Ru=new uD,this.Vu={},this.mu=new Map,this.fu=Rd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bfe(t,e,n=!0){const r=E_(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await WG(r,e,n,!0),i}async function xfe(t,e){const n=E_(t);await WG(n,e,!0,!1)}async function WG(t,e,n,r){const i=await Dw(t.localStore,da(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await TD(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&S_(t.remoteStore,i),o}async function TD(t,e,n,r,i){t.pu=(h,g,v)=>(async function(x,w,S,T){let I=w.view.ru(S);I.Cs&&(I=await mI(x.localStore,w.query,!1).then((({documents:C})=>w.view.ru(C,I))));const O=T&&T.targetChanges.get(w.targetId),D=T&&T.targetMismatches.get(w.targetId)!=null,N=w.view.applyChanges(I,x.isPrimaryClient,O,D);return wI(x,w.targetId,N.au),N.snapshot})(t,h,g,v);const a=await mI(t.localStore,e,!0),s=new gfe(e,a.Qs),o=s.ru(a.documents),c=m0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);wI(t,n,u.au);const f=new mfe(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function wfe(t,e,n){const r=Ge(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!g_(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ap(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&sp(r.remoteStore,i.targetId),lp(r,i.targetId)})).catch(au)):(lp(r,i.targetId),await ap(r.localStore,i.targetId,!0))}async function _fe(t,e){const n=Ge(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sp(n.remoteStore,r.targetId))}async function Sfe(t,e,n){const r=ID(t);try{const i=await(function(s,o){const c=Ge(s),u=pt.now(),f=o.reduce(((v,b)=>v.add(b.key)),mt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let b=ca(),x=mt();return c.Ns.getEntries(v,f).next((w=>{b=w,b.forEach(((S,T)=>{T.isValidDocument()||(x=x.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,b))).next((w=>{h=w;const S=[];for(const T of o){const I=Gue(T,h.get(T.key).overlayedDocument);I!=null&&S.push(new Nl(T.key,I,Aq(I.value.mapValue),vr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,S,o)})).next((w=>{g=w;const S=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(v,w.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:Bq(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.Vu[s.currentUser.toKey()];u||(u=new ln(st)),u=u.insert(o,c),s.Vu[s.currentUser.toKey()]=u})(r,i.batchId,n),await lu(r,i.changes),await Mp(r.remoteStore)}catch(i){const a=xD(i,"Failed to persist write");n.reject(a)}}async function YG(t,e){const n=Ge(t);try{const r=await Fde(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?We(s.hu,14607):i.removedDocuments.size>0&&(We(s.hu,42227),s.hu=!1))})),await lu(n,r,e)}catch(r){await au(r)}}function q3(t,e,n){const r=Ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=Ge(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.Sa)g.va(o)&&(u=!0)})),u&&SD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Efe(t,e,n){const r=Ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new ln(ze.comparator);s=s.insert(a,zn.newNoDocument(a,Qe.min()));const o=mt().add(a),c=new g0(Qe.min(),new Map,new ln(st),s,o);await YG(r,c),r.du=r.du.remove(a),r.Au.delete(e),CD(r)}else await ap(r.localStore,e,!1).then((()=>lp(r,e,n))).catch(au)}async function Tfe(t,e){const n=Ge(t),r=e.batch.batchId;try{const i=await Bde(n.localStore,e);kD(n,r,null),AD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lu(n,i)}catch(i){await au(i)}}async function Afe(t,e,n){const r=Ge(t);try{const i=await(function(s,o){const c=Ge(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(We(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);kD(r,e,n),AD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await lu(r,i)}catch(i){await au(i)}}function AD(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function kD(t,e,n){const r=Ge(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function lp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||XG(t,r)}))}function XG(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),CD(t))}function wI(t,e,n){for(const r of n)r instanceof HG?(t.Ru.addReference(r.key,e),kfe(t,r)):r instanceof KG?(Ne(zp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||XG(t,r.key)):Fe(19791,{wu:r})}function kfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ne(zp,"New document in limbo: "+n),t.Eu.add(r),CD(t))}function CD(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ze(Bt.fromString(e)),r=t.fu.next();t.Au.set(r,new vfe(n)),t.du=t.du.insert(n,r),S_(t.remoteStore,new el(da(f0(n.path)),r,"TargetPurposeLimboResolution",Oi.ce))}}async function lu(t,e,n){const r=Ge(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=hD.As(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,u){const f=Ge(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>he.forEach(u,(g=>he.forEach(g.Es,(v=>f.persistence.referenceDelegate.addReference(h,g.targetId,v))).next((()=>he.forEach(g.ds,(v=>f.persistence.referenceDelegate.removeReference(h,g.targetId,v)))))))))}catch(h){if(!su(h))throw h;Ne(pD,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const v=f.Ms.get(g),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(g,x)}}})(r.localStore,a))}async function Cfe(t,e){const n=Ge(t);if(!n.currentUser.isEqual(e)){Ne(zp,"User change. New user:",e.toKey());const r=await IG(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Oe(Se.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lu(n,r.Ls)}}function Ife(t,e){const n=Ge(t),r=n.Au.get(e);if(r&&r.hu)return mt().add(r.key);{let i=mt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function Pfe(t,e){const n=Ge(t),r=await mI(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&wI(n,e.targetId,i.au),i}async function Nfe(t,e){const n=Ge(t);return DG(n.localStore,e).then((r=>lu(n,r)))}async function Dfe(t,e,n,r){const i=Ge(t),a=await(function(o,c){const u=Ge(o),f=Ge(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.er(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):he.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Mp(i.remoteStore):n==="acknowledged"||n==="rejected"?(kD(i,e,r||null),AD(i,e),(function(o,c){Ge(Ge(o).mutationQueue).ir(c)})(i.localStore,e)):Fe(6720,"Unknown batchState",{Su:n}),await lu(i,a)):Ne(zp,"Cannot apply mutation batch with id: "+e)}async function Ofe(t,e){const n=Ge(t);if(E_(n),ID(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await G3(n,r.toArray());n.gu=!0,await bI(n.remoteStore,!0);for(const a of i)S_(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(lp(n,s),ap(n.localStore,s,!0)))),sp(n.remoteStore,s)})),await i,await G3(n,r),(function(s){const o=Ge(s);o.Au.forEach(((c,u)=>{sp(o.remoteStore,u)})),o.Ru.Jr(),o.Au=new Map,o.du=new ln(ze.comparator)})(n),n.gu=!1,await bI(n.remoteStore,!1)}}async function G3(t,e,n){const r=Ge(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await Dw(r.localStore,da(c[0]));for(const u of c){const f=r.Tu.get(u),h=await Pfe(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await NG(r.localStore,s);o=await Dw(r.localStore,u),await TD(r,QG(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(a),i}function QG(t){return Rq(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Rfe(t){return(function(n){return Ge(Ge(n).persistence).Ts()})(Ge(t).localStore)}async function Mfe(t,e,n,r){const i=Ge(t);if(i.gu)return void Ne(zp,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await DG(i.localStore,zq(a[0])),o=g0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Hn.EMPTY_BYTE_STRING);await lu(i,s,o);break}case"rejected":await ap(i.localStore,e,!0),lp(i,e,r);break;default:Fe(64155,n)}}async function jfe(t,e,n){const r=E_(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ne(zp,"Adding an already active target "+i);continue}const a=await NG(r.localStore,i),s=await Dw(r.localStore,a);await TD(r,QG(a),s.targetId,!1,s.resumeToken),S_(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await ap(r.localStore,i,!1).then((()=>{sp(r.remoteStore,i),lp(r,i)})).catch(au)}}function E_(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ife.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Efe.bind(null,e),e.Pu.H_=hfe.bind(null,e.eventManager),e.Pu.yu=pfe.bind(null,e.eventManager),e}function ID(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Afe.bind(null,e),e}class Sv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=w_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return CG(this.persistence,new kG,e.initialUser,this.serializer)}Cu(e){return new dD(x_.mi,this.serializer)}Du(e){return new zG}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sv.provider={build:()=>new Sv};class zfe extends Sv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof Nw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ti.withCacheSize(this.cacheSizeBytes):ti.DEFAULT;return new dD((r=>Nw.mi(r,n)),this.serializer)}}class ZG extends Sv{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ID(this.xu.syncEngine),await Mp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return CG(this.persistence,new kG,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new wG(r,e.asyncQueue,n)}Mu(e,n){const r=new Wce(n,this.persistence);return new Kce(e.asyncQueue,r)}Cu(e){const n=AG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ti.withCacheSize(this.cacheSizeBytes):ti.DEFAULT;return new fD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,LG(),Hx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new zG}}class Lfe extends ZG{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof gA&&(this.sharedClientState.syncEngine={Co:Dfe.bind(null,n),vo:Mfe.bind(null,n),Fo:jfe.bind(null,n),Ts:Rfe.bind(null,n),Do:Nfe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await Ofe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=LG();if(!gA.v(n))throw new Oe(Se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=AG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ev{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>q3(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cfe.bind(null,this.syncEngine),await bI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ffe})()}createDatastore(e){const n=w_(e.databaseInfo.databaseId),r=(function(a){return new Wde(a)})(e.databaseInfo);return(function(a,s,o,c){return new Zde(a,s,o,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new efe(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>q3(this.syncEngine,n,0)),(function(){return L3.v()?new L3:new qde})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new yfe(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ge(n);Ne(Md,"RemoteStore shutting down."),r.Ea.add(5),await v0(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ev.provider={build:()=>new Ev};class PD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Wc="FirestoreClient";class Vfe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ei.UNAUTHENTICATED,this.clientId=qN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{Ne(Wc,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(Ne(Wc,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new uo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xD(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function vA(t,e){t.asyncQueue.verifyOperationInProgress(),Ne(Wc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await IG(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function H3(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Bfe(t);Ne(Wc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>B3(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>B3(e.remoteStore,i))),t._onlineComponents=e}async function Bfe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ne(Wc,"Using user provided OfflineComponentProvider");try{await vA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Se.FAILED_PRECONDITION||i.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;uv("Error using user provided cache. Falling back to memory cache: "+n),await vA(t,new Sv)}}else Ne(Wc,"Using default OfflineComponentProvider"),await vA(t,new zfe(void 0));return t._offlineComponents}async function JG(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ne(Wc,"Using user provided OnlineComponentProvider"),await H3(t,t._uninitializedComponentsProvider._online)):(Ne(Wc,"Using default OnlineComponentProvider"),await H3(t,new Ev))),t._onlineComponents}function Ffe(t){return JG(t).then((e=>e.syncEngine))}async function jw(t){const e=await JG(t),n=e.eventManager;return n.onListen=bfe.bind(null,e.syncEngine),n.onUnlisten=wfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xfe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_fe.bind(null,e.syncEngine),n}function Ufe(t,e,n={}){const r=new uo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new PD({next:g=>{f.Nu(),s.enqueueAndForget((()=>_D(a,h)));const v=g.docs.has(o);!v&&g.fromCache?u.reject(new Oe(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?u.reject(new Oe(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new ED(f0(o.path),f,{includeMetadataChanges:!0,qa:!0});return wD(a,h)})(await jw(t),t.asyncQueue,e,n,r))),r.promise}function $fe(t,e,n={}){const r=new uo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new PD({next:g=>{f.Nu(),s.enqueueAndForget((()=>_D(a,h))),g.fromCache&&c.source==="server"?u.reject(new Oe(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new ED(o,f,{includeMetadataChanges:!0,qa:!0});return wD(a,h)})(await jw(t),t.asyncQueue,e,n,r))),r.promise}function e7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const K3=new Map;const qfe="firestore.googleapis.com",W3=!0;class Y3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qfe,this.ssl=W3}else this.host=e.host,this.ssl=e.ssl??W3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mG;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xG)throw new Oe(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qce("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Oe(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Oe(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Oe(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ND{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Mce;switch(r.type){case"firstParty":return new Lce(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=K3.get(n);r&&(Ne("ComponentProvider","Removing Datastore"),K3.delete(n),r.terminate())})(this),Promise.resolve()}}class Dl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dl(this.firestore,e,this._query)}}class Ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}toJSON(){return{type:Ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(c0(n,Ln._jsonSchema))return new Ln(e,r||null,new ze(Bt.fromString(n.referencePath)))}}Ln._jsonSchemaVersion="firestore/documentReference/1.0",Ln._jsonSchema={type:or("string",Ln._jsonSchemaVersion),referencePath:or("string")};class Fc extends Dl{constructor(e,n,r){super(e,n,f0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new ze(e))}withConverter(e){return new Fc(this.firestore,e,this._path)}}function Gr(t,e,...n){if(t=Ft(t),J8("collection","path",e),t instanceof ND){const r=Bt.fromString(e,...n);return VL(r),new Fc(t,null,r)}{if(!(t instanceof Ln||t instanceof Fc))throw new Oe(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bt.fromString(e,...n));return VL(r),new Fc(t.firestore,null,r)}}function _t(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=qN.newId()),J8("doc","path",e),t instanceof ND){const r=Bt.fromString(e,...n);return LL(r),new Ln(t,null,new ze(r))}{if(!(t instanceof Ln||t instanceof Fc))throw new Oe(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Bt.fromString(e,...n));return LL(r),new Ln(t.firestore,t instanceof Fc?t.converter:null,new ze(r))}}const X3="AsyncQueue";class Q3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new VG(this,"async_queue_retry"),this._c=()=>{const r=Hx();r&&Ne(X3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new uo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!su(e))throw e;Ne(X3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",Z3(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=bD.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:Z3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Z3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function J3(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class xo extends ND{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Q3,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Q3(e),this._firestoreClient=void 0,await e}}}function Gfe(t,e,n){n||(n=_w);const r=Ip(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(qc(a,e))return i;throw new Oe(Se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Oe(Se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xG)throw new Oe(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ru(e.host)&&TN(e.host),r.initialize({options:e,instanceIdentifier:n})}function y0(t){if(t._terminated)throw new Oe(Se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Hfe(t),t._firestoreClient}function Hfe(t){const e=t._freezeSettings(),n=(function(i,a,s,o){return new _ue(i,a,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,e7(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Vfe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(Hn.fromBase64String(e))}catch(n){throw new Oe(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new La(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:La._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(c0(e,La._jsonSchema))return La.fromBase64String(e.bytes)}}La._jsonSchemaVersion="firestore/bytes/1.0",La._jsonSchema={type:or("string",La._jsonSchemaVersion),bytes:or("string")};class b0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Oe(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class T_{constructor(e){this._methodName=e}}class fo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Oe(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Oe(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fo._jsonSchemaVersion}}static fromJSON(e){if(c0(e,fo._jsonSchema))return new fo(e.latitude,e.longitude)}}fo._jsonSchemaVersion="firestore/geoPoint/1.0",fo._jsonSchema={type:or("string",fo._jsonSchemaVersion),latitude:or("number"),longitude:or("number")};class ho{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ho._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(c0(e,ho._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ho(e.vectorValues);throw new Oe(Se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ho._jsonSchemaVersion="firestore/vectorValue/1.0",ho._jsonSchema={type:or("string",ho._jsonSchemaVersion),vectorValues:or("object")};const Kfe=/^__.*__$/;class Wfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rp(e,this.data,n,this.fieldTransforms)}}class t7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Nl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function n7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:t})}}class A_{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new A_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zw(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(n7(this.Ac)&&Kfe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Yfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||w_(e)}Cc(e,n,r,i=!1){return new A_({Ac:e,methodName:n,Dc:r,path:kn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function x0(t){const e=t._freezeSettings(),n=w_(t._databaseId);return new Yfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DD(t,e,n,r,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);RD("Data must be an object, but it was:",s,r);const o=a7(r,s);let c,u;if(a.merge)c=new Ri(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=_I(e,h,n);if(!s.contains(g))throw new Oe(Se.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);o7(f,g)||f.push(g)}c=new Ri(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new Wfe(new ri(o),c,u)}class w0 extends T_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof w0}}function Xfe(t,e,n){return new A_({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class OD extends T_{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Xfe(this,e,!0),r=this.vc.map((a=>Lp(a,n))),i=new Nd(r);return new Kq(e.path,i)}isEqual(e){return e instanceof OD&&qc(this.vc,e.vc)}}function r7(t,e,n,r){const i=t.Cc(1,e,n);RD("Data must be an object, but it was:",i,r);const a=[],s=ri.empty();ou(r,((c,u)=>{const f=MD(e,c,n);u=Ft(u);const h=i.yc(f);if(u instanceof w0)a.push(f);else{const g=Lp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new Ri(a);return new t7(s,o,i.fieldTransforms)}function i7(t,e,n,r,i,a){const s=t.Cc(1,e,n),o=[_I(e,r,n)],c=[i];if(a.length%2!=0)throw new Oe(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(_I(e,a[g])),c.push(a[g+1]);const u=[],f=ri.empty();for(let g=o.length-1;g>=0;--g)if(!o7(u,o[g])){const v=o[g];let b=c[g];b=Ft(b);const x=s.yc(v);if(b instanceof w0)u.push(v);else{const w=Lp(b,x);w!=null&&(u.push(v),f.set(v,w))}}const h=new Ri(u);return new t7(f,h,s.fieldTransforms)}function Qfe(t,e,n,r=!1){return Lp(n,t.Cc(r?4:3,e))}function Lp(t,e){if(s7(t=Ft(t)))return RD("Unsupported field value:",e,t),a7(t,e);if(t instanceof T_)return(function(r,i){if(!n7(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=Lp(o,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Vue(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=pt.fromDate(r);return{timestampValue:ip(i.serializer,a)}}if(r instanceof pt){const a=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ip(i.serializer,a)}}if(r instanceof fo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof La)return{bytesValue:eG(i.serializer,r._byteString)};if(r instanceof Ln){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:oD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ho)return(function(s,o){return{mapValue:{fields:{[ZN]:{stringValue:JN},[Jh]:{arrayValue:{values:s.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return nD(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${o_(r)}`)})(t,e)}function a7(t,e){const n={};return vq(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ou(t,((r,i)=>{const a=Lp(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function s7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof fo||t instanceof La||t instanceof Ln||t instanceof T_||t instanceof ho)}function RD(t,e,n){if(!s7(n)||!eq(n)){const r=o_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function _I(t,e,n){if((e=Ft(e))instanceof b0)return e._internalPath;if(typeof e=="string")return MD(t,e);throw zw("Field path arguments must be of type string or ",t,!1,void 0,n)}const Zfe=new RegExp("[~\\*/\\[\\]]");function MD(t,e,n){if(e.search(Zfe)>=0)throw zw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new b0(...e.split("."))._internalPath}catch{throw zw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zw(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Oe(Se.INVALID_ARGUMENT,o+t+c)}function o7(t,e){return t.some((n=>n.isEqual(e)))}class l7{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(k_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Jfe extends l7{data(){return super.data()}}function k_(t,e){return typeof e=="string"?MD(t,e):e instanceof b0?e._internalPath:e._delegate._internalPath}function c7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Oe(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jD{}class zD extends jD{}function Mi(t,e,...n){let r=[];e instanceof jD&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof LD)).length,o=a.filter((c=>c instanceof C_)).length;if(s>1||s>0&&o>0)throw new Oe(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class C_ extends zD{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new C_(e,n,r)}_apply(e){const n=this._parse(e);return u7(e._query,n),new Dl(e.firestore,e.converter,lI(e._query,n))}_parse(e){const n=x0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Oe(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){n5(h,f);const b=[];for(const x of h)b.push(t5(c,a,x));g={arrayValue:{values:b}}}else g=t5(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||n5(h,f),g=Qfe(o,s,h,f==="in"||f==="not-in");return kt.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kx(t,e,n){const r=e,i=k_("where",t);return C_._create(i,r,n)}class LD extends jD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new LD(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)u7(s,c),s=lI(s,c)})(e._query,n),new Dl(e.firestore,e.converter,lI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class VD extends zD{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new VD(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new Oe(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Oe(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xv(a,s)})(e._query,this._field,this._direction);return new Dl(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new Op(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function xs(t,e="asc"){const n=e,r=k_("orderBy",t);return VD._create(r,n)}class BD extends zD{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new BD(e,n,r)}_apply(e){return new Dl(e.firestore,e.converter,Tw(e._query,this._limit,this._limitType))}}function e5(t){return BD._create("limit",t,"F")}function t5(t,e,n){if(typeof(n=Ft(n))=="string"){if(n==="")throw new Oe(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mq(e)&&n.indexOf("/")!==-1)throw new Oe(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Bt.fromString(n));if(!ze.isDocumentKey(r))throw new Oe(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yv(t,new ze(r))}if(n instanceof Ln)return yv(t,n._key);throw new Oe(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${o_(n)}.`)}function n5(t,e){if(!Array.isArray(t)||t.length===0)throw new Oe(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function u7(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Oe(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Oe(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ehe{convertValue(e,n="none"){switch(Gc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ou(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[Jh].arrayValue?.values?.map((r=>yn(r.doubleValue)));return new ho(n)}convertGeoPoint(e){return new fo(yn(e.latitude),yn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=h_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mv(e));default:return null}}convertTimestamp(e){const n=ml(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Bt.fromString(e);We(uG(r),9688,{name:e});const i=new Id(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(n)||Gn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function FD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Cm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bd extends l7{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(k_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(Se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=bd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}bd._jsonSchemaVersion="firestore/documentSnapshot/1.0",bd._jsonSchema={type:or("string",bd._jsonSchemaVersion),bundleSource:or("string","DocumentSnapshot"),bundleName:or("string"),bundle:or("string")};class Wx extends bd{data(e={}){return super.data(e)}}class xd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Cm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Wx(this._firestore,this._userDataWriter,r.key,r,new Cm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Oe(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new Wx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Cm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new Wx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Cm(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:the(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(Se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function the(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}function yA(t){t=Bi(t,Ln);const e=Bi(t.firestore,xo);return Ufe(y0(e),t._key).then((n=>d7(e,t,n)))}xd._jsonSchemaVersion="firestore/querySnapshot/1.0",xd._jsonSchema={type:or("string",xd._jsonSchemaVersion),bundleSource:or("string","QuerySnapshot"),bundleName:or("string"),bundle:or("string")};class UD extends ehe{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,n)}}function na(t){t=Bi(t,Dl);const e=Bi(t.firestore,xo),n=y0(e),r=new UD(e);return c7(t._query),$fe(n,t._query).then((i=>new xd(e,r,t,i)))}function ia(t,e,n){t=Bi(t,Ln);const r=Bi(t.firestore,xo),i=FD(t.converter,e,n);return _0(r,[DD(x0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vr.none())])}function no(t,e,n,...r){t=Bi(t,Ln);const i=Bi(t.firestore,xo),a=x0(i);let s;return s=typeof(e=Ft(e))=="string"||e instanceof b0?i7(a,"updateDoc",t._key,e,n,r):r7(a,"updateDoc",t._key,e),_0(i,[s.toMutation(t._key,vr.exists(!0))])}function sa(t){return _0(Bi(t.firestore,xo),[new p0(t._key,vr.none())])}function I_(t,e){const n=Bi(t.firestore,xo),r=_t(t),i=FD(t.converter,e);return _0(n,[DD(x0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vr.exists(!1))]).then((()=>r))}function Yc(t,...e){t=Ft(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||J3(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(J3(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let a,s,o;if(t instanceof Ln)s=Bi(t.firestore,xo),o=f0(t._key.path),a={next:c=>{e[r]&&e[r](d7(s,t,c))},error:e[r+1],complete:e[r+2]};else{const c=Bi(t,Dl);s=Bi(c.firestore,xo),o=c._query;const u=new UD(s);a={next:f=>{e[r]&&e[r](new xd(s,u,c,f))},error:e[r+1],complete:e[r+2]},c7(t._query)}return(function(u,f,h,g){const v=new PD(g),b=new ED(f,v,h);return u.asyncQueue.enqueueAndForget((async()=>wD(await jw(u),b))),()=>{v.Nu(),u.asyncQueue.enqueueAndForget((async()=>_D(await jw(u),b)))}})(y0(s),o,i,a)}function _0(t,e){return(function(r,i){const a=new uo;return r.asyncQueue.enqueueAndForget((async()=>Sfe(await Ffe(r),i,a))),a.promise})(y0(t),e)}function d7(t,e,n){const r=n.docs.get(e._key),i=new UD(t);return new bd(t,i,e._key,r,new Cm(n.hasPendingWrites,n.fromCache),e.converter)}class nhe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=she(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function rhe(t){return new nhe(t)}class ihe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ev.provider,this._offlineComponentProvider={build:n=>new ZG(n,e?.cacheSizeBytes,this.forceOwnership)}}}class ahe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ev.provider,this._offlineComponentProvider={build:n=>new Lfe(n,e?.cacheSizeBytes)}}}function she(t){return new ihe(t?.forceOwnership)}function ohe(){return new ahe}class lhe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=x0(e)}set(e,n,r){this._verifyNotCommitted();const i=bA(e,this._firestore),a=FD(i.converter,n,r),s=DD(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,vr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=bA(e,this._firestore);let s;return s=typeof(n=Ft(n))=="string"||n instanceof b0?i7(this._dataReader,"WriteBatch.update",a._key,n,r,i):r7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=bA(e,this._firestore);return this._mutations=this._mutations.concat(new p0(n._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bA(t,e){if((t=Ft(t)).firestore!==e)throw new Oe(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function r5(){return new w0("deleteField")}function che(...t){return new OD("arrayUnion",t)}function SI(t){return y0(t=Bi(t,xo)),new lhe(t,(e=>_0(t,e)))}(function(e,n=!0){(function(i){Dp=i})(Pp),fl(new yo("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new xo(new jce(r.getProvider("auth-internal")),new Vce(s,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Oe(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(u.options.projectId,f)})(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),bs(RL,ML,e),bs(RL,ML,"esm2020")})();const EI=new Map,f7={activated:!1,tokenObservers:[]},uhe={initialized:!1,enabled:!1};function yr(t){return EI.get(t)||{...f7}}function dhe(t,e){return EI.set(t,e),EI.get(t)}function P_(){return uhe}const h7="https://content-firebaseappcheck.googleapis.com/v1",fhe="exchangeRecaptchaEnterpriseToken",hhe="exchangeDebugToken",i5={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},phe=1440*60*1e3;class ghe{constructor(e,n,r,i,a){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new av,this.pending.promise.catch(n=>{}),await mhe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new av,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function mhe(t){return new Promise(e=>{setTimeout(e,t)})}const vhe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ji=new Cp("appCheck","AppCheck",vhe);function a5(t=!1){return t?self.grecaptcha?.enterprise:self.grecaptcha}function $D(t){if(!yr(t).activated)throw ji.create("use-before-activation",{appName:t.name})}function p7(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),a=e-n*3600*24-r*3600-i*60;let s="";return n&&(s+=Vb(n)+"d:"),r&&(s+=Vb(r)+"h:"),s+=Vb(i)+"m:"+Vb(a)+"s",s}function Vb(t){return t===0?"00":t>=10?t.toString():"0"+t}async function qD({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const h=await i.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const a={method:"POST",body:JSON.stringify(e),headers:r};let s;try{s=await fetch(t,a)}catch(h){throw ji.create("fetch-network-error",{originalErrorMessage:h?.message})}if(s.status!==200)throw ji.create("fetch-status-error",{httpStatus:s.status});let o;try{o=await s.json()}catch(h){throw ji.create("fetch-parse-error",{originalErrorMessage:h?.message})}const c=o.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${o.ttl}`});const u=Number(c[1])*1e3,f=Date.now();return{token:o.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function yhe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${h7}/projects/${n}/apps/${r}:${fhe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function g7(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${h7}/projects/${n}/apps/${r}:${hhe}?key=${i}`,body:{debug_token:e}}}const bhe="firebase-app-check-database",xhe=1,Tv="firebase-app-check-store",m7="debug-token";let Bb=null;function v7(){return Bb||(Bb=new Promise((t,e)=>{try{const n=indexedDB.open(bhe,xhe);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(ji.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Tv,{keyPath:"compositeKey"})}}}catch(n){e(ji.create("storage-open",{originalErrorMessage:n?.message}))}}),Bb)}function whe(t){return b7(x7(t))}function _he(t,e){return y7(x7(t),e)}function She(t){return y7(m7,t)}function Ehe(){return b7(m7)}async function y7(t,e){const r=(await v7()).transaction(Tv,"readwrite"),a=r.objectStore(Tv).put({compositeKey:t,value:e});return new Promise((s,o)=>{a.onsuccess=c=>{s()},r.onerror=c=>{o(ji.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}async function b7(t){const n=(await v7()).transaction(Tv,"readonly"),i=n.objectStore(Tv).get(t);return new Promise((a,s)=>{i.onsuccess=o=>{const c=o.target.result;a(c?c.value:void 0)},n.onerror=o=>{s(ji.create("storage-get",{originalErrorMessage:o.target.error?.message}))}})}function x7(t){return`${t.options.appId}-${t.name}`}const Dc=new e_("@firebase/app-check");async function The(t){if(J1()){let e;try{e=await whe(t)}catch(n){Dc.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function xA(t,e){return J1()?_he(t,e).catch(n=>{Dc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Ahe(){let t;try{t=await Ehe()}catch{}if(t)return t;{const e=crypto.randomUUID();return She(e).catch(n=>Dc.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}function GD(){return P_().enabled}async function HD(){const t=P_();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function khe(){const t=EN(),e=P_();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new av;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Ahe())}const Che={error:"UNKNOWN_ERROR"};function Ihe(t){return SN.encodeString(JSON.stringify(t),!1)}async function TI(t,e=!1,n=!1){const r=t.app;$D(r);const i=yr(r);let a=i.token,s;if(a&&!vh(a)&&(i.token=void 0,a=void 0),!a){const u=await i.cachedTokenPromise;u&&(vh(u)?a=u:await xA(r,void 0))}if(!e&&a&&vh(a))return{token:a.token};let o=!1;if(GD())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=qD(g7(r,await HD()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const u=await i.exchangeTokenPromise;return await xA(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Dc.warn(u.message):n&&Dc.error(u),wA(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),a=await yr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Dc.warn(u.message):n&&Dc.error(u),s=u}let c;return a?s?vh(a)?c={token:a.token,internalError:s}:c=wA(s):(c={token:a.token},i.token=a,await xA(r,a)):c=wA(s),o&&S7(r,c),c}async function Phe(t){const e=t.app;$D(e);const{provider:n}=yr(e);if(GD()){const r=await HD(),{token:i}=await qD(g7(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function w7(t,e,n,r){const{app:i}=t,a=yr(i),s={next:n,error:r,type:e};if(a.tokenObservers=[...a.tokenObservers,s],a.token&&vh(a.token)){const o=a.token;Promise.resolve().then(()=>{n({token:o.token}),s5(t)}).catch(()=>{})}a.cachedTokenPromise.then(()=>s5(t))}function _7(t,e){const n=yr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function s5(t){const{app:e}=t,n=yr(e);let r=n.tokenRefresher;r||(r=Nhe(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Nhe(t){const{app:e}=t;return new ghe(async()=>{const n=yr(e);let r;if(n.token?r=await TI(t,!0):r=await TI(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=yr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},i5.RETRIAL_MIN_WAIT,i5.RETRIAL_MAX_WAIT)}function S7(t,e){const n=yr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function vh(t){return t.expireTimeMillis-Date.now()>0}function wA(t){return{token:Ihe(Che),error:t}}class Dhe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=yr(this.app);for(const n of e)_7(this.app,n.next);return Promise.resolve()}}function Ohe(t,e){return new Dhe(t,e)}function Rhe(t){return{getToken:e=>TI(t,e),getLimitedUseToken:()=>Phe(t),addTokenListener:e=>w7(t,"INTERNAL",e),removeTokenListener:e=>_7(t.app,e)}}const Mhe="@firebase/app-check",jhe="0.11.0",zhe="https://www.google.com/recaptcha/enterprise.js";function Lhe(t,e){const n=new av,r=yr(t);r.reCAPTCHAState={initialized:n};const i=Vhe(t),a=a5(!0);return a?o5(t,e,a,i,n):Uhe(()=>{const s=a5(!0);if(!s)throw new Error("no recaptcha");o5(t,e,s,i,n)}),n.promise}function o5(t,e,n,r,i){n.ready(()=>{Fhe(t,e,n,r),i.resolve(n)})}function Vhe(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function Bhe(t){$D(t);const n=await yr(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const a=yr(t).reCAPTCHAState;n.ready(()=>{r(n.execute(a.widgetId,{action:"fire_app_check"}))})})}function Fhe(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{yr(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{yr(t).reCAPTCHAState.succeeded=!1}}),a=yr(t);a.reCAPTCHAState={...a.reCAPTCHAState,widgetId:i}}function Uhe(t){const e=document.createElement("script");e.src=zhe,e.onload=t,document.head.appendChild(e)}class KD{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){qhe(this._throttleData);const e=await Bhe(this._app).catch(r=>{throw ji.create("recaptcha-error")});if(!yr(this._app).reCAPTCHAState?.succeeded)throw ji.create("recaptcha-error");let n;try{n=await qD(yhe(this._app,e),this._heartbeatServiceProvider)}catch(r){throw r.code?.includes("fetch-status-error")?(this._throttleData=$he(Number(r.customData?.httpStatus),this._throttleData),ji.create("initial-throttle",{time:p7(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=Ip(e,"heartbeat"),Lhe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof KD?this._siteKey===e._siteKey:!1}}function $he(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+phe,httpStatus:t};{const n=e?e.backoffCount:0,r=Lne(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function qhe(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw ji.create("throttled",{time:p7(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function Ghe(t=kN(),e){t=Ft(t);const n=Ip(t,"app-check");if(P_().initialized||khe(),GD()&&HD().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(a.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&a.provider.isEqual(e.provider))return i;throw ji.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return Hhe(t,e.provider,e.isTokenAutoRefreshEnabled),yr(t).isTokenAutoRefreshEnabled&&w7(r,"INTERNAL",()=>{}),r}function Hhe(t,e,n=!1){const r=dhe(t,{...f7});r.activated=!0,r.provider=e,r.cachedTokenPromise=The(t).then(i=>(i&&vh(i)&&(r.token=i,S7(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&Dc.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const Khe="app-check",l5="app-check-internal";function Whe(){fl(new yo(Khe,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Ohe(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(l5).initialize()})),fl(new yo(l5,t=>{const e=t.getProvider("app-check").getImmediate();return Rhe(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),bs(Mhe,jhe)}Whe();const Yhe={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},WD=P$(Yhe);Ghe(WD,{provider:new KD("6Lf31GMsAAAAAHqILQS1jVjTe51WHK6lfIyxmsFT"),isTokenAutoRefreshEnabled:!0});const fi=p8(WD),et=Gfe(WD,{localCache:rhe({tabManager:ohe()})}),$={log:(...t)=>console.log(...t),warn:(...t)=>console.warn(...t),error:(...t)=>console.error(...t)},c5=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),Fb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),nn=UN()(q8(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Jie(fi,e,n)).user;if($.log(` Checking email verification for: ${i.email}`),$.log(" emailVerified status:",i.emailVerified),$.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return $.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await lL(fi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),$.log(` Login blocked: ${i.email} not verified`),!1;$.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=Fb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),$.log(` User logged in: ${a.email}`),!0}catch(r){$.error("Login error:",r),$.error("Error code:",r.code),$.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:$.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else $.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await Zie(fi,e,n)).user;await tae(a,{displayName:r}),await oL(a,c5());const s=Fb(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),$.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){$.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await lL(fi),$.log(" User logged out")}catch(e){$.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await Yie(fi,e),t({isLoading:!1}),!0}catch(n){$.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=fi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await oL(e,c5()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),$.log(` Verification email sent to: ${e.email}`),!0}catch(n){$.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=nn.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=fi.currentUser;if(!e)return!1;try{await e.reload();const n=fi.currentUser;if(n?.emailVerified){const r=Fb(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),$.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return $.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=fi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=Yd.credential(n.email,e);return await Kie(n,r),await aae(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),$.log(` Account permanently deleted: ${n.email}`),!0}catch(r){$.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await Xie(fi,e,n),t({isLoading:!1}),$.log(" Password reset successful"),!0}catch(r){$.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>nn.getState().isInitialized?()=>{}:(t({isInitialized:!1}),iae(fi,async r=>{const i=Date.now(),a=nn.getState(),s=r?Fb(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if($.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),$.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:u,willCheckOnboarding:f&&!u}),f&&!u){$.log(" Loading budgetStore to check onboarding...");const v=await Uh(()=>Promise.resolve().then(()=>cY),[]).then(b=>b.useBudgetStore.getState());$.log(" Calling budgetStore.checkAndStartOnboarding()..."),await v.checkAndStartOnboarding()}else $.log(" Skipping onboarding check (not verified or offline grace period)");else $.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),E7=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],Xhe=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=E7.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},N_=t=>{const e=E7.map(i=>({...i,met:i.regex.test(t)})),n=Xhe(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},T7=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=N_(t);return r?null:m.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[m.jsx("div",{className:"flex-1",children:m.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>m.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),m.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},A7=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=N_(t);return r?null:m.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>m.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?m.jsx(V8,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):m.jsx(s_,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),m.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},Qhe=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(!1),[f,h]=A.useState(!1),[g,v]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:S,loginError:T,clearError:I}=nn(),O=N_(n),D=async C=>{if(C.preventDefault(),I(),t.trim()&&n.trim())if(c){if(!i.trim()||!O.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},N=async C=>{C.preventDefault(),t.trim()&&await w(t.trim())&&v(!0)};return A.useEffect(()=>{e(""),r(""),a(""),v(!1)},[c,f]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?m.jsxs("form",{onSubmit:N,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-2",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(WC,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"reset-email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"email"})]})]}),g?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:m.jsx(WC,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),m.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),m.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",m.jsx("span",{className:"font-medium",children:t})]}),m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[m.jsx(gl,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"submit",disabled:S||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?"Sending...":"Send Reset Link"}),m.jsx("div",{className:"mt-4 text-center",children:m.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:[m.jsx(gl,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):m.jsxs("form",{onSubmit:D,className:"space-y-6",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),m.jsx("input",{id:"email",type:"email",value:t,onChange:C=>e(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"username"})]}),c&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),m.jsx("input",{id:"displayName",type:"text",value:i,onChange:C=>a(C.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:S})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&m.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:"Forgot password?"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:C=>r(C.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!O.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:S,autoComplete:c?"new-password":"current-password"}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:S,children:s?m.jsx(B8,{className:"h-5 w-5"}):m.jsx(F8,{className:"h-5 w-5"})})]}),c&&n&&m.jsx("div",{className:"mt-2",children:m.jsx(T7,{password:n})}),c&&n&&m.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:m.jsx(A7,{password:n})})]}),T&&m.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&m.jsx("div",{className:"mt-3",children:m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),m.jsx("button",{type:"submit",disabled:S||!t.trim()||!n.trim()||c&&!i.trim()||c&&!O.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:S,children:[m.jsx(bce,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Zhe=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[u,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:v,clearError:b}=nn(),x=N_(r);A.useEffect(()=>{b()},[b]);const w=async S=>{if(S.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:m.jsx(mw,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),m.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(CL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),m.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?m.jsx(B8,{className:"h-5 w-5"}):m.jsx(F8,{className:"h-5 w-5"})})]}),m.jsx("div",{className:"mt-2",children:m.jsx(T7,{password:r})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(CL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:S=>s(S.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),m.jsx(A7,{password:r}),v&&m.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:v}),m.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[m.jsx(gl,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},k7=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=nn();A.useEffect(()=>{i||$.warn("EmailVerificationView: No current user, this should not happen")},[i]),A.useEffect(()=>{const h=()=>{$.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),m.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:m.jsx(WC,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(mw,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),m.jsxs("div",{className:"text-left",children:[m.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),m.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[m.jsx("li",{children:"1. Open your email inbox"}),m.jsx("li",{children:"2. Find the email from House Budget"}),m.jsx("li",{children:'3. Click the "Verify Email" link'}),m.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&m.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&m.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),m.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?m.jsxs(m.Fragment,{children:[m.jsx(Gh,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Gh,{className:"h-4 w-4"}),"Resend verification email"]})}),m.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[m.jsx(gl,{className:"h-4 w-4"}),"Back to sign in"]})]})}),m.jsx("div",{className:"text-center",children:m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},C7=({message:t="Loading your budget...",showTimeout:e=!1})=>m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"relative",children:[m.jsx(Gh,{size:48,className:"text-blue-500 animate-spin"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx(Hh,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),m.jsxs("div",{className:"text-center space-y-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),m.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),m.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),m.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),m.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),m.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&m.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:m.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),m.jsx("div",{className:"mt-8 w-full max-w-md",children:m.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),YD=A.createContext({});function D_(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const XD=typeof window<"u",QD=XD?A.useLayoutEffect:A.useEffect,O_=A.createContext(null);function ZD(t,e){t.indexOf(e)===-1&&t.push(e)}function JD(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const yl=(t,e,n)=>n>e?e:n<t?t:n;let eO=()=>{};const bl={},I7=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function P7(t){return typeof t=="object"&&t!==null}const N7=t=>/^0[^.\s]+$/u.test(t);function tO(t){let e;return()=>(e===void 0&&(e=t()),e)}const Fa=t=>t,Jhe=(t,e)=>n=>e(t(n)),S0=(...t)=>t.reduce(Jhe),Av=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class nO{constructor(){this.subscriptions=[]}add(e){return ZD(this.subscriptions,e),()=>JD(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const po=t=>t*1e3,Va=t=>t/1e3;function D7(t,e){return e?t*(1e3/e):0}const O7=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,epe=1e-7,tpe=12;function npe(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=O7(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>epe&&++o<tpe);return s}function E0(t,e,n,r){if(t===e&&n===r)return Fa;const i=a=>npe(a,0,1,t,n);return a=>a===0||a===1?a:O7(i(a),e,r)}const R7=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,M7=t=>e=>1-t(1-e),j7=E0(.33,1.53,.69,.99),rO=M7(j7),z7=R7(rO),L7=t=>(t*=2)<1?.5*rO(t):.5*(2-Math.pow(2,-10*(t-1))),iO=t=>1-Math.sin(Math.acos(t)),V7=M7(iO),B7=R7(iO),rpe=E0(.42,0,1,1),ipe=E0(0,0,.58,1),F7=E0(.42,0,.58,1),ape=t=>Array.isArray(t)&&typeof t[0]!="number",U7=t=>Array.isArray(t)&&typeof t[0]=="number",spe={linear:Fa,easeIn:rpe,easeInOut:F7,easeOut:ipe,circIn:iO,circInOut:B7,circOut:V7,backIn:rO,backInOut:z7,backOut:j7,anticipate:L7},ope=t=>typeof t=="string",u5=t=>{if(U7(t)){eO(t.length===4);const[e,n,r,i]=t;return E0(e,n,r,i)}else if(ope(t))return spe[t];return t},Ub=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lpe(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const cpe=40;function $7(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Ub.reduce((I,O)=>(I[O]=lpe(a),I),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:v,postRender:b}=s,x=()=>{const I=bl.useManualTiming?i.timestamp:performance.now();n=!1,bl.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,cpe),1)),i.timestamp=I,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),v.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Ub.reduce((I,O)=>{const D=s[O];return I[O]=(N,C=!1,P=!1)=>(n||w(),D.schedule(N,C,P)),I},{}),cancel:I=>{for(let O=0;O<Ub.length;O++)s[Ub[O]].cancel(I)},state:i,steps:s}}const{schedule:bn,cancel:Xc,state:qr,steps:_A}=$7(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fa,!0);let Yx;function upe(){Yx=void 0}const zi={now:()=>(Yx===void 0&&zi.set(qr.isProcessing||bl.useManualTiming?qr.timestamp:performance.now()),Yx),set:t=>{Yx=t,queueMicrotask(upe)}},q7=t=>e=>typeof e=="string"&&e.startsWith(t),aO=q7("--"),dpe=q7("var(--"),sO=t=>dpe(t)?fpe.test(t.split("/*")[0].trim()):!1,fpe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},kv={...Vp,transform:t=>yl(0,1,t)},$b={...Vp,default:1},Km=t=>Math.round(t*1e5)/1e5,oO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hpe(t){return t==null}const ppe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lO=(t,e)=>n=>!!(typeof n=="string"&&ppe.test(n)&&n.startsWith(t)||e&&!hpe(n)&&Object.prototype.hasOwnProperty.call(n,e)),G7=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(oO);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},gpe=t=>yl(0,255,t),SA={...Vp,transform:t=>Math.round(gpe(t))},cd={test:lO("rgb","red"),parse:G7("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+SA.transform(t)+", "+SA.transform(e)+", "+SA.transform(n)+", "+Km(kv.transform(r))+")"};function mpe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const AI={test:lO("#"),parse:mpe,transform:cd.transform},T0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wc=T0("deg"),go=T0("%"),at=T0("px"),vpe=T0("vh"),ype=T0("vw"),d5={...go,parse:t=>go.parse(t)/100,transform:t=>go.transform(t*100)},yh={test:lO("hsl","hue"),parse:G7("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+go.transform(Km(e))+", "+go.transform(Km(n))+", "+Km(kv.transform(r))+")"},ir={test:t=>cd.test(t)||AI.test(t)||yh.test(t),parse:t=>cd.test(t)?cd.parse(t):yh.test(t)?yh.parse(t):AI.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?cd.transform(t):yh.transform(t),getAnimatableNone:t=>{const e=ir.parse(t);return e.alpha=0,ir.transform(e)}},bpe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xpe(t){return isNaN(t)&&typeof t=="string"&&(t.match(oO)?.length||0)+(t.match(bpe)?.length||0)>0}const H7="number",K7="color",wpe="var",_pe="var(",f5="${}",Spe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Spe,c=>(ir.test(c)?(r.color.push(a),i.push(K7),n.push(ir.parse(c))):c.startsWith(_pe)?(r.var.push(a),i.push(wpe),n.push(c)):(r.number.push(a),i.push(H7),n.push(parseFloat(c))),++a,f5)).split(f5);return{values:n,split:o,indexes:r,types:i}}function W7(t){return Cv(t).values}function Y7(t){const{split:e,types:n}=Cv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===H7?a+=Km(i[s]):o===K7?a+=ir.transform(i[s]):a+=i[s]}return a}}const Epe=t=>typeof t=="number"?0:ir.test(t)?ir.getAnimatableNone(t):t;function Tpe(t){const e=W7(t);return Y7(t)(e.map(Epe))}const Qc={test:xpe,parse:W7,createTransformer:Y7,getAnimatableNone:Tpe};function EA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ape({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=EA(c,o,t+1/3),a=EA(c,o,t),s=EA(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Lw(t,e){return n=>n>0?e:t}const Cn=(t,e,n)=>t+(e-t)*n,TA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},kpe=[AI,cd,yh],Cpe=t=>kpe.find(e=>e.test(t));function h5(t){const e=Cpe(t);if(!e)return!1;let n=e.parse(t);return e===yh&&(n=Ape(n)),n}const p5=(t,e)=>{const n=h5(t),r=h5(e);if(!n||!r)return Lw(t,e);const i={...n};return a=>(i.red=TA(n.red,r.red,a),i.green=TA(n.green,r.green,a),i.blue=TA(n.blue,r.blue,a),i.alpha=Cn(n.alpha,r.alpha,a),cd.transform(i))},kI=new Set(["none","hidden"]);function Ipe(t,e){return kI.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ppe(t,e){return n=>Cn(t,e,n)}function cO(t){return typeof t=="number"?Ppe:typeof t=="string"?sO(t)?Lw:ir.test(t)?p5:Ope:Array.isArray(t)?X7:typeof t=="object"?ir.test(t)?p5:Npe:Lw}function X7(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>cO(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function Npe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=cO(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function Dpe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const Ope=(t,e)=>{const n=Qc.createTransformer(e),r=Cv(t),i=Cv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?kI.has(t)&&!i.values.length||kI.has(e)&&!r.values.length?Ipe(t,e):S0(X7(Dpe(r,i),i.values),n):Lw(t,e)};function Q7(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Cn(t,e,n):cO(t)(t,e)}const Rpe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>bn.update(e,n),stop:()=>Xc(e),now:()=>qr.isProcessing?qr.timestamp:zi.now()}},Z7=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Vw=2e4;function uO(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Vw;)e+=n,r=t.next(e);return e>=Vw?1/0:e}function Mpe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(uO(r),Vw);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Va(i)}}const jpe=5;function J7(t,e,n){const r=Math.max(e-jpe,0);return D7(n-t(r),e-r)}const Rn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},AA=.001;function zpe({duration:t=Rn.duration,bounce:e=Rn.bounce,velocity:n=Rn.velocity,mass:r=Rn.mass}){let i,a,s=1-e;s=yl(Rn.minDamping,Rn.maxDamping,s),t=yl(Rn.minDuration,Rn.maxDuration,Va(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,v=CI(u,s),b=Math.exp(-h);return AA-g/v*b},a=u=>{const h=u*s*t,g=h*n+n,v=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=CI(Math.pow(u,2),s);return(-i(u)+AA>0?-1:1)*((g-v)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-AA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=Vpe(i,a,o);if(t=po(t),isNaN(c))return{stiffness:Rn.stiffness,damping:Rn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const Lpe=12;function Vpe(t,e,n){let r=n;for(let i=1;i<Lpe;i++)r=r-t(r)/e(r);return r}function CI(t,e){return t*Math.sqrt(1-e*e)}const Bpe=["duration","bounce"],Fpe=["stiffness","damping","mass"];function g5(t,e){return e.some(n=>t[n]!==void 0)}function Upe(t){let e={velocity:Rn.velocity,stiffness:Rn.stiffness,damping:Rn.damping,mass:Rn.mass,isResolvedFromDuration:!1,...t};if(!g5(t,Fpe)&&g5(t,Bpe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*yl(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Rn.mass,stiffness:i,damping:a}}else{const n=zpe(t);e={...e,...n,mass:Rn.mass},e.isResolvedFromDuration=!0}return e}function Bw(t=Rn.visualDuration,e=Rn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:v}=Upe({...n,velocity:-Va(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,S=Va(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Rn.restSpeed.granular:Rn.restSpeed.default),i||(i=T?Rn.restDelta.granular:Rn.restDelta.default);let I;if(x<1){const D=CI(S,x);I=N=>{const C=Math.exp(-x*S*N);return s-C*((b+x*S*w)/D*Math.sin(D*N)+w*Math.cos(D*N))}}else if(x===1)I=D=>s-Math.exp(-S*D)*(w+(b+S*w)*D);else{const D=S*Math.sqrt(x*x-1);I=N=>{const C=Math.exp(-x*S*N),P=Math.min(D*N,300);return s-C*((b+x*S*w)*Math.sinh(P)+D*w*Math.cosh(P))/D}}const O={calculatedDuration:v&&h||null,next:D=>{const N=I(D);if(v)o.done=D>=h;else{let C=D===0?b:0;x<1&&(C=D===0?po(b):J7(I,D,N));const P=Math.abs(C)<=r,R=Math.abs(s-N)<=i;o.done=P&&R}return o.value=o.done?s:N,o},toString:()=>{const D=Math.min(uO(O),Vw),N=Z7(C=>O.next(D*C).value,D,30);return D+"ms "+N},toTransition:()=>{}};return O}Bw.applyToOptions=t=>{const e=Mpe(t,100,Bw);return t.ease=e.ease,t.duration=po(e.duration),t.type="keyframes",t};function II({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},v=P=>o!==void 0&&P<o||c!==void 0&&P>c,b=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let x=n*e;const w=h+x,S=s===void 0?w:s(w);S!==w&&(x=S-h);const T=P=>-x*Math.exp(-P/r),I=P=>S+T(P),O=P=>{const R=T(P),j=I(P);g.done=Math.abs(R)<=u,g.value=g.done?S:j};let D,N;const C=P=>{v(g.value)&&(D=P,N=Bw({keyframes:[g.value,b(g.value)],velocity:J7(I,P,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return C(0),{calculatedDuration:null,next:P=>{let R=!1;return!N&&D===void 0&&(R=!0,O(P),C(P)),D!==void 0&&P>=D?N.next(P-D):(!R&&O(P),g)}}}function $pe(t,e,n){const r=[],i=n||bl.mix||Q7,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Fa:e;o=S0(c,o)}r.push(o)}return r}function qpe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(eO(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=$pe(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=Av(t[h],t[h+1],f);return o[h](g)};return n?f=>u(yl(t[0],t[a-1],f)):u}function Gpe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Av(0,e,r);t.push(Cn(n,1,i))}}function Hpe(t){const e=[0];return Gpe(e,t.length-1),e}function Kpe(t,e){return t.map(n=>n*e)}function Wpe(t,e){return t.map(()=>e||F7).splice(0,t.length-1)}function Wm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=ape(r)?r.map(u5):u5(r),a={done:!1,value:e[0]},s=Kpe(n&&n.length===e.length?n:Hpe(e),t),o=qpe(s,e,{ease:Array.isArray(i)?i:Wpe(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const Ype=t=>t!==null;function dO(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Ype),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const Xpe={decay:II,inertia:II,tween:Wm,keyframes:Wm,spring:Bw};function eH(t){typeof t.type=="string"&&(t.type=Xpe[t.type])}class fO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Qpe=t=>t/100;class hO extends fO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==zi.now()&&this.tick(zi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;eH(e);const{type:n=Wm,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||Wm;c!==Wm&&typeof o[0]!="number"&&(this.mixKeyframes=S0(Qpe,Q7(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=uO(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:v,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,O=r;if(h){const P=Math.min(this.currentTime,i)/o;let R=Math.floor(P),j=P%1;!j&&P>=1&&(j=1),j===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(g==="reverse"?(j=1-j,v&&(j-=v/o)):g==="mirror"&&(O=s)),I=yl(0,1,j)*o}const D=T?{done:!1,value:f[0]}:O.next(I);a&&(D.value=a(D.value));let{done:N}=D;!T&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return C&&b!==II&&(D.value=dO(f,this.options,w,this.speed)),x&&x(D.value),C&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return Va(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Va(e)}get time(){return Va(this.currentTime)}set time(e){e=po(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Va(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Rpe,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Zpe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ud=t=>t*180/Math.PI,PI=t=>{const e=ud(Math.atan2(t[1],t[0]));return NI(e)},Jpe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:PI,rotateZ:PI,skewX:t=>ud(Math.atan(t[1])),skewY:t=>ud(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},NI=t=>(t=t%360,t<0&&(t+=360),t),m5=PI,v5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),y5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ege={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:v5,scaleY:y5,scale:t=>(v5(t)+y5(t))/2,rotateX:t=>NI(ud(Math.atan2(t[6],t[5]))),rotateY:t=>NI(ud(Math.atan2(-t[2],t[0]))),rotateZ:m5,rotate:m5,skewX:t=>ud(Math.atan(t[4])),skewY:t=>ud(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function DI(t){return t.includes("scale")?1:0}function OI(t,e){if(!t||t==="none")return DI(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=ege,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Jpe,i=o}if(!i)return DI(e);const a=r[e],s=i[1].split(",").map(nge);return typeof a=="function"?a(s):s[a]}const tge=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return OI(n,e)};function nge(t){return parseFloat(t.trim())}const Bp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fp=new Set(Bp),b5=t=>t===Vp||t===at,rge=new Set(["x","y","z"]),ige=Bp.filter(t=>!rge.has(t));function age(t){const e=[];return ige.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const wd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>OI(e,"x"),y:(t,{transform:e})=>OI(e,"y")};wd.translateX=wd.x;wd.translateY=wd.y;const _d=new Set;let RI=!1,MI=!1,jI=!1;function tH(){if(MI){const t=Array.from(_d).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=age(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}MI=!1,RI=!1,_d.forEach(t=>t.complete(jI)),_d.clear()}function nH(){_d.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(MI=!0)})}function sge(){jI=!0,nH(),tH(),jI=!1}class pO{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(_d.add(this),RI||(RI=!0,bn.read(nH),bn.resolveKeyframes(tH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Zpe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),_d.delete(this)}cancel(){this.state==="scheduled"&&(_d.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oge=t=>t.startsWith("--");function lge(t,e,n){oge(e)?t.style.setProperty(e,n):t.style[e]=n}const cge=tO(()=>window.ScrollTimeline!==void 0),uge={};function dge(t,e){const n=tO(t);return()=>uge[e]??n()}const rH=dge(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Im=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,x5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Im([0,.65,.55,1]),circOut:Im([.55,0,1,.45]),backIn:Im([.31,.01,.66,-.59]),backOut:Im([.33,1.53,.69,.99])};function iH(t,e){if(t)return typeof t=="function"?rH()?Z7(t,e):"ease-out":U7(t)?Im(t):Array.isArray(t)?t.map(n=>iH(n,e)||x5.easeOut):x5[t]}function fge(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=iH(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function aH(t){return typeof t=="function"&&"applyToOptions"in t}function hge({type:t,...e}){return aH(t)&&rH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class pge extends fO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,eO(typeof e.type!="string");const u=hge(e);this.animation=fge(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=dO(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):lge(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Va(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Va(e)}get time(){return Va(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=po(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&cge()?(this.animation.timeline=e,Fa):n(this)}}const sH={anticipate:L7,backInOut:z7,circInOut:B7};function gge(t){return t in sH}function mge(t){typeof t.ease=="string"&&gge(t.ease)&&(t.ease=sH[t.ease])}const w5=10;class vge extends pge{constructor(e){mge(e),eH(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new hO({...s,autoplay:!1}),c=po(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-w5).value,o.sample(c).value,w5),o.stop()}}const _5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qc.test(t)||t==="0")&&!t.startsWith("url("));function yge(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function bge(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=_5(i,e),o=_5(a,e);return!s||!o?!1:yge(t)||(n==="spring"||aH(n))&&r}function zI(t){t.duration=0,t.type="keyframes"}const xge=new Set(["opacity","clipPath","filter","transform"]),wge=tO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _ge(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return wge()&&n&&xge.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const Sge=40;class Ege extends fO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=zi.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},v=f?.KeyframeResolver||pO;this.keyframeResolver=new v(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=zi.now(),bge(e,a,s,o)||((bl.instantAnimations||!c)&&f?.(dO(e,r,n)),e[0]=e[e.length-1],zI(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Sge?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!u&&_ge(g)?new vge({...g,element:g.motionValue.owner.current}):new hO(g);v.finished.then(()=>this.notifyFinished()).catch(Fa),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),sge()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Tge=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Age(t){const e=Tge.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function oH(t,e,n=1){const[r,i]=Age(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return I7(s)?parseFloat(s):s}return sO(i)?oH(i,e,n+1):i}function gO(t,e){return t?.[e]??t?.default??t}const lH=new Set(["width","height","top","left","right","bottom",...Bp]),kge={test:t=>t==="auto",parse:t=>t},cH=t=>e=>e.test(t),uH=[Vp,at,go,wc,ype,vpe,kge],S5=t=>uH.find(cH(t));function Cge(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||N7(t):!0}const Ige=new Set(["brightness","contrast","saturate","opacity"]);function Pge(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(oO)||[];if(!r)return t;const i=n.replace(r,"");let a=Ige.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Nge=/\b([a-z-]*)\(.*?\)/gu,LI={...Qc,getAnimatableNone:t=>{const e=t.match(Nge);return e?e.map(Pge).join(" "):t}},E5={...Vp,transform:Math.round},Dge={rotate:wc,rotateX:wc,rotateY:wc,rotateZ:wc,scale:$b,scaleX:$b,scaleY:$b,scaleZ:$b,skew:wc,skewX:wc,skewY:wc,distance:at,translateX:at,translateY:at,translateZ:at,x:at,y:at,z:at,perspective:at,transformPerspective:at,opacity:kv,originX:d5,originY:d5,originZ:at},mO={borderWidth:at,borderTopWidth:at,borderRightWidth:at,borderBottomWidth:at,borderLeftWidth:at,borderRadius:at,radius:at,borderTopLeftRadius:at,borderTopRightRadius:at,borderBottomRightRadius:at,borderBottomLeftRadius:at,width:at,maxWidth:at,height:at,maxHeight:at,top:at,right:at,bottom:at,left:at,padding:at,paddingTop:at,paddingRight:at,paddingBottom:at,paddingLeft:at,margin:at,marginTop:at,marginRight:at,marginBottom:at,marginLeft:at,backgroundPositionX:at,backgroundPositionY:at,...Dge,zIndex:E5,fillOpacity:kv,strokeOpacity:kv,numOctaves:E5},Oge={...mO,color:ir,backgroundColor:ir,outlineColor:ir,fill:ir,stroke:ir,borderColor:ir,borderTopColor:ir,borderRightColor:ir,borderBottomColor:ir,borderLeftColor:ir,filter:LI,WebkitFilter:LI},dH=t=>Oge[t];function fH(t,e){let n=dH(t);return n!==LI&&(n=Qc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Rge=new Set(["auto","none","0"]);function Mge(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Rge.has(a)&&Cv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=fH(n,i)}class jge extends pO{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),sO(u))){const f=oH(u,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!lH.has(r)||e.length!==2)return;const[i,a]=e,s=S5(i),o=S5(a);if(s!==o)if(b5(s)&&b5(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else wd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Cge(e[i]))&&r.push(i);r.length&&Mge(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=wd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function zge(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const hH=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function pH(t){return P7(t)&&"offsetHeight"in t}const T5=30,Lge=t=>!isNaN(parseFloat(t));class Vge{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=zi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=zi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Lge(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new nO);const r=this.events[e].add(n);return e==="change"?()=>{r(),bn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>T5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,T5);return D7(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cp(t,e){return new Vge(t,e)}const{schedule:vO}=$7(queueMicrotask,!1),ds={x:!1,y:!1};function gH(){return ds.x||ds.y}function Bge(t){return t==="x"||t==="y"?ds[t]?null:(ds[t]=!0,()=>{ds[t]=!1}):ds.x||ds.y?null:(ds.x=ds.y=!0,()=>{ds.x=ds.y=!1})}function mH(t,e){const n=zge(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function A5(t){return!(t.pointerType==="touch"||gH())}function Fge(t,e,n={}){const[r,i,a]=mH(t,n),s=o=>{if(!A5(o))return;const{target:c}=o,u=e(c,o);if(typeof u!="function"||!c)return;const f=h=>{A5(h)&&(u(h),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const vH=(t,e)=>e?t===e?!0:vH(t,e.parentElement):!1,yO=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Uge=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $ge(t){return Uge.has(t.tagName)||t.tabIndex!==-1}const Xx=new WeakSet;function k5(t){return e=>{e.key==="Enter"&&t(e)}}function kA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const qge=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=k5(()=>{if(Xx.has(n))return;kA(n,"down");const i=k5(()=>{kA(n,"up")}),a=()=>kA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function C5(t){return yO(t)&&!gH()}function Gge(t,e,n={}){const[r,i,a]=mH(t,n),s=o=>{const c=o.currentTarget;if(!C5(o))return;Xx.add(c);const u=e(c,o),f=(v,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),Xx.has(c)&&Xx.delete(c),C5(v)&&typeof u=="function"&&u(v,{success:b})},h=v=>{f(v,c===window||c===document||n.useGlobalTarget||vH(c,v.target))},g=v=>{f(v,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),pH(o)&&(o.addEventListener("focus",u=>qge(u,i)),!$ge(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function yH(t){return P7(t)&&"ownerSVGElement"in t}function Hge(t){return yH(t)&&t.tagName==="svg"}const ii=t=>!!(t&&t.getVelocity),Kge=[...uH,ir,Qc],Wge=t=>Kge.find(cH(t)),bO=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function I5(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Yge(...t){return e=>{let n=!1;const r=t.map(i=>{const a=I5(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():I5(t[i],null)}}}}function Xge(...t){return A.useCallback(Yge(...t),t)}class Qge extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=pH(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Zge({children:t,isPresent:e,anchorX:n,root:r}){const i=A.useId(),a=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=A.useContext(bO),c=Xge(a,t?.ref);return A.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:g,right:v}=s.current;if(e||!a.current||!u||!f)return;const b=n==="left"?`left: ${g}`:`right: ${v}`;a.current.dataset.motionPopId=i;const x=document.createElement("style");o&&(x.nonce=o);const w=r??document.head;return w.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(x)&&w.removeChild(x)}},[e]),m.jsx(Qge,{isPresent:e,childRef:a,sizeRef:s,children:A.cloneElement(t,{ref:c})})}const Jge=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:c})=>{const u=D_(eme),f=A.useId();let h=!0,g=A.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:v=>{u.set(v,!0);for(const b of u.values())if(!b)return;r&&r()},register:v=>(u.set(v,!1),()=>u.delete(v))}),[n,u,r]);return a&&h&&(g={...g}),A.useMemo(()=>{u.forEach((v,b)=>u.set(b,!1))},[n]),A.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),s==="popLayout"&&(t=m.jsx(Zge,{isPresent:n,anchorX:o,root:c,children:t})),m.jsx(O_.Provider,{value:g,children:t})};function eme(){return new Map}function bH(t=!0){const e=A.useContext(O_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const qb=t=>t.key||"";function P5(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const Wr=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:c})=>{const[u,f]=bH(s),h=A.useMemo(()=>P5(t),[t]),g=s&&!u?[]:h.map(qb),v=A.useRef(!0),b=A.useRef(h),x=D_(()=>new Map),[w,S]=A.useState(h),[T,I]=A.useState(h);QD(()=>{v.current=!1,b.current=h;for(let N=0;N<T.length;N++){const C=qb(T[N]);g.includes(C)?x.delete(C):x.get(C)!==!0&&x.set(C,!1)}},[T,g.length,g.join("-")]);const O=[];if(h!==w){let N=[...h];for(let C=0;C<T.length;C++){const P=T[C],R=qb(P);g.includes(R)||(N.splice(C,0,P),O.push(P))}return a==="wait"&&O.length&&(N=O),I(P5(N)),S(h),null}const{forceRender:D}=A.useContext(YD);return m.jsx(m.Fragment,{children:T.map(N=>{const C=qb(N),P=s&&!u?!1:h===T||g.includes(C),R=()=>{if(x.has(C))x.set(C,!0);else return;let j=!0;x.forEach(L=>{L||(j=!1)}),j&&(D?.(),I(b.current),s&&f?.(),r&&r())};return m.jsx(Jge,{isPresent:P,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:P?void 0:R,anchorX:o,children:N},C)})})},xH=A.createContext({strict:!1}),N5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},up={};for(const t in N5)up[t]={isEnabled:e=>N5[t].some(n=>!!e[n])};function tme(t){for(const e in t)up[e]={...up[e],...t[e]}}const nme=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fw(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nme.has(t)}let wH=t=>!Fw(t);function rme(t){typeof t=="function"&&(wH=e=>e.startsWith("on")?!Fw(e):t(e))}try{rme(require("@emotion/is-prop-valid").default)}catch{}function ime(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(wH(i)||n===!0&&Fw(i)||!e&&!Fw(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const R_=A.createContext({});function M_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Iv(t){return typeof t=="string"||Array.isArray(t)}const xO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wO=["initial",...xO];function j_(t){return M_(t.animate)||wO.some(e=>Iv(t[e]))}function _H(t){return!!(j_(t)||t.variants)}function ame(t,e){if(j_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Iv(n)?n:void 0,animate:Iv(r)?r:void 0}}return t.inherit!==!1?e:{}}function sme(t){const{initial:e,animate:n}=ame(t,A.useContext(R_));return A.useMemo(()=>({initial:e,animate:n}),[D5(e),D5(n)])}function D5(t){return Array.isArray(t)?t.join(" "):t}const Pv={};function ome(t){for(const e in t)Pv[e]=t[e],aO(e)&&(Pv[e].isCSSVariable=!0)}function SH(t,{layout:e,layoutId:n}){return Fp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Pv[t]||t==="opacity")}const lme={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cme=Bp.length;function ume(t,e,n){let r="",i=!0;for(let a=0;a<cme;a++){const s=Bp[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=hH(o,mO[s]);if(!c){i=!1;const f=lme[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function _O(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(Fp.has(c)){s=!0;continue}else if(aO(c)){i[c]=u;continue}else{const f=hH(u,mO[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=ume(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}const SO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EH(t,e,n){for(const r in e)!ii(e[r])&&!SH(r,n)&&(t[r]=e[r])}function dme({transformTemplate:t},e){return A.useMemo(()=>{const n=SO();return _O(n,e,t),Object.assign({},n.vars,n.style)},[e])}function fme(t,e){const n=t.style||{},r={};return EH(r,n,t),Object.assign(r,dme(t,e)),r}function hme(t,e){const n={},r=fme(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const pme={offset:"stroke-dashoffset",array:"stroke-dasharray"},gme={offset:"strokeDashoffset",array:"strokeDasharray"};function mme(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?pme:gme;t[a.offset]=at.transform(-r);const s=at.transform(e),o=at.transform(n);t[a.array]=`${s} ${o}`}function TH(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(_O(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&mme(h,i,a,s,!1)}const AH=()=>({...SO(),attrs:{}}),kH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function vme(t,e,n,r){const i=A.useMemo(()=>{const a=AH();return TH(a,e,kH(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};EH(a,t.style,t),i.style={...a,...i.style}}return i}const yme=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function EO(t){return typeof t!="string"||t.includes("-")?!1:!!(yme.indexOf(t)>-1||/[A-Z]/u.test(t))}function bme(t,e,n,{latestValues:r},i,a=!1){const o=(EO(t)?vme:hme)(e,r,i,t),c=ime(e,typeof t=="string",a),u=t!==A.Fragment?{...c,...o,ref:n}:{},{children:f}=e,h=A.useMemo(()=>ii(f)?f.get():f,[f]);return A.createElement(t,{...u,children:h})}function O5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function TO(t,e,n,r){if(typeof e=="function"){const[i,a]=O5(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=O5(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Qx(t){return ii(t)?t.get():t}function xme({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:wme(n,r,i,t),renderState:e()}}function wme(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=Qx(a[g]);let{initial:s,animate:o}=t;const c=j_(t),u=_H(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!M_(h)){const g=Array.isArray(h)?h:[h];for(let v=0;v<g.length;v++){const b=TO(t,g[v]);if(b){const{transitionEnd:x,transition:w,...S}=b;for(const T in S){let I=S[T];if(Array.isArray(I)){const O=f?I.length-1:0;I=I[O]}I!==null&&(i[T]=I)}for(const T in x)i[T]=x[T]}}}return i}const CH=t=>(e,n)=>{const r=A.useContext(R_),i=A.useContext(O_),a=()=>xme(t,e,r,i);return n?a():D_(a)};function AO(t,e,n){const{style:r}=t,i={};for(const a in r)(ii(r[a])||e.style&&ii(e.style[a])||SH(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const _me=CH({scrapeMotionValuesFromProps:AO,createRenderState:SO});function IH(t,e,n){const r=AO(t,e,n);for(const i in t)if(ii(t[i])||ii(e[i])){const a=Bp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const Sme=CH({scrapeMotionValuesFromProps:IH,createRenderState:AH}),Eme=Symbol.for("motionComponentSymbol");function bh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Tme(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):bh(n)&&(n.current=r))},[e])}const kO=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ame="framerAppearId",PH="data-"+kO(Ame),NH=A.createContext({});function kme(t,e,n,r,i){const{visualElement:a}=A.useContext(R_),s=A.useContext(xH),o=A.useContext(O_),c=A.useContext(bO).reducedMotion,u=A.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const f=u.current,h=A.useContext(NH);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Cme(u.current,n,i,h);const g=A.useRef(!1);A.useInsertionEffect(()=>{f&&g.current&&f.update(n,o)});const v=n[PH],b=A.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return QD(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),b.current=!1),f.enteringChildren=void 0)}),f}function Cme(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:DH(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&bh(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function DH(t){if(t)return t.options.allowProjection!==!1?t.projection:DH(t.parent)}function CA(t,{forwardMotionProps:e=!1}={},n,r){n&&tme(n);const i=EO(t)?Sme:_me;function a(o,c){let u;const f={...A.useContext(bO),...o,layoutId:Ime(o)},{isStatic:h}=f,g=sme(o),v=i(o,h);if(!h&&XD){Pme();const b=Nme(f);u=b.MeasureLayout,g.visualElement=kme(t,v,f,r,b.ProjectionNode)}return m.jsxs(R_.Provider,{value:g,children:[u&&g.visualElement?m.jsx(u,{visualElement:g.visualElement,...f}):null,bme(t,o,Tme(v,g.visualElement,c),v,h,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=A.forwardRef(a);return s[Eme]=t,s}function Ime({layoutId:t}){const e=A.useContext(YD).id;return e&&t!==void 0?e+"-"+t:t}function Pme(t,e){A.useContext(xH).strict}function Nme(t){const{drag:e,layout:n}=up;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Dme(t,e){if(typeof Proxy>"u")return CA;const n=new Map,r=(a,s)=>CA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,CA(s,void 0,t,e)),n.get(s))})}function OH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Ome({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Rme(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function IA(t){return t===void 0||t===1}function VI({scale:t,scaleX:e,scaleY:n}){return!IA(t)||!IA(e)||!IA(n)}function Wu(t){return VI(t)||RH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RH(t){return R5(t.x)||R5(t.y)}function R5(t){return t&&t!=="0%"}function Uw(t,e,n){const r=t-n,i=e*r;return n+i}function M5(t,e,n,r,i){return i!==void 0&&(t=Uw(t,i,r)),Uw(t,n,r)+e}function BI(t,e=0,n=1,r,i){t.min=M5(t.min,e,n,r,i),t.max=M5(t.max,e,n,r,i)}function MH(t,{x:e,y:n}){BI(t.x,e.translate,e.scale,e.originPoint),BI(t.y,n.translate,n.scale,n.originPoint)}const j5=.999999999999,z5=1.0000000000001;function Mme(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&wh(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,MH(t,s)),r&&Wu(a.latestValues)&&wh(t,a.latestValues))}e.x<z5&&e.x>j5&&(e.x=1),e.y<z5&&e.y>j5&&(e.y=1)}function xh(t,e){t.min=t.min+e,t.max=t.max+e}function L5(t,e,n,r,i=.5){const a=Cn(t.min,t.max,i);BI(t,e,n,a,r)}function wh(t,e){L5(t.x,e.x,e.scaleX,e.scale,e.originX),L5(t.y,e.y,e.scaleY,e.scale,e.originY)}function jH(t,e){return OH(Rme(t.getBoundingClientRect(),e))}function jme(t,e,n){const r=jH(t,n),{scroll:i}=e;return i&&(xh(r.x,i.offset.x),xh(r.y,i.offset.y)),r}const V5=()=>({translate:0,scale:1,origin:0,originPoint:0}),_h=()=>({x:V5(),y:V5()}),B5=()=>({min:0,max:0}),qn=()=>({x:B5(),y:B5()}),FI={current:null},zH={current:!1};function zme(){if(zH.current=!0,!!XD)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>FI.current=t.matches;t.addEventListener("change",e),e()}else FI.current=!1}const Lme=new WeakMap;function Vme(t,e,n){for(const r in e){const i=e[r],a=n[r];if(ii(i))t.addValue(r,i);else if(ii(a))t.addValue(r,cp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,cp(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const F5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Bme{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=zi.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,bn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=j_(n),this.isVariantNode=_H(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const v=h[g];c[g]!==void 0&&ii(v)&&v.set(c[g])}}mount(e){this.current=e,Lme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),zH.current||zme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:FI.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Xc(this.notifyUpdate),Xc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Fp.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&bn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in up){const n=up[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<F5.length;r++){const i=F5[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Vme(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=cp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(I7(r)||N7(r))?r=parseFloat(r):!Wge(r)&&Qc.test(n)&&(r=fH(e,n)),this.setBaseTarget(e,ii(r)?r.get():r)),ii(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=TO(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ii(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new nO),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){vO.render(this.render)}}class LH extends Bme{constructor(){super(...arguments),this.KeyframeResolver=jge}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ii(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function VH(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function Fme(t){return window.getComputedStyle(t)}class Ume extends LH{constructor(){super(...arguments),this.type="html",this.renderInstance=VH}readValueFromInstance(e,n){if(Fp.has(n))return this.projection?.isProjecting?DI(n):tge(e,n);{const r=Fme(e),i=(aO(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jH(e,n)}build(e,n,r){_O(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return AO(e,n,r)}}const BH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $me(t,e,n,r){VH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(BH.has(i)?i:kO(i),e.attrs[i])}class qme extends LH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Fp.has(n)){const r=dH(n);return r&&r.default||0}return n=BH.has(n)?n:kO(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return IH(e,n,r)}build(e,n,r){TH(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){$me(e,n,r,i)}mount(e){this.isSVGTag=kH(e.tagName),super.mount(e)}}const Gme=(t,e)=>EO(t)?new qme(e):new Ume(e,{allowProjection:t!==A.Fragment});function zh(t,e,n){const r=t.getProps();return TO(r,e,n!==void 0?n:r.custom,t)}const UI=t=>Array.isArray(t);function Hme(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,cp(n))}function Kme(t){return UI(t)?t[t.length-1]||0:t}function CO(t,e){const n=zh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=Kme(a[s]);Hme(t,s,o)}}function Wme(t){return!!(ii(t)&&t.add)}function $I(t,e){const n=t.getValue("willChange");if(Wme(n))return n.add(e);if(!n&&bl.WillChange){const r=new bl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function FH(t){return t.props[PH]}const Yme=t=>t!==null;function Xme(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Yme),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const Qme={type:"spring",stiffness:500,damping:25,restSpeed:10},Zme=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Jme={type:"keyframes",duration:.8},eve={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tve=(t,{keyframes:e})=>e.length>2?Jme:Fp.has(t)?t.startsWith("scale")?Zme(e[1]):Qme:eve;function nve({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const IO=(t,e,n,r={},i,a)=>s=>{const o=gO(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-po(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};nve(o)||Object.assign(f,tve(t,f)),f.duration&&(f.duration=po(f.duration)),f.repeatDelay&&(f.repeatDelay=po(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(zI(f),f.delay===0&&(h=!0)),(bl.instantAnimations||bl.skipAnimations)&&(h=!0,zI(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=Xme(f.keyframes,o);if(g!==void 0){bn.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new hO(f):new Ege(f)};function rve({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function UH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const h=t.getValue(f,t.latestValues[f]??null),g=o[f];if(g===void 0||u&&rve(u,f))continue;const v={delay:n,...gO(a||{},f)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===b&&!v.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const S=FH(t);if(S){const T=window.MotionHandoffAnimation(S,f,bn);T!==null&&(v.startTime=T,x=!0)}}$I(t,f),h.start(IO(f,h,g,t.shouldReduceMotion&&lH.has(f)?{type:!1}:v,t,x));const w=h.animation;w&&c.push(w)}return s&&Promise.all(c).then(()=>{bn.update(()=>{s&&CO(t,s)})}),c}function $H(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}function qI(t,e,n={}){const r=zh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(UH(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return ive(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function ive(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(qI(c,e,{...s,delay:n+(typeof r=="function"?0:r)+$H(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function qH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>qI(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=qI(t,e,n);else{const i=typeof e=="function"?zh(t,e,n.custom):e;r=Promise.all(UH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function GH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const ave=wO.length;function HH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?HH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<ave;n++){const r=wO[n],i=t.props[r];(Iv(i)||i===!1)&&(e[r]=i)}return e}const sve=[...xO].reverse(),ove=xO.length;function lve(t){return e=>Promise.all(e.map(({animation:n,options:r})=>qH(t,n,r)))}function cve(t){let e=lve(t),n=U5(),r=!0;const i=c=>(u,f)=>{const h=zh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=HH(t.parent)||{},h=[],g=new Set;let v={},b=1/0;for(let w=0;w<ove;w++){const S=sve[w],T=n[S],I=u[S]!==void 0?u[S]:f[S],O=Iv(I),D=S===c?T.isActive:null;D===!1&&(b=w);let N=I===f[S]&&I!==u[S]&&O;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),T.protectedKeys={...v},!T.isActive&&D===null||!I&&!T.prevProp||M_(I)||typeof I=="boolean")continue;const C=uve(T.prevProp,I);let P=C||S===c&&T.isActive&&!N&&O||w>b&&O,R=!1;const j=Array.isArray(I)?I:[I];let L=j.reduce(i(S),{});D===!1&&(L={});const{prevResolvedValues:B={}}=T,z={...B,...L},W=Y=>{P=!0,g.has(Y)&&(R=!0,g.delete(Y)),T.needsAnimating[Y]=!0;const Q=t.getValue(Y);Q&&(Q.liveStyle=!1)};for(const Y in z){const Q=L[Y],J=B[Y];if(v.hasOwnProperty(Y))continue;let te=!1;UI(Q)&&UI(J)?te=!GH(Q,J):te=Q!==J,te?Q!=null?W(Y):g.add(Y):Q!==void 0&&g.has(Y)?W(Y):T.protectedKeys[Y]=!0}T.prevProp=I,T.prevResolvedValues=L,T.isActive&&(v={...v,...L}),r&&t.blockInitialAnimation&&(P=!1);const Z=N&&C;P&&(!Z||R)&&h.push(...j.map(Y=>{const Q={type:S};if(typeof Y=="string"&&r&&!Z&&t.manuallyAnimateOnMount&&t.parent){const{parent:J}=t,te=zh(J,Y);if(J.enteringChildren&&te){const{delayChildren:U}=te.transition||{};Q.delay=$H(J.enteringChildren,t,U)}}return{animation:Y,options:Q}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const S=zh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(w.transition=S.transition)}g.forEach(S=>{const T=t.getBaseTarget(S),I=t.getValue(S);I&&(I.liveStyle=!0),w[S]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=U5()}}}function uve(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!GH(e,t):!1}function Uu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function U5(){return{animate:Uu(!0),whileInView:Uu(),whileHover:Uu(),whileTap:Uu(),whileDrag:Uu(),whileFocus:Uu(),exit:Uu()}}class cu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class dve extends cu{constructor(e){super(e),e.animationState||(e.animationState=cve(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();M_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let fve=0;class hve extends cu{constructor(){super(...arguments),this.id=fve++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const pve={animation:{Feature:dve},exit:{Feature:hve}};function Nv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function A0(t){return{point:{x:t.pageX,y:t.pageY}}}const gve=t=>e=>yO(e)&&t(e,A0(e));function Ym(t,e,n,r){return Nv(t,e,gve(n),r)}const KH=1e-4,mve=1-KH,vve=1+KH,WH=.01,yve=0-WH,bve=0+WH;function mi(t){return t.max-t.min}function xve(t,e,n){return Math.abs(t-e)<=n}function $5(t,e,n,r=.5){t.origin=r,t.originPoint=Cn(e.min,e.max,t.origin),t.scale=mi(n)/mi(e),t.translate=Cn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=mve&&t.scale<=vve||isNaN(t.scale))&&(t.scale=1),(t.translate>=yve&&t.translate<=bve||isNaN(t.translate))&&(t.translate=0)}function Xm(t,e,n,r){$5(t.x,e.x,n.x,r?r.originX:void 0),$5(t.y,e.y,n.y,r?r.originY:void 0)}function q5(t,e,n){t.min=n.min+e.min,t.max=t.min+mi(e)}function wve(t,e,n){q5(t.x,e.x,n.x),q5(t.y,e.y,n.y)}function G5(t,e,n){t.min=e.min-n.min,t.max=t.min+mi(e)}function Qm(t,e,n){G5(t.x,e.x,n.x),G5(t.y,e.y,n.y)}function za(t){return[t("x"),t("y")]}const YH=({current:t})=>t?t.ownerDocument.defaultView:null,H5=(t,e)=>Math.abs(t-e);function _ve(t,e){const n=H5(t.x,e.x),r=H5(t.y,e.y);return Math.sqrt(n**2+r**2)}class XH{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=NA(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=_ve(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!b)return;const{point:x}=g,{timestamp:w}=qr;this.history.push({...x,timestamp:w});const{onStart:S,onMove:T}=this.handlers;v||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=PA(v,this.transformPagePoint),bn.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=NA(g.type==="pointercancel"?this.lastMoveEventInfo:PA(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,S),x&&x(g,S)},!yO(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const o=A0(e),c=PA(o,this.transformPagePoint),{point:u}=c,{timestamp:f}=qr;this.history=[{...u,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,NA(c,this.history)),this.removeListeners=S0(Ym(this.contextWindow,"pointermove",this.handlePointerMove),Ym(this.contextWindow,"pointerup",this.handlePointerUp),Ym(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xc(this.updatePoint)}}function PA(t,e){return e?{point:e(t.point)}:t}function K5(t,e){return{x:t.x-e.x,y:t.y-e.y}}function NA({point:t},e){return{point:t,delta:K5(t,QH(e)),offset:K5(t,Sve(e)),velocity:Eve(e,.1)}}function Sve(t){return t[0]}function QH(t){return t[t.length-1]}function Eve(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=QH(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>po(e)));)n--;if(!r)return{x:0,y:0};const a=Va(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Tve(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Cn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Cn(n,t,r.max):Math.min(t,n)),t}function W5(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Ave(t,{top:e,left:n,bottom:r,right:i}){return{x:W5(t.x,n,i),y:W5(t.y,e,r)}}function Y5(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function kve(t,e){return{x:Y5(t.x,e.x),y:Y5(t.y,e.y)}}function Cve(t,e){let n=.5;const r=mi(t),i=mi(e);return i>r?n=Av(e.min,e.max-r,t.min):r>i&&(n=Av(t.min,t.max-i,e.min)),yl(0,1,n)}function Ive(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const GI=.35;function Pve(t=GI){return t===!1?t=0:t===!0&&(t=GI),{x:X5(t,"left","right"),y:X5(t,"top","bottom")}}function X5(t,e,n){return{min:Q5(t,e),max:Q5(t,n)}}function Q5(t,e){return typeof t=="number"?t:t[e]||0}const Nve=new WeakMap;class Dve{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(A0(h).point)},s=(h,g)=>{const{drag:v,dragPropagation:b,onDragStart:x}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Bge(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),za(S=>{let T=this.getAxisMotionValue(S).get()||0;if(go.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const O=I.layout.layoutBox[S];O&&(T=mi(O)*(parseFloat(T)/100))}}this.originPoint[S]=T}),x&&bn.postRender(()=>x(h,g)),$I(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:S}=g;if(b&&this.currentDirection===null){this.currentDirection=Ove(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),w&&w(h,g)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>za(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new XH(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:YH(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&bn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Gb(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=Tve(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&bh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Ave(r.layoutBox,e):this.constraints=!1,this.elastic=Pve(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&za(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Ive(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!bh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=jme(r,i.root,this.visualElement.getTransformPagePoint());let s=kve(i.layout.layoutBox,a);if(n){const o=n(Ome(s));this.hasMutatedConstraints=!!o,o&&(s=OH(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=za(f=>{if(!Gb(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $I(this.visualElement,e),r.start(IO(e,r,0,n,this.visualElement,!1))}stopAnimation(){za(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){za(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){za(n=>{const{drag:r}=this.getProps();if(!Gb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Cn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!bh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};za(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=Cve({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),za(s=>{if(!Gb(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Cn(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;Nve.set(this.visualElement,this);const e=this.visualElement.current,n=Ym(e,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();bh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),bn.read(r);const s=Nv(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(za(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=c[f].translate,h.set(h.get()+c[f].translate))}),this.visualElement.render())}));return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=GI,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Gb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Ove(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Rve extends cu{constructor(e){super(e),this.removeGroupControls=Fa,this.removeListeners=Fa,this.controls=new Dve(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fa}unmount(){this.removeGroupControls(),this.removeListeners()}}const Z5=t=>(e,n)=>{t&&bn.postRender(()=>t(e,n))};class Mve extends cu{constructor(){super(...arguments),this.removePointerDownListener=Fa}onPointerDown(e){this.session=new XH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Z5(e),onStart:Z5(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&bn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Ym(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function J5(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const cm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(at.test(t))t=parseFloat(t);else return t;const n=J5(t,e.target.x),r=J5(t,e.target.y);return`${n}% ${r}%`}},jve={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Qc.parse(t);if(i.length>5)return r;const a=Qc.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=Cn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};let DA=!1;class zve extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;ome(Lve),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),DA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Zx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,DA=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||bn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),vO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;DA=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZH(t){const[e,n]=bH(),r=A.useContext(YD);return m.jsx(zve,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(NH),isPresent:e,safeToRemove:n})}const Lve={borderRadius:{...cm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cm,borderTopRightRadius:cm,borderBottomLeftRadius:cm,borderBottomRightRadius:cm,boxShadow:jve};function Vve(t,e,n){const r=ii(t)?t:cp(t);return r.start(IO("",r,e,n)),r.animation}const Bve=(t,e)=>t.depth-e.depth;class Fve{constructor(){this.children=[],this.isDirty=!1}add(e){ZD(this.children,e),this.isDirty=!0}remove(e){JD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Bve),this.isDirty=!1,this.children.forEach(e)}}function Uve(t,e){const n=zi.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Xc(r),t(a-e))};return bn.setup(r,!0),()=>Xc(r)}const JH=["TopLeft","TopRight","BottomLeft","BottomRight"],$ve=JH.length,eV=t=>typeof t=="string"?parseFloat(t):t,tV=t=>typeof t=="number"||at.test(t);function qve(t,e,n,r,i,a){i?(t.opacity=Cn(0,n.opacity??1,Gve(r)),t.opacityExit=Cn(e.opacity??1,0,Hve(r))):a&&(t.opacity=Cn(e.opacity??1,n.opacity??1,r));for(let s=0;s<$ve;s++){const o=`border${JH[s]}Radius`;let c=nV(e,o),u=nV(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||tV(c)===tV(u)?(t[o]=Math.max(Cn(eV(c),eV(u),r),0),(go.test(u)||go.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Cn(e.rotate||0,n.rotate||0,r))}function nV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Gve=eK(0,.5,V7),Hve=eK(.5,.95,Fa);function eK(t,e,n){return r=>r<t?0:r>e?1:n(Av(t,e,r))}function rV(t,e){t.min=e.min,t.max=e.max}function Da(t,e){rV(t.x,e.x),rV(t.y,e.y)}function iV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function aV(t,e,n,r,i){return t-=e,t=Uw(t,1/n,r),i!==void 0&&(t=Uw(t,1/i,r)),t}function Kve(t,e=0,n=1,r=.5,i,a=t,s=t){if(go.test(e)&&(e=parseFloat(e),e=Cn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Cn(a.min,a.max,r);t===a&&(o-=e),t.min=aV(t.min,e,n,o,i),t.max=aV(t.max,e,n,o,i)}function sV(t,e,[n,r,i],a,s){Kve(t,e[n],e[r],e[i],e.scale,a,s)}const Wve=["x","scaleX","originX"],Yve=["y","scaleY","originY"];function oV(t,e,n,r){sV(t.x,e,Wve,n?n.x:void 0,r?r.x:void 0),sV(t.y,e,Yve,n?n.y:void 0,r?r.y:void 0)}function lV(t){return t.translate===0&&t.scale===1}function tK(t){return lV(t.x)&&lV(t.y)}function cV(t,e){return t.min===e.min&&t.max===e.max}function Xve(t,e){return cV(t.x,e.x)&&cV(t.y,e.y)}function uV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function nK(t,e){return uV(t.x,e.x)&&uV(t.y,e.y)}function dV(t){return mi(t.x)/mi(t.y)}function fV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Qve{constructor(){this.members=[]}add(e){ZD(this.members,e),e.scheduleRender()}remove(e){if(JD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zve(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:v,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const OA=["","X","Y","Z"],Jve=1e3;let e0e=0;function RA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function rK(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=FH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",bn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&rK(r)}function iK({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=e0e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(r0e),this.nodes.forEach(o0e),this.nodes.forEach(l0e),this.nodes.forEach(i0e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fve)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new nO),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=yH(s)&&!Hge(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;bn.read(()=>{h=window.innerWidth}),t(s,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,f&&f(),f=Uve(g,250),Zx.hasAnimatedSinceResize&&(Zx.hasAnimatedSinceResize=!1,this.nodes.forEach(gV)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||h0e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),S=!this.targetLayout||!nK(this.targetLayout,v),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...gO(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(f,T)}else h||gV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c0e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(pV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(s0e),this.nodes.forEach(t0e),this.nodes.forEach(n0e)):this.nodes.forEach(pV),this.clearAllSnapshots();const o=zi.now();qr.delta=yl(0,1e3/60,o-qr.timestamp),qr.timestamp=o,qr.isProcessing=!0,_A.update.process(qr),_A.preRender.process(qr),_A.render.process(qr),qr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(a0e),this.sharedNodes.forEach(u0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!mi(this.snapshot.measuredBox.x)&&!mi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!tK(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Wu(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),p0e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return qn();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(g0e))){const{scroll:u}=this.root;u&&(xh(o.x,u.offset.x),xh(o.y,u.offset.y))}return o}removeElementScroll(s){const o=qn();if(Da(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Da(o,s),xh(o.x,f.offset.x),xh(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=qn();Da(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&wh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Wu(f.latestValues)&&wh(c,f.latestValues)}return Wu(this.latestValues)&&wh(c,this.latestValues),c}removeTransform(s){const o=qn();Da(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Wu(u.latestValues))continue;VI(u.latestValues)&&u.updateSnapshot();const f=qn(),h=u.measurePageBox();Da(f,h),oV(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Wu(this.latestValues)&&oV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=qr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qn(),this.relativeTargetOrigin=qn(),Qm(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Da(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qn(),this.targetWithTransforms=qn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wve(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Da(this.target,this.layout.layoutBox),MH(this.target,this.targetDelta)):Da(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qn(),this.relativeTargetOrigin=qn(),Qm(this.relativeTargetOrigin,this.target,g.target),Da(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||VI(this.parent.latestValues)||RH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===qr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Da(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;Mme(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=qn());const{target:v}=s;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(iV(this.prevProjectionDelta.x,this.projectionDelta.x),iV(this.prevProjectionDelta.y,this.projectionDelta.y)),Xm(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!fV(this.projectionDelta.x,this.prevProjectionDelta.x)||!fV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_h(),this.projectionDelta=_h(),this.projectionDeltaWithTransform=_h()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=_h();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=qn(),v=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=v!==b,w=this.getStack(),S=!w||w.members.length<=1,T=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(f0e));this.animationProgress=0;let I;this.mixTargetDelta=O=>{const D=O/1e3;mV(h.x,s.x,D),mV(h.y,s.y,D),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d0e(this.relativeTarget,this.relativeTargetOrigin,g,D),I&&Xve(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=qn()),Da(I,this.relativeTarget)),x&&(this.animationValues=f,qve(f,u,this.latestValues,D,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Xc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bn.update(()=>{Zx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cp(0)),this.currentAnimation=Vve(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jve),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&aK(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||qn();const h=mi(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=mi(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}Da(o,c),wh(o,f),Xm(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Qve),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&RA("z",s,u,this.animationValues);for(let f=0;f<OA.length;f++)RA(`rotate${OA[f]}`,s,u,this.animationValues),RA(`skew${OA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=Qx(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=Qx(o?.pointerEvents)||""),this.hasProjected&&!Wu(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Zve(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:v}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in Pv){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=Pv[b],T=h==="none"?f[b]:x(f[b],u);if(w){const I=w.length;for(let O=0;O<I;O++)s[w[O]]=T}else S?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=u===this?Qx(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(hV),this.root.sharedNodes.clear()}}}function t0e(t){t.updateLayout()}function n0e(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?za(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=mi(h);h.min=n[f].min,h.max=h.min+g}):aK(i,e.layoutBox,n)&&za(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=mi(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=_h();Xm(s,n,e.layoutBox);const o=_h();a?Xm(o,t.applyTransform(r,!0),e.measuredBox):Xm(o,n,e.layoutBox);const c=!tK(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const v=qn();Qm(v,e.layoutBox,h.layoutBox);const b=qn();Qm(b,n,g.layoutBox),nK(v,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function r0e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function i0e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function a0e(t){t.clearSnapshot()}function hV(t){t.clearMeasurements()}function pV(t){t.isLayoutDirty=!1}function s0e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function gV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function o0e(t){t.resolveTargetDelta()}function l0e(t){t.calcProjection()}function c0e(t){t.resetSkewAndRotation()}function u0e(t){t.removeLeadSnapshot()}function mV(t,e,n){t.translate=Cn(e.translate,0,n),t.scale=Cn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function vV(t,e,n,r){t.min=Cn(e.min,n.min,r),t.max=Cn(e.max,n.max,r)}function d0e(t,e,n,r){vV(t.x,e.x,n.x,r),vV(t.y,e.y,n.y,r)}function f0e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const h0e={duration:.45,ease:[.4,0,.1,1]},yV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),bV=yV("applewebkit/")&&!yV("chrome/")?Math.round:Fa;function xV(t){t.min=bV(t.min),t.max=bV(t.max)}function p0e(t){xV(t.x),xV(t.y)}function aK(t,e,n){return t==="position"||t==="preserve-aspect"&&!xve(dV(e),dV(n),.2)}function g0e(t){return t!==t.root&&t.scroll?.wasRoot}const m0e=iK({attachResizeListener:(t,e)=>Nv(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),MA={current:void 0},sK=iK({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!MA.current){const t=new m0e({});t.mount(window),t.setOptions({layoutScroll:!0}),MA.current=t}return MA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),v0e={pan:{Feature:Mve},drag:{Feature:Rve,ProjectionNode:sK,MeasureLayout:ZH}};function wV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&bn.postRender(()=>a(e,A0(e)))}class y0e extends cu{mount(){const{current:e}=this.node;e&&(this.unmount=Fge(e,(n,r)=>(wV(this.node,r,"Start"),i=>wV(this.node,i,"End"))))}unmount(){}}class b0e extends cu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=S0(Nv(this.node.current,"focus",()=>this.onFocus()),Nv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _V(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&bn.postRender(()=>a(e,A0(e)))}class x0e extends cu{mount(){const{current:e}=this.node;e&&(this.unmount=Gge(e,(n,r)=>(_V(this.node,r,"Start"),(i,{success:a})=>_V(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const HI=new WeakMap,jA=new WeakMap,w0e=t=>{const e=HI.get(t.target);e&&e(t)},_0e=t=>{t.forEach(w0e)};function S0e({root:t,...e}){const n=t||document;jA.has(n)||jA.set(n,{});const r=jA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(_0e,{root:t,...e})),r[i]}function E0e(t,e,n){const r=S0e(e);return HI.set(t,n),r.observe(t),()=>{HI.delete(t),r.unobserve(t)}}const T0e={some:0,all:1};class A0e extends cu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:T0e[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return E0e(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(k0e(e,n))&&this.startObserver()}unmount(){}}function k0e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const C0e={inView:{Feature:A0e},tap:{Feature:x0e},focus:{Feature:b0e},hover:{Feature:y0e}},I0e={layout:{ProjectionNode:sK,MeasureLayout:ZH}},P0e={...pve,...C0e,...v0e,...I0e},Rt=Dme(P0e,Gme);function N0e(t){t.values.forEach(e=>e.stop())}function KI(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&CO(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{KI(a,e)})})}function D0e(t,e){if(Array.isArray(e))return KI(t,e);if(typeof e=="string")return KI(t,[e]);CO(t,e)}function O0e(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(qH(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{D0e(r,n)})},stop(){t.forEach(n=>{N0e(n)})},mount(){return()=>{e.stop()}}};return e}function R0e(){const t=D_(O0e);return QD(t.mount,[]),t}const M0e=R0e,uu=UN((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),um=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=uu(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return m.jsx(Wr,{children:n&&m.jsx(Rt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:m.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[m.jsx("div",{className:"flex items-center flex-1 min-w-0",children:m.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),m.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&m.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[m.jsx(gce,{size:12,className:"inline mr-1"}),"Undo"]}),m.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:m.jsx(s_,{size:14})})]})]})})})};class ta extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){$.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:m.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[m.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:m.jsx(Mh,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[m.jsx(Gh,{className:"h-4 w-4"}),"Try Again"]}),m.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[m.jsx(jle,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const j0e=({onAddTransaction:t})=>{const e=Qa(),n=Ps(),[r,i]=A.useState(!1),a=A.useRef(null),s=u=>n.pathname===u;A.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:m.jsx(gw,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:m.jsx(od,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:m.jsx(L8,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return m.jsxs("button",{onClick:v=>{v.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[m.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),m.jsx("span",{className:"sr-only",children:h}),g&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return m.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:m.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[m.jsx(c,{path:"/",label:"Budget",icon:m.jsx(Hh,{className:"w-6 h-6"})}),m.jsx(c,{path:"/transactions",label:"Transactions",icon:m.jsx(Lle,{className:"w-6 h-6"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:m.jsx(Zd,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),m.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),m.jsxs("div",{className:"relative",ref:a,children:[m.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[m.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:m.jsx(Tle,{className:"w-6 h-6"})}),m.jsx("span",{className:"sr-only",children:"More"}),r&&m.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&m.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:m.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>m.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[m.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),m.jsx(c,{path:"/settings",label:"Settings",icon:m.jsx(rce,{className:"w-6 h-6"})})]})})};function z0e(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function L0e(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function sl(t,e){return function(n){n&&(t[e]=n)}}function oK(t,e,n){return function(r){r&&(t[e][n]=r)}}function SV(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function V0e(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var B0e="function",F0e="object",U0e="string",$0e="number",PO="undefined",lK=typeof window!==PO,q0e=typeof document!==PO&&document,G0e=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],sr=1e-7,Hb={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function H0e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function $w(t,e,n,r){return(t*r+e*n)/(n+r)}function z_(t){return typeof t===PO}function Ts(t){return t&&typeof t===F0e}function ur(t){return Array.isArray(t)}function Fi(t){return typeof t===U0e}function dp(t){return typeof t===$0e}function NO(t){return typeof t===B0e}function K0e(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function cK(t,e,n,r,i){var a=DO(t,e,n);return a?n:W0e(t,e,n+1,r,i)}function DO(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function W0e(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!DO(t,e,u))return{value:u};var h=u,g=Ui(i,function(v){var b=v.open;return b===f});if(g&&(h=cK(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function OO(t,e){var n=Fi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?G0e:u,h=f.map(function(C){var P=C.open,R=C.close;return P===R?P:P+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",v=new RegExp(g,"g"),b=t.split(v).filter(function(C){return C&&C!=="undefined"}),x=b.length,w=[],S=[];function T(){return S.length?(w.push(S.join("")),S=[],!0):!1}for(var I=function(C){var P=b[C].trim(),R=C,j=Ui(f,function(z){var W=z.open;return W===P}),L=Ui(f,function(z){var W=z.close;return W===P});if(j){if(R=cK(j,b,C,x,f),R!==-1&&c)return T()&&a||(w.push(b.slice(C,R+1).join("")),C=R,a)?(O=C,"break"):(O=C,"continue")}else if(L&&!DO(L,b,C)){var B=H0e(f);return B.splice(f.indexOf(L),1),{value:OO(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:B})}}else if(K0e(P,i)&&!s)return T(),a?(O=C,"break"):(O=C,"continue");R===-1&&(R=x-1),S.push(b.slice(C,R+1).join("")),C=R,O=C},O,D=0;D<x;++D){var N=I(D);if(D=O,typeof N=="object")return N.value;if(N==="break")break}return S.length&&w.push(S.join("")),w}function Zc(t){return OO(t,"")}function dd(t){return OO(t,",")}function uK(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function k0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Y0e(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function Jx(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Dv(){return Date.now?Date.now():new Date().getTime()}function xl(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Ui(t,e,n){var r=xl(t,e);return r>-1?t[r]:n}var dK=(function(){var t=Dv(),e=lK&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Dv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),X0e=(function(){var t=lK&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function wl(t){return Object.keys(t)}function Q0e(t){var e=wl(t);return e.map(function(n){return t[n]})}function en(t,e){var n=k0(t),r=n.value,i=n.unit;if(Ts(e)){var a=e[i];if(a){if(NO(a))return a(r);if(Hb[i])return Hb[i](r,a)}}else if(i==="%")return r*e/100;return Hb[i]?Hb[i](r):r}function WI(t,e,n){return Math.max(e,Math.min(t,n))}function EV(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[ot(e[0],sr),ot(e[0]/r,sr)],[ot(e[1]*r,sr),ot(e[1],sr)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=ot(o,sr);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function fK(t,e,n,r){if(!r)return t.map(function(v,b){return WI(v,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=EV(t,e,!1,s),c=o[0],u=o[1],f=EV(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function Z0e(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function YI(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Kn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function J0e(t){return[0,1].map(function(e){return YI(t.map(function(n){return n[e]}))})}function TV(t){var e=J0e(t),n=Kn(e,t[0]),r=Kn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function ol(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ot(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function AV(t,e){return t.forEach(function(n,r){t[r]=ot(t[r],e)}),t}function eye(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function hK(t){return t.reduce(function(e,n){return e.concat(n)},[])}function pK(t,e){t.indexOf(e)===-1&&t.push(e)}function gr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function gK(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function mK(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Ur(t,e,n,r){t.addEventListener(e,n,r)}function fr(t,e,n,r){t.removeEventListener(e,n,r)}function Up(t){return t?.ownerDocument||q0e}function RO(t){return Up(t).documentElement}function du(t){return Up(t).body}function Uc(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function vK(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function $p(t){return Ts(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var tye=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),nye=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),rye=typeof Map=="function",iye=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function aye(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new iye;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var sye=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=aye(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function C0(t,e,n){var r=rye?Map:n?nye:tye,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],v=[],b={},x=[],w=0,S=0;return c.forEach(function(T,I){f.set(T,I)}),u.forEach(function(T,I){h.set(T,I)}),c.forEach(function(T,I){var O=h.get(T);typeof O>"u"?(++S,s.push(I)):b[O]=S}),u.forEach(function(T,I){var O=f.get(T);typeof O>"u"?(a.push(I),++w):(o.push([O,I]),S=b[I]||0,g.push([O-S,I-w]),v.push(I===O),O!==I&&x.push([O,I]))}),s.reverse(),new sye(t,e,a,s,x,o,g,v)}var oye=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=C0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),XI=function(t,e){return XI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},XI(t,e)};function I0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");XI(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var so=function(){return so=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},so.apply(this,arguments)};function yK(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kV(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function CV(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function bK(t){var e=[];return t.forEach(function(n){e=e.concat(ur(n)?bK(n):n)}),e}function zA(t,e){if(!e)return t;for(var n in e)z_(t[n])&&(t[n]=e[n]);return t}function qw(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function IV(t){var e=t.className,n=yK(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function PV(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function L_(t){if(!t)return null;var e=t.b;return $p(e)?e:L_(t.c)}function xK(t){var e=t.parentNode;e&&e.removeChild(t)}function wK(t){t.forEach(function(e){e()})}function lye(){return this.constructor(this.props,this.context)}var MO=0,V_=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=Q0e(r).filter(function(b){return b.$_req}),f=bK(u.map(function(b){return b.$_subs})),h=Ui(f,function(b){return b.d===c});if(o.b&&!Fi(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){P0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var v=o.ps;return Fi(i)||(o.ps=i.props,o.ref=i.ref),jO(this),o.r(n,r,o.b?v:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function _K(){return Object.__CROACT_CURRENT_INSTNACE__}function cye(){return MO}function uye(t){MO=t}function jO(t){return Object.__CROACT_CURRENT_INSTNACE__=t,MO=0,t}var zO=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=so(so({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=P0(a.c,[a],[a.o],i,a._cs,so(so({},this.state),this.$_state),r);s&&(n&&i.push(n),wK(i),jO(null))},t})(),SK=(function(t){I0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return qw(this.props,r)||qw(this.state,i)},e})(zO);function EK(t){var e=function(n){e.current=n};return e.current=t,e}function dye(t){return t._fr=!0,t}function fye(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new zO(e,n),a.constructor=t,t._fr?(r.fr=EK(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=lye),a.$_p=r,a}var hye=(function(t){I0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,zA(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(zA(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=zA(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,v=c.b,b=g?.get(c);c._cs=i,h?(v=fye(u,f,b,c),c.b=v):(v.props=f,v.context=b);var x=v.state;c._usefs=[],c._uefs=[];var w=v.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var S=so(so({},i),v.$_cs);P0(c,c._ps,w?[w]:[],r,S),h?c._uefs.push(function(){g?.register(c),v.componentDidMount()}):c._uefs.push(function(){v.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(V_);function pye(t,e,n){var r=LO(IV(t),IV(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function gye(t,e,n){var r=LO(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function LO(t,e){var n=wl(t),r=wl(e),i=C0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function mye(t,e,n){var r=n.style,i=LO(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=Jx(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=Jx(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=Jx(c,"-");r.removeProperty(h)}}function vye(t){return t.replace(/^on/g,"").toLowerCase()}var yye=(function(t){I0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=vye(r);i?(fr(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},Ur(o,c,s[r]))},n.s=function(r){return qw(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=L_(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],v=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=Up(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",v):g=b.createElement(v)}o.b=g}P0(o,o._ps,u.children,r,i);var x=o.b,w=PV(a),S=w[0],T=w[1],I=PV(u),O=I[0],D=I[1];return pye(S,O,x),gye(T,D,o),mye(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)fr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||xK(a)},e})(V_);function Ov(t){if(!t||$p(t))return t;var e=t.$_p._ps;return e.length?Ov(e[0].b):null}function TK(t){if(t){if(t.b&&$p(t.b))return t;var e=t._ps;return e.length?TK(e[0]):null}}function ws(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=yK(i,["key","ref"]);return{type:t,key:a,ref:s,props:so(so({},o),{children:hK(n).filter(function(c){return c!=null&&c!==!1})})}}var AK=(function(t){I0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(V_),bye=(function(t){I0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=L_(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||Up(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){xK(this.b)},e})(V_);function xye(t,e,n){var r=n.map(function(c){return Fi(c)?null:c.key}),i=CV(e.map(function(c){return c.k})),a=CV(r),s=C0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=Ov(h.b),v=Ov(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,v)}),s.added.forEach(function(c){e.splice(c,0,NV(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=Fi(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,NV(f,r[u],u,t)),!0):(h.i=u,!1)});return kV(kV([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function wye(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Ov(n[i].b);if(a)return a}return null}function NV(t,e,n,r){var i=r.d+1;if(Fi(t)||dp(t))return new bye("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?yye:hye;return new s(a,i,e,n,r,t.ref,t.props)}function P0(t,e,n,r,i,a,s){var o=xye(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=TK(h);g&&(g._sel=!0)}),t._hyd=null;var f=L_(t);return f&&o.reverse().forEach(function(h){var g=e[h],v=Ov(g.b);if(v&&f!==v&&!v.parentNode){var b=wye(t,g);f.insertBefore(v,b)}}),u.length>0}function _ye(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new AK(e));var a=[];return P0(n,n._ps,t?[t]:[],a,r,void 0,void 0),wK(a),jO(null),i||(e.__CROACT__=n),n}function DV(t,e,n){return!n&&t&&(n=new AK(e.parentElement),n._hyd=[e],n._sel=!0),_ye(t,e,n),n}function kK(t){var e=_K(),n=e._hs||(e._hs=[]),r=cye(),i=n[r];if(uye(r+1),i){if(!qw(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function Sye(t,e){var n=kK({func:t,deps:e});return n.value}function Eye(t){return Sye(function(){return EK(t)},[])}function CK(t,e,n){var r=_K(),i=kK({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function Tye(t,e,n){CK(function(){t?.(e())},n,!0)}function VO(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function IK(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function PK(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function BO(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Aye(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function kye(t,e){var n=BO("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function QI(t){return t.replace(/_/g,".")}function Pm(t,e){var n=null,r="-1";return VO(t,function(i){var a=BO("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=kye(i.versionTest.toLowerCase(),e)||r),r=QI(r),!0)}),{preset:n,version:r}}function Kb(t,e){var n={brand:"",version:"-1"};return VO(t,function(r){var i=NK(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function NK(t,e){return IK(t,function(n){var r=n.brand;return BO(""+e.test,r.toLowerCase())})}var DK=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],OK=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ZI=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],RK=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],MK=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function jK(t){return!!Pm(RK,t).preset}function Cye(t){var e=PK(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:jK(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Pm(DK,e),s=a.preset,o=a.version,c=Pm(MK,e),u=c.preset,f=c.version,h=Pm(OK,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=Pm(ZI,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function Iye(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Kb(RK,n).brand||jK(PK())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&VO(ZI,function(g){return NK(n,g)});var c=Kb(OK,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=Kb(ZI,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=IK(MK,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=Kb(DK,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=QI(o.version),s.version=QI(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function Pye(t){return Aye()?Iye():Cye(t)}function Nye(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function Dye(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function Oye(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function zK(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function wo(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=fn(e),i=0;i<e;++i){var a=e*i+i;if(!ot(n[a],sr)){for(var s=i+1;s<e;++s)if(n[e*i+s]){Dye(n,r,i,s,e);break}}if(!ot(n[a],sr))return[];Oye(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!ot(u,sr)||i===s||Nye(n,r,o,i,e,-u)}}return r}function Rye(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function LK(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function Mye(t,e){for(var n=fn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function jd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function As(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=fn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function Gw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=fn(t);return e.forEach(function(i){r=tn(r,i,t)}),r}function tn(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Pt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Ze(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function jye(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function VK(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function oi(t,e,n){n===void 0&&(n=e.length);var r=tn(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function zye(t,e){return tn(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Lye(t,e){return tn(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Vye(t,e){return tn(t,D0(e,4))}function Wb(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return tn(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function N0(t,e){return oi(D0(e,3),jd(t,3))}function LA(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return tn(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function OV(t,e){return tn(t,e,4)}function D0(t,e){var n=Math.cos(t),r=Math.sin(t),i=fn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function fn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function FO(t,e){for(var n=fn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function zd(t,e){for(var n=fn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function UO(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],v=n[1],b=r[0],x=r[1],w=i[0],S=i[1],T=a[0],I=a[1],O=s[0],D=s[1],N=o[0],C=o[1],P=[c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,v,0,x,0,1,0,1,0,1,0,1,-w*c,-S*c,-T*f,-I*f,-O*g,-D*g,-N*b,-C*b,-w*u,-S*u,-T*h,-I*h,-O*v,-D*v,-N*x,-C*x],R=wo(P,8);if(!R.length)return[];var j=tn(R,[w,S,T,I,O,D,N,C],8);return j[8]=1,As(Rye(j),3,4)}var Zm=function(){return Zm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zm.apply(this,arguments)};function Bye(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Rv(t,e){return e===void 0&&(e=0),ph(fp(t,e))}function Fye(t,e){var n=oi(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function ph(t){var e=Bye();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function fp(t,e){e===void 0&&(e=0);var n=ur(t)?t:Zc(t);return n.map(function(r){var i=uK(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=Ts(e)?Zm(Zm({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=dd(s).map(function(z,W){return W===0&&"x%"in f?f["%"]=e["x%"]:W===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],en(z,f)}),g=h[0],v=h[1],b=v===void 0?0:v,x=h[2],w=x===void 0?0:x;o=LA,u=[g,b,w]}else if(a==="translateY"){var S=Ts(e)?Zm({"%":e["y%"]},e):{"%":e},b=en(s,S);o=LA,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=LA,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=dd(s).map(function(z){return parseFloat(z)}),I=T[0],O=T[1],D=O===void 0?I:O,N=T[2],C=N===void 0?1:N;o=Wb,u=[I,D,C]}else if(a==="scaleX"){var I=parseFloat(s);o=Wb,u=[I,1,1]}else if(a==="scaleY"){var D=parseFloat(s);o=Wb,u=[1,D,1]}else if(a==="scaleZ"){var C=parseFloat(s);o=Wb,u=[1,1,C]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var P=k0(s),R=P.unit,j=P.value,L=R==="rad"?j:j*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=Vye):a==="rotateX"?o=zye:a==="rotateY"&&(o=Lye),u=L}else if(a==="matrix3d")o=OV,u=dd(s).map(function(z){return parseFloat(z)});else if(a==="matrix"){var B=dd(s).map(function(z){return parseFloat(z)});o=OV,u=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var JI=function(t,e){return JI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},JI(t,e)};function Uye(t,e){JI(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var BK=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),FK=(function(t){Uye(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,BK)||this}return e})(oye);function $ye(t,e){return C0(t,e,BK)}var eP=function(){return eP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eP.apply(this,arguments)};function qye(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var B_=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Ts(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Ts(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=xl(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,qye(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(eP({listener:r},i))},t})();var tP=function(t,e){return tP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},tP(t,e)};function Gye(t,e){tP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Sh=function(){return Sh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sh.apply(this,arguments)};function Hye(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function RV(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Yb(t){if(t){if(Fi(t))return document.querySelector(t)}else return null;if(NO(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Kye=(function(t){Gye(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=Yb(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(Sh(Sh({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),v=g[0]-s[0],b=g[1]-s[1],x=o||[v?Math.abs(v)/v:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!v&&!b?!1:(this.emit("move",{offsetX:x[0]?v:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?Hye:s;return o({container:Yb(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=Dv(),v=Math.max(c+this._prevTime-g,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},v),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:Yb(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(Sh(Sh({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?RV:i,s=Yb(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=RV(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(B_);function Wye(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Di(t){return ot(t,sr)}function Yye(t,e){return t.every(function(n,r){return Di(n-e[r])===0})}function Xye(t,e){return!Di(t[0]-e[0])&&!Di(t[1]-e[1])}function UK(t){return t.length<3?0:Math.abs(Z0e(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function MV(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Ld(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(v){return[i+(v[0]-o)*h,a+(v[1]-c)*g]})}function Ld(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function nP(t,e,n){var r=t[0],i=t[1],a=Ld(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=Hw(c[0],c[1]),f=rP(e),h=[];if(f.forEach(function(b){var x=Hw(b[0],b[1]),w=b[0];if(Yye(u,x))h.push({pos:t,line:b,type:"line"});else{var S=$K($O(u,x),[c,b]);S.forEach(function(T){b.some(function(I){return Xye(I,T)})?h.push({pos:T,line:b,type:"point"}):Di(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),Ui(h,function(b){return b[0]===r}))return!0;var g=0,v={};return h.forEach(function(b){var x=b.pos,w=b.type,S=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=Ui(S,function(D){return D[1]!==i}),I=v[x[0]],O=T[1]>i?1:-1;I?I!==O&&++g:v[x[0]]=O}}}),g%2===1}function Hw(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<sr&&(s=0),Math.abs(o)<sr&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function $O(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var v=-i/n,b=-o/a;return v!==b?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(S){return[S[0],S[1]]})}function $K(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Di(a-t[1][0])){if(!Di(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(Di(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(Di(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],v=h[1];return n.every(function(b){return 0<=Di(g-b[0][0])&&0<=Di(b[0][1]-g)&&0<=Di(v-b[1][0])&&0<=Di(b[1][1]-v)})})),r.map(function(h){return[Di(h[0]),Di(h[1])]})}function rP(t){return Wye(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function Qye(t,e){var n=t.slice(),r=e.slice();TV(n)===-1&&n.reverse(),TV(r)===-1&&r.reverse();var i=rP(n),a=rP(r),s=i.map(function(f){return Hw(f[0],f[1])}),o=a.map(function(f){return Hw(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],v=[];o.forEach(function(b,x){var w=$O(f,b),S=$K(w,[g,a[x]]);v.push.apply(v,S.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),v.sort(function(b,x){return ol(g[0],b.pos)-ol(g[0],x.pos)}),c.push.apply(c,v),nP(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(nP(f[1],n)){var g=!1,v=xl(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});v===-1&&(g=!1,v=xl(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),v===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(v,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function Zye(t,e){var n=Qye(t,e);return n.map(function(r){var i=r.pos;return i})}function Jye(t,e){var n=Zye(t,e);return UK(n)}var iP=function(t,e){return iP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},iP(t,e)};function ebe(t,e){iP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var nr=function(){return nr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nr.apply(this,arguments)};function tbe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function VA(t){return tbe([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function nbe(t){return t.touches&&t.touches.length>=2}function Xb(t){return t?t.touches?ibe(t.touches):[qK(t)]:[]}function rbe(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function jV(t,e,n){var r=n.length,i=Jm(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=Jm(e,r),f=u.clientX,h=u.clientY,g=Jm(n,r),v=g.clientX,b=g.clientY,x=a-f,w=s-h,S=a-v,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:S,distY:T}}function BA(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function ibe(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(qK(t[r]));return n}function qK(t){return{clientX:t.clientX,clientY:t.clientY}}function Jm(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var FA=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),VA(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),VA(e)-VA(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=jV(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=jV([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=Jm(e,this.length),i=Jm(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),BA(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),BA(e)/BA(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),zV=["textarea","input"],abe=(function(t){ebe(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,v){if(v===void 0&&(v=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,S=x.pinchOutside,T=x.preventWheelClick,I=x.preventRightClick,O=x.preventDefault,D=x.checkInput,N=x.dragFocusedInput,C=x.preventClickEventOnDragStart,P=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,j=i._useTouch,L=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||I&&(g.which===3||g.button===2))return i.stop(),!1;if(L){var B=i._window.document.activeElement,z=g.target;if(z){var W=z.tagName.toLowerCase(),Z=zV.indexOf(W)>-1,G=z.isContentEditable;if(Z||G){if(D||!N&&B===z)return!1;if(B&&(B===z||G&&B.isContentEditable&&B.contains(z)))if(N)z.blur();else return!1}else if((O||g.type==="touchstart")&&B){var Y=B.tagName.toLowerCase();(B.isContentEditable||zV.indexOf(Y)>-1)&&B.blur()}(C||P||R)&&Ur(i._window,"click",i._onClick,!0)}i.clientStores=[new FA(Xb(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=Dv()-i.prevTime<200,i._isMouseEvent=rbe(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var Q=i._preventMouseEvent||i.emit("dragStart",nr(nr({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));Q===!1&&i.stop(),i._isMouseEvent&&i.flag&&O&&g.preventDefault()}if(!i.flag)return!1;var J=0;if(L?(i._attchDragEvent(),j&&S&&(J=setTimeout(function(){Ur(w,"touchstart",i.onDragStart,{passive:!1})}))):j&&S&&fr(w,"touchstart",i.onDragStart),i.flag&&nbe(g)){if(clearTimeout(J),L&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,v){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=Xb(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var S=i._preventMouseEvent||i.emit("drag",nr(nr({},w),{isScroll:!!v,inputEvent:g}));if(S===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var v=i.options,b=v.pinchOutside,x=v.container,w=v.preventClickEventOnDrag,S=v.preventClickEventOnDragStart,T=v.preventClickEventByCondition,I=i.isDrag;(w||S||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!S&&w&&!I&&i._allowClickEvent(),i._useTouch&&b&&fr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var O=g?.touches?Xb(g):[],D=O.length;D===0||!i.options.keepDragging?i.flag=!1:i._addStore(new FA(O));var N=i._getPosition(),C=Dv(),P=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||P?0:C,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",nr({data:i.data,datas:i.data,isDouble:P,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},N)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){fr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var v=i.options.preventClickEventByCondition;v?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var v=i.options;v.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=vK(s)?s:Uc(s),i.options=nr({checkInput:!1,container:s&&!("document"in s)?Uc(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Ur(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Ur(g,"mousedown",i.onDragStart),Ur(g,"mousemove",i._passCallback)}),Ur(c,"contextmenu",i._onContextMenu)),f&&Ur(Uc(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Ur(g,"touchstart",i.onDragStart,h),Ur(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),nr(nr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),fr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){fr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){fr(a,"mousedown",n.onDragStart)}),fr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){fr(a,"touchstart",n.onDragStart)}),fr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new FA(Xb(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",nr(nr({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",nr(nr({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",nr(nr({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),nr(nr({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return nr(nr({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Ur(r,"dragover",this.onDrag,i),Ur(n,"dragend",this.onDragEnd)),this._useMouse&&(Ur(r,"mousemove",this.onDrag),Ur(n,"mouseup",this.onDragEnd)),this._useTouch&&(Ur(r,"touchmove",this.onDrag,i),Ur(n,"touchend",this.onDragEnd,i),Ur(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(fr(r,"dragover",this.onDrag),fr(n,"dragend",this.onDragEnd)),this._useMouse&&(fr(r,"mousemove",this.onDrag),fr(n,"mouseup",this.onDragEnd)),this._useTouch&&(fr(r,"touchstart",this.onDragStart),fr(r,"touchmove",this.onDrag),fr(n,"touchend",this.onDragEnd),fr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(B_);function sbe(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var obe=sbe;function lbe(t){return obe(t).toString(36)}function cbe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function ube(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?dd(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function dbe(t,e,n,r,i){var a=Up(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=ube(t,e,n),(i||a.head||a.body).appendChild(s),s}function fbe(t){var e="rCS"+lbe(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=cbe(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=dbe(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var aP=function(){return aP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},aP.apply(this,arguments)};function hbe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function GK(t,e){var n=fbe(e),r=n.className;return dye(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=hbe(i,["className","cspNonce"]),u=Eye();return Tye(a,function(){return u.current},[]),CK(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),ws(t,aP({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var sP=function(t,e){return sP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},sP(t,e)};function O0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");sP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var se=function(){return se=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},se.apply(this,arguments)};function pbe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gbe(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function mbe(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function De(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function R0(t,e){return se({events:[],props:[],name:t},e)}var vbe=["n","w","s","e"],qO=["n","w","s","e","nw","ne","sw","se"];function ybe(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function bbe(t){var e=ybe(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var qp=Pye(),HK=qp.browser.webkit,KK=HK&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),WK=qp.browser.name,YK=parseInt(qp.browser.version,10),xbe=WK==="chrome",wbe=qp.browser.chromium,_be=parseInt(qp.browser.chromiumVersion,10)||0,Sbe=xbe&&YK>=109||wbe&&_be>=109,Ebe=WK==="firefox",Tbe=parseInt(qp.browser.webkitVersion,10)>=612||YK>=15,GO="moveable-",Abe=qO.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),kbe=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Abe,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(bbe(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(KK?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Cbe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],oP=1e-4,xi=1e-7,Qb=1e-9,lP=Math.pow(10,10),LV=-lP,Ibe={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},HO={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},XK={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},QK=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function M0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return se(se({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var hp=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),se(se({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Lh(t,e,n,r){var i=t.length===16,a=i?4:3,s=tf(t,n,r,a),o=le(s,4),c=le(o[0],2),u=c[0],f=c[1],h=le(o[1],2),g=h[0],v=h[1],b=le(o[2],2),x=b[0],w=b[1],S=le(o[3],2),T=S[0],I=S[1],O=le(An(t,e,a),2),D=O[0],N=O[1],C=Math.min(u,g,x,T),P=Math.min(f,v,w,I),R=Math.max(u,g,x,T),j=Math.max(f,v,w,I);u=u-C||0,g=g-C||0,x=x-C||0,T=T-C||0,f=f-P||0,v=v-P||0,w=w-P||0,I=I-P||0,D=D-C||0,N=N-P||0;var L=t[0],B=t[a+1],z=pi(L*B);return{left:C,top:P,right:R,bottom:j,origin:[D,N],pos1:[u,f],pos2:[g,v],pos3:[x,w],pos4:[T,I],direction:z}}function ZK(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,v=le(Ze(mp(o,[n-f,r-h],g),u),2),b=v[0],x=v[1],w=le(Ao({datas:i,distX:b,distY:x}),2),S=w[0],T=w[1];return[S,T]}function ef(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=wo(i,v),n.inverseBeforeMatrix=wo(a,v),n.absoluteOrigin=jd(Pt([o,c],u),v),n.startDragBeforeDist=oi(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=oi(n.inverseMatrix,n.absoluteOrigin,v)}function Pbe(t){return Lh(t.datas.beforeTransform,[50,50],100,100).direction}function F_(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=xl(s,function(v){return v.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):Ui(c,function(v){return v.index===a&&v.functionName===n})?u=a:u=a+c.filter(function(v){return v.index<a}).length;var f=nwe(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=De(De([],le(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function U_(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Nbe(t){var e=t.datas,n=t.distX,r=t.distY,i=le(eW({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=JK(e,Mye([a,s],4));return oi(o,jd([0,0,0],4),4)}function JK(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?tn(o,e,4):tn(e,o,4),u=tn(wo(n?a:r,4),c,4),f=tn(u,wo(n?s:i,4),4);return f}function eW(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return Ze(oi(i,Pt(o,[n,r]),c),s)}function Ao(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return Ze(oi(e?a:s,Pt(f,[r,i]),h),e?c:u)}function Dbe(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return Ze(oi(a,Pt(o,[r,i]),u),c)}function Obe(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=k0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var v=h?a[o]/h:0;return g*v}else if(f!=="%")return u;return g*u/100}):a}function tW(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Rbe(t,e){return tW(e).map(function(n){return t[n]})}function UA(t,e){var n=(e+1)/2;return[$w(t[0][0],t[1][0],n,1-n),$w(t[0][1],t[1][1],n,1-n)]}function mr(t,e){var n=UA([t[0],t[1]],e[0]),r=UA([t[2],t[3]],e[0]);return UA([n,r],e[1])}function Mbe(t,e,n,r,i,a){var s=tf(e,n,r,i),o=mr(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function j0(t,e,n,r){return tn(t,tv(e,r,n),r)}function jbe(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(Fi(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=As(Rv(n),4,o):c=As(tn(tn(u,Rv([n]),4),f,4),4,o)}else c=n;return j0(a,c,i,o)}function zbe(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return j0(r,tn(s||a,FO(e,o),o),n,o)}function $_(t,e){var n=Gp(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=ur(r)?r:Zc(r),cP(t,e,i)},setTransformIndex:function(r){cP(t,e,r)}}}function q_(t,e,n){var r=Gp(e),i=r.startTransforms;cP(t,e,xl(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function cP(t,e,n){var r=Gp(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=fp([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function KO(t,e){var n=Gp(t);n.nextTransforms=Zc(e)}function Gp(t){return t.originalDatas.beforeRenderable}function Kw(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Zb(t){return(Kw(t)||[]).join(" ")}function Jb(t){return Gp(t).nextStyle}function nW(t,e,n,r,i){KO(i,e);var a=hi.drag(t,M0(i,t.state,n,r)),s=a?a.transform:e;return se(se({transform:e,drag:a},vi({transform:s},i)),{afterTransform:s})}function WO(t,e,n,r,i,a){var s=jbe(t.state,i,e,a),o=Bbe(t,n,r,s);return o}function rW(t,e,n,r,i,a,s){var o=WO(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,v=h?f:0,b=Ze(r,o);return Ze(b,[g,v])}function Lbe(t,e,n,r,i,a,s){var o=rW(t,e,n,r,i,a,s);return o}function Vbe(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function Bbe(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return An(r,u,c)}function Fbe(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return rW(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function Ube(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,v=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,S=f?4:3,T=Obe(i,e,n,h,g,c),I=s?v:0,O=s?b:0,D=j0(u,w,T,S),N=Mbe(r,D,e,n,S,x);return Ze(N,[I,O])}function $be(t,e){return mr(Ga(t.state),e)}function qbe(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function Gbe(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Hbe(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function iW(t,e,n){for(var r=t,i=[],a=RO(t)||du(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,v=!1,b=jv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=$i(r),S=w("position"),T=CW(r),I=S==="fixed",O=Hbe(w),D=jye($xe(T)),N=void 0,C=!1,P=!1,R=0,j=0,L=0,B=0,z={hasTransform:!1,fixedContainer:null};I&&(v=!0,z=Wxe(r),b=z.fixedContainer);var W=D.length;!c&&(W===16||O.length)&&(c=!0,u=4,gP(i),g&&(g=As(g,3,4))),c&&W===9&&(D=As(D,3,4));var Z=Kxe(r,t),G=Z.tagName,Y=Z.hasOffset,Q=Z.isSVG,J=Z.origin,te=Z.targetOrigin,U=Z.offset,X=le(U,2),re=X[0],K=X[1];G==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:Yxe(r,u)}),i.push({type:"offset",target:r,matrix:fn(u)}));var ue=parseFloat(w("zoom"))||1;if(I)N=z.fixedContainer,C=!0;else{var ne=jv(r,e,!1,!0,w),oe=ne.offsetZoom;if(N=ne.offsetParent,C=ne.isEnd,P=ne.isStatic,x*=oe,(ne.isCustomElement||oe!==1)&&P)re-=N.offsetLeft,K-=N.offsetTop;else if(Ebe||Sbe){var _e=ne.parentSlotElement;if(_e){for(var ae=N,ge=0,fe=0;ae&&Gbe(ae);)ge+=ae.offsetLeft,fe+=ae.offsetTop,ae=ae.offsetParent;re-=ge,K-=fe}}}if(HK&&!Tbe&&Y&&!Q&&P&&(S==="relative"||S==="static")&&(re-=N.offsetLeft,K-=N.offsetTop,s=s||C),I)Y&&z.hasTransform&&(L=N.clientLeft,B=N.clientTop);else if(Y&&b!==N&&(R=N.clientLeft,j=N.clientTop),Y&&N===a){var ee=IW(r,!1);re+=ee[0],K+=ee[1]}if(i.push({type:"target",target:r,matrix:tv(D,u,J)}),O.length&&(i.push({type:"offset",target:r,matrix:fn(u)}),i.push({type:"target",target:r,matrix:tv(Rv(O),u,J)})),Y){var Ae=r===t,Ie=Ae?0:r.scrollLeft,Re=Ae?0:r.scrollTop;i.push({type:"offset",target:r,matrix:zd([re-Ie+R-L,K-Re+j-B],u)})}else i.push({type:"offset",target:r,origin:J});if(ue!==1&&i.push({type:"zoom",target:r,matrix:tv(FO([ue,ue],u),u,[0,0])}),g||(g=D),f||(f=J),h||(h=te),o||I)break;r=N,s=C,(!n||r===a)&&(o=s)}return g||(g=fn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:v}}var rd=null,id=null,Eh=null;function pp(t){t?(window.Map&&(rd=new Map,id=new Map),Eh=[]):(rd=null,Eh=null,id=null)}function Kbe(t){var e=id?.get(t);if(e)return e;var n=nv(t,!0);return id&&id.set(t,n),n}function Wbe(t,e){if(Eh){var n=Ui(Eh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=iW(t,e,!0);return Eh&&Eh.push([[t,e],r]),r}function $i(t){var e=rd?.get(t);if(!e){var n=Uc(t).getComputedStyle(t);if(!rd)return function(a){return n[a]};e={style:n,cached:{}},rd.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function _s(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},se(se({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function $A(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=_s(t,e.name,i),g=t.moveables,v=[],b=h.map(function(x,w){var S=g[w],T=S.state,I=T.gestos,O=x;if(o)O=new hp(s).dragStart(r,x),v.push(O);else{if(I[s]||(I[s]=f.childGestos[w]),!I[s])return;O=M0(x,T,r,u,a,s),v.push(O)}var D=e[n](S,se(se({},O),{parentFlag:!0}));return c&&(I[s]=null),D});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:v}}function ll(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=_s(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],v=f;v=i(g,f);var b=e[n](g,se(se({},v),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function Ww(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||Ga(e.state),o=mr(s,i),c=le(oi(D0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function aW(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Vd(t.props,e).zoom,u=ev(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var v=pi(o);return n.map(function(b){var x=b.data,w=b.classNames,S=b.dir,T=HO[S];if(!T||!f[S])return null;g[S]=!0;var I=(ot(u,15)+v*XK[S]+720)%180,O={};return wl(x).forEach(function(D){O["data-".concat(D)]=x[D]}),r.createElement("div",se({className:Ye.apply(void 0,De(["control","direction",S,e],le(w),!1)),"data-rotation":I,"data-direction":S},O,{key:"direction-".concat(S),style:Zw.apply(void 0,De([s,c],le(T.map(function(D){return a[D]})),!1))}))})}function sW(t,e,n,r){var i=Vd(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?qO:s;return De(De([],le(o?uW(t,r,n,c):[]),!1),le(aW(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Mv(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Kn(n,r),u=e?ot(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Ye.apply(void 0,De(["line","direction",e?"edge":"",e],le(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Dm(n,r,i,c)})}function oW(t,e,n,r,i){var a=n===!0?vbe:n;return a.map(function(s,o){var c=le(HO[s],2),u=c[0],f=c[1];if(f!=null)return Mv(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function lW(t){return function(e,n){var r=Vd(e.props,t).edge;return r&&(r===!0||r.length)?De(De([],le(oW(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),le(Ybe(e,t,n)),!1):cW(e,t,n)}}function cW(t,e,n){return sW(t,qO,e,n)}function Ybe(t,e,n){return sW(t,["nw","ne","sw","se"],e,n)}function uW(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=pi(c),g=o/Math.PI*180;return(r||wl(u)).map(function(v){var b=HO[v];if(!b)return null;var x=(ot(g,15)+h*XK[v]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Ye.apply(void 0,De([],le(w),!1)),"data-rotation":x,"data-direction":v,key:"direction-around-".concat(v),style:Zw.apply(void 0,De([o,f],le(b.map(function(S){return s[S]})),!1))})})}function YO(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,v=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:v};return{vertical:VV(b,e,!0),horizontal:VV(b,n,!1)}}function G_(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,v=e||t.props.bounds||{},b=v.position||"client",x=b==="css",w=v.left,S=w===void 0?-1/0:w,T=v.top,I=T===void 0?-1/0:T,O=v.right,D=O===void 0?x?-1/0:1/0:O,N=v.bottom,C=N===void 0?x?-1/0:1/0:N;return x&&(D=a+h-u-D,C=i+g-f-C),{left:S+u-s,right:D+u-s,top:I+f-o,bottom:C+f-o}}function Xbe(t,e,n){var r=G_(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=le(n,2),u=c[0],f=c[1],h=le(Ze(n,e),2),g=h[0],v=h[1];Pe(g)<xi&&(g=0),Pe(v)<xi&&(v=0);var b=v>0,x=g>0,w={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(g===0&&v===0)return{vertical:w,horizontal:S};if(g===0)b?o<f&&(S.pos=o,S.offset=f-o):a>f&&(S.pos=a,S.offset=f-a);else if(v===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var T=v/g,I=n[1]-T*u,O=0,D=0,N=!1;x&&s<=u?(O=T*s+I,D=s,N=!0):!x&&u<=i&&(O=T*i+I,D=i,N=!0),N&&(O<a||O>o)&&(N=!1),N||(b&&o<=f?(O=o,D=(O-I)/T,N=!0):!b&&f<=a&&(O=a,D=(O-I)/T,N=!0)),N&&(w.isBound=!0,w.pos=D,w.offset=u-D,S.isBound=!0,S.pos=O,S.offset=f-O)}return{vertical:w,horizontal:S}}function VV(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,De([],le(e),!1)),s=Math.max.apply(Math,De([],le(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return Pe(u.offset)-Pe(c.offset)})}function BV(t,e,n){var r=n?t.map(function(i){return N0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Pe(i[0]-e.left)>.1||i[0]>e.right&&Pe(i[0]-e.right)>.1||i[1]<e.top&&Pe(i[1]-e.top)>.1||i[1]>e.bottom&&Pe(i[1]-e.bottom)>.1})}function Qbe(t,e,n){var r=qa(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Pe(a-t[n?0:1])-Pe(s-t[n?0:1])}).map(function(a){return Kn([0,0],n?[a,e]:[e,a])})}function Zbe(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=G_(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],v=c-r[1],b=f-r[1],x={left:h,top:v,right:g,bottom:b};if(!BV(n,x,0))return[];var w=[];return[[h,0],[g,0],[v,1],[b,1]].forEach(function(S){var T=le(S,2),I=T[0],O=T[1];n.forEach(function(D){var N=Kn([0,0],D);w.push.apply(w,De([],le(Qbe(D,I,O).map(function(C){return a+C-N}).filter(function(C){return!BV(e,x,C)}).map(function(C){return ot(C*180/Math.PI,xi)})),!1))})}),w}var Jbe=["left","right","center"],exe=["top","bottom","middle"],FV={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Jc={start:"left",end:"right",center:"center"},eu={start:"top",end:"bottom",center:"middle"};function Th(){return{left:!1,top:!1,right:!1,bottom:!1}}function Hp(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function XO(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function txe(t,e){var n=XO(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function QO(t,e){var n=txe(t,e),r=exe.filter(function(a){return a in n}),i=Jbe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function nxe(t,e,n){var r=An(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function rxe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<sr&&(i=0),Math.abs(a)<sr&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return ot(u,sr)})}var dW="snapRotationThreshold",fW="snapRotationDegrees",hW="snapHorizontalThreshold",pW="snapVerticalThreshold";function H_(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=nB(s,c[hW],5),h=nB(a,c[pW],5);return gW(t.state.guidelines,e,n,r,i,f,h,u)}function gW(t,e,n,r,i,a,s,o){return{vertical:$V(t,"vertical",e,s*o[0],r),horizontal:$V(t,"horizontal",n,a*o[1],i)}}function ixe(t,e,n){var r=le(n,2),i=r[0],a=r[1],s=le(e,2),o=s[0],c=s[1],u=le(Ze(n,e),2),f=u[0],h=u[1],g=h>0,v=f>0;f=Jw(f),h=Jw(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=H_(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),S=w.vertical,T=w.horizontal;S.posInfos.filter(function(G){var Y=G.pos;return v?Y>=o:Y<=o}),T.posInfos.filter(function(G){var Y=G.pos;return g?Y>=c:Y<=c}),S.isSnap=S.posInfos.length>0,T.isSnap=T.posInfos.length>0;var I=uP(S),O=I.isSnap,D=I.guideline,N=uP(T),C=N.isSnap,P=N.guideline,R=C?P.pos[1]:0,j=O?D.pos[0]:0;if(f===0)C&&(x.isSnap=!0,x.pos=P.pos[1],x.offset=a-x.pos);else if(h===0)O&&(b.isSnap=!0,b.pos=j,b.offset=i-j);else{var L=h/f,B=n[1]-L*i,z=0,W=0,Z=!1;O?(W=j,z=L*W+B,Z=!0):C&&(z=R,W=(z-B)/L,Z=!0),Z&&(b.isSnap=!0,b.pos=W,b.offset=i-W,x.isSnap=!0,x.pos=z,x.offset=a-z)}return{vertical:b,horizontal:x}}function Oc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function UV(t,e,n,r){var i=QO(t.props.snapDirections,e),a=H_(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Oc(c)}),i.horizontalNames.map(function(c){return Oc(c)}),n,r),s=Oc(i.horizontalNames[a.horizontal.index]),o=Oc(i.verticalNames[a.vertical.index]);return{vertical:se(se({},a.vertical),{direction:o}),horizontal:se(se({},a.horizontal),{direction:s})}}function uP(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function $V(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var v=i[g]||"",b=t.map(function(x){var w=x.pos,S=h-w[c];return{offset:S,dist:Pe(S),guideline:x,direction:v}}).filter(function(x){var w=x.guideline,S=x.dist,T=w.type;return!(T!==e||S>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:v}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function axe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,v,b){var x=b[v+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,De([],le(Rbe([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return mr(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=H_(t,o,c,a.map(function(g){return Oc(g[0])}),a.map(function(g){return Oc(g[1])}),r,i),f=Oc(a.map(function(g){return g[0]})[u.vertical.index]),h=Oc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:se(se({},u.vertical),{direction:f}),horizontal:se(se({},u.horizontal),{direction:h})}}function mW(t,e){var n=Pe(t.offset),r=Pe(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<xi?1:r<xi?-1:n-r}function Yw(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return mW({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function sxe(t,e,n){var r=[];if(n)Pe(e[0])!==1||Pe(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Pe(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Pe(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function vW(t,e){var n=YI([e[0][0],e[1][0]]),r=YI([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function ZO(t,e){var n=le(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Pe(a)<xi&&(a=0),Pe(s)<xi&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function yW(t,e,n,r){return r===void 0&&(r=xi),t.every(function(i){var a=ZO(i,e),s=a<=0;return s===n||Pe(a)<=r})}function qV(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function oxe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],v=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(yW([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=Rc(n,s,v,i),S=Rc(n,s,x,i),T=Rc(n,s,g,a),I=Rc(n,s,b,a),O=w.isBound&&S.isBound,D=w.isBound||S.isBound,N=T.isBound&&I.isBound,C=T.isBound||I.isBound,P=gp(w.offset,S.offset),R=gp(T.offset,I.offset),j=[0,0],L=!1,B=!1;return Pe(R)<Pe(P)?(j=[P,0],L=D,B=O):(j=[0,R],L=C,B=N),{isAllBound:B,isVerticalBound:D,isHorizontalBound:C,isBound:L,offset:j}}function Rc(t,e,n,r,i,a){var s=le(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=Jw(h[1]-f[1]),v=Jw(h[0]-f[0]),b=c,x=o,w=-o/c;if(v){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var O=(f[1]-u[1])/w+u[0];return qV(O,f[0],h[0],r,i)}else{var T=f[1]-u[1],I=Pe(T)<=(i||0);return{isBound:I,offset:I?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var S=w*(f[0]-u[0])+u[1];return qV(S,f[1],h[1],r,i)}else{var T=f[0]-u[0],I=Pe(T)<=(i||0);return{isBound:I,offset:I?T:0}}}return{isBound:!1,offset:0}}function bW(t,e,n){return e.map(function(r){var i=oxe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=Ao({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function lxe(t,e,n){var r,i=JO(t,e,[0,0],!1).map(function(g){return se(se({},g),{multiple:g.multiple.map(function(v){return Pe(v)*2})})}),a=bW(t,i,n),s=Yw(a,0),o=Yw(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=le(Dbe({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function cxe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function JO(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=tf(a,100,100,s?4:3),c=mr(o,[0,0]);return cxe(n,r).map(function(u){var f=le(u,3),h=f[0],g=f[1],v=f[2],b=[mr(o,g),mr(o,v)],x=rxe(b),w=vW(c,b),S=w.vertical,T=w.horizontal,I=ZO(c,b)<=0;return{multiple:h,centerSign:I,verticalSign:S,horizontalSign:T,lineConstants:x,line:[mr(e,g),mr(e,v)]}})}function GV(t,e,n,r){var i=r?t.map(function(a){return N0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=ZO(n,a)<=0;return!yW(e,a,s)})}function uxe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Pe(n[0]);if(!a)return Pe(n[1]);var s=a/i;return Pe((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function dxe(t){var e=le(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function fxe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],v=c-r[1],b=c+f-r[1],x=[[h,v],[g,v],[h,b],[g,b]],w=mr(n,[0,0]);if(!GV(n,x,w,0))return[];var S=[],T=x.map(function(I){return[qa(I),Kn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var O=Kn([0,0],dxe(I)),D=uxe(I);S.push.apply(S,De([],le(T.filter(function(N){var C=le(N,1),P=C[0];return P&&D<=P}).map(function(N){var C=le(N,2),P=C[0],R=C[1],j=Math.acos(P?D/P:0),L=R+j,B=R-j;return[s+L-O,s+B-O]}).reduce(function(N,C){return N.push.apply(N,De([],le(C),!1)),N},[]).filter(function(N){return!GV(e,x,w,N)}).map(function(N){return ot(N*180/Math.PI,xi)})),!1))}),S}function hxe(t){var e=t.props.innerBounds,n=Th();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=mr(c,[0,0]),f=e.left,h=e.top,g=e.width,v=e.height,b=[[f,h],[f,h+v]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+v]],S=[[f,h+v],[f+g,h+v]],T=JO(t,c,[0,0],!1),I=[],O=[];return T.forEach(function(D){var N=D.line,C=D.lineConstants,P=vW(u,N),R=P.horizontal,j=P.vertical,L=Rc(N,C,x,j,1,!0),B=Rc(N,C,S,j,1,!0),z=Rc(N,C,b,R,1,!0),W=Rc(N,C,w,R,1,!0);L.isBound&&!n.top&&(I.push(h),n.top=!0),B.isBound&&!n.bottom&&(I.push(h+v),n.bottom=!0),z.isBound&&!n.left&&(O.push(f),n.left=!0),W.isBound&&!n.right&&(O.push(f+g),n.right=!0)}),{boundMap:n,horizontal:I,vertical:O}}function pxe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Pe(i)<sr&&(i=0),Pe(a)<sr&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function dP(t,e,n,r,i){var a=pxe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=ol(t,e),o=ol(a,t),c=ol(a,e),u=o>s||c>s,f=le(Ao({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function Xw(t,e){return t.isBound?t.offset:e.isSnap?uP(e).offset:0}function gxe(t,e,n,r,i){var a=le(e,2),s=a[0],o=a[1],c=le(n,2),u=c[0],f=c[1],h=le(r,2),g=h[0],v=h[1],b=le(i,2),x=b[0],w=b[1],S=-x,T=-w;if(t&&s&&o){S=0,T=0;var I=[];if(u&&f?I.push([0,w],[x,0]):u?I.push([x,0]):f?I.push([0,w]):g&&v?I.push([0,w],[x,0]):g?I.push([x,0]):v&&I.push([0,w]),I.length){I.sort(function(C,P){return qa(Ze([s,o],C))-qa(Ze([s,o],P))});var O=I[0];if(O[0]&&Pe(s)>sr)S=-O[0],T=o*Pe(s+S)/Pe(s)-o;else if(O[1]&&Pe(o)>sr){var D=o;T=-O[1],S=s*Pe(o+T)/Pe(D)-s}if(t&&f&&u)if(Pe(S)>sr&&Pe(S)<Pe(x)){var N=Pe(x)/Pe(S);S*=N,T*=N}else if(Pe(T)>sr&&Pe(T)<Pe(w)){var N=Pe(w)/Pe(T);S*=N,T*=N}else S=gp(-x,S),T=gp(-w,T)}}else S=s||u?-x:0,T=o||f?-w:0;return[S,T]}function mxe(t,e,n,r,i,a){if(!Hp(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=n2(a.absolutePoses,[e,n]),o=Ua(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(W){return W[1]}),vertical:s.map(function(W){return W[0]})},v=XO(t.props.snapDirections),b=QO(v,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=K_(t,i,b,g),w=x.vertical,S=x.horizontal,T=lxe(t,s,a),I=T.vertical,O=T.horizontal,D=w.isSnap,N=S.isSnap,C=w.isBound||I.isBound,P=S.isBound||O.isBound,R=gp(w.offset,I.offset),j=gp(S.offset,O.offset),L=le(gxe(r,[e,n],[C,P],[D,N],[R,j]),2),B=L[0],z=L[1];return[{isBound:C,isSnap:D,offset:B},{isBound:P,isSnap:N,offset:z}]}function K_(t,e,n,r){r===void 0&&(r=n);var i=YO(G_(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:H_(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=Xw(a[0],c),h=Xw(s[0],u),g=Pe(f),v=Pe(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:v,bounds:s,snap:u}}}function HV(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=YO(e,n,r),c=o.horizontal,u=o.vertical,f=gW(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,v=Xw(c[0],h),b=Xw(u[0],g),x=Pe(v),w=Pe(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:v,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function vxe(t,e,n,r){var i=Kn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,v=i%180,b=v<3||v>177,x=v>87&&v<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function yxe(t,e,n,r,i,a){return n.map(function(s){var o=le(s,2),c=o[0],u=o[1],f=mr(e,c),h=mr(e,u),g=r?bxe(t,f,h,i):K_(t,i,{vertical:[h[0]],horizontal:[h[1]]}),v=g.horizontal,b=v.offset,x=v.isBound,w=v.isSnap,S=g.vertical,T=S.offset,I=S.isBound,O=S.isSnap,D=Ze(u,c);if(!T&&!b)return{isBound:I||x,isSnap:O||w,sign:D,offset:[0,0]};var N=vxe(f,h,g,r);if(!N)return{sign:D,isBound:!1,isSnap:!1,offset:[0,0]};var C=N==="vertical",P=[0,0];return!r&&Pe(u[0])===1&&Pe(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?P=Ao({datas:a,distX:-T,distY:-b}):P=dP(f,h,-(C?T:b),C,a).offset,P=P.map(function(R,j){return R*(D[j]?2/D[j]:0)}),{sign:D,isBound:C?I:x,isSnap:C?O:w,offset:P}})}function KV(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function bxe(t,e,n,r){var i=Xbe(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:ixe(t,e,n),c=o.horizontal,u=o.vertical,f=KV(a,c),h=KV(s,u),g=Pe(f),v=Pe(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:v}}}function xxe(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],v=u.left,b=v===void 0?-1/0:v,x=u.top,w=x===void 0?-1/0:x,S=u.right,T=S===void 0?1/0:S,I=u.bottom,O=I===void 0?1/0:I;g.forEach(function(D){var N=D[0]!==a[0],C=D[1]!==a[1],P=mr(e,D),R=Kn(r,P)*360/Math.PI;if(C){var j=P.slice();(Pe(R-360)<2||Pe(R-180)<2)&&(j[1]=r[1]);var L=dP(r,j,(r[1]<P[1]?O:w)-P[1],!1,i),B=le(L.offset,2),z=B[1],W=L.isOutside;isNaN(z)||(h=c+(W?1:-1)*Pe(z))}if(N){var j=P.slice();(Pe(R-90)<2||Pe(R-270)<2)&&(j[0]=r[0]);var Z=dP(r,j,(r[0]<P[0]?T:b)-P[0],!0,i),G=le(Z.offset,1),Y=G[0],Q=Z.isOutside;isNaN(Y)||(f=o+(Q?1:-1)*Pe(Y))}})}return{maxWidth:f,maxHeight:h}}var hi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=qa(u),h=Kn(u,[0,0]);return[e.createElement("div",{className:Ye("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],ef(t,e),q_(t,e,"translate"),Vxe(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=ft(t,e,se({set:function(f){n.startValue=f}},$_(t,e))),u=r||Ve(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){F_(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,v=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(v){s&&(h+=s[0],g+=s[1]);var S=t.props,T=S.parentMoveable,I=u?0:S.throttleDrag||f||0,O=r?0:S.throttleDragRotate||0,D=0,N=!1,C=!1,P=!1,R=!1;if(!r&&O>0&&(h||g)){var j=S.startDragRotate||0,L=ot(j+Kn([0,0],[h,g])*180/Math.PI,O)-j,B=g*Math.abs(Math.cos((L-90)/180*Math.PI)),z=h*Math.abs(Math.cos(L/180*Math.PI)),W=qa([z,B]);D=L*Math.PI/180,h=W*Math.cos(D),g=W*Math.sin(D)}if(!a&&!r&&!i){var Z=le(mxe(t,h,g,O,!o&&c||s,n),2),G=Z[0],Y=Z[1];N=G.isSnap,C=G.isBound,P=Y.isSnap,R=Y.isBound;var Q=G.offset,J=Y.offset;h+=Q,g+=J}var te=Pt(eW({datas:n,distX:h,distY:g}),w),U=Pt(Nbe({datas:n,distX:h,distY:g}),w);AV(U,xi),AV(te,xi),O||(!N&&!C&&(U[0]=ot(U[0],I),te[0]=ot(te[0],I)),!P&&!R&&(U[1]=ot(U[1],I),te[1]=ot(te[1],I)));var X=Ze(te,w),re=Ze(U,w),K=Ze(re,b),ue=Ze(X,x);n.prevDist=re,n.prevBeforeDist=X,n.passDelta=K,n.passDist=re;var ne=n.left+X[0],oe=n.top+X[1],_e=n.right-X[0],ae=n.bottom-X[1],ge=U_(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(re[0],"px, ").concat(re[1],"px)"));if(KO(e,ge),t.state.dragInfo.dist=r?[0,0]:re,!(!r&&!T&&K.every(function(Re){return!Re})&&ue.some(function(Re){return!Re}))){var fe=t.state,ee=fe.width,Ae=fe.height,Ie=ft(t,e,se({transform:ge,dist:re,delta:K,translate:U,beforeDist:X,beforeDelta:ue,beforeTranslate:te,left:ne,top:oe,right:_e,bottom:ae,width:ee,height:Ae,isPinch:a},vi({transform:ge},e)));return!r&&Ve(t,"onDrag",Ie),Ie}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,se(se({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=pa(t,e,{});return!n&&Ve(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=$A(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=se(se({},o),{targets:t.props.targets,events:f}),g=Ve(t,"onDragGroupStart",h);i.isDrag=g!==!1;var v=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[v[0]%1,v[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,se(se({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=$A(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=se({targets:t.props.targets,events:a},r);return Ve(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=$A(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ve(t,"onDragGroupEnd",pa(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function xW(t,e){var n=mr(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function wxe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=An(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function wW(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=Vbe(e,i,a),c=An(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var WV=a2("resizable"),fP={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:lW("resizable"),dragControlCondition:WV,viewClassName:i2("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=RW(s,i,r,c),g=t.state,v=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!v||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&ef(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var S=t.props.transformOrigin||"% %";c.transformOrigin=Fi(S)?S.split(" "):S,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=Ga(t.state);function I(R){var j=xW(c.startPositions,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function O(R){var j=wW(t.state,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function D(R){c.minSize=[en("".concat(R[0]),0)||0,en("".concat(R[1]),0)||0]}function N(R){var j=[R[0]||1/0,R[1]||1/0];(!dp(j[0])||isFinite(j[0]))&&(j[0]=en("".concat(j[0]),0)||1/0),(!dp(j[1])||isFinite(j[1]))&&(j[1]=en("".concat(j[1]),0)||1/0),c.maxSize=j}T(b/x),I(u||[-h[0],-h[1]]),c.setFixedDirection=I,c.setFixedPosition=O,c.setMin=D,c.setMax=N;var C=ft(t,e,{direction:h,startRatio:c.ratio,set:function(R){var j=le(R,2),L=j[0],B=j[1];c.startWidth=L,c.startHeight=B},setMin:D,setMax:N,setRatio:T,setFixedDirection:I,setFixedPosition:O,setOrigin:function(R){c.transformOrigin=R},dragStart:hi.dragStart(t,new hp().dragStart([0,0],e))}),P=f||Ve(t,"onResizeStart",C);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,P!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?C:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,v=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,S=r.startHeight,T=r.prevWidth,I=r.prevHeight,O=r.minSize,D=r.maxSize,N=r.ratio,C=r.startOffsetWidth,P=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(v){var j=t.state.is3d,L=r.startOffsetMatrix,B=r.startTransformOrigin,z=j?4:3,W=Rv(Kw(e)),Z=Math.sqrt(W.length);z!==Z&&(W=As(W,Z,z));var G=j0(L,W,B,z),Y=tf(G,C,P,z);r.startPositions=Y,r.nextTargetMatrix=W,r.nextAllMatrix=G}var Q=Vd(t.props,"resizable"),J=Q.resizeFormat,te=Q.throttleResize,U=te===void 0?i?0:1:te,X=Q.parentMoveable,re=Q.keepRatioFinally,K=r.direction,ue=K,ne=0,oe=0;!K[0]&&!K[1]&&(ue=[1,1]);var _e=N&&(s??Q.keepRatio)||!1;function ae(){var it=r.fixedDirection,vt=BW(ue,_e,r,e);ne=vt.distWidth,oe=vt.distHeight;var _n=ue[0]-it[0]||_e?Math.max(C+ne,xi):C,ct=ue[1]-it[1]||_e?Math.max(P+oe,xi):P;return _e&&C&&P&&(R?ct=_n/N:_n=ct*N),[_n,ct]}var ge=le(ae(),2),fe=ge[0],ee=ge[1];g||(r.setFixedDirection(r.fixedDirection),Ve(t,"onBeforeResize",ft(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(it){var vt;return r.setFixedDirection(it),vt=le(ae(),2),fe=vt[0],ee=vt[1],[fe,ee]},setFixedPosition:function(it){var vt;return r.setFixedPosition(it),vt=le(ae(),2),fe=vt[0],ee=vt[1],[fe,ee]},boundingWidth:fe,boundingHeight:ee,setSize:function(it){var vt;vt=le(it,2),fe=vt[0],ee=vt[1]}},!0)));var Ae=o;o||(!i&&a?Ae=$be(t,[0,0]):Ae=r.fixedPosition);var Ie=[0,0];a||(Ie=zxe(t,fe,ee,K,Ae,!u&&f,r)),c&&(!c[0]&&(Ie[0]=0),!c[1]&&(Ie[1]=0));function Re(){var it;J&&(it=le(J([fe,ee]),2),fe=it[0],ee=it[1]),fe=ot(fe,U),ee=ot(ee,U)}if(_e){ue[0]&&ue[1]&&Ie[0]&&Ie[1]&&(Pe(Ie[0])>Pe(Ie[1])?Ie[1]=0:Ie[0]=0);var Le=!Ie[0]&&!Ie[1];Le&&Re(),ue[0]&&!ue[1]||Ie[0]&&!Ie[1]||Le&&R?(fe+=Ie[0],ee=fe/N):(!ue[0]&&ue[1]||!Ie[0]&&Ie[1]||Le&&!R)&&(ee+=Ie[1],fe=ee*N)}else fe+=Ie[0],ee+=Ie[1],fe=Math.max(0,fe),ee=Math.max(0,ee);n=le(fK([fe,ee],O,D,_e?N:!1),2),fe=n[0],ee=n[1],Re(),_e&&(h||re)&&(R?ee=fe/N:fe=ee*N),ne=fe-C,oe=ee-P;var Be=[ne-T,oe-I];r.prevWidth=ne,r.prevHeight=oe;var nt=Ube(t,fe,ee,Ae,x,r);if(!(!X&&Be.every(function(it){return!it})&&nt.every(function(it){return!it}))){var Ee=hi.drag(t,M0(e,t.state,nt,!!a,!1,"draggable")),je=Ee.transform,gt=w+ne,Nt=S+oe,St=ft(t,e,se({width:gt,height:Nt,offsetWidth:Math.round(fe),offsetHeight:Math.round(ee),startRatio:N,boundingWidth:fe,boundingHeight:ee,direction:K,dist:[ne,oe],delta:Be,isPinch:!!a,drag:Ee},jW({style:{width:"".concat(gt,"px"),height:"".concat(Nt,"px")},transform:je},Ee,e)));return!g&&Ve(t,"onResize",St),St}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),v=Pe(h)>3,b=Pe(g)>3;if(v&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),v||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=pa(t,e,{});return!r&&Ve(t,"onResizeEnd",i),i}},dragGroupControlCondition:WV,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,se(se({},e),{isGroup:!0}));if(!r)return!1;var i=_s(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var v=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),O=s*(T?w[1]/T:0);v[0]=Math.max(v[0],I),v[1]=Math.max(v[1],O)})}function c(){var v=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),O=s*(T?w[1]/T:0);v[0]=Math.min(v[0],I),v[1]=Math.min(v[1],O)})}var u=ll(t,this,"dragControlStart",e,function(v,b){return Ww(t,v,n,b)});o(),c();var f=function(v){r.setFixedDirection(v),u.forEach(function(b,x){b.setFixedDirection(v),Ww(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=se(se({},r),{targets:t.props.targets,events:u.map(function(v){return se(se({},v),{setMin:function(b){v.setMin(b),o()},setMax:function(b){v.setMax(b),c()}})}),setFixedDirection:f,setMin:function(v){r.setMin(v),o()},setMax:function(v){r.setMax(v),c()}}),g=Ve(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Vd(t.props,"resizable");Y_(t,"onBeforeResize",function(v){Ve(t,"onBeforeResizeGroup",ft(t,e,se(se({},v),{targets:r.targets}),!0))});var i=this.dragControl(t,se(se({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=ll(t,this,"dragControl",e,function(v,b){var x=le(oi(D0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],S=x[1];return se(se({},b),{parentDist:null,parentScale:u,dragClient:Pt(f,[w,S]),parentKeepRatio:c})}),g=se({targets:r.targets,events:h},i);return Ve(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=ll(t,this,"dragControlEnd",e),a=pa(t,e,{targets:t.props.targets,events:i});return Ve(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function qA(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=An(t.state.rootMatrix,Ze([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Pt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Kn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=ol(f,[n,r])}function ew(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function GA(t,e,n,r){return ew(Kn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function HA(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=jxe(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=ot(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function _W(t,e,n){var r=le(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(ur(t))return t.map(function(w){return _W(w,[i,a,s,o],n)[0]});var c=le((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],v=DW(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,v]]}function hP(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(gr(n,Ye("rotation-control"))||t.props.rotateAroundControls&&gr(n,Ye("around-control"))||gr(n,Ye("control"))&&gr(n,Ye("rotatable")))return!0;var r=t.props.rotationTarget;return r?s2(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var _xe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Sxe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[_xe],viewClassName:function(t){return t.isDragging("rotatable")?Ye("view-rotation-dragging"):""},render:function(t,e){var n=Vd(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=_W(i,f,h),v=[];if(g.forEach(function(S,T){var I=le(S,2),O=I[0],D=I[1];v.push(e.createElement("div",{key:"rotation".concat(T),className:Ye("rotation"),style:{transform:"translate(-50%) translate(".concat(O[0],"px, ").concat(O[1],"px) rotate(").concat(D,"rad)")}},e.createElement("div",{className:Ye("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Ye("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=wl(c||{}),x={};b.forEach(function(S){c[S].forEach(function(T){x[T]=S})});var w=[];ur(s)&&(w=s.map(function(S){var T=x[S];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:S}})),v.push.apply(v,De([],le(aW(t,"rotatable",w,e)),!1))}return o&&v.push.apply(v,De([],le(uW(t,e)),!1)),v},dragControlCondition:hP,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,v=h.left,b=h.top,x=h.direction,w=h.beforeDirection,S=h.targetTransform,T=h.moveableClientRect,I=h.offsetMatrix,O=h.targetMatrix,D=h.allMatrix,N=h.width,C=h.height;if(!f&&!g)return!1;var P=t.getRect();i.rect=P,i.transform=S,i.left=v,i.top=b;var R=function(ue){var ne=wW(t.state,ue);i.fixedDirection=ne.fixedDirection,i.fixedOffset=ne.fixedOffset,i.fixedPosition=ne.fixedPosition,U&&U.setFixedPosition(ue)},j=function(ue){var ne=wxe(t.state,ue);i.fixedDirection=ne.fixedDirection,i.fixedOffset=ne.fixedOffset,i.fixedPosition=ne.fixedPosition,U&&U.setFixedDirection(ue)},L=a,B=s;if(f||u||c){var z=o||0;i.beforeInfo={origin:P.beforeOrigin,prevDeg:z,defaultDeg:z,prevSnapDeg:0,startDist:0},i.afterInfo=se(se({},i.beforeInfo),{origin:P.origin}),i.absoluteInfo=se(se({},i.beforeInfo),{origin:P.origin,startValue:z})}else{var W=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(W){var Z=W.getAttribute("data-direction")||"",G=Ibe[Z];if(G){i.isControl=!0,i.isAroundControl=gr(W,Ye("around-control")),i.controlDirection=G;var Y=W.getAttribute("data-resolve");Y&&(i.resolveAble=Y);var Q=Zxe(h.rootMatrix,h.renderPoses,T);n=le(mr(Q,G),2),L=n[0],B=n[1]}}i.beforeInfo={origin:P.beforeOrigin},i.afterInfo={origin:P.origin},i.absoluteInfo={origin:P.origin,startValue:P.rotation};var J=R;R=function(ue){var ne=h.is3d?4:3,oe=le(Pt(LK(O,ne),ue),2),_e=oe[0],ae=oe[1],ge=oi(I,jd([_e,ae],ne)),fe=oi(D,jd([ue[0],ue[1]],ne));J(ue);var ee=h.posDelta;i.beforeInfo.origin=Ze(ge,ee),i.afterInfo.origin=Ze(fe,ee),i.absoluteInfo.origin=Ze(fe,ee),qA(t,i.beforeInfo,L,B,T),qA(t,i.afterInfo,L,B,T),qA(t,i.absoluteInfo,L,B,T)},j=function(ue){var ne=mr([[0,0],[N,0],[0,C],[N,C]],ue);R(ne)}}i.startClientX=L,i.startClientY=B,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},q_(t,e,"rotate");var te=!1,U=!1;if(i.isControl&&i.resolveAble){var X=i.resolveAble;X==="resizable"&&(U=fP.dragControlStart(t,se(se({},new hp("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(te=hi.dragStart(t,new hp().dragStart([0,0],e))),R(Jxe(t));var re=ft(t,e,se(se({set:function(ue){i.startValue=ue*Math.PI/180},setFixedDirection:j,setFixedPosition:R},$_(t,e)),{dragStart:te,resizeStart:U})),K=Ve(t,"onRotateStart",re);return i.isRotate=K!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?re:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,v=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,S=a.isRotate,T=a.startValue,I=a.rect,O=a.startClientX,D=a.startClientY;if(S){F_(t,e,"rotate");var N=Pbe(e),C=v*N,P=t.props.parentMoveable,R=0,j,L,B=0,z,W,Z=0,G,Y,Q=180/Math.PI*T,J=w.startValue,te=!1,U=O+s,X=D+o;if(!u&&"parentDist"in e){var re=e.parentDist;j=re,z=re,G=re}else f||u?(j=ew(c,v,b),z=ew(c,C,x),G=ew(c,C,w)):(j=GA(U,X,v,b),z=GA(U,X,C,x),G=GA(U,X,C,w),te=!0);if(L=Q+j,W=Q+z,Y=J+G,Ve(t,"onBeforeRotate",ft(t,e,{beforeRotation:L,rotation:W,absoluteRotation:Y,setRotation:function(Ae){z=Ae-Q,j=z,G=z}},!0)),n=le(HA(t,I,b,j,Q,te),3),R=n[0],j=n[1],L=n[2],r=le(HA(t,I,x,z,Q,te),3),B=r[0],z=r[1],W=r[2],i=le(HA(t,I,w,G,J,te),3),Z=i[0],G=i[1],Y=i[2],!(!Z&&!B&&!R&&!P&&!g)){var K=U_(a,"rotate(".concat(W,"deg)"),"rotate(".concat(z,"deg)"));g&&(a.fixedPosition=WO(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var ue=Fbe(t,z,a),ne=Ze(Pt(h||[0,0],ue),a.prevInverseDist||[0,0]);a.prevInverseDist=ue,a.requestValue=null;var oe=nW(t,K,ne,f,e),_e=oe,ae=ol([U,X],w.startAbsoluteOrigin)-w.startDist,ge=void 0;if(a.resolveAble==="resizable"){var fe=fP.dragControl(t,se(se({},M0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:ae}));fe&&(ge=fe,_e=jW(_e,fe,e))}var ee=ft(t,e,se(se({delta:B,dist:z,rotate:W,rotation:W,beforeDist:j,beforeDelta:R,beforeRotate:L,beforeRotation:L,absoluteDist:G,absoluteDelta:Z,absoluteRotate:Y,absoluteRotation:Y,isPinch:!!f,resize:ge},oe),_e));return Ve(t,"onRotate",ee),ee}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=pa(t,e,{});return Ve(t,"onRotateEnd",r),r}},dragGroupControlCondition:hP,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=ll(t,this,"dragControlStart",e,function(h,g){var v=h.state,b=v.left,x=v.top,w=v.beforeOrigin,S=Pt(Ze([b,x],[i,a]),Ze(w,s));return g.datas.startGroupClient=S,g.datas.groupClient=S,se(se({},g),{parentRotate:0})}),u=se(se({},o),{targets:t.props.targets,events:c}),f=Ve(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){Y_(t,"onBeforeRotate",function(u){Ve(t,"onBeforeRotateGroup",ft(t,e,se(se({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=ll(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=le(f.datas.groupClient,2),v=g[0],b=g[1],x=le(N0(h,s*i),2),w=x[0],S=x[1],T=[w-v,S-b];return f.datas.groupClient=[w,S],se(se({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=se({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Ve(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=ll(t,this,"dragControlEnd",e),a=pa(t,e,{targets:t.props.targets,events:i});return Ve(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Exe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function e2(t,e){return Exe(se(se({},t),{classNames:De([Ye("line","guideline",t.direction)],le(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(ot(n,.1),"px")})}),e)}function YV(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,v=[0,0];return v[s]=r,v[s?0:1]=-i+g,e2({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Ye("target","bold",h)],posValue:v,sizeValue:a,zoom:c,direction:e},o)})}function XV(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?Jc:eu,f=i[u.start],h=i[u.end];return n.filter(function(g){var v=g.hide,b=g.elementRect;if(v)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,v){var b=g.pos,x=g.size,w=g.element,S=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return e2({key:"".concat(e,"-default-guideline-").concat(v),classNames:w?[Ye("bold"),S]:[Ye("normal"),S],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function Nm(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,v=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(D,N){return D}:b,w=u.zoom,S=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",I=Math.abs(i),O=v?parseFloat(I.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Ye("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(I,"px"),c)},e2({direction:e,classNames:[Ye(n),s],size:"100%",posValue:[0,0],sizeValue:I,zoom:w},o),o.createElement("div",{className:Ye("size-value","gap"),style:{transform:"translate".concat(S,"(-50%) scale(").concat(w,")")}},O>0?x(O,e):""))}function Txe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?Jc:eu,o=n[s.start],c=n[s.end];return zW(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(v){var b,x,w=v.element,S=v.elementRect.rect;if(S[s.end]<o)f.push(v);else if(c<S[s.start])h.push(v);else if(S[s.start]<=o&&c<=S[s.end]&&r){var T=v.pos,I={element:w,rect:se(se({},S),(b={},b[s.end]=S[s.start],b))},O={element:w,rect:se(se({},S),(x={},x[s.start]=S[s.end],x))},D=[0,0],N=[0,0];D[i]=T[i],D[a]=T[a],N[i]=T[i],N[a]=T[a]+v.size,f.push({type:t,pos:D,size:0,elementRect:I,direction:"",elementDirection:"end"}),h.push({type:t,pos:N,size:0,elementRect:O,direction:"",elementDirection:"start"})}}),f.sort(function(v,b){return b.pos[a]-v.pos[a]}),h.sort(function(v,b){return v.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function Axe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=Txe(o,c,r,a),g=u?eu:Jc,v=u?Jc:eu,b=r[g.start],x=r[g.end];h.forEach(function(w){var S=w.total,T=w.start,I=w.end,O=w.inner,D=n[f]+S[0].pos[f]-r[v.start],N=r;T.forEach(function(C){var P=C.elementRect.rect,R=N[g.start]-P[g.end];if(R>0){var j=[0,0];j[u]=n[u]+N[g.start]-b-R,j[f]=D,s.push(Nm(t,o,"dashed",s.length,R,j,C.className,i))}N=P}),N=r,I.forEach(function(C){var P=C.elementRect.rect,R=P[g.start]-N[g.end];if(R>0){var j=[0,0];j[u]=n[u]+N[g.end]-b,j[f]=D,s.push(Nm(t,o,"dashed",s.length,R,j,C.className,i))}N=P}),O.forEach(function(C){var P=C.elementRect.rect,R=b-P[g.start],j=P[g.end]-x,L=[0,0],B=[0,0];L[u]=n[u]-R,L[f]=D,B[u]=n[u]+x-b,B[f]=D,s.push(Nm(t,o,"dashed",s.length,R,L,C.className,i)),s.push(Nm(t,o,"dashed",s.length,j,B,C.className,i))})})}),s}function kxe(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?eu:Jc,h=c?Jc:eu,g=r[f.start],v=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var S=w.gap,T=w.gapRects,I=Math.max.apply(Math,De([b],le(T.map(function(N){var C=N.rect;return C[h.start]})),!1)),O=Math.min.apply(Math,De([x],le(T.map(function(N){var C=N.rect;return C[h.end]})),!1)),D=(I+O)/2;I===O||D===(b+x)/2||T.forEach(function(N){var C=N.rect,P=N.className,R=[n[0],n[1]];if(C[f.end]<g)R[c]+=C[f.end]-g;else if(v<C[f.start])R[c]+=C[f.start]-g-S;else return;R[u]+=D-b,a.push(Nm(t,c?"vertical":"horizontal","gap",a.length,S,R,P,i))})})}),a}function pP(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,v=t.props,b=v.snapGap,x=b===void 0?!0:b,w=v.verticalGuidelines,S=v.horizontalGuidelines,T=v.snapThreshold,I=T===void 0?5:T,O=v.maxSnapElementGuidelineDistance,D=O===void 0?1/0:O,N=v.isDisplayGridGuidelines,C=Ua(Ga(t.state)),P=C.top,R=C.left,j=C.bottom,L=C.right,B={top:P,left:R,bottom:j,right:L,center:(R+L)/2,middle:(P+j)/2},z=Nxe(t),W=De([],le(z),!1),Z=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(J){return J*I});x&&W.push.apply(W,De([],le(Cxe(t,B,Z)),!1));var G=se({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(W.push.apply(W,De([],le(Pxe(t,s?c:f,s?o:u,h,g,G,N)),!1)),a){var Y=i.left,Q=i.top;G.left+=Y,G.top+=Q,G.right+=Y,G.bottom+=Q}return W.push.apply(W,De([],le(EW(S||!1,w||!1,s?c:f,s?o:u,h,g,G)),!1)),W=W.filter(function(J){var te=J.element,U=J.elementRect,X=J.type;if(!te||!U)return!0;var re=U.rect;return SW(B,re,X,D)}),W}function Cxe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",Jc,eu],["horizontal",eu,Jc]].forEach(function(f){var h=le(f,3),g=h[0],v=h[1],b=h[2],x=e[v.start],w=e[v.end],S=e[v.center],T=e[b.start],I=e[b.end],O={left:n[0],top:n[1]};function D(P){var R=P.rect,j=O[v.start];return R[v.end]<x+j?x-R[v.end]:w-j<R[v.start]?R[v.start]-w:-1}var N=c.filter(function(P){var R=P.rect;return R[b.start]>I||R[b.end]<T?!1:D(P)>0}).sort(function(P,R){return D(P)-D(R)}),C=[];N.forEach(function(P){N.forEach(function(R){if(P!==R){var j=P.rect,L=R.rect,B=j[b.start],z=j[b.end],W=L[b.start],Z=L[b.end];B>Z||W>z||C.push([P,R])}})}),C.forEach(function(P){var R=le(P,2),j=R[0],L=R[1],B=j.rect,z=L.rect,W=B[v.start],Z=B[v.end],G=z[v.start],Y=z[v.end],Q=O[v.start],J=0,te=0,U=!1,X=!1,re=!1;if(Z<=x&&w<=G){if(X=!0,J=(G-Z-(w-x))/2,te=Z+J+(w-x)/2,Pe(te-S)>Q)return}else if(Z<G&&Y<x+Q){if(U=!0,J=G-Z,te=Y+J,Pe(te-x)>Q)return}else if(Z<G&&w-Q<W){if(re=!0,J=G-Z,te=W-J,Pe(te-w)>Q)return}else return;J&&SW(e,z,g,a)&&(J>o||u.push({type:g,pos:g==="vertical"?[te,0]:[0,te],element:L.element,size:0,className:L.className,isStart:U,isCenter:X,isEnd:re,gap:J,hide:!0,gapRects:[j,L],direction:"",elementDirection:""}))})}),u}function Ixe(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,v=o.snapRenderInfo,b=v&&(((i=v.direction)===null||i===void 0?void 0:i[0])||((a=v.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),S=w.children,T=v.direction;if(S){var I=T.map(function(D,N){var C=N===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},P=C.snapSize,R=C.posName,j=C.sizeName,L=C.clientOffset;if(!P)return{dir:D,multiple:1,snapSize:P,snapOffset:0};var B=w[j],z=w[R],W=hK(S.map(function(U){return[U[R]-z,U[j],B-U[j]-U[R]+z]})).filter(function(U){return U}).sort(function(U,X){return U-X}),Z=W[0],G=W.map(function(U){return ot(U/Z,.1)*P}),Y=1,Q=ot(B/Z,.1);for(Y=1;Y<=10&&!G.every(function(U){return U*Y%1===0});++Y);var J=(-D+1)/2,te=$w(z-L,z-L+B,J,1-J);return{multiple:Q*Y,dir:D,snapSize:P,snapOffset:Math.round(te/P)}}),O=I.map(function(D){return D.multiple||1});o.snapThresholdInfo.multiples=O,o.snapThresholdInfo.offset=I.map(function(D){return D.snapOffset}),I.forEach(function(D,N){D.snapSize})}}else o.snapThresholdInfo=null}function Pxe(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,v=[],b=a.left,x=a.top,w=[0,0];Ixe(t,r,i,a);var S=c.snapThresholdInfo,T=f,I=g;if(S&&(f*=S.multiples[0]||1,g*=S.multiples[1]||1,w=S.offset),g){for(var O=function(N){v.push({type:"horizontal",pos:[b,ot(w[1]*I+N-i+x,.1)],className:Ye("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},D=0;D<=n*2;D+=g)O(D);for(var D=-g;D>=-n;D-=g)O(D)}if(f){for(var O=function(C){v.push({type:"vertical",pos:[ot(w[0]*T+C-r+b,.1),x],className:Ye("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},D=0;D<=e*2;D+=f)O(D);for(var D=-f;D>=-e;D-=f)O(D)}return v}function SW(t,e,n,r){return n==="horizontal"?Pe(t.right-e.left)<=r||Pe(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Pe(t.bottom-e.top)<=r||Pe(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Nxe(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return Ts(g)&&"element"in g?se(se({},g),{element:mo(g.element,!0)}):{element:mo(g,!0)}}).filter(function(g){return g.element}),s=$ye(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var v=le(g,2),b=v[0],x=v[1];u[x]=i[b]}),Dxe(t,c.map(function(g){return a[g]})).map(function(g,v){u[c[v]]=g}),e.elementRects=u;var f=XO(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var v=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,S=w===void 0?f.left:w,T=g.right,I=T===void 0?f.right:T,O=g.bottom,D=O===void 0?f.bottom:O,N=g.center,C=N===void 0?f.center:N,P=g.middle,R=P===void 0?f.middle:P,j=g.className,L=g.rect,B=QO({top:x,right:I,left:S,bottom:D,center:C,middle:R},L),z=B.horizontal,W=B.vertical,Z=B.horizontalNames,G=B.verticalNames,Y=L.top,Q=L.left,J=L.right-Q,te=L.bottom-Y,U=[J,te];W.forEach(function(X,re){h.push({type:"vertical",element:v,pos:[ot(X,.1),Y],size:te,sizes:U,className:j,elementRect:g,elementDirection:FV[G[re]]||G[re],direction:""})}),z.forEach(function(X,re){h.push({type:"horizontal",element:v,pos:[Q,ot(X,.1)],size:J,sizes:U,className:j,elementRect:g,elementDirection:FV[Z[re]]||Z[re],direction:""})})}),h}function QV(t,e){return t?t.map(function(n){var r=Ts(n)?n:{pos:n},i=r.pos;return dp(i)?r:se(se({},r),{pos:en(i,e)})}):[]}function EW(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,v=r+f-u;return QV(t,v).forEach(function(b){o.push({type:"horizontal",pos:[c,ot(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),QV(e,g).forEach(function(b){o.push({type:"vertical",pos:[ot(b.pos-i+c,.1),u],size:v,className:b.className,direction:""})}),o}function Dxe(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=le(nxe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],v=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,S=x.top-h-v,T=S+x.height,I=w+x.width,O=le(mp(a,[w,S],c),2),D=O[0],N=O[1],C=le(mp(a,[I,T],c),2),P=C[0],R=C[1];return se(se({},b),{rect:{left:D,right:P,top:N,bottom:R,center:(D+P)/2,middle:(N+R)/2}})})}function ex(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=mo(r,!0);if(s){var o=nv(s),c=rB(e,[o.left-i.left,o.top-i.top]),u=rB(e,[o.right-i.right,o.bottom-i.bottom]);a.left=ot(c[0],1e-5),a.top=ot(c[1],1e-5),a.right=ot(u[0],1e-5),a.bottom=ot(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=pP(t),e.enableSnap=!0,!0}function TW(t,e,n,r,i,a){var s=tf(t,e,n,a?4:3),o=mr(s,r);return n2(s,Ze(i,o))}function ZV(t){return t?t/Pe(t):0}function Oxe(t,e,n,r,i,a){var s=a.fixedDirection,o=sxe(n,s,r),c=JO(t,e,n,r),u=De(De([],le(yxe(t,e,o,r,i,a)),!1),le(bW(t,c,a)),!1),f=Yw(u,0),h=Yw(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function Rxe(t,e,n,r,i,a,s,o,c){var u=mr(e,s),f=K_(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(ot(g,oP)||ot(h,oP)){var v=le(Ao({datas:c,distX:-g,distY:-h}),2),b=v[0],x=v[1],w=Math.min(i||1/0,n+s[0]*b),S=Math.min(a||1/0,r+s[1]*x);return[w-n,S-r]}return[0,0]}function AW(t,e,n,r,i,a,s,o){for(var c=Ga(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var v=e(f,h),b=Oxe(t,v,i,u,s,o),x=b.width,w=b.height,S=x.isBound,T=w.isBound,I=x.offset,O=w.offset;if(g===1&&(S||(I=0),T||(O=0)),g===0&&s&&!S&&!T)return[0,0];if(u){var D=Pe(I)*(n?1/n:1),N=Pe(O)*(r?1/r:1),C=S&&T?D<N:T||!S&&D<N;C?I=n*O/r:O=r*I/n}f+=I,h+=O}if(!u&&i[0]&&i[1]){var P=xxe(t,c,i,a,o),R=P.maxWidth,j=P.maxHeight,L=le(Rxe(t,e(f,h).map(function(W){return W.map(function(Z){return ot(Z,oP)})}),n+f,r+h,R,j,i,s,o),2),I=L[0],O=L[1];f+=I,h+=O}return[f,h]}function ev(t){return t<0&&(t=t%360+360),t%=360,t}function Mxe(t,e){e=ev(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Pe(t-r)<Pe(t-i)?r:i}function KA(t,e){t=ev(t),e=ev(e);var n=ev(t-e);return Math.min(n,360-n)}function jxe(t,e,n,r){var i,a=t.props,s=(i=a[dW])!==null&&i!==void 0?i:5,o=a[fW];if(Hp(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,v=n*Math.PI/180,b=[c,u,f,h].map(function(O){return Ze(O,g)}),x=b.map(function(O){return N0(O,v)}),w=De(De([],le(Zbe(t,b,x,g,n)),!1),le(fxe(t,b,x,g,n)),!1);w.sort(function(O,D){return Pe(O-n)-Pe(D-n)});var S=w.length>0;if(S)return{isSnap:S,dist:S?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(O,D){return KA(O,r)-KA(D,r)}),I=T[0];if(KA(I,r)<=s)return{isSnap:!0,dist:n+Mxe(r,I)-r}}return{isSnap:!1,dist:n}}function zxe(t,e,n,r,i,a,s){if(!Hp(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return AW(t,function(g,v){return TW(c||f,e+g,n+v,o,i,h)},e,n,r,i,a,s)}function Lxe(t,e,n,r,i){if(!Hp(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=AW(t,function(h,g){return TW(zbe(i,Pt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function Vxe(t,e){e.absolutePoses=Ga(t.state)}function JV(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Ui(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return se(se({},r),{direction:i.direction})})}function eB(t,e,n,r,i,a){var s=YO(G_(t,a),e,n),o=s.vertical,c=s.horizontal,u=Th();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=hxe(t),h=f.boundMap,g=f.vertical,v=f.horizontal;return g.forEach(function(b){xl(r,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||r.push({type:"bounds",pos:b})}),v.forEach(function(b){xl(i,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var Bxe=a2("",["resizable","scalable"]),Fxe={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",dW,fW,hW,pW,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!Hp(t,""))return kh(t,"boundMap",Th(),function(K){return JSON.stringify(K)}),kh(t,"innerBoundMap",Th(),function(K){return JSON.stringify(K)}),[];n.guidelines=pP(t);var g=Math.min(a[0],s[0],o[0],c[0]),v=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=Ga(t.state),w=[],S=[],T=[],I=[],O=[],D=Ua(x),N=D.width,C=D.height,P=D.top,R=D.left,j=D.bottom,L=D.right,B={left:R,right:L,top:P,bottom:j,center:(R+L)/2,middle:(P+j)/2},z=b.length>0,W=z?Ua(b):{};if(!u.request){if(u.direction&&O.push(axe(t,x,u.direction,h,h)),u.snap){var Z=Ua(x);u.center&&(Z.middle=(Z.top+Z.bottom)/2,Z.center=(Z.left+Z.right)/2),O.push(UV(t,Z,h,h))}z&&(u.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),O.push(UV(t,W,h,h))),O.forEach(function(K){var ue=K.vertical.posInfos,ne=K.horizontal.posInfos;w.push.apply(w,De([],le(ue.filter(function(oe){var _e=oe.guidelineInfos;return _e.some(function(ae){var ge=ae.guideline;return!ge.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),S.push.apply(S,De([],le(ne.filter(function(oe){var _e=oe.guidelineInfos;return _e.some(function(ae){var ge=ae.guideline;return!ge.hide})}).map(function(oe){return{type:"snap",pos:oe.pos}})),!1)),T.push.apply(T,De([],le(JV(ue)),!1)),I.push.apply(I,De([],le(JV(ne)),!1))})}var G=eB(t,[R,L],[P,j],w,S),Y=G.boundMap,Q=G.innerBoundMap;z&&eB(t,[W.left,W.right],[W.top,W.bottom],w,S,u.externalBounds);var J=De(De([],le(T),!1),le(I),!1),te=J.filter(function(K){return K.element&&!K.gapRects}),U=J.filter(function(K){return K.gapRects}).sort(function(K,ue){return K.gap-ue.gap});Ve(t,"onSnap",{guidelines:J.filter(function(K){var ue=K.element;return!ue}),elements:te,gaps:U},!0);var X=kh(t,"boundMap",Y,function(K){return JSON.stringify(K)},Th()),re=kh(t,"innerBoundMap",Q,function(K){return JSON.stringify(K)},Th());return(Y===X||Q===re)&&Ve(t,"onBound",{bounds:Y,innerBounds:Q},!0),De(De(De(De(De(De([],le(Axe(t,te,[g,v],B,e)),!1),le(kxe(t,U,[g,v],B,e)),!1),le(XV(t,"horizontal",I,[i,r],B,e)),!1),le(XV(t,"vertical",T,[i,r],B,e)),!1),le(YV(t,"horizontal",S,g,r,N,0,e)),!1),le(YV(t,"vertical",w,v,i,C,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},ex(t)},drag:function(t){var e=t.state;ex(t)||(e.guidelines=pP(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Bxe(t,e)||hP(t,e))return!0;if(!e.isRequest&&e.inputEvent)return gr(e.inputEvent.target,Ye("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,ex(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ex(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Uxe(t,e){return[t[0]*e[0],t[1]*e[1]]}function Ye(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return z0e.apply(void 0,De([GO],le(t),!1))}function kW(t){t()}function $xe(t){return!t||t==="none"?[1,0,0,1,0,0]:Ts(t)?t:Rv(t)}function tv(t,e,n){return Gw(e,zd(n,e),t,zd(n.map(function(r){return-r}),e))}function qxe(t,e,n){if(e==="%"){var r=t2(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function Gxe(t){var e=Hxe(r2(t,":before"));return e.map(function(n,r){var i=k0(n),a=i.value,s=i.unit;return a*qxe(t,s,r===0)})}function Qw(t){return t?t.split(" "):["0","0"]}function Hxe(t){return Qw(t.transformOrigin)}function CW(t){var e=$i(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function jv(t,e,n,r,i){var a,s,o=RO(t)||du(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var v=!1,b=t===e||u===e,x="relative",w=1,S=parseFloat(i?.("zoom"))||1,T=i?.("position");u&&u!==o;){e===u&&(b=!0);var I=$i(u),O=u.tagName.toLowerCase(),D=CW(u),N=I("willChange"),C=parseFloat(I("zoom"))||1;if(x=I("position"),r&&C!==1){w=C;break}if(!n&&r&&S!==1&&T&&T!=="absolute"||O==="svg"||O==="foreignobject"||x!=="static"||D&&D!=="none"||N==="transform")break;var P=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=u.parentNode;P&&(c=!0,f=R);var j=R;if(j&&j.nodeType===11){u=j.host,v=!0,x=$i(u)("position");break}u=j,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:v,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function Kxe(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=$i(t),o=z_(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=KK?Gxe(t):Qw(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=le(Xxe(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=Qw(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function IW(t,e){var n=$i(t),r=$i(du(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function gP(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=As(n,3,4))})}function Wxe(t){for(var e=t.parentElement,n=!1,r=du(t);e;){var i=r2(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function W_(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(VK(t,!e).join(","),")")}function t2(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function Yxe(t,e){var n,r=t2(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,v=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,S=Math.floor((h-2)/3);v[0]=i*w/2,v[1]=a*S/2;var T=g===2?Math.max(u,c):Math.min(c,u);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*S}var I=FO(b,e);return n=le(x,2),I[e*(e-1)]=n[0],I[e*(e-1)+1]=n[1],tv(I,e,v)}function Xxe(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=$i(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=t2(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,v=a?e[1]:e[1]-h;return[f,h,g,v]}function An(t,e,n){return oi(t,jd(e,n),n)}function tf(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return An(t,i,r)})}function Ua(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,De([],le(e),!1)),i=Math.min.apply(Math,De([],le(n),!1)),a=Math.max.apply(Math,De([],le(e),!1)),s=Math.max.apply(Math,De([],le(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function tB(t,e,n,r){var i=tf(t,e,n,r);return Ua(i)}function Qxe(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=NW(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),v=[0,0];n===du(n)&&(v=IW(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+v[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+v[1],S=b.width,T=b.height,I=Gw(r,i,c),O=tB(I,f,h,r),D=O.left,N=O.top,C=O.width,P=O.height,R=An(I,o,r),j=Ze(R,[D,N]),L=[x+j[0]*S/C,w+j[1]*T/P],B=[0,0],z=0;++z<10;){var W=wo(i,r);a=le(Ze(An(W,L,r),An(W,R,r)),2),B[0]=a[0],B[1]=a[1];var Z=Gw(r,i,zd(B,r),c),G=tB(Z,f,h,r),Y=G.left,Q=G.top,J=Y-x,te=Q-w;if(Pe(J)<2&&Pe(te)<2)break;L[0]-=J,L[1]-=te}return B.map(function(U){return Math.round(U)})}function Zxe(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return An(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function qa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function PW(t,e){return qa([e[0]-t[0],e[1]-t[1]])}function Dm(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Kn(t,e));var i=PW(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function Zw(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Vd(t,e){var n=t[e];return Ts(n)?se(se({},t),n):t}function NW(t){var e=t&&!z_(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,v=0,b=1/0,x=1/0,w=1/0,S=1/0,T=0,I=0,O=!1;if(t)if(!e&&t.ownerSVGElement){var D=t.getBBox();O=!0,n=D.width,r=D.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var N=$i(t),C=t.style,P=N("boxSizing")==="border-box",R=parseFloat(N("borderLeftWidth"))||0,j=parseFloat(N("borderRightWidth"))||0,L=parseFloat(N("borderTopWidth"))||0,B=parseFloat(N("borderBottomWidth"))||0,z=parseFloat(N("paddingLeft"))||0,W=parseFloat(N("paddingRight"))||0,Z=parseFloat(N("paddingTop"))||0,G=parseFloat(N("paddingBottom"))||0,Y=z+W,Q=Z+G,J=R+j,te=L+B,U=Y+J,X=Q+te,re=N("position"),K=0,ue=0;if("clientLeft"in t){var ne=null;if(re==="absolute"){var oe=jv(t,du(t));ne=oe.offsetParent}else ne=t.parentElement;if(ne){var _e=$i(ne);K=parseFloat(_e("width")),ue=parseFloat(_e("height"))}}f=Math.max(Y,en(N("minWidth"),K)||0),h=Math.max(Q,en(N("minHeight"),ue)||0),b=en(N("maxWidth"),K),x=en(N("maxHeight"),ue),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=en(C.width,0)||0,I=en(C.height,0)||0,s=parseFloat(N("width"))||0,o=parseFloat(N("height"))||0,c=Pe(s-T)<1?WI(f,T||s,b):s,u=Pe(o-I)<1?WI(h,I||o,x):o,n=c,r=u,i=c,a=u,P?(w=b,S=x,g=f,v=h,c=n-U,u=r-X):(w=b+U,S=x+X,g=f+U,v=h+X,n=c+U,r=u+X),i=c+Y,a=u+Q}return{svg:O,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:T,inlineCSSHeight:I,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:v,maxOffsetWidth:w,maxOffsetHeight:S}}function DW(t,e){return Kn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function tx(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function OW(t,e){var n=t===du(t)||t===RO(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=$i(t)("overflow")!=="visible",se(se({},e),r)}function WA(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?OW(n,f):f}function nv(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?OW(t,o):o}function Jxe(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?o2(r,a,s):c}function RW(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=MW(a,r)}return i}function MW(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function n2(t,e){return[Pt(e,t[0]),Pt(e,t[1]),Pt(e,t[2]),Pt(e,t[3])]}function Ga(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return n2([r,i,a,s],[e,n])}function mP(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Ah(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&mP(t,e),r?.unset(),t[n]=null}function vi(t,e){if(e){var n=Gp(e);n.nextStyle=se(se({},n.nextStyle),t)}return{style:t,cssText:wl(t).map(function(r){return"".concat(Jx(r,"-"),": ").concat(t[r],";")}).join("")}}function jW(t,e,n){var r=e.afterTransform||e.transform;return se(se({},vi(se(se(se({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ft(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=se(se({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function pa(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),se(se({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Y_(t,e,n){t._emitter.on(e,n)}function Ve(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function r2(t,e){return Uc(t).getComputedStyle(t,e)}function nx(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function vP(t,e){return t===e||t==null&&e==null}function nB(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!z_(i))return i}return t[n]}function zW(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function ewe(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function LW(t){return t.reduce(function(e,n){return e.concat(n)},[])}function gp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Pe(r)-Pe(n)}),t[0]}function mp(t,e,n){return oi(wo(t,n),jd(e,n),n)}function twe(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=le(mp(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Oa(t,e,n,r){if(!n[0]&&!n[1])return e;var i=An(t,[ZV(n[0]||1),0],r),a=An(t,[0,ZV(n[1]||1)],r),s=An(t,[n[0]/qa(i),n[1]/qa(a)],r);return Pt(e,s)}function hs(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Jw(t){return Pe(t)<=xi?0:t}function i2(t){return function(e){if(!e.isDragging(t))return"";var n=qbe(e,t),r=n.deg;return r?Ye("view-control-rotation".concat(r)):""}}function a2(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return gr(i,Ye("direction"))&&(!t||gr(i,Ye(t)))}}function nwe(t,e,n){var r,i=fp(t,{"x%":function(D){return D/100*e.offsetWidth},"y%":function(D){return D/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:fp([""])[0],v=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=ph(f),S=ph(h),T=ph(v),I=ph(b),O=tn(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:S,targetFunctionMatrix:ph(x),afterFunctionMatrix:T,afterFunctionMatrix2:I,allFunctionMatrix:O,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:v,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function rwe(t){return!t||!Ts(t)||$p(t)?!1:ur(t)||"length"in t}function mo(t,e){return t?$p(t)?t:Fi(t)?e?document.querySelector(t):t:NO(t)?t():vK(t)?t:"current"in t?t.current:t:null}function s2(t,e){if(!t)return[];var n=rwe(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Fi(i)&&e?De(De([],le(r),!1),le([].slice.call(document.querySelectorAll(i))),!1):(ur(i)?r.push(s2(i,e)):r.push(mo(i,e)),r)},[])}function iwe(t,e,n){var r=Kn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function rB(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=wo(n,i);return r||(a=As(a,3,4)),a[12]=0,a[13]=0,a[14]=0,Fye(a,e)}function VW(t,e,n,r,i){var a=le(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Kn([0,0],e),h=Kn([0,0],r),g=qa(e),v=Math.cos(f-h)*g;if(!r[0])u=v,c=u*n;else if(!r[1])c=v,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),S=Math.atan2(b,x);w<0&&(w+=Math.PI*2),S<0&&(S+=Math.PI*2);var T=0;Pe(w-S)<Math.PI/2||Pe(w-S)>Math.PI/2*3||(S+=Math.PI),T=w-S,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var I=qa([b+e[0],x+e[1]])*Math.cos(T);c=I*Math.sin(S)-b,u=I*Math.cos(S)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function BW(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,v=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,S=[0,1].map(function(C){return Pe(t[C]-w[C])}),T=[0,1].map(function(C){var P=S[C];return P!==0&&(P=2/P),P});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(dp(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(v){var I=s*S[0],O=o*S[1],D=qa([I,O]);c=v/D*I*T[0],u=v/D*O*T[1]}else{var N=Ao({datas:n,distX:f,distY:h});N=T.map(function(C,P){return N[P]*C}),i=le(VW([s,o],N,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function yP(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=le(t.split(" "),2),r=n[0],i=n[1],a=yP(r||""),s=yP(i||""),o=se(se({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function o2(t,e,n){var r=yP(t,!0),i=r.x,a=r.y;return[en(i,e)||0,en(a,n)||0]}function awe(t,e,n){var r=t.map(function(a){return Ze(a,e)}),i=r.map(function(a){return N0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Pt(a,e)})}}function FW(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=ur(n),s=ur(i);return a&&s?FW(n,i):!a&&!s?n===i:!1})}function kh(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function pi(t){return t>=0?1:-1}function Pe(t){return Math.abs(t)}function YA(t,e){return eye(t).map(function(n){return e(n)})}function UW(t){return dp(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var swe=R0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=ft(t,e,{});r&&(g.targets=r);var v=Ve(t,u,g);n.isPinch=v!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=se(se({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=ft(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Ve(t,h,f);var g=n.ables,v="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[v]&&b[v](t,se(se({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=pa(t,e,{isDrag:r});a&&(c.targets=a),Ve(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,se(se({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,se(se({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,se(se({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,se(se({},e),{targets:t.props.targets}))}}),iB=a2("scalable"),owe={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:lW("scalable"),dragControlCondition:iB,viewClassName:i2("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=RW(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,v=o.pos2,b=o.pos4;if(!s||!h)return!1;r||ef(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];q_(t,e,"scale"),n.isWidth=x;function w(N){n.ratio=N&&isFinite(N)?N:0}n.startPositions=Ga(t.state);function S(N){var C=xW(n.startPositions,N);n.fixedDirection=C.fixedDirection,n.fixedPosition=C.fixedPosition,n.fixedOffset=C.fixedOffset}n.setFixedDirection=S,w(ol(g,v)/ol(v,b)),S([-s[0],-s[1]]);var T=function(N){n.minScaleSize=N},I=function(N){n.maxScaleSize=N};T([-1/0,-1/0]),I([1/0,1/0]);var O=ft(t,e,se(se({direction:s,set:function(N){n.startValue=N},setRatio:w,setFixedDirection:S,setMinScaleSize:T,setMaxScaleSize:I},$_(t,e)),{dragStart:hi.dragStart(t,new hp().dragStart([0,0],e))})),D=Ve(t,"onScaleStart",O);return n.startFixedDirection=n.fixedDirection,D!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?O:!1},dragControl:function(t,e){F_(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,v=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,S=n.ratio;if(!b)return!1;var T=t.props,I=T.throttleScale,O=T.parentMoveable,D=h;!h[0]&&!h[1]&&(D=[1,1]);var N=S&&(r??T.keepRatio)||!1,C=t.state,P=[x[0],x[1]];function R(){var fe=BW(D,N,n,e),ee=fe.distWidth,Ae=fe.distHeight,Ie=g?(g+ee)/g:1,Re=v?(v+Ae)/v:1;x[0]||(P[0]=ee/g),x[1]||(P[1]=Ae/v);var Le=(D[0]||N?Ie:1)*P[0],Be=(D[1]||N?Re:1)*P[1];return Le===0&&(Le=pi(f[0])*Qb),Be===0&&(Be=pi(f[1])*Qb),[Le,Be]}var j=R();if(!a&&t.props.groupable){var L=C.snapRenderInfo||{},B=L.direction;ur(B)&&(B[0]||B[1])&&(C.snapRenderInfo={direction:h,request:e.isRequest})}Ve(t,"onBeforeScale",ft(t,e,{scale:j,setFixedDirection:function(fe){return n.setFixedDirection(fe),j=R(),j},startFixedDirection:n.startFixedDirection,setScale:function(fe){j=fe}},!0));var z=[j[0]/P[0],j[1]/P[1]],W=s,Z=[0,0],G=pi(z[0]*z[1]),Y=!s&&!i&&a;if(Y||u?W=WO(t,n.targetAllTransform,[0,0],[0,0],n):s||(W=n.fixedPosition),a||(Z=Lxe(t,z,h,!c&&o,n)),N){D[0]&&D[1]&&Z[0]&&Z[1]&&(Math.abs(Z[0]*g)>Math.abs(Z[1]*v)?Z[1]=0:Z[0]=0);var Q=!Z[0]&&!Z[1];if(Q&&(w?z[0]=ot(z[0]*P[0],I)/P[0]:z[1]=ot(z[1]*P[1],I)/P[1]),D[0]&&!D[1]||Z[0]&&!Z[1]||Q&&w){z[0]+=Z[0];var J=g*z[0]*P[0]/S;z[1]=pi(G*z[0])*Pe(J/v/P[1])}else if(!D[0]&&D[1]||!Z[0]&&Z[1]||Q&&!w){z[1]+=Z[1];var te=v*z[1]*P[1]*S;z[0]=pi(G*z[1])*Pe(te/g/P[0])}}else z[0]+=Z[0],z[1]+=Z[1],Z[0]||(z[0]=ot(z[0]*P[0],I)/P[0]),Z[1]||(z[1]=ot(z[1]*P[1],I)/P[1]);z[0]===0&&(z[0]=pi(f[0])*Qb),z[1]===0&&(z[1]=pi(f[1])*Qb),j=Uxe(z,[P[0],P[1]]);var U=[g,v],X=[g*j[0],v*j[1]];X=fK(X,n.minScaleSize,n.maxScaleSize,N?S:!1),j=YA(2,function(fe){return U[fe]?X[fe]/U[fe]:X[fe]}),z=YA(2,function(fe){return j[fe]/P[fe]});var re=YA(2,function(fe){return f[fe]?z[fe]/f[fe]:z[fe]}),K="scale(".concat(z.join(", "),")"),ue="scale(".concat(j.join(", "),")"),ne=U_(n,ue,K),oe=!x[0]||!x[1],_e=Lbe(t,oe?ue:K,n.fixedDirection,W,n.fixedOffset,n,oe),ae=Y?_e:Ze(_e,n.prevInverseDist||[0,0]);if(n.prevDist=z,n.prevInverseDist=_e,j[0]===f[0]&&j[1]===f[1]&&ae.every(function(fe){return!fe})&&!O&&!Y)return!1;var ge=ft(t,e,se({offsetWidth:g,offsetHeight:v,direction:h,scale:j,dist:z,delta:re,isPinch:!!a},nW(t,ne,ae,a,e)));return Ve(t,"onScale",ge),ge},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=pa(t,e,{});return Ve(t,"onScaleEnd",r),r},dragGroupControlCondition:iB,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=_s(t,"resizable",e);n.moveableScale=t.scale;var a=ll(t,this,"dragControlStart",e,function(u,f){return Ww(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),Ww(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=se(se({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Ve(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){Y_(t,"onBeforeScale",function(f){Ve(t,"onBeforeScaleGroup",ft(t,e,se(se({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=ll(t,this,"dragControl",e,function(f,h){var g=le(oi(D0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),v=g[0],b=g[1];return se(se({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Pt(o,[v,b])})}),u=se({targets:t.props.targets,events:c},r);return Ve(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=ll(t,this,"dragControlEnd",e),a=pa(t,e,{targets:t.props.targets,events:i});return Ve(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function xc(t,e){return t.map(function(n,r){return $w(n,e[r],1,2)})}function aB(t,e,n){var r=Kn(t,e),i=Kn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function lwe(t,e){var n=aB(t[0],t[1],t[2]),r=aB(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var cwe={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:i2("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=xc(c,u),v=xc(u,c),b=xc(c,f),x=xc(f,c),w=xc(f,h),S=xc(h,f),T=xc(u,h),I=xc(h,u);return De([e.createElement("div",{className:Ye("line"),key:"middeLine1",style:Dm(g,w,s)}),e.createElement("div",{className:Ye("line"),key:"middeLine2",style:Dm(v,S,s)}),e.createElement("div",{className:Ye("line"),key:"middeLine3",style:Dm(b,T,s)}),e.createElement("div",{className:Ye("line"),key:"middeLine4",style:Dm(x,I,s)})],le(cW(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return gr(n,Ye("direction"))&&gr(n,Ye("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=MW(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,v=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:As(h,3,4),n.targetInverseMatrix=zK(wo(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,v],[g,v]].map(function(T){return Ze(T,c)}),n.nextPoses=n.poses.map(function(T){var I=le(T,2),O=I[0],D=I[1];return oi(n.warpTargetMatrix,[O,D,0,1],4)}),n.startValue=fn(4),n.prevMatrix=fn(4),n.absolutePoses=Ga(o),n.posIndexes=tW(s),ef(t,e),q_(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=ft(t,e,se({set:function(T){n.startValue=T}},$_(t,e))),S=Ve(t,"onWarpStart",w);return S!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(F_(t,e,"matrix3d"),Hp(t,"warpable")){var v=h.map(function(R){return g[R]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var b=K_(t,r,{horizontal:v.map(function(R){return R[1]+a}),vertical:v.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var S=Ao({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(R){T[R]=Pt(T[R],S)}),!Cbe.every(function(R){return lwe(R.map(function(j){return f[j]}),R.map(function(j){return T[j]}))}))return!1;var I=UO(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!I.length)return!1;var O=tn(s,I,4),D=JK(n,O,!0),N=tn(wo(o,4),D,4);n.prevMatrix=D;var C=tn(u,D,4),P=U_(n,"matrix3d(".concat(C.join(", "),")"),"matrix3d(".concat(D.join(", "),")"));return KO(e,P),Ve(t,"onWarp",ft(t,e,se({delta:N,matrix:C,dist:D,multiply:tn,transform:P},vi({transform:P},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Ve(t,"onWarpEnd",pa(t,e,{})),r):!1}},uwe=Ye("area-pieces"),rx=Ye("area-piece"),$W=Ye("avoid"),dwe=Ye("view-dragging");function XA(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;mK(e,$W),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function sB(t){return t.createElement("div",{key:"area_pieces",className:uwe},t.createElement("div",{className:rx}),t.createElement("div",{className:rx}),t.createElement("div",{className:rx}),t.createElement("div",{className:rx}))}var qW={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Ye("area","pass"):Ye("area");if(a)return[e.createElement("div",{key:"area",ref:sl(t,"areaElement"),className:h}),sB(e)];if(!r||!i)return[];var g=UO([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),v=g.length?W_(g,!0):"none";return[e.createElement("div",{key:"area",ref:sl(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:v}}),sB(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,v=c.top,b=Ua(u),x=b.left,w=b.top,S=b.width,T=b.height,I=h?4:3,O=le(mp(f,[r-g,i-v],I),2),D=O[0],N=O[1];D-=x,N-=w;var C=[{left:x,top:w,width:S,height:N-10},{left:x,top:w,width:D-10,height:T},{left:x,top:w+N+10,width:S,height:T-N-10},{left:x+D+10,top:w,width:S-D-10,height:T}],P=[].slice.call(s.nextElementSibling.children);C.forEach(function(R,j){P[j].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),gK(s,$W),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,XA(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||XA(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){XA(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&dK(function(){e.disableNativeEvent=!1})}},fwe=R0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,v=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var S=le(o2(i,b,x),2),T=S[0],I=S[1],O=h?4:3,D=An(f,[T,I],O);w=Zw(c,r,Ze(D,[g,v]))}else w=Zw(c,r,o);return[e.createElement("div",{className:Ye("control","origin"),style:w,key:"beforeOrigin"})]}});function hwe(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var pwe={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new Kye,o=mo(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,v=ft(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(v.targets=u),Ve(t,b,v)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,v=f.inputEvent;t[c].scrollBy(h,g,v.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,se({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?hwe:f,g=r.scrollOptions;return n.drag(e,se({container:a,threshold:o,throttleTime:u,getScrollPosition:function(v){return h({scrollContainer:v.container,direction:v.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,se(se({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,se(se({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,se(se({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,se(se({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,se(se({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,se(se({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,se(se({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},GW={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},gwe=R0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=UW(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,v=c.pos4,b=[f,h,g,v],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,S){var T=le(w,2),I=T[0],O=T[1],D=b[I],N=b[O],C=u[I],P=u[O],R=UO([0,0],[100,0],[0,100],[100,100],D,N,C,P);if(R.length)return e.createElement("div",{key:"padding".concat(S),className:Ye("padding"),style:{transform:W_(R,!0)}})})}}),oB=["nw","ne","se","sw"];function ix(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var mwe=[1,2,5,6],vwe=[0,3,4,7],ad=[1,-1,-1,1],sd=[1,1,-1,-1];function l2(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var v=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(hs(w,r,e)),w}else{var w=Math.max(0,v===1?x[0]-i:s-x[0]);return c.push(hs(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function HW(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function KW(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,v=t.slice(0,g),b=t.slice(g+1),x=v.length,w=b.length,S=w>0,T=le(v,4),I=T[0],O=I===void 0?"0px":I,D=T[1],N=D===void 0?O:D,C=T[2],P=C===void 0?O:C,R=T[3],j=R===void 0?N:R,L=le(b,4),B=L[0],z=B===void 0?O:B,W=L[1],Z=W===void 0?S?z:N:W,G=L[2],Y=G===void 0?S?z:P:G,Q=L[3],J=Q===void 0?S?Z:j:Q,te=[O,N,P,j].map(function(ne){return en(ne,e)}),U=[z,Z,Y,J].map(function(ne){return en(ne,n)}),X=te.slice(),re=U.slice();o=le(ix([X[0],X[1]],e),2),X[0]=o[0],X[1]=o[1],c=le(ix([X[3],X[2]],e),2),X[3]=c[0],X[2]=c[1],u=le(ix([re[0],re[3]],n),2),re[0]=u[0],re[3]=u[1],f=le(ix([re[1],re[2]],n),2),re[1]=f[0],re[2]=f[1];var K=s?X:X.slice(0,Math.max(a[0],x)),ue=s?re:re.slice(0,Math.max(a[1],w));return De(De([],le(K.map(function(ne,oe){var _e=oB[oe];return{virtual:oe>=x,horizontal:ad[oe],vertical:0,pos:[r+ne,i+(sd[oe]===-1?n:0)],sub:!0,raw:te[oe],direction:_e}})),!1),le(ue.map(function(ne,oe){var _e=oB[oe];return{virtual:oe>=w,horizontal:0,vertical:sd[oe],pos:[r+(ad[oe]===-1?e:0),i+ne],sub:!0,raw:U[oe],direction:_e}})),!1)}function ywe(t,e,n,r,i){i===void 0&&(i=e.length);var a=HW(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function bwe(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=HW(t.slice(n)),g=h.horizontalRange,v=h.verticalRange;if(r>-1)for(var b=ad[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=sd[x]===1?f:c,S=0;if(r===x?S=a:x===0?S=u+b:ad[x]===-1&&(S=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:ad[x],vertical:0,pos:[S,w]}),e.splice(n+x,0,[S,w]),x===0)break}else if(i>-1){var T=sd[i]===1?s-f:c-s;if(g[1]===0&&v[1]===0){var I=[u+T,f];t.push({horizontal:ad[0],vertical:0,pos:I}),e.push(I)}for(var O=v[0],x=v[1];x<=i;++x){var S=ad[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+T:sd[x]===1?w=e[n+O][1]:sd[x]===-1&&(w=c-(e[n+O][1]-f)),t.push({horizontal:0,vertical:sd[x],pos:[S,w]}),e.push([S,w]),x===0)break}}}function xwe(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var wwe=[[0,-1,"n"],[1,0,"e"]],_we=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function c2(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(N){return"".concat(hs(N[0],a,r)," ").concat(hs(N[1],s,r))});if(f||c==="inset"){var g=n[1][1],v=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,v,x,b].map(function(N){return"".concat(N,"px")});var w=[g,a-v,s-x,b].map(function(N,C){return hs(N,C%2?a:s,r)});if(n.length>8){var S=le(Ze(n[4],n[0]),2),T=S[0],I=S[1];w.push.apply(w,De(["round"],le(l2(u.slice(8).map(function(N,C){return se(se({},N),{pos:n[C]})}),r,T,I,b,g,v,x).styles),!1))}return w}else if(h||c==="ellipse"){var O=n[0],D=hs(Pe(n[1][1]-O[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[D]:[hs(Pe(n[2][0]-O[0]),a,r),D];return w.push("at",hs(O[0],a,r),hs(O[1],s,r)),w}}function e1(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return _we.map(function(s){var o=le(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:Pe(u),horizontal:Pe(c),direction:f,pos:[h,g]}})}function WW(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Pe(e[1]-e[0]),Pe(n[1]-n[0])]}function lB(t,e,n,r,i){var a,s,o,c,u,f,h,g,v;if(t){var b=i;if(!b){var x=$i(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var S=uK(b),T=S.prefix,I=T===void 0?b:T,O=S.value,D=O===void 0?"":O,N=I==="circle",C=" ";if(I==="polygon"){var P=dd(D||"0% 0%, 100% 0%, 100% 100%, 0% 100%");C=",";var R=P.map(function(gt){var Nt=le(gt.split(" "),2),St=Nt[0],it=Nt[1];return{vertical:1,horizontal:1,pos:[en(St,e),en(it,n)]}}),j=Ld(R.map(function(gt){return gt.pos}));return{type:I,clipText:b,poses:R,splitter:C,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(N||I==="ellipse"){var L="",B="",z=0,W=0,P=Zc(D);if(N){var Z="";a=le(P,4),s=a[0],Z=s===void 0?"50%":s,o=a[2],L=o===void 0?"50%":o,c=a[3],B=c===void 0?"50%":c,z=en(Z,Math.sqrt((e*e+n*n)/2)),W=z}else{var G="",Y="";u=le(P,5),f=u[0],G=f===void 0?"50%":f,h=u[1],Y=h===void 0?"50%":h,g=u[3],L=g===void 0?"50%":g,v=u[4],B=v===void 0?"50%":v,z=en(G,e),W=en(Y,n)}var Q=[en(L,e),en(B,n)],R=De([{vertical:1,horizontal:1,pos:Q,direction:"nesw"}],le(wwe.slice(0,N?1:2).map(function(St){return{vertical:Pe(St[1]),horizontal:St[0],direction:St[2],sub:!0,pos:[Q[0]+St[0]*z,Q[1]+St[1]*W]}})),!1);return{type:I,clipText:b,radiusX:z,radiusY:W,left:Q[0]-z,top:Q[1]-W,right:Q[0]+z,bottom:Q[1]+W,poses:R,splitter:C}}else if(I==="inset"){var P=Zc(D||"0 0 0 0"),J=P.indexOf("round"),te=(J>-1?P.slice(0,J):P).length,U=P.slice(te+1),X=le(P.slice(0,te),4),re=X[0],K=X[1],ue=K===void 0?re:K,ne=X[2],oe=ne===void 0?re:ne,_e=X[3],ae=_e===void 0?ue:_e,ge=le([re,oe].map(function(St){return en(St,n)}),2),fe=ge[0],ee=ge[1],Ae=le([ae,ue].map(function(St){return en(St,e)}),2),Ie=Ae[0],Re=Ae[1],Le=e-Re,Be=n-ee,nt=KW(U,Le-Ie,Be-fe,Ie,fe),R=De(De([],le(e1(fe,Le,Be,Ie)),!1),le(nt),!1);return{type:"inset",clipText:b,poses:R,top:fe,left:Ie,right:Le,bottom:Be,radius:U,splitter:C}}else if(I==="rect"){var P=dd(D||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));C=",";var Ee=le(P.map(function(_n){var ct=k0(_n).value;return ct}),4),je=Ee[0],Re=Ee[1],ee=Ee[2],Ie=Ee[3],R=e1(je,Re,ee,Ie);return{type:"rect",clipText:b,poses:R,top:je,right:Re,bottom:ee,left:Ie,values:P,splitter:C}}}}}function Swe(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(z){return z==="w"||z==="e"}),h=u.filter(function(z){return z==="n"||z==="s"}),g=f[0],v=h[0];c[e]=n;var b=le(WW(t),2),x=b[0],w=b[1],S=x&&w?x/w:0;if(S&&i){var T=(e+4)%8,I=t[T].pos,O=[0,0];s.indexOf("w")>-1?O[0]=-1:s.indexOf("e")>-1&&(O[0]=1),s.indexOf("n")>-1?O[1]=-1:s.indexOf("s")>-1&&(O[1]=1);var D=VW([x,w],n,S,O,!0),N=x+D[0],C=w+D[1],P=I[1],R=I[1],j=I[0],L=I[0];O[0]===-1?j=L-N:O[0]===1?L=j+N:(j=j-N/2,L=L+N/2),O[1]===-1?P=R-C:(O[1]===1||(P=R-C/2),R=P+C);var B=e1(P,L,R,j);t.forEach(function(z,W){c[W][0]=B[W].pos[0]-z.pos[0],c[W][1]=B[W].pos[1]-z.pos[1]})}else t.forEach(function(z,W){var Z=z.direction;Z&&(Z.indexOf(g)>-1&&(c[W][0]=n[0]),Z.indexOf(v)>-1&&(c[W][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),v&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(z){var W=z==="n"||z==="s";t.forEach(function(Z,G){var Y=Z.direction,Q=Z.horizontal,J=Z.vertical;!Y||Y.indexOf(z)===-1||(c[G]=[W||!Q?0:n[0],!W||!J?0:n[1]])})}):c[e]=n;return c}function Ewe(t,e){var n=le(ZK(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var v=mwe.indexOf(o),b=vwe.indexOf(o),x=f.length;if(bwe(f,g,8,v,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=c2(t,s,g),S="".concat(u,"(").concat(w.join(h),")");Ve(t,"onClip",ft(t,e,se({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:S,distX:0,distY:0},vi({clipPath:S},e))))}function Twe(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(v){return v.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(ywe(o,u,i,8,f),f===o.length))return}else return;var h=c2(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Ve(t,"onClip",ft(t,e,se({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},vi({clipPath:g},e))))}var Awe={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,v=c.is3d,b=c.left,x=c.top,w=c.pos1,S=c.pos2,T=c.pos3,I=c.pos4,O=c.clipPathState,D=c.snapBoundInfos,N=c.rotation;if(!u||o)return[];var C=lB(u,f,h,i||"inset",O||r);if(!C)return[];var P=v?4:3,R=C.type,j=C.poses,L=j.map(function(Re){var Le=An(g,Re.pos,P);return[Le[0]-b,Le[1]-x]}),B=[],z=[],W=R==="rect",Z=R==="inset",G=R==="polygon";if(W||Z||G){var Y=Z?L.slice(0,8):L;z=Y.map(function(Re,Le){var Be=Le===0?Y[Y.length-1]:Y[Le-1],nt=Kn(Be,Re),Ee=PW(Be,Re);return e.createElement("div",{key:"clipLine".concat(Le),className:Ye("line","clip-line","snap-control"),"data-clip-index":Le,style:{width:"".concat(Ee,"px"),transform:"translate(".concat(Be[0],"px, ").concat(Be[1],"px) rotate(").concat(nt,"rad) scaleY(").concat(s,")")}})})}if(B=L.map(function(Re,Le){return e.createElement("div",{key:"clipControl".concat(Le),className:Ye("control","clip-control","snap-control"),"data-clip-index":Le,style:{transform:"translate(".concat(Re[0],"px, ").concat(Re[1],"px) rotate(").concat(N,"rad) scale(").concat(s,")")}})}),Z&&B.push.apply(B,De([],le(L.slice(8).map(function(Re,Le){return e.createElement("div",{key:"clipRadiusControl".concat(Le),className:Ye("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Le,style:{transform:"translate(".concat(Re[0],"px, ").concat(Re[1],"px) rotate(").concat(N,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var Q=C.left,J=C.top,te=C.radiusX,U=C.radiusY,X=le(Ze(An(g,[Q,J],P),An(g,[0,0],P)),2),re=X[0],K=X[1],ue="none";if(!a){for(var ne=Math.max(10,te/5,U/5),oe=[],_e=0;_e<=ne;++_e){var ae=Math.PI*2/ne*_e;oe.push([te+(te-s)*Math.cos(ae),U+(U-s)*Math.sin(ae)])}oe.push([te,-2]),oe.push([-2,-2]),oe.push([-2,U*2+2]),oe.push([te*2+2,U*2+2]),oe.push([te*2+2,-2]),oe.push([te,-2]),ue="polygon(".concat(oe.map(function(Re){return"".concat(Re[0],"px ").concat(Re[1],"px")}).join(", "),")")}B.push(e.createElement("div",{key:"clipEllipse",className:Ye("clip-ellipse","snap-control"),style:{width:"".concat(te*2,"px"),height:"".concat(U*2,"px"),clipPath:ue,transform:"translate(".concat(-b+re,"px, ").concat(-x+K,"px) ").concat(W_(g))}}))}if(a){var ge=Ua(De([w,S,T,I],le(L),!1)),fe=ge.width,ee=ge.height,Ae=ge.left,Ie=ge.top;if(G||W||Z){var oe=Z?L.slice(0,8):L;B.push(e.createElement("div",{key:"clipArea",className:Ye("clip-area","snap-control"),style:{width:"".concat(fe,"px"),height:"".concat(ee,"px"),transform:"translate(".concat(Ae,"px, ").concat(Ie,"px)"),clipPath:"polygon(".concat(oe.map(function(Le){return"".concat(Le[0]-Ae,"px ").concat(Le[1]-Ie,"px")}).join(", "),")")}}))}}return D&&["vertical","horizontal"].forEach(function(Re){var Le=D[Re],Be=Re==="horizontal";Le.isSnap&&z.push.apply(z,De([],le(Le.snap.posInfos.map(function(nt,Ee){var je=nt.pos,gt=Ze(An(g,Be?[0,je]:[je,0],P),[b,x]),Nt=Ze(An(g,Be?[f,je]:[je,h],P),[b,x]);return Mv(e,"",gt,Nt,s,"clip".concat(Re,"snap").concat(Ee),"guideline")})),!1)),Le.isBound&&z.push.apply(z,De([],le(Le.bounds.map(function(nt,Ee){var je=nt.pos,gt=Ze(An(g,Be?[0,je]:[je,0],P),[b,x]),Nt=Ze(An(g,Be?[f,je]:[je,h],P),[b,x]);return Mv(e,"",gt,Nt,s,"clip".concat(Re,"bounds").concat(Ee),"guideline","bounds","bold")})),!1))}),De(De([],le(B),!1),le(z),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,se(se({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=lB(s,o,c,i||"inset",a);if(!g)return!1;var v=g.clipText,b=g.type,x=g.poses,w=Ve(t,"onClipStart",ft(t,e,{clipType:b,clipStyle:v,poses:x.map(function(S){return S.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=v,ef(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,v=c.clipPath;if(!v)return!1;var b=Vd(t.props,"clippable"),x=b.keepRatio,w=0,S=0,T=s.draggable,I=Ao(e);o&&T?(n=le(T.prevBeforeDist,2),w=n[0],S=n[1]):(r=le(I,2),w=r[0],S=r[1]);var O=[w,S],D=t.state,N=D.width,C=D.height,P=!h&&!u&&!f,R=v.type,j=v.poses,L=v.splitter,B=j.map(function(bt){return bt.pos});P&&(w=-w,S=-S);var z=!u||j[g].direction==="nesw",W=R==="inset"||R==="rect",Z=j.map(function(){return[0,0]});if(u&&!z){var G=j[g],Y=G.horizontal,Q=G.vertical,J=[w*Pe(Y),S*Pe(Q)];Z=Swe(j,g,J,W,x)}else z&&(Z=B.map(function(){return[w,S]}));var te=B.map(function(bt,En){return Pt(bt,Z[En])}),U=De([],le(te),!1);D.snapBoundInfos=null;var X=v.type==="circle",re=v.type==="ellipse";if(X||re){var K=Ua(te),ue=Pe(K.bottom-K.top),ne=Pe(re?K.right-K.left:ue),oe=te[0][1]+ue,_e=te[0][0]-ne,ae=te[0][0]+ne;X&&(U.push([ae,K.bottom]),Z.push([1,0])),U.push([K.left,oe]),Z.push([0,1]),U.push([_e,K.bottom]),Z.push([1,0])}var ge=EW((b.clipHorizontalGuidelines||[]).map(function(bt){return en("".concat(bt),C)}),(b.clipVerticalGuidelines||[]).map(function(bt){return en("".concat(bt),N)}),N,C),fe=[],ee=[];if(X||re)fe=[U[4][0],U[2][0]],ee=[U[1][1],U[3][1]];else if(W){var Ae=[U[0],U[2],U[4],U[6]],Ie=[Z[0],Z[2],Z[4],Z[6]];fe=Ae.filter(function(bt,En){return Ie[En][0]}).map(function(bt){return bt[0]}),ee=Ae.filter(function(bt,En){return Ie[En][1]}).map(function(bt){return bt[1]})}else fe=U.filter(function(bt,En){return Z[En][0]}).map(function(bt){return bt[0]}),ee=U.filter(function(bt,En){return Z[En][1]}).map(function(bt){return bt[1]});var Re=[0,0],Le=HV(ge,b.clipTargetBounds&&{left:0,top:0,right:N,bottom:C},fe,ee,5,5),Be=Le.horizontal,nt=Le.vertical,Ee=Be.offset,je=nt.offset;if(Be.isBound&&(Re[1]+=Ee),nt.isBound&&(Re[0]+=je),(re||X)&&Z[0][0]===0&&Z[0][1]===0){var K=Ua(te),gt=K.bottom-K.top,Nt=re?K.right-K.left:gt,St=nt.isBound?Pe(je):nt.snapIndex===0?-je:je,it=Be.isBound?Pe(Ee):Be.snapIndex===0?-Ee:Ee;Nt-=St,gt-=it,X&&(gt=mW(nt,Be)>0?gt:Nt,Nt=gt);var vt=U[0];U[1][1]=vt[1]-gt,U[2][0]=vt[0]+Nt,U[3][1]=vt[1]+gt,U[4][0]=vt[0]-Nt}else if(W&&x&&u){var _n=le(WW(j),2),ct=_n[0],Vn=_n[1],Sn=ct&&Vn?ct/Vn:0,jr=j[g],Si=jr.direction||"",Ds=U[1][1],oe=U[5][1],_e=U[7][0],ae=U[3][0];Pe(Ee)<=Pe(je)?Ee=pi(Ee)*Pe(je)/Sn:je=pi(je)*Pe(Ee)*Sn,Si.indexOf("w")>-1?_e-=je:Si.indexOf("e")>-1?ae-=je:(_e+=je/2,ae-=je/2),Si.indexOf("n")>-1?Ds-=Ee:Si.indexOf("s")>-1?oe-=Ee:(Ds+=Ee/2,oe-=Ee/2);var Xr=e1(Ds,ae,oe,_e);U.forEach(function(Gi,ba){var ci;ci=le(Xr[ba].pos,2),Gi[0]=ci[0],Gi[1]=ci[1]})}else U.forEach(function(bt,En){var Tn=Z[En];Tn[0]&&(bt[0]-=je),Tn[1]&&(bt[1]-=Ee)});var Nn=c2(t,v,te),Wn="".concat(R,"(").concat(Nn.join(L),")");if(D.clipPathState=Wn,X||re)fe=[U[4][0],U[2][0]],ee=[U[1][1],U[3][1]];else if(W){var Ae=[U[0],U[2],U[4],U[6]];fe=Ae.map(function(En){return En[0]}),ee=Ae.map(function(En){return En[1]})}else fe=U.map(function(bt){return bt[0]}),ee=U.map(function(bt){return bt[1]});if(D.snapBoundInfos=HV(ge,b.clipTargetBounds&&{left:0,top:0,right:N,bottom:C},fe,ee,1,1),T){var zt=D.is3d,Ei=D.allMatrix,ya=zt?4:3,Ll=Re;o&&(Ll=[O[0]+Re[0]-I[0],O[1]+Re[1]-I[1]]),T.deltaOffset=tn(Ei,[Ll[0],Ll[1],0,0],ya)}return Ve(t,"onClip",ft(t,e,se({clipEventType:"changed",clipType:R,poses:te,clipStyle:Wn,clipStyles:Nn,distX:w,distY:S},vi((i={},i[R==="rect"?"clip":"clipPath"]=Wn,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Ve(t,"onClipEnd",pa(t,e,{})),i&&(o?Twe(t,e):a&&Ewe(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},kwe={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":gr(e.inputEvent.target,Ye("origin"))},dragControlStart:function(t,e){var n=e.datas;ef(t,e);var r=ft(t,e,{dragStart:hi.dragStart(t,new hp().dragStart([0,0],e))}),i=Ve(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=le(Ao(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,v=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=v?4:3,S=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(S=T)}var I=Pt(n.startOrigin,S),O=Pt(n.startTargetOrigin,S),D=Ze(S,n.prevOrigin),N=j0(h,g,I,w),C=t.getRect(),P=Ua(tf(N,u,f,w)),R=[C.left-P.left,C.top-P.top];n.prevOrigin=S;var j=[hs(O[0],u,x),hs(O[1],f,x)].join(" "),L=hi.drag(t,M0(e,t.state,R,!!r)),B=ft(t,e,se(se({width:u,height:f,origin:I,dist:S,delta:D,transformOrigin:j,drag:L},vi({transformOrigin:j,transform:L.transform},e)),{afterTransform:L.transform}));return Ve(t,"onDragOrigin",B),B},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Ve(t,"onDragOriginEnd",pa(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Cwe(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];Iwe(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function Iwe(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function Pwe(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function cB(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Zc(t),KW(a,e,n,0,0,r,i)}function uB(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=l2(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=xwe(h,u),v=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=ft(t,e,se({horizontals:v,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},vi({borderRadius:x},e)));return Ve(t,"onRound",w),w}function dB(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=r2(s).borderRadius,r.borderRadius=i))}return i}var Nwe={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Ye("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,v=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,S=h.roundPadding,T=S===void 0?0:S,I=h.isDisplayShadowRoundControls,O=h.groupable;if(!r)return null;var D=f||dB(t),N=o?4:3,C=cB(D,i,a,v,!0);if(!C)return null;var P=0,R=0,j=O?[0,0]:[c,u];return C.map(function(L,B){var z=L.horizontal,W=L.vertical,Z=L.direction||"",G=De([],le(L.pos),!1);R+=Math.abs(z),P+=Math.abs(W),z&&Z.indexOf("n")>-1&&(G[1]-=T),W&&Z.indexOf("w")>-1&&(G[0]-=T),z&&Z.indexOf("s")>-1&&(G[1]+=T),W&&Z.indexOf("e")>-1&&(G[0]+=T);var Y=Ze(An(s,G,N),j),Q=I&&I!=="horizontal",J=L.vertical?P<=x[1]&&(Q||!L.virtual):R<=x[0]&&(I||!L.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(B),className:Ye("control","border-radius",L.vertical?"vertical":"",L.virtual?"virtual":""),"data-radius-index":B,style:{display:J?"block":"none",transform:"translate(".concat(Y[0],"px, ").concat(Y[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=ft(t,e,{}),g=Ve(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,ef(t,e);var v=t.props,b=v.roundRelative,x=v.minRoundControls,w=x===void 0?[0,0]:x,S=t.state,T=S.width,I=S.height;r.isRound=!0,r.prevDist=[0,0];var O=dB(t),D=cB(O||"",T,I,w,!0)||[];return r.controlPoses=D,S.borderRadiusState=l2(D,b,T,I).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=le(Ao(e),2),s=a[0],o=a[1],c=[s,o],u=Ze(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,v=g.width,b=g.height,x=r[i],w=x.vertical,S=x.horizontal,T=r.map(function(O){var D=O.horizontal,N=O.vertical,C=[D*S*c[0],N*w*c[1]];if(D){if(h[0]===1)return C;if(h[0]<4&&D!==S)return C}else{if(h[1]===0)return C[1]=N*S*c[0]/v*b,C;if(w){if(h[1]===1)return C;if(h[1]<4&&N!==w)return C}}return[0,0]});T[i]=c;var I=r.map(function(O,D){return se(se({},O),{pos:Pt(O.pos,T[D])})});return i<4?I.slice(0,i+1).forEach(function(O){O.virtual=!1}):I.slice(4,i+1).forEach(function(O){O.virtual=!1}),n.prevDist=[s,o],uB(t,e,c,u,I)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(S){var T=S.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))Pwe(u,s);else if(o&&(g===!0||g==="line")){var v=le(ZK(t,e),2),b=v[0],x=v[1];Cwe(u,c,b,x)}f!==u.filter(function(S){var T=S.virtual;return T}).length&&uB(t,e,[0,0],[0,0],u)}var w=pa(t,e,{});return Ve(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=_s(t,"roundable",e),s=se({targets:t.props.targets,events:a.map(function(o,c){return se(se({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Ve(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=_s(t,"roundable",e),s=se({targets:t.props.targets,events:a.map(function(o,c){return se(se(se({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),vi({borderRadius:n.borderRadius},o))})},n);return Ve(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=_s(t,"roundable",e);Y_(t,"onRound",function(o){var c=se({targets:t.props.targets,events:i.map(function(u,f){return se(se(se({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),vi({borderRadius:o.borderRadius},u))})},o);Ve(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=se({targets:t.props.targets,events:i.map(function(o,c){var u;return se(se({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Ve(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function Dwe(t,e){var n=e?4:3,r=fn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var YW={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(VK(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=Dwe(o,r)?[]:Zc(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ft(t,e,{setTransform:function(n){e.datas.startTransforms=ur(n)?n:Zc(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ft(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRender",ft(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Ve(t,"onBeforeRenderEnd",ft(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=_s(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Ve(t,"onBeforeRenderGroupStart",ft(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=_s(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Ve(t,"onBeforeRenderGroup",ft(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Ve(t,"onBeforeRenderGroupEnd",ft(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},XW={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Ve(t,"onRenderStart",ft(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Ve(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Ve(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Ve(t,"onRenderGroupStart",ft(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=_s(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Ve(t,"onRenderGroup",ft(t,e,se(se({isPinch:!!e.isPinch,targets:t.props.targets,transform:Zb(e),transformObject:{}},vi(Jb(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=_s(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Ve(t,"onRenderGroupEnd",ft(t,e,se({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Zb(e)},vi(Jb(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return fp(Kw(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ft(t,e,se({isPinch:!!e.isPinch,transformObject:n,transform:Zb(e)},vi(Jb(e))))},fillDragEndParams:function(t,e){var n={};return fp(Kw(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ft(t,e,se({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Zb(e)},vi(Jb(e))))}};function rv(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var v=De([],le(e),!1);if(h){var b=a.requestAble;v.some(function(B){return B.name===b})||v.push.apply(v,De([],le(t.props.ables.filter(function(B){return B.name===b})),!1))}if(!v.length||v.every(function(B){return B.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var S=!1,T=function(){var B;S=!0,(B=a.stop)===null||B===void 0||B.call(a)},I=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());I&&t.updateRect(i,!0,!1);var O=a.datas,D=g?"controlGesto":"targetGesto",N=t[D],C=function(B,z,W){if(!(z in B)||N!==t[D])return!1;var Z=B.name,G=O[Z]||(O[Z]={});if(o&&(G.isEventStart=!W||!B[W]||B[W](t,a)),!G.isEventStart)return!1;var Y=B[z](t,se(se({},a),{stop:T,datas:G,originalDatas:O,inputTarget:w}));return t._emitter.off(),o&&Y===!1&&(G.isEventStart=!1),Y};I&&v.forEach(function(B){B.unset&&B.unset(t)}),C(YW,"drag".concat(r).concat(i));var P=0,R=0;n.forEach(function(B){if(S)return!1;var z="".concat(B).concat(r).concat(i),W="".concat(B).concat(r,"Condition");i===""&&!h&&twe(t.state,a);var Z=v.filter(function(Q){return Q[z]});Z=Z.filter(function(Q,J){return Q.name&&Z.indexOf(Q)===J});var G=Z.filter(function(Q){return C(Q,z,W)}),Y=G.length;S&&++P,Y&&++R,!S&&o&&Z.length&&!Y&&(P+=Z.filter(function(Q){var J=Q.name,te=O[J];return te.isEventStart?Q.dragRelation!=="strong":!1}).length?1:0)}),(!u||R)&&C(XW,"drag".concat(r).concat(i));var j=N!==t[D]||P===n.length;if((c||S||j)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(B){B.state.gestos={}}),v.forEach(function(B){B.unset&&B.unset(t)})),o&&!j&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||j)return!1;if(!o&&R&&!s||c){var L=t.props.flushSync||kW;L(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&R&&!s&&rv(t,e,n,r,i+"After",a),!0}function u2(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||gr(a,"moveable-area")||gr(a,"moveable-padding")||gr(a,"moveable-edgeDraggable")}}function QW(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=u2(t);return JW(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function ZW(t,e){var n=t.controlBox,r=[];r.push(n);var i=u2(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return JW(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function JW(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,v=s.preventDefault,b=v===void 0?!0:v,x=s.preventRightClick,w=x===void 0?!0:x,S=s.preventWheelClick,T=S===void 0?!0:S,I=s.dragContainer,O=mo(I,!0),D={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:O||Uc(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(P){return t.controlBox.contains(P.target)},checkInput:a?h:!1,dragFocusedInput:g},N=new abe(e,D),C=r==="Control";return["drag","pinch"].forEach(function(P){["Start","","End"].forEach(function(R){N.on("".concat(P).concat(R),function(j){var L,B=j.eventType,z=P==="drag"&&j.isPinch;if(i[B]&&!i[B](j)){j.stop();return}if(!z){var W=P==="drag"?[P]:["drag",P],Z=De([],le(t[n]),!1),G=rv(t,Z,W,r,R,j);G?(t.props.stopPropagation||R==="Start"&&C)&&((L=j?.inputEvent)===null||L===void 0||L.stopPropagation()):j.stop()}})})}),N}var Owe=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function Rwe(t,e,n,r){var i;n===void 0&&(n=e);var a=iW(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,v=a.zoom,b=Wbe(h,n),x=b.matrixes,w=b.is3d,S=b.offsetContainer,T=b.zoom,I=r,O=4,D=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,N=c,C=fn(O),P=fn(O),R=fn(O),j=fn(O),L=s.length,B=x.map(function(J){return se(se({},J),{matrix:J.matrix?De([],le(J.matrix),!1):void 0})}).reverse();s.reverse(),!o&&I&&(N=As(N,3,4),gP(s)),!w&&I&&gP(B),B.forEach(function(J){P=tn(P,J.matrix,O)});var z=n||du(t),W=((i=B[0])===null||i===void 0?void 0:i.target)||jv(z,z,!0).offsetParent,Z=B.slice(1).reduce(function(J,te){return tn(J,te.matrix,O)},fn(O));s.forEach(function(J,te){if(L-2===te&&(R=C.slice()),L-1===te&&(j=C.slice()),!J.matrix){var U=s[te+1],X=Qxe(J,U,W,O,tn(Z,C,O));J.matrix=zd(X,O)}C=tn(C,J.matrix,O)});var G=!D&&o;N||(N=fn(G?4:3));var Y=W_(D&&N.length===16?As(N,4,3):N,G),Q=P;return P=zK(P,O,O),{hasZoom:v!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:P,originalRootMatrix:Q,beforeMatrix:R,offsetMatrix:j,allMatrix:C,targetMatrix:N,targetTransform:Y,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:I,offsetContainer:h,offsetRootContainer:S}}function Mwe(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=NW(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=Rwe(t,e,n,r),f=Lh(u.allMatrix,u.transformOrigin,i,a);o=se(se({},u),f);var h=Lh(u.allMatrix,[50,50],100,100);s=DW([h.pos1,h.pos2],h.direction)}var g=4;return se(se(se({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:fn(g),rootMatrix:fn(g),beforeMatrix:fn(g),offsetMatrix:fn(g),allMatrix:fn(g),targetMatrix:fn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function bP(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=tx(),u=tx(),f=tx(),h=tx(),g=[0,0],v={},b=Mwe(e,n,i,!0);if(e){var x=$i(e);a.forEach(function(B){v[B]=x(B)});var w=b.is3d?4:3,S=Lh(b.offsetMatrix,Pt(b.transformOrigin,LK(b.targetMatrix,w)),b.width,b.height);s=S.direction,o=Pt(S.origin,[S.left-b.left,S.top-b.top]),h=nv(b.offsetRootContainer);var T=jv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var I=Lh(tn(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),O=Lh(b.originalRootMatrix,Qw($i(T)("transformOrigin")).map(function(B){return parseFloat(B)}),T.offsetWidth,T.offsetHeight);if(c=WA(I,h),f=WA(O,h,T,!0),t){var D=I.left,N=I.top;u=WA({left:D,top:N,bottom:N,right:N},h)}}else{c=nv(e),f=Kbe(T),t&&(u=nv(t));var C=f.left,P=f.top,R=f.clientLeft,j=f.clientTop,L=[c.left-C,c.top-P];g=Ze(mp(b.rootMatrix,L,4),[R+b.left,j+b.top])}}return se({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:g},b)}function fB(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Ld([e,n,r,i]),s=[a.minX,a.minY],o=Ze(t.origin,s);return e=Ze(e,s),n=Ze(n,s),r=Ze(r,s),i=Ze(i,s),se(se({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var vp=(function(t){O0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=se({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},bP(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new B_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}X0e(n._observerId),n._observerId=dK(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,v=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=le(i||[0,0],2),x=b[0],w=b[1],S=r.left,T=r.top,I=r.target,O=r.direction,D=r.hasFixed,N=r.offsetDelta,C=n.targets,P=this.isDragging(),R={};this.getEnabledAbles().forEach(function(Z){R["data-able-".concat(Z.name.toLowerCase())]=!0});var j=this._getAbleClassName(),L=C&&C.length&&(I||h)||s||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,z=[S-x,T-w];!h&&n.useAccuratePosition&&(z[0]+=N[0],z[1]+=N[1]);var W={position:D?"fixed":"absolute",display:L?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(z[0],"px, ").concat(z[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(W["--moveable-line-padding"]=g),v&&(W["--moveable-control-padding"]=v),ws(f,se({cspNonce:c,ref:sl(this,"controlBox"),className:"".concat(Ye("control-box",O===-1?"reverse":"",P?"dragging":"")," ").concat(j," ").concat(a)},R,{onClick:this._onPreventClick,style:W}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Ah(this,!1),Ah(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Ui(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(GO)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&u2(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if($p(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=se({width:0,height:0},n);var g=f.left,v=f.top,b=f.width,x=f.height,w=MV([a,s,c,o],u),S=Jye(w,[[g,v],[g+b,v],[g+b,v+x],[g,v+x]]),T=UK(w);return!S||!T?0:Math.min(100,S/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?nP([n,r],MV([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&pp(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=bP(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var v=fB(a.persistData);for(var b in v)g[b]=v[b]}s&&pp(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Ga(this.state),i=le(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=Ua(r),f=n.width,h=n.height,g=u.width,v=u.height,b=u.left,x=u.top,w=[n.left,n.top],S=Pt(w,n.origin),T=Pt(w,n.beforeOrigin),I=n.transformOrigin;return{width:g,height:v,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:S,transformOrigin:I,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&mP(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&mP(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return iwe(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=Ui(c,function(S){return S.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,v=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=De([],le(o[v]),!1),w={request:function(S){return rv(a,x,["drag"],b,"",se(se({},h.request(S)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return rv(a,x,["drag"],b,"End",se(se({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return rv(a,x,["drag"],b,"Start",se(se({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,v=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var S=UW(i||{}),T=S.left,I=S.top,O=S.bottom,D=S.right,N=c?4:3,C=[];x?C=s:this.controlBox&&r.groupable?C=a:C=Pt(a,[v,b]);var P=Gw(N,zd(C.map(function(W){return-W}),N),o,zd(s,N)),R=Oa(P,u,[-T,-I],N),j=Oa(P,f,[D,-I],N),L=Oa(P,h,[-T,O],N),B=Oa(P,g,[D,O],N);n.renderPoses=[R,j,L,B],n.renderLines=[[R,j],[j,B],[B,L],[L,R]];{var z=w/2;n.renderLines=[[Oa(P,u,[-T-z,-I],N),Oa(P,f,[D+z,-I],N)],[Oa(P,f,[D,-I-z],N),Oa(P,g,[D,O+z],N)],[Oa(P,g,[D+z,O],N),Oa(P,h,[-T-z,O],N)],[Oa(P,h,[-T,O+z],N),Oa(P,u,[-T,-I-z],N)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!vP(o,r),f=u||!vP(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=GK(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=fB(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=nx(s,[o,c],a),h=nx(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:ws};return this.renderState={},ewe(LW(nx(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return De(De([],le(r),!1),le(o),!1)},De([],le(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Ah(this,!1),this.updateState({gestos:{}})),r||Ah(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=QW(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=ZW(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=mo(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:ws};return c.renderLines.map(function(f,h){return Mv(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=wl(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=nx(u,[f]),g=h.length>0,v=a[f];if(!g){v&&(v.destroy(),a[f]=null);return}v||(v=new Owe(i,n,f),a[f]=v),v.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=mo(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=mo(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(De(De([],le(this._getAbleViewClassNames()),!1),[this.isDragging()?dwe:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=zW(n.filter(Boolean),function(u){return u}).map(function(u){var f=le(u,1),h=f[0];return h}),a=this._viewClassNames,s=C0(a,i),o=s.removed,c=s.added;o.forEach(function(u){mK(r,a[u])}),c.forEach(function(u){gK(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,v=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[v])===null||h===void 0)&&h.isEventStart||!((g=c[v])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Ye("".concat(v).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=Uc(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=Uc(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=mbe(u),v=g.next();!v.done;v=g.next()){var b=v.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:kW,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(SK),d2={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=kh(t,"parentPosition",[s,o],function(b){return b.join(",")}),v=kh(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),De(De([],le(i.map(function(b,x){return e.createElement(vp,{key:"moveable"+x,ref:oK(t,"moveables",x),target:b,origin:!1,requestStyles:v,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),le(LW(f.map(function(b,x){var w=b.pos1,S=b.pos2,T=b.pos3,I=b.pos4,O=[w,S,T,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(D,N){var C=le(D,2),P=C[0],R=C[1];return Mv(e,"",Ze(O[P],g),Ze(O[R],g),u,"group-rect-".concat(x,"-").concat(N))})}))),!1)}},jwe=R0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Ve(t,"onClick",ft(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=xl(i,function(c){return c.contains(r)}),o=a>-1),Ve(t,"onClickGroup",ft(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function eh(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),se(se({},t),{datas:e})}var zwe=R0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?oW(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&gr(i,Ye("direction"))&&gr(i,Ye("edge"))&&gr(i,Ye("edgeDraggable"))},dragStart:function(t,e){return hi.dragStart(t,eh(e))},drag:function(t,e){return hi.drag(t,eh(e))},dragEnd:function(t,e){return hi.dragEnd(t,eh(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&gr(i,Ye("direction"))&&gr(i,Ye("line"))},dragGroupStart:function(t,e){return hi.dragGroupStart(t,eh(e))},dragGroup:function(t,e){return hi.dragGroup(t,eh(e))},dragGroupEnd:function(t,e){return hi.dragGroupEnd(t,eh(e))},unset:function(t){return hi.unset(t)}}),eY={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},f2=[YW,GW,Fxe,swe,hi,zwe,fP,owe,cwe,Sxe,pwe,gwe,fwe,kwe,Awe,Nwe,d2,eY,jwe,qW,XW],Lwe=f2.reduce(function(t,e){return(e.events||[]).forEach(function(n){pK(t,n)}),t},[]),Vwe=f2.reduce(function(t,e){return(e.props||[]).forEach(function(n){pK(t,n)}),t},[]);function hB(t,e){var n=le(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function ax(t,e){var n=le(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function pB(t,e){return Math.max.apply(Math,De([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function gB(t,e){return Math.min.apply(Math,De([],le(t.map(function(n){var r=le(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function Bwe(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=ot(e,xi);if(h%90){var g=h/180*Math.PI,v=Math.tan(g),b=-1/v,x=[lP,LV],w=[[0,0],[0,0]],S=[lP,LV],T=[[0,0],[0,0]];t.forEach(function(re){re.forEach(function(K){var ue=hB([-v,1,0],K),ne=hB([-b,1,0],K);x[0]>ue&&(w[0]=K,x[0]=ue),x[1]<ue&&(w[1]=K,x[1]=ue),S[0]>ne&&(T[0]=K,S[0]=ne),S[1]<ne&&(T[1]=K,S[1]=ne)})});var I=le(w,2),O=I[0],D=I[1],N=le(T,2),C=N[0],P=N[1],R=[-v,1,ax([-v,1],O)],j=[-v,1,ax([-v,1],D)],L=[-b,1,ax([-b,1],C)],B=[-b,1,ax([-b,1],P)];n=le([[R,L],[R,B],[j,L],[j,B]].map(function(re){var K=le(re,2),ue=K[0],ne=K[1];return $O(ue,ne)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=S[1]-S[0],f=x[1]-x[0]}else{var z=gB(t,0),W=gB(t,1),Z=pB(t,0),G=pB(t,1);if(a=[z,W],s=[Z,W],o=[z,G],c=[Z,G],u=Z-z,f=G-W,h%180){var Y=[o,a,c,s];r=le(Y,4),a=r[0],s=r[1],o=r[2],c=r[3],u=G-W,f=Z-z}}if(h%360>180){var Y=[c,o,s,a];i=le(Y,4),a=i[0],s=i[1],o=i[2],c=i[3]}var Q=Ld([a,s,o,c]),J=Q.minX,te=Q.minY,U=Q.maxX,X=Q.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:J,minY:te,maxX:U,maxY:X,rotation:e}}function tY(t,e){var n=e.map(function(r){if(ur(r)){var i=tY(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=Ui(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&ur(n[0])?n[0]:n}var Fwe=(function(t){O0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new FK,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;pp(!0),this.moveables.forEach(function(_e){_e.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(_e){return{finded:!1,manager:_e}}),h=this.props.targetGroups||[],g=tY(f,h),v=o.useDefaultGroupRotate;g.push.apply(g,De([],le(f.filter(function(_e){var ae=_e.finded;return!ae}).map(function(_e){var ae=_e.manager;return ae})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=(a=o.persistData)===null||a===void 0?void 0:a.rotation;S!=null&&(w=S)}function T(_e,ae,ge){var fe=_e.map(function(nt){if(ur(nt)){var Ee=T(nt,ae),je=[Ee.pos1,Ee.pos2,Ee.pos3,Ee.pos4];return b.push(Ee),{poses:je,rotation:Ee.rotation}}else return{poses:Ga(nt.state),rotation:nt.getRotation()}}),ee=fe.map(function(nt){var Ee=nt.rotation;return Ee}),Ae=0,Ie=ee[0],Re=ee.every(function(nt){return Math.abs(Ie-nt)<.1});x?Ae=!v&&Re?Ie:w:Ae=!v&&!ge&&Re?Ie:ae;var Le=fe.map(function(nt){var Ee=nt.poses;return Ee}),Be=Bwe(Le,Ae);return Be}var I=T(g,this.rotation,!0);x&&(this.rotation=I.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var O=this.transformOrigin,D=this.rotation,N=this.scale,C=I.width,P=I.height,R=I.minX,j=I.minY,L=awe([[0,0],[C,0],[0,P],[C,P]],o2(O,C,P),this.rotation/180*Math.PI),B=Ld(L.result),z=B.minX,W=B.minY,Z=" rotate(".concat(D,"deg)")+" scale(".concat(pi(N[0]),", ").concat(pi(N[1]),")"),G="translate(".concat(-z,"px, ").concat(-W,"px)").concat(Z);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(O,";")+"width:".concat(C,"px;height:").concat(P,"px;")+"transform: ".concat(G),s.width=C,s.height=P;var Y=this.getContainer(),Q=bP(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),J=[Q.left,Q.top],te=le(Ga(Q),4),U=te[0],X=te[1],re=te[2],K=te[3],ue=Ld([U,X,re,K]),ne=[ue.minX,ue.minY],oe=pi(N[0]*N[1]);Q.pos1=Ze(U,ne),Q.pos2=Ze(X,ne),Q.pos3=Ze(re,ne),Q.pos4=Ze(K,ne),Q.left=R-Q.left+ne[0],Q.top=j-Q.top+ne[1],Q.origin=Ze(Pt(J,Q.origin),ne),Q.beforeOrigin=Ze(Pt(J,Q.beforeOrigin),ne),Q.originalBeforeOrigin=Pt(J,Q.originalBeforeOrigin),Q.transformOrigin=Ze(Pt(J,Q.transformOrigin),ne),u.style.transform="translate(".concat(-z-ne[0],"px, ").concat(-W-ne[1],"px)")+Z,pp(),this.updateState(se(se({},Q),{posDelta:ne,direction:oe,beforeDirection:oe}),i)},e.prototype.getRect=function(){return se(se({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return De(De([],le(r),!1),le(o),!1)},[]);return n},e.prototype.getMoveables=function(){return De([],le(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,De(De([],le(this.props.ables),!1),[d2],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=mo(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Ah(this,!1),Ah(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=QW(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=ZW(this,"GroupControl")));var g=!vP(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!FW(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=se(se({},vp.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(vp),Uwe=(function(t){O0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),ws(s,{cspNonce:a,ref:sl(this,"controlBox"),className:Ye("control-box")},c.map(function(g,v){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,v))!==null&&x!==void 0?x:{};return ws(vp,se({key:"moveable"+v,ref:oK(n,"moveables",v)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[v]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),pp(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),pp()},e.prototype.getRect=function(){return se(se({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,se(se({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Ui(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return De([],le(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(vp);function nY(t,e){var n=[];return t.forEach(function(r){if(r){if(Fi(r)){e[r]&&n.push.apply(n,De([],le(e[r]),!1));return}ur(r)?n.push.apply(n,De([],le(nY(r,e)),!1)):n.push(r)}}),n}function rY(t,e){var n=[];return t.forEach(function(r){if(r){if(Fi(r)){e[r]&&n.push.apply(n,De([],le(e[r]),!1));return}ur(r)?n.push(rY(r,e)):n.push(r)}}),n}function iY(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?ur(n)&&ur(i)?iY(n,i):!0:!1})}var $we=(function(t){O0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new FK,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=wl(n).join(`
`);this.defaultStyled=GK("div",L0e(GO,kbe+i))},e.getTotalAbles=function(){return De([GW,d2,eY,qW],le(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=pbe(i,["ables","props"]),c=le(this._updateRefs(!0),2),u=c[0],f=c[1],h=nY(u,f),g=h.length>1,v=r.getTotalAbles(),b=De(De([],le(v),!1),le(a||[]),!1),x=se(se(se({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,S=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return ws(Uwe,se({key:"individual-group",ref:sl(this,"moveable")},x,{target:null,targets:h}));if(g){var I=rY(u,f);if(S&&!S.props.groupable&&!S.props.individualGroupable){var O=S.props.target;O&&h.indexOf(O)>-1&&(w=se({},S.state))}return ws(Fwe,se({key:"group",ref:sl(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:I,firstRenderState:w}))}else{var D=h[0];if(S&&(S.props.groupable||S.props.individualGroupable)){var N=S.moveables||[],C=Ui(N,function(P){return P.props.target===D});C&&(w=se({},C.state))}return ws(vp,se({key:"single",ref:sl(this,"moveable")},x,{target:D,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=s2(this.props.target||this.props.targets),a=typeof document<"u",s=iY(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(Fi(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else ur(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=le(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,gbe([V0e(QK)],e.prototype,"moveable",void 0),e})(SK),qwe=(function(t){O0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=f2,e})($we),xP=function(t,e){return xP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},xP(t,e)};function h2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");xP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zv=function(){return zv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zv.apply(this,arguments)};function Gwe(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var Hwe=(function(t){h2(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return ws(qwe,zv({ref:sl(this,"moveable")},this.state))},e})(zO),Kwe=Vwe,Wwe=QK,Ywe=Lwe,Xwe=(function(t){h2(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=zv({},i),o={};Ywe.forEach(function(f){o[Y0e("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=Up(r).createElement("div"),r.appendChild(c)),a.containerProvider=DV(ws(Hwe,zv({ref:sl(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return ur(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;DV(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=Gwe([SV(Wwe,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),SV(Kwe,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(B_),aY=(function(t){h2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Xwe),Mc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Mc||{}),Om=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(Om||{});const Qwe=["mousedown","mousemove","mouseup","mouseleave","mouseout"],Zwe=["touchstart","touchmove","touchend","touchcancel"],Jwe=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function e1e(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function t1e(t){var e;return Qwe.includes((e=t?.nativeEvent)==null?void 0:e.type)}function sY(t){var e;return Zwe.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function n1e(t){const{nativeEvent:e}=t;return e?Jwe.includes(e?.type)||"pointerId"in e:!1}function QA(t){return t1e(t)||sY(t)||n1e(t)}function mB(t){var e;const n=sY(t)?(e=t?.touches)==null?void 0:e[0]:t;return e1e(n)?{x:n.pageX,y:n.pageY}:null}function r1e(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function p2(t,{threshold:e=400,captureEvent:n=!1,detect:r=Mc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),v=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),S=A.useCallback(D=>N=>{g.current||QA(N)&&(s!==void 0&&!s(N)||(n&&N.persist(),o?.(N,{context:D}),w.current=mB(N),g.current=!0,v.current=N.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(N,{context:D}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(D=>(N,C)=>{QA(N)&&g.current&&(w.current=null,n&&N.persist(),h.current?u?.(N,{context:D}):g.current&&f?.(N,{context:D,reason:C??Om.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),I=A.useCallback(D=>N=>{if(QA(N)&&(c?.(N,{context:D}),i!==!1&&w.current)){const C=mB(N);if(C){const P=i===!0?25:i,R={x:Math.abs(C.x-w.current.x),y:Math.abs(C.y-w.current.y)};(R.x>P||R.y>P)&&T(D)(N,Om.CancelledByMovement)}}},[T,i,c]),O=A.useCallback(D=>{if(t===null)return{};switch(r){case Mc.Mouse:{const N={onMouseDown:S(D),onMouseMove:I(D),onMouseUp:T(D)};return a&&(N.onMouseLeave=C=>{T(D)(C,Om.CancelledOutsideElement)}),N}case Mc.Touch:return{onTouchStart:S(D),onTouchMove:I(D),onTouchEnd:T(D)};case Mc.Pointer:{const N={onPointerDown:S(D),onPointerMove:I(D),onPointerUp:T(D)};return a&&(N.onPointerLeave=C=>T(D)(C,Om.CancelledOutsideElement)),N}}},[t,T,a,r,I,S]);return A.useEffect(()=>{function D(N){const C=r1e(N);T()(C)}return window.addEventListener("mouseup",D),window.addEventListener("touchend",D),window.addEventListener("pointerup",D),()=>{window.removeEventListener("mouseup",D),window.removeEventListener("touchend",D),window.removeEventListener("pointerup",D)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),O}const oY=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},t1=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,Yu=t=>t1(t).toISOString(),i1e=t=>{const e=t1(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},a1e=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Vh=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=Yu(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||i1e(r),description:e.description||"",merchant:e.merchant||void 0,type:a1e(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}},sx=t=>Gr(et,"users",t,"transactions"),s1e={subscribeToTransactions:(t,e)=>{const n=Mi(sx(t),xs("date","desc"));return Yc(n,i=>{const a=i.docs.map(s=>Vh({id:s.id,...s.data()}));e(a)})},subscribeToTransactionsByMonth:(t,e,n)=>{$.log(` TransactionService: Subscribing to transactions for ${e}`);const r=Mi(sx(t),Kx("month","==",e),xs("date","desc"));return Yc(r,i=>{const a=i.docs.map(s=>Vh({id:s.id,...s.data()}));n(a)},i=>{$.error(` TransactionService: Subscription failed for ${e}:`,i)})},getAllTransactions:async t=>{$.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Mi(sx(t),xs("date","desc")),r=(await na(e)).docs.map(i=>Vh({id:i.id,...i.data()}));return $.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");$.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),$.log(` Original transaction had temp ID: ${n}`);try{$.log(" About to call addDoc with:",r);const i=await I_(sx(e),r);$.log(" addDoc succeeded, docRef:",i),$.log(` Document ID: ${i.id}`),$.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return $.log(" Final result object:",a),a}catch(i){$.error(" addDoc failed:",i);const a=i;throw $.error("Error message:",a.message),i}},updateTransaction:async(t,e,n)=>{const r=_t(et,"users",t,"transactions",e);return await no(r,n)},deleteTransaction:async(t,e)=>{$.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=_t(et,"users",t,"transactions",e);$.log(` Deleting document at path: ${n.path}`),await sa(n),$.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){$.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n);const r=n;throw $.error("Error message:",r.message),n}}},ZA=t=>Gr(et,"users",t,"envelopes"),o1e={subscribeToEnvelopes:(t,e)=>{const n=Mi(ZA(t),xs("orderIndex","asc"));return Yc(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{$.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=ZA(t),i=(await na(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return $.log(" Fetched envelopes:",i.length),i}catch(e){return $.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await I_(ZA(e),r)).id,...r,userId:e}}catch(i){throw $.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=_t(et,"users",t,"envelopes",e.id);return await ia(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=_t(et,"users",t,"envelopes",e);return await no(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{$.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=_t(et,"users",t,"envelopes",e);await sa(n),$.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},JA=t=>Gr(et,"users",t,"distributionTemplates"),l1e={subscribeToDistributionTemplates:(t,e)=>{const n=Mi(JA(t),xs("lastUsed","desc"));return Yc(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Mi(JA(t),xs("lastUsed","desc"));return(await na(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");$.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await I_(JA(e),r);$.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return $.log(" Final template result object:",a),a}catch(i){throw $.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=_t(et,"users",t,"distributionTemplates",e.id);return await ia(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=_t(et,"users",t,"distributionTemplates",e);return await no(r,n)},deleteDistributionTemplate:async(t,e)=>{$.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=_t(et,"users",t,"distributionTemplates",e);await sa(n),$.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},ek=t=>Gr(et,"users",t,"appSettings"),lY={subscribeToAppSettings:(t,e)=>{const n=Mi(ek(t),e5(1));return Yc(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Mi(ek(t),e5(1)),n=await na(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");$.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await I_(ek(e),n);$.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return $.log(" Final settings result object:",i),i}catch(r){throw $.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=_t(et,"users",t,"appSettings",e.id);return await ia(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=_t(et,"users",t,"appSettings",e);return await ia(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{$.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=_t(et,"users",t,"appSettings",e);await sa(n),$.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},vB=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:lY},Symbol.toStringTag,{value:"Module"}));class tl{static instance;constructor(){}static getInstance(){return tl.instance||(tl.instance=new tl),tl.instance}createId(){return _t(Gr(et,"temp")).id}async createCategory(e){const n=_t(et,`users/${e.userId}/categories`,e.id);return await ia(n,e),e}async getCategories(e){const n=Mi(Gr(et,`users/${e}/categories`),xs("orderIndex","asc"));return(await na(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=_t(et,`users/${e}/categories`,n.id);await ia(r,n,{merge:!0})}async deleteCategory(e,n){const r=_t(et,`users/${e}/categories`,n);await sa(r)}async reorderCategories(e,n){const r=SI(et);n.forEach((i,a)=>{const s=_t(et,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return $.log(" No duplicate categories found"),0;$.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=SI(et);i.slice(s,s+a).forEach(u=>{const f=_t(et,`users/${e}/categories`,u);o.delete(f)}),await o.commit(),$.log(` Deleted batch ${Math.floor(s/a)+1}`)}return $.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=Mi(Gr(et,`users/${e}/categories`),xs("orderIndex","asc"));return Yc(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{$.error(" Category subscription error:",i)})}}tl.getInstance();class ys{static instance;static getInstance(){return ys.instance||(ys.instance=new ys),ys.instance}async restoreUserData(e,n){try{$.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=_t(et,"users",e,s,f);i.push({ref:h,data:u})}$.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=SI(et);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),$.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}$.log(" Restore completed successfully.")}catch(r){throw $.warn(` BudgetService.restoreUserData failed: ${r}`),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{$.log(" BudgetService.getEnvelopes called for user:",e);const n=Gr(et,"users",e,"envelopes"),a=(await na(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return $.log(" Fetched envelopes:",a.length),a}catch(n){throw $.warn(` BudgetService.getEnvelopes failed: ${n}`),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{$.log(" BudgetService.getTransactions: Fetching for user",e);const n=Gr(et,"users",e,"transactions"),r=Mi(n,xs("date","desc")),a=(await na(r)).docs.map(s=>{const o={id:s.id,...s.data()};return Vh(o)});return $.log(` Fetched ${a.length} transactions`),a}catch(n){throw $.warn(` BudgetService.getTransactions failed: ${n}`),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactionsByMonth(e,n){try{$.log(` BudgetService.getTransactionsByMonth: Fetching for user ${e}, month ${n}`);const r=Gr(et,"users",e,"transactions"),i=Mi(r,Kx("month","==",n),xs("date","desc")),s=(await na(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Vh(c)});return $.log(` Fetched ${s.length} transactions for ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByMonth failed: ${r}`),new Error(`Failed to fetch transactions for month ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async getTransactionsByEnvelope(e,n){try{$.log(` BudgetService.getTransactionsByEnvelope: Fetching for user ${e}, envelope ${n}`);const r=Gr(et,"users",e,"transactions"),i=Mi(r,Kx("envelopeId","==",n),xs("date","desc")),s=(await na(i)).docs.map(o=>{const c={id:o.id,...o.data()};return Vh(c)});return $.log(` Fetched ${s.length} transactions for envelope ${n}`),s}catch(r){throw $.warn(` BudgetService.getTransactionsByEnvelope failed: ${r}`),new Error(`Failed to fetch transactions for envelope ${n}: ${r instanceof Error?r.message:"Unknown error"}`)}}async createEnvelope(e){try{$.log(" BudgetService.createEnvelope called for user:",e.userId);const n=Gr(et,"users",e.userId,"envelopes"),r=_t(n),i=pt.now(),a={...e,createdAt:i,lastUpdated:i};ia(r,a).catch(o=>$.warn(`Create env failed: ${o}`));const s={...e,id:r.id,createdAt:Yu(i),lastUpdated:Yu(i)};return $.log(" Created envelope (optimistic):",s.id),s}catch(n){throw $.warn(` BudgetService.createEnvelope failed: ${n}`),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{$.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=_t(et,"users",e,"envelopes",n.id);ia(r,{...n,lastUpdated:pt.now()},{merge:!0}).catch(i=>$.warn(`Update env failed: ${i}`)),$.log(" Updated envelope (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateEnvelope failed: ${r}`),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=_t(et,"users",e,"envelopes",n),i=Mi(Gr(et,"users",e,"transactions"),Kx("envelopeId","==",n)),s=(await na(i)).docs.map(o=>sa(o.ref));await Promise.all([sa(r),...s]),$.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw $.warn(` BudgetService.deleteEnvelope failed: ${r}`),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{$.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=_t(et,"users",e,"envelopes",i.id);return ia(a,{orderIndex:i.orderIndex,lastUpdated:pt.now()},{merge:!0})});Promise.all(r).catch(i=>$.warn(`Reorder env failed: ${i}`)),$.log(" Reordered envelopes (optimistic)")}catch(r){throw $.warn(` BudgetService.reorderEnvelopes failed: ${r}`),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{$.log(" BudgetService.createTransaction called for user:",e.userId);const n=Gr(et,"users",e.userId,"transactions"),r=_t(n),i=pt.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};ia(r,s).catch(c=>$.warn(`Create tx failed: ${c}`));const o={...e,id:r.id};return $.log(" Created transaction (optimistic):",o.id),o}catch(n){throw $.warn(` BudgetService.createTransaction failed: ${n}`),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if($.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=_t(et,"users",e,"transactions",n.id);ia(i,r,{merge:!0}).catch(a=>$.warn(`Update tx failed: ${a}`)),$.log(" Updated transaction (optimistic):",n.id)}catch(r){throw $.warn(` BudgetService.updateTransaction failed: ${r}`),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{$.log(" BudgetService.deleteTransaction called for transaction:",n);const r=_t(et,"users",e,"transactions",n);sa(r).catch(i=>$.warn(`Delete tx failed: ${i}`)),$.log(" Deleted transaction (optimistic):",n)}catch(r){throw $.warn(` BudgetService.deleteTransaction failed: ${r}`),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{$.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=_t(et,"users",e.userId,"monthlyBudgets",e.month),r=pt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};no(n,{incomeSources:che(a),updatedAt:r}).catch(o=>{o.code==="not-found"?ia(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>$.warn(`Failed to create monthly budget doc: ${c}`)):$.warn(`Create income failed: ${o}`)});const s={...e,id:i,amount:Number(e.amount),createdAt:Yu(r),updatedAt:Yu(r)};return $.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw $.warn(` BudgetService.createIncomeSource failed: ${n}`),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{$.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=_t(et,"users",e,"monthlyBudgets",r);yA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:pt.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});no(a,{incomeSources:u,updatedAt:pt.now()})}).catch(s=>$.warn(`Update income failed: ${s}`)),$.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateIncomeSource failed: ${a}`),a}}async deleteIncomeSource(e,n,r){try{$.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=_t(et,"users",e,"monthlyBudgets",r);yA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);no(i,{incomeSources:c,updatedAt:pt.now()})}).catch(a=>$.warn(`Delete income failed: ${a}`)),$.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteIncomeSource failed: ${i}`),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{$.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=_t(et,"users",e.userId,"monthlyBudgets",e.month),r=pt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};no(n,i).catch(s=>{s.code==="not-found"?ia(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>$.warn(`Failed to create monthly budget doc: ${o}`)):$.warn(`Create allocation failed: ${s}`)});const a={...e,id:e.envelopeId,createdAt:Yu(r),updatedAt:Yu(r)};return $.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw $.warn(` BudgetService.createEnvelopeAllocation failed: ${n}`),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{$.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=_t(et,"users",e,"monthlyBudgets",r),s={updatedAt:pt.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),no(a,s).catch(o=>$.warn(`Update allocation failed: ${o}`)),$.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw $.warn(` BudgetService.updateEnvelopeAllocation failed: ${a}`),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{$.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=_t(et,"users",e,"monthlyBudgets",r);no(i,{[`allocations.${n}`]:r5(),updatedAt:pt.now()}).catch(a=>$.warn(`Delete allocation failed: ${a}`)),$.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw $.warn(` BudgetService.deleteEnvelopeAllocation failed: ${i}`),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{$.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=_t(et,"users",e,"monthlyBudgets",n),i=await yA(r);if(!i.exists())return $.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return $.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw $.warn(` BudgetService.getMonthData failed: ${r}`),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{$.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(v=>v.id));$.log(` Found ${r.length} existing envelopes`);const a=Gr(et,"users",e,"envelopeAllocations"),s=await na(a),o=[],c=new Set;for(const v of s.docs){const b=v.data();c.add(b.month),i.has(b.envelopeId)||(o.push(v.id),$.log(` Found orphaned allocation: ${v.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const v=o.map(b=>sa(_t(et,"users",e,"envelopeAllocations",b)));await Promise.all(v),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),$.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=Gr(et,"users",e,"monthlyBudgets"),f=await na(u);for(const v of f.docs){const x=v.data().allocations||{},w={};let S=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=r5(),S=!0,$.log(` Found orphaned embedded allocation in ${v.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${v.id}_${T}`))}),S&&(w.updatedAt=pt.now(),await no(v.ref,w),c.add(v.id))}const h=await this.getTransactions(e),g=[];for(const v of h)i.has(v.envelopeId)||(g.push(v.id),$.log(` Found orphaned transaction: ${v.id} for envelope ${v.envelopeId}`));if(g.length>0){const v=g.map(b=>sa(_t(et,"users",e,"transactions",b)));await Promise.all(v),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,$.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),$.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw $.warn(` BudgetService.cleanupOrphanedData failed: ${n}`),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=_t(et,"users",e,"monthlyBudgets",n);return Yc(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{$.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){$.log(` Deleting collection: ${r}...`);const i=Gr(et,"users",e,r),a=await na(i);if(a.empty){$.log("   (Empty collection)");continue}const s=a.docs.map(o=>sa(o.ref));await Promise.all(s),$.log(`    Deleted ${a.size} documents from ${r}`)}$.log(" All user data deleted successfully.")}catch(n){throw $.warn(` BudgetService.deleteAllUserData failed: ${n}`),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const g2=ys.getInstance(),c1e=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),u1e=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),yB=(t,e)=>{if(window.__firebaseUnsubscribers){$.log(" Real-time subscriptions already active, skipping setup");return}$.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;$.log(" Current month for subscriptions:",n);const r=o1e.subscribeToEnvelopes(e,g=>{$.log(" Real-time sync: Envelopes updated",g.length);const v=g.map(c1e),b=t.getState(),x=new Set(b.envelopes.map(T=>T.id)),w=new Set(v.map(T=>T.id)),S=[...v.filter(T=>x.has(T.id)),...b.envelopes.filter(T=>!w.has(T.id))];t.setState({envelopes:S})}),i={},a=g=>{i[g]||(i[g]=s1e.subscribeToTransactionsByMonth(e,g,v=>{$.log(` Real-time sync: Transactions updated for ${g}`,v.length);const w=[...t.getState().transactions.filter(S=>S.month!==g),...v];t.setState({transactions:w})}))},s=[t.getState().currentMonth,...t.getState().loadedTransactionMonths||[]];Array.from(new Set(s)).forEach(g=>{g&&a(g)});const c=tl.getInstance().subscribeToCategories(e,g=>{$.log(" Real-time sync: Categories updated",g.length);const v=g.map(u1e),b=Array.from(new Map(v.map(x=>[x.id,x])).values());b.length!==v.length&&$.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:b})}),u=l1e.subscribeToDistributionTemplates(e,g=>{$.log(" Real-time sync: Templates updated from Firebase",g.length)}),f=lY.subscribeToAppSettings(e,g=>{$.log(" Real-time sync: Settings updated",g?"found":"null");const v=t.getState();if(g){const b={...v.appSettings,...g,paymentSources:g.paymentSources??v.appSettings?.paymentSources??[]};t.setState({appSettings:b})}else $.log(" Firebase settings null, preserving local state")}),h=g2.subscribeToMonthlyBudget(e,n,g=>{$.log(` Real-time sync: Monthly budget updated (${g.incomeSources.length} sources, ${g.allocations.length} allocations)`);const v=t.getState();t.setState({incomeSources:{...v.incomeSources,[n]:g.incomeSources},allocations:{...v.allocations,[n]:g.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactionMonths:i,categories:c,templates:u,settings:f,monthlyBudget:h,setupTransactionSubscription:a},$.log(" Real-time subscriptions active - cross-device sync enabled")},d1e=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{$.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{$.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&($.log(" User already authenticated on app load, setting up real-time subscriptions"),yB(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)$.log(" User authenticated, setting up real-time subscriptions"),yB(e,r());else if(!s.isAuthenticated&&!s.isLoading){if($.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactionMonths&&Object.values(o.transactionMonths).forEach(c=>c()),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,$.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=[];e.subscribe(s=>{if(!n.getState().isAuthenticated)return;const c=Array.from(new Set([s.currentMonth,...s.loadedTransactionMonths||[]])).filter(Boolean).sort();if(c.some(f=>!a.includes(f))&&window.__firebaseUnsubscribers){const f=window.__firebaseUnsubscribers,h=f.setupTransactionSubscription;h&&c.forEach(v=>{a.includes(v)||h(v)});const g=a.find(v=>v===s.currentMonth)?s.currentMonth:null;if(s.currentMonth&&g!==s.currentMonth){const v=r();v&&f.monthlyBudget&&(f.monthlyBudget(),f.monthlyBudget=g2.subscribeToMonthlyBudget(v,s.currentMonth,b=>{$.log(` Real-time sync: Monthly budget updated for ${s.currentMonth}`);const x=e.getState();e.setState({incomeSources:{...x.incomeSources,[s.currentMonth]:b.incomeSources},allocations:{...x.allocations,[s.currentMonth]:b.allocations}})}))}a=c}})},$u=ys.getInstance(),ox=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},f1e=({set:t,get:e})=>({addTransaction:async n=>{try{t({isLoading:!0,error:null});const r=ox(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,userId:r.id,month:a},o=await $u.createTransaction(s);t(c=>c.transactions.some(f=>f.id===o.id)?{isLoading:!1}:{transactions:[...c.transactions,o],isLoading:!1}),$.log(" Added transaction:",o.id)}catch(r){throw $.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const r=ox(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await $u.updateTransaction(r.id,s),t(o=>({transactions:o.transactions.map(c=>c.id===n.id?s:c),isLoading:!1})),$.log(" Updated transaction:",n.id)}catch(r){throw $.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const r=ox();await $u.deleteTransaction(r.id,n),t(i=>({transactions:i.transactions.filter(a=>a.id!==n),isLoading:!1})),$.log(" Deleted transaction:",n)}catch(r){throw $.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const r=ox(),i=new Date(n.date),a=n.month||`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,s={...n,month:a};await $u.updateTransaction(r.id,s),t(o=>{const c=o.transactions.findIndex(f=>f.id===n.id);let u;return c>=0?u=o.transactions.map(f=>f.id===n.id?s:f):u=[...o.transactions,s],{transactions:u,isLoading:!1}}),$.log(" Restored transaction:",n.id)}catch(r){throw $.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),$.log(" Transfer completed")}catch(o){throw $.error(" transferFunds failed:",o),o}},fetchTransactionsForMonth:async n=>{const r=e();if(!(r.areAllTransactionsLoaded||r.loadedTransactionMonths.includes(n)))try{const{currentUser:i}=nn.getState();if(!i)return;t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]})),$.log(` Fetching transactions for month: ${n}`);const a=await $u.getTransactionsByMonth(i.id,n);t(s=>({transactions:[...s.transactions.filter(o=>o.month!==n),...a]})),$.log(` Loaded ${a.length} transactions for ${n}`)}catch(i){$.error(` Failed to fetch transactions for ${n}:`,i),t(a=>({loadedTransactionMonths:a.loadedTransactionMonths.filter(s=>s!==n)}))}},fetchTransactionsForEnvelope:async n=>{if(!e().areAllTransactionsLoaded)try{const{currentUser:i}=nn.getState();if(!i)return;$.log(` Fetching transactions for envelope: ${n}`);const a=await $u.getTransactionsByEnvelope(i.id,n);t(s=>{const o=new Map(s.transactions.map(c=>[c.id,c]));return a.forEach(c=>{o.set(c.id,c)}),{transactions:Array.from(o.values())}}),$.log(` Loaded ${a.length} transactions for envelope ${n}`)}catch(i){$.error(` Failed to fetch transactions for envelope ${n}:`,i)}},fetchAllTransactions:async()=>{if(!e().areAllTransactionsLoaded)try{t({isLoading:!0});const{currentUser:r}=nn.getState();if(!r){t({isLoading:!1});return}$.log(" Fetching ALL transactions history...");const i=await $u.getTransactions(r.id);t({transactions:i,areAllTransactionsLoaded:!0,isLoading:!1}),$.log(` Loaded complete history: ${i.length} transactions`)}catch(r){$.error(" Failed to fetch all transactions:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to fetch transaction history"})}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return $.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return $.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0}}),th=ys.getInstance(),nh=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},h1e=({set:t,get:e})=>({addEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=nh(),i={...n,userId:r.id},a=await th.createEnvelope(i);return t(s=>s.envelopes.some(c=>c.id===a.id)?{isLoading:!1}:{envelopes:[...s.envelopes,a],isLoading:!1}),$.log(" Added envelope:",a.id),a.id}catch(r){throw $.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=nh();await th.updateEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.map(a=>a.id===n.id?n:a),isLoading:!1})),$.log(" Updated envelope:",n.id)}catch(r){throw $.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const r=nh();await th.deleteEnvelope(r.id,n),t(i=>({envelopes:i.envelopes.filter(a=>a.id!==n),transactions:i.transactions.filter(a=>a.envelopeId!==n),isLoading:!1})),$.log(" Deleted envelope:",n)}catch(r){throw $.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((c,u)=>{i.set(c,u)});const a=r.envelopes.map(c=>{if(!i.has(c.id))return c;const u=i.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}}),s=a.filter((c,u)=>c!==r.envelopes[u]);if(!s.length){t({isLoading:!1});return}const o=nh();await th.reorderEnvelopes(o.id,s),t({envelopes:a,isLoading:!1}),$.log(" Reordered envelopes")}catch(r){throw $.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(c=>c.id===n);if(!a)throw new Error("Envelope not found");t(c=>({envelopes:c.envelopes.map(u=>u.id===n?{...u,name:r}:u),isLoading:!0}));const s=nh(),o={...a,name:r};await th.updateEnvelope(s.id,o),t({isLoading:!1}),$.log(" Renamed envelope:",n)}catch(i){throw $.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):$.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&($.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),$.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw $.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const i=nh(),a=e().envelopes.find(o=>o.id===n&&o.isPiggybank);if(!a)throw new Error("Piggybank not found");const s={...a,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:a.piggybankConfig?.targetAmount,color:a.piggybankConfig?.color,icon:a.piggybankConfig?.icon,paused:a.piggybankConfig?.paused??!1}};if($.log(" Updating envelope in Firestore:",s),await th.updateEnvelope(i.id,s),$.log(" Envelope updated successfully"),t(o=>({envelopes:o.envelopes.map(c=>c.id===n?s:c),isLoading:!1})),!a.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(c=>c.envelopeId===n&&(c.description==="Monthly Allocation"||c.description==="Piggybank Contribution"))||$.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(o){$.error(" Failed to update piggybank contribution:",o)}$.log(" Piggybank contribution updated successfully")}catch(i){throw $.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}}}),rh=ys.getInstance(),ih=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},p1e=({set:t,get:e})=>({addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const i=ih();$.log(" Adding income source:",{month:n,source:r});const a=await rh.createIncomeSource({...r,userId:i.id,month:n});t(s=>{const o=s.incomeSources[n]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{incomeSources:{...s.incomeSources,[n]:[...o,a]},isLoading:!1}}),$.log(" Added income source:",a.id)}catch(i){throw $.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Updating income source:",{month:n,sourceId:r.id}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.map(s=>s.id===r.id?{...r,updatedAt:new Date().toISOString()}:s)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await rh.updateIncomeSource(i.id,r.id,n,r),$.log(" Updated income source:",r.id)}catch(i){throw $.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),$.log(" Deleting income source:",{month:n,sourceId:r}),t(a=>({incomeSources:{...a.incomeSources,[n]:a.incomeSources[n]?.filter(s=>s.id!==r)||[]},isLoading:!1}));const{currentUser:i}=nn.getState();if(!i)return;await rh.deleteIncomeSource(i.id,r,n),$.log(" Deleted income source:",r)}catch(i){throw $.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const r=ih();$.log(" Copying allocations from previous month:",n);const[i,a]=n.split("-").map(Number);let s=i,o=a-1;o<1&&(s=i-1,o=12);const c=`${s}-${String(o).padStart(2,"0")}`;(!e().incomeSources[c]||!e().allocations[c])&&($.log(` Previous month ${c} data missing, fetching...`),await e().fetchMonthData(c));const u=e().incomeSources[c]||[];if($.log(` Found ${u.length} income sources from ${c}`),u.length>0){for(const v of u){const{id:b,...x}=v;await e().addIncomeSource(n,x)}$.log(` Copied ${u.length} income sources to ${n}`)}const f=e().allocations[c]||[];$.log(` Found ${f.length} allocations from ${c}`);const h=f.filter(v=>{const b=e().envelopes.find(x=>x.id===v.envelopeId);return!!b&&!b.isPiggybank});if(h.length>0){for(const v of h)await e().createEnvelopeAllocation({envelopeId:v.envelopeId,budgetedAmount:v.budgetedAmount,userId:r.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),v.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:v.budgetedAmount,envelopeId:v.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});$.log(` Copied ${h.length} regular allocations to ${n}`)}const g=e().envelopes.filter(v=>v.isPiggybank);$.log(` Processing ${g.length} piggybanks for ${n}`);for(const v of g){const b=v.piggybankConfig?.monthlyContribution,x=v.piggybankConfig?.paused??!1;if(!x&&b&&b>0)try{$.log(` Setting piggybank allocation for ${v.name}: ${b}`),await e().setEnvelopeAllocation(v.id,b)}catch(w){$.error(` Failed to set allocation for piggybank ${v.name}:`,w)}else $.log(` Skipping piggybank ${v.name} (paused=${x}, contribution=${b})`)}t({isLoading:!1}),$.log(` Complete monthly setup copied to ${n}`)}catch(r){throw $.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const i=ih(),a=e().currentMonth,s=e().envelopes.find(u=>u.id===n);if(!s){$.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const o=!!s.isPiggybank;$.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${a}, isPiggybank=${o}`);const c=e().allocations[a]?.find(u=>u.envelopeId===n);if(c?await e().updateEnvelopeAllocation(c.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:i.id,month:a,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o&&r>0&&!s?.piggybankConfig?.paused){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));if(u){const f={...u,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(f)}else{const f={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}if(!o&&r>0){const u=e().transactions.find(f=>f.envelopeId===n&&f.month===a&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));if(u){const f={...u,amount:r,description:"Budgeted"};await e().updateTransaction(f)}else{const f={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:a,date:`${a}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(f)}}$.log(" Envelope allocation set successfully")}catch(i){throw $.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const r=ih(),i=e().currentMonth,a=await rh.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:r.id,month:i});t(s=>{const o=s.allocations[i]||[];return o.some(u=>u.id===a.id)?{isLoading:!1}:{allocations:{...s.allocations,[i]:[...o,a]},isLoading:!1}}),$.log(" Created envelope allocation:",a.id)}catch(r){throw $.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{$.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,a=ih(),s=e().allocations[i]?.find(u=>u.id===n);if(!s)throw new Error("Allocation not found");const o=e().envelopes.find(u=>u.id===s.envelopeId),c=o?.isPiggybank;if(await rh.updateEnvelopeAllocation(a.id,s.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(u=>({allocations:{...u.allocations,[i]:u.allocations[i]?.map(f=>f.id===n?{...f,...r,updatedAt:new Date().toISOString()}:f)||[]},isLoading:!1})),c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Allocation"||f.description==="Piggybank Contribution"));u?r.budgetedAmount>0&&!o?.piggybankConfig?.paused?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||o?.piggybankConfig?.paused)&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&!o?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!c&&r.budgetedAmount!==void 0){const u=e().transactions.find(f=>f.envelopeId===s.envelopeId&&f.month===i&&(f.description==="Monthly Budget Allocation"||f.description==="Budgeted"));u?r.budgetedAmount>0?await e().updateTransaction({...u,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(u.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:s.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}$.log(" Updated envelope allocation:",n)}catch(i){throw $.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{$.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(s=>s.id===n);if(!i){$.warn("Allocation not found in store, skipping delete");return}const a=ih();await rh.deleteEnvelopeAllocation(a.id,i.envelopeId,r),t(s=>({allocations:{...s.allocations,[r]:s.allocations[r]?.filter(o=>o.id!==n)||[]},isLoading:!1})),$.log(" Deleted envelope allocation:",n)}catch(r){throw $.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw $.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}}}),ah=tl.getInstance(),lx=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},g1e=({set:t,get:e})=>({fetchCategories:async()=>{try{t({isLoading:!0,error:null});const{currentUser:n}=nn.getState();if(!n)return;const r=await ah.getCategories(n.id),i=Array.from(new Map(r.map(a=>[a.id,a])).values());t({categories:i,isLoading:!1})}catch(n){$.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const r=lx(),i=e().categories.find(o=>o.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(i)return $.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),i.id;const a=ah.createId(),s={...n,id:a,userId:r.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await ah.createCategory(s),t(o=>o.categories.some(u=>u.id===a)?{isLoading:!1}:{categories:[...o.categories,s],isLoading:!1}),a}catch(r){throw $.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const r=lx(),i={...n,updatedAt:new Date().toISOString()};await ah.updateCategory(r.id,i),t(a=>({categories:a.categories.map(s=>s.id===n.id?i:s),isLoading:!1}))}catch(r){throw $.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const r=lx();await ah.deleteCategory(r.id,n),t(i=>({categories:i.categories.filter(a=>a.id!==n),isLoading:!1}))}catch(r){throw $.error("Failed to delete category:",r),t({isLoading:!1}),r}},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const r=lx(),i=e(),a=new Map;n.forEach((o,c)=>a.set(o,c));const s=i.categories.map(o=>{if(!a.has(o.id))return o;const c=a.get(o.id);return o.orderIndex===c?o:{...o,orderIndex:c}});t({categories:s.sort((o,c)=>o.orderIndex-c.orderIndex)}),await ah.reorderCategories(r.id,s),t({isLoading:!1})}catch(r){throw $.error("Failed to reorder categories:",r),t({isLoading:!1}),r}}}),m1e=ys.getInstance(),qu=()=>nn.getState().currentUser?.id||"",v1e=({set:t,get:e})=>({setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=qu();if(!n){$.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;$.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)});const a=`guidedTutorialCompleted_${n}`,s=typeof localStorage<"u"?localStorage.getItem(a)==="true":!1;if(i){t({isOnboardingCompleted:!0,guidedTutorialCompleted:s}),$.log(" Skipping onboarding: already completed (localStorage)",{isTutorialCompleted:s});return}try{if((await m1e.getEnvelopes(n)).length>0){$.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(o){$.error(" Failed to check existing envelopes for onboarding:",o),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||($.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),$.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=qu();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),$.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=qu();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),$.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},startGuidedTutorial:()=>{$.log(" Starting guided tutorial"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})},advanceGuidedTutorial:()=>{const n=e().guidedTutorialStep;if(n===null)return;const r=n+1;if(r>=4){const a=qu();a&&localStorage.setItem(`guidedTutorialCompleted_${a}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})}else $.log(" Advancing guided tutorial to step:",r),t({guidedTutorialStep:r})},skipGuidedTutorial:()=>{const n=qu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial skipped"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},completeGuidedTutorial:()=>{const n=qu();n&&localStorage.setItem(`guidedTutorialCompleted_${n}`,"true"),$.log(" Guided tutorial completed!"),t({guidedTutorialStep:null,guidedTutorialCompleted:!0})},resetGuidedTutorial:()=>{const n=qu();n&&localStorage.removeItem(`guidedTutorialCompleted_${n}`),$.log(" Guided tutorial reset  starting at step 0"),t({guidedTutorialStep:0,guidedTutorialCompleted:!1})}}),y1e=({set:t,get:e})=>({updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(s=>{const o={...s};return o.last4===void 0&&delete o.last4,o}));const{currentUser:a}=nn.getState();if(a){const{AppSettingsService:s}=await Uh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>vB);return{AppSettingsService:o}},void 0);await s.updateAppSettings(a.id,i.id,i)}t({appSettings:i,isLoading:!1}),$.log(" Updated app settings")}catch(r){throw $.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const{currentUser:r}=nn.getState();if(r){const{AppSettingsService:a}=await Uh(async()=>{const{AppSettingsService:o}=await Promise.resolve().then(()=>vB);return{AppSettingsService:o}},void 0),s=await a.getAppSettings(r.id);if(s){t({appSettings:s}),$.log(" Loaded app settings from Firestore");return}}const i={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};r&&(i.userId=r.id),t({appSettings:i}),$.log(" Initialized default app settings")}catch(n){$.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),$.log(" Online status updated:",n)}catch(n){$.error(" Failed to update online status:",n)}}}),dm=ys.getInstance(),tk=tl.getInstance(),bB=()=>{const{currentUser:t}=nn.getState();if(!t)throw new Error("No authenticated user found");return t},b1e=({set:t,get:e})=>({setMonth:async n=>{t({currentMonth:n});const r=e();r.loadedTransactionMonths.includes(n)||t(a=>({loadedTransactionMonths:[...a.loadedTransactionMonths,n]})),(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&($.log(`Month ${n} budget data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{$.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const{currentUser:r}=nn.getState();if(!r){$.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}$.log(`Fetching data for user: ${r.id}, month: ${n.currentMonth}`);const[i,a,s]=await Promise.all([dm.getEnvelopes(r.id),tk.getCategories(r.id).catch(b=>($.error(" Failed to load categories:",b),[])),dm.getMonthData(r.id,n.currentMonth)]),o=[n.currentMonth];let c=Array.from(new Map(a.map(b=>[b.id,b])).values());const u=new Set;let f=!1;for(const b of c){const x=b.name.toLowerCase().trim();if(u.has(x)){f=!0;break}u.add(x)}f&&r&&($.log(" Duplicate category names detected, running Firestore cleanup..."),await tk.deduplicateCategories(r.id)>0&&(c=await tk.getCategories(r.id))),t({envelopes:i,loadedTransactionMonths:o,areAllTransactionsLoaded:!1,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:s.incomeSources},allocations:{...n.allocations,[n.currentMonth]:s.allocations},isLoading:!1,error:null}),$.log(` BudgetStore initialized: ${i.length} envelopes, current month: ${n.currentMonth}`);const h=e(),g=new Set(h.transactions.map(b=>b.month)),v=Array.from(g).filter(b=>b!==void 0&&b!==h.currentMonth&&(!h.incomeSources[b]||!h.allocations[b]));if(v.length>0){$.log(` Auto-fixing ${v.length} lazy loading gaps: ${v.join(", ")}`);for(const b of v)try{await e().fetchMonthData(b);const x=e();(!x.incomeSources[b]||!x.allocations[b])&&($.log(` Creating empty month data for ${b} (no budget data found in Firestore)`),t(w=>({incomeSources:{...w.incomeSources,[b]:[]},allocations:{...w.allocations,[b]:[]}}))),$.log(` Fixed lazy loading gap for ${b}`)}catch(x){$.error(` Failed to fix lazy loading gap for ${b}:`,x)}}else $.log(" No lazy loading gaps detected for current month transactions")}catch(r){$.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchData:async()=>{await e().init()},fetchMonthData:async n=>{try{const{currentUser:r}=nn.getState();if(!r){$.log("No user logged in, skipping month data fetch");return}$.log(`Fetching month data for: ${n}`),e().loadedTransactionMonths.includes(n)||t(s=>({loadedTransactionMonths:[...s.loadedTransactionMonths,n]}));const i=await dm.getMonthData(r.id,n),a=e();if(t({incomeSources:{...a.incomeSources,[n]:i.incomeSources},allocations:{...a.allocations,[n]:i.allocations}}),$.log(` Fetched budget data for ${n}`),n===e().currentMonth){const s=async()=>{try{const o=e(),c=o.allocations[n]||[],u=o.transactions.filter(h=>h.month===n);let f=0;for(const h of c){const g=o.envelopes.find(b=>b.id===h.envelopeId);if(g?.isPiggybank)continue;const v=u.find(b=>b.envelopeId===h.envelopeId&&(b.description==="Monthly Budget Allocation"||b.description==="Monthly Allocation"||b.description==="Budgeted"||b.description==="Piggybank Contribution"));v?v.amount!==h.budgetedAmount&&($.log(` Repairing mismatch for envelope ${g?.name||h.envelopeId}: Alloc ${h.budgetedAmount} vs Tx ${v.amount}`),await o.updateTransaction({...v,amount:h.budgetedAmount}),f++):h.budgetedAmount>0&&($.log(` Repairing missing transaction for envelope ${g?.name||h.envelopeId}`),await o.addTransaction({description:"Budgeted",amount:h.budgetedAmount,envelopeId:h.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),f++)}f>0&&$.log(` Repaired ${f} allocation discrepancies for ${n}`)}catch(o){$.error(` Verification failed for ${n}:`,o)}};setTimeout(()=>{s().catch(o=>$.error("Verification failed:",o))},1e3)}}catch(r){$.error(` Failed to fetch month data for ${n}:`,r)}},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),$.log(` Clearing all data for month: ${n}`);const r=bB(),{monthlyBudgetService:i}=await Uh(async()=>{const{monthlyBudgetService:a}=await import("./MonthlyBudgetService-DpoJ8M7Z.js");return{monthlyBudgetService:a}},[]);await i.clearMonthData(r.id,n),await e().init(),$.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw $.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},resetData:async()=>{$.log(" Resetting all data"),t({isLoading:!0});try{const{currentUser:n}=nn.getState();n?($.log(" Deleting all data from Firestore for user:",n.id),await dm.deleteAllUserData(n.id)):$.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),$.log(" Reset data complete")}catch(n){throw $.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const r=bB();return $.log(" Starting Time Machine Restore for user:",r.id),await dm.restoreUserData(r.id,n),$.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return $.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},handleUserLogout:()=>{$.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),x1e=()=>nn.getState().currentUser?.id||"",yt=UN()(Ice(q8((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},loadedTransactionMonths:[],areAllTransactionsLoaded:!1,currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,guidedTutorialStep:null,guidedTutorialCompleted:!1,isLoading:!1,error:null,...f1e({set:t,get:e}),...h1e({set:t,get:e}),...p1e({set:t,get:e}),...g1e({set:t,get:e}),...v1e({set:t,get:e}),...y1e({set:t,get:e}),...b1e({set:t,get:e})}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));d1e({useBudgetStore:yt,useAuthStore:nn,getCurrentUserId:x1e});const cY=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:yt},Symbol.toStringTag,{value:"Module"})),xB=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},w1e=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=yt(),{currentUser:s}=nn(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:v}=yt(),{showToast:b}=uu(),[x,w]=A.useState(!1),S=A.useRef(null),[T,I]=A.useState(!1),O=!T||r||v,[D,N]=A.useState([]),C=A.useRef([]),[P,R]=A.useState([]),j=A.useRef([]),L=A.useCallback(re=>t.find(ne=>ne.id===re)?.isPiggybank?yt.getState().getEnvelopeBalance(re):yt.getState().getEnvelopeBalance(re,o),[t,o]);A.useEffect(()=>{const re=t.filter(K=>{if(!K.isPiggybank||!K.isActive)return!1;if(K.createdAt)try{const ue=xB(K.createdAt);if(!ue)return $.error(` Invalid creation date for piggybank ${K.name}:`,K.createdAt),!1;const ne=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}`;return o>=ne}catch(ue){return $.error(` Error processing piggybank ${K.name}:`,ue,{createdAt:K.createdAt,typeofCreatedAt:typeof K.createdAt}),!1}return!0}).sort((K,ue)=>{const ne=K.orderIndex??0,oe=ue.orderIndex??0;return ne-oe});R(re),j.current=re},[t,o]);const B=P,z=D;A.useEffect(()=>(S.current=setTimeout(()=>{w(!0)},8e3),n(),I(!0),()=>{S.current&&clearTimeout(S.current)}),[]),A.useEffect(()=>{T&&!r&&!v&&(w(!1),S.current&&clearTimeout(S.current))},[T,r,v]),A.useEffect(()=>{const re=t.filter(K=>{if(K.isPiggybank||K.isActive===!1)return!1;const ne=(u[o]||[]).some(_e=>_e.envelopeId===K.id),oe=e.some(_e=>_e.envelopeId===K.id&&(_e.month===o||_e.date.startsWith(o)));return ne||oe}).sort((K,ue)=>{const ne=K.orderIndex??0,oe=ue.orderIndex??0;return ne-oe});N(re),C.current=re},[t,u,o,e]);const W=(c[o]||[]).reduce((re,K)=>re+K.amount,0),Z=(u[o]||[]).filter(re=>z.some(K=>K.id===re.envelopeId)||B.some(K=>K.id===re.envelopeId)).reduce((re,K)=>re+K.budgetedAmount,0),G=W-Z,Y=A.useCallback(async re=>{if(!re.length)return;const K=re.map(ue=>ue.id);try{await a(K)}catch(ue){$.error("Failed to persist envelope order:",ue),b("Failed to save envelope order","error")}},[a,b]),Q=A.useCallback(async re=>{await Y(re)},[Y]),J=A.useCallback(re=>{f(o,re.id).catch($.error),b(`Deleted "${re.name}"`,"neutral")},[f,o,b]),te=A.useCallback(async re=>{try{const K=re||o;$.log(" Copying to month:",K),await g(K),b("Previous month budget copied","success")}catch(K){$.error("Error copying previous month:",K),b("Failed to copy previous month","error")}},[g,b,o]),U=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await yt.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(re){$.error("Error clearing month data:",re),b("Failed to clear month data","error")}},[s,o,b]),X=A.useCallback(async(re,K)=>{try{await h(re,K),setTimeout(()=>{const ue=yt.getState(),ne=ue.currentMonth,oe=ue.incomeSources[ne]||[],_e=ue.allocations[ne]||[],ae=new Set(ue.envelopes.filter(Ae=>{if(Ae.isPiggybank){if(!Ae.isActive)return!1;if(Ae.createdAt){const Ie=xB(Ae.createdAt);if(!Ie)return!1;const Re=`${Ie.getFullYear()}-${String(Ie.getMonth()+1).padStart(2,"0")}`;return ne>=Re}return!0}return Ae.isActive!==!1}).map(Ae=>Ae.id)),ge=_e.filter(Ae=>ae.has(Ae.envelopeId)),fe=oe.reduce((Ae,Ie)=>Ae+Ie.amount,0),ee=ge.reduce((Ae,Ie)=>Ae+Ie.budgetedAmount,0);fe-ee<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(fe-ee)<.005&&fe>0&&b("Every dollar has a job ","success")},100)}catch(ue){$.error("Failed to set allocation:",ue),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:z,piggybanks:B,incomeSources:c,availableToBudget:G,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:O,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:L,fetchData:n,reorderEnvelopes:Q,deleteIncomeSource:J,clearMonthData:U,copyFromPreviousMonth:te,setEnvelopeAllocation:X,localOrderRef:C,setLocalEnvelopes:N,localPiggybankOrderRef:j,setLocalPiggybanks:R}},_1e=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const v=`${h}-${g.toString().padStart(2,"0")}`;e(v)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:v}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof v=="number"?v:0,S=Math.abs(b)<.005,T=b<-.005,I=x>0?w/x*100:0;let O="text-gray-900 dark:text-white",D="bg-green-500",N="Left to Budget",C=x>0?Math.min(I,100):0,P=!0;return x===0?(N="Add income to start budgeting",C=0,P=!1,O="text-gray-500 dark:text-zinc-500"):S?(O="text-green-600 dark:text-emerald-400",D="bg-green-500",N="Perfect! Every dollar has a job ",C=100,P=!1):T&&(O="text-red-600 dark:text-red-400",D="bg-red-500",N="You're not in Congress! Try again.",C=100),m.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[m.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[m.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${O}`,children:N}),P&&m.jsxs("span",{className:`text-sm font-bold truncate ${O}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${D}`,style:{width:`${C}%`}})})]})};return m.jsxs("div",{className:"py-2 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-center gap-4",children:[m.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:m.jsx(hle,{size:20})}),m.jsx("div",{className:"text-center",children:m.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),m.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:m.jsx(us,{size:20})})]}),n&&m.jsx("div",{className:"px-1",children:f()})]})},X_=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=M0e(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,v=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&v<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return m.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[m.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:m.jsx(vw,{className:"text-white w-6 h-6"})}),m.jsx(Rt.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},S1e=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=yt(),{showToast:o}=uu(),[c,u]=A.useState(""),[f,h]=A.useState(""),[g,v]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}v(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){$.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{v(!1)}};return m.jsx(Wr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(Rt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),m.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},E1e=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return m.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),m.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[m.jsx(lle,{className:"w-12 h-12 text-blue-500"}),m.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:m.jsx(Rh,{size:14})})]})]}),m.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),m.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),m.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:m.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":m.jsx(m.Fragment,{children:m.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},T1e="/personal-budget-pwa/icon-512.png",nk="/personal-budget-pwa/images/budget-balanced.png",cx=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],A1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-green-400 dark:border-green-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(Zd,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Salary"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$3,500.00"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsx("span",{className:"text-[10px] text-gray-700 dark:text-zinc-300",children:"Freelance"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-emerald-400",children:"$800.00"})]})]})]}),k1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-purple-400 dark:border-purple-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-purple-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Food"}),m.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-600 flex items-center justify-center",children:m.jsx(Zd,{size:12,className:"text-white"})})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Groceries"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-10 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$350 / $500"})]}),m.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Dining Out"}),m.jsx("div",{className:"w-16 h-1 bg-gray-200 dark:bg-zinc-600 rounded-full mt-0.5",children:m.jsx("div",{className:"w-6 h-1 bg-purple-500 rounded-full"})})]}),m.jsx("span",{className:"text-[10px] font-bold text-gray-700 dark:text-zinc-300",children:"$75 / $200"})]})]})]}),C1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-blue-400 dark:border-blue-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsxs("div",{className:"flex justify-between text-[10px] font-medium mb-1",children:[m.jsx("span",{className:"text-gray-700 dark:text-zinc-300",children:"Left to Budget"}),m.jsx("span",{className:"font-bold text-green-600",children:"$0.00"})]}),m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700 rounded-full h-2",children:m.jsx("div",{className:"w-full h-2 bg-green-500 rounded-full"})}),m.jsx("div",{className:"text-[9px] text-green-600 dark:text-emerald-400 text-center mt-1 font-medium",children:"Every dollar has a job!"})]}),I1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-pink-400 dark:border-pink-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-pink-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"LOOK HERE"}),m.jsx("div",{className:"flex justify-between items-center mb-2",children:m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Qd,{size:12,className:"text-pink-500"}),m.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Piggybanks"})]})}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Vacation Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$1,200 / $3,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-2/5 h-1.5 bg-pink-500 rounded-full"})})]}),m.jsxs("div",{className:"py-1.5 px-2 bg-gray-50 dark:bg-zinc-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-medium text-gray-900 dark:text-white",children:"Emergency Fund"}),m.jsx("span",{className:"text-[10px] font-bold text-pink-600",children:"$4,500 / $10,000"})]}),m.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-600 rounded-full mt-1",children:m.jsx("div",{className:"w-[45%] h-1.5 bg-pink-500 rounded-full"})})]})]})]}),P1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-cyan-400 dark:border-cyan-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-cyan-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"ANALYTICS"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"relative w-16 h-16 flex-shrink-0",children:[m.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-gray-200 dark:text-zinc-700"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#8B5CF6",strokeWidth:"3",strokeDasharray:"35 65",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#3B82F6",strokeWidth:"3",strokeDasharray:"25 75",strokeDashoffset:"-35",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#10B981",strokeWidth:"3",strokeDasharray:"20 80",strokeDashoffset:"-60",strokeLinecap:"round"}),m.jsx("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"#F59E0B",strokeWidth:"3",strokeDasharray:"15 85",strokeDashoffset:"-80",strokeLinecap:"round"})]}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"text-[8px] text-gray-500 dark:text-zinc-500",children:"Total"}),m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"$4,300"})]})]}),m.jsxs("div",{className:"space-y-1 flex-1",children:[m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Housing 35%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Food 25%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Transport 20%"})]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),m.jsx("span",{className:"text-[9px] text-gray-600 dark:text-zinc-400",children:"Personal 15%"})]})]})]})]}),N1e=()=>m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-xl border-2 border-teal-400 dark:border-teal-600 p-3 relative overflow-hidden",children:[m.jsx("div",{className:"absolute -top-1 -right-1 bg-teal-500 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg",children:"TRENDS"}),m.jsx("div",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300 mb-2",children:"Monthly Spending"}),m.jsx("div",{className:"flex items-end gap-1 h-12",children:[65,45,80,55,70,40].map((t,e)=>m.jsxs("div",{className:"flex-1 flex flex-col items-center gap-0.5",children:[m.jsx("div",{className:"w-full rounded-t",style:{height:`${t}%`,background:`hsl(${200+e*20}, 70%, 55%)`}}),m.jsx("span",{className:"text-[7px] text-gray-400",children:["Jan","Feb","Mar","Apr","May","Jun"][e]})]},e))})]}),Qs=[{id:"housing",label:"Housing",sub:"Rent, Utilities"},{id:"food",label:"Food",sub:"Groceries, Dining"},{id:"transport",label:"Transportation",sub:"Gas, Insurance"},{id:"savings",label:"Savings",sub:"Emergency, Goals"}],D1e=()=>{const[t,e]=A.useState(Qs),n=Pc.useRef(0);return A.useEffect(()=>{const r=[()=>e([Qs[1],Qs[0],Qs[2],Qs[3]]),()=>e([Qs[3],Qs[1],Qs[0],Qs[2]]),()=>e(Qs)],i=setInterval(()=>{n.current=(n.current+1)%r.length,r[n.current]()},2e3);return()=>clearInterval(i)},[]),m.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-2 border border-indigo-300 dark:border-indigo-700 space-y-1",children:[m.jsx(Wr,{mode:"popLayout",children:t.map(r=>m.jsxs(Rt.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"flex items-center gap-2 py-1.5 px-2 bg-indigo-50 dark:bg-indigo-900/40 rounded-lg",children:[m.jsx(qh,{size:14,className:"text-indigo-400 dark:text-indigo-500 flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"text-[11px] font-medium text-indigo-900 dark:text-indigo-200",children:r.label}),m.jsx("div",{className:"text-[9px] text-indigo-600 dark:text-indigo-400",children:r.sub})]})]},r.id))}),m.jsx("p",{className:"text-[9px] text-indigo-500 dark:text-indigo-400 text-center italic mt-1",children:"Categories reordering automatically..."})]})},O1e=({currentMonth:t,onComplete:e,onSkip:n})=>{const[r,i]=A.useState(0),[a,s]=A.useState(0),[o,c]=A.useState(2500),[u,f]=A.useState(cx),[h,g]=A.useState(!1),{addCategory:v}=yt(),b=j=>{f(L=>L.includes(j)?L.filter(B=>B!==j):[...L,j])},x=async()=>{for(let j=0;j<u.length;j++)await v({name:u[j],orderIndex:j,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()},w=async()=>{for(let j=0;j<cx.length;j++)await v({name:cx[j],orderIndex:j,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});n()};A.useEffect(()=>{if(r===5){c(2500);const j=2e3,L=20,B=j/L,z=2500/L;let W=0;const Z=setInterval(()=>{W++;const G=Math.max(0,2500-z*W);c(G),W>=L&&(clearInterval(Z),setTimeout(()=>{let Y=0;const Q=10,J=200,te=500/Q,U=setInterval(()=>{Y++;const X=-(te*Y);c(X),Y>=Q&&clearInterval(U)},J)},1e3))},B);return()=>clearInterval(Z)}},[a,r]);const T=(j=>{const[L,B]=j.split("-");return new Date(parseInt(L),parseInt(B)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),I=[{icon:Rh,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${T}`,content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",m.jsx("strong",{children:"zero-based budgeting"})," method."]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),m.jsxs("div",{className:"bg-gray-100 dark:bg-zinc-800/50 rounded-xl p-3 space-y-2",children:[m.jsx("div",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 text-center mb-1",children:"Your budget will look like this:"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-2 flex justify-between items-center",children:[m.jsx("span",{className:"text-[10px] font-bold text-gray-900 dark:text-white",children:"February 2026"}),m.jsx("span",{className:"text-[10px] font-bold text-green-600",children:"$0.00 left"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(Sm,{size:14,className:"text-green-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Income"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-1.5 text-center",children:[m.jsx(Hh,{size:14,className:"text-purple-500 mx-auto"}),m.jsx("span",{className:"text-[8px] text-gray-600 dark:text-zinc-400",children:"Envelopes"})]})]})]}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:"This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:oce,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:cx.map(j=>m.jsxs("button",{onClick:()=>b(j),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${u.includes(j)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[m.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u.includes(j)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:u.includes(j)&&m.jsx(eo,{size:12,className:"text-white"})}),j]},j))}),u.length===0&&m.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:Sm,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Add your income sources for the month. This could be:"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(eo,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(eo,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(eo,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),m.jsx(A1e,{}),m.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[m.jsxs("strong",{children:["Tap the ",m.jsx(Zd,{className:"w-4 h-4 inline"})," button"]}),' next to "Income Sources" to add your income.']})})]}),color:"green"},{icon:Hh,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),m.jsx(k1e,{}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(eo,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Groceries"})," (Food)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(eo,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx(eo,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),m.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[m.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:qh,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",m.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),m.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[m.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[m.jsx(qh,{className:"w-4 h-4"}),"Drag to Reorder"]}),m.jsxs("div",{className:"space-y-2 mb-3",children:[m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),m.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[m.jsx("strong",{children:"PC:"})," Click and hold on the ",m.jsx("strong",{children:"dots"}),", then drag"]})]}),m.jsx(D1e,{}),m.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400 mt-3",children:[m.jsx("li",{children:"- Reorder categories: Settings  Manage Categories"}),m.jsx("li",{children:"- Reorder envelopes: On the main budget screen"})]})]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Try organizing: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:od,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),m.jsx(C1e,{}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[m.jsx("button",{onClick:()=>s(j=>j+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:m.jsx(Jle,{className:"w-4 h-4"})}),m.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),m.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",m.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[m.jsx("span",{children:"Left to Budget"}),m.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),m.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:m.jsx(Rt.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),m.jsxs(Rt.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job!",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},a)]}),m.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[m.jsx("strong",{children:"Pro tip:"})," Start with essential expenses (rent, utilities, groceries) first, then allocate what's left."]})})]}),color:"blue"},{icon:Qd,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",m.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),m.jsx(I1e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(cce,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Sm,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set a monthly amount to save"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(od,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]})]}),color:"pink"},{icon:gw,title:"Analytics: Spending Insights",description:"Visualize where your money goes",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["The ",m.jsx("strong",{children:"Analytics"})," screen gives you powerful insights into your spending habits over time."]}),m.jsx(P1e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(L8,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Totals"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See a donut chart of spending by category"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(gw,{className:"w-5 h-5 text-cyan-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Spending Breakdown"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Monthly stacked bar chart by category"})]})]})]}),m.jsx("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 border border-cyan-200 dark:border-cyan-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-cyan-900 dark:text-cyan-200",children:[m.jsx("strong",{children:"Access Analytics"}),' from the bottom navigation bar under the "More" menu.']})})]}),color:"blue"},{icon:od,title:"Analytics: Income & Savings",description:"Track your financial health over time",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Monitor your ",m.jsx("strong",{children:"income trends"})," and ",m.jsx("strong",{children:"savings rate"})," to stay on track."]}),m.jsx(N1e,{}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Sm,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Income"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Track income by source over time with stacked bars"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(od,{className:"w-5 h-5 text-teal-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Savings Rate"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"See what percentage of income you're saving each month"})]})]})]}),m.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-3",children:m.jsxs("p",{className:"text-sm text-teal-900 dark:text-teal-200",children:[m.jsx("strong",{children:"Time frames:"})," View 1, 3, 6, 9, or 12 months of data, or filter by year."]})})]}),color:"blue"},{icon:nk,title:"You're Ready to Budget!",description:"Start taking control of your money",content:m.jsxs("div",{className:"space-y-4 text-left",children:[m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),m.jsx("div",{className:"space-y-2",children:["Choose your categories","Add your income sources","Create envelopes in categories","Organize your budget order","Allocate until Left to Budget = $0","Set up Piggybanks for savings goals","Track trends in Analytics"].map((j,L)=>m.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[m.jsx("div",{className:"w-7 h-7 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:m.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold text-xs",children:L+1})}),m.jsx("span",{className:"text-sm",children:j})]},L))}),m.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-4",children:m.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:`Click "Start Budgeting" below and we'll guide you through your first setup!`})})]}),color:"green",useCustomIcon:!0}],O=I[r],D=O.useCustomIcon?nk:O.icon,N=r===I.length-1,C=r===0,P={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}},R=P[O.color]||P.blue;return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:m.jsxs("div",{className:"w-full max-w-2xl",children:[m.jsx(Wr,{children:h&&m.jsx(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(Rt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Onboarding?"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"We'll set up default categories for you. You can always restart this guide from Settings."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Continue Guide"}),m.jsx("button",{onClick:w,className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})}),m.jsx(Wr,{mode:"wait",children:m.jsxs(Rt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"flex justify-end px-4 pt-3",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-zinc-800",children:[m.jsx(U8,{size:14}),"Skip"]})}),m.jsx("div",{className:"px-6 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:O.title}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:O.description})]}),m.jsx("div",{className:"flex flex-col items-center mx-4",children:r===0?m.jsx("img",{src:T1e,alt:"Dollars At Work",className:`w-20 h-20 ${R.text}`}):O.useCustomIcon?m.jsx("img",{src:nk,alt:"Budget Balanced",className:`w-32 h-32 ${R.text}`}):m.jsx("div",{className:`${R.bg} p-3 rounded-xl`,children:typeof D=="string"?null:m.jsx(D,{className:`w-8 h-8 ${R.text}`})})})]})}),m.jsx("div",{className:"px-6 pb-6 pt-2 max-h-[55vh] overflow-y-auto",children:O.content}),m.jsx("div",{className:"px-6 pb-2 flex justify-center gap-1.5",children:I.map((j,L)=>m.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${L===r?`w-8 ${R.button}`:L<r?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},L))}),m.jsx("div",{className:"text-center pb-2",children:m.jsxs("span",{className:"text-xs text-gray-400 dark:text-zinc-500",children:[r+1," of ",I.length]})}),m.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!C&&m.jsxs("button",{onClick:()=>i(j=>j-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[m.jsx(gl,{className:"w-5 h-5"}),"Back"]}),m.jsx("button",{onClick:()=>{if(N)x();else{if(O.title.includes("Choose Categories")&&u.length===0)return;i(j=>j+1)}},disabled:O.title.includes("Choose Categories")&&u.length===0,className:`${C?"flex-1":"flex-[2]"} py-3 px-4 ${R.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:N?m.jsxs(m.Fragment,{children:[m.jsx(Rh,{className:"w-5 h-5"}),"Start Budgeting"]}):m.jsxs(m.Fragment,{children:["Next",m.jsx(ile,{className:"w-5 h-5"})]})})]})]},r)})]})})},R1e=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o})=>{const c=A.useRef(null),[u,f]=A.useState(!1),h=p2(R=>{oY(),o(R,t.id)},{threshold:500,cancelOnMovement:25,detect:Mc.Touch}),g=t.piggybankConfig?.targetAmount,v=t.piggybankConfig?.monthlyContribution??0,b=t.piggybankConfig?.color||"#3B82F6",x=t.piggybankConfig?.paused||!1,w=e,S=(R,j=1)=>{const L=R.replace("#",""),B=parseInt(L,16),z=B>>16&255,W=B>>8&255,Z=B&255;return`rgba(${z}, ${W}, ${Z}, ${j})`},T=`linear-gradient(135deg, ${S(b,.14)} 0%, ${S(b,.05)} 100%)`,I=S(b,.4),O=g&&g>0?Math.min(w/g*100,100):0,D=g&&w>=g;A.useEffect(()=>{a&&a!==t.id&&f(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(f(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&u){const R=setTimeout(()=>{f(!1)},300);return()=>clearTimeout(R)}},[a,u]);const N=R=>{if(u||i){R.preventDefault(),R.stopPropagation();return}n(t.id)},C=a===t.id,P=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:R=>o(R,t.id),children:m.jsx(qh,{size:20})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[m.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[m.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${b}20`},children:m.jsx(Qd,{size:12,style:{color:b}})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx(od,{size:10,style:{color:b}}),m.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",v.toFixed(2),"/mo"]}),x&&m.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[m.jsx(Hle,{size:8})," PAUSED"]})]})]})]}),m.jsxs("div",{className:"text-right flex-shrink-0",children:[m.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",w.toFixed(2)]}),m.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",g?.toFixed(0)||"0"]})]})]}),g&&g>0&&m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${O}%`,backgroundColor:b}})}),D&&!g&&m.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return m.jsx(Rt.div,{...h(),layout:!C,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:R=>{r&&r(R),c.current=R},onClick:N,style:{background:T,borderColor:I,boxShadow:C?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:C?50:1,scale:C?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:P})},fm=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},M1e=12,j1e=(t,e,n)=>Math.min(Math.max(t,e),n),z1e=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f})=>{const h=!!t.isPiggybank,g=t.piggybankConfig?.color||"#3B82F6",v=h?`linear-gradient(135deg, ${fm(g,.18)} 0%, ${fm(g,.08)} 100%)`:void 0,b=h?fm(g,.5):void 0,[x,w]=A.useState(!1),S=p2(L=>{oY(),f(L,t.id)},{threshold:500,cancelOnMovement:25,detect:Mc.Touch}),T=i.filter(L=>L.envelopeId===t.id&&L.month===a),I=T.filter(L=>L.type==="Expense"),O=T.filter(L=>L.type==="Income"),D=I.reduce((L,B)=>L+(B.amount||0),0),N=O.reduce((L,B)=>L+(B.amount||0),0),C=N>0?Math.max(0,D/N*100):0,P=L=>{if(x||o){L.preventDefault(),L.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&w(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(w(!0),u(t.id))},[c,t.id,u]),A.useEffect(()=>{if(!c&&x){const L=setTimeout(()=>{w(!1)},300);return()=>clearTimeout(L)}},[c,x]);const R=m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:L=>f(L,t.id),children:m.jsx(qh,{size:20})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[h&&m.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:fm(g,.4),backgroundColor:fm(g,.15),color:g},children:m.jsx(Qd,{size:10})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),m.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[m.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),m.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"text-red-500":C>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),m.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]}),e>0&&m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-C<=5?"bg-red-500":C>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-C,2)}%`}})})})]})]}),j=c===t.id;return m.jsx(Rt.div,{...S(),layout:!j,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:P,style:{boxShadow:j?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:v,borderColor:b,cursor:j?"grabbing":"pointer",zIndex:j?50:1,scale:j?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${h?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:R})},wB=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o,isFirstCategory:c=!1})=>{if(e.length===0&&t.id==="uncategorized")return null;const[u,f]=A.useState(e),h=A.useRef(e),[g,v]=A.useState(!1),[b,x]=A.useState(null),w=A.useRef(!1),S=A.useRef(null),T=A.useRef({}),I=A.useRef({}),O=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{g||(f(e),h.current=e)},[e,g]);const D=A.useCallback((C,P)=>{const R=I.current[P];if(R){w.current=!0;const j=C.nativeEvent||C;R.dragStart(j)}},[]),N=A.useCallback(C=>P=>{P?T.current[C]=P:delete T.current[C]},[]);return A.useEffect(()=>{const C=()=>{Object.values(I.current).forEach(j=>j?.destroy()),I.current={}};if(!u.length)return;const P=()=>{u.forEach(j=>{const L=T.current[j.id];if(!L||!S.current)return;const B=new aY(S.current,{target:L,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});B.on("dragStart",W=>{if(!w.current){W.stop();return}const Z=W.inputEvent.target;if(Z.closest(".js-budget-target")||Z.tagName==="INPUT"){W.stop();return}const G=h.current.findIndex(J=>J.id===j.id),Y=W.target,Q=Y.getBoundingClientRect();x(j.id),O.current={activeId:j.id,startIndex:G,currentIndex:G,itemHeight:Q.height+M1e},Y.style.transition="none",Y.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",Y.style.zIndex="20",v(!0)});let z=null;B.on("drag",W=>{const Z=W.target;z!==null&&cancelAnimationFrame(z),z=requestAnimationFrame(()=>{const G=O.current;if(G.activeId!==j.id)return;const Y=W.beforeTranslate[1];Z.style.transform=`translateY(${Y}px)`,Z.style.transition="none";const{itemHeight:Q,startIndex:J}=G,te=Math.round(Y/Q),U=j1e(J+te,0,h.current.length-1);U!==G.currentIndex&&(G.currentIndex=U,h.current.forEach((X,re)=>{if(X.id===j.id)return;const K=T.current[X.id];if(!K)return;let ue=0;J<U&&re>J&&re<=U?ue=-Q:J>U&&re>=U&&re<J&&(ue=Q),K.style.transform=ue?`translateY(${ue}px)`:"",K.style.transition="transform 0.2s ease"})),z=null})}),B.on("dragEnd",W=>{z!==null&&(cancelAnimationFrame(z),z=null);const Z=W.target,{startIndex:G,currentIndex:Y}=O.current;if(Z.style.transform="",Z.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",Z.style.boxShadow="",h.current.forEach(Q=>{const J=T.current[Q.id];J&&(J.style.transform="",J.style.transition="")}),G!==Y){const Q=[...h.current],[J]=Q.splice(G,1);Q.splice(Y,0,J),h.current=Q,f(Q),o(Q.map(te=>te.id))}setTimeout(()=>{Z.style.zIndex="",x(null),v(!1),w.current=!1},300)}),B.on("click",()=>{const W=window.event?.target;W&&(W.closest(".js-budget-target")||W.tagName==="INPUT")||a(`/envelope/${j.id}`)}),I.current[j.id]=B})},R=window.setTimeout(P,80);return()=>{clearTimeout(R),C()}},[u,a,o]),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),m.jsx("button",{id:c?"tutorial-add-envelope":void 0,onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:m.jsx(Zd,{size:20})})]}),m.jsx("div",{id:c?"tutorial-allocation-area":void 0,ref:S,className:"space-y-2 relative",children:u.length===0?m.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):m.jsx(Wr,{initial:!1,children:u.map(C=>{const R=(n[r]||[]).find(L=>L.envelopeId===C.id)?.budgetedAmount||0,j=s(C.id);return C.isPiggybank?m.jsx(R1e,{piggybank:C,balance:j,onNavigate:L=>a(`/envelope/${L}`),setMoveableRef:N(C.id),isReorderingActive:g,activelyDraggingId:b,onItemDragStart:()=>{},onLongPressTrigger:D},C.id):m.jsx(z1e,{env:C,budgetedAmount:R,remainingBalance:j,navigate:a,transactions:i,currentMonth:r,setMoveableRef:N,isReorderingActive:g,activelyDraggingId:b,onItemDragStart:()=>{},onLongPressTrigger:D},C.id)})})})]})},L1e=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=w1e(),{setMonth:g,setIsOnboardingActive:v,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:S,fetchCategories:T,envelopes:I,reorderEnvelopes:O,startGuidedTutorial:D}=yt(),N=Qa(),[C,P]=A.useState(!1),[R,j]=A.useState("add"),[L,B]=A.useState(null),[z,W]=A.useState(!1),[Z,G]=A.useState(!1),Y=A.useRef(null),Q=A.useRef(null),[J,te]=A.useState(0);A.useEffect(()=>{S.length===0&&T()},[S.length,T]);const U=A.useMemo(()=>{const ge={},fe=[];return S.forEach(Ae=>ge[Ae.id]=[]),[...t,...e].sort((Ae,Ie)=>(Ae.orderIndex??0)-(Ie.orderIndex??0)).forEach(Ae=>{Ae.categoryId&&ge[Ae.categoryId]?ge[Ae.categoryId].push(Ae):fe.push(Ae)}),{groups:ge,uncategorized:fe}},[S,t,e]),X=A.useCallback(async ge=>{const fe=[...I.map(Re=>Re.id)],ee=new Set(ge),Ae=[];let Ie=0;fe.forEach(Re=>{ee.has(Re)?Ae.push(ge[Ie++]):Ae.push(Re)}),await O(Ae)},[I,O]);A.useLayoutEffect(()=>{if(b)return;const ge=Q.current;if(!ge)return;const fe=()=>te(ge.getBoundingClientRect().height);fe();const ee=new ResizeObserver(()=>fe());return ee.observe(ge),window.addEventListener("resize",fe),()=>{window.removeEventListener("resize",fe),ee.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const ge=setTimeout(()=>{if(b)return;if(x){v(!1);const Ae=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ie=Object.keys(n).some(Re=>(n[Re]||[]).length>0)||Object.keys(a).some(Re=>(a[Re]||[]).length>0);G(!!(Ae&&Ie));return}const fe=(n[i]||[]).length===0&&(a[i]||[]).length===0,ee=Object.keys(n).some(Ae=>(n[Ae]||[]).length>0)||Object.keys(a).some(Ae=>(a[Ae]||[]).length>0);fe?ee?(G(!0),v(!1)):(v(!0),G(!1)):(G(!1),v(!1))},500);return()=>clearTimeout(ge)}},[c,o,i,n,a,x]);const re=()=>{j("add"),B(null),P(!0)},K=ge=>{Y.current&&clearTimeout(Y.current),!z&&(j("edit"),B(ge),P(!0))},ue=ge=>{Y.current&&clearTimeout(Y.current),W(!0),h(ge),setTimeout(()=>W(!1),500)},ne=()=>{P(!1),B(null)},oe=async()=>{G(!1);const{copyPreviousMonthAllocations:ge}=yt.getState();await ge(i)},_e=()=>{w(),v(!1),D()},ae=()=>{w(),v(!1),D()};return c?m.jsx(C7,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&m.jsx("header",{ref:Q,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:m.jsx(_1e,{currentMonth:i,onMonthChange:ge=>{G(!1),g(ge)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((ge,fe)=>ge+fe.amount,0),totalAllocated:(a[i]||[]).filter(ge=>t.some(fe=>fe.id===ge.envelopeId)||e.some(fe=>fe.id===ge.envelopeId)).reduce((ge,fe)=>ge+fe.budgetedAmount,0)}})}),m.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,J+16)},children:[b?m.jsx(O1e,{currentMonth:i,onComplete:_e,onSkip:ae}):Z?m.jsx(E1e,{currentMonth:i,onCopy:oe}):m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"tutorial-income-section",className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[m.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),m.jsx("button",{onClick:re,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:m.jsx(Zd,{size:20})})]}),(n[i]||[]).length===0?m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):m.jsx("div",{className:"space-y-2",children:m.jsx(Wr,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(ge=>m.jsx(Rt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(X_,{onDelete:()=>ue(ge),children:m.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>K(ge),children:[m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:ge.name})}),m.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",ge.amount.toFixed(2)]})]})})},ge.id))})})]}),S.map((ge,fe)=>m.jsx(wB,{category:ge,envelopes:U.groups[ge.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:N,getEnvelopeBalance:f,onReorderGlobal:X,isFirstCategory:fe===0},ge.id)),U.uncategorized.length>0&&m.jsx(wB,{category:{id:"uncategorized",name:"Uncategorized"},envelopes:U.uncategorized,allocations:a,currentMonth:i,transactions:s,navigate:N,getEnvelopeBalance:f,onReorderGlobal:X}),S.length===0&&U.uncategorized.length===0&&m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[m.jsx(Hh,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),m.jsx("button",{onClick:()=>N("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),m.jsx(S1e,{isVisible:C,onClose:ne,mode:R,initialIncomeSource:L})]})]})]})},V1e=[],uY=({selectedCard:t,onCardSelect:e,initialCards:n=V1e,disabled:r=!1,isUserSelected:i=!1})=>{const a=yt(te=>te.appSettings),s=yt(te=>te.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=A.useState(!1),[h,g]=A.useState(!1),[v,b]=A.useState(n),[x,w]=A.useState(null),[S,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[I,O]=A.useState(null),[D,N]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const C=t||o;A.useEffect(()=>{!t&&e&&v.length>0&&e(v[0])},[t,e,v]);const P=te=>{r||(te.id==="add-new"?g(!0):(c(te),e?.(te),f(!1)))},R=()=>{r||f(!u)},j=te=>{r||w(te)},L=async()=>{if(x&&!r){const te=v.filter(U=>U.id!==x.id);if(b(te),C?.id===x.id){const U=te.length>0?te[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(U),e?.(U)}w(null),f(!1);try{await s({paymentSources:te})}catch(U){$.error("Failed to delete card from app settings:",U),b(v),alert("Failed to delete card. Please try again.");return}}},B=()=>{w(null)},z=async()=>{if(r)return;const te=!["Cash","Venmo"].includes(S.network);if(te&&(S.last4.length!==4||!/^\d{4}$/.test(S.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!S.name.trim()){alert("Please enter a name");return}const U={id:`custom-${Date.now()}`,name:S.name.trim(),network:S.network,last4:te?S.last4:void 0,color:S.color},X=[...v,U];b(X),c(U),e?.(U),g(!1),f(!1);try{await s({paymentSources:X})}catch(re){$.error("Failed to save card to app settings:",re),b(v),c(C),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},W=(te,U)=>{r||(O(U),te.dataTransfer.effectAllowed="move")},Z=(te,U)=>{r||!I||(te.preventDefault(),te.dataTransfer.dropEffect="move",N(U))},G=()=>{N(null)},Y=async(te,U)=>{if(r||!I)return;te.preventDefault(),N(null);const X=v.findIndex(K=>K.id===I.id);if(X===-1||X===U)return;const re=[...v];re.splice(X,1),re.splice(U,0,I),b(re),O(null);try{await s({paymentSources:re})}catch(K){$.error("Failed to reorder cards:",K),b(v),alert("Failed to reorder cards. Please try again.")}},Q=()=>{O(null),N(null)},J=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&m.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),m.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[m.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:C.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:C.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(C.network)?C.network==="Cash"?"$$$":"@":` ${C.last4||""}`})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:C.name}),m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(C.network)?C.network:`(...${C.last4})`})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&m.jsxs("div",{className:"card-stack-dropdown",children:[v.length>1&&m.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),m.jsx("div",{className:"card-stack",children:m.jsx(Wr,{initial:!1,mode:"popLayout",children:[...v,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((te,U)=>{const X=C.id===te.id,re=te.id==="add-new",K=["Cash","Venmo"].includes(te.network);return m.jsx(Rt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(X_,{onDelete:()=>!re&&!r&&j(te),threshold:-80,children:m.jsxs("div",{className:`card-stack-item ${X?"selected":""} ${re?"add-new-card":""} ${I?.id===te.id?"dragging":""} ${D===U?"drag-over":""}`,onClick:()=>P(te),draggable:!re&&!r,onDragStart:re?void 0:ue=>W(ue,te),onDragOver:re?void 0:ue=>Z(ue,U),onDragLeave:re?void 0:G,onDrop:re?void 0:ue=>Y(ue,U),onDragEnd:re?void 0:Q,style:{backgroundColor:re?"#f3f4f6":te.color,color:re?"#374151":te.color==="#e3e3e3"?"#000":"#fff",zIndex:v.length-U,opacity:I?.id===te.id?.5:1,transform:D===U?"scale(1.02)":"scale(1)"},children:[m.jsxs("div",{className:"card-header",children:[m.jsx("span",{className:"card-network",children:re?"":te.network}),X&&!re&&m.jsx("span",{className:"selected-indicator",children:""})]}),m.jsxs("div",{className:"card-details",children:[m.jsx("div",{className:"card-name",children:te.name}),m.jsx("div",{className:"card-number",children:re?"":K?te.network==="Cash"?"$$$":"@":` ${te.last4}`})]}),re&&m.jsx("div",{className:"add-icon",children:m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),m.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},te.id)})})})]})]}),h&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),m.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),m.jsx("input",{type:"text",value:S.name,onChange:te=>T({...S,name:te.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),m.jsxs("select",{value:S.network,onChange:te=>T({...S,network:te.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[m.jsx("option",{value:"Visa",children:"Visa"}),m.jsx("option",{value:"Mastercard",children:"Mastercard"}),m.jsx("option",{value:"Amex",children:"Amex"}),m.jsx("option",{value:"Cash",children:"Cash"}),m.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(S.network)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),m.jsx("input",{type:"text",value:S.last4,onChange:te=>T({...S,last4:te.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:J.map(te=>m.jsx("button",{type:"button",onClick:()=>T({...S,color:te}),className:`w-full h-10 rounded-lg border-2 transition-all ${S.color===te?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:te}},te))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),m.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:S.color},children:[m.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:S.network}),m.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(S.network)?S.network==="Cash"?"$$$":"@":` ${S.last4||"0000"}`})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",m.jsx("span",{className:"font-medium",children:x.name}),"?"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{type:"button",onClick:B,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},dY=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const{categories:i}=yt(),[a,s]=A.useState([]),[o,c]=A.useState(!1),u=A.useRef(null);A.useEffect(()=>{r&&!o&&t.some(N=>N.id===r)&&(s([r]),c(!0))},[r,t,o]);const[f,h]=A.useState({}),[g,v]=A.useState(e),b=A.useMemo(()=>{const D=[],N=[],C={};return i.forEach(P=>{C[P.id]=[]}),t.forEach(P=>{P.categoryId&&C[P.categoryId]?C[P.categoryId].push(P):N.push(P)}),i.sort((P,R)=>(P.orderIndex??0)-(R.orderIndex??0)).forEach(P=>{C[P.id].length>0&&D.push({name:P.name,id:P.id,envelopes:C[P.id]})}),N.length>0&&D.push({name:"Other",id:"uncategorized",envelopes:N}),D},[t,i]),x=D=>{s(N=>N.includes(D)?N.filter(C=>C!==D):[...N,D])},w=(D,N)=>{h(C=>({...C,[D]:N}))},S=Pc.useRef(a.length);A.useEffect(()=>{if(a.length===1){const D=a[0];h({[D]:e})}else if(a.length>1&&S.current<=1){const D={};a.forEach(N=>{D[N]=0}),h(D)}S.current=a.length},[a.length,a,e]),A.useEffect(()=>{const D=Object.values(f).reduce((N,C)=>N+(C||0),0);v(e-D),n(f)},[f,e,n]),A.useEffect(()=>{const D={...f};Object.keys(D).forEach(N=>{a.includes(N)||delete D[N]}),Object.keys(D).length!==Object.keys(f).length&&h(D)},[a,f]),A.useEffect(()=>{const D=u.current;if(!D)return;const N=()=>{const{scrollTop:C,scrollHeight:P,clientHeight:R}=D;C===0?D.scrollTop=1:C+R>=P&&(D.scrollTop=P-R-1)};return D.addEventListener("touchstart",N,{passive:!0}),()=>D.removeEventListener("touchstart",N)},[]);const T=()=>{s([]),h({})},I=Math.abs(g)<.01&&a.length>0,O=a.length>0&&Math.abs(g)>.01;return m.jsxs("div",{className:"space-y-3",children:[a.length>1&&m.jsxs("div",{className:`p-3 rounded-lg ${O?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":I?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),m.jsxs("span",{className:`font-bold text-lg ${O?"text-red-600 dark:text-red-400":I?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",g.toFixed(2)]})]}),O&&m.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:a.length>1?"Split Across Envelopes":"Select Envelope"}),a.length>0&&m.jsx("button",{type:"button",onClick:T,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),m.jsx("div",{ref:u,className:"max-h-72 overflow-y-auto rounded-lg border border-gray-200 dark:border-zinc-800 overscroll-contain",style:{WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:b.map(D=>m.jsxs("div",{children:[m.jsx("div",{className:"sticky top-0 z-10 px-3 py-1.5 bg-gray-100 dark:bg-zinc-800 border-b border-gray-200 dark:border-zinc-700",children:m.jsx("span",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider",children:D.name})}),D.envelopes.map(N=>{const C=a.includes(N.id);return m.jsxs("div",{onClick:()=>x(N.id),className:`flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 transition-colors cursor-pointer active:bg-gray-100 dark:active:bg-zinc-700 ${C?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 transition-colors ${C?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-zinc-600"}`,children:C&&m.jsx(V8,{size:14,className:"text-white",strokeWidth:3})}),m.jsx("span",{className:`flex-1 text-sm ${C?"text-blue-900 dark:text-blue-100 font-medium":"text-gray-900 dark:text-white"}`,children:N.name}),C&&a.length>1&&m.jsxs("div",{className:"flex items-center",onClick:P=>P.stopPropagation(),children:[m.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400 text-sm",children:"$"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:f[N.id]||"",onChange:P=>w(N.id,parseFloat(P.target.value)||0),className:"w-24 px-2 py-1 text-sm border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},N.id)})]},D.id))})]})},fY=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i,envelopes:a})=>{const{addTransaction:s,updateTransaction:o,deleteTransaction:c,currentMonth:u}=yt(),[f,h]=A.useState(""),[g,v]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(new Date().toISOString().split("T")[0]),[T,I]=A.useState(null),[O,D]=A.useState(null),[N,C]=A.useState({}),P=a?[...a].filter(z=>z.isActive!==!1).sort((z,W)=>{const Z=z.orderIndex??0,G=W.orderIndex??0;return Z!==G?Z-G:z.name.localeCompare(W.name)}):[];A.useEffect(()=>{if(t)if(n==="edit"&&i){if(h(i.amount.toString()),v(i.merchant||""),x(i.description),I(i.paymentMethod||null),a){const z=a.find(W=>W.id===i.envelopeId);D(z||r),C({[i.envelopeId]:i.amount})}try{const z=new Date(i.date);isNaN(z.getTime())?($.warn("Invalid date in transaction:",i.date),S(new Date().toISOString().split("T")[0])):S(z.toISOString().split("T")[0])}catch(z){$.error("Error parsing transaction date:",z),S(new Date().toISOString().split("T")[0])}}else h(""),v(""),x(""),S(new Date().toISOString().split("T")[0]),D(r),C({})},[t,n,i,r,a]);const R=async z=>{z.preventDefault();const W=parseFloat(f);if(isNaN(W)||W<=0){$.log(" Invalid amount:",f);return}const Z=n==="edit"&&Object.keys(N).length>0;$.log(" Saving transaction:",{mode:n,amount:W,note:b,date:w,splitAmounts:N,paymentMethod:T});try{const G=new Date(w),Y=`${G.getFullYear()}-${(G.getMonth()+1).toString().padStart(2,"0")}`;if(Y!==u){const Q=`This transaction date (${Y}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(Q))return}n==="add"?($.log(" Adding income transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(O||r).id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?($.log(" Adding expense transaction"),await s({amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(O||r).id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&($.log(" Updating transaction"),Z?await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:Object.keys(N)[0]||i.envelopeId,paymentMethod:T||void 0}):await o({...i,amount:W,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:(O||r).id,paymentMethod:T||void 0})),$.log(" Transaction saved successfully"),e()}catch(G){$.error(" Error saving transaction:",G),alert("Failed to save transaction: "+(G instanceof Error?G.message:"Unknown error"))}},j=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},L=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",B=n==="add"?"text-green-500":"text-red-500";return m.jsx(Wr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(Rt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10 flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L}),m.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!f||parseFloat(f)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),m.jsxs("form",{onSubmit:R,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${B}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:z=>{const W=z.target.value.replace(/\D/g,"");if(!W){h("");return}const G=(parseInt(W,10)/100).toFixed(2);h(G)},onKeyDown:z=>{(z.key==="e"||z.key==="E"||z.key==="+"||z.key==="-")&&z.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${B} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:g,onChange:z=>v(z.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&m.jsx(uY,{selectedCard:T,onCardSelect:I}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:b,onChange:z=>x(z.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const z=new Date(w);return`${z.getFullYear()}-${(z.getMonth()+1).toString().padStart(2,"0")}`!==u?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Mh,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:w,onChange:z=>{$.log("Date changed to:",z.target.value),S(z.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&a&&m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(dY,{envelopes:P,transactionAmount:parseFloat(f)||0,onSplitChange:C,initialSelectedEnvelopeId:i?.envelopeId})}),n==="edit"&&!i?.isAutomatic&&m.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:m.jsxs("button",{type:"button",onClick:j,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[m.jsx($8,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},B1e=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=yt(),[a,s]=A.useState(""),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),v=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const S=parseFloat(o);isNaN(S)||S<=0||!a||(i(n.id,a,S,u,new Date(h)),e())},x=r.find(w=>w.id===a);return m.jsx(Wr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),m.jsxs(Rt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),m.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),m.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),m.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),m.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),m.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[m.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),v.map(w=>m.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const S=w.target.value.replace(/\D/g,"");if(!S){c("");return}const I=(parseInt(S,10)/100).toFixed(2);c(I)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),m.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),m.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&m.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",m.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},F1e=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,v]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,S]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),v(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),v("piggy-bank"),x(!1))},[r,t]);const T=async O=>{if(O.preventDefault(),!(!i.trim()||!c)){S(!0);try{const D={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(D.piggybankConfig.targetAmount=parseFloat(s)),r&&(D.id=r.id,D.currentBalance=r.currentBalance,D.lastUpdated=new Date().toISOString(),D.isActive=r.isActive,D.orderIndex=r.orderIndex,D.userId=r.userId),await n(D),e()}catch(D){$.error("Error saving piggybank:",D),alert("Failed to save piggybank")}finally{S(!1)}}},I=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return m.jsx(Wr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsxs(Rt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:m.jsx(Qd,{size:20,className:"text-blue-600 dark:text-blue-400"})}),m.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:m.jsx(s_,{size:24})})]}),m.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),m.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:O=>a(O.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:O=>{const D=O.target.value.replace(/\D/g,"");if(!D){u("");return}const C=(parseInt(D,10)/100).toFixed(2);u(C)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:O=>{const D=O.target.value.replace(/\D/g,"");if(!D){o("");return}const C=(parseInt(D,10)/100).toFixed(2);o(C)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsx("div",{className:"space-y-2",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:b,onChange:O=>x(O.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:I.map(O=>m.jsx("button",{type:"button",onClick:()=>h(O.value),className:`w-full aspect-square rounded-lg transition-all ${f===O.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:O.value},title:O.label},O.value))})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},U1e=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return $.error("Date error:",e),"Error"}},$1e=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},hY=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;$.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),m.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[m.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&m.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&m.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),m.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[m.jsx("span",{children:U1e(t.date)}),e&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&m.jsxs(m.Fragment,{children:[m.jsx("span",{children:""}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),m.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",$1e(t.amount)]}),n?m.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?m.jsx(eo,{className:"text-green-500",size:20}):m.jsx(TL,{className:"text-gray-400",size:20})}):m.jsx("span",{children:t.reconciled?m.jsx(eo,{className:"text-green-500",size:20}):m.jsx(TL,{className:"text-gray-400",size:20})})]})]})},rk=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),q1e=()=>{const{id:t}=Jse(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:v,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w,fetchTransactionsForEnvelope:S}=yt(),{showToast:T}=uu(),I=Qa(),O=Ps(),[D,N]=A.useState(!1),[C,P]=A.useState(!1),[R,j]=A.useState(!1),[L,B]=A.useState(null),[z,W]=A.useState(!1),[Z,G]=A.useState(!1),[Y,Q]=A.useState(""),J=A.useRef(null),te=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const U=e.find(ee=>ee.id===t);A.useEffect(()=>{U?.isPiggybank&&U.id&&S(U.id)},[U?.isPiggybank,U?.id,S]);const X=async ee=>{if(U)try{const Ae={...U,...ee,id:U.id,userId:U.userId,currentBalance:U.currentBalance,lastUpdated:new Date().toISOString(),isActive:U.isActive,orderIndex:U.orderIndex};await w(Ae),T("Piggybank updated successfully","success"),W(!1)}catch(Ae){$.error("Failed to update piggybank:",Ae),T("Failed to update piggybank","error")}},re=U?.isPiggybank?U.piggybankConfig?.monthlyContribution||0:g[h]?.find(ee=>ee.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{Z&&(Q(re.toString()),setTimeout(()=>{J.current?.focus(),J.current?.select()},50))},[Z,re]);const K=ee=>{const Ae=(v[h]||[]).reduce((Be,nt)=>Be+nt.amount,0),Ie=g[h]||[];let Le=Ie.map(Be=>U&&Be.envelopeId===U.id&&ee!==void 0?{...Be,budgetedAmount:ee}:Be).filter(Be=>{const nt=e.find(Ee=>Ee.id===Be.envelopeId);return nt?nt.isActive!==!1:!1}).reduce((Be,nt)=>Be+nt.budgetedAmount,0);return ee!==void 0&&U&&(Ie.some(nt=>nt.envelopeId===U.id)||(Le+=ee)),Ae-Le},ne=Z?K(parseFloat(Y)||0):K(),oe=async()=>{if(!U||te.current)return;const ee=parseFloat(Y);if(isNaN(ee)||ee<0){T("Please enter a valid positive number","error");return}te.current=!0;try{U.isPiggybank?await x(U.id,ee):await b(U.id,ee),G(!1)}catch(Ae){$.error("Failed to save budget:",Ae),T("Failed to update budget","error")}finally{te.current=!1}};if(!U)return i?m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Loading envelope..."})}):m.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:m.jsx("p",{children:"Envelope not found."})});if(U.isPiggybank){const ee=n.filter(Ae=>Ae.envelopeId===U.id);$.log(" Piggybank:",U.name),$.log(" Created at:",U.createdAt),$.log(" Transactions:",ee.map(Ae=>({date:Ae.date,description:Ae.description,amount:Ae.amount})))}const _e=n.filter(ee=>ee.envelopeId===U.id).filter(ee=>{if(ee.description==="Budgeted"||ee.description==="Piggybank Contribution")return!1;if(U.isPiggybank){if(!U.createdAt)return!0;const Ae=t1(U.createdAt).toISOString().split("T")[0];return t1(ee.date).toISOString().split("T")[0]>=Ae}return ee.month===h||!ee.month}).sort((ee,Ae)=>new Date(Ae.date).getTime()-new Date(ee.date).getTime()),ae=()=>{O.state?.fromGlobalFAB?I("/"):I(-1)},ge=()=>{t&&(a(t),I(-1))},fe=ee=>{const Ae={...ee,reconciled:!ee.reconciled};o(Ae)};return m.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[m.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[m.jsx("button",{onClick:()=>{if(U.isPiggybank)W(!0);else{const ee=prompt("Rename envelope:",U.name);ee&&ee.trim()&&t&&s(t,ee)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:U.isPiggybank?"Edit":"Rename"}),m.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.name}),m.jsx("button",{onClick:ae,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),m.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const ee=U.isPiggybank?f(U.id):f(U.id,h);return $.log(`Debug: Envelope ${U.name} Balance:`,ee),m.jsx("span",{className:`text-xl font-bold ${ee<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:rk(ee)})})()]}),m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:U.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),Z?m.jsx("form",{onSubmit:ee=>{ee.preventDefault(),oe()},className:"flex items-center gap-2",children:m.jsx("input",{ref:J,type:"number",step:"0.01",value:Y,onChange:ee=>Q(ee.target.value),onBlur:oe,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):m.jsx("div",{onClick:()=>G(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:m.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:rk(re)})})]}),m.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${ne<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":ne===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[m.jsx("span",{children:"Left to Budget:"}),m.jsx("span",{children:rk(ne)})]})]})]}),m.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>N(!0),children:[m.jsx(yle,{className:"w-5 h-5 mr-3"}),"Add Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>P(!0),children:[m.jsx(mle,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),m.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>j(!0),children:[m.jsx(nle,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),m.jsxs("section",{className:"mt-6",children:[m.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:_e.length===0?m.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):m.jsx(Wr,{initial:!1,mode:"popLayout",children:_e.map(ee=>m.jsx(Rt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(X_,{disabled:ee.isAutomatic,onDelete:()=>{if(!ee.id)return;const Ae={...ee};c(ee.id),T("Transaction deleted","neutral",()=>u(Ae))},children:m.jsx(hY,{transaction:ee,onReconcile:()=>fe(ee),onEdit:()=>{ee.isAutomatic||B(ee)}})})},ee.id))})})]}),m.jsx("div",{className:"mt-8",children:m.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const ee=U.isPiggybank?`Are you sure you want to delete "${U.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${U.name}" from ${h}? This will delete all transactions for this month only.`;confirm(ee)&&ge()},children:[m.jsx($8,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),m.jsx(fY,{isVisible:D||C||!!L,onClose:()=>{N(!1),P(!1),B(null)},mode:D?"add":C?"spend":"edit",currentEnvelope:U,initialTransaction:L}),m.jsx(B1e,{isVisible:R,onClose:()=>j(!1),sourceEnvelope:U}),m.jsx(F1e,{isOpen:z,onClose:()=>W(!1),onSave:X,existingPiggybank:U})]})},G1e=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),v=w=>{const[S,T]=w.split("-");return new Date(parseInt(S),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return m.jsx(Wr,{children:t&&m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[m.jsx(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),m.jsxs(Rt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[m.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",v(r)]}),m.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),m.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),m.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:m.jsxs("ul",{className:"space-y-1",children:[m.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),m.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),m.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),m.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[m.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:m.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),m.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",m.jsx("strong",{children:v(r)})," will be permanently removed."]})]})}),m.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[m.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),m.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},H1e=()=>{const t=Qa(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:v,clearMonthData:b,handleUserLogout:x,resetOnboarding:w,resetGuidedTutorial:S}=yt(),{deleteAccount:T,currentUser:I,logout:O}=nn(),[D,N]=A.useState(null),[C,P]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[R,j]=A.useState(!1),[L,B]=A.useState(""),[z,W]=A.useState(!1),[Z,G]=A.useState(!1),[Y,Q]=A.useState(null),[J,te]=A.useState(!1),[U,X]=A.useState(!1),re=978307200,K=c?.theme??"system",ue=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(Ee=>{$.error("Failed to initialize app settings:",Ee)})},[f,c]);const ne=(Ee,je)=>{N({type:Ee,text:je}),setTimeout(()=>N(null),3500)},oe=A.useMemo(()=>{const Ee=n.length,je=r.length,gt=v?g[v]||[]:[],Nt=Object.values(h).reduce((Vn,Sn)=>Vn+Sn.length,0),St=gt.length,it=n.reduce((Vn,Sn)=>{const jr=Sn.isPiggybank?o(Sn.id):o(Sn.id,v);return Vn+(typeof jr=="number"?jr:0)},0),vt=0,_n=r.reduce((Vn,Sn)=>{let jr=0;if(typeof Sn.date=="string"){const Si=Date.parse(Sn.date);jr=Number.isNaN(Si)?0:Si}else typeof Sn.date=="number"&&(jr=Sn.date<2e9?(Sn.date+re)*1e3:Sn.date);return Math.max(Vn,jr)},0),ct=vt||_n?new Date(Math.max(vt,_n)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Ee,transactionCount:je,incomeSourceCount:Nt,allocationCount:St,totalBalance:it,lastUpdated:ct}},[n,r,h,g,v]),_e=()=>{try{$.log(" Creating backup...");const Ee={appVersion:"1.9.6",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(it=>({...it,currentBalance:(()=>{const vt=it.isPiggybank?o(it.id):o(it.id,v);return typeof vt=="number"?vt:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},je=new Blob([JSON.stringify(Ee,null,2)],{type:"application/json"}),gt=URL.createObjectURL(je),Nt=document.createElement("a");Nt.href=gt,Nt.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Nt),Nt.click(),document.body.removeChild(Nt),URL.revokeObjectURL(gt);const St=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",St),P(St),Q({success:!0,message:"Backup downloaded successfully."})}catch(Ee){$.error(Ee),Q({success:!1,message:"Failed to create backup file.",onRetry:_e})}},ae=()=>{G(!0),Q(null);try{const Ee=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],je=r.filter(ct=>ct.description!=="Budgeted"&&ct.description!=="Piggybank Contribution"),gt=new Set,Nt=[];for(const ct of je){let Vn,Sn,jr;if(ct.splitGroupId&&!gt.has(ct.splitGroupId)){gt.add(ct.splitGroupId);const zt=je.filter(Ei=>Ei.splitGroupId===ct.splitGroupId);Vn=zt.reduce((Ei,ya)=>Ei+ya.amount,0),Sn=zt.map(Ei=>n.find(ya=>ya.id===Ei.envelopeId)?.name||"Unknown").join(", "),jr=zt.every(Ei=>Ei.reconciled)}else{if(ct.splitGroupId&&gt.has(ct.splitGroupId))continue;Vn=ct.amount,Sn=n.find(zt=>zt.id===ct.envelopeId)?.name||"Unknown",jr=ct.reconciled}const Si=(ct.merchant||"").replace(/"/g,'""'),Ds=(ct.description||"").replace(/"/g,'""');let Xr="";ct.paymentMethod&&(Xr=`${ct.paymentMethod.name} (...${ct.paymentMethod.last4})`);const Nn=Xr.replace(/"/g,'""');let Wn="Invalid Date";if(ct.date){if(typeof ct.date=="string")Wn=ct.date.split("T")[0];else if(typeof ct.date=="number"){const zt=ct.date<2e9?(ct.date+re)*1e3:ct.date;Wn=new Date(zt).toISOString().split("T")[0]}}Nt.push([Wn,`"${Si}"`,`"${Nn}"`,`"${Ds}"`,Vn.toFixed(2),ct.type,`"${Sn}"`,jr?"Yes":"No"].join(","))}const St=[Ee.join(","),...Nt].join(`
`),it=new Blob([St],{type:"text/csv;charset=utf-8;"}),vt=URL.createObjectURL(it),_n=document.createElement("a");_n.href=vt,_n.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(_n),_n.click(),document.body.removeChild(_n),URL.revokeObjectURL(vt),Q({success:!0,message:"Transactions CSV exported successfully."})}catch(Ee){$.error(Ee),Q({success:!1,message:"Failed to export CSV. Please try again.",onRetry:ae})}finally{G(!1)}},ge=()=>{e.current?.click()},fe=Ee=>{const je=Ee.target.files?.[0];if(!je)return;const gt=new FileReader;gt.onload=async Nt=>{try{const St=JSON.parse(Nt.target?.result),it=await s(St);if(!it.success){ne("error",it.message);return}if(St.appSettings?.theme)try{await u({theme:St.appSettings.theme})}catch(vt){$.error("Failed to update imported settings:",vt)}ne("success",`Loaded ${St.envelopes?.length??0} envelopes, ${St.transactions?.length??0} transactions.`)}catch(St){$.error(St),ne("error","Invalid backup file. Please verify the JSON.")}},gt.readAsText(je),Ee.target.value=""},ee=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),ne("success","All data has been permanently deleted."),t("/")}catch(Ee){$.error("Reset failed:",Ee),ne("error","Failed to delete all data. Some data may remain.")}},Ae=async()=>{if(!L.trim()){ne("error","Please enter your password to confirm account deletion.");return}j(!0);try{await a(),await T(L)?ne("success","Your account has been permanently deleted."):ne("error","Failed to delete account. Please try again.")}catch(Ee){$.error("Account deletion failed:",Ee),ne("error","Failed to delete account. Please try again.")}finally{j(!1),W(!1),B("")}},Ie=async()=>{if(!I){ne("error","You must be logged in to clean up data.");return}te(!0);try{const Ee=await g2.cleanupOrphanedData(I.id),je=Ee.orphanedAllocationsDeleted+Ee.orphanedTransactionsDeleted;je>0?ne("success",`Cleaned ${je} orphaned items: ${Ee.orphanedAllocationsDeleted} allocations and ${Ee.orphanedTransactionsDeleted} transactions.`):ne("success","No orphaned data found. Your database is already clean!")}catch(Ee){$.error("Cleanup failed:",Ee),ne("error","Failed to clean up orphaned data. Please try again.")}finally{te(!1)}},Re=()=>{X(!0)},Le=async()=>{X(!1),await b(v),ne("success","Month data has been reset.")},Be=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),O(),t("/")}catch(Ee){$.error("Logout failed:",Ee)}},nt=I?.displayName?.charAt(0)?.toUpperCase()||I?.email?.charAt(0)?.toUpperCase()||"U";return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[m.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),m.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[D&&m.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${D.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[D.type==="success"?m.jsx(mw,{size:18}):m.jsx(vw,{size:18}),D.text]}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:nt}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:I?.displayName||I?.email?.split("@")[0]||"User"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:I?.email}),m.jsxs("button",{onClick:Be,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[m.jsx(Ule,{size:14})," Log Out"]})]})]})}),m.jsx("section",{children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(AL,{className:"text-blue-500",size:22}),m.jsxs("div",{children:[m.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.envelopeCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.transactionCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.incomeSourceCount})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),m.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.allocationCount})]})]})]})}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:m.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),m.jsx(us,{className:"text-gray-400",size:18})]})})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[K==="light"&&m.jsx("span",{className:"text-orange-500 text-lg",children:""}),K==="dark"&&m.jsx("span",{className:"text-purple-500 text-lg",children:""}),K==="system"&&m.jsx("span",{className:"text-gray-500 text-lg",children:""}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:K})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Ee=>m.jsx("button",{onClick:async()=>{try{await u({theme:Ee.value})}catch(je){$.error("Failed to update theme setting:",je)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${K===Ee.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Ee.label},Ee.value))})]}),m.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:ue})]}),m.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Ee=>m.jsx("button",{onClick:async()=>{try{await u({fontSize:Ee.value})}catch(je){$.error("Failed to update font size setting:",je)}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${ue===Ee.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:m.jsx("span",{className:Ee.sizeClass,children:Ee.label})},Ee.value))})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Rh,{className:"text-purple-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),m.jsx(us,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>{S(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Rh,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Guided Tutorial"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Walk through the hands-on setup again"})]})]}),m.jsx(us,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[m.jsxs("button",{onClick:_e,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(AL,{className:"text-blue-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),m.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",C]})]})]}),m.jsx(us,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:ge,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(vce,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),m.jsx(us,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:ae,disabled:Z,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[Z?m.jsx(kL,{className:"text-blue-500 animate-spin",size:20}):m.jsx(Ile,{className:"text-blue-500",size:20}),m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Z?"Preparing CSV":"Export Transactions (CSV)"})]}),m.jsx(us,{className:"text-gray-400",size:18})]}),m.jsx("input",{type:"file",ref:e,onChange:fe,accept:".json",className:"hidden"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[m.jsxs("button",{onClick:Re,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Gh,{className:"text-orange-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),m.jsx(us,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:Ie,disabled:J,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[J?m.jsx(kL,{className:"text-yellow-500 animate-spin",size:20}):m.jsx(Rh,{className:"text-yellow-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:J?"Cleaning Data...":"Purge Orphaned Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),m.jsx(us,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:ee,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(vw,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),m.jsx(us,{className:"text-gray-400",size:18})]}),m.jsxs("button",{onClick:()=>W(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Mh,{className:"text-red-500",size:20}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),m.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),m.jsx(us,{className:"text-gray-400",size:18})]})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:m.jsxs("div",{className:"p-4",children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),m.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),ne("success","Token copied to clipboard")},className:"p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",title:"Copy token",children:m.jsx("div",{className:"flex items-center gap-1",children:m.jsx("span",{className:"text-sm font-medium",children:"Copy"})})}),m.jsx("button",{onClick:async()=>{if(confirm("Are you sure you want to regenerate your Siri token? You will need to update your Shortcut.")){const Ee=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Ee}),ne("success","Siri token regenerated")}},className:"p-2 bg-gray-200 dark:bg-zinc-700 text-gray-700 dark:text-zinc-300 rounded-lg hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",title:"Regenerate token",children:m.jsx(Gh,{size:20})})]}):m.jsx("button",{onClick:async()=>{const Ee=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Ee}),ne("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),m.jsxs("div",{className:"text-center py-4",children:[m.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:["Version ","1.9.6"," (PWA)"]}),"        "]}),Y&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Y.success?m.jsx(mw,{className:"text-green-500",size:24}):m.jsx(Mh,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Y.success?"Success":"Error"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:Y.message}),m.jsxs("div",{className:"flex gap-2",children:[Y.onRetry&&m.jsx("button",{onClick:()=>{Q(null),Y.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),m.jsx("button",{onClick:()=>Q(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),m.jsx(G1e,{isVisible:U,onClose:()=>X(!1),onConfirm:Le,currentMonth:v,incomeCount:(h[v]||[]).length,totalIncome:(h[v]||[]).reduce((Ee,je)=>Ee+je.amount,0),allocationCount:(g[v]||[]).filter(Ee=>n.some(je=>je.id===Ee.envelopeId)).length,totalAllocated:(g[v]||[]).filter(Ee=>n.some(je=>je.id===Ee.envelopeId)).reduce((Ee,je)=>Ee+je.budgetedAmount,0),transactionCount:r.filter(Ee=>Ee.month===v).length,totalTransactionAmount:r.filter(Ee=>Ee.month===v).reduce((Ee,je)=>Ee+je.amount,0)}),z&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx(Mh,{className:"text-red-500",size:24}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),m.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),m.jsx("input",{type:"password",value:L,onChange:Ee=>B(Ee.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>{W(!1),B("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:Ae,disabled:R||!L.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Deleting...":"Delete Account"})]})]})})]})]})},K1e=()=>{const t=Qa(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=yt(),{showToast:s}=uu(),[o,c]=A.useState(!1),[u,f]=A.useState(""),[h,g]=A.useState(null),[v,b]=A.useState(""),[x,w]=A.useState(e),S=A.useRef(e),[T,I]=A.useState(!1),[O,D]=A.useState(null),N=A.useRef(!1),C=A.useRef(null),P=A.useRef({}),R=A.useRef({}),j=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),S.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const L=A.useCallback((J,te)=>{$.log(" Long press triggered for category:",te);const U=R.current[te];if(U){$.log(" Moveable instance found, starting drag"),N.current=!0;const X=J.nativeEvent||J;U.dragStart(X)}else $.log(" No moveable instance found for:",te)},[]),B=A.useCallback(J=>te=>{te?P.current[J]=te:delete P.current[J]},[]),z=async J=>{if(J.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(te){$.error(te),s("Failed to add category","error")}},W=async J=>{if(!v.trim())return;const te=e.find(U=>U.id===J);if(te)try{await r({...te,name:v.trim()}),g(null),s("Category updated","success")}catch(U){$.error(U),s("Failed to update category","error")}},Z=async J=>{if(confirm("Are you sure? Envelopes in this category will become Uncategorized."))try{await i(J),s("Category deleted","success")}catch(te){$.error(te),s("Failed to delete category","error")}},G=8,Y=(J,te,U)=>Math.max(te,Math.min(U,J)),Q=A.useCallback(async J=>{if(!J.length)return;const te=J.map(U=>U.id);try{await a(te)}catch(U){$.error("Failed to persist category order:",U),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const J=()=>{Object.values(R.current).forEach(X=>X?.destroy()),R.current={}};if(!x.length)return;const te=()=>{x.forEach(X=>{const re=P.current[X.id];if(!re||!C.current)return;const K=new aY(C.current,{target:re,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});K.on("dragStart",ne=>{if($.log(" Moveable dragStart event",{isManualDrag:N.current,categoryId:X.id}),!N.current){$.log(" Stopping drag - not manual"),ne.stop();return}const oe=ne.inputEvent.target;if(oe.tagName==="INPUT"||oe.tagName==="BUTTON"||oe.closest("button")){$.log(" Stopping drag - clicked on button/input"),ne.stop();return}$.log(" Drag starting for category:",X.id);const _e=S.current.findIndex(fe=>fe.id===X.id),ae=ne.target,ge=ae.getBoundingClientRect();D(X.id),j.current={activeId:X.id,startIndex:_e,currentIndex:_e,itemHeight:ge.height+G},ae.style.transition="none",ae.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",ae.style.zIndex="20",I(!0)});let ue=null;K.on("drag",ne=>{const oe=ne.target;ue!==null&&cancelAnimationFrame(ue),ue=requestAnimationFrame(()=>{const _e=j.current;if(_e.activeId!==X.id)return;const ae=ne.beforeTranslate[1];oe.style.transform=`translateY(${ae}px)`,oe.style.transition="none";const{itemHeight:ge,startIndex:fe}=_e,ee=Math.round(ae/ge),Ae=Y(fe+ee,0,S.current.length-1);Ae!==_e.currentIndex&&(_e.currentIndex=Ae,S.current.forEach((Ie,Re)=>{if(Ie.id===X.id)return;const Le=P.current[Ie.id];if(!Le)return;let Be=0;fe<Ae&&Re>fe&&Re<=Ae?Be=-ge:fe>Ae&&Re>=Ae&&Re<fe&&(Be=ge),Le.style.transform=Be?`translateY(${Be}px)`:"",Le.style.transition="transform 0.2s ease"})),ue=null})}),K.on("dragEnd",ne=>{ue!==null&&(cancelAnimationFrame(ue),ue=null);const oe=ne.target,{startIndex:_e,currentIndex:ae}=j.current;if(oe.style.transform="",oe.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",oe.style.boxShadow="",S.current.forEach(ge=>{const fe=P.current[ge.id];fe&&(fe.style.transform="",fe.style.transition="")}),_e!==ae){const ge=[...S.current],[fe]=ge.splice(_e,1);ge.splice(ae,0,fe),S.current=ge,w(ge),Q(ge)}setTimeout(()=>{oe.style.zIndex="",D(null),I(!1),N.current=!1},300)}),R.current[X.id]=K})},U=window.setTimeout(te,80);return()=>{clearTimeout(U),J()}},[x,Q]),m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[m.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(gl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),m.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?m.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:u,onChange:J=>f(J.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),m.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):m.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[m.jsx(Zd,{size:20}),"Add Category"]})}),m.jsxs("div",{ref:C,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(J=>{const te=p2(X=>{L(X,J.id)},{threshold:500,cancelOnMovement:25,detect:Mc.Touch}),U=O===J.id;return m.jsx("div",{...te(),ref:B(J.id),style:{cursor:U?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:h===J.id?m.jsxs("div",{className:"flex-1 flex gap-2",children:[m.jsx("input",{type:"text",value:v,onChange:X=>b(X.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),m.jsx("button",{onClick:()=>W(J.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),m.jsx("button",{onClick:()=>g(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:X=>L(X,J.id),children:m.jsx(qh,{size:20})}),m.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:J.name})]}),m.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>{g(J.id),b(J.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:m.jsx(Wle,{size:18})}),m.jsx("button",{onClick:()=>Z(J.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:m.jsx(vw,{size:18})})]})]})},J.id)}),x.length===0&&!o&&m.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},W1e=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=yt(),{showToast:a}=uu(),s=Qa(),[o]=M8();Pc.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,v]=A.useState(o.get("categoryId")||""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState("#3B82F6"),[O,D]=A.useState(!1),N=async C=>{if(C.preventDefault(),!c.trim()||O)return;D(!0);const P=yt.getState().envelopes,j=(P.length>0?Math.max(...P.map(W=>W.orderIndex??0)):-1)+1,L=f?new Date(`${n}-01T00:00:00`):new Date,B={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:L.toISOString(),isActive:!0,orderIndex:j,categoryId:g||void 0};if(f){B.isPiggybank=!0;const W={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(W.targetAmount=parseFloat(b)),B.piggybankConfig=W}t(B).then(W=>{if(W){const Z=f?parseFloat(w||"0"):0;e(W,Z).catch(G=>$.error("Failed to create allocation:",G)),setTimeout(()=>{s("/")},50)}}).catch(W=>{$.error("Failed to create envelope:",W),a(W.message||"Failed to create envelope","error"),D(!1)})};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[m.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:m.jsx(gl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[m.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:m.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?m.jsx(Qd,{size:40}):m.jsx(Nle,{size:40})})}),m.jsxs("form",{onSubmit:N,className:"p-6 space-y-6 pb-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),m.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),m.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),m.jsxs("select",{id:"category",value:g,onChange:C=>v(C.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:[m.jsx("option",{value:"",children:"Uncategorized"}),r.map(C=>m.jsx("option",{value:C.id,children:C.name},C.id))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),m.jsx("input",{type:"text",id:"name",value:c,onChange:C=>u(C.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:C=>S(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),m.jsx("input",{type:"number",id:"target-amount",value:b,onChange:C=>x(C.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),m.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(C=>m.jsx("button",{type:"button",onClick:()=>I(C.value),className:`w-full aspect-square rounded-lg transition-all ${T===C.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:C.value},title:C.label},C.value))})]})]}),m.jsxs("div",{className:"pt-4 flex gap-3",children:[m.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||O,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!O?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:O?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})};const Y1e="type.googleapis.com/google.protobuf.Int64Value",X1e="type.googleapis.com/google.protobuf.UInt64Value";function pY(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function n1(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>n1(e));if(typeof t=="function"||typeof t=="object")return pY(t,e=>n1(e));throw new Error("Data cannot be encoded in JSON: "+t)}function yp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Y1e:case X1e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>yp(e)):typeof t=="function"||typeof t=="object"?pY(t,e=>yp(e)):t}const m2="functions";const _B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Li extends Eo{constructor(e,n,r){super(`${m2}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Li.prototype)}}function Q1e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function r1(t,e){let n=Q1e(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!_B[s])return new Li("internal","internal");n=_B[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=yp(i))}}catch{}return n==="ok"?null:new Li(n,r,i)}class Z1e{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,oa(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const wP="us-central1",J1e=/^data: (.*?)(?:\n|$)/;function e_e(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Li("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class t_e{constructor(e,n,r,i,a=wP,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Z1e(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=wP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function n_e(t,e,n){const r=ru(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(TN(t.emulatorOrigin+"/backends"),E$("Functions",!0))}function r_e(t,e,n){const r=i=>a_e(t,e,i,{});return r.stream=(i,a)=>o_e(t,e,i,a),r}function gY(t){return t.emulatorOrigin&&ru(t.emulatorOrigin)?"include":void 0}async function i_e(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:gY(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function mY(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function a_e(t,e,n,r){const i=t._url(e);return s_e(t,i,n,r)}async function s_e(t,e,n,r){n=n1(n);const i={data:n},a=await mY(t,r),s=r.timeout||7e4,o=e_e(s),c=await Promise.race([i_e(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new Li("cancelled","Firebase Functions instance was deleted.");const u=r1(c.status,c.json);if(u)throw u;if(!c.json)throw new Li("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new Li("internal","Response is missing data field.");return{data:yp(f)}}function o_e(t,e,n,r){const i=t._url(e);return l_e(t,i,n,r||{})}async function l_e(t,e,n,r){n=n1(n);const i={data:n},a=await mY(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:gY(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new Li("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const v=r1(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let o,c;const u=new Promise((g,v)=>{o=g,c=v});r?.signal?.addEventListener("abort",()=>{const g=new Li("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=c_e(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:v,done:b}=await g.read();return{value:v,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function c_e(t,e,n,r){const i=(s,o)=>{const c=s.match(J1e);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(yp(f.result));return}if("message"in f){o.enqueue(yp(f.message));return}if("error"in f){const h=r1(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof Li){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new Li("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new Li("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof Li?u:r1(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const SB="@firebase/functions",EB="0.13.1";const u_e="auth-internal",d_e="app-check-internal",f_e="messaging-internal";function h_e(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(u_e),s=n.getProvider(f_e),o=n.getProvider(d_e);return new t_e(i,a,s,o,r)};fl(new yo(m2,e,"PUBLIC").setMultipleInstances(!0)),bs(SB,EB,t),bs(SB,EB,"esm2020")}function p_e(t=kN(),e=wP){const r=Ip(Ft(t),m2).getImmediate({identifier:e}),i=yne("functions");return i&&g_e(r,...i),r}function g_e(t,e,n){n_e(Ft(t),e,n)}function m_e(t,e,n){return r_e(Ft(t),e)}h_e();function vY(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const v=s[1].trim();v.length>0&&v.length<60&&(n.paymentMethodName=v,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const v of c){const b=r.match(v);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const v=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(v){const b=parseFloat(v[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(v[0]," ").trim(),a++)}}const u=e.filter(v=>v.isActive!==!1);let f=null;for(const v of u){const b=v.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:v,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),S=b.split(/\s+/);for(const T of S)if(!(T.length<3)){for(const I of w)if(!(I.length<3)&&(I.startsWith(T.slice(0,-1))||T.startsWith(I.slice(0,-1)))){const O=Math.min(I.length,T.length)/Math.max(I.length,T.length);O>=.6&&(!f||O>f.score)&&(f={envelope:v,score:O})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const v=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(v," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function v_e(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{const a=p8().currentUser;$.log(" Siri: AI parsing request starting...",{user:a?a.email:"NOT_LOGGED_IN",isEmailVerified:a?.emailVerified}),$.log(" Siri: Calling Cloud Function to parse:",t);const s=p_e(),u=(await m_e(s,"parseTransaction")({text:t,userEnvelopes:r})).data;$.log(" Siri: Cloud Function response:",u);let f=null,h=u.envelope;if(u.envelope){const g=n.find(v=>v.name.toLowerCase()===u.envelope.toLowerCase());g&&(f=g.id,h=g.name)}return{amount:u.amount,merchant:u.merchant,envelope:h,envelopeId:f,description:u.description||t,paymentMethodName:u.paymentMethodName||null,type:u.type||"Expense",confidence:.9}}catch(i){return $.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),vY(t,e)}}function y_e(t,e){return $.log(" Siri: Parsing locally with regex:",t),vY(t,e)}function b_e(t){const e=[/ignore\s+previous\s+instructions/gi,/system\s*:/gi,/human\s*:/gi,/assistant\s*:/gi,/\[INST\]/gi,/\[/g,/\]/g,/\{/g,/\}/g];let n=t;return e.forEach(r=>{n=n.replace(r,"")}),n.length>500&&(n=n.substring(0,500)),n=n.trim(),n}async function _P(t,e){const n=b_e(t);return $.log(" Siri: parseSiriQuery called with text:",n),typeof navigator<"u"&&!navigator.onLine?($.log(" Siri: Offline  using local parser"),y_e(n,e)):($.log(" Siri: Online  attempting AI parsing"),v_e(n,e))}function x_e(){const[t,e]=M8(),{envelopes:n}=yt(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if($.log(" Siri: Hook checking URL params - query:",f),!f||f.trim().length===0){$.log(" Siri: No query parameter found"),c(null);return}$.log(" Siri: Found query parameter, parsing:",f),c(f),s(!0),_P(f,n).then(g=>{$.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{$.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n,_P]);const u=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const yY=({onClose:t,onSaved:e})=>{const n=Qa(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=yt(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=x_e(),h=()=>{const oe=sessionStorage.getItem("siriParsedData"),_e=sessionStorage.getItem("siriQuery");if(oe&&_e)try{const ae=JSON.parse(oe);if($.log(" Siri: Loaded stored data from sessionStorage:",ae),ae.amount!==null&&v(ae.amount.toFixed(2)),ae.merchant&&x(ae.merchant),ae.description&&S(ae.description),ae.type&&R(ae.type==="Income"?"income":"expense"),ae.envelopeId&&Y(ae.envelopeId),ae.paymentMethodName&&s?.paymentSources?.length){const ge=ae.paymentMethodName.toLowerCase(),fe=s.paymentSources.find(ee=>{const Ae=ee.name.toLowerCase();return Ae===ge||Ae.includes(ge)||ge.includes(Ae)});fe&&(z(fe),Z(!1))}I(!0),D(_e),$.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(ae){$.error(" Siri: Failed to parse stored data:",ae)}};A.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),A.useEffect(()=>{const oe=()=>{$.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",oe),()=>window.removeEventListener("siri-query-ready",oe)},[s?.paymentSources]);const[g,v]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState(!1),[O,D]=A.useState(null),[N,C]=A.useState(()=>{const oe=new Date;return new Date(oe.getTime()-oe.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[P,R]=A.useState("expense"),[j,L]=A.useState({}),[B,z]=A.useState(null),[W,Z]=A.useState(!1),[G,Y]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&v(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&S(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&Y(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const oe=o.paymentMethodName.toLowerCase(),_e=s.paymentSources.find(ae=>{const ge=ae.name.toLowerCase();return ge===oe||ge.includes(oe)||oe.includes(ge)});_e&&(z(_e),Z(!1))}I(!0),$.log(" Siri: Pre-filled form with parsed data:",o)}},[o,T,s?.paymentSources]);const Q=()=>{if(t){t();return}n("/")},J=oe=>{z(oe),B&&Z(!0)},te=Object.keys(j).length>0,U=Object.values(j).reduce((oe,_e)=>oe+(_e||0),0),X=Math.abs(U-parseFloat(g||"0"))<.01,re=g&&parseFloat(g)>0&&te&&X,K=async oe=>{if(oe.preventDefault(),!re)return;const[_e,ae,ge]=N.split("-").map(Number),fe=new Date(_e,ae-1,ge,12,0,0);$.log(" Selected date:",N),$.log(" Parsed date:",fe.toISOString());try{const[ee,Ae]=N.split("-").map(Number),Ie=`${ee}-${Ae.toString().padStart(2,"0")}`;if(Ie!==a){const Be=`This transaction date (${Ie}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Be))return}const Re=Object.entries(j).filter(([Be,nt])=>nt>0),Le=Re.length>1?crypto.randomUUID():void 0;Promise.all(Re.map(([Be,nt])=>i({amount:nt,description:w,merchant:b||void 0,date:fe.toISOString(),envelopeId:Be,type:P==="income"?"Income":"Expense",reconciled:!1,paymentMethod:B||void 0,splitGroupId:Le}).catch(Ee=>$.error("Failed to create transaction:",Ee)))).catch(Be=>$.error("Failed to create transactions:",Be)),e&&e(),t?t():n("/")}catch(ee){$.error("Error saving transaction:",ee),alert("Failed to save transaction: "+(ee instanceof Error?ee.message:"Unknown error"))}},ue=[...r].filter(oe=>oe.isActive!==!1).sort((oe,_e)=>{const ae=oe.orderIndex??0,ge=_e.orderIndex??0;return ae!==ge?ae-ge:oe.name.localeCompare(_e.name)}),ne=P==="income"?"text-green-500":"text-red-500";return m.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[m.jsx("button",{onClick:Q,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),m.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),m.jsx("button",{onClick:K,disabled:!re,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[m.jsx(IL,{size:18,className:"text-purple-500 animate-pulse"}),m.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(u||O)&&m.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(IL,{size:14,className:"text-purple-500"}),m.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&m.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),m.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||O,'"']}),m.jsx("button",{type:"button",onClick:()=>{f(),I(!1),D(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:m.jsxs("form",{onSubmit:K,className:"space-y-6",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:m.jsxs("div",{className:"flex",children:[m.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${P==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),m.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${P==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),m.jsxs("div",{className:"text-center",children:[m.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),m.jsxs("div",{className:"relative inline-block",children:[m.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${ne}`,children:"$"}),m.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:oe=>{const _e=oe.target.value.replace(/\D/g,"");if(!_e){v("");return}const ge=(parseInt(_e,10)/100).toFixed(2);v(ge)},onKeyDown:oe=>{(oe.key==="e"||oe.key==="E"||oe.key==="+"||oe.key==="-")&&oe.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${ne} placeholder-gray-700`})]})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),m.jsx("input",{type:"text",value:b,onChange:oe=>x(oe.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsx(uY,{selectedCard:B,onCardSelect:J,isUserSelected:W}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),m.jsx("input",{type:"text",value:w,onChange:oe=>S(oe.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[oe,_e]=N.split("-").map(Number);return`${oe}-${_e.toString().padStart(2,"0")}`!==a?m.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[m.jsx(Mh,{size:14}),m.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),m.jsx("input",{type:"date",value:N,onChange:oe=>C(oe.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:m.jsx(dY,{envelopes:ue,transactionAmount:parseFloat(g)||0,onSplitChange:L,initialSelectedEnvelopeId:G})})]})})]})},w_e=()=>{const t=Qa(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o,fetchAllTransactions:c,areAllTransactionsLoaded:u,isLoading:f}=yt(),{showToast:h}=uu(),[g,v]=A.useState(!1),[b,x]=A.useState(""),[w,S]=A.useState("all"),[T,I]=A.useState("All"),[O,D]=A.useState(!1),[N,C]=A.useState("all"),[P,R]=A.useState(!1),[j,L]=A.useState("all"),[B,z]=A.useState(!1),[W,Z]=A.useState(()=>{const K=new Date;return K.setMonth(K.getMonth()-1),K.toISOString().split("T")[0]}),[G,Y]=A.useState(()=>new Date().toISOString().split("T")[0]),[Q,J]=A.useState(null),te=A.useMemo(()=>{$.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:P,currentMonth:s,transactionMonths:e.map(ne=>({id:ne.id,month:ne.month,date:ne.date,description:ne.description}))});let K=e;return P||(K=e.filter(ne=>ne.month===s||!ne.month),$.log(" After month filter:",{remaining:K.length,currentMonth:s,filteredTransactions:K.map(ne=>({id:ne.id,description:ne.description,month:ne.month,matchesCurrentMonth:ne.month===s}))})),K.map(ne=>{if(!ne)return null;let oe=ne.date;if(typeof ne.date=="number"){const ae=(ne.date+978307200)*1e3;oe=new Date(ae).toISOString()}else if(!ne.date||typeof ne.date!="string")return null;return{...ne,date:oe}}).filter(Boolean).filter(ne=>{if(ne.description==="Budgeted"||ne.description==="Piggybank Contribution")return!1;if(b){const _e=b.toLowerCase(),ae=n.find(ee=>ee.id===ne.envelopeId)?.name.toLowerCase()||"",ge=ne.amount.toFixed(2);if(!(ne.description.toLowerCase().includes(_e)||ae.includes(_e)||ge.includes(_e)))return!1}if(w!=="all"&&ne.envelopeId!==w||T!=="All"&&ne.type!==T||j!=="all"&&(!ne.paymentMethod||ne.paymentMethod.id!==j)||!ne.date||typeof ne.date!="string")return!1;const oe=ne.date.split("T")[0];return!(B&&(oe<W||oe>G)||N!=="all"&&new Date(oe).getMonth()!==parseInt(N)||O&&!ne.reconciled)}).sort((ne,oe)=>new Date(oe.date).getTime()-new Date(ne.date).getTime())},[e,n,b,w,T,j,W,G,O,P,s,B]);$.log(" Final filtered transactions:",{count:te.length,transactions:te.map(K=>({id:K.id,description:K.description,amount:K.amount,date:K.date,month:K.month,type:K.type}))});const U=A.useMemo(()=>{const K=[],ue=new Set;for(const ne of te)if(ne.splitGroupId&&!ue.has(ne.splitGroupId)){ue.add(ne.splitGroupId);const oe=te.filter(ge=>ge.splitGroupId===ne.splitGroupId),_e=oe.reduce((ge,fe)=>ge+fe.amount,0),ae=oe.map(ge=>n.find(fe=>fe.id===ge.envelopeId)?.name||"Unknown").join(", ");K.push({key:`split-${ne.splitGroupId}`,transaction:ne,totalAmount:_e,envelopeNames:ae,splitTransactions:oe,isSplitGroup:!0})}else{if(ne.splitGroupId&&ue.has(ne.splitGroupId))continue;{const oe=n.find(_e=>_e.id===ne.envelopeId)?.name||"Unknown Envelope";K.push({key:ne.id,transaction:ne,totalAmount:ne.amount,envelopeNames:oe,splitTransactions:[ne],isSplitGroup:!1})}}return K},[te,n]),X=Q?n.find(K=>K.id===Q.envelopeId):null,re=K=>{const ue={...K,reconciled:!K.reconciled};r(ue)};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[m.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:m.jsx(gl,{size:24})}),m.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),m.jsx("button",{onClick:()=>v(!g),className:`p-2 rounded-full transition-colors ${g?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:m.jsx(Ole,{size:20,className:g?"fill-current":""})})]}),m.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[m.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),m.jsx("button",{onClick:()=>{const K=!P;R(K),K&&!u&&c()},disabled:f,className:`text-sm px-3 py-1 rounded-md transition-colors ${P?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"} ${f?"opacity-50 cursor-not-allowed":""}`,children:f?"Loading...":P?"Current Month Only":"All Time"})]}),m.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:m.jsxs("div",{className:"relative",children:[m.jsx(tce,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:K=>x(K.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),b&&m.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:m.jsx(s_,{size:16})})]})}),m.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${g?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:m.jsxs("div",{className:"p-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),m.jsxs("select",{value:j,onChange:K=>L(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(K=>m.jsx("option",{value:K.id,children:K.name},K.id))]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),m.jsxs("select",{value:w,onChange:K=>S(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((K,ue)=>K.name.localeCompare(ue.name)).map(K=>m.jsx("option",{value:K.id,children:K.name},K.id))]})]}),m.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(K=>m.jsx("button",{onClick:()=>I(K),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${T===K?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:K},K))}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),m.jsxs("select",{value:N,onChange:K=>C(K.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[m.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(K,ue)=>ue).map(K=>m.jsx("option",{value:K,children:new Date(2022,K).toLocaleString("default",{month:"long"})},K))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),m.jsx("button",{onClick:()=>z(!B),className:`w-9 h-5 rounded-full transition-colors relative ${B?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${B?"translate-x-4":"translate-x-0"}`})})]})]}),m.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${B?"opacity-100":"opacity-50 pointer-events-none"}`,children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:W,onChange:K=>Z(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),m.jsx("div",{className:"relative",children:m.jsx("input",{type:"date",value:G,onChange:K=>Y(K.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),m.jsx("button",{onClick:()=>D(!O),className:`w-11 h-6 rounded-full transition-colors relative ${O?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${O?"translate-x-5":"translate-x-0"}`})})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),m.jsx("button",{onClick:()=>R(!P),className:`w-11 h-6 rounded-full transition-colors relative ${P?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:m.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${P?"translate-x-5":"translate-x-0"}`})})]})]})}),m.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:U.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):m.jsx(Wr,{initial:!1,mode:"popLayout",children:U.map(K=>{const ue=K.transaction;return m.jsx(Rt.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:m.jsx(X_,{disabled:ue.isAutomatic,onDelete:()=>{const ne=K.splitTransactions.map(oe=>({...oe}));for(const oe of K.splitTransactions)oe.id&&i(oe.id);h(K.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const oe of ne)a(oe)})},children:m.jsx(hY,{transaction:{...ue,amount:K.totalAmount},envelopeName:K.envelopeNames,onReconcile:()=>{for(const ne of K.splitTransactions)re(ne)},onEdit:()=>{if(ue.isAutomatic)return;n.find(oe=>oe.id===ue.envelopeId)?J(ue):alert("Cannot edit: Envelope deleted.")}})})},K.key)})})})}),m.jsx(fY,{isVisible:!!Q&&!!X,onClose:()=>J(null),mode:"edit",currentEnvelope:X||{},initialTransaction:Q,envelopes:n})]})};function bY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=bY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Wt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=bY(t))&&(r&&(r+=" "),r+=e);return r}var __e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function v2(t){if(typeof t!="string")return!1;var e=__e;return e.includes(t)}var S_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],E_e=new Set(S_e);function xY(t){return typeof t!="string"?!1:E_e.has(t)}function wY(t){return typeof t=="string"&&t.startsWith("data-")}function ks(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(xY(n)||wY(n))&&(e[n]=t[n]);return e}function Lv(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return ks(e)}return typeof t=="object"&&!Array.isArray(t)?ks(t):null}function ga(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(xY(n)||wY(n)||v2(n))&&(e[n]=t[n]);return e}var T_e=["children","width","height","viewBox","className","style","title","desc"];function SP(){return SP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SP.apply(null,arguments)}function A_e(t,e){if(t==null)return{};var n,r,i=k_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function k_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _Y=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=A_e(t,T_e),h=a||{width:r,height:i,x:0,y:0},g=Wt("recharts-surface",s);return A.createElement("svg",SP({},ga(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),n)}),C_e=["children","className"];function EP(){return EP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EP.apply(null,arguments)}function I_e(t,e){if(t==null)return{};var n,r,i=P_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function P_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var li=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=I_e(t,C_e),a=Wt("recharts-layer",r);return A.createElement("g",EP({className:a},ga(i),{ref:e}),n)}),N_e=A.createContext(null);function on(t){return function(){return t}}const SY=Math.cos,i1=Math.sin,Ns=Math.sqrt,a1=Math.PI,Q_=2*a1,TP=Math.PI,AP=2*TP,Xu=1e-6,D_e=AP-Xu;function EY(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function O_e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return EY;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class R_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?EY:O_e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Xu)if(!(Math.abs(h*c-u*f)>Xu)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,b=i-o,x=c*c+u*u,w=v*v+b*b,S=Math.sqrt(x),T=Math.sqrt(g),I=a*Math.tan((TP-Math.acos((x+g-w)/(2*S*T)))/2),O=I/T,D=I/S;Math.abs(O-1)>Xu&&this._append`L${e+O*f},${n+O*h}`,this._append`A${a},${a},0,0,${+(h*v>f*b)},${this._x1=e+D*c},${this._y1=n+D*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Xu||Math.abs(this._y1-f)>Xu)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%AP+AP),g>D_e?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>Xu&&this._append`A${r},${r},0,${+(g>=TP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function y2(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new R_e(e)}function b2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function TY(t){this._context=t}TY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Z_(t){return new TY(t)}function AY(t){return t[0]}function kY(t){return t[1]}function CY(t,e){var n=on(!0),r=null,i=Z_,a=null,s=y2(o);t=typeof t=="function"?t:t===void 0?AY:on(t),e=typeof e=="function"?e:e===void 0?kY:on(e);function o(c){var u,f=(c=b2(c)).length,h,g=!1,v;for(r==null&&(a=i(v=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(v)return a=null,v+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:on(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:on(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:on(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function ux(t,e,n){var r=null,i=on(!0),a=null,s=Z_,o=null,c=y2(u);t=typeof t=="function"?t:t===void 0?AY:on(+t),e=typeof e=="function"?e:on(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?kY:on(+n);function u(h){var g,v,b,x=(h=b2(h)).length,w,S=!1,T,I=new Array(x),O=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===S)if(S=!S)v=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=v;--b)o.point(I[b],O[b]);o.lineEnd(),o.areaEnd()}S&&(I[g]=+t(w,g,h),O[g]=+e(w,g,h),o.point(r?+r(w,g,h):I[g],n?+n(w,g,h):O[g]))}if(T)return o=null,T+""||null}function f(){return CY().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:on(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:on(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:on(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:on(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:on(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class IY{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function M_e(t){return new IY(t,!0)}function j_e(t){return new IY(t,!1)}const x2={draw(t,e){const n=Ns(e/a1);t.moveTo(n,0),t.arc(0,0,n,0,Q_)}},z_e={draw(t,e){const n=Ns(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},PY=Ns(1/3),L_e=PY*2,V_e={draw(t,e){const n=Ns(e/L_e),r=n*PY;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},B_e={draw(t,e){const n=Ns(e),r=-n/2;t.rect(r,r,n,n)}},F_e=.8908130915292852,NY=i1(a1/10)/i1(7*a1/10),U_e=i1(Q_/10)*NY,$_e=-SY(Q_/10)*NY,q_e={draw(t,e){const n=Ns(e*F_e),r=U_e*n,i=$_e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=Q_*a/5,o=SY(s),c=i1(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},ik=Ns(3),G_e={draw(t,e){const n=-Ns(e/(ik*3));t.moveTo(0,n*2),t.lineTo(-ik*n,-n),t.lineTo(ik*n,-n),t.closePath()}},Ra=-.5,Ma=Ns(3)/2,kP=1/Ns(12),H_e=(kP/2+1)*3,K_e={draw(t,e){const n=Ns(e/H_e),r=n/2,i=n*kP,a=r,s=n*kP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Ra*r-Ma*i,Ma*r+Ra*i),t.lineTo(Ra*a-Ma*s,Ma*a+Ra*s),t.lineTo(Ra*o-Ma*c,Ma*o+Ra*c),t.lineTo(Ra*r+Ma*i,Ra*i-Ma*r),t.lineTo(Ra*a+Ma*s,Ra*s-Ma*a),t.lineTo(Ra*o+Ma*c,Ra*c-Ma*o),t.closePath()}};function W_e(t,e){let n=null,r=y2(i);t=typeof t=="function"?t:on(t||x2),e=typeof e=="function"?e:on(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:on(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:on(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function s1(){}function o1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function DY(t){this._context=t}DY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:o1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:o1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Y_e(t){return new DY(t)}function OY(t){this._context=t}OY.prototype={areaStart:s1,areaEnd:s1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:o1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function X_e(t){return new OY(t)}function RY(t){this._context=t}RY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:o1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Q_e(t){return new RY(t)}function MY(t){this._context=t}MY.prototype={areaStart:s1,areaEnd:s1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Z_e(t){return new MY(t)}function TB(t){return t<0?-1:1}function AB(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(TB(a)+TB(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function kB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ak(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function l1(t){this._context=t}l1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ak(this,this._t0,kB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ak(this,kB(this,n=AB(this,t,e)),n);break;default:ak(this,this._t0,n=AB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function jY(t){this._context=new zY(t)}(jY.prototype=Object.create(l1.prototype)).point=function(t,e){l1.prototype.point.call(this,e,t)};function zY(t){this._context=t}zY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function J_e(t){return new l1(t)}function eSe(t){return new jY(t)}function LY(t){this._context=t}LY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=CB(t),i=CB(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function CB(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function tSe(t){return new LY(t)}function J_(t,e){this._context=t,this._t=e}J_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function nSe(t){return new J_(t,.5)}function rSe(t){return new J_(t,0)}function iSe(t){return new J_(t,1)}function Bd(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function CP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function aSe(t,e){return t[e]}function sSe(t){const e=[];return e.key=t,e}function oSe(){var t=on([]),e=CP,n=Bd,r=aSe;function i(a){var s=Array.from(t.apply(this,arguments),sSe),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=b2(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:on(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:on(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?CP:typeof a=="function"?a:on(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Bd,i):n},i}function lSe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Bd(t,e)}}function cSe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Bd(t,e)}}function uSe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,v=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,S=x[r-1][1]||0;v+=w-S}c+=h,u+=v*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Bd(t,e)}}var sk={},ok={},IB;function dSe(){return IB||(IB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(ok)),ok}var lk={},PB;function VY(){return PB||(PB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(lk)),lk}var ck={},NB;function w2(){return NB||(NB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(ck)),ck}var uk={},dk={},DB;function fSe(){return DB||(DB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(dk)),dk}var OB;function _2(){return OB||(OB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fSe(),n=w2();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(uk)),uk}var RB;function S2(){return RB||(RB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dSe(),n=VY(),r=w2(),i=_2();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(sk)),sk}var fk,MB;function hSe(){return MB||(MB=1,fk=S2().get),fk}var pSe=hSe();const Fd=Il(pSe);var gSe=4;function jc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gSe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+jc(o)+a:i+a},"")}var Dr=t=>t===0?0:t>0?1:-1,ma=t=>typeof t=="number"&&t!=+t,_l=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ke=t=>(typeof t=="number"||t instanceof Number)&&!ma(t),Ha=t=>Ke(t)||typeof t=="string",mSe=0,Vv=t=>{var e=++mSe;return"".concat(t||"").concat(e)},si=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ke(e)&&typeof e!="string")return r;var a;if(_l(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return ma(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},BY=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function hr(t,e,n){return Ke(t)&&Ke(e)?jc(t+n*(e-t)):e}function vSe(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Fd(r,e))===n)}var Rr=t=>t===null||typeof t>"u",z0=t=>Rr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function ySe(t){return t!=null}function L0(){}var bSe=["type","size","sizeType"];function IP(){return IP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IP.apply(null,arguments)}function jB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jB(Object(n),!0).forEach(function(r){xSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xSe(t,e,n){return(e=wSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wSe(t){var e=_Se(t,"string");return typeof e=="symbol"?e:e+""}function _Se(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SSe(t,e){if(t==null)return{};var n,r,i=ESe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ESe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var FY={symbolCircle:x2,symbolCross:z_e,symbolDiamond:V_e,symbolSquare:B_e,symbolStar:q_e,symbolTriangle:G_e,symbolWye:K_e},TSe=Math.PI/180,ASe=t=>{var e="symbol".concat(z0(t));return FY[e]||x2},kSe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*TSe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},CSe=(t,e)=>{FY["symbol".concat(z0(t))]=e},UY=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=SSe(t,bSe),a=zB(zB({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=ASe(s),v=W_e().type(g).size(kSe(n,r,s)),b=v();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=ga(a);return Ke(u)&&Ke(f)&&Ke(n)?A.createElement("path",IP({},h,{className:Wt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};UY.registerSymbol=CSe;var $Y=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,ISe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{v2(i)&&(r[i]=(a=>n[i](n,a)))}),r},PSe=(t,e,n)=>r=>(t(e,n,r),null),eS=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];v2(i)&&typeof a=="function"&&(r||(r={}),r[i]=PSe(a,e,n))}),r};function LB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(n),!0).forEach(function(r){DSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DSe(t,e,n){return(e=OSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OSe(t){var e=RSe(t,"string");return typeof e=="symbol"?e:e+""}function RSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yr(t,e){var n=NSe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var hk={},pk={},VB;function MSe(){return VB||(VB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(pk)),pk}var gk={},BB;function qY(){return BB||(BB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(gk)),gk}var mk={},vk={},yk={},FB;function jSe(){return FB||(FB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(yk)),yk}var UB;function E2(){return UB||(UB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jSe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(vk)),vk}var bk={},$B;function zSe(){return $B||($B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(bk)),bk}var qB;function LSe(){return qB||(qB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E2(),n=zSe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(mk)),mk}var xk={},wk={},GB;function VSe(){return GB||(GB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S2();function n(r){return function(i){return e.get(i,r)}}t.property=n})(wk)),wk}var _k={},Sk={},Ek={},Tk={},HB;function GY(){return HB||(HB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Tk)),Tk}var Ak={},KB;function HY(){return KB||(KB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Ak)),Ak}var kk={},WB;function KY(){return WB||(WB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(kk)),kk}var YB;function BSe(){return YB||(YB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GY(),n=HY(),r=KY();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function v(b,x,w,S,T,I){const O=g(b,x,w,S,T,I);return O!==void 0?!!O:a(b,x,v,I)},new Map)}function a(f,h,g,v){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,v);case"function":return Object.keys(h).length>0?a(f,{...h},g,v):r.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.eq(f,h)}}function s(f,h,g,v){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,v);if(h instanceof Map)return o(f,h,g,v);if(h instanceof Set)return u(f,h,g,v);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(v?.has(h))return v.get(h)===f;v?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,v))return!1}return!0}finally{v?.delete(h)}}function o(f,h,g,v){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,v)===!1)return!1}return!0}function c(f,h,g,v){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let S=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const I=f[T];let O=!1;if(g(I,w,x,f,h,v)&&(O=!0),O){b.add(T),S=!0;break}}if(!S)return!1}return!0}function u(f,h,g,v){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,v):!1}t.isMatchWith=i,t.isSetMatch=u})(Ek)),Ek}var XB;function WY(){return XB||(XB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BSe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Sk)),Sk}var Ck={},Ik={},Pk={},QB;function FSe(){return QB||(QB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Pk)),Pk}var Nk={},ZB;function YY(){return ZB||(ZB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Nk)),Nk}var Dk={},JB;function XY(){return JB||(JB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",v="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",O="[object BigUint64Array]",D="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",P="[object BigInt64Array]",R="[object Float32Array]",j="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=P,t.bigUint64ArrayTag=O,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=j,t.functionTag=h,t.int16ArrayTag=N,t.int32ArrayTag=C,t.int8ArrayTag=D,t.mapTag=c,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=I,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=S})(Dk)),Dk}var Ok={},e6;function USe(){return e6||(e6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Ok)),Ok}var t6;function QY(){return t6||(t6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FSe(),n=YY(),r=XY(),i=HY(),a=USe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,v=new Map,b=void 0){const x=b?.(f,h,g,v);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const w=new Array(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;v.set(f,w);for(const[S,T]of f)w.set(S,o(T,S,g,v,b));return w}if(f instanceof Set){const w=new Set;v.set(f,w);for(const S of f)w.add(o(S,void 0,g,v,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,v,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,w),c(w,f,g,v,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Error){const w=new f.constructor;return v.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,v,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(f instanceof String){const w=new String(f.valueOf());return v.set(f,w),c(w,f,g,v,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return v.set(f,w),c(w,f,g,v,b),w}return f}function c(f,h,g=f,v,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const S=x[w],T=Object.getOwnPropertyDescriptor(f,S);(T==null||T.writable)&&(f[S]=o(h[S],S,g,v,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(Ik)),Ik}var n6;function $Se(){return n6||(n6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QY();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Ck)),Ck}var r6;function qSe(){return r6||(r6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WY(),n=$Se();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(_k)),_k}var Rk={},Mk={},jk={},i6;function GSe(){return i6||(i6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QY(),n=XY();function r(i,a){return e.cloneDeepWith(i,(s,o,c,u)=>{const f=a?.(s,o,c,u);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i?.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(jk)),jk}var a6;function HSe(){return a6||(a6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GSe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Mk)),Mk}var zk={},Lk={},s6;function ZY(){return s6||(s6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Lk)),Lk}var Vk={},o6;function KSe(){return o6||(o6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YY();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Vk)),Vk}var l6;function WSe(){return l6||(l6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VY(),n=ZY(),r=KSe(),i=_2();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(zk)),zk}var c6;function YSe(){return c6||(c6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WY(),n=w2(),r=HSe(),i=S2(),a=WSe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(Rk)),Rk}var u6;function XSe(){return u6||(u6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qY(),n=VSe(),r=qSe(),i=YSe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(xk)),xk}var d6;function QSe(){return d6||(d6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MSe(),n=qY(),r=LSe(),i=XSe();function a(s,o=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(hk)),hk}var Bk,f6;function ZSe(){return f6||(f6=1,Bk=QSe().uniqBy),Bk}var JSe=ZSe();const h6=Il(JSe);function eEe(t,e,n){return e===!0?h6(t,n):typeof e=="function"?h6(t,e):t}var Fk={exports:{}},Uk={},$k={exports:{}},qk={};var p6;function tEe(){if(p6)return qk;p6=1;var t=kp();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=v,x.getSnapshot=g,c(x)&&w({inst:x})},[h,v,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(v),v}function c(h){var g=h.getSnapshot;h=h.value;try{var v=g();return!n(h,v)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return qk.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,qk}var g6;function nEe(){return g6||(g6=1,$k.exports=tEe()),$k.exports}var m6;function rEe(){if(m6)return Uk;m6=1;var t=kp(),e=nEe();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return Uk.useSyncExternalStoreWithSelector=function(u,f,h,g,v){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function S(N){if(!T){if(T=!0,I=N,N=g(N),v!==void 0&&x.hasValue){var C=x.value;if(v(C,N))return O=C}return O=N}if(C=O,r(I,N))return C;var P=g(N);return v!==void 0&&v(C,P)?(I=N,C):(I=N,O=P)}var T=!1,I,O,D=h===void 0?null:h;return[function(){return S(f())},D===null?void 0:function(){return S(D())}]},[f,h,g,v]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},Uk}var v6;function iEe(){return v6||(v6=1,Fk.exports=rEe()),Fk.exports}var aEe=iEe(),T2=A.createContext(null),sEe=t=>t,pn=()=>{var t=A.useContext(T2);return t?t.store.dispatch:sEe},tw=()=>{},oEe=()=>tw,lEe=(t,e)=>t===e;function qe(t){var e=A.useContext(T2);return aEe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:oEe,e?e.store.getState:tw,e?e.store.getState:tw,e?t:tw,lEe)}function cEe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function uEe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function dEe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var y6=t=>Array.isArray(t)?t:[t];function fEe(t){const e=Array.isArray(t[0])?t[0]:t;return dEe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function hEe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var pEe=class{constructor(t){this.value=t}deref(){return this.value}},gEe=typeof WeakRef<"u"?WeakRef:pEe,mEe=0,b6=1;function dx(){return{s:mEe,v:void 0,o:null,p:null}}function JY(t,e={}){let n=dx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const v=arguments[h];if(typeof v=="function"||typeof v=="object"&&v!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(v);x===void 0?(o=dx(),b.set(v,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(v);x===void 0?(o=dx(),b.set(v,o)):o=x}}const u=o;let f;if(o.s===b6)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new gEe(f):f}return u.s=b6,u.v=f,f}return s.clearCache=()=>{n=dx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function vEe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),cEe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:v=JY,argsMemoizeOptions:b=[]}=f,x=y6(g),w=y6(b),S=fEe(i),T=h(function(){return a++,u.apply(null,arguments)},...x),I=v(function(){s++;const D=hEe(S,arguments);return o=T.apply(null,D),o},...w);return Object.assign(I,{resultFunc:u,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var ye=vEe(JY),yEe=Object.assign((t,e=ye)=>{uEe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>yEe}),Gk={},Hk={},Kk={},x6;function bEe(){return x6||(x6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(Kk)),Kk}var Wk={},Yk={},w6;function eX(){return w6||(w6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Yk)),Yk}var _6;function xEe(){return _6||(_6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eX(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(Wk)),Wk}var S6;function wEe(){return S6||(S6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bEe(),n=xEe(),r=_2();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(v=>String(v));const u=(v,b)=>{let x=v;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:u(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?u(b,v):typeof b=="object"?b[v]:b,h=s.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return a.map(v=>({original:v,criteria:h.map(b=>f(b,v))})).slice().sort((v,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(v.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(v=>v.original)}t.orderBy=i})(Hk)),Hk}var Xk={},E6;function _Ee(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(Xk)),Xk}var Qk={},T6;function tX(){return T6||(T6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZY(),n=E2(),r=GY(),i=KY();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.eq(c[o],s):!1}t.isIterateeCall=a})(Qk)),Qk}var A6;function SEe(){return A6||(A6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wEe(),n=_Ee(),r=tX();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(Gk)),Gk}var Zk,k6;function EEe(){return k6||(k6=1,Zk=SEe().sortBy),Zk}var TEe=EEe();const tS=Il(TEe);var nX=t=>t.legend.settings,AEe=t=>t.legend.size,kEe=t=>t.legend.payload;ye([kEe,nX],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?tS(r,n):r});var fx=1;function CEe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>fx||Math.abs(s.left-e.left)>fx||Math.abs(s.top-e.top)>fx||Math.abs(s.width-e.width)>fx)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function $r(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var IEe=typeof Symbol=="function"&&Symbol.observable||"@@observable",C6=IEe,Jk=()=>Math.random().toString(36).substring(7).split("").join("."),PEe={INIT:`@@redux/INIT${Jk()}`,REPLACE:`@@redux/REPLACE${Jk()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Jk()}`},c1=PEe;function A2(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function rX(t,e,n){if(typeof t!="function")throw new Error($r(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error($r(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error($r(1));return n(rX)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,S)=>{s.set(S,w)}))}function f(){if(c)throw new Error($r(3));return i}function h(w){if(typeof w!="function")throw new Error($r(4));if(c)throw new Error($r(5));let S=!0;u();const T=o++;return s.set(T,w),function(){if(S){if(c)throw new Error($r(6));S=!1,u(),s.delete(T),a=null}}}function g(w){if(!A2(w))throw new Error($r(7));if(typeof w.type>"u")throw new Error($r(8));if(typeof w.type!="string")throw new Error($r(17));if(c)throw new Error($r(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function v(w){if(typeof w!="function")throw new Error($r(10));r=w,g({type:c1.REPLACE})}function b(){const w=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error($r(11));function T(){const O=S;O.next&&O.next(f())}return T(),{unsubscribe:w(T)}},[C6](){return this}}}return g({type:c1.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:v,[C6]:b}}function NEe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:c1.INIT})>"u")throw new Error($r(12));if(typeof n(void 0,{type:c1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($r(13))})}function iX(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{NEe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],v=s[h],b=g(v,o);if(typeof b>"u")throw o&&o.type,new Error($r(14));u[h]=b,c=c||b!==v}return c=c||r.length!==Object.keys(s).length,c?u:s}}function u1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function DEe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error($r(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=u1(...o)(i.dispatch),{...i,dispatch:a}}}function aX(t){return A2(t)&&"type"in t&&typeof t.type=="string"}var sX=Symbol.for("immer-nothing"),I6=Symbol.for("immer-draftable"),wi=Symbol.for("immer-state");function ps(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ua=Object,bp=ua.getPrototypeOf,d1="constructor",nS="prototype",PP="configurable",f1="enumerable",nw="writable",Bv="value",Sl=t=>!!t&&!!t[wi];function Cs(t){return t?oX(t)||iS(t)||!!t[I6]||!!t[d1]?.[I6]||aS(t)||sS(t):!1}var OEe=ua[nS][d1].toString(),P6=new WeakMap;function oX(t){if(!t||!k2(t))return!1;const e=bp(t);if(e===null||e===ua[nS])return!0;const n=ua.hasOwnProperty.call(e,d1)&&e[d1];if(n===Object)return!0;if(!gh(n))return!1;let r=P6.get(n);return r===void 0&&(r=Function.toString.call(n),P6.set(n,r)),r===OEe}function rS(t,e,n=!0){V0(t)===0?(n?Reflect.ownKeys(t):ua.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function V0(t){const e=t[wi];return e?e.type_:iS(t)?1:aS(t)?2:sS(t)?3:0}var N6=(t,e,n=V0(t))=>n===2?t.has(e):ua[nS].hasOwnProperty.call(t,e),NP=(t,e,n=V0(t))=>n===2?t.get(e):t[e],h1=(t,e,n,r=V0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function REe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var iS=Array.isArray,aS=t=>t instanceof Map,sS=t=>t instanceof Set,k2=t=>typeof t=="object",gh=t=>typeof t=="function",eC=t=>typeof t=="boolean";function MEe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Yo=t=>t.copy_||t.base_,C2=t=>t.modified_?t.copy_:t.base_;function DP(t,e){if(aS(t))return new Map(t);if(sS(t))return new Set(t);if(iS(t))return Array[nS].slice.call(t);const n=oX(t);if(e===!0||e==="class_only"&&!n){const r=ua.getOwnPropertyDescriptors(t);delete r[wi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[nw]===!1&&(o[nw]=!0,o[PP]=!0),(o.get||o.set)&&(r[s]={[PP]:!0,[nw]:!0,[f1]:o[f1],[Bv]:t[s]})}return ua.create(bp(t),r)}else{const r=bp(t);if(r!==null&&n)return{...t};const i=ua.create(r);return ua.assign(i,t)}}function I2(t,e=!1){return oS(t)||Sl(t)||!Cs(t)||(V0(t)>1&&ua.defineProperties(t,{set:hx,add:hx,clear:hx,delete:hx}),ua.freeze(t),e&&rS(t,(n,r)=>{I2(r,!0)},!1)),t}function jEe(){ps(2)}var hx={[Bv]:jEe};function oS(t){return t===null||!k2(t)?!0:ua.isFrozen(t)}var p1="MapSet",OP="Patches",D6="ArrayMethods",lX={};function Ud(t){const e=lX[t];return e||ps(0,t),e}var O6=t=>!!lX[t],Fv,cX=()=>Fv,zEe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:O6(p1)?Ud(p1):void 0,arrayMethodsPlugin_:O6(D6)?Ud(D6):void 0});function R6(t,e){e&&(t.patchPlugin_=Ud(OP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function RP(t){MP(t),t.drafts_.forEach(LEe),t.drafts_=null}function MP(t){t===Fv&&(Fv=t.parent_)}var M6=t=>Fv=zEe(Fv,t);function LEe(t){const e=t[wi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function j6(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[wi].modified_&&(RP(e),ps(4)),Cs(t)&&(t=z6(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[wi].base_,t,e)}else t=z6(e,n);return VEe(e,t,!0),RP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==sX?t:void 0}function z6(t,e){if(oS(e))return e;const n=e[wi];if(!n)return g1(e,t.handledSet_,t);if(!lS(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);fX(n,t)}return n.copy_}function VEe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&I2(e,n)}function uX(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var lS=(t,e)=>t.scope_===e,BEe=[];function dX(t,e,n,r){const i=Yo(t),a=t.type_;if(r!==void 0&&NP(i,r,a)===e){h1(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;rS(i,(c,u)=>{if(Sl(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??BEe;for(const o of s)h1(i,o,n,a)}function FEe(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!lS(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=C2(a);dX(t,a.draft_??a,s,n),fX(a,i)})}function fX(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}uX(t)}}function UEe(t,e,n){const{scope_:r}=t;if(Sl(n)){const i=n[wi];lS(i,r)&&i.callbacks_.push(function(){rw(t);const s=C2(i);dX(t,n,s,e)})}else Cs(n)&&t.callbacks_.push(function(){const a=Yo(t);t.type_===3?a.has(n)&&g1(n,r.handledSet_,r):NP(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&g1(NP(t.copy_,e,t.type_),r.handledSet_,r)})}function g1(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Sl(t)||e.has(t)||!Cs(t)||oS(t)||(e.add(t),rS(t,(r,i)=>{if(Sl(i)){const a=i[wi];if(lS(a,n)){const s=C2(a);h1(t,r,s,t.type_),uX(a)}}else Cs(i)&&g1(i,e,n)})),t}function $Ee(t,e){const n=iS(t),r={type_:n?1:0,scope_:e?e.scope_:cX(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=m1;n&&(i=[r],a=Uv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var m1={get(t,e){if(e===wi)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Yo(t);if(!N6(i,e,t.type_))return qEe(t,i,e);const a=i[e];if(t.finalized_||!Cs(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&MEe(e))return a;if(a===tC(t.base_,e)){rw(t);const s=t.type_===1?+e:e,o=zP(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in Yo(t)},ownKeys(t){return Reflect.ownKeys(Yo(t))},set(t,e,n){const r=hX(Yo(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=tC(Yo(t),e),a=i?.[wi];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(REe(n,i)&&(n!==void 0||N6(t.base_,e,t.type_)))return!0;rw(t),jP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),UEe(t,e,n)),!0},deleteProperty(t,e){return rw(t),tC(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),jP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Yo(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[nw]:!0,[PP]:t.type_!==1||e!=="length",[f1]:r[f1],[Bv]:n[e]}},defineProperty(){ps(11)},getPrototypeOf(t){return bp(t.base_)},setPrototypeOf(){ps(12)}},Uv={};for(let t in m1){let e=m1[t];Uv[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Uv.deleteProperty=function(t,e){return Uv.set.call(this,t,e,void 0)};Uv.set=function(t,e,n){return m1.set.call(this,t[0],e,n,t[0])};function tC(t,e){const n=t[wi];return(n?Yo(n):t)[e]}function qEe(t,e,n){const r=hX(e,n);return r?Bv in r?r[Bv]:r.get?.call(t.draft_):void 0}function hX(t,e){if(!(e in t))return;let n=bp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=bp(n)}}function jP(t){t.modified_||(t.modified_=!0,t.parent_&&jP(t.parent_))}function rw(t){t.copy_||(t.assigned_=new Map,t.copy_=DP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var GEe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(gh(n)&&!gh(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}gh(r)||ps(6),i!==void 0&&!gh(i)&&ps(7);let a;if(Cs(n)){const s=M6(this),o=zP(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?RP(s):MP(s)}return R6(s,i),j6(a,s)}else if(!n||!k2(n)){if(a=r(n),a===void 0&&(a=n),a===sX&&(a=void 0),this.autoFreeze_&&I2(a,!0),i){const s=[],o=[];Ud(OP).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else ps(1,n)},this.produceWithPatches=(n,r)=>{if(gh(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},eC(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),eC(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),eC(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Cs(e)||ps(8),Sl(e)&&(e=Ss(e));const n=M6(this),r=zP(n,e,void 0);return r[wi].isManual_=!0,MP(n),r}finishDraft(e,n){const r=e&&e[wi];(!r||!r.isManual_)&&ps(9);const{scope_:i}=r;return R6(i,n),j6(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Ud(OP).applyPatches_;return Sl(e)?i(e,n):this.produce(e,a=>i(a,n))}};function zP(t,e,n,r){const[i,a]=aS(e)?Ud(p1).proxyMap_(e,n):sS(e)?Ud(p1).proxySet_(e,n):$Ee(e,n);return(n?.scope_??cX()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?FEe(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function Ss(t){return Sl(t)||ps(10,t),pX(t)}function pX(t){if(!Cs(t)||oS(t))return t;const e=t[wi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=DP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=DP(t,!0);return rS(n,(i,a)=>{h1(n,i,pX(a))},r),e&&(e.finalized_=!1),n}var HEe=new GEe,gX=HEe.produce;function mX(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var KEe=mX(),WEe=mX,YEe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?u1:u1.apply(null,arguments)};function Ka(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(fa(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>aX(r)&&r.type===t,n}var vX=class Rm extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Rm.prototype)}static get[Symbol.species](){return Rm}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Rm(...e[0].concat(this)):new Rm(...e.concat(this))}};function L6(t){return Cs(t)?gX(t,()=>{}):t}function px(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function XEe(t){return typeof t=="boolean"}var QEe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new vX;return n&&(XEe(n)?s.push(KEe):s.push(WEe(n.extraArgument))),s},yX="RTK_autoBatch",vn=()=>t=>({payload:t,meta:{[yX]:!0}}),V6=t=>e=>{setTimeout(e,t)},bX=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:V6(10):t.type==="callback"?t.queueNotification:V6(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[yX],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},ZEe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new vX(t);return r&&i.push(bX(typeof r=="object"?r:void 0)),i};function JEe(t){const e=QEe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(A2(n))o=iX(n);else throw new Error(fa(1));let c;typeof r=="function"?c=r(e):c=e();let u=u1;i&&(u=YEe({trace:!1,...typeof i=="object"&&i}));const f=DEe(...c),h=ZEe(f);let g=typeof s=="function"?s(h):h();const v=u(...g);return rX(o,a,v)}function xX(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(fa(28));if(o in e)throw new Error(fa(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function eTe(t){return typeof t=="function"}function tTe(t,e){let[n,r,i]=xX(e),a;if(eTe(t))a=()=>L6(t());else{const o=L6(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Sl(f)){const v=h(f,c);return v===void 0?f:v}else{if(Cs(f))return gX(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var nTe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rTe=(t=21)=>{let e="",n=t;for(;n--;)e+=nTe[Math.random()*64|0];return e},iTe=Symbol.for("rtk-slice-createasyncthunk");function aTe(t,e){return`${t}/${e}`}function sTe({creators:t}={}){const e=t?.asyncThunk?.[iTe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(fa(11));const s=(typeof r.reducers=="function"?r.reducers(lTe()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,O){const D=typeof I=="string"?I:I.type;if(!D)throw new Error(fa(12));if(D in c.sliceCaseReducersByType)throw new Error(fa(13));return c.sliceCaseReducersByType[D]=O,u},addMatcher(I,O){return c.sliceMatchers.push({matcher:I,reducer:O}),u},exposeAction(I,O){return c.actionCreators[I]=O,u},exposeCaseReducer(I,O){return c.sliceCaseReducersByName[I]=O,u}};o.forEach(I=>{const O=s[I],D={reducerName:I,type:aTe(i,I),createNotation:typeof r.reducers=="function"};uTe(O)?fTe(D,O,u,e):cTe(D,O,u)});function f(){const[I={},O=[],D=void 0]=typeof r.extraReducers=="function"?xX(r.extraReducers):[r.extraReducers],N={...I,...c.sliceCaseReducersByType};return tTe(r.initialState,C=>{for(let P in N)C.addCase(P,N[P]);for(let P of c.sliceMatchers)C.addMatcher(P.matcher,P.reducer);for(let P of O)C.addMatcher(P.matcher,P.reducer);D&&C.addDefaultCase(D)})}const h=I=>I,g=new Map,v=new WeakMap;let b;function x(I,O){return b||(b=f()),b(I,O)}function w(){return b||(b=f()),b.getInitialState()}function S(I,O=!1){function D(C){let P=C[I];return typeof P>"u"&&O&&(P=px(v,D,w)),P}function N(C=h){const P=px(g,O,()=>new WeakMap);return px(P,C,()=>{const R={};for(const[j,L]of Object.entries(r.selectors??{}))R[j]=oTe(L,C,()=>px(v,C,w),O);return R})}return{reducerPath:I,getSelectors:N,get selectors(){return N(D)},selectSlice:D}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(a),injectInto(I,{reducerPath:O,...D}={}){const N=O??a;return I.inject({reducerPath:N,reducer:x},D),{...T,...S(N,!0)}}};return T}}function oTe(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var qi=sTe();function lTe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function cTe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!dTe(r))throw new Error(fa(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Ka(t,s):Ka(t))}function uTe(t){return t._reducerDefinitionType==="asyncThunk"}function dTe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function fTe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(fa(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||gx,pending:o||gx,rejected:c||gx,settled:u||gx})}function gx(){}var hTe="task",wX="listener",_X="completed",P2="cancelled",pTe=`task-${P2}`,gTe=`task-${_X}`,LP=`${wX}-${P2}`,mTe=`${wX}-${_X}`,cS=class{constructor(t){this.code=t,this.message=`${hTe} ${P2} (reason: ${t})`}name="TaskAbortError";message},N2=(t,e)=>{if(typeof t!="function")throw new TypeError(fa(32))},v1=()=>{},SX=(t,e=v1)=>(t.catch(e),t),EX=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Sd=t=>{if(t.aborted)throw new cS(t.reason)};function TX(t,e){let n=v1;return new Promise((r,i)=>{const a=()=>i(new cS(t.reason));if(t.aborted){a();return}n=EX(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=v1})}var vTe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof cS?"cancelled":"rejected",error:n}}finally{e?.()}},y1=t=>e=>SX(TX(t,e).then(n=>(Sd(t),n))),AX=t=>{const e=y1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Bh}=Object,B6={},uS="listenerMiddleware",yTe=(t,e)=>{const n=r=>EX(t,()=>r.abort(t.reason));return(r,i)=>{N2(r);const a=new AbortController;n(a);const s=vTe(async()=>{Sd(t),Sd(a.signal);const o=await r({pause:y1(a.signal),delay:AX(a.signal),signal:a.signal});return Sd(a.signal),o},()=>a.abort(gTe));return i?.autoJoin&&e.push(s.catch(v1)),{result:y1(t)(s),cancel(){a.abort(pTe)}}}},bTe=(t,e)=>{const n=async(r,i)=>{Sd(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await TX(e,Promise.race(o));return Sd(e),c}finally{a()}};return(r,i)=>SX(n(r,i))},kX=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Ka(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(fa(21));return N2(a),{predicate:i,type:e,effect:a}},CX=Bh(t=>{const{type:e,predicate:n,effect:r}=kX(t);return{id:rTe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(fa(22))}}},{withTypes:()=>CX}),F6=(t,e)=>{const{type:n,effect:r,predicate:i}=kX(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},VP=t=>{t.pending.forEach(e=>{e.abort(LP)})},xTe=(t,e)=>()=>{for(const n of e.keys())VP(n);t.clear()},U6=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},IX=Bh(Ka(`${uS}/add`),{withTypes:()=>IX}),wTe=Ka(`${uS}/removeAll`),PX=Bh(Ka(`${uS}/remove`),{withTypes:()=>PX}),_Te=(...t)=>{console.error(`${uS}/error`,...t)},B0=(t={})=>{const e=new Map,n=new Map,r=v=>{const b=n.get(v)??0;n.set(v,b+1)},i=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:a,onError:s=_Te}=t;N2(s);const o=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),b=>{v.unsubscribe(),b?.cancelActive&&VP(v)}),c=v=>{const b=F6(e,v)??CX(v);return o(b)};Bh(c,{withTypes:()=>c});const u=v=>{const b=F6(e,v);return b&&(b.unsubscribe(),v.cancelActive&&VP(b)),!!b};Bh(u,{withTypes:()=>u});const f=async(v,b,x,w)=>{const S=new AbortController,T=bTe(c,S.signal),I=[];try{v.pending.add(S),r(v),await Promise.resolve(v.effect(b,Bh({},x,{getOriginalState:w,condition:(O,D)=>T(O,D).then(Boolean),take:T,delay:AX(S.signal),pause:y1(S.signal),extra:a,signal:S.signal,fork:yTe(S.signal,I),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((O,D,N)=>{O!==S&&(O.abort(LP),N.delete(O))})},cancel:()=>{S.abort(LP),v.pending.delete(S)},throwIfCancelled:()=>{Sd(S.signal)}})))}catch(O){O instanceof cS||U6(s,O,{raisedBy:"effect"})}finally{await Promise.all(I),S.abort(mTe),i(v),v.pending.delete(S)}},h=xTe(e,n);return{middleware:v=>b=>x=>{if(!aX(x))return b(x);if(IX.match(x))return c(x.payload);if(wTe.match(x)){h();return}if(PX.match(x))return u(x.payload);let w=v.getState();const S=()=>{if(w===B6)throw new Error(fa(23));return w};let T;try{if(T=b(x),e.size>0){const I=v.getState(),O=Array.from(e.values());for(const D of O){let N=!1;try{N=D.predicate(x,I,w)}catch(C){N=!1,U6(s,C,{raisedBy:"predicate"})}N&&f(D,x,v,S)}}}finally{w=B6}return T},startListening:c,stopListening:u,clearListeners:h}};function fa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var STe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},NX=qi({name:"chartLayout",initialState:STe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:ETe,setLayout:TTe,setChartSize:ATe,setScale:kTe}=NX.actions,CTe=NX.reducer;function DX(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function an(t){return Number.isFinite(t)}function _o(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function $6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ch(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$6(Object(n),!0).forEach(function(r){ITe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ITe(t,e,n){return(e=PTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PTe(t){var e=NTe(t,"string");return typeof e=="symbol"?e:e+""}function NTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hn(t,e,n){return Rr(t)||Rr(e)?n:Ha(e)?Fd(t,e,n):typeof e=="function"?e(t):n}var DTe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&Ke(t[a]))return Ch(Ch({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&Ke(t[s]))return Ch(Ch({},t),{},{[s]:t[s]+(i||0)})}return t},nf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",OX=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},RX=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:v}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=v==="angleAxis"&&a&&a.length>=2?Dr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((S,T)=>{var I=r?r.indexOf(S):S;return{coordinate:s(I)+x,value:S,offset:x,index:T}});return w.filter(S=>!ma(S.coordinate))}return c&&u?u.map((S,T)=>({coordinate:s(S)+x,value:S,index:T,offset:x})):s.ticks&&f!=null?s.ticks(f).map((S,T)=>({coordinate:s(S)+x,value:S,offset:x,index:T})):s.domain().map((S,T)=>({coordinate:s(S)+x,value:r?r[S]:S,index:T,offset:x}))},q6=1e-4,OTe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-q6,a=Math.max(r[0],r[1])+q6,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}},RTe=(t,e)=>{if(!e||e.length!==2||!Ke(e[0])||!Ke(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ke(t[0])||t[0]<n)&&(i[0]=n),(!Ke(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},MTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=ma(f)?h:f;g>=0?(u[0]=a,u[1]=a+g,a=f):(u[0]=s,u[1]=s+g,s=f)}}}},jTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=ma(c[1])?c[0]:c[1];u>=0?(c[0]=a,c[1]=a+u,a=c[1]):(c[0]=0,c[1]=0)}}}},zTe={sign:MTe,expand:lSe,none:Bd,silhouette:cSe,wiggle:uSe,positive:jTe},LTe=(t,e,n)=>{var r,i=(r=zTe[n])!==null&&r!==void 0?r:Bd,a=oSe().keys(e).value((o,c)=>Number(hn(o,c,0))).order(CP).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=hn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&Ke(h[0])&&Ke(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function VTe(t){return t==null?void 0:String(t)}var G6=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=hn(a,e.dataKey,e.scale.domain()[s]);return Rr(o)?null:e.scale(o)-i/2+r},BTe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},FTe=t=>{var e=t.flat(2).filter(Ke);return[Math.min(...e),Math.max(...e)]},UTe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],$Te=(t,e,n)=>{if(t!=null)return UTe(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=DX(u,e,n),h=FTe(f);return!an(h[0])||!an(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},H6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,K6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,b1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=tS(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function W6(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Ch(Ch({},e),{},{dataKey:n,payload:r,value:i,name:a})}function dS(t,e){if(t)return String(t);if(typeof e=="string")return e}var qTe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},GTe=(t,e)=>e==="centric"?t.angle:t.radius,Ol=t=>t.layout.width,Rl=t=>t.layout.height,HTe=t=>t.layout.scale,MX=t=>t.layout.margin,fS=ye(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),hS=ye(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),jX="data-recharts-item-index",zX="data-recharts-item-id",F0=60;function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(r){KTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KTe(t,e,n){return(e=WTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WTe(t){var e=YTe(t,"string");return typeof e=="symbol"?e:e+""}function YTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XTe=t=>t.brush.height;function QTe(t){var e=hS(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:F0;return n+i}return n},0)}function ZTe(t){var e=hS(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:F0;return n+i}return n},0)}function JTe(t){var e=fS(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function eAe(t){var e=fS(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var wr=ye([Ol,Rl,MX,XTe,QTe,ZTe,JTe,eAe,nX,AEe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=mx(mx({},h),f),v=g.bottom;g.bottom+=r,g=DTe(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return mx(mx({brushBottom:v},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),tAe=ye(wr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),D2=ye(Ol,Rl,(t,e)=>({x:0,y:0,width:t,height:e})),nAe=A.createContext(null),_i=()=>A.useContext(nAe)!=null,pS=t=>t.brush,gS=ye([pS,wr,MX],(t,e,n)=>({height:t.height,x:Ke(t.x)?t.x:e.left,y:Ke(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Ke(t.width)?t.width:e.width})),nC={},rC={},iC={},X6;function rAe(){return X6||(X6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},S=function(...T){if(i?.aborted)return;s=this,o=T;const I=g==null;v(),c&&I&&f()};return S.schedule=v,S.cancel=x,S.flush=w,i?.addEventListener("abort",x,{once:!0}),S}t.debounce=e})(iC)),iC}var Q6;function iAe(){return Q6||(Q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rAe();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),v=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return v.cancel=g.cancel,v.flush=b,v}t.debounce=n})(rC)),rC}var Z6;function aAe(){return Z6||(Z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iAe();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(nC)),nC}var aC,J6;function sAe(){return J6||(J6=1,aC=aAe().throttle),aC}var oAe=sAe();const lAe=Il(oAe);var x1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},LX=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,o=_l(r)?t:Number(r),c=_l(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},cAe={width:0,height:0,overflow:"visible"},uAe={width:0,overflowX:"visible"},dAe={height:0,overflowY:"visible"},fAe={},hAe=t=>{var{width:e,height:n}=t,r=_l(e),i=_l(n);return r&&i?cAe:r?uAe:i?dAe:fAe};function pAe(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BP.apply(null,arguments)}function eF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eF(Object(n),!0).forEach(function(r){gAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gAe(t,e,n){return(e=mAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mAe(t){var e=vAe(t,"string");return typeof e=="symbol"?e:e+""}function vAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VX=A.createContext({width:-1,height:-1});function yAe(t){return _o(t.width)&&_o(t.height)}function BX(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return yAe(i)?A.createElement(VX.Provider,{value:i},e):null}var O2=()=>A.useContext(VX),bAe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:f=0,id:h,className:g,onResize:v,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=v,A.useImperativeHandle(e,()=>x.current);var[S,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),I=A.useCallback((P,R)=>{T(j=>{var L=Math.round(P),B=Math.round(R);return j.containerWidth===L&&j.containerHeight===B?j:{containerWidth:L,containerHeight:B}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return L0;var P=B=>{var z,{width:W,height:Z}=B[0].contentRect;I(W,Z),(z=w.current)===null||z===void 0||z.call(w,W,Z)};f>0&&(P=lAe(P,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(P),{width:j,height:L}=x.current.getBoundingClientRect();return I(j,L),R.observe(x.current),()=>{R.disconnect()}},[I,f]);var{containerWidth:O,containerHeight:D}=S;x1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:N,calculatedHeight:C}=LX(O,D,{width:i,height:a,aspect:n,maxHeight:c});return x1(N!=null&&N>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,C,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Wt("recharts-responsive-container",g),style:tF(tF({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:hAe({width:i,height:a})},A.createElement(BX,{width:N,height:C},u)))}),mS=A.forwardRef((t,e)=>{var n=O2();if(_o(n.width)&&_o(n.height))return t.children;var{width:r,height:i}=pAe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=LX(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Ke(a)&&Ke(s)?A.createElement(BX,{width:a,height:s},t.children):A.createElement(bAe,BP({},t,{width:r,height:i,ref:e}))});function FX(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var U0=()=>{var t,e=_i(),n=qe(tAe),r=qe(gS),i=(t=qe(pS))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},xAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},UX=()=>{var t;return(t=qe(wr))!==null&&t!==void 0?t:xAe},$X=()=>qe(Ol),qX=()=>qe(Rl),jt=t=>t.layout.layoutType,$0=()=>qe(jt),wAe=()=>{var t=$0();return t!==void 0},vS=t=>{var e=pn(),n=_i(),{width:r,height:i}=t,a=O2(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&_o(s)&&_o(o)&&e(ATe({width:s,height:o}))},[e,n,s,o]),null},GX=Symbol.for("immer-nothing"),nF=Symbol.for("immer-draftable"),va=Symbol.for("immer-state");function gs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var $v=Object.getPrototypeOf;function xp(t){return!!t&&!!t[va]}function $d(t){return t?HX(t)||Array.isArray(t)||!!t[nF]||!!t.constructor?.[nF]||q0(t)||bS(t):!1}var _Ae=Object.prototype.constructor.toString(),rF=new WeakMap;function HX(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=rF.get(n);return r===void 0&&(r=Function.toString.call(n),rF.set(n,r)),r===_Ae}function w1(t,e,n=!0){yS(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function yS(t){const e=t[va];return e?e.type_:Array.isArray(t)?1:q0(t)?2:bS(t)?3:0}function FP(t,e){return yS(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function KX(t,e,n){const r=yS(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function SAe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function q0(t){return t instanceof Map}function bS(t){return t instanceof Set}function Qu(t){return t.copy_||t.base_}function UP(t,e){if(q0(t))return new Map(t);if(bS(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=HX(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[va];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create($v(t),r)}else{const r=$v(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function R2(t,e=!1){return xS(t)||xp(t)||!$d(t)||(yS(t)>1&&Object.defineProperties(t,{set:vx,add:vx,clear:vx,delete:vx}),Object.freeze(t),e&&Object.values(t).forEach(n=>R2(n,!0))),t}function EAe(){gs(2)}var vx={value:EAe};function xS(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var TAe={};function qd(t){const e=TAe[t];return e||gs(0,t),e}var qv;function WX(){return qv}function AAe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function iF(t,e){e&&(qd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function $P(t){qP(t),t.drafts_.forEach(kAe),t.drafts_=null}function qP(t){t===qv&&(qv=t.parent_)}function aF(t){return qv=AAe(qv,t)}function kAe(t){const e=t[va];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function sF(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[va].modified_&&($P(e),gs(4)),$d(t)&&(t=_1(e,t),e.parent_||S1(e,t)),e.patches_&&qd("Patches").generateReplacementPatches_(n[va].base_,t,e.patches_,e.inversePatches_)):t=_1(e,n,[]),$P(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==GX?t:void 0}function _1(t,e,n){if(xS(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[va];if(!i)return w1(e,(a,s)=>oF(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return S1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),w1(s,(c,u)=>oF(t,i,a,c,u,n,o),r),S1(t,a,!1),n&&t.patches_&&qd("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function oF(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=xS(i);if(!(o&&!s)){if(xp(i)){const c=a&&e&&e.type_!==3&&!FP(e.assigned_,r)?a.concat(r):void 0,u=_1(t,i,c);if(KX(n,r,u),xp(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if($d(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;_1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(q0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&S1(t,i)}}}function S1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&R2(e,n)}function CAe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:WX(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=M2;n&&(i=[r],a=Gv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var M2={get(t,e){if(e===va)return t;const n=Qu(t);if(!FP(n,e))return IAe(t,n,e);const r=n[e];return t.finalized_||!$d(r)?r:r===sC(t.base_,e)?(oC(t),t.copy_[e]=HP(r,t)):r},has(t,e){return e in Qu(t)},ownKeys(t){return Reflect.ownKeys(Qu(t))},set(t,e,n){const r=YX(Qu(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=sC(Qu(t),e),a=i?.[va];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(SAe(n,i)&&(n!==void 0||FP(t.base_,e)))return!0;oC(t),GP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return sC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,oC(t),GP(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Qu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){gs(11)},getPrototypeOf(t){return $v(t.base_)},setPrototypeOf(){gs(12)}},Gv={};w1(M2,(t,e)=>{Gv[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Gv.deleteProperty=function(t,e){return Gv.set.call(this,t,e,void 0)};Gv.set=function(t,e,n){return M2.set.call(this,t[0],e,n,t[0])};function sC(t,e){const n=t[va];return(n?Qu(n):t)[e]}function IAe(t,e,n){const r=YX(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function YX(t,e){if(!(e in t))return;let n=$v(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=$v(n)}}function GP(t){t.modified_||(t.modified_=!0,t.parent_&&GP(t.parent_))}function oC(t){t.copy_||(t.copy_=UP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var PAe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&gs(6),r!==void 0&&typeof r!="function"&&gs(7);let i;if($d(e)){const a=aF(this),s=HP(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?$P(a):qP(a)}return iF(a,r),sF(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===GX&&(i=void 0),this.autoFreeze_&&R2(i,!0),r){const a=[],s=[];qd("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else gs(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){$d(t)||gs(8),xp(t)&&(t=NAe(t));const e=aF(this),n=HP(t,void 0);return n[va].isManual_=!0,qP(e),n}finishDraft(t,e){const n=t&&t[va];(!n||!n.isManual_)&&gs(9);const{scope_:r}=n;return iF(r,e),sF(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=qd("Patches").applyPatches_;return xp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function HP(t,e){const n=q0(t)?qd("MapSet").proxyMap_(t,e):bS(t)?qd("MapSet").proxySet_(t,e):CAe(t,e);return(e?e.scope_:WX()).drafts_.push(n),n}function NAe(t){return xp(t)||gs(10,t),XX(t)}function XX(t){if(!$d(t)||xS(t))return t;const e=t[va];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=UP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=UP(t,!0);return w1(n,(i,a)=>{KX(n,i,XX(a))},r),e&&(e.finalized_=!1),n}var DAe=new PAe;DAe.produce;var OAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},QX=qi({name:"legend",initialState:OAe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:vn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ss(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:vn()},removeLegendPayload:{reducer(t,e){var n=Ss(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:vn()}}}),{setLegendSize:b3e,setLegendSettings:x3e,addLegendPayload:ZX,replaceLegendPayload:JX,removeLegendPayload:eQ}=QX.actions,RAe=QX.reducer;function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KP.apply(null,arguments)}function lF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lF(Object(n),!0).forEach(function(r){MAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MAe(t,e,n){return(e=jAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jAe(t){var e=zAe(t,"string");return typeof e=="symbol"?e:e+""}function zAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LAe(t){return Array.isArray(t)&&Ha(t[0])&&Ha(t[1])?t.join(" ~ "):t}var VAe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=!1}=t,v=()=>{if(a&&a.length){var D={padding:0,margin:0},N=(o?tS(a,o):a).map((C,P)=>{if(C.type==="none")return null;var R=C.formatter||s||LAe,{value:j,name:L}=C,B=j,z=L;if(R){var W=R(j,L,C,P,a);if(Array.isArray(W))[B,z]=W;else if(W!=null)B=W;else return null}var Z=lC({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:Z},Ha(z)?A.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Ha(z)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},B),A.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:D},N)}return null},b=lC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=lC({margin:0},i),w=!Rr(f),S=w?f:"",T=Wt("recharts-default-tooltip",c),I=Wt("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(S=h(f,a));var O=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",KP({className:T,style:b},O),A.createElement("p",{className:I,style:x},A.isValidElement(S)?S:"".concat(S)),v())},hm="recharts-tooltip-wrapper",BAe={visibility:"hidden"};function FAe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Wt(hm,{["".concat(hm,"-right")]:Ke(n)&&e&&Ke(e.x)&&n>=e.x,["".concat(hm,"-left")]:Ke(n)&&e&&Ke(e.x)&&n<e.x,["".concat(hm,"-bottom")]:Ke(r)&&e&&Ke(e.y)&&r>=e.y,["".concat(hm,"-top")]:Ke(r)&&e&&Ke(e.y)&&r<e.y})}function cF(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&Ke(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var v=f,b=g;return v<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function UAe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function $Ae(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:c}=t,u,f,h;return s.height>0&&s.width>0&&n?(f=cF({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=cF({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=UAe({translateX:f,translateY:h,useTranslate3d:o})):u=BAe,{cssProperties:u,cssClasses:FAe({translateX:f,translateY:h,coordinate:n})}}function uF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uF(Object(n),!0).forEach(function(r){WP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WP(t,e,n){return(e=qAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qAe(t){var e=GAe(t,"string");return typeof e=="symbol"?e:e+""}function GAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class HAe extends A.PureComponent{constructor(){super(...arguments),WP(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),WP(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:v,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:S}=this.props,{cssClasses:T,cssProperties:I}=$Ae({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:v}),O=S?{}:yx(yx({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),D=yx(yx({},O),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:D,ref:w},a)}}var tQ=()=>{var t;return(t=qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function YP(){return YP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YP.apply(null,arguments)}function dF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(n),!0).forEach(function(r){KAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KAe(t,e,n){return(e=WAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WAe(t){var e=YAe(t,"string");return typeof e=="symbol"?e:e+""}function YAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hF={curveBasisClosed:X_e,curveBasisOpen:Q_e,curveBasis:Y_e,curveBumpX:M_e,curveBumpY:j_e,curveLinearClosed:Z_e,curveLinear:Z_,curveMonotoneX:J_e,curveMonotoneY:eSe,curveNatural:tSe,curveStep:nSe,curveStepAfter:iSe,curveStepBefore:rSe},E1=t=>an(t.x)&&an(t.y),pF=t=>t.base!=null&&E1(t.base)&&E1(t),pm=t=>t.x,gm=t=>t.y,XAe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(z0(t));return(n==="curveMonotone"||n==="curveBump")&&e?hF["".concat(n).concat(e==="vertical"?"Y":"X")]:hF[n]||Z_},QAe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=XAe(e,i),o=a?n.filter(E1):n,c;if(Array.isArray(r)){var u=n.map((v,b)=>fF(fF({},v),{},{base:r[b]}));i==="vertical"?c=ux().y(gm).x1(pm).x0(v=>v.base.x):c=ux().x(pm).y1(gm).y0(v=>v.base.y);var f=c.defined(pF).curve(s),h=a?u.filter(pF):u;return f(h)}i==="vertical"&&Ke(r)?c=ux().y(gm).x1(pm).x0(r):Ke(r)?c=ux().x(pm).y1(gm).y0(r):c=CY().x(pm).y(gm);var g=c.defined(E1).curve(s);return g(o)},j2=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=$0();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?QAe(s):r;return A.createElement("path",YP({},ks(t),ISe(t),{className:Wt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},ZAe=["x","y","top","left","width","height","className"];function XP(){return XP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XP.apply(null,arguments)}function gF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JAe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gF(Object(n),!0).forEach(function(r){eke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eke(t,e,n){return(e=tke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tke(t){var e=nke(t,"string");return typeof e=="symbol"?e:e+""}function nke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rke(t,e){if(t==null)return{};var n,r,i=ike(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ike(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ake=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),ske=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=rke(t,ZAe),u=JAe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!Ke(e)||!Ke(n)||!Ke(a)||!Ke(s)||!Ke(r)||!Ke(i)?null:A.createElement("path",XP({},ga(u),{className:Wt("recharts-cross",o),d:ake(e,n,a,s,r,i)}))};function oke(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function mF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mF(Object(n),!0).forEach(function(r){lke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lke(t,e,n){return(e=cke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cke(t){var e=uke(t,"string");return typeof e=="symbol"?e:e+""}function uke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dke=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),nQ=(t,e,n)=>t.map(r=>"".concat(dke(r)," ").concat(e,"ms ").concat(n)).join(","),fke=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Hv=(t,e)=>Object.keys(e).reduce((n,r)=>vF(vF({},n),{},{[r]:t(r,e[r])}),{});function yF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yF(Object(n),!0).forEach(function(r){hke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hke(t,e,n){return(e=pke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pke(t){var e=gke(t,"string");return typeof e=="symbol"?e:e+""}function gke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T1=(t,e,n)=>t+(e-t)*n,QP=t=>{var{from:e,to:n}=t;return e!==n},rQ=(t,e,n)=>{var r=Hv((i,a)=>{if(QP(a)){var[s,o]=t(a.from,a.to,a.velocity);return pr(pr({},a),{},{from:s,velocity:o})}return a},e);return n<1?Hv((i,a)=>QP(a)&&r[i]!=null?pr(pr({},a),{},{velocity:T1(a.velocity,r[i].velocity,n),from:T1(a.from,r[i].from,n)}):a,e):rQ(t,r,n-1)};function mke(t,e,n,r,i,a){var s,o=r.reduce((g,v)=>pr(pr({},g),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),c=()=>Hv((g,v)=>v.from,o),u=()=>!Object.values(o).filter(QP).length,f=null,h=g=>{s||(s=g);var v=g-s,b=v/n.dt;o=rQ(n,o,b),i(pr(pr(pr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function vke(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var v=t[g],b=e[g];return v==null||b==null?h:pr(pr({},h),{},{[g]:[v,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,v=Hv((x,w)=>T1(...w,n(g)),c);if(a(pr(pr(pr({},t),e),v)),g<1)o=s.setTimeout(f);else{var b=Hv((x,w)=>T1(...w,n(1)),c);a(pr(pr(pr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const yke=(t,e,n,r,i,a)=>{var s=fke(t,e);return n==null?()=>(i(pr(pr({},t),e)),()=>{}):n.isStepper===!0?mke(t,e,n,s,i,a):vke(t,e,n,r,s,i,a)};var A1=1e-4,iQ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],aQ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),bF=(t,e)=>n=>{var r=iQ(t,e);return aQ(r,n)},bke=(t,e)=>n=>{var r=iQ(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return aQ(i,n)},xke=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},wke=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=xke(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},_ke=(t,e,n,r)=>{var i=bF(t,n),a=bF(e,r),s=bke(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var v=i(h)-f,b=s(h);if(Math.abs(v-f)<A1||b<A1)return a(h);h=o(h-v/b)}return a(h)};return c.isStepper=!1,c},xF=function(){return _ke(...wke(...arguments))},Ske=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<A1&&Math.abs(h)<A1?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},Eke=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return xF(t);case"spring":return Ske();default:if(t.split("(")[0]==="cubic-bezier")return xF(t)}return typeof t=="function"?t:null};function Tke(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class Ake{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function kke(){return Tke(new Ake)}var Cke=A.createContext(kke);function Ike(t,e){var n=A.useContext(Cke);return A.useMemo(()=>e??n(t),[t,e,n])}var Pke=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),wS={isSsr:Pke()},Nke={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},wF={t:0},cC={t:1};function _S(t){var e=Yr(t,Nke),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!wS.isSsr:n,h=Ike(e.animationId,e.animationManager),[g,v]=A.useState(f?wF:cC),b=A.useRef(null);return A.useEffect(()=>{f||v(cC)},[f]),A.useEffect(()=>{if(!f||!r)return L0;var x=yke(wF,cC,Eke(a),i,v,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function SS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Vv(e)),r=A.useRef(t);return r.current!==t&&(n.current=Vv(e),r.current=t),n.current}var Dke=["radius"],Oke=["radius"],_F,SF,EF,TF,AF,kF,CF,IF,PF,NF;function DF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DF(Object(n),!0).forEach(function(r){Rke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rke(t,e,n){return(e=Mke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mke(t){var e=jke(t,"string");return typeof e=="symbol"?e:e+""}function jke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function k1(){return k1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k1.apply(null,arguments)}function RF(t,e){if(t==null)return{};var n,r,i=zke(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Zs(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var MF=(t,e,n,r,i)=>{var a=jc(n),s=jc(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&i instanceof Array){for(var g=[0,0,0,0],v=0,b=4;v<b;v++)g[v]=i[v]>o?o:i[v];h=Mn(_F||(_F=Zs(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Mn(SF||(SF=Zs(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=Mn(EF||(EF=Zs(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=Mn(TF||(TF=Zs(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Mn(AF||(AF=Zs(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Mn(kF||(kF=Zs(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=Mn(CF||(CF=Zs(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=Mn(IF||(IF=Zs(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);h=Mn(PF||(PF=Zs(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*x,x,x,f,t+u*x,e,t+n-u*x,e,x,x,f,t+n,e+c*x,t+n,e+r-c*x,x,x,f,t+n-u*x,e+r,t+u*x,e+r,x,x,f,t,e+r-c*x)}else h=Mn(NF||(NF=Zs(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},jF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sQ=t=>{var e=Yr(t,jF),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Y=n.current.getTotalLength();Y&&i(Y)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),S=A.useRef(c),T=A.useRef(a),I=A.useRef(s),O=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),D=SS(O,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var N=Wt("recharts-rectangle",f);if(!x){var C=ga(e),{radius:P}=C,R=RF(C,Dke);return A.createElement("path",k1({},R,{x:jc(a),y:jc(s),width:jc(o),height:jc(c),radius:typeof u=="number"?u:void 0,className:N,d:MF(a,s,o,c,u)}))}var j=w.current,L=S.current,B=T.current,z=I.current,W="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),G=nQ(["strokeDasharray"],g,typeof h=="string"?h:jF.animationEasing);return A.createElement(_S,{animationId:D,key:D,canBegin:r>0,duration:g,easing:h,isActive:x,begin:v},Y=>{var Q=hr(j,o,Y),J=hr(L,c,Y),te=hr(B,a,Y),U=hr(z,s,Y);n.current&&(w.current=Q,S.current=J,T.current=te,I.current=U);var X;b?Y>0?X={transition:G,strokeDasharray:Z}:X={strokeDasharray:W}:X={strokeDasharray:Z};var re=ga(e),{radius:K}=re,ue=RF(re,Oke);return A.createElement("path",k1({},ue,{radius:typeof u=="number"?u:void 0,className:N,d:MF(te,U,Q,J,u),ref:n,style:OF(OF({},X),e.style)}))})};function zF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(n),!0).forEach(function(r){Lke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lke(t,e,n){return(e=Vke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vke(t){var e=Bke(t,"string");return typeof e=="symbol"?e:e+""}function Bke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C1=Math.PI/180,Fke=t=>t*180/Math.PI,lr=(t,e,n,r)=>({x:t+Math.cos(-C1*r)*n,y:e+Math.sin(-C1*r)*n}),oQ=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Uke=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},$ke=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=Uke({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:Fke(c),angleInRadian:c}},qke=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},Gke=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},Hke=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=$ke({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=qke(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?LF(LF({},e),{},{radius:i,angle:Gke(f,e)}):null};function lQ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=lr(e,n,r,i),o=lr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var VF,BF,FF,UF,$F,qF,GF;function ZP(){return ZP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZP.apply(null,arguments)}function fd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Kke=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},bx=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/C1,h=c?i:i+a*f,g=lr(e,n,u,h),v=lr(e,n,r,h),b=c?i-a*f:i,x=lr(e,n,u*Math.cos(f*C1),b);return{center:g,circleTangency:v,lineTangency:x,theta:f}},cQ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=Kke(a,s),c=a+o,u=lr(e,n,i,a),f=lr(e,n,i,c),h=Mn(VF||(VF=fd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=lr(e,n,r,a),v=lr(e,n,r,c);h+=Mn(BF||(BF=fd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Mn(FF||(FF=fd(["L ",","," Z"])),e,n);return h},Wke=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=Dr(u-c),{circleTangency:h,lineTangency:g,theta:v}=bx({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=bx({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-v-w;if(S<0)return s?Mn(UF||(UF=fd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):cQ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var T=Mn($F||($F=fd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:I,lineTangency:O,theta:D}=bx({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:N,lineTangency:C,theta:P}=bx({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-u):Math.abs(c-u)-D-P;if(R<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Mn(qF||(qF=fd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),C.x,C.y,a,a,+(f<0),N.x,N.y,r,r,+(R>180),+(f>0),I.x,I.y,a,a,+(f<0),O.x,O.y)}else T+=Mn(GF||(GF=fd(["L",",","Z"])),e,n);return T},Yke={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uQ=t=>{var e=Yr(t,Yke),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Wt("recharts-sector",h),v=a-i,b=si(s,v,0,!0),x;return b>0&&Math.abs(u-f)<360?x=Wke({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,v/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=cQ({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),A.createElement("path",ZP({},ga(e),{className:g,d:x}))};function Xke(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if($Y(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=lr(r,i,a,o),u=lr(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return lQ(e)}}var uC={},dC={},fC={},HF;function Qke(){return HF||(HF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eX();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(fC)),fC}var KF;function Zke(){return KF||(KF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qke();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(dC)),dC}var WF;function Jke(){return WF||(WF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tX(),n=Zke();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(uC)),uC}var hC,YF;function eCe(){return YF||(YF=1,hC=Jke().range),hC}var tCe=eCe();const dQ=Il(tCe);function $c(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nCe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function z2(t){let e,n,r;t.length!==2?(e=$c,n=(o,c)=>$c(t(o),c),r=(o,c)=>t(o)-c):(e=t===$c||t===nCe?t:rCe,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function rCe(){return 0}function fQ(t){return t===null?NaN:+t}function*iCe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const aCe=z2($c),G0=aCe.right;z2(fQ).center;class XF extends Map{constructor(e,n=lCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(QF(this,e))}has(e){return super.has(QF(this,e))}set(e,n){return super.set(sCe(this,e),n)}delete(e){return super.delete(oCe(this,e))}}function QF({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function sCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function oCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function lCe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function cCe(t=$c){if(t===$c)return hQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function hQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const uCe=Math.sqrt(50),dCe=Math.sqrt(10),fCe=Math.sqrt(2);function I1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=uCe?10:a>=dCe?5:a>=fCe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?I1(t,e,n*2):[o,c,u]}function JP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?I1(e,t,n):I1(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function eN(t,e,n){return e=+e,t=+t,n=+n,I1(t,e,n)[2]}function tN(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?eN(e,t,n):eN(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ZF(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function JF(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function pQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?hQ:cCe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),v=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));pQ(t,e,v,b,i)}const a=t[e];let s=n,o=r;for(mm(t,n,e),i(t[r],a)>0&&mm(t,n,r);s<o;){for(mm(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?mm(t,n,o):(++o,mm(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function mm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function hCe(t,e,n){if(t=Float64Array.from(iCe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return JF(t);if(e>=1)return ZF(t);var r,i=(r-1)*e,a=Math.floor(i),s=ZF(pQ(t,a).subarray(0,a+1)),o=JF(t.subarray(a+1));return s+(o-s)*(i-a)}}function pCe(t,e,n=fQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function gCe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Za(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ml(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nN=Symbol("implicit");function L2(){var t=new XF,e=[],n=[],r=nN;function i(a){let s=t.get(a);if(s===void 0){if(r!==nN)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new XF;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return L2(e,n).unknown(r)},Za.apply(i,arguments),i}function V2(){var t=L2().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,v=i<r,b=v?i:r,x=v?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=gCe(g).map(function(S){return b+a*S});return n(v?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return V2(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},Za.apply(h(),arguments)}function gQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return gQ(e())},t}function mCe(){return gQ(V2.apply(null,arguments).paddingInner(1))}function B2(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function H0(){}var Kv=.7,P1=1/Kv,Fh="\\s*([+-]?\\d+)\\s*",Wv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vCe=/^#([0-9a-f]{3,8})$/,yCe=new RegExp(`^rgb\\(${Fh},${Fh},${Fh}\\)$`),bCe=new RegExp(`^rgb\\(${vo},${vo},${vo}\\)$`),xCe=new RegExp(`^rgba\\(${Fh},${Fh},${Fh},${Wv}\\)$`),wCe=new RegExp(`^rgba\\(${vo},${vo},${vo},${Wv}\\)$`),_Ce=new RegExp(`^hsl\\(${Wv},${vo},${vo}\\)$`),SCe=new RegExp(`^hsla\\(${Wv},${vo},${vo},${Wv}\\)$`),eU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};B2(H0,Yv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tU,formatHex:tU,formatHex8:ECe,formatHsl:TCe,formatRgb:nU,toString:nU});function tU(){return this.rgb().formatHex()}function ECe(){return this.rgb().formatHex8()}function TCe(){return vQ(this).formatHsl()}function nU(){return this.rgb().formatRgb()}function Yv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=vCe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rU(e):n===3?new Vi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?xx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?xx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yCe.exec(t))?new Vi(e[1],e[2],e[3],1):(e=bCe.exec(t))?new Vi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xCe.exec(t))?xx(e[1],e[2],e[3],e[4]):(e=wCe.exec(t))?xx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_Ce.exec(t))?sU(e[1],e[2]/100,e[3]/100,1):(e=SCe.exec(t))?sU(e[1],e[2]/100,e[3]/100,e[4]):eU.hasOwnProperty(t)?rU(eU[t]):t==="transparent"?new Vi(NaN,NaN,NaN,0):null}function rU(t){return new Vi(t>>16&255,t>>8&255,t&255,1)}function xx(t,e,n,r){return r<=0&&(t=e=n=NaN),new Vi(t,e,n,r)}function ACe(t){return t instanceof H0||(t=Yv(t)),t?(t=t.rgb(),new Vi(t.r,t.g,t.b,t.opacity)):new Vi}function rN(t,e,n,r){return arguments.length===1?ACe(t):new Vi(t,e,n,r??1)}function Vi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}B2(Vi,rN,mQ(H0,{brighter(t){return t=t==null?P1:Math.pow(P1,t),new Vi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Kv:Math.pow(Kv,t),new Vi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Vi(Ed(this.r),Ed(this.g),Ed(this.b),N1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iU,formatHex:iU,formatHex8:kCe,formatRgb:aU,toString:aU}));function iU(){return`#${hd(this.r)}${hd(this.g)}${hd(this.b)}`}function kCe(){return`#${hd(this.r)}${hd(this.g)}${hd(this.b)}${hd((isNaN(this.opacity)?1:this.opacity)*255)}`}function aU(){const t=N1(this.opacity);return`${t===1?"rgb(":"rgba("}${Ed(this.r)}, ${Ed(this.g)}, ${Ed(this.b)}${t===1?")":`, ${t})`}`}function N1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ed(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hd(t){return t=Ed(t),(t<16?"0":"")+t.toString(16)}function sU(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ms(t,e,n,r)}function vQ(t){if(t instanceof ms)return new ms(t.h,t.s,t.l,t.opacity);if(t instanceof H0||(t=Yv(t)),!t)return new ms;if(t instanceof ms)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new ms(s,o,c,t.opacity)}function CCe(t,e,n,r){return arguments.length===1?vQ(t):new ms(t,e,n,r??1)}function ms(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}B2(ms,CCe,mQ(H0,{brighter(t){return t=t==null?P1:Math.pow(P1,t),new ms(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Kv:Math.pow(Kv,t),new ms(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Vi(pC(t>=240?t-240:t+120,i,r),pC(t,i,r),pC(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ms(oU(this.h),wx(this.s),wx(this.l),N1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=N1(this.opacity);return`${t===1?"hsl(":"hsla("}${oU(this.h)}, ${wx(this.s)*100}%, ${wx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function oU(t){return t=(t||0)%360,t<0?t+360:t}function wx(t){return Math.max(0,Math.min(1,t||0))}function pC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const F2=t=>()=>t;function ICe(t,e){return function(n){return t+n*e}}function PCe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function NCe(t){return(t=+t)==1?yQ:function(e,n){return n-e?PCe(e,n,t):F2(isNaN(e)?n:e)}}function yQ(t,e){var n=e-t;return n?ICe(t,n):F2(isNaN(t)?e:t)}const lU=(function t(e){var n=NCe(e);function r(i,a){var s=n((i=rN(i)).r,(a=rN(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=yQ(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function DCe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function OCe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function RCe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Kp(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function MCe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function D1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function jCe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Kp(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var iN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gC=new RegExp(iN.source,"g");function zCe(t){return function(){return t}}function LCe(t){return function(e){return t(e)+""}}function VCe(t,e){var n=iN.lastIndex=gC.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=iN.exec(t))&&(i=gC.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:D1(r,i)})),n=gC.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?LCe(c[0].x):zCe(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function Kp(t,e){var n=typeof e,r;return e==null||n==="boolean"?F2(e):(n==="number"?D1:n==="string"?(r=Yv(e))?(e=r,lU):VCe:e instanceof Yv?lU:e instanceof Date?MCe:OCe(e)?DCe:Array.isArray(e)?RCe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?jCe:D1)(t,e)}function U2(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function BCe(t,e){e===void 0&&(e=t,t=Kp);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function FCe(t){return function(){return t}}function O1(t){return+t}var cU=[0,1];function yi(t){return t}function aN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:FCe(isNaN(e)?NaN:.5)}function UCe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function $Ce(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=aN(i,r),a=n(s,a)):(r=aN(r,i),a=n(a,s)),function(o){return a(r(o))}}function qCe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=aN(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=G0(t,o,1,r)-1;return a[c](i[c](o))}}function K0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ES(){var t=cU,e=cU,n=Kp,r,i,a,s=yi,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==yi&&(s=UCe(t[0],t[g-1])),o=g>2?qCe:$Ce,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),D1)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,O1),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=U2,f()},h.clamp=function(g){return arguments.length?(s=g?!0:yi,f()):s!==yi},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,v){return r=g,i=v,f()}}function $2(){return ES()(yi,yi)}function GCe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function R1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function wp(t){return t=R1(Math.abs(t)),t?t[1]:NaN}function HCe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function KCe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var WCe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xv(t){if(!(e=WCe.exec(t)))throw new Error("invalid format: "+t);var e;return new q2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xv.prototype=q2.prototype;function q2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}q2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function YCe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var bQ;function XCe(t,e){var n=R1(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(bQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+R1(t,Math.max(0,e+a-1))[0]}function uU(t,e){var n=R1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:GCe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>uU(t*100,e),r:uU,s:XCe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fU(t){return t}var hU=Array.prototype.map,pU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function QCe(t){var e=t.grouping===void 0||t.thousands===void 0?fU:HCe(hU.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?fU:KCe(hU.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Xv(h);var g=h.fill,v=h.align,b=h.sign,x=h.symbol,w=h.zero,S=h.width,T=h.comma,I=h.precision,O=h.trim,D=h.type;D==="n"?(T=!0,D="g"):dU[D]||(I===void 0&&(I=12),O=!0,D="g"),(w||g==="0"&&v==="=")&&(w=!0,g="0",v="=");var N=x==="$"?n:x==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",C=x==="$"?r:/[%p]/.test(D)?s:"",P=dU[D],R=/[defgprs%]/.test(D);I=I===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function j(L){var B=N,z=C,W,Z,G;if(D==="c")z=P(L)+z,L="";else{L=+L;var Y=L<0||1/L<0;if(L=isNaN(L)?c:P(Math.abs(L),I),O&&(L=YCe(L)),Y&&+L==0&&b!=="+"&&(Y=!1),B=(Y?b==="("?b:o:b==="-"||b==="("?"":b)+B,z=(D==="s"?pU[8+bQ/3]:"")+z+(Y&&b==="("?")":""),R){for(W=-1,Z=L.length;++W<Z;)if(G=L.charCodeAt(W),48>G||G>57){z=(G===46?i+L.slice(W+1):L.slice(W))+z,L=L.slice(0,W);break}}}T&&!w&&(L=e(L,1/0));var Q=B.length+L.length+z.length,J=Q<S?new Array(S-Q+1).join(g):"";switch(T&&w&&(L=e(J+L,J.length?S-z.length:1/0),J=""),v){case"<":L=B+L+z+J;break;case"=":L=B+J+L+z;break;case"^":L=J.slice(0,Q=J.length>>1)+B+L+z+J.slice(Q);break;default:L=J+B+L+z;break}return a(L)}return j.toString=function(){return h+""},j}function f(h,g){var v=u((h=Xv(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(wp(g)/3)))*3,x=Math.pow(10,-b),w=pU[8+b/3];return function(S){return v(x*S)+w}}return{format:u,formatPrefix:f}}var _x,G2,xQ;ZCe({thousands:",",grouping:[3],currency:["$",""]});function ZCe(t){return _x=QCe(t),G2=_x.format,xQ=_x.formatPrefix,_x}function JCe(t){return Math.max(0,-wp(Math.abs(t)))}function eIe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wp(e)/3)))*3-wp(Math.abs(t)))}function tIe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wp(e)-wp(t))+1}function wQ(t,e,n,r){var i=tN(t,e,n),a;switch(r=Xv(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=eIe(i,s))&&(r.precision=a),xQ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=tIe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=JCe(i))&&(r.precision=a-(r.type==="%")*2);break}}return G2(r)}function fu(t){var e=t.domain;return t.ticks=function(n){var r=e();return JP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return wQ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=eN(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function _Q(){var t=$2();return t.copy=function(){return K0(t,_Q())},Za.apply(t,arguments),fu(t)}function SQ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,O1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return SQ(t).unknown(e)},t=arguments.length?Array.from(t,O1):[0,1],fu(n)}function EQ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function gU(t){return Math.log(t)}function mU(t){return Math.exp(t)}function nIe(t){return-Math.log(-t)}function rIe(t){return-Math.exp(-t)}function iIe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function aIe(t){return t===10?iIe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function sIe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function vU(t){return(e,n)=>-t(-e,n)}function H2(t){const e=t(gU,mU),n=e.domain;let r=10,i,a;function s(){return i=sIe(r),a=aIe(r),n()[0]<0?(i=vU(i),a=vU(a),t(nIe,rIe)):t(gU,mU),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),v=i(f),b,x;const w=o==null?10:+o;let S=[];if(!(r%1)&&v-g<w){if(g=Math.floor(g),v=Math.ceil(v),u>0){for(;g<=v;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}}else for(;g<=v;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}S.length*2<w&&(S=JP(u,f,w))}else S=JP(g,v,Math.min(v-g,w)).map(a);return h?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Xv(c)).precision==null&&(c.trim=!0),c=G2(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(EQ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function TQ(){const t=H2(ES()).domain([1,10]);return t.copy=()=>K0(t,TQ()).base(t.base()),Za.apply(t,arguments),t}function yU(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function bU(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function K2(t){var e=1,n=t(yU(e),bU(e));return n.constant=function(r){return arguments.length?t(yU(e=+r),bU(e)):e},fu(n)}function AQ(){var t=K2(ES());return t.copy=function(){return K0(t,AQ()).constant(t.constant())},Za.apply(t,arguments)}function xU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function oIe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function lIe(t){return t<0?-t*t:t*t}function W2(t){var e=t(yi,yi),n=1;function r(){return n===1?t(yi,yi):n===.5?t(oIe,lIe):t(xU(n),xU(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},fu(e)}function Y2(){var t=W2(ES());return t.copy=function(){return K0(t,Y2()).exponent(t.exponent())},Za.apply(t,arguments),t}function cIe(){return Y2.apply(null,arguments).exponent(.5)}function wU(t){return Math.sign(t)*t*t}function uIe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function kQ(){var t=$2(),e=[0,1],n=!1,r;function i(a){var s=uIe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(wU(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,O1)).map(wU)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return kQ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Za.apply(i,arguments),fu(i)}function CQ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=pCe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[G0(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort($c),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return CQ().domain(t).range(e).unknown(r)},Za.apply(a,arguments)}function IQ(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[G0(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return IQ().domain([t,e]).range(i).unknown(a)},Za.apply(fu(s),arguments)}function PQ(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[G0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return PQ().domain(t).range(e).unknown(n)},Za.apply(i,arguments)}const mC=new Date,vC=new Date;function _r(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>_r(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(mC.setTime(+a),vC.setTime(+s),t(mC),t(vC),Math.floor(n(mC,vC))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const M1=_r(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);M1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_r(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):M1);M1.range;const nl=1e3,Ba=nl*60,rl=Ba*60,El=rl*24,X2=El*7,_U=El*30,yC=El*365,pd=_r(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*nl)},(t,e)=>(e-t)/nl,t=>t.getUTCSeconds());pd.range;const Q2=_r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*nl)},(t,e)=>{t.setTime(+t+e*Ba)},(t,e)=>(e-t)/Ba,t=>t.getMinutes());Q2.range;const Z2=_r(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ba)},(t,e)=>(e-t)/Ba,t=>t.getUTCMinutes());Z2.range;const J2=_r(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*nl-t.getMinutes()*Ba)},(t,e)=>{t.setTime(+t+e*rl)},(t,e)=>(e-t)/rl,t=>t.getHours());J2.range;const eR=_r(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*rl)},(t,e)=>(e-t)/rl,t=>t.getUTCHours());eR.range;const W0=_r(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ba)/El,t=>t.getDate()-1);W0.range;const TS=_r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/El,t=>t.getUTCDate()-1);TS.range;const NQ=_r(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/El,t=>Math.floor(t/El));NQ.range;function rf(t){return _r(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ba)/X2)}const AS=rf(0),j1=rf(1),dIe=rf(2),fIe=rf(3),_p=rf(4),hIe=rf(5),pIe=rf(6);AS.range;j1.range;dIe.range;fIe.range;_p.range;hIe.range;pIe.range;function af(t){return _r(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/X2)}const kS=af(0),z1=af(1),gIe=af(2),mIe=af(3),Sp=af(4),vIe=af(5),yIe=af(6);kS.range;z1.range;gIe.range;mIe.range;Sp.range;vIe.range;yIe.range;const tR=_r(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());tR.range;const nR=_r(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());nR.range;const Tl=_r(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Tl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_r(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Tl.range;const Al=_r(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Al.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_r(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Al.range;function DQ(t,e,n,r,i,a){const s=[[pd,1,nl],[pd,5,5*nl],[pd,15,15*nl],[pd,30,30*nl],[a,1,Ba],[a,5,5*Ba],[a,15,15*Ba],[a,30,30*Ba],[i,1,rl],[i,3,3*rl],[i,6,6*rl],[i,12,12*rl],[r,1,El],[r,2,2*El],[n,1,X2],[e,1,_U],[e,3,3*_U],[t,1,yC]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const v=h&&typeof h.range=="function"?h:c(u,f,h),b=v?v.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,v=z2(([,,w])=>w).right(s,g);if(v===s.length)return t.every(tN(u/yC,f/yC,h));if(v===0)return M1.every(Math.max(tN(u,f,h),1));const[b,x]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return b.every(x)}return[o,c]}const[bIe,xIe]=DQ(Al,nR,kS,NQ,eR,Z2),[wIe,_Ie]=DQ(Tl,tR,AS,W0,J2,Q2);function bC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function xC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function SIe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=ym(i),f=bm(i),h=ym(a),g=bm(a),v=ym(s),b=bm(s),x=ym(o),w=bm(o),S=ym(c),T=bm(c),I={a:Y,A:Q,b:J,B:te,c:null,d:CU,e:CU,f:HIe,g:nPe,G:iPe,H:$Ie,I:qIe,j:GIe,L:OQ,m:KIe,M:WIe,p:U,q:X,Q:NU,s:DU,S:YIe,u:XIe,U:QIe,V:ZIe,w:JIe,W:ePe,x:null,X:null,y:tPe,Y:rPe,Z:aPe,"%":PU},O={a:re,A:K,b:ue,B:ne,c:null,d:IU,e:IU,f:cPe,g:bPe,G:wPe,H:sPe,I:oPe,j:lPe,L:MQ,m:uPe,M:dPe,p:oe,q:_e,Q:NU,s:DU,S:fPe,u:hPe,U:pPe,V:gPe,w:mPe,W:vPe,x:null,X:null,y:yPe,Y:xPe,Z:_Pe,"%":PU},D={a:j,A:L,b:B,B:z,c:W,d:AU,e:AU,f:VIe,g:TU,G:EU,H:kU,I:kU,j:MIe,L:LIe,m:RIe,M:jIe,p:R,q:OIe,Q:FIe,s:UIe,S:zIe,u:CIe,U:IIe,V:PIe,w:kIe,W:NIe,x:Z,X:G,y:TU,Y:EU,Z:DIe,"%":BIe};I.x=N(n,I),I.X=N(r,I),I.c=N(e,I),O.x=N(n,O),O.X=N(r,O),O.c=N(e,O);function N(ae,ge){return function(fe){var ee=[],Ae=-1,Ie=0,Re=ae.length,Le,Be,nt;for(fe instanceof Date||(fe=new Date(+fe));++Ae<Re;)ae.charCodeAt(Ae)===37&&(ee.push(ae.slice(Ie,Ae)),(Be=SU[Le=ae.charAt(++Ae)])!=null?Le=ae.charAt(++Ae):Be=Le==="e"?" ":"0",(nt=ge[Le])&&(Le=nt(fe,Be)),ee.push(Le),Ie=Ae+1);return ee.push(ae.slice(Ie,Ae)),ee.join("")}}function C(ae,ge){return function(fe){var ee=vm(1900,void 0,1),Ae=P(ee,ae,fe+="",0),Ie,Re;if(Ae!=fe.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ge&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Ie=xC(vm(ee.y,0,1)),Re=Ie.getUTCDay(),Ie=Re>4||Re===0?z1.ceil(Ie):z1(Ie),Ie=TS.offset(Ie,(ee.V-1)*7),ee.y=Ie.getUTCFullYear(),ee.m=Ie.getUTCMonth(),ee.d=Ie.getUTCDate()+(ee.w+6)%7):(Ie=bC(vm(ee.y,0,1)),Re=Ie.getDay(),Ie=Re>4||Re===0?j1.ceil(Ie):j1(Ie),Ie=W0.offset(Ie,(ee.V-1)*7),ee.y=Ie.getFullYear(),ee.m=Ie.getMonth(),ee.d=Ie.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),Re="Z"in ee?xC(vm(ee.y,0,1)).getUTCDay():bC(vm(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(Re+5)%7:ee.w+ee.U*7-(Re+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,xC(ee)):bC(ee)}}function P(ae,ge,fe,ee){for(var Ae=0,Ie=ge.length,Re=fe.length,Le,Be;Ae<Ie;){if(ee>=Re)return-1;if(Le=ge.charCodeAt(Ae++),Le===37){if(Le=ge.charAt(Ae++),Be=D[Le in SU?ge.charAt(Ae++):Le],!Be||(ee=Be(ae,fe,ee))<0)return-1}else if(Le!=fe.charCodeAt(ee++))return-1}return ee}function R(ae,ge,fe){var ee=u.exec(ge.slice(fe));return ee?(ae.p=f.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function j(ae,ge,fe){var ee=v.exec(ge.slice(fe));return ee?(ae.w=b.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function L(ae,ge,fe){var ee=h.exec(ge.slice(fe));return ee?(ae.w=g.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function B(ae,ge,fe){var ee=S.exec(ge.slice(fe));return ee?(ae.m=T.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function z(ae,ge,fe){var ee=x.exec(ge.slice(fe));return ee?(ae.m=w.get(ee[0].toLowerCase()),fe+ee[0].length):-1}function W(ae,ge,fe){return P(ae,e,ge,fe)}function Z(ae,ge,fe){return P(ae,n,ge,fe)}function G(ae,ge,fe){return P(ae,r,ge,fe)}function Y(ae){return s[ae.getDay()]}function Q(ae){return a[ae.getDay()]}function J(ae){return c[ae.getMonth()]}function te(ae){return o[ae.getMonth()]}function U(ae){return i[+(ae.getHours()>=12)]}function X(ae){return 1+~~(ae.getMonth()/3)}function re(ae){return s[ae.getUTCDay()]}function K(ae){return a[ae.getUTCDay()]}function ue(ae){return c[ae.getUTCMonth()]}function ne(ae){return o[ae.getUTCMonth()]}function oe(ae){return i[+(ae.getUTCHours()>=12)]}function _e(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ge=N(ae+="",I);return ge.toString=function(){return ae},ge},parse:function(ae){var ge=C(ae+="",!1);return ge.toString=function(){return ae},ge},utcFormat:function(ae){var ge=N(ae+="",O);return ge.toString=function(){return ae},ge},utcParse:function(ae){var ge=C(ae+="",!0);return ge.toString=function(){return ae},ge}}}var SU={"-":"",_:" ",0:"0"},Mr=/^\s*\d+/,EIe=/^%/,TIe=/[\\^$*+?|[\]().{}]/g;function Mt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function AIe(t){return t.replace(TIe,"\\$&")}function ym(t){return new RegExp("^(?:"+t.map(AIe).join("|")+")","i")}function bm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function kIe(t,e,n){var r=Mr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function CIe(t,e,n){var r=Mr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function IIe(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function PIe(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function NIe(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function EU(t,e,n){var r=Mr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function TU(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function DIe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function OIe(t,e,n){var r=Mr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function RIe(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function AU(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function MIe(t,e,n){var r=Mr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kU(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function jIe(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function zIe(t,e,n){var r=Mr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function LIe(t,e,n){var r=Mr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function VIe(t,e,n){var r=Mr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function BIe(t,e,n){var r=EIe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function FIe(t,e,n){var r=Mr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function UIe(t,e,n){var r=Mr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function CU(t,e){return Mt(t.getDate(),e,2)}function $Ie(t,e){return Mt(t.getHours(),e,2)}function qIe(t,e){return Mt(t.getHours()%12||12,e,2)}function GIe(t,e){return Mt(1+W0.count(Tl(t),t),e,3)}function OQ(t,e){return Mt(t.getMilliseconds(),e,3)}function HIe(t,e){return OQ(t,e)+"000"}function KIe(t,e){return Mt(t.getMonth()+1,e,2)}function WIe(t,e){return Mt(t.getMinutes(),e,2)}function YIe(t,e){return Mt(t.getSeconds(),e,2)}function XIe(t){var e=t.getDay();return e===0?7:e}function QIe(t,e){return Mt(AS.count(Tl(t)-1,t),e,2)}function RQ(t){var e=t.getDay();return e>=4||e===0?_p(t):_p.ceil(t)}function ZIe(t,e){return t=RQ(t),Mt(_p.count(Tl(t),t)+(Tl(t).getDay()===4),e,2)}function JIe(t){return t.getDay()}function ePe(t,e){return Mt(j1.count(Tl(t)-1,t),e,2)}function tPe(t,e){return Mt(t.getFullYear()%100,e,2)}function nPe(t,e){return t=RQ(t),Mt(t.getFullYear()%100,e,2)}function rPe(t,e){return Mt(t.getFullYear()%1e4,e,4)}function iPe(t,e){var n=t.getDay();return t=n>=4||n===0?_p(t):_p.ceil(t),Mt(t.getFullYear()%1e4,e,4)}function aPe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Mt(e/60|0,"0",2)+Mt(e%60,"0",2)}function IU(t,e){return Mt(t.getUTCDate(),e,2)}function sPe(t,e){return Mt(t.getUTCHours(),e,2)}function oPe(t,e){return Mt(t.getUTCHours()%12||12,e,2)}function lPe(t,e){return Mt(1+TS.count(Al(t),t),e,3)}function MQ(t,e){return Mt(t.getUTCMilliseconds(),e,3)}function cPe(t,e){return MQ(t,e)+"000"}function uPe(t,e){return Mt(t.getUTCMonth()+1,e,2)}function dPe(t,e){return Mt(t.getUTCMinutes(),e,2)}function fPe(t,e){return Mt(t.getUTCSeconds(),e,2)}function hPe(t){var e=t.getUTCDay();return e===0?7:e}function pPe(t,e){return Mt(kS.count(Al(t)-1,t),e,2)}function jQ(t){var e=t.getUTCDay();return e>=4||e===0?Sp(t):Sp.ceil(t)}function gPe(t,e){return t=jQ(t),Mt(Sp.count(Al(t),t)+(Al(t).getUTCDay()===4),e,2)}function mPe(t){return t.getUTCDay()}function vPe(t,e){return Mt(z1.count(Al(t)-1,t),e,2)}function yPe(t,e){return Mt(t.getUTCFullYear()%100,e,2)}function bPe(t,e){return t=jQ(t),Mt(t.getUTCFullYear()%100,e,2)}function xPe(t,e){return Mt(t.getUTCFullYear()%1e4,e,4)}function wPe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Sp(t):Sp.ceil(t),Mt(t.getUTCFullYear()%1e4,e,4)}function _Pe(){return"+0000"}function PU(){return"%"}function NU(t){return+t}function DU(t){return Math.floor(+t/1e3)}var sh,zQ,LQ;SPe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function SPe(t){return sh=SIe(t),zQ=sh.format,sh.parse,LQ=sh.utcFormat,sh.utcParse,sh}function EPe(t){return new Date(t)}function TPe(t){return t instanceof Date?+t:+new Date(+t)}function rR(t,e,n,r,i,a,s,o,c,u){var f=$2(),h=f.invert,g=f.domain,v=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),S=u("%a %d"),T=u("%b %d"),I=u("%B"),O=u("%Y");function D(N){return(c(N)<N?v:o(N)<N?b:s(N)<N?x:a(N)<N?w:r(N)<N?i(N)<N?S:T:n(N)<N?I:O)(N)}return f.invert=function(N){return new Date(h(N))},f.domain=function(N){return arguments.length?g(Array.from(N,TPe)):g().map(EPe)},f.ticks=function(N){var C=g();return t(C[0],C[C.length-1],N??10)},f.tickFormat=function(N,C){return C==null?D:u(C)},f.nice=function(N){var C=g();return(!N||typeof N.range!="function")&&(N=e(C[0],C[C.length-1],N??10)),N?g(EQ(C,N)):f},f.copy=function(){return K0(f,rR(t,e,n,r,i,a,s,o,c,u))},f}function APe(){return Za.apply(rR(wIe,_Ie,Tl,tR,AS,W0,J2,Q2,pd,zQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kPe(){return Za.apply(rR(bIe,xIe,Al,nR,kS,TS,eR,Z2,pd,LQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function CS(){var t=0,e=1,n,r,i,a,s=yi,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var v,b;return arguments.length?([v,b]=g,s=h(v,b),u):[s(0),s(1)]}}return u.range=f(Kp),u.rangeRound=f(U2),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function hu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function VQ(){var t=fu(CS()(yi));return t.copy=function(){return hu(t,VQ())},Ml.apply(t,arguments)}function BQ(){var t=H2(CS()).domain([1,10]);return t.copy=function(){return hu(t,BQ()).base(t.base())},Ml.apply(t,arguments)}function FQ(){var t=K2(CS());return t.copy=function(){return hu(t,FQ()).constant(t.constant())},Ml.apply(t,arguments)}function iR(){var t=W2(CS());return t.copy=function(){return hu(t,iR()).exponent(t.exponent())},Ml.apply(t,arguments)}function CPe(){return iR.apply(null,arguments).exponent(.5)}function UQ(){var t=[],e=yi;function n(r){if(r!=null&&!isNaN(r=+r))return e((G0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort($c),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>hCe(t,a/r))},n.copy=function(){return UQ(e).domain(t)},Ml.apply(n,arguments)}function IS(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=yi,f,h=!1,g;function v(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}v.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v):[t,e,n]},v.clamp=function(x){return arguments.length?(h=!!x,v):h},v.interpolator=function(x){return arguments.length?(u=x,v):u};function b(x){return function(w){var S,T,I;return arguments.length?([S,T,I]=w,u=BCe(x,[S,T,I]),v):[u(0),u(.5),u(1)]}}return v.range=b(Kp),v.rangeRound=b(U2),v.unknown=function(x){return arguments.length?(g=x,v):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,v}}function $Q(){var t=fu(IS()(yi));return t.copy=function(){return hu(t,$Q())},Ml.apply(t,arguments)}function qQ(){var t=H2(IS()).domain([.1,1,10]);return t.copy=function(){return hu(t,qQ()).base(t.base())},Ml.apply(t,arguments)}function GQ(){var t=K2(IS());return t.copy=function(){return hu(t,GQ()).constant(t.constant())},Ml.apply(t,arguments)}function aR(){var t=W2(IS());return t.copy=function(){return hu(t,aR()).exponent(t.exponent())},Ml.apply(t,arguments)}function IPe(){return aR.apply(null,arguments).exponent(.5)}const Mm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:V2,scaleDiverging:$Q,scaleDivergingLog:qQ,scaleDivergingPow:aR,scaleDivergingSqrt:IPe,scaleDivergingSymlog:GQ,scaleIdentity:SQ,scaleImplicit:nN,scaleLinear:_Q,scaleLog:TQ,scaleOrdinal:L2,scalePoint:mCe,scalePow:Y2,scaleQuantile:CQ,scaleQuantize:IQ,scaleRadial:kQ,scaleSequential:VQ,scaleSequentialLog:BQ,scaleSequentialPow:iR,scaleSequentialQuantile:UQ,scaleSequentialSqrt:CPe,scaleSequentialSymlog:FQ,scaleSqrt:cIe,scaleSymlog:AQ,scaleThreshold:PQ,scaleTime:APe,scaleUtc:kPe,tickFormat:wQ},Symbol.toStringTag,{value:"Module"}));var jl=t=>t.chartData,PS=ye([jl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),HQ=(t,e,n,r)=>r?PS(t):jl(t),PPe=(t,e,n)=>n?PS(t):jl(t);function tu(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(an(e)&&an(n))return!0}return!1}function OU(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function KQ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(an(n))i=n;else if(typeof n=="function")return;if(an(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(tu(s))return s}}function NPe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(tu(r))return OU(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(Ke(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&H6.test(i)){var c=H6.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(Ke(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&K6.test(a)){var f=K6.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(tu(g))return e==null?g:OU(g,e,n)}}}var Wp=1e9,DPe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},oR,xn=!0,Wa="[DecimalError] ",Td=Wa+"Invalid argument: ",sR=Wa+"Exponent out of range: ",Yp=Math.floor,Zu=Math.pow,OPe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,la,Nr=1e7,dn=7,WQ=9007199254740991,L1=Yp(WQ/dn),Ue={};Ue.absoluteValue=Ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ue.comparedTo=Ue.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*dn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(t){return cl(this,new this.constructor(t))};Ue.dividedToIntegerBy=Ue.idiv=function(t){var e=this,n=e.constructor;return sn(cl(e,new n(t),0,1),n.precision)};Ue.equals=Ue.eq=function(t){return!this.cmp(t)};Ue.exponent=function(){return cr(this)};Ue.greaterThan=Ue.gt=function(t){return this.cmp(t)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(t){return this.cmp(t)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(t){return this.cmp(t)<0};Ue.lessThanOrEqualTo=Ue.lte=function(t){return this.cmp(t)<1};Ue.logarithm=Ue.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(la))throw Error(Wa+"NaN");if(n.s<1)throw Error(Wa+(n.s?"NaN":"-Infinity"));return n.eq(la)?new r(0):(xn=!1,e=cl(Qv(n,a),Qv(t,a),a),xn=!0,sn(e,i))};Ue.minus=Ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?QQ(e,t):YQ(e,(t.s=-t.s,t))};Ue.modulo=Ue.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Wa+"NaN");return n.s?(xn=!1,e=cl(n,t,0,1).times(t),xn=!0,n.minus(e)):sn(new r(n),i)};Ue.naturalExponential=Ue.exp=function(){return XQ(this)};Ue.naturalLogarithm=Ue.ln=function(){return Qv(this)};Ue.negated=Ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ue.plus=Ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?YQ(e,t):QQ(e,(t.s=-t.s,t))};Ue.precision=Ue.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Td+t);if(e=cr(i)+1,r=i.d.length-1,n=r*dn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ue.squareRoot=Ue.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Wa+"NaN")}for(t=cr(o),xn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=oo(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Yp((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(cl(o,a,s+2)).times(.5),oo(a.d).slice(0,s)===(e=oo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(sn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return xn=!0,sn(r,n)};Ue.times=Ue.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,v=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=v.length,c<u&&(a=g,g=v,v=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+v[r]*g[i-r-1]+e,a[i--]=o%Nr|0,e=o/Nr|0;a[i]=(a[i]+e)%Nr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,xn?sn(t,h.precision):t};Ue.toDecimalPlaces=Ue.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(So(t,0,Wp),e===void 0?e=r.rounding:So(e,0,8),sn(n,t+cr(n)+1,e))};Ue.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Gd(r,!0):(So(t,0,Wp),e===void 0?e=i.rounding:So(e,0,8),r=sn(new i(r),t+1,e),n=Gd(r,!0,t+1)),n};Ue.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Gd(i):(So(t,0,Wp),e===void 0?e=a.rounding:So(e,0,8),r=sn(new a(i),t+cr(i)+1,e),n=Gd(r.abs(),!1,t+cr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var t=this,e=t.constructor;return sn(new e(t),cr(t)+1,e.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(la);if(o=new c(o),!o.s){if(t.s<1)throw Error(Wa+"Infinity");return o}if(o.eq(la))return o;if(r=c.precision,t.eq(la))return sn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=WQ){for(i=new c(la),e=Math.ceil(r/dn+4),xn=!1;n%2&&(i=i.times(o),MU(i.d,e)),n=Yp(n/2),n!==0;)o=o.times(o),MU(o.d,e);return xn=!0,t.s<0?new c(la).div(i):sn(i,r)}}else if(a<0)throw Error(Wa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,xn=!1,i=t.times(Qv(o,r+u)),xn=!0,i=XQ(i),i.s=a,i};Ue.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=cr(i),r=Gd(i,n<=a.toExpNeg||n>=a.toExpPos)):(So(t,1,Wp),e===void 0?e=a.rounding:So(e,0,8),i=sn(new a(i),t,e),n=cr(i),r=Gd(i,t<=n||n<=a.toExpNeg,t)),r};Ue.toSignificantDigits=Ue.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(So(t,1,Wp),e===void 0?e=r.rounding:So(e,0,8)),sn(new r(n),t,e)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=cr(t),n=t.constructor;return Gd(t,e<=n.toExpNeg||e>=n.toExpPos)};function YQ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),xn?sn(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/dn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Nr|0,c[a]%=Nr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,xn?sn(e,h):e}function So(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Td+t)}function oo(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=dn-r.length,n&&(a+=_c(n)),a+=r;s=t[e],r=s+"",n=dn-r.length,n&&(a+=_c(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var cl=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Nr|0,s=a/Nr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Nr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,v,b,x,w,S,T,I,O,D,N,C,P,R=r.constructor,j=r.s==i.s?1:-1,L=r.d,B=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Wa+"Division by zero");for(c=r.e-i.e,C=B.length,D=L.length,v=new R(j),b=v.d=[],u=0;B[u]==(L[u]||0);)++u;if(B[u]>(L[u]||0)&&--c,a==null?T=a=R.precision:s?T=a+(cr(r)-cr(i))+1:T=a,T<0)return new R(0);if(T=T/dn+2|0,u=0,C==1)for(f=0,B=B[0],T++;(u<D||f)&&T--;u++)I=f*Nr+(L[u]||0),b[u]=I/B|0,f=I%B|0;else{for(f=Nr/(B[0]+1)|0,f>1&&(B=t(B,f),L=t(L,f),C=B.length,D=L.length),O=C,x=L.slice(0,C),w=x.length;w<C;)x[w++]=0;P=B.slice(),P.unshift(0),N=B[0],B[1]>=Nr/2&&++N;do f=0,o=e(B,x,C,w),o<0?(S=x[0],C!=w&&(S=S*Nr+(x[1]||0)),f=S/N|0,f>1?(f>=Nr&&(f=Nr-1),h=t(B,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,C<g?P:B,g))):(f==0&&(o=f=1),h=B.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(B,x,C,w),o<1&&(f++,n(x,C<w?P:B,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=L[O]||0:(x=[L[O]],w=1);while((O++<D||x[0]!==void 0)&&T--)}return b[0]||b.shift(),v.e=c,sn(v,s?a+cr(v)+1:a)}})();function XQ(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(cr(t)>16)throw Error(sR+cr(t));if(!t.s)return new f(la);for(xn=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(Zu(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(la),f.precision=o;;){if(i=sn(i.times(t),o),n=n.times(++c),s=a.plus(cl(i,n,o)),oo(s.d).slice(0,o)===oo(a.d).slice(0,o)){for(;u--;)a=sn(a.times(a),o);return f.precision=h,e==null?(xn=!0,sn(a,h)):a}a=s}}function cr(t){for(var e=t.e*dn,n=t.d[0];n>=10;n/=10)e++;return e}function wC(t,e,n){if(e>t.LN10.sd())throw xn=!0,n&&(t.precision=n),Error(Wa+"LN10 precision limit exceeded");return sn(new t(t.LN10),e)}function _c(t){for(var e="";t--;)e+="0";return e}function Qv(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,v=t,b=v.d,x=v.constructor,w=x.precision;if(v.s<1)throw Error(Wa+(v.s?"NaN":"-Infinity"));if(v.eq(la))return new x(0);if(e==null?(xn=!1,u=w):u=e,v.eq(10))return e==null&&(xn=!0),wC(x,u);if(u+=g,x.precision=u,n=oo(b),r=n.charAt(0),a=cr(v),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=oo(v.d),r=n.charAt(0),h++;a=cr(v),r>1?(v=new x("0."+n),a++):v=new x(r+"."+n.slice(1))}else return c=wC(x,u+2,w).times(a+""),v=Qv(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(xn=!0,sn(v,w)):v;for(o=s=v=cl(v.minus(la),v.plus(la),u),f=sn(v.times(v),u),i=3;;){if(s=sn(s.times(f),u),c=o.plus(cl(s,new x(i),u)),oo(c.d).slice(0,u)===oo(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(wC(x,u+2,w).times(a+""))),o=cl(o,new x(h),u),x.precision=w,e==null?(xn=!0,sn(o,w)):o;o=c,i+=2}}function RU(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Yp(n/dn),t.d=[],r=(n+1)%dn,n<0&&(r+=dn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=dn;r<i;)t.d.push(+e.slice(r,r+=dn));e=e.slice(r),r=dn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),xn&&(t.e>L1||t.e<-L1))throw Error(sR+n)}else t.s=0,t.e=0,t.d=[0];return t}function sn(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=dn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/dn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=dn,i=r-dn+s}if(n!==void 0&&(a=Zu(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/Zu(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=cr(t),h.length=1,e=e-a-1,h[0]=Zu(10,(dn-e%dn)%dn),t.e=Yp(-e/dn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=Zu(10,dn-r),h[f]=i>0?(u/Zu(10,s-i)%Zu(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Nr&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Nr)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(xn&&(t.e>L1||t.e<-L1))throw Error(sR+cr(t));return t}function QQ(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),xn?sn(e,v):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(v/dn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Nr-1;--c[a],c[i]+=Nr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,xn?sn(e,v):e):new g(0)}function Gd(t,e,n){var r,i=cr(t),a=oo(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+_c(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+_c(-i-1)+a,n&&(r=n-s)>0&&(a+=_c(r))):i>=s?(a+=_c(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+_c(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=_c(r))),t.s<0?"-"+a:a}function MU(t,e){if(t.length>e)return t.length=e,!0}function ZQ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Td+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return RU(s,a.toString())}else if(typeof a!="string")throw Error(Td+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,OPe.test(a))RU(s,a);else throw Error(Td+a)}if(i.prototype=Ue,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=ZQ,i.config=i.set=RPe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function RPe(t){if(!t||typeof t!="object")throw Error(Wa+"Object expected");var e,n,r,i=["precision",1,Wp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Yp(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Td+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Td+n+": "+r);return this}var oR=ZQ(DPe);la=new oR(1);const Gt=oR;var MPe=t=>t,JQ={},eZ=t=>t===JQ,jU=t=>function e(){return arguments.length===0||arguments.length===1&&eZ(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},tZ=(t,e)=>t===1?e:jU(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==JQ).length;return a>=t?e(...r):tZ(t-a,jU(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=r.map(f=>eZ(f)?o.shift():f);return e(...u,...o)}))}),jPe=t=>tZ(t.length,t),sN=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},zPe=jPe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),LPe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return MPe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,c)=>c(o),a(...arguments))}};function nZ(t){var e;return t===0?e=1:e=Math.floor(new Gt(t).abs().log(10).toNumber())+1,e}function rZ(t,e,n){for(var r=new Gt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var iZ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},aZ=(t,e,n)=>{if(t.lte(0))return new Gt(0);var r=nZ(t.toNumber()),i=new Gt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Gt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new Gt(c.toNumber()):new Gt(Math.ceil(c.toNumber()))},VPe=(t,e,n)=>{var r=new Gt(1),i=new Gt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Gt(10).pow(nZ(t)-1),i=new Gt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Gt(Math.floor(t)))}else t===0?i=new Gt(Math.floor((e-1)/2)):n||(i=new Gt(Math.floor(t)));var s=Math.floor((e-1)/2),o=LPe(zPe(c=>i.add(new Gt(c-s).mul(r)).toNumber()),sN);return o(0,e)},sZ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Gt(0),tickMin:new Gt(0),tickMax:new Gt(0)};var s=aZ(new Gt(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new Gt(0):(o=new Gt(e).add(n).div(2),o=o.sub(new Gt(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new Gt(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?sZ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new Gt(c).mul(s)),tickMax:o.add(new Gt(u).mul(s))})},BPe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=iZ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...sN(0,i-1).map(()=>1/0)]:[...sN(0,i-1).map(()=>-1/0),c];return n>r?u.reverse():u}if(o===c)return VPe(o,i,a);var{step:f,tickMin:h,tickMax:g}=sZ(o,c,s,a,0),v=rZ(h,g.add(new Gt(.1).mul(f)),f);return n>r?v.reverse():v},FPe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=iZ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=aZ(new Gt(o).sub(s).div(c-1),a,0),f=[...rZ(new Gt(s),new Gt(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},oZ=t=>t.rootProps.maxBarSize,UPe=t=>t.rootProps.barGap,lZ=t=>t.rootProps.barCategoryGap,$Pe=t=>t.rootProps.barSize,Y0=t=>t.rootProps.stackOffset,cZ=t=>t.rootProps.reverseStackOrder,lR=t=>t.options.chartName,cR=t=>t.rootProps.syncId,uZ=t=>t.rootProps.syncMethod,uR=t=>t.options.eventEmitter,Or={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Xo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},aa={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},NS=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},qPe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Xo.angleAxisId,includeHidden:!1,name:void 0,reversed:Xo.reversed,scale:Xo.scale,tick:Xo.tick,tickCount:void 0,ticks:void 0,type:Xo.type,unit:void 0},GPe={allowDataOverflow:aa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:aa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:aa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:aa.scale,tick:aa.tick,tickCount:aa.tickCount,ticks:void 0,type:aa.type,unit:void 0},HPe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Xo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xo.scale,tick:Xo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},KPe={allowDataOverflow:aa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:aa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:aa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:aa.scale,tick:aa.tick,tickCount:aa.tickCount,ticks:void 0,type:"category",unit:void 0},dR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?HPe:qPe,fR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?KPe:GPe,DS=t=>t.polarOptions,hR=ye([Ol,Rl,wr],oQ),dZ=ye([DS,hR],(t,e)=>{if(t!=null)return si(t.innerRadius,e,0)}),fZ=ye([DS,hR],(t,e)=>{if(t!=null)return si(t.outerRadius,e,e*.8)}),WPe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},hZ=ye([DS],WPe);ye([dR,hZ],NS);var pZ=ye([hR,dZ,fZ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ye([fR,pZ],NS);var gZ=ye([jt,DS,dZ,fZ,Ol,Rl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:si(s,i,i/2),cy:si(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),wn=(t,e)=>e,X0=(t,e,n)=>n;function pR(t){return t?.id}function mZ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=pR(o);u.forEach((h,g)=>{var v=a==null||i?g:String(hn(h,a,null)),b=hn(h,o.dataKey,0),x;s.has(v)?x=s.get(v):x={},Object.assign(x,{[f]:b}),s.set(v,x)})}}),Array.from(s.values())}function OS(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var RS=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function MS(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function YPe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Sr=t=>{var e=jt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Xp=t=>t.tooltip.settings.axisId;function zU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(n),!0).forEach(function(r){XPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XPe(t,e,n){return(e=QPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QPe(t){var e=ZPe(t,"string");return typeof e=="symbol"?e:e+""}function ZPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oN=[0,"auto"],Cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},vZ=(t,e)=>t.cartesianAxis.xAxis[e],ko=(t,e)=>{var n=vZ(t,e);return n??Cr},Ir={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:oN,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:F0},yZ=(t,e)=>t.cartesianAxis.yAxis[e],Co=(t,e)=>{var n=yZ(t,e);return n??Ir},JPe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},gR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??JPe},Pn=(t,e,n)=>{switch(e){case"xAxis":return ko(t,n);case"yAxis":return Co(t,n);case"zAxis":return gR(t,n);case"angleAxis":return dR(t,n);case"radiusAxis":return fR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},eNe=(t,e,n)=>{switch(e){case"xAxis":return ko(t,n);case"yAxis":return Co(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Q0=(t,e,n)=>{switch(e){case"xAxis":return ko(t,n);case"yAxis":return Co(t,n);case"angleAxis":return dR(t,n);case"radiusAxis":return fR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},bZ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function mR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var vR=t=>t.graphicalItems.cartesianItems,tNe=ye([wn,X0],mR),yR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Z0=ye([vR,Pn,tNe],yR,{memoizeOptions:{resultEqualityCheck:MS}}),xZ=ye([Z0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(OS)),wZ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),nNe=ye([Z0],wZ),bR=t=>t.map(e=>e.data).filter(Boolean).flat(1),rNe=ye([Z0],bR,{memoizeOptions:{resultEqualityCheck:MS}}),xR=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},wR=ye([rNe,HQ],xR),_R=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:hn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:hn(i,r)}))):t.map(r=>({value:r})),jS=ye([wR,Pn,Z0],_R);function _Z(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function iw(t){if(Ha(t)||t instanceof Date){var e=Number(t);if(an(e))return e}}function LU(t){if(Array.isArray(t)){var e=[iw(t[0]),iw(t[1])];return tu(e)?e:void 0}var n=iw(t);if(n!=null)return[n,n]}function kl(t){return t.map(iw).filter(ySe)}function iNe(t,e,n){return!n||typeof e!="number"||ma(e)?[]:n.length?kl(n.flatMap(r=>{var i=hn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!an(a)||!an(s)))return[e-a,e+s]})):[]}var Er=t=>{var e=Sr(t),n=Xp(t);return Q0(t,e,n)},J0=ye([Er],t=>t?.dataKey),aNe=ye([xZ,HQ,Er],mZ),SZ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map(pR);return[o,{stackedData:LTe(t,f,n),graphicalItems:u}]}))},lN=ye([aNe,xZ,Y0,cZ],SZ),EZ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=$Te(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},sNe=ye([Pn],t=>t.allowDataOverflow),SR=t=>{var e;if(t==null||!("domain"in t))return oN;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=kl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:oN},ER=ye([Pn],SR),TR=ye([ER,sNe],KQ),oNe=ye([lN,jl,wn,TR],EZ,{memoizeOptions:{resultEqualityCheck:RS}}),zS=t=>t.errorBars,lNe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>_Z(n,r)),B1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},AR=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(S=>_Z(i,S)),g=hn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),v=iNe(o,g,h);if(v.length>=2){var b=Math.min(...v),x=Math.max(...v);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=LU(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=LU(hn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),an(a)&&an(s))return[a,s]},cNe=ye([wR,Pn,nNe,zS,wn],AR,{memoizeOptions:{resultEqualityCheck:RS}});function uNe(t){var{value:e}=t;if(Ha(e)||e instanceof Date)return e}var dNe=(t,e,n)=>{var r=t.map(uNe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&BY(r))?dQ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},TZ=t=>t.referenceElements.dots,Qp=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),fNe=ye([TZ,wn,X0],Qp),AZ=t=>t.referenceElements.areas,hNe=ye([AZ,wn,X0],Qp),kZ=t=>t.referenceElements.lines,pNe=ye([kZ,wn,X0],Qp),CZ=(t,e)=>{if(t!=null){var n=kl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},gNe=ye(fNe,wn,CZ),IZ=(t,e)=>{if(t!=null){var n=kl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},mNe=ye([hNe,wn],IZ);function vNe(t){var e;if(t.x!=null)return kl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:kl(n)}function yNe(t){var e;if(t.y!=null)return kl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:kl(n)}var PZ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?vNe(r):yNe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},bNe=ye([pNe,wn],PZ),xNe=ye(gNe,bNe,mNe,(t,e,n)=>B1(t,n,e)),kR=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?B1(r,a,i):B1(a,i);return NPe(e,u,t.allowDataOverflow)},wNe=ye([Pn,ER,TR,oNe,cNe,xNe,jt,wn],kR,{memoizeOptions:{resultEqualityCheck:RS}}),_Ne=[0,1],CR=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=nf(e,a);if(u&&o==null){var f;return dQ(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?dNe(r,t,u):i==="expand"?_Ne:s}},IR=ye([Pn,jt,wR,jS,Y0,wn,wNe],CR),NZ=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(z0(a));return o in Mm?o:"point"}}},Zp=ye([Pn,jt,bZ,lR,wn],NZ);function SNe(t){if(t!=null){if(t in Mm)return Mm[t]();var e="scale".concat(z0(t));if(e in Mm)return Mm[e]()}}function PR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=SNe(e);if(i!=null){var a=i.domain(n).range(r);return OTe(a),a}}}var NR=(t,e,n)=>{var r=SR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&tu(t))return BPe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&tu(t))return FPe(t,e.tickCount,e.allowDecimals)}},DR=ye([IR,Q0,Zp],NR),OR=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&tu(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},ENe=ye([Pn,IR,DR,wn],OR),TNe=ye(jS,Pn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(kl(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),DZ=ye(TNe,jt,lZ,wr,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!an(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=si(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),ANe=(t,e,n)=>{var r=ko(t,e);return r==null||typeof r.padding!="string"?0:DZ(t,"xAxis",e,n,r.padding)},kNe=(t,e,n)=>{var r=Co(t,e);return r==null||typeof r.padding!="string"?0:DZ(t,"yAxis",e,n,r.padding)},CNe=ye(ko,ANe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),INe=ye(Co,kNe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),PNe=ye([wr,CNe,gS,pS,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),NNe=ye([wr,jt,INe,gS,pS,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),ey=(t,e,n,r)=>{var i;switch(e){case"xAxis":return PNe(t,n,r);case"yAxis":return NNe(t,n,r);case"zAxis":return(i=gR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return hZ(t);case"radiusAxis":return pZ(t,n);default:return}},OZ=ye([Pn,ey],NS),Ep=ye([Pn,Zp,ENe,OZ],PR);ye([Z0,zS,wn],lNe);function RZ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var LS=(t,e)=>e,VS=(t,e,n)=>n,DNe=ye(fS,LS,VS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(RZ)),ONe=ye(hS,LS,VS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(RZ)),MZ=(t,e)=>({width:t.width,height:e.height}),RNe=(t,e)=>{var n=typeof e.width=="number"?e.width:F0;return{width:n,height:t.height}},jZ=ye(wr,ko,MZ),MNe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},jNe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},zNe=ye(Rl,wr,DNe,LS,VS,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=MZ(e,o);s==null&&(s=MNe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),LNe=ye(Ol,wr,ONe,LS,VS,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=RNe(e,o);s==null&&(s=jNe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),VNe=(t,e)=>{var n=ko(t,e);if(n!=null)return zNe(t,n.orientation,n.mirror)},BNe=ye([wr,ko,VNe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),FNe=(t,e)=>{var n=Co(t,e);if(n!=null)return LNe(t,n.orientation,n.mirror)},UNe=ye([wr,Co,FNe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),zZ=ye(wr,Co,(t,e)=>{var n=typeof e.width=="number"?e.width:F0;return{width:n,height:t.height}}),VU=(t,e,n)=>{switch(e){case"xAxis":return jZ(t,n).width;case"yAxis":return zZ(t,n).height;default:return}},LZ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=nf(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&BY(c))return c}},RR=ye([jt,jS,Pn,wn],LZ),VZ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=nf(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},MR=ye([jt,jS,Q0,wn],VZ),BU=ye([jt,eNe,Zp,Ep,RR,MR,ey,DR,wn],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=nf(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),$Ne=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=nf(t,c),{type:f,ticks:h,tickCount:g}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/v:0;b=c==="angleAxis"&&a!=null&&a.length>=2?Dr(a[0]-a[1])*2*b:b;var x=h||i;if(x){var w=x.map((S,T)=>{var I=s?s.indexOf(S):S;return{index:T,coordinate:r(I)+b,value:S,offset:b}});return w.filter(S=>an(S.coordinate))}return u&&o?o.map((S,T)=>({coordinate:r(S)+b,value:S,index:T,offset:b})).filter(S=>an(S.coordinate)):r.ticks?r.ticks(g).map(S=>({coordinate:r(S)+b,value:S,offset:b})):r.domain().map((S,T)=>({coordinate:r(S)+b,value:s?s[S]:S,index:T,offset:b}))}},BZ=ye([jt,Q0,Zp,Ep,DR,ey,RR,MR,wn],$Ne),qNe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=nf(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?Dr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>({coordinate:n(f)+u,value:f,index:h,offset:u})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+u,value:f,offset:u})):n.domain().map((f,h)=>({coordinate:n(f)+u,value:i?i[f]:f,index:h,offset:u}))}},Tp=ye([jt,Q0,Ep,ey,RR,MR,wn],qNe),Ap=ye(Pn,Ep,(t,e)=>{if(!(t==null||e==null))return V1(V1({},t),{},{scale:e})}),GNe=ye([Pn,Zp,IR,OZ],PR);ye((t,e,n)=>gR(t,n),GNe,(t,e)=>{if(!(t==null||e==null))return V1(V1({},t),{},{scale:e})});var HNe=ye([jt,fS,hS],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),FZ=t=>t.options.defaultTooltipEventType,UZ=t=>t.options.validateTooltipEventTypes;function $Z(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function jR(t,e){var n=FZ(t),r=UZ(t);return $Z(e,n,r)}function KNe(t){return qe(e=>jR(e,t))}var qZ=(t,e)=>{var n,r=Number(e);if(!(ma(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},WNe=t=>t.tooltip.settings,Ic={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},YNe={itemInteraction:{click:Ic,hover:Ic},axisInteraction:{click:Ic,hover:Ic},keyboardInteraction:Ic,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},GZ=qi({name:"tooltip",initialState:YNe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:vn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ss(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:vn()},removeTooltipEntrySettings:{reducer(t,e){var n=Ss(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:vn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:XNe,replaceTooltipEntrySettings:QNe,removeTooltipEntrySettings:ZNe,setTooltipSettingsState:JNe,setActiveMouseOverItemIndex:HZ,mouseLeaveItem:eDe,mouseLeaveChart:KZ,setActiveClickItemIndex:tDe,setMouseOverAxisIndex:WZ,setMouseClickAxisIndex:nDe,setSyncInteraction:cN,setKeyboardInteraction:uN}=GZ.actions,rDe=GZ.reducer;function FU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(n),!0).forEach(function(r){iDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iDe(t,e,n){return(e=aDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aDe(t){var e=sDe(t,"string");return typeof e=="symbol"?e:e+""}function sDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oDe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function lDe(t){return t.index!=null}var YZ=(t,e,n,r)=>{if(e==null)return Ic;var i=oDe(t,e,n);if(i==null)return Ic;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(lDe(i)){if(a)return Sx(Sx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Sx(Sx({},Ic),{},{coordinate:i.coordinate})};function cDe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function uDe(t,e){var n=cDe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function dDe(t,e,n){if(n==null||e==null)return!0;var r=hn(t,e);return r==null||!tu(n)?!0:uDe(r,n)}var zR=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!an(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||dDe(u,n,r)?String(c):null},XZ=(t,e,n,r,i,a,s,o)=>{if(!(a==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var f=i?.[Number(a)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},QZ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},ty=t=>t.options.tooltipPayloadSearcher,Jp=t=>t.tooltip;function UU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $U(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(n),!0).forEach(function(r){fDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fDe(t,e,n){return(e=hDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hDe(t){var e=pDe(t,"string");return typeof e=="symbol"?e:e+""}function pDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gDe(t,e){return t??e}var ZZ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,v)=>{var b,{dataDefinedOnItem:x,settings:w}=v,S=gDe(x,o),T=Array.isArray(S)?DX(S,u,f):S,I=(b=w?.dataKey)!==null&&b!==void 0?b:r,O=w?.nameKey,D;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?D=vSe(T,r,i):D=a(T,e,c,O),Array.isArray(D))D.forEach(C=>{var P=$U($U({},w),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});g.push(W6({tooltipEntrySettings:P,dataKey:C.dataKey,payload:C.payload,value:hn(C.payload,C.dataKey),name:C.name}))});else{var N;g.push(W6({tooltipEntrySettings:w,dataKey:I,payload:D,value:hn(D,I),name:(N=hn(D,O))!==null&&N!==void 0?N:w?.name}))}return g},h)}},LR=ye([Er,jt,bZ,lR,Sr],NZ),mDe=ye([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),vDe=ye([Sr,Xp],mR),eg=ye([mDe,Er,vDe],yR,{memoizeOptions:{resultEqualityCheck:MS}}),yDe=ye([eg],t=>t.filter(OS)),bDe=ye([eg],bR,{memoizeOptions:{resultEqualityCheck:MS}}),tg=ye([bDe,jl],xR),xDe=ye([yDe,jl,Er],mZ),VR=ye([tg,Er,eg],_R),JZ=ye([Er],SR),wDe=ye([Er],t=>t.allowDataOverflow),eJ=ye([JZ,wDe],KQ),_De=ye([eg],t=>t.filter(OS)),SDe=ye([xDe,_De,Y0,cZ],SZ),EDe=ye([SDe,jl,Sr,eJ],EZ),TDe=ye([eg],wZ),ADe=ye([tg,Er,TDe,zS,Sr],AR,{memoizeOptions:{resultEqualityCheck:RS}}),kDe=ye([TZ,Sr,Xp],Qp),CDe=ye([kDe,Sr],CZ),IDe=ye([AZ,Sr,Xp],Qp),PDe=ye([IDe,Sr],IZ),NDe=ye([kZ,Sr,Xp],Qp),DDe=ye([NDe,Sr],PZ),ODe=ye([CDe,DDe,PDe],B1),RDe=ye([Er,JZ,eJ,EDe,ADe,ODe,jt,Sr],kR),ny=ye([Er,jt,tg,VR,Y0,Sr,RDe],CR),MDe=ye([ny,Er,LR],NR),jDe=ye([Er,ny,MDe,Sr],OR),tJ=t=>{var e=Sr(t),n=Xp(t),r=!1;return ey(t,e,n,r)},nJ=ye([Er,tJ],NS),rJ=ye([Er,LR,jDe,nJ],PR),zDe=ye([jt,VR,Er,Sr],LZ),LDe=ye([jt,VR,Er,Sr],VZ),VDe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=nf(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?Dr(i[0]-i[1])*2*h:h,u&&s?s.map((g,v)=>({coordinate:r(g)+h,value:g,index:v,offset:h})):r.domain().map((g,v)=>({coordinate:r(g)+h,value:a?a[g]:g,index:v,offset:h}))}}},zl=ye([jt,Er,LR,rJ,tJ,zDe,LDe,Sr],VDe),BR=ye([FZ,UZ,WNe],(t,e,n)=>$Z(n.shared,t,e)),iJ=t=>t.tooltip.settings.trigger,FR=t=>t.tooltip.settings.defaultIndex,ry=ye([Jp,BR,iJ,FR],YZ),Hd=ye([ry,tg,J0,ny],zR),aJ=ye([zl,Hd],qZ),UR=ye([ry],t=>{if(t)return t.dataKey}),BDe=ye([ry],t=>{if(t)return t.graphicalItemId}),sJ=ye([Jp,BR,iJ,FR],QZ),FDe=ye([Ol,Rl,jt,wr,zl,FR,sJ,ty],XZ),UDe=ye([ry,FDe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),$De=ye([ry],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),qDe=ye([sJ,Hd,jl,J0,aJ,ty,BR],ZZ);ye([qDe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function qU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(n),!0).forEach(function(r){GDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GDe(t,e,n){return(e=HDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HDe(t){var e=KDe(t,"string");return typeof e=="symbol"?e:e+""}function KDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WDe=()=>qe(Er),YDe=()=>{var t=WDe(),e=qe(zl),n=qe(rJ);return b1(!t||!n?void 0:GU(GU({},t),{},{scale:n}),e)};function HU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HU(Object(n),!0).forEach(function(r){XDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XDe(t,e,n){return(e=QDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QDe(t){var e=ZDe(t,"string");return typeof e=="symbol"?e:e+""}function ZDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JDe=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},eOe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return oh(oh(oh({},r),lr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return oh(oh(oh({},r),lr(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function tOe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var oJ=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,v=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(v==null||b==null||x==null))if(Dr(b-v)!==Dr(x-b)){var S=[];if(Dr(x-b)===Dr(i[1]-i[0])){w=x;var T=b+i[1]-i[0];S[0]=Math.min(T,(T+v)/2),S[1]=Math.max(T,(T+v)/2)}else{w=v;var I=x+i[1]-i[0];S[0]=Math.min(b,(I+b)/2),S[1]=Math.max(b,(I+b)/2)}var O=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>O[0]&&t<=O[1]||t>=S[0]&&t<=S[1]){var D;return(D=n[o])===null||D===void 0?void 0:D.index}}else{var N=Math.min(v,x),C=Math.max(v,x);if(t>(N+b)/2&&t<=(C+b)/2){var P;return(P=n[o])===null||P===void 0?void 0:P.index}}}else if(e)for(var R=0;R<s;R++){var j=e[R];if(j!=null){var L=e[R+1],B=e[R-1];if(R===0&&L!=null&&t<=(j.coordinate+L.coordinate)/2||R===s-1&&B!=null&&t>(j.coordinate+B.coordinate)/2||R>0&&R<s-1&&B!=null&&L!=null&&t>(j.coordinate+B.coordinate)/2&&t<=(j.coordinate+L.coordinate)/2)return j.index}}return-1},nOe=()=>qe(lR),$R=(t,e)=>e,lJ=(t,e,n)=>n,qR=(t,e,n,r)=>r,rOe=ye(zl,t=>tS(t,e=>e.coordinate)),GR=ye([Jp,$R,lJ,qR],YZ),HR=ye([GR,tg,J0,ny],zR),iOe=(t,e,n)=>{if(e!=null){var r=Jp(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},cJ=ye([Jp,$R,lJ,qR],QZ),F1=ye([Ol,Rl,jt,wr,zl,qR,cJ,ty],XZ),aOe=ye([GR,F1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),uJ=ye([zl,HR],qZ),sOe=ye([cJ,HR,jl,J0,uJ,ty,$R],ZZ),oOe=ye([GR,HR],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),lOe=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&tOe(t,s)){var o=qTe(t,e),c=oJ(o,a,i,n,r),u=JDe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},cOe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=Hke(t,n);if(o){var c=GTe(o,e),u=oJ(c,s,a,r,i),f=eOe(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},uOe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?lOe(t,e,r,i,a,s,o):cOe(t,e,n,r,i,a,s)},dOe=ye(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),fOe=ye(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Or)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:YPe}});function KU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KU(Object(n),!0).forEach(function(r){hOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hOe(t,e,n){return(e=pOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pOe(t){var e=gOe(t,"string");return typeof e=="symbol"?e:e+""}function gOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mOe={},vOe={zIndexMap:Object.values(Or).reduce((t,e)=>WU(WU({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),mOe)},yOe=new Set(Object.values(Or));function bOe(t){return yOe.has(t)}var dJ=qi({name:"zIndex",initialState:vOe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:vn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!bOe(n)&&delete t.zIndexMap[n])},prepare:vn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:vn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:vn()}}}),{registerZIndexPortal:xOe,unregisterZIndexPortal:wOe,registerZIndexPortalElement:_Oe,unregisterZIndexPortalElement:SOe}=dJ.actions,EOe=dJ.reducer;function Ja(t){var{zIndex:e,children:n}=t,r=wAe(),i=r&&e!==void 0&&e!==0,a=_i(),s=pn();A.useLayoutEffect(()=>i?(s(xOe({zIndex:e})),()=>{s(wOe({zIndex:e}))}):L0,[s,e,i]);var o=qe(c=>dOe(c,e,a));return i?o?j8.createPortal(n,o):null:n}function dN(){return dN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dN.apply(null,arguments)}function YU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ex(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(n),!0).forEach(function(r){TOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TOe(t,e,n){return(e=AOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AOe(t){var e=kOe(t,"string");return typeof e=="symbol"?e:e+""}function kOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function COe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function IOe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,v=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=ske,w=Or.cursorLine;else if(f==="BarChart")b=oke(o,h,a,s),x=sQ,w=Or.cursorRectangle;else if(o==="radial"&&$Y(h)){var{cx:S,cy:T,radius:I,startAngle:O,endAngle:D}=lQ(h);b={cx:S,cy:T,startAngle:O,endAngle:D,innerRadius:I,outerRadius:I},x=uQ,w=Or.cursorLine}else b={points:Xke(o,h,a)},x=j2,w=Or.cursorLine;var N=typeof c=="object"&&"className"in c?c.className:void 0,C=Ex(Ex(Ex(Ex({stroke:"#ccc",pointerEvents:"none"},a),b),Lv(c)),{},{payload:g,payloadIndex:v,className:Wt("recharts-tooltip-cursor",N)});return A.createElement(Ja,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(COe,{cursor:c,cursorComp:x,cursorProps:C}))}function POe(t){var e=YDe(),n=UX(),r=$0(),i=nOe();return e==null||n==null||r==null||i==null?null:A.createElement(IOe,dN({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var fJ=A.createContext(null),NOe=()=>A.useContext(fJ),_C={exports:{}},XU;function DOe(){return XU||(XU=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],v]:c._events[b].push(v):(c._events[b]=v,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,v=h.length,b=new Array(v);g<v;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,v,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],S=arguments.length,T,I;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,v),!0;case 6:return w.fn.call(w.context,f,h,g,v,b),!0}for(I=1,T=new Array(S-1);I<S;I++)T[I-1]=arguments[I];w.fn.apply(w.context,T)}else{var O=w.length,D;for(I=0;I<O;I++)switch(w[I].once&&this.removeListener(u,w[I].fn,void 0,!0),S){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,f);break;case 3:w[I].fn.call(w[I].context,f,h);break;case 4:w[I].fn.call(w[I].context,f,h,g);break;default:if(!T)for(D=1,T=new Array(S-1);D<S;D++)T[D-1]=arguments[D];w[I].fn.apply(w[I].context,T)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var v=n?n+u:u;if(!this._events[v])return this;if(!f)return s(this,v),this;var b=this._events[v];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,v);else{for(var x=0,w=[],S=b.length;x<S;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(_C)),_C.exports}var OOe=DOe();const ROe=Il(OOe);var Zv=new ROe,fN="recharts.syncEvent.tooltip",QU="recharts.syncEvent.brush";function hJ(t,e){if(e){var n=Number.parseInt(e,10);if(!ma(n))return t?.[n]}}var MOe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},pJ=qi({name:"options",initialState:MOe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),jOe=pJ.reducer,{createEventEmitter:zOe}=pJ.actions;function LOe(t){return t.tooltip.syncInteraction}var VOe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},gJ=qi({name:"chartData",initialState:VOe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:ZU,setDataStartEndIndexes:BOe,setComputedData:w3e}=gJ.actions,FOe=gJ.reducer,UOe=["x","y"];function JU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(n),!0).forEach(function(r){$Oe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Oe(t,e,n){return(e=qOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qOe(t){var e=GOe(t,"string");return typeof e=="symbol"?e:e+""}function GOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HOe(t,e){if(t==null)return{};var n,r,i=KOe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function KOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function WOe(){var t=qe(cR),e=qe(uR),n=pn(),r=qe(uZ),i=qe(zl),a=$0(),s=U0(),o=qe(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return L0;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:b,y:x}=v,w=HOe(v,UOe),{x:S,y:T,width:I,height:O}=f.payload.sourceViewBox,D=lh(lh({},w),{},{x:s.x+(I?(b-S)/I:0)*s.width,y:s.y+(O?(x-T)/O:0)*s.height});n(lh(lh({},f),{},{payload:lh(lh({},f.payload),{},{coordinate:D})}))}else n(f);return}if(i!=null){var N;if(typeof r=="function"){var C={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},P=r(i,C);N=i[P]}else r==="value"&&(N=i.find(G=>String(G.value)===f.payload.label));var{coordinate:R}=f.payload;if(N==null||f.payload.active===!1||R==null||s==null){n(cN({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:j,y:L}=R,B=Math.min(j,s.x+s.width),z=Math.min(L,s.y+s.height),W={x:a==="horizontal"?N.coordinate:B,y:a==="horizontal"?z:N.coordinate},Z=cN({active:f.payload.active,coordinate:W,dataKey:f.payload.dataKey,index:String(N.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Z)}}};return Zv.on(fN,c),()=>{Zv.off(fN,c)}},[o,n,e,t,r,i,a,s])}function YOe(){var t=qe(cR),e=qe(uR),n=pn();A.useEffect(()=>{if(t==null)return L0;var r=(i,a,s)=>{e!==s&&t===i&&n(BOe(a))};return Zv.on(QU,r),()=>{Zv.off(QU,r)}},[n,e,t])}function XOe(){var t=pn();A.useEffect(()=>{t(zOe())},[t]),WOe(),YOe()}function QOe(t,e,n,r,i,a){var s=qe(v=>iOe(v,t,e)),o=qe(uR),c=qe(cR),u=qe(uZ),f=qe(LOe),h=f?.active,g=U0();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var v=cN({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});Zv.emit(fN,c,v,o)}},[h,n,s,i,r,o,c,u,a,g])}function e9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e9(Object(n),!0).forEach(function(r){ZOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZOe(t,e,n){return(e=JOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JOe(t){var e=e2e(t,"string");return typeof e=="symbol"?e:e+""}function e2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t2e(t){return t.dataKey}function n2e(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(VAe,e)}var n9=[],r2e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function BS(t){var e,n,r=Yr(t,r2e),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:v,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:S,shared:T,trigger:I,defaultIndex:O,portal:D,axisId:N}=r,C=pn(),P=typeof O=="number"?String(O):O;A.useEffect(()=>{C(JNe({shared:T,trigger:I,axisId:N,active:i,defaultIndex:P}))},[C,T,I,N,i,P]);var R=U0(),j=tQ(),L=KNe(T),{activeIndex:B,isActive:z}=(e=qe(oe=>oOe(oe,L,I,P)))!==null&&e!==void 0?e:{},W=qe(oe=>sOe(oe,L,I,P)),Z=qe(oe=>uJ(oe,L,I,P)),G=qe(oe=>aOe(oe,L,I,P)),Y=W,Q=NOe(),J=(n=i??z)!==null&&n!==void 0?n:!1,[te,U]=CEe([Y,J]),X=L==="axis"?Z:void 0;QOe(L,I,G,X,B,J);var re=D??Q;if(re==null||R==null||L==null)return null;var K=Y??n9;J||(K=n9),u&&K.length&&(K=eEe(K.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),g,t2e));var ue=K.length>0,ne=A.createElement(HAe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:J,coordinate:G,hasPayload:ue,offset:h,position:v,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:te,innerRef:U,hasPortalFromProps:!!D},n2e(c,t9(t9({},r),{},{payload:K,label:X,active:J,activeIndex:B,coordinate:G,accessibilityLayer:j})));return A.createElement(A.Fragment,null,j8.createPortal(ne,re),J&&A.createElement(POe,{cursor:S,tooltipEventType:L,coordinate:G,payload:K,index:B}))}var iy=t=>null;iy.displayName="Cell";function i2e(t,e,n){return(e=a2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a2e(t){var e=s2e(t,"string");return typeof e=="symbol"?e:e+""}function s2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class o2e{constructor(e){i2e(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function r9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r9(Object(n),!0).forEach(function(r){c2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c2e(t,e,n){return(e=u2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u2e(t){var e=d2e(t,"string");return typeof e=="symbol"?e:e+""}function d2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f2e={cacheSize:2e3,enableCache:!0},mJ=l2e({},f2e),i9=new o2e(mJ.cacheSize),h2e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},a9="recharts_measurement_span";function p2e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var s9=(t,e)=>{try{var n=document.getElementById(a9);n||(n=document.createElement("span"),n.setAttribute("id",a9),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,h2e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},iv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||wS.isSsr)return{width:0,height:0};if(!mJ.enableCache)return s9(e,n);var r=p2e(e,n),i=i9.get(r);if(i)return i;var a=s9(e,n);return i9.set(r,a),a},vJ;function g2e(t,e,n){return(e=m2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m2e(t){var e=v2e(t,"string");return typeof e=="symbol"?e:e+""}function v2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,l9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,y2e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,b2e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,x2e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},w2e=["cm","mm","pt","pc","in","Q","px"];function _2e(t){return w2e.includes(t)}var Ih="NaN";function S2e(t,e){return t*x2e[e]}class Hr{static parse(e){var n,[,r,i]=(n=b2e.exec(e))!==null&&n!==void 0?n:[];return r==null?Hr.NaN:new Hr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,ma(e)&&(this.unit=""),n!==""&&!y2e.test(n)&&(this.num=NaN,this.unit=""),_2e(n)&&(this.num=S2e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Hr(NaN,""):new Hr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Hr(NaN,""):new Hr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Hr(NaN,""):new Hr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Hr(NaN,""):new Hr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ma(this.num)}}vJ=Hr;g2e(Hr,"NaN",new vJ(NaN,""));function yJ(t){if(t==null||t.includes(Ih))return Ih;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=o9.exec(e))!==null&&n!==void 0?n:[],s=Hr.parse(r??""),o=Hr.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Ih;e=e.replace(o9,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=l9.exec(e))!==null&&u!==void 0?u:[],v=Hr.parse(f??""),b=Hr.parse(g??""),x=h==="+"?v.add(b):v.subtract(b);if(x.isNaN())return Ih;e=e.replace(l9,x.toString())}return e}var c9=/\(([^()]*)\)/;function E2e(t){for(var e=t,n;(n=c9.exec(e))!=null;){var[,r]=n;e=e.replace(c9,yJ(r))}return e}function T2e(t){var e=t.replace(/\s+/g,"");return e=E2e(e),e=yJ(e),e}function A2e(t){try{return T2e(t)}catch{return Ih}}function SC(t){var e=A2e(t.slice(5,-1));return e===Ih?"":e}var k2e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],C2e=["dx","dy","angle","className","breakAll"];function hN(){return hN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hN.apply(null,arguments)}function u9(t,e){if(t==null)return{};var n,r,i=I2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function I2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bJ=/[ \f\n\r\t\v\u2028\u2029]+/,xJ=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Rr(e)||(n?i=e.toString().split(""):i=e.toString().split(bJ));var a=i.map(o=>({word:o,width:iv(o,r).width})),s=n?0:iv("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function P2e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var wJ=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),_J=t=>t.reduce((e,n)=>e.width>n.width?e:n),N2e="",d9=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=xJ({breakAll:n,style:r,children:c+N2e});if(!u)return[!1,[]];var f=wJ(u.wordsWithComputedWidth,a,s,o),h=f.length>i||_J(f).width>Number(a);return[h,f]},D2e=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=Ke(a),f=String(s),h=wJ(e,r,n,i);if(!u||i)return h;var g=h.length>a||_J(h).width>Number(r);if(!g)return h;for(var v=0,b=f.length-1,x=0,w;v<=b&&x<=f.length-1;){var S=Math.floor((v+b)/2),T=S-1,[I,O]=d9(f,T,c,o,a,r,n,i),[D]=d9(f,S,c,o,a,r,n,i);if(!I&&!D&&(v=S+1),I&&D&&(b=S-1),!I&&D){w=O;break}x++}return w||h},f9=t=>{var e=Rr(t)?[]:t.toString().split(bJ);return[{words:e,width:void 0}]},O2e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!wS.isSsr){var o,c,u=xJ({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return f9(r);return D2e({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return f9(r)},SJ="#808080",R2e={angle:0,breakAll:!1,capHeight:"0.71em",fill:SJ,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},FS=A.forwardRef((t,e)=>{var n=Yr(t,R2e),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=u9(n,k2e),g=A.useMemo(()=>O2e({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:v,dy:b,angle:x,className:w,breakAll:S}=h,T=u9(h,C2e);if(!Ha(r)||!Ha(i)||g.length===0)return null;var I=Number(r)+(Ke(v)?v:0),O=Number(i)+(Ke(b)?b:0);if(!an(I)||!an(O))return null;var D;switch(f){case"start":D=SC("calc(".concat(s,")"));break;case"middle":D=SC("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:D=SC("calc(".concat(g.length-1," * -").concat(a,")"));break}var N=[];if(c){var C=g[0].width,{width:P}=h;N.push("scale(".concat(Ke(P)&&Ke(C)?P/C:1,")"))}return x&&N.push("rotate(".concat(x,", ").concat(I,", ").concat(O,")")),N.length&&(T.transform=N.join(" ")),A.createElement("text",hN({},ga(T),{ref:e,x:I,y:O,className:Wt("recharts-text",w),textAnchor:u,fill:o.includes("url")?SJ:o}),g.map((R,j)=>{var L=R.words.join(S?"":" ");return A.createElement("tspan",{x:I,dy:j===0?D:a,key:"".concat(L,"-").concat(j)},L)}))});FS.displayName="Text";var M2e=["labelRef"],j2e=["content"];function h9(t,e){if(t==null)return{};var n,r,i=z2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function z2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function p9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p9(Object(n),!0).forEach(function(r){L2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L2e(t,e,n){return(e=V2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V2e(t){var e=B2e(t,"string");return typeof e=="symbol"?e:e+""}function B2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qo(){return Qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qo.apply(null,arguments)}var EJ=A.createContext(null),TJ=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(EJ.Provider,{value:c},o)},AJ=()=>{var t=A.useContext(EJ),e=U0();return t||FX(e)},F2e=A.createContext(null),U2e=()=>{var t=A.useContext(F2e),e=qe(gZ);return t||e},$2e=t=>{var{value:e,formatter:n}=t,r=Rr(t.children)?e:t.children;return typeof n=="function"?n(r):r},KR=t=>t!=null&&typeof t=="function",q2e=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},G2e=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:v}=i,b=(u+f)/2,x=q2e(h,g),w=x>=0?1:-1,S,T;switch(e){case"insideStart":S=h+w*a,T=v;break;case"insideEnd":S=g-w*a,T=!v;break;case"end":S=g+w*a,T=v;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var I=lr(o,c,b,S),O=lr(o,c,b,S+(T?1:-1)*359),D="M".concat(I.x,",").concat(I.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(O.x,",").concat(O.y),N=Rr(t.id)?Vv("recharts-radial-line-"):t.id;return A.createElement("text",Qo({},r,{dominantBaseline:"central",className:Wt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:N,d:D})),A.createElement("textPath",{xlinkHref:"#".concat(N)},n))},H2e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=lr(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:v,y:b}=lr(r,i,g,u);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},pN=t=>"cx"in t&&Ke(t.cx),K2e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!pN(n)&&(a=n);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:f}=e,h=s,g=s+(c-u)/2,v=(h+g)/2,b=(c+u)/2,x=h+c/2,w=f>=0?1:-1,S=w*r,T=w>0?"end":"start",I=w>0?"start":"end",O=c>=0?1:-1,D=O*r,N=O>0?"end":"start",C=O>0?"start":"end";if(i==="top"){var P={x:h+c/2,y:o-S,textAnchor:"middle",verticalAnchor:T};return $n($n({},P),a?{height:Math.max(o-a.y,0),width:c}:{})}if(i==="bottom"){var R={x:g+u/2,y:o+f+S,textAnchor:"middle",verticalAnchor:I};return $n($n({},R),a?{height:Math.max(a.y+a.height-(o+f),0),width:u}:{})}if(i==="left"){var j={x:v-D,y:o+f/2,textAnchor:N,verticalAnchor:"middle"};return $n($n({},j),a?{width:Math.max(j.x-a.x,0),height:f}:{})}if(i==="right"){var L={x:v+b+D,y:o+f/2,textAnchor:C,verticalAnchor:"middle"};return $n($n({},L),a?{width:Math.max(a.x+a.width-L.x,0),height:f}:{})}var B=a?{width:b,height:f}:{};return i==="insideLeft"?$n({x:v+D,y:o+f/2,textAnchor:C,verticalAnchor:"middle"},B):i==="insideRight"?$n({x:v+b-D,y:o+f/2,textAnchor:N,verticalAnchor:"middle"},B):i==="insideTop"?$n({x:h+c/2,y:o+S,textAnchor:"middle",verticalAnchor:I},B):i==="insideBottom"?$n({x:g+u/2,y:o+f-S,textAnchor:"middle",verticalAnchor:T},B):i==="insideTopLeft"?$n({x:h+D,y:o+S,textAnchor:C,verticalAnchor:I},B):i==="insideTopRight"?$n({x:h+c-D,y:o+S,textAnchor:N,verticalAnchor:I},B):i==="insideBottomLeft"?$n({x:g+D,y:o+f-S,textAnchor:C,verticalAnchor:T},B):i==="insideBottomRight"?$n({x:g+u-D,y:o+f-S,textAnchor:N,verticalAnchor:T},B):i&&typeof i=="object"&&(Ke(i.x)||_l(i.x))&&(Ke(i.y)||_l(i.y))?$n({x:s+si(i.x,b),y:o+si(i.y,f),textAnchor:"end",verticalAnchor:"end"},B):$n({x,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},W2e={angle:0,offset:5,zIndex:Or.label,position:"middle",textBreakAll:!1};function Sc(t){var e=Yr(t,W2e),{viewBox:n,position:r,value:i,children:a,content:s,className:o="",textBreakAll:c,labelRef:u}=e,f=U2e(),h=AJ(),g=r==="center"?h:f??h,v,b,x;if(n==null?v=g:pN(n)?v=n:v=FX(n),!v||Rr(i)&&Rr(a)&&!A.isValidElement(s)&&typeof s!="function")return null;var w=$n($n({},e),{},{viewBox:v});if(A.isValidElement(s)){var{labelRef:S}=w,T=h9(w,M2e);return A.cloneElement(s,T)}if(typeof s=="function"){var{content:I}=w,O=h9(w,j2e);if(b=A.createElement(s,O),A.isValidElement(b))return b}else b=$2e(e);var D=ga(e);if(pN(v)){if(r==="insideStart"||r==="insideEnd"||r==="end")return G2e(e,r,b,D,v);x=H2e(v,e.offset,e.position)}else x=K2e(e,v);return A.createElement(Ja,{zIndex:e.zIndex},A.createElement(FS,Qo({ref:u,className:Wt("recharts-label",o)},D,x,{textAnchor:P2e(D.textAnchor)?D.textAnchor:x.textAnchor,breakAll:c}),b))}Sc.displayName="Label";var Y2e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(Sc,Qo({key:"label-implicit"},r)):Ha(t)?A.createElement(Sc,Qo({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===Sc?A.cloneElement(t,$n({key:"label-implicit"},r)):A.createElement(Sc,Qo({key:"label-implicit",content:t},r)):KR(t)?A.createElement(Sc,Qo({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(Sc,Qo({},t,{key:"label-implicit"},r)):null};function kJ(t){var{label:e,labelRef:n}=t,r=AJ();return Y2e(e,r,n)||null}var EC={},TC={},g9;function X2e(){return g9||(g9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(TC)),TC}var AC={},m9;function Q2e(){return m9||(m9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(AC)),AC}var v9;function Z2e(){return v9||(v9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X2e(),n=Q2e(),r=E2();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(EC)),EC}var kC,y9;function J2e(){return y9||(y9=1,kC=Z2e().last),kC}var eRe=J2e();const tRe=Il(eRe);var nRe=["valueAccessor"],rRe=["dataKey","clockWise","id","textBreakAll","zIndex"];function U1(){return U1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U1.apply(null,arguments)}function b9(t,e){if(t==null)return{};var n,r,i=iRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function iRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aRe=t=>Array.isArray(t.value)?tRe(t.value):t.value,CJ=A.createContext(void 0),sRe=CJ.Provider,IJ=A.createContext(void 0),oRe=IJ.Provider;function lRe(){return A.useContext(CJ)}function cRe(){return A.useContext(IJ)}function aw(t){var{valueAccessor:e=aRe}=t,n=b9(t,nRe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=b9(n,rRe),u=lRe(),f=cRe(),h=u||f;return!h||!h.length?null:A.createElement(Ja,{zIndex:o??Or.label},A.createElement(li,{className:"recharts-label-list"},h.map((g,v)=>{var b,x=Rr(r)?e(g,v):hn(g&&g.payload,r),w=Rr(a)?{}:{id:"".concat(a,"-").concat(v)};return A.createElement(Sc,U1({key:"label-".concat(v)},ga(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:v,zIndex:0}))})))}aw.displayName="LabelList";function PJ(t){var{label:e}=t;return e?e===!0?A.createElement(aw,{key:"labelList-implicit"}):A.isValidElement(e)||KR(e)?A.createElement(aw,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(aw,U1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var NJ=t=>t.graphicalItems.polarItems,uRe=ye([wn,X0],mR),US=ye([NJ,Pn,uRe],yR),dRe=ye([US],bR),$S=ye([dRe,PS],xR),fRe=ye([$S,Pn,US],_R);ye([$S,Pn,US],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=hn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:hn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var x9=()=>{},hRe=ye([$S,Pn,US,zS,wn],AR),pRe=ye([Pn,ER,TR,x9,hRe,x9,jt,wn],kR),DJ=ye([Pn,jt,$S,fRe,Y0,wn,pRe],CR),gRe=ye([DJ,Pn,Zp],NR);ye([Pn,DJ,gRe,wn],OR);var mRe={radiusAxis:{},angleAxis:{}},OJ=qi({name:"polarAxis",initialState:mRe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:_3e,removeRadiusAxis:S3e,addAngleAxis:E3e,removeAngleAxis:T3e}=OJ.actions,vRe=OJ.reducer;function w9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w9(Object(n),!0).forEach(function(r){yRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yRe(t,e,n){return(e=bRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bRe(t){var e=xRe(t,"string");return typeof e=="symbol"?e:e+""}function xRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wRe=(t,e)=>e,WR=ye([NJ,wRe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),_Re=[],YR=(t,e,n)=>n?.length===0?_Re:n,RJ=ye([PS,WR,YR],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>_9(_9({},e.presentationProps),a.props))),i!=null)return i}}),SRe=ye([RJ,WR,YR],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=hn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:dS(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),ERe=ye([RJ,WR,YR,wr],(t,e,n,r)=>{if(!(e==null||t==null))return CMe({offset:r,pieSettings:e,displayedData:t,cells:n})}),CC={exports:{}},Jt={};var S9;function TRe(){if(S9)return Jt;S9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return Jt.ContextConsumer=a,Jt.ContextProvider=s,Jt.Element=t,Jt.ForwardRef=o,Jt.Fragment=n,Jt.Lazy=h,Jt.Memo=f,Jt.Portal=e,Jt.Profiler=i,Jt.StrictMode=r,Jt.Suspense=c,Jt.SuspenseList=u,Jt.isContextConsumer=function(x){return b(x)===a},Jt.isContextProvider=function(x){return b(x)===s},Jt.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},Jt.isForwardRef=function(x){return b(x)===o},Jt.isFragment=function(x){return b(x)===n},Jt.isLazy=function(x){return b(x)===h},Jt.isMemo=function(x){return b(x)===f},Jt.isPortal=function(x){return b(x)===e},Jt.isProfiler=function(x){return b(x)===i},Jt.isStrictMode=function(x){return b(x)===r},Jt.isSuspense=function(x){return b(x)===c},Jt.isSuspenseList=function(x){return b(x)===u},Jt.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===v||x.getModuleId!==void 0)},Jt.typeOf=b,Jt}var E9;function ARe(){return E9||(E9=1,CC.exports=TRe()),CC.exports}var kRe=ARe(),T9=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",A9=null,IC=null,MJ=t=>{if(t===A9&&Array.isArray(IC))return IC;var e=[];return A.Children.forEach(t,n=>{Rr(n)||(kRe.isFragment(n)?e=e.concat(MJ(n.props.children)):e.push(n))}),IC=e,A9=t,e};function XR(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>T9(i)):r=[T9(e)],MJ(t).forEach(i=>{var a=Fd(i,"type.displayName")||Fd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var PC={},k9;function CRe(){return k9||(k9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(PC)),PC}var NC,C9;function IRe(){return C9||(C9=1,NC=CRe().isPlainObject),NC}var PRe=IRe();const NRe=Il(PRe);var I9,P9,N9,D9,O9;function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){DRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DRe(t,e,n){return(e=ORe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ORe(t){var e=RRe(t,"string");return typeof e=="symbol"?e:e+""}function RRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $1(){return $1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$1.apply(null,arguments)}function xm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var j9=(t,e,n,r,i)=>{var a=n-r,s;return s=Mn(I9||(I9=xm(["M ",",",""])),t,e),s+=Mn(P9||(P9=xm(["L ",",",""])),t+n,e),s+=Mn(N9||(N9=xm(["L ",",",""])),t+n-a/2,e+i),s+=Mn(D9||(D9=xm(["L ",",",""])),t+n-a/2-r,e+i),s+=Mn(O9||(O9=xm(["L ",","," Z"])),t,e),s},MRe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jRe=t=>{var e=Yr(t,MRe),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[v,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),S=A.useRef(s),T=A.useRef(n),I=A.useRef(r),O=SS(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var W=g.current.getTotalLength();W&&b(W)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var D=Wt("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",$1({},ga(e),{className:D,d:j9(n,r,i,a,s)})));var N=x.current,C=w.current,P=S.current,R=T.current,j=I.current,L="0px ".concat(v===-1?1:v,"px"),B="".concat(v,"px 0px"),z=nQ(["strokeDasharray"],u,c);return A.createElement(_S,{animationId:O,key:O,canBegin:v>0,duration:u,easing:c,isActive:h,begin:f},W=>{var Z=hr(N,i,W),G=hr(C,a,W),Y=hr(P,s,W),Q=hr(R,n,W),J=hr(j,r,W);g.current&&(x.current=Z,w.current=G,S.current=Y,T.current=Q,I.current=J);var te=W>0?{transition:z,strokeDasharray:B}:{strokeDasharray:L};return A.createElement("path",$1({},ga(e),{className:D,d:j9(Q,J,Z,G,Y),ref:g,style:M9(M9({},te),e.style)}))})},zRe=["option","shapeType","activeClassName"];function LRe(t,e){if(t==null)return{};var n,r,i=VRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function z9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z9(Object(n),!0).forEach(function(r){BRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BRe(t,e,n){return(e=FRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FRe(t){var e=URe(t,"string");return typeof e=="symbol"?e:e+""}function URe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Re(t,e){return q1(q1({},e),t)}function qRe(t,e){return t==="symbols"}function L9(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(sQ,n);case"trapezoid":return A.createElement(jRe,n);case"sector":return A.createElement(uQ,n);case"symbols":if(qRe(e))return A.createElement(UY,n);break;case"curve":return A.createElement(j2,n);default:return null}}function GRe(t){return A.isValidElement(t)?t.props:t}function jJ(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=LRe(t,zRe),a;if(A.isValidElement(e))a=A.cloneElement(e,q1(q1({},i),GRe(e)));else if(typeof e=="function")a=e(i,i.index);else if(NRe(e)&&typeof e!="boolean"){var s=$Re(e,i);a=A.createElement(L9,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(L9,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(li,{className:r},a):a}var QR=(t,e,n)=>{var r=pn();return(i,a)=>s=>{t?.(i,a,s),r(HZ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},ZR=t=>{var e=pn();return(n,r)=>i=>{t?.(n,r,i),e(eDe())}},JR=(t,e,n)=>{var r=pn();return(i,a)=>s=>{t?.(i,a,s),r(tDe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function zJ(t){var{tooltipEntrySettings:e}=t,n=pn(),r=_i(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(XNe(e)):i.current!==e&&n(QNe({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(ZNe(i.current)),i.current=null)},[n]),null}function HRe(t){var{legendPayload:e}=t,n=pn(),r=_i(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(ZX(e)):i.current!==e&&n(JX({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(eQ(i.current)),i.current=null)},[n]),null}function KRe(t){var{legendPayload:e}=t,n=pn(),r=qe(jt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(ZX(e)):i.current!==e&&n(JX({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(eQ(i.current)),i.current=null)},[n]),null}var DC,WRe=()=>{var[t]=A.useState(()=>Vv("uid-"));return t},YRe=(DC=tne.useId)!==null&&DC!==void 0?DC:WRe;function XRe(t,e){var n=YRe();return e||(t?"".concat(t,"-").concat(n):n)}var QRe=A.createContext(void 0),LJ=t=>{var{id:e,type:n,children:r}=t,i=XRe("recharts-".concat(n),e);return A.createElement(QRe.Provider,{value:i},r(i))},ZRe={cartesianItems:[],polarItems:[]},VJ=qi({name:"graphicalItems",initialState:ZRe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:vn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ss(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:vn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Ss(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:vn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:vn()},removePolarGraphicalItem:{reducer(t,e){var n=Ss(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:vn()}}}),{addCartesianGraphicalItem:JRe,replaceCartesianGraphicalItem:eMe,removeCartesianGraphicalItem:tMe,addPolarGraphicalItem:nMe,removePolarGraphicalItem:rMe}=VJ.actions,iMe=VJ.reducer,aMe=t=>{var e=pn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(JRe(t)):n.current!==t&&e(eMe({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(tMe(n.current)),n.current=null)},[e]),null},sMe=A.memo(aMe);function oMe(t){var e=pn();return A.useLayoutEffect(()=>(e(nMe(t)),()=>{e(rMe(t))}),[e,t]),null}var lMe=["key"],cMe=["onMouseEnter","onClick","onMouseLeave"],uMe=["id"],dMe=["id"];function V9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(n),!0).forEach(function(r){fMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fMe(t,e,n){return(e=hMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hMe(t){var e=pMe(t,"string");return typeof e=="symbol"?e:e+""}function pMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nu(){return nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nu.apply(null,arguments)}function qS(t,e){if(t==null)return{};var n,r,i=gMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function gMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function mMe(t){var e=A.useMemo(()=>XR(t.children,iy),[t.children]),n=qe(r=>SRe(r,t.id,e));return n==null?null:A.createElement(KRe,{legendPayload:n})}var vMe=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:dS(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return A.createElement(zJ,{tooltipEntrySettings:h})}),yMe=(t,e)=>t>e?"start":t<e?"end":"middle",bMe=(t,e,n)=>si(typeof e=="function"?e(t):e,n,n*.8),xMe=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=oQ(a,s),c=i+si(t.cx,a,a/2),u=r+si(t.cy,s,s/2),f=si(t.innerRadius,o,0),h=bMe(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},wMe=(t,e)=>{var n=Dr(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function _Me(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var SMe=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Wt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=qS(e,lMe);return A.createElement(j2,nu({},i,{type:"linear",className:n}))},EMe=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Wt("recharts-pie-label-text",_Me(t));return A.createElement(FS,nu({},e,{alignmentBaseline:"middle",className:i}),r)};function TMe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=ks(n),c=Lv(i),u=Lv(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,v)=>{var b=(g.startAngle+g.endAngle)/2,x=lr(g.cx,g.cy,g.outerRadius+f,b),w=jn(jn(jn(jn({},o),g),{},{stroke:"none"},c),{},{index:v,textAnchor:yMe(x.x,g.cx)},x),S=jn(jn(jn(jn({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:v,points:[lr(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(Ja,{zIndex:Or.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},A.createElement(li,null,a&&SMe(a,S),EMe(i,w,hn(g,s))))});return A.createElement(li,{className:"recharts-pie-labels"},h)}function AMe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(PJ,{label:i}):A.createElement(TMe,{sectors:e,props:n,showLabels:r})}function kMe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=qe(Hd),c=qe(UR),u=qe(BDe),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,v=qS(i,cMe),b=QR(f,i.dataKey,s),x=ZR(g),w=JR(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((S,T)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var I=u==null||u===s,O=String(T)===o&&(c==null||i.dataKey===c)&&I,D=o?r:null,N=n&&O?n:D,C=jn(jn({},S),{},{stroke:S.stroke,tabIndex:-1,[jX]:T,[zX]:s});return A.createElement(li,nu({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},eS(v,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),A.createElement(jJ,nu({option:a??N,index:T,shapeType:"sector",isActive:O},C)))}))}function CMe(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),v=wMe(o,c),b=Math.abs(v),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(N=>hn(N,u,0)!==0).length,S=(b>=360?w:w-1)*x,T=b-w*g-S,I=r.reduce((N,C)=>{var P=hn(C,u,0);return N+(Ke(P)?P:0)},0),O;if(I>0){var D;O=r.map((N,C)=>{var P=hn(N,u,0),R=hn(N,f,C),j=xMe(n,a,N),L=(Ke(P)?P:0)/I,B,z=jn(jn({},N),i&&i[C]&&i[C].props);C?B=D.endAngle+Dr(v)*x*(P!==0?1:0):B=o;var W=B+Dr(v)*((P!==0?g:0)+L*T),Z=(B+W)/2,G=(j.innerRadius+j.outerRadius)/2,Y=[{name:R,value:P,payload:z,dataKey:u,type:h,graphicalItemId:n.id}],Q=lr(j.cx,j.cy,G,Z);return D=jn(jn(jn(jn({},n.presentationProps),{},{percent:L,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:Y,midAngle:Z,middleRadius:G,tooltipPosition:Q},z),j),{},{value:P,dataKey:u,startAngle:B,endAngle:W,payload:z,paddingAngle:Dr(v)*x}),D})}return O}function IMe(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement(oRe,{value:e?i:void 0},r)}function PMe(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,v=SS(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),S=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement(IMe,{showLabels:!x,sectors:i},A.createElement(_S,{animationId:v,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:S,key:v},I=>{var O=[],D=i&&i[0],N=D?.startAngle;return i?.forEach((C,P)=>{var R=b&&b[P],j=P>0?Fd(C,"paddingAngle",0):0;if(R){var L=hr(R.endAngle-R.startAngle,C.endAngle-C.startAngle,I),B=jn(jn({},C),{},{startAngle:N+j,endAngle:N+L+j});O.push(B),N=B.endAngle}else{var{endAngle:z,startAngle:W}=C,Z=hr(0,z-W,I),G=jn(jn({},C),{},{startAngle:N+j,endAngle:N+Z+j});O.push(G),N=G.endAngle}}),n.current=O,A.createElement(li,null,A.createElement(kMe,{sectors:O,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(AMe,{showLabels:!x,sectors:i,props:e}),e.children)}var NMe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Or.area};function DMe(t){var{id:e}=t,n=qS(t,uMe),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>XR(t.children,iy),[t.children]),o=qe(f=>ERe(f,e,s)),c=A.useRef(null),u=Wt("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(li,{tabIndex:a,className:u})):A.createElement(Ja,{zIndex:t.zIndex},A.createElement(vMe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(li,{tabIndex:a,className:u},A.createElement(PMe,{props:jn(jn({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function BJ(t){var e=Yr(t,NMe),{id:n}=e,r=qS(e,dMe),i=ks(r);return A.createElement(LJ,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement(oMe,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(mMe,nu({},r,{id:a})),A.createElement(DMe,nu({},r,{id:a}))))}BJ.displayName="Pie";function B9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B9(Object(n),!0).forEach(function(r){OMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OMe(t,e,n){return(e=RMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RMe(t){var e=MMe(t,"string");return typeof e=="symbol"?e:e+""}function MMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FJ=0,jMe={xAxis:{},yAxis:{},zAxis:{}},UJ=qi({name:"cartesianAxis",initialState:jMe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:vn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:vn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:vn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:vn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:vn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:vn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:vn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:vn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:vn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=F9(F9({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:zMe,replaceXAxis:LMe,removeXAxis:VMe,addYAxis:BMe,replaceYAxis:FMe,removeYAxis:UMe,addZAxis:A3e,replaceZAxis:k3e,removeZAxis:C3e,updateYAxisWidth:$Me}=UJ.actions,qMe=UJ.reducer,GMe=ye([wr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),HMe=ye([GMe,Ol,Rl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),$J=()=>qe(HMe),U9=(t,e,n)=>{var r=n??t;if(!Rr(r))return si(r,e,0)},KMe=(t,e,n)=>{var r={},i=t.filter(OS),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>(u[f.stackId]||(u[f.stackId]=[]),u[f.stackId].push(f),u),r),o=Object.entries(s).map(u=>{var[f,h]=u,g=h.map(b=>b.dataKey),v=U9(e,n,h[0].barSize);return{stackId:f,dataKeys:g,barSize:v}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=U9(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function $9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$9(Object(n),!0).forEach(function(r){WMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WMe(t,e,n){return(e=YMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YMe(t){var e=XMe(t,"string");return typeof e=="symbol"?e:e+""}function XMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QMe(t,e,n,r,i){var a=r.length;if(!(a<1)){var s=si(t,n,0,!0),o,c=[];if(an(r[0].barSize)){var u=!1,f=n/a,h=r.reduce((S,T)=>S+(T.barSize||0),0);h+=(a-1)*s,h>=n&&(h-=(a-1)*s,s=0),h>=n&&f>0&&(u=!0,f*=.9,h=a*f);var g=(n-h)/2>>0,v={offset:g-s,size:0};o=r.reduce((S,T)=>{var I,O={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:v.offset+v.size+s,size:u?f:(I=T.barSize)!==null&&I!==void 0?I:0}},D=[...S,O];return v=D[D.length-1].position,D},c)}else{var b=si(e,n,0,!0);n-2*b-(a-1)*s<=0&&(s=0);var x=(n-2*b-(a-1)*s)/a;x>1&&(x>>=0);var w=an(i)?Math.min(x,i):x;o=r.reduce((S,T,I)=>[...S,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b+(x+s)*I+(x-w)/2,size:w}}],c)}return o}}var ZMe=(t,e,n,r,i,a,s)=>{var o=Rr(s)?e:s,c=QMe(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>Tx(Tx({},u),{},{position:Tx(Tx({},u.position),{},{offset:u.position.offset-i/2})}))),c},JMe=(t,e)=>{var n=pR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}};function eje(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&an(t.zIndex)?t.zIndex:e}var qJ=t=>{var{chartData:e}=t,n=pn(),r=_i();return A.useEffect(()=>r?()=>{}:(n(ZU(e)),()=>{n(ZU(void 0))}),[e,n,r]),null},q9={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},GJ=qi({name:"brush",initialState:q9,reducers:{setBrushSettings(t,e){return e.payload==null?q9:e.payload}}}),{setBrushSettings:I3e}=GJ.actions,tje=GJ.reducer;function G9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ax(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G9(Object(n),!0).forEach(function(r){HJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HJ(t,e,n){return(e=nje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nje(t){var e=rje(t,"string");return typeof e=="symbol"?e:e+""}function rje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ije=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},aje=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return ije({x:e,y:n},{x:r,y:i})};class GS{static create(e){return new GS(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}HJ(GS,"EPS",1e-4);var sje=t=>{var e=Object.keys(t).reduce((n,r)=>Ax(Ax({},n),{},{[r]:GS.create(t[r])}),{});return Ax(Ax({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(a=>{var[s,o]=a;return[s,e[s].apply(o,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function oje(t){return(t%180+180)%180}var lje=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=oje(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},cje={dots:[],areas:[],lines:[]},KJ=qi({name:"referenceElements",initialState:cje,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ss(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ss(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ss(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:P3e,removeDot:N3e,addArea:D3e,removeArea:O3e,addLine:uje,removeLine:dje}=KJ.actions,fje=KJ.reducer,WJ=A.createContext(void 0),hje=t=>{var{children:e}=t,[n]=A.useState("".concat(Vv("recharts"),"-clip")),r=$J();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(WJ.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},pje=()=>A.useContext(WJ);function H9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H9(Object(n),!0).forEach(function(r){gje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gje(t,e,n){return(e=mje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mje(t){var e=vje(t,"string");return typeof e=="symbol"?e:e+""}function vje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G1(){return G1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G1.apply(null,arguments)}var yje=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!an(e.x1)||!an(e.y1)||!an(e.x2)||!an(e.y2))return null;n=A.createElement("line",G1({},e,{className:"recharts-reference-line-line"}))}return n},bje=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.y.apply(t,{position:n});if(ma(c)||e==="discard"&&!i.y.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},xje=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.x.apply(t,{position:n});if(ma(c)||e==="discard"&&!i.x.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},wje=(t,e,n,r)=>{var i=t.map(a=>r.apply(a,{position:n}));return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},_je=(t,e,n,r,i,a)=>{var{x:s,y:o,segment:c,ifOverflow:u}=a,f=Ha(s),h=Ha(o);return h?bje(o,u,n,i,t,e):f?xje(s,u,n,r,t,e):c!=null&&c.length===2?wje(c,u,n,t):null};function Sje(t){var e=pn();return A.useEffect(()=>(e(uje(t)),()=>{e(dje(t))})),null}function Eje(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=_i(),o=pje(),c=qe(N=>ko(N,e)),u=qe(N=>Co(N,n)),f=qe(N=>Ep(N,"xAxis",e,s)),h=qe(N=>Ep(N,"yAxis",n,s)),g=U0();if(!o||!g||c==null||u==null||f==null||h==null)return null;var v=sje({x:f,y:h}),b=_je(v,g,t.position,c.orientation,u.orientation,t);if(!b)return null;var[{x,y:w},{x:S,y:T}]=b,I=a==="hidden"?"url(#".concat(o,")"):void 0,O=K9(K9({clipPath:I},ga(t)),{},{x1:x,y1:w,x2:S,y2:T}),D=aje({x1:x,y1:w,x2:S,y2:T});return A.createElement(Ja,{zIndex:t.zIndex},A.createElement(li,{className:Wt("recharts-reference-line",i)},yje(r,O),A.createElement(TJ,G1({},D,{lowerWidth:D.width,upperWidth:D.width}),A.createElement(kJ,{label:t.label}),t.children)))}var Tje={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Or.line};function eM(t){var e=Yr(t,Tje);return A.createElement(A.Fragment,null,A.createElement(Sje,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(Eje,e))}eM.displayName="ReferenceLine";function YJ(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Aje(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return lje(r,n)}function kje(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Jv(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Cje(t,e){return YJ(t,e+1)}function Ije(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:YJ(r,u)};var x=c,w,S=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,I=c===0||Jv(t,T,S,f,o);I||(c=0,f=s,u+=1),I&&(f=T+t*(S()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function Pje(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,v=function(){var T=r[b],I=b,O,D=()=>(O===void 0&&(O=n(T,I)),O),N=T.coordinate,C=b===f||Jv(t,N,D,h,c);if(!C)return g=!1,1;C&&(h=N+t*(D()/2+i))},b=f;b<s&&!v();b+=u);if(g){for(var x=[],w=f;w<s;w+=u)x.push(r[w]);return x}}return[]}function W9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W9(Object(n),!0).forEach(function(r){Nje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nje(t,e,n){return(e=Dje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dje(t){var e=Oje(t,"string");return typeof e=="symbol"?e:e+""}function Oje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rje(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var v=a[g],b,x=()=>(b===void 0&&(b=n(v,g)),b);if(g===s-1){var w=t*(v.coordinate+t*x()/2-c);a[g]=v=Jr(Jr({},v),{},{tickCoord:w>0?v.coordinate-w*t:v.coordinate})}else a[g]=v=Jr(Jr({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var S=Jv(t,v.tickCoord,x,o,c);S&&(c=v.tickCoord-t*(x()/2+i),a[g]=Jr(Jr({},v),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function Mje(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1],h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=Jr(Jr({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var v=Jv(t,f.tickCoord,()=>h,c,u);v&&(u=f.tickCoord-t*(h/2+i),s[o-1]=Jr(Jr({},f),{},{isShow:!0}))}}for(var b=a?o-1:o,x=function(T){var I=s[T],O,D=()=>(O===void 0&&(O=n(I,T)),O);if(T===0){var N=t*(I.coordinate-t*D()/2-c);s[T]=I=Jr(Jr({},I),{},{tickCoord:N<0?I.coordinate-N*t:I.coordinate})}else s[T]=I=Jr(Jr({},I),{},{tickCoord:I.coordinate});if(I.tickCoord!=null){var C=Jv(t,I.tickCoord,D,c,u);C&&(c=I.tickCoord+t*(D()/2+i),s[T]=Jr(Jr({},I),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function tM(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(Ke(c)||wS.isSsr){var g;return(g=Cje(i,Ke(c)?c:0))!==null&&g!==void 0?g:[]}var v=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?iv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(I,O)=>{var D=typeof u=="function"?u(I.value,O):I.value;return b==="width"?Aje(iv(D,{fontSize:e,letterSpacing:n}),x,h):iv(D,{fontSize:e,letterSpacing:n})[b]},S=i.length>=2?Dr(i[1].coordinate-i[0].coordinate):1,T=kje(a,S,b);return c==="equidistantPreserveStart"?Ije(S,T,w,i,s):c==="equidistantPreserveEnd"?Pje(S,T,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?v=Mje(S,T,w,i,s,c==="preserveStartEnd"):v=Rje(S,T,w,i,s),v.filter(I=>I.isShow))}var jje=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},zje=["axisLine","width","height","className","hide","ticks","axisType"];function Lje(t,e){if(t==null)return{};var n,r,i=Vje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kd.apply(null,arguments)}function Y9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y9(Object(n),!0).forEach(function(r){Bje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bje(t,e,n){return(e=Fje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fje(t){var e=Uje(t,"string");return typeof e=="symbol"?e:e+""}function Uje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ul={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Or.axis};function $je(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=ar(ar(ar({},c),ks(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=ar(ar({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=ar(ar({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",Kd({},u,{className:Wt("recharts-cartesian-axis-line",Fd(o,"className"))}))}function qje(t,e,n,r,i,a,s,o,c){var u,f,h,g,v,b,x=o?-1:1,w=t.tickSize||s,S=Ke(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,v=S;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,v=u-x*c,b=S;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,v=u+x*c,b=S;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,v=S;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:v,y:b}}}function Gje(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Hje(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Kje(t){var{option:e,tickProps:n,value:r}=t,i,a=Wt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,ar(ar({},n),{},{className:a}));else if(typeof e=="function")i=e(ar(ar({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Wt(s,e?.className)),i=A.createElement(FS,Kd({},n,{className:s}),r)}return i}var Wje=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:v,width:b,height:x,tickSize:w,tickMargin:S,fontSize:T,letterSpacing:I,getTicksConfig:O,events:D,axisType:N}=t,C=tM(ar(ar({},O),{},{ticks:n}),T,I),P=Gje(f,h),R=Hje(f,h),j=ks(O),L=Lv(r),B={};typeof i=="object"&&(B=i);var z=ar(ar({},j),{},{fill:"none"},B),W=C.map(Y=>ar({entry:Y},qje(Y,g,v,b,x,f,w,h,S))),Z=W.map(Y=>{var{entry:Q,line:J}=Y;return A.createElement(li,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},i&&A.createElement("line",Kd({},z,J,{className:Wt("recharts-cartesian-axis-tick-line",Fd(i,"className"))})))}),G=W.map((Y,Q)=>{var{entry:J,tick:te}=Y,U=ar(ar(ar(ar({textAnchor:P,verticalAnchor:R},j),{},{stroke:"none",fill:a},L),te),{},{index:Q,payload:J,visibleTicksCount:C.length,tickFormatter:s,padding:c},u);return A.createElement(li,Kd({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},eS(D,J,Q)),r&&A.createElement(Kje,{option:r,tickProps:U,value:"".concat(typeof s=="function"?s(J.value,Q):J.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},G.length>0&&A.createElement(Ja,{zIndex:Or.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:e},G)),Z.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},Z))}),Yje=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=Lje(t,zje),[f,h]=A.useState(""),[g,v]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return jje({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var T=S[0];if(T){var I=window.getComputedStyle(T),O=I.fontSize,D=I.letterSpacing;(O!==f||D!==g)&&(h(O),v(D))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(Ja,{zIndex:t.zIndex},A.createElement(li,{className:Wt("recharts-cartesian-axis",a)},A.createElement($je,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:ks(t)}),A.createElement(Wje,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(TJ,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(kJ,{label:t.label,labelRef:t.labelRef}),t.children)))}),nM=A.forwardRef((t,e)=>{var n=Yr(t,ul);return A.createElement(Yje,Kd({},n,{ref:e}))});nM.displayName="CartesianAxis";var Xje=["x1","y1","x2","y2","key"],Qje=["offset"],Zje=["xAxisId","yAxisId"],Jje=["xAxisId","yAxisId"];function X9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X9(Object(n),!0).forEach(function(r){eze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eze(t,e,n){return(e=tze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tze(t){var e=nze(t,"string");return typeof e=="symbol"?e:e+""}function nze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gd.apply(null,arguments)}function H1(t,e){if(t==null)return{};var n,r,i=rze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ize=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function XJ(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=H1(n,Xje),h=(i=ks(f))!==null&&i!==void 0?i:{},{offset:g}=h,v=H1(h,Qje);r=A.createElement("line",gd({},v,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function aze(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=H1(t,Zje),c=i.map((u,f)=>{var h=ni(ni({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return A.createElement(XJ,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function sze(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=H1(t,Jje),c=i.map((u,f)=>{var h=ni(ni({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(XJ,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function oze(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=!u[g+1],b=v?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:b,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function lze(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var v=!u[g+1],b=v?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:b,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var cze=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return OX(tM(ni(ni(ni({},ul),n),{},{ticks:RX(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},uze=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return OX(tM(ni(ni(ni({},ul),n),{},{ticks:RX(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},dze={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Or.grid};function HS(t){var e=$X(),n=qX(),r=UX(),i=ni(ni({},Yr(t,dze)),{},{x:Ke(t.x)?t.x:r.left,y:Ke(t.y)?t.y:r.top,width:Ke(t.width)?t.width:r.width,height:Ke(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:v}=i,b=_i(),x=qe(R=>BU(R,"xAxis",a,b)),w=qe(R=>BU(R,"yAxis",s,b));if(!_o(u)||!_o(f)||!Ke(o)||!Ke(c))return null;var S=i.verticalCoordinatesGenerator||cze,T=i.horizontalCoordinatesGenerator||uze,{horizontalPoints:I,verticalPoints:O}=i;if((!I||!I.length)&&typeof T=="function"){var D=g&&g.length,N=T({yAxis:w?ni(ni({},w),{},{ticks:D?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},D?!0:h);x1(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(I=N)}if((!O||!O.length)&&typeof S=="function"){var C=v&&v.length,P=S({xAxis:x?ni(ni({},x),{},{ticks:C?v:x.ticks}):void 0,width:e??u,height:n??f,offset:r},C?!0:h);x1(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(O=P)}return A.createElement(Ja,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(ize,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(oze,gd({},i,{horizontalPoints:I})),A.createElement(lze,gd({},i,{verticalPoints:O})),A.createElement(aze,gd({},i,{offset:r,horizontalPoints:I,xAxis:x,yAxis:w})),A.createElement(sze,gd({},i,{offset:r,verticalPoints:O,xAxis:x,yAxis:w}))))}HS.displayName="CartesianGrid";var fze={},QJ=qi({name:"errorBars",initialState:fze,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:R3e,replaceErrorBar:M3e,removeErrorBar:j3e}=QJ.actions,hze=QJ.reducer,pze=["children"];function gze(t,e){if(t==null)return{};var n,r,i=mze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vze={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},yze=A.createContext(vze);function bze(t){var{children:e}=t,n=gze(t,pze);return A.createElement(yze.Provider,{value:n},e)}function ZJ(t,e){var n,r,i=qe(u=>ko(u,t)),a=qe(u=>Co(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Cr.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Ir.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function xze(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=$J(),{needClipX:a,needClipY:s,needClip:o}=ZJ(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var OC={exports:{}},RC={};var Q9;function wze(){if(Q9)return RC;Q9=1;var t=kp();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return RC.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=s(function(){function w(D){if(!S){if(S=!0,T=D,D=h(D),g!==void 0&&b.hasValue){var N=b.value;if(g(N,D))return I=N}return I=D}if(N=I,n(T,D))return N;var C=h(D);return g!==void 0&&g(N,C)?(T=D,N):(T=D,I=C)}var S=!1,T,I,O=f===void 0?null:f;return[function(){return w(u())},O===null?void 0:function(){return w(O())}]},[u,f,h,g]);var x=r(c,v[0],v[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},RC}var Z9;function _ze(){return Z9||(Z9=1,OC.exports=wze()),OC.exports}_ze();function Sze(t){t()}function Eze(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Sze(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var J9={notify(){},get:()=>[]};function Tze(t,e){let n,r=J9,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let S=!1;return()=>{S||(S=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=Eze())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=J9)}function g(){a||(a=!0,f())}function v(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return b}var Aze=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kze=Aze(),Cze=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ize=Cze(),Pze=()=>kze||Ize?A.useLayoutEffect:A.useEffect,Nze=Pze();function e$(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Dze(t,e){if(e$(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!e$(t[n[i]],e[n[i]]))return!1;return!0}var Oze=Symbol.for("react-redux-context"),Rze=typeof globalThis<"u"?globalThis:{};function Mze(){if(!A.createContext)return{};const t=Rze[Oze]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var jze=Mze();function zze(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=Tze(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);Nze(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||jze;return A.createElement(o.Provider,{value:a},e)}var Lze=zze,Vze=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Bze(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function rM(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Vze.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Dze(t[r],e[r]))return!1}else if(!Bze(t[r],e[r]))return!1;return!0}function sf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:FJ}function of(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:FJ}var Fze="Invariant failed";function Uze(t,e){throw new Error(Fze)}function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(null,arguments)}function K1(t){return A.createElement(jJ,gN({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var $ze=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ke(e))return e;var a=Ke(r)||Rr(r);return a?e(r,i):(a||Uze(),n)}},qze=(t,e,n)=>n,Gze=(t,e)=>e,ay=ye([vR,Gze],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Hze=ye([ay],t=>t?.maxBarSize),Kze=(t,e,n,r)=>r,Wze=ye([jt,vR,sf,of,qze],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Yze=(t,e,n)=>{var r=jt(t),i=sf(t,e),a=of(t,e);if(!(i==null||a==null))return r==="horizontal"?lN(t,"yAxis",a,n):lN(t,"xAxis",i,n)},Xze=(t,e)=>{var n=jt(t),r=sf(t,e),i=of(t,e);if(!(r==null||i==null))return n==="horizontal"?VU(t,"xAxis",r):VU(t,"yAxis",i)},Qze=ye([Wze,$Pe,Xze],KMe),Zze=(t,e,n)=>{var r,i,a=ay(t,e);if(a!=null){var s=sf(t,e),o=of(t,e);if(!(s==null||o==null)){var c=jt(t),u=oZ(t),{maxBarSize:f}=a,h=Rr(f)?u:f,g,v;return c==="horizontal"?(g=Ap(t,"xAxis",s,n),v=Tp(t,"xAxis",s,n)):(g=Ap(t,"yAxis",o,n),v=Tp(t,"yAxis",o,n)),(r=(i=b1(g,v,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},JJ=(t,e,n)=>{var r=jt(t),i=sf(t,e),a=of(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=Ap(t,"xAxis",i,n),o=Tp(t,"xAxis",i,n)):(s=Ap(t,"yAxis",a,n),o=Tp(t,"yAxis",a,n)),b1(s,o)}},Jze=ye([Qze,oZ,UPe,lZ,Zze,JJ,Hze],ZMe),e4e=(t,e,n)=>{var r=sf(t,e);if(r!=null)return Ap(t,"xAxis",r,n)},t4e=(t,e,n)=>{var r=of(t,e);if(r!=null)return Ap(t,"yAxis",r,n)},n4e=(t,e,n)=>{var r=sf(t,e);if(r!=null)return Tp(t,"xAxis",r,n)},r4e=(t,e,n)=>{var r=of(t,e);if(r!=null)return Tp(t,"yAxis",r,n)},i4e=ye([Jze,ay],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),a4e=ye([Yze,ay],JMe),s4e=ye([wr,D2,e4e,t4e,n4e,r4e,i4e,jt,PPe,JJ,a4e,ay,Kze],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,S;if(w!=null&&w.length>0?S=w:S=v?.slice(b,x+1),S!=null)return M4e({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:S,offset:t,cells:g,dataStartIndex:b})}}),o4e=["index"];function mN(){return mN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mN.apply(null,arguments)}function l4e(t,e){if(t==null)return{};var n,r,i=c4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var eee=A.createContext(void 0),u4e=t=>{var e=A.useContext(eee);if(e!=null)return e.stackId;if(t!=null)return VTe(t)},d4e=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),f4e=t=>{var e=A.useContext(eee);if(e!=null){var{stackId:n}=e;return"url(#".concat(d4e(n,t),")")}},h4e=t=>{var{index:e}=t,n=l4e(t,o4e),r=f4e(e);return A.createElement(li,mN({className:"recharts-bar-stack-layer",clipPath:r},n))},p4e=["onMouseEnter","onMouseLeave","onClick"],g4e=["value","background","tooltipPosition"],m4e=["id"],v4e=["onMouseEnter","onClick","onMouseLeave"];function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cl.apply(null,arguments)}function t$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t$(Object(n),!0).forEach(function(r){y4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y4e(t,e,n){return(e=b4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b4e(t){var e=x4e(t,"string");return typeof e=="symbol"?e:e+""}function x4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W1(t,e){if(t==null)return{};var n,r,i=w4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _4e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:dS(n,e),payload:t}]},S4e=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:dS(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return A.createElement(zJ,{tooltipEntrySettings:f})});function E4e(t){var e=qe(Hd),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=W1(a,p4e),f=QR(s,r,a.id),h=ZR(o),g=JR(c,r,a.id);if(!i||n==null)return null;var v=Lv(i);return A.createElement(Ja,{zIndex:eje(i,Or.barBackground)},n.map((b,x)=>{var{value:w,background:S,tooltipPosition:T}=b,I=W1(b,g4e);if(!S)return null;var O=f(b,x),D=h(b,x),N=g(b,x),C=gi(gi(gi(gi(gi({option:i,isActive:String(x)===e},I),{},{fill:"#eee"},S),v),eS(u,b,x)),{},{onMouseEnter:O,onMouseLeave:D,onClick:N,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(K1,Cl({key:"background-bar-".concat(x)},C))}))}function T4e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return gi(gi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(sRe,{value:e?i:void 0},n)}function A4e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=qe(Hd),c=qe(UR),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?A.createElement(Ja,{zIndex:Or.activeBar},A.createElement(K1,Cl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))):A.createElement(K1,Cl({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function k4e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(K1,Cl({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function C4e(t){var e,{data:n,props:r}=t,i=(e=ks(r))!==null&&e!==void 0?e:{},{id:a}=i,s=W1(i,m4e),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,v=W1(r,v4e),b=QR(f,c,a),x=ZR(g),w=JR(h,c,a);return n?A.createElement(A.Fragment,null,n.map((S,T)=>A.createElement(h4e,Cl({index:T,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(T),className:"recharts-bar-rectangle"},eS(v,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),u?A.createElement(A4e,{shape:o,activeBar:u,baseProps:s,entry:S,index:T,dataKey:c}):A.createElement(k4e,{shape:o,baseProps:s,entry:S,index:T,dataKey:c})))):null}function I4e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=SS(e,"recharts-bar-"),[v,b]=A.useState(!1),x=!v,w=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),S=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(T4e,{showLabels:x,rects:r},A.createElement(_S,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:S,key:g},T=>{var I=T===1?r:r?.map((O,D)=>{var N=h&&h[D];if(N)return gi(gi({},O),{},{x:hr(N.x,O.x,T),y:hr(N.y,O.y,T),width:hr(N.width,O.width,T),height:hr(N.height,O.height,T)});if(i==="horizontal"){var C=hr(0,O.height,T),P=hr(O.stackedBarStart,O.y,T);return gi(gi({},O),{},{y:P,height:C})}var R=hr(0,O.width,T),j=hr(O.stackedBarStart,O.x,T);return gi(gi({},O),{},{width:R,x:j})});return T>0&&(n.current=I??null),I==null?null:A.createElement(li,null,A.createElement(C4e,{props:e,data:I}))}),A.createElement(PJ,{label:e.label}),e.children)}function P4e(t){var e=A.useRef(null);return A.createElement(I4e,{previousRectanglesRef:e,props:t})}var tee=0,N4e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:hn(t,e)}};class D4e extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Wt("recharts-bar",i),h=u;return A.createElement(li,{className:f,id:u},o&&A.createElement("defs",null,A.createElement(xze,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(li,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(E4e,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(P4e,this.props)))}}var O4e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:tee,xAxisId:0,yAxisId:0,zIndex:Or.bar};function R4e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=ZJ(e,n),g=$0(),v=_i(),b=XR(t.children,iy),x=qe(T=>s4e(T,t.id,v,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,S=x?.[0];return S==null||S.height==null||S.width==null?w=0:w=g==="vertical"?S.height/2:S.width/2,A.createElement(bze,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:N4e,errorBarOffset:w},A.createElement(D4e,Cl({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function M4e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:v,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,S=f?w.scale.domain():null,T=BTe({numericAxis:w}),I=w.scale(T);return h.map((O,D)=>{var N,C,P,R,j,L;if(f){var B=f[D+x];if(B==null)return null;N=RTe(B,S)}else N=hn(O,n),Array.isArray(N)||(N=[T,N]);var z=$ze(r,tee)(N[1],D);if(e==="horizontal"){var W,[Z,G]=[o.scale(N[0]),o.scale(N[1])];C=G6({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:O,index:D}),P=(W=G??Z)!==null&&W!==void 0?W:void 0,R=i.size;var Y=Z-G;if(j=ma(Y)?0:Y,L={x:C,y:g.top,width:R,height:g.height},Math.abs(z)>0&&Math.abs(j)<Math.abs(z)){var Q=Dr(j||z)*(Math.abs(z)-Math.abs(j));P-=Q,j+=Q}}else{var[J,te]=[s.scale(N[0]),s.scale(N[1])];if(C=J,P=G6({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:O,index:D}),R=te-J,j=i.size,L={x:g.left,y:P,width:g.width,height:j},Math.abs(z)>0&&Math.abs(R)<Math.abs(z)){var U=Dr(R||z)*(Math.abs(z)-Math.abs(R));R+=U}}if(C==null||P==null||R==null||j==null)return null;var X=gi(gi({},O),{},{stackedBarStart:I,x:C,y:P,width:R,height:j,value:f?N:N[1],payload:O,background:L,tooltipPosition:{x:C+R/2,y:P+j/2},parentViewBox:b},v&&v[D]&&v[D].props);return X}).filter(Boolean)}function j4e(t){var e=Yr(t,O4e),n=u4e(e.stackId),r=_i();return A.createElement(LJ,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(HRe,{legendPayload:_4e(e)}),A.createElement(S4e,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(sMe,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(Ja,{zIndex:e.zIndex},A.createElement(R4e,Cl({},e,{id:i})))))}var e0=A.memo(j4e,rM);e0.displayName="Bar";var z4e=["domain","range"],L4e=["domain","range"];function n$(t,e){if(t==null)return{};var n,r,i=V4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function V4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function r$(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function nee(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=n$(t,z4e),{domain:a,range:s}=e,o=n$(e,L4e);return!r$(n,a)||!r$(r,s)?!1:rM(i,o)}var B4e=["dangerouslySetInnerHTML","ticks","scale"],F4e=["id","scale"];function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vN.apply(null,arguments)}function i$(t,e){if(t==null)return{};var n,r,i=U4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function U4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $4e(t){var e=pn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(zMe(t)):n.current!==t&&e(LMe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(VMe(n.current)),n.current=null)},[e]),null}var q4e=t=>{var{xAxisId:e,className:n}=t,r=qe(D2),i=_i(),a="xAxis",s=qe(S=>BZ(S,a,e,i)),o=qe(S=>jZ(S,e)),c=qe(S=>BNe(S,e)),u=qe(S=>vZ(S,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,v=i$(t,B4e),{id:b,scale:x}=u,w=i$(u,F4e);return A.createElement(nM,vN({},v,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Wt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},G4e={allowDataOverflow:Cr.allowDataOverflow,allowDecimals:Cr.allowDecimals,allowDuplicatedCategory:Cr.allowDuplicatedCategory,angle:Cr.angle,axisLine:ul.axisLine,height:Cr.height,hide:!1,includeHidden:Cr.includeHidden,interval:Cr.interval,minTickGap:Cr.minTickGap,mirror:Cr.mirror,orientation:Cr.orientation,padding:Cr.padding,reversed:Cr.reversed,scale:Cr.scale,tick:Cr.tick,tickCount:Cr.tickCount,tickLine:ul.tickLine,tickSize:ul.tickSize,type:Cr.type,xAxisId:0},H4e=t=>{var e=Yr(t,G4e);return A.createElement(A.Fragment,null,A.createElement($4e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(q4e,e))},KS=A.memo(H4e,nee);KS.displayName="XAxis";var K4e=["dangerouslySetInnerHTML","ticks","scale"],W4e=["id","scale"];function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(null,arguments)}function a$(t,e){if(t==null)return{};var n,r,i=Y4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Y4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function X4e(t){var e=pn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(BMe(t)):n.current!==t&&e(FMe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(UMe(n.current)),n.current=null)},[e]),null}var Q4e=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=qe(D2),c=_i(),u=pn(),f="yAxis",h=qe(N=>zZ(N,e)),g=qe(N=>UNe(N,e)),v=qe(N=>BZ(N,f,e,c)),b=qe(N=>yZ(N,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||KR(i)||A.isValidElement(i)||b==null)){var N=a.current;if(N){var C=N.getCalculatedWidth();Math.round(h.width)!==Math.round(C)&&u($Me({id:e,width:C}))}}},[v,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:S}=t,T=a$(t,K4e),{id:I,scale:O}=b,D=a$(b,W4e);return A.createElement(nM,yN({},T,D,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Wt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:v,axisType:f}))},Z4e={allowDataOverflow:Ir.allowDataOverflow,allowDecimals:Ir.allowDecimals,allowDuplicatedCategory:Ir.allowDuplicatedCategory,angle:Ir.angle,axisLine:ul.axisLine,hide:!1,includeHidden:Ir.includeHidden,interval:Ir.interval,minTickGap:Ir.minTickGap,mirror:Ir.mirror,orientation:Ir.orientation,padding:Ir.padding,reversed:Ir.reversed,scale:Ir.scale,tick:Ir.tick,tickCount:Ir.tickCount,tickLine:ul.tickLine,tickSize:ul.tickSize,type:Ir.type,width:Ir.width,yAxisId:0},J4e=t=>{var e=Yr(t,Z4e);return A.createElement(A.Fragment,null,A.createElement(X4e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(Q4e,e))},WS=A.memo(J4e,nee);WS.displayName="YAxis";var eLe=(t,e)=>e,iM=ye([eLe,jt,gZ,Sr,nJ,zl,rOe,wr],uOe),aM=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},ree=Ka("mouseClick"),iee=B0();iee.startListening({actionCreator:ree,effect:(t,e)=>{var n=t.payload,r=iM(e.getState(),aM(n));r?.activeIndex!=null&&e.dispatch(nDe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var bN=Ka("mouseMove"),aee=B0(),kx=null;aee.startListening({actionCreator:bN,effect:(t,e)=>{var n=t.payload;kx!==null&&cancelAnimationFrame(kx);var r=aM(n);kx=requestAnimationFrame(()=>{var i=e.getState(),a=jR(i,i.tooltip.settings.shared);if(a==="axis"){var s=iM(i,r);s?.activeIndex!=null?e.dispatch(WZ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(KZ())}kx=null})}});function tLe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var s$={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},see=qi({name:"rootProps",initialState:s$,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:s$.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),nLe=see.reducer,{updateOptions:rLe}=see.actions,oee=qi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:iLe}=oee.actions,aLe=oee.reducer,lee=Ka("keyDown"),cee=Ka("focus"),sM=B0();sM.startListening({actionCreator:lee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=zR(i,tg(n),J0(n),ny(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=zl(n);if(a==="Enter"){var u=F1(n,"axis","hover",String(i.index));e.dispatch(uN({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=HNe(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,v=o+g*h;if(!(c==null||v>=c.length||v<0)){var b=F1(n,"axis","hover",String(v));e.dispatch(uN({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});sM.startListening({actionCreator:cee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=F1(n,"axis","hover",String(a));e.dispatch(uN({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var ja=Ka("externalEvent"),uee=B0(),MC=new Map;uee.startListening({actionCreator:ja,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=MC.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:UDe(o),activeDataKey:UR(o),activeIndex:Hd(o),activeLabel:aJ(o),activeTooltipIndex:Hd(o),isTooltipActive:$De(o)};n(c,r)}finally{MC.delete(i)}});MC.set(i,s)}}});var sLe=ye([Jp],t=>t.tooltipItemPayloads),oLe=ye([sLe,ty,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),dee=Ka("touchMove"),fee=B0();fee.startListening({actionCreator:dee,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=jR(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=iM(r,aM({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(WZ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(jX),h=(o=u.getAttribute(zX))!==null&&o!==void 0?o:void 0,g=eg(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:v}=g,b=oLe(r,f,h);e.dispatch(HZ({activeDataKey:v,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var lLe=iX({brush:tje,cartesianAxis:qMe,chartData:FOe,errorBars:hze,graphicalItems:iMe,layout:CTe,legend:RAe,options:jOe,polarAxis:vRe,polarOptions:aLe,referenceElements:fje,rootProps:nLe,tooltip:rDe,zIndex:EOe}),cLe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return JEe({reducer:lLe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([iee.middleware,aee.middleware,sM.middleware,uee.middleware,fee.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(bX({type:"raf"}))},devTools:{serialize:{replacer:tLe},name:"recharts-".concat(n)}})};function hee(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=_i(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=cLe(e,r));var s=T2;return A.createElement(Lze,{context:s,store:a.current},n)}function uLe(t){var{layout:e,margin:n}=t,r=pn(),i=_i();return A.useEffect(()=>{i||(r(TTe(e)),r(ETe(n)))},[r,i,e,n]),null}var pee=A.memo(uLe,rM);function gee(t){var e=pn();return A.useEffect(()=>{e(rLe(t))},[e,t]),null}function o$(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=pn();return A.useLayoutEffect(()=>(r.current&&i(_Oe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(SOe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function l$(t){var{children:e,isPanorama:n}=t,r=qe(fOe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(o$,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(o$,{key:s,zIndex:s,isPanorama:n})))}var dLe=["children"];function fLe(t,e){if(t==null)return{};var n,r,i=hLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Y1(){return Y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y1.apply(null,arguments)}var pLe={width:"100%",height:"100%",display:"block"},gLe=A.forwardRef((t,e)=>{var n=$X(),r=qX(),i=tQ();if(!_o(n)||!_o(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(_Y,Y1({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:pLe,ref:e}),a)}),mLe=t=>{var{children:e}=t,n=qe(gS);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(_Y,{width:r,height:i,x:s,y:a},e)},c$=A.forwardRef((t,e)=>{var{children:n}=t,r=fLe(t,dLe),i=_i();return i?A.createElement(mLe,null,A.createElement(l$,{isPanorama:!0},n)):A.createElement(gLe,Y1({ref:e},r),A.createElement(l$,{isPanorama:!1},n))});function vLe(){var t=pn(),[e,n]=A.useState(null),r=qe(HTe);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;an(a)&&a!==r&&t(kTe(a))}},[e,t,r]),n}function u$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yLe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(n),!0).forEach(function(r){bLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bLe(t,e,n){return(e=xLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xLe(t){var e=wLe(t,"string");return typeof e=="symbol"?e:e+""}function wLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wd.apply(null,arguments)}var _Le=()=>(XOe(),null);function X1(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var SLe=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:X1((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:X1((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((u,f)=>{s(h=>{var g=Math.round(u),v=Math.round(f);return h.containerWidth===g&&h.containerHeight===v?h:{containerWidth:g,containerHeight:v}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var{width:x,height:w}=b[0].contentRect;o(x,w)},v=new ResizeObserver(g);v.observe(u),i.current=v}},[e,o]);return A.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(vS,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",Wd({ref:c},t)))}),ELe=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:X1(n),containerHeight:X1(r)}),s=A.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(vS,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Wd({ref:o},t)))}),TLe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(vS,{width:n,height:r}),A.createElement("div",Wd({ref:e},t)))}),ALe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return _l(n)||_l(r)?A.createElement(ELe,Wd({},t,{ref:e})):A.createElement(TLe,Wd({},t,{ref:e}))});function kLe(t){return t===!0?SLe:ALe}var CLe=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:v,onTouchMove:b,onTouchStart:x,style:w,width:S,responsive:T,dispatchTouchEvents:I=!0}=t,O=A.useRef(null),D=pn(),[N,C]=A.useState(null),[P,R]=A.useState(null),j=vLe(),L=O2(),B=L?.width>0?L.width:S,z=L?.height>0?L.height:i,W=A.useCallback(ae=>{j(ae),typeof e=="function"&&e(ae),C(ae),R(ae),ae!=null&&(O.current=ae)},[j,e,C,R]),Z=A.useCallback(ae=>{D(ree(ae)),D(ja({handler:a,reactEvent:ae}))},[D,a]),G=A.useCallback(ae=>{D(bN(ae)),D(ja({handler:u,reactEvent:ae}))},[D,u]),Y=A.useCallback(ae=>{D(KZ()),D(ja({handler:f,reactEvent:ae}))},[D,f]),Q=A.useCallback(ae=>{D(bN(ae)),D(ja({handler:h,reactEvent:ae}))},[D,h]),J=A.useCallback(()=>{D(cee())},[D]),te=A.useCallback(ae=>{D(lee(ae.key))},[D]),U=A.useCallback(ae=>{D(ja({handler:s,reactEvent:ae}))},[D,s]),X=A.useCallback(ae=>{D(ja({handler:o,reactEvent:ae}))},[D,o]),re=A.useCallback(ae=>{D(ja({handler:c,reactEvent:ae}))},[D,c]),K=A.useCallback(ae=>{D(ja({handler:g,reactEvent:ae}))},[D,g]),ue=A.useCallback(ae=>{D(ja({handler:x,reactEvent:ae}))},[D,x]),ne=A.useCallback(ae=>{I&&D(dee(ae)),D(ja({handler:b,reactEvent:ae}))},[D,I,b]),oe=A.useCallback(ae=>{D(ja({handler:v,reactEvent:ae}))},[D,v]),_e=kLe(T);return A.createElement(fJ.Provider,{value:N},A.createElement(N_e.Provider,{value:P},A.createElement(_e,{width:B??w?.width,height:z??w?.height,className:Wt("recharts-wrapper",r),style:yLe({position:"relative",cursor:"default",width:B,height:z},w),onClick:Z,onContextMenu:U,onDoubleClick:X,onFocus:J,onKeyDown:te,onMouseDown:re,onMouseEnter:G,onMouseLeave:Y,onMouseMove:Q,onMouseUp:K,onTouchEnd:oe,onTouchMove:ne,onTouchStart:ue,ref:W},A.createElement(_Le,null),n)))}),ILe=["width","height","responsive","children","className","style","compact","title","desc"];function PLe(t,e){if(t==null)return{};var n,r,i=NLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function NLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var mee=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=PLe(t,ILe),g=ks(h);return c?A.createElement(A.Fragment,null,A.createElement(vS,{width:n,height:r}),A.createElement(c$,{otherAttributes:g,title:u,desc:f},a)):A.createElement(CLe,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(c$,{otherAttributes:g,title:u,desc:f,ref:e},A.createElement(hje,null,a)))});function xN(){return xN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xN.apply(null,arguments)}var DLe={top:5,right:5,bottom:5,left:5},OLe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:DLe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},RLe=A.forwardRef(function(e,n){var r,i=Yr(e.categoricalChartProps,OLe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(hee,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},A.createElement(qJ,{chartData:u.data}),A.createElement(pee,{layout:i.layout,margin:i.margin}),A.createElement(gee,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(mee,xN({},i,{ref:n})))}),MLe=["axis","item"],oM=A.forwardRef((t,e)=>A.createElement(RLe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:MLe,tooltipPayloadSearcher:hJ,categoricalChartProps:t,ref:e}));function jLe(t){var e=pn();return A.useEffect(()=>{e(iLe(t))},[e,t]),null}var zLe=["layout"];function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wN.apply(null,arguments)}function LLe(t,e){if(t==null)return{};var n,r,i=VLe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VLe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BLe={top:5,right:5,bottom:5,left:5},vee={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:BLe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},FLe=A.forwardRef(function(e,n){var r,i=Yr(e.categoricalChartProps,vee),{layout:a}=i,s=LLe(i,zLe),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(hee,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(qJ,{chartData:i.data}),A.createElement(pee,{layout:a,margin:i.margin}),A.createElement(gee,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(jLe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(mee,wN({},s,{ref:n})))});function d$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d$(Object(n),!0).forEach(function(r){ULe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ULe(t,e,n){return(e=$Le(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Le(t){var e=qLe(t,"string");return typeof e=="symbol"?e:e+""}function qLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GLe=["item"],HLe=f$(f$({},vee),{},{layout:"centric",startAngle:0,endAngle:360}),KLe=A.forwardRef((t,e)=>{var n=Yr(t,HLe);return A.createElement(FLe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:GLe,tooltipPayloadSearcher:hJ,categoricalChartProps:n,ref:e})});const h$=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],p$=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function yee(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const WLe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Cx(t){const e=parseInt(t.split("-")[1],10);return WLe[e-1]||t}function YLe(t){const e={};return t.forEach((n,r)=>{e[n.id]=h$[r%h$.length]}),e.uncategorized="#9CA3AF",e}function XLe(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=p$[i%p$.length]}),e}function QLe(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=yt(),s=A.useMemo(()=>yee(t,a),[t,a]),o=A.useMemo(()=>{const x={};return n.forEach(w=>{x[w.id]=w.categoryId||"uncategorized"}),x},[n]),c=A.useMemo(()=>YLe(r),[r]),u=A.useMemo(()=>{const x={};return r.forEach(w=>{x[w.id]=w.name}),x.uncategorized="Uncategorized",x},[r]),f=A.useMemo(()=>{const x=new Set(s);return e.filter(w=>w.type==="Expense"&&w.month&&x.has(w.month))},[e,s]),h=A.useMemo(()=>{const x={};f.forEach(T=>{const I=o[T.envelopeId]||"uncategorized";x[I]=(x[I]||0)+Math.abs(T.amount)});const w=Object.entries(x).map(([T,I])=>({categoryId:T,categoryName:u[T]||"Uncategorized",color:c[T]||"#9CA3AF",amount:Math.round(I*100)/100})).sort((T,I)=>I.amount-T.amount),S=w.reduce((T,I)=>T+I.amount,0);return{items:w,total:Math.round(S*100)/100}},[f,o,u,c]),g=A.useMemo(()=>{const x=new Set,w={};s.forEach(N=>{w[N]={}}),f.forEach(N=>{const C=o[N.envelopeId]||"uncategorized",P=N.month;w[P]&&(w[P][C]=(w[P][C]||0)+Math.abs(N.amount),x.add(C))});const S=[...x],T={};S.forEach(N=>{T[N]=c[N]||"#9CA3AF"});const I=s.map(N=>{const C={month:N,monthLabel:Cx(N)};return S.forEach(P=>{C[P]=Math.round((w[N][P]||0)*100)/100}),C}),O=I.map(N=>S.reduce((C,P)=>C+(N[P]||0),0)),D=O.length>0?Math.round(O.reduce((N,C)=>N+C,0)/O.length):0;return{data:I,categoryKeys:S,colorMap:T,average:D}},[s,f,o,c]),v=A.useMemo(()=>{const x=[],w={};s.forEach(N=>{w[N]={}}),s.forEach(N=>{(i[N]||[]).forEach(P=>{x.push(P.name),w[N][P.name]=(w[N][P.name]||0)+P.amount})});const S=[...new Set(x)],T=XLe(S),I=s.map(N=>{const C={month:N,monthLabel:Cx(N)};return S.forEach(P=>{C[P]=Math.round((w[N][P]||0)*100)/100}),C}),O=I.map(N=>S.reduce((C,P)=>C+(N[P]||0),0)),D=O.length>0?Math.round(O.reduce((N,C)=>N+C,0)/O.length):0;return{data:I,sourceKeys:S,colorMap:T,average:D}},[s,i]),b=A.useMemo(()=>({data:s.map(w=>{const T=(i[w]||[]).reduce((P,R)=>P+R.amount,0),O=f.filter(P=>P.month===w).reduce((P,R)=>P+Math.abs(R.amount),0),D=Math.max(0,T-O);if(T<=0)return{month:w,monthLabel:Cx(w),savingsPercent:0,spendingPercent:100};const N=Math.min(100,Math.round(D/T*1e3)/10),C=Math.round((100-N)*10)/10;return{month:w,monthLabel:Cx(w),savingsPercent:N,spendingPercent:C}})}),[s,i,f]);return{months:s,spendingTotals:h,spendingBreakdown:g,monthlyIncome:v,savingsData:b,categoryNameMap:u,categoryColorMap:c}}const ZLe=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],JLe=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function e3e(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const lM=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),Q1=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),bee=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),m.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),m.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:Q1(a.value)})]},s)),m.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[m.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),m.jsx("span",{className:"text-zinc-900 dark:text-white",children:Q1(i)})]})]})},t3e=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),m.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),m.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},n3e=()=>{const t=Qa(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a}=yt(),s=yt(b=>b.fetchMonthData),o=A.useMemo(()=>e3e(),[]),c=A.useRef(new Set);A.useEffect(()=>{const b=yee(r,a),x=yt.getState(),w=b.filter(T=>{if(c.current.has(T)||x.areAllTransactionsLoaded)return!1;const I=x.incomeSources[T]!==void 0,O=x.loadedTransactionMonths.includes(T);return!I||!O});if(w.length===0)return;w.forEach(T=>c.current.add(T)),(async()=>{for(const T of w)try{await s(T)}catch(I){console.error(`Failed to fetch data for month ${T}:`,I),c.current.delete(T)}})()},[r,a,s]);const{spendingTotals:u,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:v}=QLe(r);return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[m.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:m.jsx(gl,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),m.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Analytics"})]}),m.jsx("div",{className:"px-4 pb-2",children:m.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:ZLe.map(({key:b,label:x})=>m.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),m.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:m.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[JLe.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),o.map(({value:b,label:x})=>m.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),m.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&m.jsx(r3e,{items:u.items,total:u.total}),e==="breakdown"&&m.jsx(i3e,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:v,average:f.average}),e==="income"&&m.jsx(a3e,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&m.jsx(s3e,{data:g.data})]})]})},r3e=({items:t,total:e})=>t.length===0?m.jsx(YS,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:m.jsxs("div",{className:"relative no-select-chart",children:[m.jsx(mS,{width:"100%",height:280,children:m.jsxs(KLe,{children:[m.jsx(BJ,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,children:t.map((n,r)=>m.jsx(iy,{fill:n.color},r))}),m.jsx(BS,{content:({active:n,payload:r})=>{if(!n||!r?.length)return null;const i=r[0].payload,a=e>0?(i.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:i.color}}),m.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName})]}),m.jsxs("div",{className:"text-zinc-600 dark:text-zinc-300",children:[Q1(i.amount)," (",a,"%)"]})]})},contentStyle:{backgroundColor:"transparent",border:"none",padding:0,borderRadius:0,boxShadow:"none"}})]})}),m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-10",children:[m.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),m.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:lM(e)})]})]})}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=e>0?(n.amount/e*100).toFixed(1):"0";return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2.5",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),m.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:n.categoryName})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[r,"%"]}),m.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:Q1(n.amount)})]})]},n.categoryId)})})]})]}),i3e=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?m.jsx(YS,{message:"No spending data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),m.jsx(mS,{width:"100%",height:300,children:m.jsxs(oM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(HS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(KS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(WS,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(BS,{cursor:!1,content:a=>m.jsx(bee,{...a,colorMap:n,nameMap:r})}),m.jsx(eM,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${lM(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(e0,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(xee,{keys:e,colorMap:n,nameMap:r})]}),a3e=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?m.jsx(YS,{message:"No income data for this time period."}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),m.jsx(mS,{width:"100%",height:300,children:m.jsxs(oM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(HS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(KS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(WS,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(BS,{cursor:!1,content:a=>m.jsx(bee,{...a,colorMap:n,nameMap:i})}),m.jsx(eM,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${lM(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>m.jsx(e0,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),m.jsx(xee,{keys:e,colorMap:n,nameMap:i})]})},s3e=({data:t})=>{if(t.length===0)return m.jsx(YS,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),m.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),m.jsx(mS,{width:"100%",height:300,children:m.jsxs(oM,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[m.jsx(HS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),m.jsx(KS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(WS,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),m.jsx(BS,{content:t3e}),m.jsx(e0,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),m.jsx(e0,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),m.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),m.jsx("div",{className:"space-y-2",children:t.map(n=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),m.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),m.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},xee=({keys:t,colorMap:e,nameMap:n})=>m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),m.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),m.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),YS=({message:t})=>m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[m.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:m.jsx(gw,{className:"w-8 h-8 text-zinc-400"})}),m.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),Wo=({children:t})=>m.jsx(Rt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),o3e=()=>{const t=Ps();return m.jsx(Wr,{mode:"wait",children:m.jsxs(poe,{location:t,children:[m.jsx(Js,{path:"/",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(L1e,{})})})}),m.jsx(Js,{path:"/envelope/:id",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(q1e,{})})})}),m.jsx(Js,{path:"/add-envelope",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(W1e,{})})})}),m.jsx(Js,{path:"/add-transaction",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(yY,{})})})}),m.jsx(Js,{path:"/transactions",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(w_e,{})})})}),m.jsx(Js,{path:"/settings",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(H1e,{})})})}),m.jsx(Js,{path:"/settings/categories",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(K1e,{})})})}),m.jsx(Js,{path:"/verify-email",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(k7,{})})})}),m.jsx(Js,{path:"/analytics",element:m.jsx(Wo,{children:m.jsx(ta,{children:m.jsx(n3e,{})})})})]},t.pathname)})},l3e=()=>{const t=Qa(),{envelopes:e,appSettings:n}=yt(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if($.log(" Siri: Handler checking - siriToken:",i,"envelopes count:",e.length),!i||e.length===0){$.log(" Siri: Handler not ready - missing token or envelopes");return}const a=_t(et,"siriQueries",i);$.log(" Siri: Setting up Firestore listener for token:",i);const s=Yc(a,async o=>{if($.log(" Siri: Firestore snapshot received, exists:",o.exists()),!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await sa(a)}catch(f){$.error("Failed to cleanup stale Siri query",f)}return}$.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await sa(a);const f=await _P(c.query,e);$.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){$.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{$.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null};let Ph=[],g$=!1;const jC=(t,e)=>{Ph=[{timestamp:new Date().toLocaleTimeString(),message:t,type:e},...Ph].slice(0,100)};if(!g$&&typeof window<"u"){g$=!0;const t=console.log,e=console.warn,n=console.error,r=i=>i.map(a=>{if(typeof a=="object"&&a!==null)try{return JSON.stringify(a,null,2)}catch{return String(a)}return String(a)}).join(" ");console.log=(...i)=>{t(...i),jC(r(i),"log")},console.warn=(...i)=>{e(...i),jC(r(i),"warn")},console.error=(...i)=>{n(...i),jC(r(i),"error")}}const c3e=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState([]);A.useEffect(()=>{r([...Ph])},[t]),A.useEffect(()=>{t&&(console.log(" Debug Console: Opened and ready to capture logs"),console.warn(" Debug Console: Test warning message"),console.error(" Debug Console: Test error message"))},[t]);const i=()=>{Ph=[],r([])};return t?m.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm",onClick:()=>e(!1),children:m.jsxs("div",{className:"h-full flex flex-col",onClick:a=>a.stopPropagation(),children:[" ",m.jsx("div",{className:"bg-gray-900 text-white p-4 flex items-center",children:m.jsx("h3",{className:"text-lg font-semibold",children:"Debug Console"})}),m.jsx("div",{className:"flex-1 overflow-y-auto p-2 pb-20",children:n.length===0?m.jsx("div",{className:"text-gray-400 text-center mt-8",children:"No logs yet"}):m.jsx("div",{className:"space-y-1",children:n.map((a,s)=>m.jsxs("div",{className:`text-xs font-mono p-2 rounded ${a.type==="error"?"bg-red-900/50 text-red-200":a.type==="warn"?"bg-yellow-900/50 text-yellow-200":"bg-gray-800 text-gray-200"}`,children:[m.jsx("div",{className:"opacity-60",children:a.timestamp}),m.jsx("div",{className:"break-words",children:a.message})]},s))})}),m.jsxs("div",{className:"bg-gray-900 border-t border-gray-700 p-4 flex gap-2",children:[m.jsx("button",{onClick:()=>{console.log(" Manual test log - this should appear in debug console"),console.warn(" Manual test warning"),r([...Ph])},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded text-sm",children:"Test Log"}),m.jsx("button",{onClick:()=>r([...Ph]),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded text-sm",children:"Refresh"}),m.jsx("button",{onClick:i,className:"flex-1 bg-gray-700 text-white px-4 py-2 rounded text-sm",children:"Clear"}),m.jsx("button",{onClick:()=>e(!1),className:"flex-1 bg-red-600 text-white px-4 py-2 rounded text-sm",children:"Close"})]})]})}):m.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-20 right-4 z-[9999] bg-blue-500 text-white p-2 rounded-full shadow-lg border-2 border-white",style:{width:"48px",height:"48px"},title:"Debug Console",children:m.jsx(sle,{className:"w-6 h-6"})})},_N=[{id:"income",targetId:"tutorial-income-section",title:"Add Your Income",description:"Tap the + button to add your first income source (e.g., Salary, Freelance).",icon:Sm,color:"green",encouragement:"Great start! Every budget begins with income."},{id:"envelope",targetId:"tutorial-add-envelope",title:"Create a Spending Envelope",description:"Tap the + on any category to create your first spending envelope.",icon:Hh,color:"purple",encouragement:"Nice! Envelopes help you track where money goes."},{id:"allocate",targetId:"tutorial-allocation-area",title:"Assign Money to Envelopes",description:"Tap the budget amount on an envelope and enter how much to allocate.",icon:od,color:"blue",encouragement:"Almost there! Give every dollar a job."},{id:"piggybank",targetId:"tutorial-add-envelope",title:"Create a Piggybank",description:'Create a savings goal envelope. Toggle "Piggybank" when adding a new envelope.',icon:Qd,color:"pink",encouragement:"You did it! Your budget is set up!"}],Ix=_N.length,m$={green:{bg:"bg-green-50 dark:bg-green-900/30",border:"border-green-300 dark:border-green-700",text:"text-green-700 dark:text-green-300",ring:"ring-green-400",progressBg:"bg-green-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/30",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",ring:"ring-purple-400",progressBg:"bg-purple-500"},blue:{bg:"bg-blue-50 dark:bg-blue-900/30",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",ring:"ring-blue-400",progressBg:"bg-blue-500"},pink:{bg:"bg-pink-50 dark:bg-pink-900/30",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",ring:"ring-pink-400",progressBg:"bg-pink-500"}};function u3e(){const[t,e]=A.useState(!1);return A.useEffect(()=>{const n=()=>{const i=document.querySelectorAll(".fixed.inset-0.z-50");e(i.length>0)};n();const r=new MutationObserver(n);return r.observe(document.body,{childList:!0,subtree:!0}),()=>r.disconnect()},[]),t}const d3e=({targetRect:t,visible:e})=>{if(!e||!t)return null;const n=8,r=16,i=t.left-n,a=t.top-n,s=t.width+n*2,o=t.height+n*2;return m.jsxs("div",{className:"fixed inset-0 z-[48] pointer-events-none",children:[m.jsxs("svg",{className:"w-full h-full pointer-events-none",children:[m.jsx("defs",{children:m.jsxs("mask",{id:"spotlight-mask",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"white"}),m.jsx("rect",{x:i,y:a,width:s,height:o,rx:r,ry:r,fill:"black"})]})}),m.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#spotlight-mask)"})]}),m.jsx("div",{className:"absolute left-0 right-0 top-0 pointer-events-auto",style:{height:Math.max(0,a)}}),m.jsx("div",{className:"absolute left-0 right-0 bottom-0 pointer-events-auto",style:{top:a+o}}),m.jsx("div",{className:"absolute left-0 pointer-events-auto",style:{top:a,height:o,width:Math.max(0,i)}}),m.jsx("div",{className:"absolute right-0 pointer-events-auto",style:{top:a,height:o,left:i+s}}),m.jsx(Rt.div,{className:"absolute border-2 border-white/60 rounded-2xl pointer-events-none",style:{left:i,top:a,width:s,height:o},animate:{boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 8px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0.4)"]},transition:{duration:2,repeat:1/0}})]})},f3e=()=>{const t=yt(P=>P.guidedTutorialStep),e=yt(P=>P.skipGuidedTutorial),n=yt(P=>P.advanceGuidedTutorial),r=yt(P=>P.incomeSources),i=yt(P=>P.currentMonth),a=yt(P=>P.envelopes),s=yt(P=>P.allocations),o=A.useMemo(()=>a.filter(P=>P.isPiggybank),[a]),c=u3e(),[u,f]=A.useState(null),[h,g]=A.useState(!1),[v,b]=A.useState(!1),x=A.useRef(null),w=t,S=w!==null&&w>=0&&w<Ix,T=S?_N[w]:null,I=!c&&!h&&!v,O=A.useCallback(()=>{if(!T){f(null);return}const P=document.getElementById(T.targetId);f(P?P.getBoundingClientRect():null)},[T]);if(A.useEffect(()=>{O();const P=setInterval(O,500);return window.addEventListener("resize",O),window.addEventListener("scroll",O,!0),()=>{clearInterval(P),window.removeEventListener("resize",O),window.removeEventListener("scroll",O,!0)}},[O]),A.useEffect(()=>{if(w===null)return;if((()=>{switch(w){case 0:return(r[i]||[]).length>0;case 1:return a.filter(R=>!R.isPiggybank).length>0;case 2:return(s[i]||[]).filter(R=>R.budgetedAmount>0).length>0;case 3:return o.length>0;default:return!1}})())return b(!0),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{b(!1),n(),x.current=null},1500),()=>{x.current&&(clearTimeout(x.current),x.current=null)}},[w,r,i,a,s,o,n]),!S||!T)return null;const D=m$[T.color]||m$.blue,N=T.icon,C=(w+1)/Ix*100;return m.jsxs(m.Fragment,{children:[I&&m.jsx(d3e,{targetRect:u,visible:!0}),m.jsxs(Wr,{mode:"wait",children:[!v&&!h&&!c&&m.jsx(Rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"fixed left-4 right-4 z-[49] max-w-md mx-auto pointer-events-auto",style:u?{bottom:u.top>window.innerHeight/2?window.innerHeight-u.top+20:void 0,top:u.top<=window.innerHeight/2?u.bottom+20:void 0}:{bottom:24},children:m.jsxs("div",{className:`${D.bg} border ${D.border} rounded-2xl p-4 shadow-2xl`,children:[m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[m.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-zinc-400",children:"Setup Progress"}),m.jsxs("span",{className:"text-xs font-bold text-gray-700 dark:text-zinc-300",children:[Math.round(C),"%"]})]}),m.jsx("div",{className:"w-full h-2.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:m.jsx(Rt.div,{className:`h-full rounded-full ${D.progressBg}`,initial:{width:`${w/Ix*100}%`},animate:{width:`${C}%`},transition:{duration:.5,ease:"easeOut"}})}),m.jsx("div",{className:"flex justify-between mt-1",children:_N.map((P,R)=>m.jsx("div",{className:"flex flex-col items-center",children:m.jsx("div",{className:`w-2 h-2 rounded-full mt-1 ${R<w?"bg-green-500":R===w?D.progressBg:"bg-gray-300 dark:bg-zinc-600"}`})},P.id))})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:`${D.bg} p-2 rounded-xl border ${D.border} flex-shrink-0`,children:m.jsx(N,{className:`w-6 h-6 ${D.text}`})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white text-sm mb-1",children:["Step ",w+1,": ",T.title]}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-zinc-400 leading-relaxed",children:T.description})]})]}),m.jsx("div",{className:"mt-3 flex justify-end",children:m.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 text-xs text-gray-400 dark:text-zinc-500 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors px-2 py-1 rounded-lg hover:bg-white/50 dark:hover:bg-zinc-800/50",children:[m.jsx(U8,{size:12}),"Skip Tutorial"]})})]})},`step-${w}`),v&&m.jsx(Rt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-[49] flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-2xl border border-green-200 dark:border-green-800 text-center max-w-xs",children:[m.jsx(Rt.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{duration:.5},children:m.jsx(eo,{className:"w-12 h-12 text-green-500 mx-auto mb-2"})}),m.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg mb-1",children:w<Ix-1?"Step Complete!":"All Done!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:T.encouragement})]})},"celebration")]}),m.jsx(Wr,{children:h&&m.jsx(Rt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs(Rt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl border border-gray-200 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Skip Tutorial?"}),m.jsxs("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-1",children:["You're ",m.jsxs("strong",{children:[Math.round(C),"%"]})," through the setup!"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-4",children:"You can always restart from Settings if you change your mind."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-2.5 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Keep Going"}),m.jsx("button",{onClick:()=>{g(!1),e()},className:"flex-1 py-2.5 px-4 bg-gray-800 dark:bg-zinc-700 text-white rounded-xl font-medium hover:bg-gray-900 dark:hover:bg-zinc-600 transition-colors",children:"Skip"})]})]})})})]})};function h3e(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=yt(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:v}=nn(),{showToast:b}=uu();if(A.useEffect(()=>{const S=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(S)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const T=new URLSearchParams(window.location.search),I=T.get("mode"),O=T.get("oobCode");if(I==="resetPassword"&&O){$.log(" Processing password reset from URL"),a(O);return}if(I==="verifyEmail"&&O){$.log(" Processing email verification from URL");try{await Qie(fi,O),$.log(" Email verification successful");const D=window.location.pathname;if(window.history.replaceState({},document.title,D),fi.currentUser){await fi.currentUser.reload(),$.log(" User reloaded after verification");const N=await Uh(()=>Promise.resolve().then(()=>cY),void 0).then(C=>C.useBudgetStore.getState());$.log(" Triggering onboarding check after email verification..."),await N.checkAndStartOnboarding()}b("Email verified successfully! You can now sign in.","success"),setTimeout(async()=>{await fi.signOut()},2e3)}catch(D){$.error(" Email verification failed:",D),b("Email verification failed. The link may be expired or invalid.","error")}}})()},[]),A.useEffect(()=>{const S=document.documentElement,T=window.matchMedia("(prefers-color-scheme: dark)"),I=()=>{const O=s?.theme??"system",D=T.matches;O==="dark"||O==="system"&&D?S.classList.add("dark"):S.classList.remove("dark")};if(I(),s?.theme==="system")return T.addEventListener("change",I),()=>T.removeEventListener("change",I)},[s]),A.useEffect(()=>{const S=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":S.style.fontSize="75%";break;case"small":S.style.fontSize="87.5%";break;case"large":S.style.fontSize="112.5%";break;case"extra-large":S.style.fontSize="125%";break;default:S.style.fontSize="100%"}},[s?.fontSize]),t||!u)return m.jsxs(m.Fragment,{children:[m.jsx(C7,{message:"Initializing Personal Budget..."}),m.jsx(um,{})]});if(i)return m.jsxs(ta,{children:[m.jsx(Zhe,{oobCode:i,onSuccess:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)},onCancel:()=>{a(null);const S=window.location.pathname;window.history.replaceState({},document.title,S)}}),m.jsx(um,{})]});if(!c)return v?m.jsxs(ta,{children:[m.jsx(k7,{}),m.jsx(um,{})]}):m.jsxs(ta,{children:[m.jsx(Qhe,{}),m.jsx(um,{})]});const w=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:m.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:m.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),m.jsxs(ta,{children:[w&&m.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),m.jsxs(Voe,{children:[m.jsx(l3e,{}),m.jsx(o3e,{}),n&&m.jsxs("div",{className:"fixed inset-0 z-[60]",children:[m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),m.jsx("div",{className:"absolute inset-0",children:m.jsx(yY,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),m.jsx(f3e,{}),!o&&m.jsx(j0e,{onAddTransaction:()=>r(!0)})]}),m.jsx(um,{}),m.jsx(c3e,{})]})]})}une({onNeedRefresh(){},onOfflineReady(){$.log("App is ready for offline work")}});one.createRoot(document.getElementById("root")).render(m.jsx(A.StrictMode,{children:m.jsx(h3e,{})}));export{pt as T,et as a,che as b,r5 as c,_t as d,Gr as e,na as f,yA as g,sa as h,$ as l,Yc as o,Mi as q,ia as s,Yu as t,no as u,Kx as w};
