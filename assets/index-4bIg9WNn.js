function Bte(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function jl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KT={exports:{}},em={};var w3;function Fte(){if(w3)return em;w3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return em.Fragment=e,em.jsx=n,em.jsxs=n,em}var _3;function Ute(){return _3||(_3=1,KT.exports=Fte()),KT.exports}var y=Ute(),WT={exports:{}},dt={};var S3;function $te(){if(S3)return dt;S3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function m(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(U,X,H){this.props=U,this.context=X,this.refs=w,this.updater=H||b}S.prototype.isReactComponent={},S.prototype.setState=function(U,X){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,X,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=S.prototype;function I(U,X,H){this.props=U,this.context=X,this.refs=w,this.updater=H||b}var N=I.prototype=new T;N.constructor=I,x(N,S.prototype),N.isPureReactComponent=!0;var O=Array.isArray;function D(){}var k={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function R(U,X,H){var Z=H.ref;return{$$typeof:t,type:U,key:X,ref:Z!==void 0?Z:null,props:H}}function j(U,X){return R(U.type,X,U.props)}function z(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function B(U){var X={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(H){return X[H]})}var L=/\/+/g;function K(U,X){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):X.toString(36)}function Q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(D,D):(U.status="pending",U.then(function(X){U.status==="pending"&&(U.status="fulfilled",U.value=X)},function(X){U.status==="pending"&&(U.status="rejected",U.reason=X)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function q(U,X,H,Z,le){var de=typeof U;(de==="undefined"||de==="boolean")&&(U=null);var ce=!1;if(U===null)ce=!0;else switch(de){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(U.$$typeof){case t:case e:ce=!0;break;case f:return ce=U._init,q(ce(U._payload),X,H,Z,le)}}if(ce)return le=le(U),ce=Z===""?"."+K(U,0):Z,O(le)?(H="",ce!=null&&(H=ce.replace(L,"$&/")+"/"),q(le,X,H,"",function(Se){return Se})):le!=null&&(z(le)&&(le=j(le,H+(le.key==null||U&&U.key===le.key?"":(""+le.key).replace(L,"$&/")+"/")+ce)),X.push(le)),1;ce=0;var he=Z===""?".":Z+":";if(O(U))for(var ee=0;ee<U.length;ee++)Z=U[ee],de=he+K(Z,ee),ce+=q(Z,X,H,de,le);else if(ee=m(U),typeof ee=="function")for(U=ee.call(U),ee=0;!(Z=U.next()).done;)Z=Z.value,de=he+K(Z,ee++),ce+=q(Z,X,H,de,le);else if(de==="object"){if(typeof U.then=="function")return q(Q(U),X,H,Z,le);throw X=String(U),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ce}function Y(U,X,H){if(U==null)return U;var Z=[],le=0;return q(U,Z,"","",function(de){return X.call(H,de,le++)}),Z}function J(U){if(U._status===-1){var X=U._result;X=X(),X.then(function(H){(U._status===0||U._status===-1)&&(U._status=1,U._result=H)},function(H){(U._status===0||U._status===-1)&&(U._status=2,U._result=H)}),U._status===-1&&(U._status=0,U._result=X)}if(U._status===1)return U._result.default;throw U._result}var ne=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},W={map:Y,forEach:function(U,X,H){Y(U,function(){X.apply(this,arguments)},H)},count:function(U){var X=0;return Y(U,function(){X++}),X},toArray:function(U){return Y(U,function(X){return X})||[]},only:function(U){if(!z(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return dt.Activity=h,dt.Children=W,dt.Component=S,dt.Fragment=n,dt.Profiler=i,dt.PureComponent=I,dt.StrictMode=r,dt.Suspense=c,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,dt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return k.H.useMemoCache(U)}},dt.cache=function(U){return function(){return U.apply(null,arguments)}},dt.cacheSignal=function(){return null},dt.cloneElement=function(U,X,H){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Z=x({},U.props),le=U.key;if(X!=null)for(de in X.key!==void 0&&(le=""+X.key),X)!P.call(X,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&X.ref===void 0||(Z[de]=X[de]);var de=arguments.length-2;if(de===1)Z.children=H;else if(1<de){for(var ce=Array(de),he=0;he<de;he++)ce[he]=arguments[he+2];Z.children=ce}return R(U.type,le,Z)},dt.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},dt.createElement=function(U,X,H){var Z,le={},de=null;if(X!=null)for(Z in X.key!==void 0&&(de=""+X.key),X)P.call(X,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(le[Z]=X[Z]);var ce=arguments.length-2;if(ce===1)le.children=H;else if(1<ce){for(var he=Array(ce),ee=0;ee<ce;ee++)he[ee]=arguments[ee+2];le.children=he}if(U&&U.defaultProps)for(Z in ce=U.defaultProps,ce)le[Z]===void 0&&(le[Z]=ce[Z]);return R(U,de,le)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(U){return{$$typeof:o,render:U}},dt.isValidElement=z,dt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:J}},dt.memo=function(U,X){return{$$typeof:u,type:U,compare:X===void 0?null:X}},dt.startTransition=function(U){var X=k.T,H={};k.T=H;try{var Z=U(),le=k.S;le!==null&&le(H,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(D,ne)}catch(de){ne(de)}finally{X!==null&&H.types!==null&&(X.types=H.types),k.T=X}},dt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},dt.use=function(U){return k.H.use(U)},dt.useActionState=function(U,X,H){return k.H.useActionState(U,X,H)},dt.useCallback=function(U,X){return k.H.useCallback(U,X)},dt.useContext=function(U){return k.H.useContext(U)},dt.useDebugValue=function(){},dt.useDeferredValue=function(U,X){return k.H.useDeferredValue(U,X)},dt.useEffect=function(U,X){return k.H.useEffect(U,X)},dt.useEffectEvent=function(U){return k.H.useEffectEvent(U)},dt.useId=function(){return k.H.useId()},dt.useImperativeHandle=function(U,X,H){return k.H.useImperativeHandle(U,X,H)},dt.useInsertionEffect=function(U,X){return k.H.useInsertionEffect(U,X)},dt.useLayoutEffect=function(U,X){return k.H.useLayoutEffect(U,X)},dt.useMemo=function(U,X){return k.H.useMemo(U,X)},dt.useOptimistic=function(U,X){return k.H.useOptimistic(U,X)},dt.useReducer=function(U,X,H){return k.H.useReducer(U,X,H)},dt.useRef=function(U){return k.H.useRef(U)},dt.useState=function(U){return k.H.useState(U)},dt.useSyncExternalStore=function(U,X,H){return k.H.useSyncExternalStore(U,X,H)},dt.useTransition=function(){return k.H.useTransition()},dt.version="19.2.0",dt}var E3;function Ip(){return E3||(E3=1,WT.exports=$te()),WT.exports}var A=Ip();const md=jl(A),qte=Bte({__proto__:null,default:md},[A]);var YT={exports:{}},tm={},XT={exports:{}},QT={};var T3;function Gte(){return T3||(T3=1,(function(t){function e(q,Y){var J=q.length;q.push(Y);e:for(;0<J;){var ne=J-1>>>1,W=q[ne];if(0<i(W,Y))q[ne]=Y,q[J]=W,J=ne;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Y=q[0],J=q.pop();if(J!==Y){q[0]=J;e:for(var ne=0,W=q.length,U=W>>>1;ne<U;){var X=2*(ne+1)-1,H=q[X],Z=X+1,le=q[Z];if(0>i(H,J))Z<W&&0>i(le,H)?(q[ne]=le,q[Z]=J,ne=Z):(q[ne]=H,q[X]=J,ne=X);else if(Z<W&&0>i(le,J))q[ne]=le,q[Z]=J,ne=Z;else break e}}return Y}function i(q,Y){var J=q.sortIndex-Y.sortIndex;return J!==0?J:q.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,m=!1,b=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function N(q){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=q)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function O(q){if(x=!1,N(q),!b)if(n(c)!==null)b=!0,D||(D=!0,B());else{var Y=n(u);Y!==null&&Q(O,Y.startTime-q)}}var D=!1,k=-1,P=5,R=-1;function j(){return w?!0:!(t.unstable_now()-R<P)}function z(){if(w=!1,D){var q=t.unstable_now();R=q;var Y=!0;try{e:{b=!1,x&&(x=!1,T(k),k=-1),m=!0;var J=g;try{t:{for(N(q),h=n(c);h!==null&&!(h.expirationTime>q&&j());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,g=h.priorityLevel;var W=ne(h.expirationTime<=q);if(q=t.unstable_now(),typeof W=="function"){h.callback=W,N(q),Y=!0;break t}h===n(c)&&r(c),N(q)}else r(c);h=n(c)}if(h!==null)Y=!0;else{var U=n(u);U!==null&&Q(O,U.startTime-q),Y=!1}}break e}finally{h=null,g=J,m=!1}Y=void 0}}finally{Y?B():D=!1}}}var B;if(typeof I=="function")B=function(){I(z)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,K=L.port2;L.port1.onmessage=z,B=function(){K.postMessage(null)}}else B=function(){S(z,0)};function Q(q,Y){k=S(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var J=g;g=Y;try{return q()}finally{g=J}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=g;g=q;try{return Y()}finally{g=J}},t.unstable_scheduleCallback=function(q,Y,J){var ne=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=J+W,q={id:f++,callback:Y,priorityLevel:q,startTime:J,expirationTime:W,sortIndex:-1},J>ne?(q.sortIndex=J,e(u,q),n(c)===null&&q===n(u)&&(x?(T(k),k=-1):x=!0,Q(O,J-ne))):(q.sortIndex=W,e(c,q),b||m||(b=!0,D||(D=!0,B()))),q},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(q){var Y=g;return function(){var J=g;g=Y;try{return q.apply(this,arguments)}finally{g=J}}}})(QT)),QT}var A3;function Hte(){return A3||(A3=1,XT.exports=Gte()),XT.exports}var ZT={exports:{}},ei={};var C3;function Kte(){if(C3)return ei;C3=1;var t=Ip();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ei.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},ei.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},ei.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},ei.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},ei.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:m}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ei.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},ei.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ei.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},ei.requestFormReset=function(c){r.d.r(c)},ei.unstable_batchedUpdates=function(c,u){return c(u)},ei.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},ei.useFormStatus=function(){return s.H.useHostTransitionStatus()},ei.version="19.2.0",ei}var I3;function s8(){if(I3)return ZT.exports;I3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ZT.exports=Kte(),ZT.exports}var k3;function Wte(){if(k3)return tm;k3=1;var t=Hte(),e=Ip(),n=s8();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,v=d;;){var E=p.return;if(E===null)break;var C=E.alternate;if(C===null){if(v=E.return,v!==null){p=v;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===p)return c(E),l;if(C===v)return c(E),d;C=C.sibling}throw Error(r(188))}if(p.return!==v.return)p=E,v=C;else{for(var V=!1,$=E.child;$;){if($===p){V=!0,p=E,v=C;break}if($===v){V=!0,v=E,p=C;break}$=$.sibling}if(!V){for($=C.child;$;){if($===p){V=!0,p=C,v=E;break}if($===v){V=!0,v=C,p=E;break}$=$.sibling}if(!V)throw Error(r(189))}}if(p.alternate!==v)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),I=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=z&&l[z]||l["@@iterator"],typeof l=="function"?l:null)}var L=Symbol.for("react.client.reference");function K(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===L?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case D:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case I:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case N:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case k:return d=l.displayName||null,d!==null?d:K(l.type)||"Memo";case P:d=l._payload,l=l._init;try{return K(l(d))}catch{}}return null}var Q=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ne=[],W=-1;function U(l){return{current:l}}function X(l){0>W||(l.current=ne[W],ne[W]=null,W--)}function H(l,d){W++,ne[W]=l.current,l.current=d}var Z=U(null),le=U(null),de=U(null),ce=U(null);function he(l,d){switch(H(de,d),H(le,l),H(Z,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?q4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=q4(d),l=G4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}X(Z),H(Z,l)}function ee(){X(Z),X(le),X(de)}function Se(l){l.memoizedState!==null&&H(ce,l);var d=Z.current,p=G4(d,l.type);d!==p&&(H(le,l),H(Z,p))}function re(l){le.current===l&&(X(Z),X(le)),ce.current===l&&(X(ce),Xg._currentValue=J)}var oe,De;function Pe(l){if(oe===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);oe=d&&d[1]||"",De=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+l+De}var ze=!1;function je(l,d){if(!l||ze)return"";ze=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(d){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(xe){var ye=xe}Reflect.construct(l,[],Te)}else{try{Te.call()}catch(xe){ye=xe}l.call(Te.prototype)}}else{try{throw Error()}catch(xe){ye=xe}(Te=l())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(xe){if(xe&&ye&&typeof xe.stack=="string")return[xe.stack,ye.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=v.DetermineComponentFrameRoot(),V=C[0],$=C[1];if(V&&$){var te=V.split(`
`),me=$.split(`
`);for(E=v=0;v<te.length&&!te[v].includes("DetermineComponentFrameRoot");)v++;for(;E<me.length&&!me[E].includes("DetermineComponentFrameRoot");)E++;if(v===te.length||E===me.length)for(v=te.length-1,E=me.length-1;1<=v&&0<=E&&te[v]!==me[E];)E--;for(;1<=v&&0<=E;v--,E--)if(te[v]!==me[E]){if(v!==1||E!==1)do if(v--,E--,0>E||te[v]!==me[E]){var _e=`
`+te[v].replace(" at new "," at ");return l.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",l.displayName)),_e}while(1<=v&&0<=E);break}}}finally{ze=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Pe(p):""}function Ue(l,d){switch(l.tag){case 26:case 27:case 5:return Pe(l.type);case 16:return Pe("Lazy");case 13:return l.child!==d&&d!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return je(l.type,!1);case 11:return je(l.type.render,!1);case 1:return je(l.type,!0);case 31:return Pe("Activity");default:return""}}function Ie(l){try{var d="",p=null;do d+=Ue(l,p),p=l,l=l.return;while(l);return d}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Oe=Object.prototype.hasOwnProperty,Ge=t.unstable_scheduleCallback,yt=t.unstable_cancelCallback,Dt=t.unstable_shouldYield,Nt=t.unstable_requestPaint,ot=t.unstable_now,Et=t.unstable_getCurrentPriorityLevel,ft=t.unstable_ImmediatePriority,xn=t.unstable_UserBlockingPriority,Zt=t.unstable_NormalPriority,Fr=t.unstable_LowPriority,rs=t.unstable_IdlePriority,is=t.log,as=t.unstable_setDisableYieldValue,hi=null,wn=null;function _n(l){if(typeof is=="function"&&as(l),wn&&typeof wn.setStrictMode=="function")try{wn.setStrictMode(hi,l)}catch{}}var Vt=Math.clz32?Math.clz32:Hl,zs=Math.log,Gl=Math.LN2;function Hl(l){return l>>>=0,l===0?32:31-(zs(l)/Gl|0)|0}var xt=256,Pn=262144,Dn=4194304;function Ki(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function xa(l,d,p){var v=l.pendingLanes;if(v===0)return 0;var E=0,C=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var $=v&134217727;return $!==0?(v=$&~C,v!==0?E=Ki(v):(V&=$,V!==0?E=Ki(V):p||(p=$&~l,p!==0&&(E=Ki(p))))):($=v&~C,$!==0?E=Ki($):V!==0?E=Ki(V):p||(p=v&~l,p!==0&&(E=Ki(p)))),E===0?0:d!==0&&d!==E&&(d&C)===0&&(C=E&-E,p=d&-d,C>=p||C===32&&(p&4194048)!==0)?d:E}function pi(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function QS(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oy(){var l=Dn;return Dn<<=1,(Dn&62914560)===0&&(Dn=4194304),l}function Ls(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function Tu(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ZS(l,d,p,v,E,C){var V=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var $=l.entanglements,te=l.expirationTimes,me=l.hiddenUpdates;for(p=V&~p;0<p;){var _e=31-Vt(p),Te=1<<_e;$[_e]=0,te[_e]=-1;var ye=me[_e];if(ye!==null)for(me[_e]=null,_e=0;_e<ye.length;_e++){var xe=ye[_e];xe!==null&&(xe.lane&=-536870913)}p&=~Te}v!==0&&Au(l,v,0),C!==0&&E===0&&l.tag!==0&&(l.suspendedLanes|=C&~(V&~d))}function Au(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var v=31-Vt(d);l.entangledLanes|=d,l.entanglements[v]=l.entanglements[v]|1073741824|p&261930}function tg(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var v=31-Vt(p),E=1<<v;E&d|l[v]&d&&(l[v]|=d),p&=~E}}function ng(l,d){var p=d&-d;return p=(p&42)!==0?1:Cu(p),(p&(l.suspendedLanes|d))!==0?0:p}function Cu(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Mo(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ly(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:p3(l.type))}function ss(l,d){var p=Y.p;try{return Y.p=l,d()}finally{Y.p=p}}var os=Math.random().toString(36).slice(2),er="__reactFiber$"+os,Pr="__reactProps$"+os,Vs="__reactContainer$"+os,bf="__reactEvents$"+os,JS="__reactListeners$"+os,cy="__reactHandles$"+os,uy="__reactResources$"+os,Bs="__reactMarker$"+os;function xf(l){delete l[er],delete l[Pr],delete l[bf],delete l[JS],delete l[cy]}function Fs(l){var d=l[er];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Vs]||p[er]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=Z4(l);l!==null;){if(p=l[er])return p;l=Z4(l)}return d}l=p,p=l.parentNode}return null}function wa(l){if(l=l[er]||l[Vs]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Wi(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Us(l){var d=l[uy];return d||(d=l[uy]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function tr(l){l[Bs]=!0}var rg=new Set,ig={};function $s(l,d){qs(l,d),qs(l+"Capture",d)}function qs(l,d){for(ig[l]=d,l=0;l<d.length;l++)rg.add(d[l])}var ag=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sg={},og={};function dy(l){return Oe.call(og,l)?!0:Oe.call(sg,l)?!1:ag.test(l)?og[l]=!0:(sg[l]=!0,!1)}function wf(l,d,p){if(dy(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var v=d.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Yi(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function nr(l,d,p,v){if(v===null)l.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+v)}}function Dr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Kl(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function lg(l,d,p){var v=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var E=v.get,C=v.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return E.call(this)},set:function(V){p=""+V,C.call(this,V)}}),Object.defineProperty(l,d,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function(V){p=""+V},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Gt(l){if(!l._valueTracker){var d=Kl(l)?"checked":"value";l._valueTracker=lg(l,d,""+l[d])}}function Iu(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),v="";return l&&(v=Kl(l)?l.checked?"true":"false":l.value),l=v,l!==p?(d.setValue(l),!0):!1}function Gs(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var ku=/[\n"\\]/g;function Ii(l){return l.replace(ku,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function _f(l,d,p,v,E,C,V,$){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),d!=null?V==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Dr(d)):l.value!==""+Dr(d)&&(l.value=""+Dr(d)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),d!=null?cg(l,V,Dr(d)):p!=null?cg(l,V,Dr(p)):v!=null&&l.removeAttribute("value"),E==null&&C!=null&&(l.defaultChecked=!!C),E!=null&&(l.checked=E&&typeof E!="function"&&typeof E!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?l.name=""+Dr($):l.removeAttribute("name")}function fy(l,d,p,v,E,C,V,$){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(l.type=C),d!=null||p!=null){if(!(C!=="submit"&&C!=="reset"||d!=null)){Gt(l);return}p=p!=null?""+Dr(p):"",d=d!=null?""+Dr(d):p,$||d===l.value||(l.value=d),l.defaultValue=d}v=v??E,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=$?l.checked:!!v,l.defaultChecked=!!v,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Gt(l)}function cg(l,d,p){d==="number"&&Gs(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Wl(l,d,p,v){if(l=l.options,d){d={};for(var E=0;E<p.length;E++)d["$"+p[E]]=!0;for(p=0;p<l.length;p++)E=d.hasOwnProperty("$"+l[p].value),l[p].selected!==E&&(l[p].selected=E),E&&v&&(l[p].defaultSelected=!0)}else{for(p=""+Dr(p),d=null,E=0;E<l.length;E++){if(l[E].value===p){l[E].selected=!0,v&&(l[E].defaultSelected=!0);return}d!==null||l[E].disabled||(d=l[E])}d!==null&&(d.selected=!0)}}function hy(l,d,p){if(d!=null&&(d=""+Dr(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+Dr(p):""}function Yl(l,d,p,v){if(d==null){if(v!=null){if(p!=null)throw Error(r(92));if(Q(v)){if(1<v.length)throw Error(r(93));v=v[0]}p=v}p==null&&(p=""),d=p}p=Dr(d),l.defaultValue=p,v=l.textContent,v===p&&v!==""&&v!==null&&(l.value=v),Gt(l)}function ki(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var py=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ug(l,d,p){var v=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":v?l.setProperty(d,p):typeof p!="number"||p===0||py.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function dg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||d!=null&&d.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var E in d)v=d[E],d.hasOwnProperty(E)&&p[E]!==v&&ug(l,E,v)}else for(var C in d)d.hasOwnProperty(C)&&ug(l,C,d[C])}function Sf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ef(l){return Xl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ls(){}var fg=null;function _a(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ql=null,Hs=null;function Pu(l){var d=wa(l);if(d&&(l=d.stateNode)){var p=l[Pr]||null;e:switch(l=d.stateNode,d.type){case"input":if(_f(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ii(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var v=p[d];if(v!==l&&v.form===l.form){var E=v[Pr]||null;if(!E)throw Error(r(90));_f(v,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<p.length;d++)v=p[d],v.form===l.form&&Iu(v)}break e;case"textarea":hy(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Wl(l,!!p.multiple,d,!1)}}}var Tf=!1;function Zl(l,d,p){if(Tf)return l(d,p);Tf=!0;try{var v=l(d);return v}finally{if(Tf=!1,(Ql!==null||Hs!==null)&&(lb(),Ql&&(d=Ql,l=Hs,Hs=Ql=null,Pu(d),l)))for(d=0;d<l.length;d++)Pu(l[d])}}function cs(l,d){var p=l.stateNode;if(p===null)return null;var v=p[Pr]||null;if(v===null)return null;p=v[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var Sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=!1;if(Sa)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){Du=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{Du=!1}var Ks=null,hg=null,Ou=null;function pg(){if(Ou)return Ou;var l,d=hg,p=d.length,v,E="value"in Ks?Ks.value:Ks.textContent,C=E.length;for(l=0;l<p&&d[l]===E[l];l++);var V=p-l;for(v=1;v<=V&&d[p-v]===E[C-v];v++);return Ou=E.slice(l,1<v?1-v:void 0)}function Nu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function jo(){return!0}function us(){return!1}function Ur(l){function d(p,v,E,C,V){this._reactName=p,this._targetInst=E,this.type=v,this.nativeEvent=C,this.target=V,this.currentTarget=null;for(var $ in l)l.hasOwnProperty($)&&(p=l[$],this[$]=p?p(C):C[$]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?jo:us,this.isPropagationStopped=us,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),d}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Ur(zo),Jl=h({},zo,{view:0,detail:0}),gg=Ur(Jl),ec,Af,Ys,Cf=h({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ys&&(Ys&&l.type==="mousemove"?(ec=l.screenX-Ys.screenX,Af=l.screenY-Ys.screenY):Af=ec=0,Ys=l),ec)},movementY:function(l){return"movementY"in l?l.movementY:Af}}),mg=Ur(Cf),Ru=h({},Cf,{dataTransfer:0}),my=Ur(Ru),vy=h({},Jl,{relatedTarget:0}),Mu=Ur(vy),vg=h({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),yy=Ur(vg),If=h({},zo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),by=Ur(If),xy=h({},zo,{data:0}),Xs=Ur(xy),wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_y={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ey(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Sy[l])?!!d[l]:!1}function tc(){return Ey}var gi=h({},Jl,{key:function(l){if(l.key){var d=wy[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Nu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?_y[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tc,charCode:function(l){return l.type==="keypress"?Nu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Nu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Ty=Ur(gi),Ay=h({},Cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lo=Ur(Ay),_=h({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tc}),M=Ur(_),F=h({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=Ur(F),pe=h({},Cf,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Ur(pe),Me=h({},zo,{newState:0,oldState:0}),ht=Ur(Me),Hn=[9,13,27,32],Bt=Sa&&"CompositionEvent"in window,Sn=null;Sa&&"documentMode"in document&&(Sn=document.documentMode);var Ea=Sa&&"TextEvent"in window&&!Sn,Qs=Sa&&(!Bt||Sn&&8<Sn&&11>=Sn),ds=" ",fs=!1;function ju(l,d){switch(l){case"keyup":return Hn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kf(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Pf=!1;function uee(l,d){switch(l){case"compositionend":return kf(d);case"keypress":return d.which!==32?null:(fs=!0,ds);case"textInput":return l=d.data,l===ds&&fs?null:l;default:return null}}function dee(l,d){if(Pf)return l==="compositionend"||!Bt&&ju(l,d)?(l=pg(),Ou=hg=Ks=null,Pf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Qs&&d.locale!=="ko"?null:d.data;default:return null}}var fee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tM(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!fee[l.type]:d==="textarea"}function nM(l,d,p,v){Ql?Hs?Hs.push(v):Hs=[v]:Ql=v,d=gb(d,"onChange"),0<d.length&&(p=new Ws("onChange","change",null,p,v),l.push({event:p,listeners:d}))}var yg=null,bg=null;function hee(l){L4(l,0)}function Cy(l){var d=Wi(l);if(Iu(d))return l}function rM(l,d){if(l==="change")return d}var iM=!1;if(Sa){var eE;if(Sa){var tE="oninput"in document;if(!tE){var aM=document.createElement("div");aM.setAttribute("oninput","return;"),tE=typeof aM.oninput=="function"}eE=tE}else eE=!1;iM=eE&&(!document.documentMode||9<document.documentMode)}function sM(){yg&&(yg.detachEvent("onpropertychange",oM),bg=yg=null)}function oM(l){if(l.propertyName==="value"&&Cy(bg)){var d=[];nM(d,bg,l,_a(l)),Zl(hee,d)}}function pee(l,d,p){l==="focusin"?(sM(),yg=d,bg=p,yg.attachEvent("onpropertychange",oM)):l==="focusout"&&sM()}function gee(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Cy(bg)}function mee(l,d){if(l==="click")return Cy(d)}function vee(l,d){if(l==="input"||l==="change")return Cy(d)}function yee(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Xi=typeof Object.is=="function"?Object.is:yee;function xg(l,d){if(Xi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),v=Object.keys(d);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var E=p[v];if(!Oe.call(d,E)||!Xi(l[E],d[E]))return!1}return!0}function lM(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function cM(l,d){var p=lM(l);l=0;for(var v;p;){if(p.nodeType===3){if(v=l+p.textContent.length,l<=d&&v>=d)return{node:p,offset:d-l};l=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=lM(p)}}function uM(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?uM(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function dM(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Gs(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Gs(l.document)}return d}function nE(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var bee=Sa&&"documentMode"in document&&11>=document.documentMode,Df=null,rE=null,wg=null,iE=!1;function fM(l,d,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;iE||Df==null||Df!==Gs(v)||(v=Df,"selectionStart"in v&&nE(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),wg&&xg(wg,v)||(wg=v,v=gb(rE,"onSelect"),0<v.length&&(d=new Ws("onSelect","select",null,d,p),l.push({event:d,listeners:v}),d.target=Df)))}function zu(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Of={animationend:zu("Animation","AnimationEnd"),animationiteration:zu("Animation","AnimationIteration"),animationstart:zu("Animation","AnimationStart"),transitionrun:zu("Transition","TransitionRun"),transitionstart:zu("Transition","TransitionStart"),transitioncancel:zu("Transition","TransitionCancel"),transitionend:zu("Transition","TransitionEnd")},aE={},hM={};Sa&&(hM=document.createElement("div").style,"AnimationEvent"in window||(delete Of.animationend.animation,delete Of.animationiteration.animation,delete Of.animationstart.animation),"TransitionEvent"in window||delete Of.transitionend.transition);function Lu(l){if(aE[l])return aE[l];if(!Of[l])return l;var d=Of[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in hM)return aE[l]=d[p];return l}var pM=Lu("animationend"),gM=Lu("animationiteration"),mM=Lu("animationstart"),xee=Lu("transitionrun"),wee=Lu("transitionstart"),_ee=Lu("transitioncancel"),vM=Lu("transitionend"),yM=new Map,sE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sE.push("scrollEnd");function hs(l,d){yM.set(l,d),$s(d,[l])}var Iy=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ta=[],Nf=0,oE=0;function ky(){for(var l=Nf,d=oE=Nf=0;d<l;){var p=Ta[d];Ta[d++]=null;var v=Ta[d];Ta[d++]=null;var E=Ta[d];Ta[d++]=null;var C=Ta[d];if(Ta[d++]=null,v!==null&&E!==null){var V=v.pending;V===null?E.next=E:(E.next=V.next,V.next=E),v.pending=E}C!==0&&bM(p,E,C)}}function Py(l,d,p,v){Ta[Nf++]=l,Ta[Nf++]=d,Ta[Nf++]=p,Ta[Nf++]=v,oE|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function lE(l,d,p,v){return Py(l,d,p,v),Dy(l)}function Vu(l,d){return Py(l,null,null,d),Dy(l)}function bM(l,d,p){l.lanes|=p;var v=l.alternate;v!==null&&(v.lanes|=p);for(var E=!1,C=l.return;C!==null;)C.childLanes|=p,v=C.alternate,v!==null&&(v.childLanes|=p),C.tag===22&&(l=C.stateNode,l===null||l._visibility&1||(E=!0)),l=C,C=C.return;return l.tag===3?(C=l.stateNode,E&&d!==null&&(E=31-Vt(p),l=C.hiddenUpdates,v=l[E],v===null?l[E]=[d]:v.push(d),d.lane=p|536870912),C):null}function Dy(l){if(50<$g)throw $g=0,vT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Rf={};function See(l,d,p,v){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(l,d,p,v){return new See(l,d,p,v)}function cE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Vo(l,d){var p=l.alternate;return p===null?(p=Qi(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function xM(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Oy(l,d,p,v,E,C){var V=0;if(v=l,typeof l=="function")cE(l)&&(V=1);else if(typeof l=="string")V=Ite(l,p,Z.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Qi(31,p,d,E),l.elementType=R,l.lanes=C,l;case x:return Bu(p.children,E,C,d);case w:V=8,E|=24;break;case S:return l=Qi(12,p,d,E|2),l.elementType=S,l.lanes=C,l;case O:return l=Qi(13,p,d,E),l.elementType=O,l.lanes=C,l;case D:return l=Qi(19,p,d,E),l.elementType=D,l.lanes=C,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:V=10;break e;case T:V=9;break e;case N:V=11;break e;case k:V=14;break e;case P:V=16,v=null;break e}V=29,p=Error(r(130,l===null?"null":typeof l,"")),v=null}return d=Qi(V,p,d,E),d.elementType=l,d.type=v,d.lanes=C,d}function Bu(l,d,p,v){return l=Qi(7,l,v,d),l.lanes=p,l}function uE(l,d,p){return l=Qi(6,l,null,d),l.lanes=p,l}function wM(l){var d=Qi(18,null,null,0);return d.stateNode=l,d}function dE(l,d,p){return d=Qi(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var _M=new WeakMap;function Aa(l,d){if(typeof l=="object"&&l!==null){var p=_M.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Ie(d)},_M.set(l,d),d)}return{value:l,source:d,stack:Ie(d)}}var Mf=[],jf=0,Ny=null,_g=0,Ca=[],Ia=0,nc=null,Zs=1,Js="";function Bo(l,d){Mf[jf++]=_g,Mf[jf++]=Ny,Ny=l,_g=d}function SM(l,d,p){Ca[Ia++]=Zs,Ca[Ia++]=Js,Ca[Ia++]=nc,nc=l;var v=Zs;l=Js;var E=32-Vt(v)-1;v&=~(1<<E),p+=1;var C=32-Vt(d)+E;if(30<C){var V=E-E%5;C=(v&(1<<V)-1).toString(32),v>>=V,E-=V,Zs=1<<32-Vt(d)+E|p<<E|v,Js=C+l}else Zs=1<<C|p<<E|v,Js=l}function fE(l){l.return!==null&&(Bo(l,1),SM(l,1,0))}function hE(l){for(;l===Ny;)Ny=Mf[--jf],Mf[jf]=null,_g=Mf[--jf],Mf[jf]=null;for(;l===nc;)nc=Ca[--Ia],Ca[Ia]=null,Js=Ca[--Ia],Ca[Ia]=null,Zs=Ca[--Ia],Ca[Ia]=null}function EM(l,d){Ca[Ia++]=Zs,Ca[Ia++]=Js,Ca[Ia++]=nc,Zs=d.id,Js=d.overflow,nc=l}var $r=null,pn=null,kt=!1,rc=null,ka=!1,pE=Error(r(519));function ic(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sg(Aa(d,l)),pE}function TM(l){var d=l.stateNode,p=l.type,v=l.memoizedProps;switch(d[er]=l,d[Pr]=v,p){case"dialog":_t("cancel",d),_t("close",d);break;case"iframe":case"object":case"embed":_t("load",d);break;case"video":case"audio":for(p=0;p<Gg.length;p++)_t(Gg[p],d);break;case"source":_t("error",d);break;case"img":case"image":case"link":_t("error",d),_t("load",d);break;case"details":_t("toggle",d);break;case"input":_t("invalid",d),fy(d,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":_t("invalid",d);break;case"textarea":_t("invalid",d),Yl(d,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||v.suppressHydrationWarning===!0||U4(d.textContent,p)?(v.popover!=null&&(_t("beforetoggle",d),_t("toggle",d)),v.onScroll!=null&&_t("scroll",d),v.onScrollEnd!=null&&_t("scrollend",d),v.onClick!=null&&(d.onclick=ls),d=!0):d=!1,d||ic(l,!0)}function AM(l){for($r=l.return;$r;)switch($r.tag){case 5:case 31:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:$r=$r.return}}function zf(l){if(l!==$r)return!1;if(!kt)return AM(l),kt=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||OT(l.type,l.memoizedProps)),p=!p),p&&pn&&ic(l),AM(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));pn=Q4(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));pn=Q4(l)}else d===27?(d=pn,yc(l.type)?(l=zT,zT=null,pn=l):pn=d):pn=$r?Da(l.stateNode.nextSibling):null;return!0}function Fu(){pn=$r=null,kt=!1}function gE(){var l=rc;return l!==null&&(Ni===null?Ni=l:Ni.push.apply(Ni,l),rc=null),l}function Sg(l){rc===null?rc=[l]:rc.push(l)}var mE=U(null),Uu=null,Fo=null;function ac(l,d,p){H(mE,d._currentValue),d._currentValue=p}function Uo(l){l._currentValue=mE.current,X(mE)}function vE(l,d,p){for(;l!==null;){var v=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,v!==null&&(v.childLanes|=d)):v!==null&&(v.childLanes&d)!==d&&(v.childLanes|=d),l===p)break;l=l.return}}function yE(l,d,p,v){var E=l.child;for(E!==null&&(E.return=l);E!==null;){var C=E.dependencies;if(C!==null){var V=E.child;C=C.firstContext;e:for(;C!==null;){var $=C;C=E;for(var te=0;te<d.length;te++)if($.context===d[te]){C.lanes|=p,$=C.alternate,$!==null&&($.lanes|=p),vE(C.return,p,l),v||(V=null);break e}C=$.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(r(341));V.lanes|=p,C=V.alternate,C!==null&&(C.lanes|=p),vE(V,p,l),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===l){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function Lf(l,d,p,v){l=null;for(var E=d,C=!1;E!==null;){if(!C){if((E.flags&524288)!==0)C=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var $=E.type;Xi(E.pendingProps.value,V.value)||(l!==null?l.push($):l=[$])}}else if(E===ce.current){if(V=E.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(l!==null?l.push(Xg):l=[Xg])}E=E.return}l!==null&&yE(d,l,p,v),d.flags|=262144}function Ry(l){for(l=l.firstContext;l!==null;){if(!Xi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function $u(l){Uu=l,Fo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function qr(l){return CM(Uu,l)}function My(l,d){return Uu===null&&$u(l),CM(l,d)}function CM(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Fo===null){if(l===null)throw Error(r(308));Fo=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Fo=Fo.next=d;return p}var Eee=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,v){l.push(v)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},Tee=t.unstable_scheduleCallback,Aee=t.unstable_NormalPriority,rr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bE(){return{controller:new Eee,data:new Map,refCount:0}}function Eg(l){l.refCount--,l.refCount===0&&Tee(Aee,function(){l.controller.abort()})}var Tg=null,xE=0,Vf=0,Bf=null;function Cee(l,d){if(Tg===null){var p=Tg=[];xE=0,Vf=ST(),Bf={status:"pending",value:void 0,then:function(v){p.push(v)}}}return xE++,d.then(IM,IM),d}function IM(){if(--xE===0&&Tg!==null){Bf!==null&&(Bf.status="fulfilled");var l=Tg;Tg=null,Vf=0,Bf=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Iee(l,d){var p=[],v={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return l.then(function(){v.status="fulfilled",v.value=d;for(var E=0;E<p.length;E++)(0,p[E])(d)},function(E){for(v.status="rejected",v.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),v}var kM=q.S;q.S=function(l,d){f4=ot(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Cee(l,d),kM!==null&&kM(l,d)};var qu=U(null);function wE(){var l=qu.current;return l!==null?l:ln.pooledCache}function jy(l,d){d===null?H(qu,qu.current):H(qu,d.pool)}function PM(){var l=wE();return l===null?null:{parent:rr._currentValue,pool:l}}var Ff=Error(r(460)),_E=Error(r(474)),zy=Error(r(542)),Ly={then:function(){}};function DM(l){return l=l.status,l==="fulfilled"||l==="rejected"}function OM(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(ls,ls),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,RM(l),l;default:if(typeof d.status=="string")d.then(ls,ls);else{if(l=ln,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(v){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=v}},function(v){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=v}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,RM(l),l}throw Hu=d,Ff}}function Gu(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Hu=p,Ff):p}}var Hu=null;function NM(){if(Hu===null)throw Error(r(459));var l=Hu;return Hu=null,l}function RM(l){if(l===Ff||l===zy)throw Error(r(483))}var Uf=null,Ag=0;function Vy(l){var d=Ag;return Ag+=1,Uf===null&&(Uf=[]),OM(Uf,l,d)}function Cg(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function By(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function MM(l){function d(ue,se){if(l){var ge=ue.deletions;ge===null?(ue.deletions=[se],ue.flags|=16):ge.push(se)}}function p(ue,se){if(!l)return null;for(;se!==null;)d(ue,se),se=se.sibling;return null}function v(ue){for(var se=new Map;ue!==null;)ue.key!==null?se.set(ue.key,ue):se.set(ue.index,ue),ue=ue.sibling;return se}function E(ue,se){return ue=Vo(ue,se),ue.index=0,ue.sibling=null,ue}function C(ue,se,ge){return ue.index=ge,l?(ge=ue.alternate,ge!==null?(ge=ge.index,ge<se?(ue.flags|=67108866,se):ge):(ue.flags|=67108866,se)):(ue.flags|=1048576,se)}function V(ue){return l&&ue.alternate===null&&(ue.flags|=67108866),ue}function $(ue,se,ge,Ee){return se===null||se.tag!==6?(se=uE(ge,ue.mode,Ee),se.return=ue,se):(se=E(se,ge),se.return=ue,se)}function te(ue,se,ge,Ee){var Ze=ge.type;return Ze===x?_e(ue,se,ge.props.children,Ee,ge.key):se!==null&&(se.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===P&&Gu(Ze)===se.type)?(se=E(se,ge.props),Cg(se,ge),se.return=ue,se):(se=Oy(ge.type,ge.key,ge.props,null,ue.mode,Ee),Cg(se,ge),se.return=ue,se)}function me(ue,se,ge,Ee){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=dE(ge,ue.mode,Ee),se.return=ue,se):(se=E(se,ge.children||[]),se.return=ue,se)}function _e(ue,se,ge,Ee,Ze){return se===null||se.tag!==7?(se=Bu(ge,ue.mode,Ee,Ze),se.return=ue,se):(se=E(se,ge),se.return=ue,se)}function Te(ue,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=uE(""+se,ue.mode,ge),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case m:return ge=Oy(se.type,se.key,se.props,null,ue.mode,ge),Cg(ge,se),ge.return=ue,ge;case b:return se=dE(se,ue.mode,ge),se.return=ue,se;case P:return se=Gu(se),Te(ue,se,ge)}if(Q(se)||B(se))return se=Bu(se,ue.mode,ge,null),se.return=ue,se;if(typeof se.then=="function")return Te(ue,Vy(se),ge);if(se.$$typeof===I)return Te(ue,My(ue,se),ge);By(ue,se)}return null}function ye(ue,se,ge,Ee){var Ze=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Ze!==null?null:$(ue,se,""+ge,Ee);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case m:return ge.key===Ze?te(ue,se,ge,Ee):null;case b:return ge.key===Ze?me(ue,se,ge,Ee):null;case P:return ge=Gu(ge),ye(ue,se,ge,Ee)}if(Q(ge)||B(ge))return Ze!==null?null:_e(ue,se,ge,Ee,null);if(typeof ge.then=="function")return ye(ue,se,Vy(ge),Ee);if(ge.$$typeof===I)return ye(ue,se,My(ue,ge),Ee);By(ue,ge)}return null}function xe(ue,se,ge,Ee,Ze){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return ue=ue.get(ge)||null,$(se,ue,""+Ee,Ze);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case m:return ue=ue.get(Ee.key===null?ge:Ee.key)||null,te(se,ue,Ee,Ze);case b:return ue=ue.get(Ee.key===null?ge:Ee.key)||null,me(se,ue,Ee,Ze);case P:return Ee=Gu(Ee),xe(ue,se,ge,Ee,Ze)}if(Q(Ee)||B(Ee))return ue=ue.get(ge)||null,_e(se,ue,Ee,Ze,null);if(typeof Ee.then=="function")return xe(ue,se,ge,Vy(Ee),Ze);if(Ee.$$typeof===I)return xe(ue,se,ge,My(se,Ee),Ze);By(se,Ee)}return null}function $e(ue,se,ge,Ee){for(var Ze=null,Mt=null,Ke=se,mt=se=0,At=null;Ke!==null&&mt<ge.length;mt++){Ke.index>mt?(At=Ke,Ke=null):At=Ke.sibling;var jt=ye(ue,Ke,ge[mt],Ee);if(jt===null){Ke===null&&(Ke=At);break}l&&Ke&&jt.alternate===null&&d(ue,Ke),se=C(jt,se,mt),Mt===null?Ze=jt:Mt.sibling=jt,Mt=jt,Ke=At}if(mt===ge.length)return p(ue,Ke),kt&&Bo(ue,mt),Ze;if(Ke===null){for(;mt<ge.length;mt++)Ke=Te(ue,ge[mt],Ee),Ke!==null&&(se=C(Ke,se,mt),Mt===null?Ze=Ke:Mt.sibling=Ke,Mt=Ke);return kt&&Bo(ue,mt),Ze}for(Ke=v(Ke);mt<ge.length;mt++)At=xe(Ke,ue,mt,ge[mt],Ee),At!==null&&(l&&At.alternate!==null&&Ke.delete(At.key===null?mt:At.key),se=C(At,se,mt),Mt===null?Ze=At:Mt.sibling=At,Mt=At);return l&&Ke.forEach(function(Sc){return d(ue,Sc)}),kt&&Bo(ue,mt),Ze}function nt(ue,se,ge,Ee){if(ge==null)throw Error(r(151));for(var Ze=null,Mt=null,Ke=se,mt=se=0,At=null,jt=ge.next();Ke!==null&&!jt.done;mt++,jt=ge.next()){Ke.index>mt?(At=Ke,Ke=null):At=Ke.sibling;var Sc=ye(ue,Ke,jt.value,Ee);if(Sc===null){Ke===null&&(Ke=At);break}l&&Ke&&Sc.alternate===null&&d(ue,Ke),se=C(Sc,se,mt),Mt===null?Ze=Sc:Mt.sibling=Sc,Mt=Sc,Ke=At}if(jt.done)return p(ue,Ke),kt&&Bo(ue,mt),Ze;if(Ke===null){for(;!jt.done;mt++,jt=ge.next())jt=Te(ue,jt.value,Ee),jt!==null&&(se=C(jt,se,mt),Mt===null?Ze=jt:Mt.sibling=jt,Mt=jt);return kt&&Bo(ue,mt),Ze}for(Ke=v(Ke);!jt.done;mt++,jt=ge.next())jt=xe(Ke,ue,mt,jt.value,Ee),jt!==null&&(l&&jt.alternate!==null&&Ke.delete(jt.key===null?mt:jt.key),se=C(jt,se,mt),Mt===null?Ze=jt:Mt.sibling=jt,Mt=jt);return l&&Ke.forEach(function(Vte){return d(ue,Vte)}),kt&&Bo(ue,mt),Ze}function nn(ue,se,ge,Ee){if(typeof ge=="object"&&ge!==null&&ge.type===x&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case m:e:{for(var Ze=ge.key;se!==null;){if(se.key===Ze){if(Ze=ge.type,Ze===x){if(se.tag===7){p(ue,se.sibling),Ee=E(se,ge.props.children),Ee.return=ue,ue=Ee;break e}}else if(se.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===P&&Gu(Ze)===se.type){p(ue,se.sibling),Ee=E(se,ge.props),Cg(Ee,ge),Ee.return=ue,ue=Ee;break e}p(ue,se);break}else d(ue,se);se=se.sibling}ge.type===x?(Ee=Bu(ge.props.children,ue.mode,Ee,ge.key),Ee.return=ue,ue=Ee):(Ee=Oy(ge.type,ge.key,ge.props,null,ue.mode,Ee),Cg(Ee,ge),Ee.return=ue,ue=Ee)}return V(ue);case b:e:{for(Ze=ge.key;se!==null;){if(se.key===Ze)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){p(ue,se.sibling),Ee=E(se,ge.children||[]),Ee.return=ue,ue=Ee;break e}else{p(ue,se);break}else d(ue,se);se=se.sibling}Ee=dE(ge,ue.mode,Ee),Ee.return=ue,ue=Ee}return V(ue);case P:return ge=Gu(ge),nn(ue,se,ge,Ee)}if(Q(ge))return $e(ue,se,ge,Ee);if(B(ge)){if(Ze=B(ge),typeof Ze!="function")throw Error(r(150));return ge=Ze.call(ge),nt(ue,se,ge,Ee)}if(typeof ge.then=="function")return nn(ue,se,Vy(ge),Ee);if(ge.$$typeof===I)return nn(ue,se,My(ue,ge),Ee);By(ue,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(p(ue,se.sibling),Ee=E(se,ge),Ee.return=ue,ue=Ee):(p(ue,se),Ee=uE(ge,ue.mode,Ee),Ee.return=ue,ue=Ee),V(ue)):p(ue,se)}return function(ue,se,ge,Ee){try{Ag=0;var Ze=nn(ue,se,ge,Ee);return Uf=null,Ze}catch(Ke){if(Ke===Ff||Ke===zy)throw Ke;var Mt=Qi(29,Ke,null,ue.mode);return Mt.lanes=Ee,Mt.return=ue,Mt}finally{}}}var Ku=MM(!0),jM=MM(!1),sc=!1;function SE(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function EE(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function oc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function lc(l,d,p){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(Ft&2)!==0){var E=v.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),v.pending=d,d=Dy(l),bM(l,null,p),d}return Py(l,v,d,p),Dy(l)}function Ig(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var v=d.lanes;v&=l.pendingLanes,p|=v,d.lanes=p,tg(l,p)}}function TE(l,d){var p=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var E=null,C=null;if(p=p.firstBaseUpdate,p!==null){do{var V={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};C===null?E=C=V:C=C.next=V,p=p.next}while(p!==null);C===null?E=C=d:C=C.next=d}else E=C=d;p={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:v.shared,callbacks:v.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var AE=!1;function kg(){if(AE){var l=Bf;if(l!==null)throw l}}function Pg(l,d,p,v){AE=!1;var E=l.updateQueue;sc=!1;var C=E.firstBaseUpdate,V=E.lastBaseUpdate,$=E.shared.pending;if($!==null){E.shared.pending=null;var te=$,me=te.next;te.next=null,V===null?C=me:V.next=me,V=te;var _e=l.alternate;_e!==null&&(_e=_e.updateQueue,$=_e.lastBaseUpdate,$!==V&&($===null?_e.firstBaseUpdate=me:$.next=me,_e.lastBaseUpdate=te))}if(C!==null){var Te=E.baseState;V=0,_e=me=te=null,$=C;do{var ye=$.lane&-536870913,xe=ye!==$.lane;if(xe?(Tt&ye)===ye:(v&ye)===ye){ye!==0&&ye===Vf&&(AE=!0),_e!==null&&(_e=_e.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var $e=l,nt=$;ye=d;var nn=p;switch(nt.tag){case 1:if($e=nt.payload,typeof $e=="function"){Te=$e.call(nn,Te,ye);break e}Te=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=nt.payload,ye=typeof $e=="function"?$e.call(nn,Te,ye):$e,ye==null)break e;Te=h({},Te,ye);break e;case 2:sc=!0}}ye=$.callback,ye!==null&&(l.flags|=64,xe&&(l.flags|=8192),xe=E.callbacks,xe===null?E.callbacks=[ye]:xe.push(ye))}else xe={lane:ye,tag:$.tag,payload:$.payload,callback:$.callback,next:null},_e===null?(me=_e=xe,te=Te):_e=_e.next=xe,V|=ye;if($=$.next,$===null){if($=E.shared.pending,$===null)break;xe=$,$=xe.next,xe.next=null,E.lastBaseUpdate=xe,E.shared.pending=null}}while(!0);_e===null&&(te=Te),E.baseState=te,E.firstBaseUpdate=me,E.lastBaseUpdate=_e,C===null&&(E.shared.lanes=0),hc|=V,l.lanes=V,l.memoizedState=Te}}function zM(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function LM(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)zM(p[l],d)}var $f=U(null),Fy=U(0);function VM(l,d){l=Qo,H(Fy,l),H($f,d),Qo=l|d.baseLanes}function CE(){H(Fy,Qo),H($f,$f.current)}function IE(){Qo=Fy.current,X($f),X(Fy)}var Zi=U(null),Pa=null;function cc(l){var d=l.alternate;H(Kn,Kn.current&1),H(Zi,l),Pa===null&&(d===null||$f.current!==null||d.memoizedState!==null)&&(Pa=l)}function kE(l){H(Kn,Kn.current),H(Zi,l),Pa===null&&(Pa=l)}function BM(l){l.tag===22?(H(Kn,Kn.current),H(Zi,l),Pa===null&&(Pa=l)):uc()}function uc(){H(Kn,Kn.current),H(Zi,Zi.current)}function Ji(l){X(Zi),Pa===l&&(Pa=null),X(Kn)}var Kn=U(0);function Uy(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||MT(p)||jT(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var $o=0,pt=null,en=null,ir=null,$y=!1,qf=!1,Wu=!1,qy=0,Dg=0,Gf=null,kee=0;function Ln(){throw Error(r(321))}function PE(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Xi(l[p],d[p]))return!1;return!0}function DE(l,d,p,v,E,C){return $o=C,pt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,q.H=l===null||l.memoizedState===null?Sj:HE,Wu=!1,C=p(v,E),Wu=!1,qf&&(C=UM(d,p,v,E)),FM(l),C}function FM(l){q.H=Rg;var d=en!==null&&en.next!==null;if($o=0,ir=en=pt=null,$y=!1,Dg=0,Gf=null,d)throw Error(r(300));l===null||ar||(l=l.dependencies,l!==null&&Ry(l)&&(ar=!0))}function UM(l,d,p,v){pt=l;var E=0;do{if(qf&&(Gf=null),Dg=0,qf=!1,25<=E)throw Error(r(301));if(E+=1,ir=en=null,l.updateQueue!=null){var C=l.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}q.H=Ej,C=d(p,v)}while(qf);return C}function Pee(){var l=q.H,d=l.useState()[0];return d=typeof d.then=="function"?Og(d):d,l=l.useState()[0],(en!==null?en.memoizedState:null)!==l&&(pt.flags|=1024),d}function OE(){var l=qy!==0;return qy=0,l}function NE(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function RE(l){if($y){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}$y=!1}$o=0,ir=en=pt=null,qf=!1,Dg=qy=0,Gf=null}function mi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?pt.memoizedState=ir=l:ir=ir.next=l,ir}function Wn(){if(en===null){var l=pt.alternate;l=l!==null?l.memoizedState:null}else l=en.next;var d=ir===null?pt.memoizedState:ir.next;if(d!==null)ir=d,en=l;else{if(l===null)throw pt.alternate===null?Error(r(467)):Error(r(310));en=l,l={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},ir===null?pt.memoizedState=ir=l:ir=ir.next=l}return ir}function Gy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Og(l){var d=Dg;return Dg+=1,Gf===null&&(Gf=[]),l=OM(Gf,l,d),d=pt,(ir===null?d.memoizedState:ir.next)===null&&(d=d.alternate,q.H=d===null||d.memoizedState===null?Sj:HE),l}function Hy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Og(l);if(l.$$typeof===I)return qr(l)}throw Error(r(438,String(l)))}function ME(l){var d=null,p=pt.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var v=pt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(d={data:v.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=Gy(),pt.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),v=0;v<l;v++)p[v]=j;return d.index++,p}function qo(l,d){return typeof d=="function"?d(l):d}function Ky(l){var d=Wn();return jE(d,en,l)}function jE(l,d,p){var v=l.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=p;var E=l.baseQueue,C=v.pending;if(C!==null){if(E!==null){var V=E.next;E.next=C.next,C.next=V}d.baseQueue=E=C,v.pending=null}if(C=l.baseState,E===null)l.memoizedState=C;else{d=E.next;var $=V=null,te=null,me=d,_e=!1;do{var Te=me.lane&-536870913;if(Te!==me.lane?(Tt&Te)===Te:($o&Te)===Te){var ye=me.revertLane;if(ye===0)te!==null&&(te=te.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Te===Vf&&(_e=!0);else if(($o&ye)===ye){me=me.next,ye===Vf&&(_e=!0);continue}else Te={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},te===null?($=te=Te,V=C):te=te.next=Te,pt.lanes|=ye,hc|=ye;Te=me.action,Wu&&p(C,Te),C=me.hasEagerState?me.eagerState:p(C,Te)}else ye={lane:Te,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},te===null?($=te=ye,V=C):te=te.next=ye,pt.lanes|=Te,hc|=Te;me=me.next}while(me!==null&&me!==d);if(te===null?V=C:te.next=$,!Xi(C,l.memoizedState)&&(ar=!0,_e&&(p=Bf,p!==null)))throw p;l.memoizedState=C,l.baseState=V,l.baseQueue=te,v.lastRenderedState=C}return E===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function zE(l){var d=Wn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var v=p.dispatch,E=p.pending,C=d.memoizedState;if(E!==null){p.pending=null;var V=E=E.next;do C=l(C,V.action),V=V.next;while(V!==E);Xi(C,d.memoizedState)||(ar=!0),d.memoizedState=C,d.baseQueue===null&&(d.baseState=C),p.lastRenderedState=C}return[C,v]}function $M(l,d,p){var v=pt,E=Wn(),C=kt;if(C){if(p===void 0)throw Error(r(407));p=p()}else p=d();var V=!Xi((en||E).memoizedState,p);if(V&&(E.memoizedState=p,ar=!0),E=E.queue,BE(HM.bind(null,v,E,l),[l]),E.getSnapshot!==d||V||ir!==null&&ir.memoizedState.tag&1){if(v.flags|=2048,Hf(9,{destroy:void 0},GM.bind(null,v,E,p,d),null),ln===null)throw Error(r(349));C||($o&127)!==0||qM(v,d,p)}return p}function qM(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=pt.updateQueue,d===null?(d=Gy(),pt.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function GM(l,d,p,v){d.value=p,d.getSnapshot=v,KM(d)&&WM(l)}function HM(l,d,p){return p(function(){KM(d)&&WM(l)})}function KM(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Xi(l,p)}catch{return!0}}function WM(l){var d=Vu(l,2);d!==null&&Ri(d,l,2)}function LE(l){var d=mi();if(typeof l=="function"){var p=l;if(l=p(),Wu){_n(!0);try{p()}finally{_n(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:l},d}function YM(l,d,p,v){return l.baseState=p,jE(l,en,typeof v=="function"?v:qo)}function Dee(l,d,p,v,E){if(Xy(l))throw Error(r(485));if(l=d.action,l!==null){var C={payload:E,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){C.listeners.push(V)}};q.T!==null?p(!0):C.isTransition=!1,v(C),p=d.pending,p===null?(C.next=d.pending=C,XM(d,C)):(C.next=p.next,d.pending=p.next=C)}}function XM(l,d){var p=d.action,v=d.payload,E=l.state;if(d.isTransition){var C=q.T,V={};q.T=V;try{var $=p(E,v),te=q.S;te!==null&&te(V,$),QM(l,d,$)}catch(me){VE(l,d,me)}finally{C!==null&&V.types!==null&&(C.types=V.types),q.T=C}}else try{C=p(E,v),QM(l,d,C)}catch(me){VE(l,d,me)}}function QM(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){ZM(l,d,v)},function(v){return VE(l,d,v)}):ZM(l,d,p)}function ZM(l,d,p){d.status="fulfilled",d.value=p,JM(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,XM(l,p)))}function VE(l,d,p){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do d.status="rejected",d.reason=p,JM(d),d=d.next;while(d!==v)}l.action=null}function JM(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function ej(l,d){return d}function tj(l,d){if(kt){var p=ln.formState;if(p!==null){e:{var v=pt;if(kt){if(pn){t:{for(var E=pn,C=ka;E.nodeType!==8;){if(!C){E=null;break t}if(E=Da(E.nextSibling),E===null){E=null;break t}}C=E.data,E=C==="F!"||C==="F"?E:null}if(E){pn=Da(E.nextSibling),v=E.data==="F!";break e}}ic(v)}v=!1}v&&(d=p[0])}}return p=mi(),p.memoizedState=p.baseState=d,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ej,lastRenderedState:d},p.queue=v,p=xj.bind(null,pt,v),v.dispatch=p,v=LE(!1),C=GE.bind(null,pt,!1,v.queue),v=mi(),E={state:d,dispatch:null,action:l,pending:null},v.queue=E,p=Dee.bind(null,pt,E,C,p),E.dispatch=p,v.memoizedState=l,[d,p,!1]}function nj(l){var d=Wn();return rj(d,en,l)}function rj(l,d,p){if(d=jE(l,d,ej)[0],l=Ky(qo)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var v=Og(d)}catch(V){throw V===Ff?zy:V}else v=d;d=Wn();var E=d.queue,C=E.dispatch;return p!==d.memoizedState&&(pt.flags|=2048,Hf(9,{destroy:void 0},Oee.bind(null,E,p),null)),[v,C,l]}function Oee(l,d){l.action=d}function ij(l){var d=Wn(),p=en;if(p!==null)return rj(d,p,l);Wn(),d=d.memoizedState,p=Wn();var v=p.queue.dispatch;return p.memoizedState=l,[d,v,!1]}function Hf(l,d,p,v){return l={tag:l,create:p,deps:v,inst:d,next:null},d=pt.updateQueue,d===null&&(d=Gy(),pt.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(v=p.next,p.next=l,l.next=v,d.lastEffect=l),l}function aj(){return Wn().memoizedState}function Wy(l,d,p,v){var E=mi();pt.flags|=l,E.memoizedState=Hf(1|d,{destroy:void 0},p,v===void 0?null:v)}function Yy(l,d,p,v){var E=Wn();v=v===void 0?null:v;var C=E.memoizedState.inst;en!==null&&v!==null&&PE(v,en.memoizedState.deps)?E.memoizedState=Hf(d,C,p,v):(pt.flags|=l,E.memoizedState=Hf(1|d,C,p,v))}function sj(l,d){Wy(8390656,8,l,d)}function BE(l,d){Yy(2048,8,l,d)}function Nee(l){pt.flags|=4;var d=pt.updateQueue;if(d===null)d=Gy(),pt.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function oj(l){var d=Wn().memoizedState;return Nee({ref:d,nextImpl:l}),function(){if((Ft&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function lj(l,d){return Yy(4,2,l,d)}function cj(l,d){return Yy(4,4,l,d)}function uj(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function dj(l,d,p){p=p!=null?p.concat([l]):null,Yy(4,4,uj.bind(null,d,l),p)}function FE(){}function fj(l,d){var p=Wn();d=d===void 0?null:d;var v=p.memoizedState;return d!==null&&PE(d,v[1])?v[0]:(p.memoizedState=[l,d],l)}function hj(l,d){var p=Wn();d=d===void 0?null:d;var v=p.memoizedState;if(d!==null&&PE(d,v[1]))return v[0];if(v=l(),Wu){_n(!0);try{l()}finally{_n(!1)}}return p.memoizedState=[v,d],v}function UE(l,d,p){return p===void 0||($o&1073741824)!==0&&(Tt&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=p4(),pt.lanes|=l,hc|=l,p)}function pj(l,d,p,v){return Xi(p,d)?p:$f.current!==null?(l=UE(l,p,v),Xi(l,d)||(ar=!0),l):($o&42)===0||($o&1073741824)!==0&&(Tt&261930)===0?(ar=!0,l.memoizedState=p):(l=p4(),pt.lanes|=l,hc|=l,d)}function gj(l,d,p,v,E){var C=Y.p;Y.p=C!==0&&8>C?C:8;var V=q.T,$={};q.T=$,GE(l,!1,d,p);try{var te=E(),me=q.S;if(me!==null&&me($,te),te!==null&&typeof te=="object"&&typeof te.then=="function"){var _e=Iee(te,v);Ng(l,d,_e,na(l))}else Ng(l,d,v,na(l))}catch(Te){Ng(l,d,{then:function(){},status:"rejected",reason:Te},na())}finally{Y.p=C,V!==null&&$.types!==null&&(V.types=$.types),q.T=V}}function Ree(){}function $E(l,d,p,v){if(l.tag!==5)throw Error(r(476));var E=mj(l).queue;gj(l,E,d,J,p===null?Ree:function(){return vj(l),p(v)})}function mj(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:J},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function vj(l){var d=mj(l);d.next===null&&(d=l.alternate.memoizedState),Ng(l,d.next.queue,{},na())}function qE(){return qr(Xg)}function yj(){return Wn().memoizedState}function bj(){return Wn().memoizedState}function Mee(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=na();l=oc(p);var v=lc(d,l,p);v!==null&&(Ri(v,d,p),Ig(v,d,p)),d={cache:bE()},l.payload=d;return}d=d.return}}function jee(l,d,p){var v=na();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Xy(l)?wj(d,p):(p=lE(l,d,p,v),p!==null&&(Ri(p,l,v),_j(p,d,v)))}function xj(l,d,p){var v=na();Ng(l,d,p,v)}function Ng(l,d,p,v){var E={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Xy(l))wj(d,E);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=d.lastRenderedReducer,C!==null))try{var V=d.lastRenderedState,$=C(V,p);if(E.hasEagerState=!0,E.eagerState=$,Xi($,V))return Py(l,d,E,0),ln===null&&ky(),!1}catch{}finally{}if(p=lE(l,d,E,v),p!==null)return Ri(p,l,v),_j(p,d,v),!0}return!1}function GE(l,d,p,v){if(v={lane:2,revertLane:ST(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Xy(l)){if(d)throw Error(r(479))}else d=lE(l,p,v,2),d!==null&&Ri(d,l,2)}function Xy(l){var d=l.alternate;return l===pt||d!==null&&d===pt}function wj(l,d){qf=$y=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function _j(l,d,p){if((p&4194048)!==0){var v=d.lanes;v&=l.pendingLanes,p|=v,d.lanes=p,tg(l,p)}}var Rg={readContext:qr,use:Hy,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useLayoutEffect:Ln,useInsertionEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useSyncExternalStore:Ln,useId:Ln,useHostTransitionStatus:Ln,useFormState:Ln,useActionState:Ln,useOptimistic:Ln,useMemoCache:Ln,useCacheRefresh:Ln};Rg.useEffectEvent=Ln;var Sj={readContext:qr,use:Hy,useCallback:function(l,d){return mi().memoizedState=[l,d===void 0?null:d],l},useContext:qr,useEffect:sj,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Wy(4194308,4,uj.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Wy(4194308,4,l,d)},useInsertionEffect:function(l,d){Wy(4,2,l,d)},useMemo:function(l,d){var p=mi();d=d===void 0?null:d;var v=l();if(Wu){_n(!0);try{l()}finally{_n(!1)}}return p.memoizedState=[v,d],v},useReducer:function(l,d,p){var v=mi();if(p!==void 0){var E=p(d);if(Wu){_n(!0);try{p(d)}finally{_n(!1)}}}else E=d;return v.memoizedState=v.baseState=E,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:E},v.queue=l,l=l.dispatch=jee.bind(null,pt,l),[v.memoizedState,l]},useRef:function(l){var d=mi();return l={current:l},d.memoizedState=l},useState:function(l){l=LE(l);var d=l.queue,p=xj.bind(null,pt,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:FE,useDeferredValue:function(l,d){var p=mi();return UE(p,l,d)},useTransition:function(){var l=LE(!1);return l=gj.bind(null,pt,l.queue,!0,!1),mi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var v=pt,E=mi();if(kt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),ln===null)throw Error(r(349));(Tt&127)!==0||qM(v,d,p)}E.memoizedState=p;var C={value:p,getSnapshot:d};return E.queue=C,sj(HM.bind(null,v,C,l),[l]),v.flags|=2048,Hf(9,{destroy:void 0},GM.bind(null,v,C,p,d),null),p},useId:function(){var l=mi(),d=ln.identifierPrefix;if(kt){var p=Js,v=Zs;p=(v&~(1<<32-Vt(v)-1)).toString(32)+p,d="_"+d+"R_"+p,p=qy++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=kee++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:qE,useFormState:tj,useActionState:tj,useOptimistic:function(l){var d=mi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=GE.bind(null,pt,!0,p),p.dispatch=d,[l,d]},useMemoCache:ME,useCacheRefresh:function(){return mi().memoizedState=Mee.bind(null,pt)},useEffectEvent:function(l){var d=mi(),p={impl:l};return d.memoizedState=p,function(){if((Ft&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},HE={readContext:qr,use:Hy,useCallback:fj,useContext:qr,useEffect:BE,useImperativeHandle:dj,useInsertionEffect:lj,useLayoutEffect:cj,useMemo:hj,useReducer:Ky,useRef:aj,useState:function(){return Ky(qo)},useDebugValue:FE,useDeferredValue:function(l,d){var p=Wn();return pj(p,en.memoizedState,l,d)},useTransition:function(){var l=Ky(qo)[0],d=Wn().memoizedState;return[typeof l=="boolean"?l:Og(l),d]},useSyncExternalStore:$M,useId:yj,useHostTransitionStatus:qE,useFormState:nj,useActionState:nj,useOptimistic:function(l,d){var p=Wn();return YM(p,en,l,d)},useMemoCache:ME,useCacheRefresh:bj};HE.useEffectEvent=oj;var Ej={readContext:qr,use:Hy,useCallback:fj,useContext:qr,useEffect:BE,useImperativeHandle:dj,useInsertionEffect:lj,useLayoutEffect:cj,useMemo:hj,useReducer:zE,useRef:aj,useState:function(){return zE(qo)},useDebugValue:FE,useDeferredValue:function(l,d){var p=Wn();return en===null?UE(p,l,d):pj(p,en.memoizedState,l,d)},useTransition:function(){var l=zE(qo)[0],d=Wn().memoizedState;return[typeof l=="boolean"?l:Og(l),d]},useSyncExternalStore:$M,useId:yj,useHostTransitionStatus:qE,useFormState:ij,useActionState:ij,useOptimistic:function(l,d){var p=Wn();return en!==null?YM(p,en,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:ME,useCacheRefresh:bj};Ej.useEffectEvent=oj;function KE(l,d,p,v){d=l.memoizedState,p=p(v,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var WE={enqueueSetState:function(l,d,p){l=l._reactInternals;var v=na(),E=oc(v);E.payload=d,p!=null&&(E.callback=p),d=lc(l,E,v),d!==null&&(Ri(d,l,v),Ig(d,l,v))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var v=na(),E=oc(v);E.tag=1,E.payload=d,p!=null&&(E.callback=p),d=lc(l,E,v),d!==null&&(Ri(d,l,v),Ig(d,l,v))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=na(),v=oc(p);v.tag=2,d!=null&&(v.callback=d),d=lc(l,v,p),d!==null&&(Ri(d,l,p),Ig(d,l,p))}};function Tj(l,d,p,v,E,C,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,C,V):d.prototype&&d.prototype.isPureReactComponent?!xg(p,v)||!xg(E,C):!0}function Aj(l,d,p,v){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,v),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,v),d.state!==l&&WE.enqueueReplaceState(d,d.state,null)}function Yu(l,d){var p=d;if("ref"in d){p={};for(var v in d)v!=="ref"&&(p[v]=d[v])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var E in l)p[E]===void 0&&(p[E]=l[E])}return p}function Cj(l){Iy(l)}function Ij(l){console.error(l)}function kj(l){Iy(l)}function Qy(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(v){setTimeout(function(){throw v})}}function Pj(l,d,p){try{var v=l.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function YE(l,d,p){return p=oc(p),p.tag=3,p.payload={element:null},p.callback=function(){Qy(l,d)},p}function Dj(l){return l=oc(l),l.tag=3,l}function Oj(l,d,p,v){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var C=v.value;l.payload=function(){return E(C)},l.callback=function(){Pj(d,p,v)}}var V=p.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){Pj(d,p,v),typeof E!="function"&&(pc===null?pc=new Set([this]):pc.add(this));var $=v.stack;this.componentDidCatch(v.value,{componentStack:$!==null?$:""})})}function zee(l,d,p,v,E){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(d=p.alternate,d!==null&&Lf(d,p,E,!0),p=Zi.current,p!==null){switch(p.tag){case 31:case 13:return Pa===null?cb():p.alternate===null&&Vn===0&&(Vn=3),p.flags&=-257,p.flags|=65536,p.lanes=E,v===Ly?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([v]):d.add(v),xT(l,v,E)),!1;case 22:return p.flags|=65536,v===Ly?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([v]):p.add(v)),xT(l,v,E)),!1}throw Error(r(435,p.tag))}return xT(l,v,E),cb(),!1}if(kt)return d=Zi.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,v!==pE&&(l=Error(r(422),{cause:v}),Sg(Aa(l,p)))):(v!==pE&&(d=Error(r(423),{cause:v}),Sg(Aa(d,p))),l=l.current.alternate,l.flags|=65536,E&=-E,l.lanes|=E,v=Aa(v,p),E=YE(l.stateNode,v,E),TE(l,E),Vn!==4&&(Vn=2)),!1;var C=Error(r(520),{cause:v});if(C=Aa(C,p),Ug===null?Ug=[C]:Ug.push(C),Vn!==4&&(Vn=2),d===null)return!0;v=Aa(v,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=E&-E,p.lanes|=l,l=YE(p.stateNode,v,l),TE(p,l),!1;case 1:if(d=p.type,C=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(pc===null||!pc.has(C))))return p.flags|=65536,E&=-E,p.lanes|=E,E=Dj(E),Oj(E,l,p,v),TE(p,E),!1}p=p.return}while(p!==null);return!1}var XE=Error(r(461)),ar=!1;function Gr(l,d,p,v){d.child=l===null?jM(d,null,p,v):Ku(d,l.child,p,v)}function Nj(l,d,p,v,E){p=p.render;var C=d.ref;if("ref"in v){var V={};for(var $ in v)$!=="ref"&&(V[$]=v[$])}else V=v;return $u(d),v=DE(l,d,p,V,C,E),$=OE(),l!==null&&!ar?(NE(l,d,E),Go(l,d,E)):(kt&&$&&fE(d),d.flags|=1,Gr(l,d,v,E),d.child)}function Rj(l,d,p,v,E){if(l===null){var C=p.type;return typeof C=="function"&&!cE(C)&&C.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=C,Mj(l,d,C,v,E)):(l=Oy(p.type,null,v,d,d.mode,E),l.ref=d.ref,l.return=d,d.child=l)}if(C=l.child,!iT(l,E)){var V=C.memoizedProps;if(p=p.compare,p=p!==null?p:xg,p(V,v)&&l.ref===d.ref)return Go(l,d,E)}return d.flags|=1,l=Vo(C,v),l.ref=d.ref,l.return=d,d.child=l}function Mj(l,d,p,v,E){if(l!==null){var C=l.memoizedProps;if(xg(C,v)&&l.ref===d.ref)if(ar=!1,d.pendingProps=v=C,iT(l,E))(l.flags&131072)!==0&&(ar=!0);else return d.lanes=l.lanes,Go(l,d,E)}return QE(l,d,p,v,E)}function jj(l,d,p,v){var E=v.children,C=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((d.flags&128)!==0){if(C=C!==null?C.baseLanes|p:p,l!==null){for(v=d.child=l.child,E=0;v!==null;)E=E|v.lanes|v.childLanes,v=v.sibling;v=E&~C}else v=0,d.child=null;return zj(l,d,C,p,v)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&jy(d,C!==null?C.cachePool:null),C!==null?VM(d,C):CE(),BM(d);else return v=d.lanes=536870912,zj(l,d,C!==null?C.baseLanes|p:p,p,v)}else C!==null?(jy(d,C.cachePool),VM(d,C),uc(),d.memoizedState=null):(l!==null&&jy(d,null),CE(),uc());return Gr(l,d,E,p),d.child}function Mg(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function zj(l,d,p,v,E){var C=wE();return C=C===null?null:{parent:rr._currentValue,pool:C},d.memoizedState={baseLanes:p,cachePool:C},l!==null&&jy(d,null),CE(),BM(d),l!==null&&Lf(l,d,v,!0),d.childLanes=E,null}function Zy(l,d){return d=eb({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function Lj(l,d,p){return Ku(d,l.child,null,p),l=Zy(d,d.pendingProps),l.flags|=2,Ji(d),d.memoizedState=null,l}function Lee(l,d,p){var v=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(kt){if(v.mode==="hidden")return l=Zy(d,v),d.lanes=536870912,Mg(null,l);if(kE(d),(l=pn)?(l=X4(l,ka),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:nc!==null?{id:Zs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},p=wM(l),p.return=d,d.child=p,$r=d,pn=null)):l=null,l===null)throw ic(d);return d.lanes=536870912,null}return Zy(d,v)}var C=l.memoizedState;if(C!==null){var V=C.dehydrated;if(kE(d),E)if(d.flags&256)d.flags&=-257,d=Lj(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(ar||Lf(l,d,p,!1),E=(p&l.childLanes)!==0,ar||E){if(v=ln,v!==null&&(V=ng(v,p),V!==0&&V!==C.retryLane))throw C.retryLane=V,Vu(l,V),Ri(v,l,V),XE;cb(),d=Lj(l,d,p)}else l=C.treeContext,pn=Da(V.nextSibling),$r=d,kt=!0,rc=null,ka=!1,l!==null&&EM(d,l),d=Zy(d,v),d.flags|=4096;return d}return l=Vo(l.child,{mode:v.mode,children:v.children}),l.ref=d.ref,d.child=l,l.return=d,l}function Jy(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function QE(l,d,p,v,E){return $u(d),p=DE(l,d,p,v,void 0,E),v=OE(),l!==null&&!ar?(NE(l,d,E),Go(l,d,E)):(kt&&v&&fE(d),d.flags|=1,Gr(l,d,p,E),d.child)}function Vj(l,d,p,v,E,C){return $u(d),d.updateQueue=null,p=UM(d,v,p,E),FM(l),v=OE(),l!==null&&!ar?(NE(l,d,C),Go(l,d,C)):(kt&&v&&fE(d),d.flags|=1,Gr(l,d,p,C),d.child)}function Bj(l,d,p,v,E){if($u(d),d.stateNode===null){var C=Rf,V=p.contextType;typeof V=="object"&&V!==null&&(C=qr(V)),C=new p(v,C),d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=WE,d.stateNode=C,C._reactInternals=d,C=d.stateNode,C.props=v,C.state=d.memoizedState,C.refs={},SE(d),V=p.contextType,C.context=typeof V=="object"&&V!==null?qr(V):Rf,C.state=d.memoizedState,V=p.getDerivedStateFromProps,typeof V=="function"&&(KE(d,p,V,v),C.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(V=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),V!==C.state&&WE.enqueueReplaceState(C,C.state,null),Pg(d,v,C,E),kg(),C.state=d.memoizedState),typeof C.componentDidMount=="function"&&(d.flags|=4194308),v=!0}else if(l===null){C=d.stateNode;var $=d.memoizedProps,te=Yu(p,$);C.props=te;var me=C.context,_e=p.contextType;V=Rf,typeof _e=="object"&&_e!==null&&(V=qr(_e));var Te=p.getDerivedStateFromProps;_e=typeof Te=="function"||typeof C.getSnapshotBeforeUpdate=="function",$=d.pendingProps!==$,_e||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||($||me!==V)&&Aj(d,C,v,V),sc=!1;var ye=d.memoizedState;C.state=ye,Pg(d,v,C,E),kg(),me=d.memoizedState,$||ye!==me||sc?(typeof Te=="function"&&(KE(d,p,Te,v),me=d.memoizedState),(te=sc||Tj(d,p,te,v,ye,me,V))?(_e||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(d.flags|=4194308)):(typeof C.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=v,d.memoizedState=me),C.props=v,C.state=me,C.context=V,v=te):(typeof C.componentDidMount=="function"&&(d.flags|=4194308),v=!1)}else{C=d.stateNode,EE(l,d),V=d.memoizedProps,_e=Yu(p,V),C.props=_e,Te=d.pendingProps,ye=C.context,me=p.contextType,te=Rf,typeof me=="object"&&me!==null&&(te=qr(me)),$=p.getDerivedStateFromProps,(me=typeof $=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(V!==Te||ye!==te)&&Aj(d,C,v,te),sc=!1,ye=d.memoizedState,C.state=ye,Pg(d,v,C,E),kg();var xe=d.memoizedState;V!==Te||ye!==xe||sc||l!==null&&l.dependencies!==null&&Ry(l.dependencies)?(typeof $=="function"&&(KE(d,p,$,v),xe=d.memoizedState),(_e=sc||Tj(d,p,_e,v,ye,xe,te)||l!==null&&l.dependencies!==null&&Ry(l.dependencies))?(me||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,xe,te),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,xe,te)),typeof C.componentDidUpdate=="function"&&(d.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof C.componentDidUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=v,d.memoizedState=xe),C.props=v,C.state=xe,C.context=te,v=_e):(typeof C.componentDidUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),v=!1)}return C=v,Jy(l,d),v=(d.flags&128)!==0,C||v?(C=d.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:C.render(),d.flags|=1,l!==null&&v?(d.child=Ku(d,l.child,null,E),d.child=Ku(d,null,p,E)):Gr(l,d,p,E),d.memoizedState=C.state,l=d.child):l=Go(l,d,E),l}function Fj(l,d,p,v){return Fu(),d.flags|=256,Gr(l,d,p,v),d.child}var ZE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function JE(l){return{baseLanes:l,cachePool:PM()}}function eT(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ta),l}function Uj(l,d,p){var v=d.pendingProps,E=!1,C=(d.flags&128)!==0,V;if((V=C)||(V=l!==null&&l.memoizedState===null?!1:(Kn.current&2)!==0),V&&(E=!0,d.flags&=-129),V=(d.flags&32)!==0,d.flags&=-33,l===null){if(kt){if(E?cc(d):uc(),(l=pn)?(l=X4(l,ka),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:nc!==null?{id:Zs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},p=wM(l),p.return=d,d.child=p,$r=d,pn=null)):l=null,l===null)throw ic(d);return jT(l)?d.lanes=32:d.lanes=536870912,null}var $=v.children;return v=v.fallback,E?(uc(),E=d.mode,$=eb({mode:"hidden",children:$},E),v=Bu(v,E,p,null),$.return=d,v.return=d,$.sibling=v,d.child=$,v=d.child,v.memoizedState=JE(p),v.childLanes=eT(l,V,p),d.memoizedState=ZE,Mg(null,v)):(cc(d),tT(d,$))}var te=l.memoizedState;if(te!==null&&($=te.dehydrated,$!==null)){if(C)d.flags&256?(cc(d),d.flags&=-257,d=nT(l,d,p)):d.memoizedState!==null?(uc(),d.child=l.child,d.flags|=128,d=null):(uc(),$=v.fallback,E=d.mode,v=eb({mode:"visible",children:v.children},E),$=Bu($,E,p,null),$.flags|=2,v.return=d,$.return=d,v.sibling=$,d.child=v,Ku(d,l.child,null,p),v=d.child,v.memoizedState=JE(p),v.childLanes=eT(l,V,p),d.memoizedState=ZE,d=Mg(null,v));else if(cc(d),jT($)){if(V=$.nextSibling&&$.nextSibling.dataset,V)var me=V.dgst;V=me,v=Error(r(419)),v.stack="",v.digest=V,Sg({value:v,source:null,stack:null}),d=nT(l,d,p)}else if(ar||Lf(l,d,p,!1),V=(p&l.childLanes)!==0,ar||V){if(V=ln,V!==null&&(v=ng(V,p),v!==0&&v!==te.retryLane))throw te.retryLane=v,Vu(l,v),Ri(V,l,v),XE;MT($)||cb(),d=nT(l,d,p)}else MT($)?(d.flags|=192,d.child=l.child,d=null):(l=te.treeContext,pn=Da($.nextSibling),$r=d,kt=!0,rc=null,ka=!1,l!==null&&EM(d,l),d=tT(d,v.children),d.flags|=4096);return d}return E?(uc(),$=v.fallback,E=d.mode,te=l.child,me=te.sibling,v=Vo(te,{mode:"hidden",children:v.children}),v.subtreeFlags=te.subtreeFlags&65011712,me!==null?$=Vo(me,$):($=Bu($,E,p,null),$.flags|=2),$.return=d,v.return=d,v.sibling=$,d.child=v,Mg(null,v),v=d.child,$=l.child.memoizedState,$===null?$=JE(p):(E=$.cachePool,E!==null?(te=rr._currentValue,E=E.parent!==te?{parent:te,pool:te}:E):E=PM(),$={baseLanes:$.baseLanes|p,cachePool:E}),v.memoizedState=$,v.childLanes=eT(l,V,p),d.memoizedState=ZE,Mg(l.child,v)):(cc(d),p=l.child,l=p.sibling,p=Vo(p,{mode:"visible",children:v.children}),p.return=d,p.sibling=null,l!==null&&(V=d.deletions,V===null?(d.deletions=[l],d.flags|=16):V.push(l)),d.child=p,d.memoizedState=null,p)}function tT(l,d){return d=eb({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function eb(l,d){return l=Qi(22,l,null,d),l.lanes=0,l}function nT(l,d,p){return Ku(d,l.child,null,p),l=tT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function $j(l,d,p){l.lanes|=d;var v=l.alternate;v!==null&&(v.lanes|=d),vE(l.return,d,p)}function rT(l,d,p,v,E,C){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:E,treeForkCount:C}:(V.isBackwards=d,V.rendering=null,V.renderingStartTime=0,V.last=v,V.tail=p,V.tailMode=E,V.treeForkCount=C)}function qj(l,d,p){var v=d.pendingProps,E=v.revealOrder,C=v.tail;v=v.children;var V=Kn.current,$=(V&2)!==0;if($?(V=V&1|2,d.flags|=128):V&=1,H(Kn,V),Gr(l,d,v,p),v=kt?_g:0,!$&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&$j(l,p,d);else if(l.tag===19)$j(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(E){case"forwards":for(p=d.child,E=null;p!==null;)l=p.alternate,l!==null&&Uy(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=d.child,d.child=null):(E=p.sibling,p.sibling=null),rT(d,!1,E,p,C,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=d.child,d.child=null;E!==null;){if(l=E.alternate,l!==null&&Uy(l)===null){d.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}rT(d,!0,p,null,C,v);break;case"together":rT(d,!1,null,null,void 0,v);break;default:d.memoizedState=null}return d.child}function Go(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),hc|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(Lf(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Vo(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Vo(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function iT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Ry(l)))}function Vee(l,d,p){switch(d.tag){case 3:he(d,d.stateNode.containerInfo),ac(d,rr,l.memoizedState.cache),Fu();break;case 27:case 5:Se(d);break;case 4:he(d,d.stateNode.containerInfo);break;case 10:ac(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,kE(d),null;break;case 13:var v=d.memoizedState;if(v!==null)return v.dehydrated!==null?(cc(d),d.flags|=128,null):(p&d.child.childLanes)!==0?Uj(l,d,p):(cc(d),l=Go(l,d,p),l!==null?l.sibling:null);cc(d);break;case 19:var E=(l.flags&128)!==0;if(v=(p&d.childLanes)!==0,v||(Lf(l,d,p,!1),v=(p&d.childLanes)!==0),E){if(v)return qj(l,d,p);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),H(Kn,Kn.current),v)break;return null;case 22:return d.lanes=0,jj(l,d,p,d.pendingProps);case 24:ac(d,rr,l.memoizedState.cache)}return Go(l,d,p)}function Gj(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)ar=!0;else{if(!iT(l,p)&&(d.flags&128)===0)return ar=!1,Vee(l,d,p);ar=(l.flags&131072)!==0}else ar=!1,kt&&(d.flags&1048576)!==0&&SM(d,_g,d.index);switch(d.lanes=0,d.tag){case 16:e:{var v=d.pendingProps;if(l=Gu(d.elementType),d.type=l,typeof l=="function")cE(l)?(v=Yu(l,v),d.tag=1,d=Bj(null,d,l,v,p)):(d.tag=0,d=QE(null,d,l,v,p));else{if(l!=null){var E=l.$$typeof;if(E===N){d.tag=11,d=Nj(null,d,l,v,p);break e}else if(E===k){d.tag=14,d=Rj(null,d,l,v,p);break e}}throw d=K(l)||l,Error(r(306,d,""))}}return d;case 0:return QE(l,d,d.type,d.pendingProps,p);case 1:return v=d.type,E=Yu(v,d.pendingProps),Bj(l,d,v,E,p);case 3:e:{if(he(d,d.stateNode.containerInfo),l===null)throw Error(r(387));v=d.pendingProps;var C=d.memoizedState;E=C.element,EE(l,d),Pg(d,v,null,p);var V=d.memoizedState;if(v=V.cache,ac(d,rr,v),v!==C.cache&&yE(d,[rr],p,!0),kg(),v=V.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:V.cache},d.updateQueue.baseState=C,d.memoizedState=C,d.flags&256){d=Fj(l,d,v,p);break e}else if(v!==E){E=Aa(Error(r(424)),d),Sg(E),d=Fj(l,d,v,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(pn=Da(l.firstChild),$r=d,kt=!0,rc=null,ka=!0,p=jM(d,null,v,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Fu(),v===E){d=Go(l,d,p);break e}Gr(l,d,v,p)}d=d.child}return d;case 26:return Jy(l,d),l===null?(p=n3(d.type,null,d.pendingProps,null))?d.memoizedState=p:kt||(p=d.type,l=d.pendingProps,v=mb(de.current).createElement(p),v[er]=d,v[Pr]=l,Hr(v,p,l),tr(v),d.stateNode=v):d.memoizedState=n3(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Se(d),l===null&&kt&&(v=d.stateNode=J4(d.type,d.pendingProps,de.current),$r=d,ka=!0,E=pn,yc(d.type)?(zT=E,pn=Da(v.firstChild)):pn=E),Gr(l,d,d.pendingProps.children,p),Jy(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&kt&&((E=v=pn)&&(v=gte(v,d.type,d.pendingProps,ka),v!==null?(d.stateNode=v,$r=d,pn=Da(v.firstChild),ka=!1,E=!0):E=!1),E||ic(d)),Se(d),E=d.type,C=d.pendingProps,V=l!==null?l.memoizedProps:null,v=C.children,OT(E,C)?v=null:V!==null&&OT(E,V)&&(d.flags|=32),d.memoizedState!==null&&(E=DE(l,d,Pee,null,null,p),Xg._currentValue=E),Jy(l,d),Gr(l,d,v,p),d.child;case 6:return l===null&&kt&&((l=p=pn)&&(p=mte(p,d.pendingProps,ka),p!==null?(d.stateNode=p,$r=d,pn=null,l=!0):l=!1),l||ic(d)),null;case 13:return Uj(l,d,p);case 4:return he(d,d.stateNode.containerInfo),v=d.pendingProps,l===null?d.child=Ku(d,null,v,p):Gr(l,d,v,p),d.child;case 11:return Nj(l,d,d.type,d.pendingProps,p);case 7:return Gr(l,d,d.pendingProps,p),d.child;case 8:return Gr(l,d,d.pendingProps.children,p),d.child;case 12:return Gr(l,d,d.pendingProps.children,p),d.child;case 10:return v=d.pendingProps,ac(d,d.type,v.value),Gr(l,d,v.children,p),d.child;case 9:return E=d.type._context,v=d.pendingProps.children,$u(d),E=qr(E),v=v(E),d.flags|=1,Gr(l,d,v,p),d.child;case 14:return Rj(l,d,d.type,d.pendingProps,p);case 15:return Mj(l,d,d.type,d.pendingProps,p);case 19:return qj(l,d,p);case 31:return Lee(l,d,p);case 22:return jj(l,d,p,d.pendingProps);case 24:return $u(d),v=qr(rr),l===null?(E=wE(),E===null&&(E=ln,C=bE(),E.pooledCache=C,C.refCount++,C!==null&&(E.pooledCacheLanes|=p),E=C),d.memoizedState={parent:v,cache:E},SE(d),ac(d,rr,E)):((l.lanes&p)!==0&&(EE(l,d),Pg(d,null,null,p),kg()),E=l.memoizedState,C=d.memoizedState,E.parent!==v?(E={parent:v,cache:v},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),ac(d,rr,v)):(v=C.cache,ac(d,rr,v),v!==E.cache&&yE(d,[rr],p,!0))),Gr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Ho(l){l.flags|=4}function aT(l,d,p,v,E){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(E&335544128)===E)if(l.stateNode.complete)l.flags|=8192;else if(y4())l.flags|=8192;else throw Hu=Ly,_E}else l.flags&=-16777217}function Hj(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!o3(d))if(y4())l.flags|=8192;else throw Hu=Ly,_E}function tb(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?oy():536870912,l.lanes|=d,Xf|=d)}function jg(l,d){if(!kt)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function gn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,v=0;if(d)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags&65011712,v|=E.flags&65011712,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=v,l.childLanes=p,d}function Bee(l,d,p){var v=d.pendingProps;switch(hE(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(d),null;case 1:return gn(d),null;case 3:return p=d.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),d.memoizedState.cache!==v&&(d.flags|=2048),Uo(rr),ee(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(zf(d)?Ho(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,gE())),gn(d),null;case 26:var E=d.type,C=d.memoizedState;return l===null?(Ho(d),C!==null?(gn(d),Hj(d,C)):(gn(d),aT(d,E,null,v,p))):C?C!==l.memoizedState?(Ho(d),gn(d),Hj(d,C)):(gn(d),d.flags&=-16777217):(l=l.memoizedProps,l!==v&&Ho(d),gn(d),aT(d,E,l,v,p)),null;case 27:if(re(d),p=de.current,E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==v&&Ho(d);else{if(!v){if(d.stateNode===null)throw Error(r(166));return gn(d),null}l=Z.current,zf(d)?TM(d):(l=J4(E,v,p),d.stateNode=l,Ho(d))}return gn(d),null;case 5:if(re(d),E=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==v&&Ho(d);else{if(!v){if(d.stateNode===null)throw Error(r(166));return gn(d),null}if(C=Z.current,zf(d))TM(d);else{var V=mb(de.current);switch(C){case 1:C=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:C=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":C=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":C=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":C=V.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof v.is=="string"?V.createElement("select",{is:v.is}):V.createElement("select"),v.multiple?C.multiple=!0:v.size&&(C.size=v.size);break;default:C=typeof v.is=="string"?V.createElement(E,{is:v.is}):V.createElement(E)}}C[er]=d,C[Pr]=v;e:for(V=d.child;V!==null;){if(V.tag===5||V.tag===6)C.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===d)break e;for(;V.sibling===null;){if(V.return===null||V.return===d)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}d.stateNode=C;e:switch(Hr(C,E,v),E){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Ho(d)}}return gn(d),aT(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==v&&Ho(d);else{if(typeof v!="string"&&d.stateNode===null)throw Error(r(166));if(l=de.current,zf(d)){if(l=d.stateNode,p=d.memoizedProps,v=null,E=$r,E!==null)switch(E.tag){case 27:case 5:v=E.memoizedProps}l[er]=d,l=!!(l.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||U4(l.nodeValue,p)),l||ic(d,!0)}else l=mb(l).createTextNode(v),l[er]=d,d.stateNode=l}return gn(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(v=zf(d),p!==null){if(l===null){if(!v)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[er]=d}else Fu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;gn(d),l=!1}else p=gE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(Ji(d),d):(Ji(d),null);if((d.flags&128)!==0)throw Error(r(558))}return gn(d),null;case 13:if(v=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(E=zf(d),v!==null&&v.dehydrated!==null){if(l===null){if(!E)throw Error(r(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[er]=d}else Fu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;gn(d),E=!1}else E=gE(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(Ji(d),d):(Ji(d),null)}return Ji(d),(d.flags&128)!==0?(d.lanes=p,d):(p=v!==null,l=l!==null&&l.memoizedState!==null,p&&(v=d.child,E=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(E=v.alternate.memoizedState.cachePool.pool),C=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(C=v.memoizedState.cachePool.pool),C!==E&&(v.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),tb(d,d.updateQueue),gn(d),null);case 4:return ee(),l===null&&CT(d.stateNode.containerInfo),gn(d),null;case 10:return Uo(d.type),gn(d),null;case 19:if(X(Kn),v=d.memoizedState,v===null)return gn(d),null;if(E=(d.flags&128)!==0,C=v.rendering,C===null)if(E)jg(v,!1);else{if(Vn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(C=Uy(l),C!==null){for(d.flags|=128,jg(v,!1),l=C.updateQueue,d.updateQueue=l,tb(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)xM(p,l),p=p.sibling;return H(Kn,Kn.current&1|2),kt&&Bo(d,v.treeForkCount),d.child}l=l.sibling}v.tail!==null&&ot()>sb&&(d.flags|=128,E=!0,jg(v,!1),d.lanes=4194304)}else{if(!E)if(l=Uy(C),l!==null){if(d.flags|=128,E=!0,l=l.updateQueue,d.updateQueue=l,tb(d,l),jg(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!kt)return gn(d),null}else 2*ot()-v.renderingStartTime>sb&&p!==536870912&&(d.flags|=128,E=!0,jg(v,!1),d.lanes=4194304);v.isBackwards?(C.sibling=d.child,d.child=C):(l=v.last,l!==null?l.sibling=C:d.child=C,v.last=C)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=ot(),l.sibling=null,p=Kn.current,H(Kn,E?p&1|2:p&1),kt&&Bo(d,v.treeForkCount),l):(gn(d),null);case 22:case 23:return Ji(d),IE(),v=d.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(d.flags|=8192):v&&(d.flags|=8192),v?(p&536870912)!==0&&(d.flags&128)===0&&(gn(d),d.subtreeFlags&6&&(d.flags|=8192)):gn(d),p=d.updateQueue,p!==null&&tb(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==p&&(d.flags|=2048),l!==null&&X(qu),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Uo(rr),gn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function Fee(l,d){switch(hE(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Uo(rr),ee(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return re(d),null;case 31:if(d.memoizedState!==null){if(Ji(d),d.alternate===null)throw Error(r(340));Fu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Ji(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Fu()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return X(Kn),null;case 4:return ee(),null;case 10:return Uo(d.type),null;case 22:case 23:return Ji(d),IE(),l!==null&&X(qu),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Uo(rr),null;case 25:return null;default:return null}}function Kj(l,d){switch(hE(d),d.tag){case 3:Uo(rr),ee();break;case 26:case 27:case 5:re(d);break;case 4:ee();break;case 31:d.memoizedState!==null&&Ji(d);break;case 13:Ji(d);break;case 19:X(Kn);break;case 10:Uo(d.type);break;case 22:case 23:Ji(d),IE(),l!==null&&X(qu);break;case 24:Uo(rr)}}function zg(l,d){try{var p=d.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var E=v.next;p=E;do{if((p.tag&l)===l){v=void 0;var C=p.create,V=p.inst;v=C(),V.destroy=v}p=p.next}while(p!==E)}}catch($){Kt(d,d.return,$)}}function dc(l,d,p){try{var v=d.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var C=E.next;v=C;do{if((v.tag&l)===l){var V=v.inst,$=V.destroy;if($!==void 0){V.destroy=void 0,E=d;var te=p,me=$;try{me()}catch(_e){Kt(E,te,_e)}}}v=v.next}while(v!==C)}}catch(_e){Kt(d,d.return,_e)}}function Wj(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{LM(d,p)}catch(v){Kt(l,l.return,v)}}}function Yj(l,d,p){p.props=Yu(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(v){Kt(l,d,v)}}function Lg(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof p=="function"?l.refCleanup=p(v):p.current=v}}catch(E){Kt(l,d,E)}}function eo(l,d){var p=l.ref,v=l.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(E){Kt(l,d,E)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Kt(l,d,E)}else p.current=null}function Xj(l){var d=l.type,p=l.memoizedProps,v=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(E){Kt(l,l.return,E)}}function sT(l,d,p){try{var v=l.stateNode;cte(v,l.type,p,d),v[Pr]=d}catch(E){Kt(l,l.return,E)}}function Qj(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&yc(l.type)||l.tag===4}function oT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Qj(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&yc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function lT(l,d,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=ls));else if(v!==4&&(v===27&&yc(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(lT(l,d,p),l=l.sibling;l!==null;)lT(l,d,p),l=l.sibling}function nb(l,d,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(v!==4&&(v===27&&yc(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(nb(l,d,p),l=l.sibling;l!==null;)nb(l,d,p),l=l.sibling}function Zj(l){var d=l.stateNode,p=l.memoizedProps;try{for(var v=l.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);Hr(d,v,p),d[er]=l,d[Pr]=p}catch(C){Kt(l,l.return,C)}}var Ko=!1,sr=!1,cT=!1,Jj=typeof WeakSet=="function"?WeakSet:Set,Or=null;function Uee(l,d){if(l=l.containerInfo,PT=Sb,l=dM(l),nE(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var E=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{p.nodeType,C.nodeType}catch{p=null;break e}var V=0,$=-1,te=-1,me=0,_e=0,Te=l,ye=null;t:for(;;){for(var xe;Te!==p||E!==0&&Te.nodeType!==3||($=V+E),Te!==C||v!==0&&Te.nodeType!==3||(te=V+v),Te.nodeType===3&&(V+=Te.nodeValue.length),(xe=Te.firstChild)!==null;)ye=Te,Te=xe;for(;;){if(Te===l)break t;if(ye===p&&++me===E&&($=V),ye===C&&++_e===v&&(te=V),(xe=Te.nextSibling)!==null)break;Te=ye,ye=Te.parentNode}Te=xe}p=$===-1||te===-1?null:{start:$,end:te}}else p=null}p=p||{start:0,end:0}}else p=null;for(DT={focusedElem:l,selectionRange:p},Sb=!1,Or=d;Or!==null;)if(d=Or,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Or=l;else for(;Or!==null;){switch(d=Or,C=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)E=l[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&C!==null){l=void 0,p=d,E=C.memoizedProps,C=C.memoizedState,v=p.stateNode;try{var $e=Yu(p.type,E);l=v.getSnapshotBeforeUpdate($e,C),v.__reactInternalSnapshotBeforeUpdate=l}catch(nt){Kt(p,p.return,nt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)RT(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":RT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Or=l;break}Or=d.return}}function e4(l,d,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:Yo(l,p),v&4&&zg(5,p);break;case 1:if(Yo(l,p),v&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(V){Kt(p,p.return,V)}else{var E=Yu(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(E,d,l.__reactInternalSnapshotBeforeUpdate)}catch(V){Kt(p,p.return,V)}}v&64&&Wj(p),v&512&&Lg(p,p.return);break;case 3:if(Yo(l,p),v&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{LM(l,d)}catch(V){Kt(p,p.return,V)}}break;case 27:d===null&&v&4&&Zj(p);case 26:case 5:Yo(l,p),d===null&&v&4&&Xj(p),v&512&&Lg(p,p.return);break;case 12:Yo(l,p);break;case 31:Yo(l,p),v&4&&r4(l,p);break;case 13:Yo(l,p),v&4&&i4(l,p),v&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=Qee.bind(null,p),vte(l,p))));break;case 22:if(v=p.memoizedState!==null||Ko,!v){d=d!==null&&d.memoizedState!==null||sr,E=Ko;var C=sr;Ko=v,(sr=d)&&!C?Xo(l,p,(p.subtreeFlags&8772)!==0):Yo(l,p),Ko=E,sr=C}break;case 30:break;default:Yo(l,p)}}function t4(l){var d=l.alternate;d!==null&&(l.alternate=null,t4(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&xf(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var En=null,Pi=!1;function Wo(l,d,p){for(p=p.child;p!==null;)n4(l,d,p),p=p.sibling}function n4(l,d,p){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(hi,p)}catch{}switch(p.tag){case 26:sr||eo(p,d),Wo(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:sr||eo(p,d);var v=En,E=Pi;yc(p.type)&&(En=p.stateNode,Pi=!1),Wo(l,d,p),Kg(p.stateNode),En=v,Pi=E;break;case 5:sr||eo(p,d);case 6:if(v=En,E=Pi,En=null,Wo(l,d,p),En=v,Pi=E,En!==null)if(Pi)try{(En.nodeType===9?En.body:En.nodeName==="HTML"?En.ownerDocument.body:En).removeChild(p.stateNode)}catch(C){Kt(p,d,C)}else try{En.removeChild(p.stateNode)}catch(C){Kt(p,d,C)}break;case 18:En!==null&&(Pi?(l=En,W4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),ih(l)):W4(En,p.stateNode));break;case 4:v=En,E=Pi,En=p.stateNode.containerInfo,Pi=!0,Wo(l,d,p),En=v,Pi=E;break;case 0:case 11:case 14:case 15:dc(2,p,d),sr||dc(4,p,d),Wo(l,d,p);break;case 1:sr||(eo(p,d),v=p.stateNode,typeof v.componentWillUnmount=="function"&&Yj(p,d,v)),Wo(l,d,p);break;case 21:Wo(l,d,p);break;case 22:sr=(v=sr)||p.memoizedState!==null,Wo(l,d,p),sr=v;break;default:Wo(l,d,p)}}function r4(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{ih(l)}catch(p){Kt(d,d.return,p)}}}function i4(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{ih(l)}catch(p){Kt(d,d.return,p)}}function $ee(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Jj),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Jj),d;default:throw Error(r(435,l.tag))}}function rb(l,d){var p=$ee(l);d.forEach(function(v){if(!p.has(v)){p.add(v);var E=Zee.bind(null,l,v);v.then(E,E)}})}function Di(l,d){var p=d.deletions;if(p!==null)for(var v=0;v<p.length;v++){var E=p[v],C=l,V=d,$=V;e:for(;$!==null;){switch($.tag){case 27:if(yc($.type)){En=$.stateNode,Pi=!1;break e}break;case 5:En=$.stateNode,Pi=!1;break e;case 3:case 4:En=$.stateNode.containerInfo,Pi=!0;break e}$=$.return}if(En===null)throw Error(r(160));n4(C,V,E),En=null,Pi=!1,C=E.alternate,C!==null&&(C.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)a4(d,l),d=d.sibling}var ps=null;function a4(l,d){var p=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Di(d,l),Oi(l),v&4&&(dc(3,l,l.return),zg(3,l),dc(5,l,l.return));break;case 1:Di(d,l),Oi(l),v&512&&(sr||p===null||eo(p,p.return)),v&64&&Ko&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var E=ps;if(Di(d,l),Oi(l),v&512&&(sr||p===null||eo(p,p.return)),v&4){var C=p!==null?p.memoizedState:null;if(v=l.memoizedState,p===null)if(v===null)if(l.stateNode===null){e:{v=l.type,p=l.memoizedProps,E=E.ownerDocument||E;t:switch(v){case"title":C=E.getElementsByTagName("title")[0],(!C||C[Bs]||C[er]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=E.createElement(v),E.head.insertBefore(C,E.querySelector("head > title"))),Hr(C,v,p),C[er]=l,tr(C),v=C;break e;case"link":var V=a3("link","href",E).get(v+(p.href||""));if(V){for(var $=0;$<V.length;$++)if(C=V[$],C.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&C.getAttribute("rel")===(p.rel==null?null:p.rel)&&C.getAttribute("title")===(p.title==null?null:p.title)&&C.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){V.splice($,1);break t}}C=E.createElement(v),Hr(C,v,p),E.head.appendChild(C);break;case"meta":if(V=a3("meta","content",E).get(v+(p.content||""))){for($=0;$<V.length;$++)if(C=V[$],C.getAttribute("content")===(p.content==null?null:""+p.content)&&C.getAttribute("name")===(p.name==null?null:p.name)&&C.getAttribute("property")===(p.property==null?null:p.property)&&C.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&C.getAttribute("charset")===(p.charSet==null?null:p.charSet)){V.splice($,1);break t}}C=E.createElement(v),Hr(C,v,p),E.head.appendChild(C);break;default:throw Error(r(468,v))}C[er]=l,tr(C),v=C}l.stateNode=v}else s3(E,l.type,l.stateNode);else l.stateNode=i3(E,v,l.memoizedProps);else C!==v?(C===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):C.count--,v===null?s3(E,l.type,l.stateNode):i3(E,v,l.memoizedProps)):v===null&&l.stateNode!==null&&sT(l,l.memoizedProps,p.memoizedProps)}break;case 27:Di(d,l),Oi(l),v&512&&(sr||p===null||eo(p,p.return)),p!==null&&v&4&&sT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Di(d,l),Oi(l),v&512&&(sr||p===null||eo(p,p.return)),l.flags&32){E=l.stateNode;try{ki(E,"")}catch($e){Kt(l,l.return,$e)}}v&4&&l.stateNode!=null&&(E=l.memoizedProps,sT(l,E,p!==null?p.memoizedProps:E)),v&1024&&(cT=!0);break;case 6:if(Di(d,l),Oi(l),v&4){if(l.stateNode===null)throw Error(r(162));v=l.memoizedProps,p=l.stateNode;try{p.nodeValue=v}catch($e){Kt(l,l.return,$e)}}break;case 3:if(bb=null,E=ps,ps=vb(d.containerInfo),Di(d,l),ps=E,Oi(l),v&4&&p!==null&&p.memoizedState.isDehydrated)try{ih(d.containerInfo)}catch($e){Kt(l,l.return,$e)}cT&&(cT=!1,s4(l));break;case 4:v=ps,ps=vb(l.stateNode.containerInfo),Di(d,l),Oi(l),ps=v;break;case 12:Di(d,l),Oi(l);break;case 31:Di(d,l),Oi(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,rb(l,v)));break;case 13:Di(d,l),Oi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ab=ot()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,rb(l,v)));break;case 22:E=l.memoizedState!==null;var te=p!==null&&p.memoizedState!==null,me=Ko,_e=sr;if(Ko=me||E,sr=_e||te,Di(d,l),sr=_e,Ko=me,Oi(l),v&8192)e:for(d=l.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(p===null||te||Ko||sr||Xu(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){te=p=d;try{if(C=te.stateNode,E)V=C.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{$=te.stateNode;var Te=te.memoizedProps.style,ye=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;$.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch($e){Kt(te,te.return,$e)}}}else if(d.tag===6){if(p===null){te=d;try{te.stateNode.nodeValue=E?"":te.memoizedProps}catch($e){Kt(te,te.return,$e)}}}else if(d.tag===18){if(p===null){te=d;try{var xe=te.stateNode;E?Y4(xe,!0):Y4(te.stateNode,!1)}catch($e){Kt(te,te.return,$e)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}v&4&&(v=l.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,rb(l,p))));break;case 19:Di(d,l),Oi(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,rb(l,v)));break;case 30:break;case 21:break;default:Di(d,l),Oi(l)}}function Oi(l){var d=l.flags;if(d&2){try{for(var p,v=l.return;v!==null;){if(Qj(v)){p=v;break}v=v.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,C=oT(l);nb(l,C,E);break;case 5:var V=p.stateNode;p.flags&32&&(ki(V,""),p.flags&=-33);var $=oT(l);nb(l,$,V);break;case 3:case 4:var te=p.stateNode.containerInfo,me=oT(l);lT(l,me,te);break;default:throw Error(r(161))}}catch(_e){Kt(l,l.return,_e)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function s4(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;s4(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Yo(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)e4(l,d.alternate,d),d=d.sibling}function Xu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:dc(4,d,d.return),Xu(d);break;case 1:eo(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&Yj(d,d.return,p),Xu(d);break;case 27:Kg(d.stateNode);case 26:case 5:eo(d,d.return),Xu(d);break;case 22:d.memoizedState===null&&Xu(d);break;case 30:Xu(d);break;default:Xu(d)}l=l.sibling}}function Xo(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var v=d.alternate,E=l,C=d,V=C.flags;switch(C.tag){case 0:case 11:case 15:Xo(E,C,p),zg(4,C);break;case 1:if(Xo(E,C,p),v=C,E=v.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(me){Kt(v,v.return,me)}if(v=C,E=v.updateQueue,E!==null){var $=v.stateNode;try{var te=E.shared.hiddenCallbacks;if(te!==null)for(E.shared.hiddenCallbacks=null,E=0;E<te.length;E++)zM(te[E],$)}catch(me){Kt(v,v.return,me)}}p&&V&64&&Wj(C),Lg(C,C.return);break;case 27:Zj(C);case 26:case 5:Xo(E,C,p),p&&v===null&&V&4&&Xj(C),Lg(C,C.return);break;case 12:Xo(E,C,p);break;case 31:Xo(E,C,p),p&&V&4&&r4(E,C);break;case 13:Xo(E,C,p),p&&V&4&&i4(E,C);break;case 22:C.memoizedState===null&&Xo(E,C,p),Lg(C,C.return);break;case 30:break;default:Xo(E,C,p)}d=d.sibling}}function uT(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Eg(p))}function dT(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Eg(l))}function gs(l,d,p,v){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)o4(l,d,p,v),d=d.sibling}function o4(l,d,p,v){var E=d.flags;switch(d.tag){case 0:case 11:case 15:gs(l,d,p,v),E&2048&&zg(9,d);break;case 1:gs(l,d,p,v);break;case 3:gs(l,d,p,v),E&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Eg(l)));break;case 12:if(E&2048){gs(l,d,p,v),l=d.stateNode;try{var C=d.memoizedProps,V=C.id,$=C.onPostCommit;typeof $=="function"&&$(V,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(te){Kt(d,d.return,te)}}else gs(l,d,p,v);break;case 31:gs(l,d,p,v);break;case 13:gs(l,d,p,v);break;case 23:break;case 22:C=d.stateNode,V=d.alternate,d.memoizedState!==null?C._visibility&2?gs(l,d,p,v):Vg(l,d):C._visibility&2?gs(l,d,p,v):(C._visibility|=2,Kf(l,d,p,v,(d.subtreeFlags&10256)!==0||!1)),E&2048&&uT(V,d);break;case 24:gs(l,d,p,v),E&2048&&dT(d.alternate,d);break;default:gs(l,d,p,v)}}function Kf(l,d,p,v,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var C=l,V=d,$=p,te=v,me=V.flags;switch(V.tag){case 0:case 11:case 15:Kf(C,V,$,te,E),zg(8,V);break;case 23:break;case 22:var _e=V.stateNode;V.memoizedState!==null?_e._visibility&2?Kf(C,V,$,te,E):Vg(C,V):(_e._visibility|=2,Kf(C,V,$,te,E)),E&&me&2048&&uT(V.alternate,V);break;case 24:Kf(C,V,$,te,E),E&&me&2048&&dT(V.alternate,V);break;default:Kf(C,V,$,te,E)}d=d.sibling}}function Vg(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,v=d,E=v.flags;switch(v.tag){case 22:Vg(p,v),E&2048&&uT(v.alternate,v);break;case 24:Vg(p,v),E&2048&&dT(v.alternate,v);break;default:Vg(p,v)}d=d.sibling}}var Bg=8192;function Wf(l,d,p){if(l.subtreeFlags&Bg)for(l=l.child;l!==null;)l4(l,d,p),l=l.sibling}function l4(l,d,p){switch(l.tag){case 26:Wf(l,d,p),l.flags&Bg&&l.memoizedState!==null&&kte(p,ps,l.memoizedState,l.memoizedProps);break;case 5:Wf(l,d,p);break;case 3:case 4:var v=ps;ps=vb(l.stateNode.containerInfo),Wf(l,d,p),ps=v;break;case 22:l.memoizedState===null&&(v=l.alternate,v!==null&&v.memoizedState!==null?(v=Bg,Bg=16777216,Wf(l,d,p),Bg=v):Wf(l,d,p));break;default:Wf(l,d,p)}}function c4(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Fg(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var v=d[p];Or=v,d4(v,l)}c4(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)u4(l),l=l.sibling}function u4(l){switch(l.tag){case 0:case 11:case 15:Fg(l),l.flags&2048&&dc(9,l,l.return);break;case 3:Fg(l);break;case 12:Fg(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,ib(l)):Fg(l);break;default:Fg(l)}}function ib(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var v=d[p];Or=v,d4(v,l)}c4(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:dc(8,d,d.return),ib(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,ib(d));break;default:ib(d)}l=l.sibling}}function d4(l,d){for(;Or!==null;){var p=Or;switch(p.tag){case 0:case 11:case 15:dc(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Eg(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Or=v;else e:for(p=l;Or!==null;){v=Or;var E=v.sibling,C=v.return;if(t4(v),v===p){Or=null;break e}if(E!==null){E.return=C,Or=E;break e}Or=C}}}var qee={getCacheForType:function(l){var d=qr(rr),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return qr(rr).controller.signal}},Gee=typeof WeakMap=="function"?WeakMap:Map,Ft=0,ln=null,wt=null,Tt=0,Ht=0,ea=null,fc=!1,Yf=!1,fT=!1,Qo=0,Vn=0,hc=0,Qu=0,hT=0,ta=0,Xf=0,Ug=null,Ni=null,pT=!1,ab=0,f4=0,sb=1/0,ob=null,pc=null,mr=0,gc=null,Qf=null,Zo=0,gT=0,mT=null,h4=null,$g=0,vT=null;function na(){return(Ft&2)!==0&&Tt!==0?Tt&-Tt:q.T!==null?ST():ly()}function p4(){if(ta===0)if((Tt&536870912)===0||kt){var l=Pn;Pn<<=1,(Pn&3932160)===0&&(Pn=262144),ta=l}else ta=536870912;return l=Zi.current,l!==null&&(l.flags|=32),ta}function Ri(l,d,p){(l===ln&&(Ht===2||Ht===9)||l.cancelPendingCommit!==null)&&(Zf(l,0),mc(l,Tt,ta,!1)),Tu(l,p),((Ft&2)===0||l!==ln)&&(l===ln&&((Ft&2)===0&&(Qu|=p),Vn===4&&mc(l,Tt,ta,!1)),to(l))}function g4(l,d,p){if((Ft&6)!==0)throw Error(r(327));var v=!p&&(d&127)===0&&(d&l.expiredLanes)===0||pi(l,d),E=v?Wee(l,d):bT(l,d,!0),C=v;do{if(E===0){Yf&&!v&&mc(l,d,0,!1);break}else{if(p=l.current.alternate,C&&!Hee(p)){E=bT(l,d,!1),C=!1;continue}if(E===2){if(C=d,l.errorRecoveryDisabledLanes&C)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){d=V;e:{var $=l;E=Ug;var te=$.current.memoizedState.isDehydrated;if(te&&(Zf($,V).flags|=256),V=bT($,V,!1),V!==2){if(fT&&!te){$.errorRecoveryDisabledLanes|=C,Qu|=C,E=4;break e}C=Ni,Ni=E,C!==null&&(Ni===null?Ni=C:Ni.push.apply(Ni,C))}E=V}if(C=!1,E!==2)continue}}if(E===1){Zf(l,0),mc(l,d,0,!0);break}e:{switch(v=l,C=E,C){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:mc(v,d,ta,!fc);break e;case 2:Ni=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(E=ab+300-ot(),10<E)){if(mc(v,d,ta,!fc),xa(v,0,!0)!==0)break e;Zo=d,v.timeoutHandle=H4(m4.bind(null,v,p,Ni,ob,pT,d,ta,Qu,Xf,fc,C,"Throttled",-0,0),E);break e}m4(v,p,Ni,ob,pT,d,ta,Qu,Xf,fc,C,null,-0,0)}}break}while(!0);to(l)}function m4(l,d,p,v,E,C,V,$,te,me,_e,Te,ye,xe){if(l.timeoutHandle=-1,Te=d.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ls},l4(d,C,Te);var $e=(C&62914560)===C?ab-ot():(C&4194048)===C?f4-ot():0;if($e=Pte(Te,$e),$e!==null){Zo=C,l.cancelPendingCommit=$e(E4.bind(null,l,d,C,p,v,E,V,$,te,_e,Te,null,ye,xe)),mc(l,C,V,!me);return}}E4(l,d,C,p,v,E,V,$,te)}function Hee(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var E=p[v],C=E.getSnapshot;E=E.value;try{if(!Xi(C(),E))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function mc(l,d,p,v){d&=~hT,d&=~Qu,l.suspendedLanes|=d,l.pingedLanes&=~d,v&&(l.warmLanes|=d),v=l.expirationTimes;for(var E=d;0<E;){var C=31-Vt(E),V=1<<C;v[C]=-1,E&=~V}p!==0&&Au(l,p,d)}function lb(){return(Ft&6)===0?(qg(0),!1):!0}function yT(){if(wt!==null){if(Ht===0)var l=wt.return;else l=wt,Fo=Uu=null,RE(l),Uf=null,Ag=0,l=wt;for(;l!==null;)Kj(l.alternate,l),l=l.return;wt=null}}function Zf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,fte(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Zo=0,yT(),ln=l,wt=p=Vo(l.current,null),Tt=d,Ht=0,ea=null,fc=!1,Yf=pi(l,d),fT=!1,Xf=ta=hT=Qu=hc=Vn=0,Ni=Ug=null,pT=!1,(d&8)!==0&&(d|=d&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=d;0<v;){var E=31-Vt(v),C=1<<E;d|=l[E],v&=~C}return Qo=d,ky(),p}function v4(l,d){pt=null,q.H=Rg,d===Ff||d===zy?(d=NM(),Ht=3):d===_E?(d=NM(),Ht=4):Ht=d===XE?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ea=d,wt===null&&(Vn=1,Qy(l,Aa(d,l.current)))}function y4(){var l=Zi.current;return l===null?!0:(Tt&4194048)===Tt?Pa===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?l===Pa:!1}function b4(){var l=q.H;return q.H=Rg,l===null?Rg:l}function x4(){var l=q.A;return q.A=qee,l}function cb(){Vn=4,fc||(Tt&4194048)!==Tt&&Zi.current!==null||(Yf=!0),(hc&134217727)===0&&(Qu&134217727)===0||ln===null||mc(ln,Tt,ta,!1)}function bT(l,d,p){var v=Ft;Ft|=2;var E=b4(),C=x4();(ln!==l||Tt!==d)&&(ob=null,Zf(l,d)),d=!1;var V=Vn;e:do try{if(Ht!==0&&wt!==null){var $=wt,te=ea;switch(Ht){case 8:yT(),V=6;break e;case 3:case 2:case 9:case 6:Zi.current===null&&(d=!0);var me=Ht;if(Ht=0,ea=null,Jf(l,$,te,me),p&&Yf){V=0;break e}break;default:me=Ht,Ht=0,ea=null,Jf(l,$,te,me)}}Kee(),V=Vn;break}catch(_e){v4(l,_e)}while(!0);return d&&l.shellSuspendCounter++,Fo=Uu=null,Ft=v,q.H=E,q.A=C,wt===null&&(ln=null,Tt=0,ky()),V}function Kee(){for(;wt!==null;)w4(wt)}function Wee(l,d){var p=Ft;Ft|=2;var v=b4(),E=x4();ln!==l||Tt!==d?(ob=null,sb=ot()+500,Zf(l,d)):Yf=pi(l,d);e:do try{if(Ht!==0&&wt!==null){d=wt;var C=ea;t:switch(Ht){case 1:Ht=0,ea=null,Jf(l,d,C,1);break;case 2:case 9:if(DM(C)){Ht=0,ea=null,_4(d);break}d=function(){Ht!==2&&Ht!==9||ln!==l||(Ht=7),to(l)},C.then(d,d);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:DM(C)?(Ht=0,ea=null,_4(d)):(Ht=0,ea=null,Jf(l,d,C,7));break;case 5:var V=null;switch(wt.tag){case 26:V=wt.memoizedState;case 5:case 27:var $=wt;if(V?o3(V):$.stateNode.complete){Ht=0,ea=null;var te=$.sibling;if(te!==null)wt=te;else{var me=$.return;me!==null?(wt=me,ub(me)):wt=null}break t}}Ht=0,ea=null,Jf(l,d,C,5);break;case 6:Ht=0,ea=null,Jf(l,d,C,6);break;case 8:yT(),Vn=6;break e;default:throw Error(r(462))}}Yee();break}catch(_e){v4(l,_e)}while(!0);return Fo=Uu=null,q.H=v,q.A=E,Ft=p,wt!==null?0:(ln=null,Tt=0,ky(),Vn)}function Yee(){for(;wt!==null&&!Dt();)w4(wt)}function w4(l){var d=Gj(l.alternate,l,Qo);l.memoizedProps=l.pendingProps,d===null?ub(l):wt=d}function _4(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=Vj(p,d,d.pendingProps,d.type,void 0,Tt);break;case 11:d=Vj(p,d,d.pendingProps,d.type.render,d.ref,Tt);break;case 5:RE(d);default:Kj(p,d),d=wt=xM(d,Qo),d=Gj(p,d,Qo)}l.memoizedProps=l.pendingProps,d===null?ub(l):wt=d}function Jf(l,d,p,v){Fo=Uu=null,RE(d),Uf=null,Ag=0;var E=d.return;try{if(zee(l,E,d,p,Tt)){Vn=1,Qy(l,Aa(p,l.current)),wt=null;return}}catch(C){if(E!==null)throw wt=E,C;Vn=1,Qy(l,Aa(p,l.current)),wt=null;return}d.flags&32768?(kt||v===1?l=!0:Yf||(Tt&536870912)!==0?l=!1:(fc=l=!0,(v===2||v===9||v===3||v===6)&&(v=Zi.current,v!==null&&v.tag===13&&(v.flags|=16384))),S4(d,l)):ub(d)}function ub(l){var d=l;do{if((d.flags&32768)!==0){S4(d,fc);return}l=d.return;var p=Bee(d.alternate,d,Qo);if(p!==null){wt=p;return}if(d=d.sibling,d!==null){wt=d;return}wt=d=l}while(d!==null);Vn===0&&(Vn=5)}function S4(l,d){do{var p=Fee(l.alternate,l);if(p!==null){p.flags&=32767,wt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){wt=l;return}wt=l=p}while(l!==null);Vn=6,wt=null}function E4(l,d,p,v,E,C,V,$,te){l.cancelPendingCommit=null;do db();while(mr!==0);if((Ft&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(C=d.lanes|d.childLanes,C|=oE,ZS(l,p,C,V,$,te),l===ln&&(wt=ln=null,Tt=0),Qf=d,gc=l,Zo=p,gT=C,mT=E,h4=v,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Jee(Zt,function(){return k4(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||v){v=q.T,q.T=null,E=Y.p,Y.p=2,V=Ft,Ft|=4;try{Uee(l,d,p)}finally{Ft=V,Y.p=E,q.T=v}}mr=1,T4(),A4(),C4()}}function T4(){if(mr===1){mr=0;var l=gc,d=Qf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=q.T,q.T=null;var v=Y.p;Y.p=2;var E=Ft;Ft|=4;try{a4(d,l);var C=DT,V=dM(l.containerInfo),$=C.focusedElem,te=C.selectionRange;if(V!==$&&$&&$.ownerDocument&&uM($.ownerDocument.documentElement,$)){if(te!==null&&nE($)){var me=te.start,_e=te.end;if(_e===void 0&&(_e=me),"selectionStart"in $)$.selectionStart=me,$.selectionEnd=Math.min(_e,$.value.length);else{var Te=$.ownerDocument||document,ye=Te&&Te.defaultView||window;if(ye.getSelection){var xe=ye.getSelection(),$e=$.textContent.length,nt=Math.min(te.start,$e),nn=te.end===void 0?nt:Math.min(te.end,$e);!xe.extend&&nt>nn&&(V=nn,nn=nt,nt=V);var ue=cM($,nt),se=cM($,nn);if(ue&&se&&(xe.rangeCount!==1||xe.anchorNode!==ue.node||xe.anchorOffset!==ue.offset||xe.focusNode!==se.node||xe.focusOffset!==se.offset)){var ge=Te.createRange();ge.setStart(ue.node,ue.offset),xe.removeAllRanges(),nt>nn?(xe.addRange(ge),xe.extend(se.node,se.offset)):(ge.setEnd(se.node,se.offset),xe.addRange(ge))}}}}for(Te=[],xe=$;xe=xe.parentNode;)xe.nodeType===1&&Te.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<Te.length;$++){var Ee=Te[$];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}Sb=!!PT,DT=PT=null}finally{Ft=E,Y.p=v,q.T=p}}l.current=d,mr=2}}function A4(){if(mr===2){mr=0;var l=gc,d=Qf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=q.T,q.T=null;var v=Y.p;Y.p=2;var E=Ft;Ft|=4;try{e4(l,d.alternate,d)}finally{Ft=E,Y.p=v,q.T=p}}mr=3}}function C4(){if(mr===4||mr===3){mr=0,Nt();var l=gc,d=Qf,p=Zo,v=h4;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?mr=5:(mr=0,Qf=gc=null,I4(l,l.pendingLanes));var E=l.pendingLanes;if(E===0&&(pc=null),Mo(p),d=d.stateNode,wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(hi,d,void 0,(d.current.flags&128)===128)}catch{}if(v!==null){d=q.T,E=Y.p,Y.p=2,q.T=null;try{for(var C=l.onRecoverableError,V=0;V<v.length;V++){var $=v[V];C($.value,{componentStack:$.stack})}}finally{q.T=d,Y.p=E}}(Zo&3)!==0&&db(),to(l),E=l.pendingLanes,(p&261930)!==0&&(E&42)!==0?l===vT?$g++:($g=0,vT=l):$g=0,qg(0)}}function I4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Eg(d)))}function db(){return T4(),A4(),C4(),k4()}function k4(){if(mr!==5)return!1;var l=gc,d=gT;gT=0;var p=Mo(Zo),v=q.T,E=Y.p;try{Y.p=32>p?32:p,q.T=null,p=mT,mT=null;var C=gc,V=Zo;if(mr=0,Qf=gc=null,Zo=0,(Ft&6)!==0)throw Error(r(331));var $=Ft;if(Ft|=4,u4(C.current),o4(C,C.current,V,p),Ft=$,qg(0,!1),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(hi,C)}catch{}return!0}finally{Y.p=E,q.T=v,I4(l,d)}}function P4(l,d,p){d=Aa(p,d),d=YE(l.stateNode,d,2),l=lc(l,d,2),l!==null&&(Tu(l,2),to(l))}function Kt(l,d,p){if(l.tag===3)P4(l,l,p);else for(;d!==null;){if(d.tag===3){P4(d,l,p);break}else if(d.tag===1){var v=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(pc===null||!pc.has(v))){l=Aa(p,l),p=Dj(2),v=lc(d,p,2),v!==null&&(Oj(p,v,d,l),Tu(v,2),to(v));break}}d=d.return}}function xT(l,d,p){var v=l.pingCache;if(v===null){v=l.pingCache=new Gee;var E=new Set;v.set(d,E)}else E=v.get(d),E===void 0&&(E=new Set,v.set(d,E));E.has(p)||(fT=!0,E.add(p),l=Xee.bind(null,l,d,p),d.then(l,l))}function Xee(l,d,p){var v=l.pingCache;v!==null&&v.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,ln===l&&(Tt&p)===p&&(Vn===4||Vn===3&&(Tt&62914560)===Tt&&300>ot()-ab?(Ft&2)===0&&Zf(l,0):hT|=p,Xf===Tt&&(Xf=0)),to(l)}function D4(l,d){d===0&&(d=oy()),l=Vu(l,d),l!==null&&(Tu(l,d),to(l))}function Qee(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),D4(l,p)}function Zee(l,d){var p=0;switch(l.tag){case 31:case 13:var v=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(d),D4(l,p)}function Jee(l,d){return Ge(l,d)}var fb=null,eh=null,wT=!1,hb=!1,_T=!1,vc=0;function to(l){l!==eh&&l.next===null&&(eh===null?fb=eh=l:eh=eh.next=l),hb=!0,wT||(wT=!0,tte())}function qg(l,d){if(!_T&&hb){_T=!0;do for(var p=!1,v=fb;v!==null;){if(l!==0){var E=v.pendingLanes;if(E===0)var C=0;else{var V=v.suspendedLanes,$=v.pingedLanes;C=(1<<31-Vt(42|l)+1)-1,C&=E&~(V&~$),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(p=!0,M4(v,C))}else C=Tt,C=xa(v,v===ln?C:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(C&3)===0||pi(v,C)||(p=!0,M4(v,C));v=v.next}while(p);_T=!1}}function ete(){O4()}function O4(){hb=wT=!1;var l=0;vc!==0&&dte()&&(l=vc);for(var d=ot(),p=null,v=fb;v!==null;){var E=v.next,C=N4(v,d);C===0?(v.next=null,p===null?fb=E:p.next=E,E===null&&(eh=p)):(p=v,(l!==0||(C&3)!==0)&&(hb=!0)),v=E}mr!==0&&mr!==5||qg(l),vc!==0&&(vc=0)}function N4(l,d){for(var p=l.suspendedLanes,v=l.pingedLanes,E=l.expirationTimes,C=l.pendingLanes&-62914561;0<C;){var V=31-Vt(C),$=1<<V,te=E[V];te===-1?(($&p)===0||($&v)!==0)&&(E[V]=QS($,d)):te<=d&&(l.expiredLanes|=$),C&=~$}if(d=ln,p=Tt,p=xa(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,p===0||l===d&&(Ht===2||Ht===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&yt(v),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||pi(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(v!==null&&yt(v),Mo(p)){case 2:case 8:p=xn;break;case 32:p=Zt;break;case 268435456:p=rs;break;default:p=Zt}return v=R4.bind(null,l),p=Ge(p,v),l.callbackPriority=d,l.callbackNode=p,d}return v!==null&&v!==null&&yt(v),l.callbackPriority=2,l.callbackNode=null,2}function R4(l,d){if(mr!==0&&mr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(db()&&l.callbackNode!==p)return null;var v=Tt;return v=xa(l,l===ln?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(g4(l,v,d),N4(l,ot()),l.callbackNode!=null&&l.callbackNode===p?R4.bind(null,l):null)}function M4(l,d){if(db())return null;g4(l,d,!0)}function tte(){hte(function(){(Ft&6)!==0?Ge(ft,ete):O4()})}function ST(){if(vc===0){var l=Vf;l===0&&(l=xt,xt<<=1,(xt&261888)===0&&(xt=256)),vc=l}return vc}function j4(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ef(""+l)}function z4(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function nte(l,d,p,v,E){if(d==="submit"&&p&&p.stateNode===E){var C=j4((E[Pr]||null).action),V=v.submitter;V&&(d=(d=V[Pr]||null)?j4(d.formAction):V.getAttribute("formAction"),d!==null&&(C=d,V=null));var $=new Ws("action","action",null,v,E);l.push({event:$,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(vc!==0){var te=V?z4(E,V):new FormData(E);$E(p,{pending:!0,data:te,method:E.method,action:C},null,te)}}else typeof C=="function"&&($.preventDefault(),te=V?z4(E,V):new FormData(E),$E(p,{pending:!0,data:te,method:E.method,action:C},C,te))},currentTarget:E}]})}}for(var ET=0;ET<sE.length;ET++){var TT=sE[ET],rte=TT.toLowerCase(),ite=TT[0].toUpperCase()+TT.slice(1);hs(rte,"on"+ite)}hs(pM,"onAnimationEnd"),hs(gM,"onAnimationIteration"),hs(mM,"onAnimationStart"),hs("dblclick","onDoubleClick"),hs("focusin","onFocus"),hs("focusout","onBlur"),hs(xee,"onTransitionRun"),hs(wee,"onTransitionStart"),hs(_ee,"onTransitionCancel"),hs(vM,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$s("onBeforeInput",["compositionend","keypress","textInput","paste"]),$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ate=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gg));function L4(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var v=l[p],E=v.event;v=v.listeners;e:{var C=void 0;if(d)for(var V=v.length-1;0<=V;V--){var $=v[V],te=$.instance,me=$.currentTarget;if($=$.listener,te!==C&&E.isPropagationStopped())break e;C=$,E.currentTarget=me;try{C(E)}catch(_e){Iy(_e)}E.currentTarget=null,C=te}else for(V=0;V<v.length;V++){if($=v[V],te=$.instance,me=$.currentTarget,$=$.listener,te!==C&&E.isPropagationStopped())break e;C=$,E.currentTarget=me;try{C(E)}catch(_e){Iy(_e)}E.currentTarget=null,C=te}}}}function _t(l,d){var p=d[bf];p===void 0&&(p=d[bf]=new Set);var v=l+"__bubble";p.has(v)||(V4(d,l,2,!1),p.add(v))}function AT(l,d,p){var v=0;d&&(v|=4),V4(p,l,v,d)}var pb="_reactListening"+Math.random().toString(36).slice(2);function CT(l){if(!l[pb]){l[pb]=!0,rg.forEach(function(p){p!=="selectionchange"&&(ate.has(p)||AT(p,!1,l),AT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[pb]||(d[pb]=!0,AT("selectionchange",!1,d))}}function V4(l,d,p,v){switch(p3(d)){case 2:var E=Nte;break;case 8:E=Rte;break;default:E=UT}p=E.bind(null,d,p,l),E=void 0,!Du||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),v?E!==void 0?l.addEventListener(d,p,{capture:!0,passive:E}):l.addEventListener(d,p,!0):E!==void 0?l.addEventListener(d,p,{passive:E}):l.addEventListener(d,p,!1)}function IT(l,d,p,v,E){var C=v;if((d&1)===0&&(d&2)===0&&v!==null)e:for(;;){if(v===null)return;var V=v.tag;if(V===3||V===4){var $=v.stateNode.containerInfo;if($===E)break;if(V===4)for(V=v.return;V!==null;){var te=V.tag;if((te===3||te===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;$!==null;){if(V=Fs($),V===null)return;if(te=V.tag,te===5||te===6||te===26||te===27){v=C=V;continue e}$=$.parentNode}}v=v.return}Zl(function(){var me=C,_e=_a(p),Te=[];e:{var ye=yM.get(l);if(ye!==void 0){var xe=Ws,$e=l;switch(l){case"keypress":if(Nu(p)===0)break e;case"keydown":case"keyup":xe=Ty;break;case"focusin":$e="focus",xe=Mu;break;case"focusout":$e="blur",xe=Mu;break;case"beforeblur":case"afterblur":xe=Mu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=my;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=M;break;case pM:case gM:case mM:xe=yy;break;case vM:xe=G;break;case"scroll":case"scrollend":xe=gg;break;case"wheel":xe=be;break;case"copy":case"cut":case"paste":xe=by;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=Lo;break;case"toggle":case"beforetoggle":xe=ht}var nt=(d&4)!==0,nn=!nt&&(l==="scroll"||l==="scrollend"),ue=nt?ye!==null?ye+"Capture":null:ye;nt=[];for(var se=me,ge;se!==null;){var Ee=se;if(ge=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||ge===null||ue===null||(Ee=cs(se,ue),Ee!=null&&nt.push(Hg(se,Ee,ge))),nn)break;se=se.return}0<nt.length&&(ye=new xe(ye,$e,null,p,_e),Te.push({event:ye,listeners:nt}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",xe=l==="mouseout"||l==="pointerout",ye&&p!==fg&&($e=p.relatedTarget||p.fromElement)&&(Fs($e)||$e[Vs]))break e;if((xe||ye)&&(ye=_e.window===_e?_e:(ye=_e.ownerDocument)?ye.defaultView||ye.parentWindow:window,xe?($e=p.relatedTarget||p.toElement,xe=me,$e=$e?Fs($e):null,$e!==null&&(nn=a($e),nt=$e.tag,$e!==nn||nt!==5&&nt!==27&&nt!==6)&&($e=null)):(xe=null,$e=me),xe!==$e)){if(nt=mg,Ee="onMouseLeave",ue="onMouseEnter",se="mouse",(l==="pointerout"||l==="pointerover")&&(nt=Lo,Ee="onPointerLeave",ue="onPointerEnter",se="pointer"),nn=xe==null?ye:Wi(xe),ge=$e==null?ye:Wi($e),ye=new nt(Ee,se+"leave",xe,p,_e),ye.target=nn,ye.relatedTarget=ge,Ee=null,Fs(_e)===me&&(nt=new nt(ue,se+"enter",$e,p,_e),nt.target=ge,nt.relatedTarget=nn,Ee=nt),nn=Ee,xe&&$e)t:{for(nt=ste,ue=xe,se=$e,ge=0,Ee=ue;Ee;Ee=nt(Ee))ge++;Ee=0;for(var Ze=se;Ze;Ze=nt(Ze))Ee++;for(;0<ge-Ee;)ue=nt(ue),ge--;for(;0<Ee-ge;)se=nt(se),Ee--;for(;ge--;){if(ue===se||se!==null&&ue===se.alternate){nt=ue;break t}ue=nt(ue),se=nt(se)}nt=null}else nt=null;xe!==null&&B4(Te,ye,xe,nt,!1),$e!==null&&nn!==null&&B4(Te,nn,$e,nt,!0)}}e:{if(ye=me?Wi(me):window,xe=ye.nodeName&&ye.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ye.type==="file")var Mt=rM;else if(tM(ye))if(iM)Mt=vee;else{Mt=gee;var Ke=pee}else xe=ye.nodeName,!xe||xe.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?me&&Sf(me.elementType)&&(Mt=rM):Mt=mee;if(Mt&&(Mt=Mt(l,me))){nM(Te,Mt,p,_e);break e}Ke&&Ke(l,ye,me),l==="focusout"&&me&&ye.type==="number"&&me.memoizedProps.value!=null&&cg(ye,"number",ye.value)}switch(Ke=me?Wi(me):window,l){case"focusin":(tM(Ke)||Ke.contentEditable==="true")&&(Df=Ke,rE=me,wg=null);break;case"focusout":wg=rE=Df=null;break;case"mousedown":iE=!0;break;case"contextmenu":case"mouseup":case"dragend":iE=!1,fM(Te,p,_e);break;case"selectionchange":if(bee)break;case"keydown":case"keyup":fM(Te,p,_e)}var mt;if(Bt)e:{switch(l){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else Pf?ju(l,p)&&(At="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(At="onCompositionStart");At&&(Qs&&p.locale!=="ko"&&(Pf||At!=="onCompositionStart"?At==="onCompositionEnd"&&Pf&&(mt=pg()):(Ks=_e,hg="value"in Ks?Ks.value:Ks.textContent,Pf=!0)),Ke=gb(me,At),0<Ke.length&&(At=new Xs(At,l,null,p,_e),Te.push({event:At,listeners:Ke}),mt?At.data=mt:(mt=kf(p),mt!==null&&(At.data=mt)))),(mt=Ea?uee(l,p):dee(l,p))&&(At=gb(me,"onBeforeInput"),0<At.length&&(Ke=new Xs("onBeforeInput","beforeinput",null,p,_e),Te.push({event:Ke,listeners:At}),Ke.data=mt)),nte(Te,l,me,p,_e)}L4(Te,d)})}function Hg(l,d,p){return{instance:l,listener:d,currentTarget:p}}function gb(l,d){for(var p=d+"Capture",v=[];l!==null;){var E=l,C=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||C===null||(E=cs(l,p),E!=null&&v.unshift(Hg(l,E,C)),E=cs(l,d),E!=null&&v.push(Hg(l,E,C))),l.tag===3)return v;l=l.return}return[]}function ste(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function B4(l,d,p,v,E){for(var C=d._reactName,V=[];p!==null&&p!==v;){var $=p,te=$.alternate,me=$.stateNode;if($=$.tag,te!==null&&te===v)break;$!==5&&$!==26&&$!==27||me===null||(te=me,E?(me=cs(p,C),me!=null&&V.unshift(Hg(p,me,te))):E||(me=cs(p,C),me!=null&&V.push(Hg(p,me,te)))),p=p.return}V.length!==0&&l.push({event:d,listeners:V})}var ote=/\r\n?/g,lte=/\u0000|\uFFFD/g;function F4(l){return(typeof l=="string"?l:""+l).replace(ote,`
`).replace(lte,"")}function U4(l,d){return d=F4(d),F4(l)===d}function tn(l,d,p,v,E,C){switch(p){case"children":typeof v=="string"?d==="body"||d==="textarea"&&v===""||ki(l,v):(typeof v=="number"||typeof v=="bigint")&&d!=="body"&&ki(l,""+v);break;case"className":Yi(l,"class",v);break;case"tabIndex":Yi(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Yi(l,p,v);break;case"style":dg(l,v,C);break;case"data":if(d!=="object"){Yi(l,"data",v);break}case"src":case"href":if(v===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Ef(""+v),l.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(p==="formAction"?(d!=="input"&&tn(l,d,"name",E.name,E,null),tn(l,d,"formEncType",E.formEncType,E,null),tn(l,d,"formMethod",E.formMethod,E,null),tn(l,d,"formTarget",E.formTarget,E,null)):(tn(l,d,"encType",E.encType,E,null),tn(l,d,"method",E.method,E,null),tn(l,d,"target",E.target,E,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=Ef(""+v),l.setAttribute(p,v);break;case"onClick":v!=null&&(l.onclick=ls);break;case"onScroll":v!=null&&_t("scroll",l);break;case"onScrollEnd":v!=null&&_t("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}p=Ef(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""+v):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":v===!0?l.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,v):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(p,v):l.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(p):l.setAttribute(p,v);break;case"popover":_t("beforetoggle",l),_t("toggle",l),wf(l,"popover",v);break;case"xlinkActuate":nr(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":nr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":nr(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":nr(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":nr(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":nr(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":nr(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":nr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":nr(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":wf(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=gy.get(p)||p,wf(l,p,v))}}function kT(l,d,p,v,E,C){switch(p){case"style":dg(l,v,C);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(p=v.__html,p!=null){if(E.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof v=="string"?ki(l,v):(typeof v=="number"||typeof v=="bigint")&&ki(l,""+v);break;case"onScroll":v!=null&&_t("scroll",l);break;case"onScrollEnd":v!=null&&_t("scrollend",l);break;case"onClick":v!=null&&(l.onclick=ls);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ig.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),d=p.slice(2,E?p.length-7:void 0),C=l[Pr]||null,C=C!=null?C[p]:null,typeof C=="function"&&l.removeEventListener(d,C,E),typeof v=="function")){typeof C!="function"&&C!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,v,E);break e}p in l?l[p]=v:v===!0?l.setAttribute(p,""):wf(l,p,v)}}}function Hr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",l),_t("load",l);var v=!1,E=!1,C;for(C in p)if(p.hasOwnProperty(C)){var V=p[C];if(V!=null)switch(C){case"src":v=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:tn(l,d,C,V,p,null)}}E&&tn(l,d,"srcSet",p.srcSet,p,null),v&&tn(l,d,"src",p.src,p,null);return;case"input":_t("invalid",l);var $=C=V=E=null,te=null,me=null;for(v in p)if(p.hasOwnProperty(v)){var _e=p[v];if(_e!=null)switch(v){case"name":E=_e;break;case"type":V=_e;break;case"checked":te=_e;break;case"defaultChecked":me=_e;break;case"value":C=_e;break;case"defaultValue":$=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,d));break;default:tn(l,d,v,_e,p,null)}}fy(l,C,$,te,me,V,E,!1);return;case"select":_t("invalid",l),v=V=C=null;for(E in p)if(p.hasOwnProperty(E)&&($=p[E],$!=null))switch(E){case"value":C=$;break;case"defaultValue":V=$;break;case"multiple":v=$;default:tn(l,d,E,$,p,null)}d=C,p=V,l.multiple=!!v,d!=null?Wl(l,!!v,d,!1):p!=null&&Wl(l,!!v,p,!0);return;case"textarea":_t("invalid",l),C=E=v=null;for(V in p)if(p.hasOwnProperty(V)&&($=p[V],$!=null))switch(V){case"value":v=$;break;case"defaultValue":E=$;break;case"children":C=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(r(91));break;default:tn(l,d,V,$,p,null)}Yl(l,v,E,C);return;case"option":for(te in p)if(p.hasOwnProperty(te)&&(v=p[te],v!=null))switch(te){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:tn(l,d,te,v,p,null)}return;case"dialog":_t("beforetoggle",l),_t("toggle",l),_t("cancel",l),_t("close",l);break;case"iframe":case"object":_t("load",l);break;case"video":case"audio":for(v=0;v<Gg.length;v++)_t(Gg[v],l);break;case"image":_t("error",l),_t("load",l);break;case"details":_t("toggle",l);break;case"embed":case"source":case"link":_t("error",l),_t("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in p)if(p.hasOwnProperty(me)&&(v=p[me],v!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:tn(l,d,me,v,p,null)}return;default:if(Sf(d)){for(_e in p)p.hasOwnProperty(_e)&&(v=p[_e],v!==void 0&&kT(l,d,_e,v,p,void 0));return}}for($ in p)p.hasOwnProperty($)&&(v=p[$],v!=null&&tn(l,d,$,v,p,null))}function cte(l,d,p,v){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,C=null,V=null,$=null,te=null,me=null,_e=null;for(xe in p){var Te=p[xe];if(p.hasOwnProperty(xe)&&Te!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":te=Te;default:v.hasOwnProperty(xe)||tn(l,d,xe,null,v,Te)}}for(var ye in v){var xe=v[ye];if(Te=p[ye],v.hasOwnProperty(ye)&&(xe!=null||Te!=null))switch(ye){case"type":C=xe;break;case"name":E=xe;break;case"checked":me=xe;break;case"defaultChecked":_e=xe;break;case"value":V=xe;break;case"defaultValue":$=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(137,d));break;default:xe!==Te&&tn(l,d,ye,xe,v,Te)}}_f(l,V,$,te,me,_e,C,E);return;case"select":xe=V=$=ye=null;for(C in p)if(te=p[C],p.hasOwnProperty(C)&&te!=null)switch(C){case"value":break;case"multiple":xe=te;default:v.hasOwnProperty(C)||tn(l,d,C,null,v,te)}for(E in v)if(C=v[E],te=p[E],v.hasOwnProperty(E)&&(C!=null||te!=null))switch(E){case"value":ye=C;break;case"defaultValue":$=C;break;case"multiple":V=C;default:C!==te&&tn(l,d,E,C,v,te)}d=$,p=V,v=xe,ye!=null?Wl(l,!!p,ye,!1):!!v!=!!p&&(d!=null?Wl(l,!!p,d,!0):Wl(l,!!p,p?[]:"",!1));return;case"textarea":xe=ye=null;for($ in p)if(E=p[$],p.hasOwnProperty($)&&E!=null&&!v.hasOwnProperty($))switch($){case"value":break;case"children":break;default:tn(l,d,$,null,v,E)}for(V in v)if(E=v[V],C=p[V],v.hasOwnProperty(V)&&(E!=null||C!=null))switch(V){case"value":ye=E;break;case"defaultValue":xe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==C&&tn(l,d,V,E,v,C)}hy(l,ye,xe);return;case"option":for(var $e in p)if(ye=p[$e],p.hasOwnProperty($e)&&ye!=null&&!v.hasOwnProperty($e))switch($e){case"selected":l.selected=!1;break;default:tn(l,d,$e,null,v,ye)}for(te in v)if(ye=v[te],xe=p[te],v.hasOwnProperty(te)&&ye!==xe&&(ye!=null||xe!=null))switch(te){case"selected":l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:tn(l,d,te,ye,v,xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in p)ye=p[nt],p.hasOwnProperty(nt)&&ye!=null&&!v.hasOwnProperty(nt)&&tn(l,d,nt,null,v,ye);for(me in v)if(ye=v[me],xe=p[me],v.hasOwnProperty(me)&&ye!==xe&&(ye!=null||xe!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,d));break;default:tn(l,d,me,ye,v,xe)}return;default:if(Sf(d)){for(var nn in p)ye=p[nn],p.hasOwnProperty(nn)&&ye!==void 0&&!v.hasOwnProperty(nn)&&kT(l,d,nn,void 0,v,ye);for(_e in v)ye=v[_e],xe=p[_e],!v.hasOwnProperty(_e)||ye===xe||ye===void 0&&xe===void 0||kT(l,d,_e,ye,v,xe);return}}for(var ue in p)ye=p[ue],p.hasOwnProperty(ue)&&ye!=null&&!v.hasOwnProperty(ue)&&tn(l,d,ue,null,v,ye);for(Te in v)ye=v[Te],xe=p[Te],!v.hasOwnProperty(Te)||ye===xe||ye==null&&xe==null||tn(l,d,Te,ye,v,xe)}function $4(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ute(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var E=p[v],C=E.transferSize,V=E.initiatorType,$=E.duration;if(C&&$&&$4(V)){for(V=0,$=E.responseEnd,v+=1;v<p.length;v++){var te=p[v],me=te.startTime;if(me>$)break;var _e=te.transferSize,Te=te.initiatorType;_e&&$4(Te)&&(te=te.responseEnd,V+=_e*(te<$?1:($-me)/(te-me)))}if(--v,d+=8*(C+V)/(E.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var PT=null,DT=null;function mb(l){return l.nodeType===9?l:l.ownerDocument}function q4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function OT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var NT=null;function dte(){var l=window.event;return l&&l.type==="popstate"?l===NT?!1:(NT=l,!0):(NT=null,!1)}var H4=typeof setTimeout=="function"?setTimeout:void 0,fte=typeof clearTimeout=="function"?clearTimeout:void 0,K4=typeof Promise=="function"?Promise:void 0,hte=typeof queueMicrotask=="function"?queueMicrotask:typeof K4<"u"?function(l){return K4.resolve(null).then(l).catch(pte)}:H4;function pte(l){setTimeout(function(){throw l})}function yc(l){return l==="head"}function W4(l,d){var p=d,v=0;do{var E=p.nextSibling;if(l.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(v===0){l.removeChild(E),ih(d);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")Kg(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,Kg(p);for(var C=p.firstChild;C;){var V=C.nextSibling,$=C.nodeName;C[Bs]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&C.rel.toLowerCase()==="stylesheet"||p.removeChild(C),C=V}}else p==="body"&&Kg(l.ownerDocument.body);p=E}while(p);ih(d)}function Y4(l,d){var p=l;l=0;do{var v=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=v}while(p)}function RT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":RT(p),xf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function gte(l,d,p,v){for(;l.nodeType===1;){var E=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Bs])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(C=l.getAttribute("rel"),C==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(C!==E.rel||l.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||l.getAttribute("title")!==(E.title==null?null:E.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(C=l.getAttribute("src"),(C!==(E.src==null?null:E.src)||l.getAttribute("type")!==(E.type==null?null:E.type)||l.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&C&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var C=E.name==null?null:""+E.name;if(E.type==="hidden"&&l.getAttribute("name")===C)return l}else return l;if(l=Da(l.nextSibling),l===null)break}return null}function mte(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Da(l.nextSibling),l===null))return null;return l}function X4(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Da(l.nextSibling),l===null))return null;return l}function MT(l){return l.data==="$?"||l.data==="$~"}function jT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function vte(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var v=function(){d(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Da(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var zT=null;function Q4(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return Da(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function Z4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function J4(l,d,p){switch(d=mb(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Kg(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);xf(l)}var Oa=new Map,e3=new Set;function vb(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Jo=Y.d;Y.d={f:yte,r:bte,D:xte,C:wte,L:_te,m:Ste,X:Tte,S:Ete,M:Ate};function yte(){var l=Jo.f(),d=lb();return l||d}function bte(l){var d=wa(l);d!==null&&d.tag===5&&d.type==="form"?vj(d):Jo.r(l)}var th=typeof document>"u"?null:document;function t3(l,d,p){var v=th;if(v&&typeof d=="string"&&d){var E=Ii(d);E='link[rel="'+l+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),e3.has(E)||(e3.add(E),l={rel:l,crossOrigin:p,href:d},v.querySelector(E)===null&&(d=v.createElement("link"),Hr(d,"link",l),tr(d),v.head.appendChild(d)))}}function xte(l){Jo.D(l),t3("dns-prefetch",l,null)}function wte(l,d){Jo.C(l,d),t3("preconnect",l,d)}function _te(l,d,p){Jo.L(l,d,p);var v=th;if(v&&l&&d){var E='link[rel="preload"][as="'+Ii(d)+'"]';d==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Ii(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Ii(p.imageSizes)+'"]')):E+='[href="'+Ii(l)+'"]';var C=E;switch(d){case"style":C=nh(l);break;case"script":C=rh(l)}Oa.has(C)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),Oa.set(C,l),v.querySelector(E)!==null||d==="style"&&v.querySelector(Wg(C))||d==="script"&&v.querySelector(Yg(C))||(d=v.createElement("link"),Hr(d,"link",l),tr(d),v.head.appendChild(d)))}}function Ste(l,d){Jo.m(l,d);var p=th;if(p&&l){var v=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+Ii(v)+'"][href="'+Ii(l)+'"]',C=E;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=rh(l)}if(!Oa.has(C)&&(l=h({rel:"modulepreload",href:l},d),Oa.set(C,l),p.querySelector(E)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Yg(C)))return}v=p.createElement("link"),Hr(v,"link",l),tr(v),p.head.appendChild(v)}}}function Ete(l,d,p){Jo.S(l,d,p);var v=th;if(v&&l){var E=Us(v).hoistableStyles,C=nh(l);d=d||"default";var V=E.get(C);if(!V){var $={loading:0,preload:null};if(V=v.querySelector(Wg(C)))$.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=Oa.get(C))&&LT(l,p);var te=V=v.createElement("link");tr(te),Hr(te,"link",l),te._p=new Promise(function(me,_e){te.onload=me,te.onerror=_e}),te.addEventListener("load",function(){$.loading|=1}),te.addEventListener("error",function(){$.loading|=2}),$.loading|=4,yb(V,d,v)}V={type:"stylesheet",instance:V,count:1,state:$},E.set(C,V)}}}function Tte(l,d){Jo.X(l,d);var p=th;if(p&&l){var v=Us(p).hoistableScripts,E=rh(l),C=v.get(E);C||(C=p.querySelector(Yg(E)),C||(l=h({src:l,async:!0},d),(d=Oa.get(E))&&VT(l,d),C=p.createElement("script"),tr(C),Hr(C,"link",l),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(E,C))}}function Ate(l,d){Jo.M(l,d);var p=th;if(p&&l){var v=Us(p).hoistableScripts,E=rh(l),C=v.get(E);C||(C=p.querySelector(Yg(E)),C||(l=h({src:l,async:!0,type:"module"},d),(d=Oa.get(E))&&VT(l,d),C=p.createElement("script"),tr(C),Hr(C,"link",l),p.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(E,C))}}function n3(l,d,p,v){var E=(E=de.current)?vb(E):null;if(!E)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=nh(p.href),p=Us(E).hoistableStyles,v=p.get(d),v||(v={type:"style",instance:null,count:0,state:null},p.set(d,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=nh(p.href);var C=Us(E).hoistableStyles,V=C.get(l);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(l,V),(C=E.querySelector(Wg(l)))&&!C._p&&(V.instance=C,V.state.loading=5),Oa.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Oa.set(l,p),C||Cte(E,l,p,V.state))),d&&v===null)throw Error(r(528,""));return V}if(d&&v!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=rh(p),p=Us(E).hoistableScripts,v=p.get(d),v||(v={type:"script",instance:null,count:0,state:null},p.set(d,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function nh(l){return'href="'+Ii(l)+'"'}function Wg(l){return'link[rel="stylesheet"]['+l+"]"}function r3(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function Cte(l,d,p,v){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?v.loading=1:(d=l.createElement("link"),v.preload=d,d.addEventListener("load",function(){return v.loading|=1}),d.addEventListener("error",function(){return v.loading|=2}),Hr(d,"link",p),tr(d),l.head.appendChild(d))}function rh(l){return'[src="'+Ii(l)+'"]'}function Yg(l){return"script[async]"+l}function i3(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var v=l.querySelector('style[data-href~="'+Ii(p.href)+'"]');if(v)return d.instance=v,tr(v),v;var E=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),tr(v),Hr(v,"style",E),yb(v,p.precedence,l),d.instance=v;case"stylesheet":E=nh(p.href);var C=l.querySelector(Wg(E));if(C)return d.state.loading|=4,d.instance=C,tr(C),C;v=r3(p),(E=Oa.get(E))&&LT(v,E),C=(l.ownerDocument||l).createElement("link"),tr(C);var V=C;return V._p=new Promise(function($,te){V.onload=$,V.onerror=te}),Hr(C,"link",v),d.state.loading|=4,yb(C,p.precedence,l),d.instance=C;case"script":return C=rh(p.src),(E=l.querySelector(Yg(C)))?(d.instance=E,tr(E),E):(v=p,(E=Oa.get(C))&&(v=h({},p),VT(v,E)),l=l.ownerDocument||l,E=l.createElement("script"),tr(E),Hr(E,"link",v),l.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(v=d.instance,d.state.loading|=4,yb(v,p.precedence,l));return d.instance}function yb(l,d,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=v.length?v[v.length-1]:null,C=E,V=0;V<v.length;V++){var $=v[V];if($.dataset.precedence===d)C=$;else if(C!==E)break}C?C.parentNode.insertBefore(l,C.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function LT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function VT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var bb=null;function a3(l,d,p){if(bb===null){var v=new Map,E=bb=new Map;E.set(p,v)}else E=bb,v=E.get(p),v||(v=new Map,E.set(p,v));if(v.has(l))return v;for(v.set(l,null),p=p.getElementsByTagName(l),E=0;E<p.length;E++){var C=p[E];if(!(C[Bs]||C[er]||l==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var V=C.getAttribute(d)||"";V=l+V;var $=v.get(V);$?$.push(C):v.set(V,[C])}}return v}function s3(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function Ite(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function o3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function kte(l,d,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=nh(v.href),C=d.querySelector(Wg(E));if(C){d=C._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=xb.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=C,tr(C);return}C=d.ownerDocument||d,v=r3(v),(E=Oa.get(E))&&LT(v,E),C=C.createElement("link"),tr(C);var V=C;V._p=new Promise(function($,te){V.onload=$,V.onerror=te}),Hr(C,"link",v),p.instance=C}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=xb.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var BT=0;function Pte(l,d){return l.stylesheets&&l.count===0&&_b(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var v=setTimeout(function(){if(l.stylesheets&&_b(l,l.stylesheets),l.unsuspend){var C=l.unsuspend;l.unsuspend=null,C()}},6e4+d);0<l.imgBytes&&BT===0&&(BT=62500*ute());var E=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&_b(l,l.stylesheets),l.unsuspend)){var C=l.unsuspend;l.unsuspend=null,C()}},(l.imgBytes>BT?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(v),clearTimeout(E)}}:null}function xb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_b(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var wb=null;function _b(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,wb=new Map,d.forEach(Dte,l),wb=null,xb.call(l))}function Dte(l,d){if(!(d.state.loading&4)){var p=wb.get(l);if(p)var v=p.get(null);else{p=new Map,wb.set(l,p);for(var E=l.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<E.length;C++){var V=E[C];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(p.set(V.dataset.precedence,V),v=V)}v&&p.set(null,v)}E=d.instance,V=E.getAttribute("data-precedence"),C=p.get(V)||v,C===v&&p.set(null,E),p.set(V,E),this.count++,v=xb.bind(this),E.addEventListener("load",v),E.addEventListener("error",v),C?C.parentNode.insertBefore(E,C.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(E,l.firstChild)),d.state.loading|=4}}var Xg={$$typeof:I,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Ote(l,d,p,v,E,C,V,$,te){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=v,this.onUncaughtError=E,this.onCaughtError=C,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function l3(l,d,p,v,E,C,V,$,te,me,_e,Te){return l=new Ote(l,d,p,V,te,me,_e,Te,$),d=1,C===!0&&(d|=24),C=Qi(3,null,null,d),l.current=C,C.stateNode=l,d=bE(),d.refCount++,l.pooledCache=d,d.refCount++,C.memoizedState={element:v,isDehydrated:p,cache:d},SE(C),l}function c3(l){return l?(l=Rf,l):Rf}function u3(l,d,p,v,E,C){E=c3(E),v.context===null?v.context=E:v.pendingContext=E,v=oc(d),v.payload={element:p},C=C===void 0?null:C,C!==null&&(v.callback=C),p=lc(l,v,d),p!==null&&(Ri(p,l,d),Ig(p,l,d))}function d3(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function FT(l,d){d3(l,d),(l=l.alternate)&&d3(l,d)}function f3(l){if(l.tag===13||l.tag===31){var d=Vu(l,67108864);d!==null&&Ri(d,l,67108864),FT(l,67108864)}}function h3(l){if(l.tag===13||l.tag===31){var d=na();d=Cu(d);var p=Vu(l,d);p!==null&&Ri(p,l,d),FT(l,d)}}var Sb=!0;function Nte(l,d,p,v){var E=q.T;q.T=null;var C=Y.p;try{Y.p=2,UT(l,d,p,v)}finally{Y.p=C,q.T=E}}function Rte(l,d,p,v){var E=q.T;q.T=null;var C=Y.p;try{Y.p=8,UT(l,d,p,v)}finally{Y.p=C,q.T=E}}function UT(l,d,p,v){if(Sb){var E=$T(v);if(E===null)IT(l,d,v,Eb,p),g3(l,v);else if(jte(E,l,d,p,v))v.stopPropagation();else if(g3(l,v),d&4&&-1<Mte.indexOf(l)){for(;E!==null;){var C=wa(E);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var V=Ki(C.pendingLanes);if(V!==0){var $=C;for($.pendingLanes|=2,$.entangledLanes|=2;V;){var te=1<<31-Vt(V);$.entanglements[1]|=te,V&=~te}to(C),(Ft&6)===0&&(sb=ot()+500,qg(0))}}break;case 31:case 13:$=Vu(C,2),$!==null&&Ri($,C,2),lb(),FT(C,2)}if(C=$T(v),C===null&&IT(l,d,v,Eb,p),C===E)break;E=C}E!==null&&v.stopPropagation()}else IT(l,d,v,null,p)}}function $T(l){return l=_a(l),qT(l)}var Eb=null;function qT(l){if(Eb=null,l=Fs(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Eb=l,null}function p3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Et()){case ft:return 2;case xn:return 8;case Zt:case Fr:return 32;case rs:return 268435456;default:return 32}default:return 32}}var GT=!1,bc=null,xc=null,wc=null,Qg=new Map,Zg=new Map,_c=[],Mte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g3(l,d){switch(l){case"focusin":case"focusout":bc=null;break;case"dragenter":case"dragleave":xc=null;break;case"mouseover":case"mouseout":wc=null;break;case"pointerover":case"pointerout":Qg.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zg.delete(d.pointerId)}}function Jg(l,d,p,v,E,C){return l===null||l.nativeEvent!==C?(l={blockedOn:d,domEventName:p,eventSystemFlags:v,nativeEvent:C,targetContainers:[E]},d!==null&&(d=wa(d),d!==null&&f3(d)),l):(l.eventSystemFlags|=v,d=l.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),l)}function jte(l,d,p,v,E){switch(d){case"focusin":return bc=Jg(bc,l,d,p,v,E),!0;case"dragenter":return xc=Jg(xc,l,d,p,v,E),!0;case"mouseover":return wc=Jg(wc,l,d,p,v,E),!0;case"pointerover":var C=E.pointerId;return Qg.set(C,Jg(Qg.get(C)||null,l,d,p,v,E)),!0;case"gotpointercapture":return C=E.pointerId,Zg.set(C,Jg(Zg.get(C)||null,l,d,p,v,E)),!0}return!1}function m3(l){var d=Fs(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,ss(l.priority,function(){h3(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,ss(l.priority,function(){h3(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Tb(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=$T(l.nativeEvent);if(p===null){p=l.nativeEvent;var v=new p.constructor(p.type,p);fg=v,p.target.dispatchEvent(v),fg=null}else return d=wa(p),d!==null&&f3(d),l.blockedOn=p,!1;d.shift()}return!0}function v3(l,d,p){Tb(l)&&p.delete(d)}function zte(){GT=!1,bc!==null&&Tb(bc)&&(bc=null),xc!==null&&Tb(xc)&&(xc=null),wc!==null&&Tb(wc)&&(wc=null),Qg.forEach(v3),Zg.forEach(v3)}function Ab(l,d){l.blockedOn===d&&(l.blockedOn=null,GT||(GT=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zte)))}var Cb=null;function y3(l){Cb!==l&&(Cb=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Cb===l&&(Cb=null);for(var d=0;d<l.length;d+=3){var p=l[d],v=l[d+1],E=l[d+2];if(typeof v!="function"){if(qT(v||p)===null)continue;break}var C=wa(p);C!==null&&(l.splice(d,3),d-=3,$E(C,{pending:!0,data:E,method:p.method,action:v},v,E))}}))}function ih(l){function d(te){return Ab(te,l)}bc!==null&&Ab(bc,l),xc!==null&&Ab(xc,l),wc!==null&&Ab(wc,l),Qg.forEach(d),Zg.forEach(d);for(var p=0;p<_c.length;p++){var v=_c[p];v.blockedOn===l&&(v.blockedOn=null)}for(;0<_c.length&&(p=_c[0],p.blockedOn===null);)m3(p),p.blockedOn===null&&_c.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var E=p[v],C=p[v+1],V=E[Pr]||null;if(typeof C=="function")V||y3(p);else if(V){var $=null;if(C&&C.hasAttribute("formAction")){if(E=C,V=C[Pr]||null)$=V.formAction;else if(qT(E)!==null)continue}else $=V.action;typeof $=="function"?p[v+1]=$:(p.splice(v,3),v-=3),y3(p)}}}function b3(){function l(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,E=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function HT(l){this._internalRoot=l}Ib.prototype.render=HT.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,v=na();u3(p,v,l,d,null,null)},Ib.prototype.unmount=HT.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;u3(l.current,2,null,l,null,null),lb(),d[Vs]=null}};function Ib(l){this._internalRoot=l}Ib.prototype.unstable_scheduleHydration=function(l){if(l){var d=ly();l={blockedOn:null,target:l,priority:d};for(var p=0;p<_c.length&&d!==0&&d<_c[p].priority;p++);_c.splice(p,0,l),p===0&&m3(l)}};var x3=e.version;if(x3!=="19.2.0")throw Error(r(527,x3,"19.2.0"));Y.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var Lte={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kb.isDisabled&&kb.supportsFiber)try{hi=kb.inject(Lte),wn=kb}catch{}}return tm.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,v="",E=Cj,C=Ij,V=kj;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(C=d.onCaughtError),d.onRecoverableError!==void 0&&(V=d.onRecoverableError)),d=l3(l,1,!1,null,null,p,v,null,E,C,V,b3),l[Vs]=d.current,CT(l),new HT(d)},tm.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var v=!1,E="",C=Cj,V=Ij,$=kj,te=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(C=p.onUncaughtError),p.onCaughtError!==void 0&&(V=p.onCaughtError),p.onRecoverableError!==void 0&&($=p.onRecoverableError),p.formState!==void 0&&(te=p.formState)),d=l3(l,1,!0,d,p??null,v,E,te,C,V,$,b3),d.context=c3(null),p=d.current,v=na(),v=Cu(v),E=oc(v),E.callback=null,lc(p,E,v),p=v,d.current.lanes=p,Tu(d,p),to(d),l[Vs]=d.current,CT(l),new Ib(d)},tm.version="19.2.0",tm}var P3;function Yte(){if(P3)return YT.exports;P3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),YT.exports=Wte(),YT.exports}var Xte=Yte();const Qte="modulepreload",Zte=function(t){return"/personal-budget-pwa/"+t},D3={},Pt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=c(n.map(u=>{if(u=Zte(u),u in D3)return;D3[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":Qte,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((m,b)=>{g.addEventListener("load",m),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Jte(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=t;let o,c;const u=async(h=!0)=>{await c};async function f(){if("serviceWorker"in navigator){if(o=await Pt(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(h=>{s?.(h)}),!o)return;o.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),o.addEventListener("installed",h=>{h.isUpdate||r?.()}),o.register({immediate:e}).then(h=>{a?a("/personal-budget-pwa/sw.js",h):i?.(h)}).catch(h=>{s?.(h)})}}return c=f(),u}const ene=()=>{};var O3={};const o8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},l8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=a>>2,h=(a&3)<<4|o>>4;let g=(o&15)<<2|u>>6,m=u&63;c||(m=64,s||(g=64)),r.push(n[f],n[h],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||h==null)throw new nne;const g=a<<2|o>>4;if(r.push(g),u!==64){const m=o<<4&240|u>>2;if(r.push(m),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rne=function(t){const e=o8(t);return l8.encodeByteArray(e,!0)},c8=function(t){return rne(t).replace(/\./g,"")},u8=function(t){try{return l8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function d8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ine=()=>d8().__FIREBASE_DEFAULTS__,ane=()=>{if(typeof process>"u"||typeof O3>"u")return;const t=O3.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&u8(t[1]);return e&&JSON.parse(e)},Qw=()=>{try{return ene()||ine()||ane()||sne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},f8=t=>Qw()?.emulatorHosts?.[t],one=t=>{const e=f8(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h8=()=>Qw()?.config,p8=t=>Qw()?.[`_${t}`];class lne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function pu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function w2(t){return(await fetch(t,{credentials:"include"})).ok}const Om={};function cne(){const t={prod:[],emulator:[]};for(const e of Object.keys(Om))Om[e]?t.emulator.push(e):t.prod.push(e);return t}function une(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let N3=!1;function g8(t,e){if(typeof window>"u"||typeof document>"u"||!pu(window.location.host)||Om[t]===e||Om[t]||N3)return;Om[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",a=cne().prod.length>0;function s(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{N3=!0,s()},g}function f(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function h(){const g=une(r),m=n("text"),b=document.getElementById(m)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;o(I),f(w,x);const N=u();c(T,S),I.append(T,b,w,N),document.body.appendChild(I)}a?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Er())}function m8(){const t=Qw()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fne(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hne(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pne(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gne(){const t=Er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v8(){return!m8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y8(){return!m8()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function b8(){try{return typeof indexedDB=="object"}catch{return!1}}function mne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const vne="FirebaseError";class Po extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vne,Object.setPrototypeOf(this,Po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jv.prototype.create)}}class Jv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?yne(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new Po(i,o,r)}}function yne(t,e){return t.replace(bne,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const bne=/\{\$([^}]+)}/g;function xne(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(R3(a)&&R3(s)){if(!Jc(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function R3(t){return t!==null&&typeof t=="object"}function e0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ym(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function bm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wne(t,e){const n=new _ne(t,e);return n.subscribe.bind(n)}class _ne{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Sne(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=JT),i.error===void 0&&(i.error=JT),i.complete===void 0&&(i.complete=JT);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sne(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function JT(){}function qt(t){return t&&t._delegate?t._delegate:t}let eu=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const ed="[DEFAULT]";let Ene=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lne;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ane(e))try{this.getOrInitializeService({instanceIdentifier:ed})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ed){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ed){return this.instances.has(e)}getOptions(e=ed){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tne(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ed){return this.component?this.component.multipleInstances?e:ed:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Tne(t){return t===ed?void 0:t}function Ane(t){return t.instantiationMode==="EAGER"}class Cne{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ene(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ct||(Ct={}));const Ine={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},kne=Ct.INFO,Pne={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},Dne=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Pne[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _2{constructor(e){this.name=e,this._logLevel=kne,this._logHandler=Dne,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ine[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const One=(t,e)=>e.some(n=>t instanceof n);let M3,j3;function Nne(){return M3||(M3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rne(){return j3||(j3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const x8=new WeakMap,MI=new WeakMap,w8=new WeakMap,eA=new WeakMap,S2=new WeakMap;function Mne(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Hc(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&x8.set(n,t)}).catch(()=>{}),S2.set(e,t),e}function jne(t){if(MI.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});MI.set(t,e)}let jI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return MI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||w8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zne(t){jI=t(jI)}function Lne(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(tA(this),e,...n);return w8.set(r,e.sort?e.sort():[e]),Hc(r)}:Rne().includes(t)?function(...e){return t.apply(tA(this),e),Hc(x8.get(this))}:function(...e){return Hc(t.apply(tA(this),e))}}function Vne(t){return typeof t=="function"?Lne(t):(t instanceof IDBTransaction&&jne(t),One(t,Nne())?new Proxy(t,jI):t)}function Hc(t){if(t instanceof IDBRequest)return Mne(t);if(eA.has(t))return eA.get(t);const e=Vne(t);return e!==t&&(eA.set(t,e),S2.set(e,t)),e}const tA=t=>S2.get(t);function Bne(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=Hc(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Hc(s.result),c.oldVersion,c.newVersion,Hc(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Fne=["get","getKey","getAll","getAllKeys","count"],Une=["put","add","delete","clear"],nA=new Map;function z3(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nA.get(e))return nA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Une.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Fne.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return nA.set(e,a),a}zne(t=>({...t,get:(e,n,r)=>z3(e,n)||t.get(e,n,r),has:(e,n)=>!!z3(e,n)||t.has(e,n)}));class $ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qne(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qne(t){return t.getComponent()?.type==="VERSION"}const zI="@firebase/app",L3="0.14.6";const bl=new _2("@firebase/app"),Gne="@firebase/app-compat",Hne="@firebase/analytics-compat",Kne="@firebase/analytics",Wne="@firebase/app-check-compat",Yne="@firebase/app-check",Xne="@firebase/auth",Qne="@firebase/auth-compat",Zne="@firebase/database",Jne="@firebase/data-connect",ere="@firebase/database-compat",tre="@firebase/functions",nre="@firebase/functions-compat",rre="@firebase/installations",ire="@firebase/installations-compat",are="@firebase/messaging",sre="@firebase/messaging-compat",ore="@firebase/performance",lre="@firebase/performance-compat",cre="@firebase/remote-config",ure="@firebase/remote-config-compat",dre="@firebase/storage",fre="@firebase/storage-compat",hre="@firebase/firestore",pre="@firebase/ai",gre="@firebase/firestore-compat",mre="firebase",vre="12.6.0";const LI="[DEFAULT]",yre={[zI]:"fire-core",[Gne]:"fire-core-compat",[Kne]:"fire-analytics",[Hne]:"fire-analytics-compat",[Yne]:"fire-app-check",[Wne]:"fire-app-check-compat",[Xne]:"fire-auth",[Qne]:"fire-auth-compat",[Zne]:"fire-rtdb",[Jne]:"fire-data-connect",[ere]:"fire-rtdb-compat",[tre]:"fire-fn",[nre]:"fire-fn-compat",[rre]:"fire-iid",[ire]:"fire-iid-compat",[are]:"fire-fcm",[sre]:"fire-fcm-compat",[ore]:"fire-perf",[lre]:"fire-perf-compat",[cre]:"fire-rc",[ure]:"fire-rc-compat",[dre]:"fire-gcs",[fre]:"fire-gcs-compat",[hre]:"fire-fst",[gre]:"fire-fst-compat",[pre]:"fire-vertex","fire-js":"fire-js",[mre]:"fire-js-all"};const n1=new Map,bre=new Map,VI=new Map;function V3(t,e){try{t.container.addComponent(e)}catch(n){bl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jd(t){const e=t.name;if(VI.has(e))return bl.debug(`There were multiple attempts to register component ${e}.`),!1;VI.set(e,t);for(const n of n1.values())V3(n,t);for(const n of bre.values())V3(n,t);return!0}function Zw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function la(t){return t==null?!1:t.settings!==void 0}const xre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kc=new Jv("app","Firebase",xre);class wre{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kc.create("app-deleted",{appName:this._name})}}const kp=vre;function _8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:LI,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Kc.create("bad-app-name",{appName:String(i)});if(n||(n=h8()),!n)throw Kc.create("no-options");const a=n1.get(i);if(a){if(Jc(n,a.options)&&Jc(r,a.config))return a;throw Kc.create("duplicate-app",{appName:i})}const s=new Cne(i);for(const c of VI.values())s.addComponent(c);const o=new wre(n,r,s);return n1.set(i,o),o}function S8(t=LI){const e=n1.get(t);if(!e&&t===LI&&h8())return _8();if(!e)throw Kc.create("no-app",{appName:t});return e}function po(t,e,n){let r=yre[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bl.warn(s.join(" "));return}jd(new eu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const _re="firebase-heartbeat-database",Sre=1,tv="firebase-heartbeat-store";let rA=null;function E8(){return rA||(rA=Bne(_re,Sre,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tv)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kc.create("idb-open",{originalErrorMessage:t.message})})),rA}async function Ere(t){try{const n=(await E8()).transaction(tv),r=await n.objectStore(tv).get(T8(t));return await n.done,r}catch(e){if(e instanceof Po)bl.warn(e.message);else{const n=Kc.create("idb-get",{originalErrorMessage:e?.message});bl.warn(n.message)}}}async function B3(t,e){try{const r=(await E8()).transaction(tv,"readwrite");await r.objectStore(tv).put(e,T8(t)),await r.done}catch(n){if(n instanceof Po)bl.warn(n.message);else{const r=Kc.create("idb-set",{originalErrorMessage:n?.message});bl.warn(r.message)}}}function T8(t){return`${t.name}!${t.options.appId}`}const Tre=1024,Are=30;class Cre{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kre(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F3();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Are){const i=Pre(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=F3(),{heartbeatsToSend:n,unsentEntries:r}=Ire(this._heartbeatsCache.heartbeats),i=c8(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return bl.warn(e),""}}}function F3(){return new Date().toISOString().substring(0,10)}function Ire(t,e=Tre){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),U3(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),U3(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b8()?mne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ere(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return B3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return B3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function U3(t){return c8(JSON.stringify({version:2,heartbeats:t})).length}function Pre(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Dre(t){jd(new eu("platform-logger",e=>new $ne(e),"PRIVATE")),jd(new eu("heartbeat",e=>new Cre(e),"PRIVATE")),po(zI,L3,t),po(zI,L3,"esm2020"),po("fire-js","")}Dre("");function A8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ore=A8,C8=new Jv("auth","Firebase",A8());const r1=new _2("@firebase/auth");function Nre(t,...e){r1.logLevel<=Ct.WARN&&r1.warn(`Auth (${kp}): ${t}`,...e)}function Ex(t,...e){r1.logLevel<=Ct.ERROR&&r1.error(`Auth (${kp}): ${t}`,...e)}function Is(t,...e){throw E2(t,...e)}function go(t,...e){return E2(t,...e)}function I8(t,e,n){const r={...Ore(),[e]:n};return new Jv("auth","Firebase",r).create(e,{appName:t.name})}function fl(t){return I8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return C8.create(t,...e)}function tt(t,e,...n){if(!t)throw E2(e,...n)}function sl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ex(e),new Error(e)}function xl(t,e){t||sl(e)}function BI(){return typeof self<"u"&&self.location?.href||""}function Rre(){return $3()==="http:"||$3()==="https:"}function $3(){return typeof self<"u"&&self.location?.protocol||null}function Mre(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rre()||hne()||"connection"in navigator)?navigator.onLine:!0}function jre(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class t0{constructor(e,n){this.shortDelay=e,this.longDelay=n,xl(n>e,"Short delay should be less than long delay!"),this.isMobile=dne()||pne()}get(){return Mre()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function T2(t,e){xl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class k8{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const zre={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Lre=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vre=new t0(3e4,6e4);function Rs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Za(t,e,n,r,i={}){return P8(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=e0({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return fne()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&pu(t.emulatorConfig.host)&&(u.credentials="include"),k8.fetch()(await D8(t,t.config.apiHost,n,o),u)})}async function P8(t,e,n){t._canInitEmulator=!1;const r={...zre,...e};try{const i=new Fre(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Pb(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pb(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Pb(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Pb(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw I8(t,f,u);Is(t,f)}}catch(i){if(i instanceof Po)throw i;Is(t,"network-request-failed",{message:String(i)})}}async function n0(t,e,n,r,i={}){const a=await Za(t,e,n,r,i);return"mfaPendingCredential"in a&&Is(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function D8(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?T2(t.config,i):`${t.config.apiScheme}://${i}`;return Lre.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function Bre(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fre{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(go(this.auth,"network-request-failed")),Vre.get())})}}function Pb(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=go(t,e,r);return i.customData._tokenResponse=n,i}function q3(t){return t!==void 0&&t.enterprise!==void 0}class Ure{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Bre(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $re(t,e){return Za(t,"GET","/v2/recaptchaConfig",Rs(t,e))}async function qre(t,e){return Za(t,"POST","/v1/accounts:delete",e)}async function i1(t,e){return Za(t,"POST","/v1/accounts:lookup",e)}function Nm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gre(t,e=!1){const n=qt(t),r=await n.getIdToken(e),i=A2(r);tt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:Nm(iA(i.auth_time)),issuedAtTime:Nm(iA(i.iat)),expirationTime:Nm(iA(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function iA(t){return Number(t)*1e3}function A2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ex("JWT malformed, contained fewer than 3 sections"),null;try{const i=u8(n);return i?JSON.parse(i):(Ex("Failed to decode base64 JWT payload"),null)}catch(i){return Ex("Caught error parsing JWT payload as JSON",i?.toString()),null}}function G3(t){const e=A2(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Gh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Po&&Hre(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Hre({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Kre{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class FI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nm(this.lastLoginAt),this.creationTime=Nm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function a1(t){const e=t.auth,n=await t.getIdToken(),r=await Gh(t,i1(e,{idToken:n}));tt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?O8(i.providerUserInfo):[],s=Yre(t.providerData,a),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new FI(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Wre(t){const e=qt(t);await a1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yre(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function O8(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Xre(t,e){const n=await P8(t,{},async()=>{const r=e0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await D8(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&pu(t.emulatorConfig.host)&&(c.credentials="include"),k8.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Qre(t,e){return Za(t,"POST","/v2/accounts:revokeToken",Rs(t,e))}class jh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=G3(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Xre(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new jh;return r&&(tt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(tt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(tt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jh,this.toJSON())}_performRefresh(){return sl("not implemented")}}function Ec(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ss{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Kre(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new FI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Gh(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gre(this,e)}reload(){return Wre(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await a1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(la(this.auth.app))return Promise.reject(fl(this.auth));const e=await this.getIdToken();return await Gh(this,qre(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:g,isAnonymous:m,providerData:b,stsTokenManager:x}=n;tt(h&&x,e,"internal-error");const w=jh.fromJSON(this.name,x);tt(typeof h=="string",e,"internal-error"),Ec(r,e.name),Ec(i,e.name),tt(typeof g=="boolean",e,"internal-error"),tt(typeof m=="boolean",e,"internal-error"),Ec(a,e.name),Ec(s,e.name),Ec(o,e.name),Ec(c,e.name),Ec(u,e.name),Ec(f,e.name);const S=new Ss({uid:h,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:m,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(T=>({...T}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new jh;i.updateFromServerResponse(n);const a=new Ss({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await a1(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];tt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?O8(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,o=new jh;o.updateFromIdToken(r);const c=new Ss({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new FI(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,u),c}}const H3=new Map;function ol(t){xl(t instanceof Function,"Expected a class definition");let e=H3.get(t);return e?(xl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,H3.set(t,e),e)}class N8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}N8.type="NONE";const K3=N8;function Tx(t,e,n){return`firebase:${t}:${e}:${n}`}class zh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Tx(this.userKey,i.apiKey,a),this.fullPersistenceKey=Tx("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await i1(this.auth,{idToken:e}).catch(()=>{});return n?Ss._fromGetAccountInfoResponse(this.auth,n,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zh(ol(K3),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||ol(K3);const s=Tx(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const g=await i1(e,{idToken:f}).catch(()=>{});if(!g)break;h=await Ss._fromGetAccountInfoResponse(e,g,f)}else h=Ss._fromJSON(e,f);u!==a&&(o=h),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new zh(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new zh(a,e,r))}}function W3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V8(e))return"Blackberry";if(B8(e))return"Webos";if(M8(e))return"Safari";if((e.includes("chrome/")||j8(e))&&!e.includes("edge/"))return"Chrome";if(L8(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function R8(t=Er()){return/firefox\//i.test(t)}function M8(t=Er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j8(t=Er()){return/crios\//i.test(t)}function z8(t=Er()){return/iemobile/i.test(t)}function L8(t=Er()){return/android/i.test(t)}function V8(t=Er()){return/blackberry/i.test(t)}function B8(t=Er()){return/webos/i.test(t)}function C2(t=Er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Zre(t=Er()){return C2(t)&&!!window.navigator?.standalone}function Jre(){return gne()&&document.documentMode===10}function F8(t=Er()){return C2(t)||L8(t)||B8(t)||V8(t)||/windows phone/i.test(t)||z8(t)}function U8(t,e=[]){let n;switch(t){case"Browser":n=W3(Er());break;case"Worker":n=`${W3(Er())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kp}/${r}`}class eie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function tie(t,e={}){return Za(t,"GET","/v2/passwordPolicy",Rs(t,e))}const nie=6;class rie{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??nie,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class iie{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y3(this),this.idTokenSubscription=new Y3(this),this.beforeStateQueue=new eie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ol(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await i1(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(la(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!a||a===s)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await a1(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jre()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(la(this.app))return Promise.reject(fl(this));const n=e?qt(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return la(this.app)?Promise.reject(fl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return la(this.app)?Promise.reject(fl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ol(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tie(this),n=new rie(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jv("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Qre(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ol(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await zh.create(this,[ol(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(la(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Nre(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gu(t){return qt(t)}class Y3{constructor(e){this.auth=e,this.observer=null,this.addObserver=wne(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aie(t){Jw=t}function $8(t){return Jw.loadJS(t)}function sie(){return Jw.recaptchaEnterpriseScript}function oie(){return Jw.gapiScript}function lie(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class cie{constructor(){this.enterprise=new uie}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class uie{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const die="recaptcha-enterprise",q8="NO_RECAPTCHA";class fie{constructor(e){this.type=die,this.auth=gu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{$re(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Ure(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;q3(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(q8)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cie().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&q3(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=sie();c.length!==0&&(c+=o),$8(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function X3(t,e,n,r=!1,i=!1){const a=new fie(t);let s;if(i)s=q8;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function s1(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await X3(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await X3(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}function hie(t,e){const n=Zw(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Jc(a,e??{}))return i;Is(i,"already-initialized")}return n.initialize({options:e})}function pie(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ol);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function gie(t,e,n){const r=gu(t);tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=G8(e),{host:s,port:o}=mie(e),c=o===null?"":`:${o}`,u={url:`${a}//${s}${c}/`},f=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),tt(Jc(u,r.config.emulator)&&Jc(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,pu(s)?(w2(`${a}//${s}${c}`),g8("Auth",!0)):vie()}function G8(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mie(t){const e=G8(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Q3(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:Q3(s)}}}function Q3(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vie(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class I2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sl("not implemented")}_getIdTokenResponse(e){return sl("not implemented")}_linkToIdToken(e,n){return sl("not implemented")}_getReauthenticationResolver(e){return sl("not implemented")}}async function yie(t,e){return Za(t,"POST","/v1/accounts:resetPassword",Rs(t,e))}async function bie(t,e){return Za(t,"POST","/v1/accounts:signUp",e)}async function xie(t,e){return Za(t,"POST","/v1/accounts:update",Rs(t,e))}async function wie(t,e){return n0(t,"POST","/v1/accounts:signInWithPassword",Rs(t,e))}async function H8(t,e){return Za(t,"POST","/v1/accounts:sendOobCode",Rs(t,e))}async function _ie(t,e){return H8(t,e)}async function Sie(t,e){return H8(t,e)}async function Eie(t,e){return n0(t,"POST","/v1/accounts:signInWithEmailLink",Rs(t,e))}async function Tie(t,e){return n0(t,"POST","/v1/accounts:signInWithEmailLink",Rs(t,e))}class nv extends I2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new nv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return s1(e,n,"signInWithPassword",wie);case"emailLink":return Eie(e,{email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return s1(e,r,"signUpPassword",bie);case"emailLink":return Tie(e,{idToken:n,email:this._email,oobCode:this._password});default:Is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Lh(t,e){return n0(t,"POST","/v1/accounts:signInWithIdp",Rs(t,e))}const Aie="http://localhost";class zd extends I2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new zd(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Lh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Lh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lh(e,n)}buildRequest(){const e={requestUri:Aie,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=e0(n)}return e}}function Cie(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Iie(t){const e=ym(bm(t)).link,n=e?ym(bm(e)).deep_link_id:null,r=ym(bm(t)).deep_link_id;return(r?ym(bm(r)).link:null)||r||n||e||t}class k2{constructor(e){const n=ym(bm(e)),r=n.apiKey??null,i=n.oobCode??null,a=Cie(n.mode??null);tt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Iie(e);try{return new k2(n)}catch{return null}}}class of{constructor(){this.providerId=of.PROVIDER_ID}static credential(e,n){return nv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=k2.parseLink(n);return tt(r,"argument-error"),nv._fromEmailAndCode(e,r.code,r.tenantId)}}of.PROVIDER_ID="password";of.EMAIL_PASSWORD_SIGN_IN_METHOD="password";of.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class K8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class r0 extends K8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Nc extends r0{constructor(){super("facebook.com")}static credential(e){return zd._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nc.credentialFromTaggedObject(e)}static credentialFromError(e){return Nc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nc.credential(e.oauthAccessToken)}catch{return null}}}Nc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nc.PROVIDER_ID="facebook.com";class Rc extends r0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zd._fromParams({providerId:Rc.PROVIDER_ID,signInMethod:Rc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rc.credentialFromTaggedObject(e)}static credentialFromError(e){return Rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rc.credential(n,r)}catch{return null}}}Rc.GOOGLE_SIGN_IN_METHOD="google.com";Rc.PROVIDER_ID="google.com";class Mc extends r0{constructor(){super("github.com")}static credential(e){return zd._fromParams({providerId:Mc.PROVIDER_ID,signInMethod:Mc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mc.credentialFromTaggedObject(e)}static credentialFromError(e){return Mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mc.credential(e.oauthAccessToken)}catch{return null}}}Mc.GITHUB_SIGN_IN_METHOD="github.com";Mc.PROVIDER_ID="github.com";class jc extends r0{constructor(){super("twitter.com")}static credential(e,n){return zd._fromParams({providerId:jc.PROVIDER_ID,signInMethod:jc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return jc.credentialFromTaggedObject(e)}static credentialFromError(e){return jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return jc.credential(n,r)}catch{return null}}}jc.TWITTER_SIGN_IN_METHOD="twitter.com";jc.PROVIDER_ID="twitter.com";async function kie(t,e){return n0(t,"POST","/v1/accounts:signUp",Rs(t,e))}class Ld{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Ss._fromIdTokenResponse(e,r,i),s=Z3(r);return new Ld({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Z3(r);return new Ld({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Z3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class o1 extends Po{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,o1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new o1(e,n,r,i)}}function W8(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?o1._fromErrorAndOperation(t,a,e,r):a})}async function Pie(t,e,n=!1){const r=await Gh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ld._forOperation(t,"link",r)}async function Y8(t,e,n=!1){const{auth:r}=t;if(la(r.app))return Promise.reject(fl(r));const i="reauthenticate";try{const a=await Gh(t,W8(r,i,e,t),n);tt(a.idToken,r,"internal-error");const s=A2(a.idToken);tt(s,r,"internal-error");const{sub:o}=s;return tt(t.uid===o,r,"user-mismatch"),Ld._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Is(r,"user-mismatch"),a}}async function X8(t,e,n=!1){if(la(t.app))return Promise.reject(fl(t));const r="signIn",i=await W8(t,r,e),a=await Ld._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Die(t,e){return X8(gu(t),e)}async function Oie(t,e){return Y8(qt(t),e)}function Nie(t,e,n){tt(n.url?.length>0,t,"invalid-continue-uri"),tt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),tt(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tt(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(tt(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function P2(t){const e=gu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Rie(t,e,n){const r=gu(t);await s1(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Sie)}async function Mie(t,e,n){await yie(qt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&P2(t),r})}async function jie(t,e){await xie(qt(t),{oobCode:e})}async function zie(t,e,n){if(la(t.app))return Promise.reject(fl(t));const r=gu(t),s=await s1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kie).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&P2(t),c}),o=await Ld._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function Lie(t,e,n){return la(t.app)?Promise.reject(fl(t)):Die(qt(t),of.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&P2(t),r})}async function J3(t,e){const n=qt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Nie(n.auth,i,e);const{email:a}=await _ie(n.auth,i);a!==t.email&&await t.reload()}async function Vie(t,e){return Za(t,"POST","/v1/accounts:update",e)}async function Bie(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Gh(r,Vie(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function Fie(t,e,n,r){return qt(t).onIdTokenChanged(e,n,r)}function Uie(t,e,n){return qt(t).beforeAuthStateChanged(e,n)}function $ie(t,e,n,r){return qt(t).onAuthStateChanged(e,n,r)}function ez(t){return qt(t).signOut()}async function qie(t){return qt(t).delete()}const l1="__sak";class Q8{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(l1,"1"),this.storage.removeItem(l1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gie=1e3,Hie=10;class Z8 extends Q8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=F8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);Jre()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Hie):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Gie)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z8.type="LOCAL";const Kie=Z8;class J8 extends Q8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}J8.type="SESSION";const e$=J8;function Wie(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class e_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new e_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(s).map(async u=>u(n.origin,a)),c=await Wie(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e_.receivers=[];function D2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Yie{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,c)=>{const u=D2("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(g.data.response);break;default:clearTimeout(f),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function mo(){return window}function Xie(t){mo().location.href=t}function t$(){return typeof mo().WorkerGlobalScope<"u"&&typeof mo().importScripts=="function"}async function Qie(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zie(){return navigator?.serviceWorker?.controller||null}function Jie(){return t$()?self:null}const n$="firebaseLocalStorageDb",eae=1,c1="firebaseLocalStorage",r$="fbase_key";class i0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function t_(t,e){return t.transaction([c1],e?"readwrite":"readonly").objectStore(c1)}function tae(){const t=indexedDB.deleteDatabase(n$);return new i0(t).toPromise()}function UI(){const t=indexedDB.open(n$,eae);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(c1,{keyPath:r$})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(c1)?e(r):(r.close(),await tae(),e(await UI()))})})}async function tz(t,e,n){const r=t_(t,!0).put({[r$]:e,value:n});return new i0(r).toPromise()}async function nae(t,e){const n=t_(t,!1).get(e),r=await new i0(n).toPromise();return r===void 0?null:r.value}function nz(t,e){const n=t_(t,!0).delete(e);return new i0(n).toPromise()}const rae=800,iae=3;class i${constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iae)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t$()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=e_._getInstance(Jie()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Qie(),!this.activeServiceWorker)return;this.sender=new Yie(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zie()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await UI();return await tz(e,l1,"1"),await nz(e,l1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tz(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nae(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nz(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=t_(i,!1).getAll();return new i0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i$.type="LOCAL";const aae=i$;new t0(3e4,6e4);function sae(t,e){return e?ol(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class O2 extends I2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oae(t){return X8(t.auth,new O2(t),t.bypassAuthState)}function lae(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),Y8(n,new O2(t),t.bypassAuthState)}async function cae(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),Pie(n,new O2(t),t.bypassAuthState)}class a${constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oae;case"linkViaPopup":case"linkViaRedirect":return cae;case"reauthViaPopup":case"reauthViaRedirect":return lae;default:Is(this.auth,"internal-error")}}resolve(e){xl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uae=new t0(2e3,1e4);class _h extends a${constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,_h.currentPopupAction&&_h.currentPopupAction.cancel(),_h.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){xl(this.filter.length===1,"Popup operations only handle one event");const e=D2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(go(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(go(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_h.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(go(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uae.get())};e()}}_h.currentPopupAction=null;const dae="pendingRedirect",Ax=new Map;class fae extends a${constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ax.get(this.auth._key());if(!e){try{const r=await hae(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ax.set(this.auth._key(),e)}return this.bypassAuthState||Ax.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hae(t,e){const n=mae(e),r=gae(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function pae(t,e){Ax.set(t._key(),e)}function gae(t){return ol(t._redirectPersistence)}function mae(t){return Tx(dae,t.config.apiKey,t.name)}async function vae(t,e,n=!1){if(la(t.app))return Promise.reject(fl(t));const r=gu(t),i=sae(r,e),s=await new fae(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const yae=600*1e3;class bae{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xae(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!s$(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(go(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yae&&this.cachedEventUids.clear(),this.cachedEventUids.has(rz(e))}saveEventToCache(e){this.cachedEventUids.add(rz(e)),this.lastProcessedEventTime=Date.now()}}function rz(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function s$({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function xae(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s$(t);default:return!1}}async function wae(t,e={}){return Za(t,"GET","/v1/projects",e)}const _ae=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sae=/^https?/;async function Eae(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wae(t);for(const n of e)try{if(Tae(n))return}catch{}Is(t,"unauthorized-domain")}function Tae(t){const e=BI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Sae.test(n))return!1;if(_ae.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Aae=new t0(3e4,6e4);function iz(){const t=mo().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Cae(t){return new Promise((e,n)=>{function r(){iz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iz(),n(go(t,"network-request-failed"))},timeout:Aae.get()})}if(mo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mo().gapi?.load)r();else{const i=lie("iframefcb");return mo()[i]=()=>{gapi.load?r():n(go(t,"network-request-failed"))},$8(`${oie()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Cx=null,e})}let Cx=null;function Iae(t){return Cx=Cx||Cae(t),Cx}const kae=new t0(5e3,15e3),Pae="__/auth/iframe",Dae="emulator/auth/iframe",Oae={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nae=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rae(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?T2(e,Dae):`https://${t.config.authDomain}/${Pae}`,r={apiKey:e.apiKey,appName:t.name,v:kp},i=Nae.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${e0(r).slice(1)}`}async function Mae(t){const e=await Iae(t),n=mo().gapi;return tt(n,t,"internal-error"),e.open({where:document.body,url:Rae(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oae,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=go(t,"network-request-failed"),o=mo().setTimeout(()=>{a(s)},kae.get());function c(){mo().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{a(s)})}))}const jae={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zae=500,Lae=600,Vae="_blank",Bae="http://localhost";class az{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fae(t,e,n,r=zae,i=Lae){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...jae,width:r.toString(),height:i.toString(),top:a,left:s},u=Er().toLowerCase();n&&(o=j8(u)?Vae:n),R8(u)&&(e=e||Bae,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[m,b])=>`${g}${m}=${b},`,"");if(Zre(u)&&o!=="_self")return Uae(e||"",o),new az(null);const h=window.open(e||"",o,f);tt(h,t,"popup-blocked");try{h.focus()}catch{}return new az(h)}function Uae(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const $ae="__/auth/handler",qae="emulator/auth/handler",Gae=encodeURIComponent("fac");async function sz(t,e,n,r,i,a){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kp,eventId:i};if(e instanceof K8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",xne(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof r0){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),u=c?`#${Gae}=${encodeURIComponent(c)}`:"";return`${Hae(t)}?${e0(o).slice(1)}${u}`}function Hae({config:t}){return t.emulator?T2(t,qae):`https://${t.authDomain}/${$ae}`}const aA="webStorageSupport";class Kae{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e$,this._completeRedirectFn=vae,this._overrideRedirectResult=pae}async _openPopup(e,n,r,i){xl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await sz(e,n,r,BI(),i);return Fae(e,a,D2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await sz(e,n,r,BI(),i);return Xie(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(xl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Mae(e),r=new bae(e);return n.register("authEvent",i=>(tt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(aA,{type:aA},i=>{const a=i?.[0]?.[aA];a!==void 0&&n(!!a),Is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Eae(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return F8()||M8()||C2()}}const Wae=Kae;var oz="@firebase/auth",lz="1.11.1";class Yae{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xae(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Qae(t){jd(new eu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;tt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U8(t)},u=new iie(r,i,a,c);return pie(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jd(new eu("auth-internal",e=>{const n=gu(e.getProvider("auth").getImmediate());return(r=>new Yae(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),po(oz,lz,Xae(t)),po(oz,lz,"esm2020")}const Zae=300,Jae=p8("authIdTokenMaxAge")||Zae;let cz=null;const ese=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Jae)return;const i=n?.token;cz!==i&&(cz=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tse(t=S8()){const e=Zw(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hie(t,{popupRedirectResolver:Wae,persistence:[aae,Kie,e$]}),r=p8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=ese(a.toString());Uie(n,s,()=>s(n.currentUser)),Fie(n,o=>s(o))}}const i=f8("auth");return i&&gie(n,`http://${i}`),n}function nse(){return document.getElementsByTagName("head")?.[0]??document}aie({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=go("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",nse().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Qae("Browser");var uz="popstate";function rse(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=lf(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),$I("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:rv(a))}function r(i,a){Ha(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return ase(e,n,r,t)}function jn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ha(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ise(){return Math.random().toString(36).substring(2,10)}function dz(t,e){return{usr:t.state,key:t.key,idx:e}}function $I(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?lf(e):e,state:n,key:e&&e.key||r||ise()}}function rv({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function lf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function ase(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let w=f(),S=w==null?null:w-u;u=w,c&&c({action:o,location:x.location,delta:S})}function g(w,S){o="PUSH";let T=$I(x.location,w,S);n&&n(T,w),u=f()+1;let I=dz(T,u),N=x.createHref(T);try{s.pushState(I,"",N)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(N)}a&&c&&c({action:o,location:x.location,delta:1})}function m(w,S){o="REPLACE";let T=$I(x.location,w,S);n&&n(T,w),u=f();let I=dz(T,u),N=x.createHref(T);s.replaceState(I,"",N),a&&c&&c({action:o,location:x.location,delta:0})}function b(w){return sse(w)}let x={get action(){return o},get location(){return t(i,s)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(uz,h),c=w,()=>{i.removeEventListener(uz,h),c=null}},createHref(w){return e(i,w)},createURL:b,encodeLocation(w){let S=b(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:m,go(w){return s.go(w)}};return x}function sse(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),jn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:rv(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function o$(t,e,n="/"){return ose(t,e,n,!1)}function ose(t,e,n,r){let i=typeof e=="string"?lf(e):e,a=wl(i.pathname||"/",n);if(a==null)return null;let s=l$(t);lse(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=bse(a);o=vse(s[c],u,r)}return o}function l$(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;jn(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=hl([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(jn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),l$(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:gse(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let c of c$(s.path))a(s,o,!0,c)}),e}function c$(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=c$(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function lse(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mse(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var cse=/^:[\w-]+$/,use=3,dse=2,fse=1,hse=10,pse=-2,fz=t=>t==="*";function gse(t,e){let n=t.split("/"),r=n.length;return n.some(fz)&&(r+=pse),e&&(r+=dse),n.filter(i=>!fz(i)).reduce((i,a)=>i+(cse.test(a)?use:a===""?fse:hse),r)}function mse(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function vse(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=u1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=u1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:hl([a,h.pathname]),pathnameBase:Sse(hl([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=hl([a,h.pathnameBase]))}return s}function u1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yse(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let b=o[g]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const m=o[g];return h&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function yse(t,e=!1,n=!0){Ha(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function bse(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ha(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function wl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var xse=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function wse(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?lf(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=hz(n.substring(1),"/"):a=hz(n,e)):a=e,{pathname:a,search:Ese(r),hash:Tse(i)}}function hz(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function sA(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _se(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function u$(t){let e=_se(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function d$(t,e,n,r=!1){let i;typeof t=="string"?i=lf(t):(i={...t},jn(!i.pathname||!i.pathname.includes("?"),sA("?","pathname","search",i)),jn(!i.pathname||!i.pathname.includes("#"),sA("#","pathname","hash",i)),jn(!i.search||!i.search.includes("#"),sA("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=wse(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var hl=t=>t.join("/").replace(/\/\/+/g,"/"),Sse=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ese=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Tse=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Ase=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Cse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Ise(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var f$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function h$(t,e){let n=t;if(typeof n!="string"||!xse.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(f$)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=wl(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{Ha(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var p$=["POST","PUT","PATCH","DELETE"];new Set(p$);var kse=["GET",...p$];new Set(kse);var Pp=A.createContext(null);Pp.displayName="DataRouter";var n_=A.createContext(null);n_.displayName="DataRouterState";var Pse=A.createContext(!1),g$=A.createContext({isTransitioning:!1});g$.displayName="ViewTransition";var Dse=A.createContext(new Map);Dse.displayName="Fetchers";var Ose=A.createContext(null);Ose.displayName="Await";var Ja=A.createContext(null);Ja.displayName="Navigation";var a0=A.createContext(null);a0.displayName="Location";var Do=A.createContext({outlet:null,matches:[],isDataRoute:!1});Do.displayName="Route";var N2=A.createContext(null);N2.displayName="RouteError";var m$="REACT_ROUTER_ERROR",Nse="REDIRECT",Rse="ROUTE_ERROR_RESPONSE";function Mse(t){if(t.startsWith(`${m$}:${Nse}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jse(t){if(t.startsWith(`${m$}:${Rse}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Ase(e.status,e.statusText,e.data)}catch{}}function zse(t,{relative:e}={}){jn(s0(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Ja),{hash:i,pathname:a,search:s}=o0(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:hl([n,a])),r.createHref({pathname:o,search:s,hash:i})}function s0(){return A.useContext(a0)!=null}function Ms(){return jn(s0(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(a0).location}var v$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function y$(t){A.useContext(Ja).static||A.useLayoutEffect(t)}function es(){let{isDataRoute:t}=A.useContext(Do);return t?Qse():Lse()}function Lse(){jn(s0(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Pp),{basename:e,navigator:n}=A.useContext(Ja),{matches:r}=A.useContext(Do),{pathname:i}=Ms(),a=JSON.stringify(u$(r)),s=A.useRef(!1);return y$(()=>{s.current=!0}),A.useCallback((c,u={})=>{if(Ha(s.current,v$),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=d$(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:hl([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}A.createContext(null);function Vse(){let{matches:t}=A.useContext(Do),e=t[t.length-1];return e?e.params:{}}function o0(t,{relative:e}={}){let{matches:n}=A.useContext(Do),{pathname:r}=Ms(),i=JSON.stringify(u$(n));return A.useMemo(()=>d$(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Bse(t,e){return b$(t,e)}function b$(t,e,n,r,i){jn(s0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Ja),{matches:s}=A.useContext(Do),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let T=h&&h.path||"";w$(u,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=Ms(),m;if(e){let T=typeof e=="string"?lf(e):e;jn(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),m=T}else m=g;let b=m.pathname||"/",x=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=o$(t,{pathname:x});Ha(h||w!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Ha(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=Gse(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:hl([f,a.encodeLocation?a.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:hl([f,a.encodeLocation?a.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),s,n,r,i);return e&&S?A.createElement(a0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},S):S}function Fse(){let t=Xse(),e=Cse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var Use=A.createElement(Fse,null),x$=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=jse(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(Do.Provider,{value:this.props.routeContext},A.createElement(N2.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement($se,{error:t},e):e}};x$.contextType=Pse;var oA=new WeakMap;function $se({children:t,error:e}){let{basename:n}=A.useContext(Ja);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Mse(e.digest);if(r){let i=oA.get(e);if(i)throw i;let a=h$(r.location,n);if(f$&&!oA.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw oA.set(e,s),s}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function qse({routeContext:t,match:e,children:n}){let r=A.useContext(Pp);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Do.Provider,{value:t},n)}function Gse(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);jn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:m}=n,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{r(f,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Ise(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let m,b=!1,x=null,w=null;n&&(m=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||Use,o&&(c<0&&g===0?(w$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):c===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),T=()=>{let I;return m?I=x:b?I=w:h.route.Component?I=A.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=f,A.createElement(qse,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(x$,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:u}):T()},null)}function R2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hse(t){let e=A.useContext(Pp);return jn(e,R2(t)),e}function Kse(t){let e=A.useContext(n_);return jn(e,R2(t)),e}function Wse(t){let e=A.useContext(Do);return jn(e,R2(t)),e}function M2(t){let e=Wse(t),n=e.matches[e.matches.length-1];return jn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Yse(){return M2("useRouteId")}function Xse(){let t=A.useContext(N2),e=Kse("useRouteError"),n=M2("useRouteError");return t!==void 0?t:e.errors?.[n]}function Qse(){let{router:t}=Hse("useNavigate"),e=M2("useNavigate"),n=A.useRef(!1);return y$(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Ha(n.current,v$),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var pz={};function w$(t,e,n){!e&&!pz[t]&&(pz[t]=!0,Ha(!1,n))}A.memo(Zse);function Zse({routes:t,future:e,state:n,onError:r}){return b$(t,void 0,n,r,e)}function ro(t){jn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jse({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){jn(!s0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=lf(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:m="default"}=n,b=A.useMemo(()=>{let x=wl(u,o);return x==null?null:{location:{pathname:x,search:f,hash:h,state:g,key:m},navigationType:r}},[o,u,f,h,g,m,r]);return Ha(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Ja.Provider,{value:c},A.createElement(a0.Provider,{children:e,value:b}))}function eoe({children:t,location:e}){return Bse(qI(t),e)}function qI(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,qI(r.props.children,a));return}jn(r.type===ro,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=qI(r.props.children,a)),n.push(s)}),n}var Ix="get",kx="application/x-www-form-urlencoded";function r_(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function toe(t){return r_(t)&&t.tagName.toLowerCase()==="button"}function noe(t){return r_(t)&&t.tagName.toLowerCase()==="form"}function roe(t){return r_(t)&&t.tagName.toLowerCase()==="input"}function ioe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aoe(t,e){return t.button===0&&(!e||e==="_self")&&!ioe(t)}function GI(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function soe(t,e){let n=GI(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var Db=null;function ooe(){if(Db===null)try{new FormData(document.createElement("form"),0),Db=!1}catch{Db=!0}return Db}var loe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lA(t){return t!=null&&!loe.has(t)?(Ha(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kx}"`),null):t}function coe(t,e){let n,r,i,a,s;if(noe(t)){let o=t.getAttribute("action");r=o?wl(o,e):null,n=t.getAttribute("method")||Ix,i=lA(t.getAttribute("enctype"))||kx,a=new FormData(t)}else if(toe(t)||roe(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?wl(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Ix,i=lA(t.getAttribute("formenctype"))||lA(o.getAttribute("enctype"))||kx,a=new FormData(o,t),!ooe()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(r_(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ix,r=null,i=kx,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function j2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uoe(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&wl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function doe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function foe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function hoe(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await doe(a,n);return s.links?s.links():[]}return[]}));return voe(r.flat(1).filter(foe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function gz(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function poe(t,e,{includeHydrateFallback:n}={}){return goe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function goe(t){return[...new Set(t)]}function moe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function voe(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(moe(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function _$(){let t=A.useContext(Pp);return j2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function yoe(){let t=A.useContext(n_);return j2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var z2=A.createContext(void 0);z2.displayName="FrameworkContext";function S$(){let t=A.useContext(z2);return j2(t,"You must render this element inside a <HydratedRouter> element"),t}function boe(t,e){let n=A.useContext(z2),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let x=S=>{S.forEach(T=>{s(T.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return g.current&&w.observe(g.current),()=>{w.disconnect()}}},[t]),A.useEffect(()=>{if(r){let x=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(x)}}},[r]);let m=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:nm(o,m),onBlur:nm(c,b),onMouseEnter:nm(u,m),onMouseLeave:nm(f,b),onTouchStart:nm(h,m)}]:[!1,g,{}]}function nm(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function xoe({page:t,...e}){let{router:n}=_$(),r=A.useMemo(()=>o$(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(_oe,{page:t,matches:r,...e}):null}function woe(t){let{manifest:e,routeModules:n}=S$(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return hoe(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function _oe({page:t,matches:e,...n}){let r=Ms(),{future:i,manifest:a,routeModules:s}=S$(),{basename:o}=_$(),{loaderData:c,matches:u}=yoe(),f=A.useMemo(()=>gz(t,e,u,a,r,"data"),[t,e,u,a,r]),h=A.useMemo(()=>gz(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let I=a.routes[T.route.id];!I||!I.hasLoader||(!f.some(N=>N.route.id===T.route.id)&&T.route.id in c&&s[T.route.id]?.shouldRevalidate||I.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let S=uoe(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),m=A.useMemo(()=>poe(h,a),[h,a]),b=woe(h);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),m.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),b.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w,crossOrigin:w.crossOrigin??n.crossOrigin})))}function Soe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Eoe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Eoe&&(window.__reactRouterVersion="7.13.0")}catch{}function Toe({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=A.useRef();i.current==null&&(i.current=rse({window:r,v5Compat:!0}));let a=i.current,[s,o]=A.useState({action:a.action,location:a.location}),c=A.useCallback(u=>{n===!1?o(u):A.startTransition(()=>o(u))},[n]);return A.useLayoutEffect(()=>a.listen(c),[a,c]),A.createElement(Jse,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var E$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T$=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...m},b){let{basename:x,unstable_useTransitions:w}=A.useContext(Ja),S=typeof u=="string"&&E$.test(u),T=h$(u,x);u=T.to;let I=zse(u,{relative:i}),[N,O,D]=boe(r,m),k=koe(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:w});function P(j){e&&e(j),j.defaultPrevented||k(j)}let R=A.createElement("a",{...m,...D,href:T.absoluteURL||I,onClick:T.isExternal||a?e:P,ref:Soe(b,O),target:c,"data-discover":!S&&n==="render"?"true":void 0});return N&&!S?A.createElement(A.Fragment,null,R,A.createElement(xoe,{page:I})):R});T$.displayName="Link";var Aoe=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=o0(s,{relative:u.relative}),g=Ms(),m=A.useContext(n_),{navigator:b,basename:x}=A.useContext(Ja),w=m!=null&&Roe(h)&&o===!0,S=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,T=g.pathname,I=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(T=T.toLowerCase(),I=I?I.toLowerCase():null,S=S.toLowerCase()),I&&x&&(I=wl(I,x)||I);const N=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let O=T===S||!i&&T.startsWith(S)&&T.charAt(N)==="/",D=I!=null&&(I===S||!i&&I.startsWith(S)&&I.charAt(S.length)==="/"),k={isActive:O,isPending:D,isTransitioning:w},P=O?e:void 0,R;typeof r=="function"?R=r(k):R=[r,O?"active":null,D?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(k):a;return A.createElement(T$,{...u,"aria-current":P,className:R,ref:f,style:j,to:s,viewTransition:o},typeof c=="function"?c(k):c)});Aoe.displayName="NavLink";var Coe=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=Ix,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...m},b)=>{let{unstable_useTransitions:x}=A.useContext(Ja),w=Ooe(),S=Noe(o,{relative:u}),T=s.toLowerCase()==="get"?"get":"post",I=typeof o=="string"&&E$.test(o),N=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let D=O.nativeEvent.submitter,k=D?.getAttribute("formmethod")||s,P=()=>w(D||O.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});x&&n!==!1?A.startTransition(()=>P()):P()};return A.createElement("form",{ref:b,method:T,action:S,onSubmit:r?c:N,...m,"data-discover":!I&&t==="render"?"true":void 0})});Coe.displayName="Form";function Ioe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A$(t){let e=A.useContext(Pp);return jn(e,Ioe(t)),e}function koe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=es(),f=Ms(),h=o0(t,{relative:a});return A.useCallback(g=>{if(aoe(g,e)){g.preventDefault();let m=n!==void 0?n:rv(f)===rv(h),b=()=>u(t,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?A.startTransition(()=>b()):b()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function C$(t){Ha(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(GI(t)),n=A.useRef(!1),r=Ms(),i=A.useMemo(()=>soe(r.search,n.current?null:e.current),[r.search]),a=es(),s=A.useCallback((o,c)=>{const u=GI(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var Poe=0,Doe=()=>`__${String(++Poe)}__`;function Ooe(){let{router:t}=A$("useSubmit"),{basename:e}=A.useContext(Ja),n=Yse(),r=t.fetch,i=t.navigate;return A.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=coe(a,e);if(s.navigate===!1){let g=s.fetcherKey||Doe();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Noe(t,{relative:e}={}){let{basename:n}=A.useContext(Ja),r=A.useContext(Do);jn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...o0(t||".",{relative:e})},s=Ms();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:hl([n,a.pathname])),rv(a)}function Roe(t,{relative:e}={}){let n=A.useContext(g$);jn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=A$("useViewTransitionState"),i=o0(t,{relative:e});if(!n.isTransitioning)return!1;let a=wl(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=wl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return u1(i.pathname,s)!=null||u1(i.pathname,a)!=null}var I$=s8();const Moe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),joe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),mz=t=>{const e=joe(t);return e.charAt(0).toUpperCase()+e.slice(1)},k$=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),zoe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Loe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Voe=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>A.createElement("svg",{ref:c,...Loe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:k$("lucide",i),...!a&&!zoe(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,f])=>A.createElement(u,f)),...Array.isArray(a)?a:[a]]));const at=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(Voe,{ref:a,iconNode:e,className:k$(`lucide-${Moe(mz(t))}`,`lucide-${t}`,r),...i}));return n.displayName=mz(t),n};const Boe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_l=at("arrow-left",Boe);const Foe=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],Uoe=at("arrow-right-left",Foe);const $oe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qoe=at("arrow-right",$oe);const Goe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Hoe=at("calendar",Goe);const Koe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],P$=at("chart-column",Koe);const Woe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Yoe=at("chart-pie",Woe);const Xoe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Qoe=at("check",Xoe);const Zoe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Joe=at("chevron-left",Zoe);const ele=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],io=at("chevron-right",ele);const tle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],nle=at("circle-arrow-down",tle);const rle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],ile=at("circle-arrow-up",rle);const ale=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],d1=at("circle-check-big",ale);const sle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nl=at("circle-check",sle);const ole=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vz=at("circle",ole);const lle=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],yz=at("dollar-sign",lle);const cle=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],bz=at("download",cle);const ule=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],dle=at("ellipsis",ule);const fle=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],D$=at("eye-off",fle);const hle=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],O$=at("eye",hle);const ple=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gle=at("file-text",ple);const mle=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],vle=at("folder",mle);const yle=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ble=at("funnel",yle);const xle=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],iv=at("grip-vertical",xle);const wle=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],_le=at("house",wle);const Sle=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ele=at("list",Sle);const Tle=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],xz=at("loader",Tle);const Ale=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wz=at("lock",Ale);const Cle=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ile=at("log-out",Cle);const kle=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],HI=at("mail",kle);const Ple=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],_z=at("mic",Ple);const Dle=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Ole=at("pause",Dle);const Nle=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Rle=at("pen",Nle);const Mle=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],l0=at("piggy-bank",Mle);const jle=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],c0=at("plus",jle);const zle=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],av=at("refresh-cw",zle);const Lle=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Vle=at("rotate-ccw",Lle);const Ble=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fle=at("search",Ble);const Ule=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$le=at("settings",Ule);const qle=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],sv=at("sparkles",qle);const Gle=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],Hle=at("tags",Gle);const Kle=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wle=at("target",Kle);const Yle=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],f1=at("trash-2",Yle);const Xle=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],N$=at("trash",Xle);const Qle=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],h1=at("trending-up",Qle);const Zle=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vh=at("triangle-alert",Zle);const Jle=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],ece=at("undo-2",Jle);const tce=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],nce=at("upload",tce);const rce=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ice=at("user-plus",rce);const ace=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],i_=at("wallet",ace);const sce=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],a_=at("x",sce),Sz=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const g=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(m=>m(e,g))}},i=()=>e,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,i,o);return o},oce=(t=>t?Sz(t):Sz),lce=t=>t;function cce(t,e=lce){const n=md.useSyncExternalStore(t.subscribe,md.useCallback(()=>e(t.getState()),[t,e]),md.useCallback(()=>e(t.getInitialState()),[t,e]));return md.useDebugValue(n),n}const Ez=t=>{const e=oce(t),n=r=>cce(e,r);return Object.assign(n,e),n},L2=(t=>t?Ez(t):Ez),Tz={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app"},ov=new Map,Ob=t=>{const e=ov.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},uce=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=ov.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return ov.set(n.name,i),{type:"tracked",store:t,...i}},dce=(t,e)=>{if(e===void 0)return;const n=ov.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&ov.delete(t))},fce=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(s=>s.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},hce=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:s,store:o,...c}=e;let u;try{u=(a??(Tz?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return t(n,r,i);const{connection:f,...h}=uce(o,u,c);let g=!0;i.setState=((x,w,S)=>{const T=n(x,w);if(!g)return T;const I=S===void 0?{type:s||fce(new Error().stack)||"anonymous"}:typeof S=="string"?{type:S}:S;return o===void 0?(f?.send(I,r()),T):(f?.send({...I,type:`${o}/${I.type}`},{...Ob(c.name),[o]:i.getState()}),T)}),i.devtools={cleanup:()=>{f&&typeof f.unsubscribe=="function"&&f.unsubscribe(),dce(c.name,o)}};const m=(...x)=>{const w=g;g=!1,n(...x),g=w},b=t(i.setState,r,i);if(h.type==="untracked"?f?.init(b):(h.stores[h.store]=i,f?.init(Object.fromEntries(Object.entries(h.stores).map(([x,w])=>[x,x===h.store?b:w.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let x=!1;const w=i.dispatch;i.dispatch=(...S)=>{(Tz?"production":void 0)!=="production"&&S[0].type==="__setState"&&!x&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),x=!0),w(...S)}}return f.subscribe(x=>{var w;switch(x.type){case"ACTION":if(typeof x.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return cA(x.payload,S=>{if(S.type==="__setState"){if(o===void 0){m(S.state);return}Object.keys(S.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const T=S.state[o];if(T==null)return;JSON.stringify(i.getState())!==JSON.stringify(T)&&m(T);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(S)});case"DISPATCH":switch(x.payload.type){case"RESET":return m(b),o===void 0?f?.init(i.getState()):f?.init(Ob(c.name));case"COMMIT":if(o===void 0){f?.init(i.getState());return}return f?.init(Ob(c.name));case"ROLLBACK":return cA(x.state,S=>{if(o===void 0){m(S),f?.init(i.getState());return}m(S[o]),f?.init(Ob(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return cA(x.state,S=>{if(o===void 0){m(S);return}JSON.stringify(i.getState())!==JSON.stringify(S[o])&&m(S[o])});case"IMPORT_STATE":{const{nextLiftedState:S}=x.payload,T=(w=S.computedStates.slice(-1)[0])==null?void 0:w.state;if(!T)return;m(o===void 0?T:T[o]),f?.send(null,S);return}case"PAUSE_RECORDING":return g=!g}return}}),b},pce=hce,cA=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function gce(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,void 0),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const KI=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return KI(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return KI(r)(n)}}}},mce=(t,e)=>(n,r,i)=>{let a={storage:gce(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},s=!1;const o=new Set,c=new Set;let u=a.storage;if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,i);const f=()=>{const x=a.partialize({...r()});return u.setItem(a.name,{state:x,version:a.version})},h=i.setState;i.setState=(x,w)=>(h(x,w),f());const g=t((...x)=>(n(...x),f()),r,i);i.getInitialState=()=>g;let m;const b=()=>{var x,w;if(!u)return;s=!1,o.forEach(T=>{var I;return T((I=r())!=null?I:g)});const S=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(x=r())!=null?x:g))||void 0;return KI(u.getItem.bind(u))(a.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==a.version){if(a.migrate){const I=a.migrate(T.state,T.version);return I instanceof Promise?I.then(N=>[!0,N]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var I;const[N,O]=T;if(m=a.merge(O,(I=r())!=null?I:g),n(m,!0),N)return f()}).then(()=>{S?.(m,void 0),m=r(),s=!0,c.forEach(T=>T(m))}).catch(T=>{S?.(void 0,T)})};return i.persist={setOptions:x=>{a={...a,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>s,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},a.skipHydration||b(),m||g},R$=mce;var vce="firebase",yce="12.6.0";po(vce,yce,"app");var Az=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Wc,M$;(function(){var t;function e(k,P){function R(){}R.prototype=P.prototype,k.F=P.prototype,k.prototype=new R,k.prototype.constructor=k,k.D=function(j,z,B){for(var L=Array(arguments.length-2),K=2;K<arguments.length;K++)L[K-2]=arguments[K];return P.prototype[z].apply(j,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,P,R){R||(R=0);const j=Array(16);if(typeof P=="string")for(var z=0;z<16;++z)j[z]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(z=0;z<16;++z)j[z]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=k.g[0],R=k.g[1],z=k.g[2];let B=k.g[3],L;L=P+(B^R&(z^B))+j[0]+3614090360&4294967295,P=R+(L<<7&4294967295|L>>>25),L=B+(z^P&(R^z))+j[1]+3905402710&4294967295,B=P+(L<<12&4294967295|L>>>20),L=z+(R^B&(P^R))+j[2]+606105819&4294967295,z=B+(L<<17&4294967295|L>>>15),L=R+(P^z&(B^P))+j[3]+3250441966&4294967295,R=z+(L<<22&4294967295|L>>>10),L=P+(B^R&(z^B))+j[4]+4118548399&4294967295,P=R+(L<<7&4294967295|L>>>25),L=B+(z^P&(R^z))+j[5]+1200080426&4294967295,B=P+(L<<12&4294967295|L>>>20),L=z+(R^B&(P^R))+j[6]+2821735955&4294967295,z=B+(L<<17&4294967295|L>>>15),L=R+(P^z&(B^P))+j[7]+4249261313&4294967295,R=z+(L<<22&4294967295|L>>>10),L=P+(B^R&(z^B))+j[8]+1770035416&4294967295,P=R+(L<<7&4294967295|L>>>25),L=B+(z^P&(R^z))+j[9]+2336552879&4294967295,B=P+(L<<12&4294967295|L>>>20),L=z+(R^B&(P^R))+j[10]+4294925233&4294967295,z=B+(L<<17&4294967295|L>>>15),L=R+(P^z&(B^P))+j[11]+2304563134&4294967295,R=z+(L<<22&4294967295|L>>>10),L=P+(B^R&(z^B))+j[12]+1804603682&4294967295,P=R+(L<<7&4294967295|L>>>25),L=B+(z^P&(R^z))+j[13]+4254626195&4294967295,B=P+(L<<12&4294967295|L>>>20),L=z+(R^B&(P^R))+j[14]+2792965006&4294967295,z=B+(L<<17&4294967295|L>>>15),L=R+(P^z&(B^P))+j[15]+1236535329&4294967295,R=z+(L<<22&4294967295|L>>>10),L=P+(z^B&(R^z))+j[1]+4129170786&4294967295,P=R+(L<<5&4294967295|L>>>27),L=B+(R^z&(P^R))+j[6]+3225465664&4294967295,B=P+(L<<9&4294967295|L>>>23),L=z+(P^R&(B^P))+j[11]+643717713&4294967295,z=B+(L<<14&4294967295|L>>>18),L=R+(B^P&(z^B))+j[0]+3921069994&4294967295,R=z+(L<<20&4294967295|L>>>12),L=P+(z^B&(R^z))+j[5]+3593408605&4294967295,P=R+(L<<5&4294967295|L>>>27),L=B+(R^z&(P^R))+j[10]+38016083&4294967295,B=P+(L<<9&4294967295|L>>>23),L=z+(P^R&(B^P))+j[15]+3634488961&4294967295,z=B+(L<<14&4294967295|L>>>18),L=R+(B^P&(z^B))+j[4]+3889429448&4294967295,R=z+(L<<20&4294967295|L>>>12),L=P+(z^B&(R^z))+j[9]+568446438&4294967295,P=R+(L<<5&4294967295|L>>>27),L=B+(R^z&(P^R))+j[14]+3275163606&4294967295,B=P+(L<<9&4294967295|L>>>23),L=z+(P^R&(B^P))+j[3]+4107603335&4294967295,z=B+(L<<14&4294967295|L>>>18),L=R+(B^P&(z^B))+j[8]+1163531501&4294967295,R=z+(L<<20&4294967295|L>>>12),L=P+(z^B&(R^z))+j[13]+2850285829&4294967295,P=R+(L<<5&4294967295|L>>>27),L=B+(R^z&(P^R))+j[2]+4243563512&4294967295,B=P+(L<<9&4294967295|L>>>23),L=z+(P^R&(B^P))+j[7]+1735328473&4294967295,z=B+(L<<14&4294967295|L>>>18),L=R+(B^P&(z^B))+j[12]+2368359562&4294967295,R=z+(L<<20&4294967295|L>>>12),L=P+(R^z^B)+j[5]+4294588738&4294967295,P=R+(L<<4&4294967295|L>>>28),L=B+(P^R^z)+j[8]+2272392833&4294967295,B=P+(L<<11&4294967295|L>>>21),L=z+(B^P^R)+j[11]+1839030562&4294967295,z=B+(L<<16&4294967295|L>>>16),L=R+(z^B^P)+j[14]+4259657740&4294967295,R=z+(L<<23&4294967295|L>>>9),L=P+(R^z^B)+j[1]+2763975236&4294967295,P=R+(L<<4&4294967295|L>>>28),L=B+(P^R^z)+j[4]+1272893353&4294967295,B=P+(L<<11&4294967295|L>>>21),L=z+(B^P^R)+j[7]+4139469664&4294967295,z=B+(L<<16&4294967295|L>>>16),L=R+(z^B^P)+j[10]+3200236656&4294967295,R=z+(L<<23&4294967295|L>>>9),L=P+(R^z^B)+j[13]+681279174&4294967295,P=R+(L<<4&4294967295|L>>>28),L=B+(P^R^z)+j[0]+3936430074&4294967295,B=P+(L<<11&4294967295|L>>>21),L=z+(B^P^R)+j[3]+3572445317&4294967295,z=B+(L<<16&4294967295|L>>>16),L=R+(z^B^P)+j[6]+76029189&4294967295,R=z+(L<<23&4294967295|L>>>9),L=P+(R^z^B)+j[9]+3654602809&4294967295,P=R+(L<<4&4294967295|L>>>28),L=B+(P^R^z)+j[12]+3873151461&4294967295,B=P+(L<<11&4294967295|L>>>21),L=z+(B^P^R)+j[15]+530742520&4294967295,z=B+(L<<16&4294967295|L>>>16),L=R+(z^B^P)+j[2]+3299628645&4294967295,R=z+(L<<23&4294967295|L>>>9),L=P+(z^(R|~B))+j[0]+4096336452&4294967295,P=R+(L<<6&4294967295|L>>>26),L=B+(R^(P|~z))+j[7]+1126891415&4294967295,B=P+(L<<10&4294967295|L>>>22),L=z+(P^(B|~R))+j[14]+2878612391&4294967295,z=B+(L<<15&4294967295|L>>>17),L=R+(B^(z|~P))+j[5]+4237533241&4294967295,R=z+(L<<21&4294967295|L>>>11),L=P+(z^(R|~B))+j[12]+1700485571&4294967295,P=R+(L<<6&4294967295|L>>>26),L=B+(R^(P|~z))+j[3]+2399980690&4294967295,B=P+(L<<10&4294967295|L>>>22),L=z+(P^(B|~R))+j[10]+4293915773&4294967295,z=B+(L<<15&4294967295|L>>>17),L=R+(B^(z|~P))+j[1]+2240044497&4294967295,R=z+(L<<21&4294967295|L>>>11),L=P+(z^(R|~B))+j[8]+1873313359&4294967295,P=R+(L<<6&4294967295|L>>>26),L=B+(R^(P|~z))+j[15]+4264355552&4294967295,B=P+(L<<10&4294967295|L>>>22),L=z+(P^(B|~R))+j[6]+2734768916&4294967295,z=B+(L<<15&4294967295|L>>>17),L=R+(B^(z|~P))+j[13]+1309151649&4294967295,R=z+(L<<21&4294967295|L>>>11),L=P+(z^(R|~B))+j[4]+4149444226&4294967295,P=R+(L<<6&4294967295|L>>>26),L=B+(R^(P|~z))+j[11]+3174756917&4294967295,B=P+(L<<10&4294967295|L>>>22),L=z+(P^(B|~R))+j[2]+718787259&4294967295,z=B+(L<<15&4294967295|L>>>17),L=R+(B^(z|~P))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+P&4294967295,k.g[1]=k.g[1]+(z+(L<<21&4294967295|L>>>11))&4294967295,k.g[2]=k.g[2]+z&4294967295,k.g[3]=k.g[3]+B&4294967295}r.prototype.v=function(k,P){P===void 0&&(P=k.length);const R=P-this.blockSize,j=this.C;let z=this.h,B=0;for(;B<P;){if(z==0)for(;B<=R;)i(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<P;)if(j[z++]=k.charCodeAt(B++),z==this.blockSize){i(this,j),z=0;break}}else for(;B<P;)if(j[z++]=k[B++],z==this.blockSize){i(this,j),z=0;break}}this.h=z,this.o+=P},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var P=1;P<k.length-8;++P)k[P]=0;P=this.o*8;for(var R=k.length-8;R<k.length;++R)k[R]=P&255,P/=256;for(this.v(k),k=Array(16),P=0,R=0;R<4;++R)for(let j=0;j<32;j+=8)k[P++]=this.g[R]>>>j&255;return k};function a(k,P){var R=o;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=P(k)}function s(k,P){this.h=P;const R=[];let j=!0;for(let z=k.length-1;z>=0;z--){const B=k[z]|0;j&&B==P||(R[z]=B,j=!1)}this.g=R}var o={};function c(k){return-128<=k&&k<128?a(k,function(P){return new s([P|0],P<0?-1:0)}):new s([k|0],k<0?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return h;if(k<0)return w(u(-k));const P=[];let R=1;for(let j=0;k>=R;j++)P[j]=k/R|0,R*=4294967296;return new s(P,0)}function f(k,P){if(k.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(k.charAt(0)=="-")return w(f(k.substring(1),P));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(P,8));let j=h;for(let B=0;B<k.length;B+=8){var z=Math.min(8,k.length-B);const L=parseInt(k.substring(B,B+z),P);z<8?(z=u(Math.pow(P,z)),j=j.j(z).add(u(L))):(j=j.j(R),j=j.add(u(L)))}return j}var h=c(0),g=c(1),m=c(16777216);t=s.prototype,t.m=function(){if(x(this))return-w(this).m();let k=0,P=1;for(let R=0;R<this.g.length;R++){const j=this.i(R);k+=(j>=0?j:4294967296+j)*P,P*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(x(this))return"-"+w(this).toString(k);const P=u(Math.pow(k,6));var R=this;let j="";for(;;){const z=N(R,P).g;R=S(R,z.j(P));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(k);if(R=z,b(R))return B+j;for(;B.length<6;)B="0"+B;j=B+j}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(let P=0;P<k.g.length;P++)if(k.g[P]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=S(this,k),x(k)?-1:b(k)?0:1};function w(k){const P=k.g.length,R=[];for(let j=0;j<P;j++)R[j]=~k.g[j];return new s(R,~k.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(k){const P=Math.max(this.g.length,k.g.length),R=[];let j=0;for(let z=0;z<=P;z++){let B=j+(this.i(z)&65535)+(k.i(z)&65535),L=(B>>>16)+(this.i(z)>>>16)+(k.i(z)>>>16);j=L>>>16,B&=65535,L&=65535,R[z]=L<<16|B}return new s(R,R[R.length-1]&-2147483648?-1:0)};function S(k,P){return k.add(w(P))}t.j=function(k){if(b(this)||b(k))return h;if(x(this))return x(k)?w(this).j(w(k)):w(w(this).j(k));if(x(k))return w(this.j(w(k)));if(this.l(m)<0&&k.l(m)<0)return u(this.m()*k.m());const P=this.g.length+k.g.length,R=[];for(var j=0;j<2*P;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(let z=0;z<k.g.length;z++){const B=this.i(j)>>>16,L=this.i(j)&65535,K=k.i(z)>>>16,Q=k.i(z)&65535;R[2*j+2*z]+=L*Q,T(R,2*j+2*z),R[2*j+2*z+1]+=B*Q,T(R,2*j+2*z+1),R[2*j+2*z+1]+=L*K,T(R,2*j+2*z+1),R[2*j+2*z+2]+=B*K,T(R,2*j+2*z+2)}for(k=0;k<P;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=P;k<2*P;k++)R[k]=0;return new s(R,0)};function T(k,P){for(;(k[P]&65535)!=k[P];)k[P+1]+=k[P]>>>16,k[P]&=65535,P++}function I(k,P){this.g=k,this.h=P}function N(k,P){if(b(P))throw Error("division by zero");if(b(k))return new I(h,h);if(x(k))return P=N(w(k),P),new I(w(P.g),w(P.h));if(x(P))return P=N(k,w(P)),new I(w(P.g),P.h);if(k.g.length>30){if(x(k)||x(P))throw Error("slowDivide_ only works with positive integers.");for(var R=g,j=P;j.l(k)<=0;)R=O(R),j=O(j);var z=D(R,1),B=D(j,1);for(j=D(j,2),R=D(R,2);!b(j);){var L=B.add(j);L.l(k)<=0&&(z=z.add(R),B=L),j=D(j,1),R=D(R,1)}return P=S(k,z.j(P)),new I(z,P)}for(z=h;k.l(P)>=0;){for(R=Math.max(1,Math.floor(k.m()/P.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),B=u(R),L=B.j(P);x(L)||L.l(k)>0;)R-=j,B=u(R),L=B.j(P);b(B)&&(B=g),z=z.add(B),k=S(k,L)}return new I(z,k)}t.B=function(k){return N(this,k).h},t.and=function(k){const P=Math.max(this.g.length,k.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)&k.i(j);return new s(R,this.h&k.h)},t.or=function(k){const P=Math.max(this.g.length,k.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)|k.i(j);return new s(R,this.h|k.h)},t.xor=function(k){const P=Math.max(this.g.length,k.g.length),R=[];for(let j=0;j<P;j++)R[j]=this.i(j)^k.i(j);return new s(R,this.h^k.h)};function O(k){const P=k.g.length+1,R=[];for(let j=0;j<P;j++)R[j]=k.i(j)<<1|k.i(j-1)>>>31;return new s(R,k.h)}function D(k,P){const R=P>>5;P%=32;const j=k.g.length-R,z=[];for(let B=0;B<j;B++)z[B]=P>0?k.i(B+R)>>>P|k.i(B+R+1)<<32-P:k.i(B+R);return new s(z,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,M$=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,Wc=s}).apply(typeof Az<"u"?Az:typeof self<"u"?self:typeof window<"u"?window:{});var Nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var j$,xm,z$,Px,WI,L$,V$,B$;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nb=="object"&&Nb];for(var M=0;M<_.length;++M){var F=_[M];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(_,M){if(M)e:{var F=r;_=_.split(".");for(var G=0;G<_.length-1;G++){var pe=_[G];if(!(pe in F))break e;F=F[pe]}_=_[_.length-1],G=F[_],M=M(G),M!=G&&M!=null&&e(F,_,{configurable:!0,writable:!0,value:M})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(M){var F=[],G;for(G in M)Object.prototype.hasOwnProperty.call(M,G)&&F.push([G,M[G]]);return F}});var a=a||{},s=this||self;function o(_){var M=typeof _;return M=="object"&&_!=null||M=="function"}function c(_,M,F){return _.call.apply(_.bind,arguments)}function u(_,M,F){return u=c,u.apply(null,arguments)}function f(_,M){var F=Array.prototype.slice.call(arguments,1);return function(){var G=F.slice();return G.push.apply(G,arguments),_.apply(this,G)}}function h(_,M){function F(){}F.prototype=M.prototype,_.Z=M.prototype,_.prototype=new F,_.prototype.constructor=_,_.Ob=function(G,pe,be){for(var Me=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)Me[ht-2]=arguments[ht];return M.prototype[pe].apply(G,Me)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function m(_){const M=_.length;if(M>0){const F=Array(M);for(let G=0;G<M;G++)F[G]=_[G];return F}return[]}function b(_,M){for(let G=1;G<arguments.length;G++){const pe=arguments[G];var F=typeof pe;if(F=F!="object"?F:pe?Array.isArray(pe)?"array":F:"null",F=="array"||F=="object"&&typeof pe.length=="number"){F=_.length||0;const be=pe.length||0;_.length=F+be;for(let Me=0;Me<be;Me++)_[F+Me]=pe[Me]}else _.push(pe)}}class x{constructor(M,F){this.i=M,this.j=F,this.h=0,this.g=null}get(){let M;return this.h>0?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function w(_){s.setTimeout(()=>{throw _},0)}function S(){var _=k;let M=null;return _.g&&(M=_.g,_.g=_.g.next,_.g||(_.h=null),M.next=null),M}class T{constructor(){this.h=this.g=null}add(M,F){const G=I.get();G.set(M,F),this.h?this.h.next=G:this.g=G,this.h=G}}var I=new x(()=>new N,_=>_.reset());class N{constructor(){this.next=this.g=this.h=null}set(M,F){this.h=M,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let O,D=!1,k=new T,P=()=>{const _=Promise.resolve(void 0);O=()=>{_.then(R)}};function R(){for(var _;_=S();){try{_.h.call(_.g)}catch(F){w(F)}var M=I;M.j(_),M.h<100&&(M.h++,_.next=M.g,M.g=_)}D=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(_,M){this.type=_,this.g=this.target=M,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var _=!1,M=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const F=()=>{};s.addEventListener("test",F,M),s.removeEventListener("test",F,M)}catch{}return _})();function L(_){return/^[\s\xa0]*$/.test(_)}function K(_,M){z.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,M)}h(K,z),K.prototype.init=function(_,M){const F=this.type=_.type,G=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=M,M=_.relatedTarget,M||(F=="mouseover"?M=_.fromElement:F=="mouseout"&&(M=_.toElement)),this.relatedTarget=M,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),q=0;function Y(_,M,F,G,pe){this.listener=_,this.proxy=null,this.src=M,this.type=F,this.capture=!!G,this.ha=pe,this.key=++q,this.da=this.fa=!1}function J(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ne(_,M,F){for(const G in _)M.call(F,_[G],G,_)}function W(_,M){for(const F in _)M.call(void 0,_[F],F,_)}function U(_){const M={};for(const F in _)M[F]=_[F];return M}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(_,M){let F,G;for(let pe=1;pe<arguments.length;pe++){G=arguments[pe];for(F in G)_[F]=G[F];for(let be=0;be<X.length;be++)F=X[be],Object.prototype.hasOwnProperty.call(G,F)&&(_[F]=G[F])}}function Z(_){this.src=_,this.g={},this.h=0}Z.prototype.add=function(_,M,F,G,pe){const be=_.toString();_=this.g[be],_||(_=this.g[be]=[],this.h++);const Me=de(_,M,G,pe);return Me>-1?(M=_[Me],F||(M.fa=!1)):(M=new Y(M,this.src,be,!!G,pe),M.fa=F,_.push(M)),M};function le(_,M){const F=M.type;if(F in _.g){var G=_.g[F],pe=Array.prototype.indexOf.call(G,M,void 0),be;(be=pe>=0)&&Array.prototype.splice.call(G,pe,1),be&&(J(M),_.g[F].length==0&&(delete _.g[F],_.h--))}}function de(_,M,F,G){for(let pe=0;pe<_.length;++pe){const be=_[pe];if(!be.da&&be.listener==M&&be.capture==!!F&&be.ha==G)return pe}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),he={};function ee(_,M,F,G,pe){if(Array.isArray(M)){for(let be=0;be<M.length;be++)ee(_,M[be],F,G,pe);return null}return F=Ie(F),_&&_[Q]?_.J(M,F,o(G)?!!G.capture:!1,pe):Se(_,M,F,!1,G,pe)}function Se(_,M,F,G,pe,be){if(!M)throw Error("Invalid event type");const Me=o(pe)?!!pe.capture:!!pe;let ht=je(_);if(ht||(_[ce]=ht=new Z(_)),F=ht.add(M,F,G,Me,be),F.proxy)return F;if(G=re(),F.proxy=G,G.src=_,G.listener=F,_.addEventListener)B||(pe=Me),pe===void 0&&(pe=!1),_.addEventListener(M.toString(),G,pe);else if(_.attachEvent)_.attachEvent(Pe(M.toString()),G);else if(_.addListener&&_.removeListener)_.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return F}function re(){function _(F){return M.call(_.src,_.listener,F)}const M=ze;return _}function oe(_,M,F,G,pe){if(Array.isArray(M))for(var be=0;be<M.length;be++)oe(_,M[be],F,G,pe);else G=o(G)?!!G.capture:!!G,F=Ie(F),_&&_[Q]?(_=_.i,be=String(M).toString(),be in _.g&&(M=_.g[be],F=de(M,F,G,pe),F>-1&&(J(M[F]),Array.prototype.splice.call(M,F,1),M.length==0&&(delete _.g[be],_.h--)))):_&&(_=je(_))&&(M=_.g[M.toString()],_=-1,M&&(_=de(M,F,G,pe)),(F=_>-1?M[_]:null)&&De(F))}function De(_){if(typeof _!="number"&&_&&!_.da){var M=_.src;if(M&&M[Q])le(M.i,_);else{var F=_.type,G=_.proxy;M.removeEventListener?M.removeEventListener(F,G,_.capture):M.detachEvent?M.detachEvent(Pe(F),G):M.addListener&&M.removeListener&&M.removeListener(G),(F=je(M))?(le(F,_),F.h==0&&(F.src=null,M[ce]=null)):J(_)}}}function Pe(_){return _ in he?he[_]:he[_]="on"+_}function ze(_,M){if(_.da)_=!0;else{M=new K(M,this);const F=_.listener,G=_.ha||_.src;_.fa&&De(_),_=F.call(G,M)}return _}function je(_){return _=_[ce],_ instanceof Z?_:null}var Ue="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ie(_){return typeof _=="function"?_:(_[Ue]||(_[Ue]=function(M){return _.handleEvent(M)}),_[Ue])}function Oe(){j.call(this),this.i=new Z(this),this.M=this,this.G=null}h(Oe,j),Oe.prototype[Q]=!0,Oe.prototype.removeEventListener=function(_,M,F,G){oe(this,_,M,F,G)};function Ge(_,M){var F,G=_.G;if(G)for(F=[];G;G=G.G)F.push(G);if(_=_.M,G=M.type||M,typeof M=="string")M=new z(M,_);else if(M instanceof z)M.target=M.target||_;else{var pe=M;M=new z(G,_),H(M,pe)}pe=!0;let be,Me;if(F)for(Me=F.length-1;Me>=0;Me--)be=M.g=F[Me],pe=yt(be,G,!0,M)&&pe;if(be=M.g=_,pe=yt(be,G,!0,M)&&pe,pe=yt(be,G,!1,M)&&pe,F)for(Me=0;Me<F.length;Me++)be=M.g=F[Me],pe=yt(be,G,!1,M)&&pe}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var _=this.i;for(const M in _.g){const F=_.g[M];for(let G=0;G<F.length;G++)J(F[G]);delete _.g[M],_.h--}}this.G=null},Oe.prototype.J=function(_,M,F,G){return this.i.add(String(_),M,!1,F,G)},Oe.prototype.K=function(_,M,F,G){return this.i.add(String(_),M,!0,F,G)};function yt(_,M,F,G){if(M=_.i.g[String(M)],!M)return!0;M=M.concat();let pe=!0;for(let be=0;be<M.length;++be){const Me=M[be];if(Me&&!Me.da&&Me.capture==F){const ht=Me.listener,Hn=Me.ha||Me.src;Me.fa&&le(_.i,Me),pe=ht.call(Hn,G)!==!1&&pe}}return pe&&!G.defaultPrevented}function Dt(_,M){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(M)>2147483647?-1:s.setTimeout(_,M||0)}function Nt(_){_.g=Dt(()=>{_.g=null,_.i&&(_.i=!1,Nt(_))},_.l);const M=_.h;_.h=null,_.m.apply(null,M)}class ot extends j{constructor(M,F){super(),this.m=M,this.l=F,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:Nt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Et(_){j.call(this),this.h=_,this.g={}}h(Et,j);var ft=[];function xn(_){ne(_.g,function(M,F){this.g.hasOwnProperty(F)&&De(M)},_),_.g={}}Et.prototype.N=function(){Et.Z.N.call(this),xn(this)},Et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=s.JSON.stringify,Fr=s.JSON.parse,rs=class{stringify(_){return s.JSON.stringify(_,void 0)}parse(_){return s.JSON.parse(_,void 0)}};function is(){}function as(){}var hi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wn(){z.call(this,"d")}h(wn,z);function _n(){z.call(this,"c")}h(_n,z);var Vt={},zs=null;function Gl(){return zs=zs||new Oe}Vt.Ia="serverreachability";function Hl(_){z.call(this,Vt.Ia,_)}h(Hl,z);function xt(_){const M=Gl();Ge(M,new Hl(M))}Vt.STAT_EVENT="statevent";function Pn(_,M){z.call(this,Vt.STAT_EVENT,_),this.stat=M}h(Pn,z);function Dn(_){const M=Gl();Ge(M,new Pn(M,_))}Vt.Ja="timingevent";function Ki(_,M){z.call(this,Vt.Ja,_),this.size=M}h(Ki,z);function xa(_,M){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){_()},M)}function pi(){this.g=!0}pi.prototype.ua=function(){this.g=!1};function QS(_,M,F,G,pe,be){_.info(function(){if(_.g)if(be){var Me="",ht=be.split("&");for(let Bt=0;Bt<ht.length;Bt++){var Hn=ht[Bt].split("=");if(Hn.length>1){const Sn=Hn[0];Hn=Hn[1];const Ea=Sn.split("_");Me=Ea.length>=2&&Ea[1]=="type"?Me+(Sn+"="+Hn+"&"):Me+(Sn+"=redacted&")}}}else Me=null;else Me=be;return"XMLHTTP REQ ("+G+") [attempt "+pe+"]: "+M+`
`+F+`
`+Me})}function oy(_,M,F,G,pe,be,Me){_.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+pe+"]: "+M+`
`+F+`
`+be+" "+Me})}function Ls(_,M,F,G){_.info(function(){return"XMLHTTP TEXT ("+M+"): "+ZS(_,F)+(G?" "+G:"")})}function Tu(_,M){_.info(function(){return"TIMEOUT: "+M})}pi.prototype.info=function(){};function ZS(_,M){if(!_.g)return M;if(!M)return null;try{const be=JSON.parse(M);if(be){for(_=0;_<be.length;_++)if(Array.isArray(be[_])){var F=be[_];if(!(F.length<2)){var G=F[1];if(Array.isArray(G)&&!(G.length<1)){var pe=G[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(let Me=1;Me<G.length;Me++)G[Me]=""}}}}return Zt(be)}catch{return M}}var Au={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ng;function Cu(){}h(Cu,is),Cu.prototype.g=function(){return new XMLHttpRequest},ng=new Cu;function Mo(_){return encodeURIComponent(String(_))}function ly(_){var M=1;_=_.split(":");const F=[];for(;M>0&&_.length;)F.push(_.shift()),M--;return _.length&&F.push(_.join(":")),F}function ss(_,M,F,G){this.j=_,this.i=M,this.l=F,this.S=G||1,this.V=new Et(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new os}function os(){this.i=null,this.g="",this.h=!1}var er={},Pr={};function Vs(_,M,F){_.M=1,_.A=Iu(nr(M)),_.u=F,_.R=!0,bf(_,null)}function bf(_,M){_.F=Date.now(),Bs(_),_.B=nr(_.A);var F=_.B,G=_.S;Array.isArray(G)||(G=[String(G)]),Sf(F.i,"t",G),_.C=0,F=_.j.L,_.h=new os,_.g=Sy(_.j,F?M:null,!_.u),_.P>0&&(_.O=new ot(u(_.Y,_,_.g),_.P)),M=_.V,F=_.g,G=_.ba;var pe="readystatechange";Array.isArray(pe)||(pe&&(ft[0]=pe.toString()),pe=ft);for(let be=0;be<pe.length;be++){const Me=ee(F,pe[be],G||M.handleEvent,!1,M.h||M);if(!Me)break;M.g[Me.key]=Me}M=_.J?U(_.J):{},_.u?(_.v||(_.v="POST"),M["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,M)):(_.v="GET",_.g.ea(_.B,_.v,null,M)),xt(),QS(_.i,_.v,_.B,_.l,_.S,_.u)}ss.prototype.ba=function(_){_=_.target;const M=this.O;M&&us(_)==3?M.j():this.Y(_)},ss.prototype.Y=function(_){try{if(_==this.g)e:{const ht=us(this.g),Hn=this.g.ya(),Bt=this.g.ca();if(!(ht<3)&&(ht!=3||this.g&&(this.h.h||this.g.la()||Ur(this.g)))){this.K||ht!=4||Hn==7||(Hn==8||Bt<=0?xt(3):xt(2)),Fs(this);var M=this.g.ca();this.X=M;var F=JS(this);if(this.o=M==200,oy(this.i,this.v,this.B,this.l,this.S,ht,M),this.o){if(this.U&&!this.L){t:{if(this.g){var G,pe=this.g;if((G=pe.g?pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(G)){var be=G;break t}}be=null}if(_=be)Ls(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Us(this,_);else{this.o=!1,this.m=3,Dn(12),Wi(this),wa(this);break e}}if(this.R){_=!0;let Sn;for(;!this.K&&this.C<F.length;)if(Sn=uy(this,F),Sn==Pr){ht==4&&(this.m=4,Dn(14),_=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==er){this.m=4,Dn(15),Ls(this.i,this.l,F,"[Invalid Chunk]"),_=!1;break}else Ls(this.i,this.l,Sn,null),Us(this,Sn);if(cy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||F.length!=0||this.h.h||(this.m=1,Dn(16),_=!1),this.o=this.o&&_,!_)Ls(this.i,this.l,F,"[Invalid Chunked Response]"),Wi(this),wa(this);else if(F.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),vg(Me),Me.P=!0,Dn(11))}}else Ls(this.i,this.l,F,null),Us(this,F);ht==4&&Wi(this),this.o&&!this.K&&(ht==4?by(this.j,this):(this.o=!1,Bs(this)))}else zo(this.g),M==400&&F.indexOf("Unknown SID")>0?(this.m=3,Dn(12)):(this.m=0,Dn(13)),Wi(this),wa(this)}}}catch{}finally{}};function JS(_){if(!cy(_))return _.g.la();const M=Ur(_.g);if(M==="")return"";let F="";const G=M.length,pe=us(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Wi(_),wa(_),"";_.h.i=new s.TextDecoder}for(let be=0;be<G;be++)_.h.h=!0,F+=_.h.i.decode(M[be],{stream:!(pe&&be==G-1)});return M.length=0,_.h.g+=F,_.C=0,_.h.g}function cy(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function uy(_,M){var F=_.C,G=M.indexOf(`
`,F);return G==-1?Pr:(F=Number(M.substring(F,G)),isNaN(F)?er:(G+=1,G+F>M.length?Pr:(M=M.slice(G,G+F),_.C=G+F,M)))}ss.prototype.cancel=function(){this.K=!0,Wi(this)};function Bs(_){_.T=Date.now()+_.H,xf(_,_.H)}function xf(_,M){if(_.D!=null)throw Error("WatchDog timer not null");_.D=xa(u(_.aa,_),M)}function Fs(_){_.D&&(s.clearTimeout(_.D),_.D=null)}ss.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(Tu(this.i,this.B),this.M!=2&&(xt(),Dn(17)),Wi(this),this.m=2,wa(this)):xf(this,this.T-_)};function wa(_){_.j.I==0||_.K||by(_.j,_)}function Wi(_){Fs(_);var M=_.O;M&&typeof M.dispose=="function"&&M.dispose(),_.O=null,xn(_.V),_.g&&(M=_.g,_.g=null,M.abort(),M.dispose())}function Us(_,M){try{var F=_.j;if(F.I!=0&&(F.g==_||qs(F.h,_))){if(!_.L&&qs(F.h,_)&&F.I==3){try{var G=F.Ba.g.parse(M)}catch{G=null}if(Array.isArray(G)&&G.length==3){var pe=G;if(pe[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<_.F)If(F),ec(F);else break e;Mu(F),Dn(18)}}else F.xa=pe[1],0<F.xa-F.K&&pe[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=xa(u(F.Va,F),6e3));$s(F.h)<=1&&F.ta&&(F.ta=void 0)}else Xs(F,11)}else if((_.L||F.g==_)&&If(F),!L(M))for(pe=F.Ba.g.parse(M),M=0;M<pe.length;M++){let Bt=pe[M];const Sn=Bt[0];if(!(Sn<=F.K))if(F.K=Sn,Bt=Bt[1],F.I==2)if(Bt[0]=="c"){F.M=Bt[1],F.ba=Bt[2];const Ea=Bt[3];Ea!=null&&(F.ka=Ea,F.j.info("VER="+F.ka));const Qs=Bt[4];Qs!=null&&(F.za=Qs,F.j.info("SVER="+F.za));const ds=Bt[5];ds!=null&&typeof ds=="number"&&ds>0&&(G=1.5*ds,F.O=G,F.j.info("backChannelRequestTimeoutMs_="+G)),G=F;const fs=_.g;if(fs){const ju=fs.g?fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ju){var be=G.h;be.g||ju.indexOf("spdy")==-1&&ju.indexOf("quic")==-1&&ju.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(ag(be,be.h),be.h=null))}if(G.G){const kf=fs.g?fs.g.getResponseHeader("X-HTTP-Session-Id"):null;kf&&(G.wa=kf,Gt(G.J,G.G,kf))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-_.F,F.j.info("Handshake RTT: "+F.T+"ms")),G=F;var Me=_;if(G.na=_y(G,G.L?G.ba:null,G.W),Me.L){sg(G.h,Me);var ht=Me,Hn=G.O;Hn&&(ht.H=Hn),ht.D&&(Fs(ht),Bs(ht)),G.g=Me}else vy(G);F.i.length>0&&Ys(F)}else Bt[0]!="stop"&&Bt[0]!="close"||Xs(F,7);else F.I==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Xs(F,7):gg(F):Bt[0]!="noop"&&F.l&&F.l.qa(Bt),F.A=0)}}xt(4)}catch{}}var tr=class{constructor(_,M){this.g=_,this.map=M}};function rg(_){this.l=_||10,s.PerformanceNavigationTiming?(_=s.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ig(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function $s(_){return _.h?1:_.g?_.g.size:0}function qs(_,M){return _.h?_.h==M:_.g?_.g.has(M):!1}function ag(_,M){_.g?_.g.add(M):_.h=M}function sg(_,M){_.h&&_.h==M?_.h=null:_.g&&_.g.has(M)&&_.g.delete(M)}rg.prototype.cancel=function(){if(this.i=og(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function og(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let M=_.i;for(const F of _.g.values())M=M.concat(F.G);return M}return m(_.i)}var dy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wf(_,M){if(_){_=_.split("&");for(let F=0;F<_.length;F++){const G=_[F].indexOf("=");let pe,be=null;G>=0?(pe=_[F].substring(0,G),be=_[F].substring(G+1)):pe=_[F],M(pe,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function Yi(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let M;_ instanceof Yi?(this.l=_.l,Dr(this,_.j),this.o=_.o,this.g=_.g,Kl(this,_.u),this.h=_.h,lg(this,gy(_.i)),this.m=_.m):_&&(M=String(_).match(dy))?(this.l=!1,Dr(this,M[1]||"",!0),this.o=Gs(M[2]||""),this.g=Gs(M[3]||"",!0),Kl(this,M[4]),this.h=Gs(M[5]||"",!0),lg(this,M[6]||"",!0),this.m=Gs(M[7]||"")):(this.l=!1,this.i=new Yl(null,this.l))}Yi.prototype.toString=function(){const _=[];var M=this.j;M&&_.push(ku(M,_f,!0),":");var F=this.g;return(F||M=="file")&&(_.push("//"),(M=this.o)&&_.push(ku(M,_f,!0),"@"),_.push(Mo(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&_.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&_.push("/"),_.push(ku(F,F.charAt(0)=="/"?cg:fy,!0))),(F=this.i.toString())&&_.push("?",F),(F=this.m)&&_.push("#",ku(F,hy)),_.join("")},Yi.prototype.resolve=function(_){const M=nr(this);let F=!!_.j;F?Dr(M,_.j):F=!!_.o,F?M.o=_.o:F=!!_.g,F?M.g=_.g:F=_.u!=null;var G=_.h;if(F)Kl(M,_.u);else if(F=!!_.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var pe=M.h.lastIndexOf("/");pe!=-1&&(G=M.h.slice(0,pe+1)+G)}if(pe=G,pe==".."||pe==".")G="";else if(pe.indexOf("./")!=-1||pe.indexOf("/.")!=-1){G=pe.lastIndexOf("/",0)==0,pe=pe.split("/");const be=[];for(let Me=0;Me<pe.length;){const ht=pe[Me++];ht=="."?G&&Me==pe.length&&be.push(""):ht==".."?((be.length>1||be.length==1&&be[0]!="")&&be.pop(),G&&Me==pe.length&&be.push("")):(be.push(ht),G=!0)}G=be.join("/")}else G=pe}return F?M.h=G:F=_.i.toString()!=="",F?lg(M,gy(_.i)):F=!!_.m,F&&(M.m=_.m),M};function nr(_){return new Yi(_)}function Dr(_,M,F){_.j=F?Gs(M,!0):M,_.j&&(_.j=_.j.replace(/:$/,""))}function Kl(_,M){if(M){if(M=Number(M),isNaN(M)||M<0)throw Error("Bad port number "+M);_.u=M}else _.u=null}function lg(_,M,F){M instanceof Yl?(_.i=M,Ef(_.i,_.l)):(F||(M=ku(M,Wl)),_.i=new Yl(M,_.l))}function Gt(_,M,F){_.i.set(M,F)}function Iu(_){return Gt(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Gs(_,M){return _?M?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function ku(_,M,F){return typeof _=="string"?(_=encodeURI(_).replace(M,Ii),F&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ii(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var _f=/[#\/\?@]/g,fy=/[#\?:]/g,cg=/[#\?]/g,Wl=/[#\?@]/g,hy=/#/g;function Yl(_,M){this.h=this.g=null,this.i=_||null,this.j=!!M}function ki(_){_.g||(_.g=new Map,_.h=0,_.i&&wf(_.i,function(M,F){_.add(decodeURIComponent(M.replace(/\+/g," ")),F)}))}t=Yl.prototype,t.add=function(_,M){ki(this),this.i=null,_=Xl(this,_);let F=this.g.get(_);return F||this.g.set(_,F=[]),F.push(M),this.h+=1,this};function py(_,M){ki(_),M=Xl(_,M),_.g.has(M)&&(_.i=null,_.h-=_.g.get(M).length,_.g.delete(M))}function ug(_,M){return ki(_),M=Xl(_,M),_.g.has(M)}t.forEach=function(_,M){ki(this),this.g.forEach(function(F,G){F.forEach(function(pe){_.call(M,pe,G,this)},this)},this)};function dg(_,M){ki(_);let F=[];if(typeof M=="string")ug(_,M)&&(F=F.concat(_.g.get(Xl(_,M))));else for(_=Array.from(_.g.values()),M=0;M<_.length;M++)F=F.concat(_[M]);return F}t.set=function(_,M){return ki(this),this.i=null,_=Xl(this,_),ug(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[M]),this.h+=1,this},t.get=function(_,M){return _?(_=dg(this,_),_.length>0?String(_[0]):M):M};function Sf(_,M,F){py(_,M),F.length>0&&(_.i=null,_.g.set(Xl(_,M),m(F)),_.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],M=Array.from(this.g.keys());for(let G=0;G<M.length;G++){var F=M[G];const pe=Mo(F);F=dg(this,F);for(let be=0;be<F.length;be++){let Me=pe;F[be]!==""&&(Me+="="+Mo(F[be])),_.push(Me)}}return this.i=_.join("&")};function gy(_){const M=new Yl;return M.i=_.i,_.g&&(M.g=new Map(_.g),M.h=_.h),M}function Xl(_,M){return M=String(M),_.j&&(M=M.toLowerCase()),M}function Ef(_,M){M&&!_.j&&(ki(_),_.i=null,_.g.forEach(function(F,G){const pe=G.toLowerCase();G!=pe&&(py(this,G),Sf(this,pe,F))},_)),_.j=M}function ls(_,M){const F=new pi;if(s.Image){const G=new Image;G.onload=f(_a,F,"TestLoadImage: loaded",!0,M,G),G.onerror=f(_a,F,"TestLoadImage: error",!1,M,G),G.onabort=f(_a,F,"TestLoadImage: abort",!1,M,G),G.ontimeout=f(_a,F,"TestLoadImage: timeout",!1,M,G),s.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=_}else M(!1)}function fg(_,M){const F=new pi,G=new AbortController,pe=setTimeout(()=>{G.abort(),_a(F,"TestPingServer: timeout",!1,M)},1e4);fetch(_,{signal:G.signal}).then(be=>{clearTimeout(pe),be.ok?_a(F,"TestPingServer: ok",!0,M):_a(F,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(pe),_a(F,"TestPingServer: error",!1,M)})}function _a(_,M,F,G,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),G(F)}catch{}}function Ql(){this.g=new rs}function Hs(_){this.i=_.Sb||null,this.h=_.ab||!1}h(Hs,is),Hs.prototype.g=function(){return new Pu(this.i,this.h)};function Pu(_,M){Oe.call(this),this.H=_,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Pu,Oe),t=Pu.prototype,t.open=function(_,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=M,this.readyState=1,cs(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const M={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(M.body=_),(this.H||s).fetch(new Request(this.D,M)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zl(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tf(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tf(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var M=_.value?_.value:new Uint8Array(0);(M=this.B.decode(M,{stream:!_.done}))&&(this.response=this.responseText+=M)}_.done?Zl(this):cs(this),this.readyState==3&&Tf(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,Zl(this))},t.Na=function(_){this.g&&(this.response=_,Zl(this))},t.ga=function(){this.g&&Zl(this)};function Zl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,cs(_)}t.setRequestHeader=function(_,M){this.A.append(_,M)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],M=this.h.entries();for(var F=M.next();!F.done;)F=F.value,_.push(F[0]+": "+F[1]),F=M.next();return _.join(`\r
`)};function cs(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Pu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Sa(_){let M="";return ne(_,function(F,G){M+=G,M+=":",M+=F,M+=`\r
`}),M}function Du(_,M,F){e:{for(G in F){var G=!1;break e}G=!0}G||(F=Sa(F),typeof _=="string"?F!=null&&Mo(F):Gt(_,M,F))}function Jt(_){Oe.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Jt,Oe);var Ks=/^https?$/i,hg=["POST","PUT"];t=Jt.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,M,F,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);M=M?M.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ng.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(M,String(_),!0),this.B=!1}catch(be){Ou(this,be);return}if(_=F||"",F=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var pe in G)F.set(pe,G[pe]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const be of G.keys())F.set(be,G.get(be));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(F.keys()).find(be=>be.toLowerCase()=="content-type"),pe=s.FormData&&_ instanceof s.FormData,!(Array.prototype.indexOf.call(hg,M,void 0)>=0)||G||pe||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Me]of F)this.g.setRequestHeader(be,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(be){Ou(this,be)}};function Ou(_,M){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=M,_.o=5,pg(_),jo(_)}function pg(_){_.A||(_.A=!0,Ge(_,"complete"),Ge(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,Ge(this,"complete"),Ge(this,"abort"),jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jo(this,!0)),Jt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Nu(this):this.Xa())},t.Xa=function(){Nu(this)};function Nu(_){if(_.h&&typeof a<"u"){if(_.v&&us(_)==4)setTimeout(_.Ca.bind(_),0);else if(Ge(_,"readystatechange"),us(_)==4){_.h=!1;try{const be=_.ca();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var F;if(!(F=M)){var G;if(G=be===0){let Me=String(_.D).match(dy)[1]||null;!Me&&s.self&&s.self.location&&(Me=s.self.location.protocol.slice(0,-1)),G=!Ks.test(Me?Me.toLowerCase():"")}F=G}if(F)Ge(_,"complete"),Ge(_,"success");else{_.o=6;try{var pe=us(_)>2?_.g.statusText:""}catch{pe=""}_.l=pe+" ["+_.ca()+"]",pg(_)}}finally{jo(_)}}}}function jo(_,M){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const F=_.g;_.g=null,M||Ge(_,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function us(_){return _.g?_.g.readyState:0}t.ca=function(){try{return us(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var M=this.g.responseText;return _&&M.indexOf(_)==0&&(M=M.substring(_.length)),Fr(M)}};function Ur(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function zo(_){const M={};_=(_.g&&us(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<_.length;G++){if(L(_[G]))continue;var F=ly(_[G]);const pe=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const be=M[pe]||[];M[pe]=be,be.push(F)}W(M,function(G){return G.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(_,M,F){return F&&F.internalChannelParams&&F.internalChannelParams[_]||M}function Jl(_){this.za=0,this.i=[],this.j=new pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,_),this.Za=Ws("retryDelaySeedMs",1e4,_),this.Ta=Ws("forwardChannelMaxRetries",2,_),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new rg(_&&_.concurrentRequestLimit),this.Ba=new Ql,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Jl.prototype,t.ka=8,t.I=1,t.connect=function(_,M,F,G){Dn(0),this.W=_,this.H=M||{},F&&G!==void 0&&(this.H.OSID=F,this.H.OAID=G),this.F=this.X,this.J=_y(this,null,this.W),Ys(this)};function gg(_){if(Af(_),_.I==3){var M=_.V++,F=nr(_.J);if(Gt(F,"SID",_.M),Gt(F,"RID",M),Gt(F,"TYPE","terminate"),Ru(_,F),M=new ss(_,_.j,M),M.M=2,M.A=Iu(nr(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(M.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=M.A,F=!0),F||(M.g=Sy(M.j,null),M.g.ea(M.A)),M.F=Date.now(),Bs(M)}wy(_)}function ec(_){_.g&&(vg(_),_.g.cancel(),_.g=null)}function Af(_){ec(_),_.v&&(s.clearTimeout(_.v),_.v=null),If(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&s.clearTimeout(_.m),_.m=null)}function Ys(_){if(!ig(_.h)&&!_.m){_.m=!0;var M=_.Ea;O||P(),D||(O(),D=!0),k.add(M,_),_.D=0}}function Cf(_,M){return $s(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=M.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=xa(u(_.Ea,_,M),xy(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const pe=new ss(this,this.j,_);let be=this.o;if(this.U&&(be?(be=U(be),H(be,this.U)):be=this.U),this.u!==null||this.R||(pe.J=be,be=null),this.S)e:{for(var M=0,F=0;F<this.i.length;F++){t:{var G=this.i[F];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(M+=G,M>4096){M=F;break e}if(M===4096||F===this.i.length-1){M=F+1;break e}}M=1e3}else M=1e3;M=my(this,pe,M),F=nr(this.J),Gt(F,"RID",_),Gt(F,"CVER",22),this.G&&Gt(F,"X-HTTP-Session-Id",this.G),Ru(this,F),be&&(this.R?M="headers="+Mo(Sa(be))+"&"+M:this.u&&Du(F,this.u,be)),ag(this.h,pe),this.Ra&&Gt(F,"TYPE","init"),this.S?(Gt(F,"$req",M),Gt(F,"SID","null"),pe.U=!0,Vs(pe,F,null)):Vs(pe,F,M),this.I=2}}else this.I==3&&(_?mg(this,_):this.i.length==0||ig(this.h)||mg(this))};function mg(_,M){var F;M?F=M.l:F=_.V++;const G=nr(_.J);Gt(G,"SID",_.M),Gt(G,"RID",F),Gt(G,"AID",_.K),Ru(_,G),_.u&&_.o&&Du(G,_.u,_.o),F=new ss(_,_.j,F,_.D+1),_.u===null&&(F.J=_.o),M&&(_.i=M.G.concat(_.i)),M=my(_,F,1e3),F.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),ag(_.h,F),Vs(F,G,M)}function Ru(_,M){_.H&&ne(_.H,function(F,G){Gt(M,G,F)}),_.l&&ne({},function(F,G){Gt(M,G,F)})}function my(_,M,F){F=Math.min(_.i.length,F);const G=_.l?u(_.l.Ka,_.l,_):null;e:{var pe=_.i;let ht=-1;for(;;){const Hn=["count="+F];ht==-1?F>0?(ht=pe[0].g,Hn.push("ofs="+ht)):ht=0:Hn.push("ofs="+ht);let Bt=!0;for(let Sn=0;Sn<F;Sn++){var be=pe[Sn].g;const Ea=pe[Sn].map;if(be-=ht,be<0)ht=Math.max(0,pe[Sn].g-100),Bt=!1;else try{be="req"+be+"_"||"";try{var Me=Ea instanceof Map?Ea:Object.entries(Ea);for(const[Qs,ds]of Me){let fs=ds;o(ds)&&(fs=Zt(ds)),Hn.push(be+Qs+"="+encodeURIComponent(fs))}}catch(Qs){throw Hn.push(be+"type="+encodeURIComponent("_badmap")),Qs}}catch{G&&G(Ea)}}if(Bt){Me=Hn.join("&");break e}}Me=void 0}return _=_.i.splice(0,F),M.G=_,Me}function vy(_){if(!_.g&&!_.v){_.Y=1;var M=_.Da;O||P(),D||(O(),D=!0),k.add(M,_),_.A=0}}function Mu(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=xa(u(_.Da,_),xy(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,yy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=xa(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dn(10),ec(this),yy(this))};function vg(_){_.B!=null&&(s.clearTimeout(_.B),_.B=null)}function yy(_){_.g=new ss(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var M=nr(_.na);Gt(M,"RID","rpc"),Gt(M,"SID",_.M),Gt(M,"AID",_.K),Gt(M,"CI",_.F?"0":"1"),!_.F&&_.ia&&Gt(M,"TO",_.ia),Gt(M,"TYPE","xmlhttp"),Ru(_,M),_.u&&_.o&&Du(M,_.u,_.o),_.O&&(_.g.H=_.O);var F=_.g;_=_.ba,F.M=1,F.A=Iu(nr(M)),F.u=null,F.R=!0,bf(F,_)}t.Va=function(){this.C!=null&&(this.C=null,ec(this),Mu(this),Dn(19))};function If(_){_.C!=null&&(s.clearTimeout(_.C),_.C=null)}function by(_,M){var F=null;if(_.g==M){If(_),vg(_),_.g=null;var G=2}else if(qs(_.h,M))F=M.G,sg(_.h,M),G=1;else return;if(_.I!=0){if(M.o)if(G==1){F=M.u?M.u.length:0,M=Date.now()-M.F;var pe=_.D;G=Gl(),Ge(G,new Ki(G,F)),Ys(_)}else vy(_);else if(pe=M.m,pe==3||pe==0&&M.X>0||!(G==1&&Cf(_,M)||G==2&&Mu(_)))switch(F&&F.length>0&&(M=_.h,M.i=M.i.concat(F)),pe){case 1:Xs(_,5);break;case 4:Xs(_,10);break;case 3:Xs(_,6);break;default:Xs(_,2)}}}function xy(_,M){let F=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(F*=2),F*M}function Xs(_,M){if(_.j.info("Error code "+M),M==2){var F=u(_.bb,_),G=_.Ua;const pe=!G;G=new Yi(G||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Dr(G,"https"),Iu(G),pe?ls(G.toString(),F):fg(G.toString(),F)}else Dn(2);_.I=0,_.l&&_.l.pa(M),wy(_),Af(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Dn(2)):(this.j.info("Failed to ping google.com"),Dn(1))};function wy(_){if(_.I=0,_.ja=[],_.l){const M=og(_.h);(M.length!=0||_.i.length!=0)&&(b(_.ja,M),b(_.ja,_.i),_.h.i.length=0,m(_.i),_.i.length=0),_.l.oa()}}function _y(_,M,F){var G=F instanceof Yi?nr(F):new Yi(F);if(G.g!="")M&&(G.g=M+"."+G.g),Kl(G,G.u);else{var pe=s.location;G=pe.protocol,M=M?M+"."+pe.hostname:pe.hostname,pe=+pe.port;const be=new Yi(null);G&&Dr(be,G),M&&(be.g=M),pe&&Kl(be,pe),F&&(be.h=F),G=be}return F=_.G,M=_.wa,F&&M&&Gt(G,F,M),Gt(G,"VER",_.ka),Ru(_,G),G}function Sy(_,M,F){if(M&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return M=_.Aa&&!_.ma?new Jt(new Hs({ab:F})):new Jt(_.ma),M.Fa(_.L),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ey(){}t=Ey.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function tc(){}tc.prototype.g=function(_,M){return new gi(_,M)};function gi(_,M){Oe.call(this),this.g=new Jl(M),this.l=_,this.h=M&&M.messageUrlParams||null,_=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(_?_["X-WebChannel-Content-Type"]=M.messageContentType:_={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.sa&&(_?_["X-WebChannel-Client-Profile"]=M.sa:_={"X-WebChannel-Client-Profile":M.sa}),this.g.U=_,(_=M&&M.Qb)&&!L(_)&&(this.g.u=_),this.A=M&&M.supportsCrossDomainXhr||!1,this.v=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!L(M)&&(this.g.G=M,_=this.h,_!==null&&M in _&&(_=this.h,M in _&&delete _[M])),this.j=new Lo(this)}h(gi,Oe),gi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gi.prototype.close=function(){gg(this.g)},gi.prototype.o=function(_){var M=this.g;if(typeof _=="string"){var F={};F.__data__=_,_=F}else this.v&&(F={},F.__data__=Zt(_),_=F);M.i.push(new tr(M.Ya++,_)),M.I==3&&Ys(M)},gi.prototype.N=function(){this.g.l=null,delete this.j,gg(this.g),delete this.g,gi.Z.N.call(this)};function Ty(_){wn.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var M=_.__sm__;if(M){e:{for(const F in M){_=F;break e}_=void 0}(this.i=_)&&(_=this.i,M=M!==null&&_ in M?M[_]:void 0),this.data=M}else this.data=_}h(Ty,wn);function Ay(){_n.call(this),this.status=1}h(Ay,_n);function Lo(_){this.g=_}h(Lo,Ey),Lo.prototype.ra=function(){Ge(this.g,"a")},Lo.prototype.qa=function(_){Ge(this.g,new Ty(_))},Lo.prototype.pa=function(_){Ge(this.g,new Ay)},Lo.prototype.oa=function(){Ge(this.g,"b")},tc.prototype.createWebChannel=tc.prototype.g,gi.prototype.send=gi.prototype.o,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,B$=function(){return new tc},V$=function(){return Gl()},L$=Vt,WI={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Au.NO_ERROR=0,Au.TIMEOUT=8,Au.HTTP_ERROR=6,Px=Au,tg.COMPLETE="complete",z$=tg,as.EventType=hi,hi.OPEN="a",hi.CLOSE="b",hi.ERROR="c",hi.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,xm=as,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,j$=Jt}).apply(typeof Nb<"u"?Nb:typeof self<"u"?self:typeof window<"u"?window:{});const Cz="@firebase/firestore",Iz="4.9.2";class ri{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let Dp="12.3.0";const Vd=new _2("@firebase/firestore");function gh(){return Vd.logLevel}function ke(t,...e){if(Vd.logLevel<=Ct.DEBUG){const n=e.map(V2);Vd.debug(`Firestore (${Dp}): ${t}`,...n)}}function Qn(t,...e){if(Vd.logLevel<=Ct.ERROR){const n=e.map(V2);Vd.error(`Firestore (${Dp}): ${t}`,...n)}}function lv(t,...e){if(Vd.logLevel<=Ct.WARN){const n=e.map(V2);Vd.warn(`Firestore (${Dp}): ${t}`,...n)}}function V2(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Be(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,F$(t,r,n)}function F$(t,e,n){let r=`FIRESTORE (${Dp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qn(r),new Error(r)}function Ye(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||F$(e,i,r)}function He(t,e){return t}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Po{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class bce{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ri.UNAUTHENTICATED)))}shutdown(){}}class wce{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new vo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new vo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new vo)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new bce(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new ri(e)}}class _ce{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ri.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sce{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _ce(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ri.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ece{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,la(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const r=a=>{a.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kz(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kz(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Tce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class B2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Tce(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function lt(t,e){return t<e?-1:t>e?1:0}function YI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return uA(i)===uA(a)?lt(i,a):uA(i)?1:-1}return lt(t.length,e.length)}const Ace=55296,Cce=57343;function uA(t){const e=t.charCodeAt(0);return e>=Ace&&e<=Cce}function Hh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function U$(t){return t+"\0"}const Pz="__name__";class ao{constructor(e,n,r){n===void 0?n=0:n>e.length&&Be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ao.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ao?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=ao.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return lt(e.length,n.length)}static compareSegments(e,n){const r=ao.isNumericId(e),i=ao.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ao.extractNumericId(e).compare(ao.extractNumericId(n)):YI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wc.fromString(e.substring(4,e.length-2))}}class Ut extends ao{construct(e,n,r){return new Ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Ut(n)}static emptyPath(){return new Ut([])}}const Ice=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends ao{construct(e,n,r){return new Rn(e,n,r)}static isValidIdentifier(e){return Ice.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pz}static keyField(){return new Rn([Pz])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Re(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Re(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Re(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Re(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(n)}static emptyPath(){return new Rn([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Ut.fromString(e))}static fromName(e){return new Le(Ut.fromString(e).popFirst(5))}static empty(){return new Le(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Ut(e.slice()))}}function $$(t,e,n){if(!n)throw new Re(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kce(t,e,n,r){if(e===!0&&r===!0)throw new Re(we.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dz(t){if(!Le.isDocumentKey(t))throw new Re(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Oz(t){if(Le.isDocumentKey(t))throw new Re(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function q$(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function s_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Be(12329,{type:typeof t})}function Fi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=s_(t);throw new Re(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function fr(t,e){const n={typeString:t};return e&&(n.value=e),n}function u0(t,e){if(!q$(t))throw new Re(we.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Re(we.INVALID_ARGUMENT,n);return!0}const Nz=-62135596800,Rz=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Rz);return new vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Nz)throw new Re(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rz}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(u0(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Nz;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:fr("string",vt._jsonSchemaVersion),seconds:fr("number"),nanoseconds:fr("number")};class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new vt(0,0))}static max(){return new Je(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Kh=-1;class p1{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function XI(t){return t.fields.find((e=>e.kind===2))}function td(t){return t.fields.filter((e=>e.kind!==2))}p1.UNKNOWN_ID=-1;class Dx{constructor(e,n){this.fieldPath=e,this.kind=n}}class cv{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new cv(0,pa.min())}}function G$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Je.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new pa(i,Le.empty(),e)}function H$(t){return new pa(t.readTime,t.key,Kh)}class pa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pa(Je.min(),Le.empty(),Kh)}static max(){return new pa(Je.max(),Le.empty(),Kh)}}function F2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Le.comparator(t.documentKey,e.documentKey),n!==0?n:lt(t.largestBatchId,e.largestBatchId))}const K$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function mu(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==K$)throw t;ke("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,r)=>{n(e)}))}static reject(e){return new fe(((n,r)=>{r(e)}))}static waitFor(e){return new fe(((n,r)=>{let i=0,a=0,s=!1;e.forEach((o=>{++i,o.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next((i=>i?fe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new fe(((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next((f=>{s[u]=f,++o,o===a&&r(s)}),(f=>i(f)))}}))}static doWhile(e,n){return new fe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const ia="SimpleDb";class o_{static open(e,n,r,i){try{return new o_(n,e.transaction(i,r))}catch(a){throw new Rm(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new vo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Rm(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=U2(r.target.error);this.S.reject(new Rm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ke(ia,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Dce(n)}}class Yc{static delete(e){return ke(ia,"Removing database:",e),ld(d8().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!b8())return!1;if(Yc.F())return!0;const e=Er(),n=Yc.M(e),r=0<n&&n<10,i=Y$(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Yc.M(Er())===12.2&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ke(ia,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new Rm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Re(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Re(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Rm(e,s))},i.onupgradeneeded=a=>{ke(ia,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{ke(ia,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const o=o_.open(this.db,e,a?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),fe.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&s<3;if(ke(ia,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Y$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Pce{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ld(this.U.delete())}}class Rm extends Re{constructor(e,n){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function vu(t){return t.name==="IndexedDbTransactionError"}class Dce{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ke(ia,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ke(ia,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ld(r)}add(e){return ke(ia,"ADD",this.store.name,e,e),ld(this.store.add(e))}get(e){return ld(this.store.get(e)).next((n=>(n===void 0&&(n=null),ke(ia,"GET",this.store.name,e,n),n)))}delete(e){return ke(ia,"DELETE",this.store.name,e),ld(this.store.delete(e))}count(){return ke(ia,"COUNT",this.store.name),ld(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new fe(((s,o)=>{a.onerror=c=>{o(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.H(a,((o,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new fe(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){ke(ia,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((a,s,o)=>o.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new fe(((r,i)=>{n.onerror=a=>{const s=U2(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((o=>{o?s.continue():r()})):r()}}))}H(e,n){const r=[];return new fe(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const o=s.target.result;if(!o)return void i();const c=new Pce(o),u=n(o.primaryKey,o.value,c);if(u instanceof fe){const f=u.catch((h=>(c.done(),fe.reject(h))));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>fe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ld(t){return new fe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=U2(r.target.error);n(i)}}))}let Mz=!1;function U2(t){const e=Yc.M(Er());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mz||(Mz=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Mm="IndexBackfiller";class Oce{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ke(Mm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();ke(Mm,`Documents written: ${n}`)}catch(n){vu(n)?ke(Mm,"Ignoring IndexedDB error during index backfill: ",n):await mu(n)}await this.re(6e4)}))}}class Nce{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return fe.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return ke(Mm,`Processing collection: ${s}`),this.oe(e,s,i).next((o=>{i-=o,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((o=>(ke(Mm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=H$(a);F2(s,r)>0&&(r=s)})),new pa(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class ji{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ji.ce=-1;const Ad=-1;function l_(t){return t==null}function uv(t){return t===0&&1/t==-1/0}function X$(t){return typeof t=="number"&&Number.isInteger(t)&&!uv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const g1="";function li(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jz(e)),e=Rce(t.get(n),e);return jz(e)}function Rce(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case g1:n+="";break;default:n+=a}}return n}function jz(t){return t+g1+""}function lo(t){const e=t.length;if(Ye(e>=2,64408,{path:t}),e===2)return Ye(t.charAt(0)===g1&&t.charAt(1)==="",56145,{path:t}),Ut.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(g1,a);switch((s<0||s>n)&&Be(50515,{path:t}),t.charAt(s+1)){case"":const o=t.substring(a,s);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Be(61167,{path:t})}a=s+2}return new Ut(r)}const nd="remoteDocuments",d0="owner",ah="owner",dv="mutationQueues",Mce="userId",vs="mutations",zz="batchId",vd="userMutationsIndex",Lz=["userId","batchId"];function Ox(t,e){return[t,li(e)]}function Q$(t,e,n){return[t,li(e),n]}const jce={},Wh="documentMutations",m1="remoteDocumentsV14",zce=["prefixPath","collectionGroup","readTime","documentId"],Nx="documentKeyIndex",Lce=["prefixPath","collectionGroup","documentId"],Z$="collectionGroupIndex",Vce=["collectionGroup","readTime","prefixPath","documentId"],fv="remoteDocumentGlobal",QI="remoteDocumentGlobalKey",Yh="targets",J$="queryTargetsIndex",Bce=["canonicalId","targetId"],Xh="targetDocuments",Fce=["targetId","path"],$2="documentTargetsIndex",Uce=["path","targetId"],v1="targetGlobalKey",Cd="targetGlobal",hv="collectionParents",$ce=["collectionId","parent"],Qh="clientMetadata",qce="clientId",c_="bundles",Gce="bundleId",u_="namedQueries",Hce="name",q2="indexConfiguration",Kce="indexId",ZI="collectionGroupIndex",Wce="collectionGroup",jm="indexState",Yce=["indexId","uid"],e7="sequenceNumberIndex",Xce=["uid","sequenceNumber"],zm="indexEntries",Qce=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],t7="documentKeyIndex",Zce=["indexId","uid","orderedDocumentKey"],d_="documentOverlays",Jce=["userId","collectionPath","documentId"],JI="collectionPathOverlayIndex",eue=["userId","collectionPath","largestBatchId"],n7="collectionGroupOverlayIndex",tue=["userId","collectionGroup","largestBatchId"],G2="globals",nue="name",r7=[dv,vs,Wh,nd,Yh,d0,Cd,Xh,Qh,fv,hv,c_,u_],rue=[...r7,d_],i7=[dv,vs,Wh,m1,Yh,d0,Cd,Xh,Qh,fv,hv,c_,u_,d_],a7=i7,H2=[...a7,q2,jm,zm],iue=H2,s7=[...H2,G2],aue=s7;class ek extends W${constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Tr(t,e){const n=He(t);return Yc.O(n.le,e)}function Vz(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class hn{constructor(e,n){this.comparator=e,this.root=n||Qr.EMPTY}insert(e,n){return new hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rb(this.root,e,this.comparator,!0)}}class Rb{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Qr.RED,this.left=i??Qr.EMPTY,this.right=a??Qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Qr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Qr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1;Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Qr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xt{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bz(this.data.getIterator())}getIteratorFrom(e){return new Bz(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class Bz{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sh(t){return t.hasNext()?t.getNext():void 0}class zi{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new zi([])}unionWith(e){let n=new Xt(Rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class l7 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new l7("Invalid base64 string: "+a):a}})(e);return new Zn(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Zn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zn.EMPTY_BYTE_STRING=new Zn("");const sue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sl(t){if(Ye(!!t,39018),typeof t=="string"){let e=0;const n=sue.exec(t);if(Ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(t.seconds),nanos:An(t.nanos)}}function An(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function El(t){return typeof t=="string"?Zn.fromBase64String(t):Zn.fromUint8Array(t)}const c7="server_timestamp",u7="__type__",d7="__previous_value__",f7="__local_write_time__";function K2(t){return(t?.mapValue?.fields||{})[u7]?.stringValue===c7}function f_(t){const e=t.mapValue.fields[d7];return K2(e)?f_(e):e}function pv(t){const e=Sl(t.mapValue.fields[f7].timestampValue);return new vt(e.seconds,e.nanos)}class oue{constructor(e,n,r,i,a,s,o,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}}const y1="(default)";class Bd{constructor(e,n){this.projectId=e,this.database=n||y1}static empty(){return new Bd("","")}get isDefaultDatabase(){return this.database===y1}isEqual(e){return e instanceof Bd&&e.projectId===this.projectId&&e.database===this.database}}const W2="__type__",h7="__max__",Vc={mapValue:{fields:{__type__:{stringValue:h7}}}},Y2="__vector__",Zh="value",Rx={nullValue:"NULL_VALUE"};function tu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?K2(t)?4:p7(t)?9007199254740991:h_(t)?10:11:Be(28295,{value:t})}function Eo(t,e){if(t===e)return!0;const n=tu(t);if(n!==tu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pv(t).isEqual(pv(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Sl(i.timestampValue),o=Sl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return El(i.bytesValue).isEqual(El(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return An(i.geoPointValue.latitude)===An(a.geoPointValue.latitude)&&An(i.geoPointValue.longitude)===An(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return An(i.integerValue)===An(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=An(i.doubleValue),o=An(a.doubleValue);return s===o?uv(s)===uv(o):isNaN(s)&&isNaN(o)}return!1})(t,e);case 9:return Hh(t.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(Vz(s)!==Vz(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!Eo(s[c],o[c])))return!1;return!0})(t,e);default:return Be(52216,{left:t})}}function gv(t,e){return(t.values||[]).find((n=>Eo(n,e)))!==void 0}function nu(t,e){if(t===e)return 0;const n=tu(t),r=tu(e);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const o=An(a.integerValue||a.doubleValue),c=An(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(t,e);case 3:return Fz(t.timestampValue,e.timestampValue);case 4:return Fz(pv(t),pv(e));case 5:return YI(t.stringValue,e.stringValue);case 6:return(function(a,s){const o=El(a),c=El(s);return o.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const f=lt(o[u],c[u]);if(f!==0)return f}return lt(o.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const o=lt(An(a.latitude),An(s.latitude));return o!==0?o:lt(An(a.longitude),An(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Uz(t.arrayValue,e.arrayValue);case 10:return(function(a,s){const o=a.fields||{},c=s.fields||{},u=o[Zh]?.arrayValue,f=c[Zh]?.arrayValue,h=lt(u?.values?.length||0,f?.values?.length||0);return h!==0?h:Uz(u,f)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Vc.mapValue&&s===Vc.mapValue)return 0;if(a===Vc.mapValue)return 1;if(s===Vc.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let h=0;h<c.length&&h<f.length;++h){const g=YI(c[h],f[h]);if(g!==0)return g;const m=nu(o[c[h]],u[f[h]]);if(m!==0)return m}return lt(c.length,f.length)})(t.mapValue,e.mapValue);default:throw Be(23264,{he:n})}}function Fz(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const n=Sl(t),r=Sl(e),i=lt(n.seconds,r.seconds);return i!==0?i:lt(n.nanos,r.nanos)}function Uz(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=nu(n[i],r[i]);if(a)return a}return lt(n.length,r.length)}function Jh(t){return tk(t)}function tk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Sl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return El(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=tk(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${tk(n.fields[s])}`;return i+"}"})(t.mapValue):Be(61005,{value:t})}function Mx(t){switch(tu(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=f_(t);return e?16+Mx(e):16;case 5:return 2*t.stringValue.length;case 6:return El(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Mx(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return yu(r.fields,((a,s)=>{i+=a.length+Mx(s)})),i})(t.mapValue);default:throw Be(13486,{value:t})}}function mv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nk(t){return!!t&&"integerValue"in t}function vv(t){return!!t&&"arrayValue"in t}function $z(t){return!!t&&"nullValue"in t}function qz(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jx(t){return!!t&&"mapValue"in t}function h_(t){return(t?.mapValue?.fields||{})[W2]?.stringValue===Y2}function Lm(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yu(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Lm(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lm(t.arrayValue.values[n]);return e}return{...t}}function p7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===h7}const g7={mapValue:{fields:{[W2]:{stringValue:Y2},[Zh]:{arrayValue:{}}}}};function lue(t){return"nullValue"in t?Rx:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?mv(Bd.empty(),Le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?h_(t)?g7:{mapValue:{}}:Be(35942,{value:t})}function cue(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?mv(Bd.empty(),Le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?g7:"mapValue"in t?h_(t)?{mapValue:{}}:Vc:Be(61959,{value:t})}function Gz(t,e){const n=nu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Hz(t,e){const n=nu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lm(n)}setAll(e){let n=Rn.emptyPath(),r={},i=[];e.forEach(((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Lm(s):i.push(o.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());jx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){yu(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new si(Lm(this.value))}}function m7(t){const e=[];return yu(t.fields,((n,r)=>{const i=new Rn([n]);if(jx(r)){const a=m7(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new zi(e)}class $n{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new $n(e,0,Je.min(),Je.min(),Je.min(),si.empty(),0)}static newFoundDocument(e,n,r,i){return new $n(e,1,n,Je.min(),r,i,0)}static newNoDocument(e,n){return new $n(e,2,n,Je.min(),Je.min(),si.empty(),0)}static newUnknownDocument(e,n){return new $n(e,3,n,Je.min(),Je.min(),si.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ep{constructor(e,n){this.position=e,this.inclusive=n}}function Kz(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Le.comparator(Le.fromName(s.referenceValue),n.key):r=nu(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wz(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Eo(t.position[n],e.position[n]))return!1;return!0}class yv{constructor(e,n="asc"){this.field=e,this.dir=n}}function uue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class v7{}class It extends v7{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new due(e,n,r):n==="array-contains"?new pue(e,r):n==="in"?new S7(e,r):n==="not-in"?new gue(e,r):n==="array-contains-any"?new mue(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fue(e,r):new hue(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(nu(n,this.value)):n!==null&&tu(this.value)===tu(n)&&this.matchesComparison(nu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends v7{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yt(e,n)}matches(e){return tp(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tp(t){return t.op==="and"}function rk(t){return t.op==="or"}function X2(t){return y7(t)&&tp(t)}function y7(t){for(const e of t.filters)if(e instanceof Yt)return!1;return!0}function ik(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+Jh(t.value);if(X2(t))return t.filters.map((e=>ik(e))).join(",");{const e=t.filters.map((n=>ik(n))).join(",");return`${t.op}(${e})`}}function b7(t,e){return t instanceof It?(function(r,i){return i instanceof It&&r.op===i.op&&r.field.isEqual(i.field)&&Eo(r.value,i.value)})(t,e):t instanceof Yt?(function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,o)=>a&&b7(s,i.filters[o])),!0):!1})(t,e):void Be(19439)}function x7(t,e){const n=t.filters.concat(e);return Yt.create(n,t.op)}function w7(t){return t instanceof It?(function(n){return`${n.field.canonicalString()} ${n.op} ${Jh(n.value)}`})(t):t instanceof Yt?(function(n){return n.op.toString()+" {"+n.getFilters().map(w7).join(" ,")+"}"})(t):"Filter"}class due extends It{constructor(e,n,r){super(e,n,r),this.key=Le.fromName(r.referenceValue)}matches(e){const n=Le.comparator(e.key,this.key);return this.matchesComparison(n)}}class fue extends It{constructor(e,n){super(e,"in",n),this.keys=_7("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class hue extends It{constructor(e,n){super(e,"not-in",n),this.keys=_7("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function _7(t,e){return(e.arrayValue?.values||[]).map((n=>Le.fromName(n.referenceValue)))}class pue extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vv(n)&&gv(n.arrayValue,this.value)}}class S7 extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gv(this.value.arrayValue,n)}}class gue extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(gv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gv(this.value.arrayValue,n)}}class mue extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>gv(this.value.arrayValue,r)))}}class vue{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function ak(t,e=null,n=[],r=[],i=null,a=null,s=null){return new vue(t,e,n,r,i,a,s)}function Fd(t){const e=He(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ik(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),l_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Jh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Jh(r))).join(",")),e.Te=n}return e.Te}function f0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!b7(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wz(t.startAt,e.startAt)&&Wz(t.endAt,e.endAt)}function b1(t){return Le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function x1(t,e){return t.filters.filter((n=>n instanceof It&&n.field.isEqual(e)))}function Yz(t,e,n){let r=Rx,i=!0;for(const a of x1(t,e)){let s=Rx,o=!0;switch(a.op){case"<":case"<=":s=lue(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,o=!1;break;case"!=":case"not-in":s=Rx}Gz({value:r,inclusive:i},{value:s,inclusive:o})<0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];Gz({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function Xz(t,e,n){let r=Vc,i=!0;for(const a of x1(t,e)){let s=Vc,o=!0;switch(a.op){case">=":case">":s=cue(a.value),o=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,o=!1;break;case"!=":case"not-in":s=Vc}Hz({value:r,inclusive:i},{value:s,inclusive:o})>0&&(r=s,i=o)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];Hz({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}class Op{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function E7(t,e,n,r,i,a,s,o){return new Op(t,e,n,r,i,a,s,o)}function h0(t){return new Op(t)}function Qz(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function T7(t){return t.collectionGroup!==null}function Vm(t){const e=He(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Xt(Rn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new yv(a,r))})),n.has(Rn.keyField().canonicalString())||e.Ie.push(new yv(Rn.keyField(),r))}return e.Ie}function fa(t){const e=He(t);return e.Ee||(e.Ee=yue(e,Vm(t))),e.Ee}function yue(t,e){if(t.limitType==="F")return ak(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new yv(i.field,a)}));const n=t.endAt?new ep(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ep(t.startAt.position,t.startAt.inclusive):null;return ak(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sk(t,e){const n=t.filters.concat([e]);return new Op(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function w1(t,e,n){return new Op(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function p_(t,e){return f0(fa(t),fa(e))&&t.limitType===e.limitType}function A7(t){return`${Fd(fa(t))}|lt:${t.limitType}`}function mh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>w7(i))).join(", ")}]`),l_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Jh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Jh(i))).join(",")),`Target(${r})`})(fa(t))}; limitType=${t.limitType})`}function p0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Vm(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,o,c){const u=Kz(s,o,c);return s.inclusive?u<=0:u<0})(r.startAt,Vm(r),i)||r.endAt&&!(function(s,o,c){const u=Kz(s,o,c);return s.inclusive?u>=0:u>0})(r.endAt,Vm(r),i))})(t,e)}function C7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function I7(t){return(e,n)=>{let r=!1;for(const i of Vm(t)){const a=bue(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function bue(t,e,n){const r=t.field.isKeyField()?Le.comparator(e.key,n.key):(function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?nu(c,u):Be(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Be(19790,{direction:t.dir})}}class zl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yu(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return o7(this.inner)}size(){return this.innerSize}}const xue=new hn(Le.comparator);function ua(){return xue}const k7=new hn(Le.comparator);function wm(...t){let e=k7;for(const n of t)e=e.insert(n.key,n);return e}function P7(t){let e=k7;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function co(){return Bm()}function D7(){return Bm()}function Bm(){return new zl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const wue=new hn(Le.comparator),_ue=new Xt(Le.comparator);function bt(...t){let e=_ue;for(const n of t)e=e.add(n);return e}const Sue=new Xt(lt);function Q2(){return Sue}function Z2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uv(e)?"-0":e}}function O7(t){return{integerValue:""+t}}function Eue(t,e){return X$(e)?O7(e):Z2(t,e)}class g_{constructor(){this._=void 0}}function Tue(t,e,n){return t instanceof bv?(function(i,a){const s={fields:{[u7]:{stringValue:c7},[f7]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&K2(a)&&(a=f_(a)),a&&(s.fields[d7]=a),{mapValue:s}})(n,e):t instanceof Ud?R7(t,e):t instanceof np?M7(t,e):(function(i,a){const s=N7(i,a),o=Zz(s)+Zz(i.Ae);return nk(s)&&nk(i.Ae)?O7(o):Z2(i.serializer,o)})(t,e)}function Aue(t,e,n){return t instanceof Ud?R7(t,e):t instanceof np?M7(t,e):n}function N7(t,e){return t instanceof xv?(function(r){return nk(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class bv extends g_{}class Ud extends g_{constructor(e){super(),this.elements=e}}function R7(t,e){const n=j7(e);for(const r of t.elements)n.some((i=>Eo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class np extends g_{constructor(e){super(),this.elements=e}}function M7(t,e){let n=j7(e);for(const r of t.elements)n=n.filter((i=>!Eo(i,r)));return{arrayValue:{values:n}}}class xv extends g_{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Zz(t){return An(t.integerValue||t.doubleValue)}function j7(t){return vv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class z7{constructor(e,n){this.field=e,this.transform=n}}function Cue(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ud&&i instanceof Ud||r instanceof np&&i instanceof np?Hh(r.elements,i.elements,Eo):r instanceof xv&&i instanceof xv?Eo(r.Ae,i.Ae):r instanceof bv&&i instanceof bv})(t.transform,e.transform)}class Iue{constructor(e,n){this.version=e,this.transformResults=n}}class Sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class m_{}function L7(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new g0(t.key,Sr.none()):new Np(t.key,t.data,Sr.none());{const n=t.data,r=si.empty();let i=new Xt(Rn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Ll(t.key,r,new zi(i.toArray()),Sr.none())}}function kue(t,e,n){t instanceof Np?(function(i,a,s){const o=i.value.clone(),c=eL(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Ll?(function(i,a,s){if(!zx(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=eL(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(V7(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Fm(t,e,n,r){return t instanceof Np?(function(a,s,o,c){if(!zx(a.precondition,s))return o;const u=a.value.clone(),f=tL(a.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ll?(function(a,s,o,c){if(!zx(a.precondition,s))return o;const u=tL(a.fieldTransforms,c,s),f=s.data;return f.setAll(V7(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(a,s,o){return zx(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o})(t,e,n)}function Pue(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=N7(r.transform,i||null);a!=null&&(n===null&&(n=si.empty()),n.set(r.field,a))}return n||null}function Jz(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Hh(r,i,((a,s)=>Cue(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Np extends m_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ll extends m_{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function V7(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function eL(t,e,n){const r=new Map;Ye(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,Aue(s,o,n[i]))}return r}function tL(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,Tue(a,s,e))}return r}class g0 extends m_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B7 extends m_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class J2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&kue(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D7();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=L7(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Je.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),bt())}isEqual(e){return this.batchId===e.batchId&&Hh(this.mutations,e.mutations,((n,r)=>Jz(n,r)))&&Hh(this.baseMutations,e.baseMutations,((n,r)=>Jz(n,r)))}}class eD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return wue})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new eD(e,n,r,i)}}class tD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Due{constructor(e,n){this.count=e,this.unchangedNames=n}}var lr,Ot;function Oue(t){switch(t){case we.OK:return Be(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return Be(15467,{code:t})}}function F7(t){if(t===void 0)return Qn("GRPC error has no .code"),we.UNKNOWN;switch(t){case lr.OK:return we.OK;case lr.CANCELLED:return we.CANCELLED;case lr.UNKNOWN:return we.UNKNOWN;case lr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case lr.INTERNAL:return we.INTERNAL;case lr.UNAVAILABLE:return we.UNAVAILABLE;case lr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case lr.NOT_FOUND:return we.NOT_FOUND;case lr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case lr.ABORTED:return we.ABORTED;case lr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case lr.DATA_LOSS:return we.DATA_LOSS;default:return Be(39323,{code:t})}}(Ot=lr||(lr={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";function Nue(){return new TextEncoder}const Rue=new Wc([4294967295,4294967295],0);function nL(t){const e=Nue().encode(t),n=new M$;return n.update(e),new Uint8Array(n.digest())}function rL(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Wc([n,r],0),new Wc([i,a],0)]}class nD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _m(`Invalid padding: ${n}`);if(r<0)throw new _m(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _m(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _m(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Wc.fromNumber(r)));return i.compare(Rue)===1&&(i=new Wc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nL(e),[r,i]=rL(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new nD(a,i,n);return r.forEach((o=>s.insert(o))),s}insert(e){if(this.ge===0)return;const n=nL(e),[r,i]=rL(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _m extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class m0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,v0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new m0(Je.min(),i,new hn(lt),ua(),bt())}}class v0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new v0(r,n,bt(),bt(),bt())}}class Lx{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class U7{constructor(e,n){this.targetId=e,this.Ce=n}}class $7{constructor(e,n,r=Zn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class iL{constructor(){this.ve=0,this.Fe=aL(),this.Me=Zn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bt(),n=bt(),r=bt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Be(38017,{changeType:a})}})),new v0(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=aL()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Mue{constructor(e){this.Ge=e,this.ze=new Map,this.je=ua(),this.Je=Mb(),this.He=Mb(),this.Ye=new hn(lt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(b1(a))if(r===0){const s=new Le(a.path);this.et(n,s,$n.newNoDocument(s,Je.min()))}else Ye(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),c=o?this.ct(o,e,s):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=El(r).toUint8Array()}catch(c){if(c instanceof l7)return lv("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new nD(s,i,a)}catch(c){return lv(c instanceof _m?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const o=this.ot(s);if(o){if(a.current&&b1(o.target)){const c=new Le(o.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,$n.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.qe())}}));let r=bt();this.He.forEach(((a,s)=>{let o=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new m0(e,n,this.Ye,this.je,r);return this.je=ua(),this.Je=Mb(),this.He=Mb(),this.Ye=new hn(lt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new iL,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Xt(lt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Xt(lt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iL),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mb(){return new hn(Le.comparator)}function aL(){return new hn(Le.comparator)}const jue={asc:"ASCENDING",desc:"DESCENDING"},zue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lue={and:"AND",or:"OR"};class Vue{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ok(t,e){return t.useProto3Json||l_(e)?e:{value:e}}function rp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q7(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Bue(t,e){return rp(t,e.toTimestamp())}function Ei(t){return Ye(!!t,49232),Je.fromTimestamp((function(n){const r=Sl(n);return new vt(r.seconds,r.nanos)})(t))}function rD(t,e){return lk(t,e).canonicalString()}function lk(t,e){const n=(function(i){return new Ut(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function G7(t){const e=Ut.fromString(t);return Ye(eq(e),10190,{key:e.toString()}),e}function _1(t,e){return rD(t.databaseId,e.path)}function Id(t,e){const n=G7(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Le(W7(n))}function H7(t,e){return rD(t.databaseId,e)}function K7(t){const e=G7(t);return e.length===4?Ut.emptyPath():W7(e)}function ck(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W7(t){return Ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function sL(t,e,n){return{name:_1(t,e),fields:n.value.mapValue.fields}}function Fue(t,e,n){const r=Id(t,e.name),i=Ei(e.updateTime),a=e.createTime?Ei(e.createTime):Je.min(),s=new si({mapValue:{fields:e.fields}}),o=$n.newFoundDocument(r,i,a,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Uue(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Be(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(u,f){return u.useProto3Json?(Ye(f===void 0||typeof f=="string",58123),Zn.fromBase64String(f||"")):(Ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Zn.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&(function(u){const f=u.code===void 0?we.UNKNOWN:F7(u.code);return new Re(f,u.message||"")})(s);n=new $7(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Id(t,r.document.name),a=Ei(r.document.updateTime),s=r.document.createTime?Ei(r.document.createTime):Je.min(),o=new si({mapValue:{fields:r.document.fields}}),c=$n.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Lx(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Id(t,r.document),a=r.readTime?Ei(r.readTime):Je.min(),s=$n.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Lx([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Id(t,r.document),a=r.removedTargetIds||[];n=new Lx([],a,i,null)}else{if(!("filter"in e))return Be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Due(i,a),o=r.targetId;n=new U7(o,s)}}return n}function S1(t,e){let n;if(e instanceof Np)n={update:sL(t,e.key,e.value)};else if(e instanceof g0)n={delete:_1(t,e.key)};else if(e instanceof Ll)n={update:sL(t,e.key,e.data),updateMask:Wue(e.fieldMask)};else{if(!(e instanceof B7))return Be(16599,{Vt:e.type});n={verify:_1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const o=s.transform;if(o instanceof bv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ud)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof np)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof xv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw Be(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Bue(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Be(27497)})(t,e.precondition)),n}function uk(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?Sr.updateTime(Ei(a.updateTime)):a.exists!==void 0?Sr.exists(a.exists):Sr.none()})(e.currentDocument):Sr.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,o){let c=null;if("setToServerValue"in o)Ye(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new bv;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Ud(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new np(f)}else"increment"in o?c=new xv(s,o.increment):Be(16584,{proto:o});const u=Rn.fromServerFormat(o.fieldPath);return new z7(u,c)})(t,i))):[];if(e.update){e.update.name;const i=Id(t,e.update.name),a=new si({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const u=c.fieldPaths||[];return new zi(u.map((f=>Rn.fromServerFormat(f))))})(e.updateMask);return new Ll(i,a,s,n,r)}return new Np(i,a,n,r)}if(e.delete){const i=Id(t,e.delete);return new g0(i,n)}if(e.verify){const i=Id(t,e.verify);return new B7(i,n)}return Be(1463,{proto:e})}function $ue(t,e){return t&&t.length>0?(Ye(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?Ei(i.updateTime):Ei(a);return s.isEqual(Je.min())&&(s=Ei(a)),new Iue(s,i.transformResults||[])})(n,e)))):[]}function Y7(t,e){return{documents:[H7(t,e.path)]}}function X7(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=H7(t,i);const a=(function(u){if(u.length!==0)return J7(Yt.create(u,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:vh(g.field),direction:Gue(g.dir)}})(f)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ok(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:i}}function Q7(t){let e=K7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ye(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=(function(h){const g=Z7(h);return g instanceof Yt&&X2(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(h){return h.map((g=>(function(b){return new yv(yh(b.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let o=null;n.limit&&(o=(function(h){let g;return g=typeof h=="object"?h.value:h,l_(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(h){const g=!!h.before,m=h.values||[];return new ep(m,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(h){const g=!h.before,m=h.values||[];return new ep(m,g)})(n.endAt)),E7(e,i,s,a,o,"F",c,u)}function que(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Z7(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yh(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yh(n.unaryFilter.field);return It.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=yh(n.unaryFilter.field);return It.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=yh(n.unaryFilter.field);return It.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(t):t.fieldFilter!==void 0?(function(n){return It.create(yh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Yt.create(n.compositeFilter.filters.map((r=>Z7(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(n.compositeFilter.op))})(t):Be(30097,{filter:t})}function Gue(t){return jue[t]}function Hue(t){return zue[t]}function Kue(t){return Lue[t]}function vh(t){return{fieldPath:t.canonicalString()}}function yh(t){return Rn.fromServerFormat(t.fieldPath)}function J7(t){return t instanceof It?(function(n){if(n.op==="=="){if(qz(n.value))return{unaryFilter:{field:vh(n.field),op:"IS_NAN"}};if($z(n.value))return{unaryFilter:{field:vh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qz(n.value))return{unaryFilter:{field:vh(n.field),op:"IS_NOT_NAN"}};if($z(n.value))return{unaryFilter:{field:vh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vh(n.field),op:Hue(n.op),value:n.value}}})(t):t instanceof Yt?(function(n){const r=n.getFilters().map((i=>J7(i)));return r.length===1?r[0]:{compositeFilter:{op:Kue(n.op),filters:r}}})(t):Be(54877,{filter:t})}function Wue(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function eq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ll{constructor(e,n,r,i,a=Je.min(),s=Je.min(),o=Zn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new ll(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tq{constructor(e){this.yt=e}}function Yue(t,e){let n;if(e.document)n=Fue(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Le.fromSegments(e.noDocument.path),i=qd(e.noDocument.readTime);n=$n.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Be(56709);{const r=Le.fromSegments(e.unknownDocument.path),i=qd(e.unknownDocument.version);n=$n.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new vt(i[0],i[1]);return Je.fromTimestamp(a)})(e.readTime)),n}function oL(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:E1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:_1(a,s.key),fields:s.data.value.mapValue.fields,updateTime:rp(a,s.version.toTimestamp()),createTime:rp(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$d(e.version)};else{if(!e.isUnknownDocument())return Be(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:$d(e.version)}}return r}function E1(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $d(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qd(t){const e=new vt(t.seconds,t.nanoseconds);return Je.fromTimestamp(e)}function cd(t,e){const n=(e.baseMutations||[]).map((a=>uk(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const o=e.mutations[a+1];s.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>uk(t.yt,a))),i=vt.fromMillis(e.localWriteTimeMs);return new J2(e.batchId,i,n,r)}function Sm(t){const e=qd(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?qd(t.lastLimboFreeSnapshotVersion):Je.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return Ye(s===1,1966,{count:s}),fa(h0(K7(a.documents[0])))})(t.query):(function(a){return fa(Q7(a))})(t.query),new ll(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Zn.fromBase64String(t.resumeToken))}function nq(t,e){const n=$d(e.snapshotVersion),r=$d(e.lastLimboFreeSnapshotVersion);let i;i=b1(e.target)?Y7(t.yt,e.target):X7(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fd(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rq(t){const e=Q7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?w1(e,e.limit,"L"):e}function dA(t,e){return new tD(e.largestBatchId,uk(t.yt,e.overlayMutation))}function lL(t,e){const n=e.path.lastSegment();return[t,li(e.path.popLast()),n]}function cL(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:$d(r.readTime),documentKey:li(r.documentKey.path),largestBatchId:r.largestBatchId}}class Xue{getBundleMetadata(e,n){return uL(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:qd(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return uL(e).put((function(i){return{bundleId:i.id,createTime:$d(Ei(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return dL(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:rq(a.bundledQuery),readTime:qd(a.readTime)}})(r)}))}saveNamedQuery(e,n){return dL(e).put((function(i){return{name:i.name,readTime:$d(Ei(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function uL(t){return Tr(t,c_)}function dL(t){return Tr(t,u_)}class v_{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new v_(e,r)}getOverlay(e,n){return rm(e).get(lL(this.userId,n)).next((r=>r?dA(this.serializer,r):null))}getOverlays(e,n){const r=co();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const o=new tD(n,s);i.push(this.St(e,o))})),fe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(li(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(rm(e).Z(JI,o))})),fe.waitFor(a)}getOverlaysForCollection(e,n,r){const i=co(),a=li(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return rm(e).J(JI,s).next((o=>{for(const c of o){const u=dA(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=co();let s;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return rm(e).ee({index:n7,range:o},((c,u,f)=>{const h=dA(this.serializer,u);a.size()<i||h.largestBatchId===s?(a.set(h.getKey(),h),s=h.largestBatchId):f.done()})).next((()=>a))}St(e,n){return rm(e).put((function(i,a,s){const[o,c,u]=lL(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:S1(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function rm(t){return Tr(t,d_)}class Que{bt(e){return Tr(e,G2)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Zn.fromUint8Array(r):Zn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class ud{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(An(e.integerValue));else if("doubleValue"in e){const r=An(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),uv(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Sl(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(El(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?p7(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):h_(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Be(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=Zh,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(An(a)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Le.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ud.Kt=new ud;const oh=255;function Zue(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function fL(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=Zue(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class Jue{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=fL(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=fL(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(oh),this.sn(255)}_n(){this.an(oh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===oh?(this.sn(oh),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===oh?(this.an(oh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ede{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class tde{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class im{constructor(){this.cn=new Jue,this.ln=new ede(this.cn),this.hn=new tde(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class dd{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new dd(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Vx(this.En),directionalValue:Vx(this.dn),orderedDocumentKey:Vx(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Tc(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=hL(t.En,e.En),n!==0?n:(n=hL(t.dn,e.dn),n!==0?n:Le.comparator(t.In,e.In)))}function hL(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Vx(t){return y8()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function pL(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class gL{constructor(e){this.mn=new Xt(((n,r)=>Rn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ye(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=XI(e);if(n!==void 0&&!this.wn(n))return!1;const r=td(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[a];if(!this.Sn(o,c)||!this.bn(this.fn[s++],c))return!1}++a}for(;a<r.length;++a){const o=r[a];if(s>=this.fn.length||!this.bn(this.fn[s++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Xt(Rn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Dx(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Dx(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Dx(r.field,r.dir==="asc"?0:1)));return new p1(p1.UNKNOWN_ID,this.collectionId,n,cv.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function iq(t){if(Ye(t instanceof It||t instanceof Yt,20012),t instanceof It){if(t instanceof S7){const n=t.value.arrayValue?.values?.map((r=>It.create(t.field,"==",r)))||[];return Yt.create(n,"or")}return t}const e=t.filters.map((n=>iq(n)));return Yt.create(e,t.op)}function nde(t){if(t.getFilters().length===0)return[];const e=hk(iq(t));return Ye(aq(e),7391),dk(e)||fk(e)?[e]:e.getFilters()}function dk(t){return t instanceof It}function fk(t){return t instanceof Yt&&X2(t)}function aq(t){return dk(t)||fk(t)||(function(n){if(n instanceof Yt&&rk(n)){for(const r of n.getFilters())if(!dk(r)&&!fk(r))return!1;return!0}return!1})(t)}function hk(t){if(Ye(t instanceof It||t instanceof Yt,34018),t instanceof It)return t;if(t.filters.length===1)return hk(t.filters[0]);const e=t.filters.map((r=>hk(r)));let n=Yt.create(e,t.op);return n=T1(n),aq(n)?n:(Ye(n instanceof Yt,64498),Ye(tp(n),40251),Ye(n.filters.length>1,57927),n.filters.reduce(((r,i)=>iD(r,i))))}function iD(t,e){let n;return Ye(t instanceof It||t instanceof Yt,38388),Ye(e instanceof It||e instanceof Yt,25473),n=t instanceof It?e instanceof It?(function(i,a){return Yt.create([i,a],"and")})(t,e):mL(t,e):e instanceof It?mL(e,t):(function(i,a){if(Ye(i.filters.length>0&&a.filters.length>0,48005),tp(i)&&tp(a))return x7(i,a.getFilters());const s=rk(i)?i:a,o=rk(i)?a:i,c=s.filters.map((u=>iD(u,o)));return Yt.create(c,"or")})(t,e),T1(n)}function mL(t,e){if(tp(e))return x7(e,t.getFilters());{const n=e.filters.map((r=>iD(t,r)));return Yt.create(n,"or")}}function T1(t){if(Ye(t instanceof It||t instanceof Yt,11850),t instanceof It)return t;const e=t.getFilters();if(e.length===1)return T1(e[0]);if(y7(t))return t;const n=e.map((i=>T1(i))),r=[];return n.forEach((i=>{i instanceof It?r.push(i):i instanceof Yt&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Yt.create(r,t.op)}class rde{constructor(){this.Cn=new aD}addToCollectionParentIndex(e,n){return this.Cn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(pa.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(pa.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class aD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xt(Ut.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(Ut.comparator)).toArray()}}const vL="IndexedDbIndexManager",jb=new Uint8Array(0);class ide{constructor(e,n){this.databaseId=n,this.vn=new aD,this.Fn=new zl((r=>Fd(r)),((r,i)=>f0(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const a={collectionId:r,parent:li(i)};return yL(e).put(a)}return fe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[U$(n),""],!1,!0);return yL(e).J(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(lo(s.parent))}return r}))}addFieldIndex(e,n){const r=am(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=ch(e);return a.next((o=>{s.put(cL(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=am(e),i=ch(e),a=lh(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=am(e),r=lh(e),i=ch(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return fe.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new gL(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=lh(e);let i=!0;const a=new Map;return fe.forEach(this.Mn(n),(s=>this.xn(e,s).next((o=>{i&&(i=!!o),a.set(s,o)})))).next((()=>{if(i){let s=bt();const o=[];return fe.forEach(a,((c,u)=>{ke(vL,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(c)} to execute ${Fd(n)}`);const f=(function(I,N){const O=XI(N);if(O===void 0)return null;for(const D of x1(I,O.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null})(u,c),h=(function(I,N){const O=new Map;for(const D of td(N))for(const k of x1(I,D.fieldPath))switch(k.op){case"==":case"in":O.set(D.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return O.set(D.fieldPath.canonicalString(),k.value),Array.from(O.values())}return null})(u,c),g=(function(I,N){const O=[];let D=!0;for(const k of td(N)){const P=k.kind===0?Yz(I,k.fieldPath,I.startAt):Xz(I,k.fieldPath,I.startAt);O.push(P.value),D&&(D=P.inclusive)}return new ep(O,D)})(u,c),m=(function(I,N){const O=[];let D=!0;for(const k of td(N)){const P=k.kind===0?Xz(I,k.fieldPath,I.endAt):Yz(I,k.fieldPath,I.endAt);O.push(P.value),D&&(D=P.inclusive)}return new ep(O,D)})(u,c),b=this.On(c,u,g),x=this.On(c,u,m),w=this.Nn(c,u,h),S=this.Bn(c.indexId,f,b,g.inclusive,x,m.inclusive,w);return fe.forEach(S,(T=>r.Y(T,n.limit).next((I=>{I.forEach((N=>{const O=Le.fromSegments(N.documentKey);s.has(O)||(s=s.add(O),o.push(O))}))}))))})).next((()=>o))}return fe.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=nde(Yt.create(e.filters,"and")).map((r=>ak(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,a,s,o){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),u=c/(n!=null?n.length:1),f=[];for(let h=0;h<c;++h){const g=n?this.Ln(n[h/u]):jb,m=this.kn(e,g,r[h%u],i),b=this.qn(e,g,a[h%u],s),x=o.map((w=>this.kn(e,g,w,!0)));f.push(...this.createRange(m,b,x))}return f}kn(e,n,r,i){const a=new dd(e,Le.empty(),n,r);return i?a:a.An()}qn(e,n,r,i){const a=new dd(e,Le.empty(),n,r);return i?a.An():a}xn(e,n){const r=new gL(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const o of a)r.yn(o)&&(!s||o.fields.length>s.fields.length)&&(s=o);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return fe.forEach(i,(a=>this.xn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let u=new Xt(Rn.comparator),f=!1;for(const h of c.filters)for(const g of h.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(f?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new im;for(const i of td(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.Pn(i.kind);ud.Kt.Dt(a,s)}return r.un()}Ln(e){const n=new im;return ud.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new im;return ud.Kt.Dt(mv(this.databaseId,n),r.Pn((function(a){const s=td(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new im);let a=0;for(const s of td(e)){const o=r[a++];for(const c of i)if(this.Un(n,s.fieldPath)&&vv(o))i=this.Kn(i,s,o);else{const u=c.Pn(s.kind);ud.Kt.Dt(o,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const o of i){const c=new im;c.seed(o.un()),ud.Kt.Dt(s,c.Pn(n.kind)),a.push(c)}return a}Un(e,n){return!!e.filters.find((r=>r instanceof It&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=am(e),i=ch(e);return(n?r.J(ZI,IDBKeyRange.bound(n,n)):r.J()).next((a=>{const s=[];return fe.forEach(a,(o=>i.get([o.indexId,this.uid]).next((c=>{s.push((function(f,h){const g=h?new cv(h.sequenceNumber,new pa(qd(h.readTime),new Le(lo(h.documentKey)),h.largestBatchId)):cv.empty(),m=f.fields.map((([b,x])=>new Dx(Rn.fromServerFormat(b),x)));return new p1(f.indexId,f.collectionGroup,m,g)})(o,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:lt(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=am(e),a=ch(e);return this.Gn(e).next((s=>i.J(ZI,IDBKeyRange.bound(n,n)).next((o=>fe.forEach(o,(c=>a.put(cL(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return fe.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?fe.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),fe.forEach(o,(c=>this.zn(e,i,c).next((u=>{const f=this.jn(a,c);return u.isEqual(f)?fe.resolve():this.Jn(e,a,c,u,f)})))))))}))}Hn(e,n,r,i){return lh(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return lh(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=lh(e);let a=new Xt(Tc);return i.ee({index:t7,range:IDBKeyRange.only([r.indexId,this.uid,Vx(this.$n(r,n))])},((s,o)=>{a=a.add(new dd(r.indexId,n,pL(o.arrayValue),pL(o.directionalValue)))})).next((()=>a))}jn(e,n){let r=new Xt(Tc);const i=this.Qn(n,e);if(i==null)return r;const a=XI(n);if(a!=null){const s=e.data.field(a.fieldPath);if(vv(s))for(const o of s.arrayValue.values||[])r=r.add(new dd(n.indexId,e.key,this.Ln(o),i))}else r=r.add(new dd(n.indexId,e.key,jb,i));return r}Jn(e,n,r,i,a){ke(vL,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,u,f,h,g){const m=c.getIterator(),b=u.getIterator();let x=sh(m),w=sh(b);for(;x||w;){let S=!1,T=!1;if(x&&w){const I=f(x,w);I<0?T=!0:I>0&&(S=!0)}else x!=null?T=!0:S=!0;S?(h(w),w=sh(b)):T?(g(x),x=sh(m)):(x=sh(m),w=sh(b))}})(i,a,Tc,(o=>{s.push(this.Hn(e,n,r,o))}),(o=>{s.push(this.Yn(e,n,r,o))})),fe.waitFor(s)}Gn(e){let n=1;return ch(e).ee({index:e7,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,o)=>Tc(s,o))).filter(((s,o,c)=>!o||Tc(s,c[o-1])!==0));const i=[];i.push(e);for(const s of r){const o=Tc(s,e),c=Tc(s,n);if(o===0)i[0]=e.An();else if(o>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const o=i[s].Vn(this.uid,jb,Le.empty()),c=i[s+1].Vn(this.uid,jb,Le.empty());a.push(IDBKeyRange.bound(o,c))}return a}Zn(e,n){return Tc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bL)}getMinOffset(e,n){return fe.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Be(44426))))).next(bL)}}function yL(t){return Tr(t,hv)}function lh(t){return Tr(t,zm)}function am(t){return Tr(t,q2)}function ch(t){return Tr(t,jm)}function bL(t){Ye(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;F2(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new pa(e.readTime,e.documentKey,n)}const xL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sq=41943040;class ii{static withCacheSize(e){return new ii(e,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function oq(t,e,n){const r=t.store(vs),i=t.store(Wh),a=[],s=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:s},((f,h,g)=>(o++,g.delete())));a.push(c.next((()=>{Ye(o===1,47070,{batchId:n.batchId})})));const u=[];for(const f of n.mutations){const h=Q$(e,f.key.path,n.batchId);a.push(i.delete(h)),u.push(f.key)}return fe.waitFor(a).next((()=>u))}function A1(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Be(14731);e=t.noDocument}return JSON.stringify(e).length}ii.DEFAULT_COLLECTION_PERCENTILE=10,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ii.DEFAULT=new ii(sq,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ii.DISABLED=new ii(-1,0,0);class y_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){Ye(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new y_(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).ee({index:vd,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=bh(e),s=Ac(e);return s.add({}).next((o=>{Ye(typeof o=="number",49019);const c=new J2(o,n,r,i),u=(function(m,b,x){const w=x.baseMutations.map((T=>S1(m.yt,T))),S=x.mutations.map((T=>S1(m.yt,T)));return{userId:b,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:S}})(this.serializer,this.userId,c),f=[];let h=new Xt(((g,m)=>lt(g.canonicalString(),m.canonicalString())));for(const g of i){const m=Q$(this.userId,g.key.path,o);h=h.add(g.key.path.popLast()),f.push(s.put(u)),f.push(a.put(m,jce))}return h.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=c.keys()})),fe.waitFor(f).next((()=>c))}))}lookupMutationBatch(e,n){return Ac(e).get(n).next((r=>r?(Ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),cd(this.serializer,r)):null))}er(e,n){return this.Xn[n]?fe.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ac(e).ee({index:vd,range:i},((s,o,c)=>{o.userId===this.userId&&(Ye(o.batchId>=r,47524,{tr:r}),a=cd(this.serializer,o)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ad;return Ac(e).ee({index:vd,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ad],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).J(vd,n).next((r=>r.map((i=>cd(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ox(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return bh(e).ee({range:i},((s,o,c)=>{const[u,f,h]=s,g=lo(f);if(u===this.userId&&n.path.isEqual(g))return Ac(e).get(h).next((m=>{if(!m)throw Be(61480,{nr:s,batchId:h});Ye(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),a.push(cd(this.serializer,m))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(lt);const i=[];return n.forEach((a=>{const s=Ox(this.userId,a.path),o=IDBKeyRange.lowerBound(s),c=bh(e).ee({range:o},((u,f,h)=>{const[g,m,b]=u,x=lo(m);g===this.userId&&a.path.isEqual(x)?r=r.add(b):h.done()}));i.push(c)})),fe.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Ox(this.userId,r),s=IDBKeyRange.lowerBound(a);let o=new Xt(lt);return bh(e).ee({range:s},((c,u,f)=>{const[h,g,m]=c,b=lo(g);h===this.userId&&r.isPrefixOf(b)?b.length===i&&(o=o.add(m)):f.done()})).next((()=>this.rr(e,o)))}rr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(Ac(e).get(a).next((s=>{if(s===null)throw Be(35274,{batchId:a});Ye(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(cd(this.serializer,s))})))})),fe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return oq(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),fe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return fe.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return bh(e).ee({range:r},((a,s,o)=>{if(a[0]===this.userId){const c=lo(a[1]);i.push(c)}else o.done()})).next((()=>{Ye(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return lq(e,this.userId,n)}_r(e){return cq(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ad,lastStreamToken:""}))}}function lq(t,e,n){const r=Ox(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return bh(t).ee({range:a,X:!0},((o,c,u)=>{const[f,h,g]=o;f===e&&h===i&&(s=!0),u.done()})).next((()=>s))}function Ac(t){return Tr(t,vs)}function bh(t){return Tr(t,Wh)}function cq(t){return Tr(t,dv)}class Gd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gd(0)}static cr(){return new Gd(-1)}}class ade{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Gd(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Je.fromTimestamp(new vt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>uh(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(Ye(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return uh(e).ee(((s,o)=>{const c=Sm(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>fe.waitFor(a))).next((()=>i))}forEachTarget(e,n){return uh(e).ee(((r,i)=>{const a=Sm(i);n(a)}))}lr(e){return wL(e).get(v1).next((n=>(Ye(n!==null,2888),n)))}hr(e,n){return wL(e).put(v1,n)}Pr(e,n){return uh(e).put(nq(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Fd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return uh(e).ee({range:i,index:J$},((s,o,c)=>{const u=Sm(o);f0(n,u.target)&&(a=u,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=zc(e);return n.forEach((s=>{const o=li(s.path);i.push(a.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,s))})),fe.waitFor(i)}removeMatchingKeys(e,n,r){const i=zc(e);return fe.forEach(n,(a=>{const s=li(a.path);return fe.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=zc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=zc(e);let a=bt();return i.ee({range:r,X:!0},((s,o,c)=>{const u=lo(s[1]),f=new Le(u);a=a.add(f)})).next((()=>a))}containsKey(e,n){const r=li(n.path),i=IDBKeyRange.bound([r],[U$(r)],!1,!0);let a=0;return zc(e).ee({index:$2,X:!0,range:i},(([s,o],c,u)=>{s!==0&&(a++,u.done())})).next((()=>a>0))}At(e,n){return uh(e).get(n).next((r=>r?Sm(r):null))}}function uh(t){return Tr(t,Yh)}function wL(t){return Tr(t,Cd)}function zc(t){return Tr(t,Xh)}const _L="LruGarbageCollector",uq=1048576;function SL([t,e],[n,r]){const i=lt(t,n);return i===0?lt(e,r):i}class sde{constructor(e){this.Ir=e,this.buffer=new Xt(SL),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();SL(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dq{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(_L,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vu(n)?ke(_L,"Ignoring IndexedDB error during garbage collection: ",n):await mu(n)}await this.Vr(3e5)}))}}class ode{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(ji.ce);const r=new sde(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(xL)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xL):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,s,o,c,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,o=Date.now(),this.removeTargets(e,r,n)))).next((h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),gh()<=Ct.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(c-o)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:h}))))}}function fq(t,e){return new ode(t,e)}class lde{constructor(e,n){this.db=e,this.garbageCollector=fq(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return zb(e,r)}removeReference(e,n,r){return zb(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return zb(e,n)}br(e,n){return(function(i,a){let s=!1;return cq(i).te((o=>lq(i,o,a).next((c=>(c&&(s=!0),fe.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((s,o)=>{if(o<=n){const c=this.br(e,s).next((u=>{if(!u)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Je.min()),zc(e).delete((function(h){return[0,li(h.path)]})(s)))))}));i.push(c)}})).next((()=>fe.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return zb(e,n)}Sr(e,n){const r=zc(e);let i,a=ji.ce;return r.ee({index:$2},(([s,o],{path:c,sequenceNumber:u})=>{s===0?(a!==ji.ce&&n(new Le(lo(i)),a),a=u,i=c):a=ji.ce})).next((()=>{a!==ji.ce&&n(new Le(lo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zb(t,e){return zc(t).put((function(r,i){return{targetId:0,path:li(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class hq{constructor(){this.changes=new zl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cde{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Zu(e).put(r)}removeEntry(e,n,r){return Zu(e).delete((function(a,s){const o=a.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],E1(s),o[o.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=$n.newInvalidDocument(n);return Zu(e).ee({index:Nx,range:IDBKeyRange.only(sm(n))},((i,a)=>{r=this.Cr(n,a)})).next((()=>r))}vr(e,n){let r={size:0,document:$n.newInvalidDocument(n)};return Zu(e).ee({index:Nx,range:IDBKeyRange.only(sm(n))},((i,a)=>{r={document:this.Cr(n,a),size:A1(a)}})).next((()=>r))}getEntries(e,n){let r=ua();return this.Fr(e,n,((i,a)=>{const s=this.Cr(i,a);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=ua(),i=new hn(Le.comparator);return this.Fr(e,n,((a,s)=>{const o=this.Cr(a,s);r=r.insert(a,o),i=i.insert(a,A1(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return fe.resolve();let i=new Xt(AL);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(sm(i.first()),sm(i.last())),s=i.getIterator();let o=s.getNext();return Zu(e).ee({index:Nx,range:a},((c,u,f)=>{const h=Le.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&AL(o,h)<0;)r(o,null),o=s.getNext();o&&o.isEqual(h)&&(r(o,u),o=s.hasNext()?s.getNext():null),o?f.j(sm(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),E1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zu(e).J(IDBKeyRange.bound(o,c,!0)).next((u=>{a?.incrementDocumentReadCount(u.length);let f=ua();for(const h of u){const g=this.Cr(Le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);g.isFoundDocument()&&(p0(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,n,r,i){let a=ua();const s=TL(n,r),o=TL(n,pa.max());return Zu(e).ee({index:Z$,range:IDBKeyRange.bound(s,o,!0)},((c,u,f)=>{const h=this.Cr(Le.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);a=a.insert(h.key,h),a.size===i&&f.done()})).next((()=>a))}newChangeBuffer(e){return new ude(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return EL(e).get(QI).next((n=>(Ye(!!n,20021),n)))}Dr(e,n){return EL(e).put(QI,n)}Cr(e,n){if(n){const r=Yue(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Je.min())))return r}return $n.newInvalidDocument(e)}}function pq(t){return new cde(t)}class ude extends hq{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new zl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Xt(((a,s)=>lt(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const o=this.Br.get(a);if(n.push(this.Nr.removeEntry(e,a,o.readTime)),s.isValidDocument()){const c=oL(this.Nr.serializer,s);i=i.add(a.path.popLast());const u=A1(c);r+=u-o.size,n.push(this.Nr.addEntry(e,a,c))}else if(r-=o.size,this.trackRemovals){const c=oL(this.Nr.serializer,s.convertToNoDocument(Je.min()));n.push(this.Nr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Nr.updateMetadata(e,r)),fe.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((a,s)=>{this.Br.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function EL(t){return Tr(t,fv)}function Zu(t){return Tr(t,m1)}function sm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TL(t,e){const n=e.documentKey.path.toArray();return[t,E1(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function AL(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=lt(n[a],r[a]),i)return i;return i=lt(n.length,r.length),i||(i=lt(n[n.length-2],r[r.length-2]),i||lt(n[n.length-1],r[r.length-1]))}class dde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class gq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Fm(r.mutation,i,zi.empty(),vt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,bt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=bt()){const i=co();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=wm();return a.forEach(((o,c)=>{s=s.insert(o,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=co();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,bt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,o)=>{n.set(s,o)}))}))}computeViews(e,n,r,i){let a=ua();const s=Bm(),o=(function(){return Bm()})();return n.forEach(((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Ll)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),Fm(f.mutation,u,f.mutation.getFieldMask(),vt.now())):s.set(u.key,zi.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((u,f)=>s.set(u,f))),n.forEach(((u,f)=>o.set(u,new dde(f,s.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=Bm();let i=new hn(((s,o)=>s-o)),a=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const o of s)o.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||zi.empty();f=o.applyToLocalView(u,f),r.set(c,f);const h=(i.get(o.batchId)||bt()).add(c);i=i.insert(o.batchId,h)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,f=c.value,h=D7();f.forEach((g=>{if(!a.has(g)){const m=L7(n.get(g),r.get(g));m!==null&&h.set(g,m),a=a.add(g)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return fe.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):T7(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):fe.resolve(co());let o=Kh,c=a;return s.next((u=>fe.forEach(u,((f,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{c=c.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,a))).next((()=>this.computeViews(e,c,u,bt()))).next((f=>({batchId:o,changes:P7(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Le(n)).next((r=>{let i=wm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=wm();return this.indexManager.getCollectionParents(e,a).next((o=>fe.forEach(o,(c=>{const u=(function(h,g){return new Op(g,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((h,g)=>{s=s.insert(h,g)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,$n.newInvalidDocument(f)))}));let o=wm();return s.forEach(((c,u)=>{const f=a.get(c);f!==void 0&&Fm(f.mutation,u,zi.empty(),vt.now()),p0(n,u)&&(o=o.insert(c,u))})),o}))}}class fde{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ei(i.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:rq(i.bundledQuery),readTime:Ei(i.readTime)}})(n)),fe.resolve()}}class hde{constructor(){this.overlays=new hn(Le.comparator),this.qr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=co();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),fe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const i=co(),a=n.length+1,s=new Le(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new hn(((u,f)=>u-f));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=co(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=co(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return fe.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new tD(n,r));let a=this.qr.get(n);a===void 0&&(a=bt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class pde{constructor(){this.sessionToken=Zn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}class sD{constructor(){this.Qr=new Xt(Mr.$r),this.Ur=new Xt(Mr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Mr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Mr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Le(new Ut([])),r=new Mr(n,e),i=new Mr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Le(new Ut([])),r=new Mr(n,e),i=new Mr(n,e+1);let a=bt();return this.Ur.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Mr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Le.comparator(e.key,n.key)||lt(e.Yr,n.Yr)}static Kr(e,n){return lt(e.Yr,n.Yr)||Le.comparator(e.key,n.key)}}class gde{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Xt(Mr.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new J2(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new Mr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fe.resolve(s)}lookupMutationBatch(e,n){return fe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Ad:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mr(n,0),i=new Mr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(s=>{const o=this.Xr(s.Yr);a.push(o)})),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(lt);return n.forEach((i=>{const a=new Mr(i,0),s=new Mr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(o=>{r=r.add(o.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Le.isDocumentKey(a)||(a=a.child(""));const s=new Mr(new Le(a),0);let o=new Xt(lt);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Yr)),!0)}),s),fe.resolve(this.ti(o))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ye(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(n.mutations,(i=>{const a=new Mr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Mr(n,0),i=this.Zr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class mde{constructor(e){this.ri=e,this.docs=(function(){return new hn(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(n))}getEntries(e,n){let r=ua();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():$n.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ua();const s=n.path,o=new Le(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||F2(H$(f),r)<=0||(i.has(f.key)||p0(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Be(9500)}ii(e,n){return fe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new vde(this)}getSize(e){return fe.resolve(this.size)}}class vde extends hq{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),fe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class yde{constructor(e){this.persistence=e,this.si=new zl((n=>Fd(n)),f0),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.oi=0,this._i=new sD,this.targetCount=0,this.ai=Gd.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),fe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Gd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.Pr(n),fe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),fe.waitFor(a).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this._i.containsKey(n))}}class oD{constructor(e,n){this.ui={},this.overlays={},this.ci=new ji(0),this.li=!1,this.li=!0,this.hi=new pde,this.referenceDelegate=e(this),this.Pi=new yde(this),this.indexManager=new rde,this.remoteDocumentCache=(function(i){return new mde(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new tq(n),this.Ii=new fde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new gde(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const i=new bde(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class bde extends W${constructor(e){super(),this.currentSequenceNumber=e}}class b_{constructor(e){this.persistence=e,this.Ri=new sD,this.Vi=null}static mi(e){return new b_(e)}get fi(){if(this.Vi)return this.Vi;throw Be(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const i=Le.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,Je.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class C1{constructor(e,n){this.persistence=e,this.pi=new zl((r=>li(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=fq(this,n)}static mi(e,n){return new C1(e,n)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return fe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?fe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((o=>{o||(r++,a.removeEntry(s,Je.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mx(e.data.value)),n}br(e,n,r){return fe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xde{constructor(e){this.serializer=e}k(e,n,r,i){const a=new o_("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(d0)})(e),(function(c){c.createObjectStore(dv,{keyPath:Mce}),c.createObjectStore(vs,{keyPath:zz,autoIncrement:!0}).createIndex(vd,Lz,{unique:!0}),c.createObjectStore(Wh)})(e),CL(e),(function(c){c.createObjectStore(nd)})(e));let s=fe.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Xh),c.deleteObjectStore(Yh),c.deleteObjectStore(Cd)})(e),CL(e)),s=s.next((()=>(function(c){const u=c.store(Cd),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Je.min().toTimestamp(),targetCount:0};return u.put(v1,f)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,u){return u.store(vs).J().next((h=>{c.deleteObjectStore(vs),c.createObjectStore(vs,{keyPath:zz,autoIncrement:!0}).createIndex(vd,Lz,{unique:!0});const g=u.store(vs),m=h.map((b=>g.put(b)));return fe.waitFor(m)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(Qh,{keyPath:qce})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(fv)})(e),this.wi(a))))),r<7&&i>=7&&(s=s.next((()=>this.Si(a)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(c_,{keyPath:Gce})})(e),(function(c){c.createObjectStore(u_,{keyPath:Hce})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const u=c.createObjectStore(d_,{keyPath:Jce});u.createIndex(JI,eue,{unique:!1}),u.createIndex(n7,tue,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const u=c.createObjectStore(m1,{keyPath:zce});u.createIndex(Nx,Lce),u.createIndex(Z$,Vce)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(nd)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(q2,{keyPath:Kce,autoIncrement:!0}).createIndex(ZI,Wce,{unique:!1}),c.createObjectStore(jm,{keyPath:Yce}).createIndex(e7,Xce,{unique:!1}),c.createObjectStore(zm,{keyPath:Qce}).createIndex(t7,Zce,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(jm).clear()})).next((()=>{n.objectStore(zm).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(G2,{keyPath:nue})})(e)}))),r<18&&i>=18&&y8()&&(s=s.next((()=>{n.objectStore(jm).clear()})).next((()=>{n.objectStore(zm).clear()}))),s}wi(e){let n=0;return e.store(nd).ee(((r,i)=>{n+=A1(i)})).next((()=>{const r={byteSize:n};return e.store(fv).put(QI,r)}))}yi(e){const n=e.store(dv),r=e.store(vs);return n.J().next((i=>fe.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,Ad],[a.userId,a.lastAcknowledgedBatchId]);return r.J(vd,s).next((o=>fe.forEach(o,(c=>{Ye(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=cd(this.serializer,c);return oq(e,a.userId,u).next((()=>{}))}))))}))))}Si(e){const n=e.store(Xh),r=e.store(nd);return e.store(Cd).get(v1).next((i=>{const a=[];return r.ee(((s,o)=>{const c=new Ut(s),u=(function(h){return[0,li(h)]})(c);a.push(n.get(u).next((f=>f?fe.resolve():(h=>n.put({targetId:0,path:li(h),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>fe.waitFor(a)))}))}bi(e,n){e.createObjectStore(hv,{keyPath:$ce});const r=n.store(hv),i=new aD,a=s=>{if(i.add(s)){const o=s.lastSegment(),c=s.popLast();return r.put({collectionId:o,parent:li(c)})}};return n.store(nd).ee({X:!0},((s,o)=>{const c=new Ut(s);return a(c.popLast())})).next((()=>n.store(Wh).ee({X:!0},(([s,o,c],u)=>{const f=lo(o);return a(f.popLast())}))))}Di(e){const n=e.store(Yh);return n.ee(((r,i)=>{const a=Sm(i),s=nq(this.serializer,a);return n.put(s)}))}Ci(e,n){const r=n.store(nd),i=[];return r.ee(((a,s)=>{const o=n.store(m1),c=(function(h){return h.document?new Le(Ut.fromString(h.document.name).popFirst(5)):h.noDocument?Le.fromSegments(h.noDocument.path):h.unknownDocument?Le.fromSegments(h.unknownDocument.path):Be(36783)})(s).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(o.put(u))})).next((()=>fe.waitFor(i)))}Fi(e,n){const r=n.store(vs),i=pq(this.serializer),a=new oD(b_.mi,this.serializer.yt);return r.J().next((s=>{const o=new Map;return s.forEach((c=>{let u=o.get(c.userId)??bt();cd(this.serializer,c).keys().forEach((f=>u=u.add(f))),o.set(c.userId,u)})),fe.forEach(o,((c,u)=>{const f=new ri(u),h=v_.wt(this.serializer,f),g=a.getIndexManager(f),m=y_.wt(f,this.serializer,g,a.referenceDelegate);return new gq(i,m,h,g).recalculateAndSaveOverlaysForDocumentKeys(new ek(n,ji.ce),c).next()}))}))}}function CL(t){t.createObjectStore(Xh,{keyPath:Fce}).createIndex($2,Uce,{unique:!0}),t.createObjectStore(Yh,{keyPath:"targetId"}).createIndex(J$,Bce,{unique:!0}),t.createObjectStore(Cd)}const Cc="IndexedDbPersistence",fA=18e5,hA=5e3,pA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wde="main";class lD{constructor(e,n,r,i,a,s,o,c,u,f,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=s,this.document=o,this.xi=u,this.Oi=f,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!lD.v())throw new Re(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lde(this,i),this.$i=n+wde,this.serializer=new tq(c),this.Ui=new Yc(this.$i,this.Ni,new xde(this.serializer)),this.hi=new Que,this.Pi=new ade(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pq(this.serializer),this.Ii=new Xue,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Qn(Cc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(we.FAILED_PRECONDITION,pA);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ji(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Lb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(vu(e))return ke(Cc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke(Cc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return om(e).get(ah).next((n=>fe.resolve(this.es(n))))}ts(e){return Lb(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,fA)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Tr(n,Qh);return r.J().next((i=>{const a=this.ss(i,fA),s=i.filter((o=>a.indexOf(o)===-1));return fe.forEach(s,(o=>r.delete(o.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?fe.resolve(!0):om(e).get(ah).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,hA)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Re(we.FAILED_PRECONDITION,pA);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lb(e).J().next((r=>this.ss(r,hA).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(a||s&&o)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ke(Cc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[d0,Qh],(e=>{const n=new ek(e,ji.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Lb(e).J().next((n=>this.ss(n,fA).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return y_.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ide(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return v_.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ke(Cc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?aue:c===17?s7:c===16?iue:c===15?H2:c===14?a7:c===13?i7:c===12?rue:c===11?r7:void Be(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,a,(o=>(s=new ek(o,this.ci?this.ci.next():ji.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Re(we.FAILED_PRECONDITION,K$);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((o=>(s.raiseOnCommittedEvent(),o)))}Is(e){return om(e).get(ah).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,hA)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Re(we.FAILED_PRECONDITION,pA)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return om(e).put(ah,n)}static v(){return Yc.v()}Zi(e){const n=om(e);return n.get(ah).next((r=>this.es(r)?(ke(Cc,"Releasing primary lease."),n.delete(ah)):fe.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Qn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;v8()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return ke(Cc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Qn(Cc,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function om(t){return Tr(t,d0)}function Lb(t){return Tr(t,Qh)}function mq(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class cD{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=bt(),i=bt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new cD(e,n.fromCache,r,i)}}class _de{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class vq{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return v8()?8:Y$(Er())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new _de;return this.Ss(e,n,s).next((o=>{if(a.result=o,this.Vs)return this.bs(e,n,s,o.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(gh()<=Ct.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",mh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(gh()<=Ct.DEBUG&&ke("QueryEngine","Query:",mh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(gh()<=Ct.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",mh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fa(n))):fe.resolve())}ys(e,n){if(Qz(n))return fe.resolve(null);let r=fa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=w1(n,null,"F"),r=fa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=bt(...a);return this.ps.getDocuments(e,s).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(n,o);return this.Cs(n,u,s,c.readTime)?this.ys(e,w1(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,r,i){return Qz(n)||i.isEqual(Je.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const s=this.Ds(n,a);return this.Cs(n,s,r,i)?fe.resolve(null):(gh()<=Ct.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mh(n)),this.vs(e,s,n,G$(i,Kh)).next((o=>o)))}))}Ds(e,n){let r=new Xt(I7(e));return n.forEach(((i,a)=>{p0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return gh()<=Ct.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",mh(n)),this.ps.getDocumentsMatchingQuery(e,n,pa.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const uD="LocalStore",Sde=3e8;class Ede{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new hn(lt),this.xs=new zl((a=>Fd(a)),f0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gq(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function yq(t,e,n,r){return new Ede(t,e,n,r)}async function bq(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],o=[];let c=bt();for(const u of i){s.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:s,addedBatchIds:o})))}))}))}function Tde(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,f){const h=u.batch,g=h.keys();let m=fe.resolve();return g.forEach((b=>{m=m.next((()=>f.getEntry(c,b))).next((x=>{const w=u.docVersions.get(b);Ye(w!==null,48541),x.version.compareTo(w)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))}))})),m.next((()=>o.mutationQueue.removeMutationBatch(c,h)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=bt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function xq(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Ade(t,e){const n=He(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach(((f,h)=>{const g=i.get(h);if(!g)return;o.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(a,f.addedDocuments,h))));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Zn.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,r)),i=i.insert(h,m),(function(x,w,S){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Sde?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,m,f)&&o.push(n.Pi.updateTargetData(a,m))}));let c=ua(),u=bt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))})),o.push(Cde(a,s,e.documentUpdates).next((f=>{c=f.ks,u=f.qs}))),!r.isEqual(Je.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next((h=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));o.push(f)}return fe.waitFor(o).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,u))).next((()=>c))})).then((a=>(n.Ms=i,a)))}function Cde(t,e,n){let r=bt(),i=bt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=ua();return n.forEach(((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Je.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):ke(uD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function Ide(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ad),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function I1(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,fe.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new ll(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function ip(t,e,n){const r=He(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!vu(s))throw s;ke(uD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function pk(t,e,n){const r=He(t);let i=Je.min(),a=bt();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,f){const h=He(c),g=h.xs.get(f);return g!==void 0?fe.resolve(h.Ms.get(g)):h.Pi.getTargetData(u,f)})(r,s,fa(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,o.targetId).next((c=>{a=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Je.min(),n?a:bt()))).next((o=>(Sq(r,C7(e),o),{documents:o,Qs:a})))))}function wq(t,e){const n=He(t),r=He(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function _q(t,e){const n=He(t),r=n.Os.get(e)||Je.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,G$(r,Kh),Number.MAX_SAFE_INTEGER))).then((i=>(Sq(n,e,i),i)))}function Sq(t,e,n){let r=t.Os.get(e)||Je.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}const Eq="firestore_clients";function IL(t,e){return`${Eq}_${t}_${e}`}const Tq="firestore_mutations";function kL(t,e,n){let r=`${Tq}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Aq="firestore_targets";function gA(t,e){return`${Aq}_${t}_${e}`}const oo="SharedClientState";class k1{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Re(i.error.code,i.error.message))),s?new k1(e,n,i.state,a):(Qn(oo,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Um{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Re(r.error.code,r.error.message))),a?new Um(e,r.state,i):(Qn(oo,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class P1{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=Q2();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=X$(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new P1(e,a):(Qn(oo,`Failed to parse client data for instance '${e}': ${n}`),null)}}class dD{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new dD(n.clientId,n.onlineState):(Qn(oo,`Failed to parse online state: ${e}`),null)}}class gk{constructor(){this.activeTargetIds=Q2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mA{constructor(e,n,r,i,a){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new hn(lt),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=IL(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new gk),this.ro=new RegExp(`^${Eq}_${s}_([^_]*)$`),this.io=new RegExp(`^${Tq}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Aq}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(IL(this.persistenceKey,r));if(i){const a=P1.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(gA(this.persistenceKey,e));if(i){const a=Um.Ws(e,i);a&&(r=a.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gA(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ke(oo,"READ",e,n),n}setItem(e,n){ke(oo,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ke(oo,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ke(oo,"EVENT",n.key,n.newValue),n.key===this.eo)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(a){let s=ji.ce;if(a!=null)try{const o=JSON.parse(a);Ye(typeof o=="number",30636,{So:a}),s=o}catch(o){Qn(oo,"Failed to read sequence number from WebStorage",o)}return s})(n.newValue);r!==ji.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new k1(this.currentUser,e,n,r),a=kL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const n=kL(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=gA(this.persistenceKey,e),a=new Um(e,n,r);this.setItem(i,a.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return P1.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return k1.Ws(new ri(a),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Um.Ws(i,n)}uo(e){return dD.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ke(oo,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(r),s=[],o=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||o.push(c)})),this.syncEngine.Fo(s,o).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Q2();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class Cq{constructor(){this.Mo=new gk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kde{Oo(e){}shutdown(){}}const PL="ConnectivityMonitor";class DL{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(PL,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(PL,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Vb=null;function mk(){return Vb===null?Vb=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vb++,"0x"+Vb.toString(16)}const vA="RestConnection",Pde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dde{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===y1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const s=mk(),o=this.zo(e,n.toUriEncodedString());ke(vA,`Sending RPC '${e}' ${s}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:u}=new URL(o),f=pu(u);return this.Jo(e,o,c,r,f).then((h=>(ke(vA,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw lv(vA,`RPC '${e}' ${s} failed with error: `,h,"url: ",o,"request:",r),h}))}Ho(e,n,r,i,a,s){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=Pde[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class Ode{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ti="WebChannelConnection";class Nde extends Dde{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const s=mk();return new Promise(((o,c)=>{const u=new j$;u.setWithCredentials(!0),u.listenOnce(z$.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Px.NO_ERROR:const h=u.getResponseJson();ke(ti,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Px.TIMEOUT:ke(ti,`RPC '${e}' ${s} timed out`),c(new Re(we.DEADLINE_EXCEEDED,"Request time out"));break;case Px.HTTP_ERROR:const g=u.getStatus();if(ke(ti,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m?.error;if(b&&b.status&&b.message){const x=(function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(T)>=0?T:we.UNKNOWN})(b.status);c(new Re(x,b.message))}else c(new Re(we.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Re(we.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ke(ti,`RPC '${e}' ${s} completed.`)}}));const f=JSON.stringify(i);ke(ti,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const i=mk(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=B$(),o=V$(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=a.join("");ke(ti,`Creating RPC '${e}' stream ${i}: ${f}`,c);const h=s.createWebChannel(f,c);this.I_(h);let g=!1,m=!1;const b=new Ode({Yo:w=>{m?ke(ti,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(ke(ti,`Opening RPC '${e}' stream ${i} transport.`),h.open(),g=!0),ke(ti,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Zo:()=>h.close()}),x=(w,S,T)=>{w.listen(S,(I=>{try{T(I)}catch(N){setTimeout((()=>{throw N}),0)}}))};return x(h,xm.EventType.OPEN,(()=>{m||(ke(ti,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),x(h,xm.EventType.CLOSE,(()=>{m||(m=!0,ke(ti,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(h))})),x(h,xm.EventType.ERROR,(w=>{m||(m=!0,lv(ti,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),b.a_(new Re(we.UNAVAILABLE,"The operation could not be completed")))})),x(h,xm.EventType.MESSAGE,(w=>{if(!m){const S=w.data[0];Ye(!!S,16349);const T=S,I=T?.error||T[0]?.error;if(I){ke(ti,`RPC '${e}' stream ${i} received error:`,I);const N=I.status;let O=(function(P){const R=lr[P];if(R!==void 0)return F7(R)})(N),D=I.message;O===void 0&&(O=we.INTERNAL,D="Unknown error status: "+N+" with message "+I.message),m=!0,b.a_(new Re(O,D)),h.close()}else ke(ti,`RPC '${e}' stream ${i} received:`,S),b.u_(S)}})),x(o,L$.STAT_EVENT,(w=>{w.stat===WI.PROXY?ke(ti,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===WI.NOPROXY&&ke(ti,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Iq(){return typeof window<"u"?window:null}function Bx(){return typeof document<"u"?document:null}function x_(t){return new Vue(t,!0)}class kq{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const OL="PersistentStream";class Pq{constructor(e,n,r,i,a,s,o,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kq(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===we.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Re(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(OL,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ke(OL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rde extends Pq{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Uue(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Je.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Je.min():s.readTime?Ei(s.readTime):Je.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ck(this.serializer),n.addTarget=(function(a,s){let o;const c=s.target;if(o=b1(c)?{documents:Y7(a,c)}:{query:X7(a,c).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=q7(a,s.resumeToken);const u=ok(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(Je.min())>0){o.readTime=rp(a,s.snapshotVersion.toTimestamp());const u=ok(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=que(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ck(this.serializer),n.removeTarget=e,this.q_(n)}}class Mde extends Pq{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$ue(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ck(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>S1(this.serializer,r)))};this.q_(n)}}class jde{}class zde extends jde{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Re(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,lk(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(we.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Ho(e,lk(n,r),i,s,o,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(we.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Lde{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Hd="RemoteStore";class Vde{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{cf(this)&&(ke(Hd,"Restarting streams for network reachability change."),await(async function(c){const u=He(c);u.Ea.add(4),await y0(u),u.Ra.set("Unknown"),u.Ea.delete(4),await w_(u)})(this))}))})),this.Ra=new Lde(r,i)}}async function w_(t){if(cf(t))for(const e of t.da)await e(!0)}async function y0(t){for(const e of t.da)await e(!1)}function __(t,e){const n=He(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pD(n)?hD(n):Mp(n).O_()&&fD(n,e))}function ap(t,e){const n=He(t),r=Mp(n);n.Ia.delete(e),r.O_()&&Dq(n,e),n.Ia.size===0&&(r.O_()?r.L_():cf(n)&&n.Ra.set("Unknown"))}function fD(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mp(t).Y_(e)}function Dq(t,e){t.Va.Ue(e),Mp(t).Z_(e)}function hD(t){t.Va=new Mue({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Mp(t).start(),t.Ra.ua()}function pD(t){return cf(t)&&!Mp(t).x_()&&t.Ia.size>0}function cf(t){return He(t).Ea.size===0}function Oq(t){t.Va=void 0}async function Bde(t){t.Ra.set("Online")}async function Fde(t){t.Ia.forEach(((e,n)=>{fD(t,e)}))}async function Ude(t,e){Oq(t),pD(t)?(t.Ra.ha(e),hD(t)):t.Ra.set("Unknown")}async function $de(t,e,n){if(t.Ra.set("Online"),e instanceof $7&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))})(t,e)}catch(r){ke(Hd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await D1(t,r)}else if(e instanceof Lx?t.Va.Ze(e):e instanceof U7?t.Va.st(e):t.Va.tt(e),!n.isEqual(Je.min()))try{const r=await xq(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(c.resumeToken,s))}})),o.targetMismatches.forEach(((c,u)=>{const f=a.Ia.get(c);if(!f)return;a.Ia.set(c,f.withResumeToken(Zn.EMPTY_BYTE_STRING,f.snapshotVersion)),Dq(a,c);const h=new ll(f.target,c,u,f.sequenceNumber);fD(a,h)})),a.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){ke(Hd,"Failed to raise snapshot:",r),await D1(t,r)}}async function D1(t,e,n){if(!vu(e))throw e;t.Ea.add(1),await y0(t),t.Ra.set("Offline"),n||(n=()=>xq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ke(Hd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await w_(t)}))}function Nq(t,e){return e().catch((n=>D1(t,n,e)))}async function Rp(t){const e=He(t),n=ru(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ad;for(;qde(e);)try{const i=await Ide(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Gde(e,i)}catch(i){await D1(e,i)}Rq(e)&&Mq(e)}function qde(t){return cf(t)&&t.Ta.length<10}function Gde(t,e){t.Ta.push(e);const n=ru(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Rq(t){return cf(t)&&!ru(t).x_()&&t.Ta.length>0}function Mq(t){ru(t).start()}async function Hde(t){ru(t).ra()}async function Kde(t){const e=ru(t);for(const n of t.Ta)e.ea(n.mutations)}async function Wde(t,e,n){const r=t.Ta.shift(),i=eD.from(r,e,n);await Nq(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Rp(t)}async function Yde(t,e){e&&ru(t).X_&&await(async function(r,i){if((function(s){return Oue(s)&&s!==we.ABORTED})(i.code)){const a=r.Ta.shift();ru(r).B_(),await Nq(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Rp(r)}})(t,e),Rq(t)&&Mq(t)}async function NL(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),ke(Hd,"RemoteStore received new credentials");const r=cf(n);n.Ea.add(3),await y0(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await w_(n)}async function vk(t,e){const n=He(t);e?(n.Ea.delete(2),await w_(n)):e||(n.Ea.add(2),await y0(n),n.Ra.set("Unknown"))}function Mp(t){return t.ma||(t.ma=(function(n,r,i){const a=He(n);return a.sa(),new Rde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:Bde.bind(null,t),t_:Fde.bind(null,t),r_:Ude.bind(null,t),H_:$de.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),pD(t)?hD(t):t.Ra.set("Unknown")):(await t.ma.stop(),Oq(t))}))),t.ma}function ru(t){return t.fa||(t.fa=(function(n,r,i){const a=He(n);return a.sa(),new Mde(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Hde.bind(null,t),r_:Yde.bind(null,t),ta:Kde.bind(null,t),na:Wde.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Rp(t)):(await t.fa.stop(),t.Ta.length>0&&(ke(Hd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class gD{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new gD(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mD(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),vu(t))return new Re(we.UNAVAILABLE,`${e}: ${t}`);throw t}class Bh{static emptySet(e){return new Bh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Le.comparator(n.key,r.key):(n,r)=>Le.comparator(n.key,r.key),this.keyedMap=wm(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Bh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class RL{constructor(){this.ga=new hn(Le.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class sp{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((o=>{s.push({type:0,doc:o})})),new sp(e,n,Bh.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&p_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Xde{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Qde{constructor(){this.queries=ML(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=He(n),a=i.queries;i.queries=ML(),a.forEach(((s,o)=>{for(const c of o.Sa)c.onError(r)}))})(this,new Re(we.ABORTED,"Firestore shutting down"))}}function ML(){return new zl((t=>A7(t)),p_)}async function vD(t,e){const n=He(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new Xde,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=mD(s,`Initialization of query '${mh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&bD(n)}async function yD(t,e){const n=He(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Zde(t,e){const n=He(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(r=!0);s.wa=i}}r&&bD(n)}function Jde(t,e,n){const r=He(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function bD(t){t.Ca.forEach((e=>{e.next()}))}var yk,jL;(jL=yk||(yk={})).Ma="default",jL.Cache="cache";class xD{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new sp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yk.Cache}}class jq{constructor(e){this.key=e}}class zq{constructor(e){this.key=e}}class efe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=bt(),this.mutatedKeys=bt(),this.eu=I7(e),this.tu=new Bh(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new RL,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,h)=>{const g=i.get(f),m=p0(this.query,h)?h:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;g&&m?g.data.isEqual(m.data)?b!==x&&(r.track({type:3,doc:m}),w=!0):this.su(g,m)||(r.track({type:2,doc:m}),w=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(o=!0)):!g&&m?(r.track({type:0,doc:m}),w=!0):g&&!m&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(o=!0)),w&&(m?(s=s.add(m),a=x?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((f,h)=>(function(m,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Rt:w})}};return x(m)-x(b)})(f.type,h.type)||this.eu(f.doc,h.doc))),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new sp(this.query,e.tu,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new RL,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=bt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new zq(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new jq(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=bt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jp="SyncEngine";class tfe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nfe{constructor(e){this.key=e,this.hu=!1}}class rfe{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new zl((o=>A7(o)),p_),this.Iu=new Map,this.Eu=new Set,this.du=new hn(Le.comparator),this.Au=new Map,this.Ru=new sD,this.Vu={},this.mu=new Map,this.fu=Gd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ife(t,e,n=!0){const r=S_(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Lq(r,e,n,!0),i}async function afe(t,e){const n=S_(t);await Lq(n,e,!0,!1)}async function Lq(t,e,n,r){const i=await I1(t.localStore,fa(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await wD(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&__(t.remoteStore,i),o}async function wD(t,e,n,r,i){t.pu=(h,g,m)=>(async function(x,w,S,T){let I=w.view.ru(S);I.Cs&&(I=await pk(x.localStore,w.query,!1).then((({documents:k})=>w.view.ru(k,I))));const N=T&&T.targetChanges.get(w.targetId),O=T&&T.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(I,x.isPrimaryClient,N,O);return bk(x,w.targetId,D.au),D.snapshot})(t,h,g,m);const a=await pk(t.localStore,e,!0),s=new efe(e,a.Qs),o=s.ru(a.documents),c=v0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);bk(t,n,u.au);const f=new tfe(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function sfe(t,e,n){const r=He(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!p_(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ip(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ap(r.remoteStore,i.targetId),op(r,i.targetId)})).catch(mu)):(op(r,i.targetId),await ip(r.localStore,i.targetId,!0))}async function ofe(t,e){const n=He(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ap(n.remoteStore,r.targetId))}async function lfe(t,e,n){const r=TD(t);try{const i=await(function(s,o){const c=He(s),u=vt.now(),f=o.reduce(((m,b)=>m.add(b.key)),bt());let h,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let b=ua(),x=bt();return c.Ns.getEntries(m,f).next((w=>{b=w,b.forEach(((S,T)=>{T.isValidDocument()||(x=x.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,b))).next((w=>{h=w;const S=[];for(const T of o){const I=Pue(T,h.get(T.key).overlayedDocument);I!=null&&S.push(new Ll(T.key,I,m7(I.value.mapValue),Sr.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,S,o)})).next((w=>{g=w;const S=w.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(m,w.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:P7(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,o,c){let u=s.Vu[s.currentUser.toKey()];u||(u=new hn(lt)),u=u.insert(o,c),s.Vu[s.currentUser.toKey()]=u})(r,i.batchId,n),await bu(r,i.changes),await Rp(r.remoteStore)}catch(i){const a=mD(i,"Failed to persist write");n.reject(a)}}async function Vq(t,e){const n=He(t);try{const r=await Ade(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ye(s.hu,14607):i.removedDocuments.size>0&&(Ye(s.hu,42227),s.hu=!1))})),await bu(n,r,e)}catch(r){await mu(r)}}function zL(t,e,n){const r=He(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(s,o){const c=He(s);c.onlineState=o;let u=!1;c.queries.forEach(((f,h)=>{for(const g of h.Sa)g.va(o)&&(u=!0)})),u&&bD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cfe(t,e,n){const r=He(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new hn(Le.comparator);s=s.insert(a,$n.newNoDocument(a,Je.min()));const o=bt().add(a),c=new m0(Je.min(),new Map,new hn(lt),s,o);await Vq(r,c),r.du=r.du.remove(a),r.Au.delete(e),ED(r)}else await ip(r.localStore,e,!1).then((()=>op(r,e,n))).catch(mu)}async function ufe(t,e){const n=He(t),r=e.batch.batchId;try{const i=await Tde(n.localStore,e);SD(n,r,null),_D(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bu(n,i)}catch(i){await mu(i)}}async function dfe(t,e,n){const r=He(t);try{const i=await(function(s,o){const c=He(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return c.mutationQueue.lookupMutationBatch(u,o).next((h=>(Ye(h!==null,37113),f=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>c.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);SD(r,e,n),_D(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bu(r,i)}catch(i){await mu(i)}}function _D(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function SD(t,e,n){const r=He(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function op(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||Bq(t,r)}))}function Bq(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ap(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ED(t))}function bk(t,e,n){for(const r of n)r instanceof jq?(t.Ru.addReference(r.key,e),ffe(t,r)):r instanceof zq?(ke(jp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Bq(t,r.key)):Be(19791,{wu:r})}function ffe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ke(jp,"New document in limbo: "+n),t.Eu.add(r),ED(t))}function ED(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Le(Ut.fromString(e)),r=t.fu.next();t.Au.set(r,new nfe(n)),t.du=t.du.insert(n,r),__(t.remoteStore,new ll(fa(h0(n.path)),r,"TargetPurposeLimboResolution",ji.ce))}}async function bu(t,e,n){const r=He(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{s.push(r.pu(c,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=cD.As(c.targetId,u);a.push(f)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,u){const f=He(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>fe.forEach(u,(g=>fe.forEach(g.Es,(m=>f.persistence.referenceDelegate.addReference(h,g.targetId,m))).next((()=>fe.forEach(g.ds,(m=>f.persistence.referenceDelegate.removeReference(h,g.targetId,m)))))))))}catch(h){if(!vu(h))throw h;ke(uD,"Failed to update sequence numbers: "+h)}for(const h of u){const g=h.targetId;if(!h.fromCache){const m=f.Ms.get(g),b=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(g,x)}}})(r.localStore,a))}async function hfe(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){ke(jp,"User change. New user:",e.toKey());const r=await bq(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((o=>{o.forEach((c=>{c.reject(new Re(we.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bu(n,r.Ls)}}function pfe(t,e){const n=He(t),r=n.Au.get(e);if(r&&r.hu)return bt().add(r.key);{let i=bt();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}async function gfe(t,e){const n=He(t),r=await pk(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&bk(n,e.targetId,i.au),i}async function mfe(t,e){const n=He(t);return _q(n.localStore,e).then((r=>bu(n,r)))}async function vfe(t,e,n,r){const i=He(t),a=await(function(o,c){const u=He(o),f=He(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(h=>f.er(h,c).next((g=>g?u.localDocuments.getDocuments(h,g):fe.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Rp(i.remoteStore):n==="acknowledged"||n==="rejected"?(SD(i,e,r||null),_D(i,e),(function(o,c){He(He(o).mutationQueue).ir(c)})(i.localStore,e)):Be(6720,"Unknown batchState",{Su:n}),await bu(i,a)):ke(jp,"Cannot apply mutation batch with id: "+e)}async function yfe(t,e){const n=He(t);if(S_(n),TD(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await LL(n,r.toArray());n.gu=!0,await vk(n.remoteStore,!0);for(const a of i)__(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(op(n,s),ip(n.localStore,s,!0)))),ap(n.remoteStore,s)})),await i,await LL(n,r),(function(s){const o=He(s);o.Au.forEach(((c,u)=>{ap(o.remoteStore,u)})),o.Ru.Jr(),o.Au=new Map,o.du=new hn(Le.comparator)})(n),n.gu=!1,await vk(n.remoteStore,!1)}}async function LL(t,e,n){const r=He(t),i=[],a=[];for(const s of e){let o;const c=r.Iu.get(s);if(c&&c.length!==0){o=await I1(r.localStore,fa(c[0]));for(const u of c){const f=r.Tu.get(u),h=await gfe(r,f);h.snapshot&&a.push(h.snapshot)}}else{const u=await wq(r.localStore,s);o=await I1(r.localStore,u),await wD(r,Fq(u),s,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(a),i}function Fq(t){return E7(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bfe(t){return(function(n){return He(He(n).persistence).Ts()})(He(t).localStore)}async function xfe(t,e,n,r){const i=He(t);if(i.gu)return void ke(jp,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await _q(i.localStore,C7(a[0])),o=m0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Zn.EMPTY_BYTE_STRING);await bu(i,s,o);break}case"rejected":await ip(i.localStore,e,!0),op(i,e,r);break;default:Be(64155,n)}}async function wfe(t,e,n){const r=S_(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ke(jp,"Adding an already active target "+i);continue}const a=await wq(r.localStore,i),s=await I1(r.localStore,a);await wD(r,Fq(a),s.targetId,!1,s.resumeToken),__(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await ip(r.localStore,i,!1).then((()=>{ap(r.remoteStore,i),op(r,i)})).catch(mu)}}function S_(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cfe.bind(null,e),e.Pu.H_=Zde.bind(null,e.eventManager),e.Pu.yu=Jde.bind(null,e.eventManager),e}function TD(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ufe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dfe.bind(null,e),e}class wv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=x_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return yq(this.persistence,new vq,e.initialUser,this.serializer)}Cu(e){return new oD(b_.mi,this.serializer)}Du(e){return new Cq}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wv.provider={build:()=>new wv};class _fe extends wv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ye(this.persistence.referenceDelegate instanceof C1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dq(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ii.withCacheSize(this.cacheSizeBytes):ii.DEFAULT;return new oD((r=>C1.mi(r,n)),this.serializer)}}class Uq extends wv{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await TD(this.xu.syncEngine),await Rp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return yq(this.persistence,new vq,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new dq(r,e.asyncQueue,n)}Mu(e,n){const r=new Nce(n,this.persistence);return new Oce(e.asyncQueue,r)}Cu(e){const n=mq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ii.withCacheSize(this.cacheSizeBytes):ii.DEFAULT;return new lD(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Iq(),Bx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Cq}}class Sfe extends Uq{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof mA&&(this.sharedClientState.syncEngine={Co:vfe.bind(null,n),vo:xfe.bind(null,n),Fo:wfe.bind(null,n),Ts:bfe.bind(null,n),Do:mfe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await yfe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=Iq();if(!mA.v(n))throw new Re(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mA(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class _v{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zL(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hfe.bind(null,this.syncEngine),await vk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Qde})()}createDatastore(e){const n=x_(e.databaseInfo.databaseId),r=(function(a){return new Nde(a)})(e.databaseInfo);return(function(a,s,o,c){return new zde(a,s,o,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,o){return new Vde(r,i,a,s,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>zL(this.syncEngine,n,0)),(function(){return DL.v()?new DL:new kde})())}createSyncEngine(e,n){return(function(i,a,s,o,c,u,f){const h=new rfe(i,a,s,o,c,u);return f&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=He(n);ke(Hd,"RemoteStore shutting down."),r.Ea.add(5),await y0(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_v.provider={build:()=>new _v};class AD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const iu="FirestoreClient";class Efe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ri.UNAUTHENTICATED,this.clientId=B2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{ke(iu,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(ke(iu,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mD(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yA(t,e){t.asyncQueue.verifyOperationInProgress(),ke(iu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await bq(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function VL(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Tfe(t);ke(iu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>NL(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>NL(e.remoteStore,i))),t._onlineComponents=e}async function Tfe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke(iu,"Using user provided OfflineComponentProvider");try{await yA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===we.FAILED_PRECONDITION||i.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;lv("Error using user provided cache. Falling back to memory cache: "+n),await yA(t,new wv)}}else ke(iu,"Using default OfflineComponentProvider"),await yA(t,new _fe(void 0));return t._offlineComponents}async function $q(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke(iu,"Using user provided OnlineComponentProvider"),await VL(t,t._uninitializedComponentsProvider._online)):(ke(iu,"Using default OnlineComponentProvider"),await VL(t,new _v))),t._onlineComponents}function Afe(t){return $q(t).then((e=>e.syncEngine))}async function O1(t){const e=await $q(t),n=e.eventManager;return n.onListen=ife.bind(null,e.syncEngine),n.onUnlisten=sfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=afe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ofe.bind(null,e.syncEngine),n}function Cfe(t,e,n={}){const r=new vo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new AD({next:g=>{f.Nu(),s.enqueueAndForget((()=>yD(a,h)));const m=g.docs.has(o);!m&&g.fromCache?u.reject(new Re(we.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?u.reject(new Re(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new xD(h0(o.path),f,{includeMetadataChanges:!0,qa:!0});return vD(a,h)})(await O1(t),t.asyncQueue,e,n,r))),r.promise}function Ife(t,e,n={}){const r=new vo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,o,c,u){const f=new AD({next:g=>{f.Nu(),s.enqueueAndForget((()=>yD(a,h))),g.fromCache&&c.source==="server"?u.reject(new Re(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),h=new xD(o,f,{includeMetadataChanges:!0,qa:!0});return vD(a,h)})(await O1(t),t.asyncQueue,e,n,r))),r.promise}function qq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const BL=new Map;const kfe="firestore.googleapis.com",FL=!0;class UL{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kfe,this.ssl=FL}else this.host=e.host,this.ssl=e.ssl??FL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uq)throw new Re(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kce("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qq(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(we.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(we.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(we.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class CD{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UL({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UL(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new xce;switch(r.type){case"firstParty":return new Sce(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=BL.get(n);r&&(ke("ComponentProvider","Removing Datastore"),BL.delete(n),r.terminate())})(this),Promise.resolve()}}class Vl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vl(this.firestore,e,this._query)}}class qn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}toJSON(){return{type:qn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(u0(n,qn._jsonSchema))return new qn(e,r||null,new Le(Ut.fromString(n.referencePath)))}}qn._jsonSchemaVersion="firestore/documentReference/1.0",qn._jsonSchema={type:fr("string",qn._jsonSchemaVersion),referencePath:fr("string")};class Xc extends Vl{constructor(e,n,r){super(e,n,h0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Le(e))}withConverter(e){return new Xc(this.firestore,e,this._path)}}function vi(t,e,...n){if(t=qt(t),$$("collection","path",e),t instanceof CD){const r=Ut.fromString(e,...n);return Oz(r),new Xc(t,null,r)}{if(!(t instanceof qn||t instanceof Xc))throw new Re(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return Oz(r),new Xc(t.firestore,null,r)}}function St(t,e,...n){if(t=qt(t),arguments.length===1&&(e=B2.newId()),$$("doc","path",e),t instanceof CD){const r=Ut.fromString(e,...n);return Dz(r),new qn(t,null,new Le(r))}{if(!(t instanceof qn||t instanceof Xc))throw new Re(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return Dz(r),new qn(t.firestore,t instanceof Xc?t.converter:null,new Le(r))}}const $L="AsyncQueue";class qL{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kq(this,"async_queue_retry"),this._c=()=>{const r=Bx();r&&ke($L,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new vo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vu(e))throw e;ke($L,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",GL(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=gD.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Be(47125,{Pc:GL(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function GL(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function HL(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class To extends CD{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new qL,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qL(e),this._firestoreClient=void 0,await e}}}function Pfe(t,e,n){n||(n=y1);const r=Zw(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Jc(a,e))return i;throw new Re(we.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Re(we.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uq)throw new Re(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&pu(e.host)&&w2(e.host),r.initialize({options:e,instanceIdentifier:n})}function b0(t){if(t._terminated)throw new Re(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Dfe(t),t._firestoreClient}function Dfe(t){const e=t._freezeSettings(),n=(function(i,a,s,o){return new oue(i,a,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,qq(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Efe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class Ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ba(Zn.fromBase64String(e))}catch(n){throw new Re(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ba(Zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ba._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(u0(e,Ba._jsonSchema))return Ba.fromBase64String(e.bytes)}}Ba._jsonSchemaVersion="firestore/bytes/1.0",Ba._jsonSchema={type:fr("string",Ba._jsonSchemaVersion),bytes:fr("string")};class x0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class E_{constructor(e){this._methodName=e}}class yo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yo._jsonSchemaVersion}}static fromJSON(e){if(u0(e,yo._jsonSchema))return new yo(e.latitude,e.longitude)}}yo._jsonSchemaVersion="firestore/geoPoint/1.0",yo._jsonSchema={type:fr("string",yo._jsonSchemaVersion),latitude:fr("number"),longitude:fr("number")};class bo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(u0(e,bo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bo(e.vectorValues);throw new Re(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bo._jsonSchemaVersion="firestore/vectorValue/1.0",bo._jsonSchema={type:fr("string",bo._jsonSchemaVersion),vectorValues:fr("object")};const Ofe=/^__.*__$/;class Nfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ll(e,this.data,this.fieldMask,n,this.fieldTransforms):new Np(e,this.data,n,this.fieldTransforms)}}class Gq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ll(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Hq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ac:t})}}class T_{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new T_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return N1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Hq(this.Ac)&&Ofe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Rfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||x_(e)}Cc(e,n,r,i=!1){return new T_({Ac:e,methodName:n,Dc:r,path:Rn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function w0(t){const e=t._freezeSettings(),n=x_(t._databaseId);return new Rfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ID(t,e,n,r,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);PD("Data must be an object, but it was:",s,r);const o=Yq(r,s);let c,u;if(a.merge)c=new zi(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const h of a.mergeFields){const g=xk(e,h,n);if(!s.contains(g))throw new Re(we.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Qq(f,g)||f.push(g)}c=new zi(f),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new Nfe(new si(o),c,u)}class _0 extends E_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _0}}function Mfe(t,e,n){return new T_({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kD extends E_{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Mfe(this,e,!0),r=this.vc.map((a=>zp(a,n))),i=new Ud(r);return new z7(e.path,i)}isEqual(e){return e instanceof kD&&Jc(this.vc,e.vc)}}function Kq(t,e,n,r){const i=t.Cc(1,e,n);PD("Data must be an object, but it was:",i,r);const a=[],s=si.empty();yu(r,((c,u)=>{const f=DD(e,c,n);u=qt(u);const h=i.yc(f);if(u instanceof _0)a.push(f);else{const g=zp(u,h);g!=null&&(a.push(f),s.set(f,g))}}));const o=new zi(a);return new Gq(s,o,i.fieldTransforms)}function Wq(t,e,n,r,i,a){const s=t.Cc(1,e,n),o=[xk(e,r,n)],c=[i];if(a.length%2!=0)throw new Re(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)o.push(xk(e,a[g])),c.push(a[g+1]);const u=[],f=si.empty();for(let g=o.length-1;g>=0;--g)if(!Qq(u,o[g])){const m=o[g];let b=c[g];b=qt(b);const x=s.yc(m);if(b instanceof _0)u.push(m);else{const w=zp(b,x);w!=null&&(u.push(m),f.set(m,w))}}const h=new zi(u);return new Gq(f,h,s.fieldTransforms)}function jfe(t,e,n,r=!1){return zp(n,t.Cc(r?4:3,e))}function zp(t,e){if(Xq(t=qt(t)))return PD("Unsupported field value:",e,t),Yq(t,e);if(t instanceof E_)return(function(r,i){if(!Hq(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const o of r){let c=zp(o,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Eue(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=vt.fromDate(r);return{timestampValue:rp(i.serializer,a)}}if(r instanceof vt){const a=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rp(i.serializer,a)}}if(r instanceof yo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ba)return{bytesValue:q7(i.serializer,r._byteString)};if(r instanceof qn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:rD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bo)return(function(s,o){return{mapValue:{fields:{[W2]:{stringValue:Y2},[Zh]:{arrayValue:{values:s.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return Z2(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${s_(r)}`)})(t,e)}function Yq(t,e){const n={};return o7(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yu(t,((r,i)=>{const a=zp(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function Xq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof yo||t instanceof Ba||t instanceof qn||t instanceof E_||t instanceof bo)}function PD(t,e,n){if(!Xq(n)||!q$(n)){const r=s_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xk(t,e,n){if((e=qt(e))instanceof x0)return e._internalPath;if(typeof e=="string")return DD(t,e);throw N1("Field path arguments must be of type string or ",t,!1,void 0,n)}const zfe=new RegExp("[~\\*/\\[\\]]");function DD(t,e,n){if(e.search(zfe)>=0)throw N1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new x0(...e.split("."))._internalPath}catch{throw N1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function N1(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Re(we.INVALID_ARGUMENT,o+t+c)}function Qq(t,e){return t.some((n=>n.isEqual(e)))}class Zq{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(A_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Lfe extends Zq{data(){return super.data()}}function A_(t,e){return typeof e=="string"?DD(t,e):e instanceof x0?e._internalPath:e._delegate._internalPath}function Jq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OD{}class ND extends OD{}function ks(t,e,...n){let r=[];e instanceof OD&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof RD)).length,o=a.filter((c=>c instanceof C_)).length;if(s>1||s>0&&o>0)throw new Re(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class C_ extends ND{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new C_(e,n,r)}_apply(e){const n=this._parse(e);return eG(e._query,n),new Vl(e.firestore,e.converter,sk(e._query,n))}_parse(e){const n=w0(e.firestore);return(function(a,s,o,c,u,f,h){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Re(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){YL(h,f);const b=[];for(const x of h)b.push(WL(c,a,x));g={arrayValue:{values:b}}}else g=WL(c,a,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||YL(h,f),g=jfe(o,s,h,f==="in"||f==="not-in");return It.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vfe(t,e,n){const r=e,i=A_("where",t);return C_._create(i,r,n)}class RD extends OD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new RD(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Yt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)eG(s,c),s=sk(s,c)})(e._query,n),new Vl(e.firestore,e.converter,sk(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class MD extends ND{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new MD(e,n)}_apply(e){const n=(function(i,a,s){if(i.startAt!==null)throw new Re(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Re(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yv(a,s)})(e._query,this._field,this._direction);return new Vl(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new Op(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function au(t,e="asc"){const n=e,r=A_("orderBy",t);return MD._create(r,n)}class jD extends ND{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jD(e,n,r)}_apply(e){return new Vl(e.firestore,e.converter,w1(e._query,this._limit,this._limitType))}}function KL(t){return jD._create("limit",t,"F")}function WL(t,e,n){if(typeof(n=qt(n))=="string"){if(n==="")throw new Re(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T7(e)&&n.indexOf("/")!==-1)throw new Re(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ut.fromString(n));if(!Le.isDocumentKey(r))throw new Re(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mv(t,new Le(r))}if(n instanceof qn)return mv(t,n._key);throw new Re(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${s_(n)}.`)}function YL(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eG(t,e){const n=(function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Bfe{convertValue(e,n="none"){switch(tu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(El(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yu(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[Zh].arrayValue?.values?.map((r=>An(r.doubleValue)));return new bo(n)}convertGeoPoint(e){return new yo(An(e.latitude),An(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=f_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pv(e));default:return null}}convertTimestamp(e){const n=Sl(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ut.fromString(e);Ye(eq(r),9688,{name:e});const i=new Bd(r.get(1),r.get(3)),a=new Le(r.popFirst(5));return i.isEqual(n)||Qn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function zD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Em{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kd extends Zq{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(A_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kd._jsonSchemaVersion="firestore/documentSnapshot/1.0",kd._jsonSchema={type:fr("string",kd._jsonSchemaVersion),bundleSource:fr("string","DocumentSnapshot"),bundleName:fr("string"),bundle:fr("string")};class Fx extends kd{data(e={}){return super.data(e)}}class Pd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Em(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Fx(this._firestore,this._userDataWriter,r.key,r,new Em(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((o=>{const c=new Fx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Em(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>a||o.type!==3)).map((o=>{const c=new Fx(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Em(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:Ffe(o.type),doc:c,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=B2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ffe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:t})}}function bA(t){t=Fi(t,qn);const e=Fi(t.firestore,To);return Cfe(b0(e),t._key).then((n=>tG(e,t,n)))}Pd._jsonSchemaVersion="firestore/querySnapshot/1.0",Pd._jsonSchema={type:fr("string",Pd._jsonSchemaVersion),bundleSource:fr("string","QuerySnapshot"),bundleName:fr("string"),bundle:fr("string")};class LD extends Bfe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,n)}}function bs(t){t=Fi(t,Vl);const e=Fi(t.firestore,To),n=b0(e),r=new LD(e);return Jq(t._query),Ife(n,t._query).then((i=>new Pd(e,r,t,i)))}function aa(t,e,n){t=Fi(t,qn);const r=Fi(t.firestore,To),i=zD(t.converter,e,n);return S0(r,[ID(w0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sr.none())])}function so(t,e,n,...r){t=Fi(t,qn);const i=Fi(t.firestore,To),a=w0(i);let s;return s=typeof(e=qt(e))=="string"||e instanceof x0?Wq(a,"updateDoc",t._key,e,n,r):Kq(a,"updateDoc",t._key,e),S0(i,[s.toMutation(t._key,Sr.exists(!0))])}function oa(t){return S0(Fi(t.firestore,To),[new g0(t._key,Sr.none())])}function I_(t,e){const n=Fi(t.firestore,To),r=St(t),i=zD(t.converter,e);return S0(n,[ID(w0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then((()=>r))}function uf(t,...e){t=qt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||HL(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(HL(e[r])){const c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let a,s,o;if(t instanceof qn)s=Fi(t.firestore,To),o=h0(t._key.path),a={next:c=>{e[r]&&e[r](tG(s,t,c))},error:e[r+1],complete:e[r+2]};else{const c=Fi(t,Vl);s=Fi(c.firestore,To),o=c._query;const u=new LD(s);a={next:f=>{e[r]&&e[r](new Pd(s,u,c,f))},error:e[r+1],complete:e[r+2]},Jq(t._query)}return(function(u,f,h,g){const m=new AD(g),b=new xD(f,m,h);return u.asyncQueue.enqueueAndForget((async()=>vD(await O1(u),b))),()=>{m.Nu(),u.asyncQueue.enqueueAndForget((async()=>yD(await O1(u),b)))}})(b0(s),o,i,a)}function S0(t,e){return(function(r,i){const a=new vo;return r.asyncQueue.enqueueAndForget((async()=>lfe(await Afe(r),i,a))),a.promise})(b0(t),e)}function tG(t,e,n){const r=n.docs.get(e._key),i=new LD(t);return new kd(t,i,e._key,r,new Em(n.hasPendingWrites,n.fromCache),e.converter)}class Ufe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=Hfe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function $fe(t){return new Ufe(t)}class qfe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=_v.provider,this._offlineComponentProvider={build:n=>new Uq(n,e?.cacheSizeBytes,this.forceOwnership)}}}class Gfe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=_v.provider,this._offlineComponentProvider={build:n=>new Sfe(n,e?.cacheSizeBytes)}}}function Hfe(t){return new qfe(t?.forceOwnership)}function Kfe(){return new Gfe}class Wfe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=w0(e)}set(e,n,r){this._verifyNotCommitted();const i=xA(e,this._firestore),a=zD(i.converter,n,r),s=ID(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Sr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=xA(e,this._firestore);let s;return s=typeof(n=qt(n))=="string"||n instanceof x0?Wq(this._dataReader,"WriteBatch.update",a._key,n,r,i):Kq(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=xA(e,this._firestore);return this._mutations=this._mutations.concat(new g0(n._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xA(t,e){if((t=qt(t)).firestore!==e)throw new Re(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function XL(){return new _0("deleteField")}function Yfe(...t){return new kD("arrayUnion",t)}function wk(t){return b0(t=Fi(t,To)),new Wfe(t,(e=>S0(t,e)))}(function(e,n=!0){(function(i){Dp=i})(kp),jd(new eu("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new To(new wce(r.getProvider("auth-internal")),new Ece(s,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Re(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bd(u.options.projectId,f)})(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),po(Cz,Iz,e),po(Cz,Iz,"esm2020")})();const Xfe={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},nG=_8(Xfe),za=tse(nG),rt=Pfe(nG,{localCache:$fe({tabManager:Kfe()})}),QL=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),Bb=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),$a=L2()(R$(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await Lie(za,e,n)).user;if(console.log(` Checking email verification for: ${i.email}`),console.log(" emailVerified status:",i.emailVerified),console.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return console.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await ez(za),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;console.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=Bb(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await zie(za,e,n)).user;await Bie(a,{displayName:r}),await J3(a,QL());const s=Bb(a);return t({currentUser:s,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${s.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await ez(za),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await Rie(za,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=za.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await J3(e,QL()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=$a.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=za.currentUser;if(!e)return!1;try{await e.reload();const n=za.currentUser;if(n?.emailVerified){const r=Bb(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),console.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return console.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=za.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=of.credential(n.email,e);return await Oie(n,r),await qie(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},confirmPasswordReset:async(e,n)=>{t({isLoading:!0,loginError:null});try{return await Mie(za,e,n),t({isLoading:!1}),console.log(" Password reset successful"),!0}catch(r){console.error("Password reset confirmation error:",r);let i="Failed to reset password. The link may be expired or invalid.";switch(r.code){case"auth/expired-action-code":i="The password reset link has expired. Please request a new one.";break;case"auth/invalid-action-code":i="The password reset link is invalid. Please request a new one.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>$a.getState().isInitialized?()=>{}:(t({isInitialized:!1}),$ie(za,async r=>{const i=Date.now(),a=$a.getState(),s=r?Bb(r):null,o=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,u=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&o&&!s,f=r?r.emailVerified:!0,h=r&&f||!!u,g=r?s:u?a.currentUser:null;if(t({currentUser:g,isAuthenticated:h,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&f?i:a.lastAuthTime}),g)if(console.log(` Auth state: User is signed in (${g.email})`,u?"(offline grace period)":f?"(verified)":"(unverified)"),console.log(" Onboarding check:",{isVerified:f,shouldGrantOfflineAccess:u,willCheckOnboarding:f&&!u}),f&&!u){console.log(" Loading budgetStore to check onboarding...");const m=await Pt(()=>Promise.resolve().then(()=>g1e),[]).then(b=>b.useBudgetStore.getState());console.log(" Calling budgetStore.checkAndStartOnboarding()..."),await m.checkAndStartOnboarding()}else console.log(" Skipping onboarding check (not verified or offline grace period)");else console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),$t=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:$a},Symbol.toStringTag,{value:"Module"})),rG=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],Qfe=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=rG.map(o=>({...o,met:o.regex.test(t)})).filter(o=>o.met).length;let i,a,s;return r<=1?(i="weak",a="text-red-500",s="Weak"):r<=3?(i="medium",a="text-yellow-500",s="Medium"):r===4?(i="strong",a="text-blue-500",s="Strong"):(i="very-strong",a="text-green-500",s="Very Strong"),{score:r,level:i,color:a,label:s}},k_=t=>{const e=rG.map(i=>({...i,met:i.regex.test(t)})),n=Qfe(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},iG=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=k_(t);return r?null:y.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>y.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),y.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},aG=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=k_(t);return r?null:y.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?y.jsx(Qoe,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):y.jsx(a_,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),y.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},Zfe=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[i,a]=A.useState(""),[s,o]=A.useState(!1),[c,u]=A.useState(!1),[f,h]=A.useState(!1),[g,m]=A.useState(!1),{login:b,register:x,sendPasswordReset:w,isLoading:S,loginError:T,clearError:I}=$a(),N=k_(n),O=async k=>{if(k.preventDefault(),I(),t.trim()&&n.trim())if(c){if(!i.trim()||!N.isValid)return;await x(t.trim(),n,i.trim())}else await b(t.trim(),n)},D=async k=>{k.preventDefault(),t.trim()&&await w(t.trim())&&m(!0)};return A.useEffect(()=>{e(""),r(""),a(""),m(!1)},[c,f]),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:f?y.jsxs("form",{onSubmit:D,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-2",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(HI,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"reset-email",type:"email",value:t,onChange:k=>e(k.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"email"})]})]}),g?y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:y.jsx(HI,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),y.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),y.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",y.jsx("span",{className:"font-medium",children:t})]}),y.jsxs("button",{type:"button",onClick:()=>h(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[y.jsx(_l,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"submit",disabled:S||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?"Sending...":"Send Reset Link"}),y.jsx("div",{className:"mt-4 text-center",children:y.jsxs("button",{type:"button",onClick:()=>h(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:[y.jsx(_l,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):y.jsxs("form",{onSubmit:O,className:"space-y-6",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c?"Create Account":"Sign In"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:c?"Create a new account to get started":"Sign in to your account"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),y.jsx("input",{id:"email",type:"email",value:t,onChange:k=>e(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:S,autoComplete:"username"})]}),c&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),y.jsx("input",{id:"displayName",type:"text",value:i,onChange:k=>a(k.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:S})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!c&&y.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:S,children:"Forgot password?"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:k=>r(k.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${c&&n&&!N.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:S,autoComplete:c?"new-password":"current-password"}),y.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:S,children:s?y.jsx(D$,{className:"h-5 w-5"}):y.jsx(O$,{className:"h-5 w-5"})})]}),c&&n&&y.jsx("div",{className:"mt-2",children:y.jsx(iG,{password:n})}),c&&n&&y.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:y.jsx(aG,{password:n})})]}),T&&y.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[T,T.includes("verify your email")&&y.jsx("div",{className:"mt-3",children:y.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),y.jsx("button",{type:"submit",disabled:S||!t.trim()||!n.trim()||c&&!i.trim()||c&&!N.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:S?c?"Creating Account...":"Signing in...":c?"Create Account":"Sign In"}),y.jsx("div",{className:"mt-6 text-center",children:y.jsxs("button",{type:"button",onClick:()=>{u(!c),h(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:S,children:[y.jsx(ice,{className:"h-4 w-4"}),c?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},Jfe=({oobCode:t,onSuccess:e,onCancel:n})=>{const[r,i]=A.useState(""),[a,s]=A.useState(""),[o,c]=A.useState(!1),[u,f]=A.useState(!1),{confirmPasswordReset:h,isLoading:g,loginError:m,clearError:b}=$a(),x=k_(r);A.useEffect(()=>{b()},[b]);const w=async S=>{if(S.preventDefault(),r!==a||!x.isValid)return;await h(t,r)&&f(!0)};return u?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6",children:y.jsx(d1,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Password Reset Complete"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Your password has been successfully updated. You can now log in with your new password."}),y.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200",children:"Go to Login"})]})}):y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"Reset Password"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create a new password for your account"})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("form",{onSubmit:w,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(wz,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"new-password",type:o?"text":"password",value:r,onChange:S=>i(S.target.value),className:"w-full pl-10 pr-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors",placeholder:"Enter new password",required:!0}),y.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",onClick:()=>c(!o),children:o?y.jsx(D$,{className:"h-5 w-5"}):y.jsx(O$,{className:"h-5 w-5"})})]}),y.jsx("div",{className:"mt-2",children:y.jsx(iG,{password:r})})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(wz,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{id:"confirm-password",type:o?"text":"password",value:a,onChange:S=>s(S.target.value),className:`w-full pl-10 px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors ${a&&r!==a?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Confirm new password",required:!0})]}),a&&r!==a&&y.jsx("p",{className:"mt-1 text-sm text-red-500",children:"Passwords do not match"})]}),y.jsx(aG,{password:r}),m&&y.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:m}),y.jsx("button",{type:"submit",disabled:g||!r||!a||r!==a||!x.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:g?"Updating Password...":"Reset Password"}),y.jsx("div",{className:"text-center",children:y.jsxs("button",{type:"button",onClick:n,className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium inline-flex items-center",children:[y.jsx(_l,{className:"h-4 w-4 mr-1"}),"Back to Login"]})})]})})]})})},sG=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:s,logout:o,loginError:c}=$a();A.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]),A.useEffect(()=>{const h=()=>{console.log("Window focused, checking verification status..."),s()};return window.addEventListener("focus",h),()=>window.removeEventListener("focus",h)},[s]);const u=async()=>{e(!0),r(!1);const h=await a();e(!1),h&&(r(!0),setTimeout(()=>r(!1),3e3))},f=async()=>{await o()};return i?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full space-y-8",children:[y.jsx("div",{className:"text-center",children:y.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),y.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:y.jsx(HI,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(d1,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),y.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[y.jsx("li",{children:"1. Open your email inbox"}),y.jsx("li",{children:"2. Find the email from House Budget"}),y.jsx("li",{children:'3. Click the "Verify Email" link'}),y.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),c&&y.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:c}),n&&y.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),y.jsx("button",{onClick:u,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?y.jsxs(y.Fragment,{children:[y.jsx(av,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):y.jsxs(y.Fragment,{children:[y.jsx(av,{className:"h-4 w-4"}),"Resend verification email"]})}),y.jsxs("button",{onClick:f,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[y.jsx(_l,{className:"h-4 w-4"}),"Back to sign in"]})]})}),y.jsx("div",{className:"text-center",children:y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},oG=({message:t="Loading your budget...",showTimeout:e=!1})=>y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"relative",children:[y.jsx(av,{size:48,className:"text-blue-500 animate-spin"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(i_,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),y.jsxs("div",{className:"text-center space-y-3",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),y.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),y.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),y.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),y.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),y.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&y.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:y.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),y.jsx("div",{className:"mt-8 w-full max-w-md",children:y.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),VD=A.createContext({});function P_(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const BD=typeof window<"u",FD=BD?A.useLayoutEffect:A.useEffect,D_=A.createContext(null);function UD(t,e){t.indexOf(e)===-1&&t.push(e)}function $D(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Tl=(t,e,n)=>n>e?e:n<t?t:n;let qD=()=>{};const Al={},lG=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function cG(t){return typeof t=="object"&&t!==null}const uG=t=>/^0[^.\s]+$/u.test(t);function GD(t){let e;return()=>(e===void 0&&(e=t()),e)}const qa=t=>t,ehe=(t,e)=>n=>e(t(n)),E0=(...t)=>t.reduce(ehe),Sv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class HD{constructor(){this.subscriptions=[]}add(e){return UD(this.subscriptions,e),()=>$D(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xo=t=>t*1e3,Fa=t=>t/1e3;function dG(t,e){return e?t*(1e3/e):0}const fG=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,the=1e-7,nhe=12;function rhe(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=fG(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>the&&++o<nhe);return s}function T0(t,e,n,r){if(t===e&&n===r)return qa;const i=a=>rhe(a,0,1,t,n);return a=>a===0||a===1?a:fG(i(a),e,r)}const hG=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,pG=t=>e=>1-t(1-e),gG=T0(.33,1.53,.69,.99),KD=pG(gG),mG=hG(KD),vG=t=>(t*=2)<1?.5*KD(t):.5*(2-Math.pow(2,-10*(t-1))),WD=t=>1-Math.sin(Math.acos(t)),yG=pG(WD),bG=hG(WD),ihe=T0(.42,0,1,1),ahe=T0(0,0,.58,1),xG=T0(.42,0,.58,1),she=t=>Array.isArray(t)&&typeof t[0]!="number",wG=t=>Array.isArray(t)&&typeof t[0]=="number",ohe={linear:qa,easeIn:ihe,easeInOut:xG,easeOut:ahe,circIn:WD,circInOut:bG,circOut:yG,backIn:KD,backInOut:mG,backOut:gG,anticipate:vG},lhe=t=>typeof t=="string",ZL=t=>{if(wG(t)){qD(t.length===4);const[e,n,r,i]=t;return T0(e,n,r,i)}else if(lhe(t))return ohe[t];return t},Fb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function che(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,g=!1)=>{const b=g&&i?n:r;return h&&s.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const uhe=40;function _G(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Fb.reduce((I,N)=>(I[N]=che(a),I),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:f,update:h,preRender:g,render:m,postRender:b}=s,x=()=>{const I=Al.useManualTiming?i.timestamp:performance.now();n=!1,Al.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(I-i.timestamp,uhe),1)),i.timestamp=I,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),f.process(i),h.process(i),g.process(i),m.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},w=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Fb.reduce((I,N)=>{const O=s[N];return I[N]=(D,k=!1,P=!1)=>(n||w(),O.schedule(D,k,P)),I},{}),cancel:I=>{for(let N=0;N<Fb.length;N++)s[Fb[N]].cancel(I)},state:i,steps:s}}const{schedule:Cn,cancel:su,state:Yr,steps:wA}=_G(typeof requestAnimationFrame<"u"?requestAnimationFrame:qa,!0);let Ux;function dhe(){Ux=void 0}const Li={now:()=>(Ux===void 0&&Li.set(Yr.isProcessing||Al.useManualTiming?Yr.timestamp:performance.now()),Ux),set:t=>{Ux=t,queueMicrotask(dhe)}},SG=t=>e=>typeof e=="string"&&e.startsWith(t),YD=SG("--"),fhe=SG("var(--"),XD=t=>fhe(t)?hhe.test(t.split("/*")[0].trim()):!1,hhe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ev={...Lp,transform:t=>Tl(0,1,t)},Ub={...Lp,default:1},$m=t=>Math.round(t*1e5)/1e5,QD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function phe(t){return t==null}const ghe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ZD=(t,e)=>n=>!!(typeof n=="string"&&ghe.test(n)&&n.startsWith(t)||e&&!phe(n)&&Object.prototype.hasOwnProperty.call(n,e)),EG=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(QD);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},mhe=t=>Tl(0,255,t),_A={...Lp,transform:t=>Math.round(mhe(t))},yd={test:ZD("rgb","red"),parse:EG("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+_A.transform(t)+", "+_A.transform(e)+", "+_A.transform(n)+", "+$m(Ev.transform(r))+")"};function vhe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const _k={test:ZD("#"),parse:vhe,transform:yd.transform},A0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kc=A0("deg"),wo=A0("%"),st=A0("px"),yhe=A0("vh"),bhe=A0("vw"),JL={...wo,parse:t=>wo.parse(t)/100,transform:t=>wo.transform(t*100)},Sh={test:ZD("hsl","hue"),parse:EG("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+wo.transform($m(e))+", "+wo.transform($m(n))+", "+$m(Ev.transform(r))+")"},cr={test:t=>yd.test(t)||_k.test(t)||Sh.test(t),parse:t=>yd.test(t)?yd.parse(t):Sh.test(t)?Sh.parse(t):_k.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?yd.transform(t):Sh.transform(t),getAnimatableNone:t=>{const e=cr.parse(t);return e.alpha=0,cr.transform(e)}},xhe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function whe(t){return isNaN(t)&&typeof t=="string"&&(t.match(QD)?.length||0)+(t.match(xhe)?.length||0)>0}const TG="number",AG="color",_he="var",She="var(",e5="${}",Ehe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Tv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Ehe,c=>(cr.test(c)?(r.color.push(a),i.push(AG),n.push(cr.parse(c))):c.startsWith(She)?(r.var.push(a),i.push(_he),n.push(c)):(r.number.push(a),i.push(TG),n.push(parseFloat(c))),++a,e5)).split(e5);return{values:n,split:o,indexes:r,types:i}}function CG(t){return Tv(t).values}function IG(t){const{split:e,types:n}=Tv(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===TG?a+=$m(i[s]):o===AG?a+=cr.transform(i[s]):a+=i[s]}return a}}const The=t=>typeof t=="number"?0:cr.test(t)?cr.getAnimatableNone(t):t;function Ahe(t){const e=CG(t);return IG(t)(e.map(The))}const ou={test:whe,parse:CG,createTransformer:IG,getAnimatableNone:Ahe};function SA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Che({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=SA(c,o,t+1/3),a=SA(c,o,t),s=SA(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function R1(t,e){return n=>n>0?e:t}const Mn=(t,e,n)=>t+(e-t)*n,EA=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Ihe=[_k,yd,Sh],khe=t=>Ihe.find(e=>e.test(t));function t5(t){const e=khe(t);if(!e)return!1;let n=e.parse(t);return e===Sh&&(n=Che(n)),n}const n5=(t,e)=>{const n=t5(t),r=t5(e);if(!n||!r)return R1(t,e);const i={...n};return a=>(i.red=EA(n.red,r.red,a),i.green=EA(n.green,r.green,a),i.blue=EA(n.blue,r.blue,a),i.alpha=Mn(n.alpha,r.alpha,a),yd.transform(i))},Sk=new Set(["none","hidden"]);function Phe(t,e){return Sk.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Dhe(t,e){return n=>Mn(t,e,n)}function JD(t){return typeof t=="number"?Dhe:typeof t=="string"?XD(t)?R1:cr.test(t)?n5:Rhe:Array.isArray(t)?kG:typeof t=="object"?cr.test(t)?n5:Ohe:R1}function kG(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>JD(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function Ohe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=JD(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function Nhe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const Rhe=(t,e)=>{const n=ou.createTransformer(e),r=Tv(t),i=Tv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Sk.has(t)&&!i.values.length||Sk.has(e)&&!r.values.length?Phe(t,e):E0(kG(Nhe(r,i),i.values),n):R1(t,e)};function PG(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Mn(t,e,n):JD(t)(t,e)}const Mhe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Cn.update(e,n),stop:()=>su(e),now:()=>Yr.isProcessing?Yr.timestamp:Li.now()}},DG=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},M1=2e4;function eO(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<M1;)e+=n,r=t.next(e);return e>=M1?1/0:e}function jhe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(eO(r),M1);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Fa(i)}}const zhe=5;function OG(t,e,n){const r=Math.max(e-zhe,0);return dG(n-t(r),e-r)}const Bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},TA=.001;function Lhe({duration:t=Bn.duration,bounce:e=Bn.bounce,velocity:n=Bn.velocity,mass:r=Bn.mass}){let i,a,s=1-e;s=Tl(Bn.minDamping,Bn.maxDamping,s),t=Tl(Bn.minDuration,Bn.maxDuration,Fa(t)),s<1?(i=u=>{const f=u*s,h=f*t,g=f-n,m=Ek(u,s),b=Math.exp(-h);return TA-g/m*b},a=u=>{const h=u*s*t,g=h*n+n,m=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-h),x=Ek(Math.pow(u,2),s);return(-i(u)+TA>0?-1:1)*((g-m)*b)/x}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-TA+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,c=Bhe(i,a,o);if(t=xo(t),isNaN(c))return{stiffness:Bn.stiffness,damping:Bn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const Vhe=12;function Bhe(t,e,n){let r=n;for(let i=1;i<Vhe;i++)r=r-t(r)/e(r);return r}function Ek(t,e){return t*Math.sqrt(1-e*e)}const Fhe=["duration","bounce"],Uhe=["stiffness","damping","mass"];function r5(t,e){return e.some(n=>t[n]!==void 0)}function $he(t){let e={velocity:Bn.velocity,stiffness:Bn.stiffness,damping:Bn.damping,mass:Bn.mass,isResolvedFromDuration:!1,...t};if(!r5(t,Uhe)&&r5(t,Fhe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Tl(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Bn.mass,stiffness:i,damping:a}}else{const n=Lhe(t);e={...e,...n,mass:Bn.mass},e.isResolvedFromDuration=!0}return e}function j1(t=Bn.visualDuration,e=Bn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:h,velocity:g,isResolvedFromDuration:m}=$he({...n,velocity:-Fa(n.velocity||0)}),b=g||0,x=u/(2*Math.sqrt(c*f)),w=s-a,S=Fa(Math.sqrt(c/f)),T=Math.abs(w)<5;r||(r=T?Bn.restSpeed.granular:Bn.restSpeed.default),i||(i=T?Bn.restDelta.granular:Bn.restDelta.default);let I;if(x<1){const O=Ek(S,x);I=D=>{const k=Math.exp(-x*S*D);return s-k*((b+x*S*w)/O*Math.sin(O*D)+w*Math.cos(O*D))}}else if(x===1)I=O=>s-Math.exp(-S*O)*(w+(b+S*w)*O);else{const O=S*Math.sqrt(x*x-1);I=D=>{const k=Math.exp(-x*S*D),P=Math.min(O*D,300);return s-k*((b+x*S*w)*Math.sinh(P)+O*w*Math.cosh(P))/O}}const N={calculatedDuration:m&&h||null,next:O=>{const D=I(O);if(m)o.done=O>=h;else{let k=O===0?b:0;x<1&&(k=O===0?xo(b):OG(I,O,D));const P=Math.abs(k)<=r,R=Math.abs(s-D)<=i;o.done=P&&R}return o.value=o.done?s:D,o},toString:()=>{const O=Math.min(eO(N),M1),D=DG(k=>N.next(O*k).value,O,30);return O+"ms "+D},toTransition:()=>{}};return N}j1.applyToOptions=t=>{const e=jhe(t,100,j1);return t.ease=e.ease,t.duration=xo(e.duration),t.type="keyframes",t};function Tk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:f}){const h=t[0],g={done:!1,value:h},m=P=>o!==void 0&&P<o||c!==void 0&&P>c,b=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let x=n*e;const w=h+x,S=s===void 0?w:s(w);S!==w&&(x=S-h);const T=P=>-x*Math.exp(-P/r),I=P=>S+T(P),N=P=>{const R=T(P),j=I(P);g.done=Math.abs(R)<=u,g.value=g.done?S:j};let O,D;const k=P=>{m(g.value)&&(O=P,D=j1({keyframes:[g.value,b(g.value)],velocity:OG(I,P,g.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return k(0),{calculatedDuration:null,next:P=>{let R=!1;return!D&&O===void 0&&(R=!0,N(P),k(P)),O!==void 0&&P>=O?D.next(P-O):(!R&&N(P),g)}}}function qhe(t,e,n){const r=[],i=n||Al.mix||PG,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||qa:e;o=E0(c,o)}r.push(o)}return r}function Ghe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(qD(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=qhe(e,r,i),c=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const g=Sv(t[h],t[h+1],f);return o[h](g)};return n?f=>u(Tl(t[0],t[a-1],f)):u}function Hhe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Sv(0,e,r);t.push(Mn(n,1,i))}}function Khe(t){const e=[0];return Hhe(e,t.length-1),e}function Whe(t,e){return t.map(n=>n*e)}function Yhe(t,e){return t.map(()=>e||xG).splice(0,t.length-1)}function qm({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=she(r)?r.map(ZL):ZL(r),a={done:!1,value:e[0]},s=Whe(n&&n.length===e.length?n:Khe(e),t),o=Ghe(s,e,{ease:Array.isArray(i)?i:Yhe(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const Xhe=t=>t!==null;function tO(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Xhe),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const Qhe={decay:Tk,inertia:Tk,tween:qm,keyframes:qm,spring:j1};function NG(t){typeof t.type=="string"&&(t.type=Qhe[t.type])}class nO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Zhe=t=>t/100;class rO extends nO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Li.now()&&this.tick(Li.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;NG(e);const{type:n=qm,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const c=n||qm;c!==qm&&typeof o[0]!="number"&&(this.mixKeyframes=E0(Zhe,PG(o[0],o[1])),o=[0,100]);const u=c({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=eO(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:g,repeatDelay:m,type:b,onUpdate:x,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let I=this.currentTime,N=r;if(h){const P=Math.min(this.currentTime,i)/o;let R=Math.floor(P),j=P%1;!j&&P>=1&&(j=1),j===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(g==="reverse"?(j=1-j,m&&(j-=m/o)):g==="mirror"&&(N=s)),I=Tl(0,1,j)*o}const O=T?{done:!1,value:f[0]}:N.next(I);a&&(O.value=a(O.value));let{done:D}=O;!T&&c!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return k&&b!==Tk&&(O.value=tO(f,this.options,w,this.speed)),x&&x(O.value),k&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return Fa(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Fa(e)}get time(){return Fa(this.currentTime)}set time(e){e=xo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Li.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Fa(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Mhe,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Li.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Jhe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const bd=t=>t*180/Math.PI,Ak=t=>{const e=bd(Math.atan2(t[1],t[0]));return Ck(e)},epe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ak,rotateZ:Ak,skewX:t=>bd(Math.atan(t[1])),skewY:t=>bd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Ck=t=>(t=t%360,t<0&&(t+=360),t),i5=Ak,a5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),s5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),tpe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:a5,scaleY:s5,scale:t=>(a5(t)+s5(t))/2,rotateX:t=>Ck(bd(Math.atan2(t[6],t[5]))),rotateY:t=>Ck(bd(Math.atan2(-t[2],t[0]))),rotateZ:i5,rotate:i5,skewX:t=>bd(Math.atan(t[4])),skewY:t=>bd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ik(t){return t.includes("scale")?1:0}function kk(t,e){if(!t||t==="none")return Ik(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=tpe,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=epe,i=o}if(!i)return Ik(e);const a=r[e],s=i[1].split(",").map(rpe);return typeof a=="function"?a(s):s[a]}const npe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return kk(n,e)};function rpe(t){return parseFloat(t.trim())}const Vp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bp=new Set(Vp),o5=t=>t===Lp||t===st,ipe=new Set(["x","y","z"]),ape=Vp.filter(t=>!ipe.has(t));function spe(t){const e=[];return ape.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Dd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>kk(e,"x"),y:(t,{transform:e})=>kk(e,"y")};Dd.translateX=Dd.x;Dd.translateY=Dd.y;const Od=new Set;let Pk=!1,Dk=!1,Ok=!1;function RG(){if(Dk){const t=Array.from(Od).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=spe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Dk=!1,Pk=!1,Od.forEach(t=>t.complete(Ok)),Od.clear()}function MG(){Od.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Dk=!0)})}function ope(){Ok=!0,MG(),RG(),Ok=!1}class iO{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Od.add(this),Pk||(Pk=!0,Cn.read(MG),Cn.resolveKeyframes(RG))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Jhe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Od.delete(this)}cancel(){this.state==="scheduled"&&(Od.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lpe=t=>t.startsWith("--");function cpe(t,e,n){lpe(e)?t.style.setProperty(e,n):t.style[e]=n}const upe=GD(()=>window.ScrollTimeline!==void 0),dpe={};function fpe(t,e){const n=GD(t);return()=>dpe[e]??n()}const jG=fpe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Tm=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,l5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Tm([0,.65,.55,1]),circOut:Tm([.55,0,1,.45]),backIn:Tm([.31,.01,.66,-.59]),backOut:Tm([.33,1.53,.69,.99])};function zG(t,e){if(t)return typeof t=="function"?jG()?DG(t,e):"ease-out":wG(t)?Tm(t):Array.isArray(t)?t.map(n=>zG(n,e)||l5.easeOut):l5[t]}function hpe(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:c}={},u=void 0){const f={[e]:n};c&&(f.offset=c);const h=zG(o,i);Array.isArray(h)&&(f.easing=h);const g={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),t.animate(f,g)}function LG(t){return typeof t=="function"&&"applyToOptions"in t}function ppe({type:t,...e}){return LG(t)&&jG()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class gpe extends nO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,qD(typeof e.type!="string");const u=ppe(e);this.animation=hpe(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=tO(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):cpe(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Fa(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Fa(e)}get time(){return Fa(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=xo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&upe()?(this.animation.timeline=e,qa):n(this)}}const VG={anticipate:vG,backInOut:mG,circInOut:bG};function mpe(t){return t in VG}function vpe(t){typeof t.ease=="string"&&mpe(t.ease)&&(t.ease=VG[t.ease])}const c5=10;class ype extends gpe{constructor(e){vpe(e),NG(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new rO({...s,autoplay:!1}),c=xo(this.finishedTime??this.time);n.setWithVelocity(o.sample(c-c5).value,o.sample(c).value,c5),o.stop()}}const u5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ou.test(t)||t==="0")&&!t.startsWith("url("));function bpe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function xpe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=u5(i,e),o=u5(a,e);return!s||!o?!1:bpe(t)||(n==="spring"||LG(n))&&r}function Nk(t){t.duration=0,t.type="keyframes"}const wpe=new Set(["opacity","clipPath","filter","transform"]),_pe=GD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Spe(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return _pe()&&n&&wpe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const Epe=40;class Tpe extends nO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:c,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Li.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:u,element:f,...h},m=f?.KeyframeResolver||iO;this.keyframeResolver=new m(o,(b,x,w)=>this.onKeyframesResolved(b,x,g,!w),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=Li.now(),xpe(e,a,s,o)||((Al.instantAnimations||!c)&&f?.(tO(e,r,n)),e[0]=e[e.length-1],Nk(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Epe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!u&&Spe(g)?new ype({...g,element:g.motionValue.owner.current}):new rO(g);m.finished.then(()=>this.notifyFinished()).catch(qa),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ope()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Ape=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Cpe(t){const e=Ape.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function BG(t,e,n=1){const[r,i]=Cpe(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return lG(s)?parseFloat(s):s}return XD(i)?BG(i,e,n+1):i}function aO(t,e){return t?.[e]??t?.default??t}const FG=new Set(["width","height","top","left","right","bottom",...Vp]),Ipe={test:t=>t==="auto",parse:t=>t},UG=t=>e=>e.test(t),$G=[Lp,st,wo,kc,bhe,yhe,Ipe],d5=t=>$G.find(UG(t));function kpe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uG(t):!0}const Ppe=new Set(["brightness","contrast","saturate","opacity"]);function Dpe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(QD)||[];if(!r)return t;const i=n.replace(r,"");let a=Ppe.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const Ope=/\b([a-z-]*)\(.*?\)/gu,Rk={...ou,getAnimatableNone:t=>{const e=t.match(Ope);return e?e.map(Dpe).join(" "):t}},f5={...Lp,transform:Math.round},Npe={rotate:kc,rotateX:kc,rotateY:kc,rotateZ:kc,scale:Ub,scaleX:Ub,scaleY:Ub,scaleZ:Ub,skew:kc,skewX:kc,skewY:kc,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:Ev,originX:JL,originY:JL,originZ:st},sO={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,backgroundPositionX:st,backgroundPositionY:st,...Npe,zIndex:f5,fillOpacity:Ev,strokeOpacity:Ev,numOctaves:f5},Rpe={...sO,color:cr,backgroundColor:cr,outlineColor:cr,fill:cr,stroke:cr,borderColor:cr,borderTopColor:cr,borderRightColor:cr,borderBottomColor:cr,borderLeftColor:cr,filter:Rk,WebkitFilter:Rk},qG=t=>Rpe[t];function GG(t,e){let n=qG(t);return n!==Rk&&(n=ou),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Mpe=new Set(["auto","none","0"]);function jpe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!Mpe.has(a)&&Tv(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=GG(n,i)}class zpe extends iO{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),XD(u))){const f=BG(u,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!FG.has(r)||e.length!==2)return;const[i,a]=e,s=d5(i),o=d5(a);if(s!==o)if(o5(s)&&o5(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else Dd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||kpe(e[i]))&&r.push(i);r.length&&jpe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Dd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Dd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function Lpe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const HG=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function KG(t){return cG(t)&&"offsetHeight"in t}const h5=30,Vpe=t=>!isNaN(parseFloat(t));class Bpe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Li.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Li.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Vpe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new HD);const r=this.events[e].add(n);return e==="change"?()=>{r(),Cn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Li.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>h5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,h5);return dG(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lp(t,e){return new Bpe(t,e)}const{schedule:oO}=_G(queueMicrotask,!1),ms={x:!1,y:!1};function WG(){return ms.x||ms.y}function Fpe(t){return t==="x"||t==="y"?ms[t]?null:(ms[t]=!0,()=>{ms[t]=!1}):ms.x||ms.y?null:(ms.x=ms.y=!0,()=>{ms.x=ms.y=!1})}function YG(t,e){const n=Lpe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function p5(t){return!(t.pointerType==="touch"||WG())}function Upe(t,e,n={}){const[r,i,a]=YG(t,n),s=o=>{if(!p5(o))return;const{target:c}=o,u=e(c,o);if(typeof u!="function"||!c)return;const f=h=>{p5(h)&&(u(h),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const XG=(t,e)=>e?t===e?!0:XG(t,e.parentElement):!1,lO=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$pe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qpe(t){return $pe.has(t.tagName)||t.tabIndex!==-1}const $x=new WeakSet;function g5(t){return e=>{e.key==="Enter"&&t(e)}}function AA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Gpe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=g5(()=>{if($x.has(n))return;AA(n,"down");const i=g5(()=>{AA(n,"up")}),a=()=>AA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function m5(t){return lO(t)&&!WG()}function Hpe(t,e,n={}){const[r,i,a]=YG(t,n),s=o=>{const c=o.currentTarget;if(!m5(o))return;$x.add(c);const u=e(c,o),f=(m,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),$x.has(c)&&$x.delete(c),m5(m)&&typeof u=="function"&&u(m,{success:b})},h=m=>{f(m,c===window||c===document||n.useGlobalTarget||XG(c,m.target))},g=m=>{f(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),KG(o)&&(o.addEventListener("focus",u=>Gpe(u,i)),!qpe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function QG(t){return cG(t)&&"ownerSVGElement"in t}function Kpe(t){return QG(t)&&t.tagName==="svg"}const oi=t=>!!(t&&t.getVelocity),Wpe=[...$G,cr,ou],Ype=t=>Wpe.find(UG(t)),cO=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function v5(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Xpe(...t){return e=>{let n=!1;const r=t.map(i=>{const a=v5(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():v5(t[i],null)}}}}function Qpe(...t){return A.useCallback(Xpe(...t),t)}class Zpe extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=KG(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Jpe({children:t,isPresent:e,anchorX:n,root:r}){const i=A.useId(),a=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=A.useContext(cO),c=Qpe(a,t?.ref);return A.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:g,right:m}=s.current;if(e||!a.current||!u||!f)return;const b=n==="left"?`left: ${g}`:`right: ${m}`;a.current.dataset.motionPopId=i;const x=document.createElement("style");o&&(x.nonce=o);const w=r??document.head;return w.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(x)&&w.removeChild(x)}},[e]),y.jsx(Zpe,{isPresent:e,childRef:a,sizeRef:s,children:A.cloneElement(t,{ref:c})})}const ege=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:c})=>{const u=P_(tge),f=A.useId();let h=!0,g=A.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:m=>{u.set(m,!0);for(const b of u.values())if(!b)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,r]);return a&&h&&(g={...g}),A.useMemo(()=>{u.forEach((m,b)=>u.set(b,!1))},[n]),A.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),s==="popLayout"&&(t=y.jsx(Jpe,{isPresent:n,anchorX:o,root:c,children:t})),y.jsx(D_.Provider,{value:g,children:t})};function tge(){return new Map}function ZG(t=!0){const e=A.useContext(D_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=A.useId();A.useEffect(()=>{if(t)return i(a)},[t]);const s=A.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const $b=t=>t.key||"";function y5(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const ba=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:c})=>{const[u,f]=ZG(s),h=A.useMemo(()=>y5(t),[t]),g=s&&!u?[]:h.map($b),m=A.useRef(!0),b=A.useRef(h),x=P_(()=>new Map),[w,S]=A.useState(h),[T,I]=A.useState(h);FD(()=>{m.current=!1,b.current=h;for(let D=0;D<T.length;D++){const k=$b(T[D]);g.includes(k)?x.delete(k):x.get(k)!==!0&&x.set(k,!1)}},[T,g.length,g.join("-")]);const N=[];if(h!==w){let D=[...h];for(let k=0;k<T.length;k++){const P=T[k],R=$b(P);g.includes(R)||(D.splice(k,0,P),N.push(P))}return a==="wait"&&N.length&&(D=N),I(y5(D)),S(h),null}const{forceRender:O}=A.useContext(VD);return y.jsx(y.Fragment,{children:T.map(D=>{const k=$b(D),P=s&&!u?!1:h===T||g.includes(k),R=()=>{if(x.has(k))x.set(k,!0);else return;let j=!0;x.forEach(z=>{z||(j=!1)}),j&&(O?.(),I(b.current),s&&f?.(),r&&r())};return y.jsx(ege,{isPresent:P,initial:!m.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:P?void 0:R,anchorX:o,children:D},k)})})},JG=A.createContext({strict:!1}),b5={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cp={};for(const t in b5)cp[t]={isEnabled:e=>b5[t].some(n=>!!e[n])};function nge(t){for(const e in t)cp[e]={...cp[e],...t[e]}}const rge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function z1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rge.has(t)}let eH=t=>!z1(t);function ige(t){typeof t=="function"&&(eH=e=>e.startsWith("on")?!z1(e):t(e))}try{ige(require("@emotion/is-prop-valid").default)}catch{}function age(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(eH(i)||n===!0&&z1(i)||!e&&!z1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const O_=A.createContext({});function N_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Av(t){return typeof t=="string"||Array.isArray(t)}const uO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dO=["initial",...uO];function R_(t){return N_(t.animate)||dO.some(e=>Av(t[e]))}function tH(t){return!!(R_(t)||t.variants)}function sge(t,e){if(R_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Av(n)?n:void 0,animate:Av(r)?r:void 0}}return t.inherit!==!1?e:{}}function oge(t){const{initial:e,animate:n}=sge(t,A.useContext(O_));return A.useMemo(()=>({initial:e,animate:n}),[x5(e),x5(n)])}function x5(t){return Array.isArray(t)?t.join(" "):t}const Cv={};function lge(t){for(const e in t)Cv[e]=t[e],YD(e)&&(Cv[e].isCSSVariable=!0)}function nH(t,{layout:e,layoutId:n}){return Bp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Cv[t]||t==="opacity")}const cge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uge=Vp.length;function dge(t,e,n){let r="",i=!0;for(let a=0;a<uge;a++){const s=Vp[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=HG(o,sO[s]);if(!c){i=!1;const f=cge[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function fO(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(Bp.has(c)){s=!0;continue}else if(YD(c)){i[c]=u;continue}else{const f=HG(u,sO[c]);c.startsWith("origin")?(o=!0,a[c]=f):r[c]=f}}if(e.transform||(s||n?r.transform=dge(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}const hO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rH(t,e,n){for(const r in e)!oi(e[r])&&!nH(r,n)&&(t[r]=e[r])}function fge({transformTemplate:t},e){return A.useMemo(()=>{const n=hO();return fO(n,e,t),Object.assign({},n.vars,n.style)},[e])}function hge(t,e){const n=t.style||{},r={};return rH(r,n,t),Object.assign(r,fge(t,e)),r}function pge(t,e){const n={},r=hge(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const gge={offset:"stroke-dashoffset",array:"stroke-dasharray"},mge={offset:"strokeDashoffset",array:"strokeDasharray"};function vge(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?gge:mge;t[a.offset]=st.transform(-r);const s=st.transform(e),o=st.transform(n);t[a.array]=`${s} ${o}`}function iH(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},c,u,f){if(fO(t,o,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:g}=t;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&vge(h,i,a,s,!1)}const aH=()=>({...hO(),attrs:{}}),sH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yge(t,e,n,r){const i=A.useMemo(()=>{const a=aH();return iH(a,e,sH(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};rH(a,t.style,t),i.style={...a,...i.style}}return i}const bge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pO(t){return typeof t!="string"||t.includes("-")?!1:!!(bge.indexOf(t)>-1||/[A-Z]/u.test(t))}function xge(t,e,n,{latestValues:r},i,a=!1){const o=(pO(t)?yge:pge)(e,r,i,t),c=age(e,typeof t=="string",a),u=t!==A.Fragment?{...c,...o,ref:n}:{},{children:f}=e,h=A.useMemo(()=>oi(f)?f.get():f,[f]);return A.createElement(t,{...u,children:h})}function w5(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function gO(t,e,n,r){if(typeof e=="function"){const[i,a]=w5(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=w5(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function qx(t){return oi(t)?t.get():t}function wge({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:_ge(n,r,i,t),renderState:e()}}function _ge(t,e,n,r){const i={},a=r(t,{});for(const g in a)i[g]=qx(a[g]);let{initial:s,animate:o}=t;const c=R_(t),u=tH(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!N_(h)){const g=Array.isArray(h)?h:[h];for(let m=0;m<g.length;m++){const b=gO(t,g[m]);if(b){const{transitionEnd:x,transition:w,...S}=b;for(const T in S){let I=S[T];if(Array.isArray(I)){const N=f?I.length-1:0;I=I[N]}I!==null&&(i[T]=I)}for(const T in x)i[T]=x[T]}}}return i}const oH=t=>(e,n)=>{const r=A.useContext(O_),i=A.useContext(D_),a=()=>wge(t,e,r,i);return n?a():P_(a)};function mO(t,e,n){const{style:r}=t,i={};for(const a in r)(oi(r[a])||e.style&&oi(e.style[a])||nH(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const Sge=oH({scrapeMotionValuesFromProps:mO,createRenderState:hO});function lH(t,e,n){const r=mO(t,e,n);for(const i in t)if(oi(t[i])||oi(e[i])){const a=Vp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const Ege=oH({scrapeMotionValuesFromProps:lH,createRenderState:aH}),Tge=Symbol.for("motionComponentSymbol");function Eh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Age(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Eh(n)&&(n.current=r))},[e])}const vO=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Cge="framerAppearId",cH="data-"+vO(Cge),uH=A.createContext({});function Ige(t,e,n,r,i){const{visualElement:a}=A.useContext(O_),s=A.useContext(JG),o=A.useContext(D_),c=A.useContext(cO).reducedMotion,u=A.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const f=u.current,h=A.useContext(uH);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&kge(u.current,n,i,h);const g=A.useRef(!1);A.useInsertionEffect(()=>{f&&g.current&&f.update(n,o)});const m=n[cH],b=A.useRef(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return FD(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),b.current=!1),f.enteringChildren=void 0)}),f}function kge(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:dH(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Eh(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function dH(t){if(t)return t.options.allowProjection!==!1?t.projection:dH(t.parent)}function CA(t,{forwardMotionProps:e=!1}={},n,r){n&&nge(n);const i=pO(t)?Ege:Sge;function a(o,c){let u;const f={...A.useContext(cO),...o,layoutId:Pge(o)},{isStatic:h}=f,g=oge(o),m=i(o,h);if(!h&&BD){Dge();const b=Oge(f);u=b.MeasureLayout,g.visualElement=Ige(t,m,f,r,b.ProjectionNode)}return y.jsxs(O_.Provider,{value:g,children:[u&&g.visualElement?y.jsx(u,{visualElement:g.visualElement,...f}):null,xge(t,o,Age(m,g.visualElement,c),m,h,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=A.forwardRef(a);return s[Tge]=t,s}function Pge({layoutId:t}){const e=A.useContext(VD).id;return e&&t!==void 0?e+"-"+t:t}function Dge(t,e){A.useContext(JG).strict}function Oge(t){const{drag:e,layout:n}=cp;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Nge(t,e){if(typeof Proxy>"u")return CA;const n=new Map,r=(a,s)=>CA(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,CA(s,void 0,t,e)),n.get(s))})}function fH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Rge({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Mge(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function IA(t){return t===void 0||t===1}function Mk({scale:t,scaleX:e,scaleY:n}){return!IA(t)||!IA(e)||!IA(n)}function rd(t){return Mk(t)||hH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function hH(t){return _5(t.x)||_5(t.y)}function _5(t){return t&&t!=="0%"}function L1(t,e,n){const r=t-n,i=e*r;return n+i}function S5(t,e,n,r,i){return i!==void 0&&(t=L1(t,i,r)),L1(t,n,r)+e}function jk(t,e=0,n=1,r,i){t.min=S5(t.min,e,n,r,i),t.max=S5(t.max,e,n,r,i)}function pH(t,{x:e,y:n}){jk(t.x,e.translate,e.scale,e.originPoint),jk(t.y,n.translate,n.scale,n.originPoint)}const E5=.999999999999,T5=1.0000000000001;function jge(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ah(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,pH(t,s)),r&&rd(a.latestValues)&&Ah(t,a.latestValues))}e.x<T5&&e.x>E5&&(e.x=1),e.y<T5&&e.y>E5&&(e.y=1)}function Th(t,e){t.min=t.min+e,t.max=t.max+e}function A5(t,e,n,r,i=.5){const a=Mn(t.min,t.max,i);jk(t,e,n,a,r)}function Ah(t,e){A5(t.x,e.x,e.scaleX,e.scale,e.originX),A5(t.y,e.y,e.scaleY,e.scale,e.originY)}function gH(t,e){return fH(Mge(t.getBoundingClientRect(),e))}function zge(t,e,n){const r=gH(t,n),{scroll:i}=e;return i&&(Th(r.x,i.offset.x),Th(r.y,i.offset.y)),r}const C5=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ch=()=>({x:C5(),y:C5()}),I5=()=>({min:0,max:0}),Xn=()=>({x:I5(),y:I5()}),zk={current:null},mH={current:!1};function Lge(){if(mH.current=!0,!!BD)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zk.current=t.matches;t.addEventListener("change",e),e()}else zk.current=!1}const Vge=new WeakMap;function Bge(t,e,n){for(const r in e){const i=e[r],a=n[r];if(oi(i))t.addValue(r,i);else if(oi(a))t.addValue(r,lp(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,lp(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const k5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Fge{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=iO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Li.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Cn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=R_(n),this.isVariantNode=tH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in h){const m=h[g];c[g]!==void 0&&oi(m)&&m.set(c[g])}}mount(e){this.current=e,Vge.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),mH.current||Lge(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),su(this.notifyUpdate),su(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bp.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Cn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in cp){const n=cp[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<k5.length;r++){const i=k5[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Bge(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=lp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(lG(r)||uG(r))?r=parseFloat(r):!Ype(r)&&ou.test(n)&&(r=GG(e,n)),this.setBaseTarget(e,oi(r)?r.get():r)),oi(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=gO(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!oi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new HD),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){oO.render(this.render)}}class vH extends Fge{constructor(){super(...arguments),this.KeyframeResolver=zpe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;oi(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function yH(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function Uge(t){return window.getComputedStyle(t)}class $ge extends vH{constructor(){super(...arguments),this.type="html",this.renderInstance=yH}readValueFromInstance(e,n){if(Bp.has(n))return this.projection?.isProjecting?Ik(n):npe(e,n);{const r=Uge(e),i=(YD(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return gH(e,n)}build(e,n,r){fO(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return mO(e,n,r)}}const bH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qge(t,e,n,r){yH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(bH.has(i)?i:vO(i),e.attrs[i])}class Gge extends vH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bp.has(n)){const r=qG(n);return r&&r.default||0}return n=bH.has(n)?n:vO(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return lH(e,n,r)}build(e,n,r){iH(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){qge(e,n,r,i)}mount(e){this.isSVGTag=sH(e.tagName),super.mount(e)}}const Hge=(t,e)=>pO(t)?new Gge(e):new $ge(e,{allowProjection:t!==A.Fragment});function Fh(t,e,n){const r=t.getProps();return gO(r,e,n!==void 0?n:r.custom,t)}const Lk=t=>Array.isArray(t);function Kge(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,lp(n))}function Wge(t){return Lk(t)?t[t.length-1]||0:t}function yO(t,e){const n=Fh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=Wge(a[s]);Kge(t,s,o)}}function Yge(t){return!!(oi(t)&&t.add)}function Vk(t,e){const n=t.getValue("willChange");if(Yge(n))return n.add(e);if(!n&&Al.WillChange){const r=new Al.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function xH(t){return t.props[cH]}const Xge=t=>t!==null;function Qge(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Xge),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const Zge={type:"spring",stiffness:500,damping:25,restSpeed:10},Jge=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),eme={type:"keyframes",duration:.8},tme={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nme=(t,{keyframes:e})=>e.length>2?eme:Bp.has(t)?t.startsWith("scale")?Jge(e[1]):Zge:tme;function rme({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const bO=(t,e,n,r={},i,a)=>s=>{const o=aO(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-xo(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};rme(o)||Object.assign(f,nme(t,f)),f.duration&&(f.duration=xo(f.duration)),f.repeatDelay&&(f.repeatDelay=xo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Nk(f),f.delay===0&&(h=!0)),(Al.instantAnimations||Al.skipAnimations)&&(h=!0,Nk(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const g=Qge(f.keyframes,o);if(g!==void 0){Cn.update(()=>{f.onUpdate(g),f.onComplete()});return}}return o.isSync?new rO(f):new Tpe(f)};function ime({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function wH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const h=t.getValue(f,t.latestValues[f]??null),g=o[f];if(g===void 0||u&&ime(u,f))continue;const m={delay:n,...aO(a||{},f)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(g)&&g===b&&!m.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const S=xH(t);if(S){const T=window.MotionHandoffAnimation(S,f,Cn);T!==null&&(m.startTime=T,x=!0)}}Vk(t,f),h.start(bO(f,h,g,t.shouldReduceMotion&&FG.has(f)?{type:!1}:m,t,x));const w=h.animation;w&&c.push(w)}return s&&Promise.all(c).then(()=>{Cn.update(()=>{s&&yO(t,s)})}),c}function _H(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}function Bk(t,e,n={}){const r=Fh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(wH(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return ame(t,e,c,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function ame(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),o.push(Bk(c,e,{...s,delay:n+(typeof r=="function"?0:r)+_H(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function SH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Bk(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Bk(t,e,n);else{const i=typeof e=="function"?Fh(t,e,n.custom):e;r=Promise.all(wH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function EH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const sme=dO.length;function TH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?TH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<sme;n++){const r=dO[n],i=t.props[r];(Av(i)||i===!1)&&(e[r]=i)}return e}const ome=[...uO].reverse(),lme=uO.length;function cme(t){return e=>Promise.all(e.map(({animation:n,options:r})=>SH(t,n,r)))}function ume(t){let e=cme(t),n=P5(),r=!0;const i=c=>(u,f)=>{const h=Fh(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:m,...b}=h;u={...u,...b,...m}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,f=TH(t.parent)||{},h=[],g=new Set;let m={},b=1/0;for(let w=0;w<lme;w++){const S=ome[w],T=n[S],I=u[S]!==void 0?u[S]:f[S],N=Av(I),O=S===c?T.isActive:null;O===!1&&(b=w);let D=I===f[S]&&I!==u[S]&&N;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),T.protectedKeys={...m},!T.isActive&&O===null||!I&&!T.prevProp||N_(I)||typeof I=="boolean")continue;const k=dme(T.prevProp,I);let P=k||S===c&&T.isActive&&!D&&N||w>b&&N,R=!1;const j=Array.isArray(I)?I:[I];let z=j.reduce(i(S),{});O===!1&&(z={});const{prevResolvedValues:B={}}=T,L={...B,...z},K=Y=>{P=!0,g.has(Y)&&(R=!0,g.delete(Y)),T.needsAnimating[Y]=!0;const J=t.getValue(Y);J&&(J.liveStyle=!1)};for(const Y in L){const J=z[Y],ne=B[Y];if(m.hasOwnProperty(Y))continue;let W=!1;Lk(J)&&Lk(ne)?W=!EH(J,ne):W=J!==ne,W?J!=null?K(Y):g.add(Y):J!==void 0&&g.has(Y)?K(Y):T.protectedKeys[Y]=!0}T.prevProp=I,T.prevResolvedValues=z,T.isActive&&(m={...m,...z}),r&&t.blockInitialAnimation&&(P=!1);const Q=D&&k;P&&(!Q||R)&&h.push(...j.map(Y=>{const J={type:S};if(typeof Y=="string"&&r&&!Q&&t.manuallyAnimateOnMount&&t.parent){const{parent:ne}=t,W=Fh(ne,Y);if(ne.enteringChildren&&W){const{delayChildren:U}=W.transition||{};J.delay=_H(ne.enteringChildren,t,U)}}return{animation:Y,options:J}}))}if(g.size){const w={};if(typeof u.initial!="boolean"){const S=Fh(t,Array.isArray(u.initial)?u.initial[0]:u.initial);S&&S.transition&&(w.transition=S.transition)}g.forEach(S=>{const T=t.getBaseTarget(S),I=t.getValue(S);I&&(I.liveStyle=!0),w[S]=T??null}),h.push({animation:w})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function o(c,u){if(n[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,u)),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=P5()}}}function dme(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!EH(e,t):!1}function Ju(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function P5(){return{animate:Ju(!0),whileInView:Ju(),whileHover:Ju(),whileTap:Ju(),whileDrag:Ju(),whileFocus:Ju(),exit:Ju()}}class xu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class fme extends xu{constructor(e){super(e),e.animationState||(e.animationState=ume(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();N_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let hme=0;class pme extends xu{constructor(){super(...arguments),this.id=hme++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const gme={animation:{Feature:fme},exit:{Feature:pme}};function Iv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function C0(t){return{point:{x:t.pageX,y:t.pageY}}}const mme=t=>e=>lO(e)&&t(e,C0(e));function Gm(t,e,n,r){return Iv(t,e,mme(n),r)}const AH=1e-4,vme=1-AH,yme=1+AH,CH=.01,bme=0-CH,xme=0+CH;function wi(t){return t.max-t.min}function wme(t,e,n){return Math.abs(t-e)<=n}function D5(t,e,n,r=.5){t.origin=r,t.originPoint=Mn(e.min,e.max,t.origin),t.scale=wi(n)/wi(e),t.translate=Mn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=vme&&t.scale<=yme||isNaN(t.scale))&&(t.scale=1),(t.translate>=bme&&t.translate<=xme||isNaN(t.translate))&&(t.translate=0)}function Hm(t,e,n,r){D5(t.x,e.x,n.x,r?r.originX:void 0),D5(t.y,e.y,n.y,r?r.originY:void 0)}function O5(t,e,n){t.min=n.min+e.min,t.max=t.min+wi(e)}function _me(t,e,n){O5(t.x,e.x,n.x),O5(t.y,e.y,n.y)}function N5(t,e,n){t.min=e.min-n.min,t.max=t.min+wi(e)}function Km(t,e,n){N5(t.x,e.x,n.x),N5(t.y,e.y,n.y)}function Va(t){return[t("x"),t("y")]}const IH=({current:t})=>t?t.ownerDocument.defaultView:null,R5=(t,e)=>Math.abs(t-e);function Sme(t,e){const n=R5(t.x,e.x),r=R5(t.y,e.y);return Math.sqrt(n**2+r**2)}class kH{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=PA(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,b=Sme(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!b)return;const{point:x}=g,{timestamp:w}=Yr;this.history.push({...x,timestamp:w});const{onStart:S,onMove:T}=this.handlers;m||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,m)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=kA(m,this.transformPagePoint),Cn.update(this.updatePoint,!0)},this.handlePointerUp=(g,m)=>{this.end();const{onEnd:b,onSessionEnd:x,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=PA(g.type==="pointercancel"?this.lastMoveEventInfo:kA(m,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,S),x&&x(g,S)},!lO(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const o=C0(e),c=kA(o,this.transformPagePoint),{point:u}=c,{timestamp:f}=Yr;this.history=[{...u,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,PA(c,this.history)),this.removeListeners=E0(Gm(this.contextWindow,"pointermove",this.handlePointerMove),Gm(this.contextWindow,"pointerup",this.handlePointerUp),Gm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),su(this.updatePoint)}}function kA(t,e){return e?{point:e(t.point)}:t}function M5(t,e){return{x:t.x-e.x,y:t.y-e.y}}function PA({point:t},e){return{point:t,delta:M5(t,PH(e)),offset:M5(t,Eme(e)),velocity:Tme(e,.1)}}function Eme(t){return t[0]}function PH(t){return t[t.length-1]}function Tme(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=PH(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>xo(e)));)n--;if(!r)return{x:0,y:0};const a=Fa(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Ame(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Mn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Mn(n,t,r.max):Math.min(t,n)),t}function j5(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Cme(t,{top:e,left:n,bottom:r,right:i}){return{x:j5(t.x,n,i),y:j5(t.y,e,r)}}function z5(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Ime(t,e){return{x:z5(t.x,e.x),y:z5(t.y,e.y)}}function kme(t,e){let n=.5;const r=wi(t),i=wi(e);return i>r?n=Sv(e.min,e.max-r,t.min):r>i&&(n=Sv(t.min,t.max-i,e.min)),Tl(0,1,n)}function Pme(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Fk=.35;function Dme(t=Fk){return t===!1?t=0:t===!0&&(t=Fk),{x:L5(t,"left","right"),y:L5(t,"top","bottom")}}function L5(t,e,n){return{min:V5(t,e),max:V5(t,n)}}function V5(t,e){return typeof t=="number"?t:t[e]||0}const Ome=new WeakMap;class Nme{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(C0(h).point)},s=(h,g)=>{const{drag:m,dragPropagation:b,onDragStart:x}=this.getProps();if(m&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fpe(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Va(S=>{let T=this.getAxisMotionValue(S).get()||0;if(wo.test(T)){const{projection:I}=this.visualElement;if(I&&I.layout){const N=I.layout.layoutBox[S];N&&(T=wi(N)*(parseFloat(T)/100))}}this.originPoint[S]=T}),x&&Cn.postRender(()=>x(h,g)),Vk(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:m,dragDirectionLock:b,onDirectionLock:x,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:S}=g;if(b&&this.currentDirection===null){this.currentDirection=Rme(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),w&&w(h,g)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Va(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new kH(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:IH(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Cn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!qb(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=Ame(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Eh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Cme(r.layoutBox,e):this.constraints=!1,this.elastic=Dme(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Va(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Pme(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Eh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=zge(r,i.root,this.visualElement.getTransformPagePoint());let s=Ime(i.layout.layoutBox,a);if(n){const o=n(Rge(s));this.hasMutatedConstraints=!!o,o&&(s=fH(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Va(f=>{if(!qb(f,n,this.currentDirection))return;let h=c&&c[f]||{};s&&(h={min:0,max:0});const g=i?200:1e6,m=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Vk(this.visualElement,e),r.start(bO(e,r,0,n,this.visualElement,!1))}stopAnimation(){Va(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Va(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Va(n=>{const{drag:r}=this.getProps();if(!qb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Mn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Eh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Va(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=kme({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Va(s=>{if(!qb(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(Mn(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;Ome.set(this.visualElement,this);const e=this.visualElement.current,n=Gm(e,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Eh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Cn.read(r);const s=Iv(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Va(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=c[f].translate,h.set(h.get()+c[f].translate))}),this.visualElement.render())}));return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=Fk,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function qb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Rme(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Mme extends xu{constructor(e){super(e),this.removeGroupControls=qa,this.removeListeners=qa,this.controls=new Nme(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qa}unmount(){this.removeGroupControls(),this.removeListeners()}}const B5=t=>(e,n)=>{t&&Cn.postRender(()=>t(e,n))};class jme extends xu{constructor(){super(...arguments),this.removePointerDownListener=qa}onPointerDown(e){this.session=new kH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:IH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:B5(e),onStart:B5(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Cn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Gm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function F5(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const lm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(st.test(t))t=parseFloat(t);else return t;const n=F5(t,e.target.x),r=F5(t,e.target.y);return`${n}% ${r}%`}},zme={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ou.parse(t);if(i.length>5)return r;const a=ou.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=Mn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};let DA=!1;class Lme extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;lge(Vme),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),DA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Gx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,DA=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Cn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),oO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;DA=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function DH(t){const[e,n]=ZG(),r=A.useContext(VD);return y.jsx(Lme,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(uH),isPresent:e,safeToRemove:n})}const Vme={borderRadius:{...lm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lm,borderTopRightRadius:lm,borderBottomLeftRadius:lm,borderBottomRightRadius:lm,boxShadow:zme};function Bme(t,e,n){const r=oi(t)?t:lp(t);return r.start(bO("",r,e,n)),r.animation}const Fme=(t,e)=>t.depth-e.depth;class Ume{constructor(){this.children=[],this.isDirty=!1}add(e){UD(this.children,e),this.isDirty=!0}remove(e){$D(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Fme),this.isDirty=!1,this.children.forEach(e)}}function $me(t,e){const n=Li.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(su(r),t(a-e))};return Cn.setup(r,!0),()=>su(r)}const OH=["TopLeft","TopRight","BottomLeft","BottomRight"],qme=OH.length,U5=t=>typeof t=="string"?parseFloat(t):t,$5=t=>typeof t=="number"||st.test(t);function Gme(t,e,n,r,i,a){i?(t.opacity=Mn(0,n.opacity??1,Hme(r)),t.opacityExit=Mn(e.opacity??1,0,Kme(r))):a&&(t.opacity=Mn(e.opacity??1,n.opacity??1,r));for(let s=0;s<qme;s++){const o=`border${OH[s]}Radius`;let c=q5(e,o),u=q5(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||$5(c)===$5(u)?(t[o]=Math.max(Mn(U5(c),U5(u),r),0),(wo.test(u)||wo.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Mn(e.rotate||0,n.rotate||0,r))}function q5(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Hme=NH(0,.5,yG),Kme=NH(.5,.95,qa);function NH(t,e,n){return r=>r<t?0:r>e?1:n(Sv(t,e,r))}function G5(t,e){t.min=e.min,t.max=e.max}function Na(t,e){G5(t.x,e.x),G5(t.y,e.y)}function H5(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function K5(t,e,n,r,i){return t-=e,t=L1(t,1/n,r),i!==void 0&&(t=L1(t,1/i,r)),t}function Wme(t,e=0,n=1,r=.5,i,a=t,s=t){if(wo.test(e)&&(e=parseFloat(e),e=Mn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Mn(a.min,a.max,r);t===a&&(o-=e),t.min=K5(t.min,e,n,o,i),t.max=K5(t.max,e,n,o,i)}function W5(t,e,[n,r,i],a,s){Wme(t,e[n],e[r],e[i],e.scale,a,s)}const Yme=["x","scaleX","originX"],Xme=["y","scaleY","originY"];function Y5(t,e,n,r){W5(t.x,e,Yme,n?n.x:void 0,r?r.x:void 0),W5(t.y,e,Xme,n?n.y:void 0,r?r.y:void 0)}function X5(t){return t.translate===0&&t.scale===1}function RH(t){return X5(t.x)&&X5(t.y)}function Q5(t,e){return t.min===e.min&&t.max===e.max}function Qme(t,e){return Q5(t.x,e.x)&&Q5(t.y,e.y)}function Z5(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function MH(t,e){return Z5(t.x,e.x)&&Z5(t.y,e.y)}function J5(t){return wi(t.x)/wi(t.y)}function eV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Zme{constructor(){this.members=[]}add(e){UD(this.members,e),e.scheduleRender()}remove(e){if($D(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Jme(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:g,skewX:m,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),g&&(r+=`rotateY(${g}deg) `),m&&(r+=`skewX(${m}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const OA=["","X","Y","Z"],eve=1e3;let tve=0;function NA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function jH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Cn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&jH(r)}function zH({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=tve++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ive),this.nodes.forEach(lve),this.nodes.forEach(cve),this.nodes.forEach(ave)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ume)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new HD),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=QG(s)&&!Kpe(s),this.instance=s;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const g=()=>this.root.updateBlockedByResize=!1;Cn.read(()=>{h=window.innerWidth}),t(s,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,f&&f(),f=$me(g,250),Gx.hasAnimatedSinceResize&&(Gx.hasAnimatedSinceResize=!1,this.nodes.forEach(rV)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||pve,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),S=!this.targetLayout||!MH(this.targetLayout,m),T=!h&&g;if(this.options.layoutRoot||this.resumeFrom||T||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...aO(b,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(f,T)}else h||rV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),su(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uve),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(nV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ove),this.nodes.forEach(nve),this.nodes.forEach(rve)):this.nodes.forEach(nV),this.clearAllSnapshots();const o=Li.now();Yr.delta=Tl(0,1e3/60,o-Yr.timestamp),Yr.timestamp=o,Yr.isProcessing=!0,wA.update.process(Yr),wA.preRender.process(Yr),wA.render.process(Yr),Yr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,oO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sve),this.sharedNodes.forEach(dve)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wi(this.snapshot.measuredBox.x)&&!wi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!RH(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||rd(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),gve(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Xn();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(mve))){const{scroll:u}=this.root;u&&(Th(o.x,u.offset.x),Th(o.y,u.offset.y))}return o}removeElementScroll(s){const o=Xn();if(Na(o,s),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Na(o,s),Th(o.x,f.offset.x),Th(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const c=Xn();Na(c,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ah(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),rd(f.latestValues)&&Ah(c,f.latestValues)}return rd(this.latestValues)&&Ah(c,this.latestValues),c}removeTransform(s){const o=Xn();Na(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!rd(u.latestValues))continue;Mk(u.latestValues)&&u.updateSnapshot();const f=Xn(),h=u.measurePageBox();Na(f,h),Y5(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return rd(this.latestValues)&&Y5(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(s||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Yr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),Km(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Na(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xn(),this.targetWithTransforms=Xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_me(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Na(this.target,this.layout.layoutBox),pH(this.target,this.targetDelta)):Na(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),Km(this.relativeTargetOrigin,this.target,g.target),Na(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Mk(this.parent.latestValues)||hH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Yr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Na(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;jge(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Xn());const{target:m}=s;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(H5(this.prevProjectionDelta.x,this.projectionDelta.x),H5(this.prevProjectionDelta.y,this.projectionDelta.y)),Hm(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!eV(this.projectionDelta.x,this.prevProjectionDelta.x)||!eV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ch(),this.projectionDelta=Ch(),this.projectionDeltaWithTransform=Ch()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},h=Ch();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Xn(),m=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=m!==b,w=this.getStack(),S=!w||w.members.length<=1,T=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(hve));this.animationProgress=0;let I;this.mixTargetDelta=N=>{const O=N/1e3;iV(h.x,s.x,O),iV(h.y,s.y,O),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Km(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fve(this.relativeTarget,this.relativeTargetOrigin,g,O),I&&Qme(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Xn()),Na(I,this.relativeTarget)),x&&(this.animationValues=f,Gme(f,u,this.latestValues,O,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(su(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Cn.update(()=>{Gx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=lp(0)),this.currentAnimation=Bme(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(eve),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:f}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&LH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Xn();const h=wi(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+h;const g=wi(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+g}Na(o,c),Ah(o,f),Hm(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Zme),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&NA("z",s,u,this.animationValues);for(let f=0;f<OA.length;f++)NA(`rotate${OA[f]}`,s,u,this.animationValues),NA(`skew${OA[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=qx(o?.pointerEvents)||"",s.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=qx(o?.pointerEvents)||""),this.hasProjected&&!rd(this.latestValues)&&(s.transform=c?c({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Jme(this.projectionDeltaWithTransform,this.treeScale,f);c&&(h=c(f,h)),s.transform=h;const{x:g,y:m}=this.projectionDelta;s.transformOrigin=`${g.origin*100}% ${m.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in Cv){if(f[b]===void 0)continue;const{correct:x,applyTo:w,isCSSVariable:S}=Cv[b],T=h==="none"?f[b]:x(f[b],u);if(w){const I=w.length;for(let N=0;N<I;N++)s[w[N]]=T}else S?this.options.visualElement.renderState.vars[b]=T:s[b]=T}this.options.layoutId&&(s.pointerEvents=u===this?qx(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(tV),this.root.sharedNodes.clear()}}}function nve(t){t.updateLayout()}function rve(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Va(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=wi(h);h.min=n[f].min,h.max=h.min+g}):LH(i,e.layoutBox,n)&&Va(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],g=wi(n[f]);h.max=h.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const s=Ch();Hm(s,n,e.layoutBox);const o=Ch();a?Hm(o,t.applyTransform(r,!0),e.measuredBox):Hm(o,n,e.layoutBox);const c=!RH(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:g}=f;if(h&&g){const m=Xn();Km(m,e.layoutBox,h.layoutBox);const b=Xn();Km(b,n,g.layoutBox),MH(m,b)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function ive(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ave(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sve(t){t.clearSnapshot()}function tV(t){t.clearMeasurements()}function nV(t){t.isLayoutDirty=!1}function ove(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function lve(t){t.resolveTargetDelta()}function cve(t){t.calcProjection()}function uve(t){t.resetSkewAndRotation()}function dve(t){t.removeLeadSnapshot()}function iV(t,e,n){t.translate=Mn(e.translate,0,n),t.scale=Mn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function aV(t,e,n,r){t.min=Mn(e.min,n.min,r),t.max=Mn(e.max,n.max,r)}function fve(t,e,n,r){aV(t.x,e.x,n.x,r),aV(t.y,e.y,n.y,r)}function hve(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const pve={duration:.45,ease:[.4,0,.1,1]},sV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),oV=sV("applewebkit/")&&!sV("chrome/")?Math.round:qa;function lV(t){t.min=oV(t.min),t.max=oV(t.max)}function gve(t){lV(t.x),lV(t.y)}function LH(t,e,n){return t==="position"||t==="preserve-aspect"&&!wme(J5(e),J5(n),.2)}function mve(t){return t!==t.root&&t.scroll?.wasRoot}const vve=zH({attachResizeListener:(t,e)=>Iv(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),RA={current:void 0},VH=zH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!RA.current){const t=new vve({});t.mount(window),t.setOptions({layoutScroll:!0}),RA.current=t}return RA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yve={pan:{Feature:jme},drag:{Feature:Mme,ProjectionNode:VH,MeasureLayout:DH}};function cV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Cn.postRender(()=>a(e,C0(e)))}class bve extends xu{mount(){const{current:e}=this.node;e&&(this.unmount=Upe(e,(n,r)=>(cV(this.node,r,"Start"),i=>cV(this.node,i,"End"))))}unmount(){}}class xve extends xu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=E0(Iv(this.node.current,"focus",()=>this.onFocus()),Iv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Cn.postRender(()=>a(e,C0(e)))}class wve extends xu{mount(){const{current:e}=this.node;e&&(this.unmount=Hpe(e,(n,r)=>(uV(this.node,r,"Start"),(i,{success:a})=>uV(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Uk=new WeakMap,MA=new WeakMap,_ve=t=>{const e=Uk.get(t.target);e&&e(t)},Sve=t=>{t.forEach(_ve)};function Eve({root:t,...e}){const n=t||document;MA.has(n)||MA.set(n,{});const r=MA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Sve,{root:t,...e})),r[i]}function Tve(t,e,n){const r=Eve(e);return Uk.set(t,n),r.observe(t),()=>{Uk.delete(t),r.unobserve(t)}}const Ave={some:0,all:1};class Cve extends xu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Ave[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),g=u?f:h;g&&g(c)};return Tve(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Ive(e,n))&&this.startObserver()}unmount(){}}function Ive({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const kve={inView:{Feature:Cve},tap:{Feature:wve},focus:{Feature:xve},hover:{Feature:bve}},Pve={layout:{ProjectionNode:VH,MeasureLayout:DH}},Dve={...gme,...kve,...yve,...Pve},Gn=Nge(Dve,Hge);function Ove(t){t.values.forEach(e=>e.stop())}function $k(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&yO(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{$k(a,e)})})}function Nve(t,e){if(Array.isArray(e))return $k(t,e);if(typeof e=="string")return $k(t,[e]);yO(t,e)}function Rve(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(SH(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{Nve(r,n)})},stop(){t.forEach(n=>{Ove(n)})},mount(){return()=>{e.stop()}}};return e}function Mve(){const t=P_(Rve);return FD(t.mount,[]),t}const jve=Mve,df=L2((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),zve=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=df(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return y.jsx(ba,{children:n&&y.jsx(Gn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:y.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[y.jsx("div",{className:"flex items-center flex-1 min-w-0",children:y.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),y.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&y.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[y.jsx(ece,{size:12,className:"inline mr-1"}),"Undo"]}),y.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:y.jsx(a_,{size:14})})]})]})})})};class ra extends A.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:y.jsx(Vh,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[y.jsx(av,{className:"h-4 w-4"}),"Try Again"]}),y.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[y.jsx(_le,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Lve=({onAddTransaction:t})=>{const e=es(),n=Ms(),[r,i]=A.useState(!1),a=A.useRef(null),s=u=>n.pathname===u;A.useEffect(()=>{const u=f=>{a.current&&!a.current.contains(f.target)&&i(!1)};if(r)return document.addEventListener("mousedown",u),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mousedown",u),document.removeEventListener("touchstart",u)}},[r]);const o=[{path:"/reports",icon:y.jsx(P$,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:y.jsx(h1,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:y.jsx(Yoe,{className:"w-5 h-5"}),label:"Budget Breakdown"}],c=({path:u,icon:f,label:h})=>{const g=s(u);return y.jsxs("button",{onClick:m=>{m.stopPropagation(),e(u)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${g?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[y.jsx("div",{className:`transition-transform duration-300 ${g?"scale-110":"group-hover:scale-105"}`,children:f}),y.jsx("span",{className:"sr-only",children:h}),g&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return y.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:y.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:[y.jsx(c,{path:"/",label:"Budget",icon:y.jsx(i_,{className:"w-6 h-6"})}),y.jsx(c,{path:"/transactions",label:"Transactions",icon:y.jsx(Ele,{className:"w-6 h-6"})}),y.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),y.jsx("button",{onClick:u=>{if(u.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:y.jsx(c0,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),y.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),y.jsxs("div",{className:"relative",ref:a,children:[y.jsxs("button",{onClick:u=>{u.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[y.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:y.jsx(dle,{className:"w-6 h-6"})}),y.jsx("span",{className:"sr-only",children:"More"}),r&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&y.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:u=>u.stopPropagation(),onTouchStart:u=>u.stopPropagation(),onTouchEnd:u=>u.stopPropagation(),children:y.jsx("div",{className:"p-2 space-y-1",children:o.map((u,f)=>y.jsxs("button",{onClick:h=>{h.stopPropagation(),e(u.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[y.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:u.icon}),y.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:u.label})]},f))})})]}),y.jsx(c,{path:"/settings",label:"Settings",icon:y.jsx($le,{className:"w-6 h-6"})})]})})};function Vve(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Bve(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function pl(t,e){return function(n){n&&(t[e]=n)}}function BH(t,e,n){return function(r){r&&(t[e][n]=r)}}function dV(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function Fve(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var s,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];var u=(s=this[r])[i].apply(s,o);return u===this[r]?this:u})})}}var Uve="function",$ve="object",qve="string",Gve="number",xO="undefined",FH=typeof window!==xO,Hve=typeof document!==xO&&document,Kve=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],dr=1e-7,Gb={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function Wve(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function V1(t,e,n,r){return(t*r+e*n)/(n+r)}function M_(t){return typeof t===xO}function Ps(t){return t&&typeof t===$ve}function gr(t){return Array.isArray(t)}function Ui(t){return typeof t===qve}function up(t){return typeof t===Gve}function wO(t){return typeof t===Uve}function Yve(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function UH(t,e,n,r,i){var a=_O(t,e,n);return a?n:Xve(t,e,n+1,r,i)}function _O(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Xve(t,e,n,r,i){for(var a=function(u){var f=e[u].trim();if(f===t.close&&!_O(t,e,u))return{value:u};var h=u,g=$i(i,function(m){var b=m.open;return b===f});if(g&&(h=UH(g,e,u,r,i)),h===-1)return s=u,"break";u=h,s=u},s,o=n;o<r;++o){var c=a(o);if(o=s,typeof c=="object")return c.value;if(c==="break")break}return-1}function SO(t,e){var n=Ui(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,c=o===void 0?s:o,u=n.openCloseCharacters,f=u===void 0?Kve:u,h=f.map(function(k){var P=k.open,R=k.close;return P===R?P:P+"|"+R}).join("|"),g="(\\s*"+i+"\\s*|"+h+"|\\s+)",m=new RegExp(g,"g"),b=t.split(m).filter(function(k){return k&&k!=="undefined"}),x=b.length,w=[],S=[];function T(){return S.length?(w.push(S.join("")),S=[],!0):!1}for(var I=function(k){var P=b[k].trim(),R=k,j=$i(f,function(L){var K=L.open;return K===P}),z=$i(f,function(L){var K=L.close;return K===P});if(j){if(R=UH(j,b,k,x,f),R!==-1&&c)return T()&&a||(w.push(b.slice(k,R+1).join("")),k=R,a)?(N=k,"break"):(N=k,"continue")}else if(z&&!_O(z,b,k)){var B=Wve(f);return B.splice(f.indexOf(z),1),{value:SO(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:s,isSeparateOpenClose:c,openCloseCharacters:B})}}else if(Yve(P,i)&&!s)return T(),a?(N=k,"break"):(N=k,"continue");R===-1&&(R=x-1),S.push(b.slice(k,R+1).join("")),k=R,N=k},N,O=0;O<x;++O){var D=I(O);if(O=N,typeof D=="object")return D.value;if(D==="break")break}return S.length&&w.push(S.join("")),w}function lu(t){return SO(t,"")}function xd(t){return SO(t,",")}function $H(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function I0(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Qve(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function Hx(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function kv(){return Date.now?Date.now():new Date().getTime()}function Cl(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function $i(t,e,n){var r=Cl(t,e);return r>-1?t[r]:n}var qH=(function(){var t=kv(),e=FH&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=kv(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),Zve=(function(){var t=FH&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function Il(t){return Object.keys(t)}function Jve(t){var e=Il(t);return e.map(function(n){return t[n]})}function an(t,e){var n=I0(t),r=n.value,i=n.unit;if(Ps(e)){var a=e[i];if(a){if(wO(a))return a(r);if(Gb[i])return Gb[i](r,a)}}else if(i==="%")return r*e/100;return Gb[i]?Gb[i](r):r}function qk(t,e,n){return Math.max(e,Math.min(t,n))}function fV(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[ut(e[0],dr),ut(e[0]/r,dr)],[ut(e[1]*r,dr),ut(e[1],dr)]].filter(function(i){return i.every(function(a,s){var o=e[s],c=ut(o,dr);return n?a<=o||a<=c:a>=o||a>=c})})[0]||t}function GH(t,e,n,r){if(!r)return t.map(function(m,b){return qk(m,e[b],n[b])});var i=t[0],a=t[1],s=r===!0?i/a:r,o=fV(t,e,!1,s),c=o[0],u=o[1],f=fV(t,n,!0,s),h=f[0],g=f[1];return i<c||a<u?(i=c,a=u):(i>h||a>g)&&(i=h,a=g),[i,a]}function e0e(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Gk(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Jn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function t0e(t){return[0,1].map(function(e){return Gk(t.map(function(n){return n[e]}))})}function hV(t){var e=t0e(t),n=Jn(e,t[0]),r=Jn(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function gl(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function ut(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function pV(t,e){return t.forEach(function(n,r){t[r]=ut(t[r],e)}),t}function n0e(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function HH(t){return t.reduce(function(e,n){return e.concat(n)},[])}function KH(t,e){t.indexOf(e)===-1&&t.push(e)}function wr(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function WH(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function YH(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Kr(t,e,n,r){t.addEventListener(e,n,r)}function vr(t,e,n,r){t.removeEventListener(e,n,r)}function Fp(t){return t?.ownerDocument||Hve}function EO(t){return Fp(t).documentElement}function wu(t){return Fp(t).body}function Qc(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function XH(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Up(t){return Ps(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var r0e=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,s=i.indexOf(n),o=s===-1?i.length:s;i[o]=n,a[o]=r},t})(),i0e=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),a0e=typeof Map=="function",s0e=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function o0e(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],s=i[1],o=new s0e;n[a]=o,r[s]=o}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var s=i[0],o=i[1];if(s===o)return[0,0];var c=n[s],u=r[o-1],f=c.getIndex();c.disconnect(),u?c.connect(u,u.next):c.connect(void 0,n[0]);var h=c.getIndex();return[f,h]})}var l0e=(function(){function t(n,r,i,a,s,o,c,u){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=s,this.maintained=o,this.changedBeforeAdded=c,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=o0e(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,s){var o=a[0],c=a[1],u=r[s],f=u[0],h=u[1];if(o!==c)return i.push([f,h]),!0}),this.cachePureChanged=i},t})();function k0(t,e,n){var r=a0e?Map:n?i0e:r0e,i=n||function(T){return T},a=[],s=[],o=[],c=t.map(i),u=e.map(i),f=new r,h=new r,g=[],m=[],b={},x=[],w=0,S=0;return c.forEach(function(T,I){f.set(T,I)}),u.forEach(function(T,I){h.set(T,I)}),c.forEach(function(T,I){var N=h.get(T);typeof N>"u"?(++S,s.push(I)):b[N]=S}),u.forEach(function(T,I){var N=f.get(T);typeof N>"u"?(a.push(I),++w):(o.push([N,I]),S=b[I]||0,g.push([N-S,I-w]),m.push(I===N),N!==I&&x.push([N,I]))}),s.reverse(),new l0e(t,e,a,s,x,o,g,m)}var c0e=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=k0(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),Hk=function(t,e){return Hk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Hk(t,e)};function P0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Hk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var uo=function(){return uo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},uo.apply(this,arguments)};function QH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gV(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function mV(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function ZH(t){var e=[];return t.forEach(function(n){e=e.concat(gr(n)?ZH(n):n)}),e}function jA(t,e){if(!e)return t;for(var n in e)M_(t[n])&&(t[n]=e[n]);return t}function B1(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function vV(t){var e=t.className,n=QH(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function yV(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function j_(t){if(!t)return null;var e=t.b;return Up(e)?e:j_(t.c)}function JH(t){var e=t.parentNode;e&&e.removeChild(t)}function eK(t){t.forEach(function(e){e()})}function u0e(){return this.constructor(this.props,this.context)}var TO=0,z_=(function(){function t(n,r,i,a,s,o,c){c===void 0&&(c={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=s,this.ref=o,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,s){var o=this,c=o.d,u=Jve(r).filter(function(b){return b.$_req}),f=ZH(u.map(function(b){return b.$_subs})),h=$i(f,function(b){return b.d===c});if(o.b&&!Ui(i)&&!s&&!o.s(i.props,a)&&!h){var g=f.reduce(function(b,x){var w=x.d;return b[0]?b[0].d===w&&b.push(x):w>c&&b.push(x),b},[]);return g.forEach(function(b){D0(b,b._ps,[b.o],n,r,!0)}),!1}o.o=i,o.ss(a);var m=o.ps;return Ui(i)||(o.ps=i.props,o.ref=i.ref),AO(this),o.r(n,r,o.b?m:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function tK(){return Object.__CROACT_CURRENT_INSTNACE__}function d0e(){return TO}function f0e(t){TO=t}function AO(t){return Object.__CROACT_CURRENT_INSTNACE__=t,TO=0,t}var CO=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=uo(uo({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,s=D0(a.c,[a],[a.o],i,a._cs,uo(uo({},this.state),this.$_state),r);s&&(n&&i.push(n),eK(i),AO(null))},t})(),nK=(function(t){P0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return B1(this.props,r)||B1(this.state,i)},e})(CO);function rK(t){var e=function(n){e.current=n};return e.current=t,e}function h0e(t){return t._fr=!0,t}function p0e(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new CO(e,n),a.constructor=t,t._fr?(r.fr=rK(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=u0e),a.$_p=r,a}var g0e=(function(t){P0(e,t);function e(r,i,a,s,o,c,u){u===void 0&&(u={});var f=t.call(this,r,i,a,s,o,c,jA(u,r.defaultProps))||this;return f.typ="comp",f._usefs=[],f._uefs=[],f._defs=[],f}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(jA(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var s,o,c=this,u=c.t;c.ps=jA(c.ps,c.t.defaultProps);var f=c.ps,h=!c.b,g=u.contextType,m=c.b,b=g?.get(c);c._cs=i,h?(m=p0e(u,f,b,c),c.b=m):(m.props=f,m.context=b);var x=m.state;c._usefs=[],c._uefs=[];var w=m.render();((o=(s=w?.props)===null||s===void 0?void 0:s.children)===null||o===void 0?void 0:o.length)===0&&(w.props.children=c.ps.children);var S=uo(uo({},i),m.$_cs);D0(c,c._ps,w?[w]:[],r,S),h?c._uefs.push(function(){g?.register(c),m.componentDidMount()}):c._uefs.push(function(){m.componentDidUpdate(a,x)}),r.push(function(){c._usefs.forEach(function(T){T()}),h?c.md():c.ud(),c._defs=c._uefs.map(function(T){return T()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(s){s.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(s){s&&s()}),i.b.componentWillUnmount()},e})(z_);function m0e(t,e,n){var r=IO(vV(t),vV(e)),i=r.added,a=r.removed,s=r.changed;for(var o in i)n.setAttribute(o,i[o]);for(var c in s)n.setAttribute(c,s[c][1]);for(var u in a)n.removeAttribute(u)}function v0e(t,e,n){var r=IO(t,e),i=r.added,a=r.removed;for(var s in a)n.e(s,!0);for(var o in i)n.e(o)}function IO(t,e){var n=Il(t),r=Il(e),i=k0(n,r,function(c){return c}),a={},s={},o={};return i.added.forEach(function(c){var u=r[c];a[u]=e[u]}),i.removed.forEach(function(c){var u=n[c];s[u]=t[u]}),i.maintained.forEach(function(c){var u=c[0],f=n[u],h=[t[f],e[f]];t[f]!==e[f]&&(o[f]=h)}),{added:a,removed:s,changed:o}}function y0e(t,e,n){var r=n.style,i=IO(t,e),a=i.added,s=i.removed,o=i.changed;for(var c in a){var u=Hx(c,"-");r.setProperty(u,a[c])}for(var c in o){var f=Hx(c,"-");r.setProperty(f,o[c][1])}for(var c in s){var h=Hx(c,"-");r.removeProperty(h)}}function b0e(t){return t.replace(/^on/g,"").toLowerCase()}var x0e=(function(t){P0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,s=a._es,o=a.b,c=b0e(r);i?(vr(o,c,s[r]),delete s[r]):(s[r]=function(u){var f,h;(h=(f=a.ps)[r])===null||h===void 0||h.call(f,u)},Kr(o,c,s[r]))},n.s=function(r){return B1(this.ps,r)},n.r=function(r,i,a){var s,o=this,c=!o.b,u=o.ps;if(c){var f=j_(o.c),h=!1;o._svg||o.t==="svg"?h=!0:h=f&&f.ownerSVGElement,o._svg=h;var g=(s=o._hyd)===null||s===void 0?void 0:s.splice(0,1)[0],m=o.t;if(g)o._hyd=[].slice.call(g.children||[]);else{var b=Fp(f);h?g=b.createElementNS("http://www.w3.org/2000/svg",m):g=b.createElement(m)}o.b=g}D0(o,o._ps,u.children,r,i);var x=o.b,w=yV(a),S=w[0],T=w[1],I=yV(u),N=I[0],O=I[1];return m0e(S,N,x),v0e(T,O,o),y0e(a.style||{},u.style||{},x),r.push(function(){c?o.md():o.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var s in i)vr(a,s,i[s]);r._ps.forEach(function(o){o.un()}),r._es={},r._sel||JH(a)},e})(z_);function Pv(t){if(!t||Up(t))return t;var e=t.$_p._ps;return e.length?Pv(e[0].b):null}function iK(t){if(t){if(t.b&&Up(t.b))return t;var e=t._ps;return e.length?iK(e[0]):null}}function Es(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,s=i.ref,o=QH(i,["key","ref"]);return{type:t,key:a,ref:s,props:uo(uo({},o),{children:HH(n).filter(function(c){return c!=null&&c!==!1})})}}var aK=(function(t){P0(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(z_),w0e=(function(t){P0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,s=!a.b;if(s){var o=j_(a.c),c=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=c||Fp(o).createTextNode(a.t.replace("text_",""))}return r.push(function(){s?a.md():a.ud()}),!0},n.un=function(){JH(this.b)},e})(z_);function _0e(t,e,n){var r=n.map(function(c){return Ui(c)?null:c.key}),i=mV(e.map(function(c){return c.k})),a=mV(r),s=k0(i,a,function(c){return c});s.removed.forEach(function(c){e.splice(c,1)[0].un()}),s.ordered.forEach(function(c){var u=c[0],f=c[1],h=e.splice(u,1)[0];e.splice(f,0,h);var g=Pv(h.b),m=Pv(e[f+1]&&e[f+1].b);g&&g.parentNode.insertBefore(g,m)}),s.added.forEach(function(c){e.splice(c,0,bV(n[c],r[c],c,t))});var o=s.maintained.filter(function(c){c[0];var u=c[1],f=n[u],h=e[u],g=Ui(f)?"text_".concat(f):f.type;return g!==h.t?(h.un(),e.splice(u,1,bV(f,r[u],u,t)),!0):(h.i=u,!1)});return gV(gV([],s.added,!0),o.map(function(c){c[0];var u=c[1];return u}))}function S0e(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=Pv(n[i].b);if(a)return a}return null}function bV(t,e,n,r){var i=r.d+1;if(Ui(t)||up(t))return new w0e("text_".concat(t),i,e,n,r,null,{});var a=t.type,s=typeof a=="string"?x0e:g0e;return new s(a,i,e,n,r,t.ref,t.props)}function D0(t,e,n,r,i,a,s){var o=_0e(t,e,n),c=t._hyd,u=e.filter(function(h,g){return h._hyd=c,h.u(r,i,n[g],a,s)});t.typ==="container"&&t._sel&&e.forEach(function(h){var g=iK(h);g&&(g._sel=!0)}),t._hyd=null;var f=j_(t);return f&&o.reverse().forEach(function(h){var g=e[h],m=Pv(g.b);if(m&&f!==m&&!m.parentNode){var b=S0e(t,g);f.insertBefore(m,b)}}),u.length>0}function E0e(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new aK(e));var a=[];return D0(n,n._ps,t?[t]:[],a,r,void 0,void 0),eK(a),AO(null),i||(e.__CROACT__=n),n}function xV(t,e,n){return!n&&t&&(n=new aK(e.parentElement),n._hyd=[e],n._sel=!0),E0e(t,e,n),n}function sK(t){var e=tK(),n=e._hs||(e._hs=[]),r=d0e(),i=n[r];if(f0e(r+1),i){if(!B1(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function T0e(t,e){var n=sK({func:t,deps:e});return n.value}function A0e(t){return T0e(function(){return rK(t)},[])}function oK(t,e,n){var r=tK(),i=sK({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function C0e(t,e,n){oK(function(){t?.(e())},n,!0)}function kO(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function lK(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function cK(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function PO(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function I0e(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function k0e(t,e){var n=PO("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Kk(t){return t.replace(/_/g,".")}function Am(t,e){var n=null,r="-1";return kO(t,function(i){var a=PO("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=k0e(i.versionTest.toLowerCase(),e)||r),r=Kk(r),!0)}),{preset:n,version:r}}function Hb(t,e){var n={brand:"",version:"-1"};return kO(t,function(r){var i=uK(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function uK(t,e){return lK(t,function(n){var r=n.brand;return PO(""+e.test,r.toLowerCase())})}var dK=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],fK=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Wk=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],hK=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],pK=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function gK(t){return!!Am(hK,t).preset}function P0e(t){var e=cK(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:gK(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Am(dK,e),s=a.preset,o=a.version,c=Am(pK,e),u=c.preset,f=c.version,h=Am(fK,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var g=Am(Wk,e);r.webkit=!!g.preset,r.webkitVersion=g.version}return u&&(i.name=u.id,i.version=f,i.majorVersion=parseInt(f,10)),s&&(r.name=s.id,r.version=o,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function D0e(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),s={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Hb(hK,n).brand||gK(cK())},o={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&kO(Wk,function(g){return uK(n,g)});var c=Hb(fK,n);if(s.chromium=!!c.brand,s.chromiumVersion=c.version||"-1",!s.chromium){var u=Hb(Wk,n);s.webkit=!!u.brand,s.webkitVersion=u.version||"-1"}var f=lK(pK,function(g){return new RegExp(""+g.test,"g").exec(a)});o.name=f?f.id:"";{var h=Hb(dK,n);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(o.name=r?"ios":"mac"),o.name==="ios"&&s.webview&&(s.version="-1"),o.version=Kk(o.version),s.version=Kk(s.version),o.majorVersion=parseInt(o.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:o,isMobile:r,isHints:!0}}function O0e(t){return I0e()?D0e():P0e(t)}function N0e(t,e,n,r,i,a){for(var s=0;s<i;++s){var o=n+s*i,c=r+s*i;t[o]+=t[c]*a,e[o]+=e[c]*a}}function R0e(t,e,n,r,i){for(var a=0;a<i;++a){var s=n+a*i,o=r+a*i,c=t[s],u=e[s];t[s]=t[o],t[o]=c,e[s]=e[o],e[o]=u}}function M0e(t,e,n,r,i){for(var a=0;a<r;++a){var s=n+a*r;t[s]/=i,e[s]/=i}}function mK(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function Ao(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=vn(e),i=0;i<e;++i){var a=e*i+i;if(!ut(n[a],dr)){for(var s=i+1;s<e;++s)if(n[e*i+s]){R0e(n,r,i,s,e);break}}if(!ut(n[a],dr))return[];M0e(n,r,i,e,n[a]);for(var s=0;s<e;++s){var o=s,c=s+i*e,u=n[c];!ut(u,dr)||i===s||N0e(n,r,o,i,e,-u)}}return r}function j0e(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function vK(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function z0e(t,e){for(var n=vn(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Kd(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Ds(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=vn(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var s=0;s<i-1;++s)r[a*n+s]=t[a*e+s];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function F1(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=vn(t);return e.forEach(function(i){r=on(r,i,t)}),r}function on(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<a;++o){r[o*n+s]=0;for(var c=0;c<i;++c)r[o*n+s]+=t[c*n+s]*e[o*i+c]}return r}function Rt(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function et(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function L0e(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function yK(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function ui(t,e,n){n===void 0&&(n=e.length);var r=on(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function V0e(t,e){return on(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function B0e(t,e){return on(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function F0e(t,e){return on(t,N0(e,4))}function Kb(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,s=e[2],o=s===void 0?1:s;return on(t,[r,0,0,0,0,a,0,0,0,0,o,0,0,0,0,1],4)}function O0(t,e){return ui(N0(e,3),Kd(t,3))}function zA(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,s=e[2],o=s===void 0?0:s;return on(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,o,1],4)}function wV(t,e){return on(t,e,4)}function N0(t,e){var n=Math.cos(t),r=Math.sin(t),i=vn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function vn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function DO(t,e){for(var n=vn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Wd(t,e){for(var n=vn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function OO(t,e,n,r,i,a,s,o){var c=t[0],u=t[1],f=e[0],h=e[1],g=n[0],m=n[1],b=r[0],x=r[1],w=i[0],S=i[1],T=a[0],I=a[1],N=s[0],O=s[1],D=o[0],k=o[1],P=[c,0,f,0,g,0,b,0,u,0,h,0,m,0,x,0,1,0,1,0,1,0,1,0,0,c,0,f,0,g,0,b,0,u,0,h,0,m,0,x,0,1,0,1,0,1,0,1,-w*c,-S*c,-T*f,-I*f,-N*g,-O*g,-D*b,-k*b,-w*u,-S*u,-T*h,-I*h,-N*m,-O*m,-D*x,-k*x],R=Ao(P,8);if(!R.length)return[];var j=on(R,[w,S,T,I,N,O,D,k],8);return j[8]=1,Ds(j0e(j),3,4)}var Wm=function(){return Wm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wm.apply(this,arguments)};function U0e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Dv(t,e){return e===void 0&&(e=0),xh(dp(t,e))}function $0e(t,e){var n=ui(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function xh(t){var e=U0e();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function dp(t,e){e===void 0&&(e=0);var n=gr(t)?t:lu(t);return n.map(function(r){var i=$H(r),a=i.prefix,s=i.value,o=null,c=a,u="";if(a==="translate"||a==="translateX"||a==="translate3d"){var f=Ps(e)?Wm(Wm({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=xd(s).map(function(L,K){return K===0&&"x%"in f?f["%"]=e["x%"]:K===1&&"y%"in f?f["%"]=e["y%"]:f["%"]=e["o%"],an(L,f)}),g=h[0],m=h[1],b=m===void 0?0:m,x=h[2],w=x===void 0?0:x;o=zA,u=[g,b,w]}else if(a==="translateY"){var S=Ps(e)?Wm({"%":e["y%"]},e):{"%":e},b=an(s,S);o=zA,u=[0,b,0]}else if(a==="translateZ"){var w=parseFloat(s);o=zA,u=[0,0,w]}else if(a==="scale"||a==="scale3d"){var T=xd(s).map(function(L){return parseFloat(L)}),I=T[0],N=T[1],O=N===void 0?I:N,D=T[2],k=D===void 0?1:D;o=Kb,u=[I,O,k]}else if(a==="scaleX"){var I=parseFloat(s);o=Kb,u=[I,1,1]}else if(a==="scaleY"){var O=parseFloat(s);o=Kb,u=[1,O,1]}else if(a==="scaleZ"){var k=parseFloat(s);o=Kb,u=[1,1,k]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var P=I0(s),R=P.unit,j=P.value,z=R==="rad"?j:j*Math.PI/180;a==="rotate"||a==="rotateZ"?(c="rotateZ",o=F0e):a==="rotateX"?o=V0e:a==="rotateY"&&(o=B0e),u=z}else if(a==="matrix3d")o=wV,u=xd(s).map(function(L){return parseFloat(L)});else if(a==="matrix"){var B=xd(s).map(function(L){return parseFloat(L)});o=wV,u=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else c="";return{name:a,functionName:c,value:s,matrixFunction:o,functionValue:u}})}var Yk=function(t,e){return Yk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Yk(t,e)};function q0e(t,e){Yk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bK=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),xK=(function(t){q0e(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,bK)||this}return e})(c0e);function G0e(t,e){return k0(t,e,bK)}var Xk=function(){return Xk=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xk.apply(this,arguments)};function H0e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}var L_=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Ps(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Ps(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var s=Cl(a,function(o){return o.listener===r});s>-1&&a.splice(s,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,H0e(a).forEach(function(o){o.listener(r),o.once&&i.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var s=a[n];s.push(Xk({listener:r},i))},t})();var Qk=function(t,e){return Qk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Qk(t,e)};function K0e(t,e){Qk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ih=function(){return Ih=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ih.apply(this,arguments)};function W0e(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function _V(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Wb(t){if(t){if(Ui(t))return document.querySelector(t)}else return null;if(wO(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Y0e=(function(t){K0e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=Wb(i.container);if(!a){this._flag=!1;return}var s=0,o=0,c=0,u=0;if(a===document.body)c=window.innerWidth,u=window.innerHeight;else{var f=a.getBoundingClientRect();s=f.top,o=f.left,c=f.width,u=f.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:c,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,s=r.clientY,o=i.threshold,c=o===void 0?0:o,u=this,f=u._startRect,h=u._startPos;this._currentOptions=i;var g=[0,0];return f.top>s-c?(h[1]>f.top||s<h[1])&&(g[1]=-1):f.top+f.height<s+c&&(h[1]<f.top+f.height||s>h[1])&&(g[1]=1),f.left>a-c?(h[0]>f.left||a<h[0])&&(g[0]=-1):f.left+f.width<a+c&&(h[0]<f.left+f.width||a>h[0])&&(g[0]=1),!g[0]&&!g[1]?!1:this._continueDrag(Ih(Ih({},i),{direction:g,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,s=a===void 0?this._prevScrollPos:a,o=r.direction,c=r.throttleTime,u=c===void 0?0:c,f=r.inputEvent,h=r.isDrag,g=this._getScrollPosition(o||[0,0],r),m=g[0]-s[0],b=g[1]-s[1],x=o||[m?Math.abs(m)/m:0,b?Math.abs(b)/b:0];return this._prevScrollPos=g,this._lock=!1,!m&&!b?!1:(this.emit("move",{offsetX:x[0]?m:0,offsetY:x[1]?b:0,inputEvent:f}),u&&h&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,s=i.getScrollPosition,o=s===void 0?W0e:s;return o({container:Wb(a),direction:r})},n._continueDrag=function(r){var i=this,a,s=r.container,o=r.direction,c=r.throttleTime,u=r.useScroll,f=r.isDrag,h=r.inputEvent;if(!(!this._flag||f&&this._isWait)){var g=kv(),m=Math.max(c+this._prevTime-g,0);if(m>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},m),!1;this._prevTime=g;var b=this._getScrollPosition(o,r);this._prevScrollPos=b,f&&(this._isWait=!0),u||(this._lock=!0);var x={container:Wb(s),direction:o,inputEvent:h};return(a=r.requestScroll)===null||a===void 0||a.call(r,x),this.emit("scroll",x),this._isWait=!1,u||this.checkScroll(Ih(Ih({},r),{prevScrollPos:b,direction:o,inputEvent:h}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?_V:i,s=Wb(r.container);i===!0&&(s===document.body||s===document.documentElement)?this._unregister=_V(window,this._onScroll):this._unregister=a(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(L_);function X0e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function Mi(t){return ut(t,dr)}function Q0e(t,e){return t.every(function(n,r){return Mi(n-e[r])===0})}function Z0e(t,e){return!Mi(t[0]-e[0])&&!Mi(t[1]-e[1])}function wK(t){return t.length<3?0:Math.abs(e0e(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function SV(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,s=Yd(t),o=s.minX,c=s.minY,u=s.maxX,f=s.maxY,h=n/(u-o),g=r/(f-c);return t.map(function(m){return[i+(m[0]-o)*h,a+(m[1]-c)*g]})}function Yd(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Zk(t,e,n){var r=t[0],i=t[1],a=Yd(e),s=a.minX,o=a.maxX,c=[[s,i],[o,i]],u=U1(c[0],c[1]),f=Jk(e),h=[];if(f.forEach(function(b){var x=U1(b[0],b[1]),w=b[0];if(Q0e(u,x))h.push({pos:t,line:b,type:"line"});else{var S=_K(NO(u,x),[c,b]);S.forEach(function(T){b.some(function(I){return Z0e(I,T)})?h.push({pos:T,line:b,type:"point"}):Mi(w[1]-i)!==0&&h.push({pos:T,line:b,type:"intersection"})})}}),$i(h,function(b){return b[0]===r}))return!0;var g=0,m={};return h.forEach(function(b){var x=b.pos,w=b.type,S=b.line;if(!(x[0]>r))if(w==="intersection")++g;else{if(w==="line")return;if(w==="point"){var T=$i(S,function(O){return O[1]!==i}),I=m[x[0]],N=T[1]>i?1:-1;I?I!==N&&++g:m[x[0]]=N}}}),g%2===1}function U1(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],s=i-n,o=a-r;Math.abs(s)<dr&&(s=0),Math.abs(o)<dr&&(o=0);var c=0,u=0,f=0;return s?o?(c=-o/s,u=1,f=-c*n-r):(u=1,f=-r):o&&(c=-1,f=n),[c,u,f]}function NO(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],s=e[1],o=e[2],c=n===0&&a===0,u=r===0&&s===0,f=[];if(c&&u)return[];if(c){var h=-i/r,g=-o/s;return h!==g?[]:[[-1/0,h],[1/0,h]]}else if(u){var m=-i/n,b=-o/a;return m!==b?[]:[[m,-1/0],[m,1/0]]}else if(n===0){var x=-i/r,w=-(s*x+o)/a;f=[[w,x]]}else if(a===0){var x=-o/s,w=-(r*x+i)/n;f=[[w,x]]}else if(r===0){var w=-i/n,x=-(a*w+o)/s;f=[[w,x]]}else if(s===0){var w=-o/a,x=-(n*w+i)/r;f=[[w,x]]}else{var w=(r*o-s*i)/(s*n-r*a),x=-(n*w+i)/r;f=[[w,x]]}return f.map(function(S){return[S[0],S[1]]})}function _K(t,e){var n=e.map(function(h){return[0,1].map(function(g){return[Math.min(h[0][g],h[1][g]),Math.max(h[0][g],h[1][g])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],s=i[1];if(Mi(a-t[1][0])){if(!Mi(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(h){return h[0][0]})),f=Math.min.apply(Math,n.map(function(h){return h[0][1]}));if(Mi(u-f)>0)return[];r=[[u,s],[f,s]]}}else{var o=Math.max.apply(Math,n.map(function(h){return h[1][0]})),c=Math.min.apply(Math,n.map(function(h){return h[1][1]}));if(Mi(o-c)>0)return[];r=[[a,o],[a,c]]}}return r.length||(r=t.filter(function(h){var g=h[0],m=h[1];return n.every(function(b){return 0<=Mi(g-b[0][0])&&0<=Mi(b[0][1]-g)&&0<=Mi(m-b[1][0])&&0<=Mi(b[1][1]-m)})})),r.map(function(h){return[Mi(h[0]),Mi(h[1])]})}function Jk(t){return X0e(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function J0e(t,e){var n=t.slice(),r=e.slice();hV(n)===-1&&n.reverse(),hV(r)===-1&&r.reverse();var i=Jk(n),a=Jk(r),s=i.map(function(f){return U1(f[0],f[1])}),o=a.map(function(f){return U1(f[0],f[1])}),c=[];s.forEach(function(f,h){var g=i[h],m=[];o.forEach(function(b,x){var w=NO(f,b),S=_K(w,[g,a[x]]);m.push.apply(m,S.map(function(T){return{index1:h,index2:x,pos:T,type:"intersection"}}))}),m.sort(function(b,x){return gl(g[0],b.pos)-gl(g[0],x.pos)}),c.push.apply(c,m),Zk(g[1],r)&&c.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),a.forEach(function(f,h){if(Zk(f[1],n)){var g=!1,m=Cl(c,function(b){var x=b.index2;return x===h?(g=!0,!1):!!g});m===-1&&(g=!1,m=Cl(c,function(b){var x=b.index1,w=b.index2;return x===-1&&w+1===h?(g=!0,!1):!!g})),m===-1?c.push({index1:-1,index2:h,pos:f[1],type:"inside"}):c.splice(m,0,{index1:-1,index2:h,pos:f[1],type:"inside"})}});var u={};return c.filter(function(f){var h=f.pos,g=h[0]+"x"+h[1];return u[g]?!1:(u[g]=!0,!0)})}function eye(t,e){var n=J0e(t,e);return n.map(function(r){var i=r.pos;return i})}function tye(t,e){var n=eye(t,e);return wK(n)}var eP=function(t,e){return eP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},eP(t,e)};function nye(t,e){eP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var or=function(){return or=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},or.apply(this,arguments)};function rye(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function LA(t){return rye([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function iye(t){return t.touches&&t.touches.length>=2}function Yb(t){return t?t.touches?sye(t.touches):[SK(t)]:[]}function aye(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function EV(t,e,n){var r=n.length,i=Ym(t,r),a=i.clientX,s=i.clientY,o=i.originalClientX,c=i.originalClientY,u=Ym(e,r),f=u.clientX,h=u.clientY,g=Ym(n,r),m=g.clientX,b=g.clientY,x=a-f,w=s-h,S=a-m,T=s-b;return{clientX:o,clientY:c,deltaX:x,deltaY:w,distX:S,distY:T}}function VA(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function sye(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(SK(t[r]));return n}function SK(t){return{clientX:t.clientX,clientY:t.clientY}}function Ym(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var BA=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),LA(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),LA(e)-LA(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=EV(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],s=0;s<i;++s)a[s]=EV([e[s]],[n[s]],[r[s]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=Ym(e,this.length),i=Ym(this.prevClients,this.length),a=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(a*a+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),VA(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),VA(e)/VA(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),TV=["textarea","input"],oye=(function(t){nye(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(g,m){if(m===void 0&&(m=!0),!(!i.flag&&g.cancelable===!1)){var b=g.type.indexOf("drag")>=-1;if(!(i.flag&&b)){i._isDragAPI=!0;var x=i.options,w=x.container,S=x.pinchOutside,T=x.preventWheelClick,I=x.preventRightClick,N=x.preventDefault,O=x.checkInput,D=x.dragFocusedInput,k=x.preventClickEventOnDragStart,P=x.preventClickEventOnDrag,R=x.preventClickEventByCondition,j=i._useTouch,z=!i.flag;if(i._isSecondaryButton=g.which===3||g.button===2,T&&(g.which===2||g.button===1)||I&&(g.which===3||g.button===2))return i.stop(),!1;if(z){var B=i._window.document.activeElement,L=g.target;if(L){var K=L.tagName.toLowerCase(),Q=TV.indexOf(K)>-1,q=L.isContentEditable;if(Q||q){if(O||!D&&B===L)return!1;if(B&&(B===L||q&&B.isContentEditable&&B.contains(L)))if(D)L.blur();else return!1}else if((N||g.type==="touchstart")&&B){var Y=B.tagName.toLowerCase();(B.isContentEditable||TV.indexOf(Y)>-1)&&B.blur()}(k||P||R)&&Kr(i._window,"click",i._onClick,!0)}i.clientStores=[new BA(Yb(g))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=m,i._dragFlag=!0,i._prevInputEvent=g,i.data={},i.doubleFlag=kv()-i.prevTime<200,i._isMouseEvent=aye(g),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var J=i._preventMouseEvent||i.emit("dragStart",or(or({data:i.data,datas:i.data,inputEvent:g,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:m,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){g.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));J===!1&&i.stop(),i._isMouseEvent&&i.flag&&N&&g.preventDefault()}if(!i.flag)return!1;var ne=0;if(z?(i._attchDragEvent(),j&&S&&(ne=setTimeout(function(){Kr(w,"touchstart",i.onDragStart,{passive:!1})}))):j&&S&&vr(w,"touchstart",i.onDragStart),i.flag&&iye(g)){if(clearTimeout(ne),z&&g.touches.length!==g.changedTouches.length)return;i.pinchFlag||i.onPinchStart(g)}}}},i.onDrag=function(g,m){if(i.flag){var b=i.options.preventDefault;!i._isMouseEvent&&b&&g.preventDefault(),i._prevInputEvent=g;var x=Yb(g),w=i.moveClients(x,g,!1);if(i._dragFlag){if(i.pinchFlag||w.deltaX||w.deltaY){var S=i._preventMouseEvent||i.emit("drag",or(or({},w),{isScroll:!!m,inputEvent:g}));if(S===!1){i.stop();return}}i.pinchFlag&&i.onPinch(g,x)}i.getCurrentStore().getPosition(x,!0)}},i.onDragEnd=function(g){if(i.flag){var m=i.options,b=m.pinchOutside,x=m.container,w=m.preventClickEventOnDrag,S=m.preventClickEventOnDragStart,T=m.preventClickEventByCondition,I=i.isDrag;(w||S||T)&&requestAnimationFrame(function(){i._allowClickEvent()}),!T&&!S&&w&&!I&&i._allowClickEvent(),i._useTouch&&b&&vr(x,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(g);var N=g?.touches?Yb(g):[],O=N.length;O===0||!i.options.keepDragging?i.flag=!1:i._addStore(new BA(N));var D=i._getPosition(),k=kv(),P=!I&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=I||P?0:k,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",or({data:i.data,datas:i.data,isDouble:P,isDrag:I,isClick:!I,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:g,isTrusted:i._isTrusted},D)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){vr(i._window,"click",i._onClick,!0)},i._onClick=function(g){i._allowClickEvent(),i._allowMouseEvent();var m=i.options.preventClickEventByCondition;m?.(g)||(g.stopPropagation(),g.preventDefault())},i._onContextMenu=function(g){var m=i.options;m.preventRightClick?i.onDragEnd(g):g.preventDefault()},i._passCallback=function(){};var a=[].concat(n),s=a[0];i._window=XH(s)?s:Qc(s),i.options=or({checkInput:!1,container:s&&!("document"in s)?Qc(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,c=o.container,u=o.events,f=o.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(g){Kr(g,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(g){Kr(g,"mousedown",i.onDragStart),Kr(g,"mousemove",i._passCallback)}),Kr(c,"contextmenu",i._onContextMenu)),f&&Kr(Qc(),"blur",i.onBlur),i._useTouch){var h={passive:!1};a.forEach(function(g){Kr(g,"touchstart",i.onDragStart,h),Kr(g,"touchmove",i._passCallback,h)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(c){var u=c.clientX,f=c.clientY;return{clientX:u+i,clientY:f+a,originalClientX:u,originalClientY:f}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),or(or({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),vr(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){vr(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){vr(a,"mousedown",n.onDragStart)}),vr(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){vr(a,"touchstart",n.onDragStart)}),vr(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new BA(Yb(n));this.pinchFlag=!0,this._addStore(a);var s=this.emit("pinchStart",or(or({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));s===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",or(or({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",or(or({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),s=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),or(or({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,f){var h=f.getPosition();return u.distX+=h.distX,u.distY+=h.distY,u},a),o=s.distX,c=s.distY;return or(or({},a),{distX:o,distY:c})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Kr(r,"dragover",this.onDrag,i),Kr(n,"dragend",this.onDragEnd)),this._useMouse&&(Kr(r,"mousemove",this.onDrag),Kr(n,"mouseup",this.onDragEnd)),this._useTouch&&(Kr(r,"touchmove",this.onDrag,i),Kr(n,"touchend",this.onDragEnd,i),Kr(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(vr(r,"dragover",this.onDrag),vr(n,"dragend",this.onDragEnd)),this._useMouse&&(vr(r,"mousemove",this.onDrag),vr(n,"mouseup",this.onDragEnd)),this._useTouch&&(vr(r,"touchstart",this.onDragStart),vr(r,"touchmove",this.onDrag),vr(n,"touchend",this.onDragEnd),vr(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(L_);function lye(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var cye=lye;function uye(t){return cye(t).toString(36)}function dye(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function fye(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?xd(a):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?"".concat(o.replace(/\:host/g,".".concat(t))):o?".".concat(t," ").concat(o):".".concat(t)}).join(", ")+" {"})}function hye(t,e,n,r,i){var a=Fp(r),s=a.createElement("style");return s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=fye(t,e,n),(i||a.head||a.body).appendChild(s),s}function pye(t){var e="rCS"+uye(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=dye(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=hye(e,t,r,n,i);else{var s=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(s+1))}return{destroy:function(){var o,c=parseFloat(a.getAttribute("data-styled-count"))||0;c<=1?(a.remove?a.remove():(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(c-1))}}}}}var tP=function(){return tP=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tP.apply(this,arguments)};function gye(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function EK(t,e){var n=pye(e),r=n.className;return h0e(function(i,a){var s=i.className,o=s===void 0?"":s;i.cspNonce;var c=gye(i,["className","cspNonce"]),u=A0e();return C0e(a,function(){return u.current},[]),oK(function(){var f=n.inject(u.current,{nonce:i.cspNonce});return function(){f.destroy()}},[]),Es(t,tP({ref:u,"data-styled-id":r,className:"".concat(o," ").concat(r)},c))})}var nP=function(t,e){return nP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},nP(t,e)};function R0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ie=function(){return ie=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ie.apply(this,arguments)};function mye(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vye(t,e,n,r){var i=arguments.length,a=i<3?e:r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function yye(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ae(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function Ne(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function M0(t,e){return ie({events:[],props:[],name:t},e)}var bye=["n","w","s","e"],RO=["n","w","s","e","nw","ne","sw","se"];function xye(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function wye(t){var e=xye(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var $p=O0e(),TK=$p.browser.webkit,AK=TK&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),CK=$p.browser.name,IK=parseInt($p.browser.version,10),_ye=CK==="chrome",Sye=$p.browser.chromium,Eye=parseInt($p.browser.chromiumVersion,10)||0,Tye=_ye&&IK>=109||Sye&&Eye>=109,Aye=CK==="firefox",Cye=parseInt($p.browser.webkitVersion,10)>=612||IK>=15,MO="moveable-",Iye=RO.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),kye=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Iye,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(wye(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(AK?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),Pye=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],rP=1e-4,Ti=1e-7,Xb=1e-9,iP=Math.pow(10,10),AV=-iP,Dye={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},jO={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},kK={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},PK=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function j0(t,e,n,r,i,a){var s,o;a===void 0&&(a="draggable");var c=(o=(s=e.gestos[a])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=c.originalDatas||c.datas,f=u[a]||(u[a]={});return ie(ie({},c),{isPinch:!!r,parentEvent:!0,datas:f,originalDatas:t.originalDatas})}var fp=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),ie(ie({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var s=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!s&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function Uh(t,e,n,r){var i=t.length===16,a=i?4:3,s=hf(t,n,r,a),o=ae(s,4),c=ae(o[0],2),u=c[0],f=c[1],h=ae(o[1],2),g=h[0],m=h[1],b=ae(o[2],2),x=b[0],w=b[1],S=ae(o[3],2),T=S[0],I=S[1],N=ae(Nn(t,e,a),2),O=N[0],D=N[1],k=Math.min(u,g,x,T),P=Math.min(f,m,w,I),R=Math.max(u,g,x,T),j=Math.max(f,m,w,I);u=u-k||0,g=g-k||0,x=x-k||0,T=T-k||0,f=f-P||0,m=m-P||0,w=w-P||0,I=I-P||0,O=O-k||0,D=D-P||0;var z=t[0],B=t[a+1],L=bi(z*B);return{left:k,top:P,right:R,bottom:j,origin:[O,D],pos1:[u,f],pos2:[g,m],pos3:[x,w],pos4:[T,I],direction:L}}function DK(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,s=a.moveableClientRect,o=a.rootMatrix,c=a.is3d,u=a.pos1,f=s.left,h=s.top,g=c?4:3,m=ae(et(gp(o,[n-f,r-h],g),u),2),b=m[0],x=m[1],w=ae(Oo({datas:i,distX:b,distY:x}),2),S=w[0],T=w[1];return[S,T]}function ff(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,s=r.is3d,o=r.left,c=r.top,u=r.origin,f=r.offsetMatrix,h=r.targetMatrix,g=r.transformOrigin,m=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=a,n.offsetMatrix=f,n.transformOrigin=g,n.inverseMatrix=Ao(i,m),n.inverseBeforeMatrix=Ao(a,m),n.absoluteOrigin=Kd(Rt([o,c],u),m),n.startDragBeforeDist=ui(n.inverseBeforeMatrix,n.absoluteOrigin,m),n.startDragDist=ui(n.inverseMatrix,n.absoluteOrigin,m)}function Oye(t){return Uh(t.datas.beforeTransform,[50,50],100,100).direction}function V_(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,s=i.nextTransforms,o=s.length,c=i.nextTransformAppendedIndexes,u=-1;a===-1?(n==="translate"?u=0:n==="rotate"&&(u=Cl(s,function(m){return m.match(/scale\(/g)})),u===-1&&(u=s.length),r.transformIndex=u):$i(c,function(m){return m.index===a&&m.functionName===n})?u=a:u=a+c.filter(function(m){return m.index<a}).length;var f=ixe(s,t.state,u),h=f.targetFunction,g=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=f.beforeFunctionTexts,r.afterFunctionTexts=f.afterFunctionTexts,r.beforeTransform=f.beforeFunctionMatrix,r.beforeTransform2=f.beforeFunctionMatrix2,r.targetTansform=f.targetFunctionMatrix,r.afterTransform=f.afterFunctionMatrix,r.afterTransform2=f.afterFunctionMatrix2,r.targetAllTransform=f.allFunctionMatrix,h.functionName===g?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):o>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Ne(Ne([],ae(c),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function B_(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Nye(t){var e=t.datas,n=t.distX,r=t.distY,i=ae(NK({datas:e,distX:n,distY:r}),2),a=i[0],s=i[1],o=OK(e,z0e([a,s],4));return ui(o,Kd([0,0,0],4),4)}function OK(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,c=n?on(o,e,4):on(e,o,4),u=on(Ao(n?a:r,4),c,4),f=on(u,Ao(n?s:i,4),4);return f}function NK(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,c=a?4:3;return et(ui(i,Rt(o,[n,r]),c),s)}function Oo(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,c=n.startDragBeforeDist,u=n.startDragDist,f=n.absoluteOrigin,h=o?4:3;return et(ui(e?a:s,Rt(f,[r,i]),h),e?c:u)}function Rye(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,s=n.is3d;n.startDragBeforeDist;var o=n.startDragDist,c=n.absoluteOrigin,u=s?4:3;return et(ui(a,Rt(o,[r,i]),u),c)}function Mye(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(s,o){var c=I0(s),u=c.value,f=c.unit,h=o?i:r,g=o?n:e;if(s==="%"||isNaN(u)){var m=h?a[o]/h:0;return g*m}else if(f!=="%")return u;return g*u/100}):a}function RK(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function jye(t,e){return RK(e).map(function(n){return t[n]})}function FA(t,e){var n=(e+1)/2;return[V1(t[0][0],t[1][0],n,1-n),V1(t[0][1],t[1][1],n,1-n)]}function _r(t,e){var n=FA([t[0],t[1]],e[0]),r=FA([t[2],t[3]],e[0]);return FA([n,r],e[1])}function zye(t,e,n,r,i,a){var s=hf(e,n,r,i),o=_r(s,a),c=t[0]-o[0],u=t[1]-o[1];return[c,u]}function z0(t,e,n,r){return on(t,Qm(e,r,n),r)}function Lye(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,s=t.is3d,o=s?4:3,c;if(Ui(n)){var u=e.beforeTransform,f=e.afterTransform;r?c=Ds(Dv(n),4,o):c=Ds(on(on(u,Dv([n]),4),f,4),4,o)}else c=n;return z0(a,c,i,o)}function Vye(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,s=t.targetAllTransform,o=i?4:3;return z0(r,on(s||a,DO(e,o),o),n,o)}function F_(t,e){var n=qp(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=gr(r)?r:lu(r),aP(t,e,i)},setTransformIndex:function(r){aP(t,e,r)}}}function U_(t,e,n){var r=qp(e),i=r.startTransforms;aP(t,e,Cl(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function aP(t,e,n){var r=qp(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var s=t.state,o=dp([a],{"x%":function(c){return c/100*s.offsetWidth},"y%":function(c){return c/100*s.offsetHeight}});i.startValue=o[0].functionValue}}}function zO(t,e){var n=qp(t);n.nextTransforms=lu(e)}function qp(t){return t.originalDatas.beforeRenderable}function $1(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Qb(t){return($1(t)||[]).join(" ")}function Zb(t){return qp(t).nextStyle}function MK(t,e,n,r,i){zO(i,e);var a=yi.drag(t,j0(i,t.state,n,r)),s=a?a.transform:e;return ie(ie({transform:e,drag:a},_i({transform:s},i)),{afterTransform:s})}function LO(t,e,n,r,i,a){var s=Lye(t.state,i,e,a),o=Uye(t,n,r,s);return o}function jK(t,e,n,r,i,a,s){var o=LO(t,e,n,i,a,s),c=t.state,u=c.left,f=c.top,h=t.props.groupable,g=h?u:0,m=h?f:0,b=et(r,o);return et(b,[g,m])}function Bye(t,e,n,r,i,a,s){var o=jK(t,e,n,r,i,a,s);return o}function Fye(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function Uye(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,s=i.height,o=i.is3d,c=o?4:3,u=[a/2*(1+e[0])+n[0],s/2*(1+e[1])+n[1]];return Nn(r,u,c)}function $ye(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return jK(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function qye(t,e,n,r,i,a){var s=t.props.groupable,o=t.state,c=o.transformOrigin,u=o.offsetMatrix,f=o.is3d,h=o.width,g=o.height,m=o.left,b=o.top,x=a.fixedDirection,w=a.nextTargetMatrix||o.targetMatrix,S=f?4:3,T=Mye(i,e,n,h,g,c),I=s?m:0,N=s?b:0,O=z0(u,w,T,S),D=zye(r,O,e,n,S,x);return et(D,[I,N])}function Gye(t,e){return _r(Wa(t.state),e)}function Hye(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function Kye(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Wye(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function zK(t,e,n){for(var r=t,i=[],a=EO(t)||wu(t),s=!n&&t===e||t===a,o=s,c=!1,u=3,f,h,g,m=!1,b=Nv(e,e,!0).offsetParent,x=1;r&&!o;){o=s;var w=qi(r),S=w("position"),T=oW(r),I=S==="fixed",N=Wye(w),O=L0e(Gbe(T)),D=void 0,k=!1,P=!1,R=0,j=0,z=0,B=0,L={hasTransform:!1,fixedContainer:null};I&&(m=!0,L=Xbe(r),b=L.fixedContainer);var K=O.length;!c&&(K===16||N.length)&&(c=!0,u=4,dP(i),g&&(g=Ds(g,3,4))),c&&K===9&&(O=Ds(O,3,4));var Q=Ybe(r,t),q=Q.tagName,Y=Q.hasOffset,J=Q.isSVG,ne=Q.origin,W=Q.targetOrigin,U=Q.offset,X=ae(U,2),H=X[0],Z=X[1];q==="svg"&&!r.ownerSVGElement&&g&&(i.push({type:"target",target:r,matrix:Qbe(r,u)}),i.push({type:"offset",target:r,matrix:vn(u)}));var le=parseFloat(w("zoom"))||1;if(I)D=L.fixedContainer,k=!0;else{var de=Nv(r,e,!1,!0,w),ce=de.offsetZoom;if(D=de.offsetParent,k=de.isEnd,P=de.isStatic,x*=ce,(de.isCustomElement||ce!==1)&&P)H-=D.offsetLeft,Z-=D.offsetTop;else if(Aye||Tye){var he=de.parentSlotElement;if(he){for(var ee=D,Se=0,re=0;ee&&Kye(ee);)Se+=ee.offsetLeft,re+=ee.offsetTop,ee=ee.offsetParent;H-=Se,Z-=re}}}if(TK&&!Cye&&Y&&!J&&P&&(S==="relative"||S==="static")&&(H-=D.offsetLeft,Z-=D.offsetTop,s=s||k),I)Y&&L.hasTransform&&(z=D.clientLeft,B=D.clientTop);else if(Y&&b!==D&&(R=D.clientLeft,j=D.clientTop),Y&&D===a){var oe=lW(r,!1);H+=oe[0],Z+=oe[1]}if(i.push({type:"target",target:r,matrix:Qm(O,u,ne)}),N.length&&(i.push({type:"offset",target:r,matrix:vn(u)}),i.push({type:"target",target:r,matrix:Qm(Dv(N),u,ne)})),Y){var De=r===t,Pe=De?0:r.scrollLeft,ze=De?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Wd([H-Pe+R-z,Z-ze+j-B],u)})}else i.push({type:"offset",target:r,origin:ne});if(le!==1&&i.push({type:"zoom",target:r,matrix:Qm(DO([le,le],u),u,[0,0])}),g||(g=O),f||(f=ne),h||(h=W),o||I)break;r=D,s=k,(!n||r===a)&&(o=s)}return g||(g=vn(u)),f||(f=[0,0]),h||(h=[0,0]),{zoom:x,offsetContainer:b,matrixes:i,targetMatrix:g,transformOrigin:f,targetOrigin:h,is3d:c,hasFixed:m}}var fd=null,hd=null,kh=null;function hp(t){t?(window.Map&&(fd=new Map,hd=new Map),kh=[]):(fd=null,kh=null,hd=null)}function Yye(t){var e=hd?.get(t);if(e)return e;var n=Zm(t,!0);return hd&&hd.set(t,n),n}function Xye(t,e){if(kh){var n=$i(kh,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=zK(t,e,!0);return kh&&kh.push([[t,e],r]),r}function qi(t){var e=fd?.get(t);if(!e){var n=Qc(t).getComputedStyle(t);if(!fd)return function(a){return n[a]};e={style:n,cached:{}},fd.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function Ts(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(s,o){return a[o]=a[o]||{},a[o][e]=a[o][e]||{},ie(ie({},n),{isRequestChild:!0,datas:a[o][e],originalDatas:a[o]})})}function UA(t,e,n,r,i,a,s){var o=!!n.match(/Start$/g),c=!!n.match(/End$/g),u=i.isPinch,f=i.datas,h=Ts(t,e.name,i),g=t.moveables,m=[],b=h.map(function(x,w){var S=g[w],T=S.state,I=T.gestos,N=x;if(o)N=new fp(s).dragStart(r,x),m.push(N);else{if(I[s]||(I[s]=f.childGestos[w]),!I[s])return;N=j0(x,T,r,u,a,s),m.push(N)}var O=e[n](S,ie(ie({},N),{parentFlag:!0}));return c&&(I[s]=null),O});return o&&(f.childGestos=g.map(function(x){return x.state.gestos[s]})),{eventParams:b,childEvents:m}}function ml(t,e,n,r,i,a){i===void 0&&(i=function(f,h){return h});var s=!!n.match(/End$/g),o=Ts(t,e.name,r),c=t.moveables,u=o.map(function(f,h){var g=c[h],m=f;m=i(g,f);var b=e[n](g,ie(ie({},m),{parentFlag:!0}));return s&&(g.state.gestos={}),b});return u}function q1(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,s=r.datas.startPositions||Wa(e.state),o=_r(s,i),c=ae(ui(N0(-t.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=c[0],f=c[1];return r.datas.originalX=u,r.datas.originalY=f,r}function LK(t,e,n,r){var i=t.getState(),a=i.renderPoses,s=i.rotation,o=i.direction,c=Xd(t.props,e).zoom,u=Xm(s/Math.PI*180),f={},h=t.renderState;h.renderDirectionMap||(h.renderDirectionMap={});var g=h.renderDirectionMap;n.forEach(function(b){var x=b.dir;f[x]=!0});var m=bi(o);return n.map(function(b){var x=b.data,w=b.classNames,S=b.dir,T=jO[S];if(!T||!f[S])return null;g[S]=!0;var I=(ut(u,15)+m*kK[S]+720)%180,N={};return Il(x).forEach(function(O){N["data-".concat(O)]=x[O]}),r.createElement("div",ie({className:Xe.apply(void 0,Ne(["control","direction",S,e],ae(w),!1)),"data-rotation":I,"data-direction":S},N,{key:"direction-".concat(S),style:W1.apply(void 0,Ne([s,c],ae(T.map(function(O){return a[O]})),!1))}))})}function VK(t,e,n,r){var i=Xd(t.props,n),a=i.renderDirections,s=a===void 0?e:a,o=i.displayAroundControls;if(!s)return[];var c=s===!0?RO:s;return Ne(Ne([],ae(o?$K(t,r,n,c):[]),!1),ae(LK(t,n,c.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function Ov(t,e,n,r,i,a){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var c=Jn(n,r),u=e?ut(c/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Xe.apply(void 0,Ne(["line","direction",e?"edge":"",e],ae(s),!1)),"data-rotation":u,"data-line-key":a,"data-direction":e,style:Im(n,r,i,c)})}function BK(t,e,n,r,i){var a=n===!0?bye:n;return a.map(function(s,o){var c=ae(jO[s],2),u=c[0],f=c[1];if(f!=null)return Ov(t,s,r[u],r[f],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function FK(t){return function(e,n){var r=Xd(e.props,t).edge;return r&&(r===!0||r.length)?Ne(Ne([],ae(BK(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),ae(Qye(e,t,n)),!1):UK(e,t,n)}}function UK(t,e,n){return VK(t,RO,e,n)}function Qye(t,e,n){return VK(t,["nw","ne","sw","se"],e,n)}function $K(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,o=a.rotation,c=a.direction,u=i.renderDirectionMap,f=t.props.zoom,h=bi(c),g=o/Math.PI*180;return(r||Il(u)).map(function(m){var b=jO[m];if(!b)return null;var x=(ut(g,15)+h*kK[m]+720)%180,w=["around-control"];return n&&w.push("direction",n),e.createElement("div",{className:Xe.apply(void 0,Ne([],ae(w),!1)),"data-rotation":x,"data-direction":m,key:"direction-around-".concat(m),style:W1.apply(void 0,Ne([o,f],ae(b.map(function(S){return s[S]})),!1))})})}function VO(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,s=r.left,o=s===void 0?-1/0:s,c=r.top,u=c===void 0?-1/0:c,f=r.right,h=f===void 0?1/0:f,g=r.bottom,m=g===void 0?1/0:g,b={position:a,left:o,top:u,right:h,bottom:m};return{vertical:CV(b,e,!0),horizontal:CV(b,n,!1)}}function $_(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,s=r.clientLeft,o=r.clientTop,c=n.snapOffset,u=c.left,f=c.top,h=c.right,g=c.bottom,m=e||t.props.bounds||{},b=m.position||"client",x=b==="css",w=m.left,S=w===void 0?-1/0:w,T=m.top,I=T===void 0?-1/0:T,N=m.right,O=N===void 0?x?-1/0:1/0:N,D=m.bottom,k=D===void 0?x?-1/0:1/0:D;return x&&(O=a+h-u-O,k=i+g-f-k),{left:S+u-s,right:O+u-s,top:I+f-o,bottom:k+f-o}}function Zye(t,e,n){var r=$_(t),i=r.left,a=r.top,s=r.right,o=r.bottom,c=ae(n,2),u=c[0],f=c[1],h=ae(et(n,e),2),g=h[0],m=h[1];Ae(g)<Ti&&(g=0),Ae(m)<Ti&&(m=0);var b=m>0,x=g>0,w={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};if(g===0&&m===0)return{vertical:w,horizontal:S};if(g===0)b?o<f&&(S.pos=o,S.offset=f-o):a>f&&(S.pos=a,S.offset=f-a);else if(m===0)x?s<u&&(w.pos=s,w.offset=u-s):i>u&&(w.pos=i,w.offset=u-i);else{var T=m/g,I=n[1]-T*u,N=0,O=0,D=!1;x&&s<=u?(N=T*s+I,O=s,D=!0):!x&&u<=i&&(N=T*i+I,O=i,D=!0),D&&(N<a||N>o)&&(D=!1),D||(b&&o<=f?(N=o,O=(N-I)/T,D=!0):!b&&f<=a&&(N=a,O=(N-I)/T,D=!0)),D&&(w.isBound=!0,w.pos=O,w.offset=u-O,S.isBound=!0,S.pos=N,S.offset=f-N)}return{vertical:w,horizontal:S}}function CV(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Ne([],ae(e),!1)),s=Math.max.apply(Math,Ne([],ae(e),!1)),o=[];return r+1>a&&o.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<s&&o.push({direction:"end",isBound:!0,offset:s-i,pos:i}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(c,u){return Ae(u.offset)-Ae(c.offset)})}function IV(t,e,n){var r=n?t.map(function(i){return O0(i,n)}):t;return r.some(function(i){return i[0]<e.left&&Ae(i[0]-e.left)>.1||i[0]>e.right&&Ae(i[0]-e.right)>.1||i[1]<e.top&&Ae(i[1]-e.top)>.1||i[1]>e.bottom&&Ae(i[1]-e.bottom)>.1})}function Jye(t,e,n){var r=Ka(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,s){return Ae(a-t[n?0:1])-Ae(s-t[n?0:1])}).map(function(a){return Jn([0,0],n?[a,e]:[e,a])})}function ebe(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=$_(t),o=s.left,c=s.top,u=s.right,f=s.bottom,h=o-r[0],g=u-r[0],m=c-r[1],b=f-r[1],x={left:h,top:m,right:g,bottom:b};if(!IV(n,x,0))return[];var w=[];return[[h,0],[g,0],[m,1],[b,1]].forEach(function(S){var T=ae(S,2),I=T[0],N=T[1];n.forEach(function(O){var D=Jn([0,0],O);w.push.apply(w,Ne([],ae(Jye(O,I,N).map(function(k){return a+k-D}).filter(function(k){return!IV(e,x,k)}).map(function(k){return ut(k*180/Math.PI,Ti)})),!1))})}),w}var tbe=["left","right","center"],nbe=["top","bottom","middle"],kV={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},cu={start:"left",end:"right",center:"center"},uu={start:"top",end:"bottom",center:"middle"};function Ph(){return{left:!1,top:!1,right:!1,bottom:!1}}function Gp(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,c=n.snapGridWidth,u=n.snapGridHeight,f=t.state,h=f.guidelines,g=f.enableSnap;return!r||!g||e&&r!==!0&&r.indexOf(e)<0?!1:!!(c||u||i||a||h&&h.length||s&&s.length||o&&o.length)}function BO(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function rbe(t,e){var n=BO(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function FO(t,e){var n=rbe(t,e),r=nbe.filter(function(a){return a in n}),i=tbe.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function ibe(t,e,n){var r=Nn(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function abe(t){var e=ae(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<dr&&(i=0),Math.abs(a)<dr&&(a=0);var s=0,o=0,c=0;return i?a?(s=-a/i,o=1,c=s*n[0]-n[1]):(o=1,c=-n[1]):(s=-1,c=n[0]),[s,o,c].map(function(u){return ut(u,dr)})}var qK="snapRotationThreshold",GK="snapRotationDegrees",HK="snapHorizontalThreshold",KK="snapVerticalThreshold";function q_(t,e,n,r,i,a,s){var o;r===void 0&&(r=[]),i===void 0&&(i=[]);var c=t.props,u=((o=t.state.snapThresholdInfo)===null||o===void 0?void 0:o.multiples)||[1,1],f=qV(s,c[HK],5),h=qV(a,c[KK],5);return WK(t.state.guidelines,e,n,r,i,f,h,u)}function WK(t,e,n,r,i,a,s,o){return{vertical:DV(t,"vertical",e,s*o[0],r),horizontal:DV(t,"horizontal",n,a*o[1],i)}}function sbe(t,e,n){var r=ae(n,2),i=r[0],a=r[1],s=ae(e,2),o=s[0],c=s[1],u=ae(et(n,e),2),f=u[0],h=u[1],g=h>0,m=f>0;f=Y1(f),h=Y1(h);var b={isSnap:!1,offset:0,pos:0},x={isSnap:!1,offset:0,pos:0};if(f===0&&h===0)return{vertical:b,horizontal:x};var w=q_(t,f?[i]:[],h?[a]:[],[],[],void 0,void 0),S=w.vertical,T=w.horizontal;S.posInfos.filter(function(q){var Y=q.pos;return m?Y>=o:Y<=o}),T.posInfos.filter(function(q){var Y=q.pos;return g?Y>=c:Y<=c}),S.isSnap=S.posInfos.length>0,T.isSnap=T.posInfos.length>0;var I=sP(S),N=I.isSnap,O=I.guideline,D=sP(T),k=D.isSnap,P=D.guideline,R=k?P.pos[1]:0,j=N?O.pos[0]:0;if(f===0)k&&(x.isSnap=!0,x.pos=P.pos[1],x.offset=a-x.pos);else if(h===0)N&&(b.isSnap=!0,b.pos=j,b.offset=i-j);else{var z=h/f,B=n[1]-z*i,L=0,K=0,Q=!1;N?(K=j,L=z*K+B,Q=!0):k&&(L=R,K=(L-B)/z,Q=!0),Q&&(b.isSnap=!0,b.pos=K,b.offset=i-K,x.isSnap=!0,x.pos=L,x.offset=a-L)}return{vertical:b,horizontal:x}}function Bc(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function PV(t,e,n,r){var i=FO(t.props.snapDirections,e),a=q_(t,i.vertical,i.horizontal,i.verticalNames.map(function(c){return Bc(c)}),i.horizontalNames.map(function(c){return Bc(c)}),n,r),s=Bc(i.horizontalNames[a.horizontal.index]),o=Bc(i.verticalNames[a.vertical.index]);return{vertical:ie(ie({},a.vertical),{direction:o}),horizontal:ie(ie({},a.horizontal),{direction:s})}}function sP(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:s}}function DV(t,e,n,r,i){var a,s;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o=e==="vertical",c=o?0:1,u=n.map(function(h,g){var m=i[g]||"",b=t.map(function(x){var w=x.pos,S=h-w[c];return{offset:S,dist:Ae(S),guideline:x,direction:m}}).filter(function(x){var w=x.guideline,S=x.dist,T=w.type;return!(T!==e||S>r)}).sort(function(x,w){return x.dist-w.dist});return{pos:h,index:g,guidelineInfos:b,direction:m}}).filter(function(h){return h.guidelineInfos.length>0}).sort(function(h,g){return h.guidelineInfos[0].dist-g.guidelineInfos[0].dist}),f=u.length>0;return{isSnap:f,index:f?u[0].index:-1,direction:(s=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&s!==void 0?s:"",posInfos:u}}function obe(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(g,m,b){var x=b[m+1]||b[0];a.push(g),a.push([(g[0]+x[0])/2,(g[1]+x[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Ne([],ae(jye([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var s=a.map(function(g){return _r(e,g)}),o=s.map(function(g){return g[0]}),c=s.map(function(g){return g[1]}),u=q_(t,o,c,a.map(function(g){return Bc(g[0])}),a.map(function(g){return Bc(g[1])}),r,i),f=Bc(a.map(function(g){return g[0]})[u.vertical.index]),h=Bc(a.map(function(g){return g[1]})[u.horizontal.index]);return{vertical:ie(ie({},u.vertical),{direction:f}),horizontal:ie(ie({},u.horizontal),{direction:h})}}function YK(t,e){var n=Ae(t.offset),r=Ae(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ti?1:r<Ti?-1:n-r}function G1(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],s=n.offset[e],o=r.offset[e];if(i){if(!a)return-1}else return 1;return YK({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function lbe(t,e,n){var r=[];if(n)Ae(e[0])!==1||Ae(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var c=[s*i[0],o*i[1]];e[0]===c[0]&&e[1]===c[1]||r.push([e,c])})})}else if(t[0]){var a=Ae(e[0])===1?[1]:[1,-1];a.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var a=Ae(e[1])===1?[1]:[1,-1];a.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function XK(t,e){var n=Gk([e[0][0],e[1][0]]),r=Gk([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function UO(t,e){var n=ae(e,2),r=n[0],i=n[1],a=i[0]-r[0],s=i[1]-r[1];Ae(a)<Ti&&(a=0),Ae(s)<Ti&&(s=0);var o,c;if(!a)o=r[0],c=t[0];else if(!s)o=r[1],c=t[1];else{var u=s/a;o=u*(t[0]-r[0])+r[1],c=t[1]}return o-c}function QK(t,e,n,r){return r===void 0&&(r=Ti),t.every(function(i){var a=UO(i,e),s=a<=0;return s===n||Ae(a)<=r})}function OV(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function cbe(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var c=o.left,u=o.top,f=o.width,h=o.height,g=[[c,u],[c,u+h]],m=[[c,u],[c+f,u]],b=[[c+f,u],[c+f,u+h]],x=[[c,u+h],[c+f,u+h]];if(QK([[c,u],[c+f,u],[c,u+h],[c+f,u+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var w=Fc(n,s,m,i),S=Fc(n,s,x,i),T=Fc(n,s,g,a),I=Fc(n,s,b,a),N=w.isBound&&S.isBound,O=w.isBound||S.isBound,D=T.isBound&&I.isBound,k=T.isBound||I.isBound,P=pp(w.offset,S.offset),R=pp(T.offset,I.offset),j=[0,0],z=!1,B=!1;return Ae(R)<Ae(P)?(j=[P,0],z=O,B=N):(j=[0,R],z=k,B=D),{isAllBound:B,isVerticalBound:O,isHorizontalBound:k,isBound:z,offset:j}}function Fc(t,e,n,r,i,a){var s=ae(e,2),o=s[0],c=s[1],u=t[0],f=n[0],h=n[1],g=Y1(h[1]-f[1]),m=Y1(h[0]-f[0]),b=c,x=o,w=-o/c;if(m){if(!g){if(a&&!b)return{isBound:!1,offset:0};if(x){var N=(f[1]-u[1])/w+u[0];return OV(N,f[0],h[0],r,i)}else{var T=f[1]-u[1],I=Ae(T)<=(i||0);return{isBound:I,offset:I?T:0}}}}else{if(a&&!x)return{isBound:!1,offset:0};if(b){var S=w*(f[0]-u[0])+u[1];return OV(S,f[1],h[1],r,i)}else{var T=f[0]-u[0],I=Ae(T)<=(i||0);return{isBound:I,offset:I?T:0}}}return{isBound:!1,offset:0}}function ZK(t,e,n){return e.map(function(r){var i=cbe(t,r),a=i.isBound,s=i.offset,o=i.isVerticalBound,c=i.isHorizontalBound,u=r.multiple,f=Oo({datas:n,distX:s[0],distY:s[1]}).map(function(h,g){return h*(u[g]?2/u[g]:0)});return{sign:u,isBound:a,isVerticalBound:o,isHorizontalBound:c,isSnap:!1,offset:f}})}function ube(t,e,n){var r,i=$O(t,e,[0,0],!1).map(function(g){return ie(ie({},g),{multiple:g.multiple.map(function(m){return Ae(m)*2})})}),a=ZK(t,i,n),s=G1(a,0),o=G1(a,1),c=0,u=0,f=s.isVerticalBound||o.isVerticalBound,h=s.isHorizontalBound||o.isHorizontalBound;return(f||h)&&(r=ae(Rye({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),2),c=r[0],u=r[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:h,offset:u}}}function dbe(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function $O(t,e,n,r){var i=t.state,a=i.allMatrix,s=i.is3d,o=hf(a,100,100,s?4:3),c=_r(o,[0,0]);return dbe(n,r).map(function(u){var f=ae(u,3),h=f[0],g=f[1],m=f[2],b=[_r(o,g),_r(o,m)],x=abe(b),w=XK(c,b),S=w.vertical,T=w.horizontal,I=UO(c,b)<=0;return{multiple:h,centerSign:I,verticalSign:S,horizontalSign:T,lineConstants:x,line:[_r(e,g),_r(e,m)]}})}function NV(t,e,n,r){var i=r?t.map(function(a){return O0(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var s=UO(n,a)<=0;return!QK(e,a,s)})}function fbe(t){var e=ae(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return Ae(n[0]);if(!a)return Ae(n[1]);var s=a/i;return Ae((-s*n[0]+n[1])/Math.sqrt(Math.pow(s,2)+1))}function hbe(t){var e=ae(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var s=a/i,o=-s*n[0]+n[1];return[-o/(s+1/s),o/(s*s+1)]}function pbe(t,e,n,r,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var o=a.left,c=a.top,u=a.width,f=a.height,h=o-r[0],g=o+u-r[0],m=c-r[1],b=c+f-r[1],x=[[h,m],[g,m],[h,b],[g,b]],w=_r(n,[0,0]);if(!NV(n,x,w,0))return[];var S=[],T=x.map(function(I){return[Ka(I),Jn([0,0],I)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(I){var N=Jn([0,0],hbe(I)),O=fbe(I);S.push.apply(S,Ne([],ae(T.filter(function(D){var k=ae(D,1),P=k[0];return P&&O<=P}).map(function(D){var k=ae(D,2),P=k[0],R=k[1],j=Math.acos(P?O/P:0),z=R+j,B=R-j;return[s+z-N,s+B-N]}).reduce(function(D,k){return D.push.apply(D,Ne([],ae(k),!1)),D},[]).filter(function(D){return!NV(e,x,w,D)}).map(function(D){return ut(D*180/Math.PI,Ti)})),!1))}),S}function gbe(t){var e=t.props.innerBounds,n=Ph();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,s=r.pos3,o=r.pos4,c=[i,a,s,o],u=_r(c,[0,0]),f=e.left,h=e.top,g=e.width,m=e.height,b=[[f,h],[f,h+m]],x=[[f,h],[f+g,h]],w=[[f+g,h],[f+g,h+m]],S=[[f,h+m],[f+g,h+m]],T=$O(t,c,[0,0],!1),I=[],N=[];return T.forEach(function(O){var D=O.line,k=O.lineConstants,P=XK(u,D),R=P.horizontal,j=P.vertical,z=Fc(D,k,x,j,1,!0),B=Fc(D,k,S,j,1,!0),L=Fc(D,k,b,R,1,!0),K=Fc(D,k,w,R,1,!0);z.isBound&&!n.top&&(I.push(h),n.top=!0),B.isBound&&!n.bottom&&(I.push(h+m),n.bottom=!0),L.isBound&&!n.left&&(N.push(f),n.left=!0),K.isBound&&!n.right&&(N.push(f+g),n.right=!0)}),{boundMap:n,horizontal:I,vertical:N}}function mbe(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(Ae(i)<dr&&(i=0),Ae(a)<dr&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var s=a/i,o=t[1]-s*t[0];if(r){var c=s*(e[0]+n)+o;return[n,c-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function oP(t,e,n,r,i){var a=mbe(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var s=gl(t,e),o=gl(a,t),c=gl(a,e),u=o>s||c>s,f=ae(Oo({datas:i,distX:a[0],distY:a[1]}),2),h=f[0],g=f[1];return{offset:[h,g],isOutside:u}}function H1(t,e){return t.isBound?t.offset:e.isSnap?sP(e).offset:0}function vbe(t,e,n,r,i){var a=ae(e,2),s=a[0],o=a[1],c=ae(n,2),u=c[0],f=c[1],h=ae(r,2),g=h[0],m=h[1],b=ae(i,2),x=b[0],w=b[1],S=-x,T=-w;if(t&&s&&o){S=0,T=0;var I=[];if(u&&f?I.push([0,w],[x,0]):u?I.push([x,0]):f?I.push([0,w]):g&&m?I.push([0,w],[x,0]):g?I.push([x,0]):m&&I.push([0,w]),I.length){I.sort(function(k,P){return Ka(et([s,o],k))-Ka(et([s,o],P))});var N=I[0];if(N[0]&&Ae(s)>dr)S=-N[0],T=o*Ae(s+S)/Ae(s)-o;else if(N[1]&&Ae(o)>dr){var O=o;T=-N[1],S=s*Ae(o+T)/Ae(O)-s}if(t&&f&&u)if(Ae(S)>dr&&Ae(S)<Ae(x)){var D=Ae(x)/Ae(S);S*=D,T*=D}else if(Ae(T)>dr&&Ae(T)<Ae(w)){var D=Ae(w)/Ae(T);S*=D,T*=D}else S=pp(-x,S),T=pp(-w,T)}}else S=s||u?-x:0,T=o||f?-w:0;return[S,T]}function ybe(t,e,n,r,i,a){if(!Gp(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=HO(a.absolutePoses,[e,n]),o=Ga(s),c=o.left,u=o.right,f=o.top,h=o.bottom,g={horizontal:s.map(function(K){return K[1]}),vertical:s.map(function(K){return K[0]})},m=BO(t.props.snapDirections),b=FO(m,{left:c,right:u,top:f,bottom:h,center:(c+u)/2,middle:(f+h)/2}),x=G_(t,i,b,g),w=x.vertical,S=x.horizontal,T=ube(t,s,a),I=T.vertical,N=T.horizontal,O=w.isSnap,D=S.isSnap,k=w.isBound||I.isBound,P=S.isBound||N.isBound,R=pp(w.offset,I.offset),j=pp(S.offset,N.offset),z=ae(vbe(r,[e,n],[k,P],[O,D],[R,j]),2),B=z[0],L=z[1];return[{isBound:k,isSnap:O,offset:B},{isBound:P,isSnap:D,offset:L}]}function G_(t,e,n,r){r===void 0&&(r=n);var i=VO($_(t),r.vertical,r.horizontal),a=i.horizontal,s=i.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:q_(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),c=o.horizontal,u=o.vertical,f=H1(a[0],c),h=H1(s[0],u),g=Ae(f),m=Ae(h);return{horizontal:{isBound:a[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:f,dist:g,bounds:a,snap:c},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:s,snap:u}}}function RV(t,e,n,r,i,a,s){s===void 0&&(s=[1,1]);var o=VO(e,n,r),c=o.horizontal,u=o.vertical,f=WK(t,n,r,[],[],i,a,s),h=f.horizontal,g=f.vertical,m=H1(c[0],h),b=H1(u[0],g),x=Ae(m),w=Ae(b);return{horizontal:{isBound:c[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:m,dist:x,bounds:c,snap:h},vertical:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g}}}function bbe(t,e,n,r){var i=Jn(t,e)/Math.PI*180,a=n.vertical,s=a.isBound,o=a.isSnap,c=a.dist,u=n.horizontal,f=u.isBound,h=u.isSnap,g=u.dist,m=i%180,b=m<3||m>177,x=m>87&&m<93;return g<c&&(s||o&&!x&&(!r||!b))?"vertical":f||h&&!b&&(!r||!x)?"horizontal":""}function xbe(t,e,n,r,i,a){return n.map(function(s){var o=ae(s,2),c=o[0],u=o[1],f=_r(e,c),h=_r(e,u),g=r?wbe(t,f,h,i):G_(t,i,{vertical:[h[0]],horizontal:[h[1]]}),m=g.horizontal,b=m.offset,x=m.isBound,w=m.isSnap,S=g.vertical,T=S.offset,I=S.isBound,N=S.isSnap,O=et(u,c);if(!T&&!b)return{isBound:I||x,isSnap:N||w,sign:O,offset:[0,0]};var D=bbe(f,h,g,r);if(!D)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var k=D==="vertical",P=[0,0];return!r&&Ae(u[0])===1&&Ae(u[1])===1&&c[0]!==u[0]&&c[1]!==u[1]?P=Oo({datas:a,distX:-T,distY:-b}):P=oP(f,h,-(k?T:b),k,a).offset,P=P.map(function(R,j){return R*(O[j]?2/O[j]:0)}),{sign:O,isBound:k?I:x,isSnap:k?N:w,offset:P}})}function MV(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function wbe(t,e,n,r){var i=Zye(t,e,n),a=i.horizontal,s=i.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:sbe(t,e,n),c=o.horizontal,u=o.vertical,f=MV(a,c),h=MV(s,u),g=Ae(f),m=Ae(h);return{horizontal:{isBound:a.isBound,isSnap:c.isSnap,offset:f,dist:g},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:h,dist:m}}}function _be(t,e,n,r,i){var a=[-n[0],-n[1]],s=t.state,o=s.width,c=s.height,u=t.props.bounds,f=1/0,h=1/0;if(u){var g=[[n[0],-n[1]],[-n[0],n[1]]],m=u.left,b=m===void 0?-1/0:m,x=u.top,w=x===void 0?-1/0:x,S=u.right,T=S===void 0?1/0:S,I=u.bottom,N=I===void 0?1/0:I;g.forEach(function(O){var D=O[0]!==a[0],k=O[1]!==a[1],P=_r(e,O),R=Jn(r,P)*360/Math.PI;if(k){var j=P.slice();(Ae(R-360)<2||Ae(R-180)<2)&&(j[1]=r[1]);var z=oP(r,j,(r[1]<P[1]?N:w)-P[1],!1,i),B=ae(z.offset,2),L=B[1],K=z.isOutside;isNaN(L)||(h=c+(K?1:-1)*Ae(L))}if(D){var j=P.slice();(Ae(R-90)<2||Ae(R-270)<2)&&(j[0]=r[0]);var Q=oP(r,j,(r[0]<P[0]?T:b)-P[0],!0,i),q=ae(Q.offset,1),Y=q[0],J=Q.isOutside;isNaN(Y)||(f=o+(J?1:-1)*Ae(Y))}})}return{maxWidth:f,maxHeight:h}}var yi={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,s=t.getState(),o=s.dragInfo,c=s.beforeOrigin;if(r||!i||!o)return[];var u=o.dist;if(!u[0]&&!u[1])return[];var f=Ka(u),h=Jn(u,[0,0]);return[e.createElement("div",{className:Xe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(h,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,s=a.gestos,o=a.style;if(s.draggable)return!1;s.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],ff(t,e),U_(t,e,"translate"),Fbe(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=gt(t,e,ie({set:function(f){n.startValue=f}},F_(t,e))),u=r||Ve(t,"onDragStart",c);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?c:!1},drag:function(t,e){if(e){V_(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,s=e.deltaOffset,o=e.useSnap,c=e.isRequest,u=e.isGroup,f=e.parentThrottleDrag,h=e.distX,g=e.distY,m=n.isDrag,b=n.prevDist,x=n.prevBeforeDist,w=n.startValue;if(m){s&&(h+=s[0],g+=s[1]);var S=t.props,T=S.parentMoveable,I=u?0:S.throttleDrag||f||0,N=r?0:S.throttleDragRotate||0,O=0,D=!1,k=!1,P=!1,R=!1;if(!r&&N>0&&(h||g)){var j=S.startDragRotate||0,z=ut(j+Jn([0,0],[h,g])*180/Math.PI,N)-j,B=g*Math.abs(Math.cos((z-90)/180*Math.PI)),L=h*Math.abs(Math.cos(z/180*Math.PI)),K=Ka([L,B]);O=z*Math.PI/180,h=K*Math.cos(O),g=K*Math.sin(O)}if(!a&&!r&&!i){var Q=ae(ybe(t,h,g,N,!o&&c||s,n),2),q=Q[0],Y=Q[1];D=q.isSnap,k=q.isBound,P=Y.isSnap,R=Y.isBound;var J=q.offset,ne=Y.offset;h+=J,g+=ne}var W=Rt(NK({datas:n,distX:h,distY:g}),w),U=Rt(Nye({datas:n,distX:h,distY:g}),w);pV(U,Ti),pV(W,Ti),N||(!D&&!k&&(U[0]=ut(U[0],I),W[0]=ut(W[0],I)),!P&&!R&&(U[1]=ut(U[1],I),W[1]=ut(W[1],I)));var X=et(W,w),H=et(U,w),Z=et(H,b),le=et(X,x);n.prevDist=H,n.prevBeforeDist=X,n.passDelta=Z,n.passDist=H;var de=n.left+X[0],ce=n.top+X[1],he=n.right-X[0],ee=n.bottom-X[1],Se=B_(n,"translate(".concat(U[0],"px, ").concat(U[1],"px)"),"translate(".concat(H[0],"px, ").concat(H[1],"px)"));if(zO(e,Se),t.state.dragInfo.dist=r?[0,0]:H,!(!r&&!T&&Z.every(function(ze){return!ze})&&le.some(function(ze){return!ze}))){var re=t.state,oe=re.width,De=re.height,Pe=gt(t,e,ie({transform:Se,dist:H,delta:Z,translate:U,beforeDist:X,beforeDelta:le,beforeTranslate:W,left:de,top:ce,right:he,bottom:ee,width:oe,height:De,isPinch:a},_i({transform:Se},e)));return!r&&Ve(t,"onDrag",Pe),Pe}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,ie(ie({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ga(t,e,{});return!n&&Ve(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var c=UA(t,this,"dragStart",[a||0,s||0],e,!1,"draggable"),u=c.childEvents,f=c.eventParams,h=ie(ie({},o),{targets:t.props.targets,events:f}),g=Ve(t,"onDragGroupStart",h);i.isDrag=g!==!1;var m=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[m[0]%1,m[1]%1],i.isDrag?o:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,ie(ie({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=UA(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var s=ie({targets:t.props.targets,events:a},r);return Ve(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=UA(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Ve(t,"onDragGroupEnd",ga(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(s){return a=s.useSnap,{datas:e,useSnap:a}},request:function(s){return"x"in s?r=s.x-n.left:"deltaX"in s&&(r+=s.deltaX),"y"in s?i=s.y-n.top:"deltaY"in s&&(i+=s.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function JK(t,e){var n=_r(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function Sbe(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=[i/2*(1+e[0]),a/2*(1+e[1])],c=Nn(n,o,s),u=[0,0];return{fixedPosition:c,fixedDirection:e,fixedOffset:u}}function eW(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,s=r?4:3,o=Fye(e,i,a),c=Nn(n,e,s),u=[i?0:e[0],a?0:e[1]];return{fixedPosition:c,fixedDirection:o,fixedOffset:u}}var jV=YO("resizable"),lP={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:FK("resizable"),dragControlCondition:jV,viewClassName:WO("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,o=e.parentGesto,c=e.datas,u=e.parentFixedDirection,f=e.parentEvent,h=hW(s,i,r,c),g=t.state,m=g.target,b=g.width,x=g.height,w=g.gestos;if(!h||!m||w.resizable)return!1;w.resizable=o||t.controlGesto,!i&&ff(t,e),c.datas={},c.direction=h,c.startOffsetWidth=b,c.startOffsetHeight=x,c.prevWidth=0,c.prevHeight=0,c.minSize=[0,0],c.startWidth=g.inlineCSSWidth||g.cssWidth,c.startHeight=g.inlineCSSHeight||g.cssHeight,c.maxSize=[1/0,1/0],a||(c.minSize=[g.minOffsetWidth,g.minOffsetHeight],c.maxSize=[g.maxOffsetWidth,g.maxOffsetHeight]);var S=t.props.transformOrigin||"% %";c.transformOrigin=Ui(S)?S.split(" "):S,c.startOffsetMatrix=g.offsetMatrix,c.startTransformOrigin=g.transformOrigin,c.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!h[0]&&!h[1]||h[0]||!h[1];function T(R){c.ratio=R&&isFinite(R)?R:0}c.startPositions=Wa(t.state);function I(R){var j=JK(c.startPositions,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function N(R){var j=eW(t.state,R);c.fixedDirection=j.fixedDirection,c.fixedPosition=j.fixedPosition,c.fixedOffset=j.fixedOffset}function O(R){c.minSize=[an("".concat(R[0]),0)||0,an("".concat(R[1]),0)||0]}function D(R){var j=[R[0]||1/0,R[1]||1/0];(!up(j[0])||isFinite(j[0]))&&(j[0]=an("".concat(j[0]),0)||1/0),(!up(j[1])||isFinite(j[1]))&&(j[1]=an("".concat(j[1]),0)||1/0),c.maxSize=j}T(b/x),I(u||[-h[0],-h[1]]),c.setFixedDirection=I,c.setFixedPosition=N,c.setMin=O,c.setMax=D;var k=gt(t,e,{direction:h,startRatio:c.ratio,set:function(R){var j=ae(R,2),z=j[0],B=j[1];c.startWidth=z,c.startHeight=B},setMin:O,setMax:D,setRatio:T,setFixedDirection:I,setFixedPosition:N,setOrigin:function(R){c.transformOrigin=R},dragStart:yi.dragStart(t,new fp().dragStart([0,0],e))}),P=f||Ve(t,"onResizeStart",k);return c.startFixedDirection=c.fixedDirection,c.startFixedPosition=c.fixedPosition,P!==!1&&(c.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),c.isResize?k:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,c=e.parentDist,u=e.useSnap,f=e.isRequest,h=e.isGroup,g=e.parentEvent,m=e.resolveMatrix,b=r.isResize,x=r.transformOrigin,w=r.startWidth,S=r.startHeight,T=r.prevWidth,I=r.prevHeight,N=r.minSize,O=r.maxSize,D=r.ratio,k=r.startOffsetWidth,P=r.startOffsetHeight,R=r.isWidth;if(!b)return;if(m){var j=t.state.is3d,z=r.startOffsetMatrix,B=r.startTransformOrigin,L=j?4:3,K=Dv($1(e)),Q=Math.sqrt(K.length);L!==Q&&(K=Ds(K,Q,L));var q=z0(z,K,B,L),Y=hf(q,k,P,L);r.startPositions=Y,r.nextTargetMatrix=K,r.nextAllMatrix=q}var J=Xd(t.props,"resizable"),ne=J.resizeFormat,W=J.throttleResize,U=W===void 0?i?0:1:W,X=J.parentMoveable,H=J.keepRatioFinally,Z=r.direction,le=Z,de=0,ce=0;!Z[0]&&!Z[1]&&(le=[1,1]);var he=D&&(s??J.keepRatio)||!1;function ee(){var ot=r.fixedDirection,Et=bW(le,he,r,e);de=Et.distWidth,ce=Et.distHeight;var ft=le[0]-ot[0]||he?Math.max(k+de,Ti):k,xn=le[1]-ot[1]||he?Math.max(P+ce,Ti):P;return he&&k&&P&&(R?xn=ft/D:ft=xn*D),[ft,xn]}var Se=ae(ee(),2),re=Se[0],oe=Se[1];g||(r.setFixedDirection(r.fixedDirection),Ve(t,"onBeforeResize",gt(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(ot){var Et;return r.setFixedDirection(ot),Et=ae(ee(),2),re=Et[0],oe=Et[1],[re,oe]},setFixedPosition:function(ot){var Et;return r.setFixedPosition(ot),Et=ae(ee(),2),re=Et[0],oe=Et[1],[re,oe]},boundingWidth:re,boundingHeight:oe,setSize:function(ot){var Et;Et=ae(ot,2),re=Et[0],oe=Et[1]}},!0)));var De=o;o||(!i&&a?De=Gye(t,[0,0]):De=r.fixedPosition);var Pe=[0,0];a||(Pe=Vbe(t,re,oe,Z,De,!u&&f,r)),c&&(!c[0]&&(Pe[0]=0),!c[1]&&(Pe[1]=0));function ze(){var ot;ne&&(ot=ae(ne([re,oe]),2),re=ot[0],oe=ot[1]),re=ut(re,U),oe=ut(oe,U)}if(he){le[0]&&le[1]&&Pe[0]&&Pe[1]&&(Ae(Pe[0])>Ae(Pe[1])?Pe[1]=0:Pe[0]=0);var je=!Pe[0]&&!Pe[1];je&&ze(),le[0]&&!le[1]||Pe[0]&&!Pe[1]||je&&R?(re+=Pe[0],oe=re/D):(!le[0]&&le[1]||!Pe[0]&&Pe[1]||je&&!R)&&(oe+=Pe[1],re=oe*D)}else re+=Pe[0],oe+=Pe[1],re=Math.max(0,re),oe=Math.max(0,oe);n=ae(GH([re,oe],N,O,he?D:!1),2),re=n[0],oe=n[1],ze(),he&&(h||H)&&(R?oe=re/D:re=oe*D),de=re-k,ce=oe-P;var Ue=[de-T,ce-I];r.prevWidth=de,r.prevHeight=ce;var Ie=qye(t,re,oe,De,x,r);if(!(!X&&Ue.every(function(ot){return!ot})&&Ie.every(function(ot){return!ot}))){var Oe=yi.drag(t,j0(e,t.state,Ie,!!a,!1,"draggable")),Ge=Oe.transform,yt=w+de,Dt=S+ce,Nt=gt(t,e,ie({width:yt,height:Dt,offsetWidth:Math.round(re),offsetHeight:Math.round(oe),startRatio:D,boundingWidth:re,boundingHeight:oe,direction:Z,dist:[de,ce],delta:Ue,isPinch:!!a,drag:Oe},gW({style:{width:"".concat(yt,"px"),height:"".concat(Dt,"px")},transform:Ge},Oe,e)));return!g&&Ve(t,"onResize",Nt),Nt}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var c=t.state,u=c.width,f=c.height,h=u-(i+s),g=f-(a+o),m=Ae(h)>3,b=Ae(g)>3;if(m&&(n.startWidth+=h,n.startOffsetWidth+=h,n.prevWidth+=h),b&&(n.startHeight+=g,n.startOffsetHeight+=g,n.prevHeight+=g),m||b)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ga(t,e,{});return!r&&Ve(t,"onResizeEnd",i),i}},dragGroupControlCondition:jV,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,ie(ie({},e),{isGroup:!0}));if(!r)return!1;var i=Ts(t,"resizable",e),a=n.startOffsetWidth,s=n.startOffsetHeight;function o(){var m=n.minSize;i.forEach(function(b){var x=b.datas,w=x.minSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),N=s*(T?w[1]/T:0);m[0]=Math.max(m[0],I),m[1]=Math.max(m[1],N)})}function c(){var m=n.maxSize;i.forEach(function(b){var x=b.datas,w=x.maxSize,S=x.startOffsetWidth,T=x.startOffsetHeight,I=a*(S?w[0]/S:0),N=s*(T?w[1]/T:0);m[0]=Math.min(m[0],I),m[1]=Math.min(m[1],N)})}var u=ml(t,this,"dragControlStart",e,function(m,b){return q1(t,m,n,b)});o(),c();var f=function(m){r.setFixedDirection(m),u.forEach(function(b,x){b.setFixedDirection(m),q1(t,b.moveable,n,i[x])})};n.setFixedDirection=f;var h=ie(ie({},r),{targets:t.props.targets,events:u.map(function(m){return ie(ie({},m),{setMin:function(b){m.setMin(b),o()},setMax:function(b){m.setMax(b),c()}})}),setFixedDirection:f,setMin:function(m){r.setMin(m),o()},setMax:function(m){r.setMax(m),c()}}),g=Ve(t,"onResizeGroupStart",h);return n.isResize=g!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Xd(t.props,"resizable");K_(t,"onBeforeResize",function(m){Ve(t,"onBeforeResizeGroup",gt(t,e,ie(ie({},m),{targets:r.targets}),!0))});var i=this.dragControl(t,ie(ie({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,s=i.boundingHeight,o=i.dist,c=r.keepRatio,u=[a/(a-o[0]),s/(s-o[1])],f=n.fixedPosition,h=ml(t,this,"dragControl",e,function(m,b){var x=ae(ui(N0(t.rotation/180*Math.PI,3),[b.datas.originalX*u[0],b.datas.originalY*u[1],1],3),2),w=x[0],S=x[1];return ie(ie({},b),{parentDist:null,parentScale:u,dragClient:Rt(f,[w,S]),parentKeepRatio:c})}),g=ie({targets:r.targets,events:h},i);return Ve(t,"onResizeGroup",g),g}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=ml(t,this,"dragControlEnd",e),a=ga(t,e,{targets:t.props.targets,events:i});return Ve(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(s){var o;return i=s.useSnap,{datas:e,parentDirection:s.direction||[1,1],parentIsWidth:(o=s?.horizontal)!==null&&o!==void 0?o:!0,useSnap:i}},request:function(s){return"offsetWidth"in s?n=s.offsetWidth-a.offsetWidth:"deltaWidth"in s&&(n+=s.deltaWidth),"offsetHeight"in s?r=s.offsetHeight-a.offsetHeight:"deltaHeight"in s&&(r+=s.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:s.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function $A(t,e,n,r,i){var a=t.props.groupable,s=t.state,o=s.is3d?4:3,c=e.origin,u=Nn(t.state.rootMatrix,et([c[0],c[1]],a?[0,0]:[s.left,s.top]),o),f=Rt([i.left,i.top],u);e.startAbsoluteOrigin=f,e.prevDeg=Jn(f,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=gl(f,[n,r])}function Kx(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,s=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++s:a<t&&a<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function qA(t,e,n,r){return Kx(Jn(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function GA(t,e,n,r,i,a){var s=t.props.throttleRotate,o=s===void 0?0:s,c=n.prevSnapDeg,u=0,f=!1;if(a){var h=Lbe(t,e,r,i+r);f=h.isSnap,u=i+h.dist}f||(u=ut(i+r,o));var g=u-i;return n.prevSnapDeg=g,[g-c,g,u]}function tW(t,e,n){var r=ae(e,4),i=r[0],a=r[1],s=r[2],o=r[3];if(t==="none")return[];if(gr(t))return t.map(function(w){return tW(w,[i,a,s,o],n)[0]});var c=ae((t||"top").split("-"),2),u=c[0],f=c[1],h=[i,a];u==="left"?h=[s,i]:u==="right"?h=[a,o]:u==="bottom"&&(h=[o,s]);var g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],m=dW(h,n);if(f){var b=f==="top"||f==="left",x=u==="bottom"||u==="left";g=h[b&&!x||!b&&x?0:1]}return[[g,m]]}function cP(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(wr(n,Xe("rotation-control"))||t.props.rotateAroundControls&&wr(n,Xe("around-control"))||wr(n,Xe("control"))&&wr(n,Xe("rotatable")))return!0;var r=t.props.rotationTarget;return r?XO(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var Ebe=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Tbe={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[Ebe],viewClassName:function(t){return t.isDragging("rotatable")?Xe("view-rotation-dragging"):""},render:function(t,e){var n=Xd(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,c=n.resolveAblesWithRotatable,u=t.getState(),f=u.renderPoses,h=u.direction;if(!r)return null;var g=tW(i,f,h),m=[];if(g.forEach(function(S,T){var I=ae(S,2),N=I[0],O=I[1];m.push(e.createElement("div",{key:"rotation".concat(T),className:Xe("rotation"),style:{transform:"translate(-50%) translate(".concat(N[0],"px, ").concat(N[1],"px) rotate(").concat(O,"rad)")}},e.createElement("div",{className:Xe("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Xe("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var b=Il(c||{}),x={};b.forEach(function(S){c[S].forEach(function(T){x[T]=S})});var w=[];gr(s)&&(w=s.map(function(S){var T=x[S];return{data:T?{resolve:T}:{},classNames:T?["move"]:[],dir:S}})),m.push.apply(m,Ne([],ae(LK(t,"rotatable",w,e)),!1))}return o&&m.push.apply(m,Ne([],ae($K(t,e)),!1)),m},dragControlCondition:cP,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,s=e.clientY,o=e.parentRotate,c=e.parentFlag,u=e.isPinch,f=e.isRequest,h=t.state,g=h.target,m=h.left,b=h.top,x=h.direction,w=h.beforeDirection,S=h.targetTransform,T=h.moveableClientRect,I=h.offsetMatrix,N=h.targetMatrix,O=h.allMatrix,D=h.width,k=h.height;if(!f&&!g)return!1;var P=t.getRect();i.rect=P,i.transform=S,i.left=m,i.top=b;var R=function(le){var de=eW(t.state,le);i.fixedDirection=de.fixedDirection,i.fixedOffset=de.fixedOffset,i.fixedPosition=de.fixedPosition,U&&U.setFixedPosition(le)},j=function(le){var de=Sbe(t.state,le);i.fixedDirection=de.fixedDirection,i.fixedOffset=de.fixedOffset,i.fixedPosition=de.fixedPosition,U&&U.setFixedDirection(le)},z=a,B=s;if(f||u||c){var L=o||0;i.beforeInfo={origin:P.beforeOrigin,prevDeg:L,defaultDeg:L,prevSnapDeg:0,startDist:0},i.afterInfo=ie(ie({},i.beforeInfo),{origin:P.origin}),i.absoluteInfo=ie(ie({},i.beforeInfo),{origin:P.origin,startValue:L})}else{var K=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(K){var Q=K.getAttribute("data-direction")||"",q=Dye[Q];if(q){i.isControl=!0,i.isAroundControl=wr(K,Xe("around-control")),i.controlDirection=q;var Y=K.getAttribute("data-resolve");Y&&(i.resolveAble=Y);var J=exe(h.rootMatrix,h.renderPoses,T);n=ae(_r(J,q),2),z=n[0],B=n[1]}}i.beforeInfo={origin:P.beforeOrigin},i.afterInfo={origin:P.origin},i.absoluteInfo={origin:P.origin,startValue:P.rotation};var ne=R;R=function(le){var de=h.is3d?4:3,ce=ae(Rt(vK(N,de),le),2),he=ce[0],ee=ce[1],Se=ui(I,Kd([he,ee],de)),re=ui(O,Kd([le[0],le[1]],de));ne(le);var oe=h.posDelta;i.beforeInfo.origin=et(Se,oe),i.afterInfo.origin=et(re,oe),i.absoluteInfo.origin=et(re,oe),$A(t,i.beforeInfo,z,B,T),$A(t,i.afterInfo,z,B,T),$A(t,i.absoluteInfo,z,B,T)},j=function(le){var de=_r([[0,0],[D,0],[0,k],[D,k]],le);R(de)}}i.startClientX=z,i.startClientY=B,i.direction=x,i.beforeDirection=w,i.startValue=0,i.datas={},U_(t,e,"rotate");var W=!1,U=!1;if(i.isControl&&i.resolveAble){var X=i.resolveAble;X==="resizable"&&(U=lP.dragControlStart(t,ie(ie({},new fp("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}U||(W=yi.dragStart(t,new fp().dragStart([0,0],e))),R(txe(t));var H=gt(t,e,ie(ie({set:function(le){i.startValue=le*Math.PI/180},setFixedDirection:j,setFixedPosition:R},F_(t,e)),{dragStart:W,resizeStart:U})),Z=Ve(t,"onRotateStart",H);return i.isRotate=Z!==!1,h.snapRenderInfo={request:e.isRequest},i.isRotate?H:!1},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.clientDistX,o=e.clientDistY,c=e.parentRotate,u=e.parentFlag,f=e.isPinch,h=e.groupDelta,g=e.resolveMatrix,m=a.beforeDirection,b=a.beforeInfo,x=a.afterInfo,w=a.absoluteInfo,S=a.isRotate,T=a.startValue,I=a.rect,N=a.startClientX,O=a.startClientY;if(S){V_(t,e,"rotate");var D=Oye(e),k=m*D,P=t.props.parentMoveable,R=0,j,z,B=0,L,K,Q=0,q,Y,J=180/Math.PI*T,ne=w.startValue,W=!1,U=N+s,X=O+o;if(!u&&"parentDist"in e){var H=e.parentDist;j=H,L=H,q=H}else f||u?(j=Kx(c,m,b),L=Kx(c,k,x),q=Kx(c,k,w)):(j=qA(U,X,m,b),L=qA(U,X,k,x),q=qA(U,X,k,w),W=!0);if(z=J+j,K=J+L,Y=ne+q,Ve(t,"onBeforeRotate",gt(t,e,{beforeRotation:z,rotation:K,absoluteRotation:Y,setRotation:function(De){L=De-J,j=L,q=L}},!0)),n=ae(GA(t,I,b,j,J,W),3),R=n[0],j=n[1],z=n[2],r=ae(GA(t,I,x,L,J,W),3),B=r[0],L=r[1],K=r[2],i=ae(GA(t,I,w,q,ne,W),3),Q=i[0],q=i[1],Y=i[2],!(!Q&&!B&&!R&&!P&&!g)){var Z=B_(a,"rotate(".concat(K,"deg)"),"rotate(".concat(L,"deg)"));g&&(a.fixedPosition=LO(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var le=$ye(t,L,a),de=et(Rt(h||[0,0],le),a.prevInverseDist||[0,0]);a.prevInverseDist=le,a.requestValue=null;var ce=MK(t,Z,de,f,e),he=ce,ee=gl([U,X],w.startAbsoluteOrigin)-w.startDist,Se=void 0;if(a.resolveAble==="resizable"){var re=lP.dragControl(t,ie(ie({},j0(e,t.state,[e.deltaX,e.deltaY],!!f,!1,"resizable")),{resolveMatrix:!0,parentDistance:ee}));re&&(Se=re,he=gW(he,re,e))}var oe=gt(t,e,ie(ie({delta:B,dist:L,rotate:K,rotation:K,beforeDist:j,beforeDelta:R,beforeRotate:z,beforeRotation:z,absoluteDist:q,absoluteDelta:Q,absoluteRotate:Y,absoluteRotation:Y,isPinch:!!f,resize:Se},ce),he));return Ve(t,"onRotate",oe),oe}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ga(t,e,{});return Ve(t,"onRotateEnd",r),r}},dragGroupControlCondition:cP,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var c=ml(t,this,"dragControlStart",e,function(h,g){var m=h.state,b=m.left,x=m.top,w=m.beforeOrigin,S=Rt(et([b,x],[i,a]),et(w,s));return g.datas.startGroupClient=S,g.datas.groupClient=S,ie(ie({},g),{parentRotate:0})}),u=ie(ie({},o),{targets:t.props.targets,events:c}),f=Ve(t,"onRotateGroupStart",u);return n.isRotate=f!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){K_(t,"onBeforeRotate",function(u){Ve(t,"onBeforeRotateGroup",gt(t,e,ie(ie({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,s=a/180*Math.PI,o=ml(t,this,"dragControl",e,function(u,f){var h=f.datas.startGroupClient,g=ae(f.datas.groupClient,2),m=g[0],b=g[1],x=ae(O0(h,s*i),2),w=x[0],S=x[1],T=[w-m,S-b];return f.datas.groupClient=[w,S],ie(ie({},f),{parentRotate:a,groupDelta:T})});t.rotation=i*r.beforeRotation;var c=ie({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return Ve(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=ml(t,this,"dragControlEnd",e),a=ga(t,e,{targets:t.props.targets,events:i});return Ve(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Abe(t,e){var n,r=t.direction,i=t.classNames,a=t.size,s=t.pos,o=t.zoom,c=t.key,u=r==="horizontal",f=u?"Y":"X";return e.createElement("div",{key:c,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(a),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(f,"(-50%) scale").concat(f,"(").concat(o,")"),n)})}function qO(t,e){return Abe(ie(ie({},t),{classNames:Ne([Xe("line","guideline",t.direction)],ae(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(ut(n,.1),"px")})}),e)}function zV(t,e,n,r,i,a,s,o){var c=t.props.zoom;return n.map(function(u,f){var h=u.type,g=u.pos,m=[0,0];return m[s]=r,m[s?0:1]=-i+g,qO({key:"".concat(e,"TargetGuideline").concat(f),classNames:[Xe("target","bold",h)],posValue:m,sizeValue:a,zoom:c,direction:e},o)})}function LV(t,e,n,r,i,a){var s=t.props,o=s.zoom,c=s.isDisplayInnerSnapDigit,u=e==="horizontal"?cu:uu,f=i[u.start],h=i[u.end];return n.filter(function(g){var m=g.hide,b=g.elementRect;if(m)return!1;if(c&&b){var x=b.rect;if(x[u.start]<=f&&h<=x[u.end])return!1}return!0}).map(function(g,m){var b=g.pos,x=g.size,w=g.element,S=g.className,T=[-r[0]+b[0],-r[1]+b[1]];return qO({key:"".concat(e,"-default-guideline-").concat(m),classNames:w?[Xe("bold"),S]:[Xe("normal"),S],direction:e,posValue:T,sizeValue:x,zoom:o},a)})}function Cm(t,e,n,r,i,a,s,o){var c,u=t.props,f=u.snapDigit,h=f===void 0?0:f,g=u.isDisplaySnapDigit,m=g===void 0?!0:g,b=u.snapDistFormat,x=b===void 0?function(O,D){return O}:b,w=u.zoom,S=e==="horizontal"?"X":"Y",T=e==="vertical"?"height":"width",I=Math.abs(i),N=m?parseFloat(I.toFixed(h)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Xe("guideline-group",e),style:(c={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},c[T]="".concat(I,"px"),c)},qO({direction:e,classNames:[Xe(n),s],size:"100%",posValue:[0,0],sizeValue:I,zoom:w},o),o.createElement("div",{className:Xe("size-value","gap"),style:{transform:"translate".concat(S,"(-50%) scale(").concat(w,")")}},N>0?x(N,e):""))}function Cbe(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,s=i?cu:uu,o=n[s.start],c=n[s.end];return mW(e,function(u){return u.pos[i]}).map(function(u){var f=[],h=[],g=[];return u.forEach(function(m){var b,x,w=m.element,S=m.elementRect.rect;if(S[s.end]<o)f.push(m);else if(c<S[s.start])h.push(m);else if(S[s.start]<=o&&c<=S[s.end]&&r){var T=m.pos,I={element:w,rect:ie(ie({},S),(b={},b[s.end]=S[s.start],b))},N={element:w,rect:ie(ie({},S),(x={},x[s.start]=S[s.end],x))},O=[0,0],D=[0,0];O[i]=T[i],O[a]=T[a],D[i]=T[i],D[a]=T[a]+m.size,f.push({type:t,pos:O,size:0,elementRect:I,direction:"",elementDirection:"end"}),h.push({type:t,pos:D,size:0,elementRect:N,direction:"",elementDirection:"start"})}}),f.sort(function(m,b){return b.pos[a]-m.pos[a]}),h.sort(function(m,b){return m.pos[a]-b.pos[a]}),{total:u,start:f,end:h,inner:g}})}function Ibe(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var c=e.filter(function(w){return w.type===o}),u=o==="vertical"?1:0,f=u?0:1,h=Cbe(o,c,r,a),g=u?uu:cu,m=u?cu:uu,b=r[g.start],x=r[g.end];h.forEach(function(w){var S=w.total,T=w.start,I=w.end,N=w.inner,O=n[f]+S[0].pos[f]-r[m.start],D=r;T.forEach(function(k){var P=k.elementRect.rect,R=D[g.start]-P[g.end];if(R>0){var j=[0,0];j[u]=n[u]+D[g.start]-b-R,j[f]=O,s.push(Cm(t,o,"dashed",s.length,R,j,k.className,i))}D=P}),D=r,I.forEach(function(k){var P=k.elementRect.rect,R=P[g.start]-D[g.end];if(R>0){var j=[0,0];j[u]=n[u]+D[g.end]-b,j[f]=O,s.push(Cm(t,o,"dashed",s.length,R,j,k.className,i))}D=P}),N.forEach(function(k){var P=k.elementRect.rect,R=b-P[g.start],j=P[g.end]-x,z=[0,0],B=[0,0];z[u]=n[u]-R,z[f]=O,B[u]=n[u]+x-b,B[f]=O,s.push(Cm(t,o,"dashed",s.length,R,z,k.className,i)),s.push(Cm(t,o,"dashed",s.length,j,B,k.className,i))})})}),s}function kbe(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(w){return w.type===s}).slice(0,1),c=s==="vertical"?0:1,u=c?0:1,f=c?uu:cu,h=c?cu:uu,g=r[f.start],m=r[f.end],b=r[h.start],x=r[h.end];o.forEach(function(w){var S=w.gap,T=w.gapRects,I=Math.max.apply(Math,Ne([b],ae(T.map(function(D){var k=D.rect;return k[h.start]})),!1)),N=Math.min.apply(Math,Ne([x],ae(T.map(function(D){var k=D.rect;return k[h.end]})),!1)),O=(I+N)/2;I===N||O===(b+x)/2||T.forEach(function(D){var k=D.rect,P=D.className,R=[n[0],n[1]];if(k[f.end]<g)R[c]+=k[f.end]-g;else if(m<k[f.start])R[c]+=k[f.start]-g-S;else return;R[u]+=O-b,a.push(Cm(t,c?"vertical":"horizontal","gap",a.length,S,R,P,i))})})}),a}function uP(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,s=i.overflow,o=i.scrollHeight,c=i.scrollWidth,u=i.clientHeight,f=i.clientWidth,h=i.clientLeft,g=i.clientTop,m=t.props,b=m.snapGap,x=b===void 0?!0:b,w=m.verticalGuidelines,S=m.horizontalGuidelines,T=m.snapThreshold,I=T===void 0?5:T,N=m.maxSnapElementGuidelineDistance,O=N===void 0?1/0:N,D=m.isDisplayGridGuidelines,k=Ga(Wa(t.state)),P=k.top,R=k.left,j=k.bottom,z=k.right,B={top:P,left:R,bottom:j,right:z,center:(R+z)/2,middle:(P+j)/2},L=Nbe(t),K=Ne([],ae(L),!1),Q=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ne){return ne*I});x&&K.push.apply(K,Ne([],ae(Pbe(t,B,Q)),!1));var q=ie({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(K.push.apply(K,Ne([],ae(Obe(t,s?c:f,s?o:u,h,g,q,D)),!1)),a){var Y=i.left,J=i.top;q.left+=Y,q.top+=J,q.right+=Y,q.bottom+=J}return K.push.apply(K,Ne([],ae(rW(S||!1,w||!1,s?c:f,s?o:u,h,g,q)),!1)),K=K.filter(function(ne){var W=ne.element,U=ne.elementRect,X=ne.type;if(!W||!U)return!0;var H=U.rect;return nW(B,H,X,O)}),K}function Pbe(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,c=t.state.elementRects,u=[];return[["vertical",cu,uu],["horizontal",uu,cu]].forEach(function(f){var h=ae(f,3),g=h[0],m=h[1],b=h[2],x=e[m.start],w=e[m.end],S=e[m.center],T=e[b.start],I=e[b.end],N={left:n[0],top:n[1]};function O(P){var R=P.rect,j=N[m.start];return R[m.end]<x+j?x-R[m.end]:w-j<R[m.start]?R[m.start]-w:-1}var D=c.filter(function(P){var R=P.rect;return R[b.start]>I||R[b.end]<T?!1:O(P)>0}).sort(function(P,R){return O(P)-O(R)}),k=[];D.forEach(function(P){D.forEach(function(R){if(P!==R){var j=P.rect,z=R.rect,B=j[b.start],L=j[b.end],K=z[b.start],Q=z[b.end];B>Q||K>L||k.push([P,R])}})}),k.forEach(function(P){var R=ae(P,2),j=R[0],z=R[1],B=j.rect,L=z.rect,K=B[m.start],Q=B[m.end],q=L[m.start],Y=L[m.end],J=N[m.start],ne=0,W=0,U=!1,X=!1,H=!1;if(Q<=x&&w<=q){if(X=!0,ne=(q-Q-(w-x))/2,W=Q+ne+(w-x)/2,Ae(W-S)>J)return}else if(Q<q&&Y<x+J){if(U=!0,ne=q-Q,W=Y+ne,Ae(W-x)>J)return}else if(Q<q&&w-J<K){if(H=!0,ne=q-Q,W=K-ne,Ae(W-w)>J)return}else return;ne&&nW(e,L,g,a)&&(ne>o||u.push({type:g,pos:g==="vertical"?[W,0]:[0,W],element:z.element,size:0,className:z.className,isStart:U,isCenter:X,isEnd:H,gap:ne,hide:!0,gapRects:[j,z],direction:"",elementDirection:""}))})}),u}function Dbe(t,e,n,r){var i,a,s=t.props,o=t.state,c=s.snapGridAll,u=s.snapGridWidth,f=u===void 0?0:u,h=s.snapGridHeight,g=h===void 0?0:h,m=o.snapRenderInfo,b=m&&(((i=m.direction)===null||i===void 0?void 0:i[0])||((a=m.direction)===null||a===void 0?void 0:a[1])),x=t.moveables;if(c&&x&&b&&(f||g)){if(o.snapThresholdInfo)return;o.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var w=t.getRect(),S=w.children,T=m.direction;if(S){var I=T.map(function(O,D){var k=D===0?{snapSize:f,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:g,posName:"top",sizeName:"height",clientOffset:r.top-n},P=k.snapSize,R=k.posName,j=k.sizeName,z=k.clientOffset;if(!P)return{dir:O,multiple:1,snapSize:P,snapOffset:0};var B=w[j],L=w[R],K=HH(S.map(function(U){return[U[R]-L,U[j],B-U[j]-U[R]+L]})).filter(function(U){return U}).sort(function(U,X){return U-X}),Q=K[0],q=K.map(function(U){return ut(U/Q,.1)*P}),Y=1,J=ut(B/Q,.1);for(Y=1;Y<=10&&!q.every(function(U){return U*Y%1===0});++Y);var ne=(-O+1)/2,W=V1(L-z,L-z+B,ne,1-ne);return{multiple:J*Y,dir:O,snapSize:P,snapOffset:Math.round(W/P)}}),N=I.map(function(O){return O.multiple||1});o.snapThresholdInfo.multiples=N,o.snapThresholdInfo.offset=I.map(function(O){return O.snapOffset}),I.forEach(function(O,D){O.snapSize})}}else o.snapThresholdInfo=null}function Obe(t,e,n,r,i,a,s){r===void 0&&(r=0),i===void 0&&(i=0);var o=t.props,c=t.state,u=o.snapGridWidth,f=u===void 0?0:u,h=o.snapGridHeight,g=h===void 0?0:h,m=[],b=a.left,x=a.top,w=[0,0];Dbe(t,r,i,a);var S=c.snapThresholdInfo,T=f,I=g;if(S&&(f*=S.multiples[0]||1,g*=S.multiples[1]||1,w=S.offset),g){for(var N=function(D){m.push({type:"horizontal",pos:[b,ut(w[1]*I+D-i+x,.1)],className:Xe("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},O=0;O<=n*2;O+=g)N(O);for(var O=-g;O>=-n;O-=g)N(O)}if(f){for(var N=function(k){m.push({type:"vertical",pos:[ut(w[0]*T+k-r+b,.1),x],className:Xe("grid-guideline"),size:n,hide:!s,direction:"",grid:!0})},O=0;O<=e*2;O+=f)N(O);for(var O=-f;O>=-e;O-=f)N(O)}return m}function nW(t,e,n,r){return n==="horizontal"?Ae(t.right-e.left)<=r||Ae(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Ae(t.bottom-e.top)<=r||Ae(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Nbe(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(g){return!g.refresh}),a=r.map(function(g){return Ps(g)&&"element"in g?ie(ie({},g),{element:_o(g.element,!0)}):{element:_o(g,!0)}}).filter(function(g){return g.element}),s=G0e(i.map(function(g){return g.element}),a.map(function(g){return g.element})),o=s.maintained,c=s.added,u=[];o.forEach(function(g){var m=ae(g,2),b=m[0],x=m[1];u[x]=i[b]}),Rbe(t,c.map(function(g){return a[g]})).map(function(g,m){u[c[m]]=g}),e.elementRects=u;var f=BO(t.props.elementSnapDirections),h=[];return u.forEach(function(g){var m=g.element,b=g.top,x=b===void 0?f.top:b,w=g.left,S=w===void 0?f.left:w,T=g.right,I=T===void 0?f.right:T,N=g.bottom,O=N===void 0?f.bottom:N,D=g.center,k=D===void 0?f.center:D,P=g.middle,R=P===void 0?f.middle:P,j=g.className,z=g.rect,B=FO({top:x,right:I,left:S,bottom:O,center:k,middle:R},z),L=B.horizontal,K=B.vertical,Q=B.horizontalNames,q=B.verticalNames,Y=z.top,J=z.left,ne=z.right-J,W=z.bottom-Y,U=[ne,W];K.forEach(function(X,H){h.push({type:"vertical",element:m,pos:[ut(X,.1),Y],size:W,sizes:U,className:j,elementRect:g,elementDirection:kV[q[H]]||q[H],direction:""})}),L.forEach(function(X,H){h.push({type:"horizontal",element:m,pos:[J,ut(X,.1)],size:ne,sizes:U,className:j,elementRect:g,elementDirection:kV[Q[H]]||Q[H],direction:""})})}),h}function VV(t,e){return t?t.map(function(n){var r=Ps(n)?n:{pos:n},i=r.pos;return up(i)?r:ie(ie({},r),{pos:an(i,e)})}):[]}function rW(t,e,n,r,i,a,s){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],c=s.left,u=s.top,f=s.bottom,h=s.right,g=n+h-c,m=r+f-u;return VV(t,m).forEach(function(b){o.push({type:"horizontal",pos:[c,ut(b.pos-a+u,.1)],size:g,className:b.className,direction:""})}),VV(e,g).forEach(function(b){o.push({type:"vertical",pos:[ut(b.pos-i+c,.1),u],size:m,className:b.className,direction:""})}),o}function Rbe(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,s=r.is3d,o=r.offsetDelta,c=s?4:3,u=ae(ibe(a,i,c),2),f=u[0],h=u[1],g=n?0:o[0],m=n?0:o[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),w=x.left-f-g,S=x.top-h-m,T=S+x.height,I=w+x.width,N=ae(gp(a,[w,S],c),2),O=N[0],D=N[1],k=ae(gp(a,[I,T],c),2),P=k[0],R=k[1];return ie(ie({},b),{rect:{left:O,right:P,top:D,bottom:R,center:(O+P)/2,middle:(D+R)/2}})})}function Jb(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var s=_o(r,!0);if(s){var o=Zm(s),c=GV(e,[o.left-i.left,o.top-i.top]),u=GV(e,[o.right-i.right,o.bottom-i.bottom]);a.left=ut(c[0],1e-5),a.top=ut(c[1],1e-5),a.right=ut(u[0],1e-5),a.bottom=ut(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=uP(t),e.enableSnap=!0,!0}function iW(t,e,n,r,i,a){var s=hf(t,e,n,a?4:3),o=_r(s,r);return HO(s,et(i,o))}function BV(t){return t?t/Ae(t):0}function Mbe(t,e,n,r,i,a){var s=a.fixedDirection,o=lbe(n,s,r),c=$O(t,e,n,r),u=Ne(Ne([],ae(xbe(t,e,o,r,i,a)),!1),ae(ZK(t,c,a)),!1),f=G1(u,0),h=G1(u,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function jbe(t,e,n,r,i,a,s,o,c){var u=_r(e,s),f=G_(t,o,{vertical:[u[0]],horizontal:[u[1]]}),h=f.horizontal.offset,g=f.vertical.offset;if(ut(g,rP)||ut(h,rP)){var m=ae(Oo({datas:c,distX:-g,distY:-h}),2),b=m[0],x=m[1],w=Math.min(i||1/0,n+s[0]*b),S=Math.min(a||1/0,r+s[1]*x);return[w-n,S-r]}return[0,0]}function aW(t,e,n,r,i,a,s,o){for(var c=Wa(t.state),u=t.props.keepRatio,f=0,h=0,g=0;g<2;++g){var m=e(f,h),b=Mbe(t,m,i,u,s,o),x=b.width,w=b.height,S=x.isBound,T=w.isBound,I=x.offset,N=w.offset;if(g===1&&(S||(I=0),T||(N=0)),g===0&&s&&!S&&!T)return[0,0];if(u){var O=Ae(I)*(n?1/n:1),D=Ae(N)*(r?1/r:1),k=S&&T?O<D:T||!S&&O<D;k?I=n*N/r:N=r*I/n}f+=I,h+=N}if(!u&&i[0]&&i[1]){var P=_be(t,c,i,a,o),R=P.maxWidth,j=P.maxHeight,z=ae(jbe(t,e(f,h).map(function(K){return K.map(function(Q){return ut(Q,rP)})}),n+f,r+h,R,j,i,s,o),2),I=z[0],N=z[1];f+=I,h+=N}return[f,h]}function Xm(t){return t<0&&(t=t%360+360),t%=360,t}function zbe(t,e){e=Xm(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return Ae(t-r)<Ae(t-i)?r:i}function HA(t,e){t=Xm(t),e=Xm(e);var n=Xm(t-e);return Math.min(n,360-n)}function Lbe(t,e,n,r){var i,a=t.props,s=(i=a[qK])!==null&&i!==void 0?i:5,o=a[GK];if(Gp(t,"rotatable")){var c=e.pos1,u=e.pos2,f=e.pos3,h=e.pos4,g=e.origin,m=n*Math.PI/180,b=[c,u,f,h].map(function(N){return et(N,g)}),x=b.map(function(N){return O0(N,m)}),w=Ne(Ne([],ae(ebe(t,b,x,g,n)),!1),ae(pbe(t,b,x,g,n)),!1);w.sort(function(N,O){return Ae(N-n)-Ae(O-n)});var S=w.length>0;if(S)return{isSnap:S,dist:S?w[0]:n}}if(o?.length&&s){var T=o.slice().sort(function(N,O){return HA(N,r)-HA(O,r)}),I=T[0];if(HA(I,r)<=s)return{isSnap:!0,dist:n+zbe(r,I)-r}}return{isSnap:!1,dist:n}}function Vbe(t,e,n,r,i,a,s){if(!Gp(t,"resizable"))return[0,0];var o=s.fixedDirection,c=s.nextAllMatrix,u=t.state,f=u.allMatrix,h=u.is3d;return aW(t,function(g,m){return iW(c||f,e+g,n+m,o,i,h)},e,n,r,i,a,s)}function Bbe(t,e,n,r,i){if(!Gp(t,"scalable"))return[0,0];var a=i.startOffsetWidth,s=i.startOffsetHeight,o=i.fixedPosition,c=i.fixedDirection,u=i.is3d,f=aW(t,function(h,g){return iW(Vye(i,Rt(e,[h/a,g/s])),a,s,c,o,u)},a,s,n,o,r,i);return[f[0]/a,f[1]/s]}function Fbe(t,e){e.absolutePoses=Wa(t.state)}function FV(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;$i(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return ie(ie({},r),{direction:i.direction})})}function UV(t,e,n,r,i,a){var s=VO($_(t,a),e,n),o=s.vertical,c=s.horizontal,u=Ph();o.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.left=!0),b.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:b.pos}))}),c.forEach(function(b){b.isBound&&(b.direction==="start"&&(u.top=!0),b.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:b.pos}))});var f=gbe(t),h=f.boundMap,g=f.vertical,m=f.horizontal;return g.forEach(function(b){Cl(r,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||r.push({type:"bounds",pos:b})}),m.forEach(function(b){Cl(i,function(x){var w=x.type,S=x.pos;return w==="bounds"&&S===b})>=0||i.push({type:"bounds",pos:b})}),{boundMap:u,innerBoundMap:h}}var Ube=YO("",["resizable","scalable"]),$be={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",qK,GK,HK,KK,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,s=n.pos2,o=n.pos3,c=n.pos4,u=n.snapRenderInfo,f=t.props.snapRenderThreshold,h=f===void 0?1:f;if(!u||!u.render||!Gp(t,""))return Oh(t,"boundMap",Ph(),function(Z){return JSON.stringify(Z)}),Oh(t,"innerBoundMap",Ph(),function(Z){return JSON.stringify(Z)}),[];n.guidelines=uP(t);var g=Math.min(a[0],s[0],o[0],c[0]),m=Math.min(a[1],s[1],o[1],c[1]),b=u.externalPoses||[],x=Wa(t.state),w=[],S=[],T=[],I=[],N=[],O=Ga(x),D=O.width,k=O.height,P=O.top,R=O.left,j=O.bottom,z=O.right,B={left:R,right:z,top:P,bottom:j,center:(R+z)/2,middle:(P+j)/2},L=b.length>0,K=L?Ga(b):{};if(!u.request){if(u.direction&&N.push(obe(t,x,u.direction,h,h)),u.snap){var Q=Ga(x);u.center&&(Q.middle=(Q.top+Q.bottom)/2,Q.center=(Q.left+Q.right)/2),N.push(PV(t,Q,h,h))}L&&(u.center&&(K.middle=(K.top+K.bottom)/2,K.center=(K.left+K.right)/2),N.push(PV(t,K,h,h))),N.forEach(function(Z){var le=Z.vertical.posInfos,de=Z.horizontal.posInfos;w.push.apply(w,Ne([],ae(le.filter(function(ce){var he=ce.guidelineInfos;return he.some(function(ee){var Se=ee.guideline;return!Se.hide})}).map(function(ce){return{type:"snap",pos:ce.pos}})),!1)),S.push.apply(S,Ne([],ae(de.filter(function(ce){var he=ce.guidelineInfos;return he.some(function(ee){var Se=ee.guideline;return!Se.hide})}).map(function(ce){return{type:"snap",pos:ce.pos}})),!1)),T.push.apply(T,Ne([],ae(FV(le)),!1)),I.push.apply(I,Ne([],ae(FV(de)),!1))})}var q=UV(t,[R,z],[P,j],w,S),Y=q.boundMap,J=q.innerBoundMap;L&&UV(t,[K.left,K.right],[K.top,K.bottom],w,S,u.externalBounds);var ne=Ne(Ne([],ae(T),!1),ae(I),!1),W=ne.filter(function(Z){return Z.element&&!Z.gapRects}),U=ne.filter(function(Z){return Z.gapRects}).sort(function(Z,le){return Z.gap-le.gap});Ve(t,"onSnap",{guidelines:ne.filter(function(Z){var le=Z.element;return!le}),elements:W,gaps:U},!0);var X=Oh(t,"boundMap",Y,function(Z){return JSON.stringify(Z)},Ph()),H=Oh(t,"innerBoundMap",J,function(Z){return JSON.stringify(Z)},Ph());return(Y===X||J===H)&&Ve(t,"onBound",{bounds:Y,innerBounds:J},!0),Ne(Ne(Ne(Ne(Ne(Ne([],ae(Ibe(t,W,[g,m],B,e)),!1),ae(kbe(t,U,[g,m],B,e)),!1),ae(LV(t,"horizontal",I,[i,r],B,e)),!1),ae(LV(t,"vertical",T,[i,r],B,e)),!1),ae(zV(t,"horizontal",S,g,r,D,0,e)),!1),ae(zV(t,"vertical",w,m,i,k,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Jb(t)},drag:function(t){var e=t.state;Jb(t)||(e.guidelines=uP(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(Ube(t,e)||cP(t,e))return!0;if(!e.isRequest&&e.inputEvent)return wr(e.inputEvent.target,Xe("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Jb(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Jb(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function qbe(t,e){return[t[0]*e[0],t[1]*e[1]]}function Xe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Vve.apply(void 0,Ne([MO],ae(t),!1))}function sW(t){t()}function Gbe(t){return!t||t==="none"?[1,0,0,1,0,0]:Ps(t)?t:Dv(t)}function Qm(t,e,n){return F1(e,Wd(n,e),t,Wd(n.map(function(r){return-r}),e))}function Hbe(t,e,n){if(e==="%"){var r=GO(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function Kbe(t){var e=Wbe(KO(t,":before"));return e.map(function(n,r){var i=I0(n),a=i.value,s=i.unit;return a*Hbe(t,s,r===0)})}function K1(t){return t?t.split(" "):["0","0"]}function Wbe(t){return K1(t.transformOrigin)}function oW(t){var e=qi(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var s=[],o=function(u){var f=i[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(h){return f[h]}).join(", "),")"))},c=0;c<a;++c)o(c);return s.join(" ")}return""}function Nv(t,e,n,r,i){var a,s,o=EO(t)||wu(t),c=!1,u,f;if(!t||n)u=t;else{var h=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,g=t.parentElement;h?(c=!0,f=g,u=h):u=g}for(var m=!1,b=t===e||u===e,x="relative",w=1,S=parseFloat(i?.("zoom"))||1,T=i?.("position");u&&u!==o;){e===u&&(b=!0);var I=qi(u),N=u.tagName.toLowerCase(),O=oW(u),D=I("willChange"),k=parseFloat(I("zoom"))||1;if(x=I("position"),r&&k!==1){w=k;break}if(!n&&r&&S!==1&&T&&T!=="absolute"||N==="svg"||N==="foreignobject"||x!=="static"||O&&O!=="none"||D==="transform")break;var P=(s=t?.assignedSlot)===null||s===void 0?void 0:s.parentNode,R=u.parentNode;P&&(c=!0,f=R);var j=R;if(j&&j.nodeType===11){u=j.host,m=!0,x=qi(u)("position");break}u=j,x="relative"}return{offsetZoom:w,hasSlot:c,parentSlotElement:f,isCustomElement:m,isStatic:x==="static",isEnd:b||!u||u===o,offsetParent:u||o}}function Ybe(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,s=qi(t),o=M_(i),c=!o,u,f;return!c&&(r!=="svg"||t.ownerSVGElement)?(u=AK?Kbe(t):K1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice(),c=!0,r==="svg"?(i=0,a=0):(n=ae(Zbe(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],u[0]=n[2],u[1]=n[3])):(u=K1(s("transformOrigin")).map(function(h){return parseFloat(h)}),f=u.slice()),{tagName:r,isSVG:o,hasOffset:c,offset:[i||0,a||0],origin:u,targetOrigin:f}}function lW(t,e){var n=qi(t),r=qi(wu(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),s=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(s=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,s]}function dP(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Ds(n,3,4))})}function Xbe(t){for(var e=t.parentElement,n=!1,r=wu(t);e;){var i=KO(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function H_(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(yK(t,!e).join(","),")")}function GO(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function Qbe(t,e){var n,r=GO(t),i=r.width,a=r.height,s=r.clientWidth,o=r.clientHeight,c=s/i,u=o/a,f=t.preserveAspectRatio.baseVal,h=f.align,g=f.meetOrSlice,m=[0,0],b=[c,u],x=[0,0];if(h!==1){var w=(h-2)%3,S=Math.floor((h-2)/3);m[0]=i*w/2,m[1]=a*S/2;var T=g===2?Math.max(u,c):Math.min(c,u);b[0]=T,b[1]=T,x[0]=(s-i)/2*w,x[1]=(o-a)/2*S}var I=DO(b,e);return n=ae(x,2),I[e*(e-1)]=n[0],I[e*(e-1)+1]=n[1],Qm(I,e,m)}function Zbe(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=qi(t),a=i("transform-box")==="fill-box",s=t.getBBox(),o=GO(t.ownerSVGElement),c=s.x,u=s.y;r==="foreignobject"&&!c&&!u&&(c=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var f=c-o.x,h=u-o.y,g=a?e[0]:e[0]-f,m=a?e[1]:e[1]-h;return[f,h,g,m]}function Nn(t,e,n){return ui(t,Kd(e,n),n)}function hf(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Nn(t,i,r)})}function Ga(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,Ne([],ae(e),!1)),i=Math.min.apply(Math,Ne([],ae(n),!1)),a=Math.max.apply(Math,Ne([],ae(e),!1)),s=Math.max.apply(Math,Ne([],ae(n),!1)),o=a-r,c=s-i;return{left:r,top:i,right:a,bottom:s,width:o,height:c}}function $V(t,e,n,r){var i=hf(t,e,n,r);return Ga(i)}function Jbe(t,e,n,r,i){var a,s=t.target,o=t.origin,c=e.matrix,u=uW(s),f=u.offsetWidth,h=u.offsetHeight,g=n.getBoundingClientRect(),m=[0,0];n===wu(n)&&(m=lW(s,!0));for(var b=s.getBoundingClientRect(),x=b.left-g.left+n.scrollLeft-(n.clientLeft||0)+m[0],w=b.top-g.top+n.scrollTop-(n.clientTop||0)+m[1],S=b.width,T=b.height,I=F1(r,i,c),N=$V(I,f,h,r),O=N.left,D=N.top,k=N.width,P=N.height,R=Nn(I,o,r),j=et(R,[O,D]),z=[x+j[0]*S/k,w+j[1]*T/P],B=[0,0],L=0;++L<10;){var K=Ao(i,r);a=ae(et(Nn(K,z,r),Nn(K,R,r)),2),B[0]=a[0],B[1]=a[1];var Q=F1(r,i,Wd(B,r),c),q=$V(Q,f,h,r),Y=q.left,J=q.top,ne=Y-x,W=J-w;if(Ae(ne)<2&&Ae(W)<2)break;z[0]-=ne,z[1]-=W}return B.map(function(U){return Math.round(U)})}function exe(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(c){return Nn(t,c,i)}),s=n.left,o=n.top;return a.map(function(c){return[c[0]+s,c[1]+o]})}function Ka(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function cW(t,e){return Ka([e[0]-t[0],e[1]-t[1]])}function Im(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Jn(t,e));var i=cW(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function W1(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(o,c){return o+c[0]},0)/i,s=n.reduce(function(o,c){return o+c[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Xd(t,e){var n=t[e];return Ps(n)?ie(ie({},t),n):t}function uW(t){var e=t&&!M_(t.offsetWidth),n=0,r=0,i=0,a=0,s=0,o=0,c=0,u=0,f=0,h=0,g=0,m=0,b=1/0,x=1/0,w=1/0,S=1/0,T=0,I=0,N=!1;if(t)if(!e&&t.ownerSVGElement){var O=t.getBBox();N=!0,n=O.width,r=O.height,s=n,o=r,c=n,u=r,i=n,a=r}else{var D=qi(t),k=t.style,P=D("boxSizing")==="border-box",R=parseFloat(D("borderLeftWidth"))||0,j=parseFloat(D("borderRightWidth"))||0,z=parseFloat(D("borderTopWidth"))||0,B=parseFloat(D("borderBottomWidth"))||0,L=parseFloat(D("paddingLeft"))||0,K=parseFloat(D("paddingRight"))||0,Q=parseFloat(D("paddingTop"))||0,q=parseFloat(D("paddingBottom"))||0,Y=L+K,J=Q+q,ne=R+j,W=z+B,U=Y+ne,X=J+W,H=D("position"),Z=0,le=0;if("clientLeft"in t){var de=null;if(H==="absolute"){var ce=Nv(t,wu(t));de=ce.offsetParent}else de=t.parentElement;if(de){var he=qi(de);Z=parseFloat(he("width")),le=parseFloat(he("height"))}}f=Math.max(Y,an(D("minWidth"),Z)||0),h=Math.max(J,an(D("minHeight"),le)||0),b=an(D("maxWidth"),Z),x=an(D("maxHeight"),le),isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0),T=an(k.width,0)||0,I=an(k.height,0)||0,s=parseFloat(D("width"))||0,o=parseFloat(D("height"))||0,c=Ae(s-T)<1?qk(f,T||s,b):s,u=Ae(o-I)<1?qk(h,I||o,x):o,n=c,r=u,i=c,a=u,P?(w=b,S=x,g=f,m=h,c=n-U,u=r-X):(w=b+U,S=x+X,g=f+U,m=h+X,n=c+U,r=u+X),i=c+Y,a=u+J}return{svg:N,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:c,contentHeight:u,inlineCSSWidth:T,inlineCSSHeight:I,cssWidth:s,cssHeight:o,minWidth:f,minHeight:h,maxWidth:b,maxHeight:x,minOffsetWidth:g,minOffsetHeight:m,maxOffsetWidth:w,maxOffsetHeight:S}}function dW(t,e){return Jn(e>0?t[0]:t[1],e>0?t[1]:t[0])}function ex(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function fW(t,e){var n=t===wu(t)||t===EO(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=qi(t)("overflow")!=="visible",ie(ie({},e),r)}function KA(t,e,n,r){var i=t.left,a=t.right,s=t.top,o=t.bottom,c=e.top,u=e.left,f={left:u+i,top:c+s,right:u+a,bottom:c+o,width:a-i,height:o-s};return n&&r?fW(n,f):f}function Zm(t,e){var n=0,r=0,i=0,a=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,i=s.width,a=s.height}var o={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?fW(t,o):o}function txe(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,s=i.offsetHeight,o=i.svg,c=i.transformOrigin;return!n&&o&&r?QO(r,a,s):c}function hW(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=pW(a,r)}return i}function pW(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function HO(t,e){return[Rt(e,t[0]),Rt(e,t[1]),Rt(e,t[2]),Rt(e,t[3])]}function Wa(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,s=t.pos4;return HO([r,i,a,s],[e,n])}function fP(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function Dh(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&fP(t,e),r?.unset(),t[n]=null}function _i(t,e){if(e){var n=qp(e);n.nextStyle=ie(ie({},n.nextStyle),t)}return{style:t,cssText:Il(t).map(function(r){return"".concat(Hx(r,"-"),": ").concat(t[r],";")}).join("")}}function gW(t,e,n){var r=e.afterTransform||e.transform;return ie(ie({},_i(ie(ie(ie({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function gt(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=ie(ie({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ga(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),ie(ie({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function K_(t,e,n){t._emitter.on(e,n)}function Ve(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function KO(t,e){return Qc(t).getComputedStyle(t,e)}function tx(t,e,n){var r={},i={};return t.filter(function(a){var s=a.name;if(r[s]||!e.some(function(o){return a[o]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[s]=!0,!0})}function hP(t,e){return t===e||t==null&&e==null}function qV(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!M_(i))return i}return t[n]}function mW(t,e){var n=[],r=[];return t.forEach(function(i,a){var s=e(i,a,t),o=r.indexOf(s),c=n[o]||[];o===-1&&(r.push(s),n.push(c)),c.push(i)}),n}function nxe(t,e){var n=[],r={};return t.forEach(function(i,a){var s=e(i,a,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(i)}),n}function vW(t){return t.reduce(function(e,n){return e.concat(n)},[])}function pp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Ae(r)-Ae(n)}),t[0]}function gp(t,e,n){return ui(Ao(t,n),Kd(e,n),n)}function rxe(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=ae(gp(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function Ra(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Nn(t,[BV(n[0]||1),0],r),a=Nn(t,[0,BV(n[1]||1)],r),s=Nn(t,[n[0]/Ka(i),n[1]/Ka(a)],r);return Rt(e,s)}function ys(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Y1(t){return Ae(t)<=Ti?0:t}function WO(t){return function(e){if(!e.isDragging(t))return"";var n=Hye(e,t),r=n.deg;return r?Xe("view-control-rotation".concat(r)):""}}function YO(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return wr(i,Xe("direction"))&&(!t||wr(i,Xe(t)))}}function ixe(t,e,n){var r,i=dp(t,{"x%":function(O){return O/100*e.offsetWidth},"y%":function(O){return O/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),s=t.slice(0,n<0?void 0:n+1),o=t[n]||"",c=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),f=i.slice(0,n<0?void 0:n),h=i.slice(0,n<0?void 0:n+1),g=(r=i[n])!==null&&r!==void 0?r:dp([""])[0],m=n<0?[]:i.slice(n),b=n<0?[]:i.slice(n+1),x=g?[g]:[],w=xh(f),S=xh(h),T=xh(m),I=xh(b),N=on(w,T,4);return{transforms:t,beforeFunctionMatrix:w,beforeFunctionMatrix2:S,targetFunctionMatrix:xh(x),afterFunctionMatrix:T,afterFunctionMatrix2:I,allFunctionMatrix:N,beforeFunctions:f,beforeFunctions2:h,targetFunction:x[0],afterFunctions:m,afterFunctions2:b,beforeFunctionTexts:a,beforeFunctionTexts2:s,targetFunctionText:o,afterFunctionTexts:c,afterFunctionTexts2:u}}function axe(t){return!t||!Ps(t)||Up(t)?!1:gr(t)||"length"in t}function _o(t,e){return t?Up(t)?t:Ui(t)?e?document.querySelector(t):t:wO(t)?t():XH(t)?t:"current"in t?t.current:t:null}function XO(t,e){if(!t)return[];var n=axe(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Ui(i)&&e?Ne(Ne([],ae(r),!1),ae([].slice.call(document.querySelectorAll(i))),!1):(gr(i)?r.push(XO(i,e)):r.push(_o(i,e)),r)},[])}function sxe(t,e,n){var r=Jn(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function GV(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=Ao(n,i);return r||(a=Ds(a,3,4)),a[12]=0,a[13]=0,a[14]=0,$0e(a,e)}function yW(t,e,n,r,i){var a=ae(t,2),s=a[0],o=a[1],c=0,u=0;if(i&&s&&o){var f=Jn([0,0],e),h=Jn([0,0],r),g=Ka(e),m=Math.cos(f-h)*g;if(!r[0])u=m,c=u*n;else if(!r[1])c=m,u=c/n;else{var b=r[0]*s,x=r[1]*o,w=Math.atan2(b+e[0],x+e[1]),S=Math.atan2(b,x);w<0&&(w+=Math.PI*2),S<0&&(S+=Math.PI*2);var T=0;Ae(w-S)<Math.PI/2||Ae(w-S)>Math.PI/2*3||(S+=Math.PI),T=w-S,T>Math.PI*2?T-=Math.PI*2:T>Math.PI?T=2*Math.PI-T:T<-Math.PI&&(T=-2*Math.PI-T);var I=Ka([b+e[0],x+e[1]])*Math.cos(T);c=I*Math.sin(S)-b,u=I*Math.cos(S)-x,r[0]<0&&(c*=-1),r[1]<0&&(u*=-1)}}else c=r[0]*e[0],u=r[1]*e[1];return[c,u]}function bW(t,e,n,r){var i,a=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,c=0,u=0,f=r.distX,h=r.distY,g=r.pinchScale,m=r.parentDistance,b=r.parentDist,x=r.parentScale,w=n.fixedDirection,S=[0,1].map(function(k){return Ae(t[k]-w[k])}),T=[0,1].map(function(k){var P=S[k];return P!==0&&(P=2/P),P});if(b)c=b[0],u=b[1],e&&(c?u||(u=c/a):c=u*a);else if(up(g))c=(g-1)*s,u=(g-1)*o;else if(x)c=(x[0]-1)*s,u=(x[1]-1)*o;else if(m){var I=s*S[0],N=o*S[1],O=Ka([I,N]);c=m/O*I*T[0],u=m/O*N*T[1]}else{var D=Oo({datas:n,distX:f,distY:h});D=T.map(function(k,P){return D[P]*k}),i=ae(yW([s,o],D,a,t,e),2),c=i[0],u=i[1]}return{distWidth:c,distHeight:u}}function pP(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=ae(t.split(" "),2),r=n[0],i=n[1],a=pP(r||""),s=pP(i||""),o=ie(ie({},a),s),c={x:"50%",y:"50%"};return o.x&&(c.x=o.x),o.y&&(c.y=o.y),o.value&&(o.x&&!o.y&&(c.y=o.value),!o.x&&o.y&&(c.x=o.value)),c}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function QO(t,e,n){var r=pP(t,!0),i=r.x,a=r.y;return[an(i,e)||0,an(a,n)||0]}function oxe(t,e,n){var r=t.map(function(a){return et(a,e)}),i=r.map(function(a){return O0(a,n)});return{prev:r,next:i,result:i.map(function(a){return Rt(a,e)})}}function xW(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=gr(n),s=gr(i);return a&&s?xW(n,i):!a&&!s?n===i:!1})}function Oh(t,e,n,r,i){var a=t._store,s=a[e];if(!(e in a))if(i!=null)a[e]=i,s=i;else return a[e]=n,n;return s===n||r(s)===r(n)?s:(a[e]=n,n)}function bi(t){return t>=0?1:-1}function Ae(t){return Math.abs(t)}function WA(t,e){return n0e(t).map(function(n){return e(n)})}function wW(t){return up(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var lxe=M0("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,s=t.props,o=s.pinchable,c=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),f="drag".concat(r?"Group":"","ControlStart"),h=(o===!0?t.controlAbles:c.filter(function(x){return o.indexOf(x.name)>-1})).filter(function(x){return x.canPinch&&x[f]}),g=gt(t,e,{});r&&(g.targets=r);var m=Ve(t,u,g);n.isPinch=m!==!1,n.ables=h;var b=n.isPinch;return b?(h.forEach(function(x){if(a[x.name]=a[x.name]||{},!!x[f]){var w=ie(ie({},e),{datas:a[x.name],parentRotate:i,isPinch:!0});x[f](t,w)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},b):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,s=e.inputEvent,o=e.targets,c=e.angle;if(n.isPinch){var u=i*(1-1/r),f=gt(t,e,{});o&&(f.targets=o);var h="onPinch".concat(o?"Group":"");Ve(t,h,f);var g=n.ables,m="drag".concat(o?"Group":"","Control");return g.forEach(function(b){b[m]&&b[m](t,ie(ie({},e),{datas:a[b.name],inputEvent:s,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:c,isPinch:!0}))}),f}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(a?"Group":"","End"),c=ga(t,e,{isDrag:r});a&&(c.targets=a),Ve(t,o,c);var u=n.ables,f="drag".concat(a?"Group":"","ControlEnd");return u.forEach(function(h){h[f]&&h[f](t,ie(ie({},e),{isDrag:r,datas:s[h.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,ie(ie({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,ie(ie({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,ie(ie({},e),{targets:t.props.targets}))}}),HV=YO("scalable"),cxe={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:FK("scalable"),dragControlCondition:HV,viewClassName:WO("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,s=hW(a,r,i,n),o=t.state,c=o.width,u=o.height,f=o.targetTransform,h=o.target,g=o.pos1,m=o.pos2,b=o.pos4;if(!s||!h)return!1;r||ff(t,e),n.datas={},n.transform=f,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=c,n.startOffsetHeight=u,n.startValue=[1,1];var x=!s[0]&&!s[1]||s[0]||!s[1];U_(t,e,"scale"),n.isWidth=x;function w(D){n.ratio=D&&isFinite(D)?D:0}n.startPositions=Wa(t.state);function S(D){var k=JK(n.startPositions,D);n.fixedDirection=k.fixedDirection,n.fixedPosition=k.fixedPosition,n.fixedOffset=k.fixedOffset}n.setFixedDirection=S,w(gl(g,m)/gl(m,b)),S([-s[0],-s[1]]);var T=function(D){n.minScaleSize=D},I=function(D){n.maxScaleSize=D};T([-1/0,-1/0]),I([1/0,1/0]);var N=gt(t,e,ie(ie({direction:s,set:function(D){n.startValue=D},setRatio:w,setFixedDirection:S,setMinScaleSize:T,setMaxScaleSize:I},F_(t,e)),{dragStart:yi.dragStart(t,new fp().dragStart([0,0],e))})),O=Ve(t,"onScaleStart",N);return n.startFixedDirection=n.fixedDirection,O!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?N:!1},dragControl:function(t,e){V_(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,s=e.dragClient,o=e.isRequest,c=e.useSnap,u=e.resolveMatrix,f=n.prevDist,h=n.direction,g=n.startOffsetWidth,m=n.startOffsetHeight,b=n.isScale,x=n.startValue,w=n.isWidth,S=n.ratio;if(!b)return!1;var T=t.props,I=T.throttleScale,N=T.parentMoveable,O=h;!h[0]&&!h[1]&&(O=[1,1]);var D=S&&(r??T.keepRatio)||!1,k=t.state,P=[x[0],x[1]];function R(){var re=bW(O,D,n,e),oe=re.distWidth,De=re.distHeight,Pe=g?(g+oe)/g:1,ze=m?(m+De)/m:1;x[0]||(P[0]=oe/g),x[1]||(P[1]=De/m);var je=(O[0]||D?Pe:1)*P[0],Ue=(O[1]||D?ze:1)*P[1];return je===0&&(je=bi(f[0])*Xb),Ue===0&&(Ue=bi(f[1])*Xb),[je,Ue]}var j=R();if(!a&&t.props.groupable){var z=k.snapRenderInfo||{},B=z.direction;gr(B)&&(B[0]||B[1])&&(k.snapRenderInfo={direction:h,request:e.isRequest})}Ve(t,"onBeforeScale",gt(t,e,{scale:j,setFixedDirection:function(re){return n.setFixedDirection(re),j=R(),j},startFixedDirection:n.startFixedDirection,setScale:function(re){j=re}},!0));var L=[j[0]/P[0],j[1]/P[1]],K=s,Q=[0,0],q=bi(L[0]*L[1]),Y=!s&&!i&&a;if(Y||u?K=LO(t,n.targetAllTransform,[0,0],[0,0],n):s||(K=n.fixedPosition),a||(Q=Bbe(t,L,h,!c&&o,n)),D){O[0]&&O[1]&&Q[0]&&Q[1]&&(Math.abs(Q[0]*g)>Math.abs(Q[1]*m)?Q[1]=0:Q[0]=0);var J=!Q[0]&&!Q[1];if(J&&(w?L[0]=ut(L[0]*P[0],I)/P[0]:L[1]=ut(L[1]*P[1],I)/P[1]),O[0]&&!O[1]||Q[0]&&!Q[1]||J&&w){L[0]+=Q[0];var ne=g*L[0]*P[0]/S;L[1]=bi(q*L[0])*Ae(ne/m/P[1])}else if(!O[0]&&O[1]||!Q[0]&&Q[1]||J&&!w){L[1]+=Q[1];var W=m*L[1]*P[1]*S;L[0]=bi(q*L[1])*Ae(W/g/P[0])}}else L[0]+=Q[0],L[1]+=Q[1],Q[0]||(L[0]=ut(L[0]*P[0],I)/P[0]),Q[1]||(L[1]=ut(L[1]*P[1],I)/P[1]);L[0]===0&&(L[0]=bi(f[0])*Xb),L[1]===0&&(L[1]=bi(f[1])*Xb),j=qbe(L,[P[0],P[1]]);var U=[g,m],X=[g*j[0],m*j[1]];X=GH(X,n.minScaleSize,n.maxScaleSize,D?S:!1),j=WA(2,function(re){return U[re]?X[re]/U[re]:X[re]}),L=WA(2,function(re){return j[re]/P[re]});var H=WA(2,function(re){return f[re]?L[re]/f[re]:L[re]}),Z="scale(".concat(L.join(", "),")"),le="scale(".concat(j.join(", "),")"),de=B_(n,le,Z),ce=!x[0]||!x[1],he=Bye(t,ce?le:Z,n.fixedDirection,K,n.fixedOffset,n,ce),ee=Y?he:et(he,n.prevInverseDist||[0,0]);if(n.prevDist=L,n.prevInverseDist=he,j[0]===f[0]&&j[1]===f[1]&&ee.every(function(re){return!re})&&!N&&!Y)return!1;var Se=gt(t,e,ie({offsetWidth:g,offsetHeight:m,direction:h,scale:j,dist:L,delta:H,isPinch:!!a},MK(t,de,ee,a,e)));return Ve(t,"onScale",Se),Se},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ga(t,e,{});return Ve(t,"onScaleEnd",r),r},dragGroupControlCondition:HV,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=Ts(t,"resizable",e);n.moveableScale=t.scale;var a=ml(t,this,"dragControlStart",e,function(u,f){return q1(t,u,n,f)}),s=function(u){r.setFixedDirection(u),a.forEach(function(f,h){f.setFixedDirection(u),q1(t,f.moveable,n,i[h])})};n.setFixedDirection=s;var o=ie(ie({},r),{targets:t.props.targets,events:a,setFixedDirection:s}),c=Ve(t,"onScaleGroupStart",o);return n.isScale=c!==!1,n.isScale?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){K_(t,"onBeforeScale",function(f){Ve(t,"onBeforeScaleGroup",gt(t,e,ie(ie({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var s=t.props.keepRatio,o=n.fixedPosition,c=ml(t,this,"dragControl",e,function(f,h){var g=ae(ui(N0(t.rotation/180*Math.PI,3),[h.datas.originalX*i[0],h.datas.originalY*i[1],1],3),2),m=g[0],b=g[1];return ie(ie({},h),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:Rt(o,[m,b])})}),u=ie({targets:t.props.targets,events:c},r);return Ve(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=ml(t,this,"dragControlEnd",e),a=ga(t,e,{targets:t.props.targets,events:i});return Ve(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Ic(t,e){return t.map(function(n,r){return V1(n,e[r],1,2)})}function KV(t,e,n){var r=Jn(t,e),i=Jn(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function uxe(t,e){var n=KV(t[0],t[1],t[2]),r=KV(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var dxe={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:WO("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,s=n.zoom;if(r||i||!a)return[];var o=t.state,c=o.pos1,u=o.pos2,f=o.pos3,h=o.pos4,g=Ic(c,u),m=Ic(u,c),b=Ic(c,f),x=Ic(f,c),w=Ic(f,h),S=Ic(h,f),T=Ic(u,h),I=Ic(h,u);return Ne([e.createElement("div",{className:Xe("line"),key:"middeLine1",style:Im(g,w,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine2",style:Im(m,S,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine3",style:Im(b,T,s)}),e.createElement("div",{className:Xe("line"),key:"middeLine4",style:Im(x,I,s)})],ae(UK(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return wr(n,Xe("direction"))&&wr(n,Xe("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,s=pW(a,n);if(!s||!i)return!1;var o=t.state,c=o.transformOrigin,u=o.is3d,f=o.targetTransform,h=o.targetMatrix,g=o.width,m=o.height,b=o.left,x=o.top;n.datas={},n.targetTransform=f,n.warpTargetMatrix=u?h:Ds(h,3,4),n.targetInverseMatrix=mK(Ao(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=b,n.top=x,n.poses=[[0,0],[g,0],[0,m],[g,m]].map(function(T){return et(T,c)}),n.nextPoses=n.poses.map(function(T){var I=ae(T,2),N=I[0],O=I[1];return ui(n.warpTargetMatrix,[N,O,0,1],4)}),n.startValue=vn(4),n.prevMatrix=vn(4),n.absolutePoses=Wa(o),n.posIndexes=RK(s),ff(t,e),U_(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var w=gt(t,e,ie({set:function(T){n.startValue=T}},F_(t,e))),S=Ve(t,"onWarpStart",w);return S!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,c=n.isWarp,u=n.startValue,f=n.poses,h=n.posIndexes,g=n.absolutePoses;if(!c)return!1;if(V_(t,e,"matrix3d"),Gp(t,"warpable")){var m=h.map(function(R){return g[R]});m.length>1&&m.push([(m[0][0]+m[1][0])/2,(m[0][1]+m[1][1])/2]);var b=G_(t,r,{horizontal:m.map(function(R){return R[1]+a}),vertical:m.map(function(R){return R[0]+i})}),x=b.horizontal,w=b.vertical;a-=x.offset,i-=w.offset}var S=Oo({datas:n,distX:i,distY:a},!0),T=n.nextPoses.slice();if(h.forEach(function(R){T[R]=Rt(T[R],S)}),!Pye.every(function(R){return uxe(R.map(function(j){return f[j]}),R.map(function(j){return T[j]}))}))return!1;var I=OO(f[0],f[2],f[1],f[3],T[0],T[2],T[1],T[3]);if(!I.length)return!1;var N=on(s,I,4),O=OK(n,N,!0),D=on(Ao(o,4),O,4);n.prevMatrix=O;var k=on(u,O,4),P=B_(n,"matrix3d(".concat(k.join(", "),")"),"matrix3d(".concat(O.join(", "),")"));return zO(e,P),Ve(t,"onWarp",gt(t,e,ie({delta:D,matrix:k,dist:O,multiply:on,transform:P},_i({transform:P},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Ve(t,"onWarpEnd",ga(t,e,{})),r):!1}},fxe=Xe("area-pieces"),nx=Xe("area-piece"),_W=Xe("avoid"),hxe=Xe("view-dragging");function YA(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;YH(e,_W),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function WV(t){return t.createElement("div",{key:"area_pieces",className:fxe},t.createElement("div",{className:nx}),t.createElement("div",{className:nx}),t.createElement("div",{className:nx}),t.createElement("div",{className:nx}))}var SW={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,s=n.passDragArea,o=t.getState(),c=o.width,u=o.height,f=o.renderPoses,h=s?Xe("area","pass"):Xe("area");if(a)return[e.createElement("div",{key:"area",ref:pl(t,"areaElement"),className:h}),WV(e)];if(!r||!i)return[];var g=OO([0,0],[c,0],[0,u],[c,u],f[0],f[1],f[2],f[3]),m=g.length?H_(g,!0):"none";return[e.createElement("div",{key:"area",ref:pl(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:m}}),WV(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,c=o.moveableClientRect,u=o.renderPoses,f=o.rootMatrix,h=o.is3d,g=c.left,m=c.top,b=Ga(u),x=b.left,w=b.top,S=b.width,T=b.height,I=h?4:3,N=ae(gp(f,[r-g,i-m],I),2),O=N[0],D=N[1];O-=x,D-=w;var k=[{left:x,top:w,width:S,height:D-10},{left:x,top:w,width:O-10,height:T},{left:x,top:w+D+10,width:S,height:T-D-10},{left:x+O+10,top:w,width:S-O-10,height:T}],P=[].slice.call(s.nextElementSibling.children);k.forEach(function(R,j){P[j].style.cssText="left: ".concat(R.left,"px;top: ").concat(R.top,"px; width: ").concat(R.width,"px; height: ").concat(R.height,"px;")}),WH(s,_W),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,YA(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||YA(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){YA(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&qH(function(){e.disableNativeEvent=!1})}},pxe=M0("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,s=t.getState(),o=s.beforeOrigin,c=s.rotation,u=s.svg,f=s.allMatrix,h=s.is3d,g=s.left,m=s.top,b=s.offsetWidth,x=s.offsetHeight,w;if(!a&&u&&i){var S=ae(QO(i,b,x),2),T=S[0],I=S[1],N=h?4:3,O=Nn(f,[T,I],N);w=W1(c,r,et(O,[g,m]))}else w=W1(c,r,o);return[e.createElement("div",{className:Xe("control","origin"),style:w,key:"beforeOrigin"})]}});function gxe(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var mxe={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,s=new Y0e,o=_o(i,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var c=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(f){var h=f.container,g=f.direction,m=gt(t,e,{scrollContainer:h,direction:g}),b=u?"onScrollGroup":"onScroll";u&&(m.targets=u),Ve(t,b,m)}).on("move",function(f){var h=f.offsetX,g=f.offsetY,m=f.inputEvent;t[c].scrollBy(h,g,m.inputEvent,!1)}).on("scrollDrag",function(f){var h=f.next;h(t[c].getCurrentEvent())}),s.dragStart(e,ie({container:o},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,s=r.scrollThreshold,o=s===void 0?0:s,c=r.scrollThrottleTime,u=c===void 0?0:c,f=r.getScrollPosition,h=f===void 0?gxe:f,g=r.scrollOptions;return n.drag(e,ie({container:a,threshold:o,throttleTime:u,getScrollPosition:function(m){return h({scrollContainer:m.container,direction:m.direction})}},g)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,ie(ie({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,ie(ie({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,ie(ie({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,ie(ie({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,ie(ie({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,ie(ie({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,ie(ie({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},EW={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},vxe=M0("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=wW(n.padding||{}),i=r.left,a=r.top,s=r.right,o=r.bottom,c=t.getState(),u=c.renderPoses,f=c.pos1,h=c.pos2,g=c.pos3,m=c.pos4,b=[f,h,g,m],x=[];return i>0&&x.push([0,2]),a>0&&x.push([0,1]),s>0&&x.push([1,3]),o>0&&x.push([2,3]),x.map(function(w,S){var T=ae(w,2),I=T[0],N=T[1],O=b[I],D=b[N],k=u[I],P=u[N],R=OO([0,0],[100,0],[0,100],[100,100],O,D,k,P);if(R.length)return e.createElement("div",{key:"padding".concat(S),className:Xe("padding"),style:{transform:H_(R,!0)}})})}}),YV=["nw","ne","se","sw"];function rx(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var yxe=[1,2,5,6],bxe=[0,3,4,7],pd=[1,-1,-1,1],gd=[1,1,-1,-1];function ZO(t,e,n,r,i,a,s,o){i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=n),o===void 0&&(o=r);var c=[],u=!1,f=t.filter(function(g){return!g.virtual}),h=f.map(function(g){var m=g.horizontal,b=g.vertical,x=g.pos;if(b&&!u&&(u=!0,c.push("/")),u){var w=Math.max(0,b===1?x[1]-a:o-x[1]);return c.push(ys(w,r,e)),w}else{var w=Math.max(0,m===1?x[0]-i:s-x[0]);return c.push(ys(w,n,e)),w}});return{radiusPoses:f,styles:c,raws:h}}function TW(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function AW(t,e,n,r,i,a,s){var o,c,u,f;a===void 0&&(a=[0,0]),s===void 0&&(s=!1);var h=t.indexOf("/"),g=(h>-1?t.slice(0,h):t).length,m=t.slice(0,g),b=t.slice(g+1),x=m.length,w=b.length,S=w>0,T=ae(m,4),I=T[0],N=I===void 0?"0px":I,O=T[1],D=O===void 0?N:O,k=T[2],P=k===void 0?N:k,R=T[3],j=R===void 0?D:R,z=ae(b,4),B=z[0],L=B===void 0?N:B,K=z[1],Q=K===void 0?S?L:D:K,q=z[2],Y=q===void 0?S?L:P:q,J=z[3],ne=J===void 0?S?Q:j:J,W=[N,D,P,j].map(function(de){return an(de,e)}),U=[L,Q,Y,ne].map(function(de){return an(de,n)}),X=W.slice(),H=U.slice();o=ae(rx([X[0],X[1]],e),2),X[0]=o[0],X[1]=o[1],c=ae(rx([X[3],X[2]],e),2),X[3]=c[0],X[2]=c[1],u=ae(rx([H[0],H[3]],n),2),H[0]=u[0],H[3]=u[1],f=ae(rx([H[1],H[2]],n),2),H[1]=f[0],H[2]=f[1];var Z=s?X:X.slice(0,Math.max(a[0],x)),le=s?H:H.slice(0,Math.max(a[1],w));return Ne(Ne([],ae(Z.map(function(de,ce){var he=YV[ce];return{virtual:ce>=x,horizontal:pd[ce],vertical:0,pos:[r+de,i+(gd[ce]===-1?n:0)],sub:!0,raw:W[ce],direction:he}})),!1),ae(le.map(function(de,ce){var he=YV[ce];return{virtual:ce>=w,horizontal:0,vertical:gd[ce],pos:[r+(pd[ce]===-1?e:0),i+de],sub:!0,raw:U[ce],direction:he}})),!1)}function xxe(t,e,n,r,i){i===void 0&&(i=e.length);var a=TW(t.slice(r)),s=a.horizontalRange,o=a.verticalRange,c=n-r,u=0;if(c===0)u=i;else if(c>0&&c<s[1])u=s[1]-c;else if(c>=o[0])u=o[0]+o[1]-c;else return;t.splice(n,u),e.splice(n,u)}function wxe(t,e,n,r,i,a,s,o,c,u,f){u===void 0&&(u=0),f===void 0&&(f=0);var h=TW(t.slice(n)),g=h.horizontalRange,m=h.verticalRange;if(r>-1)for(var b=pd[r]===1?a-u:o-a,x=g[1];x<=r;++x){var w=gd[x]===1?f:c,S=0;if(r===x?S=a:x===0?S=u+b:pd[x]===-1&&(S=o-(e[n][0]-u)),t.splice(n+x,0,{horizontal:pd[x],vertical:0,pos:[S,w]}),e.splice(n+x,0,[S,w]),x===0)break}else if(i>-1){var T=gd[i]===1?s-f:c-s;if(g[1]===0&&m[1]===0){var I=[u+T,f];t.push({horizontal:pd[0],vertical:0,pos:I}),e.push(I)}for(var N=m[0],x=m[1];x<=i;++x){var S=pd[x]===1?u:o,w=0;if(i===x?w=s:x===0?w=f+T:gd[x]===1?w=e[n+N][1]:gd[x]===-1&&(w=c-(e[n+N][1]-f)),t.push({horizontal:0,vertical:gd[x],pos:[S,w]}),e.push([S,w]),x===0)break}}}function _xe(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var Sxe=[[0,-1,"n"],[1,0,"e"]],Exe=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function JO(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,s=i.height,o=e,c=o.type,u=o.poses,f=c==="rect",h=c==="circle";if(c==="polygon")return n.map(function(D){return"".concat(ys(D[0],a,r)," ").concat(ys(D[1],s,r))});if(f||c==="inset"){var g=n[1][1],m=n[3][0],b=n[7][0],x=n[5][1];if(f)return[g,m,x,b].map(function(D){return"".concat(D,"px")});var w=[g,a-m,s-x,b].map(function(D,k){return ys(D,k%2?a:s,r)});if(n.length>8){var S=ae(et(n[4],n[0]),2),T=S[0],I=S[1];w.push.apply(w,Ne(["round"],ae(ZO(u.slice(8).map(function(D,k){return ie(ie({},D),{pos:n[k]})}),r,T,I,b,g,m,x).styles),!1))}return w}else if(h||c==="ellipse"){var N=n[0],O=ys(Ae(n[1][1]-N[1]),h?Math.sqrt((a*a+s*s)/2):s,r),w=h?[O]:[ys(Ae(n[2][0]-N[0]),a,r),O];return w.push("at",ys(N[0],a,r),ys(N[1],s,r)),w}}function X1(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return Exe.map(function(s){var o=ae(s,3),c=o[0],u=o[1],f=o[2],h=i[c+1],g=a[u+1];return{vertical:Ae(u),horizontal:Ae(c),direction:f,pos:[h,g]}})}function CW(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[Ae(e[1]-e[0]),Ae(n[1]-n[0])]}function XV(t,e,n,r,i){var a,s,o,c,u,f,h,g,m;if(t){var b=i;if(!b){var x=qi(t),w=x("clipPath");b=w!=="none"?w:x("clip")}if(!((!b||b==="none"||b==="auto")&&(b=r,!b))){var S=$H(b),T=S.prefix,I=T===void 0?b:T,N=S.value,O=N===void 0?"":N,D=I==="circle",k=" ";if(I==="polygon"){var P=xd(O||"0% 0%, 100% 0%, 100% 100%, 0% 100%");k=",";var R=P.map(function(yt){var Dt=ae(yt.split(" "),2),Nt=Dt[0],ot=Dt[1];return{vertical:1,horizontal:1,pos:[an(Nt,e),an(ot,n)]}}),j=Yd(R.map(function(yt){return yt.pos}));return{type:I,clipText:b,poses:R,splitter:k,left:j.minX,right:j.maxX,top:j.minY,bottom:j.maxY}}else if(D||I==="ellipse"){var z="",B="",L=0,K=0,P=lu(O);if(D){var Q="";a=ae(P,4),s=a[0],Q=s===void 0?"50%":s,o=a[2],z=o===void 0?"50%":o,c=a[3],B=c===void 0?"50%":c,L=an(Q,Math.sqrt((e*e+n*n)/2)),K=L}else{var q="",Y="";u=ae(P,5),f=u[0],q=f===void 0?"50%":f,h=u[1],Y=h===void 0?"50%":h,g=u[3],z=g===void 0?"50%":g,m=u[4],B=m===void 0?"50%":m,L=an(q,e),K=an(Y,n)}var J=[an(z,e),an(B,n)],R=Ne([{vertical:1,horizontal:1,pos:J,direction:"nesw"}],ae(Sxe.slice(0,D?1:2).map(function(Nt){return{vertical:Ae(Nt[1]),horizontal:Nt[0],direction:Nt[2],sub:!0,pos:[J[0]+Nt[0]*L,J[1]+Nt[1]*K]}})),!1);return{type:I,clipText:b,radiusX:L,radiusY:K,left:J[0]-L,top:J[1]-K,right:J[0]+L,bottom:J[1]+K,poses:R,splitter:k}}else if(I==="inset"){var P=lu(O||"0 0 0 0"),ne=P.indexOf("round"),W=(ne>-1?P.slice(0,ne):P).length,U=P.slice(W+1),X=ae(P.slice(0,W),4),H=X[0],Z=X[1],le=Z===void 0?H:Z,de=X[2],ce=de===void 0?H:de,he=X[3],ee=he===void 0?le:he,Se=ae([H,ce].map(function(Nt){return an(Nt,n)}),2),re=Se[0],oe=Se[1],De=ae([ee,le].map(function(Nt){return an(Nt,e)}),2),Pe=De[0],ze=De[1],je=e-ze,Ue=n-oe,Ie=AW(U,je-Pe,Ue-re,Pe,re),R=Ne(Ne([],ae(X1(re,je,Ue,Pe)),!1),ae(Ie),!1);return{type:"inset",clipText:b,poses:R,top:re,left:Pe,right:je,bottom:Ue,radius:U,splitter:k}}else if(I==="rect"){var P=xd(O||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));k=",";var Oe=ae(P.map(function(ft){var xn=I0(ft).value;return xn}),4),Ge=Oe[0],ze=Oe[1],oe=Oe[2],Pe=Oe[3],R=X1(Ge,ze,oe,Pe);return{type:"rect",clipText:b,poses:R,top:Ge,right:ze,bottom:oe,left:Pe,values:P,splitter:k}}}}}function Txe(t,e,n,r,i){var a=t[e],s=a.direction,o=a.sub,c=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var f=u.filter(function(L){return L==="w"||L==="e"}),h=u.filter(function(L){return L==="n"||L==="s"}),g=f[0],m=h[0];c[e]=n;var b=ae(CW(t),2),x=b[0],w=b[1],S=x&&w?x/w:0;if(S&&i){var T=(e+4)%8,I=t[T].pos,N=[0,0];s.indexOf("w")>-1?N[0]=-1:s.indexOf("e")>-1&&(N[0]=1),s.indexOf("n")>-1?N[1]=-1:s.indexOf("s")>-1&&(N[1]=1);var O=yW([x,w],n,S,N,!0),D=x+O[0],k=w+O[1],P=I[1],R=I[1],j=I[0],z=I[0];N[0]===-1?j=z-D:N[0]===1?z=j+D:(j=j-D/2,z=z+D/2),N[1]===-1?P=R-k:(N[1]===1||(P=R-k/2),R=P+k);var B=X1(P,z,R,j);t.forEach(function(L,K){c[K][0]=B[K].pos[0]-L.pos[0],c[K][1]=B[K].pos[1]-L.pos[1]})}else t.forEach(function(L,K){var Q=L.direction;Q&&(Q.indexOf(g)>-1&&(c[K][0]=n[0]),Q.indexOf(m)>-1&&(c[K][1]=n[1]))}),g&&(c[1][0]=n[0]/2,c[5][0]=n[0]/2),m&&(c[3][1]=n[1]/2,c[7][1]=n[1]/2)}else s&&!o?u.forEach(function(L){var K=L==="n"||L==="s";t.forEach(function(Q,q){var Y=Q.direction,J=Q.horizontal,ne=Q.vertical;!Y||Y.indexOf(L)===-1||(c[q]=[K||!J?0:n[0],!K||!ne?0:n[1]])})}):c[e]=n;return c}function Axe(t,e){var n=ae(DK(t,e),2),r=n[0],i=n[1],a=e.datas,s=a.clipPath,o=a.clipIndex,c=s,u=c.type,f=c.poses,h=c.splitter,g=f.map(function(T){return T.pos});if(u==="polygon")g.splice(o,0,[r,i]);else if(u==="inset"){var m=yxe.indexOf(o),b=bxe.indexOf(o),x=f.length;if(wxe(f,g,8,m,b,r,i,g[4][0],g[4][1],g[0][0],g[0][1]),x===f.length)return}else return;var w=JO(t,s,g),S="".concat(u,"(").concat(w.join(h),")");Ve(t,"onClip",gt(t,e,ie({clipEventType:"added",clipType:u,poses:g,clipStyles:w,clipStyle:S,distX:0,distY:0},_i({clipPath:S},e))))}function Cxe(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,s=a.type,o=a.poses,c=a.splitter,u=o.map(function(m){return m.pos}),f=u.length;if(s==="polygon")o.splice(i,1),u.splice(i,1);else if(s==="inset"){if(i<8||(xxe(o,u,i,8,f),f===o.length))return}else return;var h=JO(t,r,u),g="".concat(s,"(").concat(h.join(c),")");Ve(t,"onClip",gt(t,e,ie({clipEventType:"removed",clipType:s,poses:u,clipStyles:h,clipStyle:g,distX:0,distY:0},_i({clipPath:g},e))))}var Ixe={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,s=n.zoom,o=n.groupable,c=t.getState(),u=c.target,f=c.width,h=c.height,g=c.allMatrix,m=c.is3d,b=c.left,x=c.top,w=c.pos1,S=c.pos2,T=c.pos3,I=c.pos4,N=c.clipPathState,O=c.snapBoundInfos,D=c.rotation;if(!u||o)return[];var k=XV(u,f,h,i||"inset",N||r);if(!k)return[];var P=m?4:3,R=k.type,j=k.poses,z=j.map(function(ze){var je=Nn(g,ze.pos,P);return[je[0]-b,je[1]-x]}),B=[],L=[],K=R==="rect",Q=R==="inset",q=R==="polygon";if(K||Q||q){var Y=Q?z.slice(0,8):z;L=Y.map(function(ze,je){var Ue=je===0?Y[Y.length-1]:Y[je-1],Ie=Jn(Ue,ze),Oe=cW(Ue,ze);return e.createElement("div",{key:"clipLine".concat(je),className:Xe("line","clip-line","snap-control"),"data-clip-index":je,style:{width:"".concat(Oe,"px"),transform:"translate(".concat(Ue[0],"px, ").concat(Ue[1],"px) rotate(").concat(Ie,"rad) scaleY(").concat(s,")")}})})}if(B=z.map(function(ze,je){return e.createElement("div",{key:"clipControl".concat(je),className:Xe("control","clip-control","snap-control"),"data-clip-index":je,style:{transform:"translate(".concat(ze[0],"px, ").concat(ze[1],"px) rotate(").concat(D,"rad) scale(").concat(s,")")}})}),Q&&B.push.apply(B,Ne([],ae(z.slice(8).map(function(ze,je){return e.createElement("div",{key:"clipRadiusControl".concat(je),className:Xe("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+je,style:{transform:"translate(".concat(ze[0],"px, ").concat(ze[1],"px) rotate(").concat(D,"rad) scale(").concat(s,")")}})})),!1)),R==="circle"||R==="ellipse"){var J=k.left,ne=k.top,W=k.radiusX,U=k.radiusY,X=ae(et(Nn(g,[J,ne],P),Nn(g,[0,0],P)),2),H=X[0],Z=X[1],le="none";if(!a){for(var de=Math.max(10,W/5,U/5),ce=[],he=0;he<=de;++he){var ee=Math.PI*2/de*he;ce.push([W+(W-s)*Math.cos(ee),U+(U-s)*Math.sin(ee)])}ce.push([W,-2]),ce.push([-2,-2]),ce.push([-2,U*2+2]),ce.push([W*2+2,U*2+2]),ce.push([W*2+2,-2]),ce.push([W,-2]),le="polygon(".concat(ce.map(function(ze){return"".concat(ze[0],"px ").concat(ze[1],"px")}).join(", "),")")}B.push(e.createElement("div",{key:"clipEllipse",className:Xe("clip-ellipse","snap-control"),style:{width:"".concat(W*2,"px"),height:"".concat(U*2,"px"),clipPath:le,transform:"translate(".concat(-b+H,"px, ").concat(-x+Z,"px) ").concat(H_(g))}}))}if(a){var Se=Ga(Ne([w,S,T,I],ae(z),!1)),re=Se.width,oe=Se.height,De=Se.left,Pe=Se.top;if(q||K||Q){var ce=Q?z.slice(0,8):z;B.push(e.createElement("div",{key:"clipArea",className:Xe("clip-area","snap-control"),style:{width:"".concat(re,"px"),height:"".concat(oe,"px"),transform:"translate(".concat(De,"px, ").concat(Pe,"px)"),clipPath:"polygon(".concat(ce.map(function(je){return"".concat(je[0]-De,"px ").concat(je[1]-Pe,"px")}).join(", "),")")}}))}}return O&&["vertical","horizontal"].forEach(function(ze){var je=O[ze],Ue=ze==="horizontal";je.isSnap&&L.push.apply(L,Ne([],ae(je.snap.posInfos.map(function(Ie,Oe){var Ge=Ie.pos,yt=et(Nn(g,Ue?[0,Ge]:[Ge,0],P),[b,x]),Dt=et(Nn(g,Ue?[f,Ge]:[Ge,h],P),[b,x]);return Ov(e,"",yt,Dt,s,"clip".concat(ze,"snap").concat(Oe),"guideline")})),!1)),je.isBound&&L.push.apply(L,Ne([],ae(je.bounds.map(function(Ie,Oe){var Ge=Ie.pos,yt=et(Nn(g,Ue?[0,Ge]:[Ge,0],P),[b,x]),Dt=et(Nn(g,Ue?[f,Ge]:[Ge,h],P),[b,x]);return Ov(e,"",yt,Dt,s,"clip".concat(ze,"bounds").concat(Oe),"guideline","bounds","bold")})),!1))}),Ne(Ne([],ae(B),!1),ae(L),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,ie(ie({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,s=n.target,o=n.width,c=n.height,u=e.inputEvent?e.inputEvent.target:null,f=u&&u.getAttribute("class")||"",h=e.datas,g=XV(s,o,c,i||"inset",a);if(!g)return!1;var m=g.clipText,b=g.type,x=g.poses,w=Ve(t,"onClipStart",gt(t,e,{clipType:b,clipStyle:m,poses:x.map(function(S){return S.pos})}));return w===!1?(h.isClipStart=!1,!1):(h.isControl=f&&f.indexOf("clip-control")>-1,h.isLine=f.indexOf("clip-line")>-1,h.isArea=f.indexOf("clip-area")>-1||f.indexOf("clip-ellipse")>-1,h.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,h.clipPath=g,h.isClipStart=!0,n.clipPathState=m,ff(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,s=e.originalDatas,o=e.isDragTarget;if(!a.isClipStart)return!1;var c=a,u=c.isControl,f=c.isLine,h=c.isArea,g=c.clipIndex,m=c.clipPath;if(!m)return!1;var b=Xd(t.props,"clippable"),x=b.keepRatio,w=0,S=0,T=s.draggable,I=Oo(e);o&&T?(n=ae(T.prevBeforeDist,2),w=n[0],S=n[1]):(r=ae(I,2),w=r[0],S=r[1]);var N=[w,S],O=t.state,D=O.width,k=O.height,P=!h&&!u&&!f,R=m.type,j=m.poses,z=m.splitter,B=j.map(function(xt){return xt.pos});P&&(w=-w,S=-S);var L=!u||j[g].direction==="nesw",K=R==="inset"||R==="rect",Q=j.map(function(){return[0,0]});if(u&&!L){var q=j[g],Y=q.horizontal,J=q.vertical,ne=[w*Ae(Y),S*Ae(J)];Q=Txe(j,g,ne,K,x)}else L&&(Q=B.map(function(){return[w,S]}));var W=B.map(function(xt,Pn){return Rt(xt,Q[Pn])}),U=Ne([],ae(W),!1);O.snapBoundInfos=null;var X=m.type==="circle",H=m.type==="ellipse";if(X||H){var Z=Ga(W),le=Ae(Z.bottom-Z.top),de=Ae(H?Z.right-Z.left:le),ce=W[0][1]+le,he=W[0][0]-de,ee=W[0][0]+de;X&&(U.push([ee,Z.bottom]),Q.push([1,0])),U.push([Z.left,ce]),Q.push([0,1]),U.push([he,Z.bottom]),Q.push([1,0])}var Se=rW((b.clipHorizontalGuidelines||[]).map(function(xt){return an("".concat(xt),k)}),(b.clipVerticalGuidelines||[]).map(function(xt){return an("".concat(xt),D)}),D,k),re=[],oe=[];if(X||H)re=[U[4][0],U[2][0]],oe=[U[1][1],U[3][1]];else if(K){var De=[U[0],U[2],U[4],U[6]],Pe=[Q[0],Q[2],Q[4],Q[6]];re=De.filter(function(xt,Pn){return Pe[Pn][0]}).map(function(xt){return xt[0]}),oe=De.filter(function(xt,Pn){return Pe[Pn][1]}).map(function(xt){return xt[1]})}else re=U.filter(function(xt,Pn){return Q[Pn][0]}).map(function(xt){return xt[0]}),oe=U.filter(function(xt,Pn){return Q[Pn][1]}).map(function(xt){return xt[1]});var ze=[0,0],je=RV(Se,b.clipTargetBounds&&{left:0,top:0,right:D,bottom:k},re,oe,5,5),Ue=je.horizontal,Ie=je.vertical,Oe=Ue.offset,Ge=Ie.offset;if(Ue.isBound&&(ze[1]+=Oe),Ie.isBound&&(ze[0]+=Ge),(H||X)&&Q[0][0]===0&&Q[0][1]===0){var Z=Ga(W),yt=Z.bottom-Z.top,Dt=H?Z.right-Z.left:yt,Nt=Ie.isBound?Ae(Ge):Ie.snapIndex===0?-Ge:Ge,ot=Ue.isBound?Ae(Oe):Ue.snapIndex===0?-Oe:Oe;Dt-=Nt,yt-=ot,X&&(yt=YK(Ie,Ue)>0?yt:Dt,Dt=yt);var Et=U[0];U[1][1]=Et[1]-yt,U[2][0]=Et[0]+Dt,U[3][1]=Et[1]+yt,U[4][0]=Et[0]-Dt}else if(K&&x&&u){var ft=ae(CW(j),2),xn=ft[0],Zt=ft[1],Fr=xn&&Zt?xn/Zt:0,rs=j[g],is=rs.direction||"",as=U[1][1],ce=U[5][1],he=U[7][0],ee=U[3][0];Ae(Oe)<=Ae(Ge)?Oe=bi(Oe)*Ae(Ge)/Fr:Ge=bi(Ge)*Ae(Oe)*Fr,is.indexOf("w")>-1?he-=Ge:is.indexOf("e")>-1?ee-=Ge:(he+=Ge/2,ee-=Ge/2),is.indexOf("n")>-1?as-=Oe:is.indexOf("s")>-1?ce-=Oe:(as+=Oe/2,ce-=Oe/2);var hi=X1(as,ee,ce,he);U.forEach(function(Ki,xa){var pi;pi=ae(hi[xa].pos,2),Ki[0]=pi[0],Ki[1]=pi[1]})}else U.forEach(function(xt,Pn){var Dn=Q[Pn];Dn[0]&&(xt[0]-=Ge),Dn[1]&&(xt[1]-=Oe)});var wn=JO(t,m,W),_n="".concat(R,"(").concat(wn.join(z),")");if(O.clipPathState=_n,X||H)re=[U[4][0],U[2][0]],oe=[U[1][1],U[3][1]];else if(K){var De=[U[0],U[2],U[4],U[6]];re=De.map(function(Pn){return Pn[0]}),oe=De.map(function(Pn){return Pn[1]})}else re=U.map(function(xt){return xt[0]}),oe=U.map(function(xt){return xt[1]});if(O.snapBoundInfos=RV(Se,b.clipTargetBounds&&{left:0,top:0,right:D,bottom:k},re,oe,1,1),T){var Vt=O.is3d,zs=O.allMatrix,Gl=Vt?4:3,Hl=ze;o&&(Hl=[N[0]+ze[0]-I[0],N[1]+ze[1]-I[1]]),T.deltaOffset=on(zs,[Hl[0],Hl[1],0,0],Gl)}return Ve(t,"onClip",gt(t,e,ie({clipEventType:"changed",clipType:R,poses:W,clipStyle:_n,clipStyles:wn,distX:w,distY:S},_i((i={},i[R==="rect"?"clip":"clipPath"]=_n,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,s=r.isClipStart,o=r.isControl;return s?(Ve(t,"onClipEnd",ga(t,e,{})),i&&(o?Cxe(t,e):a&&Axe(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},kxe={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":wr(e.inputEvent.target,Xe("origin"))},dragControlStart:function(t,e){var n=e.datas;ff(t,e);var r=gt(t,e,{dragStart:yi.dragStart(t,new fp().dragStart([0,0],e))}),i=Ve(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=ae(Oo(e),2),s=a[0],o=a[1],c=t.state,u=c.width,f=c.height,h=c.offsetMatrix,g=c.targetMatrix,m=c.is3d,b=t.props.originRelative,x=b===void 0?!0:b,w=m?4:3,S=[s,o];if(i){var T=e.distOrigin;(T[0]||T[1])&&(S=T)}var I=Rt(n.startOrigin,S),N=Rt(n.startTargetOrigin,S),O=et(S,n.prevOrigin),D=z0(h,g,I,w),k=t.getRect(),P=Ga(hf(D,u,f,w)),R=[k.left-P.left,k.top-P.top];n.prevOrigin=S;var j=[ys(N[0],u,x),ys(N[1],f,x)].join(" "),z=yi.drag(t,j0(e,t.state,R,!!r)),B=gt(t,e,ie(ie({width:u,height:f,origin:I,dist:S,delta:O,transformOrigin:j,drag:z},_i({transformOrigin:j,transform:z.transform},e)),{afterTransform:z.transform}));return Ve(t,"onDragOrigin",B),B},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Ve(t,"onDragOriginEnd",ga(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-a[0],s[1]=o.origin[1]-a[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Pxe(t,e,n,r){var i=t.filter(function(c){var u=c.virtual,f=c.horizontal;return f&&!u}).length,a=t.filter(function(c){var u=c.virtual,f=c.vertical;return f&&!u}).length,s=-1;if(e===0&&(i===0?s=0:i===1&&(s=1)),e===2&&(i<=2?s=2:i<=3&&(s=3)),e===3&&(a===0?s=4:a<4&&(s=7)),e===1&&(a<=1?s=5:a<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];Dxe(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function Dxe(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function Oxe(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function QV(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=lu(t),AW(a,e,n,0,0,r,i)}function ZV(t,e,n,r,i){var a=t.state,s=a.width,o=a.height,c=ZO(i,t.props.roundRelative,s,o),u=c.raws,f=c.styles,h=c.radiusPoses,g=_xe(h,u),m=g.horizontals,b=g.verticals,x=f.join(" ");a.borderRadiusState=x;var w=gt(t,e,ie({horizontals:m,verticals:b,borderRadius:x,width:s,height:o,delta:r,dist:n},_i({borderRadius:x},e)));return Ve(t,"onRound",w),w}function JV(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],s=t.getTargets()[0];s&&(a?.props.target===s?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=KO(s).borderRadius,r.borderRadius=i))}return i}var Nxe={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Xe("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,s=n.allMatrix,o=n.is3d,c=n.left,u=n.top,f=n.borderRadiusState,h=t.props,g=h.minRoundControls,m=g===void 0?[0,0]:g,b=h.maxRoundControls,x=b===void 0?[4,4]:b,w=h.zoom,S=h.roundPadding,T=S===void 0?0:S,I=h.isDisplayShadowRoundControls,N=h.groupable;if(!r)return null;var O=f||JV(t),D=o?4:3,k=QV(O,i,a,m,!0);if(!k)return null;var P=0,R=0,j=N?[0,0]:[c,u];return k.map(function(z,B){var L=z.horizontal,K=z.vertical,Q=z.direction||"",q=Ne([],ae(z.pos),!1);R+=Math.abs(L),P+=Math.abs(K),L&&Q.indexOf("n")>-1&&(q[1]-=T),K&&Q.indexOf("w")>-1&&(q[0]-=T),L&&Q.indexOf("s")>-1&&(q[1]+=T),K&&Q.indexOf("e")>-1&&(q[0]+=T);var Y=et(Nn(s,q,D),j),J=I&&I!=="horizontal",ne=z.vertical?P<=x[1]&&(J||!z.virtual):R<=x[0]&&(I||!z.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(B),className:Xe("control","border-radius",z.vertical?"vertical":"",z.virtual?"virtual":""),"data-radius-index":B,style:{display:ne?"block":"none",transform:"translate(".concat(Y[0],"px, ").concat(Y[1],"px) scale(").concat(w,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",s=a.indexOf("border-radius")>-1,o=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,c=s?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var f=i.getAttribute("data-line-key")||"";f&&(u=parseInt(f.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var h=gt(t,e,{}),g=Ve(t,"onRoundStart",h);if(g===!1)return!1;r.lineIndex=u,r.controlIndex=c,r.isControl=s,r.isLine=o,ff(t,e);var m=t.props,b=m.roundRelative,x=m.minRoundControls,w=x===void 0?[0,0]:x,S=t.state,T=S.width,I=S.height;r.isRound=!0,r.prevDist=[0,0];var N=JV(t),O=QV(N||"",T,I,w,!0)||[];return r.controlPoses=O,S.borderRadiusState=ZO(O,b,T,I).styles.join(" "),h},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=ae(Oo(e),2),s=a[0],o=a[1],c=[s,o],u=et(c,n.prevDist),f=t.props.maxRoundControls,h=f===void 0?[4,4]:f,g=t.state,m=g.width,b=g.height,x=r[i],w=x.vertical,S=x.horizontal,T=r.map(function(N){var O=N.horizontal,D=N.vertical,k=[O*S*c[0],D*w*c[1]];if(O){if(h[0]===1)return k;if(h[0]<4&&O!==S)return k}else{if(h[1]===0)return k[1]=D*S*c[0]/m*b,k;if(w){if(h[1]===1)return k;if(h[1]<4&&D!==w)return k}}return[0,0]});T[i]=c;var I=r.map(function(N,O){return ie(ie({},N),{pos:Rt(N.pos,T[O])})});return i<4?I.slice(0,i+1).forEach(function(N){N.virtual=!1}):I.slice(4,i+1).forEach(function(N){N.virtual=!1}),n.prevDist=[s,o],ZV(t,e,c,u,I)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,s=r.controlIndex,o=r.isLine,c=r.lineIndex,u=r.controlPoses,f=u.filter(function(S){var T=S.virtual;return T}).length,h=t.props.roundClickable,g=h===void 0?!0:h;if(i&&g){if(a&&(g===!0||g==="control"))Oxe(u,s);else if(o&&(g===!0||g==="line")){var m=ae(DK(t,e),2),b=m[0],x=m[1];Pxe(u,c,b,x)}f!==u.filter(function(S){var T=S.virtual;return T}).length&&ZV(t,e,[0,0],[0,0],u)}var w=ga(t,e,{});return Ve(t,"onRoundEnd",w),n.borderRadiusState="",w},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Ts(t,"roundable",e),s=ie({targets:t.props.targets,events:a.map(function(o,c){return ie(ie({},o),{target:i[c],moveable:r[c],currentTarget:r[c]})})},n);return Ve(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=Ts(t,"roundable",e),s=ie({targets:t.props.targets,events:a.map(function(o,c){return ie(ie(ie({},o),{target:i[c],moveable:r[c],currentTarget:r[c]}),_i({borderRadius:n.borderRadius},o))})},n);return Ve(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=Ts(t,"roundable",e);K_(t,"onRound",function(o){var c=ie({targets:t.props.targets,events:i.map(function(u,f){return ie(ie(ie({},u),{target:r[f],moveable:n[f],currentTarget:n[f]}),_i({borderRadius:o.borderRadius},u))})},o);Ve(t,"onRoundGroup",c)});var a=this.dragControlEnd(t,e);if(!a)return!1;var s=ie({targets:t.props.targets,events:i.map(function(o,c){var u;return ie(ie({},o),{target:r[c],moveable:n[c],currentTarget:n[c],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},a);return Ve(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function Rxe(t,e){var n=e?4:3,r=vn(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var IW={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,s=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(yK(i,!0),")"),o=!a||a==="none"?s:a;e.datas.startTransforms=Rxe(o,r)?[]:lu(o)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return gt(t,e,{setTransform:function(n){e.datas.startTransforms=gr(n)?n:lu(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return gt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Ve(t,"onBeforeRender",gt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Ve(t,"onBeforeRenderEnd",gt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.setTransform(c,s),n.resetStyle(s),n.fillDragStartParams(c,s)});Ve(t,"onBeforeRenderGroupStart",gt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.resetStyle(s),n.fillDragParams(c,s)});Ve(t,"onBeforeRenderGroup",gt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Ve(t,"onBeforeRenderGroupEnd",gt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},kW={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Ve(t,"onRenderStart",gt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Ve(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Ve(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Ve(t,"onRenderGroupStart",gt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragParams(c,s)});Ve(t,"onRenderGroup",gt(t,e,ie(ie({isPinch:!!e.isPinch,targets:t.props.targets,transform:Qb(e),transformObject:{}},_i(Zb(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=Ts(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(s,o){var c=i[o];return n.fillDragEndParams(c,s)});Ve(t,"onRenderGroupEnd",gt(t,e,ie({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Qb(e)},_i(Zb(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return dp($1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),gt(t,e,ie({isPinch:!!e.isPinch,transformObject:n,transform:Qb(e)},_i(Zb(e))))},fillDragEndParams:function(t,e){var n={};return dp($1(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),gt(t,e,ie({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Qb(e)},_i(Zb(e))))}};function Jm(t,e,n,r,i,a,s){a.clientDistX=a.distX,a.clientDistY=a.distY;var o=i==="Start",c=i==="End",u=i==="After",f=t.state.target,h=a.isRequest,g=r.indexOf("Control")>-1;if(!f||o&&g&&!h&&t.areaElement===a.inputEvent.target)return!1;var m=Ne([],ae(e),!1);if(h){var b=a.requestAble;m.some(function(B){return B.name===b})||m.push.apply(m,Ne([],ae(t.props.ables.filter(function(B){return B.name===b})),!1))}if(!m.length||m.every(function(B){return B.dragRelation}))return!1;var x=a.inputEvent,w;c&&x&&(w=document.elementFromPoint(a.clientX,a.clientY)||x.target);var S=!1,T=function(){var B;S=!0,(B=a.stop)===null||B===void 0||B.call(a)},I=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());I&&t.updateRect(i,!0,!1);var N=a.datas,O=g?"controlGesto":"targetGesto",D=t[O],k=function(B,L,K){if(!(L in B)||D!==t[O])return!1;var Q=B.name,q=N[Q]||(N[Q]={});if(o&&(q.isEventStart=!K||!B[K]||B[K](t,a)),!q.isEventStart)return!1;var Y=B[L](t,ie(ie({},a),{stop:T,datas:q,originalDatas:N,inputTarget:w}));return t._emitter.off(),o&&Y===!1&&(q.isEventStart=!1),Y};I&&m.forEach(function(B){B.unset&&B.unset(t)}),k(IW,"drag".concat(r).concat(i));var P=0,R=0;n.forEach(function(B){if(S)return!1;var L="".concat(B).concat(r).concat(i),K="".concat(B).concat(r,"Condition");i===""&&!h&&rxe(t.state,a);var Q=m.filter(function(J){return J[L]});Q=Q.filter(function(J,ne){return J.name&&Q.indexOf(J)===ne});var q=Q.filter(function(J){return k(J,L,K)}),Y=q.length;S&&++P,Y&&++R,!S&&o&&Q.length&&!Y&&(P+=Q.filter(function(J){var ne=J.name,W=N[ne];return W.isEventStart?J.dragRelation!=="strong":!1}).length?1:0)}),(!u||R)&&k(kW,"drag".concat(r).concat(i));var j=D!==t[O]||P===n.length;if((c||S||j)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(B){B.state.gestos={}}),m.forEach(function(B){B.unset&&B.unset(t)})),o&&!j&&!h&&R&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||j)return!1;if(!o&&R&&!s||c){var z=t.props.flushSync||sW;z(function(){t.updateRect(c?i:"",!0,!1),t.forceUpdate()})}return!o&&!c&&!u&&R&&!s&&Jm(t,e,n,r,i+"After",a),!0}function eN(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,s=t.areaElement,o=t._dragTarget;return!o||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===o||o.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||wr(a,"moveable-area")||wr(a,"moveable-padding")||wr(a,"moveable-edgeDraggable")}}function PW(t,e,n){var r=t.controlBox,i=[],a=t.props,s=a.dragArea,o=t.state.target,c=a.dragTarget;i.push(r),(!s||c)&&i.push(e),!s&&c&&o&&e!==o&&a.dragTargetSelf&&i.push(o);var u=eN(t);return OW(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function DW(t,e){var n=t.controlBox,r=[];r.push(n);var i=eN(t,!0),a=function(s,o){if(o===void 0&&(o=s.inputEvent.target),o===n)return!0;var c=i(s,o);return!c};return OW(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function OW(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",s=t.props,o=s.pinchOutside,c=s.pinchThreshold,u=s.preventClickEventOnDrag,f=s.preventClickDefault,h=s.checkInput,g=s.dragFocusedInput,m=s.preventDefault,b=m===void 0?!0:m,x=s.preventRightClick,w=x===void 0?!0:x,S=s.preventWheelClick,T=S===void 0?!0:S,I=s.dragContainer,N=_o(I,!0),O={preventDefault:b,preventRightClick:w,preventWheelClick:T,container:N||Qc(t.getControlBoxElement()),pinchThreshold:c,pinchOutside:o,preventClickEventOnDrag:a?u:!1,preventClickEventOnDragStart:a?f:!1,preventClickEventByCondition:a?null:function(P){return t.controlBox.contains(P.target)},checkInput:a?h:!1,dragFocusedInput:g},D=new oye(e,O),k=r==="Control";return["drag","pinch"].forEach(function(P){["Start","","End"].forEach(function(R){D.on("".concat(P).concat(R),function(j){var z,B=j.eventType,L=P==="drag"&&j.isPinch;if(i[B]&&!i[B](j)){j.stop();return}if(!L){var K=P==="drag"?[P]:["drag",P],Q=Ne([],ae(t[n]),!1),q=Jm(t,Q,K,r,R,j);q?(t.props.stopPropagation||R==="Start"&&k)&&((z=j?.inputEvent)===null||z===void 0||z.stopPropagation()):j.stop()}})})}),D}var Mxe=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var s=i.eventName,o=i.moveable;o.state.disableNativeEvent||i.ables.forEach(function(c){c[s](o,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function jxe(t,e,n,r){var i;n===void 0&&(n=e);var a=zK(t,e),s=a.matrixes,o=a.is3d,c=a.targetMatrix,u=a.transformOrigin,f=a.targetOrigin,h=a.offsetContainer,g=a.hasFixed,m=a.zoom,b=Xye(h,n),x=b.matrixes,w=b.is3d,S=b.offsetContainer,T=b.zoom,I=r,N=4,O=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,D=c,k=vn(N),P=vn(N),R=vn(N),j=vn(N),z=s.length,B=x.map(function(ne){return ie(ie({},ne),{matrix:ne.matrix?Ne([],ae(ne.matrix),!1):void 0})}).reverse();s.reverse(),!o&&I&&(D=Ds(D,3,4),dP(s)),!w&&I&&dP(B),B.forEach(function(ne){P=on(P,ne.matrix,N)});var L=n||wu(t),K=((i=B[0])===null||i===void 0?void 0:i.target)||Nv(L,L,!0).offsetParent,Q=B.slice(1).reduce(function(ne,W){return on(ne,W.matrix,N)},vn(N));s.forEach(function(ne,W){if(z-2===W&&(R=k.slice()),z-1===W&&(j=k.slice()),!ne.matrix){var U=s[W+1],X=Jbe(ne,U,K,N,on(Q,k,N));ne.matrix=Wd(X,N)}k=on(k,ne.matrix,N)});var q=!O&&o;D||(D=vn(q?4:3));var Y=H_(O&&D.length===16?Ds(D,4,3):D,q),J=P;return P=mK(P,N,N),{hasZoom:m!==1||T!==1,hasFixed:g,matrixes:s,rootMatrix:P,originalRootMatrix:J,beforeMatrix:R,offsetMatrix:j,allMatrix:k,targetMatrix:D,targetTransform:Y,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:f,is3d:I,offsetContainer:h,offsetRootContainer:S}}function zxe(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,s=0,o={},c=uW(t);if(t&&(i=c.offsetWidth,a=c.offsetHeight),t){var u=jxe(t,e,n,r),f=Uh(u.allMatrix,u.transformOrigin,i,a);o=ie(ie({},u),f);var h=Uh(u.allMatrix,[50,50],100,100);s=dW([h.pos1,h.pos2],h.direction)}var g=4;return ie(ie(ie({hasZoom:!1,width:i,height:a,rotation:s},c),{originalRootMatrix:vn(g),rootMatrix:vn(g),beforeMatrix:vn(g),offsetMatrix:vn(g),allMatrix:vn(g),targetMatrix:vn(g),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),o)}function gP(t,e,n,r,i,a){a===void 0&&(a=[]);var s=1,o=[0,0],c=ex(),u=ex(),f=ex(),h=ex(),g=[0,0],m={},b=zxe(e,n,i,!0);if(e){var x=qi(e);a.forEach(function(B){m[B]=x(B)});var w=b.is3d?4:3,S=Uh(b.offsetMatrix,Rt(b.transformOrigin,vK(b.targetMatrix,w)),b.width,b.height);s=S.direction,o=Rt(S.origin,[S.left-b.left,S.top-b.top]),h=Zm(b.offsetRootContainer);var T=Nv(r,r,!0).offsetParent||b.offsetRootContainer;if(b.hasZoom){var I=Uh(on(b.originalRootMatrix,b.allMatrix),b.transformOrigin,b.width,b.height),N=Uh(b.originalRootMatrix,K1(qi(T)("transformOrigin")).map(function(B){return parseFloat(B)}),T.offsetWidth,T.offsetHeight);if(c=KA(I,h),f=KA(N,h,T,!0),t){var O=I.left,D=I.top;u=KA({left:O,top:D,bottom:D,right:D},h)}}else{c=Zm(e),f=Yye(T),t&&(u=Zm(t));var k=f.left,P=f.top,R=f.clientLeft,j=f.clientTop,z=[c.left-k,c.top-P];g=et(gp(b.rootMatrix,z,4),[R+b.left,j+b.top])}}return ie({targetClientRect:c,containerClientRect:f,moveableClientRect:u,rootContainerClientRect:h,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:m,offsetDelta:g},b)}function e6(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Yd([e,n,r,i]),s=[a.minX,a.minY],o=et(t.origin,s);return e=et(e,s),n=et(n,s),r=et(r,s),i=et(i,s),ie(ie({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:i,origin:o,beforeOrigin:o,isPersisted:!0})}var mp=(function(t){R0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=ie({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},gP(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new L_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}Zve(n._observerId),n._observerId=qH(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,s=n.target,o=n.zoom,c=n.cspNonce,u=n.translateZ,f=n.cssStyled,h=n.groupable,g=n.linePadding,m=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var b=ae(i||[0,0],2),x=b[0],w=b[1],S=r.left,T=r.top,I=r.target,N=r.direction,O=r.hasFixed,D=r.offsetDelta,k=n.targets,P=this.isDragging(),R={};this.getEnabledAbles().forEach(function(Q){R["data-able-".concat(Q.name.toLowerCase())]=!0});var j=this._getAbleClassName(),z=k&&k.length&&(I||h)||s||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,L=[S-x,T-w];!h&&n.useAccuratePosition&&(L[0]+=D[0],L[1]+=D[1]);var K={position:O?"fixed":"absolute",display:z?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(L[0],"px, ").concat(L[1],"px, ").concat(u,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return g&&(K["--moveable-line-padding"]=g),m&&(K["--moveable-control-padding"]=m),Es(f,ie({cspNonce:c,ref:pl(this,"controlBox"),className:"".concat(Xe("control-box",N===-1?"reverse":"",P?"dragging":"")," ").concat(j," ").concat(a)},R,{onClick:this._onPreventClick,style:K}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),Dh(this,!1),Dh(this,!0);var a=this.events;for(var s in a){var o=a[s];o&&o.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return $i(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(MO)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&eN(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,s=r.pos2,o=r.pos3,c=r.pos4,u=r.targetClientRect;if(!i)return 0;var f;if(Up(n)){var h=n.getBoundingClientRect();f={left:h.left,top:h.top,width:h.width,height:h.height}}else f=ie({width:0,height:0},n);var g=f.left,m=f.top,b=f.width,x=f.height,w=SV([a,s,c,o],u),S=tye(w,[[g,m],[g+b,m],[g+b,m+x],[g,m+x]]),T=wK(w);return!S||!T?0:Math.min(100,S/T*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,s=i.pos1,o=i.pos2,c=i.pos3,u=i.pos4,f=i.targetClientRect;return a?Zk([n,r],SV([s,o,u,c],f)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,s=!a.parentPosition&&!a.wrapperMoveable;s&&hp(!0);var o=a.parentMoveable,c=this.state,u=c.target||a.target,f=this.getContainer(),h=o?o._rootContainer:this._rootContainer,g=gP(this.controlBox,u,f,f,h||f,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var m=e6(a.persistData);for(var b in m)g[b]=m[b]}s&&hp(),this.updateState(g,o?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,s=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var o=a.getEventData();return!!(!((r=o[n])===null||r===void 0)&&r.isEventStart)}if(s?.isFlag()){if(!n)return!0;var o=s.getEventData();return!!(!((i=o[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Wa(this.state),i=ae(r,4),a=i[0],s=i[1],o=i[2],c=i[3],u=Ga(r),f=n.width,h=n.height,g=u.width,m=u.height,b=u.left,x=u.top,w=[n.left,n.top],S=Rt(w,n.origin),T=Rt(w,n.beforeOrigin),I=n.transformOrigin;return{width:g,height:m,left:b,top:x,pos1:a,pos2:s,pos3:o,pos4:c,offsetWidth:f,offsetHeight:h,beforeOrigin:T,origin:S,transformOrigin:I,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&fP(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&fP(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return sxe(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,s=a.props,o=s.parentMoveable||s.wrapperMoveable||a,c=o.props.ables,u=s.groupable,f=$i(c,function(S){return S.name===n});if(this.isDragging()||!f||!f.request)return{request:function(){return this},requestEnd:function(){return this}};var h=f.request(a),g=i||r.isInstant,m=h.isControl?"controlAbles":"targetAbles",b="".concat(u?"Group":"").concat(h.isControl?"Control":""),x=Ne([],ae(o[m]),!1),w={request:function(S){return Jm(a,x,["drag"],b,"",ie(ie({},h.request(S)),{requestAble:n,isRequest:!0}),g),w},requestEnd:function(){return Jm(a,x,["drag"],b,"End",ie(ie({},h.requestEnd()),{requestAble:n,isRequest:!0}),g),w}};return Jm(a,x,["drag"],b,"Start",ie(ie({},h.requestStart(r)),{requestAble:n,isRequest:!0}),g),g?w.request(r).requestEnd():w},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,s=n.transformOrigin,o=n.allMatrix,c=n.is3d,u=n.pos1,f=n.pos2,h=n.pos3,g=n.pos4,m=n.left,b=n.top,x=n.isPersisted,w=r.zoom||1;if(!i&&w<=1){n.renderPoses=[u,f,h,g],n.renderLines=[[u,f],[f,g],[g,h],[h,u]];return}var S=wW(i||{}),T=S.left,I=S.top,N=S.bottom,O=S.right,D=c?4:3,k=[];x?k=s:this.controlBox&&r.groupable?k=a:k=Rt(a,[m,b]);var P=F1(D,Wd(k.map(function(K){return-K}),D),o,Wd(s,D)),R=Ra(P,u,[-T,-I],D),j=Ra(P,f,[O,-I],D),z=Ra(P,h,[-T,N],D),B=Ra(P,g,[O,N],D);n.renderPoses=[R,j,z,B],n.renderLines=[[R,j],[j,B],[B,z],[z,R]];{var L=w/2;n.renderLines=[[Ra(P,u,[-T-L,-I],D),Ra(P,f,[O+L,-I],D)],[Ra(P,f,[O,-I-L],D),Ra(P,g,[O,N+L],D)],[Ra(P,g,[O+L,N],D),Ra(P,h,[-T-L,N],D)],[Ra(P,h,[-T,N+L],D),Ra(P,u,[-T,-I-L],D)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,s=this.state,o=s.target,c=s.container;if(!(!o&&!r)){this.updateAbles();var u=!hP(o,r),f=u||!hP(c,i);if(f){var h=i||this.controlBox;h&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&h&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=EK(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,s=r.firstRenderState;if(s&&!i)return s;if(!this._hasFirstTarget&&a){var o=e6(a);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,s=this.getEnabledAbles(n),o="drag".concat(r,"Start"),c="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),f=tx(s,[o,c],a),h=tx(s,[u],a);this.enabledAbles=s,this.targetAbles=f,this.controlAbles=h},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Es};return this.renderState={},nxe(vW(tx(this.getEnabledAbles(),["render"],i).map(function(s){var o=s.render;return o(n,a)||[]})).filter(function(s){return s}),function(s){var o=s.key;return o}).map(function(s){return s[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Ne(Ne([],ae(r),!1),ae(o),!1)},Ne([],ae(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(Dh(this,!1),this.updateState({gestos:{}})),r||Dh(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=PW(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=DW(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=_o(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,s=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(a||o&&s)return[];var c=this.getState(),u={createElement:Es};return c.renderLines.map(function(f,h){return Ov(u,"",f[0],f[1],i,"render-line-".concat(h))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,s=this._prevDragArea,o=r.dragArea,c=!o&&a!==i,u=(n||o)&&s!==o;return c||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,s=Il(a);if(this._isTargetChanged())for(var o in a){var c=a[o];c&&c.destroy(),a[o]=null}if(i){var u=this.enabledAbles;s.forEach(function(f){var h=tx(u,[f]),g=h.length>0,m=a[f];if(!g){m&&(m.destroy(),a[f]=null);return}m||(m=new Mxe(i,n,f),a[f]=m),m.setAbles(h)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=_o(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=_o(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Ne(Ne([],ae(this._getAbleViewClassNames()),!1),[this.isDragging()?hxe:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=mW(n.filter(Boolean),function(u){return u}).map(function(u){var f=ae(u,1),h=f[0];return h}),a=this._viewClassNames,s=k0(a,i),o=s.removed,c=s.added;o.forEach(function(u){YH(r,a[u])}),c.forEach(function(u){WH(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,s=this.controlGesto,o=a?.isFlag()?a.getEventData():{},c=s?.isFlag()?s.getEventData():{};return i.map(function(u){var f,h,g,m=u.name,b=((f=u.className)===null||f===void 0?void 0:f.call(u,r))||"";return(!((h=o[m])===null||h===void 0)&&h.isEventStart||!((g=c[m])===null||g===void 0)&&g.isEventStart)&&(b+=" ".concat(Xe("".concat(m).concat(n,"-dragging")))),b.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,s=Qc(this.getControlBoxElement());if(!s.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var o=new s.ResizeObserver(this.checkUpdateRect);o.observe(a,{box:"border-box"}),this._reiszeObserver=o}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,s=a.target,o=Qc(this.getControlBoxElement());if(!o.MutationObserver||!s||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===s&&this._mutationObserver)){var c=new o.MutationObserver(function(u){var f,h;try{for(var g=yye(u),m=g.next();!m.done;m=g.next()){var b=m.value;b.type==="attributes"&&b.attributeName==="style"&&r.checkUpdateRect()}}catch(x){f={error:x}}finally{try{m&&!m.done&&(h=g.return)&&h.call(g)}finally{if(f)throw f.error}}});c.observe(s,{attributes:!0}),this._mutationObserver=c}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:sW,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(nK),tN={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),s=a.left,o=a.top,c=a.isPersisted,u=r.zoom||1,f=t.renderGroupRects,h=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];c?i=h.map(function(){return null}):h=[];var g=Oh(t,"parentPosition",[s,o],function(b){return b.join(",")}),m=Oh(t,"requestStyles",t.getRequestChildStyles(),function(b){return b.join(",")});return t.moveables=t.moveables.slice(0,i.length),Ne(Ne([],ae(i.map(function(b,x){return e.createElement(mp,{key:"moveable"+x,ref:BH(t,"moveables",x),target:b,origin:!1,requestStyles:m,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[s,o],persistData:h[x],zoom:u})})),!1),ae(vW(f.map(function(b,x){var w=b.pos1,S=b.pos2,T=b.pos3,I=b.pos4,N=[w,S,T,I];return[[0,1],[1,3],[3,2],[2,0]].map(function(O,D){var k=ae(O,2),P=k[0],R=k[1];return Ov(e,"",et(N[P],g),et(N[R],g),u,"group-rect-".concat(x,"-").concat(D))})}))),!1)}},Lxe=M0("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),s=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||s)){var o=n.contains(i);Ve(t,"onClick",gt(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),s=a>-1,o=!1;a===-1&&(a=Cl(i,function(c){return c.contains(r)}),o=a>-1),Ve(t,"onClickGroup",gt(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:s,containsTarget:o,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function dh(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),ie(ie({},t),{datas:e})}var Vxe=M0("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?BK(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&wr(i,Xe("direction"))&&wr(i,Xe("edge"))&&wr(i,Xe("edgeDraggable"))},dragStart:function(t,e){return yi.dragStart(t,dh(e))},drag:function(t,e){return yi.drag(t,dh(e))},dragEnd:function(t,e){return yi.dragEnd(t,dh(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&wr(i,Xe("direction"))&&wr(i,Xe("line"))},dragGroupStart:function(t,e){return yi.dragGroupStart(t,dh(e))},dragGroup:function(t,e){return yi.dragGroup(t,dh(e))},dragGroupEnd:function(t,e){return yi.dragGroupEnd(t,dh(e))},unset:function(t){return yi.unset(t)}}),NW={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},nN=[IW,EW,$be,lxe,yi,Vxe,lP,cxe,dxe,Tbe,mxe,vxe,pxe,kxe,Ixe,Nxe,tN,NW,Lxe,SW,kW],Bxe=nN.reduce(function(t,e){return(e.events||[]).forEach(function(n){KH(t,n)}),t},[]),Fxe=nN.reduce(function(t,e){return(e.props||[]).forEach(function(n){KH(t,n)}),t},[]);function t6(t,e){var n=ae(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function ix(t,e){var n=ae(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function n6(t,e){return Math.max.apply(Math,Ne([],ae(t.map(function(n){var r=ae(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.max(i[e],a[e],s[e],o[e])})),!1))}function r6(t,e){return Math.min.apply(Math,Ne([],ae(t.map(function(n){var r=ae(n,4),i=r[0],a=r[1],s=r[2],o=r[3];return Math.min(i[e],a[e],s[e],o[e])})),!1))}function Uxe(t,e){var n,r,i,a=[0,0],s=[0,0],o=[0,0],c=[0,0],u=0,f=0;if(!t.length)return{pos1:a,pos2:s,pos3:o,pos4:c,minX:0,minY:0,maxX:0,maxY:0,width:u,height:f,rotation:e};var h=ut(e,Ti);if(h%90){var g=h/180*Math.PI,m=Math.tan(g),b=-1/m,x=[iP,AV],w=[[0,0],[0,0]],S=[iP,AV],T=[[0,0],[0,0]];t.forEach(function(H){H.forEach(function(Z){var le=t6([-m,1,0],Z),de=t6([-b,1,0],Z);x[0]>le&&(w[0]=Z,x[0]=le),x[1]<le&&(w[1]=Z,x[1]=le),S[0]>de&&(T[0]=Z,S[0]=de),S[1]<de&&(T[1]=Z,S[1]=de)})});var I=ae(w,2),N=I[0],O=I[1],D=ae(T,2),k=D[0],P=D[1],R=[-m,1,ix([-m,1],N)],j=[-m,1,ix([-m,1],O)],z=[-b,1,ix([-b,1],k)],B=[-b,1,ix([-b,1],P)];n=ae([[R,z],[R,B],[j,z],[j,B]].map(function(H){var Z=ae(H,2),le=Z[0],de=Z[1];return NO(le,de)[0]}),4),a=n[0],s=n[1],o=n[2],c=n[3],u=S[1]-S[0],f=x[1]-x[0]}else{var L=r6(t,0),K=r6(t,1),Q=n6(t,0),q=n6(t,1);if(a=[L,K],s=[Q,K],o=[L,q],c=[Q,q],u=Q-L,f=q-K,h%180){var Y=[o,a,c,s];r=ae(Y,4),a=r[0],s=r[1],o=r[2],c=r[3],u=q-K,f=Q-L}}if(h%360>180){var Y=[c,o,s,a];i=ae(Y,4),a=i[0],s=i[1],o=i[2],c=i[3]}var J=Yd([a,s,o,c]),ne=J.minX,W=J.minY,U=J.maxX,X=J.maxY;return{pos1:a,pos2:s,pos3:o,pos4:c,width:u,height:f,minX:ne,minY:W,maxX:U,maxY:X,rotation:e}}function RW(t,e){var n=e.map(function(r){if(gr(r)){var i=RW(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var s=$i(t,function(o){var c=o.manager;return c.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&gr(n[0])?n[0]:n}var $xe=(function(t){R0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new xK,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var s=this.state;if(!this.controlBox||s.isPersisted)return;hp(!0),this.moveables.forEach(function(he){he.updateRect(n,!1,!1)});var o=this.props,c=this.moveables,u=s.target||o.target,f=c.map(function(he){return{finded:!1,manager:he}}),h=this.props.targetGroups||[],g=RW(f,h),m=o.useDefaultGroupRotate;g.push.apply(g,Ne([],ae(f.filter(function(he){var ee=he.finded;return!ee}).map(function(he){var ee=he.manager;return ee})),!1));var b=[],x=!r||n!==""&&o.updateGroup,w=o.defaultGroupRotate||0;if(!this._hasFirstTargets){var S=(a=o.persistData)===null||a===void 0?void 0:a.rotation;S!=null&&(w=S)}function T(he,ee,Se){var re=he.map(function(Ie){if(gr(Ie)){var Oe=T(Ie,ee),Ge=[Oe.pos1,Oe.pos2,Oe.pos3,Oe.pos4];return b.push(Oe),{poses:Ge,rotation:Oe.rotation}}else return{poses:Wa(Ie.state),rotation:Ie.getRotation()}}),oe=re.map(function(Ie){var Oe=Ie.rotation;return Oe}),De=0,Pe=oe[0],ze=oe.every(function(Ie){return Math.abs(Pe-Ie)<.1});x?De=!m&&ze?Pe:w:De=!m&&!Se&&ze?Pe:ee;var je=re.map(function(Ie){var Oe=Ie.poses;return Oe}),Ue=Uxe(je,De);return Ue}var I=T(g,this.rotation,!0);x&&(this.rotation=I.rotation,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=b;var N=this.transformOrigin,O=this.rotation,D=this.scale,k=I.width,P=I.height,R=I.minX,j=I.minY,z=oxe([[0,0],[k,0],[0,P],[k,P]],QO(N,k,P),this.rotation/180*Math.PI),B=Yd(z.result),L=B.minX,K=B.minY,Q=" rotate(".concat(O,"deg)")+" scale(".concat(bi(D[0]),", ").concat(bi(D[1]),")"),q="translate(".concat(-L,"px, ").concat(-K,"px)").concat(Q);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(j,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(N,";")+"width:".concat(k,"px;height:").concat(P,"px;")+"transform: ".concat(q),s.width=k,s.height=P;var Y=this.getContainer(),J=gP(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),ne=[J.left,J.top],W=ae(Wa(J),4),U=W[0],X=W[1],H=W[2],Z=W[3],le=Yd([U,X,H,Z]),de=[le.minX,le.minY],ce=bi(D[0]*D[1]);J.pos1=et(U,de),J.pos2=et(X,de),J.pos3=et(H,de),J.pos4=et(Z,de),J.left=R-J.left+de[0],J.top=j-J.top+de[1],J.origin=et(Rt(ne,J.origin),de),J.beforeOrigin=et(Rt(ne,J.beforeOrigin),de),J.originalBeforeOrigin=Rt(ne,J.originalBeforeOrigin),J.transformOrigin=et(Rt(ne,J.transformOrigin),de),u.style.transform="translate(".concat(-L-de[0],"px, ").concat(-K-de[1],"px)")+Q,hp(),this.updateState(ie(ie({},J),{posDelta:de,direction:ce,beforeDirection:ce}),i)},e.prototype.getRect=function(){return ie(ie({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,s,o=(s=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&s!==void 0?s:[];return Ne(Ne([],ae(r),!1),ae(o),!1)},[]);return n},e.prototype.getMoveables=function(){return Ne([],ae(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Ne(Ne([],ae(this.props.ables),!1),[tN],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=_o(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,s=r.targets,o=this.differ.update(s),c=o.added,u=o.changed,f=o.removed,h=c.length||f.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(Dh(this,!1),Dh(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=PW(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=DW(this,"GroupControl")));var g=!hP(n.container,r.container);g&&(n.container=r.container),(g||h||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||s.length&&!xW(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=ie(ie({},mp.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(mp),qxe=(function(t){R0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,s=i.cssStyled,o=i.persistData,c=i.targets||[],u=c.length,f=this.isUnmounted||!u,h=(r=o?.children)!==null&&r!==void 0?r:[];return f&&!u&&h.length?c=h.map(function(){return null}):f||(h=[]),Es(s,{cspNonce:a,ref:pl(this,"controlBox"),className:Xe("control-box")},c.map(function(g,m){var b,x,w=(x=(b=i.individualGroupableProps)===null||b===void 0?void 0:b.call(i,g,m))!==null&&x!==void 0?x:{};return Es(mp,ie({key:"moveable"+m,ref:BH(n,"moveables",m)},i,w,{target:g,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:h[m]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),hp(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),hp()},e.prototype.getRect=function(){return ie(ie({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(c){return c.request(n,ie(ie({},r),{isInstant:!1}),!1)}),s=i||r.isInstant,o={request:function(c){return a.forEach(function(u){return u.request(c)}),this},requestEnd:function(){return a.forEach(function(c){return c.requestEnd()}),this}};return s?o.request(r).requestEnd():o},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=$i(this.moveables,function(s){var o=s.getTargets()[0],c=s.getControlBoxElement(),u=s.getDragElement();return!o||!u?!1:u===i||u.contains(i)||u!==o&&o===i||o.contains(i)||c===i||c.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Ne([],ae(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(mp);function MW(t,e){var n=[];return t.forEach(function(r){if(r){if(Ui(r)){e[r]&&n.push.apply(n,Ne([],ae(e[r]),!1));return}gr(r)?n.push.apply(n,Ne([],ae(MW(r,e)),!1)):n.push(r)}}),n}function jW(t,e){var n=[];return t.forEach(function(r){if(r){if(Ui(r)){e[r]&&n.push.apply(n,Ne([],ae(e[r]),!1));return}gr(r)?n.push(jW(r,e)):n.push(r)}}),n}function zW(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?gr(n)&&gr(i)?zW(n,i):!0:!1})}var Gxe=(function(t){R0(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new xK,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var s=a.css;s&&s.forEach(function(o){n[o]=!0})});var i=Il(n).join(`
`);this.defaultStyled=EK("div",Bve(MO,kye+i))},e.getTotalAbles=function(){return Ne([EW,tN,NW,SW],ae(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,s=i.props,o=mye(i,["ables","props"]),c=ae(this._updateRefs(!0),2),u=c[0],f=c[1],h=MW(u,f),g=h.length>1,m=r.getTotalAbles(),b=Ne(Ne([],ae(m),!1),ae(a||[]),!1),x=ie(ie(ie({},o),s||{}),{ables:b,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=h;var w=null,S=this.moveable,T=o.persistData;if(T?.children&&(g=!0),o.individualGroupable)return Es(qxe,ie({key:"individual-group",ref:pl(this,"moveable")},x,{target:null,targets:h}));if(g){var I=jW(u,f);if(S&&!S.props.groupable&&!S.props.individualGroupable){var N=S.props.target;N&&h.indexOf(N)>-1&&(w=ie({},S.state))}return Es($xe,ie({key:"group",ref:pl(this,"moveable")},x,(n=o.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:h,targetGroups:I,firstRenderState:w}))}else{var O=h[0];if(S&&(S.props.groupable||S.props.individualGroupable)){var D=S.moveables||[],k=$i(D,function(P){return P.props.target===O});k&&(w=ie({},k.state))}return Es(mp,ie({key:"single",ref:pl(this,"moveable")},x,{target:O,firstRenderState:w}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=XO(this.props.target||this.props.targets),a=typeof document<"u",s=zW(r,i),o=this.selectorMap,c={};return this.refTargets.forEach(function u(f){if(Ui(f)){var h=o[f];h?c[f]=o[f]:a&&(s=!0,c[f]=[].slice.call(document.querySelectorAll(f)))}else gr(f)&&f.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=c,[i,c,!n&&s]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),s=a.added,o=a.removed,c=s.length||o.length;c&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=ae(this._updateRefs(),3),f=u[0],h=u[1],g=u[2];this.refTargets=f,this.selectorMap=h,g&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,vye([Fve(PK)],e.prototype,"moveable",void 0),e})(nK),Hxe=(function(t){R0(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=nN,e})(Gxe),mP=function(t,e){return mP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},mP(t,e)};function rN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mP(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Rv=function(){return Rv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rv.apply(this,arguments)};function Kxe(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(a=(i<3?s(a):i>3?s(e,n,a):s(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var Wxe=(function(t){rN(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Es(Hxe,Rv({ref:pl(this,"moveable")},this.state))},e})(CO),Yxe=Fxe,Xxe=PK,Qxe=Bxe,Zxe=(function(t){rN(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var s=Rv({},i),o={};Qxe.forEach(function(f){o[Qve("on ".concat(f))]=function(h){return a.trigger(f,h)}});var c;i.warpSelf?(delete i.warpSelf,a._warp=!0,c=r):(c=Fp(r).createElement("div"),r.appendChild(c)),a.containerProvider=xV(Es(Wxe,Rv({ref:pl(a,"innerMoveable")},s,o)),c),a.selfElement=c;var u=s.target;return gr(u)&&u.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;xV(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=Kxe([dV(Xxe,function(r,i){r[i]||(r[i]=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[i]))return o[i].apply(o,a)})}),dV(Yxe,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var s;this.setState((s={},s[i]=a,s))},enumerable:!0,configurable:!0})})],e),e})(L_),LW=(function(t){rN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Zxe),Uc=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(Uc||{}),km=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(km||{});const Jxe=["mousedown","mousemove","mouseup","mouseleave","mouseout"],e1e=["touchstart","touchmove","touchend","touchcancel"],t1e=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function n1e(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function r1e(t){var e;return Jxe.includes((e=t?.nativeEvent)==null?void 0:e.type)}function VW(t){var e;return e1e.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function i1e(t){const{nativeEvent:e}=t;return e?t1e.includes(e?.type)||"pointerId"in e:!1}function XA(t){return r1e(t)||VW(t)||i1e(t)}function i6(t){var e;const n=VW(t)?(e=t?.touches)==null?void 0:e[0]:t;return n1e(n)?{x:n.pageX,y:n.pageY}:null}function a1e(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function iN(t,{threshold:e=400,captureEvent:n=!1,detect:r=Uc.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:s,onStart:o,onMove:c,onFinish:u,onCancel:f}={}){const h=A.useRef(!1),g=A.useRef(!1),m=A.useRef(),b=A.useRef(),x=A.useRef(t),w=A.useRef(null),S=A.useCallback(O=>D=>{g.current||XA(D)&&(s!==void 0&&!s(D)||(n&&D.persist(),o?.(D,{context:O}),w.current=i6(D),g.current=!0,m.current=D.currentTarget,b.current=setTimeout(()=>{x.current&&(x.current(D,{context:O}),h.current=!0)},e)))},[n,s,o,e]),T=A.useCallback(O=>(D,k)=>{XA(D)&&g.current&&(w.current=null,n&&D.persist(),h.current?u?.(D,{context:O}):g.current&&f?.(D,{context:O,reason:k??km.CancelledByRelease}),h.current=!1,g.current=!1,b.current!==void 0&&clearTimeout(b.current))},[n,u,f]),I=A.useCallback(O=>D=>{if(XA(D)&&(c?.(D,{context:O}),i!==!1&&w.current)){const k=i6(D);if(k){const P=i===!0?25:i,R={x:Math.abs(k.x-w.current.x),y:Math.abs(k.y-w.current.y)};(R.x>P||R.y>P)&&T(O)(D,km.CancelledByMovement)}}},[T,i,c]),N=A.useCallback(O=>{if(t===null)return{};switch(r){case Uc.Mouse:{const D={onMouseDown:S(O),onMouseMove:I(O),onMouseUp:T(O)};return a&&(D.onMouseLeave=k=>{T(O)(k,km.CancelledOutsideElement)}),D}case Uc.Touch:return{onTouchStart:S(O),onTouchMove:I(O),onTouchEnd:T(O)};case Uc.Pointer:{const D={onPointerDown:S(O),onPointerMove:I(O),onPointerUp:T(O)};return a&&(D.onPointerLeave=k=>T(O)(k,km.CancelledOutsideElement)),D}}},[t,T,a,r,I,S]);return A.useEffect(()=>{function O(D){const k=a1e(D);T()(k)}return window.addEventListener("mouseup",O),window.addEventListener("touchend",O),window.addEventListener("pointerup",O),()=>{window.removeEventListener("mouseup",O),window.removeEventListener("touchend",O),window.removeEventListener("pointerup",O)}},[T]),A.useEffect(()=>()=>{b.current!==void 0&&clearTimeout(b.current)},[]),A.useEffect(()=>{x.current=t},[t]),N}const BW=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},Q1=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,id=t=>Q1(t).toISOString(),s1e=t=>{const e=Q1(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},o1e=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},aN=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=id(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||s1e(r),description:e.description||"",merchant:e.merchant||void 0,type:o1e(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,splitGroupId:e.splitGroupId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}};class wd{static instance;static getInstance(){return wd.instance||(wd.instance=new wd),wd.instance}async restoreUserData(e,n){try{console.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"categories",data:n.categories||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:s,data:o}of r)if(Array.isArray(o))for(const c of o){if(!c.id&&s!=="monthlyBudgets")continue;const u={...c,userId:e};let f=c.id;s==="monthlyBudgets"&&c.month&&(f=c.month);const h=St(rt,"users",e,s,f);i.push({ref:h,data:u})}console.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let s=0;s<i.length;s+=a){const o=wk(rt);i.slice(s,s+a).forEach(u=>{o.set(u.ref,u.data)}),console.log(` Committing batch ${Math.floor(s/a)+1}/${Math.ceil(i.length/a)}...`),await o.commit()}console.log(" Restore completed successfully.")}catch(r){throw console.error(" BudgetService.restoreUserData failed:",r),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{console.log(" BudgetService.getEnvelopes called for user:",e);const n=vi(rt,"users",e,"envelopes"),a=(await bs(n)).docs.map((s,o)=>({id:s.id,...s.data(),orderIndex:s.data().orderIndex??o})).sort((s,o)=>{const c=s.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",a.length),a}catch(n){throw console.error(" BudgetService.getEnvelopes failed:",n),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{console.log(" BudgetService.getTransactions: Fetching for user",e);const n=vi(rt,"users",e,"transactions"),r=ks(n,au("date","desc")),a=(await bs(r)).docs.map(s=>{const o={id:s.id,...s.data()};return aN(o)});return console.log(` Fetched ${a.length} transactions`),a}catch(n){throw console.error(" BudgetService.getTransactions failed:",n),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async createEnvelope(e){try{console.log(" BudgetService.createEnvelope called for user:",e.userId);const n=vi(rt,"users",e.userId,"envelopes"),r=St(n),i=vt.now(),a={...e,createdAt:i,lastUpdated:i};aa(r,a).catch(o=>console.error("Create env failed",o));const s={...e,id:r.id,createdAt:id(i),lastUpdated:id(i)};return console.log(" Created envelope (optimistic):",s.id),s}catch(n){throw console.error(" BudgetService.createEnvelope failed:",n),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{console.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=St(rt,"users",e,"envelopes",n.id);aa(r,{...n,lastUpdated:vt.now()},{merge:!0}).catch(i=>console.error("Update env failed",i)),console.log(" Updated envelope (optimistic):",n.id)}catch(r){throw console.error(" BudgetService.updateEnvelope failed:",r),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=St(rt,"users",e,"envelopes",n),i=ks(vi(rt,"users",e,"transactions"),Vfe("envelopeId","==",n)),s=(await bs(i)).docs.map(o=>oa(o.ref));await Promise.all([oa(r),...s]),console.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw console.error(" BudgetService.deleteEnvelope failed:",r),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{console.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=St(rt,"users",e,"envelopes",i.id);return aa(a,{orderIndex:i.orderIndex,lastUpdated:vt.now()},{merge:!0})});Promise.all(r).catch(i=>console.error("Reorder env failed",i)),console.log(" Reordered envelopes (optimistic)")}catch(r){throw console.error(" BudgetService.reorderEnvelopes failed:",r),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{console.log(" BudgetService.createTransaction called for user:",e.userId);const n=vi(rt,"users",e.userId,"transactions"),r=St(n),i=vt.now();if(e.paymentMethod){const c={...e.paymentMethod};c.last4===void 0&&delete c.last4,e.paymentMethod=c}const s={...Object.fromEntries(Object.entries(e).filter(([c,u])=>u!==void 0)),createdAt:i};aa(r,s).catch(c=>console.error("Create tx failed",c));const o={...e,id:r.id};return console.log(" Created transaction (optimistic):",o.id),o}catch(n){throw console.error(" BudgetService.createTransaction failed:",n),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if(console.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,s])=>s!==void 0)),i=St(rt,"users",e,"transactions",n.id);aa(i,r,{merge:!0}).catch(a=>console.error("Update tx failed",a)),console.log(" Updated transaction (optimistic):",n.id)}catch(r){throw console.error(" BudgetService.updateTransaction failed:",r),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{console.log(" BudgetService.deleteTransaction called for transaction:",n);const r=St(rt,"users",e,"transactions",n);oa(r).catch(i=>console.error("Delete tx failed",i)),console.log(" Deleted transaction (optimistic):",n)}catch(r){throw console.error(" BudgetService.deleteTransaction failed:",r),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{console.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=St(rt,"users",e.userId,"monthlyBudgets",e.month),r=vt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};so(n,{incomeSources:Yfe(a),updatedAt:r}).catch(o=>{o.code==="not-found"?aa(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(c=>console.error("Failed to create monthly budget doc",c)):console.error("Create income failed",o)});const s={...e,id:i,amount:Number(e.amount),createdAt:id(r),updatedAt:id(r)};return console.log(" Created income source (optimistic/embedded):",s.id),s}catch(n){throw console.error(" BudgetService.createIncomeSource failed:",n),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{console.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=St(rt,"users",e,"monthlyBudgets",r);bA(a).then(s=>{if(!s.exists())return;const u=(s.data().incomeSources||[]).map(f=>{if(f.id===n){const h={...f,...i,updatedAt:vt.now()};return i.amount!==void 0&&(h.amount=Number(i.amount)),h}return f});so(a,{incomeSources:u,updatedAt:vt.now()})}).catch(s=>console.error("Update income failed",s)),console.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw console.error(" BudgetService.updateIncomeSource failed:",a),a}}async deleteIncomeSource(e,n,r){try{console.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=St(rt,"users",e,"monthlyBudgets",r);bA(i).then(a=>{if(!a.exists())return;const c=(a.data().incomeSources||[]).filter(u=>u.id!==n);so(i,{incomeSources:c,updatedAt:vt.now()})}).catch(a=>console.error("Delete income failed",a)),console.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw console.error(" BudgetService.deleteIncomeSource failed:",i),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{console.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=St(rt,"users",e.userId,"monthlyBudgets",e.month),r=vt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};so(n,i).catch(s=>{s.code==="not-found"?aa(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(o=>console.error("Failed to create monthly budget doc",o)):console.error("Create allocation failed",s)});const a={...e,id:e.envelopeId,createdAt:id(r),updatedAt:id(r)};return console.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw console.error(" BudgetService.createEnvelopeAllocation failed:",n),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{console.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=St(rt,"users",e,"monthlyBudgets",r),s={updatedAt:vt.now()};i.budgetedAmount!==void 0&&(s[`allocations.${n}`]=Number(i.budgetedAmount)),so(a,s).catch(o=>console.error("Update allocation failed",o)),console.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw console.error(" BudgetService.updateEnvelopeAllocation failed:",a),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{console.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=St(rt,"users",e,"monthlyBudgets",r);so(i,{[`allocations.${n}`]:XL(),updatedAt:vt.now()}).catch(a=>console.error("Delete allocation failed",a)),console.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw console.error(" BudgetService.deleteEnvelopeAllocation failed:",i),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{console.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=St(rt,"users",e,"monthlyBudgets",n),i=await bA(r);if(!i.exists())return console.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),s=(a.incomeSources||[]).map(u=>({...u,amount:Number(u.amount),createdAt:u.createdAt?.toDate?u.createdAt.toDate().toISOString():u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt?.toDate?u.updatedAt.toDate().toISOString():u.updatedAt||new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime()),o=a.allocations||{},c=Object.entries(o).map(([u,f])=>({id:u,userId:e,envelopeId:u,month:n,budgetedAmount:Number(f),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((u,f)=>new Date(u.createdAt).getTime()-new Date(f.createdAt).getTime());return console.log(` Fetched ${s.length} income sources and ${c.length} allocations for ${n}`),{incomeSources:s,allocations:c}}catch(r){throw console.error(" BudgetService.getMonthData failed:",r),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{console.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(m=>m.id));console.log(` Found ${r.length} existing envelopes`);const a=vi(rt,"users",e,"envelopeAllocations"),s=await bs(a),o=[],c=new Set;for(const m of s.docs){const b=m.data();c.add(b.month),i.has(b.envelopeId)||(o.push(m.id),console.log(` Found orphaned allocation: ${m.id} for envelope ${b.envelopeId} in month ${b.month}`))}if(o.length>0){const m=o.map(b=>oa(St(rt,"users",e,"envelopeAllocations",b)));await Promise.all(m),n.orphanedAllocationsDeleted+=o.length,n.details.deletedAllocationIds.push(...o),console.log(` Deleted ${o.length} orphaned allocations (legacy)`)}const u=vi(rt,"users",e,"monthlyBudgets"),f=await bs(u);for(const m of f.docs){const x=m.data().allocations||{},w={};let S=!1;Object.keys(x).forEach(T=>{i.has(T)||(w[`allocations.${T}`]=XL(),S=!0,console.log(` Found orphaned embedded allocation in ${m.id} for envelope ${T}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${m.id}_${T}`))}),S&&(w.updatedAt=vt.now(),await so(m.ref,w),c.add(m.id))}const h=await this.getTransactions(e),g=[];for(const m of h)i.has(m.envelopeId)||(g.push(m.id),console.log(` Found orphaned transaction: ${m.id} for envelope ${m.envelopeId}`));if(g.length>0){const m=g.map(b=>oa(St(rt,"users",e,"transactions",b)));await Promise.all(m),n.orphanedTransactionsDeleted=g.length,n.details.deletedTransactionIds=g,console.log(` Deleted ${g.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(c),console.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw console.error(" BudgetService.cleanupOrphanedData failed:",n),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=St(rt,"users",e,"monthlyBudgets",n);return uf(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const s=a.data(),o=(s.incomeSources||[]).map(f=>({...f,amount:Number(f.amount),createdAt:f.createdAt?.toDate?f.createdAt.toDate().toISOString():f.createdAt||new Date().toISOString(),updatedAt:f.updatedAt?.toDate?f.updatedAt.toDate().toISOString():f.updatedAt||new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime()),c=s.allocations||{},u=Object.entries(c).map(([f,h])=>({id:f,userId:e,envelopeId:f,month:n,budgetedAmount:Number(h),createdAt:s.createdAt?.toDate?s.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:s.updatedAt?.toDate?s.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((f,h)=>new Date(f.createdAt).getTime()-new Date(h.createdAt).getTime());r({incomeSources:o,allocations:u})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const s=e?.[a]||[],o=n?.[a]||[],c={};s.forEach(f=>{c[f.envelopeId]=f.budgetedAmount});const u={month:a,userId:"",incomeSources:o,allocations:c,totalIncome:o.reduce((f,h)=>f+Number(h.amount||0),0),availableToBudget:o.reduce((f,h)=>f+Number(h.amount||0),0)-s.reduce((f,h)=>f+Number(h.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(u)}),r}async deleteAllUserData(e){try{console.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","categories","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){console.log(` Deleting collection: ${r}...`);const i=vi(rt,"users",e,r),a=await bs(i);if(a.empty){console.log("   (Empty collection)");continue}const s=a.docs.map(o=>oa(o.ref));await Promise.all(s),console.log(`    Deleted ${a.size} documents from ${r}`)}console.log(" All user data deleted successfully.")}catch(n){throw console.error(" BudgetService.deleteAllUserData failed:",n),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const sN=wd.getInstance();class $c{static instance;constructor(){}static getInstance(){return $c.instance||($c.instance=new $c),$c.instance}createId(){return St(vi(rt,"temp")).id}async createCategory(e){const n=St(rt,`users/${e.userId}/categories`,e.id);return await aa(n,e),e}async getCategories(e){const n=ks(vi(rt,`users/${e}/categories`),au("orderIndex","asc"));return(await bs(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=St(rt,`users/${e}/categories`,n.id);await aa(r,n,{merge:!0})}async deleteCategory(e,n){const r=St(rt,`users/${e}/categories`,n);await oa(r)}async reorderCategories(e,n){const r=wk(rt);n.forEach((i,a)=>{const s=St(rt,`users/${e}/categories`,i.id);r.update(s,{orderIndex:a})}),await r.commit()}async deduplicateCategories(e){const n=await this.getCategories(e),r=new Map,i=[];for(const s of n){const o=s.name.toLowerCase().trim();r.has(o)?i.push(s.id):r.set(o,s)}if(i.length===0)return console.log(" No duplicate categories found"),0;console.log(` Found ${i.length} duplicate categories to remove`);const a=450;for(let s=0;s<i.length;s+=a){const o=wk(rt);i.slice(s,s+a).forEach(u=>{const f=St(rt,`users/${e}/categories`,u);o.delete(f)}),await o.commit(),console.log(` Deleted batch ${Math.floor(s/a)+1}`)}return console.log(` Removed ${i.length} duplicate categories`),i.length}subscribeToCategories(e,n){const r=ks(vi(rt,`users/${e}/categories`),au("orderIndex","asc"));return uf(r,i=>{const a=i.docs.map(s=>s.data());n(a)},i=>{console.error(" Category subscription error:",i)})}}$c.getInstance();const QA=t=>vi(rt,"users",t,"transactions"),l1e={subscribeToTransactions:(t,e)=>{const n=ks(QA(t),au("date","desc"));return uf(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=ks(QA(t),au("date","desc")),r=(await bs(e)).docs.map(i=>{const a={id:i.id,...i.data()};return aN(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await I_(QA(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(t,e,n)=>{const r=St(rt,"users",t,"transactions",e);return await so(r,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=St(rt,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await oa(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},ZA=t=>vi(rt,"users",t,"envelopes"),c1e={subscribeToEnvelopes:(t,e)=>{const n=ks(ZA(t),au("orderIndex","asc"));return uf(n,i=>{const a=i.docs.map(s=>{const o=s.data();return{id:s.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=ZA(t),i=(await bs(e)).docs.map((a,s)=>{const o=a.data();return{id:a.id,...o,createdAt:o.createdAt?.toDate?.()?o.createdAt.toDate().toISOString():o.createdAt,lastUpdated:o.lastUpdated?.toDate?.()?o.lastUpdated.toDate().toISOString():o.lastUpdated,orderIndex:o.orderIndex??s}}).sort((a,s)=>{const o=a.orderIndex??0,c=s.orderIndex??0;return o-c});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await I_(ZA(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=St(rt,"users",t,"envelopes",e.id);return await aa(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=St(rt,"users",t,"envelopes",e);return await so(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=St(rt,"users",t,"envelopes",e);await oa(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},JA=t=>vi(rt,"users",t,"distributionTemplates"),u1e={subscribeToDistributionTemplates:(t,e)=>{const n=ks(JA(t),au("lastUsed","desc"));return uf(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=ks(JA(t),au("lastUsed","desc"));return(await bs(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await I_(JA(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=St(rt,"users",t,"distributionTemplates",e.id);return await aa(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=St(rt,"users",t,"distributionTemplates",e);return await so(r,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=St(rt,"users",t,"distributionTemplates",e);await oa(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},eC=t=>vi(rt,"users",t,"appSettings"),FW={subscribeToAppSettings:(t,e)=>{const n=ks(eC(t),KL(1));return uf(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(s=>({id:s.id,...s.data()}))[0];e(a)})},getAppSettings:async t=>{const e=ks(eC(t),KL(1)),n=await bs(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await I_(eC(e),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=St(rt,"users",t,"appSettings",e.id);return await aa(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=St(rt,"users",t,"appSettings",e);return await aa(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=St(rt,"users",t,"appSettings",e);await oa(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},a6=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:FW},Symbol.toStringTag,{value:"Module"})),d1e=t=>aN(t),f1e=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),h1e=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),s6=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;console.log(" Current month for subscriptions:",n);const r=c1e.subscribeToEnvelopes(e,f=>{console.log(" Real-time sync: Envelopes updated",f.length);const h=f.map(f1e),g=t.getState(),m=new Set(g.envelopes.map(w=>w.id)),b=new Set(h.map(w=>w.id)),x=[...h.filter(w=>m.has(w.id)),...g.envelopes.filter(w=>!b.has(w.id))];t.setState({envelopes:x})}),i=l1e.subscribeToTransactions(e,f=>{console.log(" Real-time sync: Transactions updated",f.length);const h=f.map(d1e),g=t.getState(),m=new Set(g.transactions.map(w=>`${w.id}-${w.month}`)),b=new Set(h.map(w=>`${w.id}-${w.month}`)),x=[...h.filter(w=>m.has(`${w.id}-${w.month}`)),...g.transactions.filter(w=>!b.has(`${w.id}-${w.month}`))];t.setState({transactions:x})}),s=$c.getInstance().subscribeToCategories(e,f=>{console.log(" Real-time sync: Categories updated",f.length);const h=f.map(h1e),g=Array.from(new Map(h.map(m=>[m.id,m])).values());g.length!==h.length&&console.warn(" Duplicate categories detected in real-time update, deduplicating..."),t.setState({categories:g})}),o=u1e.subscribeToDistributionTemplates(e,f=>{console.log(" Real-time sync: Templates updated from Firebase",f.length)}),c=FW.subscribeToAppSettings(e,f=>{console.log(" Real-time sync: Settings updated",f?"found":"null");const h=t.getState();if(f){const g={...h.appSettings,...f,paymentSources:f.paymentSources??h.appSettings?.paymentSources??[]};t.setState({appSettings:g})}else console.log(" Firebase settings null, preserving local state")}),u=sN.subscribeToMonthlyBudget(e,n,f=>{console.log(` Real-time sync: Monthly budget updated (${f.incomeSources.length} sources, ${f.allocations.length} allocations)`);const h=t.getState();t.setState({incomeSources:{...h.incomeSources,[n]:f.incomeSources},allocations:{...h.allocations,[n]:f.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactions:i,categories:s,templates:o,settings:c,monthlyBudget:u},console.log(" Real-time subscriptions active - cross-device sync enabled")},p1e=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),s6(e,r())),n.subscribe(s=>{if(s.isAuthenticated&&s.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),s6(e,r());else if(!s.isAuthenticated&&!s.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const o=window.__firebaseUnsubscribers;o.envelopes&&o.envelopes(),o.transactions&&o.transactions(),o.categories&&o.categories(),o.templates&&o.templates(),o.settings&&o.settings(),o.monthlyBudget&&o.monthlyBudget(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=e.getState().currentMonth;e.subscribe(s=>{if(s.currentMonth!==a&&s.isAuthenticated){console.log(" Month changed from",a,"to",s.currentMonth),a=s.currentMonth;const o=r();if(o&&window.__firebaseUnsubscribers){const c=window.__firebaseUnsubscribers;c.monthlyBudget&&c.monthlyBudget(),console.log(" Unsubscribed from old month data"),c.monthlyBudget=sN.subscribeToMonthlyBudget(o,s.currentMonth,u=>{console.log(" Real-time sync: Monthly budget updated for new month");const f=e.getState();e.setState({incomeSources:{...f.incomeSources,[s.currentMonth]:u.incomeSources},allocations:{...f.allocations,[s.currentMonth]:u.allocations}})}),console.log(" Subscribed to monthly data for new month:",s.currentMonth)}}})},Wx=()=>$a.getState().currentUser?.id||"",On=wd.getInstance(),el=$c.getInstance(),sn=L2()(pce(R$((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null,setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:async()=>{const n=Wx();if(!n){console.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;if(console.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)}),i){t({isOnboardingCompleted:!0}),console.log(" Skipping onboarding: already completed (localStorage)");return}try{if((await On.getEnvelopes(n)).length>0){console.log(" Existing user detected on new device  skipping onboarding, setting localStorage"),localStorage.setItem(r,"true"),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}}catch(a){console.error(" Failed to check existing envelopes for onboarding:",a),t({isOnboardingCompleted:!0,isOnboardingActive:!1});return}e().isOnboardingActive||(console.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingCompleted:!1,isOnboardingActive:!0}),console.log(" isOnboardingActive set to:",e().isOnboardingActive))},completeOnboarding:()=>{const n=Wx();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),console.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=Wx();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),console.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),console.log(` Clearing all data for month: ${n}`);const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const{monthlyBudgetService:a}=await Pt(async()=>{const{monthlyBudgetService:s}=await import("./MonthlyBudgetService-_9Mlr_Uu.js");return{monthlyBudgetService:s}},[]);await a.clearMonthData(i.id,n),await e().init(),console.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw console.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},fetchMonthData:async n=>{try{const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping month data fetch");return}console.log(`Fetching month data for: ${n}`);const a=await On.getMonthData(i.id,n),s=e();t({incomeSources:{...s.incomeSources,[n]:a.incomeSources},allocations:{...s.allocations,[n]:a.allocations}}),console.log(` Fetched month data for ${n}`),(async()=>{const c=e(),u=c.allocations[n]||[],f=c.transactions.filter(g=>g.month===n);let h=0;for(const g of u){const m=c.envelopes.find(x=>x.id===g.envelopeId);if(m?.isPiggybank)continue;const b=f.find(x=>x.envelopeId===g.envelopeId&&(x.description==="Monthly Budget Allocation"||x.description==="Monthly Allocation"||x.description==="Budgeted"||x.description==="Piggybank Contribution"));b?b.amount!==g.budgetedAmount&&(console.log(` Repairing mismatch for envelope ${m?.name||g.envelopeId}: Alloc ${g.budgetedAmount} vs Tx ${b.amount}`),await c.updateTransaction({...b,amount:g.budgetedAmount}),h++):g.budgetedAmount>0&&(console.log(` Repairing missing transaction for envelope ${m?.name||g.envelopeId}`),await c.addTransaction({description:"Budgeted",amount:g.budgetedAmount,envelopeId:g.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),h++)}h>0&&console.log(` Repaired ${h} allocation discrepancies for ${n}`)})().catch(c=>console.error("Verification failed:",c))}catch(r){console.error(` Failed to fetch month data for ${n}:`,r)}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(o=>o.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):console.log(` No allocation found for envelope ${n} in ${r}`);const s=i.transactions.filter(o=>o.envelopeId===n&&(o.month===r||o.date.startsWith(r)));s.length>0&&(console.log(` Deleting ${s.length} transactions for envelope ${n} in ${r}`),await Promise.all(s.map(o=>e().deleteTransaction(o.id)))),t({isLoading:!1}),console.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw console.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},setMonth:async n=>{t({currentMonth:n});const r=e();(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&(console.log(`Month ${n} data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{console.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(g=>g.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}console.log(`Fetching data for user: ${i.id}, month: ${n.currentMonth}`);const[a,s,o,c]=await Promise.all([On.getEnvelopes(i.id),On.getTransactions(i.id),el.getCategories(i.id).catch(g=>(console.error(" Failed to load categories:",g),[])),On.getMonthData(i.id,n.currentMonth)]);let u=Array.from(new Map(o.map(g=>[g.id,g])).values());const f=new Set;let h=!1;for(const g of u){const m=g.name.toLowerCase().trim();if(f.has(m)){h=!0;break}f.add(m)}h&&i&&(console.log(" Duplicate category names detected, running Firestore cleanup..."),await el.deduplicateCategories(i.id)>0&&(u=await el.getCategories(i.id))),t({envelopes:a,transactions:s,categories:u,incomeSources:{...n.incomeSources,[n.currentMonth]:c.incomeSources},allocations:{...n.allocations,[n.currentMonth]:c.allocations},isLoading:!1,error:null}),console.log(` BudgetStore initialized: ${a.length} envelopes, ${s.length} transactions, ${o.length} categories, ${c.incomeSources.length} income sources, ${c.allocations.length} allocations`)}catch(r){console.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchCategories:async()=>{try{t({isLoading:!0,error:null});const r=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!r)return;const i=await el.getCategories(r.id),a=Array.from(new Map(i.map(s=>[s.id,s])).values());t({categories:a,isLoading:!1})}catch(n){console.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a=e().categories.find(c=>c.name.toLowerCase().trim()===(n.name||"").toLowerCase().trim());if(a)return console.log(` Category "${n.name}" already exists, skipping creation`),t({isLoading:!1}),a.id;const s=el.createId(),o={...n,id:s,userId:i.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await el.createCategory(o),t(c=>c.categories.some(f=>f.id===s)?{isLoading:!1}:{categories:[...c.categories,o],isLoading:!1}),s}catch(r){throw console.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a={...n,updatedAt:new Date().toISOString()};await el.updateCategory(i.id,a),t(s=>({categories:s.categories.map(o=>o.id===n.id?a:o),isLoading:!1}))}catch(r){throw console.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");await el.deleteCategory(i.id,n),t(a=>({categories:a.categories.filter(s=>s.id!==n),isLoading:!1}))}catch(r){throw console.error("Failed to delete category:",r),t({isLoading:!1}),r}},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a=e(),s=new Map;n.forEach((c,u)=>s.set(c,u));const o=a.categories.map(c=>{if(!s.has(c.id))return c;const u=s.get(c.id);return c.orderIndex===u?c:{...c,orderIndex:u}});t({categories:o.sort((c,u)=>c.orderIndex-u.orderIndex)}),await el.reorderCategories(i.id,o),t({isLoading:!1})}catch(r){throw console.error("Failed to reorder categories:",r),t({isLoading:!1}),r}},addEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...n,userId:i.id},s=await On.createEnvelope(a);return t(o=>o.envelopes.some(u=>u.id===s.id)?{isLoading:!1}:{envelopes:[...o.envelopes,s],isLoading:!1}),console.log(" Added envelope:",s.id),s.id}catch(r){throw console.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.updateEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.map(s=>s.id===n.id?n:s),isLoading:!1})),console.log(" Updated envelope:",n.id)}catch(r){throw console.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.deleteEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.filter(s=>s.id!==n),transactions:a.transactions.filter(s=>s.envelopeId!==n),isLoading:!1})),console.log(" Deleted envelope:",n)}catch(r){throw console.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((u,f)=>{i.set(u,f)});const a=r.envelopes.map(u=>{if(!i.has(u.id))return u;const f=i.get(u.id);return u.orderIndex===f?u:{...u,orderIndex:f}}),s=a.filter((u,f)=>u!==r.envelopes[f]);if(!s.length){t({isLoading:!1});return}const c=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!c)throw new Error("No authenticated user found");await On.reorderEnvelopes(c.id,s),t({envelopes:a,isLoading:!1}),console.log(" Reordered envelopes")}catch(r){throw console.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},addTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),s=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,o={...n,userId:i.id,month:s},c=await On.createTransaction(o);t(u=>u.transactions.some(h=>h.id===c.id)?{isLoading:!1}:{transactions:[...u.transactions,c],isLoading:!1}),console.log(" Added transaction:",c.id)}catch(r){throw console.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),s=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,o={...n,month:s};await On.updateTransaction(i.id,o),t(c=>({transactions:c.transactions.map(u=>u.id===n.id?o:u),isLoading:!1})),console.log(" Updated transaction:",n.id)}catch(r){throw console.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await On.deleteTransaction(i.id,n),t(a=>({transactions:a.transactions.filter(s=>s.id!==n),isLoading:!1})),console.log(" Deleted transaction:",n)}catch(r){throw console.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),s=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,o={...n,month:s};await On.updateTransaction(i.id,o),t(c=>{const u=c.transactions.findIndex(h=>h.id===n.id);let f;return u>=0?f=c.transactions.map(h=>h.id===n.id?o:h):f=[...c.transactions,o],{transactions:f,isLoading:!1}}),console.log(" Restored transaction:",n.id)}catch(r){throw console.error(" restoreTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to restore transaction"}),r}},transferFunds:async(n,r,i,a,s)=>{try{const o=s?typeof s=="string"?s:s.toISOString():new Date().toISOString(),c=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(u=>u.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:o,type:"Expense",transferId:c,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(u=>u.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:o,type:"Income",transferId:c,reconciled:!1}),console.log(" Transfer completed")}catch(o){throw console.error(" transferFunds failed:",o),o}},fetchData:async()=>{await e().init()},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(u=>u.id===n);if(!a)throw new Error("Envelope not found");t(u=>({envelopes:u.envelopes.map(f=>f.id===n?{...f,name:r}:f),isLoading:!0}));const o=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");const c={...a,name:r};await On.updateEnvelope(o.id,c),t({isLoading:!1}),console.log(" Renamed envelope:",n)}catch(i){throw console.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(s=>s.id===n);if(!a)return console.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const s=i.transactions.filter(h=>h.envelopeId===n),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}if(r){const s=i.transactions.filter(h=>h.envelopeId===n&&h.month===r),o=s.filter(h=>h.type==="Expense"),c=s.filter(h=>h.type==="Income"),u=o.reduce((h,g)=>h+(g.amount||0),0);return c.reduce((h,g)=>h+(g.amount||0),0)-u}return console.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0},resetData:async()=>{console.log(" Resetting all data"),t({isLoading:!0});try{const r=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(i=>i.useAuthStore.getState())).currentUser;r?(console.log(" Deleting all data from Firestore for user:",r.id),await On.deleteAllUserData(r.id)):console.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),console.log(" Reset data complete")}catch(n){throw console.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("You must be logged in to restore data.");return console.log(" Starting Time Machine Restore for user:",i.id),await On.restoreUserData(i.id,n),console.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return console.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[],siriToken:n.siriToken??r.appSettings?.siriToken};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(o=>{const c={...o};return c.last4===void 0&&delete c.last4,c}));const s=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(s){const{AppSettingsService:o}=await Pt(async()=>{const{AppSettingsService:c}=await Promise.resolve().then(()=>a6);return{AppSettingsService:c}},void 0);await o.updateAppSettings(s.id,i.id,i)}t({appSettings:i,isLoading:!1}),console.log(" Updated app settings")}catch(r){throw console.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(i){const{AppSettingsService:s}=await Pt(async()=>{const{AppSettingsService:c}=await Promise.resolve().then(()=>a6);return{AppSettingsService:c}},void 0),o=await s.getAppSettings(i.id);if(o){t({appSettings:o}),console.log(" Loaded app settings from Firestore");return}}const a={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};i&&(a.userId=i.id),t({appSettings:a}),console.log(" Initialized default app settings")}catch(n){console.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const a=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const s=e().envelopes.find(c=>c.id===n&&c.isPiggybank);if(!s)throw new Error("Piggybank not found");const o={...s,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:s.piggybankConfig?.targetAmount,color:s.piggybankConfig?.color,icon:s.piggybankConfig?.icon,paused:s.piggybankConfig?.paused??!1}};if(console.log(" Updating envelope in Firestore:",o),await On.updateEnvelope(a.id,o),console.log(" Envelope updated successfully"),t(c=>({envelopes:c.envelopes.map(u=>u.id===n?o:u),isLoading:!1})),!s.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(u=>u.envelopeId===n&&(u.description==="Monthly Allocation"||u.description==="Piggybank Contribution"))||console.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(c){console.error(" Failed to update piggybank contribution:",c)}console.log(" Piggybank contribution updated successfully")}catch(i){throw console.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}},addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");console.log(" Adding income source:",{month:n,source:r});const s=await On.createIncomeSource({...r,userId:a.id,month:n});t(o=>{const c=o.incomeSources[n]||[];return c.some(f=>f.id===s.id)?{isLoading:!1}:{incomeSources:{...o.incomeSources,[n]:[...c,s]},isLoading:!1}}),console.log(" Added income source:",s.id)}catch(i){throw console.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating income source:",{month:n,sourceId:r.id}),t(s=>({incomeSources:{...s.incomeSources,[n]:s.incomeSources[n]?.map(o=>o.id===r.id?{...r,updatedAt:new Date().toISOString()}:o)||[]},isLoading:!1}));const a=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!a)return;await On.updateIncomeSource(a.id,r.id,n,r),console.log(" Updated income source:",r.id)}catch(i){throw console.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Deleting income source:",{month:n,sourceId:r}),t(s=>({incomeSources:{...s.incomeSources,[n]:s.incomeSources[n]?.filter(o=>o.id!==r)||[]},isLoading:!1}));const a=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(s=>s.useAuthStore.getState())).currentUser;if(!a)return;await On.deleteIncomeSource(a.id,r,n),console.log(" Deleted income source:",r)}catch(i){throw console.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(b=>b.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");console.log(" Copying allocations from previous month:",n);const[a,s]=n.split("-").map(Number);let o=a,c=s-1;c<1&&(o=a-1,c=12);const u=`${o}-${String(c).padStart(2,"0")}`;(!e().incomeSources[u]||!e().allocations[u])&&(console.log(` Previous month ${u} data missing, fetching...`),await e().fetchMonthData(u));const f=e().incomeSources[u]||[];if(console.log(` Found ${f.length} income sources from ${u}`),f.length>0){for(const b of f){const{id:x,...w}=b;await e().addIncomeSource(n,w)}console.log(` Copied ${f.length} income sources to ${n}`)}const h=e().allocations[u]||[];console.log(` Found ${h.length} allocations from ${u}`);const g=h.filter(b=>{const x=e().envelopes.find(w=>w.id===b.envelopeId);return!!x&&!x.isPiggybank});if(g.length>0){for(const b of g)await e().createEnvelopeAllocation({envelopeId:b.envelopeId,budgetedAmount:b.budgetedAmount,userId:i.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),b.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:b.budgetedAmount,envelopeId:b.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});console.log(` Copied ${g.length} regular allocations to ${n}`)}const m=e().envelopes.filter(b=>b.isPiggybank);console.log(` Processing ${m.length} piggybanks for ${n}`);for(const b of m){const x=b.piggybankConfig?.monthlyContribution,w=b.piggybankConfig?.paused??!1;if(!w&&x&&x>0)try{console.log(` Setting piggybank allocation for ${b.name}: ${x}`),await e().setEnvelopeAllocation(b.id,x)}catch(S){console.error(` Failed to set allocation for piggybank ${b.name}:`,S)}else console.log(` Skipping piggybank ${b.name} (paused=${w}, contribution=${x})`)}t({isLoading:!1}),console.log(` Complete monthly setup copied to ${n}`)}catch(r){throw console.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const s=e().currentMonth,o=e().envelopes.find(f=>f.id===n);if(!o){console.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const c=!!o.isPiggybank;console.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${s}, isPiggybank=${c}`);const u=e().allocations[s]?.find(f=>f.envelopeId===n);if(u?await e().updateEnvelopeAllocation(u.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:a.id,month:s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),c&&r>0&&!o?.piggybankConfig?.paused){const f=e().transactions.find(h=>h.envelopeId===n&&h.month===s&&(h.description==="Monthly Allocation"||h.description==="Piggybank Contribution"));if(f){const h={...f,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(h)}else{const h={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:s,date:`${s}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(h)}}if(!c&&r>0){const f=e().transactions.find(h=>h.envelopeId===n&&h.month===s&&(h.description==="Monthly Budget Allocation"||h.description==="Budgeted"));if(f){const h={...f,amount:r,description:"Budgeted"};await e().updateTransaction(h)}else{const h={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:s,date:`${s}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(h)}}console.log(" Envelope allocation set successfully")}catch(i){throw console.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const i=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=e().currentMonth,s=await On.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:i.id,month:a});t(o=>{const c=o.allocations[a]||[];return c.some(f=>f.id===s.id)?{isLoading:!1}:{allocations:{...o.allocations,[a]:[...c,s]},isLoading:!1}}),console.log(" Created envelope allocation:",s.id)}catch(r){throw console.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{console.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,s=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(f=>f.useAuthStore.getState())).currentUser;if(!s)throw new Error("No authenticated user found");const o=e().allocations[i]?.find(f=>f.id===n);if(!o)throw new Error("Allocation not found");const c=e().envelopes.find(f=>f.id===o.envelopeId),u=c?.isPiggybank;if(await On.updateEnvelopeAllocation(s.id,o.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(f=>({allocations:{...f.allocations,[i]:f.allocations[i]?.map(h=>h.id===n?{...h,...r,updatedAt:new Date().toISOString()}:h)||[]},isLoading:!1})),u&&r.budgetedAmount!==void 0){const f=e().transactions.find(h=>h.envelopeId===o.envelopeId&&h.month===i&&(h.description==="Monthly Allocation"||h.description==="Piggybank Contribution"));f?r.budgetedAmount>0&&!c?.piggybankConfig?.paused?await e().updateTransaction({...f,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||c?.piggybankConfig?.paused)&&await e().deleteTransaction(f.id):r.budgetedAmount>0&&!c?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:o.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!u&&r.budgetedAmount!==void 0){const f=e().transactions.find(h=>h.envelopeId===o.envelopeId&&h.month===i&&(h.description==="Monthly Budget Allocation"||h.description==="Budgeted"));f?r.budgetedAmount>0?await e().updateTransaction({...f,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(f.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:o.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}console.log(" Updated envelope allocation:",n)}catch(i){throw console.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{console.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(o=>o.id===n);if(!i){console.warn("Allocation not found in store, skipping delete");return}const s=(await Pt(()=>Promise.resolve().then(()=>$t),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!s)throw new Error("No authenticated user found");await On.deleteEnvelopeAllocation(s.id,i.envelopeId,r),t(o=>({allocations:{...o.allocations,[r]:o.allocations[r]?.filter(c=>c.id!==n)||[]},isLoading:!1})),console.log(" Deleted envelope allocation:",n)}catch(r){throw console.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((c,u)=>c+u.budgetedAmount,0);return i.reduce((c,u)=>c+u.amount,0)-a}catch(n){throw console.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),console.log(" Online status updated:",n)}catch(n){console.error(" Failed to update online status:",n)}},handleUserLogout:()=>{console.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],categories:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));p1e({useBudgetStore:sn,useAuthStore:$a,getCurrentUserId:Wx});const g1e=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:sn},Symbol.toStringTag,{value:"Module"}));var Nh=9e15,_u=1e9,vP="0123456789abcdef",Z1="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",J1="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",yP={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Nh,maxE:Nh,crypto:!1},UW,cl,ct=!0,W_="[DecimalError] ",du=W_+"Invalid argument: ",$W=W_+"Precision limit exceeded",qW=W_+"crypto unavailable",GW="[object Decimal]",di=Math.floor,yr=Math.pow,m1e=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,v1e=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,y1e=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,HW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,As=1e7,it=7,b1e=9007199254740991,x1e=Z1.length-1,bP=J1.length-1,Ce={toStringTag:GW};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Qe(t)};Ce.ceil=function(){return Qe(new this.constructor(this),this.e+1,2)};Ce.clampedTo=Ce.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(du+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};Ce.comparedTo=Ce.cmp=function(t){var e,n,r,i,a=this,s=a.d,o=(t=new a.constructor(t)).d,c=a.s,u=t.s;if(!s||!o)return!c||!u?NaN:c!==u?c:s===o?0:!s^c<0?1:-1;if(!s[0]||!o[0])return s[0]?c:o[0]?-u:0;if(c!==u)return c;if(a.e!==t.e)return a.e>t.e^c<0?1:-1;for(r=s.length,i=o.length,e=0,n=r<i?r:i;e<n;++e)if(s[e]!==o[e])return s[e]>o[e]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1};Ce.cosine=Ce.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+it,r.rounding=1,n=w1e(r,QW(r,n)),r.precision=t,r.rounding=e,Qe(cl==2||cl==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};Ce.cubeRoot=Ce.cbrt=function(){var t,e,n,r,i,a,s,o,c,u,f=this,h=f.constructor;if(!f.isFinite()||f.isZero())return new h(f);for(ct=!1,a=f.s*yr(f.s*f,1/3),!a||Math.abs(a)==1/0?(n=Zr(f.d),t=f.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=yr(n,1/3),t=di((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new h(n),r.s=f.s):r=new h(a.toString()),s=(t=h.precision)+3;;)if(o=r,c=o.times(o).times(o),u=c.plus(f),r=cn(u.plus(f).times(o),u.plus(c),s+2,1),Zr(o.d).slice(0,s)===(n=Zr(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!i&&n=="4999"){if(!i&&(Qe(o,t+1,0),o.times(o).times(o).eq(f))){r=o;break}s+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Qe(r,t+1,1),e=!r.times(r).times(r).eq(f));break}return ct=!0,Qe(r,t,h.rounding,e)};Ce.decimalPlaces=Ce.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-di(this.e/it))*it,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Ce.dividedBy=Ce.div=function(t){return cn(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.divToInt=function(t){var e=this,n=e.constructor;return Qe(cn(e,new n(t),0,1,1),n.precision,n.rounding)};Ce.equals=Ce.eq=function(t){return this.cmp(t)===0};Ce.floor=function(){return Qe(new this.constructor(this),this.e+1,3)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ce.hyperbolicCosine=Ce.cosh=function(){var t,e,n,r,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;n=s.precision,r=s.rounding,s.precision=n+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/X_(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=vp(s,1,a.times(e),new s(1),!0);for(var c,u=t,f=new s(8);u--;)c=a.times(a),a=o.minus(c.times(f.minus(c.times(f))));return Qe(a,s.precision=n,s.rounding=r,!0)};Ce.hyperbolicSine=Ce.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=vp(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/X_(5,t)),i=vp(a,2,i,i,!0);for(var s,o=new a(5),c=new a(16),u=new a(20);t--;)s=i.times(i),i=i.times(o.plus(s.times(c.times(s).plus(u))))}return a.precision=e,a.rounding=n,Qe(i,e,n,!0)};Ce.hyperbolicTangent=Ce.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,cn(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};Ce.inverseCosine=Ce.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?fo(e,r,i):new e(0):new e(NaN):t.isZero()?fo(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};Ce.inverseHyperbolicCosine=Ce.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,ct=!1,n=n.times(n).minus(1).sqrt().plus(n),ct=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};Ce.inverseHyperbolicSine=Ce.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,ct=!1,n=n.times(n).plus(1).sqrt().plus(n),ct=!0,r.precision=t,r.rounding=e,n.ln())};Ce.inverseHyperbolicTangent=Ce.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Qe(new a(i),t,e,!0):(a.precision=n=r-i.e,i=cn(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Ce.inverseSine=Ce.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=fo(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};Ce.inverseTangent=Ce.atan=function(){var t,e,n,r,i,a,s,o,c,u=this,f=u.constructor,h=f.precision,g=f.rounding;if(u.isFinite()){if(u.isZero())return new f(u);if(u.abs().eq(1)&&h+4<=bP)return s=fo(f,h+4,g).times(.25),s.s=u.s,s}else{if(!u.s)return new f(NaN);if(h+4<=bP)return s=fo(f,h+4,g).times(.5),s.s=u.s,s}for(f.precision=o=h+10,f.rounding=1,n=Math.min(28,o/it+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(ct=!1,e=Math.ceil(o/it),r=1,c=u.times(u),s=new f(u),i=u;t!==-1;)if(i=i.times(c),a=s.minus(i.div(r+=2)),i=i.times(c),s=a.plus(i.div(r+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===a.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),ct=!0,Qe(s,f.precision=h,f.rounding=g,!0)};Ce.isFinite=function(){return!!this.d};Ce.isInteger=Ce.isInt=function(){return!!this.d&&di(this.e/it)>this.d.length-2};Ce.isNaN=function(){return!this.s};Ce.isNegative=Ce.isNeg=function(){return this.s<0};Ce.isPositive=Ce.isPos=function(){return this.s>0};Ce.isZero=function(){return!!this.d&&this.d[0]===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,n,r,i,a,s,o,c,u=this,f=u.constructor,h=f.precision,g=f.rounding,m=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new f(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(ct=!1,o=h+m,s=qc(u,o),r=e?ew(f,o+10):qc(t,o),c=cn(s,r,o,1),Mv(c.d,i=h,g))do if(o+=10,s=qc(u,o),r=e?ew(f,o+10):qc(t,o),c=cn(s,r,o,1),!a){+Zr(c.d).slice(i+1,i+15)+1==1e14&&(c=Qe(c,h+1,0));break}while(Mv(c.d,i+=10,g));return ct=!0,Qe(c,h,g)};Ce.minus=Ce.sub=function(t){var e,n,r,i,a,s,o,c,u,f,h,g,m=this,b=m.constructor;if(t=new b(t),!m.d||!t.d)return!m.s||!t.s?t=new b(NaN):m.d?t.s=-t.s:t=new b(t.d||m.s!==t.s?m:NaN),t;if(m.s!=t.s)return t.s=-t.s,m.plus(t);if(u=m.d,g=t.d,o=b.precision,c=b.rounding,!u[0]||!g[0]){if(g[0])t.s=-t.s;else if(u[0])t=new b(m);else return new b(c===3?-0:0);return ct?Qe(t,o,c):t}if(n=di(t.e/it),f=di(m.e/it),u=u.slice(),a=f-n,a){for(h=a<0,h?(e=u,a=-a,s=g.length):(e=g,n=f,s=u.length),r=Math.max(Math.ceil(o/it),s)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=u.length,s=g.length,h=r<s,h&&(s=r),r=0;r<s;r++)if(u[r]!=g[r]){h=u[r]<g[r];break}a=0}for(h&&(e=u,u=g,g=e,t.s=-t.s),s=u.length,r=g.length-s;r>0;--r)u[s++]=0;for(r=g.length;r>a;){if(u[--r]<g[r]){for(i=r;i&&u[--i]===0;)u[i]=As-1;--u[i],u[r]+=As}u[r]-=g[r]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=Y_(u,n),ct?Qe(t,o,c):t):new b(c===3?-0:0)};Ce.modulo=Ce.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Qe(new r(n),r.precision,r.rounding):(ct=!1,r.modulo==9?(e=cn(n,t.abs(),0,3,1),e.s*=t.s):e=cn(n,t,0,r.modulo,1),e=e.times(t),ct=!0,n.minus(e))};Ce.naturalExponential=Ce.exp=function(){return xP(this)};Ce.naturalLogarithm=Ce.ln=function(){return qc(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Qe(t)};Ce.plus=Ce.add=function(t){var e,n,r,i,a,s,o,c,u,f,h=this,g=h.constructor;if(t=new g(t),!h.d||!t.d)return!h.s||!t.s?t=new g(NaN):h.d||(t=new g(t.d||h.s===t.s?h:NaN)),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(u=h.d,f=t.d,o=g.precision,c=g.rounding,!u[0]||!f[0])return f[0]||(t=new g(h)),ct?Qe(t,o,c):t;if(a=di(h.e/it),r=di(t.e/it),u=u.slice(),i=a-r,i){for(i<0?(n=u,i=-i,s=f.length):(n=f,r=a,s=u.length),a=Math.ceil(o/it),s=a>s?a+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=u.length,i=f.length,s-i<0&&(i=s,n=f,f=u,u=n),e=0;i;)e=(u[--i]=u[i]+f[i]+e)/As|0,u[i]%=As;for(e&&(u.unshift(e),++r),s=u.length;u[--s]==0;)u.pop();return t.d=u,t.e=Y_(u,r),ct?Qe(t,o,c):t};Ce.precision=Ce.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(du+t);return n.d?(e=KW(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Ce.round=function(){var t=this,e=t.constructor;return Qe(new e(t),t.e+1,e.rounding)};Ce.sine=Ce.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+it,r.rounding=1,n=S1e(r,QW(r,n)),r.precision=t,r.rounding=e,Qe(cl>2?n.neg():n,t,e,!0)):new r(NaN)};Ce.squareRoot=Ce.sqrt=function(){var t,e,n,r,i,a,s=this,o=s.d,c=s.e,u=s.s,f=s.constructor;if(u!==1||!o||!o[0])return new f(!u||u<0&&(!o||o[0])?NaN:o?s:1/0);for(ct=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=Zr(o),(e.length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=di((c+1)/2)-(c<0||c%2),u==1/0?e="5e"+c:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),r=new f(e)):r=new f(u.toString()),n=(c=f.precision)+3;;)if(a=r,r=a.plus(cn(s,a,n+2,1)).times(.5),Zr(a.d).slice(0,n)===(e=Zr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Qe(a,c+1,0),a.times(a).eq(s))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Qe(r,c+1,1),t=!r.times(r).eq(s));break}return ct=!0,Qe(r,c,f.rounding,t)};Ce.tangent=Ce.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=cn(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Qe(cl==2||cl==4?n.neg():n,t,e,!0)):new r(NaN)};Ce.times=Ce.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,m=(t=new h(t)).d;if(t.s*=f.s,!g||!g[0]||!m||!m[0])return new h(!t.s||g&&!g[0]&&!m||m&&!m[0]&&!g?NaN:!g||!m?t.s/0:t.s*0);for(n=di(f.e/it)+di(t.e/it),c=g.length,u=m.length,c<u&&(a=g,g=m,m=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+m[r]*g[i-r-1]+e,a[i--]=o%As|0,e=o/As|0;a[i]=(a[i]+e)%As|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=Y_(a,n),ct?Qe(t,h.precision,h.rounding):t};Ce.toBinary=function(t,e){return oN(this,2,t,e)};Ce.toDecimalPlaces=Ce.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Gi(t,0,_u),e===void 0?e=r.rounding:Gi(e,0,8),Qe(n,t+n.e+1,e))};Ce.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Co(r,!0):(Gi(t,0,_u),e===void 0?e=i.rounding:Gi(e,0,8),r=Qe(new i(r),t+1,e),n=Co(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ce.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=Co(i):(Gi(t,0,_u),e===void 0?e=a.rounding:Gi(e,0,8),r=Qe(new a(i),t+i.e+1,e),n=Co(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ce.toFraction=function(t){var e,n,r,i,a,s,o,c,u,f,h,g,m=this,b=m.d,x=m.constructor;if(!b)return new x(m);if(u=n=new x(1),r=c=new x(0),e=new x(r),a=e.e=KW(b)-m.e-1,s=a%it,e.d[0]=yr(10,s<0?it+s:s),t==null)t=a>0?e:u;else{if(o=new x(t),!o.isInt()||o.lt(u))throw Error(du+o);t=o.gt(e)?a>0?e:u:o}for(ct=!1,o=new x(Zr(b)),f=x.precision,x.precision=a=b.length*it*2;h=cn(o,e,0,1,1),i=n.plus(h.times(r)),i.cmp(t)!=1;)n=r,r=i,i=u,u=c.plus(h.times(i)),c=i,i=e,e=o.minus(h.times(i)),o=i;return i=cn(t.minus(n),r,0,1,1),c=c.plus(i.times(u)),n=n.plus(i.times(r)),c.s=u.s=m.s,g=cn(u,r,a,1).minus(m).abs().cmp(cn(c,n,a,1).minus(m).abs())<1?[u,r]:[c,n],x.precision=f,ct=!0,g};Ce.toHexadecimal=Ce.toHex=function(t,e){return oN(this,16,t,e)};Ce.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Gi(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(ct=!1,n=cn(n,t,0,e,1).times(t),ct=!0,Qe(n)):(t.s=n.s,n=t),n};Ce.toNumber=function(){return+this};Ce.toOctal=function(t,e){return oN(this,8,t,e)};Ce.toPower=Ce.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=+(t=new c(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new c(yr(+o,u));if(o=new c(o),o.eq(1))return o;if(r=c.precision,a=c.rounding,t.eq(1))return Qe(o,r,a);if(e=di(t.e/it),e>=t.d.length-1&&(n=u<0?-u:u)<=b1e)return i=WW(c,o,n,r),t.s<0?new c(1).div(i):Qe(i,r,a);if(s=o.s,s<0){if(e<t.d.length-1)return new c(NaN);if((t.d[e]&1)==0&&(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return n=yr(+o,u),e=n==0||!isFinite(n)?di(u*(Math.log("0."+Zr(o.d))/Math.LN10+o.e+1)):new c(n+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?s/0:0):(ct=!1,c.rounding=o.s=1,n=Math.min(12,(e+"").length),i=xP(t.times(qc(o,r+n)),r),i.d&&(i=Qe(i,r+5,1),Mv(i.d,r,a)&&(e=r+10,i=Qe(xP(t.times(qc(o,e+n)),e),e+5,1),+Zr(i.d).slice(r+1,r+15)+1==1e14&&(i=Qe(i,r+1,0)))),i.s=s,ct=!0,c.rounding=a,Qe(i,r,a))};Ce.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Co(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Gi(t,1,_u),e===void 0?e=i.rounding:Gi(e,0,8),r=Qe(new i(r),t,e),n=Co(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};Ce.toSignificantDigits=Ce.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Gi(t,1,_u),e===void 0?e=r.rounding:Gi(e,0,8)),Qe(new r(n),t,e)};Ce.toString=function(){var t=this,e=t.constructor,n=Co(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Ce.truncated=Ce.trunc=function(){return Qe(new this.constructor(this),this.e+1,1)};Ce.valueOf=Ce.toJSON=function(){var t=this,e=t.constructor,n=Co(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function Zr(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=it-r.length,n&&(a+=Pc(n)),a+=r;s=t[e],r=s+"",n=it-r.length,n&&(a+=Pc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function Gi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(du+t)}function Mv(t,e,n,r){var i,a,s,o;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=it,i=0):(i=Math.ceil((e+1)/it),e%=it),a=yr(10,it-e),o=t[i]%a|0,r==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=n<4&&o==99999||n>3&&o==49999||o==5e4||o==0):s=(n<4&&o+1==a||n>3&&o+1==a/2)&&(t[i+1]/a/100|0)==yr(10,e-2)-1||(o==a/2||o==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(r||n<4)&&o==9999||!r&&n>3&&o==4999):s=((r||n<4)&&o+1==a||!r&&n>3&&o+1==a/2)&&(t[i+1]/a/1e3|0)==yr(10,e-3)-1,s}function Yx(t,e,n){for(var r,i=[0],a,s=0,o=t.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=vP.indexOf(t.charAt(s++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function w1e(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/X_(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=vp(t,1,e.times(i),new t(1));for(var a=n;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}var cn=(function(){function t(r,i,a){var s,o=0,c=r.length;for(r=r.slice();c--;)s=r[c]*i+o,r[c]=s%a|0,o=s/a|0;return o&&r.unshift(o),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a,s){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*s+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s,o,c){var u,f,h,g,m,b,x,w,S,T,I,N,O,D,k,P,R,j,z,B,L=r.constructor,K=r.s==i.s?1:-1,Q=r.d,q=i.d;if(!Q||!Q[0]||!q||!q[0])return new L(!r.s||!i.s||(Q?q&&Q[0]==q[0]:!q)?NaN:Q&&Q[0]==0||!q?K*0:K/0);for(c?(m=1,f=r.e-i.e):(c=As,m=it,f=di(r.e/m)-di(i.e/m)),z=q.length,R=Q.length,S=new L(K),T=S.d=[],h=0;q[h]==(Q[h]||0);h++);if(q[h]>(Q[h]||0)&&f--,a==null?(D=a=L.precision,s=L.rounding):o?D=a+(r.e-i.e)+1:D=a,D<0)T.push(1),b=!0;else{if(D=D/m+2|0,h=0,z==1){for(g=0,q=q[0],D++;(h<R||g)&&D--;h++)k=g*c+(Q[h]||0),T[h]=k/q|0,g=k%q|0;b=g||h<R}else{for(g=c/(q[0]+1)|0,g>1&&(q=t(q,g,c),Q=t(Q,g,c),z=q.length,R=Q.length),P=z,I=Q.slice(0,z),N=I.length;N<z;)I[N++]=0;B=q.slice(),B.unshift(0),j=q[0],q[1]>=c/2&&++j;do g=0,u=e(q,I,z,N),u<0?(O=I[0],z!=N&&(O=O*c+(I[1]||0)),g=O/j|0,g>1?(g>=c&&(g=c-1),x=t(q,g,c),w=x.length,N=I.length,u=e(x,I,w,N),u==1&&(g--,n(x,z<w?B:q,w,c))):(g==0&&(u=g=1),x=q.slice()),w=x.length,w<N&&x.unshift(0),n(I,x,N,c),u==-1&&(N=I.length,u=e(q,I,z,N),u<1&&(g++,n(I,z<N?B:q,N,c))),N=I.length):u===0&&(g++,I=[0]),T[h++]=g,u&&I[0]?I[N++]=Q[P]||0:(I=[Q[P]],N=1);while((P++<R||I[0]!==void 0)&&D--);b=I[0]!==void 0}T[0]||T.shift()}if(m==1)S.e=f,UW=b;else{for(h=1,g=T[0];g>=10;g/=10)h++;S.e=h+f*m-1,Qe(S,o?a+S.e+1:a,s,b)}return S}})();function Qe(t,e,n,r){var i,a,s,o,c,u,f,h,g,m=t.constructor;e:if(e!=null){if(h=t.d,!h)return t;for(i=1,o=h[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=it,s=e,f=h[g=0],c=f/yr(10,i-s-1)%10|0;else if(g=Math.ceil((a+1)/it),o=h.length,g>=o)if(r){for(;o++<=g;)h.push(0);f=c=0,i=1,a%=it,s=a-it+1}else break e;else{for(f=o=h[g],i=1;o>=10;o/=10)i++;a%=it,s=a-it+i,c=s<0?0:f/yr(10,i-s-1)%10|0}if(r=r||e<0||h[g+1]!==void 0||(s<0?f:f%yr(10,i-s-1)),u=n<4?(c||r)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||r||n==6&&(a>0?s>0?f/yr(10,i-s):0:h[g-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=t.e+1,h[0]=yr(10,(it-e%it)%it),t.e=-e||0):h[0]=t.e=0,t;if(a==0?(h.length=g,o=1,g--):(h.length=g+1,o=yr(10,it-a),h[g]=s>0?(f/yr(10,i-s)%yr(10,s)|0)*o:0),u)for(;;)if(g==0){for(a=1,s=h[0];s>=10;s/=10)a++;for(s=h[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(t.e++,h[0]==As&&(h[0]=1));break}else{if(h[g]+=o,h[g]!=As)break;h[g--]=0,o=1}for(a=h.length;h[--a]===0;)h.pop()}return ct&&(t.e>m.maxE?(t.d=null,t.e=NaN):t.e<m.minE&&(t.e=0,t.d=[0])),t}function Co(t,e,n){if(!t.isFinite())return XW(t);var r,i=t.e,a=Zr(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Pc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Pc(-i-1)+a,n&&(r=n-s)>0&&(a+=Pc(r))):i>=s?(a+=Pc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Pc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Pc(r))),a}function Y_(t,e){var n=t[0];for(e*=it;n>=10;n/=10)e++;return e}function ew(t,e,n){if(e>x1e)throw ct=!0,n&&(t.precision=n),Error($W);return Qe(new t(Z1),e,1,!0)}function fo(t,e,n){if(e>bP)throw Error($W);return Qe(new t(J1),e,n,!0)}function KW(t){var e=t.length-1,n=e*it+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Pc(t){for(var e="";t--;)e+="0";return e}function WW(t,e,n,r){var i,a=new t(1),s=Math.ceil(r/it+4);for(ct=!1;;){if(n%2&&(a=a.times(e),l6(a.d,s)&&(i=!0)),n=di(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),l6(e.d,s)}return ct=!0,a}function o6(t){return t.d[t.d.length-1]&1}function YW(t,e,n){for(var r,i,a=new t(e[0]),s=0;++s<e.length;){if(i=new t(e[s]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function xP(t,e){var n,r,i,a,s,o,c,u=0,f=0,h=0,g=t.constructor,m=g.rounding,b=g.precision;if(!t.d||!t.d[0]||t.e>17)return new g(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(ct=!1,c=b):c=e,o=new g(.03125);t.e>-2;)t=t.times(o),h+=5;for(r=Math.log(yr(2,h))/Math.LN10*2+5|0,c+=r,n=a=s=new g(1),g.precision=c;;){if(a=Qe(a.times(t),c,1),n=n.times(++f),o=s.plus(cn(a,n,c,1)),Zr(o.d).slice(0,c)===Zr(s.d).slice(0,c)){for(i=h;i--;)s=Qe(s.times(s),c,1);if(e==null)if(u<3&&Mv(s.d,c-r,m,u))g.precision=c+=10,n=a=o=new g(1),f=0,u++;else return Qe(s,g.precision=b,m,ct=!0);else return g.precision=b,s}s=o}}function qc(t,e){var n,r,i,a,s,o,c,u,f,h,g,m=1,b=10,x=t,w=x.d,S=x.constructor,T=S.rounding,I=S.precision;if(x.s<0||!w||!w[0]||!x.e&&w[0]==1&&w.length==1)return new S(w&&!w[0]?-1/0:x.s!=1?NaN:w?0:x);if(e==null?(ct=!1,f=I):f=e,S.precision=f+=b,n=Zr(w),r=n.charAt(0),Math.abs(a=x.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(t),n=Zr(x.d),r=n.charAt(0),m++;a=x.e,r>1?(x=new S("0."+n),a++):x=new S(r+"."+n.slice(1))}else return u=ew(S,f+2,I).times(a+""),x=qc(new S(r+"."+n.slice(1)),f-b).plus(u),S.precision=I,e==null?Qe(x,I,T,ct=!0):x;for(h=x,c=s=x=cn(x.minus(1),x.plus(1),f,1),g=Qe(x.times(x),f,1),i=3;;){if(s=Qe(s.times(g),f,1),u=c.plus(cn(s,new S(i),f,1)),Zr(u.d).slice(0,f)===Zr(c.d).slice(0,f))if(c=c.times(2),a!==0&&(c=c.plus(ew(S,f+2,I).times(a+""))),c=cn(c,new S(m),f,1),e==null)if(Mv(c.d,f-b,T,o))S.precision=f+=b,u=s=x=cn(h.minus(1),h.plus(1),f,1),g=Qe(x.times(x),f,1),i=o=1;else return Qe(c,S.precision=I,T,ct=!0);else return S.precision=I,c;c=u,i+=2}}function XW(t){return String(t.s*t.s/0)}function Xx(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%it,n<0&&(r+=it),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=it;r<i;)t.d.push(+e.slice(r,r+=it));e=e.slice(r),r=it-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),ct&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function _1e(t,e){var n,r,i,a,s,o,c,u,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),HW.test(e))return Xx(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(v1e.test(e))n=16,e=e.toLowerCase();else if(m1e.test(e))n=2;else if(y1e.test(e))n=8;else throw Error(du+e);for(a=e.search(/p/i),a>0?(c=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,r=t.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=WW(r,new r(n),a,a*2)),u=Yx(e,n,As),f=u.length-1,a=f;u[a]===0;--a)u.pop();return a<0?new r(t.s*0):(t.e=Y_(u,f),t.d=u,ct=!1,s&&(t=cn(t,i,o*4)),c&&(t=t.times(Math.abs(c)<54?yr(2,c):yp.pow(2,c))),ct=!0,t)}function S1e(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:vp(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/X_(5,n)),e=vp(t,2,e,e);for(var i,a=new t(5),s=new t(16),o=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function vp(t,e,n,r,i){var a,s,o,c,u=t.precision,f=Math.ceil(u/it);for(ct=!1,c=n.times(n),o=new t(r);;){if(s=cn(o.times(c),new t(e++*e++),u,1),o=i?r.plus(s):r.minus(s),r=cn(s.times(c),new t(e++*e++),u,1),s=o.plus(r),s.d[f]!==void 0){for(a=f;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=r,r=s,s=a}return ct=!0,s.d.length=f+1,s}function X_(t,e){for(var n=t;--e;)n*=t;return n}function QW(t,e){var n,r=e.s<0,i=fo(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return cl=r?4:1,e;if(n=e.divToInt(i),n.isZero())cl=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return cl=o6(n)?r?2:3:r?4:1,e;cl=o6(n)?r?1:4:r?3:2}return e.minus(i).abs()}function oN(t,e,n,r){var i,a,s,o,c,u,f,h,g,m=t.constructor,b=n!==void 0;if(b?(Gi(n,1,_u),r===void 0?r=m.rounding:Gi(r,0,8)):(n=m.precision,r=m.rounding),!t.isFinite())f=XW(t);else{for(f=Co(t),s=f.indexOf("."),b?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,s>=0&&(f=f.replace(".",""),g=new m(1),g.e=f.length-s,g.d=Yx(Co(g),10,i),g.e=g.d.length),h=Yx(f,10,i),a=c=h.length;h[--c]==0;)h.pop();if(!h[0])f=b?"0p+0":"0";else{if(s<0?a--:(t=new m(t),t.d=h,t.e=a,t=cn(t,g,n,r,0,i),h=t.d,a=t.e,u=UW),s=h[n],o=i/2,u=u||h[n+1]!==void 0,u=r<4?(s!==void 0||u)&&(r===0||r===(t.s<0?3:2)):s>o||s===o&&(r===4||u||r===6&&h[n-1]&1||r===(t.s<0?8:7)),h.length=n,u)for(;++h[--n]>i-1;)h[n]=0,n||(++a,h.unshift(1));for(c=h.length;!h[c-1];--c);for(s=0,f="";s<c;s++)f+=vP.charAt(h[s]);if(b){if(c>1)if(e==16||e==8){for(s=e==16?4:3,--c;c%s;c++)f+="0";for(h=Yx(f,i,e),c=h.length;!h[c-1];--c);for(s=1,f="1.";s<c;s++)f+=vP.charAt(h[s])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>c)for(a-=c;a--;)f+="0";else a<c&&(f=f.slice(0,a)+"."+f.slice(a))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}function l6(t,e){if(t.length>e)return t.length=e,!0}function E1e(t){return new this(t).abs()}function T1e(t){return new this(t).acos()}function A1e(t){return new this(t).acosh()}function C1e(t,e){return new this(t).plus(e)}function I1e(t){return new this(t).asin()}function k1e(t){return new this(t).asinh()}function P1e(t){return new this(t).atan()}function D1e(t){return new this(t).atanh()}function O1e(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=fo(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?fo(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=fo(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(cn(t,e,a,1)),e=fo(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(cn(t,e,a,1)),n}function N1e(t){return new this(t).cbrt()}function R1e(t){return Qe(t=new this(t),t.e+1,2)}function M1e(t,e,n){return new this(t).clamp(e,n)}function j1e(t){if(!t||typeof t!="object")throw Error(W_+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,_u,"rounding",0,8,"toExpNeg",-Nh,0,"toExpPos",0,Nh,"maxE",0,Nh,"minE",-Nh,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=yP[n]),(r=t[n])!==void 0)if(di(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(du+n+": "+r);if(n="crypto",i&&(this[n]=yP[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(qW);else this[n]=!1;else throw Error(du+n+": "+r);return this}function z1e(t){return new this(t).cos()}function L1e(t){return new this(t).cosh()}function ZW(t){var e,n,r;function i(a){var s,o,c,u=this;if(!(u instanceof i))return new i(a);if(u.constructor=i,c6(a)){u.s=a.s,ct?!a.d||a.e>i.maxE?(u.e=NaN,u.d=null):a.e<i.minE?(u.e=0,u.d=[0]):(u.e=a.e,u.d=a.d.slice()):(u.e=a.e,u.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){u.s=1/a<0?-1:1,u.e=0,u.d=[0];return}if(a<0?(a=-a,u.s=-1):u.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;ct?s>i.maxE?(u.e=NaN,u.d=null):s<i.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[a]):(u.e=s,u.d=[a]);return}if(a*0!==0){a||(u.s=NaN),u.e=NaN,u.d=null;return}return Xx(u,a.toString())}if(c==="string")return(o=a.charCodeAt(0))===45?(a=a.slice(1),u.s=-1):(o===43&&(a=a.slice(1)),u.s=1),HW.test(a)?Xx(u,a):_1e(u,a);if(c==="bigint")return a<0?(a=-a,u.s=-1):u.s=1,Xx(u,a.toString());throw Error(du+a)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=j1e,i.clone=ZW,i.isDecimal=c6,i.abs=E1e,i.acos=T1e,i.acosh=A1e,i.add=C1e,i.asin=I1e,i.asinh=k1e,i.atan=P1e,i.atanh=D1e,i.atan2=O1e,i.cbrt=N1e,i.ceil=R1e,i.clamp=M1e,i.cos=z1e,i.cosh=L1e,i.div=V1e,i.exp=B1e,i.floor=F1e,i.hypot=U1e,i.ln=$1e,i.log=q1e,i.log10=H1e,i.log2=G1e,i.max=K1e,i.min=W1e,i.mod=Y1e,i.mul=X1e,i.pow=Q1e,i.random=Z1e,i.round=J1e,i.sign=ewe,i.sin=twe,i.sinh=nwe,i.sqrt=rwe,i.sub=iwe,i.sum=awe,i.tan=swe,i.tanh=owe,i.trunc=lwe,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function V1e(t,e){return new this(t).div(e)}function B1e(t){return new this(t).exp()}function F1e(t){return Qe(t=new this(t),t.e+1,3)}function U1e(){var t,e,n=new this(0);for(ct=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return ct=!0,new this(1/0);n=e}return ct=!0,n.sqrt()}function c6(t){return t instanceof yp||t&&t.toStringTag===GW||!1}function $1e(t){return new this(t).ln()}function q1e(t,e){return new this(t).log(e)}function G1e(t){return new this(t).log(2)}function H1e(t){return new this(t).log(10)}function K1e(){return YW(this,arguments,-1)}function W1e(){return YW(this,arguments,1)}function Y1e(t,e){return new this(t).mod(e)}function X1e(t,e){return new this(t).mul(e)}function Q1e(t,e){return new this(t).pow(e)}function Z1e(t){var e,n,r,i,a=0,s=new this(1),o=[];if(t===void 0?t=this.precision:Gi(t,1,_u),r=Math.ceil(t/it),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=r/4}else throw Error(qW);else for(;a<r;)o[a++]=Math.random()*1e7|0;for(r=o[--a],t%=it,r&&t&&(i=yr(10,it-t),o[a]=(r/i|0)*i);o[a]===0;a--)o.pop();if(a<0)n=0,o=[0];else{for(n=-1;o[0]===0;n-=it)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<it&&(n-=it-r)}return s.e=n,s.d=o,s}function J1e(t){return Qe(t=new this(t),t.e+1,this.rounding)}function ewe(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function twe(t){return new this(t).sin()}function nwe(t){return new this(t).sinh()}function rwe(t){return new this(t).sqrt()}function iwe(t,e){return new this(t).sub(e)}function awe(){var t=0,e=arguments,n=new this(e[t]);for(ct=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return ct=!0,Qe(n,this.precision,this.rounding)}function swe(t){return new this(t).tan()}function owe(t){return new this(t).tanh()}function lwe(t){return Qe(t=new this(t),t.e+1,1)}Ce[Symbol.for("nodejs.util.inspect.custom")]=Ce.toString;Ce[Symbol.toStringTag]="Decimal";var yp=Ce.constructor=ZW(yP);Z1=new yp(Z1);J1=new yp(J1);const u6=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},cwe=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=sn(),{currentUser:s}=$a(),{currentMonth:o,incomeSources:c,allocations:u,deleteIncomeSource:f,setEnvelopeAllocation:h,copyPreviousMonthAllocations:g,isLoading:m}=sn(),{showToast:b}=df(),[x,w]=A.useState(!1),S=A.useRef(null),[T,I]=A.useState(!1),N=!T||r||m,[O,D]=A.useState([]),k=A.useRef([]),[P,R]=A.useState([]),j=A.useRef([]),z=A.useCallback(H=>{if(t.find(de=>de.id===H)?.isPiggybank){const de=sn.getState().getEnvelopeBalance(H);return new yp(de)}const le=sn.getState().getEnvelopeBalance(H,o);return new yp(le)},[t,o]);A.useEffect(()=>{const H=t.filter(Z=>{if(!Z.isPiggybank||!Z.isActive)return!1;if(Z.createdAt)try{const le=u6(Z.createdAt);if(!le)return console.error(` Invalid creation date for piggybank ${Z.name}:`,Z.createdAt),!1;const de=`${le.getFullYear()}-${String(le.getMonth()+1).padStart(2,"0")}`;return o>=de}catch(le){return console.error(` Error processing piggybank ${Z.name}:`,le,{createdAt:Z.createdAt,typeofCreatedAt:typeof Z.createdAt}),!1}return!0}).sort((Z,le)=>{const de=Z.orderIndex??0,ce=le.orderIndex??0;return de-ce});R(H),j.current=H},[t,o]);const B=P,L=O;A.useEffect(()=>(S.current=setTimeout(()=>{w(!0)},8e3),n(),I(!0),()=>{S.current&&clearTimeout(S.current)}),[]),A.useEffect(()=>{T&&!r&&!m&&(w(!1),S.current&&clearTimeout(S.current))},[T,r,m]),A.useEffect(()=>{const H=t.filter(Z=>{if(Z.isPiggybank||Z.isActive===!1)return!1;const de=(u[o]||[]).some(he=>he.envelopeId===Z.id),ce=e.some(he=>he.envelopeId===Z.id&&(he.month===o||he.date.startsWith(o)));return de||ce}).sort((Z,le)=>{const de=Z.orderIndex??0,ce=le.orderIndex??0;return de-ce});D(H),k.current=H},[t,u,o,e]);const K=(c[o]||[]).reduce((H,Z)=>H+Z.amount,0),Q=(u[o]||[]).filter(H=>L.some(Z=>Z.id===H.envelopeId)||B.some(Z=>Z.id===H.envelopeId)).reduce((H,Z)=>H+Z.budgetedAmount,0),q=K-Q,Y=A.useCallback(async H=>{if(!H.length)return;const Z=H.map(le=>le.id);try{await a(Z)}catch(le){console.error("Failed to persist envelope order:",le),b("Failed to save envelope order","error")}},[a,b]),J=A.useCallback(async H=>{await Y(H)},[Y]),ne=A.useCallback(H=>{f(o,H.id).catch(console.error),b(`Deleted "${H.name}"`,"neutral")},[f,o,b]),W=A.useCallback(async H=>{try{const Z=H||o;console.log(" Copying to month:",Z),await g(Z),b("Previous month budget copied","success")}catch(Z){console.error("Error copying previous month:",Z),b("Failed to copy previous month","error")}},[g,b,o]),U=A.useCallback(async()=>{if(!s||!o){b("Cannot clear data: not logged in or no month selected","error");return}try{await sn.getState().clearMonthData(o),b(`"${o}" budget and transactions cleared successfully`,"success")}catch(H){console.error("Error clearing month data:",H),b("Failed to clear month data","error")}},[s,o,b]),X=A.useCallback(async(H,Z)=>{try{await h(H,Z),setTimeout(()=>{const le=sn.getState(),de=le.currentMonth,ce=le.incomeSources[de]||[],he=le.allocations[de]||[],ee=new Set(le.envelopes.filter(De=>{if(De.isPiggybank){if(!De.isActive)return!1;if(De.createdAt){const Pe=u6(De.createdAt);if(!Pe)return!1;const ze=`${Pe.getFullYear()}-${String(Pe.getMonth()+1).padStart(2,"0")}`;return de>=ze}return!0}return De.isActive!==!1}).map(De=>De.id)),Se=he.filter(De=>ee.has(De.envelopeId)),re=ce.reduce((De,Pe)=>De+Pe.amount,0),oe=Se.reduce((De,Pe)=>De+Pe.budgetedAmount,0);re-oe<-.005?b(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(re-oe)<.005&&re>0&&b("Every dollar has a job ","success")},100)}catch(le){console.error("Failed to set allocation:",le),b("Failed to update budget","error")}},[h,b]);return{visibleEnvelopes:L,piggybanks:B,incomeSources:c,availableToBudget:q,currentMonth:o,allocations:u,transactions:e,isLoading:r,isInitialLoading:N,isOnline:i,showTimeoutMessage:x,getEnvelopeBalance:z,fetchData:n,reorderEnvelopes:J,deleteIncomeSource:ne,clearMonthData:U,copyFromPreviousMonth:W,setEnvelopeAllocation:X,localOrderRef:k,setLocalEnvelopes:D,localPiggybankOrderRef:j,setLocalPiggybanks:R}},uwe=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),s=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],o=()=>{let h=r,g=i-1;g<1&&(h=r-1,g=12);const m=`${h}-${g.toString().padStart(2,"0")}`;e(m)},c=()=>{let h=r,g=i+1;g>12&&(h=r+1,g=1);const m=`${h}-${g.toString().padStart(2,"0")}`;e(m)},u=()=>{const h=new Date,g=`${h.getFullYear()}-${(h.getMonth()+1).toString().padStart(2,"0")}`;e(g)},f=()=>{if(!n)return null;const{amount:h,totalIncome:g,totalAllocated:m}=n,b=typeof h=="number"?h:0,x=typeof g=="number"?g:0,w=typeof m=="number"?m:0,S=Math.abs(b)<.005,T=b<-.005,I=x>0?w/x*100:0;let N="text-gray-900 dark:text-white",O="bg-green-500",D="Left to Budget",k=x>0?Math.min(I,100):0,P=!0;return x===0?(D="Add income to start budgeting",k=0,P=!1,N="text-gray-500 dark:text-zinc-500"):S?(N="text-green-600 dark:text-emerald-400",O="bg-green-500",D="Perfect! Every dollar has a job ",k=100,P=!1):T&&(N="text-red-600 dark:text-red-400",O="bg-red-500",D="You're not in Congress! Try again.",k=100),y.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[y.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[y.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${N}`,children:D}),P&&y.jsxs("span",{className:`text-sm font-bold truncate ${N}`,children:[T?"-":"","$",Math.abs(b).toFixed(2)]})]}),y.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${O}`,style:{width:`${k}%`}})})]})};return y.jsxs("div",{className:"py-2 space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-center gap-4",children:[y.jsx("button",{onClick:o,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:y.jsx(Joe,{size:20})}),y.jsx("div",{className:"text-center",children:y.jsxs("button",{onClick:u,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[s," ",r]})}),y.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:y.jsx(io,{size:20})})]}),n&&y.jsx("div",{className:"px-1",children:f()})]})},Q_=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=jve(),[a,s]=A.useState(!1),o=A.useRef(0),c=()=>{r||(s(!0),o.current=Date.now())},u=async(f,h)=>{if(r)return;const g=h.offset.x,m=h.velocity.x;if(setTimeout(()=>s(!1),100),g<n||g<-50&&m<-500){const b=e();b===!1?i.start({x:0}):b instanceof Promise&&b.then(x=>{x===!1&&i.start({x:0})})}else i.start({x:0})};return y.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[y.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:y.jsx(f1,{className:"text-white w-6 h-6"})}),y.jsx(Gn.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:c,onDragEnd:u,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},dwe=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:s}=sn(),{showToast:o}=df(),[c,u]=A.useState(""),[f,h]=A.useState(""),[g,m]=A.useState(!1);A.useEffect(()=>{if(!t)return;const x=window.setTimeout(()=>{n==="edit"&&r?(u(r.name),h(r.amount.toString())):(u(""),h(""))},0);return()=>window.clearTimeout(x)},[t,n,r]);const b=async x=>{if(x.preventDefault(),!c.trim()||!f||parseFloat(f)<=0){o("Please fill in all required fields with valid values","error");return}m(!0);try{if(n==="add")await i(s,{name:c.trim(),amount:parseFloat(f),month:s,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),o("Income source added successfully","success");else{if(!r){o("Error: No income source to edit","error");return}await a(s,{...r,name:c.trim(),amount:parseFloat(f),updatedAt:new Date().toISOString()}),o(`Updated "${c.trim()}" income source`,"success")}e()}catch(w){console.error("Error saving income source:",w),o("Failed to save income source. Please try again.","error")}finally{m(!1)}};return y.jsx(ba,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),y.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),y.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:f,onChange:x=>{const w=x.target.value.replace(/\D/g,"");if(!w){h("");return}const T=(parseInt(w,10)/100).toFixed(2);h(T)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:g||!c.trim()||!f||parseFloat(f)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},fwe=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=o=>{const[c,u]=o.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=o=>{const[c,u]=o.split("-").map(Number);let f=c,h=u-1;return h<1&&(f=c-1,h=12),r(`${f}-${h.toString().padStart(2,"0")}`)},a=r(t),s=i(t);return y.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),y.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[y.jsx(Hoe,{className:"w-12 h-12 text-blue-500"}),y.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:y.jsx(sv,{size:14})})]})]}),y.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[y.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),y.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",s," to get you started right away."]})]}),y.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:y.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":y.jsx(y.Fragment,{children:y.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},hwe="/personal-budget-pwa/icon-512.png",tC="/personal-budget-pwa/images/budget-balanced.png",d6=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],pwe=({currentMonth:t,onComplete:e})=>{const[n,r]=A.useState(0),[i,a]=A.useState(0),[s,o]=A.useState(2500),[c,u]=A.useState(d6),{addCategory:f}=sn(),h=D=>{u(k=>k.includes(D)?k.filter(P=>P!==D):[...k,D])},g=async()=>{for(let D=0;D<c.length;D++)await f({name:c[D],orderIndex:D,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()};A.useEffect(()=>{if(console.log("Animation effect triggered:",{currentStep:n,animationKey:i}),n===5){console.log("Starting animation from $2500 to $0"),o(2500);const D=2e3,k=20,P=D/k,R=2500/k;let j=0;const z=setInterval(()=>{j++;const B=Math.max(0,2500-R*j);console.log("Phase 1 - Animation step:",j,"New amount:",B),o(B),j>=k&&(clearInterval(z),console.log("Phase 1 completed - Perfect budget reached"),setTimeout(()=>{console.log("Starting Phase 2 - Over budget demonstration");let L=0;const K=10,Q=200,q=500/K,Y=setInterval(()=>{L++;const J=-(q*L);console.log("Phase 2 - Over budget step:",L,"Over budget amount:",J),o(J),L>=K&&(clearInterval(Y),console.log("Animation completed - Over budget scenario demonstrated"))},Q)},1e3))},P);return()=>{console.log("Cleaning up animation timers"),clearInterval(z)}}},[i,n]);const b=(D=>{const[k,P]=D.split("-");return new Date(parseInt(k),parseInt(P)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),x=[{icon:sv,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${b}`,content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",y.jsx("strong",{children:"zero-based budgeting"})," method."]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:y.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:" This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:Hle,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),y.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:d6.map(D=>y.jsxs("button",{onClick:()=>h(D),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${c.includes(D)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[y.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${c.includes(D)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:c.includes(D)&&y.jsx(nl,{size:12,className:"text-white"})}),D]},D))}),c.length===0&&y.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:yz,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"First, you'll add your income sources for the month. This could be:"}),y.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(nl,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(nl,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(nl,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),y.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[y.jsx("strong",{children:'Look for the "Income Sources" section'})," at the top of your budget and tap the ",y.jsx(c0,{className:"w-4 h-4 inline"})," button to add income."]})})]}),color:"green"},{icon:i_,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),y.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(nl,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Groceries"})," (Food)"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(nl,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(nl,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),y.jsxs("span",{children:[y.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),y.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[y.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:iv,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",y.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),y.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[y.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[y.jsx(iv,{className:"w-4 h-4"}),"Drag to Reorder"]}),y.jsx("p",{className:"text-sm text-indigo-800 dark:text-indigo-300 mb-3",children:"Both categories and envelopes can be reordered the same way:"}),y.jsxs("div",{className:"space-y-2 mb-3",children:[y.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[y.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),y.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[y.jsx("strong",{children:"PC:"})," Click and hold on the ",y.jsx("strong",{children:""})," dots, then drag"]})]}),y.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-3 mb-3 border border-indigo-300 dark:border-indigo-700",children:[y.jsxs("div",{className:"flex items-center gap-2 text-xs mb-2",children:[y.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Food"}),y.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"Category"})]})]}),y.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[y.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Groceries"}),y.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"$450 / $500"})]})]}),y.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-2 italic",children:" Click and hold these dots to drag"})]}),y.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400",children:[y.jsx("li",{children:" Reorder categories: Settings  Manage Categories"}),y.jsx("li",{children:" Reorder envelopes: On the main budget screen"}),y.jsx("li",{children:" Organize by priority, frequency, or preference"})]})]}),y.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",y.jsx("strong",{children:"Pro tip:"})," Try organizing your budget like this: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:h1,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[y.jsx("button",{onClick:()=>a(D=>D+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:y.jsx(Vle,{className:"w-4 h-4"})}),y.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),y.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",y.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[y.jsx("span",{children:"Left to Budget"}),y.jsxs("span",{className:`font-bold ${s<0?"text-red-600 dark:text-red-400":""}`,children:["$",s.toFixed(2)]})]}),y.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:y.jsx(Gn.div,{className:`h-full rounded-full ${s<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:s<0?"100%":`${(2500-s)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),y.jsxs(Gn.div,{className:`text-xs font-medium text-center mt-1 ${s===0?"text-green-600 dark:text-emerald-400":s<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[s===0&&"Perfect! Every dollar has a job ",s<0&&"You're not in Congress! Try again.",s>0&&"Keep allocating until you reach $0"]})]},i)]}),y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:[y.jsx("strong",{children:"To allocate money:"})," Tap the budget amount on any envelope and enter how much you want to assign to it."]}),y.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",y.jsx("strong",{children:"Pro tip:"})," Start with your essential expenses (rent, utilities, groceries) first, then allocate what's left to other categories."]})})]}),color:"blue"},{icon:l0,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",y.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(Wle,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(yz,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set an automatic monthly amount to save"})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(h1,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]}),y.jsx("div",{className:"bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl p-4",children:y.jsxs("p",{className:"text-sm text-pink-900 dark:text-pink-200",children:[y.jsx("strong",{children:"Find Piggybanks"})," at the bottom of your budget. They're optional but powerful for reaching your goals!"]})})]}),color:"pink"},{icon:tC,title:"You're Ready to Budget!",description:"Start taking control of your money",content:y.jsxs("div",{className:"space-y-4 text-left",children:[y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"1"})}),y.jsx("span",{children:"Choose your categories"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"2"})}),y.jsx("span",{children:"Add your income sources"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"3"})}),y.jsx("span",{children:"Create envelopes in categories"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"4"})}),y.jsx("span",{children:"Organize your budget order"})]}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:y.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"5"})}),y.jsx("span",{children:"Allocate until Left to Budget = $0"})]})]}),y.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-6",children:y.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:' Click "Start Budgeting" below to create your first budget!'})})]}),color:"green",useCustomIcon:!0}],w=x[n],S=w.useCustomIcon?tC:w.icon,T=n===x.length-1,I=n===0,O={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}}[w.color];return y.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:y.jsx("div",{className:"w-full max-w-2xl",children:y.jsx(ba,{mode:"wait",children:y.jsxs(Gn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 pb-2",children:y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:w.title}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:w.description})]}),y.jsx("div",{className:"flex flex-col items-center mx-4",children:n===0?y.jsx("img",{src:hwe,alt:"Dollars At Work",className:`w-20 h-20 ${O.text}`}):w.useCustomIcon?y.jsx("img",{src:tC,alt:"Budget Balanced",className:`w-32 h-32 ${O.text}`}):y.jsx("div",{className:`${O.bg} p-3 rounded-xl`,children:y.jsx(S,{className:`w-8 h-8 ${O.text}`})})}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-zinc-400 whitespace-nowrap",children:["Step ",n+1," of ",x.length]})]})}),y.jsx("div",{className:"px-6 pb-6 pt-2",children:w.content}),y.jsx("div",{className:"px-6 pb-4 flex justify-center gap-2",children:x.map((D,k)=>y.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${k===n?`w-8 ${O.button}`:k<n?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},k))}),y.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!I&&y.jsxs("button",{onClick:()=>r(D=>D-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[y.jsx(_l,{className:"w-5 h-5"}),"Back"]}),y.jsx("button",{onClick:()=>{if(T)g();else{if(w.title.includes("Choose Categories")&&c.length===0)return;r(D=>D+1)}},disabled:w.title.includes("Choose Categories")&&c.length===0,className:`${I?"flex-1":"flex-[2]"} py-3 px-4 ${O.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:T?y.jsxs(y.Fragment,{children:[y.jsx(sv,{className:"w-5 h-5"}),"Start Budgeting"]}):y.jsxs(y.Fragment,{children:["Next",y.jsx(qoe,{className:"w-5 h-5"})]})})]})]},n)})})})},gwe=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:s,onLongPressTrigger:o})=>{const c=A.useRef(null),[u,f]=A.useState(!1),h=iN(R=>{BW(),o(R,t.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch}),g=t.piggybankConfig?.targetAmount,m=t.piggybankConfig?.monthlyContribution??0,b=t.piggybankConfig?.color||"#3B82F6",x=t.piggybankConfig?.paused||!1,w=typeof e=="number"?e:e.toNumber(),S=(R,j=1)=>{const z=R.replace("#",""),B=parseInt(z,16),L=B>>16&255,K=B>>8&255,Q=B&255;return`rgba(${L}, ${K}, ${Q}, ${j})`},T=`linear-gradient(135deg, ${S(b,.14)} 0%, ${S(b,.05)} 100%)`,I=S(b,.4),N=g&&g>0?Math.min(w/g*100,100):0,O=g&&w>=g;A.useEffect(()=>{a&&a!==t.id&&f(!1)},[a,t.id]),A.useEffect(()=>{a===t.id&&(f(!0),s&&s(t.id))},[a,t.id,s]),A.useEffect(()=>{if(!a&&u){const R=setTimeout(()=>{f(!1)},300);return()=>clearTimeout(R)}},[a,u]);const D=R=>{if(u||i){R.preventDefault(),R.stopPropagation();return}n(t.id)},k=a===t.id,P=y.jsxs("div",{className:"flex items-center gap-3 w-full",children:[y.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:R=>o(R,t.id),children:y.jsx(iv,{size:20})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[y.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${b}20`},children:y.jsx(l0,{size:12,style:{color:b}})}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),y.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[y.jsx(h1,{size:10,style:{color:b}}),y.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",m.toFixed(2),"/mo"]}),x&&y.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[y.jsx(Ole,{size:8})," PAUSED"]})]})]})]}),y.jsxs("div",{className:"text-right flex-shrink-0",children:[y.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",w.toFixed(2)]}),y.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",g?.toFixed(0)||"0"]})]})]}),g&&g>0&&y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:y.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${N}%`,backgroundColor:b}})}),O&&!g&&y.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return y.jsx(Gn.div,{...h(),layout:!k,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:R=>{r&&r(R),c.current=R},onClick:D,style:{background:T,borderColor:I,boxShadow:k?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:k?50:1,scale:k?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:P})},cm=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,s=r&255;return`rgba(${i}, ${a}, ${s}, ${e})`},mwe=12,vwe=(t,e,n)=>Math.min(Math.max(t,e),n),ywe=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:s,isReorderingActive:o,activelyDraggingId:c,onItemDragStart:u,onLongPressTrigger:f})=>{const h=!!t.isPiggybank,g=t.piggybankConfig?.color||"#3B82F6",m=h?`linear-gradient(135deg, ${cm(g,.18)} 0%, ${cm(g,.08)} 100%)`:void 0,b=h?cm(g,.5):void 0,[x,w]=A.useState(!1),S=iN(z=>{BW(),f(z,t.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch}),T=i.filter(z=>z.envelopeId===t.id&&z.month===a),I=T.filter(z=>z.type==="Expense"),N=T.filter(z=>z.type==="Income"),O=I.reduce((z,B)=>z+(B.amount||0),0),D=N.reduce((z,B)=>z+(B.amount||0),0),k=D>0?Math.max(0,O/D*100):0,P=z=>{if(x||o){z.preventDefault(),z.stopPropagation();return}r(`/envelope/${t.id}`)};A.useEffect(()=>{c&&c!==t.id&&w(!1)},[c,t.id]),A.useEffect(()=>{c===t.id&&(w(!0),u(t.id))},[c,t.id,u]),A.useEffect(()=>{if(!c&&x){const z=setTimeout(()=>{w(!1)},300);return()=>clearTimeout(z)}},[c,x]);const R=y.jsxs("div",{className:"flex items-center gap-3 w-full",children:[y.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:z=>f(z,t.id),children:y.jsx(iv,{size:20})}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[h&&y.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:cm(g,.4),backgroundColor:cm(g,.15),color:g},children:y.jsx(l0,{size:10})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),y.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[y.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),y.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-k<=5?"text-red-500":k>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),y.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]}),e>0&&y.jsx("div",{className:"mt-1",children:y.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-k<=5?"bg-red-500":k>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-k,2)}%`}})})})]})]}),j=c===t.id;return y.jsx(Gn.div,{...S(),layout:!j,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:s(t.id),onClick:P,style:{boxShadow:j?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:m,borderColor:b,cursor:j?"grabbing":"pointer",zIndex:j?50:1,scale:j?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${h?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:R})},f6=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:s,onReorderGlobal:o})=>{if(e.length===0&&t.id==="uncategorized")return null;const[c,u]=A.useState(e),f=A.useRef(e),[h,g]=A.useState(!1),[m,b]=A.useState(null),x=A.useRef(!1),w=A.useRef(null),S=A.useRef({}),T=A.useRef({}),I=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{h||(u(e),f.current=e)},[e,h]);const N=A.useCallback((D,k)=>{const P=T.current[k];if(P){x.current=!0;const R=D.nativeEvent||D;P.dragStart(R)}},[]),O=A.useCallback(D=>k=>{k?S.current[D]=k:delete S.current[D]},[]);return A.useEffect(()=>{const D=()=>{Object.values(T.current).forEach(R=>R?.destroy()),T.current={}};if(!c.length)return;const k=()=>{c.forEach(R=>{const j=S.current[R.id];if(!j||!w.current)return;const z=new LW(w.current,{target:j,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});z.on("dragStart",L=>{if(!x.current){L.stop();return}const K=L.inputEvent.target;if(K.closest(".js-budget-target")||K.tagName==="INPUT"){L.stop();return}const Q=f.current.findIndex(J=>J.id===R.id),q=L.target,Y=q.getBoundingClientRect();b(R.id),I.current={activeId:R.id,startIndex:Q,currentIndex:Q,itemHeight:Y.height+mwe},q.style.transition="none",q.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",q.style.zIndex="20",g(!0)});let B=null;z.on("drag",L=>{const K=L.target;B!==null&&cancelAnimationFrame(B),B=requestAnimationFrame(()=>{const Q=I.current;if(Q.activeId!==R.id)return;const q=L.beforeTranslate[1];K.style.transform=`translateY(${q}px)`,K.style.transition="none";const{itemHeight:Y,startIndex:J}=Q,ne=Math.round(q/Y),W=vwe(J+ne,0,f.current.length-1);W!==Q.currentIndex&&(Q.currentIndex=W,f.current.forEach((U,X)=>{if(U.id===R.id)return;const H=S.current[U.id];if(!H)return;let Z=0;J<W&&X>J&&X<=W?Z=-Y:J>W&&X>=W&&X<J&&(Z=Y),H.style.transform=Z?`translateY(${Z}px)`:"",H.style.transition="transform 0.2s ease"})),B=null})}),z.on("dragEnd",L=>{B!==null&&(cancelAnimationFrame(B),B=null);const K=L.target,{startIndex:Q,currentIndex:q}=I.current;if(K.style.transform="",K.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",K.style.boxShadow="",f.current.forEach(Y=>{const J=S.current[Y.id];J&&(J.style.transform="",J.style.transition="")}),Q!==q){const Y=[...f.current],[J]=Y.splice(Q,1);Y.splice(q,0,J),f.current=Y,u(Y),o(Y.map(ne=>ne.id))}setTimeout(()=>{K.style.zIndex="",b(null),g(!1),x.current=!1},300)}),z.on("click",()=>{const L=window.event?.target;L&&(L.closest(".js-budget-target")||L.tagName==="INPUT")||a(`/envelope/${R.id}`)}),T.current[R.id]=z})},P=window.setTimeout(k,80);return()=>{clearTimeout(P),D()}},[c,a,o]),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[y.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),y.jsx("button",{onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:y.jsx(c0,{size:20})})]}),y.jsx("div",{ref:w,className:"space-y-2 relative",children:c.length===0?y.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:y.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):y.jsx(ba,{initial:!1,children:c.map(D=>{const P=(n[r]||[]).find(j=>j.envelopeId===D.id)?.budgetedAmount||0,R=s(D.id);return D.isPiggybank?y.jsx(gwe,{piggybank:D,balance:R,onNavigate:j=>a(`/envelope/${j}`),setMoveableRef:O(D.id),isReorderingActive:h,activelyDraggingId:m,onItemDragStart:()=>{},onLongPressTrigger:N},D.id):y.jsx(ywe,{env:D,budgetedAmount:P,remainingBalance:R,navigate:a,transactions:i,currentMonth:r,setMoveableRef:O,isReorderingActive:h,activelyDraggingId:m,onItemDragStart:()=>{},onLongPressTrigger:N},D.id)})})})]})},bwe=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:s,isLoading:o,isInitialLoading:c,showTimeoutMessage:u,getEnvelopeBalance:f,deleteIncomeSource:h}=cwe(),{setMonth:g,setIsOnboardingActive:m,isOnboardingActive:b,isOnboardingCompleted:x,completeOnboarding:w,categories:S,fetchCategories:T,envelopes:I,reorderEnvelopes:N}=sn(),O=es(),[D,k]=A.useState(!1),[P,R]=A.useState("add"),[j,z]=A.useState(null),[B,L]=A.useState(!1),[K,Q]=A.useState(!1),q=A.useRef(null),Y=A.useRef(null),[J,ne]=A.useState(0);A.useEffect(()=>{S.length===0&&T()},[S.length,T]);const W=A.useMemo(()=>{const he={},ee=[];return S.forEach(re=>he[re.id]=[]),[...t,...e].sort((re,oe)=>(re.orderIndex??0)-(oe.orderIndex??0)).forEach(re=>{re.categoryId&&he[re.categoryId]?he[re.categoryId].push(re):ee.push(re)}),{groups:he,uncategorized:ee}},[S,t,e]),U=A.useCallback(async he=>{const ee=[...I.map(De=>De.id)],Se=new Set(he),re=[];let oe=0;ee.forEach(De=>{Se.has(De)?re.push(he[oe++]):re.push(De)}),await N(re)},[I,N]);A.useLayoutEffect(()=>{if(b)return;const he=Y.current;if(!he)return;const ee=()=>ne(he.getBoundingClientRect().height);ee();const Se=new ResizeObserver(()=>ee());return Se.observe(he),window.addEventListener("resize",ee),()=>{window.removeEventListener("resize",ee),Se.disconnect()}},[b,i,n,a,t,e,r]),A.useEffect(()=>{if(!c&&!o){const he=setTimeout(()=>{if(b)return;if(x){m(!1);const re=(n[i]||[]).length===0&&(a[i]||[]).length===0,oe=Object.keys(n).some(De=>(n[De]||[]).length>0)||Object.keys(a).some(De=>(a[De]||[]).length>0);Q(!!(re&&oe));return}const ee=(n[i]||[]).length===0&&(a[i]||[]).length===0,Se=Object.keys(n).some(re=>(n[re]||[]).length>0)||Object.keys(a).some(re=>(a[re]||[]).length>0);ee?Se?(Q(!0),m(!1)):(m(!0),Q(!1)):(Q(!1),m(!1))},500);return()=>clearTimeout(he)}},[c,o,i,n,a,x]);const X=()=>{R("add"),z(null),k(!0)},H=he=>{q.current&&clearTimeout(q.current),!B&&(R("edit"),z(he),k(!0))},Z=he=>{q.current&&clearTimeout(q.current),L(!0),h(he),setTimeout(()=>L(!1),500)},le=()=>{k(!1),z(null)},de=async()=>{Q(!1);const{copyPreviousMonthAllocations:he}=sn.getState();await he(i)},ce=()=>{w(),m(!1)};return c?y.jsx(oG,{message:u?"Still loading...":"Loading your budget...",showTimeout:u}):y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!b&&y.jsx("header",{ref:Y,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:y.jsx(uwe,{currentMonth:i,onMonthChange:he=>{Q(!1),g(he)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((he,ee)=>he+ee.amount,0),totalAllocated:(a[i]||[]).filter(he=>t.some(ee=>ee.id===he.envelopeId)||e.some(ee=>ee.id===he.envelopeId)).reduce((he,ee)=>he+ee.budgetedAmount,0)}})}),y.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:b?void 0:{paddingTop:Math.max(0,J+16)},children:[b?y.jsx(pwe,{currentMonth:i,onComplete:ce}):K?y.jsx(fwe,{currentMonth:i,onCopy:de}):y.jsxs(y.Fragment,{children:[y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[y.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),y.jsx("button",{onClick:X,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:y.jsx(c0,{size:20})})]}),(n[i]||[]).length===0?y.jsx("div",{className:"text-center py-4",children:y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):y.jsx("div",{className:"space-y-2",children:y.jsx(ba,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(he=>y.jsx(Gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Q_,{onDelete:()=>Z(he),children:y.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>H(he),children:[y.jsx("div",{className:"flex-1",children:y.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:he.name})}),y.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",he.amount.toFixed(2)]})]})})},he.id))})})]}),S.map(he=>y.jsx(f6,{category:he,envelopes:W.groups[he.id]||[],allocations:a,currentMonth:i,transactions:s,navigate:O,getEnvelopeBalance:f,onReorderGlobal:U},he.id)),W.uncategorized.length>0&&y.jsx(f6,{category:{id:"uncategorized",name:"Uncategorized"},envelopes:W.uncategorized,allocations:a,currentMonth:i,transactions:s,navigate:O,getEnvelopeBalance:f,onReorderGlobal:U}),S.length===0&&W.uncategorized.length===0&&y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[y.jsx(i_,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),y.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),y.jsx("button",{onClick:()=>O("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),y.jsx(dwe,{isVisible:D,onClose:le,mode:P,initialIncomeSource:j})]})]})]})},xwe=[],JW=({selectedCard:t,onCardSelect:e,initialCards:n=xwe,disabled:r=!1,isUserSelected:i=!1})=>{const a=sn(W=>W.appSettings),s=sn(W=>W.updateAppSettings),[o,c]=A.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[u,f]=A.useState(!1),[h,g]=A.useState(!1),[m,b]=A.useState(n),[x,w]=A.useState(null),[S,T]=A.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"}),[I,N]=A.useState(null),[O,D]=A.useState(null);A.useEffect(()=>{a?.paymentSources&&(b(a.paymentSources),a.paymentSources.length>0&&!t&&c(a.paymentSources[0]))},[a,t]);const k=t||o;A.useEffect(()=>{!t&&e&&m.length>0&&e(m[0])},[t,e,m]);const P=W=>{r||(W.id==="add-new"?g(!0):(c(W),e?.(W),f(!1)))},R=()=>{r||f(!u)},j=W=>{r||w(W)},z=async()=>{if(x&&!r){const W=m.filter(U=>U.id!==x.id);if(b(W),k?.id===x.id){const U=W.length>0?W[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};c(U),e?.(U)}w(null),f(!1);try{await s({paymentSources:W})}catch(U){console.error("Failed to delete card from app settings:",U),b(m),alert("Failed to delete card. Please try again.");return}}},B=()=>{w(null)},L=async()=>{if(r)return;const W=!["Cash","Venmo"].includes(S.network);if(W&&(S.last4.length!==4||!/^\d{4}$/.test(S.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!S.name.trim()){alert("Please enter a name");return}const U={id:`custom-${Date.now()}`,name:S.name.trim(),network:S.network,last4:W?S.last4:void 0,color:S.color},X=[...m,U];b(X),c(U),e?.(U),g(!1),f(!1);try{await s({paymentSources:X})}catch(H){console.error("Failed to save card to app settings:",H),b(m),c(k),alert("Failed to save card. Please try again.");return}T({name:"",network:"Visa",last4:"",color:"#3b82f6"})},K=(W,U)=>{r||(N(U),W.dataTransfer.effectAllowed="move")},Q=(W,U)=>{r||!I||(W.preventDefault(),W.dataTransfer.dropEffect="move",D(U))},q=()=>{D(null)},Y=async(W,U)=>{if(r||!I)return;W.preventDefault(),D(null);const X=m.findIndex(Z=>Z.id===I.id);if(X===-1||X===U)return;const H=[...m];H.splice(X,1),H.splice(U,0,I),b(H),N(null);try{await s({paymentSources:H})}catch(Z){console.error("Failed to reorder cards:",Z),b(m),alert("Failed to reorder cards. Please try again.")}},J=()=>{N(null),D(null)},ne=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&y.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),y.jsxs("div",{onClick:R,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[y.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:k.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:k.network}),y.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(k.network)?k.network==="Cash"?"$$$":"@":` ${k.last4||""}`})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:k.name}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(k.network)?k.network:`(...${k.last4})`})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-gray-400",children:u?"":""}),!i&&y.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),u&&y.jsxs("div",{className:"card-stack-dropdown",children:[m.length>1&&y.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 text-center",children:" Drag and drop cards to reorder"}),y.jsx("div",{className:"card-stack",children:y.jsx(ba,{initial:!1,mode:"popLayout",children:[...m,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((W,U)=>{const X=k.id===W.id,H=W.id==="add-new",Z=["Cash","Venmo"].includes(W.network);return y.jsx(Gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Q_,{onDelete:()=>!H&&!r&&j(W),threshold:-80,children:y.jsxs("div",{className:`card-stack-item ${X?"selected":""} ${H?"add-new-card":""} ${I?.id===W.id?"dragging":""} ${O===U?"drag-over":""}`,onClick:()=>P(W),draggable:!H&&!r,onDragStart:H?void 0:le=>K(le,W),onDragOver:H?void 0:le=>Q(le,U),onDragLeave:H?void 0:q,onDrop:H?void 0:le=>Y(le,U),onDragEnd:H?void 0:J,style:{backgroundColor:H?"#f3f4f6":W.color,color:H?"#374151":W.color==="#e3e3e3"?"#000":"#fff",zIndex:m.length-U,opacity:I?.id===W.id?.5:1,transform:O===U?"scale(1.02)":"scale(1)"},children:[y.jsxs("div",{className:"card-header",children:[y.jsx("span",{className:"card-network",children:H?"":W.network}),X&&!H&&y.jsx("span",{className:"selected-indicator",children:""})]}),y.jsxs("div",{className:"card-details",children:[y.jsx("div",{className:"card-name",children:W.name}),y.jsx("div",{className:"card-number",children:H?"":Z?W.network==="Cash"?"$$$":"@":` ${W.last4}`})]}),H&&y.jsx("div",{className:"add-icon",children:y.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),y.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},W.id)})})})]})]}),h&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),y.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),y.jsx("input",{type:"text",value:S.name,onChange:W=>T({...S,name:W.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),y.jsxs("select",{value:S.network,onChange:W=>T({...S,network:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[y.jsx("option",{value:"Visa",children:"Visa"}),y.jsx("option",{value:"Mastercard",children:"Mastercard"}),y.jsx("option",{value:"Amex",children:"Amex"}),y.jsx("option",{value:"Cash",children:"Cash"}),y.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(S.network)&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),y.jsx("input",{type:"text",value:S.last4,onChange:W=>T({...S,last4:W.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:ne.map(W=>y.jsx("button",{type:"button",onClick:()=>T({...S,color:W}),className:`w-full h-10 rounded-lg border-2 transition-all ${S.color===W?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:W}},W))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),y.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:S.color},children:[y.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:S.network}),y.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(S.network)?S.network==="Cash"?"$$$":"@":` ${S.last4||"0000"}`})]})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),x&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",y.jsx("span",{className:"font-medium",children:x.name}),"?"]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{type:"button",onClick:B,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),y.jsx("button",{type:"button",onClick:z,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},eY=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:s,deleteTransaction:o,currentMonth:c}=sn(),[u,f]=A.useState(""),[h,g]=A.useState(""),[m,b]=A.useState(""),[x,w]=A.useState(new Date().toISOString().split("T")[0]),[S,T]=A.useState(null);A.useEffect(()=>{if(t)if(n==="edit"&&i){f(i.amount.toString()),g(i.merchant||""),b(i.description),T(i.paymentMethod||null);try{const k=new Date(i.date);isNaN(k.getTime())?(console.warn("Invalid date in transaction:",i.date),w(new Date().toISOString().split("T")[0])):w(k.toISOString().split("T")[0])}catch(k){console.error("Error parsing transaction date:",k),w(new Date().toISOString().split("T")[0])}}else f(""),g(""),b(""),w(new Date().toISOString().split("T")[0])},[t,n,i]);const I=async k=>{k.preventDefault();const P=parseFloat(u);if(isNaN(P)||P<=0){console.log(" Invalid amount:",u);return}console.log(" Saving transaction:",{mode:n,amount:P,note:m,date:x,envelopeId:r.id,paymentMethod:S});try{const R=new Date(x),j=`${R.getFullYear()}-${(R.getMonth()+1).toString().padStart(2,"0")}`;if(j!==c){const z=`This transaction date (${j}) does not match the current budget month (${c}). Are you sure you want to save it?`;if(!window.confirm(z))return}n==="add"?(console.log(" Adding income transaction"),await a({amount:P,description:m,merchant:h||void 0,date:new Date(x).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1,paymentMethod:S||void 0})):n==="spend"?(console.log(" Adding expense transaction"),await a({amount:P,description:m,merchant:h||void 0,date:new Date(x).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1,paymentMethod:S||void 0})):n==="edit"&&i&&(console.log(" Updating transaction"),await s({...i,amount:P,description:m,merchant:h||void 0,date:new Date(x).toISOString(),paymentMethod:S||void 0})),console.log(" Transaction saved successfully"),e()}catch(R){console.error(" Error saving transaction:",R),alert("Failed to save transaction: "+(R instanceof Error?R.message:"Unknown error"))}},N=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(o(i.id),e())},O=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",D=n==="add"?"text-green-500":"text-red-500";return y.jsx(ba,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:O}),y.jsx("button",{onClick:I,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!u||parseFloat(u)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),y.jsxs("form",{onSubmit:I,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${D}`,children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:u,onChange:k=>{const P=k.target.value.replace(/\D/g,"");if(!P){f("");return}const j=(parseInt(P,10)/100).toFixed(2);f(j)},onKeyDown:k=>{(k.key==="e"||k.key==="E"||k.key==="+"||k.key==="-")&&k.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${D} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:h,onChange:k=>g(k.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&y.jsx(JW,{selectedCard:S,onCardSelect:T}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:m,onChange:k=>b(k.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const k=new Date(x);return`${k.getFullYear()}-${(k.getMonth()+1).toString().padStart(2,"0")}`!==c?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(Vh,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:x,onChange:k=>{console.log("Date changed to:",k.target.value),w(k.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&!i?.isAutomatic&&y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:y.jsxs("button",{type:"button",onClick:N,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[y.jsx(N$,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},wwe=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=sn(),[a,s]=A.useState(""),[o,c]=A.useState(""),[u,f]=A.useState(""),[h,g]=A.useState(new Date().toISOString().split("T")[0]),m=r.filter(w=>w.id!==n.id);A.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{s(""),c(""),f(""),g(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(w)},[t]);const b=w=>{w.preventDefault();const S=parseFloat(o);isNaN(S)||S<=0||!a||(i(n.id,a,S,u,new Date(h)),e())},x=r.find(w=>w.id===a);return y.jsx(ba,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),y.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),y.jsx("button",{onClick:b,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!o||parseFloat(o)<=0||!a,children:"Transfer"})]}),y.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),y.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),y.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[y.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),m.map(w=>y.jsx("option",{value:w.id,className:"bg-white dark:bg-zinc-900",children:w.name},w.id))]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:w=>{const S=w.target.value.replace(/\D/g,"");if(!S){c("");return}const I=(parseInt(S,10)/100).toFixed(2);c(I)},onKeyDown:w=>{(w.key==="e"||w.key==="E"||w.key==="+"||w.key==="-")&&w.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),y.jsx("input",{type:"text",value:u,onChange:w=>f(w.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),y.jsx("input",{type:"date",value:h,onChange:w=>g(w.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),x&&o&&parseFloat(o)>0&&y.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",y.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(o).toFixed(2)]})," from"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:x.name})]})]})]})]})})},_we=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=A.useState(""),[s,o]=A.useState(""),[c,u]=A.useState(""),[f,h]=A.useState("#3B82F6"),[g,m]=A.useState("piggy-bank"),[b,x]=A.useState(!1),[w,S]=A.useState(!1);A.useEffect(()=>{r?(a(r.name),o(r.piggybankConfig?.targetAmount?.toString()||""),u(r.piggybankConfig?.monthlyContribution.toString()||"0"),h(r.piggybankConfig?.color||"#3B82F6"),m(r.piggybankConfig?.icon||"piggy-bank"),x(r.piggybankConfig?.paused||!1)):(a(""),o(""),u(""),h("#3B82F6"),m("piggy-bank"),x(!1))},[r,t]);const T=async N=>{if(N.preventDefault(),!(!i.trim()||!c)){S(!0);try{const O={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(c),color:f,icon:g,paused:b}};s&&parseFloat(s)>0&&(O.piggybankConfig.targetAmount=parseFloat(s)),r&&(O.id=r.id,O.currentBalance=r.currentBalance,O.lastUpdated=new Date().toISOString(),O.isActive=r.isActive,O.orderIndex=r.orderIndex,O.userId=r.userId),await n(O),e()}catch(O){console.error("Error saving piggybank:",O),alert("Failed to save piggybank")}finally{S(!1)}}},I=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return y.jsx(ba,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:y.jsx(l0,{size:20,className:"text-blue-600 dark:text-blue-400"})}),y.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:y.jsx(a_,{size:24})})]}),y.jsxs("form",{onSubmit:T,className:"p-6 space-y-5",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),y.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:N=>a(N.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:c,onChange:N=>{const O=N.target.value.replace(/\D/g,"");if(!O){u("");return}const k=(parseInt(O,10)/100).toFixed(2);u(k)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:s,onChange:N=>{const O=N.target.value.replace(/\D/g,"");if(!O){o("");return}const k=(parseInt(O,10)/100).toFixed(2);o(k)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsx("div",{className:"space-y-2",children:y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:b,onChange:N=>x(N.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),y.jsxs("div",{children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:I.map(N=>y.jsx("button",{type:"button",onClick:()=>h(N.value),className:`w-full aspect-square rounded-lg transition-all ${f===N.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:N.value},title:N.label},N.value))})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:w,children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!i.trim()||!c||w,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&c&&!w?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:w?"Saving...":r?"Update":"Create"})]})]})]})]})})},Swe=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},Ewe=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},tY=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;console.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let s="text-gray-900 dark:text-white";return i&&(s="text-green-600 dark:text-green-400"),a&&(s="text-red-600 dark:text-red-400"),y.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[y.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&y.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&y.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),y.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[y.jsx("span",{children:Swe(t.date)}),e&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&y.jsxs(y.Fragment,{children:[y.jsx("span",{children:""}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),y.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${s}`,children:[a?"-":i?"+":"",Ewe(t.amount)]}),n?y.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?y.jsx(nl,{className:"text-green-500",size:20}):y.jsx(vz,{className:"text-gray-400",size:20})}):y.jsx("span",{children:t.reconciled?y.jsx(nl,{className:"text-green-500",size:20}):y.jsx(vz,{className:"text-gray-400",size:20})})]})]})},nC=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),Twe=()=>{const{id:t}=Vse(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:s,updateTransaction:o,deleteTransaction:c,restoreTransaction:u,getEnvelopeBalance:f,currentMonth:h,allocations:g,incomeSources:m,setEnvelopeAllocation:b,updatePiggybankContribution:x,updateEnvelope:w}=sn(),{showToast:S}=df(),T=es(),I=Ms(),[N,O]=A.useState(!1),[D,k]=A.useState(!1),[P,R]=A.useState(!1),[j,z]=A.useState(null),[B,L]=A.useState(!1),[K,Q]=A.useState(!1),[q,Y]=A.useState(""),J=A.useRef(null),ne=A.useRef(!1);A.useEffect(()=>{e.length===0&&r()},[]);const W=e.find(re=>re.id===t),U=async re=>{if(W)try{const oe={...W,...re,id:W.id,userId:W.userId,currentBalance:W.currentBalance,lastUpdated:new Date().toISOString(),isActive:W.isActive,orderIndex:W.orderIndex};await w(oe),S("Piggybank updated successfully","success"),L(!1)}catch(oe){console.error("Failed to update piggybank:",oe),S("Failed to update piggybank","error")}},X=W?.isPiggybank?W.piggybankConfig?.monthlyContribution||0:g[h]?.find(re=>re.envelopeId===t)?.budgetedAmount||0;A.useEffect(()=>{K&&(Y(X.toString()),setTimeout(()=>{J.current?.focus(),J.current?.select()},50))},[K,X]);const H=re=>{const oe=(m[h]||[]).reduce((je,Ue)=>je+Ue.amount,0),De=g[h]||[];let ze=De.map(je=>W&&je.envelopeId===W.id&&re!==void 0?{...je,budgetedAmount:re}:je).filter(je=>{const Ue=e.find(Ie=>Ie.id===je.envelopeId);return Ue?Ue.isActive!==!1:!1}).reduce((je,Ue)=>je+Ue.budgetedAmount,0);return re!==void 0&&W&&(De.some(Ue=>Ue.envelopeId===W.id)||(ze+=re)),oe-ze},le=K?H(parseFloat(q)||0):H(),de=async()=>{if(!W||ne.current)return;const re=parseFloat(q);if(isNaN(re)||re<0){S("Please enter a valid positive number","error");return}ne.current=!0;try{W.isPiggybank?await x(W.id,re):await b(W.id,re),Q(!1)}catch(oe){console.error("Failed to save budget:",oe),S("Failed to update budget","error")}finally{ne.current=!1}};if(!W)return i?y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Loading envelope..."})}):y.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:y.jsx("p",{children:"Envelope not found."})});if(W.isPiggybank){const re=n.filter(oe=>oe.envelopeId===W.id);console.log(" Piggybank:",W.name),console.log(" Created at:",W.createdAt),console.log(" Transactions:",re.map(oe=>({date:oe.date,description:oe.description,amount:oe.amount})))}const ce=n.filter(re=>re.envelopeId===W.id).filter(re=>{if(re.description==="Budgeted"||re.description==="Piggybank Contribution")return!1;if(W.isPiggybank){if(!W.createdAt)return!0;const oe=Q1(W.createdAt).toISOString().split("T")[0];return Q1(re.date).toISOString().split("T")[0]>=oe}return re.month===h||!re.month}).sort((re,oe)=>new Date(oe.date).getTime()-new Date(re.date).getTime()),he=()=>{I.state?.fromGlobalFAB?T("/"):T(-1)},ee=()=>{t&&(a(t),T(-1))},Se=re=>{const oe={...re,reconciled:!re.reconciled};o(oe)};return y.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[y.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[y.jsx("button",{onClick:()=>{if(W.isPiggybank)L(!0);else{const re=prompt("Rename envelope:",W.name);re&&re.trim()&&t&&s(t,re)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:W.isPiggybank?"Edit":"Rename"}),y.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:W.name}),y.jsx("button",{onClick:he,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),y.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const re=W.isPiggybank?f(W.id):f(W.id,h);return console.log(`Debug: Envelope ${W.name} Balance:`,re),y.jsx("span",{className:`text-xl font-bold ${re<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:nC(re)})})()]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:W.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),K?y.jsx("form",{onSubmit:re=>{re.preventDefault(),de()},className:"flex items-center gap-2",children:y.jsx("input",{ref:J,type:"number",step:"0.01",value:q,onChange:re=>Y(re.target.value),onBlur:de,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):y.jsx("div",{onClick:()=>Q(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:y.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:nC(X)})})]}),y.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${le<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":le===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[y.jsx("span",{children:"Left to Budget:"}),y.jsx("span",{children:nC(le)})]})]})]}),y.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>O(!0),children:[y.jsx(ile,{className:"w-5 h-5 mr-3"}),"Add Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>k(!0),children:[y.jsx(nle,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),y.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>R(!0),children:[y.jsx(Uoe,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),y.jsxs("section",{className:"mt-6",children:[y.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:ce.length===0?y.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):y.jsx(ba,{initial:!1,mode:"popLayout",children:ce.map(re=>y.jsx(Gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Q_,{disabled:re.isAutomatic,onDelete:()=>{if(!re.id)return;const oe={...re};c(re.id),S("Transaction deleted","neutral",()=>u(oe))},children:y.jsx(tY,{transaction:re,onReconcile:()=>Se(re),onEdit:()=>{re.isAutomatic||z(re)}})})},re.id))})})]}),y.jsx("div",{className:"mt-8",children:y.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const re=W.isPiggybank?`Are you sure you want to delete "${W.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${W.name}" from ${h}? This will delete all transactions for this month only.`;confirm(re)&&ee()},children:[y.jsx(N$,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),y.jsx(eY,{isVisible:N||D||!!j,onClose:()=>{O(!1),k(!1),z(null)},mode:N?"add":D?"spend":"edit",currentEnvelope:W,initialTransaction:j}),y.jsx(wwe,{isVisible:P,onClose:()=>R(!1),sourceEnvelope:W}),y.jsx(_we,{isOpen:B,onClose:()=>L(!1),onSave:U,existingPiggybank:W})]})},Awe=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:s,totalAllocated:o,transactionCount:c,totalTransactionAmount:u,isLoading:f=!1})=>{const[h,g]=A.useState("confirm"),m=w=>{const[S,T]=w.split("-");return new Date(parseInt(S),parseInt(T)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},b=()=>{h==="confirm"?g("final_confirm"):h==="final_confirm"&&n()},x=()=>{g("confirm"),e()};return y.jsx(ba,{children:t&&y.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[y.jsx(Gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"absolute inset-0 bg-black bg-opacity-50"}),y.jsxs(Gn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",m(r)]}),y.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:f,children:""})]}),y.jsx("div",{className:"p-6 space-y-4",children:h==="confirm"?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"ml-3",children:[y.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),y.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:y.jsxs("ul",{className:"space-y-1",children:[y.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),y.jsxs("li",{children:[" ",s," envelope allocation",s!==1?"s":""," (totaling $",o.toFixed(2),")"]}),y.jsxs("li",{children:[" ",c," transaction",c!==1?"s":""," (totaling $",u.toFixed(2),")"]})]})})]})]})}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[y.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:y.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),y.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),y.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",y.jsx("strong",{children:m(r)})," will be permanently removed."]})]})}),y.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[y.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:f,children:"Cancel"}),y.jsx("button",{type:"button",onClick:b,disabled:f,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?"Clearing...":h==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},Cwe=()=>{const t=es(),e=A.useRef(null),{envelopes:n,transactions:r,categories:i,resetData:a,importData:s,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:f,incomeSources:h,allocations:g,currentMonth:m,clearMonthData:b,handleUserLogout:x,resetOnboarding:w}=sn(),{deleteAccount:S,currentUser:T,logout:I}=$a(),[N,O]=A.useState(null),[D,k]=A.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[P,R]=A.useState(!1),[j,z]=A.useState(""),[B,L]=A.useState(!1),[K,Q]=A.useState(!1),[q,Y]=A.useState(null),[J,ne]=A.useState(!1),[W,U]=A.useState(!1),X=978307200,H=c?.theme??"system",Z=c?.fontSize??"medium";A.useEffect(()=>{c||f().catch(Ie=>{console.error("Failed to initialize app settings:",Ie)})},[f,c]);const le=(Ie,Oe)=>{O({type:Ie,text:Oe}),setTimeout(()=>O(null),3500)},de=A.useMemo(()=>{const Ie=n.length,Oe=r.length,Ge=m?g[m]||[]:[],yt=Object.values(h).reduce((xn,Zt)=>xn+Zt.length,0),Dt=Ge.length,Nt=n.reduce((xn,Zt)=>{const Fr=Zt.isPiggybank?o(Zt.id):o(Zt.id,m);return xn+(typeof Fr=="number"?Fr:0)},0),ot=0,Et=r.reduce((xn,Zt)=>{let Fr=0;if(typeof Zt.date=="string"){const rs=Date.parse(Zt.date);Fr=Number.isNaN(rs)?0:rs}else typeof Zt.date=="number"&&(Fr=Zt.date<2e9?(Zt.date+X)*1e3:Zt.date);return Math.max(xn,Fr)},0),ft=ot||Et?new Date(Math.max(ot,Et)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Ie,transactionCount:Oe,incomeSourceCount:yt,allocationCount:Dt,totalBalance:Nt,lastUpdated:ft}},[n,r,h,g,m]),ce=()=>{try{console.log(" Creating backup...");const Ie={appVersion:"1.8.7",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(Nt=>({...Nt,currentBalance:(()=>{const ot=Nt.isPiggybank?o(Nt.id):o(Nt.id,m);return typeof ot=="number"?ot:0})(),lastUpdated:new Date().toISOString()})),transactions:r,categories:i,allocations:g,incomeSources:h},Oe=new Blob([JSON.stringify(Ie,null,2)],{type:"application/json"}),Ge=URL.createObjectURL(Oe),yt=document.createElement("a");yt.href=Ge,yt.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(yt),yt.click(),document.body.removeChild(yt),URL.revokeObjectURL(Ge);const Dt=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",Dt),k(Dt),Y({success:!0,message:"Backup downloaded successfully."})}catch(Ie){console.error(Ie),Y({success:!1,message:"Failed to create backup file.",onRetry:ce})}},he=()=>{Q(!0),Y(null);try{const Ie=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],Oe=r.filter(ft=>ft.description!=="Budgeted"&&ft.description!=="Piggybank Contribution"),Ge=new Set,yt=[];for(const ft of Oe){let xn,Zt,Fr;if(ft.splitGroupId&&!Ge.has(ft.splitGroupId)){Ge.add(ft.splitGroupId);const _n=Oe.filter(Vt=>Vt.splitGroupId===ft.splitGroupId);xn=_n.reduce((Vt,zs)=>Vt+zs.amount,0),Zt=_n.map(Vt=>n.find(zs=>zs.id===Vt.envelopeId)?.name||"Unknown").join(", "),Fr=_n.every(Vt=>Vt.reconciled)}else{if(ft.splitGroupId&&Ge.has(ft.splitGroupId))continue;xn=ft.amount,Zt=n.find(_n=>_n.id===ft.envelopeId)?.name||"Unknown",Fr=ft.reconciled}const rs=(ft.merchant||"").replace(/"/g,'""'),is=(ft.description||"").replace(/"/g,'""');let as="";ft.paymentMethod&&(as=`${ft.paymentMethod.name} (...${ft.paymentMethod.last4})`);const hi=as.replace(/"/g,'""');let wn="Invalid Date";if(ft.date){if(typeof ft.date=="string")wn=ft.date.split("T")[0];else if(typeof ft.date=="number"){const _n=ft.date<2e9?(ft.date+X)*1e3:ft.date;wn=new Date(_n).toISOString().split("T")[0]}}yt.push([wn,`"${rs}"`,`"${hi}"`,`"${is}"`,xn.toFixed(2),ft.type,`"${Zt}"`,Fr?"Yes":"No"].join(","))}const Dt=[Ie.join(","),...yt].join(`
`),Nt=new Blob([Dt],{type:"text/csv;charset=utf-8;"}),ot=URL.createObjectURL(Nt),Et=document.createElement("a");Et.href=ot,Et.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Et),Et.click(),document.body.removeChild(Et),URL.revokeObjectURL(ot),Y({success:!0,message:"Transactions CSV exported successfully."})}catch(Ie){console.error(Ie),Y({success:!1,message:"Failed to export CSV. Please try again.",onRetry:he})}finally{Q(!1)}},ee=()=>{e.current?.click()},Se=Ie=>{const Oe=Ie.target.files?.[0];if(!Oe)return;const Ge=new FileReader;Ge.onload=async yt=>{try{const Dt=JSON.parse(yt.target?.result),Nt=await s(Dt);if(!Nt.success){le("error",Nt.message);return}if(Dt.appSettings?.theme)try{await u({theme:Dt.appSettings.theme})}catch(ot){console.error("Failed to update imported settings:",ot)}le("success",`Loaded ${Dt.envelopes?.length??0} envelopes, ${Dt.transactions?.length??0} transactions.`)}catch(Dt){console.error(Dt),le("error","Invalid backup file. Please verify the JSON.")}},Ge.readAsText(Oe),Ie.target.value=""},re=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await a(),le("success","All data has been permanently deleted."),t("/")}catch(Ie){console.error("Reset failed:",Ie),le("error","Failed to delete all data. Some data may remain.")}},oe=async()=>{if(!j.trim()){le("error","Please enter your password to confirm account deletion.");return}R(!0);try{await a(),await S(j)?le("success","Your account has been permanently deleted."):le("error","Failed to delete account. Please try again.")}catch(Ie){console.error("Account deletion failed:",Ie),le("error","Failed to delete account. Please try again.")}finally{R(!1),L(!1),z("")}},De=async()=>{if(!T){le("error","You must be logged in to clean up data.");return}ne(!0);try{const Ie=await sN.cleanupOrphanedData(T.id),Oe=Ie.orphanedAllocationsDeleted+Ie.orphanedTransactionsDeleted;Oe>0?le("success",`Cleaned ${Oe} orphaned items: ${Ie.orphanedAllocationsDeleted} allocations and ${Ie.orphanedTransactionsDeleted} transactions.`):le("success","No orphaned data found. Your database is already clean!")}catch(Ie){console.error("Cleanup failed:",Ie),le("error","Failed to clean up orphaned data. Please try again.")}finally{ne(!1)}},Pe=()=>{U(!0)},ze=async()=>{U(!1),await b(m),le("success","Month data has been reset.")},je=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{x(),I(),t("/")}catch(Ie){console.error("Logout failed:",Ie)}},Ue=T?.displayName?.charAt(0)?.toUpperCase()||T?.email?.charAt(0)?.toUpperCase()||"U";return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[y.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),y.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[N&&y.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${N.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[N.type==="success"?y.jsx(d1,{size:18}):y.jsx(f1,{size:18}),N.text]}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[y.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Ue}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:T?.displayName||T?.email?.split("@")[0]||"User"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:T?.email}),y.jsxs("button",{onClick:je,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[y.jsx(Ile,{size:14})," Log Out"]})]})]})}),y.jsx("section",{children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(bz,{className:"text-blue-500",size:22}),y.jsxs("div",{children:[y.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:de.envelopeCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:de.transactionCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:de.incomeSourceCount})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),y.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:de.allocationCount})]})]})]})}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:y.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-xl",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),y.jsx(io,{className:"text-gray-400",size:18})]})})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[H==="light"&&y.jsx("span",{className:"text-orange-500 text-lg",children:""}),H==="dark"&&y.jsx("span",{className:"text-purple-500 text-lg",children:""}),H==="system"&&y.jsx("span",{className:"text-gray-500 text-lg",children:""}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:H})]}),y.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Ie=>y.jsx("button",{onClick:async()=>{try{await u({theme:Ie.value})}catch(Oe){console.error("Failed to update theme setting:",Oe)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${H===Ie.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Ie.label},Ie.value))})]}),y.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Z})]}),y.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Ie=>y.jsx("button",{onClick:async()=>{try{await u({fontSize:Ie.value})}catch(Oe){console.error("Failed to update font size setting:",Oe)}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${Z===Ie.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:y.jsx("span",{className:Ie.sizeClass,children:Ie.label})},Ie.value))})]})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:y.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(sv,{className:"text-purple-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),y.jsx(io,{className:"text-gray-400",size:18})]})})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[y.jsxs("button",{onClick:ce,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(bz,{className:"text-blue-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),y.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",D]})]})]}),y.jsx(io,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:ee,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(nce,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),y.jsx(io,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:he,disabled:K,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[K?y.jsx(xz,{className:"text-blue-500 animate-spin",size:20}):y.jsx(gle,{className:"text-blue-500",size:20}),y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:K?"Preparing CSV":"Export Transactions (CSV)"})]}),y.jsx(io,{className:"text-gray-400",size:18})]}),y.jsx("input",{type:"file",ref:e,onChange:Se,accept:".json",className:"hidden"})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[y.jsxs("button",{onClick:Pe,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(av,{className:"text-orange-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),y.jsx(io,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:De,disabled:J,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[J?y.jsx(xz,{className:"text-yellow-500 animate-spin",size:20}):y.jsx(sv,{className:"text-yellow-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:J?"Cleaning Data...":"Purge Orphaned Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),y.jsx(io,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:re,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(f1,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),y.jsx(io,{className:"text-gray-400",size:18})]}),y.jsxs("button",{onClick:()=>L(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(Vh,{className:"text-red-500",size:20}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),y.jsx(io,{className:"text-gray-400",size:18})]})]})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-semibold text-gray-500 dark:text-zinc-400 uppercase tracking-wider px-4 mb-2",children:"Siri Integration"}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-200 dark:border-zinc-800",children:y.jsxs("div",{className:"p-4",children:[y.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 mb-3",children:"Use this token in your Siri Shortcut to add transactions by voice."}),c?.siriToken?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg text-sm font-mono text-gray-900 dark:text-white select-all",children:c.siriToken}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.siriToken),le("success","Token copied to clipboard")},className:"px-3 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors",children:"Copy"})]}):y.jsx("button",{onClick:async()=>{const Ie=crypto.randomUUID().replace(/-/g,"").slice(0,16);await u({siriToken:Ie}),le("success","Siri token generated")},className:"w-full py-2 px-4 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Generate Siri Token"})]})})]}),y.jsxs("div",{className:"text-center py-4",children:[y.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:["Version ","1.8.7"," (PWA)"]}),"        "]}),q&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[q.success?y.jsx(d1,{className:"text-green-500",size:24}):y.jsx(Vh,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:q.success?"Success":"Error"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:q.message}),y.jsxs("div",{className:"flex gap-2",children:[q.onRetry&&y.jsx("button",{onClick:()=>{Y(null),q.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),y.jsx("button",{onClick:()=>Y(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),y.jsx(Awe,{isVisible:W,onClose:()=>U(!1),onConfirm:ze,currentMonth:m,incomeCount:(h[m]||[]).length,totalIncome:(h[m]||[]).reduce((Ie,Oe)=>Ie+Oe.amount,0),allocationCount:(g[m]||[]).filter(Ie=>n.some(Oe=>Oe.id===Ie.envelopeId)).length,totalAllocated:(g[m]||[]).filter(Ie=>n.some(Oe=>Oe.id===Ie.envelopeId)).reduce((Ie,Oe)=>Ie+Oe.budgetedAmount,0),transactionCount:r.filter(Ie=>Ie.month===m).length,totalTransactionAmount:r.filter(Ie=>Ie.month===m).reduce((Ie,Oe)=>Ie+Oe.amount,0)}),B&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(Vh,{className:"text-red-500",size:24}),y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),y.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),y.jsx("input",{type:"password",value:j,onChange:Ie=>z(Ie.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{L(!1),z("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:oe,disabled:P||!j.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Deleting...":"Delete Account"})]})]})})]})]})},Iwe=()=>{const t=es(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=sn(),{showToast:s}=df(),[o,c]=A.useState(!1),[u,f]=A.useState(""),[h,g]=A.useState(null),[m,b]=A.useState(""),[x,w]=A.useState(e),S=A.useRef(e),[T,I]=A.useState(!1),[N,O]=A.useState(null),D=A.useRef(!1),k=A.useRef(null),P=A.useRef({}),R=A.useRef({}),j=A.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});A.useEffect(()=>{T||(w(e),S.current=e)},[e,T]),A.useEffect(()=>(T?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[T]);const z=A.useCallback((ne,W)=>{console.log(" Long press triggered for category:",W);const U=R.current[W];if(U){console.log(" Moveable instance found, starting drag"),D.current=!0;const X=ne.nativeEvent||ne;U.dragStart(X)}else console.log(" No moveable instance found for:",W)},[]),B=A.useCallback(ne=>W=>{W?P.current[ne]=W:delete P.current[ne]},[]),L=async ne=>{if(ne.preventDefault(),!!u.trim())try{await n({name:u.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),f(""),c(!1),s("Category added","success")}catch(W){console.error(W),s("Failed to add category","error")}},K=async ne=>{if(!m.trim())return;const W=e.find(U=>U.id===ne);if(W)try{await r({...W,name:m.trim()}),g(null),s("Category updated","success")}catch(U){console.error(U),s("Failed to update category","error")}},Q=async ne=>{if(confirm("Are you sure? Envelopes in this category will become Uncategorized."))try{await i(ne),s("Category deleted","success")}catch(W){console.error(W),s("Failed to delete category","error")}},q=8,Y=(ne,W,U)=>Math.max(W,Math.min(U,ne)),J=A.useCallback(async ne=>{if(!ne.length)return;const W=ne.map(U=>U.id);try{await a(W)}catch(U){console.error("Failed to persist category order:",U),s("Failed to save category order","error")}},[a,s]);return A.useEffect(()=>{const ne=()=>{Object.values(R.current).forEach(X=>X?.destroy()),R.current={}};if(!x.length)return;const W=()=>{x.forEach(X=>{const H=P.current[X.id];if(!H||!k.current)return;const Z=new LW(k.current,{target:H,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});Z.on("dragStart",de=>{if(console.log(" Moveable dragStart event",{isManualDrag:D.current,categoryId:X.id}),!D.current){console.log(" Stopping drag - not manual"),de.stop();return}const ce=de.inputEvent.target;if(ce.tagName==="INPUT"||ce.tagName==="BUTTON"||ce.closest("button")){console.log(" Stopping drag - clicked on button/input"),de.stop();return}console.log(" Drag starting for category:",X.id);const he=S.current.findIndex(re=>re.id===X.id),ee=de.target,Se=ee.getBoundingClientRect();O(X.id),j.current={activeId:X.id,startIndex:he,currentIndex:he,itemHeight:Se.height+q},ee.style.transition="none",ee.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",ee.style.zIndex="20",I(!0)});let le=null;Z.on("drag",de=>{const ce=de.target;le!==null&&cancelAnimationFrame(le),le=requestAnimationFrame(()=>{const he=j.current;if(he.activeId!==X.id)return;const ee=de.beforeTranslate[1];ce.style.transform=`translateY(${ee}px)`,ce.style.transition="none";const{itemHeight:Se,startIndex:re}=he,oe=Math.round(ee/Se),De=Y(re+oe,0,S.current.length-1);De!==he.currentIndex&&(he.currentIndex=De,S.current.forEach((Pe,ze)=>{if(Pe.id===X.id)return;const je=P.current[Pe.id];if(!je)return;let Ue=0;re<De&&ze>re&&ze<=De?Ue=-Se:re>De&&ze>=De&&ze<re&&(Ue=Se),je.style.transform=Ue?`translateY(${Ue}px)`:"",je.style.transition="transform 0.2s ease"})),le=null})}),Z.on("dragEnd",de=>{le!==null&&(cancelAnimationFrame(le),le=null);const ce=de.target,{startIndex:he,currentIndex:ee}=j.current;if(ce.style.transform="",ce.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",ce.style.boxShadow="",S.current.forEach(Se=>{const re=P.current[Se.id];re&&(re.style.transform="",re.style.transition="")}),he!==ee){const Se=[...S.current],[re]=Se.splice(he,1);Se.splice(ee,0,re),S.current=Se,w(Se),J(Se)}setTimeout(()=>{ce.style.zIndex="",O(null),I(!1),D.current=!1},300)}),R.current[X.id]=Z})},U=window.setTimeout(W,80);return()=>{clearTimeout(U),ne()}},[x,J]),y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[y.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(_l,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),y.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:o?y.jsxs("form",{onSubmit:L,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:u,onChange:ne=>f(ne.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),y.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):y.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[y.jsx(c0,{size:20}),"Add Category"]})}),y.jsxs("div",{ref:k,className:"space-y-2",style:{touchAction:T?"none":"auto"},children:[x.map(ne=>{const W=iN(X=>{z(X,ne.id)},{threshold:500,cancelOnMovement:25,detect:Uc.Touch}),U=N===ne.id;return y.jsx("div",{...W(),ref:B(ne.id),style:{cursor:U?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:h===ne.id?y.jsxs("div",{className:"flex-1 flex gap-2",children:[y.jsx("input",{type:"text",value:m,onChange:X=>b(X.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),y.jsx("button",{onClick:()=>K(ne.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),y.jsx("button",{onClick:()=>g(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:X=>z(X,ne.id),children:y.jsx(iv,{size:20})}),y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ne.name})]}),y.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[y.jsx("button",{onClick:()=>{g(ne.id),b(ne.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:y.jsx(Rle,{size:18})}),y.jsx("button",{onClick:()=>Q(ne.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:y.jsx(f1,{size:18})})]})]})},ne.id)}),x.length===0&&!o&&y.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},kwe=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=sn(),{showToast:a}=df(),s=es(),[o]=C$();md.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[c,u]=A.useState(""),[f,h]=A.useState(o.get("type")==="piggybank"),[g,m]=A.useState(o.get("categoryId")||""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState("#3B82F6"),[N,O]=A.useState(!1),D=async k=>{if(k.preventDefault(),!c.trim()||N)return;O(!0);const P=sn.getState().envelopes,j=(P.length>0?Math.max(...P.map(K=>K.orderIndex??0)):-1)+1,z=f?new Date(`${n}-01T00:00:00`):new Date,B={name:c,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:z.toISOString(),isActive:!0,orderIndex:j,categoryId:g||void 0};if(f){B.isPiggybank=!0;const K={monthlyContribution:parseFloat(w||"0"),color:T,icon:"piggy-bank"};b&&parseFloat(b)>0&&(K.targetAmount=parseFloat(b)),B.piggybankConfig=K}t(B).then(K=>{if(K){const Q=f?parseFloat(w||"0"):0;e(K,Q).catch(q=>console.error("Failed to create allocation:",q)),setTimeout(()=>{s("/")},50)}}).catch(K=>{console.error("Failed to create envelope:",K),a(K.message||"Failed to create envelope","error"),O(!1)})};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[y.jsx("button",{onClick:()=>s("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:y.jsx(_l,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"New Piggybank":"New Envelope"})]}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[y.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:y.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:f?y.jsx(l0,{size:40}):y.jsx(vle,{size:40})})}),y.jsxs("form",{onSubmit:D,className:"p-6 space-y-6 pb-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),y.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[y.jsx("button",{type:"button",onClick:()=>h(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),y.jsx("button",{type:"button",onClick:()=>h(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${f?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),y.jsxs("select",{id:"category",value:g,onChange:k=>m(k.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:[y.jsx("option",{value:"",children:"Uncategorized"}),r.map(k=>y.jsx("option",{value:k.id,children:k.name},k.id))]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:f?"Piggybank Name":"Envelope Name"}),y.jsx("input",{type:"text",id:"name",value:c,onChange:k=>u(k.target.value),placeholder:f?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),f&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"monthly-contribution",value:w,onChange:k=>S(k.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:f})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),y.jsx("input",{type:"number",id:"target-amount",value:b,onChange:k=>x(k.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),y.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(k=>y.jsx("button",{type:"button",onClick:()=>I(k.value),className:`w-full aspect-square rounded-lg transition-all ${T===k.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:k.value},title:k.label},k.value))})]})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:()=>s("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!c.trim()||f&&!w||N,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${c.trim()&&(!f||w)&&!N?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:N?"Creating...":f?"Create Piggybank":"Create Envelope"})]})]})]})})]})},Pwe=({envelopes:t,transactionAmount:e,onSplitChange:n,initialSelectedEnvelopeId:r})=>{const[i,a]=A.useState([]),[s,o]=A.useState(!1);A.useEffect(()=>{r&&!s&&t.some(I=>I.id===r)&&(a([r]),o(!0))},[r,t,s]);const[c,u]=A.useState({}),[f,h]=A.useState(e),g=T=>{a(I=>I.includes(T)?I.filter(N=>N!==T):[...I,T])},m=(T,I)=>{u(N=>({...N,[T]:I}))},b=md.useRef(i.length);A.useEffect(()=>{if(i.length===1){const T=i[0];u({[T]:e})}else if(i.length>1&&b.current<=1){const T={};i.forEach(I=>{T[I]=0}),u(T)}b.current=i.length},[i.length,i,e]),A.useEffect(()=>{const T=Object.values(c).reduce((I,N)=>I+(N||0),0);h(e-T),n(c)},[c,e,n]),A.useEffect(()=>{const T={...c};Object.keys(T).forEach(I=>{i.includes(I)||delete T[I]}),Object.keys(T).length!==Object.keys(c).length&&u(T)},[i,c]);const x=()=>{a([]),u({})},w=Math.abs(f)<.01&&i.length>0,S=i.length>0&&Math.abs(f)>.01;return y.jsxs("div",{className:"space-y-3",children:[i.length>1&&y.jsxs("div",{className:`p-3 rounded-lg ${S?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":w?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),y.jsxs("span",{className:`font-bold text-lg ${S?"text-red-600 dark:text-red-400":w?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",f.toFixed(2)]})]}),S&&y.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:i.length>1?"Split Across Envelopes":"Select Envelope"}),i.length>0&&y.jsx("button",{type:"button",onClick:x,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(T=>y.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[y.jsx("input",{type:"checkbox",checked:i.includes(T.id),onChange:()=>g(T.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),y.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:T.name}),i.includes(T.id)&&i.length>1&&y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),y.jsx("input",{type:"number",min:"0",step:"0.01",value:c[T.id]||"",onChange:I=>m(T.id,parseFloat(I.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},T.id))})]})};const Dwe="type.googleapis.com/google.protobuf.Int64Value",Owe="type.googleapis.com/google.protobuf.UInt64Value";function nY(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function tw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>tw(e));if(typeof t=="function"||typeof t=="object")return nY(t,e=>tw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function bp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Dwe:case Owe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>bp(e)):typeof t=="function"||typeof t=="object"?nY(t,e=>bp(e)):t}const lN="functions";const h6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vi extends Po{constructor(e,n,r){super(`${lN}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Vi.prototype)}}function Nwe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function nw(t,e){let n=Nwe(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!h6[s])return new Vi("internal","internal");n=h6[s],r=s}const o=a.message;typeof o=="string"&&(r=o),i=a.details,i!==void 0&&(i=bp(i))}}catch{}return n==="ok"?null:new Vi(n,r,i)}class Rwe{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,la(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}const wP="us-central1",Mwe=/^data: (.*?)(?:\n|$)/;function jwe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Vi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class zwe{constructor(e,n,r,i,a=wP,s=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Rwe(e,n,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=wP}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Lwe(t,e,n){const r=pu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(w2(t.emulatorOrigin+"/backends"),g8("Functions",!0))}function Vwe(t,e,n){const r=i=>Fwe(t,e,i,{});return r.stream=(i,a)=>$we(t,e,i,a),r}function rY(t){return t.emulatorOrigin&&pu(t.emulatorOrigin)?"include":void 0}async function Bwe(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:rY(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function iY(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Fwe(t,e,n,r){const i=t._url(e);return Uwe(t,i,n,r)}async function Uwe(t,e,n,r){n=tw(n);const i={data:n},a=await iY(t,r),s=r.timeout||7e4,o=jwe(s),c=await Promise.race([Bwe(e,i,a,t.fetchImpl,t),o.promise,t.cancelAllRequests]);if(o.cancel(),!c)throw new Vi("cancelled","Firebase Functions instance was deleted.");const u=nw(c.status,c.json);if(u)throw u;if(!c.json)throw new Vi("internal","Response is not valid JSON object.");let f=c.json.data;if(typeof f>"u"&&(f=c.json.result),typeof f>"u")throw new Vi("internal","Response is missing data field.");return{data:bp(f)}}function $we(t,e,n,r){const i=t._url(e);return qwe(t,i,n,r||{})}async function qwe(t,e,n,r){n=tw(n);const i={data:n},a=await iY(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:rY(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new Vi("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const m=nw(0,null);return{data:Promise.reject(m),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(m)}}}}}}let o,c;const u=new Promise((g,m)=>{o=g,c=m});r?.signal?.addEventListener("abort",()=>{const g=new Vi("cancelled","Request was cancelled.");c(g)});const f=s.body.getReader(),h=Gwe(f,o,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:m,done:b}=await g.read();return{value:m,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function Gwe(t,e,n,r){const i=(s,o)=>{const c=s.match(Mwe);if(!c)return;const u=c[1];try{const f=JSON.parse(u);if("result"in f){e(bp(f.result));return}if("message"in f){o.enqueue(bp(f.message));return}if("error"in f){const h=nw(0,f);o.error(h),n(h);return}}catch(f){if(f instanceof Vi){o.error(f),n(f);return}}},a=new TextDecoder;return new ReadableStream({start(s){let o="";return c();async function c(){if(r?.aborted){const u=new Vi("cancelled","Request was cancelled");return s.error(u),n(u),Promise.resolve()}try{const{value:u,done:f}=await t.read();if(f){o.trim()&&i(o.trim(),s),s.close();return}if(r?.aborted){const g=new Vi("cancelled","Request was cancelled");s.error(g),n(g),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const g of h)g.trim()&&i(g.trim(),s);return c()}catch(u){const f=u instanceof Vi?u:nw(0,null);s.error(f),n(f)}}},cancel(){return t.cancel()}})}const p6="@firebase/functions",g6="0.13.1";const Hwe="auth-internal",Kwe="app-check-internal",Wwe="messaging-internal";function Ywe(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(Hwe),s=n.getProvider(Wwe),o=n.getProvider(Kwe);return new zwe(i,a,s,o,r)};jd(new eu(lN,e,"PUBLIC").setMultipleInstances(!0)),po(p6,g6,t),po(p6,g6,"esm2020")}function Xwe(t=S8(),e=wP){const r=Zw(qt(t),lN).getImmediate({identifier:e}),i=one("functions");return i&&Qwe(r,...i),r}function Qwe(t,e,n){Lwe(qt(t),e,n)}function Zwe(t,e,n){return Vwe(qt(t),e)}Ywe();function aY(t,e){const n={amount:null,merchant:null,envelope:null,envelopeId:null,description:null,paymentMethodName:null,type:"Expense",confidence:0};if(!t||t.trim().length===0)return n;const r=t.trim();let i=r,a=0;const s=r.match(/\b(?:with|using)\s+(.+)$/i);if(s&&s[1]){const m=s[1].trim();m.length>0&&m.length<60&&(n.paymentMethodName=m,i=i.replace(s[0]," ").trim(),a++)}/\b(income|earned|received|got paid|paycheck|salary|deposit|refund)\b/i.test(r)&&(n.type="Income",a++);const c=[/\$\s?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/,/(\d{1,}(?:,\d{3})*\.\d{1,2})\s*(?:dollars?)?/,/\b(\d{1,}(?:,\d{3})*)\s*(?:dollars?|bucks?)\b/i,/(?:for|of|spent|paid|cost|was)\s+\$?(\d{1,}(?:,\d{3})*(?:\.\d{1,2})?)/i];for(const m of c){const b=r.match(m);if(b){const x=b[1].replace(/,/g,""),w=parseFloat(x);if(!isNaN(w)&&w>0){n.amount=w,i=i.replace(b[0]," ").trim(),a++;break}}}if(n.amount===null){const m=r.match(/\b(\d{1,}(?:\.\d{1,2})?)\b/);if(m){const b=parseFloat(m[1]);!isNaN(b)&&b>0&&b<1e6&&(n.amount=b,i=i.replace(m[0]," ").trim(),a++)}}const u=e.filter(m=>m.isActive!==!1);let f=null;for(const m of u){const b=m.name.toLowerCase(),x=r.toLowerCase();if(x.includes(b)){const T=b.length/x.length;(!f||T>f.score)&&(f={envelope:m,score:Math.max(T,.8)});continue}const w=x.split(/\s+/),S=b.split(/\s+/);for(const T of S)if(!(T.length<3)){for(const I of w)if(!(I.length<3)&&(I.startsWith(T.slice(0,-1))||T.startsWith(I.slice(0,-1)))){const N=Math.min(I.length,T.length)/Math.max(I.length,T.length);N>=.6&&(!f||N>f.score)&&(f={envelope:m,score:N})}}}if(f){n.envelope=f.envelope.name,n.envelopeId=f.envelope.id,a++;const m=new RegExp(f.envelope.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");i=i.replace(m," ").trim()}const h=/\b(at|for|from|to|the|a|an|on|in|my|spent|paid|bought|got|transaction|purchase|payment|income|earned|received)\b/gi;let g=i.replace(h," ").replace(/\s+/g," ").trim();return g=g.replace(/^[^a-zA-Z0-9]+|[^a-zA-Z0-9]+$/g,"").trim(),g.length>0&&g.length<100&&(n.merchant=g,a++),n.description=r,n.confidence=0,n.amount!==null&&(n.confidence+=.35),n.envelopeId!==null&&(n.confidence+=.3),n.merchant!==null&&(n.confidence+=.2),n.paymentMethodName!==null&&(n.confidence+=.1),a>0&&(n.confidence+=.05),n.confidence=Math.min(n.confidence,1),n}async function Jwe(t,e){const n=e.filter(i=>i.isActive!==!1),r=n.map(i=>i.name);try{console.log(" Siri: Calling Cloud Function to parse:",t);const i=Xwe(),o=(await Zwe(i,"parseTransaction")({text:t,userEnvelopes:r})).data;console.log(" Siri: Cloud Function response:",o);let c=null,u=o.envelope;if(o.envelope){const f=n.find(h=>h.name.toLowerCase()===o.envelope.toLowerCase());f&&(c=f.id,u=f.name)}return{amount:o.amount,merchant:o.merchant,envelope:u,envelopeId:c,description:o.description||t,paymentMethodName:o.paymentMethodName||null,type:o.type||"Expense",confidence:.9}}catch(i){return console.warn(" Siri: Cloud Function failed, falling back to regex parser:",i.message),aY(t,e)}}function e_e(t,e){return console.log(" Siri: Parsing locally with regex:",t),aY(t,e)}async function sY(t,e){return typeof navigator<"u"&&!navigator.onLine?(console.log(" Siri: Offline  using local parser"),e_e(t,e)):Jwe(t,e)}function t_e(){const[t,e]=C$(),{envelopes:n}=sn(),[r,i]=A.useState(null),[a,s]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{const f=t.get("query");if(!f||f.trim().length===0){c(null);return}c(f),s(!0),sY(f,n).then(g=>{console.log(" Siri: Parsed result:",g),i(g)}).catch(g=>{console.error(" Siri: Parse failed:",g),i(null)}).finally(()=>{s(!1)});const h=new URLSearchParams(t);h.delete("query"),e(h,{replace:!0})},[t,n]);const u=A.useCallback(()=>{i(null),c(null)},[]);return{parsedData:r,isParsing:a,siriQuery:o,clearParsedData:u}}const oY=({onClose:t,onSaved:e})=>{const n=es(),{envelopes:r,addTransaction:i,currentMonth:a,appSettings:s}=sn(),{parsedData:o,isParsing:c,siriQuery:u,clearParsedData:f}=t_e(),h=()=>{const ce=sessionStorage.getItem("siriParsedData"),he=sessionStorage.getItem("siriQuery");if(ce&&he)try{const ee=JSON.parse(ce);if(console.log(" Siri: Loaded stored data from sessionStorage:",ee),ee.amount!==null&&m(ee.amount.toFixed(2)),ee.merchant&&x(ee.merchant),ee.description&&S(ee.description),ee.type&&R(ee.type==="Income"?"income":"expense"),ee.envelopeId&&Y(ee.envelopeId),ee.paymentMethodName&&s?.paymentSources?.length){const Se=ee.paymentMethodName.toLowerCase(),re=s.paymentSources.find(oe=>{const De=oe.name.toLowerCase();return De===Se||De.includes(Se)||Se.includes(De)});re&&(L(re),Q(!1))}I(!0),O(he),console.log(" Siri: Pre-filled form from sessionStorage"),sessionStorage.removeItem("siriParsedData"),sessionStorage.removeItem("siriQuery")}catch(ee){console.error(" Siri: Failed to parse stored data:",ee)}};A.useEffect(()=>{!o&&!u&&h()},[o,u,s?.paymentSources]),A.useEffect(()=>{const ce=()=>{console.log(" Siri: Received siri-query-ready event"),h()};return window.addEventListener("siri-query-ready",ce),()=>window.removeEventListener("siri-query-ready",ce)},[s?.paymentSources]);const[g,m]=A.useState(""),[b,x]=A.useState(""),[w,S]=A.useState(""),[T,I]=A.useState(!1),[N,O]=A.useState(null),[D,k]=A.useState(()=>{const ce=new Date;return new Date(ce.getTime()-ce.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[P,R]=A.useState("expense"),[j,z]=A.useState({}),[B,L]=A.useState(null),[K,Q]=A.useState(!1),[q,Y]=A.useState(null);A.useEffect(()=>{if(!(!o||T)){if(o.amount!==null&&m(o.amount.toFixed(2)),o.merchant&&x(o.merchant),o.description&&S(o.description),o.type&&R(o.type==="Income"?"income":"expense"),o.envelopeId&&Y(o.envelopeId),o.paymentMethodName&&s?.paymentSources?.length){const ce=o.paymentMethodName.toLowerCase(),he=s.paymentSources.find(ee=>{const Se=ee.name.toLowerCase();return Se===ce||Se.includes(ce)||ce.includes(Se)});he&&(L(he),Q(!1))}I(!0),console.log(" Siri: Pre-filled form with parsed data:",o)}},[o,T,s?.paymentSources]);const J=()=>{if(t){t();return}n("/")},ne=ce=>{L(ce),B&&Q(!0)},W=Object.keys(j).length>0,U=Object.values(j).reduce((ce,he)=>ce+(he||0),0),X=Math.abs(U-parseFloat(g||"0"))<.01,H=g&&parseFloat(g)>0&&W&&X,Z=async ce=>{if(ce.preventDefault(),!H)return;const[he,ee,Se]=D.split("-").map(Number),re=new Date(he,ee-1,Se,12,0,0);console.log(" Selected date:",D),console.log(" Parsed date:",re.toISOString());try{const[oe,De]=D.split("-").map(Number),Pe=`${oe}-${De.toString().padStart(2,"0")}`;if(Pe!==a){const Ue=`This transaction date (${Pe}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Ue))return}const ze=Object.entries(j).filter(([Ue,Ie])=>Ie>0),je=ze.length>1?crypto.randomUUID():void 0;Promise.all(ze.map(([Ue,Ie])=>i({amount:Ie,description:w,merchant:b||void 0,date:re.toISOString(),envelopeId:Ue,type:P==="income"?"Income":"Expense",reconciled:!1,paymentMethod:B||void 0,splitGroupId:je}).catch(Oe=>console.error("Failed to create transaction:",Oe)))).catch(Ue=>console.error("Failed to create transactions:",Ue)),e&&e(),t?t():n("/")}catch(oe){console.error("Error saving transaction:",oe),alert("Failed to save transaction: "+(oe instanceof Error?oe.message:"Unknown error"))}},le=[...r].filter(ce=>ce.isActive!==!1).sort((ce,he)=>{const ee=ce.orderIndex??0,Se=he.orderIndex??0;return ee!==Se?ee-Se:ce.name.localeCompare(he.name)}),de=P==="income"?"text-green-500":"text-red-500";return y.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[y.jsx("button",{onClick:J,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),y.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),y.jsx("button",{onClick:Z,disabled:!H,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),c&&y.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl flex items-center gap-3",children:[y.jsx(_z,{size:18,className:"text-purple-500 animate-pulse"}),y.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Parsing voice input..."})]}),T&&!c&&(u||N)&&y.jsxs("div",{className:"mx-4 mt-3 p-3 bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-xl",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx(_z,{size:14,className:"text-purple-500"}),y.jsx("span",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300",children:"Siri Shortcut"}),o&&y.jsxs("span",{className:"ml-auto text-[10px] text-purple-500 dark:text-purple-400",children:[Math.round(o.confidence*100),"% confidence"]})]}),y.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 italic truncate",children:['"',u||N,'"']}),y.jsx("button",{type:"button",onClick:()=>{f(),I(!1),O(null)},className:"text-[10px] text-purple-500 dark:text-purple-400 underline mt-1",children:"Clear pre-filled data"})]}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:y.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:y.jsxs("div",{className:"flex",children:[y.jsx("button",{type:"button",onClick:()=>R("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${P==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),y.jsx("button",{type:"button",onClick:()=>R("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${P==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),y.jsxs("div",{className:"text-center",children:[y.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),y.jsxs("div",{className:"relative inline-block",children:[y.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${de}`,children:"$"}),y.jsx("input",{type:"text",inputMode:"numeric",value:g,onChange:ce=>{const he=ce.target.value.replace(/\D/g,"");if(!he){m("");return}const Se=(parseInt(he,10)/100).toFixed(2);m(Se)},onKeyDown:ce=>{(ce.key==="e"||ce.key==="E"||ce.key==="+"||ce.key==="-")&&ce.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${de} placeholder-gray-700`})]})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),y.jsx("input",{type:"text",value:b,onChange:ce=>x(ce.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsx(JW,{selectedCard:B,onCardSelect:ne,isUserSelected:K}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),y.jsx("input",{type:"text",value:w,onChange:ce=>S(ce.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[ce,he]=D.split("-").map(Number);return`${ce}-${he.toString().padStart(2,"0")}`!==a?y.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[y.jsx(Vh,{size:14}),y.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),y.jsx("input",{type:"date",value:D,onChange:ce=>k(ce.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:y.jsx(Pwe,{envelopes:le,transactionAmount:parseFloat(g)||0,onSplitChange:z,initialSelectedEnvelopeId:q})})]})})]})},n_e=()=>{const t=es(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:s,appSettings:o}=sn(),{showToast:c}=df(),[u,f]=A.useState(!1),[h,g]=A.useState(""),[m,b]=A.useState("all"),[x,w]=A.useState("All"),[S,T]=A.useState(!1),[I,N]=A.useState("all"),[O,D]=A.useState(!1),[k,P]=A.useState("all"),[R,j]=A.useState(!1),[z,B]=A.useState(()=>{const U=new Date;return U.setMonth(U.getMonth()-1),U.toISOString().split("T")[0]}),[L,K]=A.useState(()=>new Date().toISOString().split("T")[0]),[Q,q]=A.useState(null),Y=A.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:O,currentMonth:s,transactionMonths:e.map(H=>({id:H.id,month:H.month,date:H.date,description:H.description}))});let U=e;return O||(U=e.filter(H=>H.month===s||!H.month),console.log(" After month filter:",{remaining:U.length,currentMonth:s,filteredTransactions:U.map(H=>({id:H.id,description:H.description,month:H.month,matchesCurrentMonth:H.month===s}))})),U.map(H=>{if(!H)return null;let Z=H.date;if(typeof H.date=="number"){const de=(H.date+978307200)*1e3;Z=new Date(de).toISOString()}else if(!H.date||typeof H.date!="string")return null;return{...H,date:Z}}).filter(Boolean).filter(H=>{if(H.description==="Budgeted"||H.description==="Piggybank Contribution")return!1;if(h){const le=h.toLowerCase(),de=n.find(ee=>ee.id===H.envelopeId)?.name.toLowerCase()||"",ce=H.amount.toFixed(2);if(!(H.description.toLowerCase().includes(le)||de.includes(le)||ce.includes(le)))return!1}if(m!=="all"&&H.envelopeId!==m||x!=="All"&&H.type!==x||k!=="all"&&(!H.paymentMethod||H.paymentMethod.id!==k)||!H.date||typeof H.date!="string")return!1;const Z=H.date.split("T")[0];return!(R&&(Z<z||Z>L)||I!=="all"&&new Date(Z).getMonth()!==parseInt(I)||S&&!H.reconciled)}).sort((H,Z)=>new Date(Z.date).getTime()-new Date(H.date).getTime())},[e,n,h,m,x,k,z,L,S,O,s,R]);console.log(" Final filtered transactions:",{count:Y.length,transactions:Y.map(U=>({id:U.id,description:U.description,amount:U.amount,date:U.date,month:U.month,type:U.type}))});const J=A.useMemo(()=>{const U=[],X=new Set;for(const H of Y)if(H.splitGroupId&&!X.has(H.splitGroupId)){X.add(H.splitGroupId);const Z=Y.filter(ce=>ce.splitGroupId===H.splitGroupId),le=Z.reduce((ce,he)=>ce+he.amount,0),de=Z.map(ce=>n.find(he=>he.id===ce.envelopeId)?.name||"Unknown").join(", ");U.push({key:`split-${H.splitGroupId}`,transaction:H,totalAmount:le,envelopeNames:de,splitTransactions:Z,isSplitGroup:!0})}else{if(H.splitGroupId&&X.has(H.splitGroupId))continue;{const Z=n.find(le=>le.id===H.envelopeId)?.name||"Unknown Envelope";U.push({key:H.id,transaction:H,totalAmount:H.amount,envelopeNames:Z,splitTransactions:[H],isSplitGroup:!1})}}return U},[Y,n]),ne=Q?n.find(U=>U.id===Q.envelopeId):null,W=U=>{const X={...U,reconciled:!U.reconciled};r(X)};return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[y.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:y.jsx(_l,{size:24})}),y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),y.jsx("button",{onClick:()=>f(!u),className:`p-2 rounded-full transition-colors ${u?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:y.jsx(ble,{size:20,className:u?"fill-current":""})})]}),y.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[y.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",s]}),y.jsx("button",{onClick:()=>D(!O),className:`text-sm px-3 py-1 rounded-md ${O?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:O?"Current Month Only":"All Time"})]}),y.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:y.jsxs("div",{className:"relative",children:[y.jsx(Fle,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"text",placeholder:"Search transactions...",value:h,onChange:U=>g(U.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),h&&y.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:y.jsx(a_,{size:16})})]})}),y.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${u?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),y.jsxs("select",{value:k,onChange:U=>P(U.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Payment Methods"}),o?.paymentSources?.map(U=>y.jsx("option",{value:U.id,children:U.name},U.id))]})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),y.jsxs("select",{value:m,onChange:U=>b(U.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((U,X)=>U.name.localeCompare(X.name)).map(U=>y.jsx("option",{value:U.id,children:U.name},U.id))]})]}),y.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(U=>y.jsx("button",{onClick:()=>w(U),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${x===U?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:U},U))}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),y.jsxs("select",{value:I,onChange:U=>N(U.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[y.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(U,X)=>X).map(U=>y.jsx("option",{value:U,children:new Date(2022,U).toLocaleString("default",{month:"long"})},U))]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),y.jsx("button",{onClick:()=>j(!R),className:`w-9 h-5 rounded-full transition-colors relative ${R?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${R?"translate-x-4":"translate-x-0"}`})})]})]}),y.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${R?"opacity-100":"opacity-50 pointer-events-none"}`,children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:z,onChange:U=>B(U.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),y.jsx("div",{className:"relative",children:y.jsx("input",{type:"date",value:L,onChange:U=>K(U.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),y.jsx("button",{onClick:()=>T(!S),className:`w-11 h-6 rounded-full transition-colors relative ${S?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),y.jsx("button",{onClick:()=>D(!O),className:`w-11 h-6 rounded-full transition-colors relative ${O?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:y.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${O?"translate-x-5":"translate-x-0"}`})})]})]})}),y.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:J.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):y.jsx(ba,{initial:!1,mode:"popLayout",children:J.map(U=>{const X=U.transaction;return y.jsx(Gn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:y.jsx(Q_,{disabled:X.isAutomatic,onDelete:()=>{const H=U.splitTransactions.map(Z=>({...Z}));for(const Z of U.splitTransactions)Z.id&&i(Z.id);c(U.isSplitGroup?"Split transaction deleted":"Transaction deleted","neutral",()=>{for(const Z of H)a(Z)})},children:y.jsx(tY,{transaction:{...X,amount:U.totalAmount},envelopeName:U.envelopeNames,onReconcile:()=>{for(const H of U.splitTransactions)W(H)},onEdit:()=>{if(X.isAutomatic)return;n.find(Z=>Z.id===X.envelopeId)?q(X):alert("Cannot edit: Envelope deleted.")}})})},U.key)})})})}),y.jsx(eY,{isVisible:!!Q&&!!ne,onClose:()=>q(null),mode:"edit",currentEnvelope:ne||{},initialTransaction:Q})]})};function lY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=lY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Qt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=lY(t))&&(r&&(r+=" "),r+=e);return r}var r_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function cN(t){if(typeof t!="string")return!1;var e=r_e;return e.includes(t)}var i_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],a_e=new Set(i_e);function cY(t){return typeof t!="string"?!1:a_e.has(t)}function uY(t){return typeof t=="string"&&t.startsWith("data-")}function Os(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(cY(n)||uY(n))&&(e[n]=t[n]);return e}function jv(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Os(e)}return typeof t=="object"&&!Array.isArray(t)?Os(t):null}function ma(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(cY(n)||uY(n)||cN(n))&&(e[n]=t[n]);return e}var s_e=["children","width","height","viewBox","className","style","title","desc"];function _P(){return _P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_P.apply(null,arguments)}function o_e(t,e){if(t==null)return{};var n,r,i=l_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function l_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dY=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=o_e(t,s_e),h=a||{width:r,height:i,x:0,y:0},g=Qt("recharts-surface",s);return A.createElement("svg",_P({},ma(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),n)}),c_e=["children","className"];function SP(){return SP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SP.apply(null,arguments)}function u_e(t,e){if(t==null)return{};var n,r,i=d_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var fi=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=u_e(t,c_e),a=Qt("recharts-layer",r);return A.createElement("g",SP({className:a},ma(i),{ref:e}),n)}),f_e=A.createContext(null);function fn(t){return function(){return t}}const fY=Math.cos,rw=Math.sin,js=Math.sqrt,iw=Math.PI,Z_=2*iw,EP=Math.PI,TP=2*EP,ad=1e-6,h_e=TP-ad;function hY(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function p_e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return hY;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class g_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?hY:p_e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>ad)if(!(Math.abs(h*c-u*f)>ad)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-s,b=i-o,x=c*c+u*u,w=m*m+b*b,S=Math.sqrt(x),T=Math.sqrt(g),I=a*Math.tan((EP-Math.acos((x+g-w)/(2*S*T)))/2),N=I/T,O=I/S;Math.abs(N-1)>ad&&this._append`L${e+N*f},${n+N*h}`,this._append`A${a},${a},0,0,${+(h*m>f*b)},${this._x1=e+O*c},${this._y1=n+O*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>ad||Math.abs(this._y1-f)>ad)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%TP+TP),g>h_e?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>ad&&this._append`A${r},${r},0,${+(g>=EP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function uN(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new g_e(e)}function dN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function pY(t){this._context=t}pY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function J_(t){return new pY(t)}function gY(t){return t[0]}function mY(t){return t[1]}function vY(t,e){var n=fn(!0),r=null,i=J_,a=null,s=uN(o);t=typeof t=="function"?t:t===void 0?gY:fn(t),e=typeof e=="function"?e:e===void 0?mY:fn(e);function o(c){var u,f=(c=dN(c)).length,h,g=!1,m;for(r==null&&(a=i(m=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(m)return a=null,m+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:fn(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:fn(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:fn(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function ax(t,e,n){var r=null,i=fn(!0),a=null,s=J_,o=null,c=uN(u);t=typeof t=="function"?t:t===void 0?gY:fn(+t),e=typeof e=="function"?e:fn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?mY:fn(+n);function u(h){var g,m,b,x=(h=dN(h)).length,w,S=!1,T,I=new Array(x),N=new Array(x);for(a==null&&(o=s(T=c())),g=0;g<=x;++g){if(!(g<x&&i(w=h[g],g,h))===S)if(S=!S)m=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=m;--b)o.point(I[b],N[b]);o.lineEnd(),o.areaEnd()}S&&(I[g]=+t(w,g,h),N[g]=+e(w,g,h),o.point(r?+r(w,g,h):I[g],n?+n(w,g,h):N[g]))}if(T)return o=null,T+""||null}function f(){return vY().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:fn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:fn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:fn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:fn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:fn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:fn(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:fn(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class yY{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function m_e(t){return new yY(t,!0)}function v_e(t){return new yY(t,!1)}const fN={draw(t,e){const n=js(e/iw);t.moveTo(n,0),t.arc(0,0,n,0,Z_)}},y_e={draw(t,e){const n=js(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},bY=js(1/3),b_e=bY*2,x_e={draw(t,e){const n=js(e/b_e),r=n*bY;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},w_e={draw(t,e){const n=js(e),r=-n/2;t.rect(r,r,n,n)}},__e=.8908130915292852,xY=rw(iw/10)/rw(7*iw/10),S_e=rw(Z_/10)*xY,E_e=-fY(Z_/10)*xY,T_e={draw(t,e){const n=js(e*__e),r=S_e*n,i=E_e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=Z_*a/5,o=fY(s),c=rw(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},rC=js(3),A_e={draw(t,e){const n=-js(e/(rC*3));t.moveTo(0,n*2),t.lineTo(-rC*n,-n),t.lineTo(rC*n,-n),t.closePath()}},Ma=-.5,ja=js(3)/2,AP=1/js(12),C_e=(AP/2+1)*3,I_e={draw(t,e){const n=js(e/C_e),r=n/2,i=n*AP,a=r,s=n*AP+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(Ma*r-ja*i,ja*r+Ma*i),t.lineTo(Ma*a-ja*s,ja*a+Ma*s),t.lineTo(Ma*o-ja*c,ja*o+Ma*c),t.lineTo(Ma*r+ja*i,Ma*i-ja*r),t.lineTo(Ma*a+ja*s,Ma*s-ja*a),t.lineTo(Ma*o+ja*c,Ma*c-ja*o),t.closePath()}};function k_e(t,e){let n=null,r=uN(i);t=typeof t=="function"?t:fn(t||fN),e=typeof e=="function"?e:fn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:fn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:fn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function aw(){}function sw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function wY(t){this._context=t}wY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function P_e(t){return new wY(t)}function _Y(t){this._context=t}_Y.prototype={areaStart:aw,areaEnd:aw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:sw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function D_e(t){return new _Y(t)}function SY(t){this._context=t}SY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:sw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function O_e(t){return new SY(t)}function EY(t){this._context=t}EY.prototype={areaStart:aw,areaEnd:aw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function N_e(t){return new EY(t)}function m6(t){return t<0?-1:1}function v6(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(m6(a)+m6(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function y6(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function iC(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function ow(t){this._context=t}ow.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iC(this,this._t0,y6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,iC(this,y6(this,n=v6(this,t,e)),n);break;default:iC(this,this._t0,n=v6(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function TY(t){this._context=new AY(t)}(TY.prototype=Object.create(ow.prototype)).point=function(t,e){ow.prototype.point.call(this,e,t)};function AY(t){this._context=t}AY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function R_e(t){return new ow(t)}function M_e(t){return new TY(t)}function CY(t){this._context=t}CY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=b6(t),i=b6(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function b6(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function j_e(t){return new CY(t)}function eS(t,e){this._context=t,this._t=e}eS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function z_e(t){return new eS(t,.5)}function L_e(t){return new eS(t,0)}function V_e(t){return new eS(t,1)}function Qd(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function CP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function B_e(t,e){return t[e]}function F_e(t){const e=[];return e.key=t,e}function U_e(){var t=fn([]),e=CP,n=Qd,r=B_e;function i(a){var s=Array.from(t.apply(this,arguments),F_e),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=dN(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:fn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:fn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?CP:typeof a=="function"?a:fn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Qd,i):n},i}function $_e(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Qd(t,e)}}function q_e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Qd(t,e)}}function G_e(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,m=(h-g)/2,b=0;b<o;++b){var x=t[e[b]],w=x[r][1]||0,S=x[r-1][1]||0;m+=w-S}c+=h,u+=m*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Qd(t,e)}}var aC={},sC={},x6;function H_e(){return x6||(x6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(sC)),sC}var oC={},w6;function IY(){return w6||(w6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(oC)),oC}var lC={},_6;function hN(){return _6||(_6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(lC)),lC}var cC={},uC={},S6;function K_e(){return S6||(S6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(uC)),uC}var E6;function pN(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K_e(),n=hN();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(cC)),cC}var T6;function gN(){return T6||(T6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H_e(),n=IY(),r=hN(),i=pN();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(aC)),aC}var dC,A6;function W_e(){return A6||(A6=1,dC=gN().get),dC}var Y_e=W_e();const Zd=jl(Y_e);var X_e=4;function Gc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X_e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Fn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+Gc(o)+a:i+a},"")}var zr=t=>t===0?0:t>0?1:-1,va=t=>typeof t=="number"&&t!=+t,kl=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,We=t=>(typeof t=="number"||t instanceof Number)&&!va(t),Ya=t=>We(t)||typeof t=="string",Q_e=0,zv=t=>{var e=++Q_e;return"".concat(t||"").concat(e)},ci=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(e)&&typeof e!="string")return r;var a;if(kl(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return va(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},kY=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function br(t,e,n){return We(t)&&We(e)?Gc(t+n*(e-t)):e}function Z_e(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Zd(r,e))===n)}var Vr=t=>t===null||typeof t>"u",L0=t=>Vr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function J_e(t){return t!=null}function V0(){}var eSe=["type","size","sizeType"];function IP(){return IP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IP.apply(null,arguments)}function C6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C6(Object(n),!0).forEach(function(r){tSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tSe(t,e,n){return(e=nSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nSe(t){var e=rSe(t,"string");return typeof e=="symbol"?e:e+""}function rSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iSe(t,e){if(t==null)return{};var n,r,i=aSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function aSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var PY={symbolCircle:fN,symbolCross:y_e,symbolDiamond:x_e,symbolSquare:w_e,symbolStar:T_e,symbolTriangle:A_e,symbolWye:I_e},sSe=Math.PI/180,oSe=t=>{var e="symbol".concat(L0(t));return PY[e]||fN},lSe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*sSe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},cSe=(t,e)=>{PY["symbol".concat(L0(t))]=e},DY=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=iSe(t,eSe),a=I6(I6({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var o=()=>{var g=oSe(s),m=k_e().type(g).size(lSe(n,r,s)),b=m();if(b!==null)return b},{className:c,cx:u,cy:f}=a,h=ma(a);return We(u)&&We(f)&&We(n)?A.createElement("path",IP({},h,{className:Qt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(f,")"),d:o()})):null};DY.registerSymbol=cSe;var OY=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,uSe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{cN(i)&&(r[i]=(a=>n[i](n,a)))}),r},dSe=(t,e,n)=>r=>(t(e,n,r),null),tS=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];cN(i)&&typeof a=="function"&&(r||(r={}),r[i]=dSe(a,e,n))}),r};function k6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k6(Object(n),!0).forEach(function(r){hSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hSe(t,e,n){return(e=pSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pSe(t){var e=gSe(t,"string");return typeof e=="symbol"?e:e+""}function gSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jr(t,e){var n=fSe({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var fC={},hC={},P6;function mSe(){return P6||(P6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(hC)),hC}var pC={},D6;function NY(){return D6||(D6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(pC)),pC}var gC={},mC={},vC={},O6;function vSe(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(vC)),vC}var N6;function mN(){return N6||(N6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vSe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(mC)),mC}var yC={},R6;function ySe(){return R6||(R6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(yC)),yC}var M6;function bSe(){return M6||(M6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mN(),n=ySe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(gC)),gC}var bC={},xC={},j6;function xSe(){return j6||(j6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gN();function n(r){return function(i){return e.get(i,r)}}t.property=n})(xC)),xC}var wC={},_C={},SC={},EC={},z6;function RY(){return z6||(z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(EC)),EC}var TC={},L6;function MY(){return L6||(L6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(TC)),TC}var AC={},V6;function jY(){return V6||(V6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(AC)),AC}var B6;function wSe(){return B6||(B6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RY(),n=MY(),r=jY();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function m(b,x,w,S,T,I){const N=g(b,x,w,S,T,I);return N!==void 0?!!N:a(b,x,m,I)},new Map)}function a(f,h,g,m){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,m);case"function":return Object.keys(h).length>0?a(f,{...h},g,m):r.eq(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.eq(f,h)}}function s(f,h,g,m){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,m);if(h instanceof Map)return o(f,h,g,m);if(h instanceof Set)return u(f,h,g,m);const b=Object.keys(h);if(f==null||n.isPrimitive(f))return b.length===0;if(b.length===0)return!0;if(m?.has(h))return m.get(h)===f;m?.set(h,f);try{for(let x=0;x<b.length;x++){const w=b[x];if(!n.isPrimitive(f)&&!(w in f)||h[w]===void 0&&f[w]!==void 0||h[w]===null&&f[w]!==null||!g(f[w],h[w],w,f,h,m))return!1}return!0}finally{m?.delete(h)}}function o(f,h,g,m){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,x]of h.entries()){const w=f.get(b);if(g(w,x,b,f,h,m)===!1)return!1}return!0}function c(f,h,g,m){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let x=0;x<h.length;x++){const w=h[x];let S=!1;for(let T=0;T<f.length;T++){if(b.has(T))continue;const I=f[T];let N=!1;if(g(I,w,x,f,h,m)&&(N=!0),N){b.add(T),S=!0;break}}if(!S)return!1}return!0}function u(f,h,g,m){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,m):!1}t.isMatchWith=i,t.isSetMatch=u})(SC)),SC}var F6;function zY(){return F6||(F6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wSe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(_C)),_C}var CC={},IC={},kC={},U6;function _Se(){return U6||(U6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(kC)),kC}var PC={},$6;function LY(){return $6||($6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(PC)),PC}var DC={},q6;function VY(){return q6||(q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",m="[object Object]",b="[object Error]",x="[object DataView]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",N="[object BigUint64Array]",O="[object Int8Array]",D="[object Int16Array]",k="[object Int32Array]",P="[object BigInt64Array]",R="[object Float32Array]",j="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=P,t.bigUint64ArrayTag=N,t.booleanTag=i,t.dataViewTag=x,t.dateTag=o,t.errorTag=b,t.float32ArrayTag=R,t.float64ArrayTag=j,t.functionTag=h,t.int16ArrayTag=D,t.int32ArrayTag=k,t.int8ArrayTag=O,t.mapTag=c,t.numberTag=r,t.objectTag=m,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=T,t.uint32ArrayTag=I,t.uint8ArrayTag=w,t.uint8ClampedArrayTag=S})(DC)),DC}var OC={},G6;function SSe(){return G6||(G6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(OC)),OC}var H6;function BY(){return H6||(H6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_Se(),n=LY(),r=VY(),i=MY(),a=SSe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,m=new Map,b=void 0){const x=b?.(f,h,g,m);if(x!==void 0)return x;if(i.isPrimitive(f))return f;if(m.has(f))return m.get(f);if(Array.isArray(f)){const w=new Array(f.length);m.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,m,b);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;m.set(f,w);for(const[S,T]of f)w.set(S,o(T,S,g,m,b));return w}if(f instanceof Set){const w=new Set;m.set(f,w);for(const S of f)w.add(o(S,void 0,g,m,b));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);m.set(f,w);for(let S=0;S<f.length;S++)w[S]=o(f[S],S,g,m,b);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return m.set(f,w),c(w,f,g,m,b),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return m.set(f,w),c(w,f,g,m,b),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof Error){const w=new f.constructor;return m.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,c(w,f,g,m,b),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof Number){const w=new Number(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(f instanceof String){const w=new String(f.valueOf());return m.set(f,w),c(w,f,g,m,b),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return m.set(f,w),c(w,f,g,m,b),w}return f}function c(f,h,g=f,m,b){const x=[...Object.keys(h),...e.getSymbols(h)];for(let w=0;w<x.length;w++){const S=x[w],T=Object.getOwnPropertyDescriptor(f,S);(T==null||T.writable)&&(f[S]=o(h[S],S,g,m,b))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(IC)),IC}var K6;function ESe(){return K6||(K6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BY();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(CC)),CC}var W6;function TSe(){return W6||(W6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zY(),n=ESe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(wC)),wC}var NC={},RC={},MC={},Y6;function ASe(){return Y6||(Y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BY(),n=VY();function r(i,a){return e.cloneDeepWith(i,(s,o,c,u)=>{const f=a?.(s,o,c,u);if(f!==void 0)return f;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i?.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(MC)),MC}var X6;function CSe(){return X6||(X6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ASe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(RC)),RC}var jC={},zC={},Q6;function FY(){return Q6||(Q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(zC)),zC}var LC={},Z6;function ISe(){return Z6||(Z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LY();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(LC)),LC}var J6;function kSe(){return J6||(J6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IY(),n=FY(),r=ISe(),i=pN();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(jC)),jC}var eB;function PSe(){return eB||(eB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zY(),n=hN(),r=CSe(),i=gN(),a=kSe();function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(NC)),NC}var tB;function DSe(){return tB||(tB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NY(),n=xSe(),r=TSe(),i=PSe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(bC)),bC}var nB;function OSe(){return nB||(nB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mSe(),n=NY(),r=bSe(),i=DSe();function a(s,o=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(o)):[]}t.uniqBy=a})(fC)),fC}var VC,rB;function NSe(){return rB||(rB=1,VC=OSe().uniqBy),VC}var RSe=NSe();const iB=jl(RSe);function MSe(t,e,n){return e===!0?iB(t,n):typeof e=="function"?iB(t,e):t}var BC={exports:{}},FC={},UC={exports:{}},$C={};var aB;function jSe(){if(aB)return $C;aB=1;var t=Ip();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var m=g(),b=r({inst:{value:m,getSnapshot:g}}),x=b[0].inst,w=b[1];return a(function(){x.value=m,x.getSnapshot=g,c(x)&&w({inst:x})},[h,m,g]),i(function(){return c(x)&&w({inst:x}),h(function(){c(x)&&w({inst:x})})},[h]),s(m),m}function c(h){var g=h.getSnapshot;h=h.value;try{var m=g();return!n(h,m)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return $C.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,$C}var sB;function zSe(){return sB||(sB=1,UC.exports=jSe()),UC.exports}var oB;function LSe(){if(oB)return FC;oB=1;var t=Ip(),e=zSe();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return FC.useSyncExternalStoreWithSelector=function(u,f,h,g,m){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=o(function(){function S(D){if(!T){if(T=!0,I=D,D=g(D),m!==void 0&&x.hasValue){var k=x.value;if(m(k,D))return N=k}return N=D}if(k=N,r(I,D))return k;var P=g(D);return m!==void 0&&m(k,P)?(I=D,k):(I=D,N=P)}var T=!1,I,N,O=h===void 0?null:h;return[function(){return S(f())},O===null?void 0:function(){return S(O())}]},[f,h,g,m]);var w=i(u,b[0],b[1]);return s(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},FC}var lB;function VSe(){return lB||(lB=1,BC.exports=LSe()),BC.exports}var BSe=VSe(),vN=A.createContext(null),FSe=t=>t,bn=()=>{var t=A.useContext(vN);return t?t.store.dispatch:FSe},Qx=()=>{},USe=()=>Qx,$Se=(t,e)=>t===e;function qe(t){var e=A.useContext(vN);return BSe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:USe,e?e.store.getState:Qx,e?e.store.getState:Qx,e?t:Qx,$Se)}function qSe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function GSe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function HSe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var cB=t=>Array.isArray(t)?t:[t];function KSe(t){const e=Array.isArray(t[0])?t[0]:t;return HSe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function WSe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var YSe=class{constructor(t){this.value=t}deref(){return this.value}},XSe=typeof WeakRef<"u"?WeakRef:YSe,QSe=0,uB=1;function sx(){return{s:QSe,v:void 0,o:null,p:null}}function UY(t,e={}){let n=sx();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let o=n;const{length:c}=arguments;for(let h=0,g=c;h<g;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let b=o.o;b===null&&(o.o=b=new WeakMap);const x=b.get(m);x===void 0?(o=sx(),b.set(m,o)):o=x}else{let b=o.p;b===null&&(o.p=b=new Map);const x=b.get(m);x===void 0?(o=sx(),b.set(m,o)):o=x}}const u=o;let f;if(o.s===uB)f=o.v;else if(f=t.apply(null,arguments),a++,r){const h=i?.deref?.()??i;h!=null&&r(h,f)&&(f=h,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new XSe(f):f}return u.s=uB,u.v=f,f}return s.clearCache=()=>{n=sx(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function ZSe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),qSe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:m=UY,argsMemoizeOptions:b=[]}=f,x=cB(g),w=cB(b),S=KSe(i),T=h(function(){return a++,u.apply(null,arguments)},...x),I=m(function(){s++;const O=WSe(S,arguments);return o=T.apply(null,O),o},...w);return Object.assign(I,{resultFunc:u,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var ve=ZSe(UY),JSe=Object.assign((t,e=ve)=>{GSe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>JSe}),qC={},GC={},HC={},dB;function eEe(){return dB||(dB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(HC)),HC}var KC={},WC={},fB;function $Y(){return fB||(fB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(WC)),WC}var hB;function tEe(){return hB||(hB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$Y(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(KC)),KC}var pB;function nEe(){return pB||(pB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eEe(),n=tEe(),r=pN();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const u=(m,b)=>{let x=m;for(let w=0;w<b.length&&x!=null;++w)x=x[b[w]];return x},f=(m,b)=>b==null||m==null?b:typeof m=="object"&&"key"in m?Object.hasOwn(b,m.key)?b[m.key]:u(b,m.path):typeof m=="function"?m(b):Array.isArray(m)?u(b,m):typeof b=="object"?b[m]:b,h=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||n.isKey(m)?m:{key:m,path:r.toPath(m)}));return a.map(m=>({original:m,criteria:h.map(b=>f(b,m))})).slice().sort((m,b)=>{for(let x=0;x<h.length;x++){const w=e.compareValues(m.criteria[x],b.criteria[x],o[x]);if(w!==0)return w}return 0}).map(m=>m.original)}t.orderBy=i})(GC)),GC}var YC={},gB;function rEe(){return gB||(gB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(YC)),YC}var XC={},mB;function qY(){return mB||(mB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FY(),n=mN(),r=RY(),i=jY();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.eq(c[o],s):!1}t.isIterateeCall=a})(XC)),XC}var vB;function iEe(){return vB||(vB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nEe(),n=rEe(),r=qY();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(qC)),qC}var QC,yB;function aEe(){return yB||(yB=1,QC=iEe().sortBy),QC}var sEe=aEe();const nS=jl(sEe);var GY=t=>t.legend.settings,oEe=t=>t.legend.size,lEe=t=>t.legend.payload;ve([lEe,GY],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?nS(r,n):r});var ox=1;function cEe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>ox||Math.abs(s.left-e.left)>ox||Math.abs(s.top-e.top)>ox||Math.abs(s.width-e.width)>ox)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Wr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var uEe=typeof Symbol=="function"&&Symbol.observable||"@@observable",bB=uEe,ZC=()=>Math.random().toString(36).substring(7).split("").join("."),dEe={INIT:`@@redux/INIT${ZC()}`,REPLACE:`@@redux/REPLACE${ZC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ZC()}`},lw=dEe;function yN(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function HY(t,e,n){if(typeof t!="function")throw new Error(Wr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Wr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Wr(1));return n(HY)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((w,S)=>{s.set(S,w)}))}function f(){if(c)throw new Error(Wr(3));return i}function h(w){if(typeof w!="function")throw new Error(Wr(4));if(c)throw new Error(Wr(5));let S=!0;u();const T=o++;return s.set(T,w),function(){if(S){if(c)throw new Error(Wr(6));S=!1,u(),s.delete(T),a=null}}}function g(w){if(!yN(w))throw new Error(Wr(7));if(typeof w.type>"u")throw new Error(Wr(8));if(typeof w.type!="string")throw new Error(Wr(17));if(c)throw new Error(Wr(9));try{c=!0,i=r(i,w)}finally{c=!1}return(a=s).forEach(T=>{T()}),w}function m(w){if(typeof w!="function")throw new Error(Wr(10));r=w,g({type:lw.REPLACE})}function b(){const w=h;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Wr(11));function T(){const N=S;N.next&&N.next(f())}return T(),{unsubscribe:w(T)}},[bB](){return this}}}return g({type:lw.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:m,[bB]:b}}function fEe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:lw.INIT})>"u")throw new Error(Wr(12));if(typeof n(void 0,{type:lw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Wr(13))})}function KY(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{fEe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],m=s[h],b=g(m,o);if(typeof b>"u")throw o&&o.type,new Error(Wr(14));u[h]=b,c=c||b!==m}return c=c||r.length!==Object.keys(s).length,c?u:s}}function cw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function hEe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Wr(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=cw(...o)(i.dispatch),{...i,dispatch:a}}}function WY(t){return yN(t)&&"type"in t&&typeof t.type=="string"}var YY=Symbol.for("immer-nothing"),xB=Symbol.for("immer-draftable"),Ai=Symbol.for("immer-state");function xs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var da=Object,xp=da.getPrototypeOf,uw="constructor",rS="prototype",kP="configurable",dw="enumerable",Zx="writable",Lv="value",Pl=t=>!!t&&!!t[Ai];function Ns(t){return t?XY(t)||aS(t)||!!t[xB]||!!t[uw]?.[xB]||sS(t)||oS(t):!1}var pEe=da[rS][uw].toString(),wB=new WeakMap;function XY(t){if(!t||!bN(t))return!1;const e=xp(t);if(e===null||e===da[rS])return!0;const n=da.hasOwnProperty.call(e,uw)&&e[uw];if(n===Object)return!0;if(!wh(n))return!1;let r=wB.get(n);return r===void 0&&(r=Function.toString.call(n),wB.set(n,r)),r===pEe}function iS(t,e,n=!0){B0(t)===0?(n?Reflect.ownKeys(t):da.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function B0(t){const e=t[Ai];return e?e.type_:aS(t)?1:sS(t)?2:oS(t)?3:0}var _B=(t,e,n=B0(t))=>n===2?t.has(e):da[rS].hasOwnProperty.call(t,e),PP=(t,e,n=B0(t))=>n===2?t.get(e):t[e],fw=(t,e,n,r=B0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function gEe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var aS=Array.isArray,sS=t=>t instanceof Map,oS=t=>t instanceof Set,bN=t=>typeof t=="object",wh=t=>typeof t=="function",JC=t=>typeof t=="boolean";function mEe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var rl=t=>t.copy_||t.base_,xN=t=>t.modified_?t.copy_:t.base_;function DP(t,e){if(sS(t))return new Map(t);if(oS(t))return new Set(t);if(aS(t))return Array[rS].slice.call(t);const n=XY(t);if(e===!0||e==="class_only"&&!n){const r=da.getOwnPropertyDescriptors(t);delete r[Ai];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[Zx]===!1&&(o[Zx]=!0,o[kP]=!0),(o.get||o.set)&&(r[s]={[kP]:!0,[Zx]:!0,[dw]:o[dw],[Lv]:t[s]})}return da.create(xp(t),r)}else{const r=xp(t);if(r!==null&&n)return{...t};const i=da.create(r);return da.assign(i,t)}}function wN(t,e=!1){return lS(t)||Pl(t)||!Ns(t)||(B0(t)>1&&da.defineProperties(t,{set:lx,add:lx,clear:lx,delete:lx}),da.freeze(t),e&&iS(t,(n,r)=>{wN(r,!0)},!1)),t}function vEe(){xs(2)}var lx={[Lv]:vEe};function lS(t){return t===null||!bN(t)?!0:da.isFrozen(t)}var hw="MapSet",OP="Patches",SB="ArrayMethods",QY={};function Jd(t){const e=QY[t];return e||xs(0,t),e}var EB=t=>!!QY[t],Vv,ZY=()=>Vv,yEe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:EB(hw)?Jd(hw):void 0,arrayMethodsPlugin_:EB(SB)?Jd(SB):void 0});function TB(t,e){e&&(t.patchPlugin_=Jd(OP),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function NP(t){RP(t),t.drafts_.forEach(bEe),t.drafts_=null}function RP(t){t===Vv&&(Vv=t.parent_)}var AB=t=>Vv=yEe(Vv,t);function bEe(t){const e=t[Ai];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function CB(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Ai].modified_&&(NP(e),xs(4)),Ns(t)&&(t=IB(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Ai].base_,t,e)}else t=IB(e,n);return xEe(e,t,!0),NP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==YY?t:void 0}function IB(t,e){if(lS(e))return e;const n=e[Ai];if(!n)return pw(e,t.handledSet_,t);if(!cS(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);tX(n,t)}return n.copy_}function xEe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&wN(e,n)}function JY(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var cS=(t,e)=>t.scope_===e,wEe=[];function eX(t,e,n,r){const i=rl(t),a=t.type_;if(r!==void 0&&PP(i,r,a)===e){fw(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;iS(i,(c,u)=>{if(Pl(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??wEe;for(const o of s)fw(i,o,n,a)}function _Ee(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!cS(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const s=xN(a);eX(t,a.draft_??a,s,n),tX(a,i)})}function tX(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}JY(t)}}function SEe(t,e,n){const{scope_:r}=t;if(Pl(n)){const i=n[Ai];cS(i,r)&&i.callbacks_.push(function(){Jx(t);const s=xN(i);eX(t,n,s,e)})}else Ns(n)&&t.callbacks_.push(function(){const a=rl(t);t.type_===3?a.has(n)&&pw(n,r.handledSet_,r):PP(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&pw(PP(t.copy_,e,t.type_),r.handledSet_,r)})}function pw(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Pl(t)||e.has(t)||!Ns(t)||lS(t)||(e.add(t),iS(t,(r,i)=>{if(Pl(i)){const a=i[Ai];if(cS(a,n)){const s=xN(a);fw(t,r,s,t.type_),JY(a)}}else Ns(i)&&pw(i,e,n)})),t}function EEe(t,e){const n=aS(t),r={type_:n?1:0,scope_:e?e.scope_:ZY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=gw;n&&(i=[r],a=Bv);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var gw={get(t,e){if(e===Ai)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=rl(t);if(!_B(i,e,t.type_))return TEe(t,i,e);const a=i[e];if(t.finalized_||!Ns(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&mEe(e))return a;if(a===eI(t.base_,e)){Jx(t);const s=t.type_===1?+e:e,o=jP(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in rl(t)},ownKeys(t){return Reflect.ownKeys(rl(t))},set(t,e,n){const r=nX(rl(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=eI(rl(t),e),a=i?.[Ai];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(gEe(n,i)&&(n!==void 0||_B(t.base_,e,t.type_)))return!0;Jx(t),MP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),SEe(t,e,n)),!0},deleteProperty(t,e){return Jx(t),eI(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),MP(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=rl(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Zx]:!0,[kP]:t.type_!==1||e!=="length",[dw]:r[dw],[Lv]:n[e]}},defineProperty(){xs(11)},getPrototypeOf(t){return xp(t.base_)},setPrototypeOf(){xs(12)}},Bv={};for(let t in gw){let e=gw[t];Bv[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Bv.deleteProperty=function(t,e){return Bv.set.call(this,t,e,void 0)};Bv.set=function(t,e,n){return gw.set.call(this,t[0],e,n,t[0])};function eI(t,e){const n=t[Ai];return(n?rl(n):t)[e]}function TEe(t,e,n){const r=nX(e,n);return r?Lv in r?r[Lv]:r.get?.call(t.draft_):void 0}function nX(t,e){if(!(e in t))return;let n=xp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=xp(n)}}function MP(t){t.modified_||(t.modified_=!0,t.parent_&&MP(t.parent_))}function Jx(t){t.copy_||(t.assigned_=new Map,t.copy_=DP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var AEe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(wh(n)&&!wh(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}wh(r)||xs(6),i!==void 0&&!wh(i)&&xs(7);let a;if(Ns(n)){const s=AB(this),o=jP(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?NP(s):RP(s)}return TB(s,i),CB(a,s)}else if(!n||!bN(n)){if(a=r(n),a===void 0&&(a=n),a===YY&&(a=void 0),this.autoFreeze_&&wN(a,!0),i){const s=[],o=[];Jd(OP).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else xs(1,n)},this.produceWithPatches=(n,r)=>{if(wh(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},JC(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),JC(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),JC(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ns(e)||xs(8),Pl(e)&&(e=Cs(e));const n=AB(this),r=jP(n,e,void 0);return r[Ai].isManual_=!0,RP(n),r}finishDraft(e,n){const r=e&&e[Ai];(!r||!r.isManual_)&&xs(9);const{scope_:i}=r;return TB(i,n),CB(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Jd(OP).applyPatches_;return Pl(e)?i(e,n):this.produce(e,a=>i(a,n))}};function jP(t,e,n,r){const[i,a]=sS(e)?Jd(hw).proxyMap_(e,n):oS(e)?Jd(hw).proxySet_(e,n):EEe(e,n);return(n?.scope_??ZY()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?_Ee(n,a,r):a.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function Cs(t){return Pl(t)||xs(10,t),rX(t)}function rX(t){if(!Ns(t)||lS(t))return t;const e=t[Ai];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=DP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=DP(t,!0);return iS(n,(i,a)=>{fw(n,i,rX(a))},r),e&&(e.finalized_=!1),n}var CEe=new AEe,iX=CEe.produce;function aX(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var IEe=aX(),kEe=aX,PEe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?cw:cw.apply(null,arguments)};function Xa(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ha(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>WY(r)&&r.type===t,n}var sX=class Pm extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Pm.prototype)}static get[Symbol.species](){return Pm}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Pm(...e[0].concat(this)):new Pm(...e.concat(this))}};function kB(t){return Ns(t)?iX(t,()=>{}):t}function cx(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function DEe(t){return typeof t=="boolean"}var OEe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new sX;return n&&(DEe(n)?s.push(IEe):s.push(kEe(n.extraArgument))),s},oX="RTK_autoBatch",Tn=()=>t=>({payload:t,meta:{[oX]:!0}}),PB=t=>e=>{setTimeout(e,t)},lX=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:PB(10):t.type==="callback"?t.queueNotification:PB(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){try{return i=!f?.meta?.[oX],a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},NEe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new sX(t);return r&&i.push(lX(typeof r=="object"?r:void 0)),i};function REe(t){const e=OEe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(yN(n))o=KY(n);else throw new Error(ha(1));let c;typeof r=="function"?c=r(e):c=e();let u=cw;i&&(u=PEe({trace:!1,...typeof i=="object"&&i}));const f=hEe(...c),h=NEe(f);let g=typeof s=="function"?s(h):h();const m=u(...g);return HY(o,a,m)}function cX(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(ha(28));if(o in e)throw new Error(ha(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function MEe(t){return typeof t=="function"}function jEe(t,e){let[n,r,i]=cX(e),a;if(MEe(t))a=()=>kB(t());else{const o=kB(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Pl(f)){const m=h(f,c);return m===void 0?f:m}else{if(Ns(f))return iX(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var zEe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",LEe=(t=21)=>{let e="",n=t;for(;n--;)e+=zEe[Math.random()*64|0];return e},VEe=Symbol.for("rtk-slice-createasyncthunk");function BEe(t,e){return`${t}/${e}`}function FEe({creators:t}={}){const e=t?.asyncThunk?.[VEe];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(ha(11));const s=(typeof r.reducers=="function"?r.reducers($Ee()):r.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(I,N){const O=typeof I=="string"?I:I.type;if(!O)throw new Error(ha(12));if(O in c.sliceCaseReducersByType)throw new Error(ha(13));return c.sliceCaseReducersByType[O]=N,u},addMatcher(I,N){return c.sliceMatchers.push({matcher:I,reducer:N}),u},exposeAction(I,N){return c.actionCreators[I]=N,u},exposeCaseReducer(I,N){return c.sliceCaseReducersByName[I]=N,u}};o.forEach(I=>{const N=s[I],O={reducerName:I,type:BEe(i,I),createNotation:typeof r.reducers=="function"};GEe(N)?KEe(O,N,u,e):qEe(O,N,u)});function f(){const[I={},N=[],O=void 0]=typeof r.extraReducers=="function"?cX(r.extraReducers):[r.extraReducers],D={...I,...c.sliceCaseReducersByType};return jEe(r.initialState,k=>{for(let P in D)k.addCase(P,D[P]);for(let P of c.sliceMatchers)k.addMatcher(P.matcher,P.reducer);for(let P of N)k.addMatcher(P.matcher,P.reducer);O&&k.addDefaultCase(O)})}const h=I=>I,g=new Map,m=new WeakMap;let b;function x(I,N){return b||(b=f()),b(I,N)}function w(){return b||(b=f()),b.getInitialState()}function S(I,N=!1){function O(k){let P=k[I];return typeof P>"u"&&N&&(P=cx(m,O,w)),P}function D(k=h){const P=cx(g,N,()=>new WeakMap);return cx(P,k,()=>{const R={};for(const[j,z]of Object.entries(r.selectors??{}))R[j]=UEe(z,k,()=>cx(m,k,w),N);return R})}return{reducerPath:I,getSelectors:D,get selectors(){return D(O)},selectSlice:O}}const T={name:i,reducer:x,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...S(a),injectInto(I,{reducerPath:N,...O}={}){const D=N??a;return I.inject({reducerPath:D,reducer:x},O),{...T,...S(D,!0)}}};return T}}function UEe(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var Hi=FEe();function $Ee(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function qEe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!HEe(r))throw new Error(ha(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Xa(t,s):Xa(t))}function GEe(t){return t._reducerDefinitionType==="asyncThunk"}function HEe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function KEe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ha(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||ux,pending:o||ux,rejected:c||ux,settled:u||ux})}function ux(){}var WEe="task",uX="listener",dX="completed",_N="cancelled",YEe=`task-${_N}`,XEe=`task-${dX}`,zP=`${uX}-${_N}`,QEe=`${uX}-${dX}`,uS=class{constructor(t){this.code=t,this.message=`${WEe} ${_N} (reason: ${t})`}name="TaskAbortError";message},SN=(t,e)=>{if(typeof t!="function")throw new TypeError(ha(32))},mw=()=>{},fX=(t,e=mw)=>(t.catch(e),t),hX=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Nd=t=>{if(t.aborted)throw new uS(t.reason)};function pX(t,e){let n=mw;return new Promise((r,i)=>{const a=()=>i(new uS(t.reason));if(t.aborted){a();return}n=hX(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=mw})}var ZEe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof uS?"cancelled":"rejected",error:n}}finally{e?.()}},vw=t=>e=>fX(pX(t,e).then(n=>(Nd(t),n))),gX=t=>{const e=vw(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:$h}=Object,DB={},dS="listenerMiddleware",JEe=(t,e)=>{const n=r=>hX(t,()=>r.abort(t.reason));return(r,i)=>{SN(r);const a=new AbortController;n(a);const s=ZEe(async()=>{Nd(t),Nd(a.signal);const o=await r({pause:vw(a.signal),delay:gX(a.signal),signal:a.signal});return Nd(a.signal),o},()=>a.abort(XEe));return i?.autoJoin&&e.push(s.catch(mw)),{result:vw(t)(s),cancel(){a.abort(YEe)}}}},eTe=(t,e)=>{const n=async(r,i)=>{Nd(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await pX(e,Promise.race(o));return Nd(e),c}finally{a()}};return(r,i)=>fX(n(r,i))},mX=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Xa(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ha(21));return SN(a),{predicate:i,type:e,effect:a}},vX=$h(t=>{const{type:e,predicate:n,effect:r}=mX(t);return{id:LEe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ha(22))}}},{withTypes:()=>vX}),OB=(t,e)=>{const{type:n,effect:r,predicate:i}=mX(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},LP=t=>{t.pending.forEach(e=>{e.abort(zP)})},tTe=(t,e)=>()=>{for(const n of e.keys())LP(n);t.clear()},NB=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},yX=$h(Xa(`${dS}/add`),{withTypes:()=>yX}),nTe=Xa(`${dS}/removeAll`),bX=$h(Xa(`${dS}/remove`),{withTypes:()=>bX}),rTe=(...t)=>{console.error(`${dS}/error`,...t)},F0=(t={})=>{const e=new Map,n=new Map,r=m=>{const b=n.get(m)??0;n.set(m,b+1)},i=m=>{const b=n.get(m)??1;b===1?n.delete(m):n.set(m,b-1)},{extra:a,onError:s=rTe}=t;SN(s);const o=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),b=>{m.unsubscribe(),b?.cancelActive&&LP(m)}),c=m=>{const b=OB(e,m)??vX(m);return o(b)};$h(c,{withTypes:()=>c});const u=m=>{const b=OB(e,m);return b&&(b.unsubscribe(),m.cancelActive&&LP(b)),!!b};$h(u,{withTypes:()=>u});const f=async(m,b,x,w)=>{const S=new AbortController,T=eTe(c,S.signal),I=[];try{m.pending.add(S),r(m),await Promise.resolve(m.effect(b,$h({},x,{getOriginalState:w,condition:(N,O)=>T(N,O).then(Boolean),take:T,delay:gX(S.signal),pause:vw(S.signal),extra:a,signal:S.signal,fork:JEe(S.signal,I),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,O,D)=>{N!==S&&(N.abort(zP),D.delete(N))})},cancel:()=>{S.abort(zP),m.pending.delete(S)},throwIfCancelled:()=>{Nd(S.signal)}})))}catch(N){N instanceof uS||NB(s,N,{raisedBy:"effect"})}finally{await Promise.all(I),S.abort(QEe),i(m),m.pending.delete(S)}},h=tTe(e,n);return{middleware:m=>b=>x=>{if(!WY(x))return b(x);if(yX.match(x))return c(x.payload);if(nTe.match(x)){h();return}if(bX.match(x))return u(x.payload);let w=m.getState();const S=()=>{if(w===DB)throw new Error(ha(23));return w};let T;try{if(T=b(x),e.size>0){const I=m.getState(),N=Array.from(e.values());for(const O of N){let D=!1;try{D=O.predicate(x,I,w)}catch(k){D=!1,NB(s,k,{raisedBy:"predicate"})}D&&f(O,x,m,S)}}}finally{w=DB}return T},startListening:c,stopListening:u,clearListeners:h}};function ha(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var iTe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xX=Hi({name:"chartLayout",initialState:iTe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:aTe,setLayout:sTe,setChartSize:oTe,setScale:lTe}=xX.actions,cTe=xX.reducer;function wX(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function un(t){return Number.isFinite(t)}function Io(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function RB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RB(Object(n),!0).forEach(function(r){uTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uTe(t,e,n){return(e=dTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dTe(t){var e=fTe(t,"string");return typeof e=="symbol"?e:e+""}function fTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yn(t,e,n){return Vr(t)||Vr(e)?n:Ya(e)?Zd(t,e,n):typeof e=="function"?e(t):n}var hTe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&We(t[a]))return Rh(Rh({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&We(t[s]))return Rh(Rh({},t),{},{[s]:t[s]+(i||0)})}return t},pf=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",_X=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},SX=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:m}=t;if(!s)return null;var b=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,x=i==="category"&&s.bandwidth?s.bandwidth()/b:0;if(x=m==="angleAxis"&&a&&a.length>=2?zr(a[0]-a[1])*2*x:x,h||g){var w=(h||g||[]).map((S,T)=>{var I=r?r.indexOf(S):S;return{coordinate:s(I)+x,value:S,offset:x,index:T}});return w.filter(S=>!va(S.coordinate))}return c&&u?u.map((S,T)=>({coordinate:s(S)+x,value:S,index:T,offset:x})):s.ticks&&f!=null?s.ticks(f).map((S,T)=>({coordinate:s(S)+x,value:S,offset:x,index:T})):s.domain().map((S,T)=>({coordinate:s(S)+x,value:r?r[S]:S,index:T,offset:x}))},MB=1e-4,pTe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-MB,a=Math.max(r[0],r[1])+MB,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}},gTe=(t,e)=>{if(!e||e.length!==2||!We(e[0])||!We(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!We(t[0])||t[0]<n)&&(i[0]=n),(!We(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},mTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c?.[i];if(u!=null){var f=u[1],h=u[0],g=va(f)?h:f;g>=0?(u[0]=a,u[1]=a+g,a=f):(u[0]=s,u[1]=s+g,s=f)}}}},vTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o?.[i];if(c!=null){var u=va(c[1])?c[0]:c[1];u>=0?(c[0]=a,c[1]=a+u,a=c[1]):(c[0]=0,c[1]=0)}}}},yTe={sign:mTe,expand:$_e,none:Qd,silhouette:q_e,wiggle:G_e,positive:vTe},bTe=(t,e,n)=>{var r,i=(r=yTe[n])!==null&&r!==void 0?r:Qd,a=U_e().keys(e).value((o,c)=>Number(yn(o,c,0))).order(CP).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=yn(t[f],e[c],0);Array.isArray(h)&&h.length===2&&We(h[0])&&We(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function xTe(t){return t==null?void 0:String(t)}var jB=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var o=yn(a,e.dataKey,e.scale.domain()[s]);return Vr(o)?null:e.scale(o)-i/2+r},wTe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},_Te=t=>{var e=t.flat(2).filter(We);return[Math.min(...e),Math.max(...e)]},STe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],ETe=(t,e,n)=>{if(t!=null)return STe(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=wX(u,e,n),h=_Te(f);return!un(h[0])||!un(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},zB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yw=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=nS(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min((c?.coordinate||0)-(u?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function VB(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Rh(Rh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function fS(t,e){if(t)return String(t);if(typeof e=="string")return e}var TTe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},ATe=(t,e)=>e==="centric"?t.angle:t.radius,Bl=t=>t.layout.width,Fl=t=>t.layout.height,CTe=t=>t.layout.scale,EX=t=>t.layout.margin,hS=ve(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),pS=ve(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),TX="data-recharts-item-index",AX="data-recharts-item-id",U0=60;function BB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(n),!0).forEach(function(r){ITe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ITe(t,e,n){return(e=kTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kTe(t){var e=PTe(t,"string");return typeof e=="symbol"?e:e+""}function PTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DTe=t=>t.brush.height;function OTe(t){var e=pS(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:U0;return n+i}return n},0)}function NTe(t){var e=pS(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:U0;return n+i}return n},0)}function RTe(t){var e=hS(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function MTe(t){var e=hS(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ar=ve([Bl,Fl,EX,DTe,OTe,NTe,RTe,MTe,GY,oEe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=dx(dx({},h),f),m=g.bottom;g.bottom+=r,g=hTe(g,c,u);var b=t-g.left-g.right,x=e-g.top-g.bottom;return dx(dx({brushBottom:m},g),{},{width:Math.max(b,0),height:Math.max(x,0)})}),jTe=ve(Ar,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),EN=ve(Bl,Fl,(t,e)=>({x:0,y:0,width:t,height:e})),zTe=A.createContext(null),Ci=()=>A.useContext(zTe)!=null,gS=t=>t.brush,mS=ve([gS,Ar,EX],(t,e,n)=>({height:t.height,x:We(t.x)?t.x:e.left,y:We(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:We(t.width)?t.width:e.width})),tI={},nI={},rI={},FB;function LTe(){return FB||(FB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),x()};let g=null;const m=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},x=()=>{b(),s=void 0,o=null},w=()=>{f()},S=function(...T){if(i?.aborted)return;s=this,o=T;const I=g==null;m(),c&&I&&f()};return S.schedule=m,S.cancel=x,S.flush=w,i?.addEventListener("abort",x,{once:!0}),S}t.debounce=e})(rI)),rI}var UB;function VTe(){return UB||(UB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LTe();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...x){f=r.apply(this,x),h=null},i,{edges:u}),m=function(...x){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,x),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,x),f)},b=()=>(g.flush(),f);return m.cancel=g.cancel,m.flush=b,m}t.debounce=n})(nI)),nI}var $B;function BTe(){return $B||($B=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VTe();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(tI)),tI}var iI,qB;function FTe(){return qB||(qB=1,iI=BTe().throttle),iI}var UTe=FTe();const $Te=jl(UTe);var bw=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},CX=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,o=kl(r)?t:Number(r),c=kl(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},qTe={width:0,height:0,overflow:"visible"},GTe={width:0,overflowX:"visible"},HTe={height:0,overflowY:"visible"},KTe={},WTe=t=>{var{width:e,height:n}=t,r=kl(e),i=kl(n);return r&&i?qTe:r?GTe:i?HTe:KTe};function YTe(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function VP(){return VP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VP.apply(null,arguments)}function GB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GB(Object(n),!0).forEach(function(r){XTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XTe(t,e,n){return(e=QTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QTe(t){var e=ZTe(t,"string");return typeof e=="symbol"?e:e+""}function ZTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IX=A.createContext({width:-1,height:-1});function JTe(t){return Io(t.width)&&Io(t.height)}function kX(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return JTe(i)?A.createElement(IX.Provider,{value:i},e):null}var TN=()=>A.useContext(IX),eAe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:f=0,id:h,className:g,onResize:m,style:b={}}=t,x=A.useRef(null),w=A.useRef();w.current=m,A.useImperativeHandle(e,()=>x.current);var[S,T]=A.useState({containerWidth:r.width,containerHeight:r.height}),I=A.useCallback((P,R)=>{T(j=>{var z=Math.round(P),B=Math.round(R);return j.containerWidth===z&&j.containerHeight===B?j:{containerWidth:z,containerHeight:B}})},[]);A.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return V0;var P=B=>{var L,{width:K,height:Q}=B[0].contentRect;I(K,Q),(L=w.current)===null||L===void 0||L.call(w,K,Q)};f>0&&(P=$Te(P,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(P),{width:j,height:z}=x.current.getBoundingClientRect();return I(j,z),R.observe(x.current),()=>{R.disconnect()}},[I,f]);var{containerWidth:N,containerHeight:O}=S;bw(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:D,calculatedHeight:k}=CX(N,O,{width:i,height:a,aspect:n,maxHeight:c});return bw(D!=null&&D>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,k,i,a,s,o,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Qt("recharts-responsive-container",g),style:HB(HB({},b),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:x},A.createElement("div",{style:WTe({width:i,height:a})},A.createElement(kX,{width:D,height:k},u)))}),vS=A.forwardRef((t,e)=>{var n=TN();if(Io(n.width)&&Io(n.height))return t.children;var{width:r,height:i}=YTe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=CX(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return We(a)&&We(s)?A.createElement(kX,{width:a,height:s},t.children):A.createElement(eAe,VP({},t,{width:r,height:i,ref:e}))});function PX(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var $0=()=>{var t,e=Ci(),n=qe(jTe),r=qe(mS),i=(t=qe(gS))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},tAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},DX=()=>{var t;return(t=qe(Ar))!==null&&t!==void 0?t:tAe},OX=()=>qe(Bl),NX=()=>qe(Fl),Lt=t=>t.layout.layoutType,q0=()=>qe(Lt),nAe=()=>{var t=q0();return t!==void 0},yS=t=>{var e=bn(),n=Ci(),{width:r,height:i}=t,a=TN(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),A.useEffect(()=>{!n&&Io(s)&&Io(o)&&e(oTe({width:s,height:o}))},[e,n,s,o]),null},RX=Symbol.for("immer-nothing"),KB=Symbol.for("immer-draftable"),ya=Symbol.for("immer-state");function ws(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Fv=Object.getPrototypeOf;function wp(t){return!!t&&!!t[ya]}function ef(t){return t?MX(t)||Array.isArray(t)||!!t[KB]||!!t.constructor?.[KB]||G0(t)||xS(t):!1}var rAe=Object.prototype.constructor.toString(),WB=new WeakMap;function MX(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=WB.get(n);return r===void 0&&(r=Function.toString.call(n),WB.set(n,r)),r===rAe}function xw(t,e,n=!0){bS(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function bS(t){const e=t[ya];return e?e.type_:Array.isArray(t)?1:G0(t)?2:xS(t)?3:0}function BP(t,e){return bS(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jX(t,e,n){const r=bS(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function iAe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function G0(t){return t instanceof Map}function xS(t){return t instanceof Set}function sd(t){return t.copy_||t.base_}function FP(t,e){if(G0(t))return new Map(t);if(xS(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=MX(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ya];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(Fv(t),r)}else{const r=Fv(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function AN(t,e=!1){return wS(t)||wp(t)||!ef(t)||(bS(t)>1&&Object.defineProperties(t,{set:fx,add:fx,clear:fx,delete:fx}),Object.freeze(t),e&&Object.values(t).forEach(n=>AN(n,!0))),t}function aAe(){ws(2)}var fx={value:aAe};function wS(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var sAe={};function tf(t){const e=sAe[t];return e||ws(0,t),e}var Uv;function zX(){return Uv}function oAe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function YB(t,e){e&&(tf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function UP(t){$P(t),t.drafts_.forEach(lAe),t.drafts_=null}function $P(t){t===Uv&&(Uv=t.parent_)}function XB(t){return Uv=oAe(Uv,t)}function lAe(t){const e=t[ya];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function QB(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ya].modified_&&(UP(e),ws(4)),ef(t)&&(t=ww(e,t),e.parent_||_w(e,t)),e.patches_&&tf("Patches").generateReplacementPatches_(n[ya].base_,t,e.patches_,e.inversePatches_)):t=ww(e,n,[]),UP(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==RX?t:void 0}function ww(t,e,n){if(wS(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[ya];if(!i)return xw(e,(a,s)=>ZB(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return _w(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),xw(s,(c,u)=>ZB(t,i,a,c,u,n,o),r),_w(t,a,!1),n&&t.patches_&&tf("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function ZB(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=wS(i);if(!(o&&!s)){if(wp(i)){const c=a&&e&&e.type_!==3&&!BP(e.assigned_,r)?a.concat(r):void 0,u=ww(t,i,c);if(jX(n,r,u),wp(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(ef(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;ww(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(G0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&_w(t,i)}}}function _w(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&AN(e,n)}function cAe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:zX(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=CN;n&&(i=[r],a=$v);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var CN={get(t,e){if(e===ya)return t;const n=sd(t);if(!BP(n,e))return uAe(t,n,e);const r=n[e];return t.finalized_||!ef(r)?r:r===aI(t.base_,e)?(sI(t),t.copy_[e]=GP(r,t)):r},has(t,e){return e in sd(t)},ownKeys(t){return Reflect.ownKeys(sd(t))},set(t,e,n){const r=LX(sd(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=aI(sd(t),e),a=i?.[ya];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(iAe(n,i)&&(n!==void 0||BP(t.base_,e)))return!0;sI(t),qP(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return aI(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,sI(t),qP(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=sd(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ws(11)},getPrototypeOf(t){return Fv(t.base_)},setPrototypeOf(){ws(12)}},$v={};xw(CN,(t,e)=>{$v[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});$v.deleteProperty=function(t,e){return $v.set.call(this,t,e,void 0)};$v.set=function(t,e,n){return CN.set.call(this,t[0],e,n,t[0])};function aI(t,e){const n=t[ya];return(n?sd(n):t)[e]}function uAe(t,e,n){const r=LX(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function LX(t,e){if(!(e in t))return;let n=Fv(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Fv(n)}}function qP(t){t.modified_||(t.modified_=!0,t.parent_&&qP(t.parent_))}function sI(t){t.copy_||(t.copy_=FP(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var dAe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&ws(6),r!==void 0&&typeof r!="function"&&ws(7);let i;if(ef(e)){const a=XB(this),s=GP(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?UP(a):$P(a)}return YB(a,r),QB(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===RX&&(i=void 0),this.autoFreeze_&&AN(i,!0),r){const a=[],s=[];tf("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else ws(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ef(t)||ws(8),wp(t)&&(t=fAe(t));const e=XB(this),n=GP(t,void 0);return n[ya].isManual_=!0,$P(e),n}finishDraft(t,e){const n=t&&t[ya];(!n||!n.isManual_)&&ws(9);const{scope_:r}=n;return YB(r,e),QB(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=tf("Patches").applyPatches_;return wp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function GP(t,e){const n=G0(t)?tf("MapSet").proxyMap_(t,e):xS(t)?tf("MapSet").proxySet_(t,e):cAe(t,e);return(e?e.scope_:zX()).drafts_.push(n),n}function fAe(t){return wp(t)||ws(10,t),VX(t)}function VX(t){if(!ef(t)||wS(t))return t;const e=t[ya];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=FP(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=FP(t,!0);return xw(n,(i,a)=>{jX(n,i,VX(a))},r),e&&(e.finalized_=!1),n}var hAe=new dAe;hAe.produce;var pAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},BX=Hi({name:"legend",initialState:pAe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Tn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Cs(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Tn()},removeLegendPayload:{reducer(t,e){var n=Cs(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Tn()}}}),{setLegendSize:Xze,setLegendSettings:Qze,addLegendPayload:FX,replaceLegendPayload:UX,removeLegendPayload:$X}=BX.actions,gAe=BX.reducer;function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HP.apply(null,arguments)}function JB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(n),!0).forEach(function(r){mAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mAe(t,e,n){return(e=vAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vAe(t){var e=yAe(t,"string");return typeof e=="symbol"?e:e+""}function yAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bAe(t){return Array.isArray(t)&&Ya(t[0])&&Ya(t[1])?t.join(" ~ "):t}var xAe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=!1}=t,m=()=>{if(a&&a.length){var O={padding:0,margin:0},D=(o?nS(a,o):a).map((k,P)=>{if(k.type==="none")return null;var R=k.formatter||s||bAe,{value:j,name:z}=k,B=j,L=z;if(R){var K=R(j,z,k,P,a);if(Array.isArray(K))[B,L]=K;else if(K!=null)B=K;else return null}var Q=oI({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:Q},Ya(L)?A.createElement("span",{className:"recharts-tooltip-item-name"},L):null,Ya(L)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},B),A.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:O},D)}return null},b=oI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=oI({margin:0},i),w=!Vr(f),S=w?f:"",T=Qt("recharts-default-tooltip",c),I=Qt("recharts-tooltip-label",u);w&&h&&a!==void 0&&a!==null&&(S=h(f,a));var N=g?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",HP({className:T,style:b},N),A.createElement("p",{className:I,style:x},A.isValidElement(S)?S:"".concat(S)),m())},um="recharts-tooltip-wrapper",wAe={visibility:"hidden"};function _Ae(t){var{coordinate:e,translateX:n,translateY:r}=t;return Qt(um,{["".concat(um,"-right")]:We(n)&&e&&We(e.x)&&n>=e.x,["".concat(um,"-left")]:We(n)&&e&&We(e.x)&&n<e.x,["".concat(um,"-bottom")]:We(r)&&e&&We(e.y)&&r>=e.y,["".concat(um,"-top")]:We(r)&&e&&We(e.y)&&r<e.y})}function e9(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&We(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var m=f,b=g;return m<b?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var x=h+o,w=g+u;return x>w?Math.max(f,g):Math.max(h,g)}function SAe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function EAe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:c}=t,u,f,h;return s.height>0&&s.width>0&&n?(f=e9({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=e9({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=SAe({translateX:f,translateY:h,useTranslate3d:o})):u=wAe,{cssProperties:u,cssClasses:_Ae({translateX:f,translateY:h,coordinate:n})}}function t9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t9(Object(n),!0).forEach(function(r){KP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KP(t,e,n){return(e=TAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TAe(t){var e=AAe(t,"string");return typeof e=="symbol"?e:e+""}function AAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class CAe extends A.PureComponent{constructor(){super(...arguments),KP(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),KP(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:m,wrapperStyle:b,lastBoundingBox:x,innerRef:w,hasPortalFromProps:S}=this.props,{cssClasses:T,cssProperties:I}=EAe({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:f,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:g,viewBox:m}),N=S?{}:hx(hx({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),O=hx(hx({},N),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:O,ref:w},a)}}var qX=()=>{var t;return(t=qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function WP(){return WP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WP.apply(null,arguments)}function n9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(n),!0).forEach(function(r){IAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IAe(t,e,n){return(e=kAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kAe(t){var e=PAe(t,"string");return typeof e=="symbol"?e:e+""}function PAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i9={curveBasisClosed:D_e,curveBasisOpen:O_e,curveBasis:P_e,curveBumpX:m_e,curveBumpY:v_e,curveLinearClosed:N_e,curveLinear:J_,curveMonotoneX:R_e,curveMonotoneY:M_e,curveNatural:j_e,curveStep:z_e,curveStepAfter:V_e,curveStepBefore:L_e},Sw=t=>un(t.x)&&un(t.y),a9=t=>t.base!=null&&Sw(t.base)&&Sw(t),dm=t=>t.x,fm=t=>t.y,DAe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(L0(t));return(n==="curveMonotone"||n==="curveBump")&&e?i9["".concat(n).concat(e==="vertical"?"Y":"X")]:i9[n]||J_},OAe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=DAe(e,i),o=a?n.filter(Sw):n,c;if(Array.isArray(r)){var u=n.map((m,b)=>r9(r9({},m),{},{base:r[b]}));i==="vertical"?c=ax().y(fm).x1(dm).x0(m=>m.base.x):c=ax().x(dm).y1(fm).y0(m=>m.base.y);var f=c.defined(a9).curve(s),h=a?u.filter(a9):u;return f(h)}i==="vertical"&&We(r)?c=ax().y(fm).x1(dm).x0(r):We(r)?c=ax().x(dm).y1(fm).y0(r):c=vY().x(dm).y(fm);var g=c.defined(Sw).curve(s);return g(o)},IN=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=q0();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?OAe(s):r;return A.createElement("path",WP({},Os(t),uSe(t),{className:Qt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},NAe=["x","y","top","left","width","height","className"];function YP(){return YP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YP.apply(null,arguments)}function s9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RAe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s9(Object(n),!0).forEach(function(r){MAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MAe(t,e,n){return(e=jAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jAe(t){var e=zAe(t,"string");return typeof e=="symbol"?e:e+""}function zAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LAe(t,e){if(t==null)return{};var n,r,i=VAe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BAe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),FAe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=LAe(t,NAe),u=RAe({x:e,y:n,top:r,left:i,width:a,height:s},c);return!We(e)||!We(n)||!We(a)||!We(s)||!We(r)||!We(i)?null:A.createElement("path",YP({},ma(u),{className:Qt("recharts-cross",o),d:BAe(e,n,a,s,r,i)}))};function UAe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function o9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o9(Object(n),!0).forEach(function(r){$Ae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ae(t,e,n){return(e=qAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qAe(t){var e=GAe(t,"string");return typeof e=="symbol"?e:e+""}function GAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HAe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),GX=(t,e,n)=>t.map(r=>"".concat(HAe(r)," ").concat(e,"ms ").concat(n)).join(","),KAe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),qv=(t,e)=>Object.keys(e).reduce((n,r)=>l9(l9({},n),{},{[r]:t(r,e[r])}),{});function c9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c9(Object(n),!0).forEach(function(r){WAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WAe(t,e,n){return(e=YAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YAe(t){var e=XAe(t,"string");return typeof e=="symbol"?e:e+""}function XAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ew=(t,e,n)=>t+(e-t)*n,XP=t=>{var{from:e,to:n}=t;return e!==n},HX=(t,e,n)=>{var r=qv((i,a)=>{if(XP(a)){var[s,o]=t(a.from,a.to,a.velocity);return xr(xr({},a),{},{from:s,velocity:o})}return a},e);return n<1?qv((i,a)=>XP(a)&&r[i]!=null?xr(xr({},a),{},{velocity:Ew(a.velocity,r[i].velocity,n),from:Ew(a.from,r[i].from,n)}):a,e):HX(t,r,n-1)};function QAe(t,e,n,r,i,a){var s,o=r.reduce((g,m)=>xr(xr({},g),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),c=()=>qv((g,m)=>m.from,o),u=()=>!Object.values(o).filter(XP).length,f=null,h=g=>{s||(s=g);var m=g-s,b=m/n.dt;o=HX(n,o,b),i(xr(xr(xr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function ZAe(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var m=t[g],b=e[g];return m==null||b==null?h:xr(xr({},h),{},{[g]:[m,b]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,m=qv((x,w)=>Ew(...w,n(g)),c);if(a(xr(xr(xr({},t),e),m)),g<1)o=s.setTimeout(f);else{var b=qv((x,w)=>Ew(...w,n(1)),c);a(xr(xr(xr({},t),e),b))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const JAe=(t,e,n,r,i,a)=>{var s=KAe(t,e);return n==null?()=>(i(xr(xr({},t),e)),()=>{}):n.isStepper===!0?QAe(t,e,n,s,i,a):ZAe(t,e,n,r,s,i,a)};var Tw=1e-4,KX=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],WX=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),u9=(t,e)=>n=>{var r=KX(t,e);return WX(r,n)},eCe=(t,e)=>n=>{var r=KX(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return WX(i,n)},tCe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},nCe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=tCe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},rCe=(t,e,n,r)=>{var i=u9(t,n),a=u9(e,r),s=eCe(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var m=i(h)-f,b=s(h);if(Math.abs(m-f)<Tw||b<Tw)return a(h);h=o(h-m/b)}return a(h)};return c.isStepper=!1,c},d9=function(){return rCe(...nCe(...arguments))},iCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<Tw&&Math.abs(h)<Tw?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},aCe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return d9(t);case"spring":return iCe();default:if(t.split("(")[0]==="cubic-bezier")return d9(t)}return typeof t=="function"?t:null};function sCe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class oCe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function lCe(){return sCe(new oCe)}var cCe=A.createContext(lCe);function uCe(t,e){var n=A.useContext(cCe);return A.useMemo(()=>e??n(t),[t,e,n])}var dCe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_S={isSsr:dCe()},fCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},f9={t:0},lI={t:1};function SS(t){var e=Jr(t,fCe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!_S.isSsr:n,h=uCe(e.animationId,e.animationManager),[g,m]=A.useState(f?f9:lI),b=A.useRef(null);return A.useEffect(()=>{f||m(lI)},[f]),A.useEffect(()=>{if(!f||!r)return V0;var x=JAe(f9,lI,aCe(a),i,m,h.getTimeoutController()),w=()=>{b.current=x()};return h.start([c,s,w,i,o]),()=>{h.stop(),b.current&&b.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function ES(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(zv(e)),r=A.useRef(t);return r.current!==t&&(n.current=zv(e),r.current=t),n.current}var hCe=["radius"],pCe=["radius"],h9,p9,g9,m9,v9,y9,b9,x9,w9,_9;function S9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function E9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S9(Object(n),!0).forEach(function(r){gCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gCe(t,e,n){return(e=mCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mCe(t){var e=vCe(t,"string");return typeof e=="symbol"?e:e+""}function vCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aw(){return Aw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Aw.apply(null,arguments)}function T9(t,e){if(t==null)return{};var n,r,i=yCe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function no(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var A9=(t,e,n,r,i)=>{var a=Gc(n),s=Gc(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&i instanceof Array){for(var g=[0,0,0,0],m=0,b=4;m<b;m++)g[m]=i[m]>o?o:i[m];h=Fn(h9||(h9=no(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=Fn(p9||(p9=no(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=Fn(g9||(g9=no(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=Fn(m9||(m9=no(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=Fn(v9||(v9=no(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=Fn(y9||(y9=no(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=Fn(b9||(b9=no(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=Fn(x9||(x9=no(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);h=Fn(w9||(w9=no(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*x,x,x,f,t+u*x,e,t+n-u*x,e,x,x,f,t+n,e+c*x,t+n,e+r-c*x,x,x,f,t+n-u*x,e+r,t+u*x,e+r,x,x,f,t,e+r-c*x)}else h=Fn(_9||(_9=no(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},C9={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},YX=t=>{var e=Jr(t,C9),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Y=n.current.getTotalLength();Y&&i(Y)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:m,isAnimationActive:b,isUpdateAnimationActive:x}=e,w=A.useRef(o),S=A.useRef(c),T=A.useRef(a),I=A.useRef(s),N=A.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),O=ES(N,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var D=Qt("recharts-rectangle",f);if(!x){var k=ma(e),{radius:P}=k,R=T9(k,hCe);return A.createElement("path",Aw({},R,{x:Gc(a),y:Gc(s),width:Gc(o),height:Gc(c),radius:typeof u=="number"?u:void 0,className:D,d:A9(a,s,o,c,u)}))}var j=w.current,z=S.current,B=T.current,L=I.current,K="0px ".concat(r===-1?1:r,"px"),Q="".concat(r,"px 0px"),q=GX(["strokeDasharray"],g,typeof h=="string"?h:C9.animationEasing);return A.createElement(SS,{animationId:O,key:O,canBegin:r>0,duration:g,easing:h,isActive:x,begin:m},Y=>{var J=br(j,o,Y),ne=br(z,c,Y),W=br(B,a,Y),U=br(L,s,Y);n.current&&(w.current=J,S.current=ne,T.current=W,I.current=U);var X;b?Y>0?X={transition:q,strokeDasharray:Q}:X={strokeDasharray:K}:X={strokeDasharray:Q};var H=ma(e),{radius:Z}=H,le=T9(H,pCe);return A.createElement("path",Aw({},le,{radius:typeof u=="number"?u:void 0,className:D,d:A9(W,U,J,ne,u),ref:n,style:E9(E9({},X),e.style)}))})};function I9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I9(Object(n),!0).forEach(function(r){bCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bCe(t,e,n){return(e=xCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xCe(t){var e=wCe(t,"string");return typeof e=="symbol"?e:e+""}function wCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cw=Math.PI/180,_Ce=t=>t*180/Math.PI,hr=(t,e,n,r)=>({x:t+Math.cos(-Cw*r)*n,y:e+Math.sin(-Cw*r)*n}),XX=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},SCe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},ECe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=SCe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:_Ce(c),angleInRadian:c}},TCe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},ACe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},CCe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=ECe({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=TCe(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?k9(k9({},e),{},{radius:i,angle:ACe(f,e)}):null};function QX(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=hr(e,n,r,i),o=hr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var P9,D9,O9,N9,R9,M9,j9;function QP(){return QP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QP.apply(null,arguments)}function _d(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var ICe=(t,e)=>{var n=zr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},px=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/Cw,h=c?i:i+a*f,g=hr(e,n,u,h),m=hr(e,n,r,h),b=c?i-a*f:i,x=hr(e,n,u*Math.cos(f*Cw),b);return{center:g,circleTangency:m,lineTangency:x,theta:f}},ZX=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=ICe(a,s),c=a+o,u=hr(e,n,i,a),f=hr(e,n,i,c),h=Fn(P9||(P9=_d(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=hr(e,n,r,a),m=hr(e,n,r,c);h+=Fn(D9||(D9=_d(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=Fn(O9||(O9=_d(["L ",","," Z"])),e,n);return h},kCe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=zr(u-c),{circleTangency:h,lineTangency:g,theta:m}=px({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:b,lineTangency:x,theta:w}=px({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),S=o?Math.abs(c-u):Math.abs(c-u)-m-w;if(S<0)return s?Fn(N9||(N9=_d(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):ZX({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var T=Fn(R9||(R9=_d(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(S>180),+(f<0),b.x,b.y,a,a,+(f<0),x.x,x.y);if(r>0){var{circleTangency:I,lineTangency:N,theta:O}=px({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:D,lineTangency:k,theta:P}=px({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),R=o?Math.abs(c-u):Math.abs(c-u)-O-P;if(R<0&&a===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Fn(M9||(M9=_d(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,a,a,+(f<0),D.x,D.y,r,r,+(R>180),+(f>0),I.x,I.y,a,a,+(f<0),N.x,N.y)}else T+=Fn(j9||(j9=_d(["L",",","Z"])),e,n);return T},PCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JX=t=>{var e=Jr(t,PCe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=Qt("recharts-sector",h),m=a-i,b=ci(s,m,0,!0),x;return b>0&&Math.abs(u-f)<360?x=kCe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,m/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):x=ZX({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),A.createElement("path",QP({},ma(e),{className:g,d:x}))};function DCe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(OY(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=hr(r,i,a,o),u=hr(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return QX(e)}}var cI={},uI={},dI={},z9;function OCe(){return z9||(z9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$Y();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(dI)),dI}var L9;function NCe(){return L9||(L9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OCe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(uI)),uI}var V9;function RCe(){return V9||(V9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qY(),n=NCe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(cI)),cI}var fI,B9;function MCe(){return B9||(B9=1,fI=RCe().range),fI}var jCe=MCe();const eQ=jl(jCe);function Zc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zCe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kN(t){let e,n,r;t.length!==2?(e=Zc,n=(o,c)=>Zc(t(o),c),r=(o,c)=>t(o)-c):(e=t===Zc||t===zCe?t:LCe,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function LCe(){return 0}function tQ(t){return t===null?NaN:+t}function*VCe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const BCe=kN(Zc),H0=BCe.right;kN(tQ).center;class F9 extends Map{constructor(e,n=$Ce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(U9(this,e))}has(e){return super.has(U9(this,e))}set(e,n){return super.set(FCe(this,e),n)}delete(e){return super.delete(UCe(this,e))}}function U9({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function FCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function UCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function $Ce(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qCe(t=Zc){if(t===Zc)return nQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function nQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const GCe=Math.sqrt(50),HCe=Math.sqrt(10),KCe=Math.sqrt(2);function Iw(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=GCe?10:a>=HCe?5:a>=KCe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?Iw(t,e,n*2):[o,c,u]}function ZP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Iw(e,t,n):Iw(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function JP(t,e,n){return e=+e,t=+t,n=+n,Iw(t,e,n)[2]}function e2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?JP(e,t,n):JP(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function $9(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function q9(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function rQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?nQ:qCe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*h/c+g)),b=Math.min(r,Math.floor(e+(c-u)*h/c+g));rQ(t,e,m,b,i)}const a=t[e];let s=n,o=r;for(hm(t,n,e),i(t[r],a)>0&&hm(t,n,r);s<o;){for(hm(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?hm(t,n,o):(++o,hm(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function hm(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function WCe(t,e,n){if(t=Float64Array.from(VCe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return q9(t);if(e>=1)return $9(t);var r,i=(r-1)*e,a=Math.floor(i),s=$9(rQ(t,a).subarray(0,a+1)),o=q9(t.subarray(a+1));return s+(o-s)*(i-a)}}function YCe(t,e,n=tQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function XCe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function ts(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ul(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const t2=Symbol("implicit");function PN(){var t=new F9,e=[],n=[],r=t2;function i(a){let s=t.get(a);if(s===void 0){if(r!==t2)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new F9;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return PN(e,n).unknown(r)},ts.apply(i,arguments),i}function DN(){var t=PN().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,m=i<r,b=m?i:r,x=m?r:i;a=(x-b)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),b+=(x-b-a*(g-c))*f,s=a*(1-c),o&&(b=Math.round(b),s=Math.round(s));var w=XCe(g).map(function(S){return b+a*S});return n(m?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return DN(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},ts.apply(h(),arguments)}function iQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return iQ(e())},t}function QCe(){return iQ(DN.apply(null,arguments).paddingInner(1))}function ON(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function aQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function K0(){}var Gv=.7,kw=1/Gv,qh="\\s*([+-]?\\d+)\\s*",Hv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",So="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZCe=/^#([0-9a-f]{3,8})$/,JCe=new RegExp(`^rgb\\(${qh},${qh},${qh}\\)$`),eIe=new RegExp(`^rgb\\(${So},${So},${So}\\)$`),tIe=new RegExp(`^rgba\\(${qh},${qh},${qh},${Hv}\\)$`),nIe=new RegExp(`^rgba\\(${So},${So},${So},${Hv}\\)$`),rIe=new RegExp(`^hsl\\(${Hv},${So},${So}\\)$`),iIe=new RegExp(`^hsla\\(${Hv},${So},${So},${Hv}\\)$`),G9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ON(K0,Kv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:H9,formatHex:H9,formatHex8:aIe,formatHsl:sIe,formatRgb:K9,toString:K9});function H9(){return this.rgb().formatHex()}function aIe(){return this.rgb().formatHex8()}function sIe(){return sQ(this).formatHsl()}function K9(){return this.rgb().formatRgb()}function Kv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ZCe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?W9(e):n===3?new Bi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?gx(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?gx(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=JCe.exec(t))?new Bi(e[1],e[2],e[3],1):(e=eIe.exec(t))?new Bi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=tIe.exec(t))?gx(e[1],e[2],e[3],e[4]):(e=nIe.exec(t))?gx(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rIe.exec(t))?Q9(e[1],e[2]/100,e[3]/100,1):(e=iIe.exec(t))?Q9(e[1],e[2]/100,e[3]/100,e[4]):G9.hasOwnProperty(t)?W9(G9[t]):t==="transparent"?new Bi(NaN,NaN,NaN,0):null}function W9(t){return new Bi(t>>16&255,t>>8&255,t&255,1)}function gx(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bi(t,e,n,r)}function oIe(t){return t instanceof K0||(t=Kv(t)),t?(t=t.rgb(),new Bi(t.r,t.g,t.b,t.opacity)):new Bi}function n2(t,e,n,r){return arguments.length===1?oIe(t):new Bi(t,e,n,r??1)}function Bi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ON(Bi,n2,aQ(K0,{brighter(t){return t=t==null?kw:Math.pow(kw,t),new Bi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gv:Math.pow(Gv,t),new Bi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bi(Rd(this.r),Rd(this.g),Rd(this.b),Pw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y9,formatHex:Y9,formatHex8:lIe,formatRgb:X9,toString:X9}));function Y9(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}`}function lIe(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}${Sd((isNaN(this.opacity)?1:this.opacity)*255)}`}function X9(){const t=Pw(this.opacity);return`${t===1?"rgb(":"rgba("}${Rd(this.r)}, ${Rd(this.g)}, ${Rd(this.b)}${t===1?")":`, ${t})`}`}function Pw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sd(t){return t=Rd(t),(t<16?"0":"")+t.toString(16)}function Q9(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _s(t,e,n,r)}function sQ(t){if(t instanceof _s)return new _s(t.h,t.s,t.l,t.opacity);if(t instanceof K0||(t=Kv(t)),!t)return new _s;if(t instanceof _s)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new _s(s,o,c,t.opacity)}function cIe(t,e,n,r){return arguments.length===1?sQ(t):new _s(t,e,n,r??1)}function _s(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ON(_s,cIe,aQ(K0,{brighter(t){return t=t==null?kw:Math.pow(kw,t),new _s(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gv:Math.pow(Gv,t),new _s(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bi(hI(t>=240?t-240:t+120,i,r),hI(t,i,r),hI(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new _s(Z9(this.h),mx(this.s),mx(this.l),Pw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Pw(this.opacity);return`${t===1?"hsl(":"hsla("}${Z9(this.h)}, ${mx(this.s)*100}%, ${mx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Z9(t){return t=(t||0)%360,t<0?t+360:t}function mx(t){return Math.max(0,Math.min(1,t||0))}function hI(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const NN=t=>()=>t;function uIe(t,e){return function(n){return t+n*e}}function dIe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function fIe(t){return(t=+t)==1?oQ:function(e,n){return n-e?dIe(e,n,t):NN(isNaN(e)?n:e)}}function oQ(t,e){var n=e-t;return n?uIe(t,n):NN(isNaN(t)?e:t)}const J9=(function t(e){var n=fIe(e);function r(i,a){var s=n((i=n2(i)).r,(a=n2(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=oQ(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function hIe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function pIe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gIe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Hp(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function mIe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Dw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vIe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Hp(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var r2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pI=new RegExp(r2.source,"g");function yIe(t){return function(){return t}}function bIe(t){return function(e){return t(e)+""}}function xIe(t,e){var n=r2.lastIndex=pI.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=r2.exec(t))&&(i=pI.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Dw(r,i)})),n=pI.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?bIe(c[0].x):yIe(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function Hp(t,e){var n=typeof e,r;return e==null||n==="boolean"?NN(e):(n==="number"?Dw:n==="string"?(r=Kv(e))?(e=r,J9):xIe:e instanceof Kv?J9:e instanceof Date?mIe:pIe(e)?hIe:Array.isArray(e)?gIe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vIe:Dw)(t,e)}function RN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function wIe(t,e){e===void 0&&(e=t,t=Hp);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function _Ie(t){return function(){return t}}function Ow(t){return+t}var eF=[0,1];function Si(t){return t}function i2(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:_Ie(isNaN(e)?NaN:.5)}function SIe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function EIe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=i2(i,r),a=n(s,a)):(r=i2(r,i),a=n(a,s)),function(o){return a(r(o))}}function TIe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=i2(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=H0(t,o,1,r)-1;return a[c](i[c](o))}}function W0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function TS(){var t=eF,e=eF,n=Hp,r,i,a,s=Si,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==Si&&(s=SIe(t[0],t[g-1])),o=g>2?TIe:EIe,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),Dw)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,Ow),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=RN,f()},h.clamp=function(g){return arguments.length?(s=g?!0:Si,f()):s!==Si},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,m){return r=g,i=m,f()}}function MN(){return TS()(Si,Si)}function AIe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Nw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function _p(t){return t=Nw(Math.abs(t)),t?t[1]:NaN}function CIe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function IIe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var kIe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wv(t){if(!(e=kIe.exec(t)))throw new Error("invalid format: "+t);var e;return new jN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Wv.prototype=jN.prototype;function jN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}jN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PIe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var lQ;function DIe(t,e){var n=Nw(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(lQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Nw(t,Math.max(0,e+a-1))[0]}function tF(t,e){var n=Nw(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const nF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:AIe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>tF(t*100,e),r:tF,s:DIe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function rF(t){return t}var iF=Array.prototype.map,aF=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function OIe(t){var e=t.grouping===void 0||t.thousands===void 0?rF:CIe(iF.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?rF:IIe(iF.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Wv(h);var g=h.fill,m=h.align,b=h.sign,x=h.symbol,w=h.zero,S=h.width,T=h.comma,I=h.precision,N=h.trim,O=h.type;O==="n"?(T=!0,O="g"):nF[O]||(I===void 0&&(I=12),N=!0,O="g"),(w||g==="0"&&m==="=")&&(w=!0,g="0",m="=");var D=x==="$"?n:x==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",k=x==="$"?r:/[%p]/.test(O)?s:"",P=nF[O],R=/[defgprs%]/.test(O);I=I===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function j(z){var B=D,L=k,K,Q,q;if(O==="c")L=P(z)+L,z="";else{z=+z;var Y=z<0||1/z<0;if(z=isNaN(z)?c:P(Math.abs(z),I),N&&(z=PIe(z)),Y&&+z==0&&b!=="+"&&(Y=!1),B=(Y?b==="("?b:o:b==="-"||b==="("?"":b)+B,L=(O==="s"?aF[8+lQ/3]:"")+L+(Y&&b==="("?")":""),R){for(K=-1,Q=z.length;++K<Q;)if(q=z.charCodeAt(K),48>q||q>57){L=(q===46?i+z.slice(K+1):z.slice(K))+L,z=z.slice(0,K);break}}}T&&!w&&(z=e(z,1/0));var J=B.length+z.length+L.length,ne=J<S?new Array(S-J+1).join(g):"";switch(T&&w&&(z=e(ne+z,ne.length?S-L.length:1/0),ne=""),m){case"<":z=B+z+L+ne;break;case"=":z=B+ne+z+L;break;case"^":z=ne.slice(0,J=ne.length>>1)+B+z+L+ne.slice(J);break;default:z=ne+B+z+L;break}return a(z)}return j.toString=function(){return h+""},j}function f(h,g){var m=u((h=Wv(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(_p(g)/3)))*3,x=Math.pow(10,-b),w=aF[8+b/3];return function(S){return m(x*S)+w}}return{format:u,formatPrefix:f}}var vx,zN,cQ;NIe({thousands:",",grouping:[3],currency:["$",""]});function NIe(t){return vx=OIe(t),zN=vx.format,cQ=vx.formatPrefix,vx}function RIe(t){return Math.max(0,-_p(Math.abs(t)))}function MIe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_p(e)/3)))*3-_p(Math.abs(t)))}function jIe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_p(e)-_p(t))+1}function uQ(t,e,n,r){var i=e2(t,e,n),a;switch(r=Wv(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=MIe(i,s))&&(r.precision=a),cQ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=jIe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=RIe(i))&&(r.precision=a-(r.type==="%")*2);break}}return zN(r)}function Su(t){var e=t.domain;return t.ticks=function(n){var r=e();return ZP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return uQ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=JP(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function dQ(){var t=MN();return t.copy=function(){return W0(t,dQ())},ts.apply(t,arguments),Su(t)}function fQ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ow),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return fQ(t).unknown(e)},t=arguments.length?Array.from(t,Ow):[0,1],Su(n)}function hQ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function sF(t){return Math.log(t)}function oF(t){return Math.exp(t)}function zIe(t){return-Math.log(-t)}function LIe(t){return-Math.exp(-t)}function VIe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function BIe(t){return t===10?VIe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function FIe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function lF(t){return(e,n)=>-t(-e,n)}function LN(t){const e=t(sF,oF),n=e.domain;let r=10,i,a;function s(){return i=FIe(r),a=BIe(r),n()[0]<0?(i=lF(i),a=lF(a),t(zIe,LIe)):t(sF,oF),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),m=i(f),b,x;const w=o==null?10:+o;let S=[];if(!(r%1)&&m-g<w){if(g=Math.floor(g),m=Math.ceil(m),u>0){for(;g<=m;++g)for(b=1;b<r;++b)if(x=g<0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}}else for(;g<=m;++g)for(b=r-1;b>=1;--b)if(x=g>0?b/a(-g):b*a(g),!(x<u)){if(x>f)break;S.push(x)}S.length*2<w&&(S=ZP(u,f,w))}else S=ZP(g,m,Math.min(m-g,w)).map(a);return h?S.reverse():S},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Wv(c)).precision==null&&(c.trim=!0),c=zN(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(hQ(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function pQ(){const t=LN(TS()).domain([1,10]);return t.copy=()=>W0(t,pQ()).base(t.base()),ts.apply(t,arguments),t}function cF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function uF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function VN(t){var e=1,n=t(cF(e),uF(e));return n.constant=function(r){return arguments.length?t(cF(e=+r),uF(e)):e},Su(n)}function gQ(){var t=VN(TS());return t.copy=function(){return W0(t,gQ()).constant(t.constant())},ts.apply(t,arguments)}function dF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function UIe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function $Ie(t){return t<0?-t*t:t*t}function BN(t){var e=t(Si,Si),n=1;function r(){return n===1?t(Si,Si):n===.5?t(UIe,$Ie):t(dF(n),dF(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Su(e)}function FN(){var t=BN(TS());return t.copy=function(){return W0(t,FN()).exponent(t.exponent())},ts.apply(t,arguments),t}function qIe(){return FN.apply(null,arguments).exponent(.5)}function fF(t){return Math.sign(t)*t*t}function GIe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function mQ(){var t=MN(),e=[0,1],n=!1,r;function i(a){var s=GIe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(fF(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Ow)).map(fF)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return mQ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ts.apply(i,arguments),Su(i)}function vQ(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=YCe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[H0(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Zc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return vQ().domain(t).range(e).unknown(r)},ts.apply(a,arguments)}function yQ(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[H0(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return yQ().domain([t,e]).range(i).unknown(a)},ts.apply(Su(s),arguments)}function bQ(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[H0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return bQ().domain(t).range(e).unknown(n)},ts.apply(i,arguments)}const gI=new Date,mI=new Date;function Cr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>Cr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(gI.setTime(+a),mI.setTime(+s),t(gI),t(mI),Math.floor(n(gI,mI))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Rw=Cr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Rw.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Cr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Rw);Rw.range;const ul=1e3,Ua=ul*60,dl=Ua*60,Dl=dl*24,UN=Dl*7,hF=Dl*30,vI=Dl*365,Ed=Cr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ul)},(t,e)=>(e-t)/ul,t=>t.getUTCSeconds());Ed.range;const $N=Cr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ul)},(t,e)=>{t.setTime(+t+e*Ua)},(t,e)=>(e-t)/Ua,t=>t.getMinutes());$N.range;const qN=Cr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ua)},(t,e)=>(e-t)/Ua,t=>t.getUTCMinutes());qN.range;const GN=Cr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ul-t.getMinutes()*Ua)},(t,e)=>{t.setTime(+t+e*dl)},(t,e)=>(e-t)/dl,t=>t.getHours());GN.range;const HN=Cr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*dl)},(t,e)=>(e-t)/dl,t=>t.getUTCHours());HN.range;const Y0=Cr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ua)/Dl,t=>t.getDate()-1);Y0.range;const AS=Cr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Dl,t=>t.getUTCDate()-1);AS.range;const xQ=Cr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Dl,t=>Math.floor(t/Dl));xQ.range;function gf(t){return Cr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ua)/UN)}const CS=gf(0),Mw=gf(1),HIe=gf(2),KIe=gf(3),Sp=gf(4),WIe=gf(5),YIe=gf(6);CS.range;Mw.range;HIe.range;KIe.range;Sp.range;WIe.range;YIe.range;function mf(t){return Cr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/UN)}const IS=mf(0),jw=mf(1),XIe=mf(2),QIe=mf(3),Ep=mf(4),ZIe=mf(5),JIe=mf(6);IS.range;jw.range;XIe.range;QIe.range;Ep.range;ZIe.range;JIe.range;const KN=Cr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());KN.range;const WN=Cr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());WN.range;const Ol=Cr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ol.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Cr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ol.range;const Nl=Cr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Nl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Cr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Nl.range;function wQ(t,e,n,r,i,a){const s=[[Ed,1,ul],[Ed,5,5*ul],[Ed,15,15*ul],[Ed,30,30*ul],[a,1,Ua],[a,5,5*Ua],[a,15,15*Ua],[a,30,30*Ua],[i,1,dl],[i,3,3*dl],[i,6,6*dl],[i,12,12*dl],[r,1,Dl],[r,2,2*Dl],[n,1,UN],[e,1,hF],[e,3,3*hF],[t,1,vI]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const m=h&&typeof h.range=="function"?h:c(u,f,h),b=m?m.range(u,+f+1):[];return g?b.reverse():b}function c(u,f,h){const g=Math.abs(f-u)/h,m=kN(([,,w])=>w).right(s,g);if(m===s.length)return t.every(e2(u/vI,f/vI,h));if(m===0)return Rw.every(Math.max(e2(u,f,h),1));const[b,x]=s[g/s[m-1][2]<s[m][2]/g?m-1:m];return b.every(x)}return[o,c]}const[eke,tke]=wQ(Nl,WN,IS,xQ,HN,qN),[nke,rke]=wQ(Ol,KN,CS,Y0,GN,$N);function yI(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bI(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function pm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ike(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=gm(i),f=mm(i),h=gm(a),g=mm(a),m=gm(s),b=mm(s),x=gm(o),w=mm(o),S=gm(c),T=mm(c),I={a:Y,A:J,b:ne,B:W,c:null,d:bF,e:bF,f:Cke,g:zke,G:Vke,H:Eke,I:Tke,j:Ake,L:_Q,m:Ike,M:kke,p:U,q:X,Q:_F,s:SF,S:Pke,u:Dke,U:Oke,V:Nke,w:Rke,W:Mke,x:null,X:null,y:jke,Y:Lke,Z:Bke,"%":wF},N={a:H,A:Z,b:le,B:de,c:null,d:xF,e:xF,f:qke,g:ePe,G:nPe,H:Fke,I:Uke,j:$ke,L:EQ,m:Gke,M:Hke,p:ce,q:he,Q:_F,s:SF,S:Kke,u:Wke,U:Yke,V:Xke,w:Qke,W:Zke,x:null,X:null,y:Jke,Y:tPe,Z:rPe,"%":wF},O={a:j,A:z,b:B,B:L,c:K,d:vF,e:vF,f:xke,g:mF,G:gF,H:yF,I:yF,j:mke,L:bke,m:gke,M:vke,p:R,q:pke,Q:_ke,s:Ske,S:yke,u:cke,U:uke,V:dke,w:lke,W:fke,x:Q,X:q,y:mF,Y:gF,Z:hke,"%":wke};I.x=D(n,I),I.X=D(r,I),I.c=D(e,I),N.x=D(n,N),N.X=D(r,N),N.c=D(e,N);function D(ee,Se){return function(re){var oe=[],De=-1,Pe=0,ze=ee.length,je,Ue,Ie;for(re instanceof Date||(re=new Date(+re));++De<ze;)ee.charCodeAt(De)===37&&(oe.push(ee.slice(Pe,De)),(Ue=pF[je=ee.charAt(++De)])!=null?je=ee.charAt(++De):Ue=je==="e"?" ":"0",(Ie=Se[je])&&(je=Ie(re,Ue)),oe.push(je),Pe=De+1);return oe.push(ee.slice(Pe,De)),oe.join("")}}function k(ee,Se){return function(re){var oe=pm(1900,void 0,1),De=P(oe,ee,re+="",0),Pe,ze;if(De!=re.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Se&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Pe=bI(pm(oe.y,0,1)),ze=Pe.getUTCDay(),Pe=ze>4||ze===0?jw.ceil(Pe):jw(Pe),Pe=AS.offset(Pe,(oe.V-1)*7),oe.y=Pe.getUTCFullYear(),oe.m=Pe.getUTCMonth(),oe.d=Pe.getUTCDate()+(oe.w+6)%7):(Pe=yI(pm(oe.y,0,1)),ze=Pe.getDay(),Pe=ze>4||ze===0?Mw.ceil(Pe):Mw(Pe),Pe=Y0.offset(Pe,(oe.V-1)*7),oe.y=Pe.getFullYear(),oe.m=Pe.getMonth(),oe.d=Pe.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),ze="Z"in oe?bI(pm(oe.y,0,1)).getUTCDay():yI(pm(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(ze+5)%7:oe.w+oe.U*7-(ze+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,bI(oe)):yI(oe)}}function P(ee,Se,re,oe){for(var De=0,Pe=Se.length,ze=re.length,je,Ue;De<Pe;){if(oe>=ze)return-1;if(je=Se.charCodeAt(De++),je===37){if(je=Se.charAt(De++),Ue=O[je in pF?Se.charAt(De++):je],!Ue||(oe=Ue(ee,re,oe))<0)return-1}else if(je!=re.charCodeAt(oe++))return-1}return oe}function R(ee,Se,re){var oe=u.exec(Se.slice(re));return oe?(ee.p=f.get(oe[0].toLowerCase()),re+oe[0].length):-1}function j(ee,Se,re){var oe=m.exec(Se.slice(re));return oe?(ee.w=b.get(oe[0].toLowerCase()),re+oe[0].length):-1}function z(ee,Se,re){var oe=h.exec(Se.slice(re));return oe?(ee.w=g.get(oe[0].toLowerCase()),re+oe[0].length):-1}function B(ee,Se,re){var oe=S.exec(Se.slice(re));return oe?(ee.m=T.get(oe[0].toLowerCase()),re+oe[0].length):-1}function L(ee,Se,re){var oe=x.exec(Se.slice(re));return oe?(ee.m=w.get(oe[0].toLowerCase()),re+oe[0].length):-1}function K(ee,Se,re){return P(ee,e,Se,re)}function Q(ee,Se,re){return P(ee,n,Se,re)}function q(ee,Se,re){return P(ee,r,Se,re)}function Y(ee){return s[ee.getDay()]}function J(ee){return a[ee.getDay()]}function ne(ee){return c[ee.getMonth()]}function W(ee){return o[ee.getMonth()]}function U(ee){return i[+(ee.getHours()>=12)]}function X(ee){return 1+~~(ee.getMonth()/3)}function H(ee){return s[ee.getUTCDay()]}function Z(ee){return a[ee.getUTCDay()]}function le(ee){return c[ee.getUTCMonth()]}function de(ee){return o[ee.getUTCMonth()]}function ce(ee){return i[+(ee.getUTCHours()>=12)]}function he(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var Se=D(ee+="",I);return Se.toString=function(){return ee},Se},parse:function(ee){var Se=k(ee+="",!1);return Se.toString=function(){return ee},Se},utcFormat:function(ee){var Se=D(ee+="",N);return Se.toString=function(){return ee},Se},utcParse:function(ee){var Se=k(ee+="",!0);return Se.toString=function(){return ee},Se}}}var pF={"-":"",_:" ",0:"0"},Br=/^\s*\d+/,ake=/^%/,ske=/[\\^$*+?|[\]().{}]/g;function zt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function oke(t){return t.replace(ske,"\\$&")}function gm(t){return new RegExp("^(?:"+t.map(oke).join("|")+")","i")}function mm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function lke(t,e,n){var r=Br.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function cke(t,e,n){var r=Br.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function uke(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function dke(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function fke(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function gF(t,e,n){var r=Br.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function mF(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function hke(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pke(t,e,n){var r=Br.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function gke(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function vF(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function mke(t,e,n){var r=Br.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function yF(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function vke(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function yke(t,e,n){var r=Br.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function bke(t,e,n){var r=Br.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function xke(t,e,n){var r=Br.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function wke(t,e,n){var r=ake.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function _ke(t,e,n){var r=Br.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ske(t,e,n){var r=Br.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function bF(t,e){return zt(t.getDate(),e,2)}function Eke(t,e){return zt(t.getHours(),e,2)}function Tke(t,e){return zt(t.getHours()%12||12,e,2)}function Ake(t,e){return zt(1+Y0.count(Ol(t),t),e,3)}function _Q(t,e){return zt(t.getMilliseconds(),e,3)}function Cke(t,e){return _Q(t,e)+"000"}function Ike(t,e){return zt(t.getMonth()+1,e,2)}function kke(t,e){return zt(t.getMinutes(),e,2)}function Pke(t,e){return zt(t.getSeconds(),e,2)}function Dke(t){var e=t.getDay();return e===0?7:e}function Oke(t,e){return zt(CS.count(Ol(t)-1,t),e,2)}function SQ(t){var e=t.getDay();return e>=4||e===0?Sp(t):Sp.ceil(t)}function Nke(t,e){return t=SQ(t),zt(Sp.count(Ol(t),t)+(Ol(t).getDay()===4),e,2)}function Rke(t){return t.getDay()}function Mke(t,e){return zt(Mw.count(Ol(t)-1,t),e,2)}function jke(t,e){return zt(t.getFullYear()%100,e,2)}function zke(t,e){return t=SQ(t),zt(t.getFullYear()%100,e,2)}function Lke(t,e){return zt(t.getFullYear()%1e4,e,4)}function Vke(t,e){var n=t.getDay();return t=n>=4||n===0?Sp(t):Sp.ceil(t),zt(t.getFullYear()%1e4,e,4)}function Bke(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zt(e/60|0,"0",2)+zt(e%60,"0",2)}function xF(t,e){return zt(t.getUTCDate(),e,2)}function Fke(t,e){return zt(t.getUTCHours(),e,2)}function Uke(t,e){return zt(t.getUTCHours()%12||12,e,2)}function $ke(t,e){return zt(1+AS.count(Nl(t),t),e,3)}function EQ(t,e){return zt(t.getUTCMilliseconds(),e,3)}function qke(t,e){return EQ(t,e)+"000"}function Gke(t,e){return zt(t.getUTCMonth()+1,e,2)}function Hke(t,e){return zt(t.getUTCMinutes(),e,2)}function Kke(t,e){return zt(t.getUTCSeconds(),e,2)}function Wke(t){var e=t.getUTCDay();return e===0?7:e}function Yke(t,e){return zt(IS.count(Nl(t)-1,t),e,2)}function TQ(t){var e=t.getUTCDay();return e>=4||e===0?Ep(t):Ep.ceil(t)}function Xke(t,e){return t=TQ(t),zt(Ep.count(Nl(t),t)+(Nl(t).getUTCDay()===4),e,2)}function Qke(t){return t.getUTCDay()}function Zke(t,e){return zt(jw.count(Nl(t)-1,t),e,2)}function Jke(t,e){return zt(t.getUTCFullYear()%100,e,2)}function ePe(t,e){return t=TQ(t),zt(t.getUTCFullYear()%100,e,2)}function tPe(t,e){return zt(t.getUTCFullYear()%1e4,e,4)}function nPe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ep(t):Ep.ceil(t),zt(t.getUTCFullYear()%1e4,e,4)}function rPe(){return"+0000"}function wF(){return"%"}function _F(t){return+t}function SF(t){return Math.floor(+t/1e3)}var fh,AQ,CQ;iPe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function iPe(t){return fh=ike(t),AQ=fh.format,fh.parse,CQ=fh.utcFormat,fh.utcParse,fh}function aPe(t){return new Date(t)}function sPe(t){return t instanceof Date?+t:+new Date(+t)}function YN(t,e,n,r,i,a,s,o,c,u){var f=MN(),h=f.invert,g=f.domain,m=u(".%L"),b=u(":%S"),x=u("%I:%M"),w=u("%I %p"),S=u("%a %d"),T=u("%b %d"),I=u("%B"),N=u("%Y");function O(D){return(c(D)<D?m:o(D)<D?b:s(D)<D?x:a(D)<D?w:r(D)<D?i(D)<D?S:T:n(D)<D?I:N)(D)}return f.invert=function(D){return new Date(h(D))},f.domain=function(D){return arguments.length?g(Array.from(D,sPe)):g().map(aPe)},f.ticks=function(D){var k=g();return t(k[0],k[k.length-1],D??10)},f.tickFormat=function(D,k){return k==null?O:u(k)},f.nice=function(D){var k=g();return(!D||typeof D.range!="function")&&(D=e(k[0],k[k.length-1],D??10)),D?g(hQ(k,D)):f},f.copy=function(){return W0(f,YN(t,e,n,r,i,a,s,o,c,u))},f}function oPe(){return ts.apply(YN(nke,rke,Ol,KN,CS,Y0,GN,$N,Ed,AQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function lPe(){return ts.apply(YN(eke,tke,Nl,WN,IS,AS,HN,qN,Ed,CQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kS(){var t=0,e=1,n,r,i,a,s=Si,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var m,b;return arguments.length?([m,b]=g,s=h(m,b),u):[s(0),s(1)]}}return u.range=f(Hp),u.rangeRound=f(RN),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function Eu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function IQ(){var t=Su(kS()(Si));return t.copy=function(){return Eu(t,IQ())},Ul.apply(t,arguments)}function kQ(){var t=LN(kS()).domain([1,10]);return t.copy=function(){return Eu(t,kQ()).base(t.base())},Ul.apply(t,arguments)}function PQ(){var t=VN(kS());return t.copy=function(){return Eu(t,PQ()).constant(t.constant())},Ul.apply(t,arguments)}function XN(){var t=BN(kS());return t.copy=function(){return Eu(t,XN()).exponent(t.exponent())},Ul.apply(t,arguments)}function cPe(){return XN.apply(null,arguments).exponent(.5)}function DQ(){var t=[],e=Si;function n(r){if(r!=null&&!isNaN(r=+r))return e((H0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Zc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>WCe(t,a/r))},n.copy=function(){return DQ(e).domain(t)},Ul.apply(n,arguments)}function PS(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Si,f,h=!1,g;function m(x){return isNaN(x=+x)?g:(x=.5+((x=+f(x))-a)*(r*x<r*a?o:c),u(h?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([t,e,n]=x,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,m):[t,e,n]},m.clamp=function(x){return arguments.length?(h=!!x,m):h},m.interpolator=function(x){return arguments.length?(u=x,m):u};function b(x){return function(w){var S,T,I;return arguments.length?([S,T,I]=w,u=wIe(x,[S,T,I]),m):[u(0),u(.5),u(1)]}}return m.range=b(Hp),m.rangeRound=b(RN),m.unknown=function(x){return arguments.length?(g=x,m):g},function(x){return f=x,i=x(t),a=x(e),s=x(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,m}}function OQ(){var t=Su(PS()(Si));return t.copy=function(){return Eu(t,OQ())},Ul.apply(t,arguments)}function NQ(){var t=LN(PS()).domain([.1,1,10]);return t.copy=function(){return Eu(t,NQ()).base(t.base())},Ul.apply(t,arguments)}function RQ(){var t=VN(PS());return t.copy=function(){return Eu(t,RQ()).constant(t.constant())},Ul.apply(t,arguments)}function QN(){var t=BN(PS());return t.copy=function(){return Eu(t,QN()).exponent(t.exponent())},Ul.apply(t,arguments)}function uPe(){return QN.apply(null,arguments).exponent(.5)}const Dm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:DN,scaleDiverging:OQ,scaleDivergingLog:NQ,scaleDivergingPow:QN,scaleDivergingSqrt:uPe,scaleDivergingSymlog:RQ,scaleIdentity:fQ,scaleImplicit:t2,scaleLinear:dQ,scaleLog:pQ,scaleOrdinal:PN,scalePoint:QCe,scalePow:FN,scaleQuantile:vQ,scaleQuantize:yQ,scaleRadial:mQ,scaleSequential:IQ,scaleSequentialLog:kQ,scaleSequentialPow:XN,scaleSequentialQuantile:DQ,scaleSequentialSqrt:cPe,scaleSequentialSymlog:PQ,scaleSqrt:qIe,scaleSymlog:gQ,scaleThreshold:bQ,scaleTime:oPe,scaleUtc:lPe,tickFormat:uQ},Symbol.toStringTag,{value:"Module"}));var $l=t=>t.chartData,DS=ve([$l],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),MQ=(t,e,n,r)=>r?DS(t):$l(t),dPe=(t,e,n)=>n?DS(t):$l(t);function fu(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(un(e)&&un(n))return!0}return!1}function EF(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function jQ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(un(n))i=n;else if(typeof n=="function")return;if(un(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(fu(s))return s}}function fPe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(fu(r))return EF(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(We(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&zB.test(i)){var c=zB.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e?.[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(We(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e?.[1]))}catch{}else if(typeof a=="string"&&LB.test(a)){var f=LB.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e?.[1];var g=[s,o];if(fu(g))return e==null?g:EF(g,e,n)}}}var Kp=1e9,hPe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},JN,In=!0,Qa="[DecimalError] ",Md=Qa+"Invalid argument: ",ZN=Qa+"Exponent out of range: ",Wp=Math.floor,od=Math.pow,pPe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ca,jr=1e7,mn=7,zQ=9007199254740991,zw=Wp(zQ/mn),Fe={};Fe.absoluteValue=Fe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Fe.comparedTo=Fe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Fe.decimalPlaces=Fe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*mn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Fe.dividedBy=Fe.div=function(t){return vl(this,new this.constructor(t))};Fe.dividedToIntegerBy=Fe.idiv=function(t){var e=this,n=e.constructor;return dn(vl(e,new n(t),0,1),n.precision)};Fe.equals=Fe.eq=function(t){return!this.cmp(t)};Fe.exponent=function(){return pr(this)};Fe.greaterThan=Fe.gt=function(t){return this.cmp(t)>0};Fe.greaterThanOrEqualTo=Fe.gte=function(t){return this.cmp(t)>=0};Fe.isInteger=Fe.isint=function(){return this.e>this.d.length-2};Fe.isNegative=Fe.isneg=function(){return this.s<0};Fe.isPositive=Fe.ispos=function(){return this.s>0};Fe.isZero=function(){return this.s===0};Fe.lessThan=Fe.lt=function(t){return this.cmp(t)<0};Fe.lessThanOrEqualTo=Fe.lte=function(t){return this.cmp(t)<1};Fe.logarithm=Fe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ca))throw Error(Qa+"NaN");if(n.s<1)throw Error(Qa+(n.s?"NaN":"-Infinity"));return n.eq(ca)?new r(0):(In=!1,e=vl(Yv(n,a),Yv(t,a),a),In=!0,dn(e,i))};Fe.minus=Fe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?BQ(e,t):LQ(e,(t.s=-t.s,t))};Fe.modulo=Fe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Qa+"NaN");return n.s?(In=!1,e=vl(n,t,0,1).times(t),In=!0,n.minus(e)):dn(new r(n),i)};Fe.naturalExponential=Fe.exp=function(){return VQ(this)};Fe.naturalLogarithm=Fe.ln=function(){return Yv(this)};Fe.negated=Fe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Fe.plus=Fe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LQ(e,t):BQ(e,(t.s=-t.s,t))};Fe.precision=Fe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Md+t);if(e=pr(i)+1,r=i.d.length-1,n=r*mn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Fe.squareRoot=Fe.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Qa+"NaN")}for(t=pr(o),In=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=ho(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Wp((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(vl(o,a,s+2)).times(.5),ho(a.d).slice(0,s)===(e=ho(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(dn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return In=!0,dn(r,n)};Fe.times=Fe.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,m=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=m.length,c<u&&(a=g,g=m,m=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+m[r]*g[i-r-1]+e,a[i--]=o%jr|0,e=o/jr|0;a[i]=(a[i]+e)%jr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,In?dn(t,h.precision):t};Fe.toDecimalPlaces=Fe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ko(t,0,Kp),e===void 0?e=r.rounding:ko(e,0,8),dn(n,t+pr(n)+1,e))};Fe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=nf(r,!0):(ko(t,0,Kp),e===void 0?e=i.rounding:ko(e,0,8),r=dn(new i(r),t+1,e),n=nf(r,!0,t+1)),n};Fe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?nf(i):(ko(t,0,Kp),e===void 0?e=a.rounding:ko(e,0,8),r=dn(new a(i),t+pr(i)+1,e),n=nf(r.abs(),!1,t+pr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Fe.toInteger=Fe.toint=function(){var t=this,e=t.constructor;return dn(new e(t),pr(t)+1,e.rounding)};Fe.toNumber=function(){return+this};Fe.toPower=Fe.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(ca);if(o=new c(o),!o.s){if(t.s<1)throw Error(Qa+"Infinity");return o}if(o.eq(ca))return o;if(r=c.precision,t.eq(ca))return dn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=zQ){for(i=new c(ca),e=Math.ceil(r/mn+4),In=!1;n%2&&(i=i.times(o),AF(i.d,e)),n=Wp(n/2),n!==0;)o=o.times(o),AF(o.d,e);return In=!0,t.s<0?new c(ca).div(i):dn(i,r)}}else if(a<0)throw Error(Qa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,In=!1,i=t.times(Yv(o,r+u)),In=!0,i=VQ(i),i.s=a,i};Fe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=pr(i),r=nf(i,n<=a.toExpNeg||n>=a.toExpPos)):(ko(t,1,Kp),e===void 0?e=a.rounding:ko(e,0,8),i=dn(new a(i),t,e),n=pr(i),r=nf(i,t<=n||n<=a.toExpNeg,t)),r};Fe.toSignificantDigits=Fe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ko(t,1,Kp),e===void 0?e=r.rounding:ko(e,0,8)),dn(new r(n),t,e)};Fe.toString=Fe.valueOf=Fe.val=Fe.toJSON=Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=pr(t),n=t.constructor;return nf(t,e<=n.toExpNeg||e>=n.toExpPos)};function LQ(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),In?dn(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/mn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/jr|0,c[a]%=jr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,In?dn(e,h):e}function ko(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Md+t)}function ho(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=mn-r.length,n&&(a+=Dc(n)),a+=r;s=t[e],r=s+"",n=mn-r.length,n&&(a+=Dc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var vl=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%jr|0,s=a/jr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*jr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,m,b,x,w,S,T,I,N,O,D,k,P,R=r.constructor,j=r.s==i.s?1:-1,z=r.d,B=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Qa+"Division by zero");for(c=r.e-i.e,k=B.length,O=z.length,m=new R(j),b=m.d=[],u=0;B[u]==(z[u]||0);)++u;if(B[u]>(z[u]||0)&&--c,a==null?T=a=R.precision:s?T=a+(pr(r)-pr(i))+1:T=a,T<0)return new R(0);if(T=T/mn+2|0,u=0,k==1)for(f=0,B=B[0],T++;(u<O||f)&&T--;u++)I=f*jr+(z[u]||0),b[u]=I/B|0,f=I%B|0;else{for(f=jr/(B[0]+1)|0,f>1&&(B=t(B,f),z=t(z,f),k=B.length,O=z.length),N=k,x=z.slice(0,k),w=x.length;w<k;)x[w++]=0;P=B.slice(),P.unshift(0),D=B[0],B[1]>=jr/2&&++D;do f=0,o=e(B,x,k,w),o<0?(S=x[0],k!=w&&(S=S*jr+(x[1]||0)),f=S/D|0,f>1?(f>=jr&&(f=jr-1),h=t(B,f),g=h.length,w=x.length,o=e(h,x,g,w),o==1&&(f--,n(h,k<g?P:B,g))):(f==0&&(o=f=1),h=B.slice()),g=h.length,g<w&&h.unshift(0),n(x,h,w),o==-1&&(w=x.length,o=e(B,x,k,w),o<1&&(f++,n(x,k<w?P:B,w))),w=x.length):o===0&&(f++,x=[0]),b[u++]=f,o&&x[0]?x[w++]=z[N]||0:(x=[z[N]],w=1);while((N++<O||x[0]!==void 0)&&T--)}return b[0]||b.shift(),m.e=c,dn(m,s?a+pr(m)+1:a)}})();function VQ(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(pr(t)>16)throw Error(ZN+pr(t));if(!t.s)return new f(ca);for(In=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(od(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(ca),f.precision=o;;){if(i=dn(i.times(t),o),n=n.times(++c),s=a.plus(vl(i,n,o)),ho(s.d).slice(0,o)===ho(a.d).slice(0,o)){for(;u--;)a=dn(a.times(a),o);return f.precision=h,e==null?(In=!0,dn(a,h)):a}a=s}}function pr(t){for(var e=t.e*mn,n=t.d[0];n>=10;n/=10)e++;return e}function xI(t,e,n){if(e>t.LN10.sd())throw In=!0,n&&(t.precision=n),Error(Qa+"LN10 precision limit exceeded");return dn(new t(t.LN10),e)}function Dc(t){for(var e="";t--;)e+="0";return e}function Yv(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,m=t,b=m.d,x=m.constructor,w=x.precision;if(m.s<1)throw Error(Qa+(m.s?"NaN":"-Infinity"));if(m.eq(ca))return new x(0);if(e==null?(In=!1,u=w):u=e,m.eq(10))return e==null&&(In=!0),xI(x,u);if(u+=g,x.precision=u,n=ho(b),r=n.charAt(0),a=pr(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=ho(m.d),r=n.charAt(0),h++;a=pr(m),r>1?(m=new x("0."+n),a++):m=new x(r+"."+n.slice(1))}else return c=xI(x,u+2,w).times(a+""),m=Yv(new x(r+"."+n.slice(1)),u-g).plus(c),x.precision=w,e==null?(In=!0,dn(m,w)):m;for(o=s=m=vl(m.minus(ca),m.plus(ca),u),f=dn(m.times(m),u),i=3;;){if(s=dn(s.times(f),u),c=o.plus(vl(s,new x(i),u)),ho(c.d).slice(0,u)===ho(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(xI(x,u+2,w).times(a+""))),o=vl(o,new x(h),u),x.precision=w,e==null?(In=!0,dn(o,w)):o;o=c,i+=2}}function TF(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Wp(n/mn),t.d=[],r=(n+1)%mn,n<0&&(r+=mn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=mn;r<i;)t.d.push(+e.slice(r,r+=mn));e=e.slice(r),r=mn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),In&&(t.e>zw||t.e<-zw))throw Error(ZN+n)}else t.s=0,t.e=0,t.d=[0];return t}function dn(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=mn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/mn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=mn,i=r-mn+s}if(n!==void 0&&(a=od(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/od(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=pr(t),h.length=1,e=e-a-1,h[0]=od(10,(mn-e%mn)%mn),t.e=Wp(-e/mn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=od(10,mn-r),h[f]=i>0?(u/od(10,s-i)%od(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==jr&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=jr)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(In&&(t.e>zw||t.e<-zw))throw Error(ZN+pr(t));return t}function BQ(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,m=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),In?dn(e,m):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(m/mn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=jr-1;--c[a],c[i]+=jr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,In?dn(e,m):e):new g(0)}function nf(t,e,n){var r,i=pr(t),a=ho(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Dc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Dc(-i-1)+a,n&&(r=n-s)>0&&(a+=Dc(r))):i>=s?(a+=Dc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Dc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Dc(r))),t.s<0?"-"+a:a}function AF(t,e){if(t.length>e)return t.length=e,!0}function FQ(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Md+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return TF(s,a.toString())}else if(typeof a!="string")throw Error(Md+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,pPe.test(a))TF(s,a);else throw Error(Md+a)}if(i.prototype=Fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=FQ,i.config=i.set=gPe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function gPe(t){if(!t||typeof t!="object")throw Error(Qa+"Object expected");var e,n,r,i=["precision",1,Kp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Wp(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Md+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Md+n+": "+r);return this}var JN=FQ(hPe);ca=new JN(1);const Wt=JN;var mPe=t=>t,UQ={},$Q=t=>t===UQ,CF=t=>function e(){return arguments.length===0||arguments.length===1&&$Q(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},qQ=(t,e)=>t===1?e:CF(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==UQ).length;return a>=t?e(...r):qQ(t-a,CF(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=r.map(f=>$Q(f)?o.shift():f);return e(...u,...o)}))}),vPe=t=>qQ(t.length,t),a2=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},yPe=vPe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),bPe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return mPe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,c)=>c(o),a(...arguments))}};function GQ(t){var e;return t===0?e=1:e=Math.floor(new Wt(t).abs().log(10).toNumber())+1,e}function HQ(t,e,n){for(var r=new Wt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var KQ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},WQ=(t,e,n)=>{if(t.lte(0))return new Wt(0);var r=GQ(t.toNumber()),i=new Wt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Wt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new Wt(c.toNumber()):new Wt(Math.ceil(c.toNumber()))},xPe=(t,e,n)=>{var r=new Wt(1),i=new Wt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Wt(10).pow(GQ(t)-1),i=new Wt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Wt(Math.floor(t)))}else t===0?i=new Wt(Math.floor((e-1)/2)):n||(i=new Wt(Math.floor(t)));var s=Math.floor((e-1)/2),o=bPe(yPe(c=>i.add(new Wt(c-s).mul(r)).toNumber()),a2);return o(0,e)},YQ=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Wt(0),tickMin:new Wt(0),tickMax:new Wt(0)};var s=WQ(new Wt(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new Wt(0):(o=new Wt(e).add(n).div(2),o=o.sub(new Wt(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new Wt(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?YQ(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new Wt(c).mul(s)),tickMax:o.add(new Wt(u).mul(s))})},wPe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=KQ([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...a2(0,i-1).map(()=>1/0)]:[...a2(0,i-1).map(()=>-1/0),c];return n>r?u.reverse():u}if(o===c)return xPe(o,i,a);var{step:f,tickMin:h,tickMax:g}=YQ(o,c,s,a,0),m=HQ(h,g.add(new Wt(.1).mul(f)),f);return n>r?m.reverse():m},_Pe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=KQ([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=WQ(new Wt(o).sub(s).div(c-1),a,0),f=[...HQ(new Wt(s),new Wt(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},XQ=t=>t.rootProps.maxBarSize,SPe=t=>t.rootProps.barGap,QQ=t=>t.rootProps.barCategoryGap,EPe=t=>t.rootProps.barSize,X0=t=>t.rootProps.stackOffset,ZQ=t=>t.rootProps.reverseStackOrder,eR=t=>t.options.chartName,tR=t=>t.rootProps.syncId,JQ=t=>t.rootProps.syncMethod,nR=t=>t.options.eventEmitter,Lr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},il={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},sa={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},OS=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},TPe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:il.angleAxisId,includeHidden:!1,name:void 0,reversed:il.reversed,scale:il.scale,tick:il.tick,tickCount:void 0,ticks:void 0,type:il.type,unit:void 0},APe={allowDataOverflow:sa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:sa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sa.scale,tick:sa.tick,tickCount:sa.tickCount,ticks:void 0,type:sa.type,unit:void 0},CPe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:il.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:il.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:il.scale,tick:il.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},IPe={allowDataOverflow:sa.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:sa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:sa.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:sa.scale,tick:sa.tick,tickCount:sa.tickCount,ticks:void 0,type:"category",unit:void 0},rR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?CPe:TPe,iR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?IPe:APe,NS=t=>t.polarOptions,aR=ve([Bl,Fl,Ar],XX),eZ=ve([NS,aR],(t,e)=>{if(t!=null)return ci(t.innerRadius,e,0)}),tZ=ve([NS,aR],(t,e)=>{if(t!=null)return ci(t.outerRadius,e,e*.8)}),kPe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},nZ=ve([NS],kPe);ve([rR,nZ],OS);var rZ=ve([aR,eZ,tZ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ve([iR,rZ],OS);var iZ=ve([Lt,NS,eZ,tZ,Bl,Fl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:ci(s,i,i/2),cy:ci(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),kn=(t,e)=>e,Q0=(t,e,n)=>n;function sR(t){return t?.id}function aZ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=sR(o);u.forEach((h,g)=>{var m=a==null||i?g:String(yn(h,a,null)),b=yn(h,o.dataKey,0),x;s.has(m)?x=s.get(m):x={},Object.assign(x,{[f]:b}),s.set(m,x)})}}),Array.from(s.values())}function RS(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var MS=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function jS(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function PPe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Ir=t=>{var e=Lt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Yp=t=>t.tooltip.settings.axisId;function IF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IF(Object(n),!0).forEach(function(r){DPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DPe(t,e,n){return(e=OPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OPe(t){var e=NPe(t,"string");return typeof e=="symbol"?e:e+""}function NPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s2=[0,"auto"],Nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},sZ=(t,e)=>t.cartesianAxis.xAxis[e],No=(t,e)=>{var n=sZ(t,e);return n??Nr},Rr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:s2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:U0},oZ=(t,e)=>t.cartesianAxis.yAxis[e],Ro=(t,e)=>{var n=oZ(t,e);return n??Rr},RPe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},oR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??RPe},zn=(t,e,n)=>{switch(e){case"xAxis":return No(t,n);case"yAxis":return Ro(t,n);case"zAxis":return oR(t,n);case"angleAxis":return rR(t,n);case"radiusAxis":return iR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},MPe=(t,e,n)=>{switch(e){case"xAxis":return No(t,n);case"yAxis":return Ro(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Z0=(t,e,n)=>{switch(e){case"xAxis":return No(t,n);case"yAxis":return Ro(t,n);case"angleAxis":return rR(t,n);case"radiusAxis":return iR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lZ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function lR(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var cR=t=>t.graphicalItems.cartesianItems,jPe=ve([kn,Q0],lR),uR=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),J0=ve([cR,zn,jPe],uR,{memoizeOptions:{resultEqualityCheck:jS}}),cZ=ve([J0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(RS)),uZ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),zPe=ve([J0],uZ),dR=t=>t.map(e=>e.data).filter(Boolean).flat(1),LPe=ve([J0],dR,{memoizeOptions:{resultEqualityCheck:jS}}),fR=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},hR=ve([LPe,MQ],fR),pR=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:yn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:yn(i,r)}))):t.map(r=>({value:r})),zS=ve([hR,zn,J0],pR);function dZ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function e1(t){if(Ya(t)||t instanceof Date){var e=Number(t);if(un(e))return e}}function kF(t){if(Array.isArray(t)){var e=[e1(t[0]),e1(t[1])];return fu(e)?e:void 0}var n=e1(t);if(n!=null)return[n,n]}function Rl(t){return t.map(e1).filter(J_e)}function VPe(t,e,n){return!n||typeof e!="number"||va(e)?[]:n.length?Rl(n.flatMap(r=>{var i=yn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!un(a)||!un(s)))return[e-a,e+s]})):[]}var kr=t=>{var e=Ir(t),n=Yp(t);return Z0(t,e,n)},ey=ve([kr],t=>t?.dataKey),BPe=ve([cZ,MQ,kr],aZ),fZ=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map(sR);return[o,{stackedData:bTe(t,f,n),graphicalItems:u}]}))},o2=ve([BPe,cZ,X0,ZQ],fZ),hZ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=ETe(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},FPe=ve([zn],t=>t.allowDataOverflow),gR=t=>{var e;if(t==null||!("domain"in t))return s2;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Rl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:s2},mR=ve([zn],gR),vR=ve([mR,FPe],jQ),UPe=ve([o2,$l,kn,vR],hZ,{memoizeOptions:{resultEqualityCheck:MS}}),LS=t=>t.errorBars,$Pe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>dZ(n,r)),Vw=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},yR=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(S=>dZ(i,S)),g=yn(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),m=VPe(o,g,h);if(m.length>=2){var b=Math.min(...m),x=Math.max(...m);(a==null||b<a)&&(a=b),(s==null||x>s)&&(s=x)}var w=kF(g);w!=null&&(a=a==null?w[0]:Math.min(a,w[0]),s=s==null?w[1]:Math.max(s,w[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var c=kF(yn(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),un(a)&&un(s))return[a,s]},qPe=ve([hR,zn,zPe,LS,kn],yR,{memoizeOptions:{resultEqualityCheck:MS}});function GPe(t){var{value:e}=t;if(Ya(e)||e instanceof Date)return e}var HPe=(t,e,n)=>{var r=t.map(GPe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&kY(r))?eQ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},pZ=t=>t.referenceElements.dots,Xp=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),KPe=ve([pZ,kn,Q0],Xp),gZ=t=>t.referenceElements.areas,WPe=ve([gZ,kn,Q0],Xp),mZ=t=>t.referenceElements.lines,YPe=ve([mZ,kn,Q0],Xp),vZ=(t,e)=>{if(t!=null){var n=Rl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},XPe=ve(KPe,kn,vZ),yZ=(t,e)=>{if(t!=null){var n=Rl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},QPe=ve([WPe,kn],yZ);function ZPe(t){var e;if(t.x!=null)return Rl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Rl(n)}function JPe(t){var e;if(t.y!=null)return Rl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Rl(n)}var bZ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?ZPe(r):JPe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},e2e=ve([YPe,kn],bZ),t2e=ve(XPe,e2e,QPe,(t,e,n)=>Vw(t,n,e)),bR=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?Vw(r,a,i):Vw(a,i);return fPe(e,u,t.allowDataOverflow)},n2e=ve([zn,mR,vR,UPe,qPe,t2e,Lt,kn],bR,{memoizeOptions:{resultEqualityCheck:MS}}),r2e=[0,1],xR=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=pf(e,a);if(u&&o==null){var f;return eQ(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?HPe(r,t,u):i==="expand"?r2e:s}},wR=ve([zn,Lt,hR,zS,X0,kn,n2e],xR),xZ=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(L0(a));return o in Dm?o:"point"}}},Qp=ve([zn,Lt,lZ,eR,kn],xZ);function i2e(t){if(t!=null){if(t in Dm)return Dm[t]();var e="scale".concat(L0(t));if(e in Dm)return Dm[e]()}}function _R(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=i2e(e);if(i!=null){var a=i.domain(n).range(r);return pTe(a),a}}}var SR=(t,e,n)=>{var r=gR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&fu(t))return wPe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&fu(t))return _Pe(t,e.tickCount,e.allowDecimals)}},ER=ve([wR,Z0,Qp],SR),TR=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&fu(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},a2e=ve([zn,wR,ER,kn],TR),s2e=ve(zS,zn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Rl(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),wZ=ve(s2e,Lt,QQ,Ar,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!un(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=ci(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),o2e=(t,e,n)=>{var r=No(t,e);return r==null||typeof r.padding!="string"?0:wZ(t,"xAxis",e,n,r.padding)},l2e=(t,e,n)=>{var r=Ro(t,e);return r==null||typeof r.padding!="string"?0:wZ(t,"yAxis",e,n,r.padding)},c2e=ve(No,o2e,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),u2e=ve(Ro,l2e,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),d2e=ve([Ar,c2e,mS,gS,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),f2e=ve([Ar,Lt,u2e,mS,gS,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),ty=(t,e,n,r)=>{var i;switch(e){case"xAxis":return d2e(t,n,r);case"yAxis":return f2e(t,n,r);case"zAxis":return(i=oR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return nZ(t);case"radiusAxis":return rZ(t,n);default:return}},_Z=ve([zn,ty],OS),Tp=ve([zn,Qp,a2e,_Z],_R);ve([J0,LS,kn],$Pe);function SZ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var VS=(t,e)=>e,BS=(t,e,n)=>n,h2e=ve(hS,VS,BS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(SZ)),p2e=ve(pS,VS,BS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(SZ)),EZ=(t,e)=>({width:t.width,height:e.height}),g2e=(t,e)=>{var n=typeof e.width=="number"?e.width:U0;return{width:n,height:t.height}},TZ=ve(Ar,No,EZ),m2e=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},v2e=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},y2e=ve(Fl,Ar,h2e,VS,BS,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=EZ(e,o);s==null&&(s=m2e(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),b2e=ve(Bl,Ar,p2e,VS,BS,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=g2e(e,o);s==null&&(s=v2e(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),x2e=(t,e)=>{var n=No(t,e);if(n!=null)return y2e(t,n.orientation,n.mirror)},w2e=ve([Ar,No,x2e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),_2e=(t,e)=>{var n=Ro(t,e);if(n!=null)return b2e(t,n.orientation,n.mirror)},S2e=ve([Ar,Ro,_2e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),AZ=ve(Ar,Ro,(t,e)=>{var n=typeof e.width=="number"?e.width:U0;return{width:n,height:t.height}}),PF=(t,e,n)=>{switch(e){case"xAxis":return TZ(t,n).width;case"yAxis":return AZ(t,n).height;default:return}},CZ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=pf(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&kY(c))return c}},AR=ve([Lt,zS,zn,kn],CZ),IZ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=pf(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},CR=ve([Lt,zS,Z0,kn],IZ),DF=ve([Lt,MPe,Qp,Tp,AR,CR,ty,ER,kn],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=pf(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),E2e=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=pf(t,c),{type:f,ticks:h,tickCount:g}=e,m=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=f==="category"&&r.bandwidth?r.bandwidth()/m:0;b=c==="angleAxis"&&a!=null&&a.length>=2?zr(a[0]-a[1])*2*b:b;var x=h||i;if(x){var w=x.map((S,T)=>{var I=s?s.indexOf(S):S;return{index:T,coordinate:r(I)+b,value:S,offset:b}});return w.filter(S=>un(S.coordinate))}return u&&o?o.map((S,T)=>({coordinate:r(S)+b,value:S,index:T,offset:b})).filter(S=>un(S.coordinate)):r.ticks?r.ticks(g).map(S=>({coordinate:r(S)+b,value:S,offset:b})):r.domain().map((S,T)=>({coordinate:r(S)+b,value:s?s[S]:S,index:T,offset:b}))}},kZ=ve([Lt,Z0,Qp,Tp,ER,ty,AR,CR,kn],E2e),T2e=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=pf(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&r?.length>=2?zr(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>({coordinate:n(f)+u,value:f,index:h,offset:u})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+u,value:f,offset:u})):n.domain().map((f,h)=>({coordinate:n(f)+u,value:i?i[f]:f,index:h,offset:u}))}},Ap=ve([Lt,Z0,Tp,ty,AR,CR,kn],T2e),Cp=ve(zn,Tp,(t,e)=>{if(!(t==null||e==null))return Lw(Lw({},t),{},{scale:e})}),A2e=ve([zn,Qp,wR,_Z],_R);ve((t,e,n)=>oR(t,n),A2e,(t,e)=>{if(!(t==null||e==null))return Lw(Lw({},t),{},{scale:e})});var C2e=ve([Lt,hS,pS],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),PZ=t=>t.options.defaultTooltipEventType,DZ=t=>t.options.validateTooltipEventTypes;function OZ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function IR(t,e){var n=PZ(t),r=DZ(t);return OZ(e,n,r)}function I2e(t){return qe(e=>IR(e,t))}var NZ=(t,e)=>{var n,r=Number(e);if(!(va(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},k2e=t=>t.tooltip.settings,Lc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},P2e={itemInteraction:{click:Lc,hover:Lc},axisInteraction:{click:Lc,hover:Lc},keyboardInteraction:Lc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},RZ=Hi({name:"tooltip",initialState:P2e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Tn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Cs(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Tn()},removeTooltipEntrySettings:{reducer(t,e){var n=Cs(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Tn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:D2e,replaceTooltipEntrySettings:O2e,removeTooltipEntrySettings:N2e,setTooltipSettingsState:R2e,setActiveMouseOverItemIndex:MZ,mouseLeaveItem:M2e,mouseLeaveChart:jZ,setActiveClickItemIndex:j2e,setMouseOverAxisIndex:zZ,setMouseClickAxisIndex:z2e,setSyncInteraction:l2,setKeyboardInteraction:c2}=RZ.actions,L2e=RZ.reducer;function OF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OF(Object(n),!0).forEach(function(r){V2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V2e(t,e,n){return(e=B2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B2e(t){var e=F2e(t,"string");return typeof e=="symbol"?e:e+""}function F2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U2e(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function $2e(t){return t.index!=null}var LZ=(t,e,n,r)=>{if(e==null)return Lc;var i=U2e(t,e,n);if(i==null)return Lc;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if($2e(i)){if(a)return yx(yx({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return yx(yx({},Lc),{},{coordinate:i.coordinate})};function q2e(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function G2e(t,e){var n=q2e(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function H2e(t,e,n){if(n==null||e==null)return!0;var r=yn(t,e);return r==null||!fu(n)?!0:G2e(r,n)}var kR=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!un(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||H2e(u,n,r)?String(c):null},VZ=(t,e,n,r,i,a,s,o)=>{if(!(a==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var f=i?.[Number(a)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},BZ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},ny=t=>t.options.tooltipPayloadSearcher,Zp=t=>t.tooltip;function NF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NF(Object(n),!0).forEach(function(r){K2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K2e(t,e,n){return(e=W2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W2e(t){var e=Y2e(t,"string");return typeof e=="symbol"?e:e+""}function Y2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X2e(t,e){return t??e}var FZ=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,m)=>{var b,{dataDefinedOnItem:x,settings:w}=m,S=X2e(x,o),T=Array.isArray(S)?wX(S,u,f):S,I=(b=w?.dataKey)!==null&&b!==void 0?b:r,N=w?.nameKey,O;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&s==="axis"?O=Z_e(T,r,i):O=a(T,e,c,N),Array.isArray(O))O.forEach(k=>{var P=RF(RF({},w),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});g.push(VB({tooltipEntrySettings:P,dataKey:k.dataKey,payload:k.payload,value:yn(k.payload,k.dataKey),name:k.name}))});else{var D;g.push(VB({tooltipEntrySettings:w,dataKey:I,payload:O,value:yn(O,I),name:(D=yn(O,N))!==null&&D!==void 0?D:w?.name}))}return g},h)}},PR=ve([kr,Lt,lZ,eR,Ir],xZ),Q2e=ve([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Z2e=ve([Ir,Yp],lR),Jp=ve([Q2e,kr,Z2e],uR,{memoizeOptions:{resultEqualityCheck:jS}}),J2e=ve([Jp],t=>t.filter(RS)),eDe=ve([Jp],dR,{memoizeOptions:{resultEqualityCheck:jS}}),eg=ve([eDe,$l],fR),tDe=ve([J2e,$l,kr],aZ),DR=ve([eg,kr,Jp],pR),UZ=ve([kr],gR),nDe=ve([kr],t=>t.allowDataOverflow),$Z=ve([UZ,nDe],jQ),rDe=ve([Jp],t=>t.filter(RS)),iDe=ve([tDe,rDe,X0,ZQ],fZ),aDe=ve([iDe,$l,Ir,$Z],hZ),sDe=ve([Jp],uZ),oDe=ve([eg,kr,sDe,LS,Ir],yR,{memoizeOptions:{resultEqualityCheck:MS}}),lDe=ve([pZ,Ir,Yp],Xp),cDe=ve([lDe,Ir],vZ),uDe=ve([gZ,Ir,Yp],Xp),dDe=ve([uDe,Ir],yZ),fDe=ve([mZ,Ir,Yp],Xp),hDe=ve([fDe,Ir],bZ),pDe=ve([cDe,hDe,dDe],Vw),gDe=ve([kr,UZ,$Z,aDe,oDe,pDe,Lt,Ir],bR),ry=ve([kr,Lt,eg,DR,X0,Ir,gDe],xR),mDe=ve([ry,kr,PR],SR),vDe=ve([kr,ry,mDe,Ir],TR),qZ=t=>{var e=Ir(t),n=Yp(t),r=!1;return ty(t,e,n,r)},GZ=ve([kr,qZ],OS),HZ=ve([kr,PR,vDe,GZ],_R),yDe=ve([Lt,DR,kr,Ir],CZ),bDe=ve([Lt,DR,kr,Ir],IZ),xDe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=pf(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?zr(i[0]-i[1])*2*h:h,u&&s?s.map((g,m)=>({coordinate:r(g)+h,value:g,index:m,offset:h})):r.domain().map((g,m)=>({coordinate:r(g)+h,value:a?a[g]:g,index:m,offset:h}))}}},ql=ve([Lt,kr,PR,HZ,qZ,yDe,bDe,Ir],xDe),OR=ve([PZ,DZ,k2e],(t,e,n)=>OZ(n.shared,t,e)),KZ=t=>t.tooltip.settings.trigger,NR=t=>t.tooltip.settings.defaultIndex,iy=ve([Zp,OR,KZ,NR],LZ),rf=ve([iy,eg,ey,ry],kR),WZ=ve([ql,rf],NZ),RR=ve([iy],t=>{if(t)return t.dataKey}),wDe=ve([iy],t=>{if(t)return t.graphicalItemId}),YZ=ve([Zp,OR,KZ,NR],BZ),_De=ve([Bl,Fl,Lt,Ar,ql,NR,YZ,ny],VZ),SDe=ve([iy,_De],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),EDe=ve([iy],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),TDe=ve([YZ,rf,$l,ey,WZ,ny,OR],FZ);ve([TDe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function MF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MF(Object(n),!0).forEach(function(r){ADe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ADe(t,e,n){return(e=CDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CDe(t){var e=IDe(t,"string");return typeof e=="symbol"?e:e+""}function IDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kDe=()=>qe(kr),PDe=()=>{var t=kDe(),e=qe(ql),n=qe(HZ);return yw(!t||!n?void 0:jF(jF({},t),{},{scale:n}),e)};function zF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(n),!0).forEach(function(r){DDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DDe(t,e,n){return(e=ODe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ODe(t){var e=NDe(t,"string");return typeof e=="symbol"?e:e+""}function NDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RDe=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},MDe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return hh(hh(hh({},r),hr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return hh(hh(hh({},r),hr(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function jDe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var XZ=(t,e,n,r,i)=>{var a,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,m=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,b=(f=n[o])===null||f===void 0?void 0:f.coordinate,x=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,w=void 0;if(!(m==null||b==null||x==null))if(zr(b-m)!==zr(x-b)){var S=[];if(zr(x-b)===zr(i[1]-i[0])){w=x;var T=b+i[1]-i[0];S[0]=Math.min(T,(T+m)/2),S[1]=Math.max(T,(T+m)/2)}else{w=m;var I=x+i[1]-i[0];S[0]=Math.min(b,(I+b)/2),S[1]=Math.max(b,(I+b)/2)}var N=[Math.min(b,(w+b)/2),Math.max(b,(w+b)/2)];if(t>N[0]&&t<=N[1]||t>=S[0]&&t<=S[1]){var O;return(O=n[o])===null||O===void 0?void 0:O.index}}else{var D=Math.min(m,x),k=Math.max(m,x);if(t>(D+b)/2&&t<=(k+b)/2){var P;return(P=n[o])===null||P===void 0?void 0:P.index}}}else if(e)for(var R=0;R<s;R++){var j=e[R];if(j!=null){var z=e[R+1],B=e[R-1];if(R===0&&z!=null&&t<=(j.coordinate+z.coordinate)/2||R===s-1&&B!=null&&t>(j.coordinate+B.coordinate)/2||R>0&&R<s-1&&B!=null&&z!=null&&t>(j.coordinate+B.coordinate)/2&&t<=(j.coordinate+z.coordinate)/2)return j.index}}return-1},zDe=()=>qe(eR),MR=(t,e)=>e,QZ=(t,e,n)=>n,jR=(t,e,n,r)=>r,LDe=ve(ql,t=>nS(t,e=>e.coordinate)),zR=ve([Zp,MR,QZ,jR],LZ),LR=ve([zR,eg,ey,ry],kR),VDe=(t,e,n)=>{if(e!=null){var r=Zp(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},ZZ=ve([Zp,MR,QZ,jR],BZ),Bw=ve([Bl,Fl,Lt,Ar,ql,jR,ZZ,ny],VZ),BDe=ve([zR,Bw],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),JZ=ve([ql,LR],NZ),FDe=ve([ZZ,LR,$l,ey,JZ,ny,MR],FZ),UDe=ve([zR,LR],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),$De=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&jDe(t,s)){var o=TTe(t,e),c=XZ(o,a,i,n,r),u=RDe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},qDe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=CCe(t,n);if(o){var c=ATe(o,e),u=XZ(c,s,a,r,i),f=MDe(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},GDe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?$De(t,e,r,i,a,s,o):qDe(t,e,n,r,i,a,s)},HDe=ve(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),KDe=ve(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Lr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:PPe}});function LF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LF(Object(n),!0).forEach(function(r){WDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WDe(t,e,n){return(e=YDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YDe(t){var e=XDe(t,"string");return typeof e=="symbol"?e:e+""}function XDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QDe={},ZDe={zIndexMap:Object.values(Lr).reduce((t,e)=>VF(VF({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),QDe)},JDe=new Set(Object.values(Lr));function eOe(t){return JDe.has(t)}var eJ=Hi({name:"zIndex",initialState:ZDe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Tn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!eOe(n)&&delete t.zIndexMap[n])},prepare:Tn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Tn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Tn()}}}),{registerZIndexPortal:tOe,unregisterZIndexPortal:nOe,registerZIndexPortalElement:rOe,unregisterZIndexPortalElement:iOe}=eJ.actions,aOe=eJ.reducer;function ns(t){var{zIndex:e,children:n}=t,r=nAe(),i=r&&e!==void 0&&e!==0,a=Ci(),s=bn();A.useLayoutEffect(()=>i?(s(tOe({zIndex:e})),()=>{s(nOe({zIndex:e}))}):V0,[s,e,i]);var o=qe(c=>HDe(c,e,a));return i?o?I$.createPortal(n,o):null:n}function u2(){return u2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u2.apply(null,arguments)}function BF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BF(Object(n),!0).forEach(function(r){sOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sOe(t,e,n){return(e=oOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oOe(t){var e=lOe(t,"string");return typeof e=="symbol"?e:e+""}function lOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cOe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function uOe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,m=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var b,x,w;if(f==="ScatterChart")b=h,x=FAe,w=Lr.cursorLine;else if(f==="BarChart")b=UAe(o,h,a,s),x=YX,w=Lr.cursorRectangle;else if(o==="radial"&&OY(h)){var{cx:S,cy:T,radius:I,startAngle:N,endAngle:O}=QX(h);b={cx:S,cy:T,startAngle:N,endAngle:O,innerRadius:I,outerRadius:I},x=JX,w=Lr.cursorLine}else b={points:DCe(o,h,a)},x=IN,w=Lr.cursorLine;var D=typeof c=="object"&&"className"in c?c.className:void 0,k=bx(bx(bx(bx({stroke:"#ccc",pointerEvents:"none"},a),b),jv(c)),{},{payload:g,payloadIndex:m,className:Qt("recharts-tooltip-cursor",D)});return A.createElement(ns,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:w},A.createElement(cOe,{cursor:c,cursorComp:x,cursorProps:k}))}function dOe(t){var e=PDe(),n=DX(),r=q0(),i=zDe();return e==null||n==null||r==null||i==null?null:A.createElement(uOe,u2({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var tJ=A.createContext(null),fOe=()=>A.useContext(tJ),wI={exports:{}},FF;function hOe(){return FF||(FF=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new i(f,h||c,g),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,m=h.length,b=new Array(m);g<m;g++)b[g]=h[g].fn;return b},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,m,b){var x=n?n+u:u;if(!this._events[x])return!1;var w=this._events[x],S=arguments.length,T,I;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,h),!0;case 4:return w.fn.call(w.context,f,h,g),!0;case 5:return w.fn.call(w.context,f,h,g,m),!0;case 6:return w.fn.call(w.context,f,h,g,m,b),!0}for(I=1,T=new Array(S-1);I<S;I++)T[I-1]=arguments[I];w.fn.apply(w.context,T)}else{var N=w.length,O;for(I=0;I<N;I++)switch(w[I].once&&this.removeListener(u,w[I].fn,void 0,!0),S){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,f);break;case 3:w[I].fn.call(w[I].context,f,h);break;case 4:w[I].fn.call(w[I].context,f,h,g);break;default:if(!T)for(O=1,T=new Array(S-1);O<S;O++)T[O-1]=arguments[O];w[I].fn.apply(w[I].context,T)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var m=n?n+u:u;if(!this._events[m])return this;if(!f)return s(this,m),this;var b=this._events[m];if(b.fn)b.fn===f&&(!g||b.once)&&(!h||b.context===h)&&s(this,m);else{for(var x=0,w=[],S=b.length;x<S;x++)(b[x].fn!==f||g&&!b[x].once||h&&b[x].context!==h)&&w.push(b[x]);w.length?this._events[m]=w.length===1?w[0]:w:s(this,m)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(wI)),wI.exports}var pOe=hOe();const gOe=jl(pOe);var Xv=new gOe,d2="recharts.syncEvent.tooltip",UF="recharts.syncEvent.brush";function nJ(t,e){if(e){var n=Number.parseInt(e,10);if(!va(n))return t?.[n]}}var mOe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},rJ=Hi({name:"options",initialState:mOe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),vOe=rJ.reducer,{createEventEmitter:yOe}=rJ.actions;function bOe(t){return t.tooltip.syncInteraction}var xOe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},iJ=Hi({name:"chartData",initialState:xOe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:$F,setDataStartEndIndexes:wOe,setComputedData:Zze}=iJ.actions,_Oe=iJ.reducer,SOe=["x","y"];function qF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ph(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qF(Object(n),!0).forEach(function(r){EOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EOe(t,e,n){return(e=TOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TOe(t){var e=AOe(t,"string");return typeof e=="symbol"?e:e+""}function AOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function COe(t,e){if(t==null)return{};var n,r,i=IOe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function IOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kOe(){var t=qe(tR),e=qe(nR),n=bn(),r=qe(JQ),i=qe(ql),a=q0(),s=$0(),o=qe(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return V0;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var m=f.payload.coordinate,{x:b,y:x}=m,w=COe(m,SOe),{x:S,y:T,width:I,height:N}=f.payload.sourceViewBox,O=ph(ph({},w),{},{x:s.x+(I?(b-S)/I:0)*s.width,y:s.y+(N?(x-T)/N:0)*s.height});n(ph(ph({},f),{},{payload:ph(ph({},f.payload),{},{coordinate:O})}))}else n(f);return}if(i!=null){var D;if(typeof r=="function"){var k={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},P=r(i,k);D=i[P]}else r==="value"&&(D=i.find(q=>String(q.value)===f.payload.label));var{coordinate:R}=f.payload;if(D==null||f.payload.active===!1||R==null||s==null){n(l2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:j,y:z}=R,B=Math.min(j,s.x+s.width),L=Math.min(z,s.y+s.height),K={x:a==="horizontal"?D.coordinate:B,y:a==="horizontal"?L:D.coordinate},Q=l2({active:f.payload.active,coordinate:K,dataKey:f.payload.dataKey,index:String(D.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(Q)}}};return Xv.on(d2,c),()=>{Xv.off(d2,c)}},[o,n,e,t,r,i,a,s])}function POe(){var t=qe(tR),e=qe(nR),n=bn();A.useEffect(()=>{if(t==null)return V0;var r=(i,a,s)=>{e!==s&&t===i&&n(wOe(a))};return Xv.on(UF,r),()=>{Xv.off(UF,r)}},[n,e,t])}function DOe(){var t=bn();A.useEffect(()=>{t(yOe())},[t]),kOe(),POe()}function OOe(t,e,n,r,i,a){var s=qe(m=>VDe(m,t,e)),o=qe(nR),c=qe(tR),u=qe(JQ),f=qe(bOe),h=f?.active,g=$0();A.useEffect(()=>{if(!h&&c!=null&&o!=null){var m=l2({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});Xv.emit(d2,c,m,o)}},[h,n,s,i,r,o,c,u,a,g])}function GF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GF(Object(n),!0).forEach(function(r){NOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NOe(t,e,n){return(e=ROe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ROe(t){var e=MOe(t,"string");return typeof e=="symbol"?e:e+""}function MOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jOe(t){return t.dataKey}function zOe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(xAe,e)}var KF=[],LOe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function FS(t){var e,n,r=Jr(t,LOe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:m,reverseDirection:b,useTranslate3d:x,wrapperStyle:w,cursor:S,shared:T,trigger:I,defaultIndex:N,portal:O,axisId:D}=r,k=bn(),P=typeof N=="number"?String(N):N;A.useEffect(()=>{k(R2e({shared:T,trigger:I,axisId:D,active:i,defaultIndex:P}))},[k,T,I,D,i,P]);var R=$0(),j=qX(),z=I2e(T),{activeIndex:B,isActive:L}=(e=qe(ce=>UDe(ce,z,I,P)))!==null&&e!==void 0?e:{},K=qe(ce=>FDe(ce,z,I,P)),Q=qe(ce=>JZ(ce,z,I,P)),q=qe(ce=>BDe(ce,z,I,P)),Y=K,J=fOe(),ne=(n=i??L)!==null&&n!==void 0?n:!1,[W,U]=cEe([Y,ne]),X=z==="axis"?Q:void 0;OOe(z,I,q,X,B,ne);var H=O??J;if(H==null||R==null||z==null)return null;var Z=Y??KF;ne||(Z=KF),u&&Z.length&&(Z=MSe(Z.filter(ce=>ce.value!=null&&(ce.hide!==!0||r.includeHidden)),g,jOe));var le=Z.length>0,de=A.createElement(CAe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ne,coordinate:q,hasPayload:le,offset:h,position:m,reverseDirection:b,useTranslate3d:x,viewBox:R,wrapperStyle:w,lastBoundingBox:W,innerRef:U,hasPortalFromProps:!!O},zOe(c,HF(HF({},r),{},{payload:Z,label:X,active:ne,activeIndex:B,coordinate:q,accessibilityLayer:j})));return A.createElement(A.Fragment,null,I$.createPortal(de,H),ne&&A.createElement(dOe,{cursor:S,tooltipEventType:z,coordinate:q,payload:Z,index:B}))}var ay=t=>null;ay.displayName="Cell";function VOe(t,e,n){return(e=BOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BOe(t){var e=FOe(t,"string");return typeof e=="symbol"?e:e+""}function FOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class UOe{constructor(e){VOe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function WF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $Oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WF(Object(n),!0).forEach(function(r){qOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qOe(t,e,n){return(e=GOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GOe(t){var e=HOe(t,"string");return typeof e=="symbol"?e:e+""}function HOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KOe={cacheSize:2e3,enableCache:!0},aJ=$Oe({},KOe),YF=new UOe(aJ.cacheSize),WOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XF="recharts_measurement_span";function YOe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var QF=(t,e)=>{try{var n=document.getElementById(XF);n||(n=document.createElement("span"),n.setAttribute("id",XF),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,WOe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},ev=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||_S.isSsr)return{width:0,height:0};if(!aJ.enableCache)return QF(e,n);var r=YOe(e,n),i=YF.get(r);if(i)return i;var a=QF(e,n);return YF.set(r,a),a},sJ;function XOe(t,e,n){return(e=QOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QOe(t){var e=ZOe(t,"string");return typeof e=="symbol"?e:e+""}function ZOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,eNe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tNe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},nNe=["cm","mm","pt","pc","in","Q","px"];function rNe(t){return nNe.includes(t)}var Mh="NaN";function iNe(t,e){return t*tNe[e]}class Xr{static parse(e){var n,[,r,i]=(n=eNe.exec(e))!==null&&n!==void 0?n:[];return r==null?Xr.NaN:new Xr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,va(e)&&(this.unit=""),n!==""&&!JOe.test(n)&&(this.num=NaN,this.unit=""),rNe(n)&&(this.num=iNe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Xr(NaN,""):new Xr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Xr(NaN,""):new Xr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Xr(NaN,""):new Xr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Xr(NaN,""):new Xr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return va(this.num)}}sJ=Xr;XOe(Xr,"NaN",new sJ(NaN,""));function oJ(t){if(t==null||t.includes(Mh))return Mh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=ZF.exec(e))!==null&&n!==void 0?n:[],s=Xr.parse(r??""),o=Xr.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Mh;e=e.replace(ZF,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=JF.exec(e))!==null&&u!==void 0?u:[],m=Xr.parse(f??""),b=Xr.parse(g??""),x=h==="+"?m.add(b):m.subtract(b);if(x.isNaN())return Mh;e=e.replace(JF,x.toString())}return e}var eU=/\(([^()]*)\)/;function aNe(t){for(var e=t,n;(n=eU.exec(e))!=null;){var[,r]=n;e=e.replace(eU,oJ(r))}return e}function sNe(t){var e=t.replace(/\s+/g,"");return e=aNe(e),e=oJ(e),e}function oNe(t){try{return sNe(t)}catch{return Mh}}function _I(t){var e=oNe(t.slice(5,-1));return e===Mh?"":e}var lNe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],cNe=["dx","dy","angle","className","breakAll"];function f2(){return f2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f2.apply(null,arguments)}function tU(t,e){if(t==null)return{};var n,r,i=uNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lJ=/[ \f\n\r\t\v\u2028\u2029]+/,cJ=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Vr(e)||(n?i=e.toString().split(""):i=e.toString().split(lJ));var a=i.map(o=>({word:o,width:ev(o,r).width})),s=n?0:ev("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function dNe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var uJ=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),dJ=t=>t.reduce((e,n)=>e.width>n.width?e:n),fNe="",nU=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=cJ({breakAll:n,style:r,children:c+fNe});if(!u)return[!1,[]];var f=uJ(u.wordsWithComputedWidth,a,s,o),h=f.length>i||dJ(f).width>Number(a);return[h,f]},hNe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=We(a),f=String(s),h=uJ(e,r,n,i);if(!u||i)return h;var g=h.length>a||dJ(h).width>Number(r);if(!g)return h;for(var m=0,b=f.length-1,x=0,w;m<=b&&x<=f.length-1;){var S=Math.floor((m+b)/2),T=S-1,[I,N]=nU(f,T,c,o,a,r,n,i),[O]=nU(f,S,c,o,a,r,n,i);if(!I&&!O&&(m=S+1),I&&O&&(b=S-1),!I&&O){w=N;break}x++}return w||h},rU=t=>{var e=Vr(t)?[]:t.toString().split(lJ);return[{words:e,width:void 0}]},pNe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!_S.isSsr){var o,c,u=cJ({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return rU(r);return hNe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return rU(r)},fJ="#808080",gNe={angle:0,breakAll:!1,capHeight:"0.71em",fill:fJ,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},US=A.forwardRef((t,e)=>{var n=Jr(t,gNe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=tU(n,lNe),g=A.useMemo(()=>pNe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:m,dy:b,angle:x,className:w,breakAll:S}=h,T=tU(h,cNe);if(!Ya(r)||!Ya(i)||g.length===0)return null;var I=Number(r)+(We(m)?m:0),N=Number(i)+(We(b)?b:0);if(!un(I)||!un(N))return null;var O;switch(f){case"start":O=_I("calc(".concat(s,")"));break;case"middle":O=_I("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:O=_I("calc(".concat(g.length-1," * -").concat(a,")"));break}var D=[];if(c){var k=g[0].width,{width:P}=h;D.push("scale(".concat(We(P)&&We(k)?P/k:1,")"))}return x&&D.push("rotate(".concat(x,", ").concat(I,", ").concat(N,")")),D.length&&(T.transform=D.join(" ")),A.createElement("text",f2({},ma(T),{ref:e,x:I,y:N,className:Qt("recharts-text",w),textAnchor:u,fill:o.includes("url")?fJ:o}),g.map((R,j)=>{var z=R.words.join(S?"":" ");return A.createElement("tspan",{x:I,dy:j===0?O:a,key:"".concat(z,"-").concat(j)},z)}))});US.displayName="Text";var mNe=["labelRef"],vNe=["content"];function iU(t,e){if(t==null)return{};var n,r,i=yNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function aU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(n),!0).forEach(function(r){bNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bNe(t,e,n){return(e=xNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xNe(t){var e=wNe(t,"string");return typeof e=="symbol"?e:e+""}function wNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function al(){return al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},al.apply(null,arguments)}var hJ=A.createContext(null),pJ=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(hJ.Provider,{value:c},o)},gJ=()=>{var t=A.useContext(hJ),e=$0();return t||PX(e)},_Ne=A.createContext(null),SNe=()=>{var t=A.useContext(_Ne),e=qe(iZ);return t||e},ENe=t=>{var{value:e,formatter:n}=t,r=Vr(t.children)?e:t.children;return typeof n=="function"?n(r):r},VR=t=>t!=null&&typeof t=="function",TNe=(t,e)=>{var n=zr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},ANe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:m}=i,b=(u+f)/2,x=TNe(h,g),w=x>=0?1:-1,S,T;switch(e){case"insideStart":S=h+w*a,T=m;break;case"insideEnd":S=g-w*a,T=!m;break;case"end":S=g+w*a,T=m;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var I=hr(o,c,b,S),N=hr(o,c,b,S+(T?1:-1)*359),O="M".concat(I.x,",").concat(I.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(N.x,",").concat(N.y),D=Vr(t.id)?zv("recharts-radial-line-"):t.id;return A.createElement("text",al({},r,{dominantBaseline:"central",className:Qt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:D,d:O})),A.createElement("textPath",{xlinkHref:"#".concat(D)},n))},CNe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=hr(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:m,y:b}=hr(r,i,g,u);return{x:m,y:b,textAnchor:"middle",verticalAnchor:"middle"}},h2=t=>"cx"in t&&We(t.cx),INe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!h2(n)&&(a=n);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:f}=e,h=s,g=s+(c-u)/2,m=(h+g)/2,b=(c+u)/2,x=h+c/2,w=f>=0?1:-1,S=w*r,T=w>0?"end":"start",I=w>0?"start":"end",N=c>=0?1:-1,O=N*r,D=N>0?"end":"start",k=N>0?"start":"end";if(i==="top"){var P={x:h+c/2,y:o-S,textAnchor:"middle",verticalAnchor:T};return Yn(Yn({},P),a?{height:Math.max(o-a.y,0),width:c}:{})}if(i==="bottom"){var R={x:g+u/2,y:o+f+S,textAnchor:"middle",verticalAnchor:I};return Yn(Yn({},R),a?{height:Math.max(a.y+a.height-(o+f),0),width:u}:{})}if(i==="left"){var j={x:m-O,y:o+f/2,textAnchor:D,verticalAnchor:"middle"};return Yn(Yn({},j),a?{width:Math.max(j.x-a.x,0),height:f}:{})}if(i==="right"){var z={x:m+b+O,y:o+f/2,textAnchor:k,verticalAnchor:"middle"};return Yn(Yn({},z),a?{width:Math.max(a.x+a.width-z.x,0),height:f}:{})}var B=a?{width:b,height:f}:{};return i==="insideLeft"?Yn({x:m+O,y:o+f/2,textAnchor:k,verticalAnchor:"middle"},B):i==="insideRight"?Yn({x:m+b-O,y:o+f/2,textAnchor:D,verticalAnchor:"middle"},B):i==="insideTop"?Yn({x:h+c/2,y:o+S,textAnchor:"middle",verticalAnchor:I},B):i==="insideBottom"?Yn({x:g+u/2,y:o+f-S,textAnchor:"middle",verticalAnchor:T},B):i==="insideTopLeft"?Yn({x:h+O,y:o+S,textAnchor:k,verticalAnchor:I},B):i==="insideTopRight"?Yn({x:h+c-O,y:o+S,textAnchor:D,verticalAnchor:I},B):i==="insideBottomLeft"?Yn({x:g+O,y:o+f-S,textAnchor:k,verticalAnchor:T},B):i==="insideBottomRight"?Yn({x:g+u-O,y:o+f-S,textAnchor:D,verticalAnchor:T},B):i&&typeof i=="object"&&(We(i.x)||kl(i.x))&&(We(i.y)||kl(i.y))?Yn({x:s+ci(i.x,b),y:o+ci(i.y,f),textAnchor:"end",verticalAnchor:"end"},B):Yn({x,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},kNe={angle:0,offset:5,zIndex:Lr.label,position:"middle",textBreakAll:!1};function Oc(t){var e=Jr(t,kNe),{viewBox:n,position:r,value:i,children:a,content:s,className:o="",textBreakAll:c,labelRef:u}=e,f=SNe(),h=gJ(),g=r==="center"?h:f??h,m,b,x;if(n==null?m=g:h2(n)?m=n:m=PX(n),!m||Vr(i)&&Vr(a)&&!A.isValidElement(s)&&typeof s!="function")return null;var w=Yn(Yn({},e),{},{viewBox:m});if(A.isValidElement(s)){var{labelRef:S}=w,T=iU(w,mNe);return A.cloneElement(s,T)}if(typeof s=="function"){var{content:I}=w,N=iU(w,vNe);if(b=A.createElement(s,N),A.isValidElement(b))return b}else b=ENe(e);var O=ma(e);if(h2(m)){if(r==="insideStart"||r==="insideEnd"||r==="end")return ANe(e,r,b,O,m);x=CNe(m,e.offset,e.position)}else x=INe(e,m);return A.createElement(ns,{zIndex:e.zIndex},A.createElement(US,al({ref:u,className:Qt("recharts-label",o)},O,x,{textAnchor:dNe(O.textAnchor)?O.textAnchor:x.textAnchor,breakAll:c}),b))}Oc.displayName="Label";var PNe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(Oc,al({key:"label-implicit"},r)):Ya(t)?A.createElement(Oc,al({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===Oc?A.cloneElement(t,Yn({key:"label-implicit"},r)):A.createElement(Oc,al({key:"label-implicit",content:t},r)):VR(t)?A.createElement(Oc,al({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(Oc,al({},t,{key:"label-implicit"},r)):null};function mJ(t){var{label:e,labelRef:n}=t,r=gJ();return PNe(e,r,n)||null}var SI={},EI={},sU;function DNe(){return sU||(sU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(EI)),EI}var TI={},oU;function ONe(){return oU||(oU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(TI)),TI}var lU;function NNe(){return lU||(lU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DNe(),n=ONe(),r=mN();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(SI)),SI}var AI,cU;function RNe(){return cU||(cU=1,AI=NNe().last),AI}var MNe=RNe();const jNe=jl(MNe);var zNe=["valueAccessor"],LNe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Fw(){return Fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fw.apply(null,arguments)}function uU(t,e){if(t==null)return{};var n,r,i=VNe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var BNe=t=>Array.isArray(t.value)?jNe(t.value):t.value,vJ=A.createContext(void 0),FNe=vJ.Provider,yJ=A.createContext(void 0),UNe=yJ.Provider;function $Ne(){return A.useContext(vJ)}function qNe(){return A.useContext(yJ)}function t1(t){var{valueAccessor:e=BNe}=t,n=uU(t,zNe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=uU(n,LNe),u=$Ne(),f=qNe(),h=u||f;return!h||!h.length?null:A.createElement(ns,{zIndex:o??Lr.label},A.createElement(fi,{className:"recharts-label-list"},h.map((g,m)=>{var b,x=Vr(r)?e(g,m):yn(g&&g.payload,r),w=Vr(a)?{}:{id:"".concat(a,"-").concat(m)};return A.createElement(Oc,Fw({key:"label-".concat(m)},ma(g),c,w,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:x,textBreakAll:s,viewBox:g.viewBox,index:m,zIndex:0}))})))}t1.displayName="LabelList";function bJ(t){var{label:e}=t;return e?e===!0?A.createElement(t1,{key:"labelList-implicit"}):A.isValidElement(e)||VR(e)?A.createElement(t1,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(t1,Fw({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var xJ=t=>t.graphicalItems.polarItems,GNe=ve([kn,Q0],lR),$S=ve([xJ,zn,GNe],uR),HNe=ve([$S],dR),qS=ve([HNe,DS],fR),KNe=ve([qS,zn,$S],pR);ve([qS,zn,$S],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=yn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:yn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var dU=()=>{},WNe=ve([qS,zn,$S,LS,kn],yR),YNe=ve([zn,mR,vR,dU,WNe,dU,Lt,kn],bR),wJ=ve([zn,Lt,qS,KNe,X0,kn,YNe],xR),XNe=ve([wJ,zn,Qp],SR);ve([zn,wJ,XNe,kn],TR);var QNe={radiusAxis:{},angleAxis:{}},_J=Hi({name:"polarAxis",initialState:QNe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Jze,removeRadiusAxis:eLe,addAngleAxis:tLe,removeAngleAxis:nLe}=_J.actions,ZNe=_J.reducer;function fU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(n),!0).forEach(function(r){JNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JNe(t,e,n){return(e=eRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eRe(t){var e=tRe(t,"string");return typeof e=="symbol"?e:e+""}function tRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nRe=(t,e)=>e,BR=ve([xJ,nRe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),rRe=[],FR=(t,e,n)=>n?.length===0?rRe:n,SJ=ve([DS,BR,FR],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>hU(hU({},e.presentationProps),a.props))),i!=null)return i}}),iRe=ve([SJ,BR,FR],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=yn(r,e.nameKey,e.name),o;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?o=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:fS(s,e.dataKey),color:o,payload:r,type:e.legendType}})}),aRe=ve([SJ,BR,FR,Ar],(t,e,n,r)=>{if(!(e==null||t==null))return cMe({offset:r,pieSettings:e,displayedData:t,cells:n})}),CI={exports:{}},rn={};var pU;function sRe(){if(pU)return rn;pU=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function b(x){if(typeof x=="object"&&x!==null){var w=x.$$typeof;switch(w){case t:switch(x=x.type,x){case n:case i:case r:case c:case u:case g:return x;default:switch(x=x&&x.$$typeof,x){case s:case o:case h:case f:return x;case a:return x;default:return w}}case e:return w}}}return rn.ContextConsumer=a,rn.ContextProvider=s,rn.Element=t,rn.ForwardRef=o,rn.Fragment=n,rn.Lazy=h,rn.Memo=f,rn.Portal=e,rn.Profiler=i,rn.StrictMode=r,rn.Suspense=c,rn.SuspenseList=u,rn.isContextConsumer=function(x){return b(x)===a},rn.isContextProvider=function(x){return b(x)===s},rn.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},rn.isForwardRef=function(x){return b(x)===o},rn.isFragment=function(x){return b(x)===n},rn.isLazy=function(x){return b(x)===h},rn.isMemo=function(x){return b(x)===f},rn.isPortal=function(x){return b(x)===e},rn.isProfiler=function(x){return b(x)===i},rn.isStrictMode=function(x){return b(x)===r},rn.isSuspense=function(x){return b(x)===c},rn.isSuspenseList=function(x){return b(x)===u},rn.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===c||x===u||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===f||x.$$typeof===s||x.$$typeof===a||x.$$typeof===o||x.$$typeof===m||x.getModuleId!==void 0)},rn.typeOf=b,rn}var gU;function oRe(){return gU||(gU=1,CI.exports=sRe()),CI.exports}var lRe=oRe(),mU=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",vU=null,II=null,EJ=t=>{if(t===vU&&Array.isArray(II))return II;var e=[];return A.Children.forEach(t,n=>{Vr(n)||(lRe.isFragment(n)?e=e.concat(EJ(n.props.children)):e.push(n))}),II=e,vU=t,e};function UR(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>mU(i)):r=[mU(e)],EJ(t).forEach(i=>{var a=Zd(i,"type.displayName")||Zd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var kI={},yU;function cRe(){return yU||(yU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(kI)),kI}var PI,bU;function uRe(){return bU||(bU=1,PI=cRe().isPlainObject),PI}var dRe=uRe();const fRe=jl(dRe);var xU,wU,_U,SU,EU;function TU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(n),!0).forEach(function(r){hRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hRe(t,e,n){return(e=pRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pRe(t){var e=gRe(t,"string");return typeof e=="symbol"?e:e+""}function gRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uw(){return Uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uw.apply(null,arguments)}function vm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var CU=(t,e,n,r,i)=>{var a=n-r,s;return s=Fn(xU||(xU=vm(["M ",",",""])),t,e),s+=Fn(wU||(wU=vm(["L ",",",""])),t+n,e),s+=Fn(_U||(_U=vm(["L ",",",""])),t+n-a/2,e+i),s+=Fn(SU||(SU=vm(["L ",",",""])),t+n-a/2-r,e+i),s+=Fn(EU||(EU=vm(["L ",","," Z"])),t,e),s},mRe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vRe=t=>{var e=Jr(t,mRe),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:o}=e,{animationEasing:c,animationDuration:u,animationBegin:f,isUpdateAnimationActive:h}=e,g=A.useRef(null),[m,b]=A.useState(-1),x=A.useRef(i),w=A.useRef(a),S=A.useRef(s),T=A.useRef(n),I=A.useRef(r),N=ES(t,"trapezoid-");if(A.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var K=g.current.getTotalLength();K&&b(K)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var O=Qt("recharts-trapezoid",o);if(!h)return A.createElement("g",null,A.createElement("path",Uw({},ma(e),{className:O,d:CU(n,r,i,a,s)})));var D=x.current,k=w.current,P=S.current,R=T.current,j=I.current,z="0px ".concat(m===-1?1:m,"px"),B="".concat(m,"px 0px"),L=GX(["strokeDasharray"],u,c);return A.createElement(SS,{animationId:N,key:N,canBegin:m>0,duration:u,easing:c,isActive:h,begin:f},K=>{var Q=br(D,i,K),q=br(k,a,K),Y=br(P,s,K),J=br(R,n,K),ne=br(j,r,K);g.current&&(x.current=Q,w.current=q,S.current=Y,T.current=J,I.current=ne);var W=K>0?{transition:L,strokeDasharray:B}:{strokeDasharray:z};return A.createElement("path",Uw({},ma(e),{className:O,d:CU(J,ne,Q,q,Y),ref:g,style:AU(AU({},W),e.style)}))})},yRe=["option","shapeType","activeClassName"];function bRe(t,e){if(t==null)return{};var n,r,i=xRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function IU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $w(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(n),!0).forEach(function(r){wRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wRe(t,e,n){return(e=_Re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Re(t){var e=SRe(t,"string");return typeof e=="symbol"?e:e+""}function SRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ERe(t,e){return $w($w({},e),t)}function TRe(t,e){return t==="symbols"}function kU(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(YX,n);case"trapezoid":return A.createElement(vRe,n);case"sector":return A.createElement(JX,n);case"symbols":if(TRe(e))return A.createElement(DY,n);break;case"curve":return A.createElement(IN,n);default:return null}}function ARe(t){return A.isValidElement(t)?t.props:t}function TJ(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=bRe(t,yRe),a;if(A.isValidElement(e))a=A.cloneElement(e,$w($w({},i),ARe(e)));else if(typeof e=="function")a=e(i,i.index);else if(fRe(e)&&typeof e!="boolean"){var s=ERe(e,i);a=A.createElement(kU,{shapeType:n,elementProps:s})}else{var o=i;a=A.createElement(kU,{shapeType:n,elementProps:o})}return i.isActive?A.createElement(fi,{className:r},a):a}var $R=(t,e,n)=>{var r=bn();return(i,a)=>s=>{t?.(i,a,s),r(MZ({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},qR=t=>{var e=bn();return(n,r)=>i=>{t?.(n,r,i),e(M2e())}},GR=(t,e,n)=>{var r=bn();return(i,a)=>s=>{t?.(i,a,s),r(j2e({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function AJ(t){var{tooltipEntrySettings:e}=t,n=bn(),r=Ci(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(D2e(e)):i.current!==e&&n(O2e({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(N2e(i.current)),i.current=null)},[n]),null}function CRe(t){var{legendPayload:e}=t,n=bn(),r=Ci(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(FX(e)):i.current!==e&&n(UX({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n($X(i.current)),i.current=null)},[n]),null}function IRe(t){var{legendPayload:e}=t,n=bn(),r=qe(Lt),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(FX(e)):i.current!==e&&n(UX({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n($X(i.current)),i.current=null)},[n]),null}var DI,kRe=()=>{var[t]=A.useState(()=>zv("uid-"));return t},PRe=(DI=qte.useId)!==null&&DI!==void 0?DI:kRe;function DRe(t,e){var n=PRe();return e||(t?"".concat(t,"-").concat(n):n)}var ORe=A.createContext(void 0),CJ=t=>{var{id:e,type:n,children:r}=t,i=DRe("recharts-".concat(n),e);return A.createElement(ORe.Provider,{value:i},r(i))},NRe={cartesianItems:[],polarItems:[]},IJ=Hi({name:"graphicalItems",initialState:NRe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Tn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Cs(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Tn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Cs(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Tn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Tn()},removePolarGraphicalItem:{reducer(t,e){var n=Cs(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Tn()}}}),{addCartesianGraphicalItem:RRe,replaceCartesianGraphicalItem:MRe,removeCartesianGraphicalItem:jRe,addPolarGraphicalItem:zRe,removePolarGraphicalItem:LRe}=IJ.actions,VRe=IJ.reducer,BRe=t=>{var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(RRe(t)):n.current!==t&&e(MRe({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(jRe(n.current)),n.current=null)},[e]),null},FRe=A.memo(BRe);function URe(t){var e=bn();return A.useLayoutEffect(()=>(e(zRe(t)),()=>{e(LRe(t))}),[e,t]),null}var $Re=["key"],qRe=["onMouseEnter","onClick","onMouseLeave"],GRe=["id"],HRe=["id"];function PU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(n),!0).forEach(function(r){KRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KRe(t,e,n){return(e=WRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WRe(t){var e=YRe(t,"string");return typeof e=="symbol"?e:e+""}function YRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(null,arguments)}function GS(t,e){if(t==null)return{};var n,r,i=XRe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function XRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function QRe(t){var e=A.useMemo(()=>UR(t.children,ay),[t.children]),n=qe(r=>iRe(r,t.id,e));return n==null?null:A.createElement(IRe,{legendPayload:n})}var ZRe=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:o,hide:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:fS(o,e),hide:c,type:u,color:s,unit:"",graphicalItemId:f}};return A.createElement(AJ,{tooltipEntrySettings:h})}),JRe=(t,e)=>t>e?"start":t<e?"end":"middle",eMe=(t,e,n)=>ci(typeof e=="function"?e(t):e,n,n*.8),tMe=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,o=XX(a,s),c=i+ci(t.cx,a,a/2),u=r+ci(t.cy,s,s/2),f=ci(t.innerRadius,o,0),h=eMe(n,t.outerRadius,o),g=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:u,innerRadius:f,outerRadius:h,maxRadius:g}},nMe=(t,e)=>{var n=zr(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function rMe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var iMe=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Qt("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=GS(e,$Re);return A.createElement(IN,hu({},i,{type:"linear",className:n}))},aMe=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Qt("recharts-pie-label-text",rMe(t));return A.createElement(US,hu({},e,{alignmentBaseline:"middle",className:i}),r)};function sMe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var o=Os(n),c=jv(i),u=jv(a),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((g,m)=>{var b=(g.startAngle+g.endAngle)/2,x=hr(g.cx,g.cy,g.outerRadius+f,b),w=Un(Un(Un(Un({},o),g),{},{stroke:"none"},c),{},{index:m,textAnchor:JRe(x.x,g.cx)},x),S=Un(Un(Un(Un({},o),g),{},{fill:"none",stroke:g.fill},u),{},{index:m,points:[hr(g.cx,g.cy,g.outerRadius,b),x],key:"line"});return A.createElement(ns,{zIndex:Lr.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(m)},A.createElement(fi,null,a&&iMe(a,S),aMe(i,w,yn(g,s))))});return A.createElement(fi,{className:"recharts-pie-labels"},h)}function oMe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(bJ,{label:i}):A.createElement(sMe,{sectors:e,props:n,showLabels:r})}function lMe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:s}=t,o=qe(rf),c=qe(RR),u=qe(wDe),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,m=GS(i,qRe),b=$R(f,i.dataKey,s),x=qR(g),w=GR(h,i.dataKey,s);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((S,T)=>{if(S?.startAngle===0&&S?.endAngle===0&&e.length!==1)return null;var I=u==null||u===s,N=String(T)===o&&(c==null||i.dataKey===c)&&I,O=o?r:null,D=n&&N?n:O,k=Un(Un({},S),{},{stroke:S.stroke,tabIndex:-1,[TX]:T,[AX]:s});return A.createElement(fi,hu({key:"sector-".concat(S?.startAngle,"-").concat(S?.endAngle,"-").concat(S.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},tS(m,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),A.createElement(TJ,hu({option:a??D,index:T,shapeType:"sector",isActive:N},k)))}))}function cMe(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:o,endAngle:c,dataKey:u,nameKey:f,tooltipType:h}=n,g=Math.abs(n.minAngle),m=nMe(o,c),b=Math.abs(m),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(D=>yn(D,u,0)!==0).length,S=(b>=360?w:w-1)*x,T=b-w*g-S,I=r.reduce((D,k)=>{var P=yn(k,u,0);return D+(We(P)?P:0)},0),N;if(I>0){var O;N=r.map((D,k)=>{var P=yn(D,u,0),R=yn(D,f,k),j=tMe(n,a,D),z=(We(P)?P:0)/I,B,L=Un(Un({},D),i&&i[k]&&i[k].props);k?B=O.endAngle+zr(m)*x*(P!==0?1:0):B=o;var K=B+zr(m)*((P!==0?g:0)+z*T),Q=(B+K)/2,q=(j.innerRadius+j.outerRadius)/2,Y=[{name:R,value:P,payload:L,dataKey:u,type:h,graphicalItemId:n.id}],J=hr(j.cx,j.cy,q,Q);return O=Un(Un(Un(Un({},n.presentationProps),{},{percent:z,cornerRadius:typeof s=="string"?parseFloat(s):s,name:R,tooltipPayload:Y,midAngle:Q,middleRadius:q,tooltipPosition:J},L),j),{},{value:P,dataKey:u,startAngle:B,endAngle:K,payload:L,paddingAngle:zr(m)*x}),O})}return N}function uMe(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return A.createElement(UNe,{value:e?i:void 0},r)}function dMe(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=e,m=ES(e,"recharts-pie-"),b=n.current,[x,w]=A.useState(!1),S=A.useCallback(()=>{typeof g=="function"&&g(),w(!1)},[g]),T=A.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return A.createElement(uMe,{showLabels:!x,sectors:i},A.createElement(SS,{animationId:m,begin:s,duration:o,isActive:a,easing:c,onAnimationStart:T,onAnimationEnd:S,key:m},I=>{var N=[],O=i&&i[0],D=O?.startAngle;return i?.forEach((k,P)=>{var R=b&&b[P],j=P>0?Zd(k,"paddingAngle",0):0;if(R){var z=br(R.endAngle-R.startAngle,k.endAngle-k.startAngle,I),B=Un(Un({},k),{},{startAngle:D+j,endAngle:D+z+j});N.push(B),D=B.endAngle}else{var{endAngle:L,startAngle:K}=k,Q=br(0,L-K,I),q=Un(Un({},k),{},{startAngle:D+j,endAngle:D+Q+j});N.push(q),D=q.endAngle}}),n.current=N,A.createElement(fi,null,A.createElement(lMe,{sectors:N,activeShape:u,inactiveShape:f,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(oMe,{showLabels:!x,sectors:i,props:e}),e.children)}var fMe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Lr.area};function hMe(t){var{id:e}=t,n=GS(t,GRe),{hide:r,className:i,rootTabIndex:a}=t,s=A.useMemo(()=>UR(t.children,ay),[t.children]),o=qe(f=>aRe(f,e,s)),c=A.useRef(null),u=Qt("recharts-pie",i);return r||o==null?(c.current=null,A.createElement(fi,{tabIndex:a,className:u})):A.createElement(ns,{zIndex:t.zIndex},A.createElement(ZRe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:o,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(fi,{tabIndex:a,className:u},A.createElement(dMe,{props:Un(Un({},n),{},{sectors:o}),previousSectorsRef:c,id:e})))}function kJ(t){var e=Jr(t,fMe),{id:n}=e,r=GS(e,HRe),i=Os(r);return A.createElement(CJ,{id:n,type:"pie"},a=>A.createElement(A.Fragment,null,A.createElement(URe,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(QRe,hu({},r,{id:a})),A.createElement(hMe,hu({},r,{id:a}))))}kJ.displayName="Pie";function DU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(n),!0).forEach(function(r){pMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pMe(t,e,n){return(e=gMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gMe(t){var e=mMe(t,"string");return typeof e=="symbol"?e:e+""}function mMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PJ=0,vMe={xAxis:{},yAxis:{},zAxis:{}},DJ=Hi({name:"cartesianAxis",initialState:vMe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Tn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Tn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Tn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Tn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Tn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Tn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Tn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Tn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Tn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=OU(OU({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:yMe,replaceXAxis:bMe,removeXAxis:xMe,addYAxis:wMe,replaceYAxis:_Me,removeYAxis:SMe,addZAxis:rLe,replaceZAxis:iLe,removeZAxis:aLe,updateYAxisWidth:EMe}=DJ.actions,TMe=DJ.reducer,AMe=ve([Ar],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),CMe=ve([AMe,Bl,Fl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),OJ=()=>qe(CMe),NU=(t,e,n)=>{var r=n??t;if(!Vr(r))return ci(r,e,0)},IMe=(t,e,n)=>{var r={},i=t.filter(RS),a=t.filter(u=>u.stackId==null),s=i.reduce((u,f)=>(u[f.stackId]||(u[f.stackId]=[]),u[f.stackId].push(f),u),r),o=Object.entries(s).map(u=>{var[f,h]=u,g=h.map(b=>b.dataKey),m=NU(e,n,h[0].barSize);return{stackId:f,dataKeys:g,barSize:m}}),c=a.map(u=>{var f=[u.dataKey].filter(g=>g!=null),h=NU(e,n,u.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...o,...c]};function RU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(n),!0).forEach(function(r){kMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kMe(t,e,n){return(e=PMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PMe(t){var e=DMe(t,"string");return typeof e=="symbol"?e:e+""}function DMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OMe(t,e,n,r,i){var a=r.length;if(!(a<1)){var s=ci(t,n,0,!0),o,c=[];if(un(r[0].barSize)){var u=!1,f=n/a,h=r.reduce((S,T)=>S+(T.barSize||0),0);h+=(a-1)*s,h>=n&&(h-=(a-1)*s,s=0),h>=n&&f>0&&(u=!0,f*=.9,h=a*f);var g=(n-h)/2>>0,m={offset:g-s,size:0};o=r.reduce((S,T)=>{var I,N={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:m.offset+m.size+s,size:u?f:(I=T.barSize)!==null&&I!==void 0?I:0}},O=[...S,N];return m=O[O.length-1].position,O},c)}else{var b=ci(e,n,0,!0);n-2*b-(a-1)*s<=0&&(s=0);var x=(n-2*b-(a-1)*s)/a;x>1&&(x>>=0);var w=un(i)?Math.min(x,i):x;o=r.reduce((S,T,I)=>[...S,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:b+(x+s)*I+(x-w)/2,size:w}}],c)}return o}}var NMe=(t,e,n,r,i,a,s)=>{var o=Vr(s)?e:s,c=OMe(n,r,i!==a?i:a,t,o);return i!==a&&c!=null&&(c=c.map(u=>xx(xx({},u),{},{position:xx(xx({},u.position),{},{offset:u.position.offset-i/2})}))),c},RMe=(t,e)=>{var n=sR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}};function MMe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&un(t.zIndex)?t.zIndex:e}var NJ=t=>{var{chartData:e}=t,n=bn(),r=Ci();return A.useEffect(()=>r?()=>{}:(n($F(e)),()=>{n($F(void 0))}),[e,n,r]),null},MU={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},RJ=Hi({name:"brush",initialState:MU,reducers:{setBrushSettings(t,e){return e.payload==null?MU:e.payload}}}),{setBrushSettings:sLe}=RJ.actions,jMe=RJ.reducer;function jU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(n),!0).forEach(function(r){MJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MJ(t,e,n){return(e=zMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zMe(t){var e=LMe(t,"string");return typeof e=="symbol"?e:e+""}function LMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VMe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},BMe=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return VMe({x:e,y:n},{x:r,y:i})};class HS{static create(e){return new HS(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}MJ(HS,"EPS",1e-4);var FMe=t=>{var e=Object.keys(t).reduce((n,r)=>wx(wx({},n),{},{[r]:HS.create(t[r])}),{});return wx(wx({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(a=>{var[s,o]=a;return[s,e[s].apply(o,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function UMe(t){return(t%180+180)%180}var $Me=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=UMe(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},qMe={dots:[],areas:[],lines:[]},jJ=Hi({name:"referenceElements",initialState:qMe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Cs(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Cs(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Cs(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:oLe,removeDot:lLe,addArea:cLe,removeArea:uLe,addLine:GMe,removeLine:HMe}=jJ.actions,KMe=jJ.reducer,zJ=A.createContext(void 0),WMe=t=>{var{children:e}=t,[n]=A.useState("".concat(zv("recharts"),"-clip")),r=OJ();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return A.createElement(zJ.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:o,width:s}))),e)},YMe=()=>A.useContext(zJ);function zU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(n),!0).forEach(function(r){XMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XMe(t,e,n){return(e=QMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QMe(t){var e=ZMe(t,"string");return typeof e=="symbol"?e:e+""}function ZMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qw.apply(null,arguments)}var JMe=(t,e)=>{var n;if(A.isValidElement(t))n=A.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!un(e.x1)||!un(e.y1)||!un(e.x2)||!un(e.y2))return null;n=A.createElement("line",qw({},e,{className:"recharts-reference-line-line"}))}return n},eje=(t,e,n,r,i,a)=>{var{x:s,width:o}=a,c=i.y.apply(t,{position:n});if(va(c)||e==="discard"&&!i.y.isInRange(c))return null;var u=[{x:s+o,y:c},{x:s,y:c}];return r==="left"?u.reverse():u},tje=(t,e,n,r,i,a)=>{var{y:s,height:o}=a,c=i.x.apply(t,{position:n});if(va(c)||e==="discard"&&!i.x.isInRange(c))return null;var u=[{x:c,y:s+o},{x:c,y:s}];return r==="top"?u.reverse():u},nje=(t,e,n,r)=>{var i=t.map(a=>r.apply(a,{position:n}));return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},rje=(t,e,n,r,i,a)=>{var{x:s,y:o,segment:c,ifOverflow:u}=a,f=Ya(s),h=Ya(o);return h?eje(o,u,n,i,t,e):f?tje(s,u,n,r,t,e):c!=null&&c.length===2?nje(c,u,n,t):null};function ije(t){var e=bn();return A.useEffect(()=>(e(GMe(t)),()=>{e(HMe(t))})),null}function aje(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=Ci(),o=YMe(),c=qe(D=>No(D,e)),u=qe(D=>Ro(D,n)),f=qe(D=>Tp(D,"xAxis",e,s)),h=qe(D=>Tp(D,"yAxis",n,s)),g=$0();if(!o||!g||c==null||u==null||f==null||h==null)return null;var m=FMe({x:f,y:h}),b=rje(m,g,t.position,c.orientation,u.orientation,t);if(!b)return null;var[{x,y:w},{x:S,y:T}]=b,I=a==="hidden"?"url(#".concat(o,")"):void 0,N=LU(LU({clipPath:I},ma(t)),{},{x1:x,y1:w,x2:S,y2:T}),O=BMe({x1:x,y1:w,x2:S,y2:T});return A.createElement(ns,{zIndex:t.zIndex},A.createElement(fi,{className:Qt("recharts-reference-line",i)},JMe(r,N),A.createElement(pJ,qw({},O,{lowerWidth:O.width,upperWidth:O.width}),A.createElement(mJ,{label:t.label}),t.children)))}var sje={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Lr.line};function HR(t){var e=Jr(t,sje);return A.createElement(A.Fragment,null,A.createElement(ije,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),A.createElement(aje,e))}HR.displayName="ReferenceLine";function LJ(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function oje(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return $Me(r,n)}function lje(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Qv(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function cje(t,e){return LJ(t,e+1)}function uje(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var b=r?.[c];if(b===void 0)return{v:LJ(r,u)};var x=c,w,S=()=>(w===void 0&&(w=n(b,x)),w),T=b.coordinate,I=c===0||Qv(t,T,S,f,o);I||(c=0,f=s,u+=1),I&&(f=T+t*(S()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function dje(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,m=function(){var T=r[b],I=b,N,O=()=>(N===void 0&&(N=n(T,I)),N),D=T.coordinate,k=b===f||Qv(t,D,O,h,c);if(!k)return g=!1,1;k&&(h=D+t*(O()/2+i))},b=f;b<s&&!m();b+=u);if(g){for(var x=[],w=f;w<s;w+=u)x.push(r[w]);return x}}return[]}function VU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VU(Object(n),!0).forEach(function(r){fje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fje(t,e,n){return(e=hje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hje(t){var e=pje(t,"string");return typeof e=="symbol"?e:e+""}function pje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gje(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var m=a[g],b,x=()=>(b===void 0&&(b=n(m,g)),b);if(g===s-1){var w=t*(m.coordinate+t*x()/2-c);a[g]=m=ni(ni({},m),{},{tickCoord:w>0?m.coordinate-w*t:m.coordinate})}else a[g]=m=ni(ni({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var S=Qv(t,m.tickCoord,x,o,c);S&&(c=m.tickCoord-t*(x()/2+i),a[g]=ni(ni({},m),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function mje(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1],h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=ni(ni({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var m=Qv(t,f.tickCoord,()=>h,c,u);m&&(u=f.tickCoord-t*(h/2+i),s[o-1]=ni(ni({},f),{},{isShow:!0}))}}for(var b=a?o-1:o,x=function(T){var I=s[T],N,O=()=>(N===void 0&&(N=n(I,T)),N);if(T===0){var D=t*(I.coordinate-t*O()/2-c);s[T]=I=ni(ni({},I),{},{tickCoord:D<0?I.coordinate-D*t:I.coordinate})}else s[T]=I=ni(ni({},I),{},{tickCoord:I.coordinate});if(I.tickCoord!=null){var k=Qv(t,I.tickCoord,O,c,u);k&&(c=I.tickCoord+t*(O()/2+i),s[T]=ni(ni({},I),{},{isShow:!0}))}},w=0;w<b;w++)x(w);return s}function KR(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(We(c)||_S.isSsr){var g;return(g=cje(i,We(c)?c:0))!==null&&g!==void 0?g:[]}var m=[],b=o==="top"||o==="bottom"?"width":"height",x=f&&b==="width"?ev(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},w=(I,N)=>{var O=typeof u=="function"?u(I.value,N):I.value;return b==="width"?oje(ev(O,{fontSize:e,letterSpacing:n}),x,h):ev(O,{fontSize:e,letterSpacing:n})[b]},S=i.length>=2?zr(i[1].coordinate-i[0].coordinate):1,T=lje(a,S,b);return c==="equidistantPreserveStart"?uje(S,T,w,i,s):c==="equidistantPreserveEnd"?dje(S,T,w,i,s):(c==="preserveStart"||c==="preserveStartEnd"?m=mje(S,T,w,i,s,c==="preserveStartEnd"):m=gje(S,T,w,i,s),m.filter(I=>I.isShow))}var vje=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},yje=["axisLine","width","height","className","hide","ticks","axisType"];function bje(t,e){if(t==null)return{};var n,r,i=xje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},af.apply(null,arguments)}function BU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(n),!0).forEach(function(r){wje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wje(t,e,n){return(e=_je(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _je(t){var e=Sje(t,"string");return typeof e=="symbol"?e:e+""}function Sje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Lr.axis};function Eje(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=ur(ur(ur({},c),Os(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=ur(ur({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=ur(ur({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",af({},u,{className:Qt("recharts-cartesian-axis-line",Zd(o,"className"))}))}function Tje(t,e,n,r,i,a,s,o,c){var u,f,h,g,m,b,x=o?-1:1,w=t.tickSize||s,S=We(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-x*w,b=h-x*c,m=S;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-x*w,m=u-x*c,b=S;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+x*w,m=u+x*c,b=S;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+x*w,b=h+x*c,m=S;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:m,y:b}}}function Aje(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Cje(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Ije(t){var{option:e,tickProps:n,value:r}=t,i,a=Qt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,ur(ur({},n),{},{className:a}));else if(typeof e=="function")i=e(ur(ur({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Qt(s,e?.className)),i=A.createElement(US,af({},n,{className:s}),r)}return i}var kje=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y:m,width:b,height:x,tickSize:w,tickMargin:S,fontSize:T,letterSpacing:I,getTicksConfig:N,events:O,axisType:D}=t,k=KR(ur(ur({},N),{},{ticks:n}),T,I),P=Aje(f,h),R=Cje(f,h),j=Os(N),z=jv(r),B={};typeof i=="object"&&(B=i);var L=ur(ur({},j),{},{fill:"none"},B),K=k.map(Y=>ur({entry:Y},Tje(Y,g,m,b,x,f,w,h,S))),Q=K.map(Y=>{var{entry:J,line:ne}=Y;return A.createElement(fi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&A.createElement("line",af({},L,ne,{className:Qt("recharts-cartesian-axis-tick-line",Zd(i,"className"))})))}),q=K.map((Y,J)=>{var{entry:ne,tick:W}=Y,U=ur(ur(ur(ur({textAnchor:P,verticalAnchor:R},j),{},{stroke:"none",fill:a},z),W),{},{index:J,payload:ne,visibleTicksCount:k.length,tickFormatter:s,padding:c},u);return A.createElement(fi,af({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},tS(O,ne,J)),r&&A.createElement(Ije,{option:r,tickProps:U,value:"".concat(typeof s=="function"?s(ne.value,J):ne.value).concat(o||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(D,"-ticks")},q.length>0&&A.createElement(ns,{zIndex:Lr.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(D,"-tick-labels"),ref:e},q)),Q.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(D,"-tick-lines")},Q))}),Pje=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=bje(t,yje),[f,h]=A.useState(""),[g,m]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return vje({ticks:b.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=A.useCallback(w=>{if(w){var S=w.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var T=S[0];if(T){var I=window.getComputedStyle(T),N=I.fontSize,O=I.letterSpacing;(N!==f||O!==g)&&(h(N),m(O))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(ns,{zIndex:t.zIndex},A.createElement(fi,{className:Qt("recharts-cartesian-axis",a)},A.createElement(Eje,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Os(t)}),A.createElement(kje,{ref:x,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(pJ,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(mJ,{label:t.label,labelRef:t.labelRef}),t.children)))}),WR=A.forwardRef((t,e)=>{var n=Jr(t,yl);return A.createElement(Pje,af({},n,{ref:e}))});WR.displayName="CartesianAxis";var Dje=["x1","y1","x2","y2","key"],Oje=["offset"],Nje=["xAxisId","yAxisId"],Rje=["xAxisId","yAxisId"];function FU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ai(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(n),!0).forEach(function(r){Mje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mje(t,e,n){return(e=jje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jje(t){var e=zje(t,"string");return typeof e=="symbol"?e:e+""}function zje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(null,arguments)}function Gw(t,e){if(t==null)return{};var n,r,i=Lje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Vje=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return A.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function VJ(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=Gw(n,Dje),h=(i=Os(f))!==null&&i!==void 0?i:{},{offset:g}=h,m=Gw(h,Oje);r=A.createElement("line",Td({},m,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function Bje(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=Gw(t,Nje),c=i.map((u,f)=>{var h=ai(ai({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return A.createElement(VJ,{key:"line-".concat(f),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Fje(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=Gw(t,Rje),c=i.map((u,f)=>{var h=ai(ai({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return A.createElement(VJ,{option:r,lineItemProps:h,key:"line-".concat(f)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Uje(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var m=!u[g+1],b=m?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%e.length;return A.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:b,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function $je(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var m=!u[g+1],b=m?i+s-h:u[g+1]-h;if(b<=0)return null;var x=g%n.length;return A.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:b,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var qje=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return _X(KR(ai(ai(ai({},yl),n),{},{ticks:SX(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Gje=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return _X(KR(ai(ai(ai({},yl),n),{},{ticks:SX(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},Hje={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Lr.grid};function KS(t){var e=OX(),n=NX(),r=DX(),i=ai(ai({},Jr(t,Hje)),{},{x:We(t.x)?t.x:r.left,y:We(t.y)?t.y:r.top,width:We(t.width)?t.width:r.width,height:We(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:m}=i,b=Ci(),x=qe(R=>DF(R,"xAxis",a,b)),w=qe(R=>DF(R,"yAxis",s,b));if(!Io(u)||!Io(f)||!We(o)||!We(c))return null;var S=i.verticalCoordinatesGenerator||qje,T=i.horizontalCoordinatesGenerator||Gje,{horizontalPoints:I,verticalPoints:N}=i;if((!I||!I.length)&&typeof T=="function"){var O=g&&g.length,D=T({yAxis:w?ai(ai({},w),{},{ticks:O?g:w.ticks}):void 0,width:e??u,height:n??f,offset:r},O?!0:h);bw(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(I=D)}if((!N||!N.length)&&typeof S=="function"){var k=m&&m.length,P=S({xAxis:x?ai(ai({},x),{},{ticks:k?m:x.ticks}):void 0,width:e??u,height:n??f,offset:r},k?!0:h);bw(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(N=P)}return A.createElement(ns,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(Vje,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(Uje,Td({},i,{horizontalPoints:I})),A.createElement($je,Td({},i,{verticalPoints:N})),A.createElement(Bje,Td({},i,{offset:r,horizontalPoints:I,xAxis:x,yAxis:w})),A.createElement(Fje,Td({},i,{offset:r,verticalPoints:N,xAxis:x,yAxis:w}))))}KS.displayName="CartesianGrid";var Kje={},BJ=Hi({name:"errorBars",initialState:Kje,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:dLe,replaceErrorBar:fLe,removeErrorBar:hLe}=BJ.actions,Wje=BJ.reducer,Yje=["children"];function Xje(t,e){if(t==null)return{};var n,r,i=Qje(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Qje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zje={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Jje=A.createContext(Zje);function e4e(t){var{children:e}=t,n=Xje(t,Yje);return A.createElement(Jje.Provider,{value:n},e)}function FJ(t,e){var n,r,i=qe(u=>No(u,t)),a=qe(u=>Ro(u,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Nr.allowDataOverflow,o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Rr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function t4e(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=OJ(),{needClipX:a,needClipY:s,needClip:o}=FJ(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}var OI={exports:{}},NI={};var UU;function n4e(){if(UU)return NI;UU=1;var t=Ip();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return NI.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var m=i(null);if(m.current===null){var b={hasValue:!1,value:null};m.current=b}else b=m.current;m=s(function(){function w(O){if(!S){if(S=!0,T=O,O=h(O),g!==void 0&&b.hasValue){var D=b.value;if(g(D,O))return I=D}return I=O}if(D=I,n(T,O))return D;var k=h(O);return g!==void 0&&g(D,k)?(T=O,D):(T=O,I=k)}var S=!1,T,I,N=f===void 0?null:f;return[function(){return w(u())},N===null?void 0:function(){return w(N())}]},[u,f,h,g]);var x=r(c,m[0],m[1]);return a(function(){b.hasValue=!0,b.value=x},[x]),o(x),x},NI}var $U;function r4e(){return $U||($U=1,OI.exports=n4e()),OI.exports}r4e();function i4e(t){t()}function a4e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){i4e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var qU={notify(){},get:()=>[]};function s4e(t,e){let n,r=qU,i=0,a=!1;function s(x){f();const w=r.subscribe(x);let S=!1;return()=>{S||(S=!0,w(),h())}}function o(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=a4e())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=qU)}function g(){a||(a=!0,f())}function m(){a&&(a=!1,h())}const b={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:m,getListeners:()=>r};return b}var o4e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",l4e=o4e(),c4e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",u4e=c4e(),d4e=()=>l4e||u4e?A.useLayoutEffect:A.useEffect,f4e=d4e();function GU(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function h4e(t,e){if(GU(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!GU(t[n[i]],e[n[i]]))return!1;return!0}var p4e=Symbol.for("react-redux-context"),g4e=typeof globalThis<"u"?globalThis:{};function m4e(){if(!A.createContext)return{};const t=g4e[p4e]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var v4e=m4e();function y4e(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=s4e(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);f4e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||v4e;return A.createElement(o.Provider,{value:a},e)}var b4e=y4e,x4e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function w4e(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function YR(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(x4e.has(r)){if(t[r]==null&&e[r]==null)continue;if(!h4e(t[r],e[r]))return!1}else if(!w4e(t[r],e[r]))return!1;return!0}function vf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:PJ}function yf(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:PJ}var _4e="Invariant failed";function S4e(t,e){throw new Error(_4e)}function p2(){return p2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p2.apply(null,arguments)}function Hw(t){return A.createElement(TJ,p2({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var E4e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(We(e))return e;var a=We(r)||Vr(r);return a?e(r,i):(a||S4e(),n)}},T4e=(t,e,n)=>n,A4e=(t,e)=>e,sy=ve([cR,A4e],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),C4e=ve([sy],t=>t?.maxBarSize),I4e=(t,e,n,r)=>r,k4e=ve([Lt,cR,vf,yf,T4e],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),P4e=(t,e,n)=>{var r=Lt(t),i=vf(t,e),a=yf(t,e);if(!(i==null||a==null))return r==="horizontal"?o2(t,"yAxis",a,n):o2(t,"xAxis",i,n)},D4e=(t,e)=>{var n=Lt(t),r=vf(t,e),i=yf(t,e);if(!(r==null||i==null))return n==="horizontal"?PF(t,"xAxis",r):PF(t,"yAxis",i)},O4e=ve([k4e,EPe,D4e],IMe),N4e=(t,e,n)=>{var r,i,a=sy(t,e);if(a!=null){var s=vf(t,e),o=yf(t,e);if(!(s==null||o==null)){var c=Lt(t),u=XQ(t),{maxBarSize:f}=a,h=Vr(f)?u:f,g,m;return c==="horizontal"?(g=Cp(t,"xAxis",s,n),m=Ap(t,"xAxis",s,n)):(g=Cp(t,"yAxis",o,n),m=Ap(t,"yAxis",o,n)),(r=(i=yw(g,m,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},UJ=(t,e,n)=>{var r=Lt(t),i=vf(t,e),a=yf(t,e);if(!(i==null||a==null)){var s,o;return r==="horizontal"?(s=Cp(t,"xAxis",i,n),o=Ap(t,"xAxis",i,n)):(s=Cp(t,"yAxis",a,n),o=Ap(t,"yAxis",a,n)),yw(s,o)}},R4e=ve([O4e,XQ,SPe,QQ,N4e,UJ,C4e],NMe),M4e=(t,e,n)=>{var r=vf(t,e);if(r!=null)return Cp(t,"xAxis",r,n)},j4e=(t,e,n)=>{var r=yf(t,e);if(r!=null)return Cp(t,"yAxis",r,n)},z4e=(t,e,n)=>{var r=vf(t,e);if(r!=null)return Ap(t,"xAxis",r,n)},L4e=(t,e,n)=>{var r=yf(t,e);if(r!=null)return Ap(t,"yAxis",r,n)},V4e=ve([R4e,sy],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),B4e=ve([P4e,sy],RMe),F4e=ve([Ar,EN,M4e,j4e,z4e,L4e,V4e,Lt,dPe,UJ,B4e,sy,I4e],(t,e,n,r,i,a,s,o,c,u,f,h,g)=>{var{chartData:m,dataStartIndex:b,dataEndIndex:x}=c;if(!(h==null||s==null||e==null||o!=="horizontal"&&o!=="vertical"||n==null||r==null||i==null||a==null||u==null)){var{data:w}=h,S;if(w!=null&&w.length>0?S=w:S=m?.slice(b,x+1),S!=null)return m3e({layout:o,barSettings:h,pos:s,parentViewBox:e,bandSize:u,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:f,displayedData:S,offset:t,cells:g,dataStartIndex:b})}}),U4e=["index"];function g2(){return g2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g2.apply(null,arguments)}function $4e(t,e){if(t==null)return{};var n,r,i=q4e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var $J=A.createContext(void 0),G4e=t=>{var e=A.useContext($J);if(e!=null)return e.stackId;if(t!=null)return xTe(t)},H4e=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),K4e=t=>{var e=A.useContext($J);if(e!=null){var{stackId:n}=e;return"url(#".concat(H4e(n,t),")")}},W4e=t=>{var{index:e}=t,n=$4e(t,U4e),r=K4e(e);return A.createElement(fi,g2({className:"recharts-bar-stack-layer",clipPath:r},n))},Y4e=["onMouseEnter","onMouseLeave","onClick"],X4e=["value","background","tooltipPosition"],Q4e=["id"],Z4e=["onMouseEnter","onClick","onMouseLeave"];function Ml(){return Ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ml.apply(null,arguments)}function HU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HU(Object(n),!0).forEach(function(r){J4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J4e(t,e,n){return(e=e3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e3e(t){var e=t3e(t,"string");return typeof e=="symbol"?e:e+""}function t3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kw(t,e){if(t==null)return{};var n,r,i=n3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function n3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var r3e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:fS(n,e),payload:t}]},i3e=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:o,tooltipType:c,id:u}=t,f={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:fS(a,e),hide:s,type:c,color:i,unit:o,graphicalItemId:u}};return A.createElement(AJ,{tooltipEntrySettings:f})});function a3e(t){var e=qe(rf),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,u=Kw(a,Y4e),f=$R(s,r,a.id),h=qR(o),g=GR(c,r,a.id);if(!i||n==null)return null;var m=jv(i);return A.createElement(ns,{zIndex:MMe(i,Lr.barBackground)},n.map((b,x)=>{var{value:w,background:S,tooltipPosition:T}=b,I=Kw(b,X4e);if(!S)return null;var N=f(b,x),O=h(b,x),D=g(b,x),k=xi(xi(xi(xi(xi({option:i,isActive:String(x)===e},I),{},{fill:"#eee"},S),m),tS(u,b,x)),{},{onMouseEnter:N,onMouseLeave:O,onClick:D,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return A.createElement(Hw,Ml({key:"background-bar-".concat(x)},k))}))}function s3e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return xi(xi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return A.createElement(FNe,{value:e?i:void 0},n)}function o3e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,o=qe(rf),c=qe(RR),u=n&&String(a)===o&&(c==null||s===c),f=u?n:e;return u?A.createElement(ns,{zIndex:Lr.activeBar},A.createElement(Hw,Ml({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))):A.createElement(Hw,Ml({},r,{name:String(r.name)},i,{isActive:u,option:f,index:a,dataKey:s}))}function l3e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return A.createElement(Hw,Ml({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function c3e(t){var e,{data:n,props:r}=t,i=(e=Os(r))!==null&&e!==void 0?e:{},{id:a}=i,s=Kw(i,Q4e),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,m=Kw(r,Z4e),b=$R(f,c,a),x=qR(g),w=GR(h,c,a);return n?A.createElement(A.Fragment,null,n.map((S,T)=>A.createElement(W4e,Ml({index:T,key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(T),className:"recharts-bar-rectangle"},tS(m,S,T),{onMouseEnter:b(S,T),onMouseLeave:x(S,T),onClick:w(S,T)}),u?A.createElement(o3e,{shape:o,activeBar:u,baseProps:s,entry:S,index:T,dataKey:c}):A.createElement(l3e,{shape:o,baseProps:s,entry:S,index:T,dataKey:c})))):null}function u3e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:f}=e,h=n.current,g=ES(e,"recharts-bar-"),[m,b]=A.useState(!1),x=!m,w=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),S=A.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return A.createElement(s3e,{showLabels:x,rects:r},A.createElement(SS,{animationId:g,begin:s,duration:o,isActive:a,easing:c,onAnimationEnd:w,onAnimationStart:S,key:g},T=>{var I=T===1?r:r?.map((N,O)=>{var D=h&&h[O];if(D)return xi(xi({},N),{},{x:br(D.x,N.x,T),y:br(D.y,N.y,T),width:br(D.width,N.width,T),height:br(D.height,N.height,T)});if(i==="horizontal"){var k=br(0,N.height,T),P=br(N.stackedBarStart,N.y,T);return xi(xi({},N),{},{y:P,height:k})}var R=br(0,N.width,T),j=br(N.stackedBarStart,N.x,T);return xi(xi({},N),{},{width:R,x:j})});return T>0&&(n.current=I??null),I==null?null:A.createElement(fi,null,A.createElement(c3e,{props:e,data:I}))}),A.createElement(bJ,{label:e.label}),e.children)}function d3e(t){var e=A.useRef(null);return A.createElement(u3e,{previousRectanglesRef:e,props:t})}var qJ=0,f3e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:yn(t,e)}};class h3e extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:u}=this.props;if(e||n==null)return null;var f=Qt("recharts-bar",i),h=u;return A.createElement(fi,{className:f,id:u},o&&A.createElement("defs",null,A.createElement(t4e,{clipPathId:h,xAxisId:a,yAxisId:s})),A.createElement(fi,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},A.createElement(a3e,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),A.createElement(d3e,this.props)))}}var p3e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:qJ,xAxisId:0,yAxisId:0,zIndex:Lr.bar};function g3e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f}=t,{needClip:h}=FJ(e,n),g=q0(),m=Ci(),b=UR(t.children,ay),x=qe(T=>F4e(T,t.id,m,b));if(g!=="vertical"&&g!=="horizontal")return null;var w,S=x?.[0];return S==null||S.height==null||S.width==null?w=0:w=g==="vertical"?S.height/2:S.width/2,A.createElement(e4e,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:f3e,errorBarOffset:w},A.createElement(h3e,Ml({},t,{layout:g,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:f})))}function m3e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:f,displayedData:h,offset:g,cells:m,parentViewBox:b,dataStartIndex:x}=t,w=e==="horizontal"?o:s,S=f?w.scale.domain():null,T=wTe({numericAxis:w}),I=w.scale(T);return h.map((N,O)=>{var D,k,P,R,j,z;if(f){var B=f[O+x];if(B==null)return null;D=gTe(B,S)}else D=yn(N,n),Array.isArray(D)||(D=[T,D]);var L=E4e(r,qJ)(D[1],O);if(e==="horizontal"){var K,[Q,q]=[o.scale(D[0]),o.scale(D[1])];k=jB({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:N,index:O}),P=(K=q??Q)!==null&&K!==void 0?K:void 0,R=i.size;var Y=Q-q;if(j=va(Y)?0:Y,z={x:k,y:g.top,width:R,height:g.height},Math.abs(L)>0&&Math.abs(j)<Math.abs(L)){var J=zr(j||L)*(Math.abs(L)-Math.abs(j));P-=J,j+=J}}else{var[ne,W]=[s.scale(D[0]),s.scale(D[1])];if(k=ne,P=jB({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:N,index:O}),R=W-ne,j=i.size,z={x:g.left,y:P,width:g.width,height:j},Math.abs(L)>0&&Math.abs(R)<Math.abs(L)){var U=zr(R||L)*(Math.abs(L)-Math.abs(R));R+=U}}if(k==null||P==null||R==null||j==null)return null;var X=xi(xi({},N),{},{stackedBarStart:I,x:k,y:P,width:R,height:j,value:f?D:D[1],payload:N,background:z,tooltipPosition:{x:k+R/2,y:P+j/2},parentViewBox:b},m&&m[O]&&m[O].props);return X}).filter(Boolean)}function v3e(t){var e=Jr(t,p3e),n=G4e(e.stackId),r=Ci();return A.createElement(CJ,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(CRe,{legendPayload:r3e(e)}),A.createElement(i3e,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(FRe,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(ns,{zIndex:e.zIndex},A.createElement(g3e,Ml({},e,{id:i})))))}var Zv=A.memo(v3e,YR);Zv.displayName="Bar";var y3e=["domain","range"],b3e=["domain","range"];function KU(t,e){if(t==null)return{};var n,r,i=x3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function x3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function WU(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function GJ(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=KU(t,y3e),{domain:a,range:s}=e,o=KU(e,b3e);return!WU(n,a)||!WU(r,s)?!1:YR(i,o)}var w3e=["dangerouslySetInnerHTML","ticks","scale"],_3e=["id","scale"];function m2(){return m2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m2.apply(null,arguments)}function YU(t,e){if(t==null)return{};var n,r,i=S3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function S3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function E3e(t){var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(yMe(t)):n.current!==t&&e(bMe({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(xMe(n.current)),n.current=null)},[e]),null}var T3e=t=>{var{xAxisId:e,className:n}=t,r=qe(EN),i=Ci(),a="xAxis",s=qe(S=>kZ(S,a,e,i)),o=qe(S=>TZ(S,e)),c=qe(S=>w2e(S,e)),u=qe(S=>sZ(S,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,m=YU(t,w3e),{id:b,scale:x}=u,w=YU(u,_3e);return A.createElement(WR,m2({},m,w,{x:c.x,y:c.y,width:o.width,height:o.height,className:Qt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},A3e={allowDataOverflow:Nr.allowDataOverflow,allowDecimals:Nr.allowDecimals,allowDuplicatedCategory:Nr.allowDuplicatedCategory,angle:Nr.angle,axisLine:yl.axisLine,height:Nr.height,hide:!1,includeHidden:Nr.includeHidden,interval:Nr.interval,minTickGap:Nr.minTickGap,mirror:Nr.mirror,orientation:Nr.orientation,padding:Nr.padding,reversed:Nr.reversed,scale:Nr.scale,tick:Nr.tick,tickCount:Nr.tickCount,tickLine:yl.tickLine,tickSize:yl.tickSize,type:Nr.type,xAxisId:0},C3e=t=>{var e=Jr(t,A3e);return A.createElement(A.Fragment,null,A.createElement(E3e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(T3e,e))},WS=A.memo(C3e,GJ);WS.displayName="XAxis";var I3e=["dangerouslySetInnerHTML","ticks","scale"],k3e=["id","scale"];function v2(){return v2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v2.apply(null,arguments)}function XU(t,e){if(t==null)return{};var n,r,i=P3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function P3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function D3e(t){var e=bn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(wMe(t)):n.current!==t&&e(_Me({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(SMe(n.current)),n.current=null)},[e]),null}var O3e=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),o=qe(EN),c=Ci(),u=bn(),f="yAxis",h=qe(D=>AZ(D,e)),g=qe(D=>S2e(D,e)),m=qe(D=>kZ(D,f,e,c)),b=qe(D=>oZ(D,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||VR(i)||A.isValidElement(i)||b==null)){var D=a.current;if(D){var k=D.getCalculatedWidth();Math.round(h.width)!==Math.round(k)&&u(EMe({id:e,width:k}))}}},[m,h,u,i,e,r,b]),h==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:x,ticks:w,scale:S}=t,T=XU(t,I3e),{id:I,scale:N}=b,O=XU(b,k3e);return A.createElement(WR,v2({},T,O,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Qt("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:m,axisType:f}))},N3e={allowDataOverflow:Rr.allowDataOverflow,allowDecimals:Rr.allowDecimals,allowDuplicatedCategory:Rr.allowDuplicatedCategory,angle:Rr.angle,axisLine:yl.axisLine,hide:!1,includeHidden:Rr.includeHidden,interval:Rr.interval,minTickGap:Rr.minTickGap,mirror:Rr.mirror,orientation:Rr.orientation,padding:Rr.padding,reversed:Rr.reversed,scale:Rr.scale,tick:Rr.tick,tickCount:Rr.tickCount,tickLine:yl.tickLine,tickSize:yl.tickSize,type:Rr.type,width:Rr.width,yAxisId:0},R3e=t=>{var e=Jr(t,N3e);return A.createElement(A.Fragment,null,A.createElement(D3e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(O3e,e))},YS=A.memo(R3e,GJ);YS.displayName="YAxis";var M3e=(t,e)=>e,XR=ve([M3e,Lt,iZ,Ir,GZ,ql,LDe,Ar],GDe),QR=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},HJ=Xa("mouseClick"),KJ=F0();KJ.startListening({actionCreator:HJ,effect:(t,e)=>{var n=t.payload,r=XR(e.getState(),QR(n));r?.activeIndex!=null&&e.dispatch(z2e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var y2=Xa("mouseMove"),WJ=F0(),_x=null;WJ.startListening({actionCreator:y2,effect:(t,e)=>{var n=t.payload;_x!==null&&cancelAnimationFrame(_x);var r=QR(n);_x=requestAnimationFrame(()=>{var i=e.getState(),a=IR(i,i.tooltip.settings.shared);if(a==="axis"){var s=XR(i,r);s?.activeIndex!=null?e.dispatch(zZ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(jZ())}_x=null})}});function j3e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var QU={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},YJ=Hi({name:"rootProps",initialState:QU,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:QU.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),z3e=YJ.reducer,{updateOptions:L3e}=YJ.actions,XJ=Hi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:V3e}=XJ.actions,B3e=XJ.reducer,QJ=Xa("keyDown"),ZJ=Xa("focus"),ZR=F0();ZR.startListening({actionCreator:QJ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=kR(i,eg(n),ey(n),ry(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=ql(n);if(a==="Enter"){var u=Bw(n,"axis","hover",String(i.index));e.dispatch(c2({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=C2e(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,m=o+g*h;if(!(c==null||m>=c.length||m<0)){var b=Bw(n,"axis","hover",String(m));e.dispatch(c2({active:!0,activeIndex:m.toString(),activeCoordinate:b}))}}}}}});ZR.startListening({actionCreator:ZJ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=Bw(n,"axis","hover",String(a));e.dispatch(c2({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var La=Xa("externalEvent"),JJ=F0(),RI=new Map;JJ.startListening({actionCreator:La,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=RI.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:SDe(o),activeDataKey:RR(o),activeIndex:rf(o),activeLabel:WZ(o),activeTooltipIndex:rf(o),isTooltipActive:EDe(o)};n(c,r)}finally{RI.delete(i)}});RI.set(i,s)}}});var F3e=ve([Zp],t=>t.tooltipItemPayloads),U3e=ve([F3e,ny,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),eee=Xa("touchMove"),tee=F0();tee.startListening({actionCreator:eee,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=IR(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=XR(r,QR({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(zZ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(TX),h=(o=u.getAttribute(AX))!==null&&o!==void 0?o:void 0,g=Jp(r).find(x=>x.id===h);if(f==null||g==null||h==null)return;var{dataKey:m}=g,b=U3e(r,f,h);e.dispatch(MZ({activeDataKey:m,activeIndex:f,activeCoordinate:b,activeGraphicalItemId:h}))}}}});var $3e=KY({brush:jMe,cartesianAxis:TMe,chartData:_Oe,errorBars:Wje,graphicalItems:VRe,layout:cTe,legend:gAe,options:vOe,polarAxis:ZNe,polarOptions:B3e,referenceElements:KMe,rootProps:z3e,tooltip:L2e,zIndex:aOe}),q3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return REe({reducer:$3e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([KJ.middleware,WJ.middleware,ZR.middleware,JJ.middleware,tee.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(lX({type:"raf"}))},devTools:{serialize:{replacer:j3e},name:"recharts-".concat(n)}})};function nee(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ci(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=q3e(e,r));var s=vN;return A.createElement(b4e,{context:s,store:a.current},n)}function G3e(t){var{layout:e,margin:n}=t,r=bn(),i=Ci();return A.useEffect(()=>{i||(r(sTe(e)),r(aTe(n)))},[r,i,e,n]),null}var ree=A.memo(G3e,YR);function iee(t){var e=bn();return A.useEffect(()=>{e(L3e(t))},[e,t]),null}function ZU(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=bn();return A.useLayoutEffect(()=>(r.current&&i(rOe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(iOe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function JU(t){var{children:e,isPanorama:n}=t,r=qe(KDe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(ZU,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(ZU,{key:s,zIndex:s,isPanorama:n})))}var H3e=["children"];function K3e(t,e){if(t==null)return{};var n,r,i=W3e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function W3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ww(){return Ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ww.apply(null,arguments)}var Y3e={width:"100%",height:"100%",display:"block"},X3e=A.forwardRef((t,e)=>{var n=OX(),r=NX(),i=qX();if(!Io(n)||!Io(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),A.createElement(dY,Ww({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:Y3e,ref:e}),a)}),Q3e=t=>{var{children:e}=t,n=qe(mS);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(dY,{width:r,height:i,x:s,y:a},e)},e8=A.forwardRef((t,e)=>{var{children:n}=t,r=K3e(t,H3e),i=Ci();return i?A.createElement(Q3e,null,A.createElement(JU,{isPanorama:!0},n)):A.createElement(X3e,Ww({ref:e},r),A.createElement(JU,{isPanorama:!1},n))});function Z3e(){var t=bn(),[e,n]=A.useState(null),r=qe(CTe);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;un(a)&&a!==r&&t(lTe(a))}},[e,t,r]),n}function t8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J3e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(n),!0).forEach(function(r){eze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eze(t,e,n){return(e=tze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tze(t){var e=nze(t,"string");return typeof e=="symbol"?e:e+""}function nze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sf.apply(null,arguments)}var rze=()=>(DOe(),null);function Yw(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var ize=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:Yw((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Yw((r=t.style)===null||r===void 0?void 0:r.height)}),o=A.useCallback((u,f)=>{s(h=>{var g=Math.round(u),m=Math.round(f);return h.containerWidth===g&&h.containerHeight===m?h:{containerWidth:g,containerHeight:m}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=b=>{var{width:x,height:w}=b[0].contentRect;o(x,w)},m=new ResizeObserver(g);m.observe(u),i.current=m}},[e,o]);return A.useEffect(()=>()=>{var u=i.current;u?.disconnect()},[o]),A.createElement(A.Fragment,null,A.createElement(yS,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",sf({ref:c},t)))}),aze=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:Yw(n),containerHeight:Yw(r)}),s=A.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(yS,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",sf({ref:o},t)))}),sze=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(yS,{width:n,height:r}),A.createElement("div",sf({ref:e},t)))}),oze=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return kl(n)||kl(r)?A.createElement(aze,sf({},t,{ref:e})):A.createElement(sze,sf({},t,{ref:e}))});function lze(t){return t===!0?ize:oze}var cze=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:m,onTouchMove:b,onTouchStart:x,style:w,width:S,responsive:T,dispatchTouchEvents:I=!0}=t,N=A.useRef(null),O=bn(),[D,k]=A.useState(null),[P,R]=A.useState(null),j=Z3e(),z=TN(),B=z?.width>0?z.width:S,L=z?.height>0?z.height:i,K=A.useCallback(ee=>{j(ee),typeof e=="function"&&e(ee),k(ee),R(ee),ee!=null&&(N.current=ee)},[j,e,k,R]),Q=A.useCallback(ee=>{O(HJ(ee)),O(La({handler:a,reactEvent:ee}))},[O,a]),q=A.useCallback(ee=>{O(y2(ee)),O(La({handler:u,reactEvent:ee}))},[O,u]),Y=A.useCallback(ee=>{O(jZ()),O(La({handler:f,reactEvent:ee}))},[O,f]),J=A.useCallback(ee=>{O(y2(ee)),O(La({handler:h,reactEvent:ee}))},[O,h]),ne=A.useCallback(()=>{O(ZJ())},[O]),W=A.useCallback(ee=>{O(QJ(ee.key))},[O]),U=A.useCallback(ee=>{O(La({handler:s,reactEvent:ee}))},[O,s]),X=A.useCallback(ee=>{O(La({handler:o,reactEvent:ee}))},[O,o]),H=A.useCallback(ee=>{O(La({handler:c,reactEvent:ee}))},[O,c]),Z=A.useCallback(ee=>{O(La({handler:g,reactEvent:ee}))},[O,g]),le=A.useCallback(ee=>{O(La({handler:x,reactEvent:ee}))},[O,x]),de=A.useCallback(ee=>{I&&O(eee(ee)),O(La({handler:b,reactEvent:ee}))},[O,I,b]),ce=A.useCallback(ee=>{O(La({handler:m,reactEvent:ee}))},[O,m]),he=lze(T);return A.createElement(tJ.Provider,{value:D},A.createElement(f_e.Provider,{value:P},A.createElement(he,{width:B??w?.width,height:L??w?.height,className:Qt("recharts-wrapper",r),style:J3e({position:"relative",cursor:"default",width:B,height:L},w),onClick:Q,onContextMenu:U,onDoubleClick:X,onFocus:ne,onKeyDown:W,onMouseDown:H,onMouseEnter:q,onMouseLeave:Y,onMouseMove:J,onMouseUp:Z,onTouchEnd:ce,onTouchMove:de,onTouchStart:le,ref:K},A.createElement(rze,null),n)))}),uze=["width","height","responsive","children","className","style","compact","title","desc"];function dze(t,e){if(t==null)return{};var n,r,i=fze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aee=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=dze(t,uze),g=Os(h);return c?A.createElement(A.Fragment,null,A.createElement(yS,{width:n,height:r}),A.createElement(e8,{otherAttributes:g,title:u,desc:f},a)):A.createElement(cze,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(e8,{otherAttributes:g,title:u,desc:f,ref:e},A.createElement(WMe,null,a)))});function b2(){return b2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b2.apply(null,arguments)}var hze={top:5,right:5,bottom:5,left:5},pze={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:hze,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},gze=A.forwardRef(function(e,n){var r,i=Jr(e.categoricalChartProps,pze),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(nee,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},A.createElement(NJ,{chartData:u.data}),A.createElement(ree,{layout:i.layout,margin:i.margin}),A.createElement(iee,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(aee,b2({},i,{ref:n})))}),mze=["axis","item"],JR=A.forwardRef((t,e)=>A.createElement(gze,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mze,tooltipPayloadSearcher:nJ,categoricalChartProps:t,ref:e}));function vze(t){var e=bn();return A.useEffect(()=>{e(V3e(t))},[e,t]),null}var yze=["layout"];function x2(){return x2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x2.apply(null,arguments)}function bze(t,e){if(t==null)return{};var n,r,i=xze(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wze={top:5,right:5,bottom:5,left:5},see={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wze,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},_ze=A.forwardRef(function(e,n){var r,i=Jr(e.categoricalChartProps,see),{layout:a}=i,s=bze(i,yze),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=e,h={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(nee,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:o},A.createElement(NJ,{chartData:i.data}),A.createElement(ree,{layout:a,margin:i.margin}),A.createElement(iee,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(vze,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(aee,x2({},s,{ref:n})))});function n8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n8(Object(n),!0).forEach(function(r){Sze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sze(t,e,n){return(e=Eze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eze(t){var e=Tze(t,"string");return typeof e=="symbol"?e:e+""}function Tze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Aze=["item"],Cze=r8(r8({},see),{},{layout:"centric",startAngle:0,endAngle:360}),Ize=A.forwardRef((t,e)=>{var n=Jr(t,Cze);return A.createElement(_ze,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Aze,tooltipPayloadSearcher:nJ,categoricalChartProps:n,ref:e})});const i8=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316","#14B8A6","#6366F1","#84CC16","#D946EF"],a8=["#10B981","#3B82F6","#F59E0B","#8B5CF6","#06B6D4","#F97316","#EC4899","#14B8A6"];function oee(t,e){const n=[];if(t.startsWith("year-")){const c=parseInt(t.split("-")[1],10);for(let u=1;u<=12;u++)n.push(`${c}-${String(u).padStart(2,"0")}`);return n}const i={"1m":1,"3m":3,"6m":6,"9m":9,"12m":12}[t]||1,[a,s]=e.split("-").map(Number),o=new Date(a,s-1,1);for(let c=i-1;c>=0;c--){const u=new Date(o.getFullYear(),o.getMonth()-c,1),f=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;n.push(f)}return n}const kze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Sx(t){const e=parseInt(t.split("-")[1],10);return kze[e-1]||t}function Pze(t){const e={};return t.forEach((n,r)=>{e[n.id]=i8[r%i8.length]}),e.uncategorized="#9CA3AF",e}function Dze(t){const e={};return[...new Set(t)].forEach((r,i)=>{e[r]=a8[i%a8.length]}),e}function Oze(t){const{transactions:e,envelopes:n,categories:r,incomeSources:i,currentMonth:a}=sn(),s=A.useMemo(()=>oee(t,a),[t,a]),o=A.useMemo(()=>{const x={};return n.forEach(w=>{x[w.id]=w.categoryId||"uncategorized"}),x},[n]),c=A.useMemo(()=>Pze(r),[r]),u=A.useMemo(()=>{const x={};return r.forEach(w=>{x[w.id]=w.name}),x.uncategorized="Uncategorized",x},[r]),f=A.useMemo(()=>{const x=new Set(s);return e.filter(w=>w.type==="Expense"&&w.month&&x.has(w.month))},[e,s]),h=A.useMemo(()=>{const x={};f.forEach(T=>{const I=o[T.envelopeId]||"uncategorized";x[I]=(x[I]||0)+Math.abs(T.amount)});const w=Object.entries(x).map(([T,I])=>({categoryId:T,categoryName:u[T]||"Uncategorized",color:c[T]||"#9CA3AF",amount:Math.round(I*100)/100})).sort((T,I)=>I.amount-T.amount),S=w.reduce((T,I)=>T+I.amount,0);return{items:w,total:Math.round(S*100)/100}},[f,o,u,c]),g=A.useMemo(()=>{const x=new Set,w={};s.forEach(D=>{w[D]={}}),f.forEach(D=>{const k=o[D.envelopeId]||"uncategorized",P=D.month;w[P]&&(w[P][k]=(w[P][k]||0)+Math.abs(D.amount),x.add(k))});const S=[...x],T={};S.forEach(D=>{T[D]=c[D]||"#9CA3AF"});const I=s.map(D=>{const k={month:D,monthLabel:Sx(D)};return S.forEach(P=>{k[P]=Math.round((w[D][P]||0)*100)/100}),k}),N=I.map(D=>S.reduce((k,P)=>k+(D[P]||0),0)),O=N.length>0?Math.round(N.reduce((D,k)=>D+k,0)/N.length):0;return{data:I,categoryKeys:S,colorMap:T,average:O}},[s,f,o,c]),m=A.useMemo(()=>{const x=[],w={};s.forEach(D=>{w[D]={}}),s.forEach(D=>{(i[D]||[]).forEach(P=>{x.push(P.name),w[D][P.name]=(w[D][P.name]||0)+P.amount})});const S=[...new Set(x)],T=Dze(S),I=s.map(D=>{const k={month:D,monthLabel:Sx(D)};return S.forEach(P=>{k[P]=Math.round((w[D][P]||0)*100)/100}),k}),N=I.map(D=>S.reduce((k,P)=>k+(D[P]||0),0)),O=N.length>0?Math.round(N.reduce((D,k)=>D+k,0)/N.length):0;return{data:I,sourceKeys:S,colorMap:T,average:O}},[s,i]),b=A.useMemo(()=>({data:s.map(w=>{const T=(i[w]||[]).reduce((P,R)=>P+R.amount,0),N=f.filter(P=>P.month===w).reduce((P,R)=>P+Math.abs(R.amount),0),O=Math.max(0,T-N);if(T<=0)return{month:w,monthLabel:Sx(w),savingsPercent:0,spendingPercent:100};const D=Math.min(100,Math.round(O/T*1e3)/10),k=Math.round((100-D)*10)/10;return{month:w,monthLabel:Sx(w),savingsPercent:D,spendingPercent:k}})}),[s,i,f]);return{months:s,spendingTotals:h,spendingBreakdown:g,monthlyIncome:m,savingsData:b,categoryNameMap:u,categoryColorMap:c}}const Nze=[{key:"totals",label:"Spending Totals"},{key:"breakdown",label:"Spending Breakdown"},{key:"income",label:"Monthly Income"},{key:"savings",label:"Savings"}],Rze=[{value:"1m",label:"1 Month"},{value:"3m",label:"3 Months"},{value:"6m",label:"6 Months"},{value:"9m",label:"9 Months"},{value:"12m",label:"12 Months"}];function Mze(){const t=new Date().getFullYear(),e=[];for(let n=t;n>=2024;n--)e.push({value:`year-${n}`,label:`${n}`});return e}const eM=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),Xw=t=>t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),lee=({active:t,payload:e,label:n,nameMap:r})=>{if(!t||!e?.length)return null;const i=e.reduce((a,s)=>a+(s.value||0),0);return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),e.map((a,s)=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.fill||a.color}}),y.jsxs("span",{className:"text-zinc-600 dark:text-zinc-300",children:[r?.[a.dataKey]||a.dataKey,":"]}),y.jsx("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:Xw(a.value)})]},s)),y.jsxs("div",{className:"border-t border-zinc-200 dark:border-zinc-700 mt-1.5 pt-1.5 flex justify-between font-semibold",children:[y.jsx("span",{className:"text-zinc-700 dark:text-zinc-200",children:"Total"}),y.jsx("span",{className:"text-zinc-900 dark:text-white",children:Xw(i)})]})]})},jze=({active:t,payload:e,label:n})=>{if(!t||!e?.length)return null;const r=e.find(a=>a.dataKey==="savingsPercent"),i=e.find(a=>a.dataKey==="spendingPercent");return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsx("p",{className:"font-semibold text-zinc-900 dark:text-white mb-1",children:n}),r&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#3B82F6"}}),y.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Savings & Investments:"}),y.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[r.value.toFixed(1),"%"]})]}),i&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:"#4ADE80"}}),y.jsx("span",{className:"text-zinc-600 dark:text-zinc-300",children:"Spending:"}),y.jsxs("span",{className:"font-medium text-zinc-900 dark:text-white ml-auto",children:[i.value.toFixed(1),"%"]})]})]})},zze=()=>{const t=es(),[e,n]=A.useState("totals"),[r,i]=A.useState("12m"),{currentMonth:a,fetchMonthData:s,incomeSources:o}=sn(),c=A.useMemo(()=>Mze(),[]);A.useEffect(()=>{oee(r,a).forEach(x=>{o[x]===void 0&&s(x)})},[r,a,s,o]);const{spendingTotals:u,spendingBreakdown:f,monthlyIncome:h,savingsData:g,categoryNameMap:m}=Oze(r);return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-32",children:[y.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl border-b border-zinc-200/50 dark:border-zinc-800/50 safe-area-top",children:[y.jsxs("div",{className:"flex items-center gap-3 px-4 pt-2 pb-2",children:[y.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:y.jsx(_l,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),y.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Analytics"})]}),y.jsx("div",{className:"px-4 pb-2",children:y.jsx("div",{className:"flex flex-wrap gap-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl p-1",children:Nze.map(({key:b,label:x})=>y.jsx("button",{onClick:()=>n(b),className:`
                  flex-1 min-w-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200
                  ${e===b?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}
                `,children:x},b))})}),y.jsx("div",{className:"px-4 pb-3 overflow-x-auto scrollbar-hide",children:y.jsxs("div",{className:"inline-flex gap-1.5 min-w-max",children:[Rze.map(({value:b,label:x})=>y.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b)),c.map(({value:b,label:x})=>y.jsx("button",{onClick:()=>i(b),className:`
                  px-3 py-1 rounded-full text-xs font-medium transition-all duration-200
                  ${r===b?"bg-blue-500 text-white shadow-sm":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}
                `,children:x},b))]})})]}),y.jsxs("div",{className:"px-4 pt-4",children:[e==="totals"&&y.jsx(Lze,{items:u.items,total:u.total}),e==="breakdown"&&y.jsx(Vze,{data:f.data,categoryKeys:f.categoryKeys,colorMap:f.colorMap,nameMap:m,average:f.average}),e==="income"&&y.jsx(Bze,{data:h.data,sourceKeys:h.sourceKeys,colorMap:h.colorMap,average:h.average}),e==="savings"&&y.jsx(Fze,{data:g.data})]})]})},Lze=({items:t,total:e})=>t.length===0?y.jsx(XS,{message:"No spending data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:y.jsxs("div",{className:"relative no-select-chart",children:[y.jsx(vS,{width:"100%",height:280,children:y.jsxs(Ize,{children:[y.jsx(kJ,{data:t,dataKey:"amount",nameKey:"categoryName",cx:"50%",cy:"50%",innerRadius:"55%",outerRadius:"80%",paddingAngle:2,strokeWidth:0,isAnimationActive:!1,children:t.map((n,r)=>y.jsx(ay,{fill:n.color},r))}),y.jsx(FS,{content:({active:n,payload:r})=>{if(!n||!r?.length)return null;const i=r[0].payload,a=e>0?(i.amount/e*100).toFixed(1):"0";return y.jsxs("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 shadow-lg text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:i.color}}),y.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:i.categoryName})]}),y.jsxs("div",{className:"text-zinc-600 dark:text-zinc-300",children:[Xw(i.amount)," (",a,"%)"]})]})},contentStyle:{backgroundColor:"transparent",border:"none",padding:0,borderRadius:0,boxShadow:"none"}})]})}),y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none z-10",children:[y.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Total Spent"}),y.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:eM(e)})]})]})}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Categories"}),y.jsx("div",{className:"space-y-2",children:t.map(n=>{const r=e>0?(n.amount/e*100).toFixed(1):"0";return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2.5",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),y.jsx("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:n.categoryName})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[r,"%"]}),y.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white w-20 text-right",children:Xw(n.amount)})]})]},n.categoryId)})})]})]}),Vze=({data:t,categoryKeys:e,colorMap:n,nameMap:r,average:i})=>t.length===0||e.length===0?y.jsx(XS,{message:"No spending data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Spending by Category"}),y.jsx(vS,{width:"100%",height:300,children:y.jsxs(JR,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(KS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(WS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(YS,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(FS,{cursor:!1,content:a=>y.jsx(lee,{...a,colorMap:n,nameMap:r})}),y.jsx(HR,{y:i,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${eM(i)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>y.jsx(Zv,{dataKey:a,stackId:"spending",fill:n[a],radius:[0,0,0,0],name:r[a]||a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),y.jsx(cee,{keys:e,colorMap:n,nameMap:r})]}),Bze=({data:t,sourceKeys:e,colorMap:n,average:r})=>{const i=A.useMemo(()=>{const a={};return e.forEach(s=>{a[s]=s}),a},[e]);return t.length===0||e.length===0?y.jsx(XS,{message:"No income data for this time period."}):y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Income by Source"}),y.jsx(vS,{width:"100%",height:300,children:y.jsxs(JR,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(KS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(WS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(YS,{tickFormatter:a=>`$${(a/1e3).toFixed(1)}k`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(FS,{cursor:!1,content:a=>y.jsx(lee,{...a,colorMap:n,nameMap:i})}),y.jsx(HR,{y:r,stroke:"currentColor",strokeDasharray:"8 4",strokeWidth:3,className:"text-black dark:text-white",label:{value:`${eM(r)} (avg)`,position:"insideTopRight",fill:document.documentElement.classList.contains("dark")?"#ffffff":"#000000",fontSize:11,fontWeight:600}}),e.map(a=>y.jsx(Zv,{dataKey:a,stackId:"income",fill:n[a],radius:[0,0,0,0],name:a,isAnimationActive:!1,animationBegin:0,animationDuration:0},a))]})})]}),y.jsx(cee,{keys:e,colorMap:n,nameMap:i})]})},Fze=({data:t})=>{if(t.length===0)return y.jsx(XS,{message:"No data for this time period."});const e=t.length>0?Math.round(t.reduce((n,r)=>n+r.savingsPercent,0)/t.length*10)/10:0;return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:"Income Allocation (Savings Base)"}),y.jsxs("span",{className:"text-xs font-medium text-blue-500",children:["Avg Savings: ",e,"%"]})]}),y.jsx(vS,{width:"100%",height:300,children:y.jsxs(JR,{data:t,margin:{top:10,right:10,left:-10,bottom:0},children:[y.jsx(KS,{strokeDasharray:"3 3",stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700"}),y.jsx(WS,{dataKey:"monthLabel",tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(YS,{domain:[0,100],tickFormatter:n=>`${n}%`,tick:{fontSize:11},className:"text-zinc-500 dark:text-zinc-400",axisLine:!1,tickLine:!1}),y.jsx(FS,{content:jze}),y.jsx(Zv,{dataKey:"savingsPercent",stackId:"allocation",fill:"#3B82F6",name:"Savings & Investments",radius:[0,0,0,0]}),y.jsx(Zv,{dataKey:"spendingPercent",stackId:"allocation",fill:"#4ADE80",name:"Spending",radius:[0,0,0,0]})]})})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Savings & Investments"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Spending"})]})]}),y.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-2",children:"Pay yourself first: savings grows from the bottom, reinforcing the goal of maximizing your savings rate."})]}),y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Monthly Savings Rate"}),y.jsx("div",{className:"space-y-2",children:t.map(n=>y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 w-10",children:n.monthLabel}),y.jsx("div",{className:"flex-1 mx-3 h-2 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${n.savingsPercent}%`}})}),y.jsxs("span",{className:`text-sm font-medium w-14 text-right ${n.savingsPercent>=20?"text-blue-500":n.savingsPercent>=10?"text-amber-500":"text-red-500"}`,children:[n.savingsPercent.toFixed(1),"%"]})]},n.month))})]})]})},cee=({keys:t,colorMap:e,nameMap:n})=>y.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-zinc-100 dark:border-zinc-800",children:[y.jsx("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-3",children:"Legend"}),y.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:t.map(r=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e[r]}}),y.jsx("span",{className:"text-xs text-zinc-600 dark:text-zinc-300",children:n[r]||r})]},r))})]}),XS=({message:t})=>y.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[y.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-4",children:y.jsx(P$,{className:"w-8 h-8 text-zinc-400"})}),y.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm",children:t})]}),tl=({children:t})=>y.jsx(Gn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),Uze=()=>{const t=Ms();return y.jsx(ba,{mode:"wait",children:y.jsxs(eoe,{location:t,children:[y.jsx(ro,{path:"/",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(bwe,{})})})}),y.jsx(ro,{path:"/envelope/:id",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(Twe,{})})})}),y.jsx(ro,{path:"/add-envelope",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(kwe,{})})})}),y.jsx(ro,{path:"/add-transaction",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(oY,{})})})}),y.jsx(ro,{path:"/transactions",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(n_e,{})})})}),y.jsx(ro,{path:"/settings",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(Cwe,{})})})}),y.jsx(ro,{path:"/settings/categories",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(Iwe,{})})})}),y.jsx(ro,{path:"/verify-email",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(sG,{})})})}),y.jsx(ro,{path:"/analytics",element:y.jsx(tl,{children:y.jsx(ra,{children:y.jsx(zze,{})})})})]},t.pathname)})},$ze=()=>{const t=es(),{envelopes:e,appSettings:n}=sn(),r=A.useRef(!1);return A.useEffect(()=>{const i=n?.siriToken;if(!i||e.length===0)return;const a=St(rt,"siriQueries",i),s=uf(a,async o=>{if(!o.exists()||r.current)return;const c=o.data();if(!c?.query||c.consumed)return;if(Date.now()-(c.timestamp||0)>12e4){try{await oa(a)}catch(f){console.error("Failed to cleanup stale Siri query",f)}return}console.log(" Siri: Found pending query in Firestore:",c.query),r.current=!0;try{await oa(a);const f=await sY(c.query,e);console.log(" Siri: Parsed result:",f),sessionStorage.setItem("siriParsedData",JSON.stringify(f)),sessionStorage.setItem("siriQuery",c.query),t(`/add-transaction?siri=${Date.now()}`),window.dispatchEvent(new CustomEvent("siri-query-ready"))}catch(f){console.error(" Siri: Error processing query:",f)}finally{r.current=!1}},o=>{console.error(" Siri: Error listening for queries:",o)});return()=>s()},[e,n?.siriToken,t]),null};function qze(){const[t,e]=A.useState(!0),[n,r]=A.useState(!1),[i,a]=A.useState(null),{appSettings:s,isOnboardingActive:o}=sn(),{isAuthenticated:c,isInitialized:u,initializeAuth:f,lastAuthTime:h,offlineGracePeriod:g,currentUser:m}=$a();if(A.useEffect(()=>{const w=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(w)},[]),A.useEffect(()=>f(),[f]),A.useEffect(()=>{(async()=>{const S=new URLSearchParams(window.location.search),T=S.get("mode"),I=S.get("oobCode");if(T==="resetPassword"&&I){console.log(" Processing password reset from URL"),a(I);return}if(T==="verifyEmail"&&I){console.log(" Processing email verification from URL");try{await jie(za,I),console.log(" Email verification successful");const N=window.location.pathname;window.history.replaceState({},document.title,N),alert("Email verified successfully! You can now sign in.")}catch(N){console.error(" Email verification failed:",N),alert("Email verification failed. The link may be expired or invalid.")}}})()},[]),A.useEffect(()=>{const w=document.documentElement,S=window.matchMedia("(prefers-color-scheme: dark)"),T=()=>{const I=s?.theme??"system",N=S.matches;I==="dark"||I==="system"&&N?w.classList.add("dark"):w.classList.remove("dark")};if(T(),s?.theme==="system")return S.addEventListener("change",T),()=>S.removeEventListener("change",T)},[s]),A.useEffect(()=>{const w=document.documentElement;switch(s?.fontSize??"medium"){case"extra-small":w.style.fontSize="75%";break;case"small":w.style.fontSize="87.5%";break;case"large":w.style.fontSize="112.5%";break;case"extra-large":w.style.fontSize="125%";break;default:w.style.fontSize="100%"}},[s?.fontSize]),t||!u)return y.jsx(oG,{message:"Initializing Personal Budget..."});if(i)return y.jsx(ra,{children:y.jsx(Jfe,{oobCode:i,onSuccess:()=>{a(null);const w=window.location.pathname;window.history.replaceState({},document.title,w)},onCancel:()=>{a(null);const w=window.location.pathname;window.history.replaceState({},document.title,w)}})});if(!c)return m?y.jsx(ra,{children:y.jsx(sG,{})}):y.jsx(ra,{children:y.jsx(Zfe,{})});const x=typeof navigator<"u"&&!navigator.onLine&&c&&h&&Date.now()-h<g;return y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:y.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:y.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),y.jsxs(ra,{children:[x&&y.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:y.jsxs("div",{className:"flex",children:[y.jsx("div",{className:"flex-shrink-0",children:y.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),y.jsx("div",{className:"ml-3",children:y.jsxs("p",{className:"text-sm",children:[y.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((g-(Date.now()-h))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),y.jsxs(Toe,{children:[y.jsx($ze,{}),y.jsx(Uze,{}),n&&y.jsxs("div",{className:"fixed inset-0 z-[60]",children:[y.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),y.jsx("div",{className:"absolute inset-0",children:y.jsx(oY,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),!o&&y.jsx(Lve,{onAddTransaction:()=>r(!0)})]}),y.jsx(zve,{})]})]})}Jte({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});Xte.createRoot(document.getElementById("root")).render(y.jsx(A.StrictMode,{children:y.jsx(qze,{})}));export{vt as T,rt as a,Yfe as b,XL as c,St as d,vi as e,bs as f,bA as g,oa as h,uf as o,ks as q,aa as s,id as t,so as u,Vfe as w};
