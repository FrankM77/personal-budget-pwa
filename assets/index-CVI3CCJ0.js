(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function uj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $y={exports:{}},tf={};var bA;function dj(){if(bA)return tf;bA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return tf.Fragment=e,tf.jsx=n,tf.jsxs=n,tf}var xA;function fj(){return xA||(xA=1,$y.exports=dj()),$y.exports}var v=fj(),Hy={exports:{}},it={};var _A;function hj(){if(_A)return it;_A=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),m=Symbol.iterator;function b(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function T(F,Y,ne){this.props=F,this.context=Y,this.refs=E,this.updater=ne||_}T.prototype.isReactComponent={},T.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function C(){}C.prototype=T.prototype;function N(F,Y,ne){this.props=F,this.context=Y,this.refs=E,this.updater=ne||_}var L=N.prototype=new C;L.constructor=N,w(L,T.prototype),L.isPureReactComponent=!0;var j=Array.isArray;function M(){}var A={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function D(F,Y,ne){var Z=ne.ref;return{$$typeof:t,type:F,key:Y,ref:Z!==void 0?Z:null,props:ne}}function V(F,Y){return D(F.type,Y,F.props)}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function B(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ne){return Y[ne]})}var O=/\/+/g;function W(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?B(""+F.key):Y.toString(36)}function X(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(M,M):(F.status="pending",F.then(function(Y){F.status==="pending"&&(F.status="fulfilled",F.value=Y)},function(Y){F.status==="pending"&&(F.status="rejected",F.reason=Y)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function H(F,Y,ne,Z,oe){var ce=typeof F;(ce==="undefined"||ce==="boolean")&&(F=null);var me=!1;if(F===null)me=!0;else switch(ce){case"bigint":case"string":case"number":me=!0;break;case"object":switch(F.$$typeof){case t:case e:me=!0;break;case h:return me=F._init,H(me(F._payload),Y,ne,Z,oe)}}if(me)return oe=oe(F),me=Z===""?"."+W(F,0):Z,j(oe)?(ne="",me!=null&&(ne=me.replace(O,"$&/")+"/"),H(oe,Y,ne,"",function(Ne){return Ne})):oe!=null&&(P(oe)&&(oe=V(oe,ne+(oe.key==null||F&&F.key===oe.key?"":(""+oe.key).replace(O,"$&/")+"/")+me)),Y.push(oe)),1;me=0;var ge=Z===""?".":Z+":";if(j(F))for(var Te=0;Te<F.length;Te++)Z=F[Te],ce=ge+W(Z,Te),me+=H(Z,Y,ne,ce,oe);else if(Te=b(F),typeof Te=="function")for(F=Te.call(F),Te=0;!(Z=F.next()).done;)Z=Z.value,ce=ge+W(Z,Te++),me+=H(Z,Y,ne,ce,oe);else if(ce==="object"){if(typeof F.then=="function")return H(X(F),Y,ne,Z,oe);throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return me}function K(F,Y,ne){if(F==null)return F;var Z=[],oe=0;return H(F,Z,"","",function(ce){return Y.call(ne,ce,oe++)}),Z}function ee(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(ne){(F._status===0||F._status===-1)&&(F._status=1,F._result=ne)},function(ne){(F._status===0||F._status===-1)&&(F._status=2,F._result=ne)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var ie=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},q={map:K,forEach:function(F,Y,ne){K(F,function(){Y.apply(this,arguments)},ne)},count:function(F){var Y=0;return K(F,function(){Y++}),Y},toArray:function(F){return K(F,function(Y){return Y})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return it.Activity=g,it.Children=q,it.Component=T,it.Fragment=n,it.Profiler=i,it.PureComponent=N,it.StrictMode=r,it.Suspense=u,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,it.__COMPILER_RUNTIME={__proto__:null,c:function(F){return A.H.useMemoCache(F)}},it.cache=function(F){return function(){return F.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(F,Y,ne){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Z=w({},F.props),oe=F.key;if(Y!=null)for(ce in Y.key!==void 0&&(oe=""+Y.key),Y)!R.call(Y,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Y.ref===void 0||(Z[ce]=Y[ce]);var ce=arguments.length-2;if(ce===1)Z.children=ne;else if(1<ce){for(var me=Array(ce),ge=0;ge<ce;ge++)me[ge]=arguments[ge+2];Z.children=me}return D(F.type,oe,Z)},it.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},it.createElement=function(F,Y,ne){var Z,oe={},ce=null;if(Y!=null)for(Z in Y.key!==void 0&&(ce=""+Y.key),Y)R.call(Y,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(oe[Z]=Y[Z]);var me=arguments.length-2;if(me===1)oe.children=ne;else if(1<me){for(var ge=Array(me),Te=0;Te<me;Te++)ge[Te]=arguments[Te+2];oe.children=ge}if(F&&F.defaultProps)for(Z in me=F.defaultProps,me)oe[Z]===void 0&&(oe[Z]=me[Z]);return D(F,ce,oe)},it.createRef=function(){return{current:null}},it.forwardRef=function(F){return{$$typeof:c,render:F}},it.isValidElement=P,it.lazy=function(F){return{$$typeof:h,_payload:{_status:-1,_result:F},_init:ee}},it.memo=function(F,Y){return{$$typeof:d,type:F,compare:Y===void 0?null:Y}},it.startTransition=function(F){var Y=A.T,ne={};A.T=ne;try{var Z=F(),oe=A.S;oe!==null&&oe(ne,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(M,ie)}catch(ce){ie(ce)}finally{Y!==null&&ne.types!==null&&(Y.types=ne.types),A.T=Y}},it.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},it.use=function(F){return A.H.use(F)},it.useActionState=function(F,Y,ne){return A.H.useActionState(F,Y,ne)},it.useCallback=function(F,Y){return A.H.useCallback(F,Y)},it.useContext=function(F){return A.H.useContext(F)},it.useDebugValue=function(){},it.useDeferredValue=function(F,Y){return A.H.useDeferredValue(F,Y)},it.useEffect=function(F,Y){return A.H.useEffect(F,Y)},it.useEffectEvent=function(F){return A.H.useEffectEvent(F)},it.useId=function(){return A.H.useId()},it.useImperativeHandle=function(F,Y,ne){return A.H.useImperativeHandle(F,Y,ne)},it.useInsertionEffect=function(F,Y){return A.H.useInsertionEffect(F,Y)},it.useLayoutEffect=function(F,Y){return A.H.useLayoutEffect(F,Y)},it.useMemo=function(F,Y){return A.H.useMemo(F,Y)},it.useOptimistic=function(F,Y){return A.H.useOptimistic(F,Y)},it.useReducer=function(F,Y,ne){return A.H.useReducer(F,Y,ne)},it.useRef=function(F){return A.H.useRef(F)},it.useState=function(F){return A.H.useState(F)},it.useSyncExternalStore=function(F,Y,ne){return A.H.useSyncExternalStore(F,Y,ne)},it.useTransition=function(){return A.H.useTransition()},it.version="19.2.0",it}var wA;function A1(){return wA||(wA=1,Hy.exports=hj()),Hy.exports}var U=A1();const of=uj(U);var qy={exports:{}},nf={},Yy={exports:{}},Xy={};var SA;function pj(){return SA||(SA=1,(function(t){function e(H,K){var ee=H.length;H.push(K);e:for(;0<ee;){var ie=ee-1>>>1,q=H[ie];if(0<i(q,K))H[ie]=K,H[ee]=q,ee=ie;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var K=H[0],ee=H.pop();if(ee!==K){H[0]=ee;e:for(var ie=0,q=H.length,F=q>>>1;ie<F;){var Y=2*(ie+1)-1,ne=H[Y],Z=Y+1,oe=H[Z];if(0>i(ne,ee))Z<q&&0>i(oe,ne)?(H[ie]=oe,H[Z]=ee,ie=Z):(H[ie]=ne,H[Y]=ee,ie=Y);else if(Z<q&&0>i(oe,ee))H[ie]=oe,H[Z]=ee,ie=Z;else break e}}return K}function i(H,K){var ee=H.sortIndex-K.sortIndex;return ee!==0?ee:H.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,g=null,m=3,b=!1,_=!1,w=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=H)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function j(H){if(w=!1,L(H),!_)if(n(u)!==null)_=!0,M||(M=!0,B());else{var K=n(d);K!==null&&X(j,K.startTime-H)}}var M=!1,A=-1,R=5,D=-1;function V(){return E?!0:!(t.unstable_now()-D<R)}function P(){if(E=!1,M){var H=t.unstable_now();D=H;var K=!0;try{e:{_=!1,w&&(w=!1,C(A),A=-1),b=!0;var ee=m;try{t:{for(L(H),g=n(u);g!==null&&!(g.expirationTime>H&&V());){var ie=g.callback;if(typeof ie=="function"){g.callback=null,m=g.priorityLevel;var q=ie(g.expirationTime<=H);if(H=t.unstable_now(),typeof q=="function"){g.callback=q,L(H),K=!0;break t}g===n(u)&&r(u),L(H)}else r(u);g=n(u)}if(g!==null)K=!0;else{var F=n(d);F!==null&&X(j,F.startTime-H),K=!1}}break e}finally{g=null,m=ee,b=!1}K=void 0}}finally{K?B():M=!1}}}var B;if(typeof N=="function")B=function(){N(P)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,W=O.port2;O.port1.onmessage=P,B=function(){W.postMessage(null)}}else B=function(){T(P,0)};function X(H,K){A=T(function(){H(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var ee=m;m=K;try{return H()}finally{m=ee}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ee=m;m=H;try{return K()}finally{m=ee}},t.unstable_scheduleCallback=function(H,K,ee){var ie=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ie+ee:ie):ee=ie,H){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ee+q,H={id:h++,callback:K,priorityLevel:H,startTime:ee,expirationTime:q,sortIndex:-1},ee>ie?(H.sortIndex=ee,e(d,H),n(u)===null&&H===n(d)&&(w?(C(A),A=-1):w=!0,X(j,ee-ie))):(H.sortIndex=q,e(u,H),_||b||(_=!0,M||(M=!0,B()))),H},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(H){var K=m;return function(){var ee=m;m=K;try{return H.apply(this,arguments)}finally{m=ee}}}})(Xy)),Xy}var EA;function gj(){return EA||(EA=1,Yy.exports=pj()),Yy.exports}var Wy={exports:{}},sr={};var TA;function mj(){if(TA)return sr;TA=1;var t=A1();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:d,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return sr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sr.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,h)},sr.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},sr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},sr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},sr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:m,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:g,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},sr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},sr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,g=c(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},sr.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},sr.requestFormReset=function(u){r.d.r(u)},sr.unstable_batchedUpdates=function(u,d){return u(d)},sr.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},sr.useFormStatus=function(){return o.H.useHostTransitionStatus()},sr.version="19.2.0",sr}var AA;function vj(){if(AA)return Wy.exports;AA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wy.exports=mj(),Wy.exports}var CA;function yj(){if(CA)return nf;CA=1;var t=gj(),e=A1(),n=vj();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,p=l;;){var x=f.return;if(x===null)break;var S=x.alternate;if(S===null){if(p=x.return,p!==null){f=p;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===f)return u(x),s;if(S===p)return u(x),l;S=S.sibling}throw Error(r(188))}if(f.return!==p.return)f=x,p=S;else{for(var I=!1,G=x.child;G;){if(G===f){I=!0,f=x,p=S;break}if(G===p){I=!0,p=x,f=S;break}G=G.sibling}if(!I){for(G=S.child;G;){if(G===f){I=!0,f=S,p=x;break}if(G===p){I=!0,p=S,f=x;break}G=G.sibling}if(!I)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function W(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case j:return"Suspense";case M:return"SuspenseList";case D:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case N:return s.displayName||"Context";case C:return(s._context.displayName||"Context")+".Consumer";case L:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case A:return l=s.displayName||null,l!==null?l:W(s.type)||"Memo";case R:l=s._payload,s=s._init;try{return W(s(l))}catch{}}return null}var X=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ie=[],q=-1;function F(s){return{current:s}}function Y(s){0>q||(s.current=ie[q],ie[q]=null,q--)}function ne(s,l){q++,ie[q]=s.current,s.current=l}var Z=F(null),oe=F(null),ce=F(null),me=F(null);function ge(s,l){switch(ne(ce,l),ne(oe,s),ne(Z,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?FT(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=FT(l),s=GT(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Y(Z),ne(Z,s)}function Te(){Y(Z),Y(oe),Y(ce)}function Ne(s){s.memoizedState!==null&&ne(me,s);var l=Z.current,f=GT(l,s.type);l!==f&&(ne(oe,s),ne(Z,f))}function ae(s){oe.current===s&&(Y(Z),Y(oe)),me.current===s&&(Y(me),Qd._currentValue=ee)}var Ae,De;function Me(s){if(Ae===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Ae=l&&l[1]||"",De=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+s+De}var Be=!1;function Ve(s,l){if(!s||Be)return"";Be=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(pe){var fe=pe}Reflect.construct(s,[],xe)}else{try{xe.call()}catch(pe){fe=pe}s.call(xe.prototype)}}else{try{throw Error()}catch(pe){fe=pe}(xe=s())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(pe){if(pe&&fe&&typeof pe.stack=="string")return[pe.stack,fe.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=p.DetermineComponentFrameRoot(),I=S[0],G=S[1];if(I&&G){var Q=I.split(`
`),de=G.split(`
`);for(x=p=0;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;for(;x<de.length&&!de[x].includes("DetermineComponentFrameRoot");)x++;if(p===Q.length||x===de.length)for(p=Q.length-1,x=de.length-1;1<=p&&0<=x&&Q[p]!==de[x];)x--;for(;1<=p&&0<=x;p--,x--)if(Q[p]!==de[x]){if(p!==1||x!==1)do if(p--,x--,0>x||Q[p]!==de[x]){var ve=`
`+Q[p].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=p&&0<=x);break}}}finally{Be=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Me(f):""}function Se(s,l){switch(s.tag){case 26:case 27:case 5:return Me(s.type);case 16:return Me("Lazy");case 13:return s.child!==l&&l!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return Ve(s.type,!1);case 11:return Ve(s.type.render,!1);case 1:return Ve(s.type,!0);case 31:return Me("Activity");default:return""}}function ze(s){try{var l="",f=null;do l+=Se(s,f),f=s,s=s.return;while(s);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Ie=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,st=t.unstable_cancelCallback,Tt=t.unstable_shouldYield,Ke=t.unstable_requestPaint,ut=t.unstable_now,kt=t.unstable_getCurrentPriorityLevel,cn=t.unstable_ImmediatePriority,Vt=t.unstable_UserBlockingPriority,wn=t.unstable_NormalPriority,Br=t.unstable_LowPriority,ta=t.unstable_IdlePriority,Fa=t.log,Ds=t.unstable_setDisableYieldValue,Ur=null,Sn=null;function ar(s){if(typeof Fa=="function"&&Ds(s),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(Ur,s)}catch{}}var tn=Math.clz32?Math.clz32:Is,sc=Math.log,Ns=Math.LN2;function Is(s){return s>>>=0,s===0?32:31-(sc(s)/Ns|0)|0}var ft=256,nn=262144,rn=4194304;function Fr(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ni(s,l,f){var p=s.pendingLanes;if(p===0)return 0;var x=0,S=s.suspendedLanes,I=s.pingedLanes;s=s.warmLanes;var G=p&134217727;return G!==0?(p=G&~S,p!==0?x=Fr(p):(I&=G,I!==0?x=Fr(I):f||(f=G&~s,f!==0&&(x=Fr(f))))):(G=p&~S,G!==0?x=Fr(G):I!==0?x=Fr(I):f||(f=p&~s,f!==0&&(x=Fr(f)))),x===0?0:l!==0&&l!==x&&(l&S)===0&&(S=x&-x,f=l&-l,S>=f||S===32&&(f&4194048)!==0)?l:x}function pr(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function X0(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gh(){var s=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),s}function na(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function Zo(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function W0(s,l,f,p,x,S){var I=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var G=s.entanglements,Q=s.expirationTimes,de=s.hiddenUpdates;for(f=I&~f;0<f;){var ve=31-tn(f),xe=1<<ve;G[ve]=0,Q[ve]=-1;var fe=de[ve];if(fe!==null)for(de[ve]=null,ve=0;ve<fe.length;ve++){var pe=fe[ve];pe!==null&&(pe.lane&=-536870913)}f&=~xe}p!==0&&Jo(s,p,0),S!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=S&~(I&~l))}function Jo(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var p=31-tn(l);s.entangledLanes|=l,s.entanglements[p]=s.entanglements[p]|1073741824|f&261930}function nd(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var p=31-tn(f),x=1<<p;x&l|s[p]&l&&(s[p]|=l),f&=~x}}function rd(s,l){var f=l&-l;return f=(f&42)!==0?1:el(f),(f&(s.suspendedLanes|l))!==0?0:f}function el(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ga(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function $h(){var s=K.p;return s!==0?s:(s=window.event,s===void 0?32:fA(s.type))}function Ci(s,l){var f=K.p;try{return K.p=s,l()}finally{K.p=f}}var Ri=Math.random().toString(36).slice(2),En="__reactFiber$"+Ri,$n="__reactProps$"+Ri,ra="__reactContainer$"+Ri,oc="__reactEvents$"+Ri,K0="__reactListeners$"+Ri,Hh="__reactHandles$"+Ri,qh="__reactResources$"+Ri,ia="__reactMarker$"+Ri;function lc(s){delete s[En],delete s[$n],delete s[oc],delete s[K0],delete s[Hh]}function aa(s){var l=s[En];if(l)return l;for(var f=s.parentNode;f;){if(l=f[ra]||f[En]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=KT(s);s!==null;){if(f=s[En])return f;s=KT(s)}return l}s=f,f=s.parentNode}return null}function ri(s){if(s=s[En]||s[ra]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Gr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function sa(s){var l=s[qh];return l||(l=s[qh]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Tn(s){s[ia]=!0}var id=new Set,ad={};function oa(s,l){la(s,l),la(s+"Capture",l)}function la(s,l){for(ad[s]=l,s=0;s<l.length;s++)id.add(l[s])}var sd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),od={},ld={};function Yh(s){return Ie.call(ld,s)?!0:Ie.call(od,s)?!1:sd.test(s)?ld[s]=!0:(od[s]=!0,!1)}function cc(s,l,f){if(Yh(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function $r(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function An(s,l,f,p){if(p===null)s.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+p)}}function Hn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ms(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function cd(s,l,f){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var x=p.get,S=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(I){f=""+I,S.call(this,I)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Mt(s){if(!s._valueTracker){var l=Ms(s)?"checked":"value";s._valueTracker=cd(s,l,""+s[l])}}function tl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),p="";return s&&(p=Ms(s)?s.checked?"true":"false":s.value),s=p,s!==f?(l.setValue(s),!0):!1}function ca(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var nl=/[\n"\\]/g;function Tr(s){return s.replace(nl,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function uc(s,l,f,p,x,S,I,G){s.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.type=I:s.removeAttribute("type"),l!=null?I==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Hn(l)):s.value!==""+Hn(l)&&(s.value=""+Hn(l)):I!=="submit"&&I!=="reset"||s.removeAttribute("value"),l!=null?ud(s,I,Hn(l)):f!=null?ud(s,I,Hn(f)):p!=null&&s.removeAttribute("value"),x==null&&S!=null&&(s.defaultChecked=!!S),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?s.name=""+Hn(G):s.removeAttribute("name")}function Xh(s,l,f,p,x,S,I,G){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.type=S),l!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||l!=null)){Mt(s);return}f=f!=null?""+Hn(f):"",l=l!=null?""+Hn(l):f,G||l===s.value||(s.value=l),s.defaultValue=l}p=p??x,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=G?s.checked:!!p,s.defaultChecked=!!p,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.name=I),Mt(s)}function ud(s,l,f){l==="number"&&ca(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function Os(s,l,f,p){if(s=s.options,l){l={};for(var x=0;x<f.length;x++)l["$"+f[x]]=!0;for(f=0;f<s.length;f++)x=l.hasOwnProperty("$"+s[f].value),s[f].selected!==x&&(s[f].selected=x),x&&p&&(s[f].defaultSelected=!0)}else{for(f=""+Hn(f),l=null,x=0;x<s.length;x++){if(s[x].value===f){s[x].selected=!0,p&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function Wh(s,l,f){if(l!=null&&(l=""+Hn(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+Hn(f):""}function Ps(s,l,f,p){if(l==null){if(p!=null){if(f!=null)throw Error(r(92));if(X(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),l=f}f=Hn(l),s.defaultValue=f,p=s.textContent,p===f&&p!==""&&p!==null&&(s.value=p),Mt(s)}function Ar(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Kh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dd(s,l,f){var p=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":p?s.setProperty(l,f):typeof f!="number"||f===0||Kh.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function fd(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var x in l)p=l[x],l.hasOwnProperty(x)&&f[x]!==p&&dd(s,x,p)}else for(var S in l)l.hasOwnProperty(S)&&dd(s,S,l[S])}function dc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fc(s){return js.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ki(){}var hd=null;function ii(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Vs=null,ua=null;function rl(s){var l=ri(s);if(l&&(s=l.stateNode)){var f=s[$n]||null;e:switch(s=l.stateNode,l.type){case"input":if(uc(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Tr(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var p=f[l];if(p!==s&&p.form===s.form){var x=p[$n]||null;if(!x)throw Error(r(90));uc(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<f.length;l++)p=f[l],p.form===s.form&&tl(p)}break e;case"textarea":Wh(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&Os(s,!!f.multiple,l,!1)}}}var hc=!1;function zs(s,l,f){if(hc)return s(l,f);hc=!0;try{var p=s(l);return p}finally{if(hc=!1,(Vs!==null||ua!==null)&&($p(),Vs&&(l=Vs,s=ua,ua=Vs=null,rl(l),s)))for(l=0;l<s.length;l++)rl(s[l])}}function Di(s,l){var f=s.stateNode;if(f===null)return null;var p=f[$n]||null;if(p===null)return null;f=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),il=!1;if(ai)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){il=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{il=!1}var da=null,pd=null,al=null;function gd(){if(al)return al;var s,l=pd,f=l.length,p,x="value"in da?da.value:da.textContent,S=x.length;for(s=0;s<f&&l[s]===x[s];s++);var I=f-s;for(p=1;p<=I&&l[f-p]===x[S-p];p++);return al=x.slice(s,1<p?1-p:void 0)}function sl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function $a(){return!0}function Ni(){return!1}function Xn(s){function l(f,p,x,S,I){this._reactName=f,this._targetInst=x,this.type=p,this.nativeEvent=S,this.target=I,this.currentTarget=null;for(var G in s)s.hasOwnProperty(G)&&(f=s[G],this[G]=f?f(S):S[G]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?$a:Ni,this.isPropagationStopped=Ni,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),l}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=Xn(Ha),Ls=g({},Ha,{view:0,detail:0}),md=Xn(Ls),Bs,pc,ha,gc=g({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ha&&(ha&&s.type==="mousemove"?(Bs=s.screenX-ha.screenX,pc=s.screenY-ha.screenY):pc=Bs=0,ha=s),Bs)},movementY:function(s){return"movementY"in s?s.movementY:pc}}),vd=Xn(gc),ol=g({},gc,{dataTransfer:0}),Zh=Xn(ol),Jh=g({},Ls,{relatedTarget:0}),ll=Xn(Jh),yd=g({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),ep=Xn(yd),mc=g({},Ha,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),tp=Xn(mc),np=g({},Ha,{data:0}),pa=Xn(np),rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ip={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ap={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=ap[s])?!!l[s]:!1}function Us(){return sp}var gr=g({},Ls,{key:function(s){if(s.key){var l=rp[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=sl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ip[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(s){return s.type==="keypress"?sl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?sl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),op=Xn(gr),lp=g({},gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qa=Xn(lp),y=g({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),k=Xn(y),z=g({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),$=Xn(z),le=g({},gc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),he=Xn(le),Re=g({},Ha,{newState:0,oldState:0}),ot=Xn(Re),gn=[9,13,27,32],Dt=ai&&"CompositionEvent"in window,Qt=null;ai&&"documentMode"in document&&(Qt=document.documentMode);var si=ai&&"TextEvent"in window&&!Qt,ga=ai&&(!Dt||Qt&&8<Qt&&11>=Qt),Ii=" ",Mi=!1;function cl(s,l){switch(s){case"keyup":return gn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var yc=!1;function OP(s,l){switch(s){case"compositionend":return vc(l);case"keypress":return l.which!==32?null:(Mi=!0,Ii);case"textInput":return s=l.data,s===Ii&&Mi?null:s;default:return null}}function PP(s,l){if(yc)return s==="compositionend"||!Dt&&cl(s,l)?(s=gd(),al=pd=da=null,yc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ga&&l.locale!=="ko"?null:l.data;default:return null}}var jP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jw(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!jP[s.type]:l==="textarea"}function eS(s,l,f,p){Vs?ua?ua.push(p):ua=[p]:Vs=p,l=Qp(l,"onChange"),0<l.length&&(f=new fa("onChange","change",null,f,p),s.push({event:f,listeners:l}))}var bd=null,xd=null;function VP(s){jT(s,0)}function cp(s){var l=Gr(s);if(tl(l))return s}function tS(s,l){if(s==="change")return l}var nS=!1;if(ai){var Q0;if(ai){var Z0="oninput"in document;if(!Z0){var rS=document.createElement("div");rS.setAttribute("oninput","return;"),Z0=typeof rS.oninput=="function"}Q0=Z0}else Q0=!1;nS=Q0&&(!document.documentMode||9<document.documentMode)}function iS(){bd&&(bd.detachEvent("onpropertychange",aS),xd=bd=null)}function aS(s){if(s.propertyName==="value"&&cp(xd)){var l=[];eS(l,xd,s,ii(s)),zs(VP,l)}}function zP(s,l,f){s==="focusin"?(iS(),bd=l,xd=f,bd.attachEvent("onpropertychange",aS)):s==="focusout"&&iS()}function LP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return cp(xd)}function BP(s,l){if(s==="click")return cp(l)}function UP(s,l){if(s==="input"||s==="change")return cp(l)}function FP(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Hr=typeof Object.is=="function"?Object.is:FP;function _d(s,l){if(Hr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var x=f[p];if(!Ie.call(l,x)||!Hr(s[x],l[x]))return!1}return!0}function sS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function oS(s,l){var f=sS(s);s=0;for(var p;f;){if(f.nodeType===3){if(p=s+f.textContent.length,s<=l&&p>=l)return{node:f,offset:l-s};s=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=sS(f)}}function lS(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?lS(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function cS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=ca(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=ca(s.document)}return l}function J0(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var GP=ai&&"documentMode"in document&&11>=document.documentMode,bc=null,ev=null,wd=null,tv=!1;function uS(s,l,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;tv||bc==null||bc!==ca(p)||(p=bc,"selectionStart"in p&&J0(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),wd&&_d(wd,p)||(wd=p,p=Qp(ev,"onSelect"),0<p.length&&(l=new fa("onSelect","select",null,l,f),s.push({event:l,listeners:p}),l.target=bc)))}function ul(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var xc={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionrun:ul("Transition","TransitionRun"),transitionstart:ul("Transition","TransitionStart"),transitioncancel:ul("Transition","TransitionCancel"),transitionend:ul("Transition","TransitionEnd")},nv={},dS={};ai&&(dS=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function dl(s){if(nv[s])return nv[s];if(!xc[s])return s;var l=xc[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in dS)return nv[s]=l[f];return s}var fS=dl("animationend"),hS=dl("animationiteration"),pS=dl("animationstart"),$P=dl("transitionrun"),HP=dl("transitionstart"),qP=dl("transitioncancel"),gS=dl("transitionend"),mS=new Map,rv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rv.push("scrollEnd");function Oi(s,l){mS.set(s,l),oa(l,[s])}var up=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},oi=[],_c=0,iv=0;function dp(){for(var s=_c,l=iv=_c=0;l<s;){var f=oi[l];oi[l++]=null;var p=oi[l];oi[l++]=null;var x=oi[l];oi[l++]=null;var S=oi[l];if(oi[l++]=null,p!==null&&x!==null){var I=p.pending;I===null?x.next=x:(x.next=I.next,I.next=x),p.pending=x}S!==0&&vS(f,x,S)}}function fp(s,l,f,p){oi[_c++]=s,oi[_c++]=l,oi[_c++]=f,oi[_c++]=p,iv|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function av(s,l,f,p){return fp(s,l,f,p),hp(s)}function fl(s,l){return fp(s,null,null,l),hp(s)}function vS(s,l,f){s.lanes|=f;var p=s.alternate;p!==null&&(p.lanes|=f);for(var x=!1,S=s.return;S!==null;)S.childLanes|=f,p=S.alternate,p!==null&&(p.childLanes|=f),S.tag===22&&(s=S.stateNode,s===null||s._visibility&1||(x=!0)),s=S,S=S.return;return s.tag===3?(S=s.stateNode,x&&l!==null&&(x=31-tn(f),s=S.hiddenUpdates,p=s[x],p===null?s[x]=[l]:p.push(l),l.lane=f|536870912),S):null}function hp(s){if(50<$d)throw $d=0,py=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var wc={};function YP(s,l,f,p){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(s,l,f,p){return new YP(s,l,f,p)}function sv(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ya(s,l){var f=s.alternate;return f===null?(f=qr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function yS(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function pp(s,l,f,p,x,S){var I=0;if(p=s,typeof s=="function")sv(s)&&(I=1);else if(typeof s=="string")I=Z3(s,f,Z.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case D:return s=qr(31,f,l,x),s.elementType=D,s.lanes=S,s;case w:return hl(f.children,x,S,l);case E:I=8,x|=24;break;case T:return s=qr(12,f,l,x|2),s.elementType=T,s.lanes=S,s;case j:return s=qr(13,f,l,x),s.elementType=j,s.lanes=S,s;case M:return s=qr(19,f,l,x),s.elementType=M,s.lanes=S,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:I=10;break e;case C:I=9;break e;case L:I=11;break e;case A:I=14;break e;case R:I=16,p=null;break e}I=29,f=Error(r(130,s===null?"null":typeof s,"")),p=null}return l=qr(I,f,l,x),l.elementType=s,l.type=p,l.lanes=S,l}function hl(s,l,f,p){return s=qr(7,s,p,l),s.lanes=f,s}function ov(s,l,f){return s=qr(6,s,null,l),s.lanes=f,s}function bS(s){var l=qr(18,null,null,0);return l.stateNode=s,l}function lv(s,l,f){return l=qr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var xS=new WeakMap;function li(s,l){if(typeof s=="object"&&s!==null){var f=xS.get(s);return f!==void 0?f:(l={value:s,source:l,stack:ze(l)},xS.set(s,l),l)}return{value:s,source:l,stack:ze(l)}}var Sc=[],Ec=0,gp=null,Sd=0,ci=[],ui=0,Fs=null,ma=1,va="";function Xa(s,l){Sc[Ec++]=Sd,Sc[Ec++]=gp,gp=s,Sd=l}function _S(s,l,f){ci[ui++]=ma,ci[ui++]=va,ci[ui++]=Fs,Fs=s;var p=ma;s=va;var x=32-tn(p)-1;p&=~(1<<x),f+=1;var S=32-tn(l)+x;if(30<S){var I=x-x%5;S=(p&(1<<I)-1).toString(32),p>>=I,x-=I,ma=1<<32-tn(l)+x|f<<x|p,va=S+s}else ma=1<<S|f<<x|p,va=s}function cv(s){s.return!==null&&(Xa(s,1),_S(s,1,0))}function uv(s){for(;s===gp;)gp=Sc[--Ec],Sc[Ec]=null,Sd=Sc[--Ec],Sc[Ec]=null;for(;s===Fs;)Fs=ci[--ui],ci[ui]=null,va=ci[--ui],ci[ui]=null,ma=ci[--ui],ci[ui]=null}function wS(s,l){ci[ui++]=ma,ci[ui++]=va,ci[ui++]=Fs,ma=l.id,va=l.overflow,Fs=s}var Wn=null,Xt=null,_t=!1,Gs=null,di=!1,dv=Error(r(519));function $s(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ed(li(l,s)),dv}function SS(s){var l=s.stateNode,f=s.type,p=s.memoizedProps;switch(l[En]=s,l[$n]=p,f){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(f=0;f<qd.length;f++)pt(qd[f],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Xh(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),Ps(l,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||p.suppressHydrationWarning===!0||BT(l.textContent,f)?(p.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),p.onScroll!=null&&pt("scroll",l),p.onScrollEnd!=null&&pt("scrollend",l),p.onClick!=null&&(l.onclick=ki),l=!0):l=!1,l||$s(s,!0)}function ES(s){for(Wn=s.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:Wn=Wn.return}}function Tc(s){if(s!==Wn)return!1;if(!_t)return ES(s),_t=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||ky(s.type,s.memoizedProps)),f=!f),f&&Xt&&$s(s),ES(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Xt=WT(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Xt=WT(s)}else l===27?(l=Xt,io(s.type)?(s=Oy,Oy=null,Xt=s):Xt=l):Xt=Wn?hi(s.stateNode.nextSibling):null;return!0}function pl(){Xt=Wn=null,_t=!1}function fv(){var s=Gs;return s!==null&&(Dr===null?Dr=s:Dr.push.apply(Dr,s),Gs=null),s}function Ed(s){Gs===null?Gs=[s]:Gs.push(s)}var hv=F(null),gl=null,Wa=null;function Hs(s,l,f){ne(hv,l._currentValue),l._currentValue=f}function Ka(s){s._currentValue=hv.current,Y(hv)}function pv(s,l,f){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===f)break;s=s.return}}function gv(s,l,f,p){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var S=x.dependencies;if(S!==null){var I=x.child;S=S.firstContext;e:for(;S!==null;){var G=S;S=x;for(var Q=0;Q<l.length;Q++)if(G.context===l[Q]){S.lanes|=f,G=S.alternate,G!==null&&(G.lanes|=f),pv(S.return,f,s),p||(I=null);break e}S=G.next}}else if(x.tag===18){if(I=x.return,I===null)throw Error(r(341));I.lanes|=f,S=I.alternate,S!==null&&(S.lanes|=f),pv(I,f,s),I=null}else I=x.child;if(I!==null)I.return=x;else for(I=x;I!==null;){if(I===s){I=null;break}if(x=I.sibling,x!==null){x.return=I.return,I=x;break}I=I.return}x=I}}function Ac(s,l,f,p){s=null;for(var x=l,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var I=x.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var G=x.type;Hr(x.pendingProps.value,I.value)||(s!==null?s.push(G):s=[G])}}else if(x===me.current){if(I=x.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(Qd):s=[Qd])}x=x.return}s!==null&&gv(l,s,f,p),l.flags|=262144}function mp(s){for(s=s.firstContext;s!==null;){if(!Hr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ml(s){gl=s,Wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Kn(s){return TS(gl,s)}function vp(s,l){return gl===null&&ml(s),TS(s,l)}function TS(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},Wa===null){if(s===null)throw Error(r(308));Wa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Wa=Wa.next=l;return f}var XP=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,p){s.push(p)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},WP=t.unstable_scheduleCallback,KP=t.unstable_NormalPriority,Cn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mv(){return{controller:new XP,data:new Map,refCount:0}}function Td(s){s.refCount--,s.refCount===0&&WP(KP,function(){s.controller.abort()})}var Ad=null,vv=0,Cc=0,Rc=null;function QP(s,l){if(Ad===null){var f=Ad=[];vv=0,Cc=xy(),Rc={status:"pending",value:void 0,then:function(p){f.push(p)}}}return vv++,l.then(AS,AS),l}function AS(){if(--vv===0&&Ad!==null){Rc!==null&&(Rc.status="fulfilled");var s=Ad;Ad=null,Cc=0,Rc=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function ZP(s,l){var f=[],p={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return s.then(function(){p.status="fulfilled",p.value=l;for(var x=0;x<f.length;x++)(0,f[x])(l)},function(x){for(p.status="rejected",p.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),p}var CS=H.S;H.S=function(s,l){uT=ut(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&QP(s,l),CS!==null&&CS(s,l)};var vl=F(null);function yv(){var s=vl.current;return s!==null?s:$t.pooledCache}function yp(s,l){l===null?ne(vl,vl.current):ne(vl,l.pool)}function RS(){var s=yv();return s===null?null:{parent:Cn._currentValue,pool:s}}var kc=Error(r(460)),bv=Error(r(474)),bp=Error(r(542)),xp={then:function(){}};function kS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function DS(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(ki,ki),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,IS(s),s;default:if(typeof l.status=="string")l.then(ki,ki);else{if(s=$t,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(p){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=p}},function(p){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,IS(s),s}throw bl=l,kc}}function yl(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(bl=f,kc):f}}var bl=null;function NS(){if(bl===null)throw Error(r(459));var s=bl;return bl=null,s}function IS(s){if(s===kc||s===bp)throw Error(r(483))}var Dc=null,Cd=0;function _p(s){var l=Cd;return Cd+=1,Dc===null&&(Dc=[]),DS(Dc,s,l)}function Rd(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function wp(s,l){throw l.$$typeof===m?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function MS(s){function l(se,re){if(s){var ue=se.deletions;ue===null?(se.deletions=[re],se.flags|=16):ue.push(re)}}function f(se,re){if(!s)return null;for(;re!==null;)l(se,re),re=re.sibling;return null}function p(se){for(var re=new Map;se!==null;)se.key!==null?re.set(se.key,se):re.set(se.index,se),se=se.sibling;return re}function x(se,re){return se=Ya(se,re),se.index=0,se.sibling=null,se}function S(se,re,ue){return se.index=ue,s?(ue=se.alternate,ue!==null?(ue=ue.index,ue<re?(se.flags|=67108866,re):ue):(se.flags|=67108866,re)):(se.flags|=1048576,re)}function I(se){return s&&se.alternate===null&&(se.flags|=67108866),se}function G(se,re,ue,ye){return re===null||re.tag!==6?(re=ov(ue,se.mode,ye),re.return=se,re):(re=x(re,ue),re.return=se,re)}function Q(se,re,ue,ye){var $e=ue.type;return $e===w?ve(se,re,ue.props.children,ye,ue.key):re!==null&&(re.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===R&&yl($e)===re.type)?(re=x(re,ue.props),Rd(re,ue),re.return=se,re):(re=pp(ue.type,ue.key,ue.props,null,se.mode,ye),Rd(re,ue),re.return=se,re)}function de(se,re,ue,ye){return re===null||re.tag!==4||re.stateNode.containerInfo!==ue.containerInfo||re.stateNode.implementation!==ue.implementation?(re=lv(ue,se.mode,ye),re.return=se,re):(re=x(re,ue.children||[]),re.return=se,re)}function ve(se,re,ue,ye,$e){return re===null||re.tag!==7?(re=hl(ue,se.mode,ye,$e),re.return=se,re):(re=x(re,ue),re.return=se,re)}function xe(se,re,ue){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=ov(""+re,se.mode,ue),re.return=se,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return ue=pp(re.type,re.key,re.props,null,se.mode,ue),Rd(ue,re),ue.return=se,ue;case _:return re=lv(re,se.mode,ue),re.return=se,re;case R:return re=yl(re),xe(se,re,ue)}if(X(re)||B(re))return re=hl(re,se.mode,ue,null),re.return=se,re;if(typeof re.then=="function")return xe(se,_p(re),ue);if(re.$$typeof===N)return xe(se,vp(se,re),ue);wp(se,re)}return null}function fe(se,re,ue,ye){var $e=re!==null?re.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return $e!==null?null:G(se,re,""+ue,ye);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return ue.key===$e?Q(se,re,ue,ye):null;case _:return ue.key===$e?de(se,re,ue,ye):null;case R:return ue=yl(ue),fe(se,re,ue,ye)}if(X(ue)||B(ue))return $e!==null?null:ve(se,re,ue,ye,null);if(typeof ue.then=="function")return fe(se,re,_p(ue),ye);if(ue.$$typeof===N)return fe(se,re,vp(se,ue),ye);wp(se,ue)}return null}function pe(se,re,ue,ye,$e){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return se=se.get(ue)||null,G(re,se,""+ye,$e);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return se=se.get(ye.key===null?ue:ye.key)||null,Q(re,se,ye,$e);case _:return se=se.get(ye.key===null?ue:ye.key)||null,de(re,se,ye,$e);case R:return ye=yl(ye),pe(se,re,ue,ye,$e)}if(X(ye)||B(ye))return se=se.get(ue)||null,ve(re,se,ye,$e,null);if(typeof ye.then=="function")return pe(se,re,ue,_p(ye),$e);if(ye.$$typeof===N)return pe(se,re,ue,vp(re,ye),$e);wp(re,ye)}return null}function je(se,re,ue,ye){for(var $e=null,Ct=null,Ue=re,dt=re=0,vt=null;Ue!==null&&dt<ue.length;dt++){Ue.index>dt?(vt=Ue,Ue=null):vt=Ue.sibling;var Rt=fe(se,Ue,ue[dt],ye);if(Rt===null){Ue===null&&(Ue=vt);break}s&&Ue&&Rt.alternate===null&&l(se,Ue),re=S(Rt,re,dt),Ct===null?$e=Rt:Ct.sibling=Rt,Ct=Rt,Ue=vt}if(dt===ue.length)return f(se,Ue),_t&&Xa(se,dt),$e;if(Ue===null){for(;dt<ue.length;dt++)Ue=xe(se,ue[dt],ye),Ue!==null&&(re=S(Ue,re,dt),Ct===null?$e=Ue:Ct.sibling=Ue,Ct=Ue);return _t&&Xa(se,dt),$e}for(Ue=p(Ue);dt<ue.length;dt++)vt=pe(Ue,se,dt,ue[dt],ye),vt!==null&&(s&&vt.alternate!==null&&Ue.delete(vt.key===null?dt:vt.key),re=S(vt,re,dt),Ct===null?$e=vt:Ct.sibling=vt,Ct=vt);return s&&Ue.forEach(function(co){return l(se,co)}),_t&&Xa(se,dt),$e}function Xe(se,re,ue,ye){if(ue==null)throw Error(r(151));for(var $e=null,Ct=null,Ue=re,dt=re=0,vt=null,Rt=ue.next();Ue!==null&&!Rt.done;dt++,Rt=ue.next()){Ue.index>dt?(vt=Ue,Ue=null):vt=Ue.sibling;var co=fe(se,Ue,Rt.value,ye);if(co===null){Ue===null&&(Ue=vt);break}s&&Ue&&co.alternate===null&&l(se,Ue),re=S(co,re,dt),Ct===null?$e=co:Ct.sibling=co,Ct=co,Ue=vt}if(Rt.done)return f(se,Ue),_t&&Xa(se,dt),$e;if(Ue===null){for(;!Rt.done;dt++,Rt=ue.next())Rt=xe(se,Rt.value,ye),Rt!==null&&(re=S(Rt,re,dt),Ct===null?$e=Rt:Ct.sibling=Rt,Ct=Rt);return _t&&Xa(se,dt),$e}for(Ue=p(Ue);!Rt.done;dt++,Rt=ue.next())Rt=pe(Ue,se,dt,Rt.value,ye),Rt!==null&&(s&&Rt.alternate!==null&&Ue.delete(Rt.key===null?dt:Rt.key),re=S(Rt,re,dt),Ct===null?$e=Rt:Ct.sibling=Rt,Ct=Rt);return s&&Ue.forEach(function(cj){return l(se,cj)}),_t&&Xa(se,dt),$e}function Ut(se,re,ue,ye){if(typeof ue=="object"&&ue!==null&&ue.type===w&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:e:{for(var $e=ue.key;re!==null;){if(re.key===$e){if($e=ue.type,$e===w){if(re.tag===7){f(se,re.sibling),ye=x(re,ue.props.children),ye.return=se,se=ye;break e}}else if(re.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===R&&yl($e)===re.type){f(se,re.sibling),ye=x(re,ue.props),Rd(ye,ue),ye.return=se,se=ye;break e}f(se,re);break}else l(se,re);re=re.sibling}ue.type===w?(ye=hl(ue.props.children,se.mode,ye,ue.key),ye.return=se,se=ye):(ye=pp(ue.type,ue.key,ue.props,null,se.mode,ye),Rd(ye,ue),ye.return=se,se=ye)}return I(se);case _:e:{for($e=ue.key;re!==null;){if(re.key===$e)if(re.tag===4&&re.stateNode.containerInfo===ue.containerInfo&&re.stateNode.implementation===ue.implementation){f(se,re.sibling),ye=x(re,ue.children||[]),ye.return=se,se=ye;break e}else{f(se,re);break}else l(se,re);re=re.sibling}ye=lv(ue,se.mode,ye),ye.return=se,se=ye}return I(se);case R:return ue=yl(ue),Ut(se,re,ue,ye)}if(X(ue))return je(se,re,ue,ye);if(B(ue)){if($e=B(ue),typeof $e!="function")throw Error(r(150));return ue=$e.call(ue),Xe(se,re,ue,ye)}if(typeof ue.then=="function")return Ut(se,re,_p(ue),ye);if(ue.$$typeof===N)return Ut(se,re,vp(se,ue),ye);wp(se,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,re!==null&&re.tag===6?(f(se,re.sibling),ye=x(re,ue),ye.return=se,se=ye):(f(se,re),ye=ov(ue,se.mode,ye),ye.return=se,se=ye),I(se)):f(se,re)}return function(se,re,ue,ye){try{Cd=0;var $e=Ut(se,re,ue,ye);return Dc=null,$e}catch(Ue){if(Ue===kc||Ue===bp)throw Ue;var Ct=qr(29,Ue,null,se.mode);return Ct.lanes=ye,Ct.return=se,Ct}finally{}}}var xl=MS(!0),OS=MS(!1),qs=!1;function xv(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _v(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ys(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Xs(s,l,f){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Nt&2)!==0){var x=p.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),p.pending=l,l=hp(s),vS(s,null,f),l}return fp(s,p,l,f),hp(s)}function kd(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,nd(s,f)}}function wv(s,l){var f=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var x=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var I={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?x=S=I:S=S.next=I,f=f.next}while(f!==null);S===null?x=S=l:S=S.next=l}else x=S=l;f={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:p.shared,callbacks:p.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Sv=!1;function Dd(){if(Sv){var s=Rc;if(s!==null)throw s}}function Nd(s,l,f,p){Sv=!1;var x=s.updateQueue;qs=!1;var S=x.firstBaseUpdate,I=x.lastBaseUpdate,G=x.shared.pending;if(G!==null){x.shared.pending=null;var Q=G,de=Q.next;Q.next=null,I===null?S=de:I.next=de,I=Q;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,G=ve.lastBaseUpdate,G!==I&&(G===null?ve.firstBaseUpdate=de:G.next=de,ve.lastBaseUpdate=Q))}if(S!==null){var xe=x.baseState;I=0,ve=de=Q=null,G=S;do{var fe=G.lane&-536870913,pe=fe!==G.lane;if(pe?(mt&fe)===fe:(p&fe)===fe){fe!==0&&fe===Cc&&(Sv=!0),ve!==null&&(ve=ve.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var je=s,Xe=G;fe=l;var Ut=f;switch(Xe.tag){case 1:if(je=Xe.payload,typeof je=="function"){xe=je.call(Ut,xe,fe);break e}xe=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Xe.payload,fe=typeof je=="function"?je.call(Ut,xe,fe):je,fe==null)break e;xe=g({},xe,fe);break e;case 2:qs=!0}}fe=G.callback,fe!==null&&(s.flags|=64,pe&&(s.flags|=8192),pe=x.callbacks,pe===null?x.callbacks=[fe]:pe.push(fe))}else pe={lane:fe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},ve===null?(de=ve=pe,Q=xe):ve=ve.next=pe,I|=fe;if(G=G.next,G===null){if(G=x.shared.pending,G===null)break;pe=G,G=pe.next,pe.next=null,x.lastBaseUpdate=pe,x.shared.pending=null}}while(!0);ve===null&&(Q=xe),x.baseState=Q,x.firstBaseUpdate=de,x.lastBaseUpdate=ve,S===null&&(x.shared.lanes=0),Js|=I,s.lanes=I,s.memoizedState=xe}}function PS(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function jS(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)PS(f[s],l)}var Nc=F(null),Sp=F(0);function VS(s,l){s=as,ne(Sp,s),ne(Nc,l),as=s|l.baseLanes}function Ev(){ne(Sp,as),ne(Nc,Nc.current)}function Tv(){as=Sp.current,Y(Nc),Y(Sp)}var Yr=F(null),fi=null;function Ws(s){var l=s.alternate;ne(mn,mn.current&1),ne(Yr,s),fi===null&&(l===null||Nc.current!==null||l.memoizedState!==null)&&(fi=s)}function Av(s){ne(mn,mn.current),ne(Yr,s),fi===null&&(fi=s)}function zS(s){s.tag===22?(ne(mn,mn.current),ne(Yr,s),fi===null&&(fi=s)):Ks()}function Ks(){ne(mn,mn.current),ne(Yr,Yr.current)}function Xr(s){Y(Yr),fi===s&&(fi=null),Y(mn)}var mn=F(0);function Ep(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Iy(f)||My(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Qa=0,lt=null,Lt=null,Rn=null,Tp=!1,Ic=!1,_l=!1,Ap=0,Id=0,Mc=null,JP=0;function un(){throw Error(r(321))}function Cv(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Hr(s[f],l[f]))return!1;return!0}function Rv(s,l,f,p,x,S){return Qa=S,lt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=s===null||s.memoizedState===null?_E:Gv,_l=!1,S=f(p,x),_l=!1,Ic&&(S=BS(l,f,p,x)),LS(s),S}function LS(s){H.H=Pd;var l=Lt!==null&&Lt.next!==null;if(Qa=0,Rn=Lt=lt=null,Tp=!1,Id=0,Mc=null,l)throw Error(r(300));s===null||kn||(s=s.dependencies,s!==null&&mp(s)&&(kn=!0))}function BS(s,l,f,p){lt=s;var x=0;do{if(Ic&&(Mc=null),Id=0,Ic=!1,25<=x)throw Error(r(301));if(x+=1,Rn=Lt=null,s.updateQueue!=null){var S=s.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}H.H=wE,S=l(f,p)}while(Ic);return S}function e3(){var s=H.H,l=s.useState()[0];return l=typeof l.then=="function"?Md(l):l,s=s.useState()[0],(Lt!==null?Lt.memoizedState:null)!==s&&(lt.flags|=1024),l}function kv(){var s=Ap!==0;return Ap=0,s}function Dv(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Nv(s){if(Tp){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Tp=!1}Qa=0,Rn=Lt=lt=null,Ic=!1,Id=Ap=0,Mc=null}function mr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?lt.memoizedState=Rn=s:Rn=Rn.next=s,Rn}function vn(){if(Lt===null){var s=lt.alternate;s=s!==null?s.memoizedState:null}else s=Lt.next;var l=Rn===null?lt.memoizedState:Rn.next;if(l!==null)Rn=l,Lt=s;else{if(s===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Lt=s,s={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Rn===null?lt.memoizedState=Rn=s:Rn=Rn.next=s}return Rn}function Cp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Md(s){var l=Id;return Id+=1,Mc===null&&(Mc=[]),s=DS(Mc,s,l),l=lt,(Rn===null?l.memoizedState:Rn.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?_E:Gv),s}function Rp(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Md(s);if(s.$$typeof===N)return Kn(s)}throw Error(r(438,String(s)))}function Iv(s){var l=null,f=lt.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var p=lt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Cp(),lt.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),p=0;p<s;p++)f[p]=V;return l.index++,f}function Za(s,l){return typeof l=="function"?l(s):l}function kp(s){var l=vn();return Mv(l,Lt,s)}function Mv(s,l,f){var p=s.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var x=s.baseQueue,S=p.pending;if(S!==null){if(x!==null){var I=x.next;x.next=S.next,S.next=I}l.baseQueue=x=S,p.pending=null}if(S=s.baseState,x===null)s.memoizedState=S;else{l=x.next;var G=I=null,Q=null,de=l,ve=!1;do{var xe=de.lane&-536870913;if(xe!==de.lane?(mt&xe)===xe:(Qa&xe)===xe){var fe=de.revertLane;if(fe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),xe===Cc&&(ve=!0);else if((Qa&fe)===fe){de=de.next,fe===Cc&&(ve=!0);continue}else xe={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},Q===null?(G=Q=xe,I=S):Q=Q.next=xe,lt.lanes|=fe,Js|=fe;xe=de.action,_l&&f(S,xe),S=de.hasEagerState?de.eagerState:f(S,xe)}else fe={lane:xe,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},Q===null?(G=Q=fe,I=S):Q=Q.next=fe,lt.lanes|=xe,Js|=xe;de=de.next}while(de!==null&&de!==l);if(Q===null?I=S:Q.next=G,!Hr(S,s.memoizedState)&&(kn=!0,ve&&(f=Rc,f!==null)))throw f;s.memoizedState=S,s.baseState=I,s.baseQueue=Q,p.lastRenderedState=S}return x===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function Ov(s){var l=vn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var p=f.dispatch,x=f.pending,S=l.memoizedState;if(x!==null){f.pending=null;var I=x=x.next;do S=s(S,I.action),I=I.next;while(I!==x);Hr(S,l.memoizedState)||(kn=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),f.lastRenderedState=S}return[S,p]}function US(s,l,f){var p=lt,x=vn(),S=_t;if(S){if(f===void 0)throw Error(r(407));f=f()}else f=l();var I=!Hr((Lt||x).memoizedState,f);if(I&&(x.memoizedState=f,kn=!0),x=x.queue,Vv($S.bind(null,p,x,s),[s]),x.getSnapshot!==l||I||Rn!==null&&Rn.memoizedState.tag&1){if(p.flags|=2048,Oc(9,{destroy:void 0},GS.bind(null,p,x,f,l),null),$t===null)throw Error(r(349));S||(Qa&127)!==0||FS(p,l,f)}return f}function FS(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=lt.updateQueue,l===null?(l=Cp(),lt.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function GS(s,l,f,p){l.value=f,l.getSnapshot=p,HS(l)&&qS(s)}function $S(s,l,f){return f(function(){HS(l)&&qS(s)})}function HS(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Hr(s,f)}catch{return!0}}function qS(s){var l=fl(s,2);l!==null&&Nr(l,s,2)}function Pv(s){var l=mr();if(typeof s=="function"){var f=s;if(s=f(),_l){ar(!0);try{f()}finally{ar(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:s},l}function YS(s,l,f,p){return s.baseState=f,Mv(s,Lt,typeof p=="function"?p:Za)}function t3(s,l,f,p,x){if(Ip(s))throw Error(r(485));if(s=l.action,s!==null){var S={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){S.listeners.push(I)}};H.T!==null?f(!0):S.isTransition=!1,p(S),f=l.pending,f===null?(S.next=l.pending=S,XS(l,S)):(S.next=f.next,l.pending=f.next=S)}}function XS(s,l){var f=l.action,p=l.payload,x=s.state;if(l.isTransition){var S=H.T,I={};H.T=I;try{var G=f(x,p),Q=H.S;Q!==null&&Q(I,G),WS(s,l,G)}catch(de){jv(s,l,de)}finally{S!==null&&I.types!==null&&(S.types=I.types),H.T=S}}else try{S=f(x,p),WS(s,l,S)}catch(de){jv(s,l,de)}}function WS(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){KS(s,l,p)},function(p){return jv(s,l,p)}):KS(s,l,f)}function KS(s,l,f){l.status="fulfilled",l.value=f,QS(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,XS(s,f)))}function jv(s,l,f){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=f,QS(l),l=l.next;while(l!==p)}s.action=null}function QS(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function ZS(s,l){return l}function JS(s,l){if(_t){var f=$t.formState;if(f!==null){e:{var p=lt;if(_t){if(Xt){t:{for(var x=Xt,S=di;x.nodeType!==8;){if(!S){x=null;break t}if(x=hi(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Xt=hi(x.nextSibling),p=x.data==="F!";break e}}$s(p)}p=!1}p&&(l=f[0])}}return f=mr(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ZS,lastRenderedState:l},f.queue=p,f=yE.bind(null,lt,p),p.dispatch=f,p=Pv(!1),S=Fv.bind(null,lt,!1,p.queue),p=mr(),x={state:l,dispatch:null,action:s,pending:null},p.queue=x,f=t3.bind(null,lt,x,S,f),x.dispatch=f,p.memoizedState=s,[l,f,!1]}function eE(s){var l=vn();return tE(l,Lt,s)}function tE(s,l,f){if(l=Mv(s,l,ZS)[0],s=kp(Za)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=Md(l)}catch(I){throw I===kc?bp:I}else p=l;l=vn();var x=l.queue,S=x.dispatch;return f!==l.memoizedState&&(lt.flags|=2048,Oc(9,{destroy:void 0},n3.bind(null,x,f),null)),[p,S,s]}function n3(s,l){s.action=l}function nE(s){var l=vn(),f=Lt;if(f!==null)return tE(l,f,s);vn(),l=l.memoizedState,f=vn();var p=f.queue.dispatch;return f.memoizedState=s,[l,p,!1]}function Oc(s,l,f,p){return s={tag:s,create:f,deps:p,inst:l,next:null},l=lt.updateQueue,l===null&&(l=Cp(),lt.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(p=f.next,f.next=s,s.next=p,l.lastEffect=s),s}function rE(){return vn().memoizedState}function Dp(s,l,f,p){var x=mr();lt.flags|=s,x.memoizedState=Oc(1|l,{destroy:void 0},f,p===void 0?null:p)}function Np(s,l,f,p){var x=vn();p=p===void 0?null:p;var S=x.memoizedState.inst;Lt!==null&&p!==null&&Cv(p,Lt.memoizedState.deps)?x.memoizedState=Oc(l,S,f,p):(lt.flags|=s,x.memoizedState=Oc(1|l,S,f,p))}function iE(s,l){Dp(8390656,8,s,l)}function Vv(s,l){Np(2048,8,s,l)}function r3(s){lt.flags|=4;var l=lt.updateQueue;if(l===null)l=Cp(),lt.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function aE(s){var l=vn().memoizedState;return r3({ref:l,nextImpl:s}),function(){if((Nt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function sE(s,l){return Np(4,2,s,l)}function oE(s,l){return Np(4,4,s,l)}function lE(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function cE(s,l,f){f=f!=null?f.concat([s]):null,Np(4,4,lE.bind(null,l,s),f)}function zv(){}function uE(s,l){var f=vn();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&&Cv(l,p[1])?p[0]:(f.memoizedState=[s,l],s)}function dE(s,l){var f=vn();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&&Cv(l,p[1]))return p[0];if(p=s(),_l){ar(!0);try{s()}finally{ar(!1)}}return f.memoizedState=[p,l],p}function Lv(s,l,f){return f===void 0||(Qa&1073741824)!==0&&(mt&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=fT(),lt.lanes|=s,Js|=s,f)}function fE(s,l,f,p){return Hr(f,l)?f:Nc.current!==null?(s=Lv(s,f,p),Hr(s,l)||(kn=!0),s):(Qa&42)===0||(Qa&1073741824)!==0&&(mt&261930)===0?(kn=!0,s.memoizedState=f):(s=fT(),lt.lanes|=s,Js|=s,l)}function hE(s,l,f,p,x){var S=K.p;K.p=S!==0&&8>S?S:8;var I=H.T,G={};H.T=G,Fv(s,!1,l,f);try{var Q=x(),de=H.S;if(de!==null&&de(G,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ve=ZP(Q,p);Od(s,l,ve,Qr(s))}else Od(s,l,p,Qr(s))}catch(xe){Od(s,l,{then:function(){},status:"rejected",reason:xe},Qr())}finally{K.p=S,I!==null&&G.types!==null&&(I.types=G.types),H.T=I}}function i3(){}function Bv(s,l,f,p){if(s.tag!==5)throw Error(r(476));var x=pE(s).queue;hE(s,x,l,ee,f===null?i3:function(){return gE(s),f(p)})}function pE(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:ee},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function gE(s){var l=pE(s);l.next===null&&(l=s.alternate.memoizedState),Od(s,l.next.queue,{},Qr())}function Uv(){return Kn(Qd)}function mE(){return vn().memoizedState}function vE(){return vn().memoizedState}function a3(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=Qr();s=Ys(f);var p=Xs(l,s,f);p!==null&&(Nr(p,l,f),kd(p,l,f)),l={cache:mv()},s.payload=l;return}l=l.return}}function s3(s,l,f){var p=Qr();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ip(s)?bE(l,f):(f=av(s,l,f,p),f!==null&&(Nr(f,s,p),xE(f,l,p)))}function yE(s,l,f){var p=Qr();Od(s,l,f,p)}function Od(s,l,f,p){var x={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ip(s))bE(l,x);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var I=l.lastRenderedState,G=S(I,f);if(x.hasEagerState=!0,x.eagerState=G,Hr(G,I))return fp(s,l,x,0),$t===null&&dp(),!1}catch{}finally{}if(f=av(s,l,x,p),f!==null)return Nr(f,s,p),xE(f,l,p),!0}return!1}function Fv(s,l,f,p){if(p={lane:2,revertLane:xy(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ip(s)){if(l)throw Error(r(479))}else l=av(s,f,p,2),l!==null&&Nr(l,s,2)}function Ip(s){var l=s.alternate;return s===lt||l!==null&&l===lt}function bE(s,l){Ic=Tp=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function xE(s,l,f){if((f&4194048)!==0){var p=l.lanes;p&=s.pendingLanes,f|=p,l.lanes=f,nd(s,f)}}var Pd={readContext:Kn,use:Rp,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};Pd.useEffectEvent=un;var _E={readContext:Kn,use:Rp,useCallback:function(s,l){return mr().memoizedState=[s,l===void 0?null:l],s},useContext:Kn,useEffect:iE,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Dp(4194308,4,lE.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Dp(4194308,4,s,l)},useInsertionEffect:function(s,l){Dp(4,2,s,l)},useMemo:function(s,l){var f=mr();l=l===void 0?null:l;var p=s();if(_l){ar(!0);try{s()}finally{ar(!1)}}return f.memoizedState=[p,l],p},useReducer:function(s,l,f){var p=mr();if(f!==void 0){var x=f(l);if(_l){ar(!0);try{f(l)}finally{ar(!1)}}}else x=l;return p.memoizedState=p.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},p.queue=s,s=s.dispatch=s3.bind(null,lt,s),[p.memoizedState,s]},useRef:function(s){var l=mr();return s={current:s},l.memoizedState=s},useState:function(s){s=Pv(s);var l=s.queue,f=yE.bind(null,lt,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:zv,useDeferredValue:function(s,l){var f=mr();return Lv(f,s,l)},useTransition:function(){var s=Pv(!1);return s=hE.bind(null,lt,s.queue,!0,!1),mr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var p=lt,x=mr();if(_t){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),$t===null)throw Error(r(349));(mt&127)!==0||FS(p,l,f)}x.memoizedState=f;var S={value:f,getSnapshot:l};return x.queue=S,iE($S.bind(null,p,S,s),[s]),p.flags|=2048,Oc(9,{destroy:void 0},GS.bind(null,p,S,f,l),null),f},useId:function(){var s=mr(),l=$t.identifierPrefix;if(_t){var f=va,p=ma;f=(p&~(1<<32-tn(p)-1)).toString(32)+f,l="_"+l+"R_"+f,f=Ap++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=JP++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:Uv,useFormState:JS,useActionState:JS,useOptimistic:function(s){var l=mr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Fv.bind(null,lt,!0,f),f.dispatch=l,[s,l]},useMemoCache:Iv,useCacheRefresh:function(){return mr().memoizedState=a3.bind(null,lt)},useEffectEvent:function(s){var l=mr(),f={impl:s};return l.memoizedState=f,function(){if((Nt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Gv={readContext:Kn,use:Rp,useCallback:uE,useContext:Kn,useEffect:Vv,useImperativeHandle:cE,useInsertionEffect:sE,useLayoutEffect:oE,useMemo:dE,useReducer:kp,useRef:rE,useState:function(){return kp(Za)},useDebugValue:zv,useDeferredValue:function(s,l){var f=vn();return fE(f,Lt.memoizedState,s,l)},useTransition:function(){var s=kp(Za)[0],l=vn().memoizedState;return[typeof s=="boolean"?s:Md(s),l]},useSyncExternalStore:US,useId:mE,useHostTransitionStatus:Uv,useFormState:eE,useActionState:eE,useOptimistic:function(s,l){var f=vn();return YS(f,Lt,s,l)},useMemoCache:Iv,useCacheRefresh:vE};Gv.useEffectEvent=aE;var wE={readContext:Kn,use:Rp,useCallback:uE,useContext:Kn,useEffect:Vv,useImperativeHandle:cE,useInsertionEffect:sE,useLayoutEffect:oE,useMemo:dE,useReducer:Ov,useRef:rE,useState:function(){return Ov(Za)},useDebugValue:zv,useDeferredValue:function(s,l){var f=vn();return Lt===null?Lv(f,s,l):fE(f,Lt.memoizedState,s,l)},useTransition:function(){var s=Ov(Za)[0],l=vn().memoizedState;return[typeof s=="boolean"?s:Md(s),l]},useSyncExternalStore:US,useId:mE,useHostTransitionStatus:Uv,useFormState:nE,useActionState:nE,useOptimistic:function(s,l){var f=vn();return Lt!==null?YS(f,Lt,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:Iv,useCacheRefresh:vE};wE.useEffectEvent=aE;function $v(s,l,f,p){l=s.memoizedState,f=f(p,l),f=f==null?l:g({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Hv={enqueueSetState:function(s,l,f){s=s._reactInternals;var p=Qr(),x=Ys(p);x.payload=l,f!=null&&(x.callback=f),l=Xs(s,x,p),l!==null&&(Nr(l,s,p),kd(l,s,p))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var p=Qr(),x=Ys(p);x.tag=1,x.payload=l,f!=null&&(x.callback=f),l=Xs(s,x,p),l!==null&&(Nr(l,s,p),kd(l,s,p))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=Qr(),p=Ys(f);p.tag=2,l!=null&&(p.callback=l),l=Xs(s,p,f),l!==null&&(Nr(l,s,f),kd(l,s,f))}};function SE(s,l,f,p,x,S,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,S,I):l.prototype&&l.prototype.isPureReactComponent?!_d(f,p)||!_d(x,S):!0}function EE(s,l,f,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,p),l.state!==s&&Hv.enqueueReplaceState(l,l.state,null)}function wl(s,l){var f=l;if("ref"in l){f={};for(var p in l)p!=="ref"&&(f[p]=l[p])}if(s=s.defaultProps){f===l&&(f=g({},f));for(var x in s)f[x]===void 0&&(f[x]=s[x])}return f}function TE(s){up(s)}function AE(s){console.error(s)}function CE(s){up(s)}function Mp(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function RE(s,l,f){try{var p=s.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function qv(s,l,f){return f=Ys(f),f.tag=3,f.payload={element:null},f.callback=function(){Mp(s,l)},f}function kE(s){return s=Ys(s),s.tag=3,s}function DE(s,l,f,p){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var S=p.value;s.payload=function(){return x(S)},s.callback=function(){RE(l,f,p)}}var I=f.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(s.callback=function(){RE(l,f,p),typeof x!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var G=p.stack;this.componentDidCatch(p.value,{componentStack:G!==null?G:""})})}function o3(s,l,f,p,x){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=f.alternate,l!==null&&Ac(l,f,x,!0),f=Yr.current,f!==null){switch(f.tag){case 31:case 13:return fi===null?Hp():f.alternate===null&&dn===0&&(dn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,p===xp?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),vy(s,p,x)),!1;case 22:return f.flags|=65536,p===xp?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),vy(s,p,x)),!1}throw Error(r(435,f.tag))}return vy(s,p,x),Hp(),!1}if(_t)return l=Yr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,p!==dv&&(s=Error(r(422),{cause:p}),Ed(li(s,f)))):(p!==dv&&(l=Error(r(423),{cause:p}),Ed(li(l,f))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,p=li(p,f),x=qv(s.stateNode,p,x),wv(s,x),dn!==4&&(dn=2)),!1;var S=Error(r(520),{cause:p});if(S=li(S,f),Gd===null?Gd=[S]:Gd.push(S),dn!==4&&(dn=2),l===null)return!0;p=li(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=x&-x,f.lanes|=s,s=qv(f.stateNode,p,s),wv(f,s),!1;case 1:if(l=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(eo===null||!eo.has(S))))return f.flags|=65536,x&=-x,f.lanes|=x,x=kE(x),DE(x,s,f,p),wv(f,x),!1}f=f.return}while(f!==null);return!1}var Yv=Error(r(461)),kn=!1;function Qn(s,l,f,p){l.child=s===null?OS(l,null,f,p):xl(l,s.child,f,p)}function NE(s,l,f,p,x){f=f.render;var S=l.ref;if("ref"in p){var I={};for(var G in p)G!=="ref"&&(I[G]=p[G])}else I=p;return ml(l),p=Rv(s,l,f,I,S,x),G=kv(),s!==null&&!kn?(Dv(s,l,x),Ja(s,l,x)):(_t&&G&&cv(l),l.flags|=1,Qn(s,l,p,x),l.child)}function IE(s,l,f,p,x){if(s===null){var S=f.type;return typeof S=="function"&&!sv(S)&&S.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=S,ME(s,l,S,p,x)):(s=pp(f.type,null,p,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(S=s.child,!ty(s,x)){var I=S.memoizedProps;if(f=f.compare,f=f!==null?f:_d,f(I,p)&&s.ref===l.ref)return Ja(s,l,x)}return l.flags|=1,s=Ya(S,p),s.ref=l.ref,s.return=l,l.child=s}function ME(s,l,f,p,x){if(s!==null){var S=s.memoizedProps;if(_d(S,p)&&s.ref===l.ref)if(kn=!1,l.pendingProps=p=S,ty(s,x))(s.flags&131072)!==0&&(kn=!0);else return l.lanes=s.lanes,Ja(s,l,x)}return Xv(s,l,f,p,x)}function OE(s,l,f,p){var x=p.children,S=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,s!==null){for(p=l.child=s.child,x=0;p!==null;)x=x|p.lanes|p.childLanes,p=p.sibling;p=x&~S}else p=0,l.child=null;return PE(s,l,S,f,p)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&yp(l,S!==null?S.cachePool:null),S!==null?VS(l,S):Ev(),zS(l);else return p=l.lanes=536870912,PE(s,l,S!==null?S.baseLanes|f:f,f,p)}else S!==null?(yp(l,S.cachePool),VS(l,S),Ks(),l.memoizedState=null):(s!==null&&yp(l,null),Ev(),Ks());return Qn(s,l,x,f),l.child}function jd(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function PE(s,l,f,p,x){var S=yv();return S=S===null?null:{parent:Cn._currentValue,pool:S},l.memoizedState={baseLanes:f,cachePool:S},s!==null&&yp(l,null),Ev(),zS(l),s!==null&&Ac(s,l,p,!0),l.childLanes=x,null}function Op(s,l){return l=jp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function jE(s,l,f){return xl(l,s.child,null,f),s=Op(l,l.pendingProps),s.flags|=2,Xr(l),l.memoizedState=null,s}function l3(s,l,f){var p=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(_t){if(p.mode==="hidden")return s=Op(l,p),l.lanes=536870912,jd(null,s);if(Av(l),(s=Xt)?(s=XT(s,di),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Fs!==null?{id:ma,overflow:va}:null,retryLane:536870912,hydrationErrors:null},f=bS(s),f.return=l,l.child=f,Wn=l,Xt=null)):s=null,s===null)throw $s(l);return l.lanes=536870912,null}return Op(l,p)}var S=s.memoizedState;if(S!==null){var I=S.dehydrated;if(Av(l),x)if(l.flags&256)l.flags&=-257,l=jE(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(kn||Ac(s,l,f,!1),x=(f&s.childLanes)!==0,kn||x){if(p=$t,p!==null&&(I=rd(p,f),I!==0&&I!==S.retryLane))throw S.retryLane=I,fl(s,I),Nr(p,s,I),Yv;Hp(),l=jE(s,l,f)}else s=S.treeContext,Xt=hi(I.nextSibling),Wn=l,_t=!0,Gs=null,di=!1,s!==null&&wS(l,s),l=Op(l,p),l.flags|=4096;return l}return s=Ya(s.child,{mode:p.mode,children:p.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Pp(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function Xv(s,l,f,p,x){return ml(l),f=Rv(s,l,f,p,void 0,x),p=kv(),s!==null&&!kn?(Dv(s,l,x),Ja(s,l,x)):(_t&&p&&cv(l),l.flags|=1,Qn(s,l,f,x),l.child)}function VE(s,l,f,p,x,S){return ml(l),l.updateQueue=null,f=BS(l,p,f,x),LS(s),p=kv(),s!==null&&!kn?(Dv(s,l,S),Ja(s,l,S)):(_t&&p&&cv(l),l.flags|=1,Qn(s,l,f,S),l.child)}function zE(s,l,f,p,x){if(ml(l),l.stateNode===null){var S=wc,I=f.contextType;typeof I=="object"&&I!==null&&(S=Kn(I)),S=new f(p,S),l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Hv,l.stateNode=S,S._reactInternals=l,S=l.stateNode,S.props=p,S.state=l.memoizedState,S.refs={},xv(l),I=f.contextType,S.context=typeof I=="object"&&I!==null?Kn(I):wc,S.state=l.memoizedState,I=f.getDerivedStateFromProps,typeof I=="function"&&($v(l,f,I,p),S.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(I=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),I!==S.state&&Hv.enqueueReplaceState(S,S.state,null),Nd(l,p,S,x),Dd(),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(s===null){S=l.stateNode;var G=l.memoizedProps,Q=wl(f,G);S.props=Q;var de=S.context,ve=f.contextType;I=wc,typeof ve=="object"&&ve!==null&&(I=Kn(ve));var xe=f.getDerivedStateFromProps;ve=typeof xe=="function"||typeof S.getSnapshotBeforeUpdate=="function",G=l.pendingProps!==G,ve||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(G||de!==I)&&EE(l,S,p,I),qs=!1;var fe=l.memoizedState;S.state=fe,Nd(l,p,S,x),Dd(),de=l.memoizedState,G||fe!==de||qs?(typeof xe=="function"&&($v(l,f,xe,p),de=l.memoizedState),(Q=qs||SE(l,f,Q,p,fe,de,I))?(ve||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=de),S.props=p,S.state=de,S.context=I,p=Q):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{S=l.stateNode,_v(s,l),I=l.memoizedProps,ve=wl(f,I),S.props=ve,xe=l.pendingProps,fe=S.context,de=f.contextType,Q=wc,typeof de=="object"&&de!==null&&(Q=Kn(de)),G=f.getDerivedStateFromProps,(de=typeof G=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(I!==xe||fe!==Q)&&EE(l,S,p,Q),qs=!1,fe=l.memoizedState,S.state=fe,Nd(l,p,S,x),Dd();var pe=l.memoizedState;I!==xe||fe!==pe||qs||s!==null&&s.dependencies!==null&&mp(s.dependencies)?(typeof G=="function"&&($v(l,f,G,p),pe=l.memoizedState),(ve=qs||SE(l,f,ve,p,fe,pe,Q)||s!==null&&s.dependencies!==null&&mp(s.dependencies))?(de||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,pe,Q),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,pe,Q)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||I===s.memoizedProps&&fe===s.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&fe===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=pe),S.props=p,S.state=pe,S.context=Q,p=ve):(typeof S.componentDidUpdate!="function"||I===s.memoizedProps&&fe===s.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&fe===s.memoizedState||(l.flags|=1024),p=!1)}return S=p,Pp(s,l),p=(l.flags&128)!==0,S||p?(S=l.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:S.render(),l.flags|=1,s!==null&&p?(l.child=xl(l,s.child,null,x),l.child=xl(l,null,f,x)):Qn(s,l,f,x),l.memoizedState=S.state,s=l.child):s=Ja(s,l,x),s}function LE(s,l,f,p){return pl(),l.flags|=256,Qn(s,l,f,p),l.child}var Wv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kv(s){return{baseLanes:s,cachePool:RS()}}function Qv(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Kr),s}function BE(s,l,f){var p=l.pendingProps,x=!1,S=(l.flags&128)!==0,I;if((I=S)||(I=s!==null&&s.memoizedState===null?!1:(mn.current&2)!==0),I&&(x=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,s===null){if(_t){if(x?Ws(l):Ks(),(s=Xt)?(s=XT(s,di),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Fs!==null?{id:ma,overflow:va}:null,retryLane:536870912,hydrationErrors:null},f=bS(s),f.return=l,l.child=f,Wn=l,Xt=null)):s=null,s===null)throw $s(l);return My(s)?l.lanes=32:l.lanes=536870912,null}var G=p.children;return p=p.fallback,x?(Ks(),x=l.mode,G=jp({mode:"hidden",children:G},x),p=hl(p,x,f,null),G.return=l,p.return=l,G.sibling=p,l.child=G,p=l.child,p.memoizedState=Kv(f),p.childLanes=Qv(s,I,f),l.memoizedState=Wv,jd(null,p)):(Ws(l),Zv(l,G))}var Q=s.memoizedState;if(Q!==null&&(G=Q.dehydrated,G!==null)){if(S)l.flags&256?(Ws(l),l.flags&=-257,l=Jv(s,l,f)):l.memoizedState!==null?(Ks(),l.child=s.child,l.flags|=128,l=null):(Ks(),G=p.fallback,x=l.mode,p=jp({mode:"visible",children:p.children},x),G=hl(G,x,f,null),G.flags|=2,p.return=l,G.return=l,p.sibling=G,l.child=p,xl(l,s.child,null,f),p=l.child,p.memoizedState=Kv(f),p.childLanes=Qv(s,I,f),l.memoizedState=Wv,l=jd(null,p));else if(Ws(l),My(G)){if(I=G.nextSibling&&G.nextSibling.dataset,I)var de=I.dgst;I=de,p=Error(r(419)),p.stack="",p.digest=I,Ed({value:p,source:null,stack:null}),l=Jv(s,l,f)}else if(kn||Ac(s,l,f,!1),I=(f&s.childLanes)!==0,kn||I){if(I=$t,I!==null&&(p=rd(I,f),p!==0&&p!==Q.retryLane))throw Q.retryLane=p,fl(s,p),Nr(I,s,p),Yv;Iy(G)||Hp(),l=Jv(s,l,f)}else Iy(G)?(l.flags|=192,l.child=s.child,l=null):(s=Q.treeContext,Xt=hi(G.nextSibling),Wn=l,_t=!0,Gs=null,di=!1,s!==null&&wS(l,s),l=Zv(l,p.children),l.flags|=4096);return l}return x?(Ks(),G=p.fallback,x=l.mode,Q=s.child,de=Q.sibling,p=Ya(Q,{mode:"hidden",children:p.children}),p.subtreeFlags=Q.subtreeFlags&65011712,de!==null?G=Ya(de,G):(G=hl(G,x,f,null),G.flags|=2),G.return=l,p.return=l,p.sibling=G,l.child=p,jd(null,p),p=l.child,G=s.child.memoizedState,G===null?G=Kv(f):(x=G.cachePool,x!==null?(Q=Cn._currentValue,x=x.parent!==Q?{parent:Q,pool:Q}:x):x=RS(),G={baseLanes:G.baseLanes|f,cachePool:x}),p.memoizedState=G,p.childLanes=Qv(s,I,f),l.memoizedState=Wv,jd(s.child,p)):(Ws(l),f=s.child,s=f.sibling,f=Ya(f,{mode:"visible",children:p.children}),f.return=l,f.sibling=null,s!==null&&(I=l.deletions,I===null?(l.deletions=[s],l.flags|=16):I.push(s)),l.child=f,l.memoizedState=null,f)}function Zv(s,l){return l=jp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function jp(s,l){return s=qr(22,s,null,l),s.lanes=0,s}function Jv(s,l,f){return xl(l,s.child,null,f),s=Zv(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function UE(s,l,f){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),pv(s.return,l,f)}function ey(s,l,f,p,x,S){var I=s.memoizedState;I===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:x,treeForkCount:S}:(I.isBackwards=l,I.rendering=null,I.renderingStartTime=0,I.last=p,I.tail=f,I.tailMode=x,I.treeForkCount=S)}function FE(s,l,f){var p=l.pendingProps,x=p.revealOrder,S=p.tail;p=p.children;var I=mn.current,G=(I&2)!==0;if(G?(I=I&1|2,l.flags|=128):I&=1,ne(mn,I),Qn(s,l,p,f),p=_t?Sd:0,!G&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&UE(s,f,l);else if(s.tag===19)UE(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(x){case"forwards":for(f=l.child,x=null;f!==null;)s=f.alternate,s!==null&&Ep(s)===null&&(x=f),f=f.sibling;f=x,f===null?(x=l.child,l.child=null):(x=f.sibling,f.sibling=null),ey(l,!1,x,f,S,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&Ep(s)===null){l.child=x;break}s=x.sibling,x.sibling=f,f=x,x=s}ey(l,!0,f,null,S,p);break;case"together":ey(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function Ja(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),Js|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Ac(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Ya(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Ya(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function ty(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&mp(s)))}function c3(s,l,f){switch(l.tag){case 3:ge(l,l.stateNode.containerInfo),Hs(l,Cn,s.memoizedState.cache),pl();break;case 27:case 5:Ne(l);break;case 4:ge(l,l.stateNode.containerInfo);break;case 10:Hs(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Av(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Ws(l),l.flags|=128,null):(f&l.child.childLanes)!==0?BE(s,l,f):(Ws(l),s=Ja(s,l,f),s!==null?s.sibling:null);Ws(l);break;case 19:var x=(s.flags&128)!==0;if(p=(f&l.childLanes)!==0,p||(Ac(s,l,f,!1),p=(f&l.childLanes)!==0),x){if(p)return FE(s,l,f);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ne(mn,mn.current),p)break;return null;case 22:return l.lanes=0,OE(s,l,f,l.pendingProps);case 24:Hs(l,Cn,s.memoizedState.cache)}return Ja(s,l,f)}function GE(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)kn=!0;else{if(!ty(s,f)&&(l.flags&128)===0)return kn=!1,c3(s,l,f);kn=(s.flags&131072)!==0}else kn=!1,_t&&(l.flags&1048576)!==0&&_S(l,Sd,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(s=yl(l.elementType),l.type=s,typeof s=="function")sv(s)?(p=wl(s,p),l.tag=1,l=zE(null,l,s,p,f)):(l.tag=0,l=Xv(null,l,s,p,f));else{if(s!=null){var x=s.$$typeof;if(x===L){l.tag=11,l=NE(null,l,s,p,f);break e}else if(x===A){l.tag=14,l=IE(null,l,s,p,f);break e}}throw l=W(s)||s,Error(r(306,l,""))}}return l;case 0:return Xv(s,l,l.type,l.pendingProps,f);case 1:return p=l.type,x=wl(p,l.pendingProps),zE(s,l,p,x,f);case 3:e:{if(ge(l,l.stateNode.containerInfo),s===null)throw Error(r(387));p=l.pendingProps;var S=l.memoizedState;x=S.element,_v(s,l),Nd(l,p,null,f);var I=l.memoizedState;if(p=I.cache,Hs(l,Cn,p),p!==S.cache&&gv(l,[Cn],f,!0),Dd(),p=I.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=LE(s,l,p,f);break e}else if(p!==x){x=li(Error(r(424)),l),Ed(x),l=LE(s,l,p,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Xt=hi(s.firstChild),Wn=l,_t=!0,Gs=null,di=!0,f=OS(l,null,p,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(pl(),p===x){l=Ja(s,l,f);break e}Qn(s,l,p,f)}l=l.child}return l;case 26:return Pp(s,l),s===null?(f=eA(l.type,null,l.pendingProps,null))?l.memoizedState=f:_t||(f=l.type,s=l.pendingProps,p=Zp(ce.current).createElement(f),p[En]=l,p[$n]=s,Zn(p,f,s),Tn(p),l.stateNode=p):l.memoizedState=eA(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Ne(l),s===null&&_t&&(p=l.stateNode=QT(l.type,l.pendingProps,ce.current),Wn=l,di=!0,x=Xt,io(l.type)?(Oy=x,Xt=hi(p.firstChild)):Xt=x),Qn(s,l,l.pendingProps.children,f),Pp(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&_t&&((x=p=Xt)&&(p=L3(p,l.type,l.pendingProps,di),p!==null?(l.stateNode=p,Wn=l,Xt=hi(p.firstChild),di=!1,x=!0):x=!1),x||$s(l)),Ne(l),x=l.type,S=l.pendingProps,I=s!==null?s.memoizedProps:null,p=S.children,ky(x,S)?p=null:I!==null&&ky(x,I)&&(l.flags|=32),l.memoizedState!==null&&(x=Rv(s,l,e3,null,null,f),Qd._currentValue=x),Pp(s,l),Qn(s,l,p,f),l.child;case 6:return s===null&&_t&&((s=f=Xt)&&(f=B3(f,l.pendingProps,di),f!==null?(l.stateNode=f,Wn=l,Xt=null,s=!0):s=!1),s||$s(l)),null;case 13:return BE(s,l,f);case 4:return ge(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=xl(l,null,p,f):Qn(s,l,p,f),l.child;case 11:return NE(s,l,l.type,l.pendingProps,f);case 7:return Qn(s,l,l.pendingProps,f),l.child;case 8:return Qn(s,l,l.pendingProps.children,f),l.child;case 12:return Qn(s,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,Hs(l,l.type,p.value),Qn(s,l,p.children,f),l.child;case 9:return x=l.type._context,p=l.pendingProps.children,ml(l),x=Kn(x),p=p(x),l.flags|=1,Qn(s,l,p,f),l.child;case 14:return IE(s,l,l.type,l.pendingProps,f);case 15:return ME(s,l,l.type,l.pendingProps,f);case 19:return FE(s,l,f);case 31:return l3(s,l,f);case 22:return OE(s,l,f,l.pendingProps);case 24:return ml(l),p=Kn(Cn),s===null?(x=yv(),x===null&&(x=$t,S=mv(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=f),x=S),l.memoizedState={parent:p,cache:x},xv(l),Hs(l,Cn,x)):((s.lanes&f)!==0&&(_v(s,l),Nd(l,null,null,f),Dd()),x=s.memoizedState,S=l.memoizedState,x.parent!==p?(x={parent:p,cache:p},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),Hs(l,Cn,p)):(p=S.cache,Hs(l,Cn,p),p!==x.cache&&gv(l,[Cn],f,!0))),Qn(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function es(s){s.flags|=4}function ny(s,l,f,p,x){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(x&335544128)===x)if(s.stateNode.complete)s.flags|=8192;else if(mT())s.flags|=8192;else throw bl=xp,bv}else s.flags&=-16777217}function $E(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!aA(l))if(mT())s.flags|=8192;else throw bl=xp,bv}function Vp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Gh():536870912,s.lanes|=l,zc|=l)}function Vd(s,l){if(!_t)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Wt(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,p=0;if(l)for(var x=s.child;x!==null;)f|=x.lanes|x.childLanes,p|=x.subtreeFlags&65011712,p|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)f|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=p,s.childLanes=f,l}function u3(s,l,f){var p=l.pendingProps;switch(uv(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(l),null;case 1:return Wt(l),null;case 3:return f=l.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Ka(Cn),Te(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Tc(l)?es(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,fv())),Wt(l),null;case 26:var x=l.type,S=l.memoizedState;return s===null?(es(l),S!==null?(Wt(l),$E(l,S)):(Wt(l),ny(l,x,null,p,f))):S?S!==s.memoizedState?(es(l),Wt(l),$E(l,S)):(Wt(l),l.flags&=-16777217):(s=s.memoizedProps,s!==p&&es(l),Wt(l),ny(l,x,s,p,f)),null;case 27:if(ae(l),f=ce.current,x=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Wt(l),null}s=Z.current,Tc(l)?SS(l):(s=QT(x,p,f),l.stateNode=s,es(l))}return Wt(l),null;case 5:if(ae(l),x=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(!p){if(l.stateNode===null)throw Error(r(166));return Wt(l),null}if(S=Z.current,Tc(l))SS(l);else{var I=Zp(ce.current);switch(S){case 1:S=I.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=I.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=I.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=I.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=I.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof p.is=="string"?I.createElement("select",{is:p.is}):I.createElement("select"),p.multiple?S.multiple=!0:p.size&&(S.size=p.size);break;default:S=typeof p.is=="string"?I.createElement(x,{is:p.is}):I.createElement(x)}}S[En]=l,S[$n]=p;e:for(I=l.child;I!==null;){if(I.tag===5||I.tag===6)S.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===l)break e;for(;I.sibling===null;){if(I.return===null||I.return===l)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}l.stateNode=S;e:switch(Zn(S,x,p),x){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&es(l)}}return Wt(l),ny(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==p&&es(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(r(166));if(s=ce.current,Tc(l)){if(s=l.stateNode,f=l.memoizedProps,p=null,x=Wn,x!==null)switch(x.tag){case 27:case 5:p=x.memoizedProps}s[En]=l,s=!!(s.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||BT(s.nodeValue,f)),s||$s(l,!0)}else s=Zp(s).createTextNode(p),s[En]=l,l.stateNode=s}return Wt(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(p=Tc(l),f!==null){if(s===null){if(!p)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[En]=l}else pl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wt(l),s=!1}else f=fv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(Xr(l),l):(Xr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Wt(l),null;case 13:if(p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=Tc(l),p!==null&&p.dehydrated!==null){if(s===null){if(!x)throw Error(r(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[En]=l}else pl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wt(l),x=!1}else x=fv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(Xr(l),l):(Xr(l),null)}return Xr(l),(l.flags&128)!==0?(l.lanes=f,l):(f=p!==null,s=s!==null&&s.memoizedState!==null,f&&(p=l.child,x=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(x=p.alternate.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==x&&(p.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),Vp(l,l.updateQueue),Wt(l),null);case 4:return Te(),s===null&&Ey(l.stateNode.containerInfo),Wt(l),null;case 10:return Ka(l.type),Wt(l),null;case 19:if(Y(mn),p=l.memoizedState,p===null)return Wt(l),null;if(x=(l.flags&128)!==0,S=p.rendering,S===null)if(x)Vd(p,!1);else{if(dn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(S=Ep(s),S!==null){for(l.flags|=128,Vd(p,!1),s=S.updateQueue,l.updateQueue=s,Vp(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)yS(f,s),f=f.sibling;return ne(mn,mn.current&1|2),_t&&Xa(l,p.treeForkCount),l.child}s=s.sibling}p.tail!==null&&ut()>Fp&&(l.flags|=128,x=!0,Vd(p,!1),l.lanes=4194304)}else{if(!x)if(s=Ep(S),s!==null){if(l.flags|=128,x=!0,s=s.updateQueue,l.updateQueue=s,Vp(l,s),Vd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!S.alternate&&!_t)return Wt(l),null}else 2*ut()-p.renderingStartTime>Fp&&f!==536870912&&(l.flags|=128,x=!0,Vd(p,!1),l.lanes=4194304);p.isBackwards?(S.sibling=l.child,l.child=S):(s=p.last,s!==null?s.sibling=S:l.child=S,p.last=S)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=ut(),s.sibling=null,f=mn.current,ne(mn,x?f&1|2:f&1),_t&&Xa(l,p.treeForkCount),s):(Wt(l),null);case 22:case 23:return Xr(l),Tv(),p=l.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(f&536870912)!==0&&(l.flags&128)===0&&(Wt(l),l.subtreeFlags&6&&(l.flags|=8192)):Wt(l),f=l.updateQueue,f!==null&&Vp(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048),s!==null&&Y(vl),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),Ka(Cn),Wt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function d3(s,l){switch(uv(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ka(Cn),Te(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return ae(l),null;case 31:if(l.memoizedState!==null){if(Xr(l),l.alternate===null)throw Error(r(340));pl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Xr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));pl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Y(mn),null;case 4:return Te(),null;case 10:return Ka(l.type),null;case 22:case 23:return Xr(l),Tv(),s!==null&&Y(vl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ka(Cn),null;case 25:return null;default:return null}}function HE(s,l){switch(uv(l),l.tag){case 3:Ka(Cn),Te();break;case 26:case 27:case 5:ae(l);break;case 4:Te();break;case 31:l.memoizedState!==null&&Xr(l);break;case 13:Xr(l);break;case 19:Y(mn);break;case 10:Ka(l.type);break;case 22:case 23:Xr(l),Tv(),s!==null&&Y(vl);break;case 24:Ka(Cn)}}function zd(s,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var x=p.next;f=x;do{if((f.tag&s)===s){p=void 0;var S=f.create,I=f.inst;p=S(),I.destroy=p}f=f.next}while(f!==x)}}catch(G){Pt(l,l.return,G)}}function Qs(s,l,f){try{var p=l.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var S=x.next;p=S;do{if((p.tag&s)===s){var I=p.inst,G=I.destroy;if(G!==void 0){I.destroy=void 0,x=l;var Q=f,de=G;try{de()}catch(ve){Pt(x,Q,ve)}}}p=p.next}while(p!==S)}}catch(ve){Pt(l,l.return,ve)}}function qE(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{jS(l,f)}catch(p){Pt(s,s.return,p)}}}function YE(s,l,f){f.props=wl(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(p){Pt(s,l,p)}}function Ld(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof f=="function"?s.refCleanup=f(p):f.current=p}}catch(x){Pt(s,l,x)}}function ya(s,l){var f=s.ref,p=s.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(x){Pt(s,l,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){Pt(s,l,x)}else f.current=null}function XE(s){var l=s.type,f=s.memoizedProps,p=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(x){Pt(s,s.return,x)}}function ry(s,l,f){try{var p=s.stateNode;M3(p,s.type,f,l),p[$n]=l}catch(x){Pt(s,s.return,x)}}function WE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&io(s.type)||s.tag===4}function iy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||WE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&io(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ay(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=ki));else if(p!==4&&(p===27&&io(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(ay(s,l,f),s=s.sibling;s!==null;)ay(s,l,f),s=s.sibling}function zp(s,l,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(p!==4&&(p===27&&io(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(zp(s,l,f),s=s.sibling;s!==null;)zp(s,l,f),s=s.sibling}function KE(s){var l=s.stateNode,f=s.memoizedProps;try{for(var p=s.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);Zn(l,p,f),l[En]=s,l[$n]=f}catch(S){Pt(s,s.return,S)}}var ts=!1,Dn=!1,sy=!1,QE=typeof WeakSet=="function"?WeakSet:Set,qn=null;function f3(s,l){if(s=s.containerInfo,Cy=ag,s=cS(s),J0(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var x=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var I=0,G=-1,Q=-1,de=0,ve=0,xe=s,fe=null;t:for(;;){for(var pe;xe!==f||x!==0&&xe.nodeType!==3||(G=I+x),xe!==S||p!==0&&xe.nodeType!==3||(Q=I+p),xe.nodeType===3&&(I+=xe.nodeValue.length),(pe=xe.firstChild)!==null;)fe=xe,xe=pe;for(;;){if(xe===s)break t;if(fe===f&&++de===x&&(G=I),fe===S&&++ve===p&&(Q=I),(pe=xe.nextSibling)!==null)break;xe=fe,fe=xe.parentNode}xe=pe}f=G===-1||Q===-1?null:{start:G,end:Q}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ry={focusedElem:s,selectionRange:f},ag=!1,qn=l;qn!==null;)if(l=qn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,qn=s;else for(;qn!==null;){switch(l=qn,S=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)x=s[f],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&S!==null){s=void 0,f=l,x=S.memoizedProps,S=S.memoizedState,p=f.stateNode;try{var je=wl(f.type,x);s=p.getSnapshotBeforeUpdate(je,S),p.__reactInternalSnapshotBeforeUpdate=s}catch(Xe){Pt(f,f.return,Xe)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)Ny(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ny(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,qn=s;break}qn=l.return}}function ZE(s,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:rs(s,f),p&4&&zd(5,f);break;case 1:if(rs(s,f),p&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(I){Pt(f,f.return,I)}else{var x=wl(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(x,l,s.__reactInternalSnapshotBeforeUpdate)}catch(I){Pt(f,f.return,I)}}p&64&&qE(f),p&512&&Ld(f,f.return);break;case 3:if(rs(s,f),p&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{jS(s,l)}catch(I){Pt(f,f.return,I)}}break;case 27:l===null&&p&4&&KE(f);case 26:case 5:rs(s,f),l===null&&p&4&&XE(f),p&512&&Ld(f,f.return);break;case 12:rs(s,f);break;case 31:rs(s,f),p&4&&tT(s,f);break;case 13:rs(s,f),p&4&&nT(s,f),p&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=_3.bind(null,f),U3(s,f))));break;case 22:if(p=f.memoizedState!==null||ts,!p){l=l!==null&&l.memoizedState!==null||Dn,x=ts;var S=Dn;ts=p,(Dn=l)&&!S?is(s,f,(f.subtreeFlags&8772)!==0):rs(s,f),ts=x,Dn=S}break;case 30:break;default:rs(s,f)}}function JE(s){var l=s.alternate;l!==null&&(s.alternate=null,JE(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&lc(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Zt=null,Cr=!1;function ns(s,l,f){for(f=f.child;f!==null;)eT(s,l,f),f=f.sibling}function eT(s,l,f){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Ur,f)}catch{}switch(f.tag){case 26:Dn||ya(f,l),ns(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Dn||ya(f,l);var p=Zt,x=Cr;io(f.type)&&(Zt=f.stateNode,Cr=!1),ns(s,l,f),Xd(f.stateNode),Zt=p,Cr=x;break;case 5:Dn||ya(f,l);case 6:if(p=Zt,x=Cr,Zt=null,ns(s,l,f),Zt=p,Cr=x,Zt!==null)if(Cr)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(f.stateNode)}catch(S){Pt(f,l,S)}else try{Zt.removeChild(f.stateNode)}catch(S){Pt(f,l,S)}break;case 18:Zt!==null&&(Cr?(s=Zt,qT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),qc(s)):qT(Zt,f.stateNode));break;case 4:p=Zt,x=Cr,Zt=f.stateNode.containerInfo,Cr=!0,ns(s,l,f),Zt=p,Cr=x;break;case 0:case 11:case 14:case 15:Qs(2,f,l),Dn||Qs(4,f,l),ns(s,l,f);break;case 1:Dn||(ya(f,l),p=f.stateNode,typeof p.componentWillUnmount=="function"&&YE(f,l,p)),ns(s,l,f);break;case 21:ns(s,l,f);break;case 22:Dn=(p=Dn)||f.memoizedState!==null,ns(s,l,f),Dn=p;break;default:ns(s,l,f)}}function tT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{qc(s)}catch(f){Pt(l,l.return,f)}}}function nT(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{qc(s)}catch(f){Pt(l,l.return,f)}}function h3(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new QE),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new QE),l;default:throw Error(r(435,s.tag))}}function Lp(s,l){var f=h3(s);l.forEach(function(p){if(!f.has(p)){f.add(p);var x=w3.bind(null,s,p);p.then(x,x)}})}function Rr(s,l){var f=l.deletions;if(f!==null)for(var p=0;p<f.length;p++){var x=f[p],S=s,I=l,G=I;e:for(;G!==null;){switch(G.tag){case 27:if(io(G.type)){Zt=G.stateNode,Cr=!1;break e}break;case 5:Zt=G.stateNode,Cr=!1;break e;case 3:case 4:Zt=G.stateNode.containerInfo,Cr=!0;break e}G=G.return}if(Zt===null)throw Error(r(160));eT(S,I,x),Zt=null,Cr=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)rT(l,s),l=l.sibling}var Pi=null;function rT(s,l){var f=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Rr(l,s),kr(s),p&4&&(Qs(3,s,s.return),zd(3,s),Qs(5,s,s.return));break;case 1:Rr(l,s),kr(s),p&512&&(Dn||f===null||ya(f,f.return)),p&64&&ts&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var x=Pi;if(Rr(l,s),kr(s),p&512&&(Dn||f===null||ya(f,f.return)),p&4){var S=f!==null?f.memoizedState:null;if(p=s.memoizedState,f===null)if(p===null)if(s.stateNode===null){e:{p=s.type,f=s.memoizedProps,x=x.ownerDocument||x;t:switch(p){case"title":S=x.getElementsByTagName("title")[0],(!S||S[ia]||S[En]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(p),x.head.insertBefore(S,x.querySelector("head > title"))),Zn(S,p,f),S[En]=s,Tn(S),p=S;break e;case"link":var I=rA("link","href",x).get(p+(f.href||""));if(I){for(var G=0;G<I.length;G++)if(S=I[G],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){I.splice(G,1);break t}}S=x.createElement(p),Zn(S,p,f),x.head.appendChild(S);break;case"meta":if(I=rA("meta","content",x).get(p+(f.content||""))){for(G=0;G<I.length;G++)if(S=I[G],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){I.splice(G,1);break t}}S=x.createElement(p),Zn(S,p,f),x.head.appendChild(S);break;default:throw Error(r(468,p))}S[En]=s,Tn(S),p=S}s.stateNode=p}else iA(x,s.type,s.stateNode);else s.stateNode=nA(x,p,s.memoizedProps);else S!==p?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,p===null?iA(x,s.type,s.stateNode):nA(x,p,s.memoizedProps)):p===null&&s.stateNode!==null&&ry(s,s.memoizedProps,f.memoizedProps)}break;case 27:Rr(l,s),kr(s),p&512&&(Dn||f===null||ya(f,f.return)),f!==null&&p&4&&ry(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Rr(l,s),kr(s),p&512&&(Dn||f===null||ya(f,f.return)),s.flags&32){x=s.stateNode;try{Ar(x,"")}catch(je){Pt(s,s.return,je)}}p&4&&s.stateNode!=null&&(x=s.memoizedProps,ry(s,x,f!==null?f.memoizedProps:x)),p&1024&&(sy=!0);break;case 6:if(Rr(l,s),kr(s),p&4){if(s.stateNode===null)throw Error(r(162));p=s.memoizedProps,f=s.stateNode;try{f.nodeValue=p}catch(je){Pt(s,s.return,je)}}break;case 3:if(tg=null,x=Pi,Pi=Jp(l.containerInfo),Rr(l,s),Pi=x,kr(s),p&4&&f!==null&&f.memoizedState.isDehydrated)try{qc(l.containerInfo)}catch(je){Pt(s,s.return,je)}sy&&(sy=!1,iT(s));break;case 4:p=Pi,Pi=Jp(s.stateNode.containerInfo),Rr(l,s),kr(s),Pi=p;break;case 12:Rr(l,s),kr(s);break;case 31:Rr(l,s),kr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Lp(s,p)));break;case 13:Rr(l,s),kr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Up=ut()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Lp(s,p)));break;case 22:x=s.memoizedState!==null;var Q=f!==null&&f.memoizedState!==null,de=ts,ve=Dn;if(ts=de||x,Dn=ve||Q,Rr(l,s),Dn=ve,ts=de,kr(s),p&8192)e:for(l=s.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(f===null||Q||ts||Dn||Sl(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){Q=f=l;try{if(S=Q.stateNode,x)I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{G=Q.stateNode;var xe=Q.memoizedProps.style,fe=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;G.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(je){Pt(Q,Q.return,je)}}}else if(l.tag===6){if(f===null){Q=l;try{Q.stateNode.nodeValue=x?"":Q.memoizedProps}catch(je){Pt(Q,Q.return,je)}}}else if(l.tag===18){if(f===null){Q=l;try{var pe=Q.stateNode;x?YT(pe,!0):YT(Q.stateNode,!1)}catch(je){Pt(Q,Q.return,je)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=s.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,Lp(s,f))));break;case 19:Rr(l,s),kr(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Lp(s,p)));break;case 30:break;case 21:break;default:Rr(l,s),kr(s)}}function kr(s){var l=s.flags;if(l&2){try{for(var f,p=s.return;p!==null;){if(WE(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,S=iy(s);zp(s,S,x);break;case 5:var I=f.stateNode;f.flags&32&&(Ar(I,""),f.flags&=-33);var G=iy(s);zp(s,G,I);break;case 3:case 4:var Q=f.stateNode.containerInfo,de=iy(s);ay(s,de,Q);break;default:throw Error(r(161))}}catch(ve){Pt(s,s.return,ve)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function iT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;iT(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function rs(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)ZE(s,l.alternate,l),l=l.sibling}function Sl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Qs(4,l,l.return),Sl(l);break;case 1:ya(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&YE(l,l.return,f),Sl(l);break;case 27:Xd(l.stateNode);case 26:case 5:ya(l,l.return),Sl(l);break;case 22:l.memoizedState===null&&Sl(l);break;case 30:Sl(l);break;default:Sl(l)}s=s.sibling}}function is(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,x=s,S=l,I=S.flags;switch(S.tag){case 0:case 11:case 15:is(x,S,f),zd(4,S);break;case 1:if(is(x,S,f),p=S,x=p.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(de){Pt(p,p.return,de)}if(p=S,x=p.updateQueue,x!==null){var G=p.stateNode;try{var Q=x.shared.hiddenCallbacks;if(Q!==null)for(x.shared.hiddenCallbacks=null,x=0;x<Q.length;x++)PS(Q[x],G)}catch(de){Pt(p,p.return,de)}}f&&I&64&&qE(S),Ld(S,S.return);break;case 27:KE(S);case 26:case 5:is(x,S,f),f&&p===null&&I&4&&XE(S),Ld(S,S.return);break;case 12:is(x,S,f);break;case 31:is(x,S,f),f&&I&4&&tT(x,S);break;case 13:is(x,S,f),f&&I&4&&nT(x,S);break;case 22:S.memoizedState===null&&is(x,S,f),Ld(S,S.return);break;case 30:break;default:is(x,S,f)}l=l.sibling}}function oy(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&Td(f))}function ly(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Td(s))}function ji(s,l,f,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)aT(s,l,f,p),l=l.sibling}function aT(s,l,f,p){var x=l.flags;switch(l.tag){case 0:case 11:case 15:ji(s,l,f,p),x&2048&&zd(9,l);break;case 1:ji(s,l,f,p);break;case 3:ji(s,l,f,p),x&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Td(s)));break;case 12:if(x&2048){ji(s,l,f,p),s=l.stateNode;try{var S=l.memoizedProps,I=S.id,G=S.onPostCommit;typeof G=="function"&&G(I,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Q){Pt(l,l.return,Q)}}else ji(s,l,f,p);break;case 31:ji(s,l,f,p);break;case 13:ji(s,l,f,p);break;case 23:break;case 22:S=l.stateNode,I=l.alternate,l.memoizedState!==null?S._visibility&2?ji(s,l,f,p):Bd(s,l):S._visibility&2?ji(s,l,f,p):(S._visibility|=2,Pc(s,l,f,p,(l.subtreeFlags&10256)!==0||!1)),x&2048&&oy(I,l);break;case 24:ji(s,l,f,p),x&2048&&ly(l.alternate,l);break;default:ji(s,l,f,p)}}function Pc(s,l,f,p,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var S=s,I=l,G=f,Q=p,de=I.flags;switch(I.tag){case 0:case 11:case 15:Pc(S,I,G,Q,x),zd(8,I);break;case 23:break;case 22:var ve=I.stateNode;I.memoizedState!==null?ve._visibility&2?Pc(S,I,G,Q,x):Bd(S,I):(ve._visibility|=2,Pc(S,I,G,Q,x)),x&&de&2048&&oy(I.alternate,I);break;case 24:Pc(S,I,G,Q,x),x&&de&2048&&ly(I.alternate,I);break;default:Pc(S,I,G,Q,x)}l=l.sibling}}function Bd(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,p=l,x=p.flags;switch(p.tag){case 22:Bd(f,p),x&2048&&oy(p.alternate,p);break;case 24:Bd(f,p),x&2048&&ly(p.alternate,p);break;default:Bd(f,p)}l=l.sibling}}var Ud=8192;function jc(s,l,f){if(s.subtreeFlags&Ud)for(s=s.child;s!==null;)sT(s,l,f),s=s.sibling}function sT(s,l,f){switch(s.tag){case 26:jc(s,l,f),s.flags&Ud&&s.memoizedState!==null&&J3(f,Pi,s.memoizedState,s.memoizedProps);break;case 5:jc(s,l,f);break;case 3:case 4:var p=Pi;Pi=Jp(s.stateNode.containerInfo),jc(s,l,f),Pi=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=Ud,Ud=16777216,jc(s,l,f),Ud=p):jc(s,l,f));break;default:jc(s,l,f)}}function oT(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Fd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];qn=p,cT(p,s)}oT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lT(s),s=s.sibling}function lT(s){switch(s.tag){case 0:case 11:case 15:Fd(s),s.flags&2048&&Qs(9,s,s.return);break;case 3:Fd(s);break;case 12:Fd(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Bp(s)):Fd(s);break;default:Fd(s)}}function Bp(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var p=l[f];qn=p,cT(p,s)}oT(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Qs(8,l,l.return),Bp(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Bp(l));break;default:Bp(l)}s=s.sibling}}function cT(s,l){for(;qn!==null;){var f=qn;switch(f.tag){case 0:case 11:case 15:Qs(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Td(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,qn=p;else e:for(f=s;qn!==null;){p=qn;var x=p.sibling,S=p.return;if(JE(p),p===f){qn=null;break e}if(x!==null){x.return=S,qn=x;break e}qn=S}}}var p3={getCacheForType:function(s){var l=Kn(Cn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return Kn(Cn).controller.signal}},g3=typeof WeakMap=="function"?WeakMap:Map,Nt=0,$t=null,ht=null,mt=0,Ot=0,Wr=null,Zs=!1,Vc=!1,cy=!1,as=0,dn=0,Js=0,El=0,uy=0,Kr=0,zc=0,Gd=null,Dr=null,dy=!1,Up=0,uT=0,Fp=1/0,Gp=null,eo=null,zn=0,to=null,Lc=null,ss=0,fy=0,hy=null,dT=null,$d=0,py=null;function Qr(){return(Nt&2)!==0&&mt!==0?mt&-mt:H.T!==null?xy():$h()}function fT(){if(Kr===0)if((mt&536870912)===0||_t){var s=nn;nn<<=1,(nn&3932160)===0&&(nn=262144),Kr=s}else Kr=536870912;return s=Yr.current,s!==null&&(s.flags|=32),Kr}function Nr(s,l,f){(s===$t&&(Ot===2||Ot===9)||s.cancelPendingCommit!==null)&&(Bc(s,0),no(s,mt,Kr,!1)),Zo(s,f),((Nt&2)===0||s!==$t)&&(s===$t&&((Nt&2)===0&&(El|=f),dn===4&&no(s,mt,Kr,!1)),ba(s))}function hT(s,l,f){if((Nt&6)!==0)throw Error(r(327));var p=!f&&(l&127)===0&&(l&s.expiredLanes)===0||pr(s,l),x=p?y3(s,l):my(s,l,!0),S=p;do{if(x===0){Vc&&!p&&no(s,l,0,!1);break}else{if(f=s.current.alternate,S&&!m3(f)){x=my(s,l,!1),S=!1;continue}if(x===2){if(S=l,s.errorRecoveryDisabledLanes&S)var I=0;else I=s.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var G=s;x=Gd;var Q=G.current.memoizedState.isDehydrated;if(Q&&(Bc(G,I).flags|=256),I=my(G,I,!1),I!==2){if(cy&&!Q){G.errorRecoveryDisabledLanes|=S,El|=S,x=4;break e}S=Dr,Dr=x,S!==null&&(Dr===null?Dr=S:Dr.push.apply(Dr,S))}x=I}if(S=!1,x!==2)continue}}if(x===1){Bc(s,0),no(s,l,0,!0);break}e:{switch(p=s,S=x,S){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:no(p,l,Kr,!Zs);break e;case 2:Dr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(x=Up+300-ut(),10<x)){if(no(p,l,Kr,!Zs),ni(p,0,!0)!==0)break e;ss=l,p.timeoutHandle=$T(pT.bind(null,p,f,Dr,Gp,dy,l,Kr,El,zc,Zs,S,"Throttled",-0,0),x);break e}pT(p,f,Dr,Gp,dy,l,Kr,El,zc,Zs,S,null,-0,0)}}break}while(!0);ba(s)}function pT(s,l,f,p,x,S,I,G,Q,de,ve,xe,fe,pe){if(s.timeoutHandle=-1,xe=l.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ki},sT(l,S,xe);var je=(S&62914560)===S?Up-ut():(S&4194048)===S?uT-ut():0;if(je=ej(xe,je),je!==null){ss=S,s.cancelPendingCommit=je(wT.bind(null,s,l,S,f,p,x,I,G,Q,ve,xe,null,fe,pe)),no(s,S,I,!de);return}}wT(s,l,S,f,p,x,I,G,Q)}function m3(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var x=f[p],S=x.getSnapshot;x=x.value;try{if(!Hr(S(),x))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function no(s,l,f,p){l&=~uy,l&=~El,s.suspendedLanes|=l,s.pingedLanes&=~l,p&&(s.warmLanes|=l),p=s.expirationTimes;for(var x=l;0<x;){var S=31-tn(x),I=1<<S;p[S]=-1,x&=~I}f!==0&&Jo(s,f,l)}function $p(){return(Nt&6)===0?(Hd(0),!1):!0}function gy(){if(ht!==null){if(Ot===0)var s=ht.return;else s=ht,Wa=gl=null,Nv(s),Dc=null,Cd=0,s=ht;for(;s!==null;)HE(s.alternate,s),s=s.return;ht=null}}function Bc(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,j3(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),ss=0,gy(),$t=s,ht=f=Ya(s.current,null),mt=l,Ot=0,Wr=null,Zs=!1,Vc=pr(s,l),cy=!1,zc=Kr=uy=El=Js=dn=0,Dr=Gd=null,dy=!1,(l&8)!==0&&(l|=l&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=l;0<p;){var x=31-tn(p),S=1<<x;l|=s[x],p&=~S}return as=l,dp(),f}function gT(s,l){lt=null,H.H=Pd,l===kc||l===bp?(l=NS(),Ot=3):l===bv?(l=NS(),Ot=4):Ot=l===Yv?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Wr=l,ht===null&&(dn=1,Mp(s,li(l,s.current)))}function mT(){var s=Yr.current;return s===null?!0:(mt&4194048)===mt?fi===null:(mt&62914560)===mt||(mt&536870912)!==0?s===fi:!1}function vT(){var s=H.H;return H.H=Pd,s===null?Pd:s}function yT(){var s=H.A;return H.A=p3,s}function Hp(){dn=4,Zs||(mt&4194048)!==mt&&Yr.current!==null||(Vc=!0),(Js&134217727)===0&&(El&134217727)===0||$t===null||no($t,mt,Kr,!1)}function my(s,l,f){var p=Nt;Nt|=2;var x=vT(),S=yT();($t!==s||mt!==l)&&(Gp=null,Bc(s,l)),l=!1;var I=dn;e:do try{if(Ot!==0&&ht!==null){var G=ht,Q=Wr;switch(Ot){case 8:gy(),I=6;break e;case 3:case 2:case 9:case 6:Yr.current===null&&(l=!0);var de=Ot;if(Ot=0,Wr=null,Uc(s,G,Q,de),f&&Vc){I=0;break e}break;default:de=Ot,Ot=0,Wr=null,Uc(s,G,Q,de)}}v3(),I=dn;break}catch(ve){gT(s,ve)}while(!0);return l&&s.shellSuspendCounter++,Wa=gl=null,Nt=p,H.H=x,H.A=S,ht===null&&($t=null,mt=0,dp()),I}function v3(){for(;ht!==null;)bT(ht)}function y3(s,l){var f=Nt;Nt|=2;var p=vT(),x=yT();$t!==s||mt!==l?(Gp=null,Fp=ut()+500,Bc(s,l)):Vc=pr(s,l);e:do try{if(Ot!==0&&ht!==null){l=ht;var S=Wr;t:switch(Ot){case 1:Ot=0,Wr=null,Uc(s,l,S,1);break;case 2:case 9:if(kS(S)){Ot=0,Wr=null,xT(l);break}l=function(){Ot!==2&&Ot!==9||$t!==s||(Ot=7),ba(s)},S.then(l,l);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:kS(S)?(Ot=0,Wr=null,xT(l)):(Ot=0,Wr=null,Uc(s,l,S,7));break;case 5:var I=null;switch(ht.tag){case 26:I=ht.memoizedState;case 5:case 27:var G=ht;if(I?aA(I):G.stateNode.complete){Ot=0,Wr=null;var Q=G.sibling;if(Q!==null)ht=Q;else{var de=G.return;de!==null?(ht=de,qp(de)):ht=null}break t}}Ot=0,Wr=null,Uc(s,l,S,5);break;case 6:Ot=0,Wr=null,Uc(s,l,S,6);break;case 8:gy(),dn=6;break e;default:throw Error(r(462))}}b3();break}catch(ve){gT(s,ve)}while(!0);return Wa=gl=null,H.H=p,H.A=x,Nt=f,ht!==null?0:($t=null,mt=0,dp(),dn)}function b3(){for(;ht!==null&&!Tt();)bT(ht)}function bT(s){var l=GE(s.alternate,s,as);s.memoizedProps=s.pendingProps,l===null?qp(s):ht=l}function xT(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=VE(f,l,l.pendingProps,l.type,void 0,mt);break;case 11:l=VE(f,l,l.pendingProps,l.type.render,l.ref,mt);break;case 5:Nv(l);default:HE(f,l),l=ht=yS(l,as),l=GE(f,l,as)}s.memoizedProps=s.pendingProps,l===null?qp(s):ht=l}function Uc(s,l,f,p){Wa=gl=null,Nv(l),Dc=null,Cd=0;var x=l.return;try{if(o3(s,x,l,f,mt)){dn=1,Mp(s,li(f,s.current)),ht=null;return}}catch(S){if(x!==null)throw ht=x,S;dn=1,Mp(s,li(f,s.current)),ht=null;return}l.flags&32768?(_t||p===1?s=!0:Vc||(mt&536870912)!==0?s=!1:(Zs=s=!0,(p===2||p===9||p===3||p===6)&&(p=Yr.current,p!==null&&p.tag===13&&(p.flags|=16384))),_T(l,s)):qp(l)}function qp(s){var l=s;do{if((l.flags&32768)!==0){_T(l,Zs);return}s=l.return;var f=u3(l.alternate,l,as);if(f!==null){ht=f;return}if(l=l.sibling,l!==null){ht=l;return}ht=l=s}while(l!==null);dn===0&&(dn=5)}function _T(s,l){do{var f=d3(s.alternate,s);if(f!==null){f.flags&=32767,ht=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){ht=s;return}ht=s=f}while(s!==null);dn=6,ht=null}function wT(s,l,f,p,x,S,I,G,Q){s.cancelPendingCommit=null;do Yp();while(zn!==0);if((Nt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(S=l.lanes|l.childLanes,S|=iv,W0(s,f,S,I,G,Q),s===$t&&(ht=$t=null,mt=0),Lc=l,to=s,ss=f,fy=S,hy=x,dT=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,S3(wn,function(){return CT(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=H.T,H.T=null,x=K.p,K.p=2,I=Nt,Nt|=4;try{f3(s,l,f)}finally{Nt=I,K.p=x,H.T=p}}zn=1,ST(),ET(),TT()}}function ST(){if(zn===1){zn=0;var s=to,l=Lc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var p=K.p;K.p=2;var x=Nt;Nt|=4;try{rT(l,s);var S=Ry,I=cS(s.containerInfo),G=S.focusedElem,Q=S.selectionRange;if(I!==G&&G&&G.ownerDocument&&lS(G.ownerDocument.documentElement,G)){if(Q!==null&&J0(G)){var de=Q.start,ve=Q.end;if(ve===void 0&&(ve=de),"selectionStart"in G)G.selectionStart=de,G.selectionEnd=Math.min(ve,G.value.length);else{var xe=G.ownerDocument||document,fe=xe&&xe.defaultView||window;if(fe.getSelection){var pe=fe.getSelection(),je=G.textContent.length,Xe=Math.min(Q.start,je),Ut=Q.end===void 0?Xe:Math.min(Q.end,je);!pe.extend&&Xe>Ut&&(I=Ut,Ut=Xe,Xe=I);var se=oS(G,Xe),re=oS(G,Ut);if(se&&re&&(pe.rangeCount!==1||pe.anchorNode!==se.node||pe.anchorOffset!==se.offset||pe.focusNode!==re.node||pe.focusOffset!==re.offset)){var ue=xe.createRange();ue.setStart(se.node,se.offset),pe.removeAllRanges(),Xe>Ut?(pe.addRange(ue),pe.extend(re.node,re.offset)):(ue.setEnd(re.node,re.offset),pe.addRange(ue))}}}}for(xe=[],pe=G;pe=pe.parentNode;)pe.nodeType===1&&xe.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<xe.length;G++){var ye=xe[G];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}ag=!!Cy,Ry=Cy=null}finally{Nt=x,K.p=p,H.T=f}}s.current=l,zn=2}}function ET(){if(zn===2){zn=0;var s=to,l=Lc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var p=K.p;K.p=2;var x=Nt;Nt|=4;try{ZE(s,l.alternate,l)}finally{Nt=x,K.p=p,H.T=f}}zn=3}}function TT(){if(zn===4||zn===3){zn=0,Ke();var s=to,l=Lc,f=ss,p=dT;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?zn=5:(zn=0,Lc=to=null,AT(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(eo=null),Ga(f),l=l.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Ur,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=H.T,x=K.p,K.p=2,H.T=null;try{for(var S=s.onRecoverableError,I=0;I<p.length;I++){var G=p[I];S(G.value,{componentStack:G.stack})}}finally{H.T=l,K.p=x}}(ss&3)!==0&&Yp(),ba(s),x=s.pendingLanes,(f&261930)!==0&&(x&42)!==0?s===py?$d++:($d=0,py=s):$d=0,Hd(0)}}function AT(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Td(l)))}function Yp(){return ST(),ET(),TT(),CT()}function CT(){if(zn!==5)return!1;var s=to,l=fy;fy=0;var f=Ga(ss),p=H.T,x=K.p;try{K.p=32>f?32:f,H.T=null,f=hy,hy=null;var S=to,I=ss;if(zn=0,Lc=to=null,ss=0,(Nt&6)!==0)throw Error(r(331));var G=Nt;if(Nt|=4,lT(S.current),aT(S,S.current,I,f),Nt=G,Hd(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Ur,S)}catch{}return!0}finally{K.p=x,H.T=p,AT(s,l)}}function RT(s,l,f){l=li(f,l),l=qv(s.stateNode,l,2),s=Xs(s,l,2),s!==null&&(Zo(s,2),ba(s))}function Pt(s,l,f){if(s.tag===3)RT(s,s,f);else for(;l!==null;){if(l.tag===3){RT(l,s,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(eo===null||!eo.has(p))){s=li(f,s),f=kE(2),p=Xs(l,f,2),p!==null&&(DE(f,p,l,s),Zo(p,2),ba(p));break}}l=l.return}}function vy(s,l,f){var p=s.pingCache;if(p===null){p=s.pingCache=new g3;var x=new Set;p.set(l,x)}else x=p.get(l),x===void 0&&(x=new Set,p.set(l,x));x.has(f)||(cy=!0,x.add(f),s=x3.bind(null,s,l,f),l.then(s,s))}function x3(s,l,f){var p=s.pingCache;p!==null&&p.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,$t===s&&(mt&f)===f&&(dn===4||dn===3&&(mt&62914560)===mt&&300>ut()-Up?(Nt&2)===0&&Bc(s,0):uy|=f,zc===mt&&(zc=0)),ba(s)}function kT(s,l){l===0&&(l=Gh()),s=fl(s,l),s!==null&&(Zo(s,l),ba(s))}function _3(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),kT(s,f)}function w3(s,l){var f=0;switch(s.tag){case 31:case 13:var p=s.stateNode,x=s.memoizedState;x!==null&&(f=x.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(l),kT(s,f)}function S3(s,l){return Le(s,l)}var Xp=null,Fc=null,yy=!1,Wp=!1,by=!1,ro=0;function ba(s){s!==Fc&&s.next===null&&(Fc===null?Xp=Fc=s:Fc=Fc.next=s),Wp=!0,yy||(yy=!0,T3())}function Hd(s,l){if(!by&&Wp){by=!0;do for(var f=!1,p=Xp;p!==null;){if(s!==0){var x=p.pendingLanes;if(x===0)var S=0;else{var I=p.suspendedLanes,G=p.pingedLanes;S=(1<<31-tn(42|s)+1)-1,S&=x&~(I&~G),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,MT(p,S))}else S=mt,S=ni(p,p===$t?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(S&3)===0||pr(p,S)||(f=!0,MT(p,S));p=p.next}while(f);by=!1}}function E3(){DT()}function DT(){Wp=yy=!1;var s=0;ro!==0&&P3()&&(s=ro);for(var l=ut(),f=null,p=Xp;p!==null;){var x=p.next,S=NT(p,l);S===0?(p.next=null,f===null?Xp=x:f.next=x,x===null&&(Fc=f)):(f=p,(s!==0||(S&3)!==0)&&(Wp=!0)),p=x}zn!==0&&zn!==5||Hd(s),ro!==0&&(ro=0)}function NT(s,l){for(var f=s.suspendedLanes,p=s.pingedLanes,x=s.expirationTimes,S=s.pendingLanes&-62914561;0<S;){var I=31-tn(S),G=1<<I,Q=x[I];Q===-1?((G&f)===0||(G&p)!==0)&&(x[I]=X0(G,l)):Q<=l&&(s.expiredLanes|=G),S&=~G}if(l=$t,f=mt,f=ni(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,f===0||s===l&&(Ot===2||Ot===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&st(p),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||pr(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(p!==null&&st(p),Ga(f)){case 2:case 8:f=Vt;break;case 32:f=wn;break;case 268435456:f=ta;break;default:f=wn}return p=IT.bind(null,s),f=Le(f,p),s.callbackPriority=l,s.callbackNode=f,l}return p!==null&&p!==null&&st(p),s.callbackPriority=2,s.callbackNode=null,2}function IT(s,l){if(zn!==0&&zn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(Yp()&&s.callbackNode!==f)return null;var p=mt;return p=ni(s,s===$t?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(hT(s,p,l),NT(s,ut()),s.callbackNode!=null&&s.callbackNode===f?IT.bind(null,s):null)}function MT(s,l){if(Yp())return null;hT(s,l,!0)}function T3(){V3(function(){(Nt&6)!==0?Le(cn,E3):DT()})}function xy(){if(ro===0){var s=Cc;s===0&&(s=ft,ft<<=1,(ft&261888)===0&&(ft=256)),ro=s}return ro}function OT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:fc(""+s)}function PT(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function A3(s,l,f,p,x){if(l==="submit"&&f&&f.stateNode===x){var S=OT((x[$n]||null).action),I=p.submitter;I&&(l=(l=I[$n]||null)?OT(l.formAction):I.getAttribute("formAction"),l!==null&&(S=l,I=null));var G=new fa("action","action",null,p,x);s.push({event:G,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ro!==0){var Q=I?PT(x,I):new FormData(x);Bv(f,{pending:!0,data:Q,method:x.method,action:S},null,Q)}}else typeof S=="function"&&(G.preventDefault(),Q=I?PT(x,I):new FormData(x),Bv(f,{pending:!0,data:Q,method:x.method,action:S},S,Q))},currentTarget:x}]})}}for(var _y=0;_y<rv.length;_y++){var wy=rv[_y],C3=wy.toLowerCase(),R3=wy[0].toUpperCase()+wy.slice(1);Oi(C3,"on"+R3)}Oi(fS,"onAnimationEnd"),Oi(hS,"onAnimationIteration"),Oi(pS,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi($P,"onTransitionRun"),Oi(HP,"onTransitionStart"),Oi(qP,"onTransitionCancel"),Oi(gS,"onTransitionEnd"),la("onMouseEnter",["mouseout","mouseover"]),la("onMouseLeave",["mouseout","mouseover"]),la("onPointerEnter",["pointerout","pointerover"]),la("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qd));function jT(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var p=s[f],x=p.event;p=p.listeners;e:{var S=void 0;if(l)for(var I=p.length-1;0<=I;I--){var G=p[I],Q=G.instance,de=G.currentTarget;if(G=G.listener,Q!==S&&x.isPropagationStopped())break e;S=G,x.currentTarget=de;try{S(x)}catch(ve){up(ve)}x.currentTarget=null,S=Q}else for(I=0;I<p.length;I++){if(G=p[I],Q=G.instance,de=G.currentTarget,G=G.listener,Q!==S&&x.isPropagationStopped())break e;S=G,x.currentTarget=de;try{S(x)}catch(ve){up(ve)}x.currentTarget=null,S=Q}}}}function pt(s,l){var f=l[oc];f===void 0&&(f=l[oc]=new Set);var p=s+"__bubble";f.has(p)||(VT(l,s,2,!1),f.add(p))}function Sy(s,l,f){var p=0;l&&(p|=4),VT(f,s,p,l)}var Kp="_reactListening"+Math.random().toString(36).slice(2);function Ey(s){if(!s[Kp]){s[Kp]=!0,id.forEach(function(f){f!=="selectionchange"&&(k3.has(f)||Sy(f,!1,s),Sy(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Kp]||(l[Kp]=!0,Sy("selectionchange",!1,l))}}function VT(s,l,f,p){switch(fA(l)){case 2:var x=rj;break;case 8:x=ij;break;default:x=Ly}f=x.bind(null,l,f,s),x=void 0,!il||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),p?x!==void 0?s.addEventListener(l,f,{capture:!0,passive:x}):s.addEventListener(l,f,!0):x!==void 0?s.addEventListener(l,f,{passive:x}):s.addEventListener(l,f,!1)}function Ty(s,l,f,p,x){var S=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var I=p.tag;if(I===3||I===4){var G=p.stateNode.containerInfo;if(G===x)break;if(I===4)for(I=p.return;I!==null;){var Q=I.tag;if((Q===3||Q===4)&&I.stateNode.containerInfo===x)return;I=I.return}for(;G!==null;){if(I=aa(G),I===null)return;if(Q=I.tag,Q===5||Q===6||Q===26||Q===27){p=S=I;continue e}G=G.parentNode}}p=p.return}zs(function(){var de=S,ve=ii(f),xe=[];e:{var fe=mS.get(s);if(fe!==void 0){var pe=fa,je=s;switch(s){case"keypress":if(sl(f)===0)break e;case"keydown":case"keyup":pe=op;break;case"focusin":je="focus",pe=ll;break;case"focusout":je="blur",pe=ll;break;case"beforeblur":case"afterblur":pe=ll;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=k;break;case fS:case hS:case pS:pe=ep;break;case gS:pe=$;break;case"scroll":case"scrollend":pe=md;break;case"wheel":pe=he;break;case"copy":case"cut":case"paste":pe=tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=qa;break;case"toggle":case"beforetoggle":pe=ot}var Xe=(l&4)!==0,Ut=!Xe&&(s==="scroll"||s==="scrollend"),se=Xe?fe!==null?fe+"Capture":null:fe;Xe=[];for(var re=de,ue;re!==null;){var ye=re;if(ue=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ue===null||se===null||(ye=Di(re,se),ye!=null&&Xe.push(Yd(re,ye,ue))),Ut)break;re=re.return}0<Xe.length&&(fe=new pe(fe,je,null,f,ve),xe.push({event:fe,listeners:Xe}))}}if((l&7)===0){e:{if(fe=s==="mouseover"||s==="pointerover",pe=s==="mouseout"||s==="pointerout",fe&&f!==hd&&(je=f.relatedTarget||f.fromElement)&&(aa(je)||je[ra]))break e;if((pe||fe)&&(fe=ve.window===ve?ve:(fe=ve.ownerDocument)?fe.defaultView||fe.parentWindow:window,pe?(je=f.relatedTarget||f.toElement,pe=de,je=je?aa(je):null,je!==null&&(Ut=a(je),Xe=je.tag,je!==Ut||Xe!==5&&Xe!==27&&Xe!==6)&&(je=null)):(pe=null,je=de),pe!==je)){if(Xe=vd,ye="onMouseLeave",se="onMouseEnter",re="mouse",(s==="pointerout"||s==="pointerover")&&(Xe=qa,ye="onPointerLeave",se="onPointerEnter",re="pointer"),Ut=pe==null?fe:Gr(pe),ue=je==null?fe:Gr(je),fe=new Xe(ye,re+"leave",pe,f,ve),fe.target=Ut,fe.relatedTarget=ue,ye=null,aa(ve)===de&&(Xe=new Xe(se,re+"enter",je,f,ve),Xe.target=ue,Xe.relatedTarget=Ut,ye=Xe),Ut=ye,pe&&je)t:{for(Xe=D3,se=pe,re=je,ue=0,ye=se;ye;ye=Xe(ye))ue++;ye=0;for(var $e=re;$e;$e=Xe($e))ye++;for(;0<ue-ye;)se=Xe(se),ue--;for(;0<ye-ue;)re=Xe(re),ye--;for(;ue--;){if(se===re||re!==null&&se===re.alternate){Xe=se;break t}se=Xe(se),re=Xe(re)}Xe=null}else Xe=null;pe!==null&&zT(xe,fe,pe,Xe,!1),je!==null&&Ut!==null&&zT(xe,Ut,je,Xe,!0)}}e:{if(fe=de?Gr(de):window,pe=fe.nodeName&&fe.nodeName.toLowerCase(),pe==="select"||pe==="input"&&fe.type==="file")var Ct=tS;else if(Jw(fe))if(nS)Ct=UP;else{Ct=LP;var Ue=zP}else pe=fe.nodeName,!pe||pe.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?de&&dc(de.elementType)&&(Ct=tS):Ct=BP;if(Ct&&(Ct=Ct(s,de))){eS(xe,Ct,f,ve);break e}Ue&&Ue(s,fe,de),s==="focusout"&&de&&fe.type==="number"&&de.memoizedProps.value!=null&&ud(fe,"number",fe.value)}switch(Ue=de?Gr(de):window,s){case"focusin":(Jw(Ue)||Ue.contentEditable==="true")&&(bc=Ue,ev=de,wd=null);break;case"focusout":wd=ev=bc=null;break;case"mousedown":tv=!0;break;case"contextmenu":case"mouseup":case"dragend":tv=!1,uS(xe,f,ve);break;case"selectionchange":if(GP)break;case"keydown":case"keyup":uS(xe,f,ve)}var dt;if(Dt)e:{switch(s){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else yc?cl(s,f)&&(vt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(vt="onCompositionStart");vt&&(ga&&f.locale!=="ko"&&(yc||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&yc&&(dt=gd()):(da=ve,pd="value"in da?da.value:da.textContent,yc=!0)),Ue=Qp(de,vt),0<Ue.length&&(vt=new pa(vt,s,null,f,ve),xe.push({event:vt,listeners:Ue}),dt?vt.data=dt:(dt=vc(f),dt!==null&&(vt.data=dt)))),(dt=si?OP(s,f):PP(s,f))&&(vt=Qp(de,"onBeforeInput"),0<vt.length&&(Ue=new pa("onBeforeInput","beforeinput",null,f,ve),xe.push({event:Ue,listeners:vt}),Ue.data=dt)),A3(xe,s,de,f,ve)}jT(xe,l)})}function Yd(s,l,f){return{instance:s,listener:l,currentTarget:f}}function Qp(s,l){for(var f=l+"Capture",p=[];s!==null;){var x=s,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=Di(s,f),x!=null&&p.unshift(Yd(s,x,S)),x=Di(s,l),x!=null&&p.push(Yd(s,x,S))),s.tag===3)return p;s=s.return}return[]}function D3(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function zT(s,l,f,p,x){for(var S=l._reactName,I=[];f!==null&&f!==p;){var G=f,Q=G.alternate,de=G.stateNode;if(G=G.tag,Q!==null&&Q===p)break;G!==5&&G!==26&&G!==27||de===null||(Q=de,x?(de=Di(f,S),de!=null&&I.unshift(Yd(f,de,Q))):x||(de=Di(f,S),de!=null&&I.push(Yd(f,de,Q)))),f=f.return}I.length!==0&&s.push({event:l,listeners:I})}var N3=/\r\n?/g,I3=/\u0000|\uFFFD/g;function LT(s){return(typeof s=="string"?s:""+s).replace(N3,`
`).replace(I3,"")}function BT(s,l){return l=LT(l),LT(s)===l}function Bt(s,l,f,p,x,S){switch(f){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||Ar(s,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&Ar(s,""+p);break;case"className":$r(s,"class",p);break;case"tabIndex":$r(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":$r(s,f,p);break;case"style":fd(s,p,S);break;case"data":if(l!=="object"){$r(s,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=fc(""+p),s.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(l!=="input"&&Bt(s,l,"name",x.name,x,null),Bt(s,l,"formEncType",x.formEncType,x,null),Bt(s,l,"formMethod",x.formMethod,x,null),Bt(s,l,"formTarget",x.formTarget,x,null)):(Bt(s,l,"encType",x.encType,x,null),Bt(s,l,"method",x.method,x,null),Bt(s,l,"target",x.target,x,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=fc(""+p),s.setAttribute(f,p);break;case"onClick":p!=null&&(s.onclick=ki);break;case"onScroll":p!=null&&pt("scroll",s);break;case"onScrollEnd":p!=null&&pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}f=fc(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""+p):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":p===!0?s.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,p):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(f,p):s.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(f):s.setAttribute(f,p);break;case"popover":pt("beforetoggle",s),pt("toggle",s),cc(s,"popover",p);break;case"xlinkActuate":An(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":An(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":An(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":An(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":An(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":An(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":An(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":An(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":An(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":cc(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Qh.get(f)||f,cc(s,f,p))}}function Ay(s,l,f,p,x,S){switch(f){case"style":fd(s,p,S);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof p=="string"?Ar(s,p):(typeof p=="number"||typeof p=="bigint")&&Ar(s,""+p);break;case"onScroll":p!=null&&pt("scroll",s);break;case"onScrollEnd":p!=null&&pt("scrollend",s);break;case"onClick":p!=null&&(s.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ad.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),l=f.slice(2,x?f.length-7:void 0),S=s[$n]||null,S=S!=null?S[f]:null,typeof S=="function"&&s.removeEventListener(l,S,x),typeof p=="function")){typeof S!="function"&&S!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,p,x);break e}f in s?s[f]=p:p===!0?s.setAttribute(f,""):cc(s,f,p)}}}function Zn(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",s),pt("load",s);var p=!1,x=!1,S;for(S in f)if(f.hasOwnProperty(S)){var I=f[S];if(I!=null)switch(S){case"src":p=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Bt(s,l,S,I,f,null)}}x&&Bt(s,l,"srcSet",f.srcSet,f,null),p&&Bt(s,l,"src",f.src,f,null);return;case"input":pt("invalid",s);var G=S=I=x=null,Q=null,de=null;for(p in f)if(f.hasOwnProperty(p)){var ve=f[p];if(ve!=null)switch(p){case"name":x=ve;break;case"type":I=ve;break;case"checked":Q=ve;break;case"defaultChecked":de=ve;break;case"value":S=ve;break;case"defaultValue":G=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,l));break;default:Bt(s,l,p,ve,f,null)}}Xh(s,S,G,Q,de,I,x,!1);return;case"select":pt("invalid",s),p=I=S=null;for(x in f)if(f.hasOwnProperty(x)&&(G=f[x],G!=null))switch(x){case"value":S=G;break;case"defaultValue":I=G;break;case"multiple":p=G;default:Bt(s,l,x,G,f,null)}l=S,f=I,s.multiple=!!p,l!=null?Os(s,!!p,l,!1):f!=null&&Os(s,!!p,f,!0);return;case"textarea":pt("invalid",s),S=x=p=null;for(I in f)if(f.hasOwnProperty(I)&&(G=f[I],G!=null))switch(I){case"value":p=G;break;case"defaultValue":x=G;break;case"children":S=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:Bt(s,l,I,G,f,null)}Ps(s,p,x,S);return;case"option":for(Q in f)if(f.hasOwnProperty(Q)&&(p=f[Q],p!=null))switch(Q){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Bt(s,l,Q,p,f,null)}return;case"dialog":pt("beforetoggle",s),pt("toggle",s),pt("cancel",s),pt("close",s);break;case"iframe":case"object":pt("load",s);break;case"video":case"audio":for(p=0;p<qd.length;p++)pt(qd[p],s);break;case"image":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"embed":case"source":case"link":pt("error",s),pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in f)if(f.hasOwnProperty(de)&&(p=f[de],p!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Bt(s,l,de,p,f,null)}return;default:if(dc(l)){for(ve in f)f.hasOwnProperty(ve)&&(p=f[ve],p!==void 0&&Ay(s,l,ve,p,f,void 0));return}}for(G in f)f.hasOwnProperty(G)&&(p=f[G],p!=null&&Bt(s,l,G,p,f,null))}function M3(s,l,f,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,I=null,G=null,Q=null,de=null,ve=null;for(pe in f){var xe=f[pe];if(f.hasOwnProperty(pe)&&xe!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Q=xe;default:p.hasOwnProperty(pe)||Bt(s,l,pe,null,p,xe)}}for(var fe in p){var pe=p[fe];if(xe=f[fe],p.hasOwnProperty(fe)&&(pe!=null||xe!=null))switch(fe){case"type":S=pe;break;case"name":x=pe;break;case"checked":de=pe;break;case"defaultChecked":ve=pe;break;case"value":I=pe;break;case"defaultValue":G=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,l));break;default:pe!==xe&&Bt(s,l,fe,pe,p,xe)}}uc(s,I,G,Q,de,ve,S,x);return;case"select":pe=I=G=fe=null;for(S in f)if(Q=f[S],f.hasOwnProperty(S)&&Q!=null)switch(S){case"value":break;case"multiple":pe=Q;default:p.hasOwnProperty(S)||Bt(s,l,S,null,p,Q)}for(x in p)if(S=p[x],Q=f[x],p.hasOwnProperty(x)&&(S!=null||Q!=null))switch(x){case"value":fe=S;break;case"defaultValue":G=S;break;case"multiple":I=S;default:S!==Q&&Bt(s,l,x,S,p,Q)}l=G,f=I,p=pe,fe!=null?Os(s,!!f,fe,!1):!!p!=!!f&&(l!=null?Os(s,!!f,l,!0):Os(s,!!f,f?[]:"",!1));return;case"textarea":pe=fe=null;for(G in f)if(x=f[G],f.hasOwnProperty(G)&&x!=null&&!p.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:Bt(s,l,G,null,p,x)}for(I in p)if(x=p[I],S=f[I],p.hasOwnProperty(I)&&(x!=null||S!=null))switch(I){case"value":fe=x;break;case"defaultValue":pe=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==S&&Bt(s,l,I,x,p,S)}Wh(s,fe,pe);return;case"option":for(var je in f)if(fe=f[je],f.hasOwnProperty(je)&&fe!=null&&!p.hasOwnProperty(je))switch(je){case"selected":s.selected=!1;break;default:Bt(s,l,je,null,p,fe)}for(Q in p)if(fe=p[Q],pe=f[Q],p.hasOwnProperty(Q)&&fe!==pe&&(fe!=null||pe!=null))switch(Q){case"selected":s.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Bt(s,l,Q,fe,p,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in f)fe=f[Xe],f.hasOwnProperty(Xe)&&fe!=null&&!p.hasOwnProperty(Xe)&&Bt(s,l,Xe,null,p,fe);for(de in p)if(fe=p[de],pe=f[de],p.hasOwnProperty(de)&&fe!==pe&&(fe!=null||pe!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,l));break;default:Bt(s,l,de,fe,p,pe)}return;default:if(dc(l)){for(var Ut in f)fe=f[Ut],f.hasOwnProperty(Ut)&&fe!==void 0&&!p.hasOwnProperty(Ut)&&Ay(s,l,Ut,void 0,p,fe);for(ve in p)fe=p[ve],pe=f[ve],!p.hasOwnProperty(ve)||fe===pe||fe===void 0&&pe===void 0||Ay(s,l,ve,fe,p,pe);return}}for(var se in f)fe=f[se],f.hasOwnProperty(se)&&fe!=null&&!p.hasOwnProperty(se)&&Bt(s,l,se,null,p,fe);for(xe in p)fe=p[xe],pe=f[xe],!p.hasOwnProperty(xe)||fe===pe||fe==null&&pe==null||Bt(s,l,xe,fe,p,pe)}function UT(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O3(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var x=f[p],S=x.transferSize,I=x.initiatorType,G=x.duration;if(S&&G&&UT(I)){for(I=0,G=x.responseEnd,p+=1;p<f.length;p++){var Q=f[p],de=Q.startTime;if(de>G)break;var ve=Q.transferSize,xe=Q.initiatorType;ve&&UT(xe)&&(Q=Q.responseEnd,I+=ve*(Q<G?1:(G-de)/(Q-de)))}if(--p,l+=8*(S+I)/(x.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Cy=null,Ry=null;function Zp(s){return s.nodeType===9?s:s.ownerDocument}function FT(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GT(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function ky(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Dy=null;function P3(){var s=window.event;return s&&s.type==="popstate"?s===Dy?!1:(Dy=s,!0):(Dy=null,!1)}var $T=typeof setTimeout=="function"?setTimeout:void 0,j3=typeof clearTimeout=="function"?clearTimeout:void 0,HT=typeof Promise=="function"?Promise:void 0,V3=typeof queueMicrotask=="function"?queueMicrotask:typeof HT<"u"?function(s){return HT.resolve(null).then(s).catch(z3)}:$T;function z3(s){setTimeout(function(){throw s})}function io(s){return s==="head"}function qT(s,l){var f=l,p=0;do{var x=f.nextSibling;if(s.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"||f==="/&"){if(p===0){s.removeChild(x),qc(l);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")Xd(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Xd(f);for(var S=f.firstChild;S;){var I=S.nextSibling,G=S.nodeName;S[ia]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=I}}else f==="body"&&Xd(s.ownerDocument.body);f=x}while(f);qc(l)}function YT(s,l){var f=s;s=0;do{var p=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=p}while(f)}function Ny(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Ny(f),lc(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function L3(s,l,f,p){for(;s.nodeType===1;){var x=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[ia])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(S=s.getAttribute("rel"),S==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(S!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(S=s.getAttribute("src"),(S!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===S)return s}else return s;if(s=hi(s.nextSibling),s===null)break}return null}function B3(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=hi(s.nextSibling),s===null))return null;return s}function XT(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=hi(s.nextSibling),s===null))return null;return s}function Iy(s){return s.data==="$?"||s.data==="$~"}function My(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function U3(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var p=function(){l(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function hi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var Oy=null;function WT(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return hi(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function KT(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function QT(s,l,f){switch(l=Zp(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Xd(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);lc(s)}var pi=new Map,ZT=new Set;function Jp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var os=K.d;K.d={f:F3,r:G3,D:$3,C:H3,L:q3,m:Y3,X:W3,S:X3,M:K3};function F3(){var s=os.f(),l=$p();return s||l}function G3(s){var l=ri(s);l!==null&&l.tag===5&&l.type==="form"?gE(l):os.r(s)}var Gc=typeof document>"u"?null:document;function JT(s,l,f){var p=Gc;if(p&&typeof l=="string"&&l){var x=Tr(l);x='link[rel="'+s+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),ZT.has(x)||(ZT.add(x),s={rel:s,crossOrigin:f,href:l},p.querySelector(x)===null&&(l=p.createElement("link"),Zn(l,"link",s),Tn(l),p.head.appendChild(l)))}}function $3(s){os.D(s),JT("dns-prefetch",s,null)}function H3(s,l){os.C(s,l),JT("preconnect",s,l)}function q3(s,l,f){os.L(s,l,f);var p=Gc;if(p&&s&&l){var x='link[rel="preload"][as="'+Tr(l)+'"]';l==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Tr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Tr(f.imageSizes)+'"]')):x+='[href="'+Tr(s)+'"]';var S=x;switch(l){case"style":S=$c(s);break;case"script":S=Hc(s)}pi.has(S)||(s=g({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),pi.set(S,s),p.querySelector(x)!==null||l==="style"&&p.querySelector(Wd(S))||l==="script"&&p.querySelector(Kd(S))||(l=p.createElement("link"),Zn(l,"link",s),Tn(l),p.head.appendChild(l)))}}function Y3(s,l){os.m(s,l);var f=Gc;if(f&&s){var p=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+Tr(p)+'"][href="'+Tr(s)+'"]',S=x;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Hc(s)}if(!pi.has(S)&&(s=g({rel:"modulepreload",href:s},l),pi.set(S,s),f.querySelector(x)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Kd(S)))return}p=f.createElement("link"),Zn(p,"link",s),Tn(p),f.head.appendChild(p)}}}function X3(s,l,f){os.S(s,l,f);var p=Gc;if(p&&s){var x=sa(p).hoistableStyles,S=$c(s);l=l||"default";var I=x.get(S);if(!I){var G={loading:0,preload:null};if(I=p.querySelector(Wd(S)))G.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":l},f),(f=pi.get(S))&&Py(s,f);var Q=I=p.createElement("link");Tn(Q),Zn(Q,"link",s),Q._p=new Promise(function(de,ve){Q.onload=de,Q.onerror=ve}),Q.addEventListener("load",function(){G.loading|=1}),Q.addEventListener("error",function(){G.loading|=2}),G.loading|=4,eg(I,l,p)}I={type:"stylesheet",instance:I,count:1,state:G},x.set(S,I)}}}function W3(s,l){os.X(s,l);var f=Gc;if(f&&s){var p=sa(f).hoistableScripts,x=Hc(s),S=p.get(x);S||(S=f.querySelector(Kd(x)),S||(s=g({src:s,async:!0},l),(l=pi.get(x))&&jy(s,l),S=f.createElement("script"),Tn(S),Zn(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(x,S))}}function K3(s,l){os.M(s,l);var f=Gc;if(f&&s){var p=sa(f).hoistableScripts,x=Hc(s),S=p.get(x);S||(S=f.querySelector(Kd(x)),S||(s=g({src:s,async:!0,type:"module"},l),(l=pi.get(x))&&jy(s,l),S=f.createElement("script"),Tn(S),Zn(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},p.set(x,S))}}function eA(s,l,f,p){var x=(x=ce.current)?Jp(x):null;if(!x)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=$c(f.href),f=sa(x).hoistableStyles,p=f.get(l),p||(p={type:"style",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=$c(f.href);var S=sa(x).hoistableStyles,I=S.get(s);if(I||(x=x.ownerDocument||x,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(s,I),(S=x.querySelector(Wd(s)))&&!S._p&&(I.instance=S,I.state.loading=5),pi.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},pi.set(s,f),S||Q3(x,s,f,I.state))),l&&p===null)throw Error(r(528,""));return I}if(l&&p!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Hc(f),f=sa(x).hoistableScripts,p=f.get(l),p||(p={type:"script",instance:null,count:0,state:null},f.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function $c(s){return'href="'+Tr(s)+'"'}function Wd(s){return'link[rel="stylesheet"]['+s+"]"}function tA(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function Q3(s,l,f,p){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=s.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),Zn(l,"link",f),Tn(l),s.head.appendChild(l))}function Hc(s){return'[src="'+Tr(s)+'"]'}function Kd(s){return"script[async]"+s}function nA(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var p=s.querySelector('style[data-href~="'+Tr(f.href)+'"]');if(p)return l.instance=p,Tn(p),p;var x=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),Tn(p),Zn(p,"style",x),eg(p,f.precedence,s),l.instance=p;case"stylesheet":x=$c(f.href);var S=s.querySelector(Wd(x));if(S)return l.state.loading|=4,l.instance=S,Tn(S),S;p=tA(f),(x=pi.get(x))&&Py(p,x),S=(s.ownerDocument||s).createElement("link"),Tn(S);var I=S;return I._p=new Promise(function(G,Q){I.onload=G,I.onerror=Q}),Zn(S,"link",p),l.state.loading|=4,eg(S,f.precedence,s),l.instance=S;case"script":return S=Hc(f.src),(x=s.querySelector(Kd(S)))?(l.instance=x,Tn(x),x):(p=f,(x=pi.get(S))&&(p=g({},f),jy(p,x)),s=s.ownerDocument||s,x=s.createElement("script"),Tn(x),Zn(x,"link",p),s.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,eg(p,f.precedence,s));return l.instance}function eg(s,l,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=p.length?p[p.length-1]:null,S=x,I=0;I<p.length;I++){var G=p[I];if(G.dataset.precedence===l)S=G;else if(S!==x)break}S?S.parentNode.insertBefore(s,S.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function Py(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function jy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var tg=null;function rA(s,l,f){if(tg===null){var p=new Map,x=tg=new Map;x.set(f,p)}else x=tg,p=x.get(f),p||(p=new Map,x.set(f,p));if(p.has(s))return p;for(p.set(s,null),f=f.getElementsByTagName(s),x=0;x<f.length;x++){var S=f[x];if(!(S[ia]||S[En]||s==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var I=S.getAttribute(l)||"";I=s+I;var G=p.get(I);G?G.push(S):p.set(I,[S])}}return p}function iA(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function Z3(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function aA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function J3(s,l,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=$c(p.href),S=l.querySelector(Wd(x));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=ng.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=S,Tn(S);return}S=l.ownerDocument||l,p=tA(p),(x=pi.get(x))&&Py(p,x),S=S.createElement("link"),Tn(S);var I=S;I._p=new Promise(function(G,Q){I.onload=G,I.onerror=Q}),Zn(S,"link",p),f.instance=S}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=ng.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var Vy=0;function ej(s,l){return s.stylesheets&&s.count===0&&ig(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var p=setTimeout(function(){if(s.stylesheets&&ig(s,s.stylesheets),s.unsuspend){var S=s.unsuspend;s.unsuspend=null,S()}},6e4+l);0<s.imgBytes&&Vy===0&&(Vy=62500*O3());var x=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ig(s,s.stylesheets),s.unsuspend)){var S=s.unsuspend;s.unsuspend=null,S()}},(s.imgBytes>Vy?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(x)}}:null}function ng(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ig(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var rg=null;function ig(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,rg=new Map,l.forEach(tj,s),rg=null,ng.call(s))}function tj(s,l){if(!(l.state.loading&4)){var f=rg.get(s);if(f)var p=f.get(null);else{f=new Map,rg.set(s,f);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var I=x[S];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(f.set(I.dataset.precedence,I),p=I)}p&&f.set(null,p)}x=l.instance,I=x.getAttribute("data-precedence"),S=f.get(I)||p,S===p&&f.set(null,x),f.set(I,x),this.count++,p=ng.bind(this),x.addEventListener("load",p),x.addEventListener("error",p),S?S.parentNode.insertBefore(x,S.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),l.state.loading|=4}}var Qd={$$typeof:N,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function nj(s,l,f,p,x,S,I,G,Q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.hiddenUpdates=na(null),this.identifierPrefix=p,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function sA(s,l,f,p,x,S,I,G,Q,de,ve,xe){return s=new nj(s,l,f,I,Q,de,ve,xe,G),l=1,S===!0&&(l|=24),S=qr(3,null,null,l),s.current=S,S.stateNode=s,l=mv(),l.refCount++,s.pooledCache=l,l.refCount++,S.memoizedState={element:p,isDehydrated:f,cache:l},xv(S),s}function oA(s){return s?(s=wc,s):wc}function lA(s,l,f,p,x,S){x=oA(x),p.context===null?p.context=x:p.pendingContext=x,p=Ys(l),p.payload={element:f},S=S===void 0?null:S,S!==null&&(p.callback=S),f=Xs(s,p,l),f!==null&&(Nr(f,s,l),kd(f,s,l))}function cA(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function zy(s,l){cA(s,l),(s=s.alternate)&&cA(s,l)}function uA(s){if(s.tag===13||s.tag===31){var l=fl(s,67108864);l!==null&&Nr(l,s,67108864),zy(s,67108864)}}function dA(s){if(s.tag===13||s.tag===31){var l=Qr();l=el(l);var f=fl(s,l);f!==null&&Nr(f,s,l),zy(s,l)}}var ag=!0;function rj(s,l,f,p){var x=H.T;H.T=null;var S=K.p;try{K.p=2,Ly(s,l,f,p)}finally{K.p=S,H.T=x}}function ij(s,l,f,p){var x=H.T;H.T=null;var S=K.p;try{K.p=8,Ly(s,l,f,p)}finally{K.p=S,H.T=x}}function Ly(s,l,f,p){if(ag){var x=By(p);if(x===null)Ty(s,l,p,sg,f),hA(s,p);else if(sj(x,s,l,f,p))p.stopPropagation();else if(hA(s,p),l&4&&-1<aj.indexOf(s)){for(;x!==null;){var S=ri(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var I=Fr(S.pendingLanes);if(I!==0){var G=S;for(G.pendingLanes|=2,G.entangledLanes|=2;I;){var Q=1<<31-tn(I);G.entanglements[1]|=Q,I&=~Q}ba(S),(Nt&6)===0&&(Fp=ut()+500,Hd(0))}}break;case 31:case 13:G=fl(S,2),G!==null&&Nr(G,S,2),$p(),zy(S,2)}if(S=By(p),S===null&&Ty(s,l,p,sg,f),S===x)break;x=S}x!==null&&p.stopPropagation()}else Ty(s,l,p,null,f)}}function By(s){return s=ii(s),Uy(s)}var sg=null;function Uy(s){if(sg=null,s=aa(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return sg=s,null}function fA(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kt()){case cn:return 2;case Vt:return 8;case wn:case Br:return 32;case ta:return 268435456;default:return 32}default:return 32}}var Fy=!1,ao=null,so=null,oo=null,Zd=new Map,Jd=new Map,lo=[],aj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hA(s,l){switch(s){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":Zd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jd.delete(l.pointerId)}}function ef(s,l,f,p,x,S){return s===null||s.nativeEvent!==S?(s={blockedOn:l,domEventName:f,eventSystemFlags:p,nativeEvent:S,targetContainers:[x]},l!==null&&(l=ri(l),l!==null&&uA(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function sj(s,l,f,p,x){switch(l){case"focusin":return ao=ef(ao,s,l,f,p,x),!0;case"dragenter":return so=ef(so,s,l,f,p,x),!0;case"mouseover":return oo=ef(oo,s,l,f,p,x),!0;case"pointerover":var S=x.pointerId;return Zd.set(S,ef(Zd.get(S)||null,s,l,f,p,x)),!0;case"gotpointercapture":return S=x.pointerId,Jd.set(S,ef(Jd.get(S)||null,s,l,f,p,x)),!0}return!1}function pA(s){var l=aa(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,Ci(s.priority,function(){dA(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,Ci(s.priority,function(){dA(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function og(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=By(s.nativeEvent);if(f===null){f=s.nativeEvent;var p=new f.constructor(f.type,f);hd=p,f.target.dispatchEvent(p),hd=null}else return l=ri(f),l!==null&&uA(l),s.blockedOn=f,!1;l.shift()}return!0}function gA(s,l,f){og(s)&&f.delete(l)}function oj(){Fy=!1,ao!==null&&og(ao)&&(ao=null),so!==null&&og(so)&&(so=null),oo!==null&&og(oo)&&(oo=null),Zd.forEach(gA),Jd.forEach(gA)}function lg(s,l){s.blockedOn===l&&(s.blockedOn=null,Fy||(Fy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oj)))}var cg=null;function mA(s){cg!==s&&(cg=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cg===s&&(cg=null);for(var l=0;l<s.length;l+=3){var f=s[l],p=s[l+1],x=s[l+2];if(typeof p!="function"){if(Uy(p||f)===null)continue;break}var S=ri(f);S!==null&&(s.splice(l,3),l-=3,Bv(S,{pending:!0,data:x,method:f.method,action:p},p,x))}}))}function qc(s){function l(Q){return lg(Q,s)}ao!==null&&lg(ao,s),so!==null&&lg(so,s),oo!==null&&lg(oo,s),Zd.forEach(l),Jd.forEach(l);for(var f=0;f<lo.length;f++){var p=lo[f];p.blockedOn===s&&(p.blockedOn=null)}for(;0<lo.length&&(f=lo[0],f.blockedOn===null);)pA(f),f.blockedOn===null&&lo.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var x=f[p],S=f[p+1],I=x[$n]||null;if(typeof S=="function")I||mA(f);else if(I){var G=null;if(S&&S.hasAttribute("formAction")){if(x=S,I=S[$n]||null)G=I.formAction;else if(Uy(x)!==null)continue}else G=I.action;typeof G=="function"?f[p+1]=G:(f.splice(p,3),p-=3),mA(f)}}}function vA(){function s(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(I){return x=I})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,x=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function Gy(s){this._internalRoot=s}ug.prototype.render=Gy.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,p=Qr();lA(f,p,s,l,null,null)},ug.prototype.unmount=Gy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;lA(s.current,2,null,s,null,null),$p(),l[ra]=null}};function ug(s){this._internalRoot=s}ug.prototype.unstable_scheduleHydration=function(s){if(s){var l=$h();s={blockedOn:null,target:s,priority:l};for(var f=0;f<lo.length&&l!==0&&l<lo[f].priority;f++);lo.splice(f,0,s),f===0&&pA(s)}};var yA=e.version;if(yA!=="19.2.0")throw Error(r(527,yA,"19.2.0"));K.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var lj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{Ur=dg.inject(lj),Sn=dg}catch{}}return nf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,p="",x=TE,S=AE,I=CE;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),l=sA(s,1,!1,null,null,f,p,null,x,S,I,vA),s[ra]=l.current,Ey(s),new Gy(l)},nf.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var p=!1,x="",S=TE,I=AE,G=CE,Q=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(I=f.onCaughtError),f.onRecoverableError!==void 0&&(G=f.onRecoverableError),f.formState!==void 0&&(Q=f.formState)),l=sA(s,1,!0,l,f??null,p,x,Q,S,I,G,vA),l.context=oA(null),f=l.current,p=Qr(),p=el(p),x=Ys(p),x.callback=null,Xs(f,x,p),f=p,l.current.lanes=f,Zo(l,f),ba(l),s[ra]=l.current,Ey(s),new ug(l)},nf.version="19.2.0",nf}var RA;function bj(){if(RA)return qy.exports;RA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qy.exports=yj(),qy.exports}var xj=bj();const _j="modulepreload",wj=function(t){return"/personal-budget-pwa/"+t},kA={},Et=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");i=u(n.map(d=>{if(d=wj(d),d in kA)return;kA[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":_j,h||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((b,_)=>{m.addEventListener("load",b),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})};function Sj(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:o}=t;let c,u;const d=async(g=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(c=await Et(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/personal-budget-pwa/sw.js",{scope:"/personal-budget-pwa/",type:"classic"})).catch(g=>{o?.(g)}),!c)return;c.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),c.addEventListener("installed",g=>{g.isUpdate||r?.()}),c.register({immediate:e}).then(g=>{a?a("/personal-budget-pwa/sw.js",g):i?.(g)}).catch(g=>{o?.(g)})}}return u=h(),d}const Ej=()=>{};var DA={};const Bk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Tj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Uk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,g=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(m=64)),r.push(n[h],n[g],n[m],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Tj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||g==null)throw new Aj;const m=a<<2|c>>4;if(r.push(m),d!==64){const b=c<<4&240|d>>2;if(r.push(b),g!==64){const _=d<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Aj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Cj=function(t){const e=Bk(t);return Uk.encodeByteArray(e,!0)},sm=function(t){return Cj(t).replace(/\./g,"")},Fk=function(t){try{return Uk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const kj=()=>Rj().__FIREBASE_DEFAULTS__,Dj=()=>{if(typeof process>"u"||typeof DA>"u")return;const t=DA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fk(t[1]);return e&&JSON.parse(e)},Zm=()=>{try{return Ej()||kj()||Dj()||Nj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gk=t=>Zm()?.emulatorHosts?.[t],Ij=t=>{const e=Gk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$k=()=>Zm()?.config,Hk=t=>Zm()?.[`_${t}`];class Mj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function zu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qk(t){return(await fetch(t,{credentials:"include"})).ok}function Oj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sm(JSON.stringify(n)),sm(JSON.stringify(o)),""].join(".")}const bf={};function Pj(){const t={prod:[],emulator:[]};for(const e of Object.keys(bf))bf[e]?t.emulator.push(e):t.prod.push(e);return t}function jj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let NA=!1;function Yk(t,e){if(typeof window>"u"||typeof document>"u"||!zu(window.location.host)||bf[t]===e||bf[t]||NA)return;bf[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=Pj().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,b){m.setAttribute("width","24"),m.setAttribute("id",b),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{NA=!0,o()},m}function h(m,b){m.setAttribute("id",b),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){const m=jj(r),b=n("text"),_=document.getElementById(b)||document.createElement("span"),w=n("learnmore"),E=document.getElementById(w)||document.createElement("a"),T=n("preprendIcon"),C=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;c(N),h(E,w);const L=d();u(C,T),N.append(C,_,E,L),document.body.appendChild(N)}a?(_.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())}function zj(){const t=Zm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Lj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Bj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Uj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fj(){const t=dr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Gj(){return!zj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $j(){try{return typeof indexedDB=="object"}catch{return!1}}function Hj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const qj="FirebaseError";class Rs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qj,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lh.prototype.create)}}class lh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?Yj(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Rs(i,c,r)}}function Yj(t,e){return t.replace(Xj,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Xj=/\{\$([^}]+)}/g;function Wj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Io(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(IA(a)&&IA(o)){if(!Io(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function IA(t){return t!==null&&typeof t=="object"}function ch(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function cf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Kj(t,e){const n=new Qj(t,e);return n.subscribe.bind(n)}class Qj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Zj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ky),i.error===void 0&&(i.error=Ky),i.complete===void 0&&(i.complete=Ky);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ky(){}function Yt(t){return t&&t._delegate?t._delegate:t}let Gl=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const Cl="[DEFAULT]";let Jj=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Mj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t5(e))try{this.getOrInitializeService({instanceIdentifier:Cl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cl){return this.instances.has(e)}getOptions(e=Cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cl){return this.component?this.component.multipleInstances?e:Cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function e5(t){return t===Cl?void 0:t}function t5(t){return t.instantiationMode==="EAGER"}class n5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Jj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(yt||(yt={}));const r5={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},i5=yt.INFO,a5={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},s5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=a5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class C1{constructor(e){this.name=e,this._logLevel=i5,this._logHandler=s5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const o5=(t,e)=>e.some(n=>t instanceof n);let MA,OA;function l5(){return MA||(MA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c5(){return OA||(OA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xk=new WeakMap,Kb=new WeakMap,Wk=new WeakMap,Qy=new WeakMap,R1=new WeakMap;function u5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Ao(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xk.set(n,t)}).catch(()=>{}),R1.set(e,t),e}function d5(t){if(Kb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Kb.set(t,e)}let Qb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ao(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f5(t){Qb=t(Qb)}function h5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zy(this),e,...n);return Wk.set(r,e.sort?e.sort():[e]),Ao(r)}:c5().includes(t)?function(...e){return t.apply(Zy(this),e),Ao(Xk.get(this))}:function(...e){return Ao(t.apply(Zy(this),e))}}function p5(t){return typeof t=="function"?h5(t):(t instanceof IDBTransaction&&d5(t),o5(t,l5())?new Proxy(t,Qb):t)}function Ao(t){if(t instanceof IDBRequest)return u5(t);if(Qy.has(t))return Qy.get(t);const e=p5(t);return e!==t&&(Qy.set(t,e),R1.set(e,t)),e}const Zy=t=>R1.get(t);function g5(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Ao(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ao(o.result),u.oldVersion,u.newVersion,Ao(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const m5=["get","getKey","getAll","getAllKeys","count"],v5=["put","add","delete","clear"],Jy=new Map;function PA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jy.get(e))return Jy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=v5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||m5.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return Jy.set(e,a),a}f5(t=>({...t,get:(e,n,r)=>PA(e,n)||t.get(e,n,r),has:(e,n)=>!!PA(e,n)||t.has(e,n)}));class y5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function b5(t){return t.getComponent()?.type==="VERSION"}const Zb="@firebase/app",jA="0.14.6";const bs=new C1("@firebase/app"),x5="@firebase/app-compat",_5="@firebase/analytics-compat",w5="@firebase/analytics",S5="@firebase/app-check-compat",E5="@firebase/app-check",T5="@firebase/auth",A5="@firebase/auth-compat",C5="@firebase/database",R5="@firebase/data-connect",k5="@firebase/database-compat",D5="@firebase/functions",N5="@firebase/functions-compat",I5="@firebase/installations",M5="@firebase/installations-compat",O5="@firebase/messaging",P5="@firebase/messaging-compat",j5="@firebase/performance",V5="@firebase/performance-compat",z5="@firebase/remote-config",L5="@firebase/remote-config-compat",B5="@firebase/storage",U5="@firebase/storage-compat",F5="@firebase/firestore",G5="@firebase/ai",$5="@firebase/firestore-compat",H5="firebase",q5="12.6.0";const Jb="[DEFAULT]",Y5={[Zb]:"fire-core",[x5]:"fire-core-compat",[w5]:"fire-analytics",[_5]:"fire-analytics-compat",[E5]:"fire-app-check",[S5]:"fire-app-check-compat",[T5]:"fire-auth",[A5]:"fire-auth-compat",[C5]:"fire-rtdb",[R5]:"fire-data-connect",[k5]:"fire-rtdb-compat",[D5]:"fire-fn",[N5]:"fire-fn-compat",[I5]:"fire-iid",[M5]:"fire-iid-compat",[O5]:"fire-fcm",[P5]:"fire-fcm-compat",[j5]:"fire-perf",[V5]:"fire-perf-compat",[z5]:"fire-rc",[L5]:"fire-rc-compat",[B5]:"fire-gcs",[U5]:"fire-gcs-compat",[F5]:"fire-fst",[$5]:"fire-fst-compat",[G5]:"fire-vertex","fire-js":"fire-js",[H5]:"fire-js-all"};const om=new Map,X5=new Map,ex=new Map;function VA(t,e){try{t.container.addComponent(e)}catch(n){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yu(t){const e=t.name;if(ex.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;ex.set(e,t);for(const n of om.values())VA(n,t);for(const n of X5.values())VA(n,t);return!0}function k1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yi(t){return t==null?!1:t.settings!==void 0}const W5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Co=new lh("app","Firebase",W5);class K5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Co.create("app-deleted",{appName:this._name})}}const Lu=q5;function Kk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Jb,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Co.create("bad-app-name",{appName:String(i)});if(n||(n=$k()),!n)throw Co.create("no-options");const a=om.get(i);if(a){if(Io(n,a.options)&&Io(r,a.config))return a;throw Co.create("duplicate-app",{appName:i})}const o=new n5(i);for(const u of ex.values())o.addComponent(u);const c=new K5(n,r,o);return om.set(i,c),c}function Qk(t=Jb){const e=om.get(t);if(!e&&t===Jb&&$k())return Kk();if(!e)throw Co.create("no-app",{appName:t});return e}function Ro(t,e,n){let r=Y5[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(o.join(" "));return}yu(new Gl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Q5="firebase-heartbeat-database",Z5=1,jf="firebase-heartbeat-store";let eb=null;function Zk(){return eb||(eb=g5(Q5,Z5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Co.create("idb-open",{originalErrorMessage:t.message})})),eb}async function J5(t){try{const n=(await Zk()).transaction(jf),r=await n.objectStore(jf).get(Jk(t));return await n.done,r}catch(e){if(e instanceof Rs)bs.warn(e.message);else{const n=Co.create("idb-get",{originalErrorMessage:e?.message});bs.warn(n.message)}}}async function zA(t,e){try{const r=(await Zk()).transaction(jf,"readwrite");await r.objectStore(jf).put(e,Jk(t)),await r.done}catch(n){if(n instanceof Rs)bs.warn(n.message);else{const r=Co.create("idb-set",{originalErrorMessage:n?.message});bs.warn(r.message)}}}function Jk(t){return`${t.name}!${t.options.appId}`}const eV=1024,tV=30;class nV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=LA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>tV){const i=aV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=LA(),{heartbeatsToSend:n,unsentEntries:r}=rV(this._heartbeatsCache.heartbeats),i=sm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return bs.warn(e),""}}}function LA(){return new Date().toISOString().substring(0,10)}function rV(t,e=eV){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),BA(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),BA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $j()?Hj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await J5(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function BA(t){return sm(JSON.stringify({version:2,heartbeats:t})).length}function aV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function sV(t){yu(new Gl("platform-logger",e=>new y5(e),"PRIVATE")),yu(new Gl("heartbeat",e=>new nV(e),"PRIVATE")),Ro(Zb,jA,t),Ro(Zb,jA,"esm2020"),Ro("fire-js","")}sV("");function eD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oV=eD,tD=new lh("auth","Firebase",eD());const lm=new C1("@firebase/auth");function lV(t,...e){lm.logLevel<=yt.WARN&&lm.warn(`Auth (${Lu}): ${t}`,...e)}function Lg(t,...e){lm.logLevel<=yt.ERROR&&lm.error(`Auth (${Lu}): ${t}`,...e)}function Xi(t,...e){throw D1(t,...e)}function Ta(t,...e){return D1(t,...e)}function nD(t,e,n){const r={...oV(),[e]:n};return new lh("auth","Firebase",r).create(e,{appName:t.name})}function hs(t){return nD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tD.create(t,...e)}function Ye(t,e,...n){if(!t)throw D1(e,...n)}function us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lg(e),new Error(e)}function xs(t,e){t||us(e)}function tx(){return typeof self<"u"&&self.location?.href||""}function cV(){return UA()==="http:"||UA()==="https:"}function UA(){return typeof self<"u"&&self.location?.protocol||null}function uV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cV()||Bj()||"connection"in navigator)?navigator.onLine:!0}function dV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class uh{constructor(e,n){this.shortDelay=e,this.longDelay=n,xs(n>e,"Short delay should be less than long delay!"),this.isMobile=Vj()||Uj()}get(){return uV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function N1(t,e){xs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class rD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const hV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pV=new uh(3e4,6e4);function za(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ji(t,e,n,r,i={}){return iD(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=ch({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return Lj()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&zu(t.emulatorConfig.host)&&(d.credentials="include"),rD.fetch()(await aD(t,t.config.apiHost,n,c),d)})}async function iD(t,e,n){t._canInitEmulator=!1;const r={...fV,...e};try{const i=new mV(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw fg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fg(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw fg(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw fg(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw nD(t,h,d);Xi(t,h)}}catch(i){if(i instanceof Rs)throw i;Xi(t,"network-request-failed",{message:String(i)})}}async function dh(t,e,n,r,i={}){const a=await Ji(t,e,n,r,i);return"mfaPendingCredential"in a&&Xi(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function aD(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?N1(t.config,i):`${t.config.apiScheme}://${i}`;return hV.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function gV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ta(this.auth,"network-request-failed")),pV.get())})}}function fg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ta(t,e,r);return i.customData._tokenResponse=n,i}function FA(t){return t!==void 0&&t.enterprise!==void 0}class vV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yV(t,e){return Ji(t,"GET","/v2/recaptchaConfig",za(t,e))}async function bV(t,e){return Ji(t,"POST","/v1/accounts:delete",e)}async function cm(t,e){return Ji(t,"POST","/v1/accounts:lookup",e)}function xf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xV(t,e=!1){const n=Yt(t),r=await n.getIdToken(e),i=I1(r);Ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:xf(tb(i.auth_time)),issuedAtTime:xf(tb(i.iat)),expirationTime:xf(tb(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function tb(t){return Number(t)*1e3}function I1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lg("JWT malformed, contained fewer than 3 sections"),null;try{const i=Fk(n);return i?JSON.parse(i):(Lg("Failed to decode base64 JWT payload"),null)}catch(i){return Lg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GA(t){const e=I1(t);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function bu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rs&&_V(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _V({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class wV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class nx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xf(this.lastLoginAt),this.creationTime=xf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function um(t){const e=t.auth,n=await t.getIdToken(),r=await bu(t,cm(e,{idToken:n}));Ye(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?sD(i.providerUserInfo):[],o=EV(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nx(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function SV(t){const e=Yt(t);await um(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function TV(t,e){const n=await iD(t,{},async()=>{const r=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await aD(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&zu(t.emulatorConfig.host)&&(u.credentials="include"),rD.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AV(t,e){return Ji(t,"POST","/v2/accounts:revokeToken",za(t,e))}class du{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ye(e.length!==0,"internal-error");const n=GA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await TV(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new du;return r&&(Ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ye(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Ye(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new du,this.toJSON())}_performRefresh(){return us("not implemented")}}function uo(t,e){Ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new wV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await bu(this,this.stsTokenManager.getToken(this.auth,e));return Ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xV(this,e)}reload(){return SV(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await um(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yi(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await bu(this,bV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:m,isAnonymous:b,providerData:_,stsTokenManager:w}=n;Ye(g&&w,e,"internal-error");const E=du.fromJSON(this.name,w);Ye(typeof g=="string",e,"internal-error"),uo(r,e.name),uo(i,e.name),Ye(typeof m=="boolean",e,"internal-error"),Ye(typeof b=="boolean",e,"internal-error"),uo(a,e.name),uo(o,e.name),uo(c,e.name),uo(u,e.name),uo(d,e.name),uo(h,e.name);const T=new Gi({uid:g,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:E,createdAt:d,lastLoginAt:h});return _&&Array.isArray(_)&&(T.providerData=_.map(C=>({...C}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new du;i.updateFromServerResponse(n);const a=new Gi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await um(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ye(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?sD(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new du;c.updateFromIdToken(r);const u=new Gi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new nx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,d),u}}const $A=new Map;function ds(t){xs(t instanceof Function,"Expected a class definition");let e=$A.get(t);return e?(xs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$A.set(t,e),e)}class oD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oD.type="NONE";const HA=oD;function Bg(t,e,n){return`firebase:${t}:${e}:${n}`}class fu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Bg(this.userKey,i.apiKey,a),this.fullPersistenceKey=Bg("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await cm(this.auth,{idToken:e}).catch(()=>{});return n?Gi._fromGetAccountInfoResponse(this.auth,n,e):null}return Gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fu(ds(HA),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ds(HA);const o=Bg(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){let g;if(typeof h=="string"){const m=await cm(e,{idToken:h}).catch(()=>{});if(!m)break;g=await Gi._fromGetAccountInfoResponse(e,m,h)}else g=Gi._fromJSON(e,h);d!==a&&(c=g),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new fu(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new fu(a,e,r))}}function qA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hD(e))return"Blackberry";if(pD(e))return"Webos";if(cD(e))return"Safari";if((e.includes("chrome/")||uD(e))&&!e.includes("edge/"))return"Chrome";if(fD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function lD(t=dr()){return/firefox\//i.test(t)}function cD(t=dr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uD(t=dr()){return/crios\//i.test(t)}function dD(t=dr()){return/iemobile/i.test(t)}function fD(t=dr()){return/android/i.test(t)}function hD(t=dr()){return/blackberry/i.test(t)}function pD(t=dr()){return/webos/i.test(t)}function M1(t=dr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CV(t=dr()){return M1(t)&&!!window.navigator?.standalone}function RV(){return Fj()&&document.documentMode===10}function gD(t=dr()){return M1(t)||fD(t)||pD(t)||hD(t)||/windows phone/i.test(t)||dD(t)}function mD(t,e=[]){let n;switch(t){case"Browser":n=qA(dr());break;case"Worker":n=`${qA(dr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lu}/${r}`}class kV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function DV(t,e={}){return Ji(t,"GET","/v2/passwordPolicy",za(t,e))}const NV=6;class IV{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??NV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class MV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YA(this),this.idTokenSubscription=new YA(this),this.beforeStateQueue=new kV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ds(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cm(this,{idToken:e}),r=await Gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await um(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yi(this.app))return Promise.reject(hs(this));const n=e?Yt(e):null;return n&&Ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yi(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yi(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DV(this),n=new IV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AV(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ds(e)||this._popupRedirectResolver;Ye(n,this,"argument-error"),this.redirectPersistenceManager=await fu.create(this,[ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(yi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lV(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qo(t){return Yt(t)}class YA{constructor(e){this.auth=e,this.observer=null,this.addObserver=Kj(n=>this.observer=n)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OV(t){Jm=t}function vD(t){return Jm.loadJS(t)}function PV(){return Jm.recaptchaEnterpriseScript}function jV(){return Jm.gapiScript}function VV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zV{constructor(){this.enterprise=new LV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class LV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const BV="recaptcha-enterprise",yD="NO_RECAPTCHA";class UV{constructor(e){this.type=BV,this.auth=qo(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{yV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new vV(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;FA(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(yD)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zV().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&FA(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=PV();u.length!==0&&(u+=c),vD(u).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function XA(t,e,n,r=!1,i=!1){const a=new UV(t);let o;if(i)o=yD;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function dm(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await XA(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await XA(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}function FV(t,e){const n=k1(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Io(a,e??{}))return i;Xi(i,"already-initialized")}return n.initialize({options:e})}function GV(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ds);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function $V(t,e,n){const r=qo(t);Ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=bD(e),{host:o,port:c}=HV(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ye(Io(d,r.config.emulator)&&Io(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,zu(o)?(qk(`${a}//${o}${u}`),Yk("Auth",!0)):qV()}function bD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HV(t){const e=bD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:WA(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:WA(o)}}}function WA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class O1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,n){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}async function YV(t,e){return Ji(t,"POST","/v1/accounts:signUp",e)}async function XV(t,e){return Ji(t,"POST","/v1/accounts:update",za(t,e))}async function WV(t,e){return dh(t,"POST","/v1/accounts:signInWithPassword",za(t,e))}async function xD(t,e){return Ji(t,"POST","/v1/accounts:sendOobCode",za(t,e))}async function KV(t,e){return xD(t,e)}async function QV(t,e){return xD(t,e)}async function ZV(t,e){return dh(t,"POST","/v1/accounts:signInWithEmailLink",za(t,e))}async function JV(t,e){return dh(t,"POST","/v1/accounts:signInWithEmailLink",za(t,e))}class Vf extends O1{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Vf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,n,"signInWithPassword",WV);case"emailLink":return ZV(e,{email:this._email,oobCode:this._password});default:Xi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dm(e,r,"signUpPassword",YV);case"emailLink":return JV(e,{idToken:n,email:this._email,oobCode:this._password});default:Xi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hu(t,e){return dh(t,"POST","/v1/accounts:signInWithIdp",za(t,e))}const ez="http://localhost";class $l extends O1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $l(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new $l(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return hu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hu(e,n)}buildRequest(){const e={requestUri:ez,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ch(n)}return e}}function tz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nz(t){const e=lf(cf(t)).link,n=e?lf(cf(e)).deep_link_id:null,r=lf(cf(t)).deep_link_id;return(r?lf(cf(r)).link:null)||r||n||e||t}class P1{constructor(e){const n=lf(cf(e)),r=n.apiKey??null,i=n.oobCode??null,a=tz(n.mode??null);Ye(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=nz(e);try{return new P1(n)}catch{return null}}}class Jl{constructor(){this.providerId=Jl.PROVIDER_ID}static credential(e,n){return Vf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=P1.parseLink(n);return Ye(r,"argument-error"),Vf._fromEmailAndCode(e,r.code,r.tenantId)}}Jl.PROVIDER_ID="password";Jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _D{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fh extends _D{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mo extends fh{constructor(){super("facebook.com")}static credential(e){return $l._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";mo.PROVIDER_ID="facebook.com";class vo extends fh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $l._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vo.credential(n,r)}catch{return null}}}vo.GOOGLE_SIGN_IN_METHOD="google.com";vo.PROVIDER_ID="google.com";class yo extends fh{constructor(){super("github.com")}static credential(e){return $l._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}}yo.GITHUB_SIGN_IN_METHOD="github.com";yo.PROVIDER_ID="github.com";class bo extends fh{constructor(){super("twitter.com")}static credential(e,n){return $l._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return bo.credential(n,r)}catch{return null}}}bo.TWITTER_SIGN_IN_METHOD="twitter.com";bo.PROVIDER_ID="twitter.com";async function rz(t,e){return dh(t,"POST","/v1/accounts:signUp",za(t,e))}class Hl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Gi._fromIdTokenResponse(e,r,i),o=KA(r);return new Hl({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=KA(r);return new Hl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function KA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class fm extends Rs{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new fm(e,n,r,i)}}function wD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fm._fromErrorAndOperation(t,a,e,r):a})}async function iz(t,e,n=!1){const r=await bu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hl._forOperation(t,"link",r)}async function SD(t,e,n=!1){const{auth:r}=t;if(yi(r.app))return Promise.reject(hs(r));const i="reauthenticate";try{const a=await bu(t,wD(r,i,e,t),n);Ye(a.idToken,r,"internal-error");const o=I1(a.idToken);Ye(o,r,"internal-error");const{sub:c}=o;return Ye(t.uid===c,r,"user-mismatch"),Hl._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Xi(r,"user-mismatch"),a}}async function ED(t,e,n=!1){if(yi(t.app))return Promise.reject(hs(t));const r="signIn",i=await wD(t,r,e),a=await Hl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function az(t,e){return ED(qo(t),e)}async function sz(t,e){return SD(Yt(t),e)}function oz(t,e,n){Ye(n.url?.length>0,t,"invalid-continue-uri"),Ye(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Ye(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ye(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Ye(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function TD(t){const e=qo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lz(t,e,n){const r=qo(t);await dm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",QV)}async function cz(t,e){await XV(Yt(t),{oobCode:e})}async function uz(t,e,n){if(yi(t.app))return Promise.reject(hs(t));const r=qo(t),o=await dm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rz).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&TD(t),u}),c=await Hl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function dz(t,e,n){return yi(t.app)?Promise.reject(hs(t)):az(Yt(t),Jl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TD(t),r})}async function QA(t,e){const n=Yt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&oz(n.auth,i,e);const{email:a}=await KV(n.auth,i);a!==t.email&&await t.reload()}async function fz(t,e){return Ji(t,"POST","/v1/accounts:update",e)}async function hz(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Yt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await bu(r,fz(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function pz(t,e,n,r){return Yt(t).onIdTokenChanged(e,n,r)}function gz(t,e,n){return Yt(t).beforeAuthStateChanged(e,n)}function mz(t,e,n,r){return Yt(t).onAuthStateChanged(e,n,r)}function ZA(t){return Yt(t).signOut()}async function vz(t){return Yt(t).delete()}const hm="__sak";class AD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hm,"1"),this.storage.removeItem(hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const yz=1e3,bz=10;class CD extends AD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);RV()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bz):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CD.type="LOCAL";const xz=CD;class RD extends AD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RD.type="SESSION";const kD=RD;function _z(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class e0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new e0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await _z(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e0.receivers=[];function j1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class wz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=j1("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Aa(){return window}function Sz(t){Aa().location.href=t}function DD(){return typeof Aa().WorkerGlobalScope<"u"&&typeof Aa().importScripts=="function"}async function Ez(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tz(){return navigator?.serviceWorker?.controller||null}function Az(){return DD()?self:null}const ND="firebaseLocalStorageDb",Cz=1,pm="firebaseLocalStorage",ID="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function t0(t,e){return t.transaction([pm],e?"readwrite":"readonly").objectStore(pm)}function Rz(){const t=indexedDB.deleteDatabase(ND);return new hh(t).toPromise()}function rx(){const t=indexedDB.open(ND,Cz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pm,{keyPath:ID})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pm)?e(r):(r.close(),await Rz(),e(await rx()))})})}async function JA(t,e,n){const r=t0(t,!0).put({[ID]:e,value:n});return new hh(r).toPromise()}async function kz(t,e){const n=t0(t,!1).get(e),r=await new hh(n).toPromise();return r===void 0?null:r.value}function e2(t,e){const n=t0(t,!0).delete(e);return new hh(n).toPromise()}const Dz=800,Nz=3;class MD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Nz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=e0._getInstance(Az()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Ez(),!this.activeServiceWorker)return;this.sender=new wz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rx();return await JA(e,hm,"1"),await e2(e,hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>JA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kz(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>e2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=t0(i,!1).getAll();return new hh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MD.type="LOCAL";const Iz=MD;new uh(3e4,6e4);function Mz(t,e){return e?ds(e):(Ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class V1 extends O1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Oz(t){return ED(t.auth,new V1(t),t.bypassAuthState)}function Pz(t){const{auth:e,user:n}=t;return Ye(n,e,"internal-error"),SD(n,new V1(t),t.bypassAuthState)}async function jz(t){const{auth:e,user:n}=t;return Ye(n,e,"internal-error"),iz(n,new V1(t),t.bypassAuthState)}class OD{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Oz;case"linkViaPopup":case"linkViaRedirect":return jz;case"reauthViaPopup":case"reauthViaRedirect":return Pz;default:Xi(this.auth,"internal-error")}}resolve(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vz=new uh(2e3,1e4);class Jc extends OD{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Jc.currentPopupAction&&Jc.currentPopupAction.cancel(),Jc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const e=j1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ta(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ta(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ta(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Vz.get())};e()}}Jc.currentPopupAction=null;const zz="pendingRedirect",Ug=new Map;class Lz extends OD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ug.get(this.auth._key());if(!e){try{const r=await Bz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ug.set(this.auth._key(),e)}return this.bypassAuthState||Ug.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bz(t,e){const n=Gz(e),r=Fz(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Uz(t,e){Ug.set(t._key(),e)}function Fz(t){return ds(t._redirectPersistence)}function Gz(t){return Bg(zz,t.config.apiKey,t.name)}async function $z(t,e,n=!1){if(yi(t.app))return Promise.reject(hs(t));const r=qo(t),i=Mz(r,e),o=await new Lz(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const Hz=600*1e3;class qz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!PD(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ta(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Hz&&this.cachedEventUids.clear(),this.cachedEventUids.has(t2(e))}saveEventToCache(e){this.cachedEventUids.add(t2(e)),this.lastProcessedEventTime=Date.now()}}function t2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PD({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Yz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PD(t);default:return!1}}async function Xz(t,e={}){return Ji(t,"GET","/v1/projects",e)}const Wz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kz=/^https?/;async function Qz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Xz(t);for(const n of e)try{if(Zz(n))return}catch{}Xi(t,"unauthorized-domain")}function Zz(t){const e=tx(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Kz.test(n))return!1;if(Wz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Jz=new uh(3e4,6e4);function n2(){const t=Aa().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function e6(t){return new Promise((e,n)=>{function r(){n2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n2(),n(Ta(t,"network-request-failed"))},timeout:Jz.get()})}if(Aa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Aa().gapi?.load)r();else{const i=VV("iframefcb");return Aa()[i]=()=>{gapi.load?r():n(Ta(t,"network-request-failed"))},vD(`${jV()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Fg=null,e})}let Fg=null;function t6(t){return Fg=Fg||e6(t),Fg}const n6=new uh(5e3,15e3),r6="__/auth/iframe",i6="emulator/auth/iframe",a6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o6(t){const e=t.config;Ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?N1(e,i6):`https://${t.config.authDomain}/${r6}`,r={apiKey:e.apiKey,appName:t.name,v:Lu},i=s6.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${ch(r).slice(1)}`}async function l6(t){const e=await t6(t),n=Aa().gapi;return Ye(n,t,"internal-error"),e.open({where:document.body,url:o6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a6,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Ta(t,"network-request-failed"),c=Aa().setTimeout(()=>{a(o)},n6.get());function u(){Aa().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}const c6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u6=500,d6=600,f6="_blank",h6="http://localhost";class r2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p6(t,e,n,r=u6,i=d6){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...c6,width:r.toString(),height:i.toString(),top:a,left:o},d=dr().toLowerCase();n&&(c=uD(d)?f6:n),lD(d)&&(e=e||h6,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[b,_])=>`${m}${b}=${_},`,"");if(CV(d)&&c!=="_self")return g6(e||"",c),new r2(null);const g=window.open(e||"",c,h);Ye(g,t,"popup-blocked");try{g.focus()}catch{}return new r2(g)}function g6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const m6="__/auth/handler",v6="emulator/auth/handler",y6=encodeURIComponent("fac");async function i2(t,e,n,r,i,a){Ye(t.config.authDomain,t,"auth-domain-config-required"),Ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Lu,eventId:i};if(e instanceof _D){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Wj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries({}))o[h]=g}if(e instanceof fh){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${y6}=${encodeURIComponent(u)}`:"";return`${b6(t)}?${ch(c).slice(1)}${d}`}function b6({config:t}){return t.emulator?N1(t,v6):`https://${t.authDomain}/${m6}`}const nb="webStorageSupport";class x6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kD,this._completeRedirectFn=$z,this._overrideRedirectResult=Uz}async _openPopup(e,n,r,i){xs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await i2(e,n,r,tx(),i);return p6(e,a,j1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await i2(e,n,r,tx(),i);return Sz(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(xs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await l6(e),r=new qz(e);return n.register("authEvent",i=>(Ye(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nb,{type:nb},i=>{const a=i?.[0]?.[nb];a!==void 0&&n(!!a),Xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Qz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gD()||cD()||M1()}}const _6=x6;var a2="@firebase/auth",s2="1.11.1";class w6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function S6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E6(t){yu(new Gl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mD(t)},d=new MV(r,i,a,u);return GV(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yu(new Gl("auth-internal",e=>{const n=qo(e.getProvider("auth").getImmediate());return(r=>new w6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ro(a2,s2,S6(t)),Ro(a2,s2,"esm2020")}const T6=300,A6=Hk("authIdTokenMaxAge")||T6;let o2=null;const C6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>A6)return;const i=n?.token;o2!==i&&(o2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function R6(t=Qk()){const e=k1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FV(t,{popupRedirectResolver:_6,persistence:[Iz,xz,kD]}),r=Hk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=C6(a.toString());gz(n,o,()=>o(n.currentUser)),pz(n,c=>o(c))}}const i=Gk("auth");return i&&$V(n,`http://${i}`),n}function k6(){return document.getElementsByTagName("head")?.[0]??document}OV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Ta("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",k6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E6("Browser");var l2="popstate";function D6(t={}){function e(i,a){let{pathname:o="/",search:c="",hash:u=""}=ec(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ix("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:zf(a))}function r(i,a){Si(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return I6(e,n,r,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Si(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function N6(){return Math.random().toString(36).substring(2,10)}function c2(t,e){return{usr:t.state,key:t.key,idx:e}}function ix(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ec(e):e,state:n,key:e&&e.key||r||N6()}}function zf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ec(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function I6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function g(){c="POP";let E=h(),T=E==null?null:E-d;d=E,u&&u({action:c,location:w.location,delta:T})}function m(E,T){c="PUSH";let C=ix(w.location,E,T);n&&n(C,E),d=h()+1;let N=c2(C,d),L=w.createHref(C);try{o.pushState(N,"",L)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(L)}a&&u&&u({action:c,location:w.location,delta:1})}function b(E,T){c="REPLACE";let C=ix(w.location,E,T);n&&n(C,E),d=h();let N=c2(C,d),L=w.createHref(C);o.replaceState(N,"",L),a&&u&&u({action:c,location:w.location,delta:0})}function _(E){return M6(E)}let w={get action(){return c},get location(){return t(i,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(l2,g),u=E,()=>{i.removeEventListener(l2,g),u=null}},createHref(E){return e(i,E)},createURL:_,encodeLocation(E){let T=_(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:b,go(E){return o.go(E)}};return w}function M6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),on(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:zf(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function jD(t,e,n="/"){return O6(t,e,n,!1)}function O6(t,e,n,r){let i=typeof e=="string"?ec(e):e,a=_s(i.pathname||"/",n);if(a==null)return null;let o=VD(t);P6(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=q6(a);c=$6(o[u],d,r)}return c}function VD(t,e=[],n=[],r="",i=!1){let a=(o,c,u=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;on(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=ps([r,h.relativePath]),m=n.concat(h);o.children&&o.children.length>0&&(on(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),VD(o.children,e,m,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:F6(g,o.index),routesMeta:m})};return t.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of zD(o.path))a(o,c,!0,u)}),e}function zD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=zD(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function P6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:G6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var j6=/^:[\w-]+$/,V6=3,z6=2,L6=1,B6=10,U6=-2,u2=t=>t==="*";function F6(t,e){let n=t.split("/"),r=n.length;return n.some(u2)&&(r+=U6),e&&(r+=z6),n.filter(i=>!u2(i)).reduce((i,a)=>i+(j6.test(a)?V6:a===""?L6:B6),r)}function G6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function $6(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=gm({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=gm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:ps([a,g.pathname]),pathnameBase:K6(ps([a,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(a=ps([a,g.pathnameBase]))}return o}function gm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=H6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:g},m)=>{if(h==="*"){let _=c[m]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=c[m];return g&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function H6(t,e=!1,n=!0){Si(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function q6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Si(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function _s(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var Y6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function X6(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ec(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=d2(n.substring(1),"/"):a=d2(n,e)):a=e,{pathname:a,search:Q6(r),hash:Z6(i)}}function d2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function rb(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function W6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function LD(t){let e=W6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function BD(t,e,n,r=!1){let i;typeof t=="string"?i=ec(t):(i={...t},on(!i.pathname||!i.pathname.includes("?"),rb("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),rb("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),rb("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;i.pathname=m.join("/")}c=g>=0?e[g]:"/"}let u=X6(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var ps=t=>t.join("/").replace(/\/\/+/g,"/"),K6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Q6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,J6=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function eL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function tL(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var UD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function FD(t,e){let n=t;if(typeof n!="string"||!Y6.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(UD)try{let a=new URL(window.location.href),o=n.startsWith("//")?new URL(a.protocol+n):new URL(n),c=_s(o.pathname,e);o.origin===a.origin&&c!=null?n=c+o.search+o.hash:i=!0}catch{Si(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var GD=["POST","PUT","PATCH","DELETE"];new Set(GD);var nL=["GET",...GD];new Set(nL);var Bu=U.createContext(null);Bu.displayName="DataRouter";var n0=U.createContext(null);n0.displayName="DataRouterState";var rL=U.createContext(!1),$D=U.createContext({isTransitioning:!1});$D.displayName="ViewTransition";var iL=U.createContext(new Map);iL.displayName="Fetchers";var aL=U.createContext(null);aL.displayName="Await";var Ai=U.createContext(null);Ai.displayName="Navigation";var ph=U.createContext(null);ph.displayName="Location";var La=U.createContext({outlet:null,matches:[],isDataRoute:!1});La.displayName="Route";var z1=U.createContext(null);z1.displayName="RouteError";var HD="REACT_ROUTER_ERROR",sL="REDIRECT",oL="ROUTE_ERROR_RESPONSE";function lL(t){if(t.startsWith(`${HD}:${sL}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function cL(t){if(t.startsWith(`${HD}:${oL}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new J6(e.status,e.statusText,e.data)}catch{}}function uL(t,{relative:e}={}){on(gh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=U.useContext(Ai),{hash:i,pathname:a,search:o}=mh(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:ps([n,a])),r.createHref({pathname:c,search:o,hash:i})}function gh(){return U.useContext(ph)!=null}function ea(){return on(gh(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(ph).location}var qD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YD(t){U.useContext(Ai).static||U.useLayoutEffect(t)}function Ba(){let{isDataRoute:t}=U.useContext(La);return t?EL():dL()}function dL(){on(gh(),"useNavigate() may be used only in the context of a <Router> component.");let t=U.useContext(Bu),{basename:e,navigator:n}=U.useContext(Ai),{matches:r}=U.useContext(La),{pathname:i}=ea(),a=JSON.stringify(LD(r)),o=U.useRef(!1);return YD(()=>{o.current=!0}),U.useCallback((u,d={})=>{if(Si(o.current,qD),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=BD(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ps([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,i,t])}U.createContext(null);function fL(){let{matches:t}=U.useContext(La),e=t[t.length-1];return e?e.params:{}}function mh(t,{relative:e}={}){let{matches:n}=U.useContext(La),{pathname:r}=ea(),i=JSON.stringify(LD(n));return U.useMemo(()=>BD(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function hL(t,e){return XD(t,e)}function XD(t,e,n,r,i){on(gh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=U.useContext(Ai),{matches:o}=U.useContext(La),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",g=c&&c.route;{let C=g&&g.path||"";KD(d,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=ea(),b;if(e){let C=typeof e=="string"?ec(e):e;on(h==="/"||C.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=m;let _=b.pathname||"/",w=_;if(h!=="/"){let C=h.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=jD(t,{pathname:w});Si(g||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Si(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=yL(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:ps([h,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:ps([h,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),o,n,r,i);return e&&T?U.createElement(ph.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},T):T}function pL(){let t=SL(),e=eL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:a},"ErrorBoundary")," or"," ",U.createElement("code",{style:a},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,o)}var gL=U.createElement(pL,null),WD=class extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=cL(t.digest);n&&(t=n)}let e=t!==void 0?U.createElement(La.Provider,{value:this.props.routeContext},U.createElement(z1.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?U.createElement(mL,{error:t},e):e}};WD.contextType=rL;var ib=new WeakMap;function mL({children:t,error:e}){let{basename:n}=U.useContext(Ai);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=lL(e.digest);if(r){let i=ib.get(e);if(i)throw i;let a=FD(r.location,n);if(UD&&!ib.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw ib.set(e,o),o}return U.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function vL({routeContext:t,match:e,children:n}){let r=U.useContext(Bu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(La.Provider,{value:t},n)}function yL(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let h=a.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);on(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n)for(let h=0;h<a.length;h++){let g=a[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=h),g.route.id){let{loaderData:m,errors:b}=n,_=g.route.loader&&!m.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||_){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=n&&r?(h,g)=>{r(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:tL(n.matches),errorInfo:g})}:void 0;return a.reduceRight((h,g,m)=>{let b,_=!1,w=null,E=null;n&&(b=o&&g.route.id?o[g.route.id]:void 0,w=g.route.errorElement||gL,c&&(u<0&&m===0?(KD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,E=null):u===m&&(_=!0,E=g.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,m+1)),C=()=>{let N;return b?N=w:_?N=E:g.route.Component?N=U.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=h,U.createElement(vL,{match:g,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:N})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?U.createElement(WD,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:C(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:d}):C()},null)}function L1(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bL(t){let e=U.useContext(Bu);return on(e,L1(t)),e}function xL(t){let e=U.useContext(n0);return on(e,L1(t)),e}function _L(t){let e=U.useContext(La);return on(e,L1(t)),e}function B1(t){let e=_L(t),n=e.matches[e.matches.length-1];return on(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function wL(){return B1("useRouteId")}function SL(){let t=U.useContext(z1),e=xL("useRouteError"),n=B1("useRouteError");return t!==void 0?t:e.errors?.[n]}function EL(){let{router:t}=bL("useNavigate"),e=B1("useNavigate"),n=U.useRef(!1);return YD(()=>{n.current=!0}),U.useCallback(async(i,a={})=>{Si(n.current,qD),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var f2={};function KD(t,e,n){!e&&!f2[t]&&(f2[t]=!0,Si(!1,n))}U.memo(TL);function TL({routes:t,future:e,state:n,onError:r}){return XD(t,void 0,n,r,e)}function ls(t){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function AL({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){on(!gh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=U.useMemo(()=>({basename:c,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[c,i,a,o]);typeof n=="string"&&(n=ec(n));let{pathname:d="/",search:h="",hash:g="",state:m=null,key:b="default"}=n,_=U.useMemo(()=>{let w=_s(d,c);return w==null?null:{location:{pathname:w,search:h,hash:g,state:m,key:b},navigationType:r}},[c,d,h,g,m,b,r]);return Si(_!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:U.createElement(Ai.Provider,{value:u},U.createElement(ph.Provider,{children:e,value:_}))}function CL({children:t,location:e}){return hL(ax(t),e)}function ax(t,e=[]){let n=[];return U.Children.forEach(t,(r,i)=>{if(!U.isValidElement(r))return;let a=[...e,i];if(r.type===U.Fragment){n.push.apply(n,ax(r.props.children,a));return}on(r.type===ls,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ax(r.props.children,a)),n.push(o)}),n}var Gg="get",$g="application/x-www-form-urlencoded";function r0(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function RL(t){return r0(t)&&t.tagName.toLowerCase()==="button"}function kL(t){return r0(t)&&t.tagName.toLowerCase()==="form"}function DL(t){return r0(t)&&t.tagName.toLowerCase()==="input"}function NL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function IL(t,e){return t.button===0&&(!e||e==="_self")&&!NL(t)}function sx(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function ML(t,e){let n=sx(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var hg=null;function OL(){if(hg===null)try{new FormData(document.createElement("form"),0),hg=!1}catch{hg=!0}return hg}var PL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ab(t){return t!=null&&!PL.has(t)?(Si(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$g}"`),null):t}function jL(t,e){let n,r,i,a,o;if(kL(t)){let c=t.getAttribute("action");r=c?_s(c,e):null,n=t.getAttribute("method")||Gg,i=ab(t.getAttribute("enctype"))||$g,a=new FormData(t)}else if(RL(t)||DL(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?_s(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Gg,i=ab(t.getAttribute("formenctype"))||ab(c.getAttribute("enctype"))||$g,a=new FormData(c,t),!OL()){let{name:d,type:h,value:g}=t;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,g)}}else{if(r0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gg,r=null,i=$g,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function VL(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&_s(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function zL(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LL(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function BL(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await zL(a,n);return o.links?o.links():[]}return[]}));return $L(r.flat(1).filter(LL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function h2(t,e,n,r,i,a){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function UL(t,e,{includeHydrateFallback:n}={}){return FL(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function FL(t){return[...new Set(t)]}function GL(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function $L(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(GL(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function QD(){let t=U.useContext(Bu);return U1(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function HL(){let t=U.useContext(n0);return U1(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var F1=U.createContext(void 0);F1.displayName="FrameworkContext";function ZD(){let t=U.useContext(F1);return U1(t,"You must render this element inside a <HydratedRouter> element"),t}function qL(t,e){let n=U.useContext(F1),[r,i]=U.useState(!1),[a,o]=U.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=e,m=U.useRef(null);U.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=T=>{T.forEach(C=>{o(C.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[t]),U.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let b=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,m,{}]:[a,m,{onFocus:rf(c,b),onBlur:rf(u,_),onMouseEnter:rf(d,b),onMouseLeave:rf(h,_),onTouchStart:rf(g,b)}]:[!1,m,{}]}function rf(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function YL({page:t,...e}){let{router:n}=QD(),r=U.useMemo(()=>jD(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?U.createElement(WL,{page:t,matches:r,...e}):null}function XL(t){let{manifest:e,routeModules:n}=ZD(),[r,i]=U.useState([]);return U.useEffect(()=>{let a=!1;return BL(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function WL({page:t,matches:e,...n}){let r=ea(),{future:i,manifest:a,routeModules:o}=ZD(),{basename:c}=QD(),{loaderData:u,matches:d}=HL(),h=U.useMemo(()=>h2(t,e,d,a,r,"data"),[t,e,d,a,r]),g=U.useMemo(()=>h2(t,e,d,a,r,"assets"),[t,e,d,a,r]),m=U.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,E=!1;if(e.forEach(C=>{let N=a.routes[C.route.id];!N||!N.hasLoader||(!h.some(L=>L.route.id===C.route.id)&&C.route.id in u&&o[C.route.id]?.shouldRevalidate||N.hasClientLoader?E=!0:w.add(C.route.id))}),w.size===0)return[];let T=VL(t,c,i.unstable_trailingSlashAwareDataRequests,"data");return E&&w.size>0&&T.searchParams.set("_routes",e.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[c,i.unstable_trailingSlashAwareDataRequests,u,r,a,h,e,t,o]),b=U.useMemo(()=>UL(g,a),[g,a]),_=XL(g);return U.createElement(U.Fragment,null,m.map(w=>U.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),b.map(w=>U.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),_.map(({key:w,link:E})=>U.createElement("link",{key:w,nonce:n.nonce,...E,crossOrigin:E.crossOrigin??n.crossOrigin})))}function KL(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var QL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QL&&(window.__reactRouterVersion="7.13.0")}catch{}function ZL({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=U.useRef();i.current==null&&(i.current=D6({window:r,v5Compat:!0}));let a=i.current,[o,c]=U.useState({action:a.action,location:a.location}),u=U.useCallback(d=>{n===!1?c(d):U.startTransition(()=>c(d))},[n]);return U.useLayoutEffect(()=>a.listen(u),[a,u]),U.createElement(AL,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n})}var JD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eN=U.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:m,...b},_){let{basename:w,unstable_useTransitions:E}=U.useContext(Ai),T=typeof d=="string"&&JD.test(d),C=FD(d,w);d=C.to;let N=uL(d,{relative:i}),[L,j,M]=qL(r,b),A=n9(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:m,unstable_useTransitions:E});function R(V){e&&e(V),V.defaultPrevented||A(V)}let D=U.createElement("a",{...b,...M,href:C.absoluteURL||N,onClick:C.isExternal||a?e:R,ref:KL(_,j),target:u,"data-discover":!T&&n==="render"?"true":void 0});return L&&!T?U.createElement(U.Fragment,null,D,U.createElement(YL,{page:N})):D});eN.displayName="Link";var JL=U.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...d},h){let g=mh(o,{relative:d.relative}),m=ea(),b=U.useContext(n0),{navigator:_,basename:w}=U.useContext(Ai),E=b!=null&&l9(g)&&c===!0,T=_.encodeLocation?_.encodeLocation(g).pathname:g.pathname,C=m.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(C=C.toLowerCase(),N=N?N.toLowerCase():null,T=T.toLowerCase()),N&&w&&(N=_s(N,w)||N);const L=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let j=C===T||!i&&C.startsWith(T)&&C.charAt(L)==="/",M=N!=null&&(N===T||!i&&N.startsWith(T)&&N.charAt(T.length)==="/"),A={isActive:j,isPending:M,isTransitioning:E},R=j?e:void 0,D;typeof r=="function"?D=r(A):D=[r,j?"active":null,M?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(A):a;return U.createElement(eN,{...d,"aria-current":R,className:D,ref:h,style:V,to:o,viewTransition:c},typeof u=="function"?u(A):u)});JL.displayName="NavLink";var e9=U.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Gg,action:c,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:m,...b},_)=>{let{unstable_useTransitions:w}=U.useContext(Ai),E=s9(),T=o9(c,{relative:d}),C=o.toLowerCase()==="get"?"get":"post",N=typeof c=="string"&&JD.test(c),L=j=>{if(u&&u(j),j.defaultPrevented)return;j.preventDefault();let M=j.nativeEvent.submitter,A=M?.getAttribute("formmethod")||o,R=()=>E(M||j.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:m});w&&n!==!1?U.startTransition(()=>R()):R()};return U.createElement("form",{ref:_,method:C,action:T,onSubmit:r?u:L,...b,"data-discover":!N&&t==="render"?"true":void 0})});e9.displayName="Form";function t9(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tN(t){let e=U.useContext(Bu);return on(e,t9(t)),e}function n9(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let d=Ba(),h=ea(),g=mh(t,{relative:a});return U.useCallback(m=>{if(IL(m,e)){m.preventDefault();let b=n!==void 0?n:zf(h)===zf(g),_=()=>d(t,{replace:b,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c});u?U.startTransition(()=>_()):_()}},[h,d,g,n,r,e,t,i,a,o,c,u])}function r9(t){Si(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=U.useRef(sx(t)),n=U.useRef(!1),r=ea(),i=U.useMemo(()=>ML(r.search,n.current?null:e.current),[r.search]),a=Ba(),o=U.useCallback((c,u)=>{const d=sx(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var i9=0,a9=()=>`__${String(++i9)}__`;function s9(){let{router:t}=tN("useSubmit"),{basename:e}=U.useContext(Ai),n=wL(),r=t.fetch,i=t.navigate;return U.useCallback(async(a,o={})=>{let{action:c,method:u,encType:d,formData:h,body:g}=jL(a,e);if(o.navigate===!1){let m=o.fetcherKey||a9();await r(m,n,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,n])}function o9(t,{relative:e}={}){let{basename:n}=U.useContext(Ai),r=U.useContext(La);on(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...mh(t||".",{relative:e})},o=ea();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(h=>h==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let h=c.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ps([n,a.pathname])),zf(a)}function l9(t,{relative:e}={}){let n=U.useContext($D);on(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tN("useViewTransitionState"),i=mh(t,{relative:e});if(!n.isTransitioning)return!1;let a=_s(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=_s(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gm(i.pathname,o)!=null||gm(i.pathname,a)!=null}const c9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u9=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),p2=t=>{const e=u9(t);return e.charAt(0).toUpperCase()+e.slice(1)},nN=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),d9=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var f9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h9=U.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},u)=>U.createElement("svg",{ref:u,...f9,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nN("lucide",i),...!a&&!d9(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>U.createElement(d,h)),...Array.isArray(a)?a:[a]]));const et=(t,e)=>{const n=U.forwardRef(({className:r,...i},a)=>U.createElement(h9,{ref:a,iconNode:e,className:nN(`lucide-${c9(p2(t))}`,`lucide-${t}`,r),...i}));return n.displayName=p2(t),n};const p9=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ql=et("arrow-left",p9);const g9=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],m9=et("arrow-right-left",g9);const v9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],y9=et("arrow-right",v9);const b9=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],x9=et("calendar",b9);const _9=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],w9=et("chart-column",_9);const S9=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],E9=et("chart-pie",S9);const T9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],A9=et("check",T9);const C9=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],R9=et("chevron-left",C9);const k9=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xa=et("chevron-right",k9);const D9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],N9=et("circle-arrow-down",D9);const I9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],M9=et("circle-arrow-up",I9);const O9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ox=et("circle-check-big",O9);const P9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cs=et("circle-check",P9);const j9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],g2=et("circle",j9);const V9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],m2=et("dollar-sign",V9);const z9=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],v2=et("download",z9);const L9=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],B9=et("ellipsis",L9);const U9=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],F9=et("eye-off",U9);const G9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$9=et("eye",G9);const H9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],q9=et("file-text",H9);const Y9=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],X9=et("folder",Y9);const W9=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],K9=et("funnel",W9);const Q9=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Lf=et("grip-vertical",Q9);const Z9=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],J9=et("house",Z9);const eB=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],tB=et("list",eB);const nB=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],y2=et("loader",nB);const rB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],iB=et("log-out",rB);const aB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],lx=et("mail",aB);const sB=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],oB=et("pause",sB);const lB=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],cB=et("pen",lB);const uB=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],vh=et("piggy-bank",uB);const dB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yh=et("plus",dB);const fB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Bf=et("refresh-cw",fB);const hB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],pB=et("rotate-ccw",hB);const gB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],mB=et("search",gB);const vB=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yB=et("settings",vB);const bB=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Uf=et("sparkles",bB);const xB=[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]],_B=et("tags",xB);const wB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],SB=et("target",wB);const EB=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],mm=et("trash-2",EB);const TB=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rN=et("trash",TB);const AB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],vm=et("trending-up",AB);const CB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pu=et("triangle-alert",CB);const RB=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],kB=et("undo-2",RB);const DB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],NB=et("upload",DB);const IB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],MB=et("user-plus",IB);const OB=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],i0=et("wallet",OB);const PB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],a0=et("x",PB),b2=t=>{let e;const n=new Set,r=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const m=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(b=>b(e,m))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,c);return c},jB=(t=>t?b2(t):b2),VB=t=>t;function zB(t,e=VB){const n=of.useSyncExternalStore(t.subscribe,of.useCallback(()=>e(t.getState()),[t,e]),of.useCallback(()=>e(t.getInitialState()),[t,e]));return of.useDebugValue(n),n}const x2=t=>{const e=jB(t),n=r=>zB(e,r);return Object.assign(n,e),n},G1=(t=>t?x2(t):x2),_2={BASE_URL:"/personal-budget-pwa/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",VITE_FIREBASE_APP_ID:"1:137454342284:web:0ae73943f9058a4342aba9",VITE_FIREBASE_AUTH_DOMAIN:"personal-budget-pwa-5defb.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-VMP5DF6273",VITE_FIREBASE_MESSAGING_SENDER_ID:"137454342284",VITE_FIREBASE_PROJECT_ID:"personal-budget-pwa-5defb",VITE_FIREBASE_STORAGE_BUCKET:"personal-budget-pwa-5defb.firebasestorage.app"},Ff=new Map,pg=t=>{const e=Ff.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},LB=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=Ff.get(n.name);if(r)return{type:"tracked",store:t,...r};const i={connection:e.connect(n),stores:{}};return Ff.set(n.name,i),{type:"tracked",store:t,...i}},BB=(t,e)=>{if(e===void 0)return;const n=Ff.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&Ff.delete(t))},UB=t=>{var e,n;if(!t)return;const r=t.split(`
`),i=r.findIndex(o=>o.includes("api.setState"));if(i<0)return;const a=((e=r[i+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(a))==null?void 0:n[1]},FB=(t,e={})=>(n,r,i)=>{const{enabled:a,anonymousActionType:o,store:c,...u}=e;let d;try{d=(a??(_2?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return t(n,r,i);const{connection:h,...g}=LB(c,d,u);let m=!0;i.setState=((w,E,T)=>{const C=n(w,E);if(!m)return C;const N=T===void 0?{type:o||UB(new Error().stack)||"anonymous"}:typeof T=="string"?{type:T}:T;return c===void 0?(h?.send(N,r()),C):(h?.send({...N,type:`${c}/${N.type}`},{...pg(u.name),[c]:i.getState()}),C)}),i.devtools={cleanup:()=>{h&&typeof h.unsubscribe=="function"&&h.unsubscribe(),BB(u.name,c)}};const b=(...w)=>{const E=m;m=!1,n(...w),m=E},_=t(i.setState,r,i);if(g.type==="untracked"?h?.init(_):(g.stores[g.store]=i,h?.init(Object.fromEntries(Object.entries(g.stores).map(([w,E])=>[w,w===g.store?_:E.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let w=!1;const E=i.dispatch;i.dispatch=(...T)=>{(_2?"production":void 0)!=="production"&&T[0].type==="__setState"&&!w&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),w=!0),E(...T)}}return h.subscribe(w=>{var E;switch(w.type){case"ACTION":if(typeof w.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return sb(w.payload,T=>{if(T.type==="__setState"){if(c===void 0){b(T.state);return}Object.keys(T.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const C=T.state[c];if(C==null)return;JSON.stringify(i.getState())!==JSON.stringify(C)&&b(C);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(T)});case"DISPATCH":switch(w.payload.type){case"RESET":return b(_),c===void 0?h?.init(i.getState()):h?.init(pg(u.name));case"COMMIT":if(c===void 0){h?.init(i.getState());return}return h?.init(pg(u.name));case"ROLLBACK":return sb(w.state,T=>{if(c===void 0){b(T),h?.init(i.getState());return}b(T[c]),h?.init(pg(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return sb(w.state,T=>{if(c===void 0){b(T);return}JSON.stringify(i.getState())!==JSON.stringify(T[c])&&b(T[c])});case"IMPORT_STATE":{const{nextLiftedState:T}=w.payload,C=(E=T.computedStates.slice(-1)[0])==null?void 0:E.state;if(!C)return;b(c===void 0?C:C[c]),h?.send(null,T);return}case"PAUSE_RECORDING":return m=!m}return}}),_},GB=FB,sb=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function $B(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const o=u=>u===null?null:JSON.parse(u,void 0),c=(a=n.getItem(i))!=null?a:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const cx=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return cx(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return cx(r)(n)}}}},HB=(t,e)=>(n,r,i)=>{let a={storage:$B(()=>localStorage),partialize:w=>w,version:0,merge:(w,E)=>({...E,...w}),...e},o=!1;const c=new Set,u=new Set;let d=a.storage;if(!d)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...w)},r,i);const h=()=>{const w=a.partialize({...r()});return d.setItem(a.name,{state:w,version:a.version})},g=i.setState;i.setState=(w,E)=>(g(w,E),h());const m=t((...w)=>(n(...w),h()),r,i);i.getInitialState=()=>m;let b;const _=()=>{var w,E;if(!d)return;o=!1,c.forEach(C=>{var N;return C((N=r())!=null?N:m)});const T=((E=a.onRehydrateStorage)==null?void 0:E.call(a,(w=r())!=null?w:m))||void 0;return cx(d.getItem.bind(d))(a.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==a.version){if(a.migrate){const N=a.migrate(C.state,C.version);return N instanceof Promise?N.then(L=>[!0,L]):[!0,N]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var N;const[L,j]=C;if(b=a.merge(j,(N=r())!=null?N:m),n(b,!0),L)return h()}).then(()=>{T?.(b,void 0),b=r(),o=!0,u.forEach(C=>C(b))}).catch(C=>{T?.(void 0,C)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(d=w.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},a.skipHydration||_(),b||m},iN=HB;var qB="firebase",YB="12.6.0";Ro(qB,YB,"app");var w2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ko,aN;(function(){var t;function e(A,R){function D(){}D.prototype=R.prototype,A.F=R.prototype,A.prototype=new D,A.prototype.constructor=A,A.D=function(V,P,B){for(var O=Array(arguments.length-2),W=2;W<arguments.length;W++)O[W-2]=arguments[W];return R.prototype[P].apply(V,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,R,D){D||(D=0);const V=Array(16);if(typeof R=="string")for(var P=0;P<16;++P)V[P]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(P=0;P<16;++P)V[P]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=A.g[0],D=A.g[1],P=A.g[2];let B=A.g[3],O;O=R+(B^D&(P^B))+V[0]+3614090360&4294967295,R=D+(O<<7&4294967295|O>>>25),O=B+(P^R&(D^P))+V[1]+3905402710&4294967295,B=R+(O<<12&4294967295|O>>>20),O=P+(D^B&(R^D))+V[2]+606105819&4294967295,P=B+(O<<17&4294967295|O>>>15),O=D+(R^P&(B^R))+V[3]+3250441966&4294967295,D=P+(O<<22&4294967295|O>>>10),O=R+(B^D&(P^B))+V[4]+4118548399&4294967295,R=D+(O<<7&4294967295|O>>>25),O=B+(P^R&(D^P))+V[5]+1200080426&4294967295,B=R+(O<<12&4294967295|O>>>20),O=P+(D^B&(R^D))+V[6]+2821735955&4294967295,P=B+(O<<17&4294967295|O>>>15),O=D+(R^P&(B^R))+V[7]+4249261313&4294967295,D=P+(O<<22&4294967295|O>>>10),O=R+(B^D&(P^B))+V[8]+1770035416&4294967295,R=D+(O<<7&4294967295|O>>>25),O=B+(P^R&(D^P))+V[9]+2336552879&4294967295,B=R+(O<<12&4294967295|O>>>20),O=P+(D^B&(R^D))+V[10]+4294925233&4294967295,P=B+(O<<17&4294967295|O>>>15),O=D+(R^P&(B^R))+V[11]+2304563134&4294967295,D=P+(O<<22&4294967295|O>>>10),O=R+(B^D&(P^B))+V[12]+1804603682&4294967295,R=D+(O<<7&4294967295|O>>>25),O=B+(P^R&(D^P))+V[13]+4254626195&4294967295,B=R+(O<<12&4294967295|O>>>20),O=P+(D^B&(R^D))+V[14]+2792965006&4294967295,P=B+(O<<17&4294967295|O>>>15),O=D+(R^P&(B^R))+V[15]+1236535329&4294967295,D=P+(O<<22&4294967295|O>>>10),O=R+(P^B&(D^P))+V[1]+4129170786&4294967295,R=D+(O<<5&4294967295|O>>>27),O=B+(D^P&(R^D))+V[6]+3225465664&4294967295,B=R+(O<<9&4294967295|O>>>23),O=P+(R^D&(B^R))+V[11]+643717713&4294967295,P=B+(O<<14&4294967295|O>>>18),O=D+(B^R&(P^B))+V[0]+3921069994&4294967295,D=P+(O<<20&4294967295|O>>>12),O=R+(P^B&(D^P))+V[5]+3593408605&4294967295,R=D+(O<<5&4294967295|O>>>27),O=B+(D^P&(R^D))+V[10]+38016083&4294967295,B=R+(O<<9&4294967295|O>>>23),O=P+(R^D&(B^R))+V[15]+3634488961&4294967295,P=B+(O<<14&4294967295|O>>>18),O=D+(B^R&(P^B))+V[4]+3889429448&4294967295,D=P+(O<<20&4294967295|O>>>12),O=R+(P^B&(D^P))+V[9]+568446438&4294967295,R=D+(O<<5&4294967295|O>>>27),O=B+(D^P&(R^D))+V[14]+3275163606&4294967295,B=R+(O<<9&4294967295|O>>>23),O=P+(R^D&(B^R))+V[3]+4107603335&4294967295,P=B+(O<<14&4294967295|O>>>18),O=D+(B^R&(P^B))+V[8]+1163531501&4294967295,D=P+(O<<20&4294967295|O>>>12),O=R+(P^B&(D^P))+V[13]+2850285829&4294967295,R=D+(O<<5&4294967295|O>>>27),O=B+(D^P&(R^D))+V[2]+4243563512&4294967295,B=R+(O<<9&4294967295|O>>>23),O=P+(R^D&(B^R))+V[7]+1735328473&4294967295,P=B+(O<<14&4294967295|O>>>18),O=D+(B^R&(P^B))+V[12]+2368359562&4294967295,D=P+(O<<20&4294967295|O>>>12),O=R+(D^P^B)+V[5]+4294588738&4294967295,R=D+(O<<4&4294967295|O>>>28),O=B+(R^D^P)+V[8]+2272392833&4294967295,B=R+(O<<11&4294967295|O>>>21),O=P+(B^R^D)+V[11]+1839030562&4294967295,P=B+(O<<16&4294967295|O>>>16),O=D+(P^B^R)+V[14]+4259657740&4294967295,D=P+(O<<23&4294967295|O>>>9),O=R+(D^P^B)+V[1]+2763975236&4294967295,R=D+(O<<4&4294967295|O>>>28),O=B+(R^D^P)+V[4]+1272893353&4294967295,B=R+(O<<11&4294967295|O>>>21),O=P+(B^R^D)+V[7]+4139469664&4294967295,P=B+(O<<16&4294967295|O>>>16),O=D+(P^B^R)+V[10]+3200236656&4294967295,D=P+(O<<23&4294967295|O>>>9),O=R+(D^P^B)+V[13]+681279174&4294967295,R=D+(O<<4&4294967295|O>>>28),O=B+(R^D^P)+V[0]+3936430074&4294967295,B=R+(O<<11&4294967295|O>>>21),O=P+(B^R^D)+V[3]+3572445317&4294967295,P=B+(O<<16&4294967295|O>>>16),O=D+(P^B^R)+V[6]+76029189&4294967295,D=P+(O<<23&4294967295|O>>>9),O=R+(D^P^B)+V[9]+3654602809&4294967295,R=D+(O<<4&4294967295|O>>>28),O=B+(R^D^P)+V[12]+3873151461&4294967295,B=R+(O<<11&4294967295|O>>>21),O=P+(B^R^D)+V[15]+530742520&4294967295,P=B+(O<<16&4294967295|O>>>16),O=D+(P^B^R)+V[2]+3299628645&4294967295,D=P+(O<<23&4294967295|O>>>9),O=R+(P^(D|~B))+V[0]+4096336452&4294967295,R=D+(O<<6&4294967295|O>>>26),O=B+(D^(R|~P))+V[7]+1126891415&4294967295,B=R+(O<<10&4294967295|O>>>22),O=P+(R^(B|~D))+V[14]+2878612391&4294967295,P=B+(O<<15&4294967295|O>>>17),O=D+(B^(P|~R))+V[5]+4237533241&4294967295,D=P+(O<<21&4294967295|O>>>11),O=R+(P^(D|~B))+V[12]+1700485571&4294967295,R=D+(O<<6&4294967295|O>>>26),O=B+(D^(R|~P))+V[3]+2399980690&4294967295,B=R+(O<<10&4294967295|O>>>22),O=P+(R^(B|~D))+V[10]+4293915773&4294967295,P=B+(O<<15&4294967295|O>>>17),O=D+(B^(P|~R))+V[1]+2240044497&4294967295,D=P+(O<<21&4294967295|O>>>11),O=R+(P^(D|~B))+V[8]+1873313359&4294967295,R=D+(O<<6&4294967295|O>>>26),O=B+(D^(R|~P))+V[15]+4264355552&4294967295,B=R+(O<<10&4294967295|O>>>22),O=P+(R^(B|~D))+V[6]+2734768916&4294967295,P=B+(O<<15&4294967295|O>>>17),O=D+(B^(P|~R))+V[13]+1309151649&4294967295,D=P+(O<<21&4294967295|O>>>11),O=R+(P^(D|~B))+V[4]+4149444226&4294967295,R=D+(O<<6&4294967295|O>>>26),O=B+(D^(R|~P))+V[11]+3174756917&4294967295,B=R+(O<<10&4294967295|O>>>22),O=P+(R^(B|~D))+V[2]+718787259&4294967295,P=B+(O<<15&4294967295|O>>>17),O=D+(B^(P|~R))+V[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(P+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+B&4294967295}r.prototype.v=function(A,R){R===void 0&&(R=A.length);const D=R-this.blockSize,V=this.C;let P=this.h,B=0;for(;B<R;){if(P==0)for(;B<=D;)i(this,A,B),B+=this.blockSize;if(typeof A=="string"){for(;B<R;)if(V[P++]=A.charCodeAt(B++),P==this.blockSize){i(this,V),P=0;break}}else for(;B<R;)if(V[P++]=A[B++],P==this.blockSize){i(this,V),P=0;break}}this.h=P,this.o+=R},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;R=this.o*8;for(var D=A.length-8;D<A.length;++D)A[D]=R&255,R/=256;for(this.v(A),A=Array(16),R=0,D=0;D<4;++D)for(let V=0;V<32;V+=8)A[R++]=this.g[D]>>>V&255;return A};function a(A,R){var D=c;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=R(A)}function o(A,R){this.h=R;const D=[];let V=!0;for(let P=A.length-1;P>=0;P--){const B=A[P]|0;V&&B==R||(D[P]=B,V=!1)}this.g=D}var c={};function u(A){return-128<=A&&A<128?a(A,function(R){return new o([R|0],R<0?-1:0)}):new o([A|0],A<0?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return g;if(A<0)return E(d(-A));const R=[];let D=1;for(let V=0;A>=D;V++)R[V]=A/D|0,D*=4294967296;return new o(R,0)}function h(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return E(h(A.substring(1),R));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=d(Math.pow(R,8));let V=g;for(let B=0;B<A.length;B+=8){var P=Math.min(8,A.length-B);const O=parseInt(A.substring(B,B+P),R);P<8?(P=d(Math.pow(R,P)),V=V.j(P).add(d(O))):(V=V.j(D),V=V.add(d(O)))}return V}var g=u(0),m=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(w(this))return-E(this).m();let A=0,R=1;for(let D=0;D<this.g.length;D++){const V=this.i(D);A+=(V>=0?V:4294967296+V)*R,R*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(w(this))return"-"+E(this).toString(A);const R=d(Math.pow(A,6));var D=this;let V="";for(;;){const P=L(D,R).g;D=T(D,P.j(R));let B=((D.g.length>0?D.g[0]:D.h)>>>0).toString(A);if(D=P,_(D))return B+V;for(;B.length<6;)B="0"+B;V=B+V}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=T(this,A),w(A)?-1:_(A)?0:1};function E(A){const R=A.g.length,D=[];for(let V=0;V<R;V++)D[V]=~A.g[V];return new o(D,~A.h).add(m)}t.abs=function(){return w(this)?E(this):this},t.add=function(A){const R=Math.max(this.g.length,A.g.length),D=[];let V=0;for(let P=0;P<=R;P++){let B=V+(this.i(P)&65535)+(A.i(P)&65535),O=(B>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);V=O>>>16,B&=65535,O&=65535,D[P]=O<<16|B}return new o(D,D[D.length-1]&-2147483648?-1:0)};function T(A,R){return A.add(E(R))}t.j=function(A){if(_(this)||_(A))return g;if(w(this))return w(A)?E(this).j(E(A)):E(E(this).j(A));if(w(A))return E(this.j(E(A)));if(this.l(b)<0&&A.l(b)<0)return d(this.m()*A.m());const R=this.g.length+A.g.length,D=[];for(var V=0;V<2*R;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(let P=0;P<A.g.length;P++){const B=this.i(V)>>>16,O=this.i(V)&65535,W=A.i(P)>>>16,X=A.i(P)&65535;D[2*V+2*P]+=O*X,C(D,2*V+2*P),D[2*V+2*P+1]+=B*X,C(D,2*V+2*P+1),D[2*V+2*P+1]+=O*W,C(D,2*V+2*P+1),D[2*V+2*P+2]+=B*W,C(D,2*V+2*P+2)}for(A=0;A<R;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=R;A<2*R;A++)D[A]=0;return new o(D,0)};function C(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function N(A,R){this.g=A,this.h=R}function L(A,R){if(_(R))throw Error("division by zero");if(_(A))return new N(g,g);if(w(A))return R=L(E(A),R),new N(E(R.g),E(R.h));if(w(R))return R=L(A,E(R)),new N(E(R.g),R.h);if(A.g.length>30){if(w(A)||w(R))throw Error("slowDivide_ only works with positive integers.");for(var D=m,V=R;V.l(A)<=0;)D=j(D),V=j(V);var P=M(D,1),B=M(V,1);for(V=M(V,2),D=M(D,2);!_(V);){var O=B.add(V);O.l(A)<=0&&(P=P.add(D),B=O),V=M(V,1),D=M(D,1)}return R=T(A,P.j(R)),new N(P,R)}for(P=g;A.l(R)>=0;){for(D=Math.max(1,Math.floor(A.m()/R.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),B=d(D),O=B.j(R);w(O)||O.l(A)>0;)D-=V,B=d(D),O=B.j(R);_(B)&&(B=m),P=P.add(B),A=T(A,O)}return new N(P,A)}t.B=function(A){return L(this,A).h},t.and=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)&A.i(V);return new o(D,this.h&A.h)},t.or=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)|A.i(V);return new o(D,this.h|A.h)},t.xor=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let V=0;V<R;V++)D[V]=this.i(V)^A.i(V);return new o(D,this.h^A.h)};function j(A){const R=A.g.length+1,D=[];for(let V=0;V<R;V++)D[V]=A.i(V)<<1|A.i(V-1)>>>31;return new o(D,A.h)}function M(A,R){const D=R>>5;R%=32;const V=A.g.length-D,P=[];for(let B=0;B<V;B++)P[B]=R>0?A.i(B+D)>>>R|A.i(B+D+1)<<32-R:A.i(B+D);return new o(P,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,aN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ko=o}).apply(typeof w2<"u"?w2:typeof self<"u"?self:typeof window<"u"?window:{});var gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var sN,uf,oN,Hg,ux,lN,cN,uN;(function(){var t,e=Object.defineProperty;function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof gg=="object"&&gg];for(var k=0;k<y.length;++k){var z=y[k];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=n(this);function i(y,k){if(k)e:{var z=r;y=y.split(".");for(var $=0;$<y.length-1;$++){var le=y[$];if(!(le in z))break e;z=z[le]}y=y[y.length-1],$=z[y],k=k($),k!=$&&k!=null&&e(z,y,{configurable:!0,writable:!0,value:k})}}i("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(y){return y||function(k){var z=[],$;for($ in k)Object.prototype.hasOwnProperty.call(k,$)&&z.push([$,k[$]]);return z}});var a=a||{},o=this||self;function c(y){var k=typeof y;return k=="object"&&y!=null||k=="function"}function u(y,k,z){return y.call.apply(y.bind,arguments)}function d(y,k,z){return d=u,d.apply(null,arguments)}function h(y,k){var z=Array.prototype.slice.call(arguments,1);return function(){var $=z.slice();return $.push.apply($,arguments),y.apply(this,$)}}function g(y,k){function z(){}z.prototype=k.prototype,y.Z=k.prototype,y.prototype=new z,y.prototype.constructor=y,y.Ob=function($,le,he){for(var Re=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)Re[ot-2]=arguments[ot];return k.prototype[le].apply($,Re)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function b(y){const k=y.length;if(k>0){const z=Array(k);for(let $=0;$<k;$++)z[$]=y[$];return z}return[]}function _(y,k){for(let $=1;$<arguments.length;$++){const le=arguments[$];var z=typeof le;if(z=z!="object"?z:le?Array.isArray(le)?"array":z:"null",z=="array"||z=="object"&&typeof le.length=="number"){z=y.length||0;const he=le.length||0;y.length=z+he;for(let Re=0;Re<he;Re++)y[z+Re]=le[Re]}else y.push(le)}}class w{constructor(k,z){this.i=k,this.j=z,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function E(y){o.setTimeout(()=>{throw y},0)}function T(){var y=A;let k=null;return y.g&&(k=y.g,y.g=y.g.next,y.g||(y.h=null),k.next=null),k}class C{constructor(){this.h=this.g=null}add(k,z){const $=N.get();$.set(k,z),this.h?this.h.next=$:this.g=$,this.h=$}}var N=new w(()=>new L,y=>y.reset());class L{constructor(){this.next=this.g=this.h=null}set(k,z){this.h=k,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let j,M=!1,A=new C,R=()=>{const y=Promise.resolve(void 0);j=()=>{y.then(D)}};function D(){for(var y;y=T();){try{y.h.call(y.g)}catch(z){E(z)}var k=N;k.j(y),k.h<100&&(k.h++,y.next=k.g,k.g=y)}M=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(y,k){this.type=y,this.g=this.target=k,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,k=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const z=()=>{};o.addEventListener("test",z,k),o.removeEventListener("test",z,k)}catch{}return y})();function O(y){return/^[\s\xa0]*$/.test(y)}function W(y,k){P.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,k)}g(W,P),W.prototype.init=function(y,k){const z=this.type=y.type,$=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=k,k=y.relatedTarget,k||(z=="mouseover"?k=y.fromElement:z=="mouseout"&&(k=y.toElement)),this.relatedTarget=k,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),H=0;function K(y,k,z,$,le){this.listener=y,this.proxy=null,this.src=k,this.type=z,this.capture=!!$,this.ha=le,this.key=++H,this.da=this.fa=!1}function ee(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function ie(y,k,z){for(const $ in y)k.call(z,y[$],$,y)}function q(y,k){for(const z in y)k.call(void 0,y[z],z,y)}function F(y){const k={};for(const z in y)k[z]=y[z];return k}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(y,k){let z,$;for(let le=1;le<arguments.length;le++){$=arguments[le];for(z in $)y[z]=$[z];for(let he=0;he<Y.length;he++)z=Y[he],Object.prototype.hasOwnProperty.call($,z)&&(y[z]=$[z])}}function Z(y){this.src=y,this.g={},this.h=0}Z.prototype.add=function(y,k,z,$,le){const he=y.toString();y=this.g[he],y||(y=this.g[he]=[],this.h++);const Re=ce(y,k,$,le);return Re>-1?(k=y[Re],z||(k.fa=!1)):(k=new K(k,this.src,he,!!$,le),k.fa=z,y.push(k)),k};function oe(y,k){const z=k.type;if(z in y.g){var $=y.g[z],le=Array.prototype.indexOf.call($,k,void 0),he;(he=le>=0)&&Array.prototype.splice.call($,le,1),he&&(ee(k),y.g[z].length==0&&(delete y.g[z],y.h--))}}function ce(y,k,z,$){for(let le=0;le<y.length;++le){const he=y[le];if(!he.da&&he.listener==k&&he.capture==!!z&&he.ha==$)return le}return-1}var me="closure_lm_"+(Math.random()*1e6|0),ge={};function Te(y,k,z,$,le){if(Array.isArray(k)){for(let he=0;he<k.length;he++)Te(y,k[he],z,$,le);return null}return z=ze(z),y&&y[X]?y.J(k,z,c($)?!!$.capture:!1,le):Ne(y,k,z,!1,$,le)}function Ne(y,k,z,$,le,he){if(!k)throw Error("Invalid event type");const Re=c(le)?!!le.capture:!!le;let ot=Ve(y);if(ot||(y[me]=ot=new Z(y)),z=ot.add(k,z,$,Re,he),z.proxy)return z;if($=ae(),z.proxy=$,$.src=y,$.listener=z,y.addEventListener)B||(le=Re),le===void 0&&(le=!1),y.addEventListener(k.toString(),$,le);else if(y.attachEvent)y.attachEvent(Me(k.toString()),$);else if(y.addListener&&y.removeListener)y.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return z}function ae(){function y(z){return k.call(y.src,y.listener,z)}const k=Be;return y}function Ae(y,k,z,$,le){if(Array.isArray(k))for(var he=0;he<k.length;he++)Ae(y,k[he],z,$,le);else $=c($)?!!$.capture:!!$,z=ze(z),y&&y[X]?(y=y.i,he=String(k).toString(),he in y.g&&(k=y.g[he],z=ce(k,z,$,le),z>-1&&(ee(k[z]),Array.prototype.splice.call(k,z,1),k.length==0&&(delete y.g[he],y.h--)))):y&&(y=Ve(y))&&(k=y.g[k.toString()],y=-1,k&&(y=ce(k,z,$,le)),(z=y>-1?k[y]:null)&&De(z))}function De(y){if(typeof y!="number"&&y&&!y.da){var k=y.src;if(k&&k[X])oe(k.i,y);else{var z=y.type,$=y.proxy;k.removeEventListener?k.removeEventListener(z,$,y.capture):k.detachEvent?k.detachEvent(Me(z),$):k.addListener&&k.removeListener&&k.removeListener($),(z=Ve(k))?(oe(z,y),z.h==0&&(z.src=null,k[me]=null)):ee(y)}}}function Me(y){return y in ge?ge[y]:ge[y]="on"+y}function Be(y,k){if(y.da)y=!0;else{k=new W(k,this);const z=y.listener,$=y.ha||y.src;y.fa&&De(y),y=z.call($,k)}return y}function Ve(y){return y=y[me],y instanceof Z?y:null}var Se="__closure_events_fn_"+(Math.random()*1e9>>>0);function ze(y){return typeof y=="function"?y:(y[Se]||(y[Se]=function(k){return y.handleEvent(k)}),y[Se])}function Ie(){V.call(this),this.i=new Z(this),this.M=this,this.G=null}g(Ie,V),Ie.prototype[X]=!0,Ie.prototype.removeEventListener=function(y,k,z,$){Ae(this,y,k,z,$)};function Le(y,k){var z,$=y.G;if($)for(z=[];$;$=$.G)z.push($);if(y=y.M,$=k.type||k,typeof k=="string")k=new P(k,y);else if(k instanceof P)k.target=k.target||y;else{var le=k;k=new P($,y),ne(k,le)}le=!0;let he,Re;if(z)for(Re=z.length-1;Re>=0;Re--)he=k.g=z[Re],le=st(he,$,!0,k)&&le;if(he=k.g=y,le=st(he,$,!0,k)&&le,le=st(he,$,!1,k)&&le,z)for(Re=0;Re<z.length;Re++)he=k.g=z[Re],le=st(he,$,!1,k)&&le}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var y=this.i;for(const k in y.g){const z=y.g[k];for(let $=0;$<z.length;$++)ee(z[$]);delete y.g[k],y.h--}}this.G=null},Ie.prototype.J=function(y,k,z,$){return this.i.add(String(y),k,!1,z,$)},Ie.prototype.K=function(y,k,z,$){return this.i.add(String(y),k,!0,z,$)};function st(y,k,z,$){if(k=y.i.g[String(k)],!k)return!0;k=k.concat();let le=!0;for(let he=0;he<k.length;++he){const Re=k[he];if(Re&&!Re.da&&Re.capture==z){const ot=Re.listener,gn=Re.ha||Re.src;Re.fa&&oe(y.i,Re),le=ot.call(gn,$)!==!1&&le}}return le&&!$.defaultPrevented}function Tt(y,k){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=d(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:o.setTimeout(y,k||0)}function Ke(y){y.g=Tt(()=>{y.g=null,y.i&&(y.i=!1,Ke(y))},y.l);const k=y.h;y.h=null,y.m.apply(null,k)}class ut extends V{constructor(k,z){super(),this.m=k,this.l=z,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Ke(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kt(y){V.call(this),this.h=y,this.g={}}g(kt,V);var cn=[];function Vt(y){ie(y.g,function(k,z){this.g.hasOwnProperty(z)&&De(k)},y),y.g={}}kt.prototype.N=function(){kt.Z.N.call(this),Vt(this)},kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=o.JSON.stringify,Br=o.JSON.parse,ta=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function Fa(){}function Ds(){}var Ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){P.call(this,"d")}g(Sn,P);function ar(){P.call(this,"c")}g(ar,P);var tn={},sc=null;function Ns(){return sc=sc||new Ie}tn.Ia="serverreachability";function Is(y){P.call(this,tn.Ia,y)}g(Is,P);function ft(y){const k=Ns();Le(k,new Is(k))}tn.STAT_EVENT="statevent";function nn(y,k){P.call(this,tn.STAT_EVENT,y),this.stat=k}g(nn,P);function rn(y){const k=Ns();Le(k,new nn(k,y))}tn.Ja="timingevent";function Fr(y,k){P.call(this,tn.Ja,y),this.size=k}g(Fr,P);function ni(y,k){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},k)}function pr(){this.g=!0}pr.prototype.ua=function(){this.g=!1};function X0(y,k,z,$,le,he){y.info(function(){if(y.g)if(he){var Re="",ot=he.split("&");for(let Dt=0;Dt<ot.length;Dt++){var gn=ot[Dt].split("=");if(gn.length>1){const Qt=gn[0];gn=gn[1];const si=Qt.split("_");Re=si.length>=2&&si[1]=="type"?Re+(Qt+"="+gn+"&"):Re+(Qt+"=redacted&")}}}else Re=null;else Re=he;return"XMLHTTP REQ ("+$+") [attempt "+le+"]: "+k+`
`+z+`
`+Re})}function Gh(y,k,z,$,le,he,Re){y.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+le+"]: "+k+`
`+z+`
`+he+" "+Re})}function na(y,k,z,$){y.info(function(){return"XMLHTTP TEXT ("+k+"): "+W0(y,z)+($?" "+$:"")})}function Zo(y,k){y.info(function(){return"TIMEOUT: "+k})}pr.prototype.info=function(){};function W0(y,k){if(!y.g)return k;if(!k)return null;try{const he=JSON.parse(k);if(he){for(y=0;y<he.length;y++)if(Array.isArray(he[y])){var z=he[y];if(!(z.length<2)){var $=z[1];if(Array.isArray($)&&!($.length<1)){var le=$[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Re=1;Re<$.length;Re++)$[Re]=""}}}}return wn(he)}catch{return k}}var Jo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rd;function el(){}g(el,Fa),el.prototype.g=function(){return new XMLHttpRequest},rd=new el;function Ga(y){return encodeURIComponent(String(y))}function $h(y){var k=1;y=y.split(":");const z=[];for(;k>0&&y.length;)z.push(y.shift()),k--;return y.length&&z.push(y.join(":")),z}function Ci(y,k,z,$){this.j=y,this.i=k,this.l=z,this.S=$||1,this.V=new kt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ri}function Ri(){this.i=null,this.g="",this.h=!1}var En={},$n={};function ra(y,k,z){y.M=1,y.A=tl(An(k)),y.u=z,y.R=!0,oc(y,null)}function oc(y,k){y.F=Date.now(),ia(y),y.B=An(y.A);var z=y.B,$=y.S;Array.isArray($)||($=[String($)]),dc(z.i,"t",$),y.C=0,z=y.j.L,y.h=new Ri,y.g=ap(y.j,z?k:null,!y.u),y.P>0&&(y.O=new ut(d(y.Y,y,y.g),y.P)),k=y.V,z=y.g,$=y.ba;var le="readystatechange";Array.isArray(le)||(le&&(cn[0]=le.toString()),le=cn);for(let he=0;he<le.length;he++){const Re=Te(z,le[he],$||k.handleEvent,!1,k.h||k);if(!Re)break;k.g[Re.key]=Re}k=y.J?F(y.J):{},y.u?(y.v||(y.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,k)):(y.v="GET",y.g.ea(y.B,y.v,null,k)),ft(),X0(y.i,y.v,y.B,y.l,y.S,y.u)}Ci.prototype.ba=function(y){y=y.target;const k=this.O;k&&Ni(y)==3?k.j():this.Y(y)},Ci.prototype.Y=function(y){try{if(y==this.g)e:{const ot=Ni(this.g),gn=this.g.ya(),Dt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||Xn(this.g)))){this.K||ot!=4||gn==7||(gn==8||Dt<=0?ft(3):ft(2)),aa(this);var k=this.g.ca();this.X=k;var z=K0(this);if(this.o=k==200,Gh(this.i,this.v,this.B,this.l,this.S,ot,k),this.o){if(this.U&&!this.L){t:{if(this.g){var $,le=this.g;if(($=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O($)){var he=$;break t}}he=null}if(y=he)na(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,sa(this,y);else{this.o=!1,this.m=3,rn(12),Gr(this),ri(this);break e}}if(this.R){y=!0;let Qt;for(;!this.K&&this.C<z.length;)if(Qt=qh(this,z),Qt==$n){ot==4&&(this.m=4,rn(14),y=!1),na(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==En){this.m=4,rn(15),na(this.i,this.l,z,"[Invalid Chunk]"),y=!1;break}else na(this.i,this.l,Qt,null),sa(this,Qt);if(Hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||z.length!=0||this.h.h||(this.m=1,rn(16),y=!1),this.o=this.o&&y,!y)na(this.i,this.l,z,"[Invalid Chunked Response]"),Gr(this),ri(this);else if(z.length>0&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.aa&&!Re.P&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),yd(Re),Re.P=!0,rn(11))}}else na(this.i,this.l,z,null),sa(this,z);ot==4&&Gr(this),this.o&&!this.K&&(ot==4?tp(this.j,this):(this.o=!1,ia(this)))}else Ha(this.g),k==400&&z.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Gr(this),ri(this)}}}catch{}finally{}};function K0(y){if(!Hh(y))return y.g.la();const k=Xn(y.g);if(k==="")return"";let z="";const $=k.length,le=Ni(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return Gr(y),ri(y),"";y.h.i=new o.TextDecoder}for(let he=0;he<$;he++)y.h.h=!0,z+=y.h.i.decode(k[he],{stream:!(le&&he==$-1)});return k.length=0,y.h.g+=z,y.C=0,y.h.g}function Hh(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function qh(y,k){var z=y.C,$=k.indexOf(`
`,z);return $==-1?$n:(z=Number(k.substring(z,$)),isNaN(z)?En:($+=1,$+z>k.length?$n:(k=k.slice($,$+z),y.C=$+z,k)))}Ci.prototype.cancel=function(){this.K=!0,Gr(this)};function ia(y){y.T=Date.now()+y.H,lc(y,y.H)}function lc(y,k){if(y.D!=null)throw Error("WatchDog timer not null");y.D=ni(d(y.aa,y),k)}function aa(y){y.D&&(o.clearTimeout(y.D),y.D=null)}Ci.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Zo(this.i,this.B),this.M!=2&&(ft(),rn(17)),Gr(this),this.m=2,ri(this)):lc(this,this.T-y)};function ri(y){y.j.I==0||y.K||tp(y.j,y)}function Gr(y){aa(y);var k=y.O;k&&typeof k.dispose=="function"&&k.dispose(),y.O=null,Vt(y.V),y.g&&(k=y.g,y.g=null,k.abort(),k.dispose())}function sa(y,k){try{var z=y.j;if(z.I!=0&&(z.g==y||la(z.h,y))){if(!y.L&&la(z.h,y)&&z.I==3){try{var $=z.Ba.g.parse(k)}catch{$=null}if(Array.isArray($)&&$.length==3){var le=$;if(le[0]==0){e:if(!z.v){if(z.g)if(z.g.F+3e3<y.F)mc(z),Bs(z);else break e;ll(z),rn(18)}}else z.xa=le[1],0<z.xa-z.K&&le[2]<37500&&z.F&&z.A==0&&!z.C&&(z.C=ni(d(z.Va,z),6e3));oa(z.h)<=1&&z.ta&&(z.ta=void 0)}else pa(z,11)}else if((y.L||z.g==y)&&mc(z),!O(k))for(le=z.Ba.g.parse(k),k=0;k<le.length;k++){let Dt=le[k];const Qt=Dt[0];if(!(Qt<=z.K))if(z.K=Qt,Dt=Dt[1],z.I==2)if(Dt[0]=="c"){z.M=Dt[1],z.ba=Dt[2];const si=Dt[3];si!=null&&(z.ka=si,z.j.info("VER="+z.ka));const ga=Dt[4];ga!=null&&(z.za=ga,z.j.info("SVER="+z.za));const Ii=Dt[5];Ii!=null&&typeof Ii=="number"&&Ii>0&&($=1.5*Ii,z.O=$,z.j.info("backChannelRequestTimeoutMs_="+$)),$=z;const Mi=y.g;if(Mi){const cl=Mi.g?Mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var he=$.h;he.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(sd(he,he.h),he.h=null))}if($.G){const vc=Mi.g?Mi.g.getResponseHeader("X-HTTP-Session-Id"):null;vc&&($.wa=vc,Mt($.J,$.G,vc))}}z.I=3,z.l&&z.l.ra(),z.aa&&(z.T=Date.now()-y.F,z.j.info("Handshake RTT: "+z.T+"ms")),$=z;var Re=y;if($.na=ip($,$.L?$.ba:null,$.W),Re.L){od($.h,Re);var ot=Re,gn=$.O;gn&&(ot.H=gn),ot.D&&(aa(ot),ia(ot)),$.g=Re}else Jh($);z.i.length>0&&ha(z)}else Dt[0]!="stop"&&Dt[0]!="close"||pa(z,7);else z.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?pa(z,7):md(z):Dt[0]!="noop"&&z.l&&z.l.qa(Dt),z.A=0)}}ft(4)}catch{}}var Tn=class{constructor(y,k){this.g=y,this.map=k}};function id(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ad(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function oa(y){return y.h?1:y.g?y.g.size:0}function la(y,k){return y.h?y.h==k:y.g?y.g.has(k):!1}function sd(y,k){y.g?y.g.add(k):y.h=k}function od(y,k){y.h&&y.h==k?y.h=null:y.g&&y.g.has(k)&&y.g.delete(k)}id.prototype.cancel=function(){if(this.i=ld(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function ld(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let k=y.i;for(const z of y.g.values())k=k.concat(z.G);return k}return b(y.i)}var Yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cc(y,k){if(y){y=y.split("&");for(let z=0;z<y.length;z++){const $=y[z].indexOf("=");let le,he=null;$>=0?(le=y[z].substring(0,$),he=y[z].substring($+1)):le=y[z],k(le,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function $r(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;y instanceof $r?(this.l=y.l,Hn(this,y.j),this.o=y.o,this.g=y.g,Ms(this,y.u),this.h=y.h,cd(this,Qh(y.i)),this.m=y.m):y&&(k=String(y).match(Yh))?(this.l=!1,Hn(this,k[1]||"",!0),this.o=ca(k[2]||""),this.g=ca(k[3]||"",!0),Ms(this,k[4]),this.h=ca(k[5]||"",!0),cd(this,k[6]||"",!0),this.m=ca(k[7]||"")):(this.l=!1,this.i=new Ps(null,this.l))}$r.prototype.toString=function(){const y=[];var k=this.j;k&&y.push(nl(k,uc,!0),":");var z=this.g;return(z||k=="file")&&(y.push("//"),(k=this.o)&&y.push(nl(k,uc,!0),"@"),y.push(Ga(z).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.u,z!=null&&y.push(":",String(z))),(z=this.h)&&(this.g&&z.charAt(0)!="/"&&y.push("/"),y.push(nl(z,z.charAt(0)=="/"?ud:Xh,!0))),(z=this.i.toString())&&y.push("?",z),(z=this.m)&&y.push("#",nl(z,Wh)),y.join("")},$r.prototype.resolve=function(y){const k=An(this);let z=!!y.j;z?Hn(k,y.j):z=!!y.o,z?k.o=y.o:z=!!y.g,z?k.g=y.g:z=y.u!=null;var $=y.h;if(z)Ms(k,y.u);else if(z=!!y.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var le=k.h.lastIndexOf("/");le!=-1&&($=k.h.slice(0,le+1)+$)}if(le=$,le==".."||le==".")$="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){$=le.lastIndexOf("/",0)==0,le=le.split("/");const he=[];for(let Re=0;Re<le.length;){const ot=le[Re++];ot=="."?$&&Re==le.length&&he.push(""):ot==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),$&&Re==le.length&&he.push("")):(he.push(ot),$=!0)}$=he.join("/")}else $=le}return z?k.h=$:z=y.i.toString()!=="",z?cd(k,Qh(y.i)):z=!!y.m,z&&(k.m=y.m),k};function An(y){return new $r(y)}function Hn(y,k,z){y.j=z?ca(k,!0):k,y.j&&(y.j=y.j.replace(/:$/,""))}function Ms(y,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);y.u=k}else y.u=null}function cd(y,k,z){k instanceof Ps?(y.i=k,fc(y.i,y.l)):(z||(k=nl(k,Os)),y.i=new Ps(k,y.l))}function Mt(y,k,z){y.i.set(k,z)}function tl(y){return Mt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function ca(y,k){return y?k?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function nl(y,k,z){return typeof y=="string"?(y=encodeURI(y).replace(k,Tr),z&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Tr(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var uc=/[#\/\?@]/g,Xh=/[#\?:]/g,ud=/[#\?]/g,Os=/[#\?@]/g,Wh=/#/g;function Ps(y,k){this.h=this.g=null,this.i=y||null,this.j=!!k}function Ar(y){y.g||(y.g=new Map,y.h=0,y.i&&cc(y.i,function(k,z){y.add(decodeURIComponent(k.replace(/\+/g," ")),z)}))}t=Ps.prototype,t.add=function(y,k){Ar(this),this.i=null,y=js(this,y);let z=this.g.get(y);return z||this.g.set(y,z=[]),z.push(k),this.h+=1,this};function Kh(y,k){Ar(y),k=js(y,k),y.g.has(k)&&(y.i=null,y.h-=y.g.get(k).length,y.g.delete(k))}function dd(y,k){return Ar(y),k=js(y,k),y.g.has(k)}t.forEach=function(y,k){Ar(this),this.g.forEach(function(z,$){z.forEach(function(le){y.call(k,le,$,this)},this)},this)};function fd(y,k){Ar(y);let z=[];if(typeof k=="string")dd(y,k)&&(z=z.concat(y.g.get(js(y,k))));else for(y=Array.from(y.g.values()),k=0;k<y.length;k++)z=z.concat(y[k]);return z}t.set=function(y,k){return Ar(this),this.i=null,y=js(this,y),dd(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[k]),this.h+=1,this},t.get=function(y,k){return y?(y=fd(this,y),y.length>0?String(y[0]):k):k};function dc(y,k,z){Kh(y,k),z.length>0&&(y.i=null,y.g.set(js(y,k),b(z)),y.h+=z.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],k=Array.from(this.g.keys());for(let $=0;$<k.length;$++){var z=k[$];const le=Ga(z);z=fd(this,z);for(let he=0;he<z.length;he++){let Re=le;z[he]!==""&&(Re+="="+Ga(z[he])),y.push(Re)}}return this.i=y.join("&")};function Qh(y){const k=new Ps;return k.i=y.i,y.g&&(k.g=new Map(y.g),k.h=y.h),k}function js(y,k){return k=String(k),y.j&&(k=k.toLowerCase()),k}function fc(y,k){k&&!y.j&&(Ar(y),y.i=null,y.g.forEach(function(z,$){const le=$.toLowerCase();$!=le&&(Kh(this,$),dc(this,le,z))},y)),y.j=k}function ki(y,k){const z=new pr;if(o.Image){const $=new Image;$.onload=h(ii,z,"TestLoadImage: loaded",!0,k,$),$.onerror=h(ii,z,"TestLoadImage: error",!1,k,$),$.onabort=h(ii,z,"TestLoadImage: abort",!1,k,$),$.ontimeout=h(ii,z,"TestLoadImage: timeout",!1,k,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=y}else k(!1)}function hd(y,k){const z=new pr,$=new AbortController,le=setTimeout(()=>{$.abort(),ii(z,"TestPingServer: timeout",!1,k)},1e4);fetch(y,{signal:$.signal}).then(he=>{clearTimeout(le),he.ok?ii(z,"TestPingServer: ok",!0,k):ii(z,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(le),ii(z,"TestPingServer: error",!1,k)})}function ii(y,k,z,$,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),$(z)}catch{}}function Vs(){this.g=new ta}function ua(y){this.i=y.Sb||null,this.h=y.ab||!1}g(ua,Fa),ua.prototype.g=function(){return new rl(this.i,this.h)};function rl(y,k){Ie.call(this),this.H=y,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(rl,Ie),t=rl.prototype,t.open=function(y,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=k,this.readyState=1,Di(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(k.body=y),(this.H||o).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zs(this)),this.readyState=0},t.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hc(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function hc(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}t.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var k=y.value?y.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!y.done}))&&(this.response=this.responseText+=k)}y.done?zs(this):Di(this),this.readyState==3&&hc(this)}},t.Oa=function(y){this.g&&(this.response=this.responseText=y,zs(this))},t.Na=function(y){this.g&&(this.response=y,zs(this))},t.ga=function(){this.g&&zs(this)};function zs(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Di(y)}t.setRequestHeader=function(y,k){this.A.append(y,k)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],k=this.h.entries();for(var z=k.next();!z.done;)z=z.value,y.push(z[0]+": "+z[1]),z=k.next();return y.join(`\r
`)};function Di(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function ai(y){let k="";return ie(y,function(z,$){k+=$,k+=":",k+=z,k+=`\r
`}),k}function il(y,k,z){e:{for($ in z){var $=!1;break e}$=!0}$||(z=ai(z),typeof y=="string"?z!=null&&Ga(z):Mt(y,k,z))}function zt(y){Ie.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(zt,Ie);var da=/^https?$/i,pd=["POST","PUT"];t=zt.prototype,t.Fa=function(y){this.H=y},t.ea=function(y,k,z,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);k=k?k.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rd.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(k,String(y),!0),this.B=!1}catch(he){al(this,he);return}if(y=z||"",z=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var le in $)z.set(le,$[le]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const he of $.keys())z.set(he,$.get(he));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(z.keys()).find(he=>he.toLowerCase()=="content-type"),le=o.FormData&&y instanceof o.FormData,!(Array.prototype.indexOf.call(pd,k,void 0)>=0)||$||le||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Re]of z)this.g.setRequestHeader(he,Re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(he){al(this,he)}};function al(y,k){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=k,y.o=5,gd(y),$a(y)}function gd(y){y.A||(y.A=!0,Le(y,"complete"),Le(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Le(this,"complete"),Le(this,"abort"),$a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),zt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?sl(this):this.Xa())},t.Xa=function(){sl(this)};function sl(y){if(y.h&&typeof a<"u"){if(y.v&&Ni(y)==4)setTimeout(y.Ca.bind(y),0);else if(Le(y,"readystatechange"),Ni(y)==4){y.h=!1;try{const he=y.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var z;if(!(z=k)){var $;if($=he===0){let Re=String(y.D).match(Yh)[1]||null;!Re&&o.self&&o.self.location&&(Re=o.self.location.protocol.slice(0,-1)),$=!da.test(Re?Re.toLowerCase():"")}z=$}if(z)Le(y,"complete"),Le(y,"success");else{y.o=6;try{var le=Ni(y)>2?y.g.statusText:""}catch{le=""}y.l=le+" ["+y.ca()+"]",gd(y)}}finally{$a(y)}}}}function $a(y,k){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const z=y.g;y.g=null,k||Le(y,"ready");try{z.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ni(y){return y.g?y.g.readyState:0}t.ca=function(){try{return Ni(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(y){if(this.g){var k=this.g.responseText;return y&&k.indexOf(y)==0&&(k=k.substring(y.length)),Br(k)}};function Xn(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Ha(y){const k={};y=(y.g&&Ni(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<y.length;$++){if(O(y[$]))continue;var z=$h(y[$]);const le=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const he=k[le]||[];k[le]=he,he.push(z)}q(k,function($){return $.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(y,k,z){return z&&z.internalChannelParams&&z.internalChannelParams[y]||k}function Ls(y){this.za=0,this.i=[],this.j=new pr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fa("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fa("baseRetryDelayMs",5e3,y),this.Za=fa("retryDelaySeedMs",1e4,y),this.Ta=fa("forwardChannelMaxRetries",2,y),this.va=fa("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new id(y&&y.concurrentRequestLimit),this.Ba=new Vs,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ls.prototype,t.ka=8,t.I=1,t.connect=function(y,k,z,$){rn(0),this.W=y,this.H=k||{},z&&$!==void 0&&(this.H.OSID=z,this.H.OAID=$),this.F=this.X,this.J=ip(this,null,this.W),ha(this)};function md(y){if(pc(y),y.I==3){var k=y.V++,z=An(y.J);if(Mt(z,"SID",y.M),Mt(z,"RID",k),Mt(z,"TYPE","terminate"),ol(y,z),k=new Ci(y,y.j,k),k.M=2,k.A=tl(An(z)),z=!1,o.navigator&&o.navigator.sendBeacon)try{z=o.navigator.sendBeacon(k.A.toString(),"")}catch{}!z&&o.Image&&(new Image().src=k.A,z=!0),z||(k.g=ap(k.j,null),k.g.ea(k.A)),k.F=Date.now(),ia(k)}rp(y)}function Bs(y){y.g&&(yd(y),y.g.cancel(),y.g=null)}function pc(y){Bs(y),y.v&&(o.clearTimeout(y.v),y.v=null),mc(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&o.clearTimeout(y.m),y.m=null)}function ha(y){if(!ad(y.h)&&!y.m){y.m=!0;var k=y.Ea;j||R(),M||(j(),M=!0),A.add(k,y),y.D=0}}function gc(y,k){return oa(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=k.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=ni(d(y.Ea,y,k),np(y,y.D)),y.D++,!0)}t.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const le=new Ci(this,this.j,y);let he=this.o;if(this.U&&(he?(he=F(he),ne(he,this.U)):he=this.U),this.u!==null||this.R||(le.J=he,he=null),this.S)e:{for(var k=0,z=0;z<this.i.length;z++){t:{var $=this.i[z];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(k+=$,k>4096){k=z;break e}if(k===4096||z===this.i.length-1){k=z+1;break e}}k=1e3}else k=1e3;k=Zh(this,le,k),z=An(this.J),Mt(z,"RID",y),Mt(z,"CVER",22),this.G&&Mt(z,"X-HTTP-Session-Id",this.G),ol(this,z),he&&(this.R?k="headers="+Ga(ai(he))+"&"+k:this.u&&il(z,this.u,he)),sd(this.h,le),this.Ra&&Mt(z,"TYPE","init"),this.S?(Mt(z,"$req",k),Mt(z,"SID","null"),le.U=!0,ra(le,z,null)):ra(le,z,k),this.I=2}}else this.I==3&&(y?vd(this,y):this.i.length==0||ad(this.h)||vd(this))};function vd(y,k){var z;k?z=k.l:z=y.V++;const $=An(y.J);Mt($,"SID",y.M),Mt($,"RID",z),Mt($,"AID",y.K),ol(y,$),y.u&&y.o&&il($,y.u,y.o),z=new Ci(y,y.j,z,y.D+1),y.u===null&&(z.J=y.o),k&&(y.i=k.G.concat(y.i)),k=Zh(y,z,1e3),z.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),sd(y.h,z),ra(z,$,k)}function ol(y,k){y.H&&ie(y.H,function(z,$){Mt(k,$,z)}),y.l&&ie({},function(z,$){Mt(k,$,z)})}function Zh(y,k,z){z=Math.min(y.i.length,z);const $=y.l?d(y.l.Ka,y.l,y):null;e:{var le=y.i;let ot=-1;for(;;){const gn=["count="+z];ot==-1?z>0?(ot=le[0].g,gn.push("ofs="+ot)):ot=0:gn.push("ofs="+ot);let Dt=!0;for(let Qt=0;Qt<z;Qt++){var he=le[Qt].g;const si=le[Qt].map;if(he-=ot,he<0)ot=Math.max(0,le[Qt].g-100),Dt=!1;else try{he="req"+he+"_"||"";try{var Re=si instanceof Map?si:Object.entries(si);for(const[ga,Ii]of Re){let Mi=Ii;c(Ii)&&(Mi=wn(Ii)),gn.push(he+ga+"="+encodeURIComponent(Mi))}}catch(ga){throw gn.push(he+"type="+encodeURIComponent("_badmap")),ga}}catch{$&&$(si)}}if(Dt){Re=gn.join("&");break e}}Re=void 0}return y=y.i.splice(0,z),k.G=y,Re}function Jh(y){if(!y.g&&!y.v){y.Y=1;var k=y.Da;j||R(),M||(j(),M=!0),A.add(k,y),y.A=0}}function ll(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=ni(d(y.Da,y),np(y,y.A)),y.A++,!0)}t.Da=function(){if(this.v=null,ep(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=ni(d(this.Wa,this),y)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Bs(this),ep(this))};function yd(y){y.B!=null&&(o.clearTimeout(y.B),y.B=null)}function ep(y){y.g=new Ci(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var k=An(y.na);Mt(k,"RID","rpc"),Mt(k,"SID",y.M),Mt(k,"AID",y.K),Mt(k,"CI",y.F?"0":"1"),!y.F&&y.ia&&Mt(k,"TO",y.ia),Mt(k,"TYPE","xmlhttp"),ol(y,k),y.u&&y.o&&il(k,y.u,y.o),y.O&&(y.g.H=y.O);var z=y.g;y=y.ba,z.M=1,z.A=tl(An(k)),z.u=null,z.R=!0,oc(z,y)}t.Va=function(){this.C!=null&&(this.C=null,Bs(this),ll(this),rn(19))};function mc(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function tp(y,k){var z=null;if(y.g==k){mc(y),yd(y),y.g=null;var $=2}else if(la(y.h,k))z=k.G,od(y.h,k),$=1;else return;if(y.I!=0){if(k.o)if($==1){z=k.u?k.u.length:0,k=Date.now()-k.F;var le=y.D;$=Ns(),Le($,new Fr($,z)),ha(y)}else Jh(y);else if(le=k.m,le==3||le==0&&k.X>0||!($==1&&gc(y,k)||$==2&&ll(y)))switch(z&&z.length>0&&(k=y.h,k.i=k.i.concat(z)),le){case 1:pa(y,5);break;case 4:pa(y,10);break;case 3:pa(y,6);break;default:pa(y,2)}}}function np(y,k){let z=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(z*=2),z*k}function pa(y,k){if(y.j.info("Error code "+k),k==2){var z=d(y.bb,y),$=y.Ua;const le=!$;$=new $r($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Hn($,"https"),tl($),le?ki($.toString(),z):hd($.toString(),z)}else rn(2);y.I=0,y.l&&y.l.pa(k),rp(y),pc(y)}t.bb=function(y){y?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function rp(y){if(y.I=0,y.ja=[],y.l){const k=ld(y.h);(k.length!=0||y.i.length!=0)&&(_(y.ja,k),_(y.ja,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.oa()}}function ip(y,k,z){var $=z instanceof $r?An(z):new $r(z);if($.g!="")k&&($.g=k+"."+$.g),Ms($,$.u);else{var le=o.location;$=le.protocol,k=k?k+"."+le.hostname:le.hostname,le=+le.port;const he=new $r(null);$&&Hn(he,$),k&&(he.g=k),le&&Ms(he,le),z&&(he.h=z),$=he}return z=y.G,k=y.wa,z&&k&&Mt($,z,k),Mt($,"VER",y.ka),ol(y,$),$}function ap(y,k,z){if(k&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=y.Aa&&!y.ma?new zt(new ua({ab:z})):new zt(y.ma),k.Fa(y.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sp(){}t=sp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Us(){}Us.prototype.g=function(y,k){return new gr(y,k)};function gr(y,k){Ie.call(this),this.g=new Ls(k),this.l=y,this.h=k&&k.messageUrlParams||null,y=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(y?y["X-WebChannel-Content-Type"]=k.messageContentType:y={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(y?y["X-WebChannel-Client-Profile"]=k.sa:y={"X-WebChannel-Client-Profile":k.sa}),this.g.U=y,(y=k&&k.Qb)&&!O(y)&&(this.g.u=y),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!O(k)&&(this.g.G=k,y=this.h,y!==null&&k in y&&(y=this.h,k in y&&delete y[k])),this.j=new qa(this)}g(gr,Ie),gr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gr.prototype.close=function(){md(this.g)},gr.prototype.o=function(y){var k=this.g;if(typeof y=="string"){var z={};z.__data__=y,y=z}else this.v&&(z={},z.__data__=wn(y),y=z);k.i.push(new Tn(k.Ya++,y)),k.I==3&&ha(k)},gr.prototype.N=function(){this.g.l=null,delete this.j,md(this.g),delete this.g,gr.Z.N.call(this)};function op(y){Sn.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var k=y.__sm__;if(k){e:{for(const z in k){y=z;break e}y=void 0}(this.i=y)&&(y=this.i,k=k!==null&&y in k?k[y]:void 0),this.data=k}else this.data=y}g(op,Sn);function lp(){ar.call(this),this.status=1}g(lp,ar);function qa(y){this.g=y}g(qa,sp),qa.prototype.ra=function(){Le(this.g,"a")},qa.prototype.qa=function(y){Le(this.g,new op(y))},qa.prototype.pa=function(y){Le(this.g,new lp)},qa.prototype.oa=function(){Le(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,gr.prototype.send=gr.prototype.o,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,uN=function(){return new Us},cN=function(){return Ns()},lN=tn,ux={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jo.NO_ERROR=0,Jo.TIMEOUT=8,Jo.HTTP_ERROR=6,Hg=Jo,nd.COMPLETE="complete",oN=nd,Ds.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,uf=Ds,zt.prototype.listenOnce=zt.prototype.K,zt.prototype.getLastError=zt.prototype.Ha,zt.prototype.getLastErrorCode=zt.prototype.ya,zt.prototype.getStatus=zt.prototype.ca,zt.prototype.getResponseJson=zt.prototype.La,zt.prototype.getResponseText=zt.prototype.la,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Fa,sN=zt}).apply(typeof gg<"u"?gg:typeof self<"u"?self:typeof window<"u"?window:{});const S2="@firebase/firestore",E2="4.9.2";class lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");let Uu="12.3.0";const Yl=new C1("@firebase/firestore");function Xc(){return Yl.logLevel}function Oe(t,...e){if(Yl.logLevel<=yt.DEBUG){const n=e.map($1);Yl.debug(`Firestore (${Uu}): ${t}`,...n)}}function ws(t,...e){if(Yl.logLevel<=yt.ERROR){const n=e.map($1);Yl.error(`Firestore (${Uu}): ${t}`,...n)}}function xu(t,...e){if(Yl.logLevel<=yt.WARN){const n=e.map($1);Yl.warn(`Firestore (${Uu}): ${t}`,...n)}}function $1(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Qe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dN(t,r,n)}function dN(t,e,n){let r=`FIRESTORE (${Uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ws(r),new Error(r)}function It(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||dN(e,i,r)}function at(t,e){return t}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Rs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class fN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(lr.UNAUTHENTICATED)))}shutdown(){}}class WB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class KB{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){It(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new gs,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new gs)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new fN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new lr(e)}}class QB{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZB{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new QB(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(lr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class T2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JB{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){It(this.o===void 0,3512);const r=a=>{a.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new T2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(It(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new T2(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function e8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class H1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=e8(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function bt(t,e){return t<e?-1:t>e?1:0}function dx(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return ob(i)===ob(a)?bt(i,a):ob(i)?1:-1}return bt(t.length,e.length)}const t8=55296,n8=57343;function ob(t){const e=t.charCodeAt(0);return e>=t8&&e<=n8}function _u(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}const A2="__name__";class _a{constructor(e,n,r){n===void 0?n=0:n>e.length&&Qe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Qe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _a.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _a?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=_a.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return bt(e.length,n.length)}static compareSegments(e,n){const r=_a.isNumericId(e),i=_a.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?_a.extractNumericId(e).compare(_a.extractNumericId(n)):dx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class qt extends _a{construct(e,n,r){return new qt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new qt(n)}static emptyPath(){return new qt([])}}const r8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends _a{construct(e,n,r){return new nr(e,n,r)}static isValidIdentifier(e){return r8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A2}static keyField(){return new nr([A2])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ke(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ke(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ke(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new ke(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(n)}static emptyPath(){return new nr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(qt.fromString(e))}static fromName(e){return new qe(qt.fromString(e).popFirst(5))}static empty(){return new qe(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new qt(e.slice()))}}function hN(t,e,n){if(!n)throw new ke(be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function i8(t,e,n,r){if(e===!0&&r===!0)throw new ke(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function C2(t){if(!qe.isDocumentKey(t))throw new ke(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function R2(t){if(qe.isDocumentKey(t))throw new ke(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function s0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Qe(12329,{type:typeof t})}function wr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ke(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=s0(t);throw new ke(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jn(t,e){const n={typeString:t};return e&&(n.value=e),n}function bh(t,e){if(!pN(t))throw new ke(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ke(be.INVALID_ARGUMENT,n);return!0}const k2=-62135596800,D2=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*D2);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<k2)throw new ke(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/D2}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bh(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:jn("string",gt._jsonSchemaVersion),seconds:jn("number"),nanoseconds:jn("number")};class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new gt(0,0))}static max(){return new nt(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Gf=-1;function a8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=nt.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Mo(i,qe.empty(),e)}function s8(t){return new Mo(t.readTime,t.key,Gf)}class Mo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mo(nt.min(),qe.empty(),Gf)}static max(){return new Mo(nt.max(),qe.empty(),Gf)}}function o8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=qe.comparator(t.documentKey,e.documentKey),n!==0?n:bt(t.largestBatchId,e.largestBatchId))}const l8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fu(t){if(t.code!==be.FAILED_PRECONDITION||t.message!==l8)throw t;Oe("LocalStore","Unexpectedly lost primary lease")}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.reject(n)}static resolve(e){return new _e(((n,r)=>{n(e)}))}static reject(e){return new _e(((n,r)=>{r(e)}))}static waitFor(e){return new _e(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next((i=>i?_e.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new _e(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next((h=>{o[d]=h,++c,c===a&&r(o)}),(h=>i(h)))}}))}static doWhile(e,n){return new _e(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function u8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gu(t){return t.name==="IndexedDbTransactionError"}class o0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}o0.ce=-1;const q1=-1;function l0(t){return t==null}function ym(t){return t===0&&1/t==-1/0}function d8(t){return typeof t=="number"&&Number.isInteger(t)&&!ym(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const gN="";function f8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=N2(e)),e=h8(t.get(n),e);return N2(e)}function h8(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case gN:n+="";break;default:n+=a}}return n}function N2(t){return t+gN+""}function I2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ln{constructor(e,n){this.comparator=e,this.root=n||tr.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mg(this.root,e,this.comparator,!1)}getReverseIterator(){return new mg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mg(this.root,e,this.comparator,!0)}}class mg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??tr.RED,this.left=i??tr.EMPTY,this.right=a??tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new tr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return tr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1;tr.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new tr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gn{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new M2(this.data.getIterator())}getIteratorFrom(e){return new M2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Gn(this.comparator);return n.data=e,n}}class M2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Jr{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new Jr([])}unionWith(e){let n=new Gn(nr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _u(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class vN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new vN("Invalid base64 string: "+a):a}})(e);return new ir(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new ir(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const p8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(t){if(It(!!t,39018),typeof t=="string"){let e=0;const n=p8.exec(t);if(It(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(t.seconds),nanos:xn(t.nanos)}}function xn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Po(t){return typeof t=="string"?ir.fromBase64String(t):ir.fromUint8Array(t)}const yN="server_timestamp",bN="__type__",xN="__previous_value__",_N="__local_write_time__";function Y1(t){return(t?.mapValue?.fields||{})[bN]?.stringValue===yN}function c0(t){const e=t.mapValue.fields[xN];return Y1(e)?c0(e):e}function $f(t){const e=Oo(t.mapValue.fields[_N].timestampValue);return new gt(e.seconds,e.nanos)}class g8{constructor(e,n,r,i,a,o,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const bm="(default)";class Hf{constructor(e,n){this.projectId=e,this.database=n||bm}static empty(){return new Hf("","")}get isDefaultDatabase(){return this.database===bm}isEqual(e){return e instanceof Hf&&e.projectId===this.projectId&&e.database===this.database}}const wN="__type__",m8="__max__",vg={mapValue:{}},SN="__vector__",xm="value";function jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Y1(t)?4:y8(t)?9007199254740991:v8(t)?10:11:Qe(28295,{value:t})}function Oa(t,e){if(t===e)return!0;const n=jo(t);if(n!==jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $f(t).isEqual($f(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Oo(i.timestampValue),c=Oo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Po(i.bytesValue).isEqual(Po(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return xn(i.geoPointValue.latitude)===xn(a.geoPointValue.latitude)&&xn(i.geoPointValue.longitude)===xn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return xn(i.integerValue)===xn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=xn(i.doubleValue),c=xn(a.doubleValue);return o===c?ym(o)===ym(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return _u(t.arrayValue.values||[],e.arrayValue.values||[],Oa);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(I2(o)!==I2(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Oa(o[u],c[u])))return!1;return!0})(t,e);default:return Qe(52216,{left:t})}}function qf(t,e){return(t.values||[]).find((n=>Oa(n,e)))!==void 0}function wu(t,e){if(t===e)return 0;const n=jo(t),r=jo(e);if(n!==r)return bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bt(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=xn(a.integerValue||a.doubleValue),u=xn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return O2(t.timestampValue,e.timestampValue);case 4:return O2($f(t),$f(e));case 5:return dx(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=Po(a),u=Po(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=bt(c[d],u[d]);if(h!==0)return h}return bt(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=bt(xn(a.latitude),xn(o.latitude));return c!==0?c:bt(xn(a.longitude),xn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return P2(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const c=a.fields||{},u=o.fields||{},d=c[xm]?.arrayValue,h=u[xm]?.arrayValue,g=bt(d?.values?.length||0,h?.values?.length||0);return g!==0?g:P2(d,h)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===vg.mapValue&&o===vg.mapValue)return 0;if(a===vg.mapValue)return 1;if(o===vg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let g=0;g<u.length&&g<h.length;++g){const m=dx(u[g],h[g]);if(m!==0)return m;const b=wu(c[u[g]],d[h[g]]);if(b!==0)return b}return bt(u.length,h.length)})(t.mapValue,e.mapValue);default:throw Qe(23264,{he:n})}}function O2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return bt(t,e);const n=Oo(t),r=Oo(e),i=bt(n.seconds,r.seconds);return i!==0?i:bt(n.nanos,r.nanos)}function P2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=wu(n[i],r[i]);if(a)return a}return bt(n.length,r.length)}function Su(t){return fx(t)}function fx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Oo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Po(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return qe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=fx(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${fx(n.fields[o])}`;return i+"}"})(t.mapValue):Qe(61005,{value:t})}function qg(t){switch(jo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=c0(t);return e?16+qg(e):16;case 5:return 2*t.stringValue.length;case 6:return Po(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+qg(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Yo(r.fields,((a,o)=>{i+=a.length+qg(o)})),i})(t.mapValue);default:throw Qe(13486,{value:t})}}function j2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hx(t){return!!t&&"integerValue"in t}function X1(t){return!!t&&"arrayValue"in t}function V2(t){return!!t&&"nullValue"in t}function z2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yg(t){return!!t&&"mapValue"in t}function v8(t){return(t?.mapValue?.fields||{})[wN]?.stringValue===SN}function _f(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=_f(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_f(t.arrayValue.values[n]);return e}return{...t}}function y8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===m8}class Or{constructor(e){this.value=e}static empty(){return new Or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_f(n)}setAll(e){let n=nr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=_f(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Yg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Oa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Yg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Yo(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Or(_f(this.value))}}function EN(t){const e=[];return Yo(t.fields,((n,r)=>{const i=new nr([n]);if(Yg(r)){const a=EN(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new Jr(e)}class cr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new cr(e,0,nt.min(),nt.min(),nt.min(),Or.empty(),0)}static newFoundDocument(e,n,r,i){return new cr(e,1,n,nt.min(),r,i,0)}static newNoDocument(e,n){return new cr(e,2,n,nt.min(),nt.min(),Or.empty(),0)}static newUnknownDocument(e,n){return new cr(e,3,n,nt.min(),nt.min(),Or.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _m{constructor(e,n){this.position=e,this.inclusive=n}}function L2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=qe.comparator(qe.fromName(o.referenceValue),n.key):r=wu(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function B2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Oa(t.position[n],e.position[n]))return!1;return!0}class Yf{constructor(e,n="asc"){this.field=e,this.dir=n}}function b8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class TN{}class On extends TN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _8(e,n,r):n==="array-contains"?new E8(e,r):n==="in"?new T8(e,r):n==="not-in"?new A8(e,r):n==="array-contains-any"?new C8(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new w8(e,r):new S8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wu(n,this.value)):n!==null&&jo(this.value)===jo(n)&&this.matchesComparison(wu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wi extends TN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Wi(e,n)}matches(e){return AN(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function AN(t){return t.op==="and"}function CN(t){return x8(t)&&AN(t)}function x8(t){for(const e of t.filters)if(e instanceof Wi)return!1;return!0}function px(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+Su(t.value);if(CN(t))return t.filters.map((e=>px(e))).join(",");{const e=t.filters.map((n=>px(n))).join(",");return`${t.op}(${e})`}}function RN(t,e){return t instanceof On?(function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&Oa(r.value,i.value)})(t,e):t instanceof Wi?(function(r,i){return i instanceof Wi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&RN(o,i.filters[c])),!0):!1})(t,e):void Qe(19439)}function kN(t){return t instanceof On?(function(n){return`${n.field.canonicalString()} ${n.op} ${Su(n.value)}`})(t):t instanceof Wi?(function(n){return n.op.toString()+" {"+n.getFilters().map(kN).join(" ,")+"}"})(t):"Filter"}class _8 extends On{constructor(e,n,r){super(e,n,r),this.key=qe.fromName(r.referenceValue)}matches(e){const n=qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class w8 extends On{constructor(e,n){super(e,"in",n),this.keys=DN("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class S8 extends On{constructor(e,n){super(e,"not-in",n),this.keys=DN("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function DN(t,e){return(e.arrayValue?.values||[]).map((n=>qe.fromName(n.referenceValue)))}class E8 extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return X1(n)&&qf(n.arrayValue,this.value)}}class T8 extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qf(this.value.arrayValue,n)}}class A8 extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(qf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qf(this.value.arrayValue,n)}}class C8 extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!X1(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>qf(this.value.arrayValue,r)))}}class R8{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function U2(t,e=null,n=[],r=[],i=null,a=null,o=null){return new R8(t,e,n,r,i,a,o)}function W1(t){const e=at(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>px(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),l0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Su(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Su(r))).join(",")),e.Te=n}return e.Te}function K1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!b8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B2(t.startAt,e.startAt)&&B2(t.endAt,e.endAt)}function gx(t){return qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class $u{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function k8(t,e,n,r,i,a,o,c){return new $u(t,e,n,r,i,a,o,c)}function u0(t){return new $u(t)}function F2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NN(t){return t.collectionGroup!==null}function wf(t){const e=at(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Gn(nr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Yf(a,r))})),n.has(nr.keyField().canonicalString())||e.Ie.push(new Yf(nr.keyField(),r))}return e.Ie}function Ca(t){const e=at(t);return e.Ee||(e.Ee=D8(e,wf(t))),e.Ee}function D8(t,e){if(t.limitType==="F")return U2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Yf(i.field,a)}));const n=t.endAt?new _m(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _m(t.startAt.position,t.startAt.inclusive):null;return U2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mx(t,e){const n=t.filters.concat([e]);return new $u(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wm(t,e,n){return new $u(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function d0(t,e){return K1(Ca(t),Ca(e))&&t.limitType===e.limitType}function IN(t){return`${W1(Ca(t))}|lt:${t.limitType}`}function Wc(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>kN(i))).join(", ")}]`),l0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Su(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Su(i))).join(",")),`Target(${r})`})(Ca(t))}; limitType=${t.limitType})`}function f0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):qe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of wf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=L2(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,wf(r),i)||r.endAt&&!(function(o,c,u){const d=L2(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,wf(r),i))})(t,e)}function N8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MN(t){return(e,n)=>{let r=!1;for(const i of wf(t)){const a=I8(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function I8(t,e,n){const r=t.field.isKeyField()?qe.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?wu(u,d):Qe(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Qe(19790,{direction:t.dir})}}class tc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return mN(this.inner)}size(){return this.innerSize}}const M8=new ln(qe.comparator);function Ss(){return M8}const ON=new ln(qe.comparator);function df(...t){let e=ON;for(const n of t)e=e.insert(n.key,n);return e}function PN(t){let e=ON;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Ol(){return Sf()}function jN(){return Sf()}function Sf(){return new tc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const O8=new ln(qe.comparator),P8=new Gn(qe.comparator);function xt(...t){let e=P8;for(const n of t)e=e.add(n);return e}const j8=new Gn(bt);function V8(){return j8}function Q1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ym(e)?"-0":e}}function VN(t){return{integerValue:""+t}}function z8(t,e){return d8(e)?VN(e):Q1(t,e)}class h0{constructor(){this._=void 0}}function L8(t,e,n){return t instanceof Sm?(function(i,a){const o={fields:{[bN]:{stringValue:yN},[_N]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Y1(a)&&(a=c0(a)),a&&(o.fields[xN]=a),{mapValue:o}})(n,e):t instanceof Eu?LN(t,e):t instanceof Xf?BN(t,e):(function(i,a){const o=zN(i,a),c=G2(o)+G2(i.Ae);return hx(o)&&hx(i.Ae)?VN(c):Q1(i.serializer,c)})(t,e)}function B8(t,e,n){return t instanceof Eu?LN(t,e):t instanceof Xf?BN(t,e):n}function zN(t,e){return t instanceof Em?(function(r){return hx(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Sm extends h0{}class Eu extends h0{constructor(e){super(),this.elements=e}}function LN(t,e){const n=UN(e);for(const r of t.elements)n.some((i=>Oa(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Xf extends h0{constructor(e){super(),this.elements=e}}function BN(t,e){let n=UN(e);for(const r of t.elements)n=n.filter((i=>!Oa(i,r)));return{arrayValue:{values:n}}}class Em extends h0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function G2(t){return xn(t.integerValue||t.doubleValue)}function UN(t){return X1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class U8{constructor(e,n){this.field=e,this.transform=n}}function F8(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Eu&&i instanceof Eu||r instanceof Xf&&i instanceof Xf?_u(r.elements,i.elements,Oa):r instanceof Em&&i instanceof Em?Oa(r.Ae,i.Ae):r instanceof Sm&&i instanceof Sm})(t.transform,e.transform)}class G8{constructor(e,n){this.version=e,this.transformResults=n}}class Sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class p0{}function FN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new g0(t.key,Sr.none()):new xh(t.key,t.data,Sr.none());{const n=t.data,r=Or.empty();let i=new Gn(nr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Xo(t.key,r,new Jr(i.toArray()),Sr.none())}}function $8(t,e,n){t instanceof xh?(function(i,a,o){const c=i.value.clone(),u=H2(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Xo?(function(i,a,o){if(!Xg(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=H2(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(GN(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ef(t,e,n,r){return t instanceof xh?(function(a,o,c,u){if(!Xg(a.precondition,o))return c;const d=a.value.clone(),h=q2(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof Xo?(function(a,o,c,u){if(!Xg(a.precondition,o))return c;const d=q2(a.fieldTransforms,u,o),h=o.data;return h.setAll(GN(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,o,c){return Xg(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function H8(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=zN(r.transform,i||null);a!=null&&(n===null&&(n=Or.empty()),n.set(r.field,a))}return n||null}function $2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_u(r,i,((a,o)=>F8(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xh extends p0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xo extends p0{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function GN(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function H2(t,e,n){const r=new Map;It(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,B8(o,c,n[i]))}return r}function q2(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,L8(a,o,e))}return r}class g0 extends p0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q8 extends p0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Y8{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&$8(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ef(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ef(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jN();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=FN(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(nt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),xt())}isEqual(e){return this.batchId===e.batchId&&_u(this.mutations,e.mutations,((n,r)=>$2(n,r)))&&_u(this.baseMutations,e.baseMutations,((n,r)=>$2(n,r)))}}class Z1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){It(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return O8})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new Z1(e,n,r,i)}}class X8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class W8{constructor(e,n){this.count=e,this.unchangedNames=n}}var In,St;function K8(t){switch(t){case be.OK:return Qe(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return Qe(15467,{code:t})}}function $N(t){if(t===void 0)return ws("GRPC error has no .code"),be.UNKNOWN;switch(t){case In.OK:return be.OK;case In.CANCELLED:return be.CANCELLED;case In.UNKNOWN:return be.UNKNOWN;case In.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case In.INTERNAL:return be.INTERNAL;case In.UNAVAILABLE:return be.UNAVAILABLE;case In.UNAUTHENTICATED:return be.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case In.NOT_FOUND:return be.NOT_FOUND;case In.ALREADY_EXISTS:return be.ALREADY_EXISTS;case In.PERMISSION_DENIED:return be.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case In.ABORTED:return be.ABORTED;case In.OUT_OF_RANGE:return be.OUT_OF_RANGE;case In.UNIMPLEMENTED:return be.UNIMPLEMENTED;case In.DATA_LOSS:return be.DATA_LOSS;default:return Qe(39323,{code:t})}}(St=In||(In={}))[St.OK=0]="OK",St[St.CANCELLED=1]="CANCELLED",St[St.UNKNOWN=2]="UNKNOWN",St[St.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",St[St.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",St[St.NOT_FOUND=5]="NOT_FOUND",St[St.ALREADY_EXISTS=6]="ALREADY_EXISTS",St[St.PERMISSION_DENIED=7]="PERMISSION_DENIED",St[St.UNAUTHENTICATED=16]="UNAUTHENTICATED",St[St.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",St[St.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",St[St.ABORTED=10]="ABORTED",St[St.OUT_OF_RANGE=11]="OUT_OF_RANGE",St[St.UNIMPLEMENTED=12]="UNIMPLEMENTED",St[St.INTERNAL=13]="INTERNAL",St[St.UNAVAILABLE=14]="UNAVAILABLE",St[St.DATA_LOSS=15]="DATA_LOSS";function Q8(){return new TextEncoder}const Z8=new ko([4294967295,4294967295],0);function Y2(t){const e=Q8().encode(t),n=new aN;return n.update(e),new Uint8Array(n.digest())}function X2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ko([n,r],0),new ko([i,a],0)]}class J1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ff(`Invalid padding: ${n}`);if(r<0)throw new ff(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ff(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ff(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ko.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ko.fromNumber(r)));return i.compare(Z8)===1&&(i=new ko([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Y2(e),[r,i]=X2(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new J1(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=Y2(e),[r,i]=X2(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ff extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class m0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new m0(nt.min(),i,new ln(bt),Ss(),xt())}}class _h{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _h(r,n,xt(),xt(),xt())}}class Wg{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class HN{constructor(e,n){this.targetId=e,this.Ce=n}}class qN{constructor(e,n,r=ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class W2{constructor(){this.ve=0,this.Fe=K2(),this.Me=ir.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),n=xt(),r=xt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Qe(38017,{changeType:a})}})),new _h(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=K2()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class J8{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ss(),this.Je=yg(),this.He=yg(),this.Ye=new ln(bt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Qe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(gx(a))if(r===0){const o=new qe(a.path);this.et(n,o,cr.newNoDocument(o,nt.min()))}else It(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=Po(r).toUint8Array()}catch(u){if(u instanceof vN)return xu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new J1(o,i,a)}catch(u){return xu(u instanceof ff?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&gx(c.target)){const u=new qe(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,cr.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=xt();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new m0(e,n,this.Ye,this.je,r);return this.je=Ss(),this.Je=yg(),this.He=yg(),this.Ye=new ln(bt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new W2,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Gn(bt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Gn(bt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yg(){return new ln(qe.comparator)}function K2(){return new ln(qe.comparator)}const eU={asc:"ASCENDING",desc:"DESCENDING"},tU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nU={and:"AND",or:"OR"};class rU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vx(t,e){return t.useProto3Json||l0(e)?e:{value:e}}function Tm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iU(t,e){return Tm(t,e.toTimestamp())}function Ra(t){return It(!!t,49232),nt.fromTimestamp((function(n){const r=Oo(n);return new gt(r.seconds,r.nanos)})(t))}function e_(t,e){return yx(t,e).canonicalString()}function yx(t,e){const n=(function(i){return new qt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function XN(t){const e=qt.fromString(t);return It(JN(e),10190,{key:e.toString()}),e}function bx(t,e){return e_(t.databaseId,e.path)}function lb(t,e){const n=XN(e);if(n.get(1)!==t.databaseId.projectId)throw new ke(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ke(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qe(KN(n))}function WN(t,e){return e_(t.databaseId,e)}function aU(t){const e=XN(t);return e.length===4?qt.emptyPath():KN(e)}function xx(t){return new qt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KN(t){return It(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Q2(t,e,n){return{name:bx(t,e),fields:n.value.mapValue.fields}}function sU(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Qe(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,h){return d.useProto3Json?(It(h===void 0||typeof h=="string",58123),ir.fromBase64String(h||"")):(It(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ir.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?be.UNKNOWN:$N(d.code);return new ke(h,d.message||"")})(o);n=new qN(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=lb(t,r.document.name),a=Ra(r.document.updateTime),o=r.document.createTime?Ra(r.document.createTime):nt.min(),c=new Or({mapValue:{fields:r.document.fields}}),u=cr.newFoundDocument(i,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Wg(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=lb(t,r.document),a=r.readTime?Ra(r.readTime):nt.min(),o=cr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Wg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=lb(t,r.document),a=r.removedTargetIds||[];n=new Wg([],a,i,null)}else{if(!("filter"in e))return Qe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new W8(i,a),c=r.targetId;n=new HN(c,o)}}return n}function oU(t,e){let n;if(e instanceof xh)n={update:Q2(t,e.key,e.value)};else if(e instanceof g0)n={delete:bx(t,e.key)};else if(e instanceof Xo)n={update:Q2(t,e.key,e.data),updateMask:mU(e.fieldMask)};else{if(!(e instanceof q8))return Qe(16599,{Vt:e.type});n={verify:bx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,o){const c=o.transform;if(c instanceof Sm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Eu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Em)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Qe(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:iU(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Qe(27497)})(t,e.precondition)),n}function lU(t,e){return t&&t.length>0?(It(e!==void 0,14353),t.map((n=>(function(i,a){let o=i.updateTime?Ra(i.updateTime):Ra(a);return o.isEqual(nt.min())&&(o=Ra(a)),new G8(o,i.transformResults||[])})(n,e)))):[]}function cU(t,e){return{documents:[WN(t,e.path)]}}function uU(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WN(t,i);const a=(function(d){if(d.length!==0)return ZN(Wi.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((h=>(function(m){return{field:Kc(m.field),direction:hU(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=vx(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function dU(t){let e=aU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){It(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=(function(g){const m=QN(g);return m instanceof Wi&&CN(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(g){return g.map((m=>(function(_){return new Yf(Qc(_.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,l0(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(g){const m=!!g.before,b=g.values||[];return new _m(b,m)})(n.startAt));let d=null;return n.endAt&&(d=(function(g){const m=!g.before,b=g.values||[];return new _m(b,m)})(n.endAt)),k8(e,i,o,a,c,"F",u,d)}function fU(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qc(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qc(n.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Qc(n.unaryFilter.field);return On.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qc(n.unaryFilter.field);return On.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return On.create(Qc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Wi.create(n.compositeFilter.filters.map((r=>QN(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}})(n.compositeFilter.op))})(t):Qe(30097,{filter:t})}function hU(t){return eU[t]}function pU(t){return tU[t]}function gU(t){return nU[t]}function Kc(t){return{fieldPath:t.canonicalString()}}function Qc(t){return nr.fromServerFormat(t.fieldPath)}function ZN(t){return t instanceof On?(function(n){if(n.op==="=="){if(z2(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NAN"}};if(V2(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z2(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NOT_NAN"}};if(V2(n.value))return{unaryFilter:{field:Kc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kc(n.field),op:pU(n.op),value:n.value}}})(t):t instanceof Wi?(function(n){const r=n.getFilters().map((i=>ZN(i)));return r.length===1?r[0]:{compositeFilter:{op:gU(n.op),filters:r}}})(t):Qe(54877,{filter:t})}function mU(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function JN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class xo{constructor(e,n,r,i,a=nt.min(),o=nt.min(),c=ir.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vU{constructor(e){this.yt=e}}function yU(t){const e=dU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wm(e,e.limit,"L"):e}class bU{constructor(){this.Cn=new xU}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(Mo.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class xU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Gn(qt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gn(qt.comparator)).toArray()}}const Z2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eI=41943040;class Mr{static withCacheSize(e){return new Mr(e,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(eI,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);class Tu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Tu(0)}static cr(){return new Tu(-1)}}const J2="LruGarbageCollector",_U=1048576;function eC([t,e],[n,r]){const i=bt(t,n);return i===0?bt(e,r):i}class wU{constructor(e){this.Ir=e,this.buffer=new Gn(eC),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();eC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Oe(J2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gu(n)?Oe(J2,"Ignoring IndexedDB error during garbage collection: ",n):await Fu(n)}await this.Vr(3e5)}))}}class EU{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(o0.ce);const r=new wU(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(Z2)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z2):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,c,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(d=Date.now(),Xc()<=yt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function TU(t,e){return new EU(t,e)}class AU{constructor(){this.changes=new tc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class CU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class RU{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Ef(r.mutation,i,Jr.empty(),gt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,xt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=xt()){const i=Ol();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=df();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Ol();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,xt())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=Ss();const o=Sf(),c=(function(){return Sf()})();return n.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Xo)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Ef(h.mutation,d,h.mutation.getFieldMask(),gt.now())):o.set(d.key,Jr.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,h)=>o.set(d,h))),n.forEach(((d,h)=>c.set(d,new CU(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Sf();let i=new ln(((o,c)=>o-c)),a=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||Jr.empty();h=c.applyToLocalView(d,h),r.set(u,h);const g=(i.get(c.batchId)||xt()).add(u);i=i.insert(c.batchId,g)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,g=jN();h.forEach((m=>{if(!a.has(m)){const b=FN(n.get(m),r.get(m));b!==null&&g.set(m,b),a=a.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return _e.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return qe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):_e.resolve(Ol());let c=Gf,u=a;return o.next((d=>_e.forEach(d,((h,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(h)?_e.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{u=u.insert(h,m)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,xt()))).next((h=>({batchId:c,changes:PN(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qe(n)).next((r=>{let i=df();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=df();return this.indexManager.getCollectionParents(e,a).next((c=>_e.forEach(c,(u=>{const d=(function(g,m){return new $u(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((g,m)=>{o=o.insert(g,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,cr.newInvalidDocument(h)))}));let c=df();return o.forEach(((u,d)=>{const h=a.get(u);h!==void 0&&Ef(h.mutation,d,Jr.empty(),gt.now()),f0(n,d)&&(c=c.insert(u,d))})),c}))}}class kU{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return _e.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ra(i.createTime)}})(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:yU(i.bundledQuery),readTime:Ra(i.readTime)}})(n)),_e.resolve()}}class DU{constructor(){this.overlays=new ln(qe.comparator),this.qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ol();return _e.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),_e.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const i=Ol(),a=n.length+1,o=new qe(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return _e.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new ln(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=Ol(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=Ol(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return _e.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new X8(n,r));let a=this.qr.get(n);a===void 0&&(a=xt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class NU{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}class t_{constructor(){this.Qr=new Gn(Yn.$r),this.Ur=new Gn(Yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Yn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Yn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new qe(new qt([])),r=new Yn(n,e),i=new Yn(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new qe(new qt([])),r=new Yn(n,e),i=new Yn(n,e+1);let a=xt();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new Yn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return qe.comparator(e.key,n.key)||bt(e.Yr,n.Yr)}static Kr(e,n){return bt(e.Yr,n.Yr)||qe.comparator(e.key,n.key)}}class IU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Gn(Yn.$r)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Y8(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Yn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return _e.resolve(o)}lookupMutationBatch(e,n){return _e.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return _e.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?q1:this.tr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yn(n,0),i=new Yn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gn(bt);return n.forEach((i=>{const a=new Yn(i,0),o=new Yn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),_e.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const o=new Yn(new qe(a),0);let c=new Gn(bt);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),_e.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){It(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return _e.forEach(n.mutations,(i=>{const a=new Yn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Yn(n,0),i=this.Zr.firstAfterOrEqual(r);return _e.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class MU{constructor(e){this.ri=e,this.docs=(function(){return new ln(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():cr.newInvalidDocument(n))}getEntries(e,n){let r=Ss();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():cr.newInvalidDocument(i))})),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Ss();const o=n.path,c=new qe(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||o8(s8(h),r)<=0||(i.has(h.key)||f0(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return _e.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Qe(9500)}ii(e,n){return _e.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new OU(this)}getSize(e){return _e.resolve(this.size)}}class OU extends AU{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),_e.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class PU{constructor(e){this.persistence=e,this.si=new tc((n=>W1(n)),K1),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new t_,this.targetCount=0,this.ai=Tu.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),_e.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Tu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Pr(n),_e.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),_e.waitFor(a).next((()=>i))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),_e.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this._i.containsKey(n))}}class tI{constructor(e,n){this.ui={},this.overlays={},this.ci=new o0(0),this.li=!1,this.li=!0,this.hi=new NU,this.referenceDelegate=e(this),this.Pi=new PU(this),this.indexManager=new bU,this.remoteDocumentCache=(function(i){return new MU(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new vU(n),this.Ii=new kU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new IU(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new jU(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return _e.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class jU extends c8{constructor(e){super(),this.currentSequenceNumber=e}}class n_{constructor(e){this.persistence=e,this.Ri=new t_,this.Vi=null}static mi(e){return new n_(e)}get fi(){if(this.Vi)return this.Vi;throw Qe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.fi,(r=>{const i=qe.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,nt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Am{constructor(e,n){this.persistence=e,this.pi=new tc((r=>f8(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=TU(this,n)}static mi(e,n){return new Am(e,n)}Ei(){}di(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return _e.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?_e.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,a.removeEntry(o,nt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qg(e.data.value)),n}br(e,n,r){return _e.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return _e.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class r_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=xt(),i=xt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new r_(e,n.fromCache,r,i)}}class VU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class zU{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Gj()?8:u8(dr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new VU;return this.Ss(e,n,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Xc()<=yt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",Wc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_e.resolve()):(Xc()<=yt.DEBUG&&Oe("QueryEngine","Query:",Wc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Xc()<=yt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",Wc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ca(n))):_e.resolve())}ys(e,n){if(F2(n))return _e.resolve(null);let r=Ca(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=wm(n,null,"F"),r=Ca(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=xt(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,wm(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return F2(n)||i.isEqual(nt.min())?_e.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?_e.resolve(null):(Xc()<=yt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wc(n)),this.vs(e,o,n,a8(i,Gf)).next((c=>c)))}))}Ds(e,n){let r=new Gn(MN(e));return n.forEach(((i,a)=>{f0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Xc()<=yt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Wc(n)),this.ps.getDocumentsMatchingQuery(e,n,Mo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const i_="LocalStore",LU=3e8;class BU{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ln(bt),this.xs=new tc((a=>W1(a)),K1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function UU(t,e,n,r){return new BU(t,e,n,r)}async function nI(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=xt();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function FU(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,h){const g=d.batch,m=g.keys();let b=_e.resolve();return m.forEach((_=>{b=b.next((()=>h.getEntry(u,_))).next((w=>{const E=d.docVersions.get(_);It(E!==null,48541),w.version.compareTo(E)<0&&(g.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),h.addEntry(w)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(u,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=xt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function rI(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function GU(t,e){const n=at(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach(((h,g)=>{const m=i.get(g);if(!m)return;c.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,h.addedDocuments,g))));let b=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(ir.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,r)),i=i.insert(g,b),(function(w,E,T){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=LU?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(m,b,h)&&c.push(n.Pi.updateTargetData(a,b))}));let u=Ss(),d=xt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))})),c.push($U(a,o,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(nt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(h)}return _e.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(n.Ms=i,a)))}function $U(t,e,n){let r=xt(),i=xt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=Ss();return n.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(nt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Oe(i_,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function HU(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=q1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function qU(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,_e.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new xo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function _x(t,e,n){const r=at(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Gu(o))throw o;Oe(i_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function tC(t,e,n){const r=at(t);let i=nt.min(),a=xt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,h){const g=at(u),m=g.xs.get(h);return m!==void 0?_e.resolve(g.Ms.get(m)):g.Pi.getTargetData(d,h)})(r,o,Ca(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:nt.min(),n?a:xt()))).next((c=>(YU(r,N8(e),c),{documents:c,Qs:a})))))}function YU(t,e,n){let r=t.Os.get(e)||nt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class nC{constructor(){this.activeTargetIds=V8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XU{constructor(){this.Mo=new nC,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WU{Oo(e){}shutdown(){}}const rC="ConnectivityMonitor";class iC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Oe(rC,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Oe(rC,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let bg=null;function wx(){return bg===null?bg=(function(){return 268435456+Math.round(2147483648*Math.random())})():bg++,"0x"+bg.toString(16)}const cb="RestConnection",KU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===bm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=wx(),c=this.zo(e,n.toUriEncodedString());Oe(cb,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),h=zu(d);return this.Jo(e,c,u,r,h).then((g=>(Oe(cb,`Received RPC '${e}' ${o}: `,g),g)),(g=>{throw xu(cb,`RPC '${e}' ${o} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=KU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class ZU{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const or="WebChannelConnection";class JU extends QU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=wx();return new Promise(((c,u)=>{const d=new sN;d.setWithCredentials(!0),d.listenOnce(oN.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Hg.NO_ERROR:const g=d.getResponseJson();Oe(or,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),c(g);break;case Hg.TIMEOUT:Oe(or,`RPC '${e}' ${o} timed out`),u(new ke(be.DEADLINE_EXCEEDED,"Request time out"));break;case Hg.HTTP_ERROR:const m=d.getStatus();if(Oe(or,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const _=b?.error;if(_&&_.status&&_.message){const w=(function(T){const C=T.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(C)>=0?C:be.UNKNOWN})(_.status);u(new ke(w,_.message))}else u(new ke(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ke(be.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Oe(or,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);Oe(or,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=wx(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uN(),c=cN(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");Oe(or,`Creating RPC '${e}' stream ${i}: ${h}`,u);const g=o.createWebChannel(h,u);this.I_(g);let m=!1,b=!1;const _=new ZU({Yo:E=>{b?Oe(or,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(m||(Oe(or,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),Oe(or,`RPC '${e}' stream ${i} sending:`,E),g.send(E))},Zo:()=>g.close()}),w=(E,T,C)=>{E.listen(T,(N=>{try{C(N)}catch(L){setTimeout((()=>{throw L}),0)}}))};return w(g,uf.EventType.OPEN,(()=>{b||(Oe(or,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),w(g,uf.EventType.CLOSE,(()=>{b||(b=!0,Oe(or,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(g))})),w(g,uf.EventType.ERROR,(E=>{b||(b=!0,xu(or,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),_.a_(new ke(be.UNAVAILABLE,"The operation could not be completed")))})),w(g,uf.EventType.MESSAGE,(E=>{if(!b){const T=E.data[0];It(!!T,16349);const C=T,N=C?.error||C[0]?.error;if(N){Oe(or,`RPC '${e}' stream ${i} received error:`,N);const L=N.status;let j=(function(R){const D=In[R];if(D!==void 0)return $N(D)})(L),M=N.message;j===void 0&&(j=be.INTERNAL,M="Unknown error status: "+L+" with message "+N.message),b=!0,_.a_(new ke(j,M)),g.close()}else Oe(or,`RPC '${e}' stream ${i} received:`,T),_.u_(T)}})),w(c,lN.STAT_EVENT,(E=>{E.stat===ux.PROXY?Oe(or,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===ux.NOPROXY&&Oe(or,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ub(){return typeof document<"u"?document:null}function v0(t){return new rU(t,!0)}class iI{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const aC="PersistentStream";class aI{constructor(e,n,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(ws(n.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new ke(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Oe(aC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Oe(aC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eF extends aI{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sU(this.serializer,e),r=(function(a){if(!("targetChange"in a))return nt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?nt.min():o.readTime?Ra(o.readTime):nt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=xx(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=gx(u)?{documents:cU(a,u)}:{query:uU(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=YN(a,o.resumeToken);const d=vx(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(nt.min())>0){c.readTime=Tm(a,o.snapshotVersion.toTimestamp());const d=vx(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=fU(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=xx(this.serializer),n.removeTarget=e,this.q_(n)}}class tF extends aI{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lU(e.writeResults,e.commitTime),r=Ra(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xx(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>oU(this.serializer,r)))};this.q_(n)}}class nF{}class rF extends nF{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ke(be.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,yx(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ke(be.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,yx(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(be.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ws(n),this.aa=!1):Oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Xl="RemoteStore";class aF{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{nc(this)&&(Oe(Xl,"Restarting streams for network reachability change."),await(async function(u){const d=at(u);d.Ea.add(4),await wh(d),d.Ra.set("Unknown"),d.Ea.delete(4),await y0(d)})(this))}))})),this.Ra=new iF(r,i)}}async function y0(t){if(nc(t))for(const e of t.da)await e(!0)}async function wh(t){for(const e of t.da)await e(!1)}function sI(t,e){const n=at(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),l_(n)?o_(n):Hu(n).O_()&&s_(n,e))}function a_(t,e){const n=at(t),r=Hu(n);n.Ia.delete(e),r.O_()&&oI(n,e),n.Ia.size===0&&(r.O_()?r.L_():nc(n)&&n.Ra.set("Unknown"))}function s_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hu(t).Y_(e)}function oI(t,e){t.Va.Ue(e),Hu(t).Z_(e)}function o_(t){t.Va=new J8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Hu(t).start(),t.Ra.ua()}function l_(t){return nc(t)&&!Hu(t).x_()&&t.Ia.size>0}function nc(t){return at(t).Ea.size===0}function lI(t){t.Va=void 0}async function sF(t){t.Ra.set("Online")}async function oF(t){t.Ia.forEach(((e,n)=>{s_(t,e)}))}async function lF(t,e){lI(t),l_(t)?(t.Ra.ha(e),o_(t)):t.Ra.set("Unknown")}async function cF(t,e,n){if(t.Ra.set("Online"),e instanceof qN&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){Oe(Xl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cm(t,r)}else if(e instanceof Wg?t.Va.Ze(e):e instanceof HN?t.Va.st(e):t.Va.tt(e),!n.isEqual(nt.min()))try{const r=await rI(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(ir.EMPTY_BYTE_STRING,h.snapshotVersion)),oI(a,u);const g=new xo(h.target,u,d,h.sequenceNumber);s_(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Oe(Xl,"Failed to raise snapshot:",r),await Cm(t,r)}}async function Cm(t,e,n){if(!Gu(e))throw e;t.Ea.add(1),await wh(t),t.Ra.set("Offline"),n||(n=()=>rI(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Oe(Xl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await y0(t)}))}function cI(t,e){return e().catch((n=>Cm(t,n,e)))}async function b0(t){const e=at(t),n=Vo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:q1;for(;uF(e);)try{const i=await HU(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,dF(e,i)}catch(i){await Cm(e,i)}uI(e)&&dI(e)}function uF(t){return nc(t)&&t.Ta.length<10}function dF(t,e){t.Ta.push(e);const n=Vo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function uI(t){return nc(t)&&!Vo(t).x_()&&t.Ta.length>0}function dI(t){Vo(t).start()}async function fF(t){Vo(t).ra()}async function hF(t){const e=Vo(t);for(const n of t.Ta)e.ea(n.mutations)}async function pF(t,e,n){const r=t.Ta.shift(),i=Z1.from(r,e,n);await cI(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await b0(t)}async function gF(t,e){e&&Vo(t).X_&&await(async function(r,i){if((function(o){return K8(o)&&o!==be.ABORTED})(i.code)){const a=r.Ta.shift();Vo(r).B_(),await cI(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await b0(r)}})(t,e),uI(t)&&dI(t)}async function sC(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),Oe(Xl,"RemoteStore received new credentials");const r=nc(n);n.Ea.add(3),await wh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await y0(n)}async function mF(t,e){const n=at(t);e?(n.Ea.delete(2),await y0(n)):e||(n.Ea.add(2),await wh(n),n.Ra.set("Unknown"))}function Hu(t){return t.ma||(t.ma=(function(n,r,i){const a=at(n);return a.sa(),new eF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:sF.bind(null,t),t_:oF.bind(null,t),r_:lF.bind(null,t),H_:cF.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),l_(t)?o_(t):t.Ra.set("Unknown")):(await t.ma.stop(),lI(t))}))),t.ma}function Vo(t){return t.fa||(t.fa=(function(n,r,i){const a=at(n);return a.sa(),new tF(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:fF.bind(null,t),r_:gF.bind(null,t),ta:hF.bind(null,t),na:pF.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await b0(t)):(await t.fa.stop(),t.Ta.length>0&&(Oe(Xl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class c_{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new c_(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u_(t,e){if(ws("AsyncQueue",`${e}: ${t}`),Gu(t))return new ke(be.UNAVAILABLE,`${e}: ${t}`);throw t}class gu{static emptySet(e){return new gu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||qe.comparator(n.key,r.key):(n,r)=>qe.comparator(n.key,r.key),this.keyedMap=df(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class oC{constructor(){this.ga=new ln(qe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Qe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Au{constructor(e,n,r,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Au(e,n,gu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&d0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class vF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yF{constructor(){this.queries=lC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=at(n),a=i.queries;i.queries=lC(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new ke(be.ABORTED,"Firestore shutting down"))}}function lC(){return new tc((t=>IN(t)),d0)}async function d_(t,e){const n=at(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new vF,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=u_(o,`Initialization of query '${Wc(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&h_(n)}async function f_(t,e){const n=at(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bF(t,e){const n=at(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&h_(n)}function xF(t,e,n){const r=at(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function h_(t){t.Ca.forEach((e=>{e.next()}))}var Sx,cC;(cC=Sx||(Sx={})).Ma="default",cC.Cache="cache";class p_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Au(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Au.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sx.Cache}}class fI{constructor(e){this.key=e}}class hI{constructor(e){this.key=e}}class _F{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=MN(e),this.tu=new gu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new oC,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,g)=>{const m=i.get(h),b=f0(this.query,g)?g:null,_=!!m&&this.mutatedKeys.has(m.key),w=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let E=!1;m&&b?m.data.isEqual(b.data)?_!==w&&(r.track({type:3,doc:b}),E=!0):this.su(m,b)||(r.track({type:2,doc:b}),E=!0,(u&&this.eu(b,u)>0||d&&this.eu(b,d)<0)&&(c=!0)):!m&&b?(r.track({type:0,doc:b}),E=!0):m&&!b&&(r.track({type:1,doc:m}),E=!0,(u||d)&&(c=!0)),E&&(b?(o=o.add(b),a=w?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,g)=>(function(b,_){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{Rt:E})}};return w(b)-w(_)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Au(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new hI(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new fI(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Au.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const g_="SyncEngine";class wF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SF{constructor(e){this.key=e,this.hu=!1}}class EF{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new tc((c=>IN(c)),d0),this.Iu=new Map,this.Eu=new Set,this.du=new ln(qe.comparator),this.Au=new Map,this.Ru=new t_,this.Vu={},this.mu=new Map,this.fu=Tu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TF(t,e,n=!0){const r=bI(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await pI(r,e,n,!0),i}async function AF(t,e){const n=bI(t);await pI(n,e,!0,!1)}async function pI(t,e,n,r){const i=await qU(t.localStore,Ca(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await CF(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&sI(t.remoteStore,i),c}async function CF(t,e,n,r,i){t.pu=(g,m,b)=>(async function(w,E,T,C){let N=E.view.ru(T);N.Cs&&(N=await tC(w.localStore,E.query,!1).then((({documents:A})=>E.view.ru(A,N))));const L=C&&C.targetChanges.get(E.targetId),j=C&&C.targetMismatches.get(E.targetId)!=null,M=E.view.applyChanges(N,w.isPrimaryClient,L,j);return dC(w,E.targetId,M.au),M.snapshot})(t,g,m,b);const a=await tC(t.localStore,e,!0),o=new _F(e,a.Qs),c=o.ru(a.documents),u=_h.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);dC(t,n,d.au);const h=new wF(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function RF(t,e,n){const r=at(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!d0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _x(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&a_(r.remoteStore,i.targetId),Ex(r,i.targetId)})).catch(Fu)):(Ex(r,i.targetId),await _x(r.localStore,i.targetId,!0))}async function kF(t,e){const n=at(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),a_(n.remoteStore,r.targetId))}async function DF(t,e,n){const r=VF(t);try{const i=await(function(o,c){const u=at(o),d=gt.now(),h=c.reduce(((b,_)=>b.add(_.key)),xt());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let _=Ss(),w=xt();return u.Ns.getEntries(b,h).next((E=>{_=E,_.forEach(((T,C)=>{C.isValidDocument()||(w=w.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,_))).next((E=>{g=E;const T=[];for(const C of c){const N=H8(C,g.get(C.key).overlayedDocument);N!=null&&T.push(new Xo(C.key,N,EN(N.value.mapValue),Sr.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,T,c)})).next((E=>{m=E;const T=E.applyToLocalDocumentSet(g,w);return u.documentOverlayCache.saveOverlays(b,E.batchId,T)}))})).then((()=>({batchId:m.batchId,changes:PN(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new ln(bt)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d})(r,i.batchId,n),await Sh(r,i.changes),await b0(r.remoteStore)}catch(i){const a=u_(i,"Failed to persist write");n.reject(a)}}async function gI(t,e){const n=at(t);try{const r=await GU(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Au.get(a);o&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?It(o.hu,14607):i.removedDocuments.size>0&&(It(o.hu,42227),o.hu=!1))})),await Sh(n,r,e)}catch(r){await Fu(r)}}function uC(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=at(o);u.onlineState=c;let d=!1;u.queries.forEach(((h,g)=>{for(const m of g.Sa)m.va(c)&&(d=!0)})),d&&h_(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NF(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new ln(qe.comparator);o=o.insert(a,cr.newNoDocument(a,nt.min()));const c=xt().add(a),u=new m0(nt.min(),new Map,new ln(bt),o,c);await gI(r,u),r.du=r.du.remove(a),r.Au.delete(e),m_(r)}else await _x(r.localStore,e,!1).then((()=>Ex(r,e,n))).catch(Fu)}async function IF(t,e){const n=at(t),r=e.batch.batchId;try{const i=await FU(n.localStore,e);vI(n,r,null),mI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sh(n,i)}catch(i){await Fu(i)}}async function MF(t,e,n){const r=at(t);try{const i=await(function(o,c){const u=at(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next((g=>(It(g!==null,37113),h=g.keys(),u.mutationQueue.removeMutationBatch(d,g)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);vI(r,e,n),mI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sh(r,i)}catch(i){await Fu(i)}}function mI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function vI(t,e,n){const r=at(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ex(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||yI(t,r)}))}function yI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(a_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),m_(t))}function dC(t,e,n){for(const r of n)r instanceof fI?(t.Ru.addReference(r.key,e),OF(t,r)):r instanceof hI?(Oe(g_,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||yI(t,r.key)):Qe(19791,{wu:r})}function OF(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Oe(g_,"New document in limbo: "+n),t.Eu.add(r),m_(t))}function m_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new qe(qt.fromString(e)),r=t.fu.next();t.Au.set(r,new SF(n)),t.du=t.du.insert(n,r),sI(t.remoteStore,new xo(Ca(u0(n.path)),r,"TargetPurposeLimboResolution",o0.ce))}}async function Sh(t,e,n){const r=at(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,n).then((d=>{if((d||n)&&r.isPrimaryClient){const h=d?!d.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(d){i.push(d);const h=r_.As(u.targetId,d);a.push(h)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const h=at(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>_e.forEach(d,(m=>_e.forEach(m.Es,(b=>h.persistence.referenceDelegate.addReference(g,m.targetId,b))).next((()=>_e.forEach(m.ds,(b=>h.persistence.referenceDelegate.removeReference(g,m.targetId,b)))))))))}catch(g){if(!Gu(g))throw g;Oe(i_,"Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const b=h.Ms.get(m),_=b.snapshotVersion,w=b.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,w)}}})(r.localStore,a))}async function PF(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){Oe(g_,"User change. New user:",e.toKey());const r=await nI(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new ke(be.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sh(n,r.Ls)}}function jF(t,e){const n=at(t),r=n.Au.get(e);if(r&&r.hu)return xt().add(r.key);{let i=xt();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function bI(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NF.bind(null,e),e.Pu.H_=bF.bind(null,e.eventManager),e.Pu.yu=xF.bind(null,e.eventManager),e}function VF(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MF.bind(null,e),e}class Rm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=v0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UU(this.persistence,new zU,e.initialUser,this.serializer)}Cu(e){return new tI(n_.mi,this.serializer)}Du(e){return new XU}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rm.provider={build:()=>new Rm};class zF extends Rm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){It(this.persistence.referenceDelegate instanceof Am,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SU(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new tI((r=>Am.mi(r,n)),this.serializer)}}class Tx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PF.bind(null,this.syncEngine),await mF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yF})()}createDatastore(e){const n=v0(e.databaseInfo.databaseId),r=(function(a){return new JU(a)})(e.databaseInfo);return(function(a,o,c,u){return new rF(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new aF(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>uC(this.syncEngine,n,0)),(function(){return iC.v()?new iC:new WU})())}createSyncEngine(e,n){return(function(i,a,o,c,u,d,h){const g=new EF(i,a,o,c,u,d);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=at(n);Oe(Xl,"RemoteStore shutting down."),r.Ea.add(5),await wh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Tx.provider={build:()=>new Tx};class v_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const zo="FirestoreClient";class LF{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lr.UNAUTHENTICATED,this.clientId=H1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Oe(zo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Oe(zo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=u_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function db(t,e){t.asyncQueue.verifyOperationInProgress(),Oe(zo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await nI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function fC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BF(t);Oe(zo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>sC(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>sC(e.remoteStore,i))),t._onlineComponents=e}async function BF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Oe(zo,"Using user provided OfflineComponentProvider");try{await db(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;xu("Error using user provided cache. Falling back to memory cache: "+n),await db(t,new Rm)}}else Oe(zo,"Using default OfflineComponentProvider"),await db(t,new zF(void 0));return t._offlineComponents}async function xI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Oe(zo,"Using user provided OnlineComponentProvider"),await fC(t,t._uninitializedComponentsProvider._online)):(Oe(zo,"Using default OnlineComponentProvider"),await fC(t,new Tx))),t._onlineComponents}function UF(t){return xI(t).then((e=>e.syncEngine))}async function km(t){const e=await xI(t),n=e.eventManager;return n.onListen=TF.bind(null,e.syncEngine),n.onUnlisten=RF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kF.bind(null,e.syncEngine),n}function FF(t,e,n={}){const r=new gs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new v_({next:m=>{h.Nu(),o.enqueueAndForget((()=>f_(a,g)));const b=m.docs.has(c);!b&&m.fromCache?d.reject(new ke(be.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&m.fromCache&&u&&u.source==="server"?d.reject(new ke(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new p_(u0(c.path),h,{includeMetadataChanges:!0,qa:!0});return d_(a,g)})(await km(t),t.asyncQueue,e,n,r))),r.promise}function GF(t,e,n={}){const r=new gs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const h=new v_({next:m=>{h.Nu(),o.enqueueAndForget((()=>f_(a,g))),m.fromCache&&u.source==="server"?d.reject(new ke(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new p_(c,h,{includeMetadataChanges:!0,qa:!0});return d_(a,g)})(await km(t),t.asyncQueue,e,n,r))),r.promise}function _I(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const hC=new Map;const wI="firestore.googleapis.com",pC=!0;class gC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wI,this.ssl=pC}else this.host=e.host,this.ssl=e.ssl??pC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_U)throw new ke(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_I(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ke(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ke(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ke(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class x0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new XB;switch(r.type){case"firstParty":return new ZB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=hC.get(n);r&&(Oe("ComponentProvider","Removing Datastore"),hC.delete(n),r.terminate())})(this),Promise.resolve()}}function $F(t,e,n,r={}){t=wr(t,x0);const i=zu(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(qk(`https://${c}`),Yk("Firestore",!0)),a.host!==wI&&a.host!==c&&xu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Io(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=lr.MOCK_USER;else{d=Oj(r.mockUserToken,t._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ke(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new lr(g)}t._authCredentials=new WB(new fN(d,h))}}class ks{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class hn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Do(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}toJSON(){return{type:hn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bh(n,hn._jsonSchema))return new hn(e,r||null,new qe(qt.fromString(n.referencePath)))}}hn._jsonSchemaVersion="firestore/documentReference/1.0",hn._jsonSchema={type:jn("string",hn._jsonSchemaVersion),referencePath:jn("string")};class Do extends ks{constructor(e,n,r){super(e,n,u0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new qe(e))}withConverter(e){return new Do(this.firestore,e,this._path)}}function vr(t,e,...n){if(t=Yt(t),hN("collection","path",e),t instanceof x0){const r=qt.fromString(e,...n);return R2(r),new Do(t,null,r)}{if(!(t instanceof hn||t instanceof Do))throw new ke(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qt.fromString(e,...n));return R2(r),new Do(t.firestore,null,r)}}function wt(t,e,...n){if(t=Yt(t),arguments.length===1&&(e=H1.newId()),hN("doc","path",e),t instanceof x0){const r=qt.fromString(e,...n);return C2(r),new hn(t,null,new qe(r))}{if(!(t instanceof hn||t instanceof Do))throw new ke(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qt.fromString(e,...n));return C2(r),new hn(t.firestore,t instanceof Do?t.converter:null,new qe(r))}}const mC="AsyncQueue";class vC{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iI(this,"async_queue_retry"),this._c=()=>{const r=ub();r&&Oe(mC,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ub();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ub();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new gs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gu(e))throw e;Oe(mC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ws("INTERNAL UNHANDLED ERROR: ",yC(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=c_.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Qe(47125,{Pc:yC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function bC(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Pa extends x0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new vC,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vC(e),this._firestoreClient=void 0,await e}}}function HF(t,e){const n=typeof t=="object"?t:Qk(),r=typeof t=="string"?t:bm,i=k1(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Ij("firestore");a&&$F(i,...a)}return i}function Eh(t){if(t._terminated)throw new ke(be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qF(t),t._firestoreClient}function qF(t){const e=t._freezeSettings(),n=(function(i,a,o,c){return new g8(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,_I(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new LF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}class bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bi(ir.fromBase64String(e))}catch(n){throw new ke(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bi(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bh(e,bi._jsonSchema))return bi.fromBase64String(e.bytes)}}bi._jsonSchemaVersion="firestore/bytes/1.0",bi._jsonSchema={type:jn("string",bi._jsonSchemaVersion),bytes:jn("string")};class Th{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _0{constructor(e){this._methodName=e}}class ka{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ka._jsonSchemaVersion}}static fromJSON(e){if(bh(e,ka._jsonSchema))return new ka(e.latitude,e.longitude)}}ka._jsonSchemaVersion="firestore/geoPoint/1.0",ka._jsonSchema={type:jn("string",ka._jsonSchemaVersion),latitude:jn("number"),longitude:jn("number")};class Da{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Da._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bh(e,Da._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Da(e.vectorValues);throw new ke(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Da._jsonSchemaVersion="firestore/vectorValue/1.0",Da._jsonSchema={type:jn("string",Da._jsonSchemaVersion),vectorValues:jn("object")};const YF=/^__.*__$/;class XF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xo(e,this.data,this.fieldMask,n,this.fieldTransforms):new xh(e,this.data,n,this.fieldTransforms)}}class SI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function EI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{Ac:t})}}class w0{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new w0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(EI(this.Ac)&&YF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||v0(e)}Cc(e,n,r,i=!1){return new w0({Ac:e,methodName:n,Dc:r,path:nr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(t){const e=t._freezeSettings(),n=v0(t._databaseId);return new WF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function y_(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);x_("Data must be an object, but it was:",o,r);const c=CI(r,o);let u,d;if(a.merge)u=new Jr(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const g of a.mergeFields){const m=Ax(e,g,n);if(!o.contains(m))throw new ke(be.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);kI(h,m)||h.push(m)}u=new Jr(h),d=o.fieldTransforms.filter((g=>u.covers(g.field)))}else u=null,d=o.fieldTransforms;return new XF(new Or(c),u,d)}class Ch extends _0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ch}}function KF(t,e,n){return new w0({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class b_ extends _0{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=KF(this,e,!0),r=this.vc.map((a=>qu(a,n))),i=new Eu(r);return new U8(e.path,i)}isEqual(e){return e instanceof b_&&Io(this.vc,e.vc)}}function TI(t,e,n,r){const i=t.Cc(1,e,n);x_("Data must be an object, but it was:",i,r);const a=[],o=Or.empty();Yo(r,((u,d)=>{const h=__(e,u,n);d=Yt(d);const g=i.yc(h);if(d instanceof Ch)a.push(h);else{const m=qu(d,g);m!=null&&(a.push(h),o.set(h,m))}}));const c=new Jr(a);return new SI(o,c,i.fieldTransforms)}function AI(t,e,n,r,i,a){const o=t.Cc(1,e,n),c=[Ax(e,r,n)],u=[i];if(a.length%2!=0)throw new ke(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)c.push(Ax(e,a[m])),u.push(a[m+1]);const d=[],h=Or.empty();for(let m=c.length-1;m>=0;--m)if(!kI(d,c[m])){const b=c[m];let _=u[m];_=Yt(_);const w=o.yc(b);if(_ instanceof Ch)d.push(b);else{const E=qu(_,w);E!=null&&(d.push(b),h.set(b,E))}}const g=new Jr(d);return new SI(h,g,o.fieldTransforms)}function QF(t,e,n,r=!1){return qu(n,t.Cc(r?4:3,e))}function qu(t,e){if(RI(t=Yt(t)))return x_("Unsupported field value:",e,t),CI(t,e);if(t instanceof _0)return(function(r,i){if(!EI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=qu(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:Tm(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tm(i.serializer,a)}}if(r instanceof ka)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bi)return{bytesValue:YN(i.serializer,r._byteString)};if(r instanceof hn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:e_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Da)return(function(o,c){return{mapValue:{fields:{[wN]:{stringValue:SN},[xm]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Q1(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${s0(r)}`)})(t,e)}function CI(t,e){const n={};return mN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,((r,i)=>{const a=qu(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function RI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof ka||t instanceof bi||t instanceof hn||t instanceof _0||t instanceof Da)}function x_(t,e,n){if(!RI(n)||!pN(n)){const r=s0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ax(t,e,n){if((e=Yt(e))instanceof Th)return e._internalPath;if(typeof e=="string")return __(t,e);throw Dm("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZF=new RegExp("[~\\*/\\[\\]]");function __(t,e,n){if(e.search(ZF)>=0)throw Dm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Th(...e.split("."))._internalPath}catch{throw Dm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dm(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ke(be.INVALID_ARGUMENT,c+t+u)}function kI(t,e){return t.some((n=>n.isEqual(e)))}class DI{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(S0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JF extends DI{data(){return super.data()}}function S0(t,e){return typeof e=="string"?__(t,e):e instanceof Th?e._internalPath:e._delegate._internalPath}function NI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ke(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class w_{}class S_ extends w_{}function Ki(t,e,...n){let r=[];e instanceof w_&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof E_)).length,c=a.filter((u=>u instanceof E0)).length;if(o>1||o>0&&c>0)throw new ke(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class E0 extends S_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new E0(e,n,r)}_apply(e){const n=this._parse(e);return II(e._query,n),new ks(e.firestore,e.converter,mx(e._query,n))}_parse(e){const n=Ah(e.firestore);return(function(a,o,c,u,d,h,g){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ke(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){wC(g,h);const _=[];for(const w of g)_.push(_C(u,a,w));m={arrayValue:{values:_}}}else m=_C(u,a,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||wC(g,h),m=QF(c,o,g,h==="in"||h==="not-in");return On.create(d,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function e7(t,e,n){const r=e,i=S0("where",t);return E0._create(i,r,n)}class E_ extends w_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new E_(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Wi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)II(o,u),o=mx(o,u)})(e._query,n),new ks(e.firestore,e.converter,mx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class T_ extends S_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new T_(e,n)}_apply(e){const n=(function(i,a,o){if(i.startAt!==null)throw new ke(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ke(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yf(a,o)})(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new $u(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Lo(t,e="asc"){const n=e,r=S0("orderBy",t);return T_._create(r,n)}class A_ extends S_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new A_(e,n,r)}_apply(e){return new ks(e.firestore,e.converter,wm(e._query,this._limit,this._limitType))}}function xC(t){return A_._create("limit",t,"F")}function _C(t,e,n){if(typeof(n=Yt(n))=="string"){if(n==="")throw new ke(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NN(e)&&n.indexOf("/")!==-1)throw new ke(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qt.fromString(n));if(!qe.isDocumentKey(r))throw new ke(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return j2(t,new qe(r))}if(n instanceof hn)return j2(t,n._key);throw new ke(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${s0(n)}.`)}function wC(t,e){if(!Array.isArray(t)||t.length===0)throw new ke(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function II(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ke(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class t7{convertValue(e,n="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yo(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[xm].arrayValue?.values?.map((r=>xn(r.doubleValue)));return new Da(n)}convertGeoPoint(e){return new ka(xn(e.latitude),xn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=c0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($f(e));default:return null}}convertTimestamp(e){const n=Oo(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qt.fromString(e);It(JN(r),9688,{name:e});const i=new Hf(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return i.isEqual(n)||ws(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function C_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ll extends DI{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(S0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ll._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ll._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ll._jsonSchema={type:jn("string",Ll._jsonSchemaVersion),bundleSource:jn("string","DocumentSnapshot"),bundleName:jn("string"),bundle:jn("string")};class Kg extends Ll{data(e={}){return super.data(e)}}class Bl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Kg(this._firestore,this._userDataWriter,r.key,r,new hf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Kg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Kg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hf(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:n7(c.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=H1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function n7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:t})}}function fb(t){t=wr(t,hn);const e=wr(t.firestore,Pa);return FF(Eh(e),t._key).then((n=>MI(e,t,n)))}Bl._jsonSchemaVersion="firestore/querySnapshot/1.0",Bl._jsonSchema={type:jn("string",Bl._jsonSchemaVersion),bundleSource:jn("string","QuerySnapshot"),bundleName:jn("string"),bundle:jn("string")};class R_ extends t7{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function Ui(t){t=wr(t,ks);const e=wr(t.firestore,Pa),n=Eh(e),r=new R_(e);return NI(t._query),GF(n,t._query).then((i=>new Bl(e,r,t,i)))}function Zr(t,e,n){t=wr(t,hn);const r=wr(t.firestore,Pa),i=C_(t.converter,e,n);return Rh(r,[y_(Ah(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Sr.none())])}function wa(t,e,n,...r){t=wr(t,hn);const i=wr(t.firestore,Pa),a=Ah(i);let o;return o=typeof(e=Yt(e))=="string"||e instanceof Th?AI(a,"updateDoc",t._key,e,n,r):TI(a,"updateDoc",t._key,e),Rh(i,[o.toMutation(t._key,Sr.exists(!0))])}function Fi(t){return Rh(wr(t.firestore,Pa),[new g0(t._key,Sr.none())])}function T0(t,e){const n=wr(t.firestore,Pa),r=wt(t),i=C_(t.converter,e);return Rh(n,[y_(Ah(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sr.exists(!1))]).then((()=>r))}function Yu(t,...e){t=Yt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||bC(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(bC(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(t instanceof hn)o=wr(t.firestore,Pa),c=u0(t._key.path),a={next:u=>{e[r]&&e[r](MI(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=wr(t,ks);o=wr(u.firestore,Pa),c=u._query;const d=new R_(o);a={next:h=>{e[r]&&e[r](new Bl(o,d,u,h))},error:e[r+1],complete:e[r+2]},NI(t._query)}return(function(d,h,g,m){const b=new v_(m),_=new p_(h,b,g);return d.asyncQueue.enqueueAndForget((async()=>d_(await km(d),_))),()=>{b.Nu(),d.asyncQueue.enqueueAndForget((async()=>f_(await km(d),_)))}})(Eh(o),c,i,a)}function Rh(t,e){return(function(r,i){const a=new gs;return r.asyncQueue.enqueueAndForget((async()=>DF(await UF(r),i,a))),a.promise})(Eh(t),e)}function MI(t,e,n){const r=n.docs.get(e._key),i=new R_(t);return new Ll(t,i,e._key,r,new hf(n.hasPendingWrites,n.fromCache),e.converter)}class r7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ah(e)}set(e,n,r){this._verifyNotCommitted();const i=hb(e,this._firestore),a=C_(i.converter,n,r),o=y_(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Sr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=hb(e,this._firestore);let o;return o=typeof(n=Yt(n))=="string"||n instanceof Th?AI(this._dataReader,"WriteBatch.update",a._key,n,r,i):TI(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hb(e,this._firestore);return this._mutations=this._mutations.concat(new g0(n._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hb(t,e){if((t=Yt(t)).firestore!==e)throw new ke(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function SC(){return new Ch("deleteField")}function i7(...t){return new b_("arrayUnion",t)}function OI(t){return Eh(t=wr(t,Pa)),new r7(t,(e=>Rh(t,e)))}(function(e,n=!0){(function(i){Uu=i})(Lu),yu(new Gl("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Pa(new KB(r.getProvider("auth-internal")),new JB(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ke(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hf(d.options.projectId,h)})(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Ro(S2,E2,e),Ro(S2,E2,"esm2020")})();const a7={apiKey:"AIzaSyCRHcpbVGQrEZUVdO_Ucn4ZarwwPsrON40",authDomain:"personal-budget-pwa-5defb.firebaseapp.com",projectId:"personal-budget-pwa-5defb",storageBucket:"personal-budget-pwa-5defb.firebasestorage.app",messagingSenderId:"137454342284",appId:"1:137454342284:web:0ae73943f9058a4342aba9",measurementId:"G-VMP5DF6273"},PI=Kk(a7),Vi=R6(PI),Je=HF(PI),EC=()=>({url:window.location.origin+"/personal-budget-pwa/",handleCodeInApp:!1}),xg=t=>({id:t.uid,username:t.email||t.uid,displayName:t.displayName||t.email?.split("@")[0]||"User",email:t.email||void 0}),$i=G1()(iN(t=>({currentUser:null,isAuthenticated:!1,loginError:null,isLoading:!1,isInitialized:!1,isInitializing:!0,lastAuthTime:null,offlineGracePeriod:10080*60*1e3,lastVerificationEmailSent:null,login:async(e,n)=>{t({isLoading:!0,loginError:null});try{const i=(await dz(Vi,e,n)).user;if(console.log(` Checking email verification for: ${i.email}`),console.log(" emailVerified status:",i.emailVerified),console.log(" Firebase user object:",{uid:i.uid,email:i.email,emailVerified:i.emailVerified,metadata:i.metadata}),!i.emailVerified)return console.log(` BLOCKING LOGIN: Email not verified for ${i.email}`),await ZA(Vi),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:"Please verify your email address before signing in. Check your email for a verification link."}),console.log(` Login blocked: ${i.email} not verified`),!1;console.log(` EMAIL VERIFIED: Allowing login for ${i.email}`);const a=xg(i);return t({currentUser:a,isAuthenticated:!0,isLoading:!1,loginError:null,lastAuthTime:Date.now()}),console.log(` User logged in: ${a.email}`),!0}catch(r){console.error("Login error:",r),console.error("Error code:",r.code),console.error("Error message:",r.message);let i="Login failed. Please try again.";if(r.code)switch(r.code){case"auth/invalid-email":i="Invalid email address.";break;case"auth/user-disabled":i="This account has been disabled.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password.";break;case"auth/too-many-requests":i="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break;case"auth/invalid-credential":i="Invalid email or password.";break;default:console.warn(`Unhandled Firebase error code: ${r.code}`),i="Authentication failed. Please try again.";break}else console.warn("Non-Firebase error in login:",r),i="An unexpected error occurred. Please try again.";return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:i}),!1}},register:async(e,n,r)=>{t({isLoading:!0,loginError:null});try{const a=(await uz(Vi,e,n)).user;await hz(a,{displayName:r}),await QA(a,EC());const o=xg(a);return t({currentUser:o,isAuthenticated:!1,isLoading:!1,loginError:null,lastVerificationEmailSent:Date.now()}),console.log(` User registered: ${o.email}, verification email sent`),!0}catch(i){console.error("Registration error:",i);let a="Registration failed. Please try again.";switch(i.code){case"auth/email-already-in-use":a="An account with this email already exists.";break;case"auth/invalid-email":a="Invalid email address.";break;case"auth/weak-password":a="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":a="Email/password accounts are not enabled.";break}return t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:a}),!1}},logout:async()=>{try{await ZA(Vi),console.log(" User logged out")}catch(e){console.error("Logout error:",e)}},clearError:()=>{t({loginError:null})},sendPasswordReset:async e=>{t({isLoading:!0,loginError:null});try{return await lz(Vi,e),t({isLoading:!1}),!0}catch(n){console.error("Password reset error:",n);let r="Failed to send password reset email. Please try again.";switch(n.code){case"auth/user-not-found":r="No account found with this email.";break;case"auth/invalid-email":r="Invalid email address.";break;case"auth/too-many-requests":r="Too many attempts. Please try again later.";break}return t({isLoading:!1,loginError:r}),!1}},sendEmailVerification:async()=>{const e=Vi.currentUser;if(!e)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{return await QA(e,EC()),t({isLoading:!1,lastVerificationEmailSent:Date.now()}),console.log(` Verification email sent to: ${e.email}`),!0}catch(n){console.error("Email verification error:",n);let r="Failed to send verification email. Please try again.";switch(n.code){case"auth/too-many-requests":r="Too many verification emails sent. Please wait before trying again.";break}return t({isLoading:!1,loginError:r}),!1}},resendEmailVerification:async()=>{const e=$i.getState();if(e.lastVerificationEmailSent){const n=Date.now()-e.lastVerificationEmailSent,r=60*1e3;if(n<r){const i=Math.ceil((r-n)/1e3);return t({loginError:`Please wait ${i} seconds before requesting another verification email.`}),!1}}return e.sendEmailVerification()},checkVerificationStatus:async()=>{const e=Vi.currentUser;if(!e)return!1;try{await e.reload();const n=Vi.currentUser;if(n?.emailVerified){const r=xg(n);return t({currentUser:r,isAuthenticated:!0,lastAuthTime:Date.now()}),console.log(` Email verified for: ${n.email}`),!0}return!1}catch(n){return console.error("Error checking verification status:",n),!1}},deleteAccount:async e=>{const n=Vi.currentUser;if(!n||!n.email)return t({loginError:"No user is currently signed in."}),!1;t({isLoading:!0,loginError:null});try{const r=Jl.credential(n.email,e);return await sz(n,r),await vz(n),t({currentUser:null,isAuthenticated:!1,isLoading:!1,loginError:null,lastAuthTime:null}),console.log(` Account permanently deleted: ${n.email}`),!0}catch(r){console.error("Account deletion error:",r);let i="Failed to delete account. Please try again.";switch(r.code){case"auth/requires-recent-login":i="For security, please log out and log back in before deleting your account.";break;case"auth/wrong-password":i="Incorrect password. Please enter your current password.";break;case"auth/too-many-requests":i="Too many deletion attempts. Please wait before trying again.";break;case"auth/network-request-failed":i="Network error. Please check your connection and try again.";break}return t({isLoading:!1,loginError:i}),!1}},initializeAuth:()=>$i.getState().isInitialized?()=>{}:(t({isInitialized:!1}),mz(Vi,async r=>{const i=Date.now(),a=$i.getState(),o=r?xg(r):null,c=a.lastAuthTime&&i-a.lastAuthTime<a.offlineGracePeriod,d=typeof navigator<"u"&&!navigator.onLine&&a.isAuthenticated&&c&&!o,h=r?r.emailVerified:!0,g=r&&h||!!d,m=r?o:d?a.currentUser:null;if(t({currentUser:m,isAuthenticated:g,isInitialized:!0,isLoading:!1,loginError:null,lastAuthTime:r&&h?i:a.lastAuthTime}),m)if(console.log(` Auth state: User is signed in (${m.email})`,d?"(offline grace period)":h?"(verified)":"(unverified)"),console.log(" Onboarding check:",{isVerified:h,shouldGrantOfflineAccess:d,willCheckOnboarding:h&&!d}),h&&!d){console.log(" Loading budgetStore to check onboarding...");const b=await Et(()=>Promise.resolve().then(()=>TQ),[]).then(_=>_.useBudgetStore.getState());console.log(" Calling budgetStore.checkAndStartOnboarding()..."),b.checkAndStartOnboarding()}else console.log(" Skipping onboarding check (not verified or offline grace period)");else console.log(" Auth state: User is signed out")}))}),{name:"auth-storage",partialize:t=>({isAuthenticated:t.isAuthenticated,currentUser:t.currentUser,lastAuthTime:t.lastAuthTime,offlineGracePeriod:t.offlineGracePeriod,lastVerificationEmailSent:t.lastVerificationEmailSent})})),jt=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:$i},Symbol.toStringTag,{value:"Module"})),jI=[{id:"length",label:"Minimum 12 characters",regex:/^.{12,}$/},{id:"uppercase",label:"At least one uppercase letter (A-Z)",regex:/[A-Z]/},{id:"lowercase",label:"At least one lowercase letter (a-z)",regex:/[a-z]/},{id:"number",label:"At least one number (0-9)",regex:/\d/},{id:"special",label:"At least one special character (!@#$%^&*)",regex:/[!@#$%^&*]/}],s7=t=>{if(!t)return{score:0,level:"weak",color:"text-gray-400",label:"Enter password"};const r=jI.map(c=>({...c,met:c.regex.test(t)})).filter(c=>c.met).length;let i,a,o;return r<=1?(i="weak",a="text-red-500",o="Weak"):r<=3?(i="medium",a="text-yellow-500",o="Medium"):r===4?(i="strong",a="text-blue-500",o="Strong"):(i="very-strong",a="text-green-500",o="Very Strong"),{score:r,level:i,color:a,label:o}},k_=t=>{const e=jI.map(i=>({...i,met:i.regex.test(t)})),n=s7(t),r=e.every(i=>i.met);return{requirements:e,strength:n,isValid:r,isEmpty:!t.trim()}},o7=({password:t,className:e=""})=>{const{strength:n,isEmpty:r}=k_(t);return r?null:v.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[v.jsx("div",{className:"flex-1",children:v.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(i=>v.jsx("div",{className:`h-1 flex-1 rounded-full ${i<=n.score?n.score<=1?"bg-red-500":n.score<=3?"bg-yellow-500":n.score===4?"bg-blue-500":"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`},i))})}),v.jsx("span",{className:`text-sm font-medium ${n.color}`,children:n.label})]})},l7=({password:t,className:e=""})=>{const{requirements:n,isEmpty:r}=k_(t);return r?null:v.jsx("div",{className:`space-y-1 ${e}`,children:n.map(i=>v.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.met?v.jsx(A9,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):v.jsx(a0,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),v.jsx("span",{className:i.met?"text-green-700 dark:text-green-300":"text-gray-600 dark:text-gray-400",children:i.label})]},i.id))})},c7=()=>{const[t,e]=U.useState(""),[n,r]=U.useState(""),[i,a]=U.useState(""),[o,c]=U.useState(!1),[u,d]=U.useState(!1),[h,g]=U.useState(!1),[m,b]=U.useState(!1),{login:_,register:w,sendPasswordReset:E,isLoading:T,loginError:C,clearError:N}=$i(),L=k_(n),j=async A=>{if(A.preventDefault(),N(),t.trim()&&n.trim())if(u){if(!i.trim()||!L.isValid)return;await w(t.trim(),n,i.trim())}else await _(t.trim(),n)},M=async A=>{A.preventDefault(),t.trim()&&await E(t.trim())&&b(!0)};return U.useEffect(()=>{e(""),r(""),a(""),b(!1)},[u,h]),v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsxs("div",{className:"flex flex-col items-center gap-3 mb-2",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"Personal Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"Personal Budget"})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Simple envelope budgeting for personal finance"})]})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:h?v.jsxs("form",{onSubmit:M,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-2",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Reset Password"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(lx,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{id:"reset-email",type:"email",value:t,onChange:A=>e(A.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"email"})]})]}),m?v.jsxs("div",{className:"text-center py-4",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30",children:v.jsx(lx,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),v.jsx("h3",{className:"mt-3 text-lg font-medium text-gray-900 dark:text-white",children:"Check your email"}),v.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["We've sent a password reset link to ",v.jsx("span",{className:"font-medium",children:t})]}),v.jsxs("button",{type:"button",onClick:()=>g(!1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[v.jsx(ql,{className:"-ml-1 mr-2 h-4 w-4"}),"Back to login"]})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"submit",disabled:T||!t.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?"Sending...":"Send Reset Link"}),v.jsx("div",{className:"mt-4 text-center",children:v.jsxs("button",{type:"button",onClick:()=>g(!1),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:[v.jsx(ql,{className:"inline-block h-4 w-4 -ml-1 mr-1"}),"Back to login"]})})]})]}):v.jsxs("form",{onSubmit:j,className:"space-y-6",children:[v.jsxs("div",{className:"text-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"Create Account":"Sign In"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:u?"Create a new account to get started":"Sign in to your account"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),v.jsx("input",{id:"email",type:"email",value:t,onChange:A=>e(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your email",required:!0,disabled:T,autoComplete:"username"})]}),u&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),v.jsx("input",{id:"displayName",type:"text",value:i,onChange:A=>a(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your display name",required:!0,disabled:T})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),!u&&v.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",disabled:T,children:"Forgot password?"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:A=>r(A.target.value),className:`w-full px-3 py-2 pr-10 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${u&&n&&!L.isValid?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your password",required:!0,disabled:T,autoComplete:u?"new-password":"current-password"}),v.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none",disabled:T,children:o?v.jsx(F9,{className:"h-5 w-5"}):v.jsx($9,{className:"h-5 w-5"})})]}),u&&n&&v.jsx("div",{className:"mt-2",children:v.jsx(o7,{password:n})}),u&&n&&v.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:v.jsx(l7,{password:n})})]}),C&&v.jsxs("div",{className:"text-red-600 dark:text-red-400 text-sm text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-md",children:[C,C.includes("verify your email")&&v.jsx("div",{className:"mt-3",children:v.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Please check your email and click the verification link to continue."})})]}),v.jsx("button",{type:"submit",disabled:T||!t.trim()||!n.trim()||u&&!i.trim()||u&&!L.isValid,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed",children:T?u?"Creating Account...":"Signing in...":u?"Create Account":"Sign In"}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("button",{type:"button",onClick:()=>{d(!u),g(!1)},className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",disabled:T,children:[v.jsx(MB,{className:"h-4 w-4"}),u?"Already have an account? Sign In":"Don't have an account? Sign Up"]})})]})})]})})},VI=()=>{const[t,e]=U.useState(!1),[n,r]=U.useState(!1),{currentUser:i,resendEmailVerification:a,checkVerificationStatus:o,logout:c,loginError:u}=$i();U.useEffect(()=>{i||console.warn("EmailVerificationView: No current user, this should not happen")},[i]),U.useEffect(()=>{const g=()=>{console.log("Window focused, checking verification status..."),o()};return window.addEventListener("focus",g),()=>window.removeEventListener("focus",g)},[o]);const d=async()=>{e(!0),r(!1);const g=await a();e(!1),g&&(r(!0),setTimeout(()=>r(!1),3e3))},h=async()=>{await c()};return i?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsx("div",{className:"text-center",children:v.jsx("div",{className:"flex flex-col items-center gap-3 mb-2",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:"/personal-budget-pwa/icon-192.png",alt:"House Budget Logo",className:"w-10 h-10"}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:"House Budget"})]})})}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-4",children:v.jsx(lx,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Check your email"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["We've sent a verification link to"," ",v.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:i.email})]}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(ox,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),v.jsxs("div",{className:"text-left",children:[v.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"What to do next:"}),v.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[v.jsx("li",{children:"1. Open your email inbox"}),v.jsx("li",{children:"2. Find the email from House Budget"}),v.jsx("li",{children:'3. Click the "Verify Email" link'}),v.jsx("li",{children:"4. Return here and sign in"})]})]})]})}),u&&v.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:u}),n&&v.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:"Verification email sent successfully!"}),v.jsx("button",{onClick:d,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed mb-4 flex items-center justify-center gap-2",children:t?v.jsxs(v.Fragment,{children:[v.jsx(Bf,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):v.jsxs(v.Fragment,{children:[v.jsx(Bf,{className:"h-4 w-4"}),"Resend verification email"]})}),v.jsxs("button",{onClick:h,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium flex items-center justify-center gap-2 mx-auto",children:[v.jsx(ql,{className:"h-4 w-4"}),"Back to sign in"]})]})}),v.jsx("div",{className:"text-center",children:v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Didn't receive the email? Check your spam folder or try resending."})})]})}):null},zI=({message:t="Loading your budget...",showTimeout:e=!1})=>v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex flex-col items-center justify-center px-4",children:[v.jsx("div",{className:"mb-8",children:v.jsxs("div",{className:"relative",children:[v.jsx(Bf,{size:48,className:"text-blue-500 animate-spin"}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsx(i0,{size:24,className:"text-blue-600 dark:text-blue-400"})})]})}),v.jsxs("div",{className:"text-center space-y-3",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400 max-w-md",children:"This may take a moment on slow connections. We're fetching your budget data securely."})]}),v.jsxs("div",{className:"mt-12 w-full max-w-md space-y-4",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("div",{className:"h-6 bg-gray-200 dark:bg-zinc-700 rounded w-24 animate-pulse"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"}),v.jsx("div",{className:"h-8 w-8 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]})]})}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsx("div",{className:"h-4 bg-gray-200 dark:bg-zinc-700 rounded w-32 mb-2 animate-pulse"}),v.jsx("div",{className:"h-8 bg-gray-200 dark:bg-zinc-700 rounded w-20 animate-pulse"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-28 animate-pulse"}),v.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-12 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("div",{className:"h-5 bg-gray-200 dark:bg-zinc-700 rounded w-32 animate-pulse"}),v.jsx("div",{className:"h-6 w-6 bg-gray-200 dark:bg-zinc-700 rounded-full animate-pulse"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"}),v.jsx("div",{className:"h-16 bg-gray-100 dark:bg-zinc-800 rounded-xl animate-pulse"})]})]})]}),e&&v.jsx("div",{className:"mt-8 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 max-w-md",children:v.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 text-center",children:"This is taking longer than usual. If you're on a very slow connection, this is normal. Your data will load shortly."})}),v.jsx("div",{className:"mt-8 w-full max-w-md",children:v.jsx("div",{className:"h-1 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-blue-500 rounded-full animate-pulse",style:{width:"60%"}})})})]}),D_=U.createContext({});function A0(t){const e=U.useRef(null);return e.current===null&&(e.current=t()),e.current}const N_=typeof window<"u",I_=N_?U.useLayoutEffect:U.useEffect,C0=U.createContext(null);function M_(t,e){t.indexOf(e)===-1&&t.push(e)}function O_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Es=(t,e,n)=>n>e?e:n<t?t:n;let P_=()=>{};const Ts={},LI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function BI(t){return typeof t=="object"&&t!==null}const UI=t=>/^0[^.\s]+$/u.test(t);function j_(t){let e;return()=>(e===void 0&&(e=t()),e)}const _i=t=>t,u7=(t,e)=>n=>e(t(n)),kh=(...t)=>t.reduce(u7),Wf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class V_{constructor(){this.subscriptions=[]}add(e){return M_(this.subscriptions,e),()=>O_(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Na=t=>t*1e3,xi=t=>t/1e3;function FI(t,e){return e?t*(1e3/e):0}const GI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,d7=1e-7,f7=12;function h7(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=GI(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>d7&&++c<f7);return o}function Dh(t,e,n,r){if(t===e&&n===r)return _i;const i=a=>h7(a,0,1,t,n);return a=>a===0||a===1?a:GI(i(a),e,r)}const $I=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,HI=t=>e=>1-t(1-e),qI=Dh(.33,1.53,.69,.99),z_=HI(qI),YI=$I(z_),XI=t=>(t*=2)<1?.5*z_(t):.5*(2-Math.pow(2,-10*(t-1))),L_=t=>1-Math.sin(Math.acos(t)),WI=HI(L_),KI=$I(L_),p7=Dh(.42,0,1,1),g7=Dh(0,0,.58,1),QI=Dh(.42,0,.58,1),m7=t=>Array.isArray(t)&&typeof t[0]!="number",ZI=t=>Array.isArray(t)&&typeof t[0]=="number",v7={linear:_i,easeIn:p7,easeInOut:QI,easeOut:g7,circIn:L_,circInOut:KI,circOut:WI,backIn:z_,backInOut:YI,backOut:qI,anticipate:XI},y7=t=>typeof t=="string",TC=t=>{if(ZI(t)){P_(t.length===4);const[e,n,r,i]=t;return Dh(e,n,r,i)}else if(y7(t))return v7[t];return t},_g=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function b7(t,e){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),t()),h(c)}const d={schedule:(h,g=!1,m=!1)=>{const _=m&&i?n:r;return g&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const x7=40;function JI(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=_g.reduce((N,L)=>(N[L]=b7(a),N),{}),{setup:c,read:u,resolveKeyframes:d,preUpdate:h,update:g,preRender:m,render:b,postRender:_}=o,w=()=>{const N=Ts.useManualTiming?i.timestamp:performance.now();n=!1,Ts.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,x7),1)),i.timestamp=N,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),h.process(i),g.process(i),m.process(i),b.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(w))},E=()=>{n=!0,r=!0,i.isProcessing||t(w)};return{schedule:_g.reduce((N,L)=>{const j=o[L];return N[L]=(M,A=!1,R=!1)=>(n||E(),j.schedule(M,A,R)),N},{}),cancel:N=>{for(let L=0;L<_g.length;L++)o[_g[L]].cancel(N)},state:i,steps:o}}const{schedule:en,cancel:Bo,state:er,steps:pb}=JI(typeof requestAnimationFrame<"u"?requestAnimationFrame:_i,!0);let Qg;function _7(){Qg=void 0}const Pr={now:()=>(Qg===void 0&&Pr.set(er.isProcessing||Ts.useManualTiming?er.timestamp:performance.now()),Qg),set:t=>{Qg=t,queueMicrotask(_7)}},eM=t=>e=>typeof e=="string"&&e.startsWith(t),B_=eM("--"),w7=eM("var(--"),U_=t=>w7(t)?S7.test(t.split("/*")[0].trim()):!1,S7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kf={...Xu,transform:t=>Es(0,1,t)},wg={...Xu,default:1},Tf=t=>Math.round(t*1e5)/1e5,F_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function E7(t){return t==null}const T7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,G_=(t,e)=>n=>!!(typeof n=="string"&&T7.test(n)&&n.startsWith(t)||e&&!E7(n)&&Object.prototype.hasOwnProperty.call(n,e)),tM=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(F_);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},A7=t=>Es(0,255,t),gb={...Xu,transform:t=>Math.round(A7(t))},Pl={test:G_("rgb","red"),parse:tM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+gb.transform(t)+", "+gb.transform(e)+", "+gb.transform(n)+", "+Tf(Kf.transform(r))+")"};function C7(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Cx={test:G_("#"),parse:C7,transform:Pl.transform},Nh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),po=Nh("deg"),Ia=Nh("%"),Ze=Nh("px"),R7=Nh("vh"),k7=Nh("vw"),AC={...Ia,parse:t=>Ia.parse(t)/100,transform:t=>Ia.transform(t*100)},eu={test:G_("hsl","hue"),parse:tM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ia.transform(Tf(e))+", "+Ia.transform(Tf(n))+", "+Tf(Kf.transform(r))+")"},Mn={test:t=>Pl.test(t)||Cx.test(t)||eu.test(t),parse:t=>Pl.test(t)?Pl.parse(t):eu.test(t)?eu.parse(t):Cx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Pl.transform(t):eu.transform(t),getAnimatableNone:t=>{const e=Mn.parse(t);return e.alpha=0,Mn.transform(e)}},D7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function N7(t){return isNaN(t)&&typeof t=="string"&&(t.match(F_)?.length||0)+(t.match(D7)?.length||0)>0}const nM="number",rM="color",I7="var",M7="var(",CC="${}",O7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(O7,u=>(Mn.test(u)?(r.color.push(a),i.push(rM),n.push(Mn.parse(u))):u.startsWith(M7)?(r.var.push(a),i.push(I7),n.push(u)):(r.number.push(a),i.push(nM),n.push(parseFloat(u))),++a,CC)).split(CC);return{values:n,split:c,indexes:r,types:i}}function iM(t){return Qf(t).values}function aM(t){const{split:e,types:n}=Qf(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===nM?a+=Tf(i[o]):c===rM?a+=Mn.transform(i[o]):a+=i[o]}return a}}const P7=t=>typeof t=="number"?0:Mn.test(t)?Mn.getAnimatableNone(t):t;function j7(t){const e=iM(t);return aM(t)(e.map(P7))}const Uo={test:N7,parse:iM,createTransformer:aM,getAnimatableNone:j7};function mb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function V7({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=mb(u,c,t+1/3),a=mb(u,c,t),o=mb(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Nm(t,e){return n=>n>0?e:t}const sn=(t,e,n)=>t+(e-t)*n,vb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},z7=[Cx,Pl,eu],L7=t=>z7.find(e=>e.test(t));function RC(t){const e=L7(t);if(!e)return!1;let n=e.parse(t);return e===eu&&(n=V7(n)),n}const kC=(t,e)=>{const n=RC(t),r=RC(e);if(!n||!r)return Nm(t,e);const i={...n};return a=>(i.red=vb(n.red,r.red,a),i.green=vb(n.green,r.green,a),i.blue=vb(n.blue,r.blue,a),i.alpha=sn(n.alpha,r.alpha,a),Pl.transform(i))},Rx=new Set(["none","hidden"]);function B7(t,e){return Rx.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function U7(t,e){return n=>sn(t,e,n)}function $_(t){return typeof t=="number"?U7:typeof t=="string"?U_(t)?Nm:Mn.test(t)?kC:$7:Array.isArray(t)?sM:typeof t=="object"?Mn.test(t)?kC:F7:Nm}function sM(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>$_(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function F7(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=$_(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function G7(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],c=t.values[o]??0;n[i]=c,r[a]++}return n}const $7=(t,e)=>{const n=Uo.createTransformer(e),r=Qf(t),i=Qf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Rx.has(t)&&!i.values.length||Rx.has(e)&&!r.values.length?B7(t,e):kh(sM(G7(r,i),i.values),n):Nm(t,e)};function oM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?sn(t,e,n):$_(t)(t,e)}const H7=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>en.update(e,n),stop:()=>Bo(e),now:()=>er.isProcessing?er.timestamp:Pr.now()}},lM=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Im=2e4;function H_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Im;)e+=n,r=t.next(e);return e>=Im?1/0:e}function q7(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(H_(r),Im);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:xi(i)}}const Y7=5;function cM(t,e,n){const r=Math.max(e-Y7,0);return FI(n-t(r),e-r)}const fn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yb=.001;function X7({duration:t=fn.duration,bounce:e=fn.bounce,velocity:n=fn.velocity,mass:r=fn.mass}){let i,a,o=1-e;o=Es(fn.minDamping,fn.maxDamping,o),t=Es(fn.minDuration,fn.maxDuration,xi(t)),o<1?(i=d=>{const h=d*o,g=h*t,m=h-n,b=kx(d,o),_=Math.exp(-g);return yb-m/b*_},a=d=>{const g=d*o*t,m=g*n+n,b=Math.pow(o,2)*Math.pow(d,2)*t,_=Math.exp(-g),w=kx(Math.pow(d,2),o);return(-i(d)+yb>0?-1:1)*((m-b)*_)/w}):(i=d=>{const h=Math.exp(-d*t),g=(d-n)*t+1;return-yb+h*g},a=d=>{const h=Math.exp(-d*t),g=(n-d)*(t*t);return h*g});const c=5/t,u=K7(i,a,c);if(t=Na(t),isNaN(u))return{stiffness:fn.stiffness,damping:fn.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const W7=12;function K7(t,e,n){let r=n;for(let i=1;i<W7;i++)r=r-t(r)/e(r);return r}function kx(t,e){return t*Math.sqrt(1-e*e)}const Q7=["duration","bounce"],Z7=["stiffness","damping","mass"];function DC(t,e){return e.some(n=>t[n]!==void 0)}function J7(t){let e={velocity:fn.velocity,stiffness:fn.stiffness,damping:fn.damping,mass:fn.mass,isResolvedFromDuration:!1,...t};if(!DC(t,Z7)&&DC(t,Q7))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Es(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:fn.mass,stiffness:i,damping:a}}else{const n=X7(t);e={...e,...n,mass:fn.mass},e.isResolvedFromDuration=!0}return e}function Mm(t=fn.visualDuration,e=fn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:h,duration:g,velocity:m,isResolvedFromDuration:b}=J7({...n,velocity:-xi(n.velocity||0)}),_=m||0,w=d/(2*Math.sqrt(u*h)),E=o-a,T=xi(Math.sqrt(u/h)),C=Math.abs(E)<5;r||(r=C?fn.restSpeed.granular:fn.restSpeed.default),i||(i=C?fn.restDelta.granular:fn.restDelta.default);let N;if(w<1){const j=kx(T,w);N=M=>{const A=Math.exp(-w*T*M);return o-A*((_+w*T*E)/j*Math.sin(j*M)+E*Math.cos(j*M))}}else if(w===1)N=j=>o-Math.exp(-T*j)*(E+(_+T*E)*j);else{const j=T*Math.sqrt(w*w-1);N=M=>{const A=Math.exp(-w*T*M),R=Math.min(j*M,300);return o-A*((_+w*T*E)*Math.sinh(R)+j*E*Math.cosh(R))/j}}const L={calculatedDuration:b&&g||null,next:j=>{const M=N(j);if(b)c.done=j>=g;else{let A=j===0?_:0;w<1&&(A=j===0?Na(_):cM(N,j,M));const R=Math.abs(A)<=r,D=Math.abs(o-M)<=i;c.done=R&&D}return c.value=c.done?o:M,c},toString:()=>{const j=Math.min(H_(L),Im),M=lM(A=>L.next(j*A).value,j,30);return j+"ms "+M},toTransition:()=>{}};return L}Mm.applyToOptions=t=>{const e=q7(t,100,Mm);return t.ease=e.ease,t.duration=Na(e.duration),t.type="keyframes",t};function Dx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:h}){const g=t[0],m={done:!1,value:g},b=R=>c!==void 0&&R<c||u!==void 0&&R>u,_=R=>c===void 0?u:u===void 0||Math.abs(c-R)<Math.abs(u-R)?c:u;let w=n*e;const E=g+w,T=o===void 0?E:o(E);T!==E&&(w=T-g);const C=R=>-w*Math.exp(-R/r),N=R=>T+C(R),L=R=>{const D=C(R),V=N(R);m.done=Math.abs(D)<=d,m.value=m.done?T:V};let j,M;const A=R=>{b(m.value)&&(j=R,M=Mm({keyframes:[m.value,_(m.value)],velocity:cM(N,R,m.value),damping:i,stiffness:a,restDelta:d,restSpeed:h}))};return A(0),{calculatedDuration:null,next:R=>{let D=!1;return!M&&j===void 0&&(D=!0,L(R),A(R)),j!==void 0&&R>=j?M.next(R-j):(!D&&L(R),m)}}}function eG(t,e,n){const r=[],i=n||Ts.mix||oM,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||_i:e;c=kh(u,c)}r.push(c)}return r}function tG(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(P_(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=eG(e,r,i),u=c.length,d=h=>{if(o&&h<t[0])return e[0];let g=0;if(u>1)for(;g<t.length-2&&!(h<t[g+1]);g++);const m=Wf(t[g],t[g+1],h);return c[g](m)};return n?h=>d(Es(t[0],t[a-1],h)):d}function nG(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Wf(0,e,r);t.push(sn(n,1,i))}}function rG(t){const e=[0];return nG(e,t.length-1),e}function iG(t,e){return t.map(n=>n*e)}function aG(t,e){return t.map(()=>e||QI).splice(0,t.length-1)}function Af({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=m7(r)?r.map(TC):TC(r),a={done:!1,value:e[0]},o=iG(n&&n.length===e.length?n:rG(e),t),c=tG(o,e,{ease:Array.isArray(i)?i:aG(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const sG=t=>t!==null;function q_(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(sG),c=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const oG={decay:Dx,inertia:Dx,tween:Af,keyframes:Af,spring:Mm};function uM(t){typeof t.type=="string"&&(t.type=oG[t.type])}class Y_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const lG=t=>t/100;class X_ extends Y_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Pr.now()&&this.tick(Pr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;uM(e);const{type:n=Af,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=n||Af;u!==Af&&typeof c[0]!="number"&&(this.mixKeyframes=kh(lG,oM(c[0],c[1])),c=[0,100]);const d=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=H_(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:g,repeatType:m,repeatDelay:b,type:_,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-d*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,L=r;if(g){const R=Math.min(this.currentTime,i)/c;let D=Math.floor(R),V=R%1;!V&&R>=1&&(V=1),V===1&&D--,D=Math.min(D,g+1),!!(D%2)&&(m==="reverse"?(V=1-V,b&&(V-=b/c)):m==="mirror"&&(L=o)),N=Es(0,1,V)*c}const j=C?{done:!1,value:h[0]}:L.next(N);a&&(j.value=a(j.value));let{done:M}=j;!C&&u!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return A&&_!==Dx&&(j.value=q_(h,this.options,E,this.speed)),w&&w(j.value),A&&this.finish(),j}then(e,n){return this.finished.then(e,n)}get duration(){return xi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+xi(e)}get time(){return xi(this.currentTime)}set time(e){e=Na(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=H7,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function cG(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const jl=t=>t*180/Math.PI,Nx=t=>{const e=jl(Math.atan2(t[1],t[0]));return Ix(e)},uG={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Nx,rotateZ:Nx,skewX:t=>jl(Math.atan(t[1])),skewY:t=>jl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Ix=t=>(t=t%360,t<0&&(t+=360),t),NC=Nx,IC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),MC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),dG={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:IC,scaleY:MC,scale:t=>(IC(t)+MC(t))/2,rotateX:t=>Ix(jl(Math.atan2(t[6],t[5]))),rotateY:t=>Ix(jl(Math.atan2(-t[2],t[0]))),rotateZ:NC,rotate:NC,skewX:t=>jl(Math.atan(t[4])),skewY:t=>jl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Mx(t){return t.includes("scale")?1:0}function Ox(t,e){if(!t||t==="none")return Mx(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=dG,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=uG,i=c}if(!i)return Mx(e);const a=r[e],o=i[1].split(",").map(hG);return typeof a=="function"?a(o):o[a]}const fG=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ox(n,e)};function hG(t){return parseFloat(t.trim())}const Wu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ku=new Set(Wu),OC=t=>t===Xu||t===Ze,pG=new Set(["x","y","z"]),gG=Wu.filter(t=>!pG.has(t));function mG(t){const e=[];return gG.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ul={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ox(e,"x"),y:(t,{transform:e})=>Ox(e,"y")};Ul.translateX=Ul.x;Ul.translateY=Ul.y;const Fl=new Set;let Px=!1,jx=!1,Vx=!1;function dM(){if(jx){const t=Array.from(Fl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=mG(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}jx=!1,Px=!1,Fl.forEach(t=>t.complete(Vx)),Fl.clear()}function fM(){Fl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(jx=!0)})}function vG(){Vx=!0,fM(),dM(),Vx=!1}class W_{constructor(e,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Fl.add(this),Px||(Px=!0,en.read(fM),en.resolveKeyframes(dM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}cG(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Fl.delete(this)}cancel(){this.state==="scheduled"&&(Fl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const yG=t=>t.startsWith("--");function bG(t,e,n){yG(e)?t.style.setProperty(e,n):t.style[e]=n}const xG=j_(()=>window.ScrollTimeline!==void 0),_G={};function wG(t,e){const n=j_(t);return()=>_G[e]??n()}const hM=wG(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,PC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pf([0,.65,.55,1]),circOut:pf([.55,0,1,.45]),backIn:pf([.31,.01,.66,-.59]),backOut:pf([.33,1.53,.69,.99])};function pM(t,e){if(t)return typeof t=="function"?hM()?lM(t,e):"ease-out":ZI(t)?pf(t):Array.isArray(t)?t.map(n=>pM(n,e)||PC.easeOut):PC[t]}function SG(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const g=pM(c,i);Array.isArray(g)&&(h.easing=g);const m={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function gM(t){return typeof t=="function"&&"applyToOptions"in t}function EG({type:t,...e}){return gM(t)&&hM()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class TG extends Y_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,P_(typeof e.type!="string");const d=EG(e);this.animation=SG(n,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=q_(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(h):bG(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return xi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+xi(e)}get time(){return xi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Na(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&xG()?(this.animation.timeline=e,_i):n(this)}}const mM={anticipate:XI,backInOut:YI,circInOut:KI};function AG(t){return t in mM}function CG(t){typeof t.ease=="string"&&AG(t.ease)&&(t.ease=mM[t.ease])}const jC=10;class RG extends TG{constructor(e){CG(e),uM(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new X_({...o,autoplay:!1}),u=Na(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-jC).value,c.sample(u).value,jC),c.stop()}}const VC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Uo.test(t)||t==="0")&&!t.startsWith("url("));function kG(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function DG(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=VC(i,e),c=VC(a,e);return!o||!c?!1:kG(t)||(n==="spring"||gM(n))&&r}function zx(t){t.duration=0,t.type="keyframes"}const NG=new Set(["opacity","clipPath","filter","transform"]),IG=j_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function MG(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return IG()&&n&&NG.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const OG=40;class PG extends Y_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:d,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Pr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:h,...g},b=h?.KeyframeResolver||W_;this.keyframeResolver=new b(c,(_,w,E)=>this.onKeyframesResolved(_,w,m,!E),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Pr.now(),DG(e,a,o,c)||((Ts.instantAnimations||!u)&&h?.(q_(e,r,n)),e[0]=e[e.length-1],zx(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>OG?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!d&&MG(m)?new RG({...m,element:m.motionValue.owner.current}):new X_(m);b.finished.then(()=>this.notifyFinished()).catch(_i),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),vG()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const jG=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VG(t){const e=jG.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function vM(t,e,n=1){const[r,i]=VG(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return LI(o)?parseFloat(o):o}return U_(i)?vM(i,e,n+1):i}function K_(t,e){return t?.[e]??t?.default??t}const yM=new Set(["width","height","top","left","right","bottom",...Wu]),zG={test:t=>t==="auto",parse:t=>t},bM=t=>e=>e.test(t),xM=[Xu,Ze,Ia,po,k7,R7,zG],zC=t=>xM.find(bM(t));function LG(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||UI(t):!0}const BG=new Set(["brightness","contrast","saturate","opacity"]);function UG(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(F_)||[];if(!r)return t;const i=n.replace(r,"");let a=BG.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const FG=/\b([a-z-]*)\(.*?\)/gu,Lx={...Uo,getAnimatableNone:t=>{const e=t.match(FG);return e?e.map(UG).join(" "):t}},LC={...Xu,transform:Math.round},GG={rotate:po,rotateX:po,rotateY:po,rotateZ:po,scale:wg,scaleX:wg,scaleY:wg,scaleZ:wg,skew:po,skewX:po,skewY:po,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:Kf,originX:AC,originY:AC,originZ:Ze},Q_={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,backgroundPositionX:Ze,backgroundPositionY:Ze,...GG,zIndex:LC,fillOpacity:Kf,strokeOpacity:Kf,numOctaves:LC},$G={...Q_,color:Mn,backgroundColor:Mn,outlineColor:Mn,fill:Mn,stroke:Mn,borderColor:Mn,borderTopColor:Mn,borderRightColor:Mn,borderBottomColor:Mn,borderLeftColor:Mn,filter:Lx,WebkitFilter:Lx},_M=t=>$G[t];function wM(t,e){let n=_M(t);return n!==Lx&&(n=Uo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const HG=new Set(["auto","none","0"]);function qG(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!HG.has(a)&&Qf(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=wM(n,i)}class YG extends W_{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),U_(d))){const h=vM(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!yM.has(r)||e.length!==2)return;const[i,a]=e,o=zC(i),c=zC(a);if(o!==c)if(OC(o)&&OC(c))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else Ul[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||LG(e[i]))&&r.push(i);r.length&&qG(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ul[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Ul[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function XG(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const SM=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function EM(t){return BI(t)&&"offsetHeight"in t}const BC=30,WG=t=>!isNaN(parseFloat(t));class KG{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Pr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=WG(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new V_);const r=this.events[e].add(n);return e==="change"?()=>{r(),en.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>BC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,BC);return FI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cu(t,e){return new KG(t,e)}const{schedule:Z_}=JI(queueMicrotask,!1),zi={x:!1,y:!1};function TM(){return zi.x||zi.y}function QG(t){return t==="x"||t==="y"?zi[t]?null:(zi[t]=!0,()=>{zi[t]=!1}):zi.x||zi.y?null:(zi.x=zi.y=!0,()=>{zi.x=zi.y=!1})}function AM(t,e){const n=XG(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function UC(t){return!(t.pointerType==="touch"||TM())}function ZG(t,e,n={}){const[r,i,a]=AM(t,n),o=c=>{if(!UC(c))return;const{target:u}=c,d=e(u,c);if(typeof d!="function"||!u)return;const h=g=>{UC(g)&&(d(g),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const CM=(t,e)=>e?t===e?!0:CM(t,e.parentElement):!1,J_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,JG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function e$(t){return JG.has(t.tagName)||t.tabIndex!==-1}const Zg=new WeakSet;function FC(t){return e=>{e.key==="Enter"&&t(e)}}function bb(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const t$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=FC(()=>{if(Zg.has(n))return;bb(n,"down");const i=FC(()=>{bb(n,"up")}),a=()=>bb(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function GC(t){return J_(t)&&!TM()}function n$(t,e,n={}){const[r,i,a]=AM(t,n),o=c=>{const u=c.currentTarget;if(!GC(c))return;Zg.add(u);const d=e(u,c),h=(b,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",m),Zg.has(u)&&Zg.delete(u),GC(b)&&typeof d=="function"&&d(b,{success:_})},g=b=>{h(b,u===window||u===document||n.useGlobalTarget||CM(u,b.target))},m=b=>{h(b,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",m,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),EM(c)&&(c.addEventListener("focus",d=>t$(d,i)),!e$(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function RM(t){return BI(t)&&"ownerSVGElement"in t}function r$(t){return RM(t)&&t.tagName==="svg"}const ur=t=>!!(t&&t.getVelocity),i$=[...xM,Mn,Uo],a$=t=>i$.find(bM(t)),ew=U.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function $C(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function s$(...t){return e=>{let n=!1;const r=t.map(i=>{const a=$C(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():$C(t[i],null)}}}}function o$(...t){return U.useCallback(s$(...t),t)}class l$ extends U.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=EM(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c$({children:t,isPresent:e,anchorX:n,root:r}){const i=U.useId(),a=U.useRef(null),o=U.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=U.useContext(ew),u=o$(a,t?.ref);return U.useInsertionEffect(()=>{const{width:d,height:h,top:g,left:m,right:b}=o.current;if(e||!a.current||!d||!h)return;const _=n==="left"?`left: ${m}`:`right: ${b}`;a.current.dataset.motionPopId=i;const w=document.createElement("style");c&&(w.nonce=c);const E=r??document.head;return E.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${g}px !important;
          }
        `),()=>{E.contains(w)&&E.removeChild(w)}},[e]),v.jsx(l$,{isPresent:e,childRef:a,sizeRef:o,children:U.cloneElement(t,{ref:u})})}const u$=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const d=A0(d$),h=U.useId();let g=!0,m=U.useMemo(()=>(g=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const _ of d.values())if(!_)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return a&&g&&(m={...m}),U.useMemo(()=>{d.forEach((b,_)=>d.set(_,!1))},[n]),U.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=v.jsx(c$,{isPresent:n,anchorX:c,root:u,children:t})),v.jsx(C0.Provider,{value:m,children:t})};function d$(){return new Map}function kM(t=!0){const e=U.useContext(C0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=U.useId();U.useEffect(()=>{if(t)return i(a)},[t]);const o=U.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const Sg=t=>t.key||"";function HC(t){const e=[];return U.Children.forEach(t,n=>{U.isValidElement(n)&&e.push(n)}),e}const ti=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[d,h]=kM(o),g=U.useMemo(()=>HC(t),[t]),m=o&&!d?[]:g.map(Sg),b=U.useRef(!0),_=U.useRef(g),w=A0(()=>new Map),[E,T]=U.useState(g),[C,N]=U.useState(g);I_(()=>{b.current=!1,_.current=g;for(let M=0;M<C.length;M++){const A=Sg(C[M]);m.includes(A)?w.delete(A):w.get(A)!==!0&&w.set(A,!1)}},[C,m.length,m.join("-")]);const L=[];if(g!==E){let M=[...g];for(let A=0;A<C.length;A++){const R=C[A],D=Sg(R);m.includes(D)||(M.splice(A,0,R),L.push(R))}return a==="wait"&&L.length&&(M=L),N(HC(M)),T(g),null}const{forceRender:j}=U.useContext(D_);return v.jsx(v.Fragment,{children:C.map(M=>{const A=Sg(M),R=o&&!d?!1:g===C||m.includes(A),D=()=>{if(w.has(A))w.set(A,!0);else return;let V=!0;w.forEach(P=>{P||(V=!1)}),V&&(j?.(),N(_.current),o&&h?.(),r&&r())};return v.jsx(u$,{isPresent:R,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:R?void 0:D,anchorX:c,children:M},A)})})},DM=U.createContext({strict:!1}),qC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ru={};for(const t in qC)Ru[t]={isEnabled:e=>qC[t].some(n=>!!e[n])};function f$(t){for(const e in t)Ru[e]={...Ru[e],...t[e]}}const h$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Om(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||h$.has(t)}let NM=t=>!Om(t);function p$(t){typeof t=="function"&&(NM=e=>e.startsWith("on")?!Om(e):t(e))}try{p$(require("@emotion/is-prop-valid").default)}catch{}function g$(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(NM(i)||n===!0&&Om(i)||!e&&!Om(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const R0=U.createContext({});function k0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Zf(t){return typeof t=="string"||Array.isArray(t)}const tw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nw=["initial",...tw];function D0(t){return k0(t.animate)||nw.some(e=>Zf(t[e]))}function IM(t){return!!(D0(t)||t.variants)}function m$(t,e){if(D0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Zf(n)?n:void 0,animate:Zf(r)?r:void 0}}return t.inherit!==!1?e:{}}function v$(t){const{initial:e,animate:n}=m$(t,U.useContext(R0));return U.useMemo(()=>({initial:e,animate:n}),[YC(e),YC(n)])}function YC(t){return Array.isArray(t)?t.join(" "):t}const Jf={};function y$(t){for(const e in t)Jf[e]=t[e],B_(e)&&(Jf[e].isCSSVariable=!0)}function MM(t,{layout:e,layoutId:n}){return Ku.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Jf[t]||t==="opacity")}const b$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},x$=Wu.length;function _$(t,e,n){let r="",i=!0;for(let a=0;a<x$;a++){const o=Wu[a],c=t[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const d=SM(c,Q_[o]);if(!u){i=!1;const h=b$[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function rw(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,c=!1;for(const u in e){const d=e[u];if(Ku.has(u)){o=!0;continue}else if(B_(u)){i[u]=d;continue}else{const h=SM(d,Q_[u]);u.startsWith("origin")?(c=!0,a[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=_$(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:d="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${d} ${h}`}}const iw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function OM(t,e,n){for(const r in e)!ur(e[r])&&!MM(r,n)&&(t[r]=e[r])}function w$({transformTemplate:t},e){return U.useMemo(()=>{const n=iw();return rw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function S$(t,e){const n=t.style||{},r={};return OM(r,n,t),Object.assign(r,w$(t,e)),r}function E$(t,e){const n={},r=S$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const T$={offset:"stroke-dashoffset",array:"stroke-dasharray"},A$={offset:"strokeDashoffset",array:"strokeDasharray"};function C$(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?T$:A$;t[a.offset]=Ze.transform(-r);const o=Ze.transform(e),c=Ze.transform(n);t[a.array]=`${o} ${c}`}function PM(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,d,h){if(rw(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:m}=t;g.transform&&(m.transform=g.transform,delete g.transform),(m.transform||g.transformOrigin)&&(m.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),i!==void 0&&C$(g,i,a,o,!1)}const jM=()=>({...iw(),attrs:{}}),VM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function R$(t,e,n,r){const i=U.useMemo(()=>{const a=jM();return PM(a,e,VM(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};OM(a,t.style,t),i.style={...a,...i.style}}return i}const k$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function aw(t){return typeof t!="string"||t.includes("-")?!1:!!(k$.indexOf(t)>-1||/[A-Z]/u.test(t))}function D$(t,e,n,{latestValues:r},i,a=!1){const c=(aw(t)?R$:E$)(e,r,i,t),u=g$(e,typeof t=="string",a),d=t!==U.Fragment?{...u,...c,ref:n}:{},{children:h}=e,g=U.useMemo(()=>ur(h)?h.get():h,[h]);return U.createElement(t,{...d,children:g})}function XC(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function sw(t,e,n,r){if(typeof e=="function"){const[i,a]=XC(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=XC(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Jg(t){return ur(t)?t.get():t}function N$({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:I$(n,r,i,t),renderState:e()}}function I$(t,e,n,r){const i={},a=r(t,{});for(const m in a)i[m]=Jg(a[m]);let{initial:o,animate:c}=t;const u=D0(t),d=IM(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const g=h?c:o;if(g&&typeof g!="boolean"&&!k0(g)){const m=Array.isArray(g)?g:[g];for(let b=0;b<m.length;b++){const _=sw(t,m[b]);if(_){const{transitionEnd:w,transition:E,...T}=_;for(const C in T){let N=T[C];if(Array.isArray(N)){const L=h?N.length-1:0;N=N[L]}N!==null&&(i[C]=N)}for(const C in w)i[C]=w[C]}}}return i}const zM=t=>(e,n)=>{const r=U.useContext(R0),i=U.useContext(C0),a=()=>N$(t,e,r,i);return n?a():A0(a)};function ow(t,e,n){const{style:r}=t,i={};for(const a in r)(ur(r[a])||e.style&&ur(e.style[a])||MM(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const M$=zM({scrapeMotionValuesFromProps:ow,createRenderState:iw});function LM(t,e,n){const r=ow(t,e,n);for(const i in t)if(ur(t[i])||ur(e[i])){const a=Wu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const O$=zM({scrapeMotionValuesFromProps:LM,createRenderState:jM}),P$=Symbol.for("motionComponentSymbol");function tu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function j$(t,e,n){return U.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):tu(n)&&(n.current=r))},[e])}const lw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),V$="framerAppearId",BM="data-"+lw(V$),UM=U.createContext({});function z$(t,e,n,r,i){const{visualElement:a}=U.useContext(R0),o=U.useContext(DM),c=U.useContext(C0),u=U.useContext(ew).reducedMotion,d=U.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,g=U.useContext(UM);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&L$(d.current,n,i,g);const m=U.useRef(!1);U.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const b=n[BM],_=U.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return I_(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),U.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),_.current=!1),h.enteringChildren=void 0)}),h}function L$(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:FM(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&tu(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function FM(t){if(t)return t.options.allowProjection!==!1?t.projection:FM(t.parent)}function xb(t,{forwardMotionProps:e=!1}={},n,r){n&&f$(n);const i=aw(t)?O$:M$;function a(c,u){let d;const h={...U.useContext(ew),...c,layoutId:B$(c)},{isStatic:g}=h,m=v$(c),b=i(c,g);if(!g&&N_){U$();const _=F$(h);d=_.MeasureLayout,m.visualElement=z$(t,b,h,r,_.ProjectionNode)}return v.jsxs(R0.Provider,{value:m,children:[d&&m.visualElement?v.jsx(d,{visualElement:m.visualElement,...h}):null,D$(t,c,j$(b,m.visualElement,u),b,g,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=U.forwardRef(a);return o[P$]=t,o}function B$({layoutId:t}){const e=U.useContext(D_).id;return e&&t!==void 0?e+"-"+t:t}function U$(t,e){U.useContext(DM).strict}function F$(t){const{drag:e,layout:n}=Ru;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function G$(t,e){if(typeof Proxy>"u")return xb;const n=new Map,r=(a,o)=>xb(a,o,t,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,xb(o,void 0,t,e)),n.get(o))})}function GM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function $$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function H$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function _b(t){return t===void 0||t===1}function Bx({scale:t,scaleX:e,scaleY:n}){return!_b(t)||!_b(e)||!_b(n)}function Rl(t){return Bx(t)||$M(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $M(t){return WC(t.x)||WC(t.y)}function WC(t){return t&&t!=="0%"}function Pm(t,e,n){const r=t-n,i=e*r;return n+i}function KC(t,e,n,r,i){return i!==void 0&&(t=Pm(t,i,r)),Pm(t,n,r)+e}function Ux(t,e=0,n=1,r,i){t.min=KC(t.min,e,n,r,i),t.max=KC(t.max,e,n,r,i)}function HM(t,{x:e,y:n}){Ux(t.x,e.translate,e.scale,e.originPoint),Ux(t.y,n.translate,n.scale,n.originPoint)}const QC=.999999999999,ZC=1.0000000000001;function q$(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=n[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ru(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,HM(t,o)),r&&Rl(a.latestValues)&&ru(t,a.latestValues))}e.x<ZC&&e.x>QC&&(e.x=1),e.y<ZC&&e.y>QC&&(e.y=1)}function nu(t,e){t.min=t.min+e,t.max=t.max+e}function JC(t,e,n,r,i=.5){const a=sn(t.min,t.max,i);Ux(t,e,n,a,r)}function ru(t,e){JC(t.x,e.x,e.scaleX,e.scale,e.originX),JC(t.y,e.y,e.scaleY,e.scale,e.originY)}function qM(t,e){return GM(H$(t.getBoundingClientRect(),e))}function Y$(t,e,n){const r=qM(t,n),{scroll:i}=e;return i&&(nu(r.x,i.offset.x),nu(r.y,i.offset.y)),r}const eR=()=>({translate:0,scale:1,origin:0,originPoint:0}),iu=()=>({x:eR(),y:eR()}),tR=()=>({min:0,max:0}),bn=()=>({x:tR(),y:tR()}),Fx={current:null},YM={current:!1};function X$(){if(YM.current=!0,!!N_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fx.current=t.matches;t.addEventListener("change",e),e()}else Fx.current=!1}const W$=new WeakMap;function K$(t,e,n){for(const r in e){const i=e[r],a=n[r];if(ur(i))t.addValue(r,i);else if(ur(a))t.addValue(r,Cu(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Cu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const nR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Q${scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=W_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Pr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,en.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=D0(n),this.isVariantNode=IM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in g){const b=g[m];u[m]!==void 0&&ur(b)&&b.set(u[m])}}mount(e){this.current=e,W$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),YM.current||X$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fx.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Bo(this.notifyUpdate),Bo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ku.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&en.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ru){const n=Ru[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<nR.length;r++){const i=nR[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=K$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Cu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(LI(r)||UI(r))?r=parseFloat(r):!a$(r)&&Uo.test(n)&&(r=wM(e,n)),this.setBaseTarget(e,ur(r)?r.get():r)),ur(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=sw(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ur(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new V_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Z_.render(this.render)}}class XM extends Q${constructor(){super(...arguments),this.KeyframeResolver=YG}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ur(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function WM(t,{style:e,vars:n},r,i){const a=t.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function Z$(t){return window.getComputedStyle(t)}class J$ extends XM{constructor(){super(...arguments),this.type="html",this.renderInstance=WM}readValueFromInstance(e,n){if(Ku.has(n))return this.projection?.isProjecting?Mx(n):fG(e,n);{const r=Z$(e),i=(B_(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qM(e,n)}build(e,n,r){rw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ow(e,n,r)}}const KM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eH(t,e,n,r){WM(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(KM.has(i)?i:lw(i),e.attrs[i])}class tH extends XM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ku.has(n)){const r=_M(n);return r&&r.default||0}return n=KM.has(n)?n:lw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return LM(e,n,r)}build(e,n,r){PM(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){eH(e,n,r,i)}mount(e){this.isSVGTag=VM(e.tagName),super.mount(e)}}const nH=(t,e)=>aw(t)?new tH(e):new J$(e,{allowProjection:t!==U.Fragment});function mu(t,e,n){const r=t.getProps();return sw(r,e,n!==void 0?n:r.custom,t)}const Gx=t=>Array.isArray(t);function rH(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Cu(n))}function iH(t){return Gx(t)?t[t.length-1]||0:t}function cw(t,e){const n=mu(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const c=iH(a[o]);rH(t,o,c)}}function aH(t){return!!(ur(t)&&t.add)}function $x(t,e){const n=t.getValue("willChange");if(aH(n))return n.add(e);if(!n&&Ts.WillChange){const r=new Ts.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function QM(t){return t.props[BM]}const sH=t=>t!==null;function oH(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(sH),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const lH={type:"spring",stiffness:500,damping:25,restSpeed:10},cH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),uH={type:"keyframes",duration:.8},dH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fH=(t,{keyframes:e})=>e.length>2?uH:Ku.has(t)?t.startsWith("scale")?cH(e[1]):lH:dH;function hH({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const uw=(t,e,n,r={},i,a)=>o=>{const c=K_(r,t)||{},u=c.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Na(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};hH(c)||Object.assign(h,fH(t,h)),h.duration&&(h.duration=Na(h.duration)),h.repeatDelay&&(h.repeatDelay=Na(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(zx(h),h.delay===0&&(g=!0)),(Ts.instantAnimations||Ts.skipAnimations)&&(g=!0,zx(h),h.delay=0),h.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const m=oH(h.keyframes,c);if(m!==void 0){en.update(()=>{h.onUpdate(m),h.onComplete()});return}}return c.isSync?new X_(h):new PG(h)};function pH({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function ZM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in c){const g=t.getValue(h,t.latestValues[h]??null),m=c[h];if(m===void 0||d&&pH(d,h))continue;const b={delay:n,...K_(a||{},h)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(m)&&m===_&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const T=QM(t);if(T){const C=window.MotionHandoffAnimation(T,h,en);C!==null&&(b.startTime=C,w=!0)}}$x(t,h),g.start(uw(h,g,m,t.shouldReduceMotion&&yM.has(h)?{type:!1}:b,t,w));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{en.update(()=>{o&&cw(t,o)})}),u}function JM(t,e,n,r=0,i=1){const a=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,c=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:c-a*r}function Hx(t,e,n={}){const r=mu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(ZM(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:g}=i;return gH(t,e,u,d,h,g,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function gH(t,e,n=0,r=0,i=0,a=1,o){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(Hx(u,e,{...o,delay:n+(typeof r=="function"?0:r)+JM(t.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function e4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Hx(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Hx(t,e,n);else{const i=typeof e=="function"?mu(t,e,n.custom):e;r=Promise.all(ZM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function t4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const mH=nw.length;function n4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?n4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<mH;n++){const r=nw[n],i=t.props[r];(Zf(i)||i===!1)&&(e[r]=i)}return e}const vH=[...tw].reverse(),yH=tw.length;function bH(t){return e=>Promise.all(e.map(({animation:n,options:r})=>e4(t,n,r)))}function xH(t){let e=bH(t),n=rR(),r=!0;const i=u=>(d,h)=>{const g=mu(t,h,u==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:m,transitionEnd:b,..._}=g;d={...d,..._,...b}}return d};function a(u){e=u(t)}function o(u){const{props:d}=t,h=n4(t.parent)||{},g=[],m=new Set;let b={},_=1/0;for(let E=0;E<yH;E++){const T=vH[E],C=n[T],N=d[T]!==void 0?d[T]:h[T],L=Zf(N),j=T===u?C.isActive:null;j===!1&&(_=E);let M=N===h[T]&&N!==d[T]&&L;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),C.protectedKeys={...b},!C.isActive&&j===null||!N&&!C.prevProp||k0(N)||typeof N=="boolean")continue;const A=_H(C.prevProp,N);let R=A||T===u&&C.isActive&&!M&&L||E>_&&L,D=!1;const V=Array.isArray(N)?N:[N];let P=V.reduce(i(T),{});j===!1&&(P={});const{prevResolvedValues:B={}}=C,O={...B,...P},W=K=>{R=!0,m.has(K)&&(D=!0,m.delete(K)),C.needsAnimating[K]=!0;const ee=t.getValue(K);ee&&(ee.liveStyle=!1)};for(const K in O){const ee=P[K],ie=B[K];if(b.hasOwnProperty(K))continue;let q=!1;Gx(ee)&&Gx(ie)?q=!t4(ee,ie):q=ee!==ie,q?ee!=null?W(K):m.add(K):ee!==void 0&&m.has(K)?W(K):C.protectedKeys[K]=!0}C.prevProp=N,C.prevResolvedValues=P,C.isActive&&(b={...b,...P}),r&&t.blockInitialAnimation&&(R=!1);const X=M&&A;R&&(!X||D)&&g.push(...V.map(K=>{const ee={type:T};if(typeof K=="string"&&r&&!X&&t.manuallyAnimateOnMount&&t.parent){const{parent:ie}=t,q=mu(ie,K);if(ie.enteringChildren&&q){const{delayChildren:F}=q.transition||{};ee.delay=JM(ie.enteringChildren,t,F)}}return{animation:K,options:ee}}))}if(m.size){const E={};if(typeof d.initial!="boolean"){const T=mu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);T&&T.transition&&(E.transition=T.transition)}m.forEach(T=>{const C=t.getBaseTarget(T),N=t.getValue(T);N&&(N.liveStyle=!0),E[T]=C??null}),g.push({animation:E})}let w=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(g):Promise.resolve()}function c(u,d){if(n[u].isActive===d)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=rR()}}}function _H(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!t4(e,t):!1}function Tl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rR(){return{animate:Tl(!0),whileInView:Tl(),whileHover:Tl(),whileTap:Tl(),whileDrag:Tl(),whileFocus:Tl(),exit:Tl()}}class Wo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wH extends Wo{constructor(e){super(e),e.animationState||(e.animationState=xH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();k0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let SH=0;class EH extends Wo{constructor(){super(...arguments),this.id=SH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const TH={animation:{Feature:wH},exit:{Feature:EH}};function eh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ih(t){return{point:{x:t.pageX,y:t.pageY}}}const AH=t=>e=>J_(e)&&t(e,Ih(e));function Cf(t,e,n,r){return eh(t,e,AH(n),r)}const r4=1e-4,CH=1-r4,RH=1+r4,i4=.01,kH=0-i4,DH=0+i4;function xr(t){return t.max-t.min}function NH(t,e,n){return Math.abs(t-e)<=n}function iR(t,e,n,r=.5){t.origin=r,t.originPoint=sn(e.min,e.max,t.origin),t.scale=xr(n)/xr(e),t.translate=sn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=CH&&t.scale<=RH||isNaN(t.scale))&&(t.scale=1),(t.translate>=kH&&t.translate<=DH||isNaN(t.translate))&&(t.translate=0)}function Rf(t,e,n,r){iR(t.x,e.x,n.x,r?r.originX:void 0),iR(t.y,e.y,n.y,r?r.originY:void 0)}function aR(t,e,n){t.min=n.min+e.min,t.max=t.min+xr(e)}function IH(t,e,n){aR(t.x,e.x,n.x),aR(t.y,e.y,n.y)}function sR(t,e,n){t.min=e.min-n.min,t.max=t.min+xr(e)}function kf(t,e,n){sR(t.x,e.x,n.x),sR(t.y,e.y,n.y)}function vi(t){return[t("x"),t("y")]}const a4=({current:t})=>t?t.ownerDocument.defaultView:null,oR=(t,e)=>Math.abs(t-e);function MH(t,e){const n=oR(t.x,e.x),r=oR(t.y,e.y);return Math.sqrt(n**2+r**2)}class s4{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Sb(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=MH(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!_)return;const{point:w}=m,{timestamp:E}=er;this.history.push({...w,timestamp:E});const{onStart:T,onMove:C}=this.handlers;b||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=wb(b,this.transformPagePoint),en.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:_,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Sb(m.type==="pointercancel"?this.lastMoveEventInfo:wb(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,T),w&&w(m,T)},!J_(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=Ih(e),u=wb(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=er;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,Sb(u,this.history)),this.removeListeners=kh(Cf(this.contextWindow,"pointermove",this.handlePointerMove),Cf(this.contextWindow,"pointerup",this.handlePointerUp),Cf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Bo(this.updatePoint)}}function wb(t,e){return e?{point:e(t.point)}:t}function lR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sb({point:t},e){return{point:t,delta:lR(t,o4(e)),offset:lR(t,OH(e)),velocity:PH(e,.1)}}function OH(t){return t[0]}function o4(t){return t[t.length-1]}function PH(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=o4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Na(e)));)n--;if(!r)return{x:0,y:0};const a=xi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function jH(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?sn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?sn(n,t,r.max):Math.min(t,n)),t}function cR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function VH(t,{top:e,left:n,bottom:r,right:i}){return{x:cR(t.x,n,i),y:cR(t.y,e,r)}}function uR(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function zH(t,e){return{x:uR(t.x,e.x),y:uR(t.y,e.y)}}function LH(t,e){let n=.5;const r=xr(t),i=xr(e);return i>r?n=Wf(e.min,e.max-r,t.min):r>i&&(n=Wf(t.min,t.max-i,e.min)),Es(0,1,n)}function BH(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qx=.35;function UH(t=qx){return t===!1?t=0:t===!0&&(t=qx),{x:dR(t,"left","right"),y:dR(t,"top","bottom")}}function dR(t,e,n){return{min:fR(t,e),max:fR(t,n)}}function fR(t,e){return typeof t=="number"?t:t[e]||0}const FH=new WeakMap;class GH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ih(g).point)},o=(g,m)=>{const{drag:b,dragPropagation:_,onDragStart:w}=this.getProps();if(b&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=QG(b),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vi(T=>{let C=this.getAxisMotionValue(T).get()||0;if(Ia.test(C)){const{projection:N}=this.visualElement;if(N&&N.layout){const L=N.layout.layoutBox[T];L&&(C=xr(L)*(parseFloat(C)/100))}}this.originPoint[T]=C}),w&&en.postRender(()=>w(g,m)),$x(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:_,onDirectionLock:w,onDrag:E}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:T}=m;if(_&&this.currentDirection===null){this.currentDirection=$H(T),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),E&&E(g,m)},u=(g,m)=>{this.latestPointerEvent=g,this.latestPanInfo=m,this.stop(g,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>vi(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new s4(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:a4(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&en.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Eg(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=jH(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&tu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=VH(r.layoutBox,e):this.constraints=!1,this.elastic=UH(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=BH(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!tu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Y$(r,i.root,this.visualElement.getTransformPagePoint());let o=zH(i.layout.layoutBox,a);if(n){const c=n($$(o));this.hasMutatedConstraints=!!c,c&&(o=GM(c))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},d=vi(h=>{if(!Eg(h,n,this.currentDirection))return;let g=u&&u[h]||{};o&&(g={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(h,_)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $x(this.visualElement,e),r.start(uw(e,r,0,n,this.visualElement,!1))}stopAnimation(){vi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){vi(n=>{const{drag:r}=this.getProps();if(!Eg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[n];a.set(e[n]-sn(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};vi(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=LH({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vi(o=>{if(!Eg(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];c.set(sn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;FH.set(this.visualElement,this);const e=this.visualElement.current,n=Cf(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();tu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),en.read(r);const o=eh(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(vi(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=u[h].translate,g.set(g.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=qx,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Eg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $H(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class HH extends Wo{constructor(e){super(e),this.removeGroupControls=_i,this.removeListeners=_i,this.controls=new GH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_i}unmount(){this.removeGroupControls(),this.removeListeners()}}const hR=t=>(e,n)=>{t&&en.postRender(()=>t(e,n))};class qH extends Wo{constructor(){super(...arguments),this.removePointerDownListener=_i}onPointerDown(e){this.session=new s4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:a4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:hR(e),onStart:hR(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&en.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Cf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const em={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const af={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ze.test(t))t=parseFloat(t);else return t;const n=pR(t,e.target.x),r=pR(t,e.target.y);return`${n}% ${r}%`}},YH={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Uo.parse(t);if(i.length>5)return r;const a=Uo.createTransformer(t),o=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const d=sn(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};let Eb=!1;class XH extends U.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;y$(WH),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),Eb&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),em.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,Eb=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||en.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Z_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Eb=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function l4(t){const[e,n]=kM(),r=U.useContext(D_);return v.jsx(XH,{...t,layoutGroup:r,switchLayoutGroup:U.useContext(UM),isPresent:e,safeToRemove:n})}const WH={borderRadius:{...af,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:af,borderTopRightRadius:af,borderBottomLeftRadius:af,borderBottomRightRadius:af,boxShadow:YH};function KH(t,e,n){const r=ur(t)?t:Cu(t);return r.start(uw("",r,e,n)),r.animation}const QH=(t,e)=>t.depth-e.depth;class ZH{constructor(){this.children=[],this.isDirty=!1}add(e){M_(this.children,e),this.isDirty=!0}remove(e){O_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(QH),this.isDirty=!1,this.children.forEach(e)}}function JH(t,e){const n=Pr.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Bo(r),t(a-e))};return en.setup(r,!0),()=>Bo(r)}const c4=["TopLeft","TopRight","BottomLeft","BottomRight"],eq=c4.length,gR=t=>typeof t=="string"?parseFloat(t):t,mR=t=>typeof t=="number"||Ze.test(t);function tq(t,e,n,r,i,a){i?(t.opacity=sn(0,n.opacity??1,nq(r)),t.opacityExit=sn(e.opacity??1,0,rq(r))):a&&(t.opacity=sn(e.opacity??1,n.opacity??1,r));for(let o=0;o<eq;o++){const c=`border${c4[o]}Radius`;let u=vR(e,c),d=vR(n,c);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||mR(u)===mR(d)?(t[c]=Math.max(sn(gR(u),gR(d),r),0),(Ia.test(d)||Ia.test(u))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=sn(e.rotate||0,n.rotate||0,r))}function vR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const nq=u4(0,.5,WI),rq=u4(.5,.95,_i);function u4(t,e,n){return r=>r<t?0:r>e?1:n(Wf(t,e,r))}function yR(t,e){t.min=e.min,t.max=e.max}function gi(t,e){yR(t.x,e.x),yR(t.y,e.y)}function bR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function xR(t,e,n,r,i){return t-=e,t=Pm(t,1/n,r),i!==void 0&&(t=Pm(t,1/i,r)),t}function iq(t,e=0,n=1,r=.5,i,a=t,o=t){if(Ia.test(e)&&(e=parseFloat(e),e=sn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=sn(a.min,a.max,r);t===a&&(c-=e),t.min=xR(t.min,e,n,c,i),t.max=xR(t.max,e,n,c,i)}function _R(t,e,[n,r,i],a,o){iq(t,e[n],e[r],e[i],e.scale,a,o)}const aq=["x","scaleX","originX"],sq=["y","scaleY","originY"];function wR(t,e,n,r){_R(t.x,e,aq,n?n.x:void 0,r?r.x:void 0),_R(t.y,e,sq,n?n.y:void 0,r?r.y:void 0)}function SR(t){return t.translate===0&&t.scale===1}function d4(t){return SR(t.x)&&SR(t.y)}function ER(t,e){return t.min===e.min&&t.max===e.max}function oq(t,e){return ER(t.x,e.x)&&ER(t.y,e.y)}function TR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function f4(t,e){return TR(t.x,e.x)&&TR(t.y,e.y)}function AR(t){return xr(t.x)/xr(t.y)}function CR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class lq{constructor(){this.members=[]}add(e){M_(this.members,e),e.scheduleRender()}remove(e){if(O_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cq(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:g,rotateY:m,skewX:b,skewY:_}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),g&&(r+=`rotateX(${g}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),_&&(r+=`skewY(${_}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const Tb=["","X","Y","Z"],uq=1e3;let dq=0;function Ab(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function h4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=QM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",en,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&h4(r)}function p4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=dq++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(pq),this.nodes.forEach(yq),this.nodes.forEach(bq),this.nodes.forEach(gq)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZH)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new V_),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=RM(o)&&!r$(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let h,g=0;const m=()=>this.root.updateBlockedByResize=!1;en.read(()=>{g=window.innerWidth}),t(o,()=>{const b=window.innerWidth;b!==g&&(g=b,this.root.updateBlockedByResize=!0,h&&h(),h=JH(m,250),em.hasAnimatedSinceResize&&(em.hasAnimatedSinceResize=!1,this.nodes.forEach(DR)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||d.getDefaultTransition()||Eq,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=d.getProps(),T=!this.targetLayout||!f4(this.targetLayout,b),C=!g&&m;if(this.options.layoutRoot||this.resumeFrom||C||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...K_(_,"layout"),onPlay:w,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(h,C)}else g||DR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Bo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xq),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&h4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(RR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(vq),this.nodes.forEach(fq),this.nodes.forEach(hq)):this.nodes.forEach(kR),this.clearAllSnapshots();const c=Pr.now();er.delta=Es(0,1e3/60,c-er.timestamp),er.timestamp=c,er.isProcessing=!0,pb.update.process(er),pb.preRender.process(er),pb.render.process(er),er.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Z_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mq),this.sharedNodes.forEach(_q)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,en.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){en.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xr(this.snapshot.measuredBox.x)&&!xr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!d4(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Rl(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),Tq(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return bn();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Aq))){const{scroll:d}=this.root;d&&(nu(c.x,d.offset.x),nu(c.y,d.offset.y))}return c}removeElementScroll(o){const c=bn();if(gi(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:g}=d;d!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&gi(c,o),nu(c.x,h.offset.x),nu(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const u=bn();gi(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!c&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ru(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Rl(h.latestValues)&&ru(u,h.latestValues)}return Rl(this.latestValues)&&ru(u,this.latestValues),u}removeTransform(o){const c=bn();gi(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Rl(d.latestValues))continue;Bx(d.latestValues)&&d.updateSnapshot();const h=bn(),g=d.measurePageBox();gi(h,g),wR(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Rl(this.latestValues)&&wR(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==er.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=er.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),kf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bn(),this.targetWithTransforms=bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),IH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gi(this.target,this.layout.layoutBox),HM(this.target,this.targetDelta)):gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),kf(this.relativeTargetOrigin,this.target,m.target),gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Bx(this.parent.latestValues)||$M(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===er.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;gi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,m=this.treeScale.y;q$(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=bn());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bR(this.prevProjectionDelta.x,this.projectionDelta.x),bR(this.prevProjectionDelta.y,this.projectionDelta.y)),Rf(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==m||!CR(this.projectionDelta.x,this.prevProjectionDelta.x)||!CR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iu(),this.projectionDelta=iu(),this.projectionDeltaWithTransform=iu()}setAnimationOrigin(o,c=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},g=iu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=bn(),b=u?u.source:void 0,_=this.layout?this.layout.source:void 0,w=b!==_,E=this.getStack(),T=!E||E.members.length<=1,C=!!(w&&!T&&this.options.crossfade===!0&&!this.path.some(Sq));this.animationProgress=0;let N;this.mixTargetDelta=L=>{const j=L/1e3;NR(g.x,o.x,j),NR(g.y,o.y,j),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wq(this.relativeTarget,this.relativeTargetOrigin,m,j),N&&oq(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=bn()),gi(N,this.relativeTarget)),w&&(this.animationValues=h,tq(h,d,this.latestValues,j,C,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Bo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=en.update(()=>{em.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cu(0)),this.currentAnimation=KH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:d,latestValues:h}=o;if(!(!c||!u||!d)){if(this!==o&&this.layout&&d&&g4(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||bn();const g=xr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const m=xr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}gi(c,u),ru(c,h),Rf(this.projectionDeltaWithTransform,this.layoutCorrected,c,h)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new lq),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const d={};u.z&&Ab("z",o,d,this.animationValues);for(let h=0;h<Tb.length;h++)Ab(`rotate${Tb[h]}`,o,d,this.animationValues),Ab(`skew${Tb[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Jg(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Jg(c?.pointerEvents)||""),this.hasProjected&&!Rl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let g=cq(this.projectionDeltaWithTransform,this.treeScale,h);u&&(g=u(h,g)),o.transform=g;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in Jf){if(h[_]===void 0)continue;const{correct:w,applyTo:E,isCSSVariable:T}=Jf[_],C=g==="none"?h[_]:w(h[_],d);if(E){const N=E.length;for(let L=0;L<N;L++)o[E[L]]=C}else T?this.options.visualElement.renderState.vars[_]=C:o[_]=C}this.options.layoutId&&(o.pointerEvents=d===this?Jg(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(RR),this.root.sharedNodes.clear()}}}function fq(t){t.updateLayout()}function hq(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?vi(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=xr(g);g.min=n[h].min,g.max=g.min+m}):g4(i,e.layoutBox,n)&&vi(h=>{const g=a?e.measuredBox[h]:e.layoutBox[h],m=xr(n[h]);g.max=g.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const o=iu();Rf(o,n,e.layoutBox);const c=iu();a?Rf(c,t.applyTransform(r,!0),e.measuredBox):Rf(c,n,e.layoutBox);const u=!d4(o);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:m}=h;if(g&&m){const b=bn();kf(b,e.layoutBox,g.layoutBox);const _=bn();kf(_,n,m.layoutBox),f4(b,_)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function pq(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function gq(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mq(t){t.clearSnapshot()}function RR(t){t.clearMeasurements()}function kR(t){t.isLayoutDirty=!1}function vq(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function yq(t){t.resolveTargetDelta()}function bq(t){t.calcProjection()}function xq(t){t.resetSkewAndRotation()}function _q(t){t.removeLeadSnapshot()}function NR(t,e,n){t.translate=sn(e.translate,0,n),t.scale=sn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function IR(t,e,n,r){t.min=sn(e.min,n.min,r),t.max=sn(e.max,n.max,r)}function wq(t,e,n,r){IR(t.x,e.x,n.x,r),IR(t.y,e.y,n.y,r)}function Sq(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Eq={duration:.45,ease:[.4,0,.1,1]},MR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),OR=MR("applewebkit/")&&!MR("chrome/")?Math.round:_i;function PR(t){t.min=OR(t.min),t.max=OR(t.max)}function Tq(t){PR(t.x),PR(t.y)}function g4(t,e,n){return t==="position"||t==="preserve-aspect"&&!NH(AR(e),AR(n),.2)}function Aq(t){return t!==t.root&&t.scroll?.wasRoot}const Cq=p4({attachResizeListener:(t,e)=>eh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cb={current:void 0},m4=p4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Cb.current){const t=new Cq({});t.mount(window),t.setOptions({layoutScroll:!0}),Cb.current=t}return Cb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Rq={pan:{Feature:qH},drag:{Feature:HH,ProjectionNode:m4,MeasureLayout:l4}};function jR(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&en.postRender(()=>a(e,Ih(e)))}class kq extends Wo{mount(){const{current:e}=this.node;e&&(this.unmount=ZG(e,(n,r)=>(jR(this.node,r,"Start"),i=>jR(this.node,i,"End"))))}unmount(){}}class Dq extends Wo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kh(eh(this.node.current,"focus",()=>this.onFocus()),eh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function VR(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&en.postRender(()=>a(e,Ih(e)))}class Nq extends Wo{mount(){const{current:e}=this.node;e&&(this.unmount=n$(e,(n,r)=>(VR(this.node,r,"Start"),(i,{success:a})=>VR(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Yx=new WeakMap,Rb=new WeakMap,Iq=t=>{const e=Yx.get(t.target);e&&e(t)},Mq=t=>{t.forEach(Iq)};function Oq({root:t,...e}){const n=t||document;Rb.has(n)||Rb.set(n,{});const r=Rb.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Mq,{root:t,...e})),r[i]}function Pq(t,e,n){const r=Oq(e);return Yx.set(t,n),r.observe(t),()=>{Yx.delete(t),r.unobserve(t)}}const jq={some:0,all:1};class Vq extends Wo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:jq[i]},c=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),m=d?h:g;m&&m(u)};return Pq(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zq(e,n))&&this.startObserver()}unmount(){}}function zq({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Lq={inView:{Feature:Vq},tap:{Feature:Nq},focus:{Feature:Dq},hover:{Feature:kq}},Bq={layout:{ProjectionNode:m4,MeasureLayout:l4}},Uq={...TH,...Lq,...Rq,...Bq},pn=G$(Uq,nH);function Fq(t){t.values.forEach(e=>e.stop())}function Xx(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&cw(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{Xx(a,e)})})}function Gq(t,e){if(Array.isArray(e))return Xx(t,e);if(typeof e=="string")return Xx(t,[e]);cw(t,e)}function $q(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(e4(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{Gq(r,n)})},stop(){t.forEach(n=>{Fq(n)})},mount(){return()=>{e.stop()}}};return e}function Hq(){const t=A0($q);return I_(t.mount,[]),t}const qq=Hq,rc=G1((t,e)=>({message:"",type:"neutral",isVisible:!1,undoAction:void 0,showToast:(n,r="neutral",i)=>{t({message:n,type:r,isVisible:!0,undoAction:i}),setTimeout(()=>{e().hideToast()},2e3)},hideToast:()=>{t({isVisible:!1})}})),Yq=()=>{const{message:t,type:e,isVisible:n,undoAction:r,hideToast:i}=rc(),a=()=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600 text-white";case"error":return"bg-red-500 dark:bg-red-600 text-white";case"neutral":default:return"bg-gray-800 dark:bg-gray-900 text-white border border-gray-200 dark:border-gray-700"}};return v.jsx(ti,{children:n&&v.jsx(pn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-24 right-6 z-[110] max-w-xs",children:v.jsxs("div",{className:`rounded-lg shadow-lg p-3 flex items-center justify-between ${a()}`,children:[v.jsx("div",{className:"flex items-center flex-1 min-w-0",children:v.jsx("span",{className:"text-xs font-medium whitespace-pre-line pr-2",children:t})}),v.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[r&&v.jsxs("button",{onClick:()=>{r(),i()},className:"px-2 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-bold transition-colors",children:[v.jsx(kB,{size:12,className:"inline mr-1"}),"Undo"]}),v.jsx("button",{onClick:i,className:"p-0.5 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:v.jsx(a0,{size:14})})]})]})})})};class Li extends U.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n)}componentDidUpdate(e){this.props.resetKeys&&this.props.resetOnPropsChange&&this.props.resetKeys.some((r,i)=>r!==e.resetKeys?.[i])&&this.state.hasError&&this.resetErrorBoundary()}resetErrorBoundary=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:v.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[v.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 dark:bg-red-900/30 rounded-full",children:v.jsx(pu,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Something went wrong"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"We're sorry, but something unexpected happened. You can try refreshing or going back to the home screen."}),!1,v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:this.resetErrorBoundary,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md transition-colors",children:[v.jsx(Bf,{className:"h-4 w-4"}),"Try Again"]}),v.jsxs("button",{onClick:()=>window.location.href="/#/",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[v.jsx(J9,{className:"h-4 w-4"}),"Go to Home"]})]})]})}):this.props.children}}const Xq=({onAddTransaction:t})=>{const e=Ba(),n=ea(),[r,i]=U.useState(!1),a=U.useRef(null),o=d=>n.pathname===d;U.useEffect(()=>{const d=h=>{a.current&&!a.current.contains(h.target)&&i(!1)};if(r)return document.addEventListener("mousedown",d),document.addEventListener("touchstart",d),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("touchstart",d)}},[r]);const c=[{path:"/reports",icon:v.jsx(w9,{className:"w-5 h-5"}),label:"Reports"},{path:"/analytics",icon:v.jsx(vm,{className:"w-5 h-5"}),label:"Analytics"},{path:"/budget-breakdown",icon:v.jsx(E9,{className:"w-5 h-5"}),label:"Budget Breakdown"}],u=({path:d,icon:h,label:g})=>{const m=o(d);return v.jsxs("button",{onClick:b=>{b.stopPropagation(),e(d)},className:`
          relative group flex flex-col items-center justify-center
          w-12 h-12 rounded-2xl transition-all duration-300
          ${m?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
        `,children:[v.jsx("div",{className:`transition-transform duration-300 ${m?"scale-110":"group-hover:scale-105"}`,children:h}),v.jsx("span",{className:"sr-only",children:g}),m&&v.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]})};return v.jsx("div",{className:"fixed bottom-6 left-0 right-0 flex justify-center z-[100] pointer-events-none safe-area-inset-bottom",children:v.jsxs("nav",{className:`
          pointer-events-auto
          flex items-center gap-1 p-2 pl-4 pr-4
          bg-white/60 dark:bg-zinc-900/60 backdrop-blur-xl
          border border-zinc-200/30 dark:border-zinc-800/30
          rounded-full shadow-2xl shadow-zinc-900/10
          transform transition-all duration-500 ease-out
        `,onClick:d=>d.stopPropagation(),onTouchStart:d=>d.stopPropagation(),onTouchEnd:d=>d.stopPropagation(),children:[v.jsx(u,{path:"/",label:"Budget",icon:v.jsx(i0,{className:"w-6 h-6"})}),v.jsx(u,{path:"/transactions",label:"Transactions",icon:v.jsx(tB,{className:"w-6 h-6"})}),v.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),v.jsx("button",{onClick:d=>{if(d.stopPropagation(),i(!1),t){t();return}e("/add-transaction")},className:`
            -mt-8 mb-2 mx-1
            group relative flex items-center justify-center
            w-16 h-16 rounded-full
            bg-blue-600 text-white
            shadow-xl shadow-blue-600/30
            hover:shadow-blue-600/50 hover:scale-105 hover:-translate-y-1
            active:scale-95 active:translate-y-0
            transition-all duration-300 cubic-bezier(0.175, 0.885, 0.32, 1.275)
          `,children:v.jsx(yh,{className:"w-8 h-8 transition-transform duration-300 group-hover:rotate-90"})}),v.jsx("div",{className:"w-px h-8 bg-zinc-200 dark:bg-zinc-800 mx-2"}),v.jsxs("div",{className:"relative",ref:a,children:[v.jsxs("button",{onClick:d=>{d.stopPropagation(),i(!r)},className:`
              relative group flex flex-col items-center justify-center
              w-12 h-12 rounded-2xl transition-all duration-300
              ${r?"text-blue-500 bg-blue-50 dark:bg-blue-500/20 dark:text-blue-400":"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800"}
            `,children:[v.jsx("div",{className:`transition-transform duration-300 ${r?"scale-110":"group-hover:scale-105"}`,children:v.jsx(B9,{className:"w-6 h-6"})}),v.jsx("span",{className:"sr-only",children:"More"}),r&&v.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-current rounded-full opacity-80"})]}),r&&v.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white dark:bg-zinc-900 rounded-2xl shadow-2xl border border-zinc-200/50 dark:border-zinc-800/50 backdrop-blur-xl z-50 overflow-hidden",onClick:d=>d.stopPropagation(),onTouchStart:d=>d.stopPropagation(),onTouchEnd:d=>d.stopPropagation(),children:v.jsx("div",{className:"p-2 space-y-1",children:c.map((d,h)=>v.jsxs("button",{onClick:g=>{g.stopPropagation(),e(d.path),i(!1)},className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[v.jsx("div",{className:"text-zinc-600 dark:text-zinc-400",children:d.icon}),v.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:d.label})]},h))})})]}),v.jsx(u,{path:"/settings",label:"Settings",icon:v.jsx(yB,{className:"w-6 h-6"})})]})})};function Wq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Kq(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function ms(t,e){return function(n){n&&(t[e]=n)}}function v4(t,e,n){return function(r){r&&(t[e][n]=r)}}function zR(t,e){return function(n){var r=n.prototype;t.forEach(function(i){e(r,i)})}}function Qq(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var a=e[i]||i;a in n||(n[a]=function(){for(var o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=(o=this[r])[i].apply(o,c);return d===this[r]?this:d})})}}var Zq="function",Jq="object",eY="string",tY="number",dw="undefined",y4=typeof window!==dw,nY=typeof document!==dw&&document,rY=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Pn=1e-7,Tg={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function iY(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function jm(t,e,n,r){return(t*r+e*n)/(n+r)}function N0(t){return typeof t===dw}function Qi(t){return t&&typeof t===Jq}function Vn(t){return Array.isArray(t)}function jr(t){return typeof t===eY}function ku(t){return typeof t===tY}function fw(t){return typeof t===Zq}function aY(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function b4(t,e,n,r,i){var a=hw(t,e,n);return a?n:sY(t,e,n+1,r,i)}function hw(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function sY(t,e,n,r,i){for(var a=function(d){var h=e[d].trim();if(h===t.close&&!hw(t,e,d))return{value:d};var g=d,m=Vr(i,function(b){var _=b.open;return _===h});if(m&&(g=b4(m,e,d,r,i)),g===-1)return o=d,"break";d=g,o=d},o,c=n;c<r;++c){var u=a(c);if(c=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function pw(t,e){var n=jr(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,a=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,c=n.isSeparateOpenClose,u=c===void 0?o:c,d=n.openCloseCharacters,h=d===void 0?rY:d,g=h.map(function(A){var R=A.open,D=A.close;return R===D?R:R+"|"+D}).join("|"),m="(\\s*"+i+"\\s*|"+g+"|\\s+)",b=new RegExp(m,"g"),_=t.split(b).filter(function(A){return A&&A!=="undefined"}),w=_.length,E=[],T=[];function C(){return T.length?(E.push(T.join("")),T=[],!0):!1}for(var N=function(A){var R=_[A].trim(),D=A,V=Vr(h,function(O){var W=O.open;return W===R}),P=Vr(h,function(O){var W=O.close;return W===R});if(V){if(D=b4(V,_,A,w,h),D!==-1&&u)return C()&&a||(E.push(_.slice(A,D+1).join("")),A=D,a)?(L=A,"break"):(L=A,"continue")}else if(P&&!hw(P,_,A)){var B=iY(h);return B.splice(h.indexOf(P),1),{value:pw(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:B})}}else if(aY(R,i)&&!o)return C(),a?(L=A,"break"):(L=A,"continue");D===-1&&(D=w-1),T.push(_.slice(A,D+1).join("")),A=D,L=A},L,j=0;j<w;++j){var M=N(j);if(j=L,typeof M=="object")return M.value;if(M==="break")break}return T.length&&E.push(T.join("")),E}function Fo(t){return pw(t,"")}function Vl(t){return pw(t,",")}function x4(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Mh(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function oY(t){return t.replace(/[\s-_]+([^\s-_])/g,function(e,n){return n.toUpperCase()})}function tm(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function th(){return Date.now?Date.now():new Date().getTime()}function As(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function Vr(t,e,n){var r=As(t,e);return r>-1?t[r]:n}var _4=(function(){var t=th(),e=y4&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=th(),i=setTimeout(function(){n(r-t)},1e3/60);return i}})(),lY=(function(){var t=y4&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}})();function Cs(t){return Object.keys(t)}function cY(t){var e=Cs(t);return e.map(function(n){return t[n]})}function Ft(t,e){var n=Mh(t),r=n.value,i=n.unit;if(Qi(e)){var a=e[i];if(a){if(fw(a))return a(r);if(Tg[i])return Tg[i](r,a)}}else if(i==="%")return r*e/100;return Tg[i]?Tg[i](r):r}function Wx(t,e,n){return Math.max(e,Math.min(t,n))}function LR(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[rt(e[0],Pn),rt(e[0]/r,Pn)],[rt(e[1]*r,Pn),rt(e[1],Pn)]].filter(function(i){return i.every(function(a,o){var c=e[o],u=rt(c,Pn);return n?a<=c||a<=u:a>=c||a>=u})})[0]||t}function w4(t,e,n,r){if(!r)return t.map(function(b,_){return Wx(b,e[_],n[_])});var i=t[0],a=t[1],o=r===!0?i/a:r,c=LR(t,e,!1,o),u=c[0],d=c[1],h=LR(t,n,!0,o),g=h[0],m=h[1];return i<u||a<d?(i=u,a=d):(i>g||a>m)&&(i=g,a=m),[i,a]}function uY(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Kx(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function _n(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function dY(t){return[0,1].map(function(e){return Kx(t.map(function(n){return n[e]}))})}function BR(t){var e=dY(t),n=_n(e,t[0]),r=_n(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function vs(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function rt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function UR(t,e){return t.forEach(function(n,r){t[r]=rt(t[r],e)}),t}function fY(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function S4(t){return t.reduce(function(e,n){return e.concat(n)},[])}function E4(t,e){t.indexOf(e)===-1&&t.push(e)}function Un(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function T4(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function A4(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Jn(t,e,n,r){t.addEventListener(e,n,r)}function Ln(t,e,n,r){t.removeEventListener(e,n,r)}function Qu(t){return t?.ownerDocument||nY}function gw(t){return Qu(t).documentElement}function Ko(t){return Qu(t).body}function No(t){var e;return((e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function C4(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Zu(t){return Qi(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var hY=(function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,a=this.values,o=i.indexOf(n),c=o===-1?i.length:o;i[c]=n,a[c]=r},t})(),pY=(function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t})(),gY=typeof Map=="function",mY=(function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t})();function vY(t,e){var n=[],r=[];return t.forEach(function(i){var a=i[0],o=i[1],c=new mY;n[a]=c,r[o]=c}),n.forEach(function(i,a){i.connect(n[a-1])}),t.filter(function(i,a){return!e[a]}).map(function(i,a){var o=i[0],c=i[1];if(o===c)return[0,0];var u=n[o],d=r[c-1],h=u.getIndex();u.disconnect(),d?u.connect(d,d.next):u.connect(void 0,n[0]);var g=u.getIndex();return[h,g]})}var yY=(function(){function t(n,r,i,a,o,c,u,d){this.prevList=n,this.list=r,this.added=i,this.removed=a,this.changed=o,this.maintained=c,this.changedBeforeAdded=u,this.fixed=d}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=vY(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(a,o){var c=a[0],u=a[1],d=r[o],h=d[0],g=d[1];if(c!==u)return i.push([h,g]),!0}),this.cachePureChanged=i},t})();function Oh(t,e,n){var r=gY?Map:n?pY:hY,i=n||function(C){return C},a=[],o=[],c=[],u=t.map(i),d=e.map(i),h=new r,g=new r,m=[],b=[],_={},w=[],E=0,T=0;return u.forEach(function(C,N){h.set(C,N)}),d.forEach(function(C,N){g.set(C,N)}),u.forEach(function(C,N){var L=g.get(C);typeof L>"u"?(++T,o.push(N)):_[L]=T}),d.forEach(function(C,N){var L=h.get(C);typeof L>"u"?(a.push(N),++E):(c.push([L,N]),T=_[N]||0,m.push([L-T,N-E]),b.push(N===L),L!==N&&w.push([L,N]))}),o.reverse(),new yY(t,e,a,o,w,c,m,b)}var bY=(function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=Oh(this.list,r,this.findKeyCallback);return this.list=r,i},t})(),Qx=function(t,e){return Qx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Qx(t,e)};function Ph(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Sa=function(){return Sa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sa.apply(this,arguments)};function R4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function FR(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function GR(t){var e=0;return t.map(function(n){return n==null?"$compat".concat(++e):"".concat(n)})}function k4(t){var e=[];return t.forEach(function(n){e=e.concat(Vn(n)?k4(n):n)}),e}function kb(t,e){if(!e)return t;for(var n in e)N0(t[n])&&(t[n]=e[n]);return t}function Vm(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function $R(t){var e=t.className,n=R4(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function HR(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r]=t[r]:e[r]=t[r];return[e,n]}function I0(t){if(!t)return null;var e=t.b;return Zu(e)?e:I0(t.c)}function D4(t){var e=t.parentNode;e&&e.removeChild(t)}function N4(t){t.forEach(function(e){e()})}function xY(){return this.constructor(this.props,this.context)}var mw=0,M0=(function(){function t(n,r,i,a,o,c,u){u===void 0&&(u={}),this.t=n,this.d=r,this.k=i,this.i=a,this.c=o,this.ref=c,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(n,r,i,a,o){var c=this,u=c.d,d=cY(r).filter(function(_){return _.$_req}),h=k4(d.map(function(_){return _.$_subs})),g=Vr(h,function(_){return _.d===u});if(c.b&&!jr(i)&&!o&&!c.s(i.props,a)&&!g){var m=h.reduce(function(_,w){var E=w.d;return _[0]?_[0].d===E&&_.push(w):E>u&&_.push(w),_},[]);return m.forEach(function(_){jh(_,_._ps,[_.o],n,r,!0)}),!1}c.o=i,c.ss(a);var b=c.ps;return jr(i)||(c.ps=i.props,c.ref=i.ref),vw(this),c.r(n,r,c.b?b:{},a),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var n=this,r=n.ref,i=n.fr;r&&r(i?i.current:n.b)},t})();function I4(){return Object.__CROACT_CURRENT_INSTNACE__}function _Y(){return mw}function wY(t){mw=t}function vw(t){return Object.__CROACT_CURRENT_INSTNACE__=t,mw=0,t}var yw=(function(){function t(n,r){n===void 0&&(n={}),this.props=n,this.context=r,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(n,r){return this.props!==n||this.state!==r},e.setState=function(n,r,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=Sa(Sa({},a.$_state),n),i?a.$_setState(r,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(r,i)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var i=[],a=this.$_p,o=jh(a.c,[a],[a.o],i,a._cs,Sa(Sa({},this.state),this.$_state),r);o&&(n&&i.push(n),N4(i),vw(null))},t})(),M4=(function(t){Ph(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,i){return Vm(this.props,r)||Vm(this.state,i)},e})(yw);function O4(t){var e=function(n){e.current=n};return e.current=t,e}function SY(t){return t._fr=!0,t}function EY(t,e,n,r){var i,a;return!((i=t?.prototype)===null||i===void 0)&&i.render?a=new t(e,n):(a=new yw(e,n),a.constructor=t,t._fr?(r.fr=O4(),a.render=function(){return this.constructor(this.props,r.fr)}):a.render=xY),a.$_p=r,a}var TY=(function(t){Ph(e,t);function e(r,i,a,o,c,u,d){d===void 0&&(d={});var h=t.call(this,r,i,a,o,c,u,kb(d,r.defaultProps))||this;return h.typ="comp",h._usefs=[],h._uefs=[],h._defs=[],h}var n=e.prototype;return n.s=function(r,i){var a=this.b;return a.shouldComponentUpdate(kb(r,this.t.defaultProps),i||a.state)!==!1},n.r=function(r,i,a){var o,c,u=this,d=u.t;u.ps=kb(u.ps,u.t.defaultProps);var h=u.ps,g=!u.b,m=d.contextType,b=u.b,_=m?.get(u);u._cs=i,g?(b=EY(d,h,_,u),u.b=b):(b.props=h,b.context=_);var w=b.state;u._usefs=[],u._uefs=[];var E=b.render();((c=(o=E?.props)===null||o===void 0?void 0:o.children)===null||c===void 0?void 0:c.length)===0&&(E.props.children=u.ps.children);var T=Sa(Sa({},i),b.$_cs);jh(u,u._ps,E?[E]:[],r,T),g?u._uefs.push(function(){m?.register(u),b.componentDidMount()}):u._uefs.push(function(){b.componentDidUpdate(a,w)}),r.push(function(){u._usefs.forEach(function(C){C()}),g?u.md():u.ud(),u._defs=u._uefs.map(function(C){return C()})})},n.ss=function(r){var i=this.b;!i||!r||(i.state=r)},n.un=function(){var r,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(r=a.contextType)===null||r===void 0||r.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},e})(M0);function AY(t,e,n){var r=bw($R(t),$R(e)),i=r.added,a=r.removed,o=r.changed;for(var c in i)n.setAttribute(c,i[c]);for(var u in o)n.setAttribute(u,o[u][1]);for(var d in a)n.removeAttribute(d)}function CY(t,e,n){var r=bw(t,e),i=r.added,a=r.removed;for(var o in a)n.e(o,!0);for(var c in i)n.e(c)}function bw(t,e){var n=Cs(t),r=Cs(e),i=Oh(n,r,function(u){return u}),a={},o={},c={};return i.added.forEach(function(u){var d=r[u];a[d]=e[d]}),i.removed.forEach(function(u){var d=n[u];o[d]=t[d]}),i.maintained.forEach(function(u){var d=u[0],h=n[d],g=[t[h],e[h]];t[h]!==e[h]&&(c[h]=g)}),{added:a,removed:o,changed:c}}function RY(t,e,n){var r=n.style,i=bw(t,e),a=i.added,o=i.removed,c=i.changed;for(var u in a){var d=tm(u,"-");r.setProperty(d,a[u])}for(var u in c){var h=tm(u,"-");r.setProperty(h,c[u][1])}for(var u in o){var g=tm(u,"-");r.removeProperty(g)}}function kY(t){return t.replace(/^on/g,"").toLowerCase()}var DY=(function(t){Ph(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="elem",r._es={},r._svg=!1,r}var n=e.prototype;return n.e=function(r,i){var a=this,o=a._es,c=a.b,u=kY(r);i?(Ln(c,u,o[r]),delete o[r]):(o[r]=function(d){var h,g;(g=(h=a.ps)[r])===null||g===void 0||g.call(h,d)},Jn(c,u,o[r]))},n.s=function(r){return Vm(this.ps,r)},n.r=function(r,i,a){var o,c=this,u=!c.b,d=c.ps;if(u){var h=I0(c.c),g=!1;c._svg||c.t==="svg"?g=!0:g=h&&h.ownerSVGElement,c._svg=g;var m=(o=c._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],b=c.t;if(m)c._hyd=[].slice.call(m.children||[]);else{var _=Qu(h);g?m=_.createElementNS("http://www.w3.org/2000/svg",b):m=_.createElement(b)}c.b=m}jh(c,c._ps,d.children,r,i);var w=c.b,E=HR(a),T=E[0],C=E[1],N=HR(d),L=N[0],j=N[1];return AY(T,L,w),CY(C,j,c),RY(a.style||{},d.style||{},w),r.push(function(){u?c.md():c.ud()}),!0},n.un=function(){var r=this,i=r._es,a=r.b;for(var o in i)Ln(a,o,i[o]);r._ps.forEach(function(c){c.un()}),r._es={},r._sel||D4(a)},e})(M0);function nh(t){if(!t||Zu(t))return t;var e=t.$_p._ps;return e.length?nh(e[0].b):null}function P4(t){if(t){if(t.b&&Zu(t.b))return t;var e=t._ps;return e.length?P4(e[0]):null}}function Hi(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},a=i.key,o=i.ref,c=R4(i,["key","ref"]);return{type:t,key:a,ref:o,props:Sa(Sa({},c),{children:S4(n).filter(function(u){return u!=null&&u!==!1})})}}var j4=(function(t){Ph(e,t);function e(r,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=r,a}var n=e.prototype;return n.r=function(){return!0},n.un=function(){},e})(M0),NY=(function(t){Ph(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.typ="text",r}var n=e.prototype;return n.r=function(r){var i,a=this,o=!a.b;if(o){var c=I0(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||Qu(c).createTextNode(a.t.replace("text_",""))}return r.push(function(){o?a.md():a.ud()}),!0},n.un=function(){D4(this.b)},e})(M0);function IY(t,e,n){var r=n.map(function(u){return jr(u)?null:u.key}),i=GR(e.map(function(u){return u.k})),a=GR(r),o=Oh(i,a,function(u){return u});o.removed.forEach(function(u){e.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var d=u[0],h=u[1],g=e.splice(d,1)[0];e.splice(h,0,g);var m=nh(g.b),b=nh(e[h+1]&&e[h+1].b);m&&m.parentNode.insertBefore(m,b)}),o.added.forEach(function(u){e.splice(u,0,qR(n[u],r[u],u,t))});var c=o.maintained.filter(function(u){u[0];var d=u[1],h=n[d],g=e[d],m=jr(h)?"text_".concat(h):h.type;return m!==g.t?(g.un(),e.splice(d,1,qR(h,r[d],d,t)),!0):(g.i=d,!1)});return FR(FR([],o.added,!0),c.map(function(u){u[0];var d=u[1];return d}))}function MY(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var a=nh(n[i].b);if(a)return a}return null}function qR(t,e,n,r){var i=r.d+1;if(jr(t)||ku(t))return new NY("text_".concat(t),i,e,n,r,null,{});var a=t.type,o=typeof a=="string"?DY:TY;return new o(a,i,e,n,r,t.ref,t.props)}function jh(t,e,n,r,i,a,o){var c=IY(t,e,n),u=t._hyd,d=e.filter(function(g,m){return g._hyd=u,g.u(r,i,n[m],a,o)});t.typ==="container"&&t._sel&&e.forEach(function(g){var m=P4(g);m&&(m._sel=!0)}),t._hyd=null;var h=I0(t);return h&&c.reverse().forEach(function(g){var m=e[g],b=nh(m.b);if(b&&h!==b&&!b.parentNode){var _=MY(t,m);h.insertBefore(b,_)}}),d.length>0}function OY(t,e,n,r){n===void 0&&(n=e.__CROACT__),r===void 0&&(r={});var i=!!n;n||(n=new j4(e));var a=[];return jh(n,n._ps,t?[t]:[],a,r,void 0,void 0),N4(a),vw(null),i||(e.__CROACT__=n),n}function YR(t,e,n){return!n&&t&&(n=new j4(e.parentElement),n._hyd=[e],n._sel=!0),OY(t,e,n),n}function V4(t){var e=I4(),n=e._hs||(e._hs=[]),r=_Y(),i=n[r];if(wY(r+1),i){if(!Vm(i.deps,t.deps))return i.updated=!1,i;n[r]=t}else n.push(t);return t.value=t.func(),t.updated=!0,t}function PY(t,e){var n=V4({func:t,deps:e});return n.value}function jY(t){return PY(function(){return O4(t)},[])}function z4(t,e,n){var r=I4(),i=V4({func:function(){return t},deps:e}),a=n?r._usefs:r._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function VY(t,e,n){z4(function(){t?.(e())},n,!0)}function xw(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function L4(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function B4(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function _w(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function zY(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function LY(t,e){var n=_w("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Zx(t){return t.replace(/_/g,".")}function gf(t,e){var n=null,r="-1";return xw(t,function(i){var a=_w("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!a||i.brand?!1:(n=i,r=a[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=LY(i.versionTest.toLowerCase(),e)||r),r=Zx(r),!0)}),{preset:n,version:r}}function Ag(t,e){var n={brand:"",version:"-1"};return xw(t,function(r){var i=U4(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function U4(t,e){return L4(t,function(n){var r=n.brand;return _w(""+e.test,r.toLowerCase())})}var F4=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],G4=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Jx=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],$4=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],H4=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function q4(t){return!!gf($4,t).preset}function BY(t){var e=B4(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:q4(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=gf(F4,e),o=a.preset,c=a.version,u=gf(H4,e),d=u.preset,h=u.version,g=gf(G4,e);if(r.chromium=!!g.preset,r.chromiumVersion=g.version,!r.chromium){var m=gf(Jx,e);r.webkit=!!m.preset,r.webkitVersion=m.version}return d&&(i.name=d.id,i.version=h,i.majorVersion=parseInt(h,10)),o&&(r.name=o.id,r.version=c,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function UY(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],a=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Ag($4,n).brand||q4(B4())},c={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&xw(Jx,function(m){return U4(n,m)});var u=Ag(G4,n);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var d=Ag(Jx,n);o.webkit=!!d.brand,o.webkitVersion=d.version||"-1"}var h=L4(H4,function(m){return new RegExp(""+m.test,"g").exec(a)});c.name=h?h.id:"";{var g=Ag(F4,n);o.name=g.brand||o.name,o.version=g.brand&&t?t.uaFullVersion:g.version}return o.webkit&&(c.name=r?"ios":"mac"),c.name==="ios"&&o.webview&&(o.version="-1"),c.version=Zx(c.version),o.version=Zx(o.version),c.majorVersion=parseInt(c.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!0}}function FY(t){return zY()?UY():BY(t)}function GY(t,e,n,r,i,a){for(var o=0;o<i;++o){var c=n+o*i,u=r+o*i;t[c]+=t[u]*a,e[c]+=e[u]*a}}function $Y(t,e,n,r,i){for(var a=0;a<i;++a){var o=n+a*i,c=r+a*i,u=t[o],d=e[o];t[o]=t[c],t[c]=u,e[o]=e[c],e[c]=d}}function HY(t,e,n,r,i){for(var a=0;a<r;++a){var o=n+a*r;t[o]/=i,e[o]/=i}}function Y4(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function ja(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Kt(e),i=0;i<e;++i){var a=e*i+i;if(!rt(n[a],Pn)){for(var o=i+1;o<e;++o)if(n[e*i+o]){$Y(n,r,i,o,e);break}}if(!rt(n[a],Pn))return[];HY(n,r,i,e,n[a]);for(var o=0;o<e;++o){var c=o,u=o+i*e,d=n[u];!rt(d,Pn)||i===o||GY(n,r,c,i,e,-d)}}return r}function qY(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function X4(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function YY(t,e){for(var n=Kt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Wl(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Zi(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Kt(n),i=Math.min(e,n),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)r[a*n+o]=t[a*e+o];r[(a+1)*n-1]=t[(a+1)*e-1],r[(n-1)*n+a]=t[(e-1)*e+a]}return r[n*n-1]=t[e*e-1],r}function zm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Kt(t);return e.forEach(function(i){r=Gt(r,i,t)}),r}function Gt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,a=e.length/i;if(i){if(!a)return t}else return e;for(var o=0;o<n;++o)for(var c=0;c<a;++c){r[c*n+o]=0;for(var u=0;u<i;++u)r[c*n+o]+=t[u*n+o]*e[c*i+u]}return r}function At(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function He(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function XY(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function W4(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function fr(t,e,n){n===void 0&&(n=e.length);var r=Gt(t,e,n),i=r[n-1];return r.map(function(a){return a/i})}function WY(t,e){return Gt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function KY(t,e){return Gt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function QY(t,e){return Gt(t,zh(e,4))}function Cg(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],a=i===void 0?1:i,o=e[2],c=o===void 0?1:o;return Gt(t,[r,0,0,0,0,a,0,0,0,0,c,0,0,0,0,1],4)}function Vh(t,e){return fr(zh(e,3),Wl(t,3))}function Db(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],a=i===void 0?0:i,o=e[2],c=o===void 0?0:o;return Gt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,a,c,1],4)}function XR(t,e){return Gt(t,e,4)}function zh(t,e){var n=Math.cos(t),r=Math.sin(t),i=Kt(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Kt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function ww(t,e){for(var n=Kt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Kl(t,e){for(var n=Kt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Sw(t,e,n,r,i,a,o,c){var u=t[0],d=t[1],h=e[0],g=e[1],m=n[0],b=n[1],_=r[0],w=r[1],E=i[0],T=i[1],C=a[0],N=a[1],L=o[0],j=o[1],M=c[0],A=c[1],R=[u,0,h,0,m,0,_,0,d,0,g,0,b,0,w,0,1,0,1,0,1,0,1,0,0,u,0,h,0,m,0,_,0,d,0,g,0,b,0,w,0,1,0,1,0,1,0,1,-E*u,-T*u,-C*h,-N*h,-L*m,-j*m,-M*_,-A*_,-E*d,-T*d,-C*g,-N*g,-L*b,-j*b,-M*w,-A*w],D=ja(R,8);if(!D.length)return[];var V=Gt(D,[E,T,C,N,L,j,M,A],8);return V[8]=1,Zi(qY(V),3,4)}var Df=function(){return Df=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Df.apply(this,arguments)};function ZY(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function rh(t,e){return e===void 0&&(e=0),Zc(Du(t,e))}function JY(t,e){var n=fr(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Zc(t){var e=ZY();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function Du(t,e){e===void 0&&(e=0);var n=Vn(t)?t:Fo(t);return n.map(function(r){var i=x4(r),a=i.prefix,o=i.value,c=null,u=a,d="";if(a==="translate"||a==="translateX"||a==="translate3d"){var h=Qi(e)?Df(Df({},e),{"o%":e["%"]}):{"%":e,"o%":e},g=Vl(o).map(function(O,W){return W===0&&"x%"in h?h["%"]=e["x%"]:W===1&&"y%"in h?h["%"]=e["y%"]:h["%"]=e["o%"],Ft(O,h)}),m=g[0],b=g[1],_=b===void 0?0:b,w=g[2],E=w===void 0?0:w;c=Db,d=[m,_,E]}else if(a==="translateY"){var T=Qi(e)?Df({"%":e["y%"]},e):{"%":e},_=Ft(o,T);c=Db,d=[0,_,0]}else if(a==="translateZ"){var E=parseFloat(o);c=Db,d=[0,0,E]}else if(a==="scale"||a==="scale3d"){var C=Vl(o).map(function(O){return parseFloat(O)}),N=C[0],L=C[1],j=L===void 0?N:L,M=C[2],A=M===void 0?1:M;c=Cg,d=[N,j,A]}else if(a==="scaleX"){var N=parseFloat(o);c=Cg,d=[N,1,1]}else if(a==="scaleY"){var j=parseFloat(o);c=Cg,d=[1,j,1]}else if(a==="scaleZ"){var A=parseFloat(o);c=Cg,d=[1,1,A]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var R=Mh(o),D=R.unit,V=R.value,P=D==="rad"?V:V*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",c=QY):a==="rotateX"?c=WY:a==="rotateY"&&(c=KY),d=P}else if(a==="matrix3d")c=XR,d=Vl(o).map(function(O){return parseFloat(O)});else if(a==="matrix"){var B=Vl(o).map(function(O){return parseFloat(O)});c=XR,d=[B[0],B[1],0,0,B[2],B[3],0,0,0,0,1,0,B[4],B[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:c,functionValue:d}})}var e1=function(t,e){return e1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},e1(t,e)};function eX(t,e){e1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var K4=typeof Map=="function"?void 0:(function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}})(),Q4=(function(t){eX(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,K4)||this}return e})(bY);function tX(t,e){return Oh(t,e,K4)}var t1=function(){return t1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t1.apply(this,arguments)};function nX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}var O0=(function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Qi(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Qi(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var a=this._events[n];if(a){var o=As(a,function(c){return c.listener===r});o>-1&&a.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(a){i._addEvent(n,a,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var a=this._events[n];if(!n||!a)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,nX(a).forEach(function(c){c.listener(r),c.once&&i.off(n,c.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var a=this._events;a[n]=a[n]||[];var o=a[n];o.push(t1({listener:r},i))},t})();var n1=function(t,e){return n1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},n1(t,e)};function rX(t,e){n1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var au=function(){return au=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},au.apply(this,arguments)};function iX(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function WR(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Rg(t){if(t){if(jr(t))return document.querySelector(t)}else return null;if(fw(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var aX=(function(t){rX(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(a){r.checkScroll({container:i.container,inputEvent:a})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var a=Rg(i.container);if(!a){this._flag=!1;return}var o=0,c=0,u=0,d=0;if(a===document.body)u=window.innerWidth,d=window.innerHeight;else{var h=a.getBoundingClientRect();o=h.top,c=h.left,u=h.width,d=h.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:c,width:u,height:d},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var a=r.clientX,o=r.clientY,c=i.threshold,u=c===void 0?0:c,d=this,h=d._startRect,g=d._startPos;this._currentOptions=i;var m=[0,0];return h.top>o-u?(g[1]>h.top||o<g[1])&&(m[1]=-1):h.top+h.height<o+u&&(g[1]<h.top+h.height||o>g[1])&&(m[1]=1),h.left>a-u?(g[0]>h.left||a<g[0])&&(m[0]=-1):h.left+h.width<a+u&&(g[0]<h.left+h.width||a>g[0])&&(m[0]=1),!m[0]&&!m[1]?!1:this._continueDrag(au(au({},i),{direction:m,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var a=r.prevScrollPos,o=a===void 0?this._prevScrollPos:a,c=r.direction,u=r.throttleTime,d=u===void 0?0:u,h=r.inputEvent,g=r.isDrag,m=this._getScrollPosition(c||[0,0],r),b=m[0]-o[0],_=m[1]-o[1],w=c||[b?Math.abs(b)/b:0,_?Math.abs(_)/_:0];return this._prevScrollPos=m,this._lock=!1,!b&&!_?!1:(this.emit("move",{offsetX:w[0]?b:0,offsetY:w[1]?_:0,inputEvent:h}),d&&g&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},d)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var a=i.container,o=i.getScrollPosition,c=o===void 0?iX:o;return c({container:Rg(a),direction:r})},n._continueDrag=function(r){var i=this,a,o=r.container,c=r.direction,u=r.throttleTime,d=r.useScroll,h=r.isDrag,g=r.inputEvent;if(!(!this._flag||h&&this._isWait)){var m=th(),b=Math.max(u+this._prevTime-m,0);if(b>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},b),!1;this._prevTime=m;var _=this._getScrollPosition(c,r);this._prevScrollPos=_,h&&(this._isWait=!0),d||(this._lock=!0);var w={container:Rg(o),direction:c,inputEvent:g};return(a=r.requestScroll)===null||a===void 0||a.call(r,w),this.emit("scroll",w),this._isWait=!1,d||this.checkScroll(au(au({},r),{prevScrollPos:_,direction:c,inputEvent:g}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var a=i===!0?WR:i,o=Rg(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=WR(window,this._onScroll):this._unregister=a(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e})(O0);function sX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r}function Ir(t){return rt(t,Pn)}function oX(t,e){return t.every(function(n,r){return Ir(n-e[r])===0})}function lX(t,e){return!Ir(t[0]-e[0])&&!Ir(t[1]-e[1])}function Z4(t){return t.length<3?0:Math.abs(uY(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function KR(t,e){var n=e.width,r=e.height,i=e.left,a=e.top,o=Ql(t),c=o.minX,u=o.minY,d=o.maxX,h=o.maxY,g=n/(d-c),m=r/(h-u);return t.map(function(b){return[i+(b[0]-c)*g,a+(b[1]-u)*m]})}function Ql(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function r1(t,e,n){var r=t[0],i=t[1],a=Ql(e),o=a.minX,c=a.maxX,u=[[o,i],[c,i]],d=Lm(u[0],u[1]),h=i1(e),g=[];if(h.forEach(function(_){var w=Lm(_[0],_[1]),E=_[0];if(oX(d,w))g.push({pos:t,line:_,type:"line"});else{var T=J4(Ew(d,w),[u,_]);T.forEach(function(C){_.some(function(N){return lX(N,C)})?g.push({pos:C,line:_,type:"point"}):Ir(E[1]-i)!==0&&g.push({pos:C,line:_,type:"intersection"})})}}),Vr(g,function(_){return _[0]===r}))return!0;var m=0,b={};return g.forEach(function(_){var w=_.pos,E=_.type,T=_.line;if(!(w[0]>r))if(E==="intersection")++m;else{if(E==="line")return;if(E==="point"){var C=Vr(T,function(j){return j[1]!==i}),N=b[w[0]],L=C[1]>i?1:-1;N?N!==L&&++m:b[w[0]]=L}}}),m%2===1}function Lm(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=i-n,c=a-r;Math.abs(o)<Pn&&(o=0),Math.abs(c)<Pn&&(c=0);var u=0,d=0,h=0;return o?c?(u=-c/o,d=1,h=-u*n-r):(d=1,h=-r):c&&(u=-1,h=n),[u,d,h]}function Ew(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],c=e[2],u=n===0&&a===0,d=r===0&&o===0,h=[];if(u&&d)return[];if(u){var g=-i/r,m=-c/o;return g!==m?[]:[[-1/0,g],[1/0,g]]}else if(d){var b=-i/n,_=-c/a;return b!==_?[]:[[b,-1/0],[b,1/0]]}else if(n===0){var w=-i/r,E=-(o*w+c)/a;h=[[E,w]]}else if(a===0){var w=-c/o,E=-(r*w+i)/n;h=[[E,w]]}else if(r===0){var E=-i/n,w=-(a*E+c)/o;h=[[E,w]]}else if(o===0){var E=-c/a,w=-(n*E+i)/r;h=[[E,w]]}else{var E=(r*c-o*i)/(o*n-r*a),w=-(n*E+i)/r;h=[[E,w]]}return h.map(function(T){return[T[0],T[1]]})}function J4(t,e){var n=e.map(function(g){return[0,1].map(function(m){return[Math.min(g[0][m],g[1][m]),Math.max(g[0][m],g[1][m])]})}),r=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if(Ir(a-t[1][0])){if(!Ir(o-t[1][1])){var d=Math.max.apply(Math,n.map(function(g){return g[0][0]})),h=Math.min.apply(Math,n.map(function(g){return g[0][1]}));if(Ir(d-h)>0)return[];r=[[d,o],[h,o]]}}else{var c=Math.max.apply(Math,n.map(function(g){return g[1][0]})),u=Math.min.apply(Math,n.map(function(g){return g[1][1]}));if(Ir(c-u)>0)return[];r=[[a,c],[a,u]]}}return r.length||(r=t.filter(function(g){var m=g[0],b=g[1];return n.every(function(_){return 0<=Ir(m-_[0][0])&&0<=Ir(_[0][1]-m)&&0<=Ir(b-_[1][0])&&0<=Ir(_[1][1]-b)})})),r.map(function(g){return[Ir(g[0]),Ir(g[1])]})}function i1(t){return sX(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function cX(t,e){var n=t.slice(),r=e.slice();BR(n)===-1&&n.reverse(),BR(r)===-1&&r.reverse();var i=i1(n),a=i1(r),o=i.map(function(h){return Lm(h[0],h[1])}),c=a.map(function(h){return Lm(h[0],h[1])}),u=[];o.forEach(function(h,g){var m=i[g],b=[];c.forEach(function(_,w){var E=Ew(h,_),T=J4(E,[m,a[w]]);b.push.apply(b,T.map(function(C){return{index1:g,index2:w,pos:C,type:"intersection"}}))}),b.sort(function(_,w){return vs(m[0],_.pos)-vs(m[0],w.pos)}),u.push.apply(u,b),r1(m[1],r)&&u.push({index1:g,index2:-1,pos:m[1],type:"inside"})}),a.forEach(function(h,g){if(r1(h[1],n)){var m=!1,b=As(u,function(_){var w=_.index2;return w===g?(m=!0,!1):!!m});b===-1&&(m=!1,b=As(u,function(_){var w=_.index1,E=_.index2;return w===-1&&E+1===g?(m=!0,!1):!!m})),b===-1?u.push({index1:-1,index2:g,pos:h[1],type:"inside"}):u.splice(b,0,{index1:-1,index2:g,pos:h[1],type:"inside"})}});var d={};return u.filter(function(h){var g=h.pos,m=g[0]+"x"+g[1];return d[m]?!1:(d[m]=!0,!0)})}function uX(t,e){var n=cX(t,e);return n.map(function(r){var i=r.pos;return i})}function dX(t,e){var n=uX(t,e);return Z4(n)}var a1=function(t,e){return a1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},a1(t,e)};function fX(t,e){a1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Nn=function(){return Nn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nn.apply(this,arguments)};function hX(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Nb(t){return hX([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function pX(t){return t.touches&&t.touches.length>=2}function kg(t){return t?t.touches?mX(t.touches):[eO(t)]:[]}function gX(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function QR(t,e,n){var r=n.length,i=Nf(t,r),a=i.clientX,o=i.clientY,c=i.originalClientX,u=i.originalClientY,d=Nf(e,r),h=d.clientX,g=d.clientY,m=Nf(n,r),b=m.clientX,_=m.clientY,w=a-h,E=o-g,T=a-b,C=o-_;return{clientX:c,clientY:u,deltaX:w,deltaY:E,distX:T,distY:C}}function Ib(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function mX(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(eO(t[r]));return n}function eO(t){return{clientX:t.clientX,clientY:t.clientY}}function Nf(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var a=t[i];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var Mb=(function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),Nb(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),Nb(e)-Nb(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=QR(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,a=r.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),a=[],o=0;o<i;++o)a[o]=QR([e[o]],[n[o]],[r[o]]);return a},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=Nf(e,this.length),i=Nf(this.prevClients,this.length),a=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(a*a+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),Ib(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),Ib(e)/Ib(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t})(),ZR=["textarea","input"],vX=(function(t){fX(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(m,b){if(b===void 0&&(b=!0),!(!i.flag&&m.cancelable===!1)){var _=m.type.indexOf("drag")>=-1;if(!(i.flag&&_)){i._isDragAPI=!0;var w=i.options,E=w.container,T=w.pinchOutside,C=w.preventWheelClick,N=w.preventRightClick,L=w.preventDefault,j=w.checkInput,M=w.dragFocusedInput,A=w.preventClickEventOnDragStart,R=w.preventClickEventOnDrag,D=w.preventClickEventByCondition,V=i._useTouch,P=!i.flag;if(i._isSecondaryButton=m.which===3||m.button===2,C&&(m.which===2||m.button===1)||N&&(m.which===3||m.button===2))return i.stop(),!1;if(P){var B=i._window.document.activeElement,O=m.target;if(O){var W=O.tagName.toLowerCase(),X=ZR.indexOf(W)>-1,H=O.isContentEditable;if(X||H){if(j||!M&&B===O)return!1;if(B&&(B===O||H&&B.isContentEditable&&B.contains(O)))if(M)O.blur();else return!1}else if((L||m.type==="touchstart")&&B){var K=B.tagName.toLowerCase();(B.isContentEditable||ZR.indexOf(K)>-1)&&B.blur()}(A||R||D)&&Jn(i._window,"click",i._onClick,!0)}i.clientStores=[new Mb(kg(m))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=b,i._dragFlag=!0,i._prevInputEvent=m,i.data={},i.doubleFlag=th()-i.prevTime<200,i._isMouseEvent=gX(m),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var ee=i._preventMouseEvent||i.emit("dragStart",Nn(Nn({data:i.data,datas:i.data,inputEvent:m,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:b,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){m.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));ee===!1&&i.stop(),i._isMouseEvent&&i.flag&&L&&m.preventDefault()}if(!i.flag)return!1;var ie=0;if(P?(i._attchDragEvent(),V&&T&&(ie=setTimeout(function(){Jn(E,"touchstart",i.onDragStart,{passive:!1})}))):V&&T&&Ln(E,"touchstart",i.onDragStart),i.flag&&pX(m)){if(clearTimeout(ie),P&&m.touches.length!==m.changedTouches.length)return;i.pinchFlag||i.onPinchStart(m)}}}},i.onDrag=function(m,b){if(i.flag){var _=i.options.preventDefault;!i._isMouseEvent&&_&&m.preventDefault(),i._prevInputEvent=m;var w=kg(m),E=i.moveClients(w,m,!1);if(i._dragFlag){if(i.pinchFlag||E.deltaX||E.deltaY){var T=i._preventMouseEvent||i.emit("drag",Nn(Nn({},E),{isScroll:!!b,inputEvent:m}));if(T===!1){i.stop();return}}i.pinchFlag&&i.onPinch(m,w)}i.getCurrentStore().getPosition(w,!0)}},i.onDragEnd=function(m){if(i.flag){var b=i.options,_=b.pinchOutside,w=b.container,E=b.preventClickEventOnDrag,T=b.preventClickEventOnDragStart,C=b.preventClickEventByCondition,N=i.isDrag;(E||T||C)&&requestAnimationFrame(function(){i._allowClickEvent()}),!C&&!T&&E&&!N&&i._allowClickEvent(),i._useTouch&&_&&Ln(w,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(m);var L=m?.touches?kg(m):[],j=L.length;j===0||!i.options.keepDragging?i.flag=!1:i._addStore(new Mb(L));var M=i._getPosition(),A=th(),R=!N&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=N||R?0:A,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",Nn({data:i.data,datas:i.data,isDouble:R,isDrag:N,isClick:!N,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:m,isTrusted:i._isTrusted},M)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Ln(i._window,"click",i._onClick,!0)},i._onClick=function(m){i._allowClickEvent(),i._allowMouseEvent();var b=i.options.preventClickEventByCondition;b?.(m)||(m.stopPropagation(),m.preventDefault())},i._onContextMenu=function(m){var b=i.options;b.preventRightClick?i.onDragEnd(m):m.preventDefault()},i._passCallback=function(){};var a=[].concat(n),o=a[0];i._window=C4(o)?o:No(o),i.options=Nn({checkInput:!1,container:o&&!("document"in o)?No(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var c=i.options,u=c.container,d=c.events,h=c.checkWindowBlur;if(i._useDrag=d.indexOf("drag")>-1,i._useTouch=d.indexOf("touch")>-1,i._useMouse=d.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(m){Jn(m,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(m){Jn(m,"mousedown",i.onDragStart),Jn(m,"mousemove",i._passCallback)}),Jn(u,"contextmenu",i._onContextMenu)),h&&Jn(No(),"blur",i.onBlur),i._useTouch){var g={passive:!1};a.forEach(function(m){Jn(m,"touchstart",i.onDragStart,g),Jn(m,"touchmove",i._passCallback,g)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(n,r),a&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],a=n[1],o=this.getCurrentStore(),c=o.prevClients;return this.moveClients(c.map(function(u){var d=u.clientX,h=u.clientY;return{clientX:d+i,clientY:h+a,originalClientX:d,originalClientY:h}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Nn(Nn({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),Ln(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(a){Ln(a,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(a){Ln(a,"mousedown",n.onDragStart)}),Ln(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(a){Ln(a,"touchstart",n.onDragStart)}),Ln(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new Mb(kg(n));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",Nn(Nn({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Nn(Nn({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Nn(Nn({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var a=this._getPosition(n,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var c=!1;return!o&&this.isDrag&&(c=!0),Nn(Nn({data:this.data,datas:this.data},a),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:c})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),a=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(d,h){var g=h.getPosition();return d.distX+=g.distX,d.distY+=g.distY,d},a),c=o.distX,u=o.distY;return Nn(Nn({},a),{distX:c,distY:u})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(Jn(r,"dragover",this.onDrag,i),Jn(n,"dragend",this.onDragEnd)),this._useMouse&&(Jn(r,"mousemove",this.onDrag),Jn(n,"mouseup",this.onDragEnd)),this._useTouch&&(Jn(r,"touchmove",this.onDrag,i),Jn(n,"touchend",this.onDragEnd,i),Jn(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(Ln(r,"dragover",this.onDrag),Ln(n,"dragend",this.onDragEnd)),this._useMouse&&(Ln(r,"mousemove",this.onDrag),Ln(n,"mouseup",this.onDragEnd)),this._useTouch&&(Ln(r,"touchstart",this.onDragStart),Ln(r,"touchmove",this.onDrag),Ln(n,"touchend",this.onDragEnd),Ln(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e})(O0);function yX(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var bX=yX;function xX(t){return bX(t).toString(36)}function _X(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function wX(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var a=i.trim();return(a?Vl(a):[""]).map(function(o){var c=o.trim();return c.indexOf("@")===0?c:c.indexOf(":global")>-1?c.replace(/\:global/g,""):c.indexOf(":host")>-1?"".concat(c.replace(/\:host/g,".".concat(t))):c?".".concat(t," ").concat(c):".".concat(t)}).join(", ")+" {"})}function SX(t,e,n,r,i){var a=Qu(r),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=wX(t,e,n),(i||a.head||a.body).appendChild(o),o}function EX(t){var e="rCS"+xX(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=_X(n),a=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!a)a=SX(e,t,r,n,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var c,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(c=a.parentNode)===null||c===void 0||c.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var s1=function(){return s1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s1.apply(this,arguments)};function TX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function tO(t,e){var n=EX(e),r=n.className;return SY(function(i,a){var o=i.className,c=o===void 0?"":o;i.cspNonce;var u=TX(i,["className","cspNonce"]),d=jY();return VY(a,function(){return d.current},[]),z4(function(){var h=n.inject(d.current,{nonce:i.cspNonce});return function(){h.destroy()}},[]),Hi(t,s1({ref:d,"data-styled-id":r,className:"".concat(c," ").concat(r)},u))})}var o1=function(t,e){return o1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},o1(t,e)};function Lh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var J=function(){return J=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},J.apply(this,arguments)};function AX(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function CX(t,e,n,r){var i=arguments.length,a=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function RX(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function te(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Ce(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function Bh(t,e){return J({events:[],props:[],name:t},e)}var kX=["n","w","s","e"],Tw=["n","w","s","e","nw","ne","sw","se"];function DX(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function NX(t){var e=DX(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var Ju=FY(),nO=Ju.browser.webkit,rO=nO&&(function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1})(),iO=Ju.browser.name,aO=parseInt(Ju.browser.version,10),IX=iO==="chrome",MX=Ju.browser.chromium,OX=parseInt(Ju.browser.chromiumVersion,10)||0,PX=IX&&aO>=109||MX&&OX>=109,jX=iO==="firefox",VX=parseInt(Ju.browser.webkitVersion,10)>=612||aO>=15,Aw="moveable-",zX=Tw.map(function(t){var e="",n="",r="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(a,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),LX=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(zX,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(NX(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(rO?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),BX=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],l1=1e-4,Er=1e-7,Dg=1e-9,c1=Math.pow(10,10),JR=-c1,UX={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Cw={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},sO={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},oO=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Uh(t,e,n,r,i,a){var o,c;a===void 0&&(a="draggable");var u=(c=(o=e.gestos[a])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&c!==void 0?c:{},d=u.originalDatas||u.datas,h=d[a]||(d[a]={});return J(J({},u),{isPinch:!!r,parentEvent:!0,datas:h,originalDatas:t.originalDatas})}var Nu=(function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),J(J({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,a=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:a,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t})();function vu(t,e,n,r){var i=t.length===16,a=i?4:3,o=ac(t,n,r,a),c=te(o,4),u=te(c[0],2),d=u[0],h=u[1],g=te(c[1],2),m=g[0],b=g[1],_=te(c[2],2),w=_[0],E=_[1],T=te(c[3],2),C=T[0],N=T[1],L=te(an(t,e,a),2),j=L[0],M=L[1],A=Math.min(d,m,w,C),R=Math.min(h,b,E,N),D=Math.max(d,m,w,C),V=Math.max(h,b,E,N);d=d-A||0,m=m-A||0,w=w-A||0,C=C-A||0,h=h-R||0,b=b-R||0,E=E-R||0,N=N-R||0,j=j-A||0,M=M-R||0;var P=t[0],B=t[a+1],O=br(P*B);return{left:A,top:R,right:D,bottom:V,origin:[j,M],pos1:[d,h],pos2:[m,b],pos3:[w,E],pos4:[C,N],direction:O}}function lO(t,e){var n=e.clientX,r=e.clientY,i=e.datas,a=t.state,o=a.moveableClientRect,c=a.rootMatrix,u=a.is3d,d=a.pos1,h=o.left,g=o.top,m=u?4:3,b=te(He(Ou(c,[n-h,r-g],m),d),2),_=b[0],w=b[1],E=te(Ua({datas:i,distX:_,distY:w}),2),T=E[0],C=E[1];return[T,C]}function ic(t,e){var n=e.datas,r=t.state,i=r.allMatrix,a=r.beforeMatrix,o=r.is3d,c=r.left,u=r.top,d=r.origin,h=r.offsetMatrix,g=r.targetMatrix,m=r.transformOrigin,b=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=g,n.beforeMatrix=a,n.offsetMatrix=h,n.transformOrigin=m,n.inverseMatrix=ja(i,b),n.inverseBeforeMatrix=ja(a,b),n.absoluteOrigin=Wl(At([c,u],d),b),n.startDragBeforeDist=fr(n.inverseBeforeMatrix,n.absoluteOrigin,b),n.startDragDist=fr(n.inverseMatrix,n.absoluteOrigin,b)}function FX(t){return vu(t.datas.beforeTransform,[50,50],100,100).direction}function P0(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,a=r.transformIndex,o=i.nextTransforms,c=o.length,u=i.nextTransformAppendedIndexes,d=-1;a===-1?(n==="translate"?d=0:n==="rotate"&&(d=As(o,function(b){return b.match(/scale\(/g)})),d===-1&&(d=o.length),r.transformIndex=d):Vr(u,function(b){return b.index===a&&b.functionName===n})?d=a:d=a+u.filter(function(b){return b.index<a}).length;var h=pK(o,t.state,d),g=h.targetFunction,m=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=h.beforeFunctionTexts,r.afterFunctionTexts=h.afterFunctionTexts,r.beforeTransform=h.beforeFunctionMatrix,r.beforeTransform2=h.beforeFunctionMatrix2,r.targetTansform=h.targetFunctionMatrix,r.afterTransform=h.afterFunctionMatrix,r.afterTransform2=h.afterFunctionMatrix2,r.targetAllTransform=h.allFunctionMatrix,g.functionName===m?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):c>d&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=Ce(Ce([],te(u),!1),[{functionName:n,index:d,isAppend:!0}],!1))}function j0(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function GX(t){var e=t.datas,n=t.distX,r=t.distY,i=te(uO({datas:e,distX:n,distY:r}),2),a=i[0],o=i[1],c=cO(e,YY([a,o],4));return fr(c,Wl([0,0,0],4),4)}function cO(t,e,n){var r=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,c=t.targetAllTransform,u=n?Gt(c,e,4):Gt(e,c,4),d=Gt(ja(n?a:r,4),u,4),h=Gt(d,ja(n?o:i,4),4);return h}function uO(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,a=e.is3d,o=e.startDragBeforeDist,c=e.absoluteOrigin,u=a?4:3;return He(fr(i,At(c,[n,r]),u),o)}function Ua(t,e){var n=t.datas,r=t.distX,i=t.distY,a=n.inverseBeforeMatrix,o=n.inverseMatrix,c=n.is3d,u=n.startDragBeforeDist,d=n.startDragDist,h=n.absoluteOrigin,g=c?4:3;return He(fr(e?a:o,At(h,[r,i]),g),e?u:d)}function $X(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var a=n.matrix,o=n.is3d;n.startDragBeforeDist;var c=n.startDragDist,u=n.absoluteOrigin,d=o?4:3;return He(fr(a,At(c,[r,i]),d),u)}function HX(t,e,n,r,i,a){return r===void 0&&(r=e),i===void 0&&(i=n),a===void 0&&(a=[0,0]),t?t.map(function(o,c){var u=Mh(o),d=u.value,h=u.unit,g=c?i:r,m=c?n:e;if(o==="%"||isNaN(d)){var b=g?a[c]/g:0;return m*b}else if(h!=="%")return d;return m*d/100}):a}function dO(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function qX(t,e){return dO(e).map(function(n){return t[n]})}function Ob(t,e){var n=(e+1)/2;return[jm(t[0][0],t[1][0],n,1-n),jm(t[0][1],t[1][1],n,1-n)]}function Fn(t,e){var n=Ob([t[0],t[1]],e[0]),r=Ob([t[2],t[3]],e[0]);return Ob([n,r],e[1])}function YX(t,e,n,r,i,a){var o=ac(e,n,r,i),c=Fn(o,a),u=t[0]-c[0],d=t[1]-c[1];return[u,d]}function Fh(t,e,n,r){return Gt(t,Mf(e,r,n),r)}function XX(t,e,n,r){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,c=o?4:3,u;if(jr(n)){var d=e.beforeTransform,h=e.afterTransform;r?u=Zi(rh(n),4,c):u=Zi(Gt(Gt(d,rh([n]),4),h,4),4,c)}else u=n;return Fh(a,u,i,c)}function WX(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,c=i?4:3;return Fh(r,Gt(o||a,ww(e,c),c),n,c)}function V0(t,e){var n=ed(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=Vn(r)?r:Fo(r),u1(t,e,i)},setTransformIndex:function(r){u1(t,e,r)}}}function z0(t,e,n){var r=ed(e),i=r.startTransforms;u1(t,e,As(i,function(a){return a.indexOf("".concat(n,"("))===0}))}function u1(t,e,n){var r=ed(e),i=e.datas;if(i.transformIndex=n,n!==-1){var a=r.startTransforms[n];if(a){var o=t.state,c=Du([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=c[0].functionValue}}}function Rw(t,e){var n=ed(t);n.nextTransforms=Fo(e)}function ed(t){return t.originalDatas.beforeRenderable}function Bm(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Ng(t){return(Bm(t)||[]).join(" ")}function Ig(t){return ed(t).nextStyle}function fO(t,e,n,r,i){Rw(i,e);var a=yr.drag(t,Uh(i,t.state,n,r)),o=a?a.transform:e;return J(J({transform:e,drag:a},_r({transform:o},i)),{afterTransform:o})}function kw(t,e,n,r,i,a){var o=XX(t.state,i,e,a),c=ZX(t,n,r,o);return c}function hO(t,e,n,r,i,a,o){var c=kw(t,e,n,i,a,o),u=t.state,d=u.left,h=u.top,g=t.props.groupable,m=g?d:0,b=g?h:0,_=He(r,c);return He(_,[m,b])}function KX(t,e,n,r,i,a,o){var c=hO(t,e,n,r,i,a,o);return c}function QX(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function ZX(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,c=i.is3d,u=c?4:3,d=[a/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return an(r,d,u)}function JX(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,a=n.fixedOffset;return hO(t,"rotate(".concat(e,"deg)"),r,i,a,n)}function eW(t,e,n,r,i,a){var o=t.props.groupable,c=t.state,u=c.transformOrigin,d=c.offsetMatrix,h=c.is3d,g=c.width,m=c.height,b=c.left,_=c.top,w=a.fixedDirection,E=a.nextTargetMatrix||c.targetMatrix,T=h?4:3,C=HX(i,e,n,g,m,u),N=o?b:0,L=o?_:0,j=Fh(d,E,C,T),M=YX(r,j,e,n,T,w);return He(M,[N,L])}function tW(t,e){return Fn(Ti(t.state),e)}function nW(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n?.isFlag()&&(i=n.getEventData()[e]),!i&&r?.isFlag()&&(i=r.getEventData()[e]),i||{}}function rW(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function iW(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function pO(t,e,n){for(var r=t,i=[],a=gw(t)||Ko(t),o=!n&&t===e||t===a,c=o,u=!1,d=3,h,g,m,b=!1,_=ah(e,e,!0).offsetParent,w=1;r&&!c;){c=o;var E=zr(r),T=E("position"),C=zO(r),N=T==="fixed",L=iW(E),j=XY(tK(C)),M=void 0,A=!1,R=!1,D=0,V=0,P=0,B=0,O={hasTransform:!1,fixedContainer:null};N&&(b=!0,O=sK(r),_=O.fixedContainer);var W=j.length;!u&&(W===16||L.length)&&(u=!0,d=4,m1(i),m&&(m=Zi(m,3,4))),u&&W===9&&(j=Zi(j,3,4));var X=aK(r,t),H=X.tagName,K=X.hasOffset,ee=X.isSVG,ie=X.origin,q=X.targetOrigin,F=X.offset,Y=te(F,2),ne=Y[0],Z=Y[1];H==="svg"&&!r.ownerSVGElement&&m&&(i.push({type:"target",target:r,matrix:oK(r,d)}),i.push({type:"offset",target:r,matrix:Kt(d)}));var oe=parseFloat(E("zoom"))||1;if(N)M=O.fixedContainer,A=!0;else{var ce=ah(r,e,!1,!0,E),me=ce.offsetZoom;if(M=ce.offsetParent,A=ce.isEnd,R=ce.isStatic,w*=me,(ce.isCustomElement||me!==1)&&R)ne-=M.offsetLeft,Z-=M.offsetTop;else if(jX||PX){var ge=ce.parentSlotElement;if(ge){for(var Te=M,Ne=0,ae=0;Te&&rW(Te);)Ne+=Te.offsetLeft,ae+=Te.offsetTop,Te=Te.offsetParent;ne-=Ne,Z-=ae}}}if(nO&&!VX&&K&&!ee&&R&&(T==="relative"||T==="static")&&(ne-=M.offsetLeft,Z-=M.offsetTop,o=o||A),N)K&&O.hasTransform&&(P=M.clientLeft,B=M.clientTop);else if(K&&_!==M&&(D=M.clientLeft,V=M.clientTop),K&&M===a){var Ae=LO(r,!1);ne+=Ae[0],Z+=Ae[1]}if(i.push({type:"target",target:r,matrix:Mf(j,d,ie)}),L.length&&(i.push({type:"offset",target:r,matrix:Kt(d)}),i.push({type:"target",target:r,matrix:Mf(rh(L),d,ie)})),K){var De=r===t,Me=De?0:r.scrollLeft,Be=De?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Kl([ne-Me+D-P,Z-Be+V-B],d)})}else i.push({type:"offset",target:r,origin:ie});if(oe!==1&&i.push({type:"zoom",target:r,matrix:Mf(ww([oe,oe],d),d,[0,0])}),m||(m=j),h||(h=ie),g||(g=q),c||N)break;r=M,o=A,(!n||r===a)&&(c=o)}return m||(m=Kt(d)),h||(h=[0,0]),g||(g=[0,0]),{zoom:w,offsetContainer:_,matrixes:i,targetMatrix:m,transformOrigin:h,targetOrigin:g,is3d:u,hasFixed:b}}var Dl=null,Nl=null,su=null;function Iu(t){t?(window.Map&&(Dl=new Map,Nl=new Map),su=[]):(Dl=null,su=null,Nl=null)}function aW(t){var e=Nl?.get(t);if(e)return e;var n=Of(t,!0);return Nl&&Nl.set(t,n),n}function sW(t,e){if(su){var n=Vr(su,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=pO(t,e,!0);return su&&su.push([[t,e],r]),r}function zr(t){var e=Dl?.get(t);if(!e){var n=No(t).getComputedStyle(t);if(!Dl)return function(a){return n[a]};e={style:n,cached:{}},Dl.set(t,e)}var r=e.cached,i=e.style;return function(a){return a in r||(r[a]=i[a]),r[a]}}function qi(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,c){return a[c]=a[c]||{},a[c][e]=a[c][e]||{},J(J({},n),{isRequestChild:!0,datas:a[c][e],originalDatas:a[c]})})}function Pb(t,e,n,r,i,a,o){var c=!!n.match(/Start$/g),u=!!n.match(/End$/g),d=i.isPinch,h=i.datas,g=qi(t,e.name,i),m=t.moveables,b=[],_=g.map(function(w,E){var T=m[E],C=T.state,N=C.gestos,L=w;if(c)L=new Nu(o).dragStart(r,w),b.push(L);else{if(N[o]||(N[o]=h.childGestos[E]),!N[o])return;L=Uh(w,C,r,d,a,o),b.push(L)}var j=e[n](T,J(J({},L),{parentFlag:!0}));return u&&(N[o]=null),j});return c&&(h.childGestos=m.map(function(w){return w.state.gestos[o]})),{eventParams:_,childEvents:b}}function ys(t,e,n,r,i,a){i===void 0&&(i=function(h,g){return g});var o=!!n.match(/End$/g),c=qi(t,e.name,r),u=t.moveables,d=c.map(function(h,g){var m=u[g],b=h;b=i(m,h);var _=e[n](m,J(J({},b),{parentFlag:!0}));return o&&(m.state.gestos={}),_});return d}function Um(t,e,n,r){var i=n.fixedDirection,a=n.fixedPosition,o=r.datas.startPositions||Ti(e.state),c=Fn(o,i),u=te(fr(zh(-t.rotation/180*Math.PI,3),[c[0]-a[0],c[1]-a[1],1],3),2),d=u[0],h=u[1];return r.datas.originalX=d,r.datas.originalY=h,r}function gO(t,e,n,r){var i=t.getState(),a=i.renderPoses,o=i.rotation,c=i.direction,u=Zl(t.props,e).zoom,d=If(o/Math.PI*180),h={},g=t.renderState;g.renderDirectionMap||(g.renderDirectionMap={});var m=g.renderDirectionMap;n.forEach(function(_){var w=_.dir;h[w]=!0});var b=br(c);return n.map(function(_){var w=_.data,E=_.classNames,T=_.dir,C=Cw[T];if(!C||!h[T])return null;m[T]=!0;var N=(rt(d,15)+b*sO[T]+720)%180,L={};return Cs(w).forEach(function(j){L["data-".concat(j)]=w[j]}),r.createElement("div",J({className:Fe.apply(void 0,Ce(["control","direction",T,e],te(E),!1)),"data-rotation":N,"data-direction":T},L,{key:"direction-".concat(T),style:Hm.apply(void 0,Ce([o,u],te(C.map(function(j){return a[j]})),!1))}))})}function mO(t,e,n,r){var i=Zl(t.props,n),a=i.renderDirections,o=a===void 0?e:a,c=i.displayAroundControls;if(!o)return[];var u=o===!0?Tw:o;return Ce(Ce([],te(c?xO(t,r,n,u):[]),!1),te(gO(t,n,u.map(function(d){return{data:{},classNames:[],dir:d}}),r)),!1)}function ih(t,e,n,r,i,a){for(var o=[],c=6;c<arguments.length;c++)o[c-6]=arguments[c];var u=_n(n,r),d=e?rt(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:Fe.apply(void 0,Ce(["line","direction",e?"edge":"",e],te(o),!1)),"data-rotation":d,"data-line-key":a,"data-direction":e,style:vf(n,r,i,u)})}function vO(t,e,n,r,i){var a=n===!0?kX:n;return a.map(function(o,c){var u=te(Cw[o],2),d=u[0],h=u[1];if(h!=null)return ih(t,o,r[d],r[h],i,"".concat(e,"Edge").concat(c),e)}).filter(Boolean)}function yO(t){return function(e,n){var r=Zl(e.props,t).edge;return r&&(r===!0||r.length)?Ce(Ce([],te(vO(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),te(oW(e,t,n)),!1):bO(e,t,n)}}function bO(t,e,n){return mO(t,Tw,e,n)}function oW(t,e,n){return mO(t,["nw","ne","sw","se"],e,n)}function xO(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,c=a.rotation,u=a.direction,d=i.renderDirectionMap,h=t.props.zoom,g=br(u),m=c/Math.PI*180;return(r||Cs(d)).map(function(b){var _=Cw[b];if(!_)return null;var w=(rt(m,15)+g*sO[b]+720)%180,E=["around-control"];return n&&E.push("direction",n),e.createElement("div",{className:Fe.apply(void 0,Ce([],te(E),!1)),"data-rotation":w,"data-direction":b,key:"direction-around-".concat(b),style:Hm.apply(void 0,Ce([c,h],te(_.map(function(T){return o[T]})),!1))})})}function Dw(t,e,n){var r=t||{},i=r.position,a=i===void 0?"client":i,o=r.left,c=o===void 0?-1/0:o,u=r.top,d=u===void 0?-1/0:u,h=r.right,g=h===void 0?1/0:h,m=r.bottom,b=m===void 0?1/0:m,_={position:a,left:c,top:d,right:g,bottom:b};return{vertical:ek(_,e,!0),horizontal:ek(_,n,!1)}}function L0(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,a=r.clientWidth,o=r.clientLeft,c=r.clientTop,u=n.snapOffset,d=u.left,h=u.top,g=u.right,m=u.bottom,b=e||t.props.bounds||{},_=b.position||"client",w=_==="css",E=b.left,T=E===void 0?-1/0:E,C=b.top,N=C===void 0?-1/0:C,L=b.right,j=L===void 0?w?-1/0:1/0:L,M=b.bottom,A=M===void 0?w?-1/0:1/0:M;return w&&(j=a+g-d-j,A=i+m-h-A),{left:T+d-o,right:j+d-o,top:N+h-c,bottom:A+h-c}}function lW(t,e,n){var r=L0(t),i=r.left,a=r.top,o=r.right,c=r.bottom,u=te(n,2),d=u[0],h=u[1],g=te(He(n,e),2),m=g[0],b=g[1];we(m)<Er&&(m=0),we(b)<Er&&(b=0);var _=b>0,w=m>0,E={isBound:!1,offset:0,pos:0},T={isBound:!1,offset:0,pos:0};if(m===0&&b===0)return{vertical:E,horizontal:T};if(m===0)_?c<h&&(T.pos=c,T.offset=h-c):a>h&&(T.pos=a,T.offset=h-a);else if(b===0)w?o<d&&(E.pos=o,E.offset=d-o):i>d&&(E.pos=i,E.offset=d-i);else{var C=b/m,N=n[1]-C*d,L=0,j=0,M=!1;w&&o<=d?(L=C*o+N,j=o,M=!0):!w&&d<=i&&(L=C*i+N,j=i,M=!0),M&&(L<a||L>c)&&(M=!1),M||(_&&c<=h?(L=c,j=(L-N)/C,M=!0):!_&&h<=a&&(L=a,j=(L-N)/C,M=!0)),M&&(E.isBound=!0,E.pos=j,E.offset=d-j,T.isBound=!0,T.pos=L,T.offset=h-L)}return{vertical:E,horizontal:T}}function ek(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],a=Math.min.apply(Math,Ce([],te(e),!1)),o=Math.max.apply(Math,Ce([],te(e),!1)),c=[];return r+1>a&&c.push({direction:"start",isBound:!0,offset:a-r,pos:r}),i-1<o&&c.push({direction:"end",isBound:!0,offset:o-i,pos:i}),c.length||c.push({isBound:!1,offset:0,pos:0}),c.sort(function(u,d){return we(d.offset)-we(u.offset)})}function tk(t,e,n){var r=n?t.map(function(i){return Vh(i,n)}):t;return r.some(function(i){return i[0]<e.left&&we(i[0]-e.left)>.1||i[0]>e.right&&we(i[0]-e.right)>.1||i[1]<e.top&&we(i[1]-e.top)>.1||i[1]>e.bottom&&we(i[1]-e.bottom)>.1})}function cW(t,e,n){var r=Ei(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(a,o){return we(a-t[n?0:1])-we(o-t[n?0:1])}).map(function(a){return _n([0,0],n?[a,e]:[e,a])})}function uW(t,e,n,r,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=L0(t),c=o.left,u=o.top,d=o.right,h=o.bottom,g=c-r[0],m=d-r[0],b=u-r[1],_=h-r[1],w={left:g,top:b,right:m,bottom:_};if(!tk(n,w,0))return[];var E=[];return[[g,0],[m,0],[b,1],[_,1]].forEach(function(T){var C=te(T,2),N=C[0],L=C[1];n.forEach(function(j){var M=_n([0,0],j);E.push.apply(E,Ce([],te(cW(j,N,L).map(function(A){return a+A-M}).filter(function(A){return!tk(e,w,A)}).map(function(A){return rt(A*180/Math.PI,Er)})),!1))})}),E}var dW=["left","right","center"],fW=["top","bottom","middle"],nk={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Go={start:"left",end:"right",center:"center"},$o={start:"top",end:"bottom",center:"middle"};function ou(){return{left:!1,top:!1,right:!1,bottom:!1}}function td(t,e){var n=t.props,r=n.snappable,i=n.bounds,a=n.innerBounds,o=n.verticalGuidelines,c=n.horizontalGuidelines,u=n.snapGridWidth,d=n.snapGridHeight,h=t.state,g=h.guidelines,m=h.enableSnap;return!r||!m||e&&r!==!0&&r.indexOf(e)<0?!1:!!(u||d||i||a||g&&g.length||o&&o.length||c&&c.length)}function Nw(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function hW(t,e){var n=Nw(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function Iw(t,e){var n=hW(t,e),r=fW.filter(function(a){return a in n}),i=dW.filter(function(a){return a in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(a){return n[a]}),vertical:i.map(function(a){return n[a]})}}function pW(t,e,n){var r=an(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function gW(t){var e=te(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];Math.abs(i)<Pn&&(i=0),Math.abs(a)<Pn&&(a=0);var o=0,c=0,u=0;return i?a?(o=-a/i,c=1,u=o*n[0]-n[1]):(c=1,u=-n[1]):(o=-1,u=n[0]),[o,c,u].map(function(d){return rt(d,Pn)})}var _O="snapRotationThreshold",wO="snapRotationDegrees",SO="snapHorizontalThreshold",EO="snapVerticalThreshold";function B0(t,e,n,r,i,a,o){var c;r===void 0&&(r=[]),i===void 0&&(i=[]);var u=t.props,d=((c=t.state.snapThresholdInfo)===null||c===void 0?void 0:c.multiples)||[1,1],h=vk(o,u[SO],5),g=vk(a,u[EO],5);return TO(t.state.guidelines,e,n,r,i,h,g,d)}function TO(t,e,n,r,i,a,o,c){return{vertical:ik(t,"vertical",e,o*c[0],r),horizontal:ik(t,"horizontal",n,a*c[1],i)}}function mW(t,e,n){var r=te(n,2),i=r[0],a=r[1],o=te(e,2),c=o[0],u=o[1],d=te(He(n,e),2),h=d[0],g=d[1],m=g>0,b=h>0;h=qm(h),g=qm(g);var _={isSnap:!1,offset:0,pos:0},w={isSnap:!1,offset:0,pos:0};if(h===0&&g===0)return{vertical:_,horizontal:w};var E=B0(t,h?[i]:[],g?[a]:[],[],[],void 0,void 0),T=E.vertical,C=E.horizontal;T.posInfos.filter(function(H){var K=H.pos;return b?K>=c:K<=c}),C.posInfos.filter(function(H){var K=H.pos;return m?K>=u:K<=u}),T.isSnap=T.posInfos.length>0,C.isSnap=C.posInfos.length>0;var N=d1(T),L=N.isSnap,j=N.guideline,M=d1(C),A=M.isSnap,R=M.guideline,D=A?R.pos[1]:0,V=L?j.pos[0]:0;if(h===0)A&&(w.isSnap=!0,w.pos=R.pos[1],w.offset=a-w.pos);else if(g===0)L&&(_.isSnap=!0,_.pos=V,_.offset=i-V);else{var P=g/h,B=n[1]-P*i,O=0,W=0,X=!1;L?(W=V,O=P*W+B,X=!0):A&&(O=D,W=(O-B)/P,X=!0),X&&(_.isSnap=!0,_.pos=W,_.offset=i-W,w.isSnap=!0,w.pos=O,w.offset=a-O)}return{vertical:_,horizontal:w}}function _o(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function rk(t,e,n,r){var i=Iw(t.props.snapDirections,e),a=B0(t,i.vertical,i.horizontal,i.verticalNames.map(function(u){return _o(u)}),i.horizontalNames.map(function(u){return _o(u)}),n,r),o=_o(i.horizontalNames[a.horizontal.index]),c=_o(i.verticalNames[a.vertical.index]);return{vertical:J(J({},a.vertical),{direction:c}),horizontal:J(J({},a.horizontal),{direction:o})}}function d1(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,a=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:a,pos:n.pos,guideline:o}}function ik(t,e,n,r,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var c=e==="vertical",u=c?0:1,d=n.map(function(g,m){var b=i[m]||"",_=t.map(function(w){var E=w.pos,T=g-E[u];return{offset:T,dist:we(T),guideline:w,direction:b}}).filter(function(w){var E=w.guideline,T=w.dist,C=E.type;return!(C!==e||T>r)}).sort(function(w,E){return w.dist-E.dist});return{pos:g,index:m,guidelineInfos:_,direction:b}}).filter(function(g){return g.guidelineInfos.length>0}).sort(function(g,m){return g.guidelineInfos[0].dist-m.guidelineInfos[0].dist}),h=d.length>0;return{isSnap:h,index:h?d[0].index:-1,direction:(o=(a=d[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:d}}function vW(t,e,n,r,i){var a=[];n[0]&&n[1]?a=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(m,b,_){var w=_[b+1]||_[0];a.push(m),a.push([(m[0]+w[0])/2,(m[1]+w[1])/2])}):t.props.keepRatio?a.push([-1,-1],[-1,1],[1,-1],[1,1],n):(a.push.apply(a,Ce([],te(qX([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));var o=a.map(function(m){return Fn(e,m)}),c=o.map(function(m){return m[0]}),u=o.map(function(m){return m[1]}),d=B0(t,c,u,a.map(function(m){return _o(m[0])}),a.map(function(m){return _o(m[1])}),r,i),h=_o(a.map(function(m){return m[0]})[d.vertical.index]),g=_o(a.map(function(m){return m[1]})[d.horizontal.index]);return{vertical:J(J({},d.vertical),{direction:h}),horizontal:J(J({},d.horizontal),{direction:g})}}function AO(t,e){var n=we(t.offset),r=we(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Er?1:r<Er?-1:n-r}function Fm(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],a=r.sign[e],o=n.offset[e],c=r.offset[e];if(i){if(!a)return-1}else return 1;return AO({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:c})})[0]}function yW(t,e,n){var r=[];if(n)we(e[0])!==1||we(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(c){var u=[o*i[0],c*i[1]];e[0]===u[0]&&e[1]===u[1]||r.push([e,u])})})}else if(t[0]){var a=we(e[0])===1?[1]:[1,-1];a.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var a=we(e[1])===1?[1]:[1,-1];a.forEach(function(c){r.push([[-1,e[1]],[-1,c*t[1]]],[[0,e[1]],[0,c*t[1]]],[[1,e[1]],[1,c*t[1]]])})}return r}function CO(t,e){var n=Kx([e[0][0],e[1][0]]),r=Kx([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Mw(t,e){var n=te(e,2),r=n[0],i=n[1],a=i[0]-r[0],o=i[1]-r[1];we(a)<Er&&(a=0),we(o)<Er&&(o=0);var c,u;if(!a)c=r[0],u=t[0];else if(!o)c=r[1],u=t[1];else{var d=o/a;c=d*(t[0]-r[0])+r[1],u=t[1]}return c-u}function RO(t,e,n,r){return r===void 0&&(r=Er),t.every(function(i){var a=Mw(i,e),o=a<=0;return o===n||we(a)<=r})}function ak(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function bW(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,a=e.horizontalSign,o=e.lineConstants,c=t.props.innerBounds;if(!c)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=c.left,d=c.top,h=c.width,g=c.height,m=[[u,d],[u,d+g]],b=[[u,d],[u+h,d]],_=[[u+h,d],[u+h,d+g]],w=[[u,d+g],[u+h,d+g]];if(RO([[u,d],[u+h,d],[u,d+g],[u+h,d+g]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var E=wo(n,o,b,i),T=wo(n,o,w,i),C=wo(n,o,m,a),N=wo(n,o,_,a),L=E.isBound&&T.isBound,j=E.isBound||T.isBound,M=C.isBound&&N.isBound,A=C.isBound||N.isBound,R=Mu(E.offset,T.offset),D=Mu(C.offset,N.offset),V=[0,0],P=!1,B=!1;return we(D)<we(R)?(V=[R,0],P=j,B=L):(V=[0,D],P=A,B=M),{isAllBound:B,isVerticalBound:j,isHorizontalBound:A,isBound:P,offset:V}}function wo(t,e,n,r,i,a){var o=te(e,2),c=o[0],u=o[1],d=t[0],h=n[0],g=n[1],m=qm(g[1]-h[1]),b=qm(g[0]-h[0]),_=u,w=c,E=-c/u;if(b){if(!m){if(a&&!_)return{isBound:!1,offset:0};if(w){var L=(h[1]-d[1])/E+d[0];return ak(L,h[0],g[0],r,i)}else{var C=h[1]-d[1],N=we(C)<=(i||0);return{isBound:N,offset:N?C:0}}}}else{if(a&&!w)return{isBound:!1,offset:0};if(_){var T=E*(h[0]-d[0])+d[1];return ak(T,h[1],g[1],r,i)}else{var C=h[0]-d[0],N=we(C)<=(i||0);return{isBound:N,offset:N?C:0}}}return{isBound:!1,offset:0}}function kO(t,e,n){return e.map(function(r){var i=bW(t,r),a=i.isBound,o=i.offset,c=i.isVerticalBound,u=i.isHorizontalBound,d=r.multiple,h=Ua({datas:n,distX:o[0],distY:o[1]}).map(function(g,m){return g*(d[m]?2/d[m]:0)});return{sign:d,isBound:a,isVerticalBound:c,isHorizontalBound:u,isSnap:!1,offset:h}})}function xW(t,e,n){var r,i=Ow(t,e,[0,0],!1).map(function(m){return J(J({},m),{multiple:m.multiple.map(function(b){return we(b)*2})})}),a=kO(t,i,n),o=Fm(a,0),c=Fm(a,1),u=0,d=0,h=o.isVerticalBound||c.isVerticalBound,g=o.isHorizontalBound||c.isHorizontalBound;return(h||g)&&(r=te($X({datas:n,distX:-o.offset[0],distY:-c.offset[1]}),2),u=r[0],d=r[1]),{vertical:{isBound:h,offset:u},horizontal:{isBound:g,offset:d}}}function _W(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function Ow(t,e,n,r){var i=t.state,a=i.allMatrix,o=i.is3d,c=ac(a,100,100,o?4:3),u=Fn(c,[0,0]);return _W(n,r).map(function(d){var h=te(d,3),g=h[0],m=h[1],b=h[2],_=[Fn(c,m),Fn(c,b)],w=gW(_),E=CO(u,_),T=E.vertical,C=E.horizontal,N=Mw(u,_)<=0;return{multiple:g,centerSign:N,verticalSign:T,horizontalSign:C,lineConstants:w,line:[Fn(e,m),Fn(e,b)]}})}function sk(t,e,n,r){var i=r?t.map(function(a){return Vh(a,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=Mw(n,a)<=0;return!RO(e,a,o)})}function wW(t){var e=te(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return we(n[0]);if(!a)return we(n[1]);var o=a/i;return we((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function SW(t){var e=te(t,2),n=e[0],r=e[1],i=r[0]-n[0],a=r[1]-n[1];if(!i)return[n[0],0];if(!a)return[0,n[1]];var o=a/i,c=-o*n[0]+n[1];return[-c/(o+1/o),c/(o*o+1)]}function EW(t,e,n,r,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var c=a.left,u=a.top,d=a.width,h=a.height,g=c-r[0],m=c+d-r[0],b=u-r[1],_=u+h-r[1],w=[[g,b],[m,b],[g,_],[m,_]],E=Fn(n,[0,0]);if(!sk(n,w,E,0))return[];var T=[],C=w.map(function(N){return[Ei(N),_n([0,0],N)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(N){var L=_n([0,0],SW(N)),j=wW(N);T.push.apply(T,Ce([],te(C.filter(function(M){var A=te(M,1),R=A[0];return R&&j<=R}).map(function(M){var A=te(M,2),R=A[0],D=A[1],V=Math.acos(R?j/R:0),P=D+V,B=D-V;return[o+P-L,o+B-L]}).reduce(function(M,A){return M.push.apply(M,Ce([],te(A),!1)),M},[]).filter(function(M){return!sk(e,w,E,M)}).map(function(M){return rt(M*180/Math.PI,Er)})),!1))}),T}function TW(t){var e=t.props.innerBounds,n=ou();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,a=r.pos2,o=r.pos3,c=r.pos4,u=[i,a,o,c],d=Fn(u,[0,0]),h=e.left,g=e.top,m=e.width,b=e.height,_=[[h,g],[h,g+b]],w=[[h,g],[h+m,g]],E=[[h+m,g],[h+m,g+b]],T=[[h,g+b],[h+m,g+b]],C=Ow(t,u,[0,0],!1),N=[],L=[];return C.forEach(function(j){var M=j.line,A=j.lineConstants,R=CO(d,M),D=R.horizontal,V=R.vertical,P=wo(M,A,w,V,1,!0),B=wo(M,A,T,V,1,!0),O=wo(M,A,_,D,1,!0),W=wo(M,A,E,D,1,!0);P.isBound&&!n.top&&(N.push(g),n.top=!0),B.isBound&&!n.bottom&&(N.push(g+b),n.bottom=!0),O.isBound&&!n.left&&(L.push(h),n.left=!0),W.isBound&&!n.right&&(L.push(h+m),n.right=!0)}),{boundMap:n,horizontal:N,vertical:L}}function AW(t,e,n,r){var i=e[0]-t[0],a=e[1]-t[1];if(we(i)<Pn&&(i=0),we(a)<Pn&&(a=0),!i)return r?[0,0]:[0,n];if(!a)return r?[n,0]:[0,0];var o=a/i,c=t[1]-o*t[0];if(r){var u=o*(e[0]+n)+c;return[n,u-e[1]]}else{var d=(e[1]+n-c)/o;return[d-e[0],n]}}function f1(t,e,n,r,i){var a=AW(t,e,n,r);if(!a)return{isOutside:!1,offset:[0,0]};var o=vs(t,e),c=vs(a,t),u=vs(a,e),d=c>o||u>o,h=te(Ua({datas:i,distX:a[0],distY:a[1]}),2),g=h[0],m=h[1];return{offset:[g,m],isOutside:d}}function Gm(t,e){return t.isBound?t.offset:e.isSnap?d1(e).offset:0}function CW(t,e,n,r,i){var a=te(e,2),o=a[0],c=a[1],u=te(n,2),d=u[0],h=u[1],g=te(r,2),m=g[0],b=g[1],_=te(i,2),w=_[0],E=_[1],T=-w,C=-E;if(t&&o&&c){T=0,C=0;var N=[];if(d&&h?N.push([0,E],[w,0]):d?N.push([w,0]):h?N.push([0,E]):m&&b?N.push([0,E],[w,0]):m?N.push([w,0]):b&&N.push([0,E]),N.length){N.sort(function(A,R){return Ei(He([o,c],A))-Ei(He([o,c],R))});var L=N[0];if(L[0]&&we(o)>Pn)T=-L[0],C=c*we(o+T)/we(o)-c;else if(L[1]&&we(c)>Pn){var j=c;C=-L[1],T=o*we(c+C)/we(j)-o}if(t&&h&&d)if(we(T)>Pn&&we(T)<we(w)){var M=we(w)/we(T);T*=M,C*=M}else if(we(C)>Pn&&we(C)<we(E)){var M=we(E)/we(C);T*=M,C*=M}else T=Mu(-w,T),C=Mu(-E,C)}}else T=o||d?-w:0,C=c||h?-E:0;return[T,C]}function RW(t,e,n,r,i,a){if(!td(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Vw(a.absolutePoses,[e,n]),c=wi(o),u=c.left,d=c.right,h=c.top,g=c.bottom,m={horizontal:o.map(function(W){return W[1]}),vertical:o.map(function(W){return W[0]})},b=Nw(t.props.snapDirections),_=Iw(b,{left:u,right:d,top:h,bottom:g,center:(u+d)/2,middle:(h+g)/2}),w=U0(t,i,_,m),E=w.vertical,T=w.horizontal,C=xW(t,o,a),N=C.vertical,L=C.horizontal,j=E.isSnap,M=T.isSnap,A=E.isBound||N.isBound,R=T.isBound||L.isBound,D=Mu(E.offset,N.offset),V=Mu(T.offset,L.offset),P=te(CW(r,[e,n],[A,R],[j,M],[D,V]),2),B=P[0],O=P[1];return[{isBound:A,isSnap:j,offset:B},{isBound:R,isSnap:M,offset:O}]}function U0(t,e,n,r){r===void 0&&(r=n);var i=Dw(L0(t),r.vertical,r.horizontal),a=i.horizontal,o=i.vertical,c=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:B0(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),u=c.horizontal,d=c.vertical,h=Gm(a[0],u),g=Gm(o[0],d),m=we(h),b=we(g);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:h,dist:m,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:g,dist:b,bounds:o,snap:d}}}function ok(t,e,n,r,i,a,o){o===void 0&&(o=[1,1]);var c=Dw(e,n,r),u=c.horizontal,d=c.vertical,h=TO(t,n,r,[],[],i,a,o),g=h.horizontal,m=h.vertical,b=Gm(u[0],g),_=Gm(d[0],m),w=we(b),E=we(_);return{horizontal:{isBound:u[0].isBound,isSnap:g.isSnap,snapIndex:g.index,offset:b,dist:w,bounds:u,snap:g},vertical:{isBound:d[0].isBound,isSnap:m.isSnap,snapIndex:m.index,offset:_,dist:E,bounds:d,snap:m}}}function kW(t,e,n,r){var i=_n(t,e)/Math.PI*180,a=n.vertical,o=a.isBound,c=a.isSnap,u=a.dist,d=n.horizontal,h=d.isBound,g=d.isSnap,m=d.dist,b=i%180,_=b<3||b>177,w=b>87&&b<93;return m<u&&(o||c&&!w&&(!r||!_))?"vertical":h||g&&!_&&(!r||!w)?"horizontal":""}function DW(t,e,n,r,i,a){return n.map(function(o){var c=te(o,2),u=c[0],d=c[1],h=Fn(e,u),g=Fn(e,d),m=r?NW(t,h,g,i):U0(t,i,{vertical:[g[0]],horizontal:[g[1]]}),b=m.horizontal,_=b.offset,w=b.isBound,E=b.isSnap,T=m.vertical,C=T.offset,N=T.isBound,L=T.isSnap,j=He(d,u);if(!C&&!_)return{isBound:N||w,isSnap:L||E,sign:j,offset:[0,0]};var M=kW(h,g,m,r);if(!M)return{sign:j,isBound:!1,isSnap:!1,offset:[0,0]};var A=M==="vertical",R=[0,0];return!r&&we(d[0])===1&&we(d[1])===1&&u[0]!==d[0]&&u[1]!==d[1]?R=Ua({datas:a,distX:-C,distY:-_}):R=f1(h,g,-(A?C:_),A,a).offset,R=R.map(function(D,V){return D*(j[V]?2/j[V]:0)}),{sign:j,isBound:A?N:w,isSnap:A?L:E,offset:R}})}function lk(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function NW(t,e,n,r){var i=lW(t,e,n),a=i.horizontal,o=i.vertical,c=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:mW(t,e,n),u=c.horizontal,d=c.vertical,h=lk(a,u),g=lk(o,d),m=we(h),b=we(g);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:h,dist:m},vertical:{isBound:o.isBound,isSnap:d.isSnap,offset:g,dist:b}}}function IW(t,e,n,r,i){var a=[-n[0],-n[1]],o=t.state,c=o.width,u=o.height,d=t.props.bounds,h=1/0,g=1/0;if(d){var m=[[n[0],-n[1]],[-n[0],n[1]]],b=d.left,_=b===void 0?-1/0:b,w=d.top,E=w===void 0?-1/0:w,T=d.right,C=T===void 0?1/0:T,N=d.bottom,L=N===void 0?1/0:N;m.forEach(function(j){var M=j[0]!==a[0],A=j[1]!==a[1],R=Fn(e,j),D=_n(r,R)*360/Math.PI;if(A){var V=R.slice();(we(D-360)<2||we(D-180)<2)&&(V[1]=r[1]);var P=f1(r,V,(r[1]<R[1]?L:E)-R[1],!1,i),B=te(P.offset,2),O=B[1],W=P.isOutside;isNaN(O)||(g=u+(W?1:-1)*we(O))}if(M){var V=R.slice();(we(D-90)<2||we(D-270)<2)&&(V[0]=r[0]);var X=f1(r,V,(r[0]<R[0]?C:_)-R[0],!0,i),H=te(X.offset,1),K=H[0],ee=X.isOutside;isNaN(K)||(h=c+(ee?1:-1)*we(K))}})}return{maxWidth:h,maxHeight:g}}var yr={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,a=n.zoom,o=t.getState(),c=o.dragInfo,u=o.beforeOrigin;if(r||!i||!c)return[];var d=c.dist;if(!d[0]&&!d[1])return[];var h=Ei(d),g=_n(d,[0,0]);return[e.createElement("div",{className:Fe("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(h,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(g,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,a=t.state,o=a.gestos,c=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(c.left||"")||0,n.top=parseFloat(c.top||"")||0,n.bottom=parseFloat(c.bottom||"")||0,n.right=parseFloat(c.right||"")||0,n.startValue=[0,0],ic(t,e),z0(t,e,"translate"),QW(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var u=ct(t,e,J({set:function(h){n.startValue=h}},V0(t,e))),d=r||Pe(t,"onDragStart",u);return d!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?u:!1},drag:function(t,e){if(e){P0(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,a=e.isPinch,o=e.deltaOffset,c=e.useSnap,u=e.isRequest,d=e.isGroup,h=e.parentThrottleDrag,g=e.distX,m=e.distY,b=n.isDrag,_=n.prevDist,w=n.prevBeforeDist,E=n.startValue;if(b){o&&(g+=o[0],m+=o[1]);var T=t.props,C=T.parentMoveable,N=d?0:T.throttleDrag||h||0,L=r?0:T.throttleDragRotate||0,j=0,M=!1,A=!1,R=!1,D=!1;if(!r&&L>0&&(g||m)){var V=T.startDragRotate||0,P=rt(V+_n([0,0],[g,m])*180/Math.PI,L)-V,B=m*Math.abs(Math.cos((P-90)/180*Math.PI)),O=g*Math.abs(Math.cos(P/180*Math.PI)),W=Ei([O,B]);j=P*Math.PI/180,g=W*Math.cos(j),m=W*Math.sin(j)}if(!a&&!r&&!i){var X=te(RW(t,g,m,L,!c&&u||o,n),2),H=X[0],K=X[1];M=H.isSnap,A=H.isBound,R=K.isSnap,D=K.isBound;var ee=H.offset,ie=K.offset;g+=ee,m+=ie}var q=At(uO({datas:n,distX:g,distY:m}),E),F=At(GX({datas:n,distX:g,distY:m}),E);UR(F,Er),UR(q,Er),L||(!M&&!A&&(F[0]=rt(F[0],N),q[0]=rt(q[0],N)),!R&&!D&&(F[1]=rt(F[1],N),q[1]=rt(q[1],N)));var Y=He(q,E),ne=He(F,E),Z=He(ne,_),oe=He(Y,w);n.prevDist=ne,n.prevBeforeDist=Y,n.passDelta=Z,n.passDist=ne;var ce=n.left+Y[0],me=n.top+Y[1],ge=n.right-Y[0],Te=n.bottom-Y[1],Ne=j0(n,"translate(".concat(F[0],"px, ").concat(F[1],"px)"),"translate(".concat(ne[0],"px, ").concat(ne[1],"px)"));if(Rw(e,Ne),t.state.dragInfo.dist=r?[0,0]:ne,!(!r&&!C&&Z.every(function(Be){return!Be})&&oe.some(function(Be){return!Be}))){var ae=t.state,Ae=ae.width,De=ae.height,Me=ct(t,e,J({transform:Ne,dist:ne,delta:Z,translate:F,beforeDist:Y,beforeDelta:oe,beforeTranslate:q,left:ce,top:me,right:ge,bottom:Te,width:Ae,height:De,isPinch:a},_r({transform:Ne},e)));return!r&&Pe(t,"onDrag",Me),Me}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,J(J({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ei(t,e,{});return!n&&Pe(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=this.dragStart(t,e);if(!c)return!1;var u=Pb(t,this,"dragStart",[a||0,o||0],e,!1,"draggable"),d=u.childEvents,h=u.eventParams,g=J(J({},c),{targets:t.props.targets,events:h}),m=Pe(t,"onDragGroupStart",g);i.isDrag=m!==!1;var b=(r=(n=d[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[b[0]%1,b[1]%1],i.isDrag?c:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,J(J({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,a=Pb(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=J({targets:t.props.targets,events:a},r);return Pe(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=Pb(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return Pe(t,"onDragGroupEnd",ei(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:e,useSnap:a}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:a}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function DO(t,e){var n=Fn(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function MW(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=[i/2*(1+e[0]),a/2*(1+e[1])],u=an(n,c,o),d=[0,0];return{fixedPosition:u,fixedDirection:e,fixedOffset:d}}function NO(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,a=t.height,o=r?4:3,c=QX(e,i,a),u=an(n,e,o),d=[i?0:e[0],a?0:e[1]];return{fixedPosition:u,fixedDirection:c,fixedOffset:d}}var ck=Bw("resizable"),h1={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:yO("resizable"),dragControlCondition:ck,viewClassName:Lw("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,a=e.isGroup,o=e.parentDirection,c=e.parentGesto,u=e.datas,d=e.parentFixedDirection,h=e.parentEvent,g=$O(o,i,r,u),m=t.state,b=m.target,_=m.width,w=m.height,E=m.gestos;if(!g||!b||E.resizable)return!1;E.resizable=c||t.controlGesto,!i&&ic(t,e),u.datas={},u.direction=g,u.startOffsetWidth=_,u.startOffsetHeight=w,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=m.inlineCSSWidth||m.cssWidth,u.startHeight=m.inlineCSSHeight||m.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[m.minOffsetWidth,m.minOffsetHeight],u.maxSize=[m.maxOffsetWidth,m.maxOffsetHeight]);var T=t.props.transformOrigin||"% %";u.transformOrigin=jr(T)?T.split(" "):T,u.startOffsetMatrix=m.offsetMatrix,u.startTransformOrigin=m.transformOrigin,u.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!g[0]&&!g[1]||g[0]||!g[1];function C(D){u.ratio=D&&isFinite(D)?D:0}u.startPositions=Ti(t.state);function N(D){var V=DO(u.startPositions,D);u.fixedDirection=V.fixedDirection,u.fixedPosition=V.fixedPosition,u.fixedOffset=V.fixedOffset}function L(D){var V=NO(t.state,D);u.fixedDirection=V.fixedDirection,u.fixedPosition=V.fixedPosition,u.fixedOffset=V.fixedOffset}function j(D){u.minSize=[Ft("".concat(D[0]),0)||0,Ft("".concat(D[1]),0)||0]}function M(D){var V=[D[0]||1/0,D[1]||1/0];(!ku(V[0])||isFinite(V[0]))&&(V[0]=Ft("".concat(V[0]),0)||1/0),(!ku(V[1])||isFinite(V[1]))&&(V[1]=Ft("".concat(V[1]),0)||1/0),u.maxSize=V}C(_/w),N(d||[-g[0],-g[1]]),u.setFixedDirection=N,u.setFixedPosition=L,u.setMin=j,u.setMax=M;var A=ct(t,e,{direction:g,startRatio:u.ratio,set:function(D){var V=te(D,2),P=V[0],B=V[1];u.startWidth=P,u.startHeight=B},setMin:j,setMax:M,setRatio:C,setFixedDirection:N,setFixedPosition:L,setOrigin:function(D){u.transformOrigin=D},dragStart:yr.dragStart(t,new Nu().dragStart([0,0],e))}),R=h||Pe(t,"onResizeStart",A);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,R!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:g}),u.isResize?A:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,a=e.isPinch,o=e.parentKeepRatio,c=e.dragClient,u=e.parentDist,d=e.useSnap,h=e.isRequest,g=e.isGroup,m=e.parentEvent,b=e.resolveMatrix,_=r.isResize,w=r.transformOrigin,E=r.startWidth,T=r.startHeight,C=r.prevWidth,N=r.prevHeight,L=r.minSize,j=r.maxSize,M=r.ratio,A=r.startOffsetWidth,R=r.startOffsetHeight,D=r.isWidth;if(!_)return;if(b){var V=t.state.is3d,P=r.startOffsetMatrix,B=r.startTransformOrigin,O=V?4:3,W=rh(Bm(e)),X=Math.sqrt(W.length);O!==X&&(W=Zi(W,X,O));var H=Fh(P,W,B,O),K=ac(H,A,R,O);r.startPositions=K,r.nextTargetMatrix=W,r.nextAllMatrix=H}var ee=Zl(t.props,"resizable"),ie=ee.resizeFormat,q=ee.throttleResize,F=q===void 0?i?0:1:q,Y=ee.parentMoveable,ne=ee.keepRatioFinally,Z=r.direction,oe=Z,ce=0,me=0;!Z[0]&&!Z[1]&&(oe=[1,1]);var ge=M&&(o??ee.keepRatio)||!1;function Te(){var ut=r.fixedDirection,kt=KO(oe,ge,r,e);ce=kt.distWidth,me=kt.distHeight;var cn=oe[0]-ut[0]||ge?Math.max(A+ce,Er):A,Vt=oe[1]-ut[1]||ge?Math.max(R+me,Er):R;return ge&&A&&R&&(D?Vt=cn/M:cn=Vt*M),[cn,Vt]}var Ne=te(Te(),2),ae=Ne[0],Ae=Ne[1];m||(r.setFixedDirection(r.fixedDirection),Pe(t,"onBeforeResize",ct(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(ut){var kt;return r.setFixedDirection(ut),kt=te(Te(),2),ae=kt[0],Ae=kt[1],[ae,Ae]},setFixedPosition:function(ut){var kt;return r.setFixedPosition(ut),kt=te(Te(),2),ae=kt[0],Ae=kt[1],[ae,Ae]},boundingWidth:ae,boundingHeight:Ae,setSize:function(ut){var kt;kt=te(ut,2),ae=kt[0],Ae=kt[1]}},!0)));var De=c;c||(!i&&a?De=tW(t,[0,0]):De=r.fixedPosition);var Me=[0,0];a||(Me=WW(t,ae,Ae,Z,De,!d&&h,r)),u&&(!u[0]&&(Me[0]=0),!u[1]&&(Me[1]=0));function Be(){var ut;ie&&(ut=te(ie([ae,Ae]),2),ae=ut[0],Ae=ut[1]),ae=rt(ae,F),Ae=rt(Ae,F)}if(ge){oe[0]&&oe[1]&&Me[0]&&Me[1]&&(we(Me[0])>we(Me[1])?Me[1]=0:Me[0]=0);var Ve=!Me[0]&&!Me[1];Ve&&Be(),oe[0]&&!oe[1]||Me[0]&&!Me[1]||Ve&&D?(ae+=Me[0],Ae=ae/M):(!oe[0]&&oe[1]||!Me[0]&&Me[1]||Ve&&!D)&&(Ae+=Me[1],ae=Ae*M)}else ae+=Me[0],Ae+=Me[1],ae=Math.max(0,ae),Ae=Math.max(0,Ae);n=te(w4([ae,Ae],L,j,ge?M:!1),2),ae=n[0],Ae=n[1],Be(),ge&&(g||ne)&&(D?Ae=ae/M:ae=Ae*M),ce=ae-A,me=Ae-R;var Se=[ce-C,me-N];r.prevWidth=ce,r.prevHeight=me;var ze=eW(t,ae,Ae,De,w,r);if(!(!Y&&Se.every(function(ut){return!ut})&&ze.every(function(ut){return!ut}))){var Ie=yr.drag(t,Uh(e,t.state,ze,!!a,!1,"draggable")),Le=Ie.transform,st=E+ce,Tt=T+me,Ke=ct(t,e,J({width:st,height:Tt,offsetWidth:Math.round(ae),offsetHeight:Math.round(Ae),startRatio:M,boundingWidth:ae,boundingHeight:Ae,direction:Z,dist:[ce,me],delta:Se,isPinch:!!a,drag:Ie},qO({style:{width:"".concat(st,"px"),height:"".concat(Tt,"px")},transform:Le},Ie,e)));return!m&&Pe(t,"onResize",Ke),Ke}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,a=n.startOffsetHeight,o=n.prevWidth,c=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var u=t.state,d=u.width,h=u.height,g=d-(i+o),m=h-(a+c),b=we(g)>3,_=we(m)>3;if(b&&(n.startWidth+=g,n.startOffsetWidth+=g,n.prevWidth+=g),_&&(n.startHeight+=m,n.startOffsetHeight+=m,n.prevHeight+=m),b||_)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ei(t,e,{});return!r&&Pe(t,"onResizeEnd",i),i}},dragGroupControlCondition:ck,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,J(J({},e),{isGroup:!0}));if(!r)return!1;var i=qi(t,"resizable",e),a=n.startOffsetWidth,o=n.startOffsetHeight;function c(){var b=n.minSize;i.forEach(function(_){var w=_.datas,E=w.minSize,T=w.startOffsetWidth,C=w.startOffsetHeight,N=a*(T?E[0]/T:0),L=o*(C?E[1]/C:0);b[0]=Math.max(b[0],N),b[1]=Math.max(b[1],L)})}function u(){var b=n.maxSize;i.forEach(function(_){var w=_.datas,E=w.maxSize,T=w.startOffsetWidth,C=w.startOffsetHeight,N=a*(T?E[0]/T:0),L=o*(C?E[1]/C:0);b[0]=Math.min(b[0],N),b[1]=Math.min(b[1],L)})}var d=ys(t,this,"dragControlStart",e,function(b,_){return Um(t,b,n,_)});c(),u();var h=function(b){r.setFixedDirection(b),d.forEach(function(_,w){_.setFixedDirection(b),Um(t,_.moveable,n,i[w])})};n.setFixedDirection=h;var g=J(J({},r),{targets:t.props.targets,events:d.map(function(b){return J(J({},b),{setMin:function(_){b.setMin(_),c()},setMax:function(_){b.setMax(_),u()}})}),setFixedDirection:h,setMin:function(b){r.setMin(b),c()},setMax:function(b){r.setMax(b),u()}}),m=Pe(t,"onResizeGroupStart",g);return n.isResize=m!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Zl(t.props,"resizable");G0(t,"onBeforeResize",function(b){Pe(t,"onBeforeResizeGroup",ct(t,e,J(J({},b),{targets:r.targets}),!0))});var i=this.dragControl(t,J(J({},e),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,c=i.dist,u=r.keepRatio,d=[a/(a-c[0]),o/(o-c[1])],h=n.fixedPosition,g=ys(t,this,"dragControl",e,function(b,_){var w=te(fr(zh(t.rotation/180*Math.PI,3),[_.datas.originalX*d[0],_.datas.originalY*d[1],1],3),2),E=w[0],T=w[1];return J(J({},_),{parentDist:null,parentScale:d,dragClient:At(h,[E,T]),parentKeepRatio:u})}),m=J({targets:r.targets,events:g},i);return Pe(t,"onResizeGroup",m),m}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=ys(t,this,"dragControlEnd",e),a=ei(t,e,{targets:t.props.targets,events:i});return Pe(t,"onResizeGroupEnd",a),n}},request:function(t){var e={},n=0,r=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var c;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(c=o?.horizontal)!==null&&c!==void 0?c:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function jb(t,e,n,r,i){var a=t.props.groupable,o=t.state,c=o.is3d?4:3,u=e.origin,d=an(t.state.rootMatrix,He([u[0],u[1]],a?[0,0]:[o.left,o.top]),c),h=At([i.left,i.top],d);e.startAbsoluteOrigin=h,e.prevDeg=_n(h,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=vs(h,[n,r])}function nm(t,e,n){var r=n.defaultDeg,i=n.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var c=e*(o*360+t-r);return n.prevDeg=r+c,c}function Vb(t,e,n,r){return nm(_n(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function zb(t,e,n,r,i,a){var o=t.props.throttleRotate,c=o===void 0?0:o,u=n.prevSnapDeg,d=0,h=!1;if(a){var g=XW(t,e,r,i+r);h=g.isSnap,d=i+g.dist}h||(d=rt(i+r,c));var m=d-i;return n.prevSnapDeg=m,[m-u,m,d]}function IO(t,e,n){var r=te(e,4),i=r[0],a=r[1],o=r[2],c=r[3];if(t==="none")return[];if(Vn(t))return t.map(function(E){return IO(E,[i,a,o,c],n)[0]});var u=te((t||"top").split("-"),2),d=u[0],h=u[1],g=[i,a];d==="left"?g=[o,i]:d==="right"?g=[a,c]:d==="bottom"&&(g=[c,o]);var m=[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2],b=FO(g,n);if(h){var _=h==="top"||h==="left",w=d==="bottom"||d==="left";m=g[_&&!w||!_&&w?0:1]}return[[m,b]]}function p1(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Un(n,Fe("rotation-control"))||t.props.rotateAroundControls&&Un(n,Fe("around-control"))||Un(n,Fe("control"))&&Un(n,Fe("rotatable")))return!0;var r=t.props.rotationTarget;return r?Uw(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var OW=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,PW={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[OW],viewClassName:function(t){return t.isDragging("rotatable")?Fe("view-rotation-dragging"):""},render:function(t,e){var n=Zl(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,a=n.zoom,o=n.renderDirections,c=n.rotateAroundControls,u=n.resolveAblesWithRotatable,d=t.getState(),h=d.renderPoses,g=d.direction;if(!r)return null;var m=IO(i,h,g),b=[];if(m.forEach(function(T,C){var N=te(T,2),L=N[0],j=N[1];b.push(e.createElement("div",{key:"rotation".concat(C),className:Fe("rotation"),style:{transform:"translate(-50%) translate(".concat(L[0],"px, ").concat(L[1],"px) rotate(").concat(j,"rad)")}},e.createElement("div",{className:Fe("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:Fe("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var _=Cs(u||{}),w={};_.forEach(function(T){u[T].forEach(function(C){w[C]=T})});var E=[];Vn(o)&&(E=o.map(function(T){var C=w[T];return{data:C?{resolve:C}:{},classNames:C?["move"]:[],dir:T}})),b.push.apply(b,Ce([],te(gO(t,"rotatable",E,e)),!1))}return c&&b.push.apply(b,Ce([],te(xO(t,e)),!1)),b},dragControlCondition:p1,dragControlStart:function(t,e){var n,r,i=e.datas,a=e.clientX,o=e.clientY,c=e.parentRotate,u=e.parentFlag,d=e.isPinch,h=e.isRequest,g=t.state,m=g.target,b=g.left,_=g.top,w=g.direction,E=g.beforeDirection,T=g.targetTransform,C=g.moveableClientRect,N=g.offsetMatrix,L=g.targetMatrix,j=g.allMatrix,M=g.width,A=g.height;if(!h&&!m)return!1;var R=t.getRect();i.rect=R,i.transform=T,i.left=b,i.top=_;var D=function(oe){var ce=NO(t.state,oe);i.fixedDirection=ce.fixedDirection,i.fixedOffset=ce.fixedOffset,i.fixedPosition=ce.fixedPosition,F&&F.setFixedPosition(oe)},V=function(oe){var ce=MW(t.state,oe);i.fixedDirection=ce.fixedDirection,i.fixedOffset=ce.fixedOffset,i.fixedPosition=ce.fixedPosition,F&&F.setFixedDirection(oe)},P=a,B=o;if(h||d||u){var O=c||0;i.beforeInfo={origin:R.beforeOrigin,prevDeg:O,defaultDeg:O,prevSnapDeg:0,startDist:0},i.afterInfo=J(J({},i.beforeInfo),{origin:R.origin}),i.absoluteInfo=J(J({},i.beforeInfo),{origin:R.origin,startValue:O})}else{var W=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(W){var X=W.getAttribute("data-direction")||"",H=UX[X];if(H){i.isControl=!0,i.isAroundControl=Un(W,Fe("around-control")),i.controlDirection=H;var K=W.getAttribute("data-resolve");K&&(i.resolveAble=K);var ee=uK(g.rootMatrix,g.renderPoses,C);n=te(Fn(ee,H),2),P=n[0],B=n[1]}}i.beforeInfo={origin:R.beforeOrigin},i.afterInfo={origin:R.origin},i.absoluteInfo={origin:R.origin,startValue:R.rotation};var ie=D;D=function(oe){var ce=g.is3d?4:3,me=te(At(X4(L,ce),oe),2),ge=me[0],Te=me[1],Ne=fr(N,Wl([ge,Te],ce)),ae=fr(j,Wl([oe[0],oe[1]],ce));ie(oe);var Ae=g.posDelta;i.beforeInfo.origin=He(Ne,Ae),i.afterInfo.origin=He(ae,Ae),i.absoluteInfo.origin=He(ae,Ae),jb(t,i.beforeInfo,P,B,C),jb(t,i.afterInfo,P,B,C),jb(t,i.absoluteInfo,P,B,C)},V=function(oe){var ce=Fn([[0,0],[M,0],[0,A],[M,A]],oe);D(ce)}}i.startClientX=P,i.startClientY=B,i.direction=w,i.beforeDirection=E,i.startValue=0,i.datas={},z0(t,e,"rotate");var q=!1,F=!1;if(i.isControl&&i.resolveAble){var Y=i.resolveAble;Y==="resizable"&&(F=h1.dragControlStart(t,J(J({},new Nu("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}F||(q=yr.dragStart(t,new Nu().dragStart([0,0],e))),D(dK(t));var ne=ct(t,e,J(J({set:function(oe){i.startValue=oe*Math.PI/180},setFixedDirection:V,setFixedPosition:D},V0(t,e)),{dragStart:q,resizeStart:F})),Z=Pe(t,"onRotateStart",ne);return i.isRotate=Z!==!1,g.snapRenderInfo={request:e.isRequest},i.isRotate?ne:!1},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.clientDistX,c=e.clientDistY,u=e.parentRotate,d=e.parentFlag,h=e.isPinch,g=e.groupDelta,m=e.resolveMatrix,b=a.beforeDirection,_=a.beforeInfo,w=a.afterInfo,E=a.absoluteInfo,T=a.isRotate,C=a.startValue,N=a.rect,L=a.startClientX,j=a.startClientY;if(T){P0(t,e,"rotate");var M=FX(e),A=b*M,R=t.props.parentMoveable,D=0,V,P,B=0,O,W,X=0,H,K,ee=180/Math.PI*C,ie=E.startValue,q=!1,F=L+o,Y=j+c;if(!d&&"parentDist"in e){var ne=e.parentDist;V=ne,O=ne,H=ne}else h||d?(V=nm(u,b,_),O=nm(u,A,w),H=nm(u,A,E)):(V=Vb(F,Y,b,_),O=Vb(F,Y,A,w),H=Vb(F,Y,A,E),q=!0);if(P=ee+V,W=ee+O,K=ie+H,Pe(t,"onBeforeRotate",ct(t,e,{beforeRotation:P,rotation:W,absoluteRotation:K,setRotation:function(De){O=De-ee,V=O,H=O}},!0)),n=te(zb(t,N,_,V,ee,q),3),D=n[0],V=n[1],P=n[2],r=te(zb(t,N,w,O,ee,q),3),B=r[0],O=r[1],W=r[2],i=te(zb(t,N,E,H,ie,q),3),X=i[0],H=i[1],K=i[2],!(!X&&!B&&!D&&!R&&!m)){var Z=j0(a,"rotate(".concat(W,"deg)"),"rotate(".concat(O,"deg)"));m&&(a.fixedPosition=kw(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var oe=JX(t,O,a),ce=He(At(g||[0,0],oe),a.prevInverseDist||[0,0]);a.prevInverseDist=oe,a.requestValue=null;var me=fO(t,Z,ce,h,e),ge=me,Te=vs([F,Y],E.startAbsoluteOrigin)-E.startDist,Ne=void 0;if(a.resolveAble==="resizable"){var ae=h1.dragControl(t,J(J({},Uh(e,t.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:Te}));ae&&(Ne=ae,ge=qO(ge,ae,e))}var Ae=ct(t,e,J(J({delta:B,dist:O,rotate:W,rotation:W,beforeDist:V,beforeDelta:D,beforeRotate:P,beforeRotation:P,absoluteDist:H,absoluteDelta:X,absoluteRotate:K,absoluteRotation:K,isPinch:!!h,resize:Ne},me),ge));return Pe(t,"onRotate",Ae),Ae}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ei(t,e,{});return Pe(t,"onRotateEnd",r),r}},dragGroupControlCondition:p1,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,a=r.top,o=r.beforeOrigin,c=this.dragControlStart(t,e);if(!c)return!1;c.set(n.beforeDirection*t.rotation);var u=ys(t,this,"dragControlStart",e,function(g,m){var b=g.state,_=b.left,w=b.top,E=b.beforeOrigin,T=At(He([_,w],[i,a]),He(E,o));return m.datas.startGroupClient=T,m.datas.groupClient=T,J(J({},m),{parentRotate:0})}),d=J(J({},c),{targets:t.props.targets,events:u}),h=Pe(t,"onRotateGroupStart",d);return n.isRotate=h!==!1,n.isRotate?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){G0(t,"onBeforeRotate",function(d){Pe(t,"onBeforeRotateGroup",ct(t,e,J(J({},d),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,a=r.beforeDist,o=a/180*Math.PI,c=ys(t,this,"dragControl",e,function(d,h){var g=h.datas.startGroupClient,m=te(h.datas.groupClient,2),b=m[0],_=m[1],w=te(Vh(g,o*i),2),E=w[0],T=w[1],C=[E-b,T-_];return h.datas.groupClient=[E,T],J(J({},h),{parentRotate:a,groupDelta:C})});t.rotation=i*r.beforeRotation;var u=J({targets:t.props.targets,events:c,set:function(d){t.rotation=d},setGroupRotation:function(d){t.rotation=d}},r);return Pe(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=ys(t,this,"dragControlEnd",e),a=ei(t,e,{targets:t.props.targets,events:i});return Pe(t,"onRotateGroupEnd",a),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function jW(t,e){var n,r=t.direction,i=t.classNames,a=t.size,o=t.pos,c=t.zoom,u=t.key,d=r==="horizontal",h=d?"Y":"X";return e.createElement("div",{key:u,className:i.join(" "),style:(n={},n[d?"width":"height"]="".concat(a),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(c,")"),n)})}function Pw(t,e){return jW(J(J({},t),{classNames:Ce([Fe("line","guideline",t.direction)],te(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(rt(n,.1),"px")})}),e)}function uk(t,e,n,r,i,a,o,c){var u=t.props.zoom;return n.map(function(d,h){var g=d.type,m=d.pos,b=[0,0];return b[o]=r,b[o?0:1]=-i+m,Pw({key:"".concat(e,"TargetGuideline").concat(h),classNames:[Fe("target","bold",g)],posValue:b,sizeValue:a,zoom:u,direction:e},c)})}function dk(t,e,n,r,i,a){var o=t.props,c=o.zoom,u=o.isDisplayInnerSnapDigit,d=e==="horizontal"?Go:$o,h=i[d.start],g=i[d.end];return n.filter(function(m){var b=m.hide,_=m.elementRect;if(b)return!1;if(u&&_){var w=_.rect;if(w[d.start]<=h&&g<=w[d.end])return!1}return!0}).map(function(m,b){var _=m.pos,w=m.size,E=m.element,T=m.className,C=[-r[0]+_[0],-r[1]+_[1]];return Pw({key:"".concat(e,"-default-guideline-").concat(b),classNames:E?[Fe("bold"),T]:[Fe("normal"),T],direction:e,posValue:C,sizeValue:w,zoom:c},a)})}function mf(t,e,n,r,i,a,o,c){var u,d=t.props,h=d.snapDigit,g=h===void 0?0:h,m=d.isDisplaySnapDigit,b=m===void 0?!0:m,_=d.snapDistFormat,w=_===void 0?function(j,M){return j}:_,E=d.zoom,T=e==="horizontal"?"X":"Y",C=e==="vertical"?"height":"width",N=Math.abs(i),L=b?parseFloat(N.toFixed(g)):0;return c.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Fe("guideline-group",e),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[C]="".concat(N,"px"),u)},Pw({direction:e,classNames:[Fe(n),o],size:"100%",posValue:[0,0],sizeValue:N,zoom:E},c),c.createElement("div",{className:Fe("size-value","gap"),style:{transform:"translate".concat(T,"(-50%) scale(").concat(E,")")}},L>0?w(L,e):""))}function VW(t,e,n,r){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?Go:$o,c=n[o.start],u=n[o.end];return YO(e,function(d){return d.pos[i]}).map(function(d){var h=[],g=[],m=[];return d.forEach(function(b){var _,w,E=b.element,T=b.elementRect.rect;if(T[o.end]<c)h.push(b);else if(u<T[o.start])g.push(b);else if(T[o.start]<=c&&u<=T[o.end]&&r){var C=b.pos,N={element:E,rect:J(J({},T),(_={},_[o.end]=T[o.start],_))},L={element:E,rect:J(J({},T),(w={},w[o.start]=T[o.end],w))},j=[0,0],M=[0,0];j[i]=C[i],j[a]=C[a],M[i]=C[i],M[a]=C[a]+b.size,h.push({type:t,pos:j,size:0,elementRect:N,direction:"",elementDirection:"end"}),g.push({type:t,pos:M,size:0,elementRect:L,direction:"",elementDirection:"start"})}}),h.sort(function(b,_){return _.pos[a]-b.pos[a]}),g.sort(function(b,_){return b.pos[a]-_.pos[a]}),{total:d,start:h,end:g,inner:m}})}function zW(t,e,n,r,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(c){var u=e.filter(function(E){return E.type===c}),d=c==="vertical"?1:0,h=d?0:1,g=VW(c,u,r,a),m=d?$o:Go,b=d?Go:$o,_=r[m.start],w=r[m.end];g.forEach(function(E){var T=E.total,C=E.start,N=E.end,L=E.inner,j=n[h]+T[0].pos[h]-r[b.start],M=r;C.forEach(function(A){var R=A.elementRect.rect,D=M[m.start]-R[m.end];if(D>0){var V=[0,0];V[d]=n[d]+M[m.start]-_-D,V[h]=j,o.push(mf(t,c,"dashed",o.length,D,V,A.className,i))}M=R}),M=r,N.forEach(function(A){var R=A.elementRect.rect,D=R[m.start]-M[m.end];if(D>0){var V=[0,0];V[d]=n[d]+M[m.end]-_,V[h]=j,o.push(mf(t,c,"dashed",o.length,D,V,A.className,i))}M=R}),L.forEach(function(A){var R=A.elementRect.rect,D=_-R[m.start],V=R[m.end]-w,P=[0,0],B=[0,0];P[d]=n[d]-D,P[h]=j,B[d]=n[d]+w-_,B[h]=j,o.push(mf(t,c,"dashed",o.length,D,P,A.className,i)),o.push(mf(t,c,"dashed",o.length,V,B,A.className,i))})})}),o}function LW(t,e,n,r,i){var a=[];return["horizontal","vertical"].forEach(function(o){var c=e.filter(function(E){return E.type===o}).slice(0,1),u=o==="vertical"?0:1,d=u?0:1,h=u?$o:Go,g=u?Go:$o,m=r[h.start],b=r[h.end],_=r[g.start],w=r[g.end];c.forEach(function(E){var T=E.gap,C=E.gapRects,N=Math.max.apply(Math,Ce([_],te(C.map(function(M){var A=M.rect;return A[g.start]})),!1)),L=Math.min.apply(Math,Ce([w],te(C.map(function(M){var A=M.rect;return A[g.end]})),!1)),j=(N+L)/2;N===L||j===(_+w)/2||C.forEach(function(M){var A=M.rect,R=M.className,D=[n[0],n[1]];if(A[h.end]<m)D[u]+=A[h.end]-m;else if(b<A[h.start])D[u]+=A[h.start]-m-T;else return;D[d]+=j-_,a.push(mf(t,u?"vertical":"horizontal","gap",a.length,T,D,R,i))})})}),a}function g1(t){var e,n,r=t.state,i=r.containerClientRect,a=r.hasFixed,o=i.overflow,c=i.scrollHeight,u=i.scrollWidth,d=i.clientHeight,h=i.clientWidth,g=i.clientLeft,m=i.clientTop,b=t.props,_=b.snapGap,w=_===void 0?!0:_,E=b.verticalGuidelines,T=b.horizontalGuidelines,C=b.snapThreshold,N=C===void 0?5:C,L=b.maxSnapElementGuidelineDistance,j=L===void 0?1/0:L,M=b.isDisplayGridGuidelines,A=wi(Ti(t.state)),R=A.top,D=A.left,V=A.bottom,P=A.right,B={top:R,left:D,bottom:V,right:P,center:(D+P)/2,middle:(R+V)/2},O=GW(t),W=Ce([],te(O),!1),X=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(ie){return ie*N});w&&W.push.apply(W,Ce([],te(BW(t,B,X)),!1));var H=J({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(W.push.apply(W,Ce([],te(FW(t,o?u:h,o?c:d,g,m,H,M)),!1)),a){var K=i.left,ee=i.top;H.left+=K,H.top+=ee,H.right+=K,H.bottom+=ee}return W.push.apply(W,Ce([],te(OO(T||!1,E||!1,o?u:h,o?c:d,g,m,H)),!1)),W=W.filter(function(ie){var q=ie.element,F=ie.elementRect,Y=ie.type;if(!q||!F)return!0;var ne=F.rect;return MO(B,ne,Y,j)}),W}function BW(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,c=o===void 0?1/0:o,u=t.state.elementRects,d=[];return[["vertical",Go,$o],["horizontal",$o,Go]].forEach(function(h){var g=te(h,3),m=g[0],b=g[1],_=g[2],w=e[b.start],E=e[b.end],T=e[b.center],C=e[_.start],N=e[_.end],L={left:n[0],top:n[1]};function j(R){var D=R.rect,V=L[b.start];return D[b.end]<w+V?w-D[b.end]:E-V<D[b.start]?D[b.start]-E:-1}var M=u.filter(function(R){var D=R.rect;return D[_.start]>N||D[_.end]<C?!1:j(R)>0}).sort(function(R,D){return j(R)-j(D)}),A=[];M.forEach(function(R){M.forEach(function(D){if(R!==D){var V=R.rect,P=D.rect,B=V[_.start],O=V[_.end],W=P[_.start],X=P[_.end];B>X||W>O||A.push([R,D])}})}),A.forEach(function(R){var D=te(R,2),V=D[0],P=D[1],B=V.rect,O=P.rect,W=B[b.start],X=B[b.end],H=O[b.start],K=O[b.end],ee=L[b.start],ie=0,q=0,F=!1,Y=!1,ne=!1;if(X<=w&&E<=H){if(Y=!0,ie=(H-X-(E-w))/2,q=X+ie+(E-w)/2,we(q-T)>ee)return}else if(X<H&&K<w+ee){if(F=!0,ie=H-X,q=K+ie,we(q-w)>ee)return}else if(X<H&&E-ee<W){if(ne=!0,ie=H-X,q=W-ie,we(q-E)>ee)return}else return;ie&&MO(e,O,m,a)&&(ie>c||d.push({type:m,pos:m==="vertical"?[q,0]:[0,q],element:P.element,size:0,className:P.className,isStart:F,isCenter:Y,isEnd:ne,gap:ie,hide:!0,gapRects:[V,P],direction:"",elementDirection:""}))})}),d}function UW(t,e,n,r){var i,a,o=t.props,c=t.state,u=o.snapGridAll,d=o.snapGridWidth,h=d===void 0?0:d,g=o.snapGridHeight,m=g===void 0?0:g,b=c.snapRenderInfo,_=b&&(((i=b.direction)===null||i===void 0?void 0:i[0])||((a=b.direction)===null||a===void 0?void 0:a[1])),w=t.moveables;if(u&&w&&_&&(h||m)){if(c.snapThresholdInfo)return;c.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var E=t.getRect(),T=E.children,C=b.direction;if(T){var N=C.map(function(j,M){var A=M===0?{snapSize:h,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:m,posName:"top",sizeName:"height",clientOffset:r.top-n},R=A.snapSize,D=A.posName,V=A.sizeName,P=A.clientOffset;if(!R)return{dir:j,multiple:1,snapSize:R,snapOffset:0};var B=E[V],O=E[D],W=S4(T.map(function(F){return[F[D]-O,F[V],B-F[V]-F[D]+O]})).filter(function(F){return F}).sort(function(F,Y){return F-Y}),X=W[0],H=W.map(function(F){return rt(F/X,.1)*R}),K=1,ee=rt(B/X,.1);for(K=1;K<=10&&!H.every(function(F){return F*K%1===0});++K);var ie=(-j+1)/2,q=jm(O-P,O-P+B,ie,1-ie);return{multiple:ee*K,dir:j,snapSize:R,snapOffset:Math.round(q/R)}}),L=N.map(function(j){return j.multiple||1});c.snapThresholdInfo.multiples=L,c.snapThresholdInfo.offset=N.map(function(j){return j.snapOffset}),N.forEach(function(j,M){j.snapSize})}}else c.snapThresholdInfo=null}function FW(t,e,n,r,i,a,o){r===void 0&&(r=0),i===void 0&&(i=0);var c=t.props,u=t.state,d=c.snapGridWidth,h=d===void 0?0:d,g=c.snapGridHeight,m=g===void 0?0:g,b=[],_=a.left,w=a.top,E=[0,0];UW(t,r,i,a);var T=u.snapThresholdInfo,C=h,N=m;if(T&&(h*=T.multiples[0]||1,m*=T.multiples[1]||1,E=T.offset),m){for(var L=function(M){b.push({type:"horizontal",pos:[_,rt(E[1]*N+M-i+w,.1)],className:Fe("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},j=0;j<=n*2;j+=m)L(j);for(var j=-m;j>=-n;j-=m)L(j)}if(h){for(var L=function(A){b.push({type:"vertical",pos:[rt(E[0]*C+A-r+_,.1),w],className:Fe("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},j=0;j<=e*2;j+=h)L(j);for(var j=-h;j>=-e;j-=h)L(j)}return b}function MO(t,e,n,r){return n==="horizontal"?we(t.right-e.left)<=r||we(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?we(t.bottom-e.top)<=r||we(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function GW(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(m){return!m.refresh}),a=r.map(function(m){return Qi(m)&&"element"in m?J(J({},m),{element:Ma(m.element,!0)}):{element:Ma(m,!0)}}).filter(function(m){return m.element}),o=tX(i.map(function(m){return m.element}),a.map(function(m){return m.element})),c=o.maintained,u=o.added,d=[];c.forEach(function(m){var b=te(m,2),_=b[0],w=b[1];d[w]=i[_]}),$W(t,u.map(function(m){return a[m]})).map(function(m,b){d[u[b]]=m}),e.elementRects=d;var h=Nw(t.props.elementSnapDirections),g=[];return d.forEach(function(m){var b=m.element,_=m.top,w=_===void 0?h.top:_,E=m.left,T=E===void 0?h.left:E,C=m.right,N=C===void 0?h.right:C,L=m.bottom,j=L===void 0?h.bottom:L,M=m.center,A=M===void 0?h.center:M,R=m.middle,D=R===void 0?h.middle:R,V=m.className,P=m.rect,B=Iw({top:w,right:N,left:T,bottom:j,center:A,middle:D},P),O=B.horizontal,W=B.vertical,X=B.horizontalNames,H=B.verticalNames,K=P.top,ee=P.left,ie=P.right-ee,q=P.bottom-K,F=[ie,q];W.forEach(function(Y,ne){g.push({type:"vertical",element:b,pos:[rt(Y,.1),K],size:q,sizes:F,className:V,elementRect:m,elementDirection:nk[H[ne]]||H[ne],direction:""})}),O.forEach(function(Y,ne){g.push({type:"horizontal",element:b,pos:[ee,rt(Y,.1)],size:ie,sizes:F,className:V,elementRect:m,elementDirection:nk[X[ne]]||X[ne],direction:""})})}),g}function fk(t,e){return t?t.map(function(n){var r=Qi(n)?n:{pos:n},i=r.pos;return ku(i)?r:J(J({},r),{pos:Ft(i,e)})}):[]}function OO(t,e,n,r,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var c=[],u=o.left,d=o.top,h=o.bottom,g=o.right,m=n+g-u,b=r+h-d;return fk(t,b).forEach(function(_){c.push({type:"horizontal",pos:[u,rt(_.pos-a+d,.1)],size:m,className:_.className,direction:""})}),fk(e,m).forEach(function(_){c.push({type:"vertical",pos:[rt(_.pos-i+u,.1),d],size:b,className:_.className,direction:""})}),c}function $W(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,a=r.rootMatrix,o=r.is3d,c=r.offsetDelta,u=o?4:3,d=te(pW(a,i,u),2),h=d[0],g=d[1],m=n?0:c[0],b=n?0:c[1];return e.map(function(_){var w=_.element.getBoundingClientRect(),E=w.left-h-m,T=w.top-g-b,C=T+w.height,N=E+w.width,L=te(Ou(a,[E,T],u),2),j=L[0],M=L[1],A=te(Ou(a,[N,C],u),2),R=A[0],D=A[1];return J(J({},_),{rect:{left:j,right:R,top:M,bottom:D,center:(j+R)/2,middle:(M+D)/2}})})}function Mg(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(n!==r){var o=Ma(r,!0);if(o){var c=Of(o),u=yk(e,[c.left-i.left,c.top-i.top]),d=yk(e,[c.right-i.right,c.bottom-i.bottom]);a.left=rt(u[0],1e-5),a.top=rt(u[1],1e-5),a.right=rt(d[0],1e-5),a.bottom=rt(d[1],1e-5)}}return e.snapContainer=r,e.snapOffset=a,e.guidelines=g1(t),e.enableSnap=!0,!0}function PO(t,e,n,r,i,a){var o=ac(t,e,n,a?4:3),c=Fn(o,r);return Vw(o,He(i,c))}function hk(t){return t?t/we(t):0}function HW(t,e,n,r,i,a){var o=a.fixedDirection,c=yW(n,o,r),u=Ow(t,e,n,r),d=Ce(Ce([],te(DW(t,e,c,r,i,a)),!1),te(kO(t,u,a)),!1),h=Fm(d,0),g=Fm(d,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:g.isBound,offset:g.offset[1]}}}function qW(t,e,n,r,i,a,o,c,u){var d=Fn(e,o),h=U0(t,c,{vertical:[d[0]],horizontal:[d[1]]}),g=h.horizontal.offset,m=h.vertical.offset;if(rt(m,l1)||rt(g,l1)){var b=te(Ua({datas:u,distX:-m,distY:-g}),2),_=b[0],w=b[1],E=Math.min(i||1/0,n+o[0]*_),T=Math.min(a||1/0,r+o[1]*w);return[E-n,T-r]}return[0,0]}function jO(t,e,n,r,i,a,o,c){for(var u=Ti(t.state),d=t.props.keepRatio,h=0,g=0,m=0;m<2;++m){var b=e(h,g),_=HW(t,b,i,d,o,c),w=_.width,E=_.height,T=w.isBound,C=E.isBound,N=w.offset,L=E.offset;if(m===1&&(T||(N=0),C||(L=0)),m===0&&o&&!T&&!C)return[0,0];if(d){var j=we(N)*(n?1/n:1),M=we(L)*(r?1/r:1),A=T&&C?j<M:C||!T&&j<M;A?N=n*L/r:L=r*N/n}h+=N,g+=L}if(!d&&i[0]&&i[1]){var R=IW(t,u,i,a,c),D=R.maxWidth,V=R.maxHeight,P=te(qW(t,e(h,g).map(function(W){return W.map(function(X){return rt(X,l1)})}),n+h,r+g,D,V,i,o,c),2),N=P[0],L=P[1];h+=N,g+=L}return[h,g]}function If(t){return t<0&&(t=t%360+360),t%=360,t}function YW(t,e){e=If(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return we(t-r)<we(t-i)?r:i}function Lb(t,e){t=If(t),e=If(e);var n=If(t-e);return Math.min(n,360-n)}function XW(t,e,n,r){var i,a=t.props,o=(i=a[_O])!==null&&i!==void 0?i:5,c=a[wO];if(td(t,"rotatable")){var u=e.pos1,d=e.pos2,h=e.pos3,g=e.pos4,m=e.origin,b=n*Math.PI/180,_=[u,d,h,g].map(function(L){return He(L,m)}),w=_.map(function(L){return Vh(L,b)}),E=Ce(Ce([],te(uW(t,_,w,m,n)),!1),te(EW(t,_,w,m,n)),!1);E.sort(function(L,j){return we(L-n)-we(j-n)});var T=E.length>0;if(T)return{isSnap:T,dist:T?E[0]:n}}if(c?.length&&o){var C=c.slice().sort(function(L,j){return Lb(L,r)-Lb(j,r)}),N=C[0];if(Lb(N,r)<=o)return{isSnap:!0,dist:n+YW(r,N)-r}}return{isSnap:!1,dist:n}}function WW(t,e,n,r,i,a,o){if(!td(t,"resizable"))return[0,0];var c=o.fixedDirection,u=o.nextAllMatrix,d=t.state,h=d.allMatrix,g=d.is3d;return jO(t,function(m,b){return PO(u||h,e+m,n+b,c,i,g)},e,n,r,i,a,o)}function KW(t,e,n,r,i){if(!td(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,c=i.fixedPosition,u=i.fixedDirection,d=i.is3d,h=jO(t,function(g,m){return PO(WX(i,At(e,[g/a,m/o])),a,o,u,c,d)},a,o,n,c,r,i);return[h[0]/a,h[1]/o]}function QW(t,e){e.absolutePoses=Ti(t.state)}function pk(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;Vr(e,function(a){return a.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return J(J({},r),{direction:i.direction})})}function gk(t,e,n,r,i,a){var o=Dw(L0(t,a),e,n),c=o.vertical,u=o.horizontal,d=ou();c.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.left=!0),_.direction==="end"&&(d.right=!0),r.push({type:"bounds",pos:_.pos}))}),u.forEach(function(_){_.isBound&&(_.direction==="start"&&(d.top=!0),_.direction==="end"&&(d.bottom=!0),i.push({type:"bounds",pos:_.pos}))});var h=TW(t),g=h.boundMap,m=h.vertical,b=h.horizontal;return m.forEach(function(_){As(r,function(w){var E=w.type,T=w.pos;return E==="bounds"&&T===_})>=0||r.push({type:"bounds",pos:_})}),b.forEach(function(_){As(i,function(w){var E=w.type,T=w.pos;return E==="bounds"&&T===_})>=0||i.push({type:"bounds",pos:_})}),{boundMap:d,innerBoundMap:g}}var ZW=Bw("",["resizable","scalable"]),JW={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",_O,wO,SO,EO,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,a=n.pos1,o=n.pos2,c=n.pos3,u=n.pos4,d=n.snapRenderInfo,h=t.props.snapRenderThreshold,g=h===void 0?1:h;if(!d||!d.render||!td(t,""))return cu(t,"boundMap",ou(),function(Z){return JSON.stringify(Z)}),cu(t,"innerBoundMap",ou(),function(Z){return JSON.stringify(Z)}),[];n.guidelines=g1(t);var m=Math.min(a[0],o[0],c[0],u[0]),b=Math.min(a[1],o[1],c[1],u[1]),_=d.externalPoses||[],w=Ti(t.state),E=[],T=[],C=[],N=[],L=[],j=wi(w),M=j.width,A=j.height,R=j.top,D=j.left,V=j.bottom,P=j.right,B={left:D,right:P,top:R,bottom:V,center:(D+P)/2,middle:(R+V)/2},O=_.length>0,W=O?wi(_):{};if(!d.request){if(d.direction&&L.push(vW(t,w,d.direction,g,g)),d.snap){var X=wi(w);d.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),L.push(rk(t,X,g,g))}O&&(d.center&&(W.middle=(W.top+W.bottom)/2,W.center=(W.left+W.right)/2),L.push(rk(t,W,g,g))),L.forEach(function(Z){var oe=Z.vertical.posInfos,ce=Z.horizontal.posInfos;E.push.apply(E,Ce([],te(oe.filter(function(me){var ge=me.guidelineInfos;return ge.some(function(Te){var Ne=Te.guideline;return!Ne.hide})}).map(function(me){return{type:"snap",pos:me.pos}})),!1)),T.push.apply(T,Ce([],te(ce.filter(function(me){var ge=me.guidelineInfos;return ge.some(function(Te){var Ne=Te.guideline;return!Ne.hide})}).map(function(me){return{type:"snap",pos:me.pos}})),!1)),C.push.apply(C,Ce([],te(pk(oe)),!1)),N.push.apply(N,Ce([],te(pk(ce)),!1))})}var H=gk(t,[D,P],[R,V],E,T),K=H.boundMap,ee=H.innerBoundMap;O&&gk(t,[W.left,W.right],[W.top,W.bottom],E,T,d.externalBounds);var ie=Ce(Ce([],te(C),!1),te(N),!1),q=ie.filter(function(Z){return Z.element&&!Z.gapRects}),F=ie.filter(function(Z){return Z.gapRects}).sort(function(Z,oe){return Z.gap-oe.gap});Pe(t,"onSnap",{guidelines:ie.filter(function(Z){var oe=Z.element;return!oe}),elements:q,gaps:F},!0);var Y=cu(t,"boundMap",K,function(Z){return JSON.stringify(Z)},ou()),ne=cu(t,"innerBoundMap",ee,function(Z){return JSON.stringify(Z)},ou());return(K===Y||ee===ne)&&Pe(t,"onBound",{bounds:K,innerBounds:ee},!0),Ce(Ce(Ce(Ce(Ce(Ce([],te(zW(t,q,[m,b],B,e)),!1),te(LW(t,F,[m,b],B,e)),!1),te(dk(t,"horizontal",N,[i,r],B,e)),!1),te(dk(t,"vertical",C,[i,r],B,e)),!1),te(uk(t,"horizontal",T,m,r,M,0,e)),!1),te(uk(t,"vertical",E,b,i,A,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Mg(t)},drag:function(t){var e=t.state;Mg(t)||(e.guidelines=g1(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(ZW(t,e)||p1(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Un(e.inputEvent.target,Fe("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Mg(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Mg(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function eK(t,e){return[t[0]*e[0],t[1]*e[1]]}function Fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Wq.apply(void 0,Ce([Aw],te(t),!1))}function VO(t){t()}function tK(t){return!t||t==="none"?[1,0,0,1,0,0]:Qi(t)?t:rh(t)}function Mf(t,e,n){return zm(e,Kl(n,e),t,Kl(n.map(function(r){return-r}),e))}function nK(t,e,n){if(e==="%"){var r=jw(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function rK(t){var e=iK(zw(t,":before"));return e.map(function(n,r){var i=Mh(n),a=i.value,o=i.unit;return a*nK(t,o,r===0)})}function $m(t){return t?t.split(" "):["0","0"]}function iK(t){return $m(t.transformOrigin)}function zO(t){var e=zr(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],c=function(d){var h=i[d].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(g){return h[g]}).join(", "),")"))},u=0;u<a;++u)c(u);return o.join(" ")}return""}function ah(t,e,n,r,i){var a,o,c=gw(t)||Ko(t),u=!1,d,h;if(!t||n)d=t;else{var g=(a=t?.assignedSlot)===null||a===void 0?void 0:a.parentElement,m=t.parentElement;g?(u=!0,h=m,d=g):d=m}for(var b=!1,_=t===e||d===e,w="relative",E=1,T=parseFloat(i?.("zoom"))||1,C=i?.("position");d&&d!==c;){e===d&&(_=!0);var N=zr(d),L=d.tagName.toLowerCase(),j=zO(d),M=N("willChange"),A=parseFloat(N("zoom"))||1;if(w=N("position"),r&&A!==1){E=A;break}if(!n&&r&&T!==1&&C&&C!=="absolute"||L==="svg"||L==="foreignobject"||w!=="static"||j&&j!=="none"||M==="transform")break;var R=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,D=d.parentNode;R&&(u=!0,h=D);var V=D;if(V&&V.nodeType===11){d=V.host,b=!0,w=zr(d)("position");break}d=V,w="relative"}return{offsetZoom:E,hasSlot:u,parentSlotElement:h,isCustomElement:b,isStatic:w==="static",isEnd:_||!d||d===c,offsetParent:d||c}}function aK(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=zr(t),c=N0(i),u=!c,d,h;return!u&&(r!=="svg"||t.ownerSVGElement)?(d=rO?rK(t):$m(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice(),u=!0,r==="svg"?(i=0,a=0):(n=te(lK(t,d,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],a=n[1],d[0]=n[2],d[1]=n[3])):(d=$m(o("transformOrigin")).map(function(g){return parseFloat(g)}),h=d.slice()),{tagName:r,isSVG:c,hasOffset:u,offset:[i||0,a||0],origin:d,targetOrigin:h}}function LO(t,e){var n=zr(t),r=zr(Ko(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var a=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(a=0)),[a,o]}function m1(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Zi(n,3,4))})}function sK(t){for(var e=t.parentElement,n=!1,r=Ko(t);e;){var i=zw(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function F0(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(W4(t,!e).join(","),")")}function jw(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function oK(t,e){var n,r=jw(t),i=r.width,a=r.height,o=r.clientWidth,c=r.clientHeight,u=o/i,d=c/a,h=t.preserveAspectRatio.baseVal,g=h.align,m=h.meetOrSlice,b=[0,0],_=[u,d],w=[0,0];if(g!==1){var E=(g-2)%3,T=Math.floor((g-2)/3);b[0]=i*E/2,b[1]=a*T/2;var C=m===2?Math.max(d,u):Math.min(u,d);_[0]=C,_[1]=C,w[0]=(o-i)/2*E,w[1]=(c-a)/2*T}var N=ww(_,e);return n=te(w,2),N[e*(e-1)]=n[0],N[e*(e-1)+1]=n[1],Mf(N,e,b)}function lK(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=zr(t),a=i("transform-box")==="fill-box",o=t.getBBox(),c=jw(t.ownerSVGElement),u=o.x,d=o.y;r==="foreignobject"&&!u&&!d&&(u=parseFloat(t.getAttribute("x"))||0,d=parseFloat(t.getAttribute("y"))||0);var h=u-c.x,g=d-c.y,m=a?e[0]:e[0]-h,b=a?e[1]:e[1]-g;return[h,g,m,b]}function an(t,e,n){return fr(t,Wl(e,n),n)}function ac(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return an(t,i,r)})}function wi(t){var e=t.map(function(d){return d[0]}),n=t.map(function(d){return d[1]}),r=Math.min.apply(Math,Ce([],te(e),!1)),i=Math.min.apply(Math,Ce([],te(n),!1)),a=Math.max.apply(Math,Ce([],te(e),!1)),o=Math.max.apply(Math,Ce([],te(n),!1)),c=a-r,u=o-i;return{left:r,top:i,right:a,bottom:o,width:c,height:u}}function mk(t,e,n,r){var i=ac(t,e,n,r);return wi(i)}function cK(t,e,n,r,i){var a,o=t.target,c=t.origin,u=e.matrix,d=UO(o),h=d.offsetWidth,g=d.offsetHeight,m=n.getBoundingClientRect(),b=[0,0];n===Ko(n)&&(b=LO(o,!0));for(var _=o.getBoundingClientRect(),w=_.left-m.left+n.scrollLeft-(n.clientLeft||0)+b[0],E=_.top-m.top+n.scrollTop-(n.clientTop||0)+b[1],T=_.width,C=_.height,N=zm(r,i,u),L=mk(N,h,g,r),j=L.left,M=L.top,A=L.width,R=L.height,D=an(N,c,r),V=He(D,[j,M]),P=[w+V[0]*T/A,E+V[1]*C/R],B=[0,0],O=0;++O<10;){var W=ja(i,r);a=te(He(an(W,P,r),an(W,D,r)),2),B[0]=a[0],B[1]=a[1];var X=zm(r,i,Kl(B,r),u),H=mk(X,h,g,r),K=H.left,ee=H.top,ie=K-w,q=ee-E;if(we(ie)<2&&we(q)<2)break;P[0]-=ie,P[1]-=q}return B.map(function(F){return Math.round(F)})}function uK(t,e,n){var r=t.length===16,i=r?4:3,a=e.map(function(u){return an(t,u,i)}),o=n.left,c=n.top;return a.map(function(u){return[u[0]+o,u[1]+c]})}function Ei(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function BO(t,e){return Ei([e[0]-t[0],e[1]-t[1]])}function vf(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=_n(t,e));var i=BO(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function Hm(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,a=n.reduce(function(c,u){return c+u[0]},0)/i,o=n.reduce(function(c,u){return c+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Zl(t,e){var n=t[e];return Qi(n)?J(J({},t),n):t}function UO(t){var e=t&&!N0(t.offsetWidth),n=0,r=0,i=0,a=0,o=0,c=0,u=0,d=0,h=0,g=0,m=0,b=0,_=1/0,w=1/0,E=1/0,T=1/0,C=0,N=0,L=!1;if(t)if(!e&&t.ownerSVGElement){var j=t.getBBox();L=!0,n=j.width,r=j.height,o=n,c=r,u=n,d=r,i=n,a=r}else{var M=zr(t),A=t.style,R=M("boxSizing")==="border-box",D=parseFloat(M("borderLeftWidth"))||0,V=parseFloat(M("borderRightWidth"))||0,P=parseFloat(M("borderTopWidth"))||0,B=parseFloat(M("borderBottomWidth"))||0,O=parseFloat(M("paddingLeft"))||0,W=parseFloat(M("paddingRight"))||0,X=parseFloat(M("paddingTop"))||0,H=parseFloat(M("paddingBottom"))||0,K=O+W,ee=X+H,ie=D+V,q=P+B,F=K+ie,Y=ee+q,ne=M("position"),Z=0,oe=0;if("clientLeft"in t){var ce=null;if(ne==="absolute"){var me=ah(t,Ko(t));ce=me.offsetParent}else ce=t.parentElement;if(ce){var ge=zr(ce);Z=parseFloat(ge("width")),oe=parseFloat(ge("height"))}}h=Math.max(K,Ft(M("minWidth"),Z)||0),g=Math.max(ee,Ft(M("minHeight"),oe)||0),_=Ft(M("maxWidth"),Z),w=Ft(M("maxHeight"),oe),isNaN(_)&&(_=1/0),isNaN(w)&&(w=1/0),C=Ft(A.width,0)||0,N=Ft(A.height,0)||0,o=parseFloat(M("width"))||0,c=parseFloat(M("height"))||0,u=we(o-C)<1?Wx(h,C||o,_):o,d=we(c-N)<1?Wx(g,N||c,w):c,n=u,r=d,i=u,a=d,R?(E=_,T=w,m=h,b=g,u=n-F,d=r-Y):(E=_+F,T=w+Y,m=h+F,b=g+Y,n=u+F,r=d+Y),i=u+K,a=d+ee}return{svg:L,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:d,inlineCSSWidth:C,inlineCSSHeight:N,cssWidth:o,cssHeight:c,minWidth:h,minHeight:g,maxWidth:_,maxHeight:w,minOffsetWidth:m,minOffsetHeight:b,maxOffsetWidth:E,maxOffsetHeight:T}}function FO(t,e){return _n(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Og(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function GO(t,e){var n=t===Ko(t)||t===gw(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=zr(t)("overflow")!=="visible",J(J({},e),r)}function Bb(t,e,n,r){var i=t.left,a=t.right,o=t.top,c=t.bottom,u=e.top,d=e.left,h={left:d+i,top:u+o,right:d+a,bottom:u+c,width:a-i,height:c-o};return n&&r?GO(n,h):h}function Of(t,e){var n=0,r=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,a=o.height}var c={left:n,top:r,width:i,height:a,right:n+i,bottom:r+a};return t&&e?GO(t,c):c}function dK(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,c=i.svg,u=i.transformOrigin;return!n&&c&&r?Fw(r,a,o):u}function $O(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var a=n.target;i=HO(a,r)}return i}function HO(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function Vw(t,e){return[At(e,t[0]),At(e,t[1]),At(e,t[2]),At(e,t[3])]}function Ti(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return Vw([r,i,a,o],[e,n])}function v1(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function lu(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];r?.isIdle()===!1&&v1(t,e),r?.unset(),t[n]=null}function _r(t,e){if(e){var n=ed(e);n.nextStyle=J(J({},n.nextStyle),t)}return{style:t,cssText:Cs(t).map(function(r){return"".concat(tm(r,"-"),": ").concat(t[r],";")}).join("")}}function qO(t,e,n){var r=e.afterTransform||e.transform;return J(J({},_r(J(J(J({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function ct(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var a=J(J({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=a):i.isStartEvent=!0,a}function ei(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),J(J({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function G0(t,e,n){t._emitter.on(e,n)}function Pe(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function zw(t,e){return No(t).getComputedStyle(t,e)}function Pg(t,e,n){var r={},i={};return t.filter(function(a){var o=a.name;if(r[o]||!e.some(function(c){return a[c]}))return!1;if(!n&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return r[o]=!0,!0})}function y1(t,e){return t===e||t==null&&e==null}function vk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!N0(i))return i}return t[n]}function YO(t,e){var n=[],r=[];return t.forEach(function(i,a){var o=e(i,a,t),c=r.indexOf(o),u=n[c]||[];c===-1&&(r.push(o),n.push(u)),u.push(i)}),n}function fK(t,e){var n=[],r={};return t.forEach(function(i,a){var o=e(i,a,t),c=r[o];c||(c=[],r[o]=c,n.push(c)),c.push(i)}),n}function XO(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Mu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return we(r)-we(n)}),t[0]}function Ou(t,e,n){return fr(ja(t,n),Wl(e,n),n)}function hK(t,e){var n,r=t.is3d,i=t.rootMatrix,a=r?4:3;return n=te(Ou(i,[e.distX,e.distY],a),2),e.distX=n[0],e.distY=n[1],e}function mi(t,e,n,r){if(!n[0]&&!n[1])return e;var i=an(t,[hk(n[0]||1),0],r),a=an(t,[0,hk(n[1]||1)],r),o=an(t,[n[0]/Ei(i),n[1]/Ei(a)],r);return At(e,o)}function Bi(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function qm(t){return we(t)<=Er?0:t}function Lw(t){return function(e){if(!e.isDragging(t))return"";var n=nW(e,t),r=n.deg;return r?Fe("view-control-rotation".concat(r)):""}}function Bw(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(a){return r.requestAble===a})?r.parentDirection:!1;var i=r.inputEvent.target;return Un(i,Fe("direction"))&&(!t||Un(i,Fe(t)))}}function pK(t,e,n){var r,i=Du(t,{"x%":function(j){return j/100*e.offsetWidth},"y%":function(j){return j/100*e.offsetHeight}}),a=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),c=t[n]||"",u=n<0?[]:t.slice(n),d=n<0?[]:t.slice(n+1),h=i.slice(0,n<0?void 0:n),g=i.slice(0,n<0?void 0:n+1),m=(r=i[n])!==null&&r!==void 0?r:Du([""])[0],b=n<0?[]:i.slice(n),_=n<0?[]:i.slice(n+1),w=m?[m]:[],E=Zc(h),T=Zc(g),C=Zc(b),N=Zc(_),L=Gt(E,C,4);return{transforms:t,beforeFunctionMatrix:E,beforeFunctionMatrix2:T,targetFunctionMatrix:Zc(w),afterFunctionMatrix:C,afterFunctionMatrix2:N,allFunctionMatrix:L,beforeFunctions:h,beforeFunctions2:g,targetFunction:w[0],afterFunctions:b,afterFunctions2:_,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:c,afterFunctionTexts:u,afterFunctionTexts2:d}}function gK(t){return!t||!Qi(t)||Zu(t)?!1:Vn(t)||"length"in t}function Ma(t,e){return t?Zu(t)?t:jr(t)?e?document.querySelector(t):t:fw(t)?t():C4(t)?t:"current"in t?t.current:t:null}function Uw(t,e){if(!t)return[];var n=gK(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return jr(i)&&e?Ce(Ce([],te(r),!1),te([].slice.call(document.querySelectorAll(i))),!1):(Vn(i)?r.push(Uw(i,e)):r.push(Ma(i,e)),r)},[])}function mK(t,e,n){var r=_n(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function yk(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,a=ja(n,i);return r||(a=Zi(a,3,4)),a[12]=0,a[13]=0,a[14]=0,JY(a,e)}function WO(t,e,n,r,i){var a=te(t,2),o=a[0],c=a[1],u=0,d=0;if(i&&o&&c){var h=_n([0,0],e),g=_n([0,0],r),m=Ei(e),b=Math.cos(h-g)*m;if(!r[0])d=b,u=d*n;else if(!r[1])u=b,d=u/n;else{var _=r[0]*o,w=r[1]*c,E=Math.atan2(_+e[0],w+e[1]),T=Math.atan2(_,w);E<0&&(E+=Math.PI*2),T<0&&(T+=Math.PI*2);var C=0;we(E-T)<Math.PI/2||we(E-T)>Math.PI/2*3||(T+=Math.PI),C=E-T,C>Math.PI*2?C-=Math.PI*2:C>Math.PI?C=2*Math.PI-C:C<-Math.PI&&(C=-2*Math.PI-C);var N=Ei([_+e[0],w+e[1]])*Math.cos(C);u=N*Math.sin(T)-_,d=N*Math.cos(T)-w,r[0]<0&&(u*=-1),r[1]<0&&(d*=-1)}}else u=r[0]*e[0],d=r[1]*e[1];return[u,d]}function KO(t,e,n,r){var i,a=n.ratio,o=n.startOffsetWidth,c=n.startOffsetHeight,u=0,d=0,h=r.distX,g=r.distY,m=r.pinchScale,b=r.parentDistance,_=r.parentDist,w=r.parentScale,E=n.fixedDirection,T=[0,1].map(function(A){return we(t[A]-E[A])}),C=[0,1].map(function(A){var R=T[A];return R!==0&&(R=2/R),R});if(_)u=_[0],d=_[1],e&&(u?d||(d=u/a):u=d*a);else if(ku(m))u=(m-1)*o,d=(m-1)*c;else if(w)u=(w[0]-1)*o,d=(w[1]-1)*c;else if(b){var N=o*T[0],L=c*T[1],j=Ei([N,L]);u=b/j*N*C[0],d=b/j*L*C[1]}else{var M=Ua({datas:n,distX:h,distY:g});M=C.map(function(A,R){return M[R]*A}),i=te(WO([o,c],M,a,t,e),2),u=i[0],d=i[1]}return{distWidth:u,distHeight:d}}function b1(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=te(t.split(" "),2),r=n[0],i=n[1],a=b1(r||""),o=b1(i||""),c=J(J({},a),o),u={x:"50%",y:"50%"};return c.x&&(u.x=c.x),c.y&&(u.y=c.y),c.value&&(c.x&&!c.y&&(u.y=c.value),!c.x&&c.y&&(u.x=c.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Fw(t,e,n){var r=b1(t,!0),i=r.x,a=r.y;return[Ft(i,e)||0,Ft(a,n)||0]}function vK(t,e,n){var r=t.map(function(a){return He(a,e)}),i=r.map(function(a){return Vh(a,n)});return{prev:r,next:i,result:i.map(function(a){return At(a,e)})}}function QO(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],a=Vn(n),o=Vn(i);return a&&o?QO(n,i):!a&&!o?n===i:!1})}function cu(t,e,n,r,i){var a=t._store,o=a[e];if(!(e in a))if(i!=null)a[e]=i,o=i;else return a[e]=n,n;return o===n||r(o)===r(n)?o:(a[e]=n,n)}function br(t){return t>=0?1:-1}function we(t){return Math.abs(t)}function Ub(t,e){return fY(t).map(function(n){return e(n)})}function ZO(t){return ku(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var yK=Bh("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,a=e.originalDatas,o=t.props,c=o.pinchable,u=o.ables;if(!c)return!1;var d="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),g=(c===!0?t.controlAbles:u.filter(function(w){return c.indexOf(w.name)>-1})).filter(function(w){return w.canPinch&&w[h]}),m=ct(t,e,{});r&&(m.targets=r);var b=Pe(t,d,m);n.isPinch=b!==!1,n.ables=g;var _=n.isPinch;return _?(g.forEach(function(w){if(a[w.name]=a[w.name]||{},!!w[h]){var E=J(J({},e),{datas:a[w.name],parentRotate:i,isPinch:!0});w[h](t,E)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},_):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,a=e.originalDatas,o=e.inputEvent,c=e.targets,u=e.angle;if(n.isPinch){var d=i*(1-1/r),h=ct(t,e,{});c&&(h.targets=c);var g="onPinch".concat(c?"Group":"");Pe(t,g,h);var m=n.ables,b="drag".concat(c?"Group":"","Control");return m.forEach(function(_){_[b]&&_[b](t,J(J({},e),{datas:a[_.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:d,parentRotate:u,isPinch:!0}))}),h}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.targets,o=e.originalDatas;if(n.isPinch){var c="onPinch".concat(a?"Group":"","End"),u=ei(t,e,{isDrag:r});a&&(u.targets=a),Pe(t,c,u);var d=n.ables,h="drag".concat(a?"Group":"","ControlEnd");return d.forEach(function(g){g[h]&&g[h](t,J(J({},e),{isDrag:r,datas:o[g.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,J(J({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,J(J({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,J(J({},e),{targets:t.props.targets}))}}),bk=Bw("scalable"),bK={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:yO("scalable"),dragControlCondition:bk,viewClassName:Lw("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,a=e.parentDirection,o=$O(a,r,i,n),c=t.state,u=c.width,d=c.height,h=c.targetTransform,g=c.target,m=c.pos1,b=c.pos2,_=c.pos4;if(!o||!g)return!1;r||ic(t,e),n.datas={},n.transform=h,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=u,n.startOffsetHeight=d,n.startValue=[1,1];var w=!o[0]&&!o[1]||o[0]||!o[1];z0(t,e,"scale"),n.isWidth=w;function E(M){n.ratio=M&&isFinite(M)?M:0}n.startPositions=Ti(t.state);function T(M){var A=DO(n.startPositions,M);n.fixedDirection=A.fixedDirection,n.fixedPosition=A.fixedPosition,n.fixedOffset=A.fixedOffset}n.setFixedDirection=T,E(vs(m,b)/vs(b,_)),T([-o[0],-o[1]]);var C=function(M){n.minScaleSize=M},N=function(M){n.maxScaleSize=M};C([-1/0,-1/0]),N([1/0,1/0]);var L=ct(t,e,J(J({direction:o,set:function(M){n.startValue=M},setRatio:E,setFixedDirection:T,setMinScaleSize:C,setMaxScaleSize:N},V0(t,e)),{dragStart:yr.dragStart(t,new Nu().dragStart([0,0],e))})),j=Pe(t,"onScaleStart",L);return n.startFixedDirection=n.fixedDirection,j!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?L:!1},dragControl:function(t,e){P0(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,a=e.isPinch,o=e.dragClient,c=e.isRequest,u=e.useSnap,d=e.resolveMatrix,h=n.prevDist,g=n.direction,m=n.startOffsetWidth,b=n.startOffsetHeight,_=n.isScale,w=n.startValue,E=n.isWidth,T=n.ratio;if(!_)return!1;var C=t.props,N=C.throttleScale,L=C.parentMoveable,j=g;!g[0]&&!g[1]&&(j=[1,1]);var M=T&&(r??C.keepRatio)||!1,A=t.state,R=[w[0],w[1]];function D(){var ae=KO(j,M,n,e),Ae=ae.distWidth,De=ae.distHeight,Me=m?(m+Ae)/m:1,Be=b?(b+De)/b:1;w[0]||(R[0]=Ae/m),w[1]||(R[1]=De/b);var Ve=(j[0]||M?Me:1)*R[0],Se=(j[1]||M?Be:1)*R[1];return Ve===0&&(Ve=br(h[0])*Dg),Se===0&&(Se=br(h[1])*Dg),[Ve,Se]}var V=D();if(!a&&t.props.groupable){var P=A.snapRenderInfo||{},B=P.direction;Vn(B)&&(B[0]||B[1])&&(A.snapRenderInfo={direction:g,request:e.isRequest})}Pe(t,"onBeforeScale",ct(t,e,{scale:V,setFixedDirection:function(ae){return n.setFixedDirection(ae),V=D(),V},startFixedDirection:n.startFixedDirection,setScale:function(ae){V=ae}},!0));var O=[V[0]/R[0],V[1]/R[1]],W=o,X=[0,0],H=br(O[0]*O[1]),K=!o&&!i&&a;if(K||d?W=kw(t,n.targetAllTransform,[0,0],[0,0],n):o||(W=n.fixedPosition),a||(X=KW(t,O,g,!u&&c,n)),M){j[0]&&j[1]&&X[0]&&X[1]&&(Math.abs(X[0]*m)>Math.abs(X[1]*b)?X[1]=0:X[0]=0);var ee=!X[0]&&!X[1];if(ee&&(E?O[0]=rt(O[0]*R[0],N)/R[0]:O[1]=rt(O[1]*R[1],N)/R[1]),j[0]&&!j[1]||X[0]&&!X[1]||ee&&E){O[0]+=X[0];var ie=m*O[0]*R[0]/T;O[1]=br(H*O[0])*we(ie/b/R[1])}else if(!j[0]&&j[1]||!X[0]&&X[1]||ee&&!E){O[1]+=X[1];var q=b*O[1]*R[1]*T;O[0]=br(H*O[1])*we(q/m/R[0])}}else O[0]+=X[0],O[1]+=X[1],X[0]||(O[0]=rt(O[0]*R[0],N)/R[0]),X[1]||(O[1]=rt(O[1]*R[1],N)/R[1]);O[0]===0&&(O[0]=br(h[0])*Dg),O[1]===0&&(O[1]=br(h[1])*Dg),V=eK(O,[R[0],R[1]]);var F=[m,b],Y=[m*V[0],b*V[1]];Y=w4(Y,n.minScaleSize,n.maxScaleSize,M?T:!1),V=Ub(2,function(ae){return F[ae]?Y[ae]/F[ae]:Y[ae]}),O=Ub(2,function(ae){return V[ae]/R[ae]});var ne=Ub(2,function(ae){return h[ae]?O[ae]/h[ae]:O[ae]}),Z="scale(".concat(O.join(", "),")"),oe="scale(".concat(V.join(", "),")"),ce=j0(n,oe,Z),me=!w[0]||!w[1],ge=KX(t,me?oe:Z,n.fixedDirection,W,n.fixedOffset,n,me),Te=K?ge:He(ge,n.prevInverseDist||[0,0]);if(n.prevDist=O,n.prevInverseDist=ge,V[0]===h[0]&&V[1]===h[1]&&Te.every(function(ae){return!ae})&&!L&&!K)return!1;var Ne=ct(t,e,J({offsetWidth:m,offsetHeight:b,direction:g,scale:V,dist:O,delta:ne,isPinch:!!a},fO(t,ce,Te,a,e)));return Pe(t,"onScale",Ne),Ne},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ei(t,e,{});return Pe(t,"onScaleEnd",r),r},dragGroupControlCondition:bk,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=qi(t,"resizable",e);n.moveableScale=t.scale;var a=ys(t,this,"dragControlStart",e,function(d,h){return Um(t,d,n,h)}),o=function(d){r.setFixedDirection(d),a.forEach(function(h,g){h.setFixedDirection(d),Um(t,h.moveable,n,i[g])})};n.setFixedDirection=o;var c=J(J({},r),{targets:t.props.targets,events:a,setFixedDirection:o}),u=Pe(t,"onScaleGroupStart",c);return n.isScale=u!==!1,n.isScale?c:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){G0(t,"onBeforeScale",function(h){Pe(t,"onBeforeScaleGroup",ct(t,e,J(J({},h),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,a=n.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,c=n.fixedPosition,u=ys(t,this,"dragControl",e,function(h,g){var m=te(fr(zh(t.rotation/180*Math.PI,3),[g.datas.originalX*i[0],g.datas.originalY*i[1],1],3),2),b=m[0],_=m[1];return J(J({},g),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:At(c,[b,_])})}),d=J({targets:t.props.targets,events:u},r);return Pe(t,"onScaleGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=ys(t,this,"dragControlEnd",e),a=ei(t,e,{targets:t.props.targets,events:i});return Pe(t,"onScaleGroupEnd",a),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function fo(t,e){return t.map(function(n,r){return jm(n,e[r],1,2)})}function xk(t,e,n){var r=_n(t,e),i=_n(t,n),a=i-r;return a>=0?a:a+2*Math.PI}function xK(t,e){var n=xk(t[0],t[1],t[2]),r=xk(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var _K={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Lw("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,a=n.warpable,o=n.zoom;if(r||i||!a)return[];var c=t.state,u=c.pos1,d=c.pos2,h=c.pos3,g=c.pos4,m=fo(u,d),b=fo(d,u),_=fo(u,h),w=fo(h,u),E=fo(h,g),T=fo(g,h),C=fo(d,g),N=fo(g,d);return Ce([e.createElement("div",{className:Fe("line"),key:"middeLine1",style:vf(m,E,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine2",style:vf(b,T,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine3",style:vf(_,C,o)}),e.createElement("div",{className:Fe("line"),key:"middeLine4",style:vf(w,N,o)})],te(bO(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Un(n,Fe("direction"))&&Un(n,Fe("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,a=r.target,o=HO(a,n);if(!o||!i)return!1;var c=t.state,u=c.transformOrigin,d=c.is3d,h=c.targetTransform,g=c.targetMatrix,m=c.width,b=c.height,_=c.left,w=c.top;n.datas={},n.targetTransform=h,n.warpTargetMatrix=d?g:Zi(g,3,4),n.targetInverseMatrix=Y4(ja(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=_,n.top=w,n.poses=[[0,0],[m,0],[0,b],[m,b]].map(function(C){return He(C,u)}),n.nextPoses=n.poses.map(function(C){var N=te(C,2),L=N[0],j=N[1];return fr(n.warpTargetMatrix,[L,j,0,1],4)}),n.startValue=Kt(4),n.prevMatrix=Kt(4),n.absolutePoses=Ti(c),n.posIndexes=dO(o),ic(t,e),z0(t,e,"matrix3d"),c.snapRenderInfo={request:e.isRequest,direction:o};var E=ct(t,e,J({set:function(C){n.startValue=C}},V0(t,e))),T=Pe(t,"onWarpStart",E);return T!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,a=e.distY,o=n.targetInverseMatrix,c=n.prevMatrix,u=n.isWarp,d=n.startValue,h=n.poses,g=n.posIndexes,m=n.absolutePoses;if(!u)return!1;if(P0(t,e,"matrix3d"),td(t,"warpable")){var b=g.map(function(D){return m[D]});b.length>1&&b.push([(b[0][0]+b[1][0])/2,(b[0][1]+b[1][1])/2]);var _=U0(t,r,{horizontal:b.map(function(D){return D[1]+a}),vertical:b.map(function(D){return D[0]+i})}),w=_.horizontal,E=_.vertical;a-=w.offset,i-=E.offset}var T=Ua({datas:n,distX:i,distY:a},!0),C=n.nextPoses.slice();if(g.forEach(function(D){C[D]=At(C[D],T)}),!BX.every(function(D){return xK(D.map(function(V){return h[V]}),D.map(function(V){return C[V]}))}))return!1;var N=Sw(h[0],h[2],h[1],h[3],C[0],C[2],C[1],C[3]);if(!N.length)return!1;var L=Gt(o,N,4),j=cO(n,L,!0),M=Gt(ja(c,4),j,4);n.prevMatrix=j;var A=Gt(d,j,4),R=j0(n,"matrix3d(".concat(A.join(", "),")"),"matrix3d(".concat(j.join(", "),")"));return Rw(e,R),Pe(t,"onWarp",ct(t,e,J({delta:M,matrix:A,dist:j,multiply:Gt,transform:R},_r({transform:R},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,Pe(t,"onWarpEnd",ei(t,e,{})),r):!1}},wK=Fe("area-pieces"),jg=Fe("area-piece"),JO=Fe("avoid"),SK=Fe("view-dragging");function Fb(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;A4(e,JO),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function _k(t){return t.createElement("div",{key:"area_pieces",className:wK},t.createElement("div",{className:jg}),t.createElement("div",{className:jg}),t.createElement("div",{className:jg}),t.createElement("div",{className:jg}))}var eP={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,a=n.groupable,o=n.passDragArea,c=t.getState(),u=c.width,d=c.height,h=c.renderPoses,g=o?Fe("area","pass"):Fe("area");if(a)return[e.createElement("div",{key:"area",ref:ms(t,"areaElement"),className:g}),_k(e)];if(!r||!i)return[];var m=Sw([0,0],[u,0],[0,d],[u,d],h[0],h[1],h[2],h[3]),b=m.length?F0(m,!0):"none";return[e.createElement("div",{key:"area",ref:ms(t,"areaElement"),className:g,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:b}}),_k(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,a=e.inputEvent;if(!a)return!1;n.isDragArea=!1;var o=t.areaElement,c=t.state,u=c.moveableClientRect,d=c.renderPoses,h=c.rootMatrix,g=c.is3d,m=u.left,b=u.top,_=wi(d),w=_.left,E=_.top,T=_.width,C=_.height,N=g?4:3,L=te(Ou(h,[r-m,i-b],N),2),j=L[0],M=L[1];j-=w,M-=E;var A=[{left:w,top:E,width:T,height:M-10},{left:w,top:E,width:j-10,height:C},{left:w,top:E+M+10,width:T,height:C-M-10},{left:w+j+10,top:E,width:T-j-10,height:C}],R=[].slice.call(o.nextElementSibling.children);A.forEach(function(D,V){R[V].style.cssText="left: ".concat(D.left,"px;top: ").concat(D.top,"px; width: ").concat(D.width,"px; height: ").concat(D.height,"px;")}),T4(o,JO),c.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Fb(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Fb(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Fb(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&_4(function(){e.disableNativeEvent=!1})}},EK=Bh("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,a=n.groupable,o=t.getState(),c=o.beforeOrigin,u=o.rotation,d=o.svg,h=o.allMatrix,g=o.is3d,m=o.left,b=o.top,_=o.offsetWidth,w=o.offsetHeight,E;if(!a&&d&&i){var T=te(Fw(i,_,w),2),C=T[0],N=T[1],L=g?4:3,j=an(h,[C,N],L);E=Hm(u,r,He(j,[m,b]))}else E=Hm(u,r,c);return[e.createElement("div",{className:Fe("control","origin"),style:E,key:"beforeOrigin"})]}});function TK(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var AK={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,a=n.scrollOptions,o=new aX,c=Ma(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var u=e.isControl?"controlGesto":"targetGesto",d=e.targets;o.on("scroll",function(h){var g=h.container,m=h.direction,b=ct(t,e,{scrollContainer:g,direction:m}),_=d?"onScrollGroup":"onScroll";d&&(b.targets=d),Pe(t,_,b)}).on("move",function(h){var g=h.offsetX,m=h.offsetY,b=h.inputEvent;t[u].scrollBy(g,m,b.inputEvent,!1)}).on("scrollDrag",function(h){var g=h.next;g(t[u].getCurrentEvent())}),o.dragStart(e,J({container:c},a))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,a=i===void 0?t.getContainer():i,o=r.scrollThreshold,c=o===void 0?0:o,u=r.scrollThrottleTime,d=u===void 0?0:u,h=r.getScrollPosition,g=h===void 0?TK:h,m=r.scrollOptions;return n.drag(e,J({container:a,threshold:c,throttleTime:d,getScrollPosition:function(b){return g({scrollContainer:b.container,direction:b.direction})}},m)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,J(J({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,J(J({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,J(J({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,J(J({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,J(J({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,J(J({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,J(J({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},tP={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},CK=Bh("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=ZO(n.padding||{}),i=r.left,a=r.top,o=r.right,c=r.bottom,u=t.getState(),d=u.renderPoses,h=u.pos1,g=u.pos2,m=u.pos3,b=u.pos4,_=[h,g,m,b],w=[];return i>0&&w.push([0,2]),a>0&&w.push([0,1]),o>0&&w.push([1,3]),c>0&&w.push([2,3]),w.map(function(E,T){var C=te(E,2),N=C[0],L=C[1],j=_[N],M=_[L],A=d[N],R=d[L],D=Sw([0,0],[100,0],[0,100],[100,100],j,M,A,R);if(D.length)return e.createElement("div",{key:"padding".concat(T),className:Fe("padding"),style:{transform:F0(D,!0)}})})}}),wk=["nw","ne","se","sw"];function Vg(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var RK=[1,2,5,6],kK=[0,3,4,7],Il=[1,-1,-1,1],Ml=[1,1,-1,-1];function Gw(t,e,n,r,i,a,o,c){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=n),c===void 0&&(c=r);var u=[],d=!1,h=t.filter(function(m){return!m.virtual}),g=h.map(function(m){var b=m.horizontal,_=m.vertical,w=m.pos;if(_&&!d&&(d=!0,u.push("/")),d){var E=Math.max(0,_===1?w[1]-a:c-w[1]);return u.push(Bi(E,r,e)),E}else{var E=Math.max(0,b===1?w[0]-i:o-w[0]);return u.push(Bi(E,n,e)),E}});return{radiusPoses:h,styles:u,raws:g}}function nP(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var a=t[i];a.sub&&(a.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),a.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function rP(t,e,n,r,i,a,o){var c,u,d,h;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var g=t.indexOf("/"),m=(g>-1?t.slice(0,g):t).length,b=t.slice(0,m),_=t.slice(m+1),w=b.length,E=_.length,T=E>0,C=te(b,4),N=C[0],L=N===void 0?"0px":N,j=C[1],M=j===void 0?L:j,A=C[2],R=A===void 0?L:A,D=C[3],V=D===void 0?M:D,P=te(_,4),B=P[0],O=B===void 0?L:B,W=P[1],X=W===void 0?T?O:M:W,H=P[2],K=H===void 0?T?O:R:H,ee=P[3],ie=ee===void 0?T?X:V:ee,q=[L,M,R,V].map(function(ce){return Ft(ce,e)}),F=[O,X,K,ie].map(function(ce){return Ft(ce,n)}),Y=q.slice(),ne=F.slice();c=te(Vg([Y[0],Y[1]],e),2),Y[0]=c[0],Y[1]=c[1],u=te(Vg([Y[3],Y[2]],e),2),Y[3]=u[0],Y[2]=u[1],d=te(Vg([ne[0],ne[3]],n),2),ne[0]=d[0],ne[3]=d[1],h=te(Vg([ne[1],ne[2]],n),2),ne[1]=h[0],ne[2]=h[1];var Z=o?Y:Y.slice(0,Math.max(a[0],w)),oe=o?ne:ne.slice(0,Math.max(a[1],E));return Ce(Ce([],te(Z.map(function(ce,me){var ge=wk[me];return{virtual:me>=w,horizontal:Il[me],vertical:0,pos:[r+ce,i+(Ml[me]===-1?n:0)],sub:!0,raw:q[me],direction:ge}})),!1),te(oe.map(function(ce,me){var ge=wk[me];return{virtual:me>=E,horizontal:0,vertical:Ml[me],pos:[r+(Il[me]===-1?e:0),i+ce],sub:!0,raw:F[me],direction:ge}})),!1)}function DK(t,e,n,r,i){i===void 0&&(i=e.length);var a=nP(t.slice(r)),o=a.horizontalRange,c=a.verticalRange,u=n-r,d=0;if(u===0)d=i;else if(u>0&&u<o[1])d=o[1]-u;else if(u>=c[0])d=c[0]+c[1]-u;else return;t.splice(n,d),e.splice(n,d)}function NK(t,e,n,r,i,a,o,c,u,d,h){d===void 0&&(d=0),h===void 0&&(h=0);var g=nP(t.slice(n)),m=g.horizontalRange,b=g.verticalRange;if(r>-1)for(var _=Il[r]===1?a-d:c-a,w=m[1];w<=r;++w){var E=Ml[w]===1?h:u,T=0;if(r===w?T=a:w===0?T=d+_:Il[w]===-1&&(T=c-(e[n][0]-d)),t.splice(n+w,0,{horizontal:Il[w],vertical:0,pos:[T,E]}),e.splice(n+w,0,[T,E]),w===0)break}else if(i>-1){var C=Ml[i]===1?o-h:u-o;if(m[1]===0&&b[1]===0){var N=[d+C,h];t.push({horizontal:Il[0],vertical:0,pos:N}),e.push(N)}for(var L=b[0],w=b[1];w<=i;++w){var T=Il[w]===1?d:c,E=0;if(i===w?E=o:w===0?E=h+C:Ml[w]===1?E=e[n+L][1]:Ml[w]===-1&&(E=u-(e[n+L][1]-h)),t.push({horizontal:0,vertical:Ml[w],pos:[T,E]}),e.push([T,E]),w===0)break}}}function IK(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,a){return i.horizontal?e[a]:null}).filter(function(i){return i!=null}),r=t.map(function(i,a){return i.vertical?e[a]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var MK=[[0,-1,"n"],[1,0,"e"]],OK=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function $w(t,e,n){var r=t.props.clipRelative,i=t.state,a=i.width,o=i.height,c=e,u=c.type,d=c.poses,h=u==="rect",g=u==="circle";if(u==="polygon")return n.map(function(M){return"".concat(Bi(M[0],a,r)," ").concat(Bi(M[1],o,r))});if(h||u==="inset"){var m=n[1][1],b=n[3][0],_=n[7][0],w=n[5][1];if(h)return[m,b,w,_].map(function(M){return"".concat(M,"px")});var E=[m,a-b,o-w,_].map(function(M,A){return Bi(M,A%2?a:o,r)});if(n.length>8){var T=te(He(n[4],n[0]),2),C=T[0],N=T[1];E.push.apply(E,Ce(["round"],te(Gw(d.slice(8).map(function(M,A){return J(J({},M),{pos:n[A]})}),r,C,N,_,m,b,w).styles),!1))}return E}else if(g||u==="ellipse"){var L=n[0],j=Bi(we(n[1][1]-L[1]),g?Math.sqrt((a*a+o*o)/2):o,r),E=g?[j]:[Bi(we(n[2][0]-L[0]),a,r),j];return E.push("at",Bi(L[0],a,r),Bi(L[1],o,r)),E}}function Ym(t,e,n,r){var i=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return OK.map(function(o){var c=te(o,3),u=c[0],d=c[1],h=c[2],g=i[u+1],m=a[d+1];return{vertical:we(d),horizontal:we(u),direction:h,pos:[g,m]}})}function iP(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[we(e[1]-e[0]),we(n[1]-n[0])]}function Sk(t,e,n,r,i){var a,o,c,u,d,h,g,m,b;if(t){var _=i;if(!_){var w=zr(t),E=w("clipPath");_=E!=="none"?E:w("clip")}if(!((!_||_==="none"||_==="auto")&&(_=r,!_))){var T=x4(_),C=T.prefix,N=C===void 0?_:C,L=T.value,j=L===void 0?"":L,M=N==="circle",A=" ";if(N==="polygon"){var R=Vl(j||"0% 0%, 100% 0%, 100% 100%, 0% 100%");A=",";var D=R.map(function(st){var Tt=te(st.split(" "),2),Ke=Tt[0],ut=Tt[1];return{vertical:1,horizontal:1,pos:[Ft(Ke,e),Ft(ut,n)]}}),V=Ql(D.map(function(st){return st.pos}));return{type:N,clipText:_,poses:D,splitter:A,left:V.minX,right:V.maxX,top:V.minY,bottom:V.maxY}}else if(M||N==="ellipse"){var P="",B="",O=0,W=0,R=Fo(j);if(M){var X="";a=te(R,4),o=a[0],X=o===void 0?"50%":o,c=a[2],P=c===void 0?"50%":c,u=a[3],B=u===void 0?"50%":u,O=Ft(X,Math.sqrt((e*e+n*n)/2)),W=O}else{var H="",K="";d=te(R,5),h=d[0],H=h===void 0?"50%":h,g=d[1],K=g===void 0?"50%":g,m=d[3],P=m===void 0?"50%":m,b=d[4],B=b===void 0?"50%":b,O=Ft(H,e),W=Ft(K,n)}var ee=[Ft(P,e),Ft(B,n)],D=Ce([{vertical:1,horizontal:1,pos:ee,direction:"nesw"}],te(MK.slice(0,M?1:2).map(function(Ke){return{vertical:we(Ke[1]),horizontal:Ke[0],direction:Ke[2],sub:!0,pos:[ee[0]+Ke[0]*O,ee[1]+Ke[1]*W]}})),!1);return{type:N,clipText:_,radiusX:O,radiusY:W,left:ee[0]-O,top:ee[1]-W,right:ee[0]+O,bottom:ee[1]+W,poses:D,splitter:A}}else if(N==="inset"){var R=Fo(j||"0 0 0 0"),ie=R.indexOf("round"),q=(ie>-1?R.slice(0,ie):R).length,F=R.slice(q+1),Y=te(R.slice(0,q),4),ne=Y[0],Z=Y[1],oe=Z===void 0?ne:Z,ce=Y[2],me=ce===void 0?ne:ce,ge=Y[3],Te=ge===void 0?oe:ge,Ne=te([ne,me].map(function(Ke){return Ft(Ke,n)}),2),ae=Ne[0],Ae=Ne[1],De=te([Te,oe].map(function(Ke){return Ft(Ke,e)}),2),Me=De[0],Be=De[1],Ve=e-Be,Se=n-Ae,ze=rP(F,Ve-Me,Se-ae,Me,ae),D=Ce(Ce([],te(Ym(ae,Ve,Se,Me)),!1),te(ze),!1);return{type:"inset",clipText:_,poses:D,top:ae,left:Me,right:Ve,bottom:Se,radius:F,splitter:A}}else if(N==="rect"){var R=Vl(j||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));A=",";var Ie=te(R.map(function(cn){var Vt=Mh(cn).value;return Vt}),4),Le=Ie[0],Be=Ie[1],Ae=Ie[2],Me=Ie[3],D=Ym(Le,Be,Ae,Me);return{type:"rect",clipText:_,poses:D,top:Le,right:Be,bottom:Ae,left:Me,values:R,splitter:A}}}}}function PK(t,e,n,r,i){var a=t[e],o=a.direction,c=a.sub,u=t.map(function(){return[0,0]}),d=o?o.split(""):[];if(r&&e<8){var h=d.filter(function(O){return O==="w"||O==="e"}),g=d.filter(function(O){return O==="n"||O==="s"}),m=h[0],b=g[0];u[e]=n;var _=te(iP(t),2),w=_[0],E=_[1],T=w&&E?w/E:0;if(T&&i){var C=(e+4)%8,N=t[C].pos,L=[0,0];o.indexOf("w")>-1?L[0]=-1:o.indexOf("e")>-1&&(L[0]=1),o.indexOf("n")>-1?L[1]=-1:o.indexOf("s")>-1&&(L[1]=1);var j=WO([w,E],n,T,L,!0),M=w+j[0],A=E+j[1],R=N[1],D=N[1],V=N[0],P=N[0];L[0]===-1?V=P-M:L[0]===1?P=V+M:(V=V-M/2,P=P+M/2),L[1]===-1?R=D-A:(L[1]===1||(R=D-A/2),D=R+A);var B=Ym(R,P,D,V);t.forEach(function(O,W){u[W][0]=B[W].pos[0]-O.pos[0],u[W][1]=B[W].pos[1]-O.pos[1]})}else t.forEach(function(O,W){var X=O.direction;X&&(X.indexOf(m)>-1&&(u[W][0]=n[0]),X.indexOf(b)>-1&&(u[W][1]=n[1]))}),m&&(u[1][0]=n[0]/2,u[5][0]=n[0]/2),b&&(u[3][1]=n[1]/2,u[7][1]=n[1]/2)}else o&&!c?d.forEach(function(O){var W=O==="n"||O==="s";t.forEach(function(X,H){var K=X.direction,ee=X.horizontal,ie=X.vertical;!K||K.indexOf(O)===-1||(u[H]=[W||!ee?0:n[0],!W||!ie?0:n[1]])})}):u[e]=n;return u}function jK(t,e){var n=te(lO(t,e),2),r=n[0],i=n[1],a=e.datas,o=a.clipPath,c=a.clipIndex,u=o,d=u.type,h=u.poses,g=u.splitter,m=h.map(function(C){return C.pos});if(d==="polygon")m.splice(c,0,[r,i]);else if(d==="inset"){var b=RK.indexOf(c),_=kK.indexOf(c),w=h.length;if(NK(h,m,8,b,_,r,i,m[4][0],m[4][1],m[0][0],m[0][1]),w===h.length)return}else return;var E=$w(t,o,m),T="".concat(d,"(").concat(E.join(g),")");Pe(t,"onClip",ct(t,e,J({clipEventType:"added",clipType:d,poses:m,clipStyles:E,clipStyle:T,distX:0,distY:0},_r({clipPath:T},e))))}function VK(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,a=r,o=a.type,c=a.poses,u=a.splitter,d=c.map(function(b){return b.pos}),h=d.length;if(o==="polygon")c.splice(i,1),d.splice(i,1);else if(o==="inset"){if(i<8||(DK(c,d,i,8,h),h===c.length))return}else return;var g=$w(t,r,d),m="".concat(o,"(").concat(g.join(u),")");Pe(t,"onClip",ct(t,e,J({clipEventType:"removed",clipType:o,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},_r({clipPath:m},e))))}var zK={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,a=n.clipArea,o=n.zoom,c=n.groupable,u=t.getState(),d=u.target,h=u.width,g=u.height,m=u.allMatrix,b=u.is3d,_=u.left,w=u.top,E=u.pos1,T=u.pos2,C=u.pos3,N=u.pos4,L=u.clipPathState,j=u.snapBoundInfos,M=u.rotation;if(!d||c)return[];var A=Sk(d,h,g,i||"inset",L||r);if(!A)return[];var R=b?4:3,D=A.type,V=A.poses,P=V.map(function(Be){var Ve=an(m,Be.pos,R);return[Ve[0]-_,Ve[1]-w]}),B=[],O=[],W=D==="rect",X=D==="inset",H=D==="polygon";if(W||X||H){var K=X?P.slice(0,8):P;O=K.map(function(Be,Ve){var Se=Ve===0?K[K.length-1]:K[Ve-1],ze=_n(Se,Be),Ie=BO(Se,Be);return e.createElement("div",{key:"clipLine".concat(Ve),className:Fe("line","clip-line","snap-control"),"data-clip-index":Ve,style:{width:"".concat(Ie,"px"),transform:"translate(".concat(Se[0],"px, ").concat(Se[1],"px) rotate(").concat(ze,"rad) scaleY(").concat(o,")")}})})}if(B=P.map(function(Be,Ve){return e.createElement("div",{key:"clipControl".concat(Ve),className:Fe("control","clip-control","snap-control"),"data-clip-index":Ve,style:{transform:"translate(".concat(Be[0],"px, ").concat(Be[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})}),X&&B.push.apply(B,Ce([],te(P.slice(8).map(function(Be,Ve){return e.createElement("div",{key:"clipRadiusControl".concat(Ve),className:Fe("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+Ve,style:{transform:"translate(".concat(Be[0],"px, ").concat(Be[1],"px) rotate(").concat(M,"rad) scale(").concat(o,")")}})})),!1)),D==="circle"||D==="ellipse"){var ee=A.left,ie=A.top,q=A.radiusX,F=A.radiusY,Y=te(He(an(m,[ee,ie],R),an(m,[0,0],R)),2),ne=Y[0],Z=Y[1],oe="none";if(!a){for(var ce=Math.max(10,q/5,F/5),me=[],ge=0;ge<=ce;++ge){var Te=Math.PI*2/ce*ge;me.push([q+(q-o)*Math.cos(Te),F+(F-o)*Math.sin(Te)])}me.push([q,-2]),me.push([-2,-2]),me.push([-2,F*2+2]),me.push([q*2+2,F*2+2]),me.push([q*2+2,-2]),me.push([q,-2]),oe="polygon(".concat(me.map(function(Be){return"".concat(Be[0],"px ").concat(Be[1],"px")}).join(", "),")")}B.push(e.createElement("div",{key:"clipEllipse",className:Fe("clip-ellipse","snap-control"),style:{width:"".concat(q*2,"px"),height:"".concat(F*2,"px"),clipPath:oe,transform:"translate(".concat(-_+ne,"px, ").concat(-w+Z,"px) ").concat(F0(m))}}))}if(a){var Ne=wi(Ce([E,T,C,N],te(P),!1)),ae=Ne.width,Ae=Ne.height,De=Ne.left,Me=Ne.top;if(H||W||X){var me=X?P.slice(0,8):P;B.push(e.createElement("div",{key:"clipArea",className:Fe("clip-area","snap-control"),style:{width:"".concat(ae,"px"),height:"".concat(Ae,"px"),transform:"translate(".concat(De,"px, ").concat(Me,"px)"),clipPath:"polygon(".concat(me.map(function(Ve){return"".concat(Ve[0]-De,"px ").concat(Ve[1]-Me,"px")}).join(", "),")")}}))}}return j&&["vertical","horizontal"].forEach(function(Be){var Ve=j[Be],Se=Be==="horizontal";Ve.isSnap&&O.push.apply(O,Ce([],te(Ve.snap.posInfos.map(function(ze,Ie){var Le=ze.pos,st=He(an(m,Se?[0,Le]:[Le,0],R),[_,w]),Tt=He(an(m,Se?[h,Le]:[Le,g],R),[_,w]);return ih(e,"",st,Tt,o,"clip".concat(Be,"snap").concat(Ie),"guideline")})),!1)),Ve.isBound&&O.push.apply(O,Ce([],te(Ve.bounds.map(function(ze,Ie){var Le=ze.pos,st=He(an(m,Se?[0,Le]:[Le,0],R),[_,w]),Tt=He(an(m,Se?[h,Le]:[Le,g],R),[_,w]);return ih(e,"",st,Tt,o,"clip".concat(Be,"bounds").concat(Ie),"guideline","bounds","bold")})),!1))}),Ce(Ce([],te(B),!1),te(O),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,J(J({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,a=r.customClipPath,o=n.target,c=n.width,u=n.height,d=e.inputEvent?e.inputEvent.target:null,h=d&&d.getAttribute("class")||"",g=e.datas,m=Sk(o,c,u,i||"inset",a);if(!m)return!1;var b=m.clipText,_=m.type,w=m.poses,E=Pe(t,"onClipStart",ct(t,e,{clipType:_,clipStyle:b,poses:w.map(function(T){return T.pos})}));return E===!1?(g.isClipStart=!1,!1):(g.isControl=h&&h.indexOf("clip-control")>-1,g.isLine=h.indexOf("clip-line")>-1,g.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,g.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,g.clipPath=m,g.isClipStart=!0,n.clipPathState=b,ic(t,e),!0)},dragControl:function(t,e){var n,r,i,a=e.datas,o=e.originalDatas,c=e.isDragTarget;if(!a.isClipStart)return!1;var u=a,d=u.isControl,h=u.isLine,g=u.isArea,m=u.clipIndex,b=u.clipPath;if(!b)return!1;var _=Zl(t.props,"clippable"),w=_.keepRatio,E=0,T=0,C=o.draggable,N=Ua(e);c&&C?(n=te(C.prevBeforeDist,2),E=n[0],T=n[1]):(r=te(N,2),E=r[0],T=r[1]);var L=[E,T],j=t.state,M=j.width,A=j.height,R=!g&&!d&&!h,D=b.type,V=b.poses,P=b.splitter,B=V.map(function(ft){return ft.pos});R&&(E=-E,T=-T);var O=!d||V[m].direction==="nesw",W=D==="inset"||D==="rect",X=V.map(function(){return[0,0]});if(d&&!O){var H=V[m],K=H.horizontal,ee=H.vertical,ie=[E*we(K),T*we(ee)];X=PK(V,m,ie,W,w)}else O&&(X=B.map(function(){return[E,T]}));var q=B.map(function(ft,nn){return At(ft,X[nn])}),F=Ce([],te(q),!1);j.snapBoundInfos=null;var Y=b.type==="circle",ne=b.type==="ellipse";if(Y||ne){var Z=wi(q),oe=we(Z.bottom-Z.top),ce=we(ne?Z.right-Z.left:oe),me=q[0][1]+oe,ge=q[0][0]-ce,Te=q[0][0]+ce;Y&&(F.push([Te,Z.bottom]),X.push([1,0])),F.push([Z.left,me]),X.push([0,1]),F.push([ge,Z.bottom]),X.push([1,0])}var Ne=OO((_.clipHorizontalGuidelines||[]).map(function(ft){return Ft("".concat(ft),A)}),(_.clipVerticalGuidelines||[]).map(function(ft){return Ft("".concat(ft),M)}),M,A),ae=[],Ae=[];if(Y||ne)ae=[F[4][0],F[2][0]],Ae=[F[1][1],F[3][1]];else if(W){var De=[F[0],F[2],F[4],F[6]],Me=[X[0],X[2],X[4],X[6]];ae=De.filter(function(ft,nn){return Me[nn][0]}).map(function(ft){return ft[0]}),Ae=De.filter(function(ft,nn){return Me[nn][1]}).map(function(ft){return ft[1]})}else ae=F.filter(function(ft,nn){return X[nn][0]}).map(function(ft){return ft[0]}),Ae=F.filter(function(ft,nn){return X[nn][1]}).map(function(ft){return ft[1]});var Be=[0,0],Ve=ok(Ne,_.clipTargetBounds&&{left:0,top:0,right:M,bottom:A},ae,Ae,5,5),Se=Ve.horizontal,ze=Ve.vertical,Ie=Se.offset,Le=ze.offset;if(Se.isBound&&(Be[1]+=Ie),ze.isBound&&(Be[0]+=Le),(ne||Y)&&X[0][0]===0&&X[0][1]===0){var Z=wi(q),st=Z.bottom-Z.top,Tt=ne?Z.right-Z.left:st,Ke=ze.isBound?we(Le):ze.snapIndex===0?-Le:Le,ut=Se.isBound?we(Ie):Se.snapIndex===0?-Ie:Ie;Tt-=Ke,st-=ut,Y&&(st=AO(ze,Se)>0?st:Tt,Tt=st);var kt=F[0];F[1][1]=kt[1]-st,F[2][0]=kt[0]+Tt,F[3][1]=kt[1]+st,F[4][0]=kt[0]-Tt}else if(W&&w&&d){var cn=te(iP(V),2),Vt=cn[0],wn=cn[1],Br=Vt&&wn?Vt/wn:0,ta=V[m],Fa=ta.direction||"",Ds=F[1][1],me=F[5][1],ge=F[7][0],Te=F[3][0];we(Ie)<=we(Le)?Ie=br(Ie)*we(Le)/Br:Le=br(Le)*we(Ie)*Br,Fa.indexOf("w")>-1?ge-=Le:Fa.indexOf("e")>-1?Te-=Le:(ge+=Le/2,Te-=Le/2),Fa.indexOf("n")>-1?Ds-=Ie:Fa.indexOf("s")>-1?me-=Ie:(Ds+=Ie/2,me-=Ie/2);var Ur=Ym(Ds,Te,me,ge);F.forEach(function(Fr,ni){var pr;pr=te(Ur[ni].pos,2),Fr[0]=pr[0],Fr[1]=pr[1]})}else F.forEach(function(ft,nn){var rn=X[nn];rn[0]&&(ft[0]-=Le),rn[1]&&(ft[1]-=Ie)});var Sn=$w(t,b,q),ar="".concat(D,"(").concat(Sn.join(P),")");if(j.clipPathState=ar,Y||ne)ae=[F[4][0],F[2][0]],Ae=[F[1][1],F[3][1]];else if(W){var De=[F[0],F[2],F[4],F[6]];ae=De.map(function(nn){return nn[0]}),Ae=De.map(function(nn){return nn[1]})}else ae=F.map(function(ft){return ft[0]}),Ae=F.map(function(ft){return ft[1]});if(j.snapBoundInfos=ok(Ne,_.clipTargetBounds&&{left:0,top:0,right:M,bottom:A},ae,Ae,1,1),C){var tn=j.is3d,sc=j.allMatrix,Ns=tn?4:3,Is=Be;c&&(Is=[L[0]+Be[0]-N[0],L[1]+Be[1]-N[1]]),C.deltaOffset=Gt(sc,[Is[0],Is[1],0,0],Ns)}return Pe(t,"onClip",ct(t,e,J({clipEventType:"changed",clipType:D,poses:q,clipStyle:ar,clipStyles:Sn,distX:E,distY:T},_r((i={},i[D==="rect"?"clip":"clipPath"]=ar,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,a=r.isLine,o=r.isClipStart,c=r.isControl;return o?(Pe(t,"onClipEnd",ei(t,e,{})),i&&(c?VK(t,e):a&&jK(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},LK={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Un(e.inputEvent.target,Fe("origin"))},dragControlStart:function(t,e){var n=e.datas;ic(t,e);var r=ct(t,e,{dragStart:yr.dragStart(t,new Nu().dragStart([0,0],e))}),i=Pe(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var a=te(Ua(e),2),o=a[0],c=a[1],u=t.state,d=u.width,h=u.height,g=u.offsetMatrix,m=u.targetMatrix,b=u.is3d,_=t.props.originRelative,w=_===void 0?!0:_,E=b?4:3,T=[o,c];if(i){var C=e.distOrigin;(C[0]||C[1])&&(T=C)}var N=At(n.startOrigin,T),L=At(n.startTargetOrigin,T),j=He(T,n.prevOrigin),M=Fh(g,m,N,E),A=t.getRect(),R=wi(ac(M,d,h,E)),D=[A.left-R.left,A.top-R.top];n.prevOrigin=T;var V=[Bi(L[0],d,w),Bi(L[1],h,w)].join(" "),P=yr.drag(t,Uh(e,t.state,D,!!r)),B=ct(t,e,J(J({width:d,height:h,origin:N,dist:T,delta:j,transformOrigin:V,drag:P},_r({transformOrigin:V,transform:P.transform},e)),{afterTransform:P.transform}));return Pe(t,"onDragOrigin",B),B},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(Pe(t,"onDragOriginEnd",ei(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,a=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(c){return"deltaOrigin"in c?(o[0]+=c.deltaOrigin[0],o[1]+=c.deltaOrigin[1]):"origin"in c?(o[0]=c.origin[0]-a[0],o[1]=c.origin[1]-a[1]):("x"in c?r=c.x-n.left:"deltaX"in c&&(r+=c.deltaX),"y"in c?i=c.y-n.top:"deltaY"in c&&(i+=c.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function BK(t,e,n,r){var i=t.filter(function(u){var d=u.virtual,h=u.horizontal;return h&&!d}).length,a=t.filter(function(u){var d=u.virtual,h=u.vertical;return h&&!d}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(a===0?o=4:a<4&&(o=7)),e===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var c=t[o];UK(t,o),o<4?c.pos[0]=n:c.pos[1]=r}}function UK(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function FK(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function Ek(t,e,n,r,i){r===void 0&&(r=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Fo(t),rP(a,e,n,0,0,r,i)}function Tk(t,e,n,r,i){var a=t.state,o=a.width,c=a.height,u=Gw(i,t.props.roundRelative,o,c),d=u.raws,h=u.styles,g=u.radiusPoses,m=IK(g,d),b=m.horizontals,_=m.verticals,w=h.join(" ");a.borderRadiusState=w;var E=ct(t,e,J({horizontals:b,verticals:_,borderRadius:w,width:o,height:c,delta:r,dist:n},_r({borderRadius:w},e)));return Pe(t,"onRound",E),E}function Ak(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&(a?.props.target===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=zw(o).borderRadius,r.borderRadius=i))}return i}var GK={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Fe("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,a=n.height,o=n.allMatrix,c=n.is3d,u=n.left,d=n.top,h=n.borderRadiusState,g=t.props,m=g.minRoundControls,b=m===void 0?[0,0]:m,_=g.maxRoundControls,w=_===void 0?[4,4]:_,E=g.zoom,T=g.roundPadding,C=T===void 0?0:T,N=g.isDisplayShadowRoundControls,L=g.groupable;if(!r)return null;var j=h||Ak(t),M=c?4:3,A=Ek(j,i,a,b,!0);if(!A)return null;var R=0,D=0,V=L?[0,0]:[u,d];return A.map(function(P,B){var O=P.horizontal,W=P.vertical,X=P.direction||"",H=Ce([],te(P.pos),!1);D+=Math.abs(O),R+=Math.abs(W),O&&X.indexOf("n")>-1&&(H[1]-=C),W&&X.indexOf("w")>-1&&(H[0]-=C),O&&X.indexOf("s")>-1&&(H[1]+=C),W&&X.indexOf("e")>-1&&(H[0]+=C);var K=He(an(o,H,M),V),ee=N&&N!=="horizontal",ie=P.vertical?R<=w[1]&&(ee||!P.virtual):D<=w[0]&&(N||!P.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(B),className:Fe("control","border-radius",P.vertical?"vertical":"",P.virtual?"virtual":""),"data-radius-index":B,style:{display:ie?"block":"none",transform:"translate(".concat(K[0],"px, ").concat(K[1],"px) scale(").concat(E,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,c=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,d=-1;if(c){var h=i.getAttribute("data-line-key")||"";h&&(d=parseInt(h.replace(/render-line-/g,""),10),isNaN(d)&&(d=-1))}if(!o&&!c)return!1;var g=ct(t,e,{}),m=Pe(t,"onRoundStart",g);if(m===!1)return!1;r.lineIndex=d,r.controlIndex=u,r.isControl=o,r.isLine=c,ic(t,e);var b=t.props,_=b.roundRelative,w=b.minRoundControls,E=w===void 0?[0,0]:w,T=t.state,C=T.width,N=T.height;r.isRound=!0,r.prevDist=[0,0];var L=Ak(t),j=Ek(L||"",C,N,E,!0)||[];return r.controlPoses=j,T.borderRadiusState=Gw(j,_,C,N).styles.join(" "),g},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,a=te(Ua(e),2),o=a[0],c=a[1],u=[o,c],d=He(u,n.prevDist),h=t.props.maxRoundControls,g=h===void 0?[4,4]:h,m=t.state,b=m.width,_=m.height,w=r[i],E=w.vertical,T=w.horizontal,C=r.map(function(L){var j=L.horizontal,M=L.vertical,A=[j*T*u[0],M*E*u[1]];if(j){if(g[0]===1)return A;if(g[0]<4&&j!==T)return A}else{if(g[1]===0)return A[1]=M*T*u[0]/b*_,A;if(E){if(g[1]===1)return A;if(g[1]<4&&M!==E)return A}}return[0,0]});C[i]=u;var N=r.map(function(L,j){return J(J({},L),{pos:At(L.pos,C[j])})});return i<4?N.slice(0,i+1).forEach(function(L){L.virtual=!1}):N.slice(4,i+1).forEach(function(L){L.virtual=!1}),n.prevDist=[o,c],Tk(t,e,u,d,N)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var a=r.isControl,o=r.controlIndex,c=r.isLine,u=r.lineIndex,d=r.controlPoses,h=d.filter(function(T){var C=T.virtual;return C}).length,g=t.props.roundClickable,m=g===void 0?!0:g;if(i&&m){if(a&&(m===!0||m==="control"))FK(d,o);else if(c&&(m===!0||m==="line")){var b=te(lO(t,e),2),_=b[0],w=b[1];BK(d,u,_,w)}h!==d.filter(function(T){var C=T.virtual;return C}).length&&Tk(t,e,[0,0],[0,0],d)}var E=ei(t,e,{});return Pe(t,"onRoundEnd",E),n.borderRadiusState="",E},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=qi(t,"roundable",e),o=J({targets:t.props.targets,events:a.map(function(c,u){return J(J({},c),{target:i[u],moveable:r[u],currentTarget:r[u]})})},n);return Pe(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,a=qi(t,"roundable",e),o=J({targets:t.props.targets,events:a.map(function(c,u){return J(J(J({},c),{target:i[u],moveable:r[u],currentTarget:r[u]}),_r({borderRadius:n.borderRadius},c))})},n);return Pe(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=qi(t,"roundable",e);G0(t,"onRound",function(c){var u=J({targets:t.props.targets,events:i.map(function(d,h){return J(J(J({},d),{target:r[h],moveable:n[h],currentTarget:n[h]}),_r({borderRadius:c.borderRadius},d))})},c);Pe(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,e);if(!a)return!1;var o=J({targets:t.props.targets,events:i.map(function(c,u){var d;return J(J({},c),{target:r[u],moveable:n[u],currentTarget:n[u],lastEvent:(d=c.datas)===null||d===void 0?void 0:d.lastEvent})})},a);return Pe(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function $K(t,e){var n=e?4:3,r=Kt(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var aP={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,a=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(W4(i,!0),")"),c=!a||a==="none"?o:a;e.datas.startTransforms=$K(c,r)?[]:Fo(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return ct(t,e,{setTransform:function(n){e.datas.startTransforms=Vn(n)?n:Fo(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return ct(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Pe(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),Pe(t,"onBeforeRender",ct(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),Pe(t,"onBeforeRenderEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=qi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.setTransform(u,o),n.resetStyle(o),n.fillDragStartParams(u,o)});Pe(t,"onBeforeRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=qi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.resetStyle(o),n.fillDragParams(u,o)});Pe(t,"onBeforeRenderGroup",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Pe(t,"onBeforeRenderGroupEnd",ct(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},sP={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){Pe(t,"onRenderStart",ct(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Pe(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){Pe(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Pe(t,"onRenderGroupStart",ct(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=qi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragParams(u,o)});Pe(t,"onRenderGroup",ct(t,e,J(J({isPinch:!!e.isPinch,targets:t.props.targets,transform:Ng(e),transformObject:{}},_r(Ig(e))),{events:a})))},dragGroupEnd:function(t,e){var n=this,r=qi(t,"beforeRenderable",e),i=t.moveables,a=r.map(function(o,c){var u=i[c];return n.fillDragEndParams(u,o)});Pe(t,"onRenderGroupEnd",ct(t,e,J({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:Ng(e)},_r(Ig(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return Du(Bm(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ct(t,e,J({isPinch:!!e.isPinch,transformObject:n,transform:Ng(e)},_r(Ig(e))))},fillDragEndParams:function(t,e){var n={};return Du(Bm(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),ct(t,e,J({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Ng(e)},_r(Ig(e))))}};function Pf(t,e,n,r,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var c=i==="Start",u=i==="End",d=i==="After",h=t.state.target,g=a.isRequest,m=r.indexOf("Control")>-1;if(!h||c&&m&&!g&&t.areaElement===a.inputEvent.target)return!1;var b=Ce([],te(e),!1);if(g){var _=a.requestAble;b.some(function(B){return B.name===_})||b.push.apply(b,Ce([],te(t.props.ables.filter(function(B){return B.name===_})),!1))}if(!b.length||b.every(function(B){return B.dragRelation}))return!1;var w=a.inputEvent,E;u&&w&&(E=document.elementFromPoint(a.clientX,a.clientY)||w.target);var T=!1,C=function(){var B;T=!0,(B=a.stop)===null||B===void 0||B.call(a)},N=c&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());N&&t.updateRect(i,!0,!1);var L=a.datas,j=m?"controlGesto":"targetGesto",M=t[j],A=function(B,O,W){if(!(O in B)||M!==t[j])return!1;var X=B.name,H=L[X]||(L[X]={});if(c&&(H.isEventStart=!W||!B[W]||B[W](t,a)),!H.isEventStart)return!1;var K=B[O](t,J(J({},a),{stop:C,datas:H,originalDatas:L,inputTarget:E}));return t._emitter.off(),c&&K===!1&&(H.isEventStart=!1),K};N&&b.forEach(function(B){B.unset&&B.unset(t)}),A(aP,"drag".concat(r).concat(i));var R=0,D=0;n.forEach(function(B){if(T)return!1;var O="".concat(B).concat(r).concat(i),W="".concat(B).concat(r,"Condition");i===""&&!g&&hK(t.state,a);var X=b.filter(function(ee){return ee[O]});X=X.filter(function(ee,ie){return ee.name&&X.indexOf(ee)===ie});var H=X.filter(function(ee){return A(ee,O,W)}),K=H.length;T&&++R,K&&++D,!T&&c&&X.length&&!K&&(R+=X.filter(function(ee){var ie=ee.name,q=L[ie];return q.isEventStart?ee.dragRelation!=="strong":!1}).length?1:0)}),(!d||D)&&A(sP,"drag".concat(r).concat(i));var V=M!==t[j]||R===n.length;if((u||T||V)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(B){B.state.gestos={}}),b.forEach(function(B){B.unset&&B.unset(t)})),c&&!V&&!g&&D&&t.props.preventDefault&&a?.preventDefault(),t.isUnmounted||V)return!1;if(!c&&D&&!o||u){var P=t.props.flushSync||VO;P(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!c&&!u&&!d&&D&&!o&&Pf(t,e,n,r,i+"After",a),!0}function Hw(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var a=r,o=t.areaElement,c=t._dragTarget;return!c||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:a===c||c.contains(a)||a===o||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||Un(a,"moveable-area")||Un(a,"moveable-padding")||Un(a,"moveable-edgeDraggable")}}function oP(t,e,n){var r=t.controlBox,i=[],a=t.props,o=a.dragArea,c=t.state.target,u=a.dragTarget;i.push(r),(!o||u)&&i.push(e),!o&&u&&c&&e!==c&&a.dragTargetSelf&&i.push(c);var d=Hw(t);return cP(t,i,"targetAbles",n,{dragStart:d,pinchStart:d})}function lP(t,e){var n=t.controlBox,r=[];r.push(n);var i=Hw(t,!0),a=function(o,c){if(c===void 0&&(c=o.inputEvent.target),c===n)return!0;var u=i(o,c);return!u};return cP(t,r,"controlAbles",e,{dragStart:a,pinchStart:a})}function cP(t,e,n,r,i){i===void 0&&(i={});var a=n==="targetAbles",o=t.props,c=o.pinchOutside,u=o.pinchThreshold,d=o.preventClickEventOnDrag,h=o.preventClickDefault,g=o.checkInput,m=o.dragFocusedInput,b=o.preventDefault,_=b===void 0?!0:b,w=o.preventRightClick,E=w===void 0?!0:w,T=o.preventWheelClick,C=T===void 0?!0:T,N=o.dragContainer,L=Ma(N,!0),j={preventDefault:_,preventRightClick:E,preventWheelClick:C,container:L||No(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:c,preventClickEventOnDrag:a?d:!1,preventClickEventOnDragStart:a?h:!1,preventClickEventByCondition:a?null:function(R){return t.controlBox.contains(R.target)},checkInput:a?g:!1,dragFocusedInput:m},M=new vX(e,j),A=r==="Control";return["drag","pinch"].forEach(function(R){["Start","","End"].forEach(function(D){M.on("".concat(R).concat(D),function(V){var P,B=V.eventType,O=R==="drag"&&V.isPinch;if(i[B]&&!i[B](V)){V.stop();return}if(!O){var W=R==="drag"?[R]:["drag",R],X=Ce([],te(t[n]),!1),H=Pf(t,X,W,r,D,V);H?(t.props.stopPropagation||D==="Start"&&A)&&((P=V?.inputEvent)===null||P===void 0||P.stopPropagation()):V.stop()}})})}),M}var HK=(function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(a){var o=i.eventName,c=i.moveable;c.state.disableNativeEvent||i.ables.forEach(function(u){u[o](c,{inputEvent:a})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t})();function qK(t,e,n,r){var i;n===void 0&&(n=e);var a=pO(t,e),o=a.matrixes,c=a.is3d,u=a.targetMatrix,d=a.transformOrigin,h=a.targetOrigin,g=a.offsetContainer,m=a.hasFixed,b=a.zoom,_=sW(g,n),w=_.matrixes,E=_.is3d,T=_.offsetContainer,C=_.zoom,N=r,L=4,j=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,M=u,A=Kt(L),R=Kt(L),D=Kt(L),V=Kt(L),P=o.length,B=w.map(function(ie){return J(J({},ie),{matrix:ie.matrix?Ce([],te(ie.matrix),!1):void 0})}).reverse();o.reverse(),!c&&N&&(M=Zi(M,3,4),m1(o)),!E&&N&&m1(B),B.forEach(function(ie){R=Gt(R,ie.matrix,L)});var O=n||Ko(t),W=((i=B[0])===null||i===void 0?void 0:i.target)||ah(O,O,!0).offsetParent,X=B.slice(1).reduce(function(ie,q){return Gt(ie,q.matrix,L)},Kt(L));o.forEach(function(ie,q){if(P-2===q&&(D=A.slice()),P-1===q&&(V=A.slice()),!ie.matrix){var F=o[q+1],Y=cK(ie,F,W,L,Gt(X,A,L));ie.matrix=Kl(Y,L)}A=Gt(A,ie.matrix,L)});var H=!j&&c;M||(M=Kt(H?4:3));var K=F0(j&&M.length===16?Zi(M,4,3):M,H),ee=R;return R=Y4(R,L,L),{hasZoom:b!==1||C!==1,hasFixed:m,matrixes:o,rootMatrix:R,originalRootMatrix:ee,beforeMatrix:D,offsetMatrix:V,allMatrix:A,targetMatrix:M,targetTransform:K,inlineTransform:t.style.transform,transformOrigin:d,targetOrigin:h,is3d:N,offsetContainer:g,offsetRootContainer:T}}function YK(t,e,n,r){n===void 0&&(n=e);var i=0,a=0,o=0,c={},u=UO(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var d=qK(t,e,n,r),h=vu(d.allMatrix,d.transformOrigin,i,a);c=J(J({},d),h);var g=vu(d.allMatrix,[50,50],100,100);o=FO([g.pos1,g.pos2],g.direction)}var m=4;return J(J(J({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:Kt(m),rootMatrix:Kt(m),beforeMatrix:Kt(m),offsetMatrix:Kt(m),allMatrix:Kt(m),targetMatrix:Kt(m),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),c)}function x1(t,e,n,r,i,a){a===void 0&&(a=[]);var o=1,c=[0,0],u=Og(),d=Og(),h=Og(),g=Og(),m=[0,0],b={},_=YK(e,n,i,!0);if(e){var w=zr(e);a.forEach(function(B){b[B]=w(B)});var E=_.is3d?4:3,T=vu(_.offsetMatrix,At(_.transformOrigin,X4(_.targetMatrix,E)),_.width,_.height);o=T.direction,c=At(T.origin,[T.left-_.left,T.top-_.top]),g=Of(_.offsetRootContainer);var C=ah(r,r,!0).offsetParent||_.offsetRootContainer;if(_.hasZoom){var N=vu(Gt(_.originalRootMatrix,_.allMatrix),_.transformOrigin,_.width,_.height),L=vu(_.originalRootMatrix,$m(zr(C)("transformOrigin")).map(function(B){return parseFloat(B)}),C.offsetWidth,C.offsetHeight);if(u=Bb(N,g),h=Bb(L,g,C,!0),t){var j=N.left,M=N.top;d=Bb({left:j,top:M,bottom:M,right:M},g)}}else{u=Of(e),h=aW(C),t&&(d=Of(t));var A=h.left,R=h.top,D=h.clientLeft,V=h.clientTop,P=[u.left-A,u.top-R];m=He(Ou(_.rootMatrix,P,4),[D+_.left,V+_.top])}}return J({targetClientRect:u,containerClientRect:h,moveableClientRect:d,rootContainerClientRect:g,beforeDirection:o,beforeOrigin:c,originalBeforeOrigin:c,target:e,style:b,offsetDelta:m},_)}function Ck(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var a=Ql([e,n,r,i]),o=[a.minX,a.minY],c=He(t.origin,o);return e=He(e,o),n=He(n,o),r=He(r,o),i=He(i,o),J(J({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:c,beforeOrigin:c,isPersisted:!0})}var Pu=(function(t){Lh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=J({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},x1(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new O0,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}lY(n._observerId),n._observerId=_4(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,a=n.className,o=n.target,c=n.zoom,u=n.cspNonce,d=n.translateZ,h=n.cssStyled,g=n.groupable,m=n.linePadding,b=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var _=te(i||[0,0],2),w=_[0],E=_[1],T=r.left,C=r.top,N=r.target,L=r.direction,j=r.hasFixed,M=r.offsetDelta,A=n.targets,R=this.isDragging(),D={};this.getEnabledAbles().forEach(function(X){D["data-able-".concat(X.name.toLowerCase())]=!0});var V=this._getAbleClassName(),P=A&&A.length&&(N||g)||o||!this._hasFirstTarget&&this.state.isPersisted,B=this.controlBox||this.props.firstRenderState||this.props.persistData,O=[T-w,C-E];!g&&n.useAccuratePosition&&(O[0]+=M[0],O[1]+=M[1]);var W={position:j?"fixed":"absolute",display:P?"block":"none",visibility:B?"visible":"hidden",transform:"translate3d(".concat(O[0],"px, ").concat(O[1],"px, ").concat(d,")"),"--zoom":c,"--zoompx":"".concat(c,"px")};return m&&(W["--moveable-line-padding"]=m),b&&(W["--moveable-control-padding"]=b),Hi(h,J({cspNonce:u,ref:ms(this,"controlBox"),className:"".concat(Fe("control-box",L===-1?"reverse":"",R?"dragging":"")," ").concat(V," ").concat(a)},D,{onClick:this._onPreventClick,style:W}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),lu(this,!1),lu(this,!0);var a=this.events;for(var o in a){var c=a[o];c&&c.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return Vr(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,a=n.container;return a||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(Aw)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,a=this.controlGesto;return i&&Hw(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):a&&this.isMoveableElement(r)&&(a.isFlag()||a.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,a=r.pos1,o=r.pos2,c=r.pos3,u=r.pos4,d=r.targetClientRect;if(!i)return 0;var h;if(Zu(n)){var g=n.getBoundingClientRect();h={left:g.left,top:g.top,width:g.width,height:g.height}}else h=J({width:0,height:0},n);var m=h.left,b=h.top,_=h.width,w=h.height,E=KR([a,o,u,c],d),T=dX(E,[[m,b],[m+_,b],[m+_,b+w],[m,b+w]]),C=Z4(E);return!T||!C?0:Math.min(100,T/C*100)},e.prototype.isInside=function(n,r){var i=this.state,a=i.target,o=i.pos1,c=i.pos2,u=i.pos3,d=i.pos4,h=i.targetClientRect;return a?r1([n,r],KR([o,c,d,u],h)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&Iu(!0);var c=a.parentMoveable,u=this.state,d=u.target||a.target,h=this.getContainer(),g=c?c._rootContainer:this._rootContainer,m=x1(this.controlBox,d,h,h,g||h,this._getRequestStyles());if(!d&&this._hasFirstTarget&&a.persistData){var b=Ck(a.persistData);for(var _ in b)m[_]=b[_]}o&&Iu(),this.updateState(m,c?!1:i)},e.prototype.isDragging=function(n){var r,i,a=this.targetGesto,o=this.controlGesto;if(a?.isFlag()){if(!n)return!0;var c=a.getEventData();return!!(!((r=c[n])===null||r===void 0)&&r.isEventStart)}if(o?.isFlag()){if(!n)return!0;var c=o.getEventData();return!!(!((i=c[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Ti(this.state),i=te(r,4),a=i[0],o=i[1],c=i[2],u=i[3],d=wi(r),h=n.width,g=n.height,m=d.width,b=d.height,_=d.left,w=d.top,E=[n.left,n.top],T=At(E,n.origin),C=At(E,n.beforeOrigin),N=n.transformOrigin;return{width:m,height:b,left:_,top:w,pos1:a,pos2:o,pos3:c,pos4:u,offsetWidth:h,offsetHeight:g,beforeOrigin:C,origin:T,transformOrigin:N,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;r?.isIdle()===!1&&v1(this,!1),r?.stop()}if(!n||n==="control"){var r=this.controlGesto;r?.isIdle()===!1&&v1(this,!0),r?.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,a=n.direction;return mK(r,i,a)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this,o=a.props,c=o.parentMoveable||o.wrapperMoveable||a,u=c.props.ables,d=o.groupable,h=Vr(u,function(T){return T.name===n});if(this.isDragging()||!h||!h.request)return{request:function(){return this},requestEnd:function(){return this}};var g=h.request(a),m=i||r.isInstant,b=g.isControl?"controlAbles":"targetAbles",_="".concat(d?"Group":"").concat(g.isControl?"Control":""),w=Ce([],te(c[b]),!1),E={request:function(T){return Pf(a,w,["drag"],_,"",J(J({},g.request(T)),{requestAble:n,isRequest:!0}),m),E},requestEnd:function(){return Pf(a,w,["drag"],_,"End",J(J({},g.requestEnd()),{requestAble:n,isRequest:!0}),m),E}};return Pf(a,w,["drag"],_,"Start",J(J({},g.requestStart(r)),{requestAble:n,isRequest:!0}),m),m?E.request(r).requestEnd():E},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,a=n.originalBeforeOrigin,o=n.transformOrigin,c=n.allMatrix,u=n.is3d,d=n.pos1,h=n.pos2,g=n.pos3,m=n.pos4,b=n.left,_=n.top,w=n.isPersisted,E=r.zoom||1;if(!i&&E<=1){n.renderPoses=[d,h,g,m],n.renderLines=[[d,h],[h,m],[m,g],[g,d]];return}var T=ZO(i||{}),C=T.left,N=T.top,L=T.bottom,j=T.right,M=u?4:3,A=[];w?A=o:this.controlBox&&r.groupable?A=a:A=At(a,[b,_]);var R=zm(M,Kl(A.map(function(W){return-W}),M),c,Kl(o,M)),D=mi(R,d,[-C,-N],M),V=mi(R,h,[j,-N],M),P=mi(R,g,[-C,L],M),B=mi(R,m,[j,L],M);n.renderPoses=[D,V,P,B],n.renderLines=[[D,V],[V,B],[B,P],[P,D]];{var O=E/2;n.renderLines=[[mi(R,d,[-C-O,-N],M),mi(R,h,[j+O,-N],M)],[mi(R,h,[j,-N-O],M),mi(R,m,[j,L+O],M)],[mi(R,m,[j+O,L],M),mi(R,g,[-C-O,L],M)],[mi(R,g,[-C,L+O],M),mi(R,d,[-C,-N-O],M)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,a=n.parentMoveable,o=this.state,c=o.target,u=o.container;if(!(!c&&!r)){this.updateAbles();var d=!y1(c,r),h=d||!y1(u,i);if(h){var g=i||this.controlBox;g&&this.unsetAbles(),this.updateState({target:r,container:i}),!a&&g&&this.updateRect("End",!1,!1),this._isPropTargetChanged=d}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var a=i[n];return a&&a(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,a=n+r;return i[a]||(i[a]=tO(n,r)),i[a]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var c=Ck(a);if(c)return this.updateState(c,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),c="drag".concat(r,"Start"),u="pinch".concat(r,"Start"),d="drag".concat(r,"ControlStart"),h=Pg(o,[c,u],a),g=Pg(o,[d],a);this.enabledAbles=o,this.targetAbles=h,this.controlAbles=g},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var a in n)i[a]=n[a]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,a={createElement:Hi};return this.renderState={},fK(XO(Pg(this.getEnabledAbles(),["render"],i).map(function(o){var c=o.render;return c(n,a)||[]})).filter(function(o){return o}),function(o){var c=o.key;return c}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Ce(Ce([],te(r),!1),te(c),!1)},Ce([],te(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,a=!n&&this.targetGesto||this._isTargetChanged(!0);a&&(lu(this,!1),this.updateState({gestos:{}})),r||lu(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=oP(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=lP(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=Ma(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,a=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,c=r.parentMoveable;if(a||c&&o)return[];var u=this.getState(),d={createElement:Hi};return u.renderLines.map(function(h,g){return ih(d,"",h[0],h[1],i,"render-line-".concat(g))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,c=r.dragArea,u=!c&&a!==i,d=(n||c)&&o!==c;return u||d||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,a=this.events,o=Cs(a);if(this._isTargetChanged())for(var c in a){var u=a[c];u&&u.destroy(),a[c]=null}if(i){var d=this.enabledAbles;o.forEach(function(h){var g=Pg(d,[h]),m=g.length>0,b=a[h];if(!m){b&&(b.destroy(),a[h]=null);return}b||(b=new HK(i,n,h),a[h]=b),b.setAbles(g)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=Ma(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=Ma(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(Ce(Ce([],te(this._getAbleViewClassNames()),!1),[this.isDragging()?SK:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=YO(n.filter(Boolean),function(d){return d}).map(function(d){var h=te(d,1),g=h[0];return g}),a=this._viewClassNames,o=Oh(a,i),c=o.removed,u=o.added;c.forEach(function(d){A4(r,a[d])}),u.forEach(function(d){T4(r,i[d])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,c=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(d){var h,g,m,b=d.name,_=((h=d.className)===null||h===void 0?void 0:h.call(d,r))||"";return(!((g=c[b])===null||g===void 0)&&g.isEventStart||!((m=u[b])===null||m===void 0)&&m.isEventStart)&&(_+=" ".concat(Fe("".concat(b).concat(n,"-dragging")))),_.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,a=i.target,o=No(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===a&&this._reiszeObserver)){var c=new o.ResizeObserver(this.checkUpdateRect);c.observe(a,{box:"border-box"}),this._reiszeObserver=c}},e.prototype._updateMutationObserver=function(n){var r=this,i,a=this.props,o=a.target,c=No(this.getControlBoxElement());if(!c.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var u=new c.MutationObserver(function(d){var h,g;try{for(var m=RX(d),b=m.next();!b.done;b=m.next()){var _=b.value;_.type==="attributes"&&_.attributeName==="style"&&r.checkUpdateRect()}}catch(w){h={error:w}}finally{try{b&&!b.done&&(g=m.return)&&g.call(m)}finally{if(h)throw h.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:VO,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e})(M4),qw={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],a=t.getState(),o=a.left,c=a.top,u=a.isPersisted,d=r.zoom||1,h=t.renderGroupRects,g=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];u?i=g.map(function(){return null}):g=[];var m=cu(t,"parentPosition",[o,c],function(_){return _.join(",")}),b=cu(t,"requestStyles",t.getRequestChildStyles(),function(_){return _.join(",")});return t.moveables=t.moveables.slice(0,i.length),Ce(Ce([],te(i.map(function(_,w){return e.createElement(Pu,{key:"moveable"+w,ref:v4(t,"moveables",w),target:_,origin:!1,requestStyles:b,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,c],persistData:g[w],zoom:d})})),!1),te(XO(h.map(function(_,w){var E=_.pos1,T=_.pos2,C=_.pos3,N=_.pos4,L=[E,T,C,N];return[[0,1],[1,3],[3,2],[2,0]].map(function(j,M){var A=te(j,2),R=A[0],D=A[1];return ih(e,"",He(L[R],m),He(L[D],m),d,"group-rect-".concat(w,"-").concat(M))})}))),!1)}},XK=Bh("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var c=n.contains(i);Pe(t,"onClick",ct(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:c}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,a=i.indexOf(r),o=a>-1,c=!1;a===-1&&(a=As(i,function(u){return u.contains(r)}),c=a>-1),Pe(t,"onClickGroup",ct(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:a,isTarget:o,containsTarget:c,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Yc(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),J(J({},t),{datas:e})}var WK=Bh("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?vO(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Un(i,Fe("direction"))&&Un(i,Fe("edge"))&&Un(i,Fe("edgeDraggable"))},dragStart:function(t,e){return yr.dragStart(t,Yc(e))},drag:function(t,e){return yr.drag(t,Yc(e))},dragEnd:function(t,e){return yr.dragEnd(t,Yc(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Un(i,Fe("direction"))&&Un(i,Fe("line"))},dragGroupStart:function(t,e){return yr.dragGroupStart(t,Yc(e))},dragGroup:function(t,e){return yr.dragGroup(t,Yc(e))},dragGroupEnd:function(t,e){return yr.dragGroupEnd(t,Yc(e))},unset:function(t){return yr.unset(t)}}),uP={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Yw=[aP,tP,JW,yK,yr,WK,h1,bK,_K,PW,AK,CK,EK,LK,zK,GK,qw,uP,XK,eP,sP],KK=Yw.reduce(function(t,e){return(e.events||[]).forEach(function(n){E4(t,n)}),t},[]),QK=Yw.reduce(function(t,e){return(e.props||[]).forEach(function(n){E4(t,n)}),t},[]);function Rk(t,e){var n=te(t,3),r=n[0],i=n[1],a=n[2];return(r*e[0]+i*e[1]+a)/Math.sqrt(r*r+i*i)}function zg(t,e){var n=te(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function kk(t,e){return Math.max.apply(Math,Ce([],te(t.map(function(n){var r=te(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.max(i[e],a[e],o[e],c[e])})),!1))}function Dk(t,e){return Math.min.apply(Math,Ce([],te(t.map(function(n){var r=te(n,4),i=r[0],a=r[1],o=r[2],c=r[3];return Math.min(i[e],a[e],o[e],c[e])})),!1))}function ZK(t,e){var n,r,i,a=[0,0],o=[0,0],c=[0,0],u=[0,0],d=0,h=0;if(!t.length)return{pos1:a,pos2:o,pos3:c,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:d,height:h,rotation:e};var g=rt(e,Er);if(g%90){var m=g/180*Math.PI,b=Math.tan(m),_=-1/b,w=[c1,JR],E=[[0,0],[0,0]],T=[c1,JR],C=[[0,0],[0,0]];t.forEach(function(ne){ne.forEach(function(Z){var oe=Rk([-b,1,0],Z),ce=Rk([-_,1,0],Z);w[0]>oe&&(E[0]=Z,w[0]=oe),w[1]<oe&&(E[1]=Z,w[1]=oe),T[0]>ce&&(C[0]=Z,T[0]=ce),T[1]<ce&&(C[1]=Z,T[1]=ce)})});var N=te(E,2),L=N[0],j=N[1],M=te(C,2),A=M[0],R=M[1],D=[-b,1,zg([-b,1],L)],V=[-b,1,zg([-b,1],j)],P=[-_,1,zg([-_,1],A)],B=[-_,1,zg([-_,1],R)];n=te([[D,P],[D,B],[V,P],[V,B]].map(function(ne){var Z=te(ne,2),oe=Z[0],ce=Z[1];return Ew(oe,ce)[0]}),4),a=n[0],o=n[1],c=n[2],u=n[3],d=T[1]-T[0],h=w[1]-w[0]}else{var O=Dk(t,0),W=Dk(t,1),X=kk(t,0),H=kk(t,1);if(a=[O,W],o=[X,W],c=[O,H],u=[X,H],d=X-O,h=H-W,g%180){var K=[c,a,u,o];r=te(K,4),a=r[0],o=r[1],c=r[2],u=r[3],d=H-W,h=X-O}}if(g%360>180){var K=[u,c,o,a];i=te(K,4),a=i[0],o=i[1],c=i[2],u=i[3]}var ee=Ql([a,o,c,u]),ie=ee.minX,q=ee.minY,F=ee.maxX,Y=ee.maxY;return{pos1:a,pos2:o,pos3:c,pos4:u,width:d,height:h,minX:ie,minY:q,maxX:F,maxY:Y,rotation:e}}function dP(t,e){var n=e.map(function(r){if(Vn(r)){var i=dP(t,r),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=Vr(t,function(c){var u=c.manager;return u.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&Vn(n[0])?n[0]:n}var JK=(function(t){Lh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new Q4,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Iu(!0),this.moveables.forEach(function(ge){ge.updateRect(n,!1,!1)});var c=this.props,u=this.moveables,d=o.target||c.target,h=u.map(function(ge){return{finded:!1,manager:ge}}),g=this.props.targetGroups||[],m=dP(h,g),b=c.useDefaultGroupRotate;m.push.apply(m,Ce([],te(h.filter(function(ge){var Te=ge.finded;return!Te}).map(function(ge){var Te=ge.manager;return Te})),!1));var _=[],w=!r||n!==""&&c.updateGroup,E=c.defaultGroupRotate||0;if(!this._hasFirstTargets){var T=(a=c.persistData)===null||a===void 0?void 0:a.rotation;T!=null&&(E=T)}function C(ge,Te,Ne){var ae=ge.map(function(ze){if(Vn(ze)){var Ie=C(ze,Te),Le=[Ie.pos1,Ie.pos2,Ie.pos3,Ie.pos4];return _.push(Ie),{poses:Le,rotation:Ie.rotation}}else return{poses:Ti(ze.state),rotation:ze.getRotation()}}),Ae=ae.map(function(ze){var Ie=ze.rotation;return Ie}),De=0,Me=Ae[0],Be=Ae.every(function(ze){return Math.abs(Me-ze)<.1});w?De=!b&&Be?Me:E:De=!b&&!Ne&&Be?Me:Te;var Ve=ae.map(function(ze){var Ie=ze.poses;return Ie}),Se=ZK(Ve,De);return Se}var N=C(m,this.rotation,!0);w&&(this.rotation=N.rotation,this.transformOrigin=c.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=g,this.renderGroupRects=_;var L=this.transformOrigin,j=this.rotation,M=this.scale,A=N.width,R=N.height,D=N.minX,V=N.minY,P=vK([[0,0],[A,0],[0,R],[A,R]],Fw(L,A,R),this.rotation/180*Math.PI),B=Ql(P.result),O=B.minX,W=B.minY,X=" rotate(".concat(j,"deg)")+" scale(".concat(br(M[0]),", ").concat(br(M[1]),")"),H="translate(".concat(-O,"px, ").concat(-W,"px)").concat(X);this.controlBox.style.transform="translate3d(".concat(D,"px, ").concat(V,"px, ").concat(this.props.translateZ||0,")"),d.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(L,";")+"width:".concat(A,"px;height:").concat(R,"px;")+"transform: ".concat(H),o.width=A,o.height=R;var K=this.getContainer(),ee=x1(this.controlBox,d,this.controlBox,this.getContainer(),this._rootContainer||K,[]),ie=[ee.left,ee.top],q=te(Ti(ee),4),F=q[0],Y=q[1],ne=q[2],Z=q[3],oe=Ql([F,Y,ne,Z]),ce=[oe.minX,oe.minY],me=br(M[0]*M[1]);ee.pos1=He(F,ce),ee.pos2=He(Y,ce),ee.pos3=He(ne,ce),ee.pos4=He(Z,ce),ee.left=D-ee.left+ce[0],ee.top=V-ee.top+ce[1],ee.origin=He(At(ie,ee.origin),ce),ee.beforeOrigin=He(At(ie,ee.beforeOrigin),ce),ee.originalBeforeOrigin=At(ie,ee.originalBeforeOrigin),ee.transformOrigin=He(At(ie,ee.transformOrigin),ce),d.style.transform="translate(".concat(-O-ce[0],"px, ").concat(-W-ce[1],"px)")+X,Iu(),this.updateState(J(J({},ee),{posDelta:ce,direction:me,beforeDirection:me}),i)},e.prototype.getRect=function(){return J(J({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var a,o,c=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return Ce(Ce([],te(r),!1),te(c),!1)},[]);return n},e.prototype.getMoveables=function(){return Ce([],te(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Ce(Ce([],te(this.props.ables),!1),[qw],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Ma(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,a=r.dragTarget||this.areaElement,o=r.targets,c=this.differ.update(o),u=c.added,d=c.changed,h=c.removed,g=u.length||h.length;(g||this._prevOriginalDragTarget!==this._originalDragTarget)&&(lu(this,!1),lu(this,!0),this.updateState({gestos:{}})),i!==a&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=oP(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=lP(this,"GroupControl")));var m=!y1(n.container,r.container);m&&(n.container=r.container),(m||g||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||d.length||o.length&&!QO(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!g},e.prototype._updateObserver=function(){},e.defaultProps=J(J({},Pu.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e})(Pu),eQ=(function(t){Lh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,a=i.cspNonce,o=i.cssStyled,c=i.persistData,u=i.targets||[],d=u.length,h=this.isUnmounted||!d,g=(r=c?.children)!==null&&r!==void 0?r:[];return h&&!d&&g.length?u=g.map(function(){return null}):h||(g=[]),Hi(o,{cspNonce:a,ref:ms(this,"controlBox"),className:Fe("control-box")},u.map(function(m,b){var _,w,E=(w=(_=i.individualGroupableProps)===null||_===void 0?void 0:_.call(i,m,b))!==null&&w!==void 0?w:{};return Hi(Pu,J({key:"moveable"+b,ref:v4(n,"moveables",b)},i,E,{target:m,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:g[b]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Iu(!0),this.moveables.forEach(function(a){a.updateRect(n,r,i)}),Iu()},e.prototype.getRect=function(){return J(J({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var a=this.moveables.map(function(u){return u.request(n,J(J({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,c={request:function(u){return a.forEach(function(d){return d.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?c.request(r).requestEnd():c},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,a=Vr(this.moveables,function(o){var c=o.getTargets()[0],u=o.getControlBoxElement(),d=o.getDragElement();return!c||!d?!1:d===i||d.contains(i)||d!==c&&c===i||c.contains(i)||u===i||u.contains(i)});return a&&a.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Ce([],te(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e})(Pu);function fP(t,e){var n=[];return t.forEach(function(r){if(r){if(jr(r)){e[r]&&n.push.apply(n,Ce([],te(e[r]),!1));return}Vn(r)?n.push.apply(n,Ce([],te(fP(r,e)),!1)):n.push(r)}}),n}function hP(t,e){var n=[];return t.forEach(function(r){if(r){if(jr(r)){e[r]&&n.push.apply(n,Ce([],te(e[r]),!1));return}Vn(r)?n.push(hP(r,e)):n.push(r)}}),n}function pP(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?Vn(n)&&Vn(i)?pP(n,i):!0:!1})}var tQ=(function(t){Lh(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new Q4,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(a){var o=a.css;o&&o.forEach(function(c){n[c]=!0})});var i=Cs(n).join(`
`);this.defaultStyled=tO("div",Kq(Aw,LX+i))},e.getTotalAbles=function(){return Ce([tP,qw,uP,eP],te(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,a=i.ables,o=i.props,c=AX(i,["ables","props"]),u=te(this._updateRefs(!0),2),d=u[0],h=u[1],g=fP(d,h),m=g.length>1,b=r.getTotalAbles(),_=Ce(Ce([],te(b),!1),te(a||[]),!1),w=J(J(J({},c),o||{}),{ables:_,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=g;var E=null,T=this.moveable,C=c.persistData;if(C?.children&&(m=!0),c.individualGroupable)return Hi(eQ,J({key:"individual-group",ref:ms(this,"moveable")},w,{target:null,targets:g}));if(m){var N=hP(d,h);if(T&&!T.props.groupable&&!T.props.individualGroupable){var L=T.props.target;L&&g.indexOf(L)>-1&&(E=J({},T.state))}return Hi(JK,J({key:"group",ref:ms(this,"moveable")},w,(n=c.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:g,targetGroups:N,firstRenderState:E}))}else{var j=g[0];if(T&&(T.props.groupable||T.props.individualGroupable)){var M=T.moveables||[],A=Vr(M,function(R){return R.props.target===j});A&&(E=J({},A.state))}return Hi(Pu,J({key:"single",ref:ms(this,"moveable")},w,{target:j,firstRenderState:E}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=Uw(this.props.target||this.props.targets),a=typeof document<"u",o=pP(r,i),c=this.selectorMap,u={};return this.refTargets.forEach(function d(h){if(jr(h)){var g=c[h];g?u[h]=c[h]:a&&(o=!0,u[h]=[].slice.call(document.querySelectorAll(h)))}else Vn(h)&&h.forEach(d)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,c=a.removed,u=o.length||c.length;u&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var d=te(this._updateRefs(),3),h=d[0],g=d[1],m=d[2];this.refTargets=h,this.selectorMap=g,m&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,CX([Qq(oO)],e.prototype,"moveable",void 0),e})(M4),nQ=(function(t){Lh(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=Yw,e})(tQ),_1=function(t,e){return _1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},_1(t,e)};function Xw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sh=function(){return sh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sh.apply(this,arguments)};function rQ(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}var iQ=(function(t){Xw(e,t);function e(r){var i=t.call(this,r)||this;return i.state={},i.state=i.props,i}var n=e.prototype;return n.render=function(){return Hi(nQ,sh({ref:ms(this,"moveable")},this.state))},e})(yw),aQ=QK,sQ=oO,oQ=KK,lQ=(function(t){Xw(e,t);function e(r,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=sh({},i),c={};oQ.forEach(function(h){c[oY("on ".concat(h))]=function(g){return a.trigger(h,g)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=r):(u=Qu(r).createElement("div"),r.appendChild(u)),a.containerProvider=YR(Hi(iQ,sh({ref:ms(a,"innerMoveable")},o,c)),u),a.selfElement=u;var d=o.target;return Vn(d)&&d.length>1&&a.updateRect(),a}var n=e.prototype;return n.setState=function(r,i){this.innerMoveable.setState(r,i)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r,i){i===void 0&&(i=r.target);var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r,i)},n.destroy=function(){var r,i=this.selfElement;YR(null,i,this.containerProvider),this._warp||(r=i?.parentElement)===null||r===void 0||r.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=rQ([zR(sQ,function(r,i){r[i]||(r[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=this.getMoveable();if(!(!c||!c[i]))return c[i].apply(c,a)})}),zR(aQ,function(r,i){Object.defineProperty(r,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],e),e})(O0),gP=(function(t){Xw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(lQ),So=(t=>(t.Mouse="mouse",t.Touch="touch",t.Pointer="pointer",t))(So||{}),yf=(t=>(t.CancelledByMovement="cancelled-by-movement",t.CancelledByRelease="cancelled-by-release",t.CancelledOutsideElement="cancelled-outside-element",t))(yf||{});const cQ=["mousedown","mousemove","mouseup","mouseleave","mouseout"],uQ=["touchstart","touchmove","touchend","touchcancel"],dQ=["pointerdown","pointermove","pointerup","pointerleave","pointerout"];function fQ(t){return typeof t=="object"&&t!==null&&"pageX"in t&&typeof t.pageX=="number"&&"pageY"in t&&typeof t.pageY=="number"}function hQ(t){var e;return cQ.includes((e=t?.nativeEvent)==null?void 0:e.type)}function mP(t){var e;return uQ.includes((e=t?.nativeEvent)==null?void 0:e.type)||"touches"in t}function pQ(t){const{nativeEvent:e}=t;return e?dQ.includes(e?.type)||"pointerId"in e:!1}function Gb(t){return hQ(t)||mP(t)||pQ(t)}function Nk(t){var e;const n=mP(t)?(e=t?.touches)==null?void 0:e[0]:t;return fQ(n)?{x:n.pageX,y:n.pageY}:null}function gQ(t){return{target:t.target,currentTarget:t.currentTarget,nativeEvent:t,persist:()=>{}}}function Ww(t,{threshold:e=400,captureEvent:n=!1,detect:r=So.Pointer,cancelOnMovement:i=!1,cancelOutsideElement:a=!0,filterEvents:o,onStart:c,onMove:u,onFinish:d,onCancel:h}={}){const g=U.useRef(!1),m=U.useRef(!1),b=U.useRef(),_=U.useRef(),w=U.useRef(t),E=U.useRef(null),T=U.useCallback(j=>M=>{m.current||Gb(M)&&(o!==void 0&&!o(M)||(n&&M.persist(),c?.(M,{context:j}),E.current=Nk(M),m.current=!0,b.current=M.currentTarget,_.current=setTimeout(()=>{w.current&&(w.current(M,{context:j}),g.current=!0)},e)))},[n,o,c,e]),C=U.useCallback(j=>(M,A)=>{Gb(M)&&m.current&&(E.current=null,n&&M.persist(),g.current?d?.(M,{context:j}):m.current&&h?.(M,{context:j,reason:A??yf.CancelledByRelease}),g.current=!1,m.current=!1,_.current!==void 0&&clearTimeout(_.current))},[n,d,h]),N=U.useCallback(j=>M=>{if(Gb(M)&&(u?.(M,{context:j}),i!==!1&&E.current)){const A=Nk(M);if(A){const R=i===!0?25:i,D={x:Math.abs(A.x-E.current.x),y:Math.abs(A.y-E.current.y)};(D.x>R||D.y>R)&&C(j)(M,yf.CancelledByMovement)}}},[C,i,u]),L=U.useCallback(j=>{if(t===null)return{};switch(r){case So.Mouse:{const M={onMouseDown:T(j),onMouseMove:N(j),onMouseUp:C(j)};return a&&(M.onMouseLeave=A=>{C(j)(A,yf.CancelledOutsideElement)}),M}case So.Touch:return{onTouchStart:T(j),onTouchMove:N(j),onTouchEnd:C(j)};case So.Pointer:{const M={onPointerDown:T(j),onPointerMove:N(j),onPointerUp:C(j)};return a&&(M.onPointerLeave=A=>C(j)(A,yf.CancelledOutsideElement)),M}}},[t,C,a,r,N,T]);return U.useEffect(()=>{function j(M){const A=gQ(M);C()(A)}return window.addEventListener("mouseup",j),window.addEventListener("touchend",j),window.addEventListener("pointerup",j),()=>{window.removeEventListener("mouseup",j),window.removeEventListener("touchend",j),window.removeEventListener("pointerup",j)}},[C]),U.useEffect(()=>()=>{_.current!==void 0&&clearTimeout(_.current)},[]),U.useEffect(()=>{w.current=t},[t]),L}const vP=()=>{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){const e=document.getElementById("ios-haptic-trigger");e&&e.click()}else typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(50)},Xm=t=>t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="number"?new Date(t):t?.toDate&&typeof t.toDate=="function"?t.toDate():new Date:new Date,kl=t=>Xm(t).toISOString(),mQ=t=>{const e=Xm(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`},vQ=t=>{const e=t.toLowerCase();return e==="income"?"Income":e==="expense"?"Expense":e==="transfer"?"Transfer":"Expense"},Kw=t=>{const e=t;let n=0;typeof e.amount=="number"?n=e.amount:typeof e.amount=="string"&&(n=parseFloat(e.amount)),isNaN(n)&&(n=0);const r=kl(e.date);return{id:e.id||"",userId:e.userId||"",envelopeId:e.envelopeId||"",amount:n,date:r,month:e.month||mQ(r),description:e.description||"",merchant:e.merchant||void 0,type:vQ(e.type||"expense"),reconciled:e.reconciled??!1,transferId:e.transferId||void 0,isAutomatic:e.isAutomatic||void 0,paymentMethod:e.paymentMethod?typeof e.paymentMethod=="string"?{id:e.paymentMethod,name:e.paymentMethod,network:"Visa",last4:"****",color:"#000000"}:e.paymentMethod:void 0}};class zl{static instance;static getInstance(){return zl.instance||(zl.instance=new zl),zl.instance}async restoreUserData(e,n){try{console.log(" BudgetService.restoreUserData: STARTING RESTORE for user:",e),await this.deleteAllUserData(e);const r=[{name:"envelopes",data:n.envelopes||[]},{name:"transactions",data:n.transactions||[]},{name:"envelopeAllocations",data:n.allocations?Object.values(n.allocations).flat():[]},{name:"monthlyBudgets",data:this.prepareMonthlyBudgetsData(n.allocations,n.incomeSources)},{name:"appSettings",data:n.appSettings?[n.appSettings]:[]}],i=[];for(const{name:o,data:c}of r)if(Array.isArray(c))for(const u of c){if(!u.id&&o!=="monthlyBudgets")continue;const d={...u,userId:e};let h=u.id;o==="monthlyBudgets"&&u.month&&(h=u.month);const g=wt(Je,"users",e,o,h);i.push({ref:g,data:d})}console.log(` Prepared ${i.length} items for restoration.`);const a=450;for(let o=0;o<i.length;o+=a){const c=OI(Je);i.slice(o,o+a).forEach(d=>{c.set(d.ref,d.data)}),console.log(` Committing batch ${Math.floor(o/a)+1}/${Math.ceil(i.length/a)}...`),await c.commit()}console.log(" Restore completed successfully.")}catch(r){throw console.error(" BudgetService.restoreUserData failed:",r),new Error(`Failed to restore user data: ${r instanceof Error?r.message:"Unknown error"}`)}}async getEnvelopes(e){try{console.log(" BudgetService.getEnvelopes called for user:",e);const n=vr(Je,"users",e,"envelopes"),a=(await Ui(n)).docs.map((o,c)=>({id:o.id,...o.data(),orderIndex:o.data().orderIndex??c})).sort((o,c)=>{const u=o.orderIndex??0,d=c.orderIndex??0;return u-d});return console.log(" Fetched envelopes:",a.length),a}catch(n){throw console.error(" BudgetService.getEnvelopes failed:",n),new Error(`Failed to fetch envelopes: ${n instanceof Error?n.message:"Unknown error"}`)}}async getTransactions(e){try{console.log(" BudgetService.getTransactions: Fetching for user",e);const n=vr(Je,"users",e,"transactions"),r=Ki(n,Lo("date","desc")),a=(await Ui(r)).docs.map(o=>{const c={id:o.id,...o.data()};return Kw(c)});return console.log(` Fetched ${a.length} transactions`),a}catch(n){throw console.error(" BudgetService.getTransactions failed:",n),new Error(`Failed to fetch transactions: ${n instanceof Error?n.message:"Unknown error"}`)}}async createEnvelope(e){try{console.log(" BudgetService.createEnvelope called for user:",e.userId);const n=vr(Je,"users",e.userId,"envelopes"),r=wt(n),i=gt.now(),a={...e,createdAt:i,lastUpdated:i};Zr(r,a).catch(c=>console.error("Create env failed",c));const o={...e,id:r.id,createdAt:kl(i),lastUpdated:kl(i)};return console.log(" Created envelope (optimistic):",o.id),o}catch(n){throw console.error(" BudgetService.createEnvelope failed:",n),new Error(`Failed to create envelope: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelope(e,n){try{console.log(" BudgetService.updateEnvelope called for envelope:",n.id);const r=wt(Je,"users",e,"envelopes",n.id);Zr(r,{...n,lastUpdated:gt.now()},{merge:!0}).catch(i=>console.error("Update env failed",i)),console.log(" Updated envelope (optimistic):",n.id)}catch(r){throw console.error(" BudgetService.updateEnvelope failed:",r),new Error(`Failed to update envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteEnvelope(e,n){try{const r=wt(Je,"users",e,"envelopes",n),i=Ki(vr(Je,"users",e,"transactions"),e7("envelopeId","==",n)),o=(await Ui(i)).docs.map(c=>Fi(c.ref));await Promise.all([Fi(r),...o]),console.log(" Deleted envelope and associated transactions from Firestore:",n)}catch(r){throw console.error(" BudgetService.deleteEnvelope failed:",r),new Error(`Failed to delete envelope: ${r instanceof Error?r.message:"Unknown error"}`)}}async reorderEnvelopes(e,n){try{console.log(" BudgetService.reorderEnvelopes called for user:",e);const r=n.map(i=>{const a=wt(Je,"users",e,"envelopes",i.id);return Zr(a,{orderIndex:i.orderIndex,lastUpdated:gt.now()},{merge:!0})});Promise.all(r).catch(i=>console.error("Reorder env failed",i)),console.log(" Reordered envelopes (optimistic)")}catch(r){throw console.error(" BudgetService.reorderEnvelopes failed:",r),new Error(`Failed to reorder envelopes: ${r instanceof Error?r.message:"Unknown error"}`)}}async createTransaction(e){try{console.log(" BudgetService.createTransaction called for user:",e.userId);const n=vr(Je,"users",e.userId,"transactions"),r=wt(n),i=gt.now();if(e.paymentMethod){const u={...e.paymentMethod};u.last4===void 0&&delete u.last4,e.paymentMethod=u}const o={...Object.fromEntries(Object.entries(e).filter(([u,d])=>d!==void 0)),createdAt:i};Zr(r,o).catch(u=>console.error("Create tx failed",u));const c={...e,id:r.id};return console.log(" Created transaction (optimistic):",c.id),c}catch(n){throw console.error(" BudgetService.createTransaction failed:",n),new Error(`Failed to create transaction: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateTransaction(e,n){try{if(console.log(" BudgetService.updateTransaction called for transaction:",n.id),n.paymentMethod){const a={...n.paymentMethod};a.last4===void 0&&delete a.last4,n.paymentMethod=a}const r=Object.fromEntries(Object.entries(n).filter(([a,o])=>o!==void 0)),i=wt(Je,"users",e,"transactions",n.id);Zr(i,r,{merge:!0}).catch(a=>console.error("Update tx failed",a)),console.log(" Updated transaction (optimistic):",n.id)}catch(r){throw console.error(" BudgetService.updateTransaction failed:",r),new Error(`Failed to update transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async deleteTransaction(e,n){try{console.log(" BudgetService.deleteTransaction called for transaction:",n);const r=wt(Je,"users",e,"transactions",n);Fi(r).catch(i=>console.error("Delete tx failed",i)),console.log(" Deleted transaction (optimistic):",n)}catch(r){throw console.error(" BudgetService.deleteTransaction failed:",r),new Error(`Failed to delete transaction: ${r instanceof Error?r.message:"Unknown error"}`)}}async createIncomeSource(e){try{console.log(" BudgetService.createIncomeSource (Embedded) called for user:",e.userId);const n=wt(Je,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i=`inc_${r.toMillis()}_${Math.random().toString(36).substring(2,9)}`,a={...e,id:i,amount:Number(e.amount),createdAt:r,updatedAt:r};wa(n,{incomeSources:i7(a),updatedAt:r}).catch(c=>{c.code==="not-found"?Zr(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[a],allocations:{},totalIncome:0,availableToBudget:0}).catch(u=>console.error("Failed to create monthly budget doc",u)):console.error("Create income failed",c)});const o={...e,id:i,amount:Number(e.amount),createdAt:kl(r),updatedAt:kl(r)};return console.log(" Created income source (optimistic/embedded):",o.id),o}catch(n){throw console.error(" BudgetService.createIncomeSource failed:",n),new Error(`Failed to create income source: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateIncomeSource(e,n,r,i){try{console.log(" BudgetService.updateIncomeSource (Embedded) called for source:",n);const a=wt(Je,"users",e,"monthlyBudgets",r);fb(a).then(o=>{if(!o.exists())return;const d=(o.data().incomeSources||[]).map(h=>{if(h.id===n){const g={...h,...i,updatedAt:gt.now()};return i.amount!==void 0&&(g.amount=Number(i.amount)),g}return h});wa(a,{incomeSources:d,updatedAt:gt.now()})}).catch(o=>console.error("Update income failed",o)),console.log(" Updated income source (optimistic/embedded):",n)}catch(a){throw console.error(" BudgetService.updateIncomeSource failed:",a),a}}async deleteIncomeSource(e,n,r){try{console.log(" BudgetService.deleteIncomeSource (Embedded) called for source:",n);const i=wt(Je,"users",e,"monthlyBudgets",r);fb(i).then(a=>{if(!a.exists())return;const u=(a.data().incomeSources||[]).filter(d=>d.id!==n);wa(i,{incomeSources:u,updatedAt:gt.now()})}).catch(a=>console.error("Delete income failed",a)),console.log(" Deleted income source (optimistic/embedded):",n)}catch(i){throw console.error(" BudgetService.deleteIncomeSource failed:",i),new Error(`Failed to delete income source: ${i instanceof Error?i.message:"Unknown error"}`)}}async createEnvelopeAllocation(e){try{console.log(" BudgetService.createEnvelopeAllocation (Embedded) called for user:",e.userId);const n=wt(Je,"users",e.userId,"monthlyBudgets",e.month),r=gt.now(),i={[`allocations.${e.envelopeId}`]:Number(e.budgetedAmount),updatedAt:r};wa(n,i).catch(o=>{o.code==="not-found"?Zr(n,{id:`${e.userId}_${e.month}`,userId:e.userId,month:e.month,createdAt:r,updatedAt:r,incomeSources:[],allocations:{[e.envelopeId]:Number(e.budgetedAmount)},totalIncome:0,availableToBudget:0}).catch(c=>console.error("Failed to create monthly budget doc",c)):console.error("Create allocation failed",o)});const a={...e,id:e.envelopeId,createdAt:kl(r),updatedAt:kl(r)};return console.log(" Created allocation (optimistic/embedded):",a.id),a}catch(n){throw console.error(" BudgetService.createEnvelopeAllocation failed:",n),new Error(`Failed to create envelope allocation: ${n instanceof Error?n.message:"Unknown error"}`)}}async updateEnvelopeAllocation(e,n,r,i){try{console.log(" BudgetService.updateEnvelopeAllocation (Embedded) called for envelope:",n);const a=wt(Je,"users",e,"monthlyBudgets",r),o={updatedAt:gt.now()};i.budgetedAmount!==void 0&&(o[`allocations.${n}`]=Number(i.budgetedAmount)),wa(a,o).catch(c=>console.error("Update allocation failed",c)),console.log(" Updated allocation (optimistic/embedded):",n)}catch(a){throw console.error(" BudgetService.updateEnvelopeAllocation failed:",a),new Error(`Failed to update envelope allocation: ${a instanceof Error?a.message:"Unknown error"}`)}}async deleteEnvelopeAllocation(e,n,r){try{console.log(" BudgetService.deleteEnvelopeAllocation (Embedded) called for envelope:",n);const i=wt(Je,"users",e,"monthlyBudgets",r);wa(i,{[`allocations.${n}`]:SC(),updatedAt:gt.now()}).catch(a=>console.error("Delete allocation failed",a)),console.log(" Deleted allocation (optimistic/embedded):",n)}catch(i){throw console.error(" BudgetService.deleteEnvelopeAllocation failed:",i),new Error(`Failed to delete envelope allocation: ${i instanceof Error?i.message:"Unknown error"}`)}}async getMonthData(e,n){try{console.log(` BudgetService.getMonthData (Embedded): Fetching for user ${e}, month ${n}`);const r=wt(Je,"users",e,"monthlyBudgets",n),i=await fb(r);if(!i.exists())return console.log(` No budget data found for ${n}, returning empty defaults.`),{incomeSources:[],allocations:[]};const a=i.data(),o=(a.incomeSources||[]).map(d=>({...d,amount:Number(d.amount),createdAt:d.createdAt?.toDate?d.createdAt.toDate().toISOString():d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt?.toDate?d.updatedAt.toDate().toISOString():d.updatedAt||new Date().toISOString()})).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime()),c=a.allocations||{},u=Object.entries(c).map(([d,h])=>({id:d,userId:e,envelopeId:d,month:n,budgetedAmount:Number(h),createdAt:a.createdAt?.toDate?a.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:a.updatedAt?.toDate?a.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((d,h)=>new Date(d.createdAt).getTime()-new Date(h.createdAt).getTime());return console.log(` Fetched ${o.length} income sources and ${u.length} allocations for ${n}`),{incomeSources:o,allocations:u}}catch(r){throw console.error(" BudgetService.getMonthData failed:",r),new Error(`Failed to fetch month data: ${r instanceof Error?r.message:"Unknown error"}`)}}async cleanupOrphanedData(e){try{console.log(" BudgetService.cleanupOrphanedData: Starting cleanup for user:",e);const n={orphanedAllocationsDeleted:0,orphanedTransactionsDeleted:0,details:{deletedAllocationIds:[],deletedTransactionIds:[],monthsProcessed:[]}},r=await this.getEnvelopes(e),i=new Set(r.map(b=>b.id));console.log(` Found ${r.length} existing envelopes`);const a=vr(Je,"users",e,"envelopeAllocations"),o=await Ui(a),c=[],u=new Set;for(const b of o.docs){const _=b.data();u.add(_.month),i.has(_.envelopeId)||(c.push(b.id),console.log(` Found orphaned allocation: ${b.id} for envelope ${_.envelopeId} in month ${_.month}`))}if(c.length>0){const b=c.map(_=>Fi(wt(Je,"users",e,"envelopeAllocations",_)));await Promise.all(b),n.orphanedAllocationsDeleted+=c.length,n.details.deletedAllocationIds.push(...c),console.log(` Deleted ${c.length} orphaned allocations (legacy)`)}const d=vr(Je,"users",e,"monthlyBudgets"),h=await Ui(d);for(const b of h.docs){const w=b.data().allocations||{},E={};let T=!1;Object.keys(w).forEach(C=>{i.has(C)||(E[`allocations.${C}`]=SC(),T=!0,console.log(` Found orphaned embedded allocation in ${b.id} for envelope ${C}`),n.orphanedAllocationsDeleted++,n.details.deletedAllocationIds.push(`${b.id}_${C}`))}),T&&(E.updatedAt=gt.now(),await wa(b.ref,E),u.add(b.id))}const g=await this.getTransactions(e),m=[];for(const b of g)i.has(b.envelopeId)||(m.push(b.id),console.log(` Found orphaned transaction: ${b.id} for envelope ${b.envelopeId}`));if(m.length>0){const b=m.map(_=>Fi(wt(Je,"users",e,"transactions",_)));await Promise.all(b),n.orphanedTransactionsDeleted=m.length,n.details.deletedTransactionIds=m,console.log(` Deleted ${m.length} orphaned transactions`)}return n.details.monthsProcessed=Array.from(u),console.log(" Cleanup completed:",{orphanedAllocationsDeleted:n.orphanedAllocationsDeleted,orphanedTransactionsDeleted:n.orphanedTransactionsDeleted,monthsProcessed:n.details.monthsProcessed.length}),n}catch(n){throw console.error(" BudgetService.cleanupOrphanedData failed:",n),new Error(`Failed to cleanup orphaned data: ${n instanceof Error?n.message:"Unknown error"}`)}}subscribeToMonthlyBudget(e,n,r){const i=wt(Je,"users",e,"monthlyBudgets",n);return Yu(i,a=>{if(!a.exists()){r({incomeSources:[],allocations:[]});return}const o=a.data(),c=(o.incomeSources||[]).map(h=>({...h,amount:Number(h.amount),createdAt:h.createdAt?.toDate?h.createdAt.toDate().toISOString():h.createdAt||new Date().toISOString(),updatedAt:h.updatedAt?.toDate?h.updatedAt.toDate().toISOString():h.updatedAt||new Date().toISOString()})).sort((h,g)=>new Date(h.createdAt).getTime()-new Date(g.createdAt).getTime()),u=o.allocations||{},d=Object.entries(u).map(([h,g])=>({id:h,userId:e,envelopeId:h,month:n,budgetedAmount:Number(g),createdAt:o.createdAt?.toDate?o.createdAt.toDate().toISOString():new Date().toISOString(),updatedAt:o.updatedAt?.toDate?o.updatedAt.toDate().toISOString():new Date().toISOString()})).sort((h,g)=>new Date(h.createdAt).getTime()-new Date(g.createdAt).getTime());r({incomeSources:c,allocations:d})})}prepareMonthlyBudgetsData(e,n){const r=[],i=new Set;return e&&Object.keys(e).forEach(a=>i.add(a)),n&&Object.keys(n).forEach(a=>i.add(a)),i.forEach(a=>{const o=e?.[a]||[],c=n?.[a]||[],u={};o.forEach(h=>{u[h.envelopeId]=h.budgetedAmount});const d={month:a,userId:"",incomeSources:c,allocations:u,totalIncome:c.reduce((h,g)=>h+Number(g.amount||0),0),availableToBudget:c.reduce((h,g)=>h+Number(g.amount||0),0)-o.reduce((h,g)=>h+Number(g.budgetedAmount||0),0),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r.push(d)}),r}async deleteAllUserData(e){try{console.log(" BudgetService.deleteAllUserData: STARTING DELETION for user:",e);const n=["envelopes","transactions","incomeSources","envelopeAllocations","monthlyBudgets","appSettings"];for(const r of n){console.log(` Deleting collection: ${r}...`);const i=vr(Je,"users",e,r),a=await Ui(i);if(a.empty){console.log("   (Empty collection)");continue}const o=a.docs.map(c=>Fi(c.ref));await Promise.all(o),console.log(`    Deleted ${a.size} documents from ${r}`)}console.log(" All user data deleted successfully.")}catch(n){throw console.error(" BudgetService.deleteAllUserData failed:",n),new Error(`Failed to delete all user data: ${n instanceof Error?n.message:"Unknown error"}`)}}}const Qw=zl.getInstance();class Eo{static instance;constructor(){}static getInstance(){return Eo.instance||(Eo.instance=new Eo),Eo.instance}createId(){return wt(vr(Je,"temp")).id}async createCategory(e){const n=wt(Je,`users/${e.userId}/categories`,e.id);return await Zr(n,e),e}async getCategories(e){const n=Ki(vr(Je,`users/${e}/categories`),Lo("orderIndex","asc"));return(await Ui(n)).docs.map(i=>i.data())}async updateCategory(e,n){const r=wt(Je,`users/${e}/categories`,n.id);await Zr(r,n,{merge:!0})}async deleteCategory(e,n){const r=wt(Je,`users/${e}/categories`,n);await Fi(r)}async reorderCategories(e,n){const r=OI(Je);n.forEach((i,a)=>{const o=wt(Je,`users/${e}/categories`,i.id);r.update(o,{orderIndex:a})}),await r.commit()}subscribeToCategories(e,n){const r=Ki(vr(Je,`users/${e}/categories`),Lo("orderIndex","asc"));return Yu(r,i=>{const a=i.docs.map(o=>o.data());n(a)},i=>{console.error(" Category subscription error:",i)})}}Eo.getInstance();const $b=t=>vr(Je,"users",t,"transactions"),yQ={subscribeToTransactions:(t,e)=>{const n=Ki($b(t),Lo("date","desc"));return Yu(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllTransactions:async t=>{console.log(` TransactionService.getAllTransactions: Fetching for user ${t}`);const e=Ki($b(t),Lo("date","desc")),r=(await Ui(e)).docs.map(i=>{const a={id:i.id,...i.data()};return Kw(a)});return console.log(` Fetched ${r.length} transactions:`,r.map(i=>({id:i.id,description:i.description,month:i.month}))),r},addTransaction:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create transaction");console.log(` TransactionService.addTransaction: Adding transaction for user ${e}:`,r),console.log(` Original transaction had temp ID: ${n}`);try{console.log(" About to call addDoc with:",r);const i=await T0($b(e),r);console.log(" addDoc succeeded, docRef:",i),console.log(` Document ID: ${i.id}`),console.log(` Document path: ${i.path}`);const a={id:i.id,...r,userId:e};return console.log(" Final result object:",a),a}catch(i){throw console.error(" addDoc failed:",i),console.error("Error message:",i.message),i}},updateTransaction:async(t,e,n)=>{const r=wt(Je,"users",t,"transactions",e);return await wa(r,n)},deleteTransaction:async(t,e)=>{console.log(` TransactionService.deleteTransaction: Deleting transaction ${e} for user ${t}`);try{const n=wt(Je,"users",t,"transactions",e);console.log(` Deleting document at path: ${n.path}`),await Fi(n),console.log(` TransactionService.deleteTransaction: Successfully deleted transaction ${e}`)}catch(n){throw console.error(` TransactionService.deleteTransaction: Failed to delete transaction ${e}:`,n),console.error("Error message:",n.message),n}}},Hb=t=>vr(Je,"users",t,"envelopes"),bQ={subscribeToEnvelopes:(t,e)=>{const n=Ki(Hb(t),Lo("orderIndex","asc"));return Yu(n,i=>{const a=i.docs.map(o=>{const c=o.data();return{id:o.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated}});e(a)})},getAllEnvelopes:async t=>{try{console.log(" EnvelopeService.getAllEnvelopes called for user:",t);const e=Hb(t),i=(await Ui(e)).docs.map((a,o)=>{const c=a.data();return{id:a.id,...c,createdAt:c.createdAt?.toDate?.()?c.createdAt.toDate().toISOString():c.createdAt,lastUpdated:c.lastUpdated?.toDate?.()?c.lastUpdated.toDate().toISOString():c.lastUpdated,orderIndex:c.orderIndex??o}}).sort((a,o)=>{const c=a.orderIndex??0,u=o.orderIndex??0;return c-u});return console.log(" Fetched envelopes:",i.length),i}catch(e){return console.error(" EnvelopeService.getAllEnvelopes failed:",e),[]}},createEnvelope:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create envelope");try{return{id:(await T0(Hb(e),r)).id,...r,userId:e}}catch(i){throw console.error(" Envelope addDoc failed:",i),i}},saveEnvelope:async(t,e)=>{if(!e.id)throw new Error("Envelope ID is required for save operation");const n=wt(Je,"users",t,"envelopes",e.id);return await Zr(n,e,{merge:!0})},updateBalance:async(t,e,n)=>{const r=wt(Je,"users",t,"envelopes",e);return await wa(r,{currentBalance:n,lastUpdated:new Date().toISOString()})},deleteEnvelope:async(t,e)=>{console.log(` EnvelopeService.deleteEnvelope: Deleting envelope ${e} for user ${t}`);const n=wt(Je,"users",t,"envelopes",e);await Fi(n),console.log(` EnvelopeService.deleteEnvelope: Successfully deleted envelope ${e}`)}},qb=t=>vr(Je,"users",t,"distributionTemplates"),xQ={subscribeToDistributionTemplates:(t,e)=>{const n=Ki(qb(t),Lo("lastUsed","desc"));return Yu(n,i=>{const a=i.docs.map(o=>({id:o.id,...o.data()}));e(a)})},getAllDistributionTemplates:async t=>{const e=Ki(qb(t),Lo("lastUsed","desc"));return(await Ui(e)).docs.map(r=>({id:r.id,...r.data()}))},createDistributionTemplate:async t=>{const{userId:e,id:n,...r}=t;if(!e)throw new Error("User ID is required to create distribution template");console.log(` DistributionTemplateService.createDistributionTemplate: Adding template for user ${e}:`,r);try{const i=await T0(qb(e),r);console.log(" Template addDoc succeeded, docRef:",i);const a={id:i.id,...r,userId:e};return console.log(" Final template result object:",a),a}catch(i){throw console.error(" Template addDoc failed:",i),i}},saveDistributionTemplate:async(t,e)=>{const n=wt(Je,"users",t,"distributionTemplates",e.id);return await Zr(n,e,{merge:!0})},updateDistributionTemplate:async(t,e,n)=>{const r=wt(Je,"users",t,"distributionTemplates",e);return await wa(r,n)},deleteDistributionTemplate:async(t,e)=>{console.log(` DistributionTemplateService.deleteDistributionTemplate: Deleting template ${e} for user ${t}`);const n=wt(Je,"users",t,"distributionTemplates",e);await Fi(n),console.log(` DistributionTemplateService.deleteDistributionTemplate: Successfully deleted template ${e}`)}},Yb=t=>vr(Je,"users",t,"appSettings"),yP={subscribeToAppSettings:(t,e)=>{const n=Ki(Yb(t),xC(1));return Yu(n,i=>{if(i.empty){e(null);return}const a=i.docs.map(o=>({id:o.id,...o.data()}))[0];e(a)})},getAppSettings:async t=>{const e=Ki(Yb(t),xC(1)),n=await Ui(e);if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},createAppSettings:async t=>{const{userId:e,...n}=t;if(!e)throw new Error("User ID is required to create app settings");console.log(` AppSettingsService.createAppSettings: Creating settings for user ${e}:`,n);try{const r=await T0(Yb(e),n);console.log(" Settings addDoc succeeded, docRef:",r);const i={id:r.id,...n,userId:e};return console.log(" Final settings result object:",i),i}catch(r){throw console.error(" Settings addDoc failed:",r),r}},saveAppSettings:async(t,e)=>{const n=wt(Je,"users",t,"appSettings",e.id);return await Zr(n,e,{merge:!0})},updateAppSettings:async(t,e,n)=>{const r=wt(Je,"users",t,"appSettings",e);return await Zr(r,n,{merge:!0})},deleteAppSettings:async(t,e)=>{console.log(` AppSettingsService.deleteAppSettings: Deleting settings ${e} for user ${t}`);const n=wt(Je,"users",t,"appSettings",e);await Fi(n),console.log(` AppSettingsService.deleteAppSettings: Successfully deleted settings ${e}`)}},Ik=Object.freeze(Object.defineProperty({__proto__:null,AppSettingsService:yP},Symbol.toStringTag,{value:"Module"})),_Q=t=>Kw(t),wQ=t=>({id:t.id,name:t.name||"",currentBalance:t.currentBalance||0,lastUpdated:t.lastUpdated?.toDate?.()?t.lastUpdated.toDate().toISOString():t.lastUpdated,isActive:t.isActive??!0,orderIndex:t.orderIndex??0,userId:t.userId||void 0,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,isPiggybank:t.isPiggybank,piggybankConfig:t.piggybankConfig,categoryId:t.categoryId}),SQ=t=>({id:t.id,userId:t.userId,name:t.name,orderIndex:t.orderIndex,isArchived:t.isArchived,createdAt:t.createdAt?.toDate?.()?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt?.toDate?.()?t.updatedAt.toDate().toISOString():t.updatedAt}),Mk=(t,e)=>{if(window.__firebaseUnsubscribers){console.log(" Real-time subscriptions already active, skipping setup");return}console.log(" Setting up real-time Firebase subscriptions...");const n=t.getState().currentMonth;console.log(" Current month for subscriptions:",n);const r=bQ.subscribeToEnvelopes(e,h=>{console.log(" Real-time sync: Envelopes updated",h.length);const g=h.map(wQ),m=t.getState(),b=new Set(m.envelopes.map(E=>E.id)),_=new Set(g.map(E=>E.id)),w=[...g.filter(E=>b.has(E.id)),...m.envelopes.filter(E=>!_.has(E.id))];t.setState({envelopes:w})}),i=yQ.subscribeToTransactions(e,h=>{console.log(" Real-time sync: Transactions updated",h.length);const g=h.map(_Q),m=t.getState(),b=new Set(m.transactions.map(E=>`${E.id}-${E.month}`)),_=new Set(g.map(E=>`${E.id}-${E.month}`)),w=[...g.filter(E=>b.has(`${E.id}-${E.month}`)),...m.transactions.filter(E=>!_.has(`${E.id}-${E.month}`))];t.setState({transactions:w})}),o=Eo.getInstance().subscribeToCategories(e,h=>{console.log(" Real-time sync: Categories updated",h.length);const g=h.map(SQ);t.setState({categories:g})}),c=xQ.subscribeToDistributionTemplates(e,h=>{console.log(" Real-time sync: Templates updated from Firebase",h.length)}),u=yP.subscribeToAppSettings(e,h=>{console.log(" Real-time sync: Settings updated",h?"found":"null");const g=t.getState();if(h){const m={...g.appSettings,...h,paymentSources:h.paymentSources??g.appSettings?.paymentSources??[]};t.setState({appSettings:m})}else console.log(" Firebase settings null, preserving local state")}),d=Qw.subscribeToMonthlyBudget(e,n,h=>{console.log(` Real-time sync: Monthly budget updated (${h.incomeSources.length} sources, ${h.allocations.length} allocations)`);const g=t.getState();t.setState({incomeSources:{...g.incomeSources,[n]:h.incomeSources},allocations:{...g.allocations,[n]:h.allocations}})});window.__firebaseUnsubscribers={envelopes:r,transactions:i,categories:o,templates:c,settings:u,monthlyBudget:d},console.log(" Real-time subscriptions active - cross-device sync enabled")},EQ=t=>{const{useBudgetStore:e,useAuthStore:n,getCurrentUserId:r}=t;if(typeof window>"u")return;window.addEventListener("online",async()=>{console.log(" Browser online event detected"),e.setState({isOnline:!0})}),window.addEventListener("offline",()=>{console.log(" Browser offline event detected"),e.setState({isOnline:!1})}),e.setState({isOnline:navigator.onLine});const i=n.getState();i.isAuthenticated&&i.currentUser&&(console.log(" User already authenticated on app load, setting up real-time subscriptions"),Mk(e,r())),n.subscribe(o=>{if(o.isAuthenticated&&o.currentUser)console.log(" User authenticated, setting up real-time subscriptions"),Mk(e,r());else if(!o.isAuthenticated&&!o.isLoading){if(console.log(" User logged out, clearing data and unsubscribing"),window.__firebaseUnsubscribers){const c=window.__firebaseUnsubscribers;c.envelopes&&c.envelopes(),c.transactions&&c.transactions(),c.categories&&c.categories(),c.templates&&c.templates(),c.settings&&c.settings(),c.monthlyBudget&&c.monthlyBudget(),delete window.__firebaseUnsubscribers,console.log(" Cleaned up Firebase subscriptions")}e.getState().handleUserLogout()}});let a=e.getState().currentMonth;e.subscribe(o=>{if(o.currentMonth!==a&&o.isAuthenticated){console.log(" Month changed from",a,"to",o.currentMonth),a=o.currentMonth;const c=r();if(c&&window.__firebaseUnsubscribers){const u=window.__firebaseUnsubscribers;u.monthlyBudget&&u.monthlyBudget(),console.log(" Unsubscribed from old month data"),u.monthlyBudget=Qw.subscribeToMonthlyBudget(c,o.currentMonth,d=>{console.log(" Real-time sync: Monthly budget updated for new month");const h=e.getState();e.setState({incomeSources:{...h.incomeSources,[o.currentMonth]:d.incomeSources},allocations:{...h.allocations,[o.currentMonth]:d.allocations}})}),console.log(" Subscribed to monthly data for new month:",o.currentMonth)}}})},rm=()=>$i.getState().currentUser?.id||"",yn=zl.getInstance(),Al=Eo.getInstance(),Jt=G1()(GB(iN((t,e)=>({envelopes:[],transactions:[],categories:[],appSettings:null,incomeSources:{},allocations:{},currentMonth:new Date().toISOString().slice(0,7),isOnline:typeof navigator<"u"?navigator.onLine:!0,isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null,setIsOnboardingActive:n=>{t({isOnboardingActive:n})},checkAndStartOnboarding:()=>{const n=rm();if(!n){console.log(" No user ID, skipping onboarding check");return}const r=`onboardingCompleted_${n}`,i=typeof localStorage<"u"?localStorage.getItem(r)==="true":!1;console.log(" checkAndStartOnboarding called:",{userId:n,isOnboardingCompleted:i,isOnboardingActive:e().isOnboardingActive,localStorage_key:r,localStorage_value:localStorage.getItem(r)}),t({isOnboardingCompleted:i}),!i&&!e().isOnboardingActive?(console.log(" Starting onboarding for new user - setting isOnboardingActive to TRUE"),t({isOnboardingActive:!0}),console.log(" isOnboardingActive set to:",e().isOnboardingActive)):console.log(" Skipping onboarding:",{reason:i?"already completed":"already active"})},completeOnboarding:()=>{const n=rm();if(n){const r=`onboardingCompleted_${n}`;localStorage.setItem(r,"true"),console.log(" Onboarding completed for user:",n)}t({isOnboardingCompleted:!0,isOnboardingActive:!1})},resetOnboarding:()=>{const n=rm();if(n){const r=`onboardingCompleted_${n}`;localStorage.removeItem(r),console.log(" Onboarding reset for user:",n)}t({isOnboardingCompleted:!1,isOnboardingActive:!0})},clearMonthData:async n=>{try{t({isLoading:!0,error:null}),console.log(` Clearing all data for month: ${n}`);const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const{monthlyBudgetService:a}=await Et(async()=>{const{monthlyBudgetService:o}=await import("./MonthlyBudgetService-Dr50c2kf.js");return{monthlyBudgetService:o}},[]);await a.clearMonthData(i.id,n),await e().init(),console.log(` Cleared month data for ${n}`),t({isLoading:!1})}catch(r){throw console.error(" clearMonthData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to clear month data"}),r}},fetchMonthData:async n=>{try{const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping month data fetch");return}console.log(`Fetching month data for: ${n}`);const a=await yn.getMonthData(i.id,n),o=e();t({incomeSources:{...o.incomeSources,[n]:a.incomeSources},allocations:{...o.allocations,[n]:a.allocations}}),console.log(` Fetched month data for ${n}`),(async()=>{const u=e(),d=u.allocations[n]||[],h=u.transactions.filter(m=>m.month===n);let g=0;for(const m of d){const b=u.envelopes.find(w=>w.id===m.envelopeId);if(b?.isPiggybank)continue;const _=h.find(w=>w.envelopeId===m.envelopeId&&(w.description==="Monthly Budget Allocation"||w.description==="Monthly Allocation"||w.description==="Budgeted"||w.description==="Piggybank Contribution"));_?_.amount!==m.budgetedAmount&&(console.log(` Repairing mismatch for envelope ${b?.name||m.envelopeId}: Alloc ${m.budgetedAmount} vs Tx ${_.amount}`),await u.updateTransaction({..._,amount:m.budgetedAmount}),g++):m.budgetedAmount>0&&(console.log(` Repairing missing transaction for envelope ${b?.name||m.envelopeId}`),await u.addTransaction({description:"Budgeted",amount:m.budgetedAmount,envelopeId:m.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0}),g++)}g>0&&console.log(` Repaired ${g} allocation discrepancies for ${n}`)})().catch(u=>console.error("Verification failed:",u))}catch(r){console.error(` Failed to fetch month data for ${n}:`,r)}},removeEnvelopeFromMonth:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(` Removing envelope ${n} from month ${r}`);const i=e(),a=i.allocations[r]?.find(c=>c.envelopeId===n);a?await e().deleteEnvelopeAllocation(a.id):console.log(` No allocation found for envelope ${n} in ${r}`);const o=i.transactions.filter(c=>c.envelopeId===n&&(c.month===r||c.date.startsWith(r)));o.length>0&&(console.log(` Deleting ${o.length} transactions for envelope ${n} in ${r}`),await Promise.all(o.map(c=>e().deleteTransaction(c.id)))),t({isLoading:!1}),console.log(` Removed envelope ${n} from month ${r}`)}catch(i){throw console.error(" removeEnvelopeFromMonth failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to remove envelope from month"}),i}},setMonth:async n=>{t({currentMonth:n});const r=e();(r.incomeSources[n]===void 0||r.allocations[n]===void 0)&&(console.log(`Month ${n} data missing in store, fetching...`),t({isLoading:!0}),await e().fetchMonthData(n),t({isLoading:!1}))},init:async()=>{console.log("BudgetStore initializing...");const n=e();try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!i){console.log("No user logged in, skipping data fetch"),t({isLoading:!1});return}console.log(`Fetching data for user: ${i.id}, month: ${n.currentMonth}`);const[a,o,c,u]=await Promise.all([yn.getEnvelopes(i.id),yn.getTransactions(i.id),Al.getCategories(i.id).catch(d=>(console.error(" Failed to load categories:",d),[])),yn.getMonthData(i.id,n.currentMonth)]);t({envelopes:a,transactions:o,categories:c,incomeSources:{...n.incomeSources,[n.currentMonth]:u.incomeSources},allocations:{...n.allocations,[n.currentMonth]:u.allocations},isLoading:!1,error:null}),console.log(` BudgetStore initialized: ${a.length} envelopes, ${o.length} transactions, ${c.length} categories, ${u.incomeSources.length} income sources, ${u.allocations.length} allocations`)}catch(r){console.error(" BudgetStore initialization failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to initialize budget data"})}},fetchCategories:async()=>{try{t({isLoading:!0,error:null});const r=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!r)return;const i=await Al.getCategories(r.id);t({categories:i,isLoading:!1})}catch(n){console.error("Failed to fetch categories:",n),t({isLoading:!1})}},addCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a=Al.createId(),o={...n,id:a,userId:i.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),orderIndex:e().categories.length};return await Al.createCategory(o),t(c=>c.categories.some(d=>d.id===a)?{isLoading:!1}:{categories:[...c.categories,o],isLoading:!1}),a}catch(r){throw console.error("Failed to add category:",r),t({isLoading:!1}),r}},updateCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a={...n,updatedAt:new Date().toISOString()};await Al.updateCategory(i.id,a),t(o=>({categories:o.categories.map(c=>c.id===n.id?a:c),isLoading:!1}))}catch(r){throw console.error("Failed to update category:",r),t({isLoading:!1}),r}},deleteCategory:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");await Al.deleteCategory(i.id,n),t(a=>({categories:a.categories.filter(o=>o.id!==n),isLoading:!1}))}catch(r){throw console.error("Failed to delete category:",r),t({isLoading:!1}),r}},reorderCategories:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No user logged in");const a=e(),o=new Map;n.forEach((u,d)=>o.set(u,d));const c=a.categories.map(u=>{if(!o.has(u.id))return u;const d=o.get(u.id);return u.orderIndex===d?u:{...u,orderIndex:d}});t({categories:c.sort((u,d)=>u.orderIndex-d.orderIndex)}),await Al.reorderCategories(i.id,c),t({isLoading:!1})}catch(r){throw console.error("Failed to reorder categories:",r),t({isLoading:!1}),r}},addEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a={...n,userId:i.id},o=await yn.createEnvelope(a);return t(c=>c.envelopes.some(d=>d.id===o.id)?{isLoading:!1}:{envelopes:[...c.envelopes,o],isLoading:!1}),console.log(" Added envelope:",o.id),o.id}catch(r){throw console.error(" addEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add envelope"}),r}},updateEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await yn.updateEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.map(o=>o.id===n.id?n:o),isLoading:!1})),console.log(" Updated envelope:",n.id)}catch(r){throw console.error(" updateEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update envelope"}),r}},deleteEnvelope:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await yn.deleteEnvelope(i.id,n),t(a=>({envelopes:a.envelopes.filter(o=>o.id!==n),transactions:a.transactions.filter(o=>o.envelopeId!==n),isLoading:!1})),console.log(" Deleted envelope:",n)}catch(r){throw console.error(" deleteEnvelope failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope"}),r}},reorderEnvelopes:async n=>{try{t({isLoading:!0,error:null});const r=e(),i=new Map;n.forEach((d,h)=>{i.set(d,h)});const a=r.envelopes.map(d=>{if(!i.has(d.id))return d;const h=i.get(d.id);return d.orderIndex===h?d:{...d,orderIndex:h}}),o=a.filter((d,h)=>d!==r.envelopes[h]);if(!o.length){t({isLoading:!1});return}const u=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!u)throw new Error("No authenticated user found");await yn.reorderEnvelopes(u.id,o),t({envelopes:a,isLoading:!1}),console.log(" Reordered envelopes")}catch(r){throw console.error(" reorderEnvelopes failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to reorder envelopes"}),r}},addTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),o=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...n,userId:i.id,month:o},u=await yn.createTransaction(c);t(d=>d.transactions.some(g=>g.id===u.id)?{isLoading:!1}:{transactions:[...d.transactions,u],isLoading:!1}),console.log(" Added transaction:",u.id)}catch(r){throw console.error(" addTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to add transaction"}),r}},updateTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=new Date(n.date),o=n.month||`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`,c={...n,month:o};await yn.updateTransaction(i.id,c),t(u=>({transactions:u.transactions.map(d=>d.id===n.id?c:d),isLoading:!1})),console.log(" Updated transaction:",n.id)}catch(r){throw console.error(" updateTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update transaction"}),r}},deleteTransaction:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");await yn.deleteTransaction(i.id,n),t(a=>({transactions:a.transactions.filter(o=>o.id!==n),isLoading:!1})),console.log(" Deleted transaction:",n)}catch(r){throw console.error(" deleteTransaction failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete transaction"}),r}},restoreTransaction:async n=>{await e().updateTransaction(n)},transferFunds:async(n,r,i,a,o)=>{try{const c=o?typeof o=="string"?o:o.toISOString():new Date().toISOString(),u=`transfer-${Date.now()}-${Math.random()}`;await e().addTransaction({description:`Transfer to ${e().envelopes.find(d=>d.id===r)?.name||"envelope"}`,amount:i,envelopeId:n,date:c,type:"Expense",transferId:u,reconciled:!1}),await e().addTransaction({description:`Transfer from ${e().envelopes.find(d=>d.id===n)?.name||"envelope"}`,amount:i,envelopeId:r,date:c,type:"Income",transferId:u,reconciled:!1}),console.log(" Transfer completed")}catch(c){throw console.error(" transferFunds failed:",c),c}},fetchData:async()=>{await e().init()},renameEnvelope:async(n,r)=>{try{t({isLoading:!0,error:null});const a=e().envelopes.find(d=>d.id===n);if(!a)throw new Error("Envelope not found");t(d=>({envelopes:d.envelopes.map(h=>h.id===n?{...h,name:r}:h),isLoading:!0}));const c=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(d=>d.useAuthStore.getState())).currentUser;if(!c)throw new Error("No authenticated user found");const u={...a,name:r};await yn.updateEnvelope(c.id,u),t({isLoading:!1}),console.log(" Renamed envelope:",n)}catch(i){throw console.error(" renameEnvelope failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to rename envelope"}),i}},getEnvelopeBalance:(n,r)=>{const i=e(),a=i.envelopes.find(o=>o.id===n);if(!a)return console.log(` getEnvelopeBalance: Envelope ${n} not found`),0;if(a.isPiggybank){const o=i.transactions.filter(g=>g.envelopeId===n),c=o.filter(g=>g.type==="Expense"),u=o.filter(g=>g.type==="Income"),d=c.reduce((g,m)=>g+(m.amount||0),0);return u.reduce((g,m)=>g+(m.amount||0),0)-d}if(r){const o=i.transactions.filter(g=>g.envelopeId===n&&g.month===r),c=o.filter(g=>g.type==="Expense"),u=o.filter(g=>g.type==="Income"),d=c.reduce((g,m)=>g+(m.amount||0),0);return u.reduce((g,m)=>g+(m.amount||0),0)-d}return console.warn(` getEnvelopeBalance: Month not provided for non-piggybank envelope ${n}. Returning 0.`),0},resetData:async()=>{console.log(" Resetting all data"),t({isLoading:!0});try{const r=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(i=>i.useAuthStore.getState())).currentUser;r?(console.log(" Deleting all data from Firestore for user:",r.id),await yn.deleteAllUserData(r.id)):console.warn(" No user logged in, only clearing local state"),t({envelopes:[],transactions:[],appSettings:null,incomeSources:{},allocations:{},isLoading:!1,error:null}),console.log(" Reset data complete")}catch(n){throw console.error(" resetData failed:",n),t({isLoading:!1,error:n instanceof Error?n.message:"Failed to reset data"}),n}},importData:async n=>{try{if(t({isLoading:!0,error:null}),!n||typeof n!="object")throw new Error("Invalid data format");const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(a=>a.useAuthStore.getState())).currentUser;if(!i)throw new Error("You must be logged in to restore data.");return console.log(" Starting Time Machine Restore for user:",i.id),await yn.restoreUserData(i.id,n),console.log(" Reloading app state from cloud..."),await e().init(),t({isLoading:!1}),{success:!0,message:"Data restored successfully from backup."}}catch(r){return console.error(" importData failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to import data"}),{success:!1,message:r instanceof Error?r.message:"Import failed"}}},updateAppSettings:async n=>{try{t({isLoading:!0,error:null});const r=e(),i={id:r.appSettings?.id||"default",theme:n.theme??r.appSettings?.theme??"system",fontSize:n.fontSize??r.appSettings?.fontSize??"medium",enableMoveableReorder:n.enableMoveableReorder??r.appSettings?.enableMoveableReorder??!0,paymentSources:n.paymentSources??r.appSettings?.paymentSources??[]};(n.userId||r.appSettings?.userId)&&(i.userId=n.userId??r.appSettings?.userId),i.paymentSources&&(i.paymentSources=i.paymentSources.map(c=>{const u={...c};return u.last4===void 0&&delete u.last4,u}));const o=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(o){const{AppSettingsService:c}=await Et(async()=>{const{AppSettingsService:u}=await Promise.resolve().then(()=>Ik);return{AppSettingsService:u}},void 0);await c.updateAppSettings(o.id,i.id,i)}t({appSettings:i,isLoading:!1}),console.log(" Updated app settings")}catch(r){throw console.error(" updateAppSettings failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to update settings"}),r}},initializeAppSettings:async()=>{try{if(e().appSettings)return;const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(i){const{AppSettingsService:o}=await Et(async()=>{const{AppSettingsService:u}=await Promise.resolve().then(()=>Ik);return{AppSettingsService:u}},void 0),c=await o.getAppSettings(i.id);if(c){t({appSettings:c}),console.log(" Loaded app settings from Firestore");return}}const a={id:"default",theme:"system",fontSize:"medium",enableMoveableReorder:!0,paymentSources:[]};i&&(a.userId=i.id),t({appSettings:a}),console.log(" Initialized default app settings")}catch(n){console.error(" initializeAppSettings failed:",n),t({error:n instanceof Error?n.message:"Failed to initialize settings"})}},updatePiggybankContribution:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating piggybank contribution:",{envelopeId:n,newAmount:r});const a=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(u=>u.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().envelopes.find(u=>u.id===n&&u.isPiggybank);if(!o)throw new Error("Piggybank not found");const c={...o,lastUpdated:new Date().toISOString(),piggybankConfig:{monthlyContribution:r,targetAmount:o.piggybankConfig?.targetAmount,color:o.piggybankConfig?.color,icon:o.piggybankConfig?.icon,paused:o.piggybankConfig?.paused??!1}};if(console.log(" Updating envelope in Firestore:",c),await yn.updateEnvelope(a.id,c),console.log(" Envelope updated successfully"),t(u=>({envelopes:u.envelopes.map(d=>d.id===n?c:d),isLoading:!1})),!o.piggybankConfig?.paused)try{await e().setEnvelopeAllocation(n,r),setTimeout(()=>{e().transactions.find(d=>d.envelopeId===n&&(d.description==="Monthly Allocation"||d.description==="Piggybank Contribution"))||console.warn(" Piggybank contribution transaction not found after update")},1e3)}catch(u){console.error(" Failed to update piggybank contribution:",u)}console.log(" Piggybank contribution updated successfully")}catch(i){throw console.error(" updatePiggybankContribution failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update piggybank contribution"}),i}},addIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");console.log(" Adding income source:",{month:n,source:r});const o=await yn.createIncomeSource({...r,userId:a.id,month:n});t(c=>{const u=c.incomeSources[n]||[];return u.some(h=>h.id===o.id)?{isLoading:!1}:{incomeSources:{...c.incomeSources,[n]:[...u,o]},isLoading:!1}}),console.log(" Added income source:",o.id)}catch(i){throw console.error(" addIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to add income source"}),i}},updateIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Updating income source:",{month:n,sourceId:r.id}),t(o=>({incomeSources:{...o.incomeSources,[n]:o.incomeSources[n]?.map(c=>c.id===r.id?{...r,updatedAt:new Date().toISOString()}:c)||[]},isLoading:!1}));const a=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!a)return;await yn.updateIncomeSource(a.id,r.id,n,r),console.log(" Updated income source:",r.id)}catch(i){throw console.error(" updateIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update income source"}),i}},deleteIncomeSource:async(n,r)=>{try{t({isLoading:!0,error:null}),console.log(" Deleting income source:",{month:n,sourceId:r}),t(o=>({incomeSources:{...o.incomeSources,[n]:o.incomeSources[n]?.filter(c=>c.id!==r)||[]},isLoading:!1}));const a=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(o=>o.useAuthStore.getState())).currentUser;if(!a)return;await yn.deleteIncomeSource(a.id,r,n),console.log(" Deleted income source:",r)}catch(i){throw console.error(" deleteIncomeSource failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to delete income source"}),i}},copyPreviousMonthAllocations:async n=>{try{t({isLoading:!0,error:null});const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(_=>_.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");console.log(" Copying allocations from previous month:",n);const[a,o]=n.split("-").map(Number);let c=a,u=o-1;u<1&&(c=a-1,u=12);const d=`${c}-${String(u).padStart(2,"0")}`;(!e().incomeSources[d]||!e().allocations[d])&&(console.log(` Previous month ${d} data missing, fetching...`),await e().fetchMonthData(d));const h=e().incomeSources[d]||[];if(console.log(` Found ${h.length} income sources from ${d}`),h.length>0){for(const _ of h){const{id:w,...E}=_;await e().addIncomeSource(n,E)}console.log(` Copied ${h.length} income sources to ${n}`)}const g=e().allocations[d]||[];console.log(` Found ${g.length} allocations from ${d}`);const m=g.filter(_=>{const w=e().envelopes.find(E=>E.id===_.envelopeId);return!!w&&!w.isPiggybank});if(m.length>0){for(const _ of m)await e().createEnvelopeAllocation({envelopeId:_.envelopeId,budgetedAmount:_.budgetedAmount,userId:i.id,month:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),_.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:_.budgetedAmount,envelopeId:_.envelopeId,type:"Income",month:n,date:`${n}-01T00:00:00`,reconciled:!1,isAutomatic:!0});console.log(` Copied ${m.length} regular allocations to ${n}`)}const b=e().envelopes.filter(_=>_.isPiggybank);console.log(` Processing ${b.length} piggybanks for ${n}`);for(const _ of b){const w=_.piggybankConfig?.monthlyContribution,E=_.piggybankConfig?.paused??!1;if(!E&&w&&w>0)try{console.log(` Setting piggybank allocation for ${_.name}: ${w}`),await e().setEnvelopeAllocation(_.id,w)}catch(T){console.error(` Failed to set allocation for piggybank ${_.name}:`,T)}else console.log(` Skipping piggybank ${_.name} (paused=${E}, contribution=${w})`)}t({isLoading:!1}),console.log(` Complete monthly setup copied to ${n}`)}catch(r){throw console.error(" copyPreviousMonthAllocations failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to copy allocations"}),r}},setEnvelopeAllocation:async(n,r)=>{try{t({isLoading:!0,error:null});const a=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!a)throw new Error("No authenticated user found");const o=e().currentMonth,c=e().envelopes.find(h=>h.id===n);if(!c){console.error(` setEnvelopeAllocation: Envelope ${n} not found in store! Aborting.`),t({isLoading:!1});return}const u=!!c.isPiggybank;console.log(` setEnvelopeAllocation called: envelopeId=${n}, amount=${r}, currentMonth=${o}, isPiggybank=${u}`);const d=e().allocations[o]?.find(h=>h.envelopeId===n);if(d?await e().updateEnvelopeAllocation(d.id,{budgetedAmount:r}):await e().createEnvelopeAllocation({envelopeId:n,budgetedAmount:r,userId:a.id,month:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),u&&r>0&&!c?.piggybankConfig?.paused){const h=e().transactions.find(g=>g.envelopeId===n&&g.month===o&&(g.description==="Monthly Allocation"||g.description==="Piggybank Contribution"));if(h){const g={...h,amount:r,description:"Piggybank Contribution"};await e().updateTransaction(g)}else{const g={description:"Piggybank Contribution",amount:r,envelopeId:n,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(g)}}if(!u&&r>0){const h=e().transactions.find(g=>g.envelopeId===n&&g.month===o&&(g.description==="Monthly Budget Allocation"||g.description==="Budgeted"));if(h){const g={...h,amount:r,description:"Budgeted"};await e().updateTransaction(g)}else{const g={description:"Budgeted",amount:r,envelopeId:n,type:"Income",month:o,date:`${o}-01T00:00:00`,reconciled:!1,isAutomatic:!0};await e().addTransaction(g)}}console.log(" Envelope allocation set successfully")}catch(i){throw console.error(" setEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to set envelope allocation"}),i}},createEnvelopeAllocation:async n=>{try{const i=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!i)throw new Error("No authenticated user found");const a=e().currentMonth,o=await yn.createEnvelopeAllocation({envelopeId:n.envelopeId,budgetedAmount:n.budgetedAmount,userId:i.id,month:a});t(c=>{const u=c.allocations[a]||[];return u.some(h=>h.id===o.id)?{isLoading:!1}:{allocations:{...c.allocations,[a]:[...u,o]},isLoading:!1}}),console.log(" Created envelope allocation:",o.id)}catch(r){throw console.error(" createEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to create envelope allocation"}),r}},updateEnvelopeAllocation:async(n,r)=>{try{console.log(" Updating envelope allocation:",{id:n,updates:r});const i=e().currentMonth,o=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(h=>h.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");const c=e().allocations[i]?.find(h=>h.id===n);if(!c)throw new Error("Allocation not found");const u=e().envelopes.find(h=>h.id===c.envelopeId),d=u?.isPiggybank;if(await yn.updateEnvelopeAllocation(o.id,c.envelopeId,i,{budgetedAmount:r.budgetedAmount}),t(h=>({allocations:{...h.allocations,[i]:h.allocations[i]?.map(g=>g.id===n?{...g,...r,updatedAt:new Date().toISOString()}:g)||[]},isLoading:!1})),d&&r.budgetedAmount!==void 0){const h=e().transactions.find(g=>g.envelopeId===c.envelopeId&&g.month===i&&(g.description==="Monthly Allocation"||g.description==="Piggybank Contribution"));h?r.budgetedAmount>0&&!u?.piggybankConfig?.paused?await e().updateTransaction({...h,amount:r.budgetedAmount,description:"Piggybank Contribution"}):(r.budgetedAmount===0||u?.piggybankConfig?.paused)&&await e().deleteTransaction(h.id):r.budgetedAmount>0&&!u?.piggybankConfig?.paused&&await e().addTransaction({description:"Piggybank Contribution",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}if(!d&&r.budgetedAmount!==void 0){const h=e().transactions.find(g=>g.envelopeId===c.envelopeId&&g.month===i&&(g.description==="Monthly Budget Allocation"||g.description==="Budgeted"));h?r.budgetedAmount>0?await e().updateTransaction({...h,amount:r.budgetedAmount,description:"Budgeted"}):r.budgetedAmount===0&&await e().deleteTransaction(h.id):r.budgetedAmount>0&&await e().addTransaction({description:"Budgeted",amount:r.budgetedAmount,envelopeId:c.envelopeId,type:"Income",month:i,date:`${i}-01T00:00:00`,reconciled:!1,isAutomatic:!0})}console.log(" Updated envelope allocation:",n)}catch(i){throw console.error(" updateEnvelopeAllocation failed:",i),t({isLoading:!1,error:i instanceof Error?i.message:"Failed to update envelope allocation"}),i}},deleteEnvelopeAllocation:async n=>{try{console.log(" Deleting envelope allocation:",n);const r=e().currentMonth,i=e().allocations[r]?.find(c=>c.id===n);if(!i){console.warn("Allocation not found in store, skipping delete");return}const o=(await Et(()=>Promise.resolve().then(()=>jt),void 0).then(c=>c.useAuthStore.getState())).currentUser;if(!o)throw new Error("No authenticated user found");await yn.deleteEnvelopeAllocation(o.id,i.envelopeId,r),t(c=>({allocations:{...c.allocations,[r]:c.allocations[r]?.filter(u=>u.id!==n)||[]},isLoading:!1})),console.log(" Deleted envelope allocation:",n)}catch(r){throw console.error(" deleteEnvelopeAllocation failed:",r),t({isLoading:!1,error:r instanceof Error?r.message:"Failed to delete envelope allocation"}),r}},refreshAvailableToBudget:async()=>{try{const n=e().currentMonth,r=e().allocations[n]||[],i=e().incomeSources[n]||[],a=r.reduce((u,d)=>u+d.budgetedAmount,0);return i.reduce((u,d)=>u+d.amount,0)-a}catch(n){throw console.error(" refreshAvailableToBudget failed:",n),t({error:n instanceof Error?n.message:"Failed to refresh available to budget"}),n}},updateOnlineStatus:async()=>{try{const n=typeof navigator<"u"?navigator.onLine:!0;t({isOnline:n}),console.log(" Online status updated:",n)}catch(n){console.error(" Failed to update online status:",n)}},handleUserLogout:()=>{console.log(" Clearing user data on logout"),t({envelopes:[],transactions:[],incomeSources:{},allocations:{},isOnboardingActive:!1,isOnboardingCompleted:!1,isLoading:!1,error:null})}}),{name:"budget-storage",partialize:t=>({envelopes:t.envelopes,transactions:t.transactions,categories:t.categories,appSettings:t.appSettings,incomeSources:t.incomeSources,allocations:t.allocations,currentMonth:t.currentMonth,isOnline:t.isOnline})})));EQ({useBudgetStore:Jt,useAuthStore:$i,getCurrentUserId:rm});const TQ=Object.freeze(Object.defineProperty({__proto__:null,useBudgetStore:Jt},Symbol.toStringTag,{value:"Module"}));var uu=9e15,Qo=1e9,w1="0123456789abcdef",Wm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Km="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",S1={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-uu,maxE:uu,crypto:!1},bP,fs,tt=!0,$0="[DecimalError] ",Ho=$0+"Invalid argument: ",xP=$0+"Precision limit exceeded",_P=$0+"crypto unavailable",wP="[object Decimal]",hr=Math.floor,Bn=Math.pow,AQ=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,CQ=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,RQ=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,SP=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yi=1e7,We=7,kQ=9007199254740991,DQ=Wm.length-1,E1=Km.length-1,Ee={toStringTag:wP};Ee.absoluteValue=Ee.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ge(t)};Ee.ceil=function(){return Ge(new this.constructor(this),this.e+1,2)};Ee.clampedTo=Ee.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Ho+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};Ee.comparedTo=Ee.cmp=function(t){var e,n,r,i,a=this,o=a.d,c=(t=new a.constructor(t)).d,u=a.s,d=t.s;if(!o||!c)return!u||!d?NaN:u!==d?u:o===c?0:!o^u<0?1:-1;if(!o[0]||!c[0])return o[0]?u:c[0]?-d:0;if(u!==d)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=o.length,i=c.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==c[e])return o[e]>c[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};Ee.cosine=Ee.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+We,r.rounding=1,n=NQ(r,RP(r,n)),r.precision=t,r.rounding=e,Ge(fs==2||fs==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};Ee.cubeRoot=Ee.cbrt=function(){var t,e,n,r,i,a,o,c,u,d,h=this,g=h.constructor;if(!h.isFinite()||h.isZero())return new g(h);for(tt=!1,a=h.s*Bn(h.s*h,1/3),!a||Math.abs(a)==1/0?(n=rr(h.d),t=h.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=Bn(n,1/3),t=hr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new g(n),r.s=h.s):r=new g(a.toString()),o=(t=g.precision)+3;;)if(c=r,u=c.times(c).times(c),d=u.plus(h),r=Ht(d.plus(h).times(c),d.plus(u),o+2,1),rr(c.d).slice(0,o)===(n=rr(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(Ge(c,t+1,0),c.times(c).times(c).eq(h))){r=c;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Ge(r,t+1,1),e=!r.times(r).times(r).eq(h));break}return tt=!0,Ge(r,t,g.rounding,e)};Ee.decimalPlaces=Ee.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-hr(this.e/We))*We,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Ee.dividedBy=Ee.div=function(t){return Ht(this,new this.constructor(t))};Ee.dividedToIntegerBy=Ee.divToInt=function(t){var e=this,n=e.constructor;return Ge(Ht(e,new n(t),0,1,1),n.precision,n.rounding)};Ee.equals=Ee.eq=function(t){return this.cmp(t)===0};Ee.floor=function(){return Ge(new this.constructor(this),this.e+1,3)};Ee.greaterThan=Ee.gt=function(t){return this.cmp(t)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ee.hyperbolicCosine=Ee.cosh=function(){var t,e,n,r,i,a=this,o=a.constructor,c=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return c;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/q0(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=ju(o,1,a.times(e),new o(1),!0);for(var u,d=t,h=new o(8);d--;)u=a.times(a),a=c.minus(u.times(h.minus(u.times(h))));return Ge(a,o.precision=n,o.rounding=r,!0)};Ee.hyperbolicSine=Ee.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=ju(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/q0(5,t)),i=ju(a,2,i,i,!0);for(var o,c=new a(5),u=new a(16),d=new a(20);t--;)o=i.times(i),i=i.times(c.plus(o.times(u.times(o).plus(d))))}return a.precision=e,a.rounding=n,Ge(i,e,n,!0)};Ee.hyperbolicTangent=Ee.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,Ht(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};Ee.inverseCosine=Ee.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?Ea(e,r,i):new e(0):new e(NaN):t.isZero()?Ea(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};Ee.inverseHyperbolicCosine=Ee.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,tt=!1,n=n.times(n).minus(1).sqrt().plus(n),tt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};Ee.inverseHyperbolicSine=Ee.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,tt=!1,n=n.times(n).plus(1).sqrt().plus(n),tt=!0,r.precision=t,r.rounding=e,n.ln())};Ee.inverseHyperbolicTangent=Ee.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Ge(new a(i),t,e,!0):(a.precision=n=r-i.e,i=Ht(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Ee.inverseSine=Ee.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=Ea(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};Ee.inverseTangent=Ee.atan=function(){var t,e,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding;if(d.isFinite()){if(d.isZero())return new h(d);if(d.abs().eq(1)&&g+4<=E1)return o=Ea(h,g+4,m).times(.25),o.s=d.s,o}else{if(!d.s)return new h(NaN);if(g+4<=E1)return o=Ea(h,g+4,m).times(.5),o.s=d.s,o}for(h.precision=c=g+10,h.rounding=1,n=Math.min(28,c/We+2|0),t=n;t;--t)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(tt=!1,e=Math.ceil(c/We),r=1,u=d.times(d),o=new h(d),i=d;t!==-1;)if(i=i.times(u),a=o.minus(i.div(r+=2)),i=i.times(u),o=a.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),tt=!0,Ge(o,h.precision=g,h.rounding=m,!0)};Ee.isFinite=function(){return!!this.d};Ee.isInteger=Ee.isInt=function(){return!!this.d&&hr(this.e/We)>this.d.length-2};Ee.isNaN=function(){return!this.s};Ee.isNegative=Ee.isNeg=function(){return this.s<0};Ee.isPositive=Ee.isPos=function(){return this.s>0};Ee.isZero=function(){return!!this.d&&this.d[0]===0};Ee.lessThan=Ee.lt=function(t){return this.cmp(t)<0};Ee.lessThanOrEqualTo=Ee.lte=function(t){return this.cmp(t)<1};Ee.logarithm=Ee.log=function(t){var e,n,r,i,a,o,c,u,d=this,h=d.constructor,g=h.precision,m=h.rounding,b=5;if(t==null)t=new h(10),e=!0;else{if(t=new h(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new h(NaN);e=t.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new h(n&&!n[0]?-1/0:d.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(tt=!1,c=g+b,o=To(d,c),r=e?Qm(h,c+10):To(t,c),u=Ht(o,r,c,1),oh(u.d,i=g,m))do if(c+=10,o=To(d,c),r=e?Qm(h,c+10):To(t,c),u=Ht(o,r,c,1),!a){+rr(u.d).slice(i+1,i+15)+1==1e14&&(u=Ge(u,g+1,0));break}while(oh(u.d,i+=10,m));return tt=!0,Ge(u,g,m)};Ee.minus=Ee.sub=function(t){var e,n,r,i,a,o,c,u,d,h,g,m,b=this,_=b.constructor;if(t=new _(t),!b.d||!t.d)return!b.s||!t.s?t=new _(NaN):b.d?t.s=-t.s:t=new _(t.d||b.s!==t.s?b:NaN),t;if(b.s!=t.s)return t.s=-t.s,b.plus(t);if(d=b.d,m=t.d,c=_.precision,u=_.rounding,!d[0]||!m[0]){if(m[0])t.s=-t.s;else if(d[0])t=new _(b);else return new _(u===3?-0:0);return tt?Ge(t,c,u):t}if(n=hr(t.e/We),h=hr(b.e/We),d=d.slice(),a=h-n,a){for(g=a<0,g?(e=d,a=-a,o=m.length):(e=m,n=h,o=d.length),r=Math.max(Math.ceil(c/We),o)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=d.length,o=m.length,g=r<o,g&&(o=r),r=0;r<o;r++)if(d[r]!=m[r]){g=d[r]<m[r];break}a=0}for(g&&(e=d,d=m,m=e,t.s=-t.s),o=d.length,r=m.length-o;r>0;--r)d[o++]=0;for(r=m.length;r>a;){if(d[--r]<m[r]){for(i=r;i&&d[--i]===0;)d[i]=Yi-1;--d[i],d[r]+=Yi}d[r]-=m[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=H0(d,n),tt?Ge(t,c,u):t):new _(u===3?-0:0)};Ee.modulo=Ee.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Ge(new r(n),r.precision,r.rounding):(tt=!1,r.modulo==9?(e=Ht(n,t.abs(),0,3,1),e.s*=t.s):e=Ht(n,t,0,r.modulo,1),e=e.times(t),tt=!0,n.minus(e))};Ee.naturalExponential=Ee.exp=function(){return T1(this)};Ee.naturalLogarithm=Ee.ln=function(){return To(this)};Ee.negated=Ee.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ge(t)};Ee.plus=Ee.add=function(t){var e,n,r,i,a,o,c,u,d,h,g=this,m=g.constructor;if(t=new m(t),!g.d||!t.d)return!g.s||!t.s?t=new m(NaN):g.d||(t=new m(t.d||g.s===t.s?g:NaN)),t;if(g.s!=t.s)return t.s=-t.s,g.minus(t);if(d=g.d,h=t.d,c=m.precision,u=m.rounding,!d[0]||!h[0])return h[0]||(t=new m(g)),tt?Ge(t,c,u):t;if(a=hr(g.e/We),r=hr(t.e/We),d=d.slice(),i=a-r,i){for(i<0?(n=d,i=-i,o=h.length):(n=h,r=a,o=d.length),a=Math.ceil(c/We),o=a>o?a+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=d.length,i=h.length,o-i<0&&(i=o,n=h,h=d,d=n),e=0;i;)e=(d[--i]=d[i]+h[i]+e)/Yi|0,d[i]%=Yi;for(e&&(d.unshift(e),++r),o=d.length;d[--o]==0;)d.pop();return t.d=d,t.e=H0(d,r),tt?Ge(t,c,u):t};Ee.precision=Ee.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ho+t);return n.d?(e=EP(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Ee.round=function(){var t=this,e=t.constructor;return Ge(new e(t),t.e+1,e.rounding)};Ee.sine=Ee.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+We,r.rounding=1,n=MQ(r,RP(r,n)),r.precision=t,r.rounding=e,Ge(fs>2?n.neg():n,t,e,!0)):new r(NaN)};Ee.squareRoot=Ee.sqrt=function(){var t,e,n,r,i,a,o=this,c=o.d,u=o.e,d=o.s,h=o.constructor;if(d!==1||!c||!c[0])return new h(!d||d<0&&(!c||c[0])?NaN:c?o:1/0);for(tt=!1,d=Math.sqrt(+o),d==0||d==1/0?(e=rr(c),(e.length+u)%2==0&&(e+="0"),d=Math.sqrt(e),u=hr((u+1)/2)-(u<0||u%2),d==1/0?e="5e"+u:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new h(e)):r=new h(d.toString()),n=(u=h.precision)+3;;)if(a=r,r=a.plus(Ht(o,a,n+2,1)).times(.5),rr(a.d).slice(0,n)===(e=rr(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ge(a,u+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ge(r,u+1,1),t=!r.times(r).eq(o));break}return tt=!0,Ge(r,u,h.rounding,t)};Ee.tangent=Ee.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=Ht(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Ge(fs==2||fs==4?n.neg():n,t,e,!0)):new r(NaN)};Ee.times=Ee.mul=function(t){var e,n,r,i,a,o,c,u,d,h=this,g=h.constructor,m=h.d,b=(t=new g(t)).d;if(t.s*=h.s,!m||!m[0]||!b||!b[0])return new g(!t.s||m&&!m[0]&&!b||b&&!b[0]&&!m?NaN:!m||!b?t.s/0:t.s*0);for(n=hr(h.e/We)+hr(t.e/We),u=m.length,d=b.length,u<d&&(a=m,m=b,b=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+b[r]*m[i-r-1]+e,a[i--]=c%Yi|0,e=c/Yi|0;a[i]=(a[i]+e)%Yi|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=H0(a,n),tt?Ge(t,g.precision,g.rounding):t};Ee.toBinary=function(t,e){return Zw(this,2,t,e)};Ee.toDecimalPlaces=Ee.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Lr(t,0,Qo),e===void 0?e=r.rounding:Lr(e,0,8),Ge(n,t+n.e+1,e))};Ee.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Va(r,!0):(Lr(t,0,Qo),e===void 0?e=i.rounding:Lr(e,0,8),r=Ge(new i(r),t+1,e),n=Va(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ee.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=Va(i):(Lr(t,0,Qo),e===void 0?e=a.rounding:Lr(e,0,8),r=Ge(new a(i),t+i.e+1,e),n=Va(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ee.toFraction=function(t){var e,n,r,i,a,o,c,u,d,h,g,m,b=this,_=b.d,w=b.constructor;if(!_)return new w(b);if(d=n=new w(1),r=u=new w(0),e=new w(r),a=e.e=EP(_)-b.e-1,o=a%We,e.d[0]=Bn(10,o<0?We+o:o),t==null)t=a>0?e:d;else{if(c=new w(t),!c.isInt()||c.lt(d))throw Error(Ho+c);t=c.gt(e)?a>0?e:d:c}for(tt=!1,c=new w(rr(_)),h=w.precision,w.precision=a=_.length*We*2;g=Ht(c,e,0,1,1),i=n.plus(g.times(r)),i.cmp(t)!=1;)n=r,r=i,i=d,d=u.plus(g.times(i)),u=i,i=e,e=c.minus(g.times(i)),c=i;return i=Ht(t.minus(n),r,0,1,1),u=u.plus(i.times(d)),n=n.plus(i.times(r)),u.s=d.s=b.s,m=Ht(d,r,a,1).minus(b).abs().cmp(Ht(u,n,a,1).minus(b).abs())<1?[d,r]:[u,n],w.precision=h,tt=!0,m};Ee.toHexadecimal=Ee.toHex=function(t,e){return Zw(this,16,t,e)};Ee.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Lr(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(tt=!1,n=Ht(n,t,0,e,1).times(t),tt=!0,Ge(n)):(t.s=n.s,n=t),n};Ee.toNumber=function(){return+this};Ee.toOctal=function(t,e){return Zw(this,8,t,e)};Ee.toPower=Ee.pow=function(t){var e,n,r,i,a,o,c=this,u=c.constructor,d=+(t=new u(t));if(!c.d||!t.d||!c.d[0]||!t.d[0])return new u(Bn(+c,d));if(c=new u(c),c.eq(1))return c;if(r=u.precision,a=u.rounding,t.eq(1))return Ge(c,r,a);if(e=hr(t.e/We),e>=t.d.length-1&&(n=d<0?-d:d)<=kQ)return i=TP(u,c,n,r),t.s<0?new u(1).div(i):Ge(i,r,a);if(o=c.s,o<0){if(e<t.d.length-1)return new u(NaN);if((t.d[e]&1)==0&&(o=1),c.e==0&&c.d[0]==1&&c.d.length==1)return c.s=o,c}return n=Bn(+c,d),e=n==0||!isFinite(n)?hr(d*(Math.log("0."+rr(c.d))/Math.LN10+c.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(tt=!1,u.rounding=c.s=1,n=Math.min(12,(e+"").length),i=T1(t.times(To(c,r+n)),r),i.d&&(i=Ge(i,r+5,1),oh(i.d,r,a)&&(e=r+10,i=Ge(T1(t.times(To(c,e+n)),e),e+5,1),+rr(i.d).slice(r+1,r+15)+1==1e14&&(i=Ge(i,r+1,0)))),i.s=o,tt=!0,u.rounding=a,Ge(i,r,a))};Ee.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Va(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Lr(t,1,Qo),e===void 0?e=i.rounding:Lr(e,0,8),r=Ge(new i(r),t,e),n=Va(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};Ee.toSignificantDigits=Ee.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Lr(t,1,Qo),e===void 0?e=r.rounding:Lr(e,0,8)),Ge(new r(n),t,e)};Ee.toString=function(){var t=this,e=t.constructor,n=Va(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Ee.truncated=Ee.trunc=function(){return Ge(new this.constructor(this),this.e+1,1)};Ee.valueOf=Ee.toJSON=function(){var t=this,e=t.constructor,n=Va(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function rr(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=We-r.length,n&&(a+=go(n)),a+=r;o=t[e],r=o+"",n=We-r.length,n&&(a+=go(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Lr(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ho+t)}function oh(t,e,n,r){var i,a,o,c;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=We,i=0):(i=Math.ceil((e+1)/We),e%=We),a=Bn(10,We-e),c=t[i]%a|0,r==null?e<3?(e==0?c=c/100|0:e==1&&(c=c/10|0),o=n<4&&c==99999||n>3&&c==49999||c==5e4||c==0):o=(n<4&&c+1==a||n>3&&c+1==a/2)&&(t[i+1]/a/100|0)==Bn(10,e-2)-1||(c==a/2||c==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?c=c/1e3|0:e==1?c=c/100|0:e==2&&(c=c/10|0),o=(r||n<4)&&c==9999||!r&&n>3&&c==4999):o=((r||n<4)&&c+1==a||!r&&n>3&&c+1==a/2)&&(t[i+1]/a/1e3|0)==Bn(10,e-3)-1,o}function im(t,e,n){for(var r,i=[0],a,o=0,c=t.length;o<c;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=w1.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function NQ(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/q0(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=ju(t,1,e.times(i),new t(1));for(var a=n;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var Ht=(function(){function t(r,i,a){var o,c=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+c,r[u]=o%a|0,c=o/a|0;return c&&r.unshift(c),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a,o){for(var c=0;a--;)r[a]-=c,c=r[a]<i[a]?1:0,r[a]=c*o+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o,c,u){var d,h,g,m,b,_,w,E,T,C,N,L,j,M,A,R,D,V,P,B,O=r.constructor,W=r.s==i.s?1:-1,X=r.d,H=i.d;if(!X||!X[0]||!H||!H[0])return new O(!r.s||!i.s||(X?H&&X[0]==H[0]:!H)?NaN:X&&X[0]==0||!H?W*0:W/0);for(u?(b=1,h=r.e-i.e):(u=Yi,b=We,h=hr(r.e/b)-hr(i.e/b)),P=H.length,D=X.length,T=new O(W),C=T.d=[],g=0;H[g]==(X[g]||0);g++);if(H[g]>(X[g]||0)&&h--,a==null?(M=a=O.precision,o=O.rounding):c?M=a+(r.e-i.e)+1:M=a,M<0)C.push(1),_=!0;else{if(M=M/b+2|0,g=0,P==1){for(m=0,H=H[0],M++;(g<D||m)&&M--;g++)A=m*u+(X[g]||0),C[g]=A/H|0,m=A%H|0;_=m||g<D}else{for(m=u/(H[0]+1)|0,m>1&&(H=t(H,m,u),X=t(X,m,u),P=H.length,D=X.length),R=P,N=X.slice(0,P),L=N.length;L<P;)N[L++]=0;B=H.slice(),B.unshift(0),V=H[0],H[1]>=u/2&&++V;do m=0,d=e(H,N,P,L),d<0?(j=N[0],P!=L&&(j=j*u+(N[1]||0)),m=j/V|0,m>1?(m>=u&&(m=u-1),w=t(H,m,u),E=w.length,L=N.length,d=e(w,N,E,L),d==1&&(m--,n(w,P<E?B:H,E,u))):(m==0&&(d=m=1),w=H.slice()),E=w.length,E<L&&w.unshift(0),n(N,w,L,u),d==-1&&(L=N.length,d=e(H,N,P,L),d<1&&(m++,n(N,P<L?B:H,L,u))),L=N.length):d===0&&(m++,N=[0]),C[g++]=m,d&&N[0]?N[L++]=X[R]||0:(N=[X[R]],L=1);while((R++<D||N[0]!==void 0)&&M--);_=N[0]!==void 0}C[0]||C.shift()}if(b==1)T.e=h,bP=_;else{for(g=1,m=C[0];m>=10;m/=10)g++;T.e=g+h*b-1,Ge(T,c?a+T.e+1:a,o,_)}return T}})();function Ge(t,e,n,r){var i,a,o,c,u,d,h,g,m,b=t.constructor;e:if(e!=null){if(g=t.d,!g)return t;for(i=1,c=g[0];c>=10;c/=10)i++;if(a=e-i,a<0)a+=We,o=e,h=g[m=0],u=h/Bn(10,i-o-1)%10|0;else if(m=Math.ceil((a+1)/We),c=g.length,m>=c)if(r){for(;c++<=m;)g.push(0);h=u=0,i=1,a%=We,o=a-We+1}else break e;else{for(h=c=g[m],i=1;c>=10;c/=10)i++;a%=We,o=a-We+i,u=o<0?0:h/Bn(10,i-o-1)%10|0}if(r=r||e<0||g[m+1]!==void 0||(o<0?h:h%Bn(10,i-o-1)),d=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?o>0?h/Bn(10,i-o):0:g[m-1])%10&1||n==(t.s<0?8:7)),e<1||!g[0])return g.length=0,d?(e-=t.e+1,g[0]=Bn(10,(We-e%We)%We),t.e=-e||0):g[0]=t.e=0,t;if(a==0?(g.length=m,c=1,m--):(g.length=m+1,c=Bn(10,We-a),g[m]=o>0?(h/Bn(10,i-o)%Bn(10,o)|0)*c:0),d)for(;;)if(m==0){for(a=1,o=g[0];o>=10;o/=10)a++;for(o=g[0]+=c,c=1;o>=10;o/=10)c++;a!=c&&(t.e++,g[0]==Yi&&(g[0]=1));break}else{if(g[m]+=c,g[m]!=Yi)break;g[m--]=0,c=1}for(a=g.length;g[--a]===0;)g.pop()}return tt&&(t.e>b.maxE?(t.d=null,t.e=NaN):t.e<b.minE&&(t.e=0,t.d=[0])),t}function Va(t,e,n){if(!t.isFinite())return CP(t);var r,i=t.e,a=rr(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+go(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+go(-i-1)+a,n&&(r=n-o)>0&&(a+=go(r))):i>=o?(a+=go(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+go(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=go(r))),a}function H0(t,e){var n=t[0];for(e*=We;n>=10;n/=10)e++;return e}function Qm(t,e,n){if(e>DQ)throw tt=!0,n&&(t.precision=n),Error(xP);return Ge(new t(Wm),e,1,!0)}function Ea(t,e,n){if(e>E1)throw Error(xP);return Ge(new t(Km),e,n,!0)}function EP(t){var e=t.length-1,n=e*We+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function go(t){for(var e="";t--;)e+="0";return e}function TP(t,e,n,r){var i,a=new t(1),o=Math.ceil(r/We+4);for(tt=!1;;){if(n%2&&(a=a.times(e),Pk(a.d,o)&&(i=!0)),n=hr(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),Pk(e.d,o)}return tt=!0,a}function Ok(t){return t.d[t.d.length-1]&1}function AP(t,e,n){for(var r,i,a=new t(e[0]),o=0;++o<e.length;){if(i=new t(e[o]),!i.s){a=i;break}r=a.cmp(i),(r===n||r===0&&a.s===n)&&(a=i)}return a}function T1(t,e){var n,r,i,a,o,c,u,d=0,h=0,g=0,m=t.constructor,b=m.rounding,_=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(tt=!1,u=_):u=e,c=new m(.03125);t.e>-2;)t=t.times(c),g+=5;for(r=Math.log(Bn(2,g))/Math.LN10*2+5|0,u+=r,n=a=o=new m(1),m.precision=u;;){if(a=Ge(a.times(t),u,1),n=n.times(++h),c=o.plus(Ht(a,n,u,1)),rr(c.d).slice(0,u)===rr(o.d).slice(0,u)){for(i=g;i--;)o=Ge(o.times(o),u,1);if(e==null)if(d<3&&oh(o.d,u-r,b,d))m.precision=u+=10,n=a=c=new m(1),h=0,d++;else return Ge(o,m.precision=_,b,tt=!0);else return m.precision=_,o}o=c}}function To(t,e){var n,r,i,a,o,c,u,d,h,g,m,b=1,_=10,w=t,E=w.d,T=w.constructor,C=T.rounding,N=T.precision;if(w.s<0||!E||!E[0]||!w.e&&E[0]==1&&E.length==1)return new T(E&&!E[0]?-1/0:w.s!=1?NaN:E?0:w);if(e==null?(tt=!1,h=N):h=e,T.precision=h+=_,n=rr(E),r=n.charAt(0),Math.abs(a=w.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)w=w.times(t),n=rr(w.d),r=n.charAt(0),b++;a=w.e,r>1?(w=new T("0."+n),a++):w=new T(r+"."+n.slice(1))}else return d=Qm(T,h+2,N).times(a+""),w=To(new T(r+"."+n.slice(1)),h-_).plus(d),T.precision=N,e==null?Ge(w,N,C,tt=!0):w;for(g=w,u=o=w=Ht(w.minus(1),w.plus(1),h,1),m=Ge(w.times(w),h,1),i=3;;){if(o=Ge(o.times(m),h,1),d=u.plus(Ht(o,new T(i),h,1)),rr(d.d).slice(0,h)===rr(u.d).slice(0,h))if(u=u.times(2),a!==0&&(u=u.plus(Qm(T,h+2,N).times(a+""))),u=Ht(u,new T(b),h,1),e==null)if(oh(u.d,h-_,C,c))T.precision=h+=_,d=o=w=Ht(g.minus(1),g.plus(1),h,1),m=Ge(w.times(w),h,1),i=c=1;else return Ge(u,T.precision=N,C,tt=!0);else return T.precision=N,u;u=d,i+=2}}function CP(t){return String(t.s*t.s/0)}function am(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%We,n<0&&(r+=We),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=We;r<i;)t.d.push(+e.slice(r,r+=We));e=e.slice(r),r=We-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),tt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function IQ(t,e){var n,r,i,a,o,c,u,d,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),SP.test(e))return am(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(CQ.test(e))n=16,e=e.toLowerCase();else if(AQ.test(e))n=2;else if(RQ.test(e))n=8;else throw Error(Ho+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,r=t.constructor,o&&(e=e.replace(".",""),c=e.length,a=c-a,i=TP(r,new r(n),a,a*2)),d=im(e,n,Yi),h=d.length-1,a=h;d[a]===0;--a)d.pop();return a<0?new r(t.s*0):(t.e=H0(d,h),t.d=d,tt=!1,o&&(t=Ht(t,i,c*4)),u&&(t=t.times(Math.abs(u)<54?Bn(2,u):Vu.pow(2,u))),tt=!0,t)}function MQ(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:ju(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/q0(5,n)),e=ju(t,2,e,e);for(var i,a=new t(5),o=new t(16),c=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(c))));return e}function ju(t,e,n,r,i){var a,o,c,u,d=t.precision,h=Math.ceil(d/We);for(tt=!1,u=n.times(n),c=new t(r);;){if(o=Ht(c.times(u),new t(e++*e++),d,1),c=i?r.plus(o):r.minus(o),r=Ht(o.times(u),new t(e++*e++),d,1),o=c.plus(r),o.d[h]!==void 0){for(a=h;o.d[a]===c.d[a]&&a--;);if(a==-1)break}a=c,c=r,r=o,o=a}return tt=!0,o.d.length=h+1,o}function q0(t,e){for(var n=t;--e;)n*=t;return n}function RP(t,e){var n,r=e.s<0,i=Ea(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return fs=r?4:1,e;if(n=e.divToInt(i),n.isZero())fs=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return fs=Ok(n)?r?2:3:r?4:1,e;fs=Ok(n)?r?1:4:r?3:2}return e.minus(i).abs()}function Zw(t,e,n,r){var i,a,o,c,u,d,h,g,m,b=t.constructor,_=n!==void 0;if(_?(Lr(n,1,Qo),r===void 0?r=b.rounding:Lr(r,0,8)):(n=b.precision,r=b.rounding),!t.isFinite())h=CP(t);else{for(h=Va(t),o=h.indexOf("."),_?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(h=h.replace(".",""),m=new b(1),m.e=h.length-o,m.d=im(Va(m),10,i),m.e=m.d.length),g=im(h,10,i),a=u=g.length;g[--u]==0;)g.pop();if(!g[0])h=_?"0p+0":"0";else{if(o<0?a--:(t=new b(t),t.d=g,t.e=a,t=Ht(t,m,n,r,0,i),g=t.d,a=t.e,d=bP),o=g[n],c=i/2,d=d||g[n+1]!==void 0,d=r<4?(o!==void 0||d)&&(r===0||r===(t.s<0?3:2)):o>c||o===c&&(r===4||d||r===6&&g[n-1]&1||r===(t.s<0?8:7)),g.length=n,d)for(;++g[--n]>i-1;)g[n]=0,n||(++a,g.unshift(1));for(u=g.length;!g[u-1];--u);for(o=0,h="";o<u;o++)h+=w1.charAt(g[o]);if(_){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(g=im(h,i,e),u=g.length;!g[u-1];--u);for(o=1,h="1.";o<u;o++)h+=w1.charAt(g[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)h="0"+h;h="0."+h}else if(++a>u)for(a-=u;a--;)h+="0";else a<u&&(h=h.slice(0,a)+"."+h.slice(a))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return t.s<0?"-"+h:h}function Pk(t,e){if(t.length>e)return t.length=e,!0}function OQ(t){return new this(t).abs()}function PQ(t){return new this(t).acos()}function jQ(t){return new this(t).acosh()}function VQ(t,e){return new this(t).plus(e)}function zQ(t){return new this(t).asin()}function LQ(t){return new this(t).asinh()}function BQ(t){return new this(t).atan()}function UQ(t){return new this(t).atanh()}function FQ(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Ea(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Ea(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Ea(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(Ht(t,e,a,1)),e=Ea(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(Ht(t,e,a,1)),n}function GQ(t){return new this(t).cbrt()}function $Q(t){return Ge(t=new this(t),t.e+1,2)}function HQ(t,e,n){return new this(t).clamp(e,n)}function qQ(t){if(!t||typeof t!="object")throw Error($0+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,Qo,"rounding",0,8,"toExpNeg",-uu,0,"toExpPos",0,uu,"maxE",0,uu,"minE",-uu,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=S1[n]),(r=t[n])!==void 0)if(hr(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(Ho+n+": "+r);if(n="crypto",i&&(this[n]=S1[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(_P);else this[n]=!1;else throw Error(Ho+n+": "+r);return this}function YQ(t){return new this(t).cos()}function XQ(t){return new this(t).cosh()}function kP(t){var e,n,r;function i(a){var o,c,u,d=this;if(!(d instanceof i))return new i(a);if(d.constructor=i,jk(a)){d.s=a.s,tt?!a.d||a.e>i.maxE?(d.e=NaN,d.d=null):a.e<i.minE?(d.e=0,d.d=[0]):(d.e=a.e,d.d=a.d.slice()):(d.e=a.e,d.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){d.s=1/a<0?-1:1,d.e=0,d.d=[0];return}if(a<0?(a=-a,d.s=-1):d.s=1,a===~~a&&a<1e7){for(o=0,c=a;c>=10;c/=10)o++;tt?o>i.maxE?(d.e=NaN,d.d=null):o<i.minE?(d.e=0,d.d=[0]):(d.e=o,d.d=[a]):(d.e=o,d.d=[a]);return}if(a*0!==0){a||(d.s=NaN),d.e=NaN,d.d=null;return}return am(d,a.toString())}if(u==="string")return(c=a.charCodeAt(0))===45?(a=a.slice(1),d.s=-1):(c===43&&(a=a.slice(1)),d.s=1),SP.test(a)?am(d,a):IQ(d,a);if(u==="bigint")return a<0?(a=-a,d.s=-1):d.s=1,am(d,a.toString());throw Error(Ho+a)}if(i.prototype=Ee,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=qQ,i.clone=kP,i.isDecimal=jk,i.abs=OQ,i.acos=PQ,i.acosh=jQ,i.add=VQ,i.asin=zQ,i.asinh=LQ,i.atan=BQ,i.atanh=UQ,i.atan2=FQ,i.cbrt=GQ,i.ceil=$Q,i.clamp=HQ,i.cos=YQ,i.cosh=XQ,i.div=WQ,i.exp=KQ,i.floor=QQ,i.hypot=ZQ,i.ln=JQ,i.log=eZ,i.log10=nZ,i.log2=tZ,i.max=rZ,i.min=iZ,i.mod=aZ,i.mul=sZ,i.pow=oZ,i.random=lZ,i.round=cZ,i.sign=uZ,i.sin=dZ,i.sinh=fZ,i.sqrt=hZ,i.sub=pZ,i.sum=gZ,i.tan=mZ,i.tanh=vZ,i.trunc=yZ,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function WQ(t,e){return new this(t).div(e)}function KQ(t){return new this(t).exp()}function QQ(t){return Ge(t=new this(t),t.e+1,3)}function ZQ(){var t,e,n=new this(0);for(tt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return tt=!0,new this(1/0);n=e}return tt=!0,n.sqrt()}function jk(t){return t instanceof Vu||t&&t.toStringTag===wP||!1}function JQ(t){return new this(t).ln()}function eZ(t,e){return new this(t).log(e)}function tZ(t){return new this(t).log(2)}function nZ(t){return new this(t).log(10)}function rZ(){return AP(this,arguments,-1)}function iZ(){return AP(this,arguments,1)}function aZ(t,e){return new this(t).mod(e)}function sZ(t,e){return new this(t).mul(e)}function oZ(t,e){return new this(t).pow(e)}function lZ(t){var e,n,r,i,a=0,o=new this(1),c=[];if(t===void 0?t=this.precision:Lr(t,1,Qo),r=Math.ceil(t/We),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:c[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(c.push(i%1e7),a+=4);a=r/4}else throw Error(_P);else for(;a<r;)c[a++]=Math.random()*1e7|0;for(r=c[--a],t%=We,r&&t&&(i=Bn(10,We-t),c[a]=(r/i|0)*i);c[a]===0;a--)c.pop();if(a<0)n=0,c=[0];else{for(n=-1;c[0]===0;n-=We)c.shift();for(r=1,i=c[0];i>=10;i/=10)r++;r<We&&(n-=We-r)}return o.e=n,o.d=c,o}function cZ(t){return Ge(t=new this(t),t.e+1,this.rounding)}function uZ(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function dZ(t){return new this(t).sin()}function fZ(t){return new this(t).sinh()}function hZ(t){return new this(t).sqrt()}function pZ(t,e){return new this(t).sub(e)}function gZ(){var t=0,e=arguments,n=new this(e[t]);for(tt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return tt=!0,Ge(n,this.precision,this.rounding)}function mZ(t){return new this(t).tan()}function vZ(t){return new this(t).tanh()}function yZ(t){return Ge(t=new this(t),t.e+1,1)}Ee[Symbol.for("nodejs.util.inspect.custom")]=Ee.toString;Ee[Symbol.toStringTag]="Decimal";var Vu=Ee.constructor=kP(S1);Wm=new Vu(Wm);Km=new Vu(Km);const Vk=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t=="object"&&typeof t.toDate=="function")return t.toDate();if(typeof t=="object"&&t.seconds!==void 0)return new Date(t.seconds*1e3);if(typeof t=="string"){const e=new Date(t);return isNaN(e.getTime())?null:e}if(typeof t=="number"){const e=new Date(t);return isNaN(e.getTime())?null:e}return null},bZ=()=>{const{envelopes:t,transactions:e,fetchData:n,isLoading:r,isOnline:i,reorderEnvelopes:a}=Jt(),{currentUser:o}=$i(),{currentMonth:c,incomeSources:u,allocations:d,deleteIncomeSource:h,setEnvelopeAllocation:g,copyPreviousMonthAllocations:m,isLoading:b}=Jt(),{showToast:_}=rc(),[w,E]=U.useState(!1),T=U.useRef(null),[C,N]=U.useState(!1),L=!C||r||b,[j,M]=U.useState([]),A=U.useRef([]),[R,D]=U.useState([]),V=U.useRef([]),P=U.useCallback(ne=>{if(t.find(ce=>ce.id===ne)?.isPiggybank){const ce=Jt.getState().getEnvelopeBalance(ne);return new Vu(ce)}const oe=Jt.getState().getEnvelopeBalance(ne,c);return new Vu(oe)},[t,c]);U.useEffect(()=>{const ne=t.filter(Z=>{if(!Z.isPiggybank||!Z.isActive)return!1;if(Z.createdAt)try{const oe=Vk(Z.createdAt);if(!oe)return console.error(` Invalid creation date for piggybank ${Z.name}:`,Z.createdAt),!1;const ce=`${oe.getFullYear()}-${String(oe.getMonth()+1).padStart(2,"0")}`;return c>=ce}catch(oe){return console.error(` Error processing piggybank ${Z.name}:`,oe,{createdAt:Z.createdAt,typeofCreatedAt:typeof Z.createdAt}),!1}return!0}).sort((Z,oe)=>{const ce=Z.orderIndex??0,me=oe.orderIndex??0;return ce-me});D(ne),V.current=ne},[t,c]);const B=R,O=j;U.useEffect(()=>(T.current=setTimeout(()=>{E(!0)},8e3),n(),N(!0),()=>{T.current&&clearTimeout(T.current)}),[]),U.useEffect(()=>{C&&!r&&!b&&(E(!1),T.current&&clearTimeout(T.current))},[C,r,b]),U.useEffect(()=>{const ne=t.filter(Z=>{if(Z.isPiggybank||Z.isActive===!1)return!1;const ce=(d[c]||[]).some(ge=>ge.envelopeId===Z.id),me=e.some(ge=>ge.envelopeId===Z.id&&(ge.month===c||ge.date.startsWith(c)));return ce||me}).sort((Z,oe)=>{const ce=Z.orderIndex??0,me=oe.orderIndex??0;return ce-me});M(ne),A.current=ne},[t,d,c,e]);const W=(u[c]||[]).reduce((ne,Z)=>ne+Z.amount,0),X=(d[c]||[]).filter(ne=>O.some(Z=>Z.id===ne.envelopeId)||B.some(Z=>Z.id===ne.envelopeId)).reduce((ne,Z)=>ne+Z.budgetedAmount,0),H=W-X,K=U.useCallback(async ne=>{if(!ne.length)return;const Z=ne.map(oe=>oe.id);try{await a(Z)}catch(oe){console.error("Failed to persist envelope order:",oe),_("Failed to save envelope order","error")}},[a,_]),ee=U.useCallback(async ne=>{await K(ne)},[K]),ie=U.useCallback(ne=>{h(c,ne.id).catch(console.error),_(`Deleted "${ne.name}"`,"neutral")},[h,c,_]),q=U.useCallback(async ne=>{try{const Z=ne||c;console.log(" Copying to month:",Z),await m(Z),_("Previous month budget copied","success")}catch(Z){console.error("Error copying previous month:",Z),_("Failed to copy previous month","error")}},[m,_,c]),F=U.useCallback(async()=>{if(!o||!c){_("Cannot clear data: not logged in or no month selected","error");return}try{await Jt.getState().clearMonthData(c),_(`"${c}" budget and transactions cleared successfully`,"success")}catch(ne){console.error("Error clearing month data:",ne),_("Failed to clear month data","error")}},[o,c,_]),Y=U.useCallback(async(ne,Z)=>{try{await g(ne,Z),setTimeout(()=>{const oe=Jt.getState(),ce=oe.currentMonth,me=oe.incomeSources[ce]||[],ge=oe.allocations[ce]||[],Te=new Set(oe.envelopes.filter(De=>{if(De.isPiggybank){if(!De.isActive)return!1;if(De.createdAt){const Me=Vk(De.createdAt);if(!Me)return!1;const Be=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,"0")}`;return ce>=Be}return!0}return De.isActive!==!1}).map(De=>De.id)),Ne=ge.filter(De=>Te.has(De.envelopeId)),ae=me.reduce((De,Me)=>De+Me.amount,0),Ae=Ne.reduce((De,Me)=>De+Me.budgetedAmount,0);ae-Ae<-.005?_(`You can't spend more than you make.
You're not in Congress!`,"error"):Math.abs(ae-Ae)<.005&&ae>0&&_("Every dollar has a job ","success")},100)}catch(oe){console.error("Failed to set allocation:",oe),_("Failed to update budget","error")}},[g,_]);return{visibleEnvelopes:O,piggybanks:B,incomeSources:u,availableToBudget:H,currentMonth:c,allocations:d,transactions:e,isLoading:r,isInitialLoading:L,isOnline:i,showTimeoutMessage:w,getEnvelopeBalance:P,fetchData:n,reorderEnvelopes:ee,deleteIncomeSource:ie,clearMonthData:F,copyFromPreviousMonth:q,setEnvelopeAllocation:Y,localOrderRef:A,setLocalEnvelopes:M,localPiggybankOrderRef:V,setLocalPiggybanks:D}},xZ=({currentMonth:t,onMonthChange:e,budgetStatus:n})=>{const[r,i]=t.split("-").map(Number),o=["January","February","March","April","May","June","July","August","September","October","November","December"][i-1],c=()=>{let g=r,m=i-1;m<1&&(g=r-1,m=12);const b=`${g}-${m.toString().padStart(2,"0")}`;e(b)},u=()=>{let g=r,m=i+1;m>12&&(g=r+1,m=1);const b=`${g}-${m.toString().padStart(2,"0")}`;e(b)},d=()=>{const g=new Date,m=`${g.getFullYear()}-${(g.getMonth()+1).toString().padStart(2,"0")}`;e(m)},h=()=>{if(!n)return null;const{amount:g,totalIncome:m,totalAllocated:b}=n,_=typeof g=="number"?g:0,w=typeof m=="number"?m:0,E=typeof b=="number"?b:0,T=Math.abs(_)<.005,C=_<-.005,N=w>0?E/w*100:0;let L="text-gray-900 dark:text-white",j="bg-green-500",M="Left to Budget",A=w>0?Math.min(N,100):0,R=!0;return w===0?(M="Add income to start budgeting",A=0,R=!1,L="text-gray-500 dark:text-zinc-500"):T?(L="text-green-600 dark:text-emerald-400",j="bg-green-500",M="Perfect! Every dollar has a job ",A=100,R=!1):C&&(L="text-red-600 dark:text-red-400",j="bg-red-500",M="You're not in Congress! Try again.",A=100),v.jsxs("div",{className:"flex flex-col justify-center min-w-0 w-full",children:[v.jsxs("div",{className:"flex items-baseline justify-start mb-1",children:[v.jsx("span",{className:`text-xs font-medium truncate mr-1.5 ${L}`,children:M}),R&&v.jsxs("span",{className:`text-sm font-bold truncate ${L}`,children:[C?"-":"","$",Math.abs(_).toFixed(2)]})]}),v.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:v.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${j}`,style:{width:`${A}%`}})})]})};return v.jsxs("div",{className:"py-2 space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-center gap-4",children:[v.jsx("button",{onClick:c,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Previous month",children:v.jsx(R9,{size:20})}),v.jsx("div",{className:"text-center",children:v.jsxs("button",{onClick:d,className:"text-base font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors whitespace-nowrap",title:"Click to go to current month",children:[o," ",r]})}),v.jsx("button",{onClick:u,className:"p-1.5 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Next month",children:v.jsx(xa,{size:20})})]}),n&&v.jsx("div",{className:"px-1",children:h()})]})},Y0=({children:t,onDelete:e,threshold:n=-100,disabled:r=!1})=>{const i=qq(),[a,o]=U.useState(!1),c=U.useRef(0),u=()=>{r||(o(!0),c.current=Date.now())},d=async(h,g)=>{if(r)return;const m=g.offset.x,b=g.velocity.x;if(setTimeout(()=>o(!1),100),m<n||m<-50&&b<-500){const _=e();_===!1?i.start({x:0}):_ instanceof Promise&&_.then(w=>{w===!1&&i.start({x:0})})}else i.start({x:0})};return v.jsxs("div",{className:"relative w-full overflow-hidden mb-2 rounded-xl group",children:[v.jsx("div",{className:"absolute inset-0 bg-red-500 flex items-center justify-end pr-6 rounded-xl",children:v.jsx(mm,{className:"text-white w-6 h-6"})}),v.jsx(pn.div,{drag:r?!1:"x",dragConstraints:{left:-500,right:0},dragElastic:.1,onDragStart:u,onDragEnd:d,animate:i,className:`relative bg-white dark:bg-zinc-900 rounded-xl ${a?"z-20":"z-10"}`,style:{touchAction:"pan-y",pointerEvents:a?"none":"auto"},children:t})]})},_Z=({isVisible:t,onClose:e,mode:n,initialIncomeSource:r})=>{const{addIncomeSource:i,updateIncomeSource:a,currentMonth:o}=Jt(),{showToast:c}=rc(),[u,d]=U.useState(""),[h,g]=U.useState(""),[m,b]=U.useState(!1);U.useEffect(()=>{if(!t)return;const w=window.setTimeout(()=>{n==="edit"&&r?(d(r.name),g(r.amount.toString())):(d(""),g(""))},0);return()=>window.clearTimeout(w)},[t,n,r]);const _=async w=>{if(w.preventDefault(),!u.trim()||!h||parseFloat(h)<=0){c("Please fill in all required fields with valid values","error");return}b(!0);try{if(n==="add")await i(o,{name:u.trim(),amount:parseFloat(h),month:o,userId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),c("Income source added successfully","success");else{if(!r){c("Error: No income source to edit","error");return}await a(o,{...r,name:u.trim(),amount:parseFloat(h),updatedAt:new Date().toISOString()}),c(`Updated "${u.trim()}" income source`,"success")}e()}catch(E){console.error("Error saving income source:",E),c("Failed to save income source. Please try again.","error")}finally{b(!1)}};return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black bg-opacity-50"}),v.jsxs(pn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n==="add"?"Add Income Source":"Edit Income Source"}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",children:""})]}),v.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Income Source Name *"}),v.jsx("input",{type:"text",value:u,onChange:w=>d(w.target.value),placeholder:"e.g., Primary Job, Freelance, Investments",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300 mb-1",children:"Amount *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",value:h,onChange:w=>{const E=w.target.value.replace(/\D/g,"");if(!E){g("");return}const C=(parseInt(E,10)/100).toFixed(2);g(C)},placeholder:"0.00",className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-zinc-800 dark:text-white",required:!0})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:m||!u.trim()||!h||parseFloat(h)<=0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":n==="add"?"Add Income":"Save Changes"})]})]})]})]})})},wZ=({currentMonth:t,onCopy:e,isLoading:n=!1})=>{const r=c=>{const[u,d]=c.split("-");return new Date(parseInt(u),parseInt(d)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},i=c=>{const[u,d]=c.split("-").map(Number);let h=u,g=d-1;return g<1&&(h=u-1,g=12),r(`${h}-${g.toString().padStart(2,"0")}`)},a=r(t),o=i(t);return v.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-6 py-12 space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-0 bg-blue-100 dark:bg-blue-900/30 blur-2xl rounded-full opacity-50"}),v.jsxs("div",{className:"relative bg-white dark:bg-zinc-800 p-4 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:[v.jsx(x9,{className:"w-12 h-12 text-blue-500"}),v.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white p-1.5 rounded-full border-2 border-white dark:border-zinc-900",children:v.jsx(Uf,{size:14})})]})]}),v.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[v.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["It looks like you need a budget for ",a]}),v.jsxs("p",{className:"text-gray-500 dark:text-zinc-400",children:["We can copy your budget from ",o," to get you started right away."]})]}),v.jsx("div",{className:"w-full max-w-xs space-y-3 pt-2",children:v.jsx("button",{onClick:e,disabled:n,className:"w-full py-3.5 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-sm transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?"Creating...":v.jsx(v.Fragment,{children:v.jsxs("span",{children:["Create ",a," Budget"]})})})})]})},SZ="/personal-budget-pwa/icon-512.png",Xb="/personal-budget-pwa/images/budget-balanced.png",zk=["Giving","Savings","Housing","Transportation","Food","Personal","Health","Insurance","Debt"],EZ=({currentMonth:t,onComplete:e})=>{const[n,r]=U.useState(0),[i,a]=U.useState(0),[o,c]=U.useState(2500),[u,d]=U.useState(zk),{addCategory:h}=Jt(),g=M=>{d(A=>A.includes(M)?A.filter(R=>R!==M):[...A,M])},m=async()=>{for(let M=0;M<u.length;M++)await h({name:u[M],orderIndex:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});e()};U.useEffect(()=>{if(console.log("Animation effect triggered:",{currentStep:n,animationKey:i}),n===5){console.log("Starting animation from $2500 to $0"),c(2500);const M=2e3,A=20,R=M/A,D=2500/A;let V=0;const P=setInterval(()=>{V++;const B=Math.max(0,2500-D*V);console.log("Phase 1 - Animation step:",V,"New amount:",B),c(B),V>=A&&(clearInterval(P),console.log("Phase 1 completed - Perfect budget reached"),setTimeout(()=>{console.log("Starting Phase 2 - Over budget demonstration");let O=0;const W=10,X=200,H=500/W,K=setInterval(()=>{O++;const ee=-(H*O);console.log("Phase 2 - Over budget step:",O,"Over budget amount:",ee),c(ee),O>=W&&(clearInterval(K),console.log("Animation completed - Over budget scenario demonstrated"))},X)},1e3))},R);return()=>{console.log("Cleaning up animation timers"),clearInterval(P)}}},[i,n]);const _=(M=>{const[A,R]=M.split("-");return new Date(parseInt(A),parseInt(R)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})(t),w=[{icon:Uf,title:"Welcome to Dollars At Work!",description:`Let's set up your budget for ${_}`,content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Dollars At Work helps you take control of your money using the ",v.jsx("strong",{children:"zero-based budgeting"})," method."]}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Every dollar gets a job, and you'll know exactly where your money is going."}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:v.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium",children:" This quick guide will show you how to get started in just a few steps!"})})]}),color:"blue"},{icon:_B,title:"Step 1: Choose Categories",description:"Select categories to organize your spending",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Categories help group your envelopes. Select the ones you need:"}),v.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-1",children:zk.map(M=>v.jsxs("button",{onClick:()=>g(M),className:`p-3 rounded-xl border text-sm font-medium transition-all flex items-center gap-2 ${u.includes(M)?"bg-blue-50 border-blue-200 text-blue-700 dark:bg-blue-900/30 dark:border-blue-800 dark:text-blue-300":"bg-white border-gray-200 text-gray-600 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-400"}`,children:[v.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u.includes(M)?"border-blue-500 bg-blue-500":"border-gray-400"}`,children:u.includes(M)&&v.jsx(cs,{size:12,className:"text-white"})}),M]},M))}),u.length===0&&v.jsx("p",{className:"text-red-500 text-xs",children:"Please select at least one category."})]}),color:"blue"},{icon:m2,title:"Step 2: Add Your Income",description:"Tell us how much money you have to work with",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"First, you'll add your income sources for the month. This could be:"}),v.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(cs,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Salary"})," - Your regular paycheck"]})]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(cs,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Freelance"})," - Side gig income"]})]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(cs,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Other Income"})," - Any other money coming in"]})]})]}),v.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-green-900 dark:text-green-200",children:[v.jsx("strong",{children:'Look for the "Income Sources" section'})," at the top of your budget and tap the ",v.jsx(yh,{className:"w-4 h-4 inline"})," button to add income."]})})]}),color:"green"},{icon:i0,title:"Step 3: Create Spending Envelopes",description:"Organize your spending into categories",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Spending envelopes are where you track expenses. You'll assign each envelope to a category."}),v.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-zinc-400",children:[v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(cs,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Groceries"})," (Food)"]})]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(cs,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Rent/Mortgage"})," (Housing)"]})]}),v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx(cs,{className:"w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Gas"})," (Transportation)"]})]})]}),v.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-purple-900 dark:text-purple-200",children:[v.jsx("strong",{children:'Tap "+" on a category section'})," to add an envelope to it."]})})]}),color:"purple"},{icon:Lf,title:"Step 4: Organize Your Budget",description:"Reorder categories and envelopes to match your preferences",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Your budget should work the way ",v.jsx("strong",{children:"you"})," think about money. Customize the order to match your priorities!"]}),v.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-xl p-4",children:[v.jsxs("h4",{className:"font-medium text-indigo-900 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[v.jsx(Lf,{className:"w-4 h-4"}),"Drag to Reorder"]}),v.jsx("p",{className:"text-sm text-indigo-800 dark:text-indigo-300 mb-3",children:"Both categories and envelopes can be reordered the same way:"}),v.jsxs("div",{className:"space-y-2 mb-3",children:[v.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[v.jsx("strong",{children:"Mobile:"})," Long-press and drag"]}),v.jsxs("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:[v.jsx("strong",{children:"PC:"})," Click and hold on the ",v.jsx("strong",{children:""})," dots, then drag"]})]}),v.jsxs("div",{className:"bg-white dark:bg-indigo-950/30 rounded-lg p-3 mb-3 border border-indigo-300 dark:border-indigo-700",children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs mb-2",children:[v.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Food"}),v.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"Category"})]})]}),v.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[v.jsx("div",{className:"text-indigo-600 dark:text-indigo-400 font-bold",children:""}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-indigo-900 dark:text-indigo-200",children:"Groceries"}),v.jsx("div",{className:"text-indigo-700 dark:text-indigo-400 text-xs",children:"$450 / $500"})]})]}),v.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-2 italic",children:" Click and hold these dots to drag"})]}),v.jsxs("ul",{className:"space-y-1 text-sm text-indigo-700 dark:text-indigo-400",children:[v.jsx("li",{children:" Reorder categories: Settings  Manage Categories"}),v.jsx("li",{children:" Reorder envelopes: On the main budget screen"}),v.jsx("li",{children:" Organize by priority, frequency, or preference"})]})]}),v.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",v.jsx("strong",{children:"Pro tip:"})," Try organizing your budget like this: Income  Fixed Expenses  Variable Expenses  Savings Goals"]})})]}),color:"indigo"},{icon:vm,title:"Step 5: Allocate Your Budget",description:"Assign money to each envelope",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"Now comes the fun part - giving every dollar a job!"}),v.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl p-4 relative",children:[v.jsx("button",{onClick:()=>a(M=>M+1),className:"absolute top-2 right-2 p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-lg transition-colors",title:"Replay animation",children:v.jsx(pB,{className:"w-4 h-4"})}),v.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium mb-2",children:'The "Left to Budget" amount shows unassigned money'}),v.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 mb-3",children:["Your goal is to get this to ",v.jsx("strong",{children:"$0.00"})," by allocating all your income to envelopes."]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between text-xs text-blue-700 dark:text-blue-300 font-medium",children:[v.jsx("span",{children:"Left to Budget"}),v.jsxs("span",{className:`font-bold ${o<0?"text-red-600 dark:text-red-400":""}`,children:["$",o.toFixed(2)]})]}),v.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 overflow-hidden",children:v.jsx(pn.div,{className:`h-full rounded-full ${o<0?"bg-red-500":"bg-green-500"}`,initial:{width:"0%"},animate:{width:o<0?"100%":`${(2500-o)/2500*100}%`},transition:{duration:.3,ease:"easeInOut"}})}),v.jsxs(pn.div,{className:`text-xs font-medium text-center mt-1 ${o===0?"text-green-600 dark:text-emerald-400":o<0?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-300"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},children:[o===0&&"Perfect! Every dollar has a job ",o<0&&"You're not in Congress! Try again.",o>0&&"Keep allocating until you reach $0"]})]},i)]}),v.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:[v.jsx("strong",{children:"To allocate money:"})," Tap the budget amount on any envelope and enter how much you want to assign to it."]}),v.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:[" ",v.jsx("strong",{children:"Pro tip:"})," Start with your essential expenses (rent, utilities, groceries) first, then allocate what's left to other categories."]})})]}),color:"blue"},{icon:vh,title:"Bonus: Piggybanks (Savings Goals)",description:"Save for future goals",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsxs("p",{className:"text-gray-600 dark:text-zinc-400",children:["Piggybanks are special envelopes for ",v.jsx("strong",{children:"savings goals"})," that carry over month-to-month."]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(SB,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set a Goal"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Vacation, emergency fund, new car - whatever you're saving for"})]})]}),v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(m2,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Monthly Contributions"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Set an automatic monthly amount to save"})]})]}),v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(vm,{className:"w-5 h-5 text-pink-500 flex-shrink-0 mt-0.5"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Track Progress"}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Watch your savings grow toward your goal"})]})]})]}),v.jsx("div",{className:"bg-pink-50 dark:bg-pink-900/20 border border-pink-200 dark:border-pink-800 rounded-xl p-4",children:v.jsxs("p",{className:"text-sm text-pink-900 dark:text-pink-200",children:[v.jsx("strong",{children:"Find Piggybanks"})," at the bottom of your budget. They're optional but powerful for reaching your goals!"]})})]}),color:"pink"},{icon:Xb,title:"You're Ready to Budget!",description:"Start taking control of your money",content:v.jsxs("div",{className:"space-y-4 text-left",children:[v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:"That's it! You now know the basics of Dollars At Work:"}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"1"})}),v.jsx("span",{children:"Choose your categories"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"2"})}),v.jsx("span",{children:"Add your income sources"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"3"})}),v.jsx("span",{children:"Create envelopes in categories"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"4"})}),v.jsx("span",{children:"Organize your budget order"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-zinc-300",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:v.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:"5"})}),v.jsx("span",{children:"Allocate until Left to Budget = $0"})]})]}),v.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mt-6",children:v.jsx("p",{className:"text-sm text-center text-blue-900 dark:text-blue-200 font-medium",children:' Click "Start Budgeting" below to create your first budget!'})})]}),color:"green",useCustomIcon:!0}],E=w[n],T=E.useCustomIcon?Xb:E.icon,C=n===w.length-1,N=n===0,j={blue:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",button:"bg-green-600 hover:bg-green-700"},purple:{bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-600 dark:text-purple-400",button:"bg-purple-600 hover:bg-purple-700"},indigo:{bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-600 dark:text-indigo-400",button:"bg-indigo-600 hover:bg-indigo-700"},pink:{bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-600 dark:text-pink-400",button:"bg-pink-600 hover:bg-pink-700"}}[E.color];return v.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-black flex items-center justify-center p-4",children:v.jsx("div",{className:"w-full max-w-2xl",children:v.jsx(ti,{mode:"wait",children:v.jsxs(pn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:[v.jsx("div",{className:"p-6 pb-2",children:v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:E.title}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-400",children:E.description})]}),v.jsx("div",{className:"flex flex-col items-center mx-4",children:n===0?v.jsx("img",{src:SZ,alt:"Dollars At Work",className:`w-20 h-20 ${j.text}`}):E.useCustomIcon?v.jsx("img",{src:Xb,alt:"Budget Balanced",className:`w-32 h-32 ${j.text}`}):v.jsx("div",{className:`${j.bg} p-3 rounded-xl`,children:v.jsx(T,{className:`w-8 h-8 ${j.text}`})})}),v.jsxs("div",{className:"text-sm text-gray-500 dark:text-zinc-400 whitespace-nowrap",children:["Step ",n+1," of ",w.length]})]})}),v.jsx("div",{className:"px-6 pb-6 pt-2",children:E.content}),v.jsx("div",{className:"px-6 pb-4 flex justify-center gap-2",children:w.map((M,A)=>v.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${A===n?`w-8 ${j.button}`:A<n?"w-2 bg-gray-400 dark:bg-zinc-600":"w-2 bg-gray-200 dark:bg-zinc-700"}`},A))}),v.jsxs("div",{className:"p-6 pt-0 flex gap-3",children:[!N&&v.jsxs("button",{onClick:()=>r(M=>M-1),className:"flex-1 py-3 px-4 border border-gray-300 dark:border-zinc-700 text-gray-700 dark:text-zinc-300 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors flex items-center justify-center gap-2",children:[v.jsx(ql,{className:"w-5 h-5"}),"Back"]}),v.jsx("button",{onClick:()=>{if(C)m();else{if(E.title.includes("Choose Categories")&&u.length===0)return;r(M=>M+1)}},disabled:E.title.includes("Choose Categories")&&u.length===0,className:`${N?"flex-1":"flex-[2]"} py-3 px-4 ${j.button} text-white rounded-xl font-semibold transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:C?v.jsxs(v.Fragment,{children:[v.jsx(Uf,{className:"w-5 h-5"}),"Start Budgeting"]}):v.jsxs(v.Fragment,{children:["Next",v.jsx(y9,{className:"w-5 h-5"})]})})]})]},n)})})})},TZ=({piggybank:t,balance:e,onNavigate:n,setMoveableRef:r,isReorderingActive:i,activelyDraggingId:a,onItemDragStart:o,onLongPressTrigger:c})=>{const u=U.useRef(null),[d,h]=U.useState(!1),g=Ww(D=>{vP(),c(D,t.id)},{threshold:500,cancelOnMovement:25,detect:So.Touch}),m=t.piggybankConfig?.targetAmount,b=t.piggybankConfig?.monthlyContribution??0,_=t.piggybankConfig?.color||"#3B82F6",w=t.piggybankConfig?.paused||!1,E=typeof e=="number"?e:e.toNumber(),T=(D,V=1)=>{const P=D.replace("#",""),B=parseInt(P,16),O=B>>16&255,W=B>>8&255,X=B&255;return`rgba(${O}, ${W}, ${X}, ${V})`},C=`linear-gradient(135deg, ${T(_,.14)} 0%, ${T(_,.05)} 100%)`,N=T(_,.4),L=m&&m>0?Math.min(E/m*100,100):0,j=m&&E>=m;U.useEffect(()=>{a&&a!==t.id&&h(!1)},[a,t.id]),U.useEffect(()=>{a===t.id&&(h(!0),o&&o(t.id))},[a,t.id,o]),U.useEffect(()=>{if(!a&&d){const D=setTimeout(()=>{h(!1)},300);return()=>clearTimeout(D)}},[a,d]);const M=D=>{if(d||i){D.preventDefault(),D.stopPropagation();return}n(t.id)},A=a===t.id,R=v.jsxs("div",{className:"flex items-center gap-3 w-full",children:[v.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:D=>c(D,t.id),children:v.jsx(Lf,{size:20})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center justify-between gap-3 mb-1",children:[v.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[v.jsx("div",{className:"w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center",style:{backgroundColor:`${_}20`},children:v.jsx(vh,{size:12,style:{color:_}})}),v.jsxs("div",{className:"min-w-0",children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate leading-tight",children:t.name}),v.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[v.jsx(vm,{size:10,style:{color:_}}),v.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400 font-medium",children:["$",b.toFixed(2),"/mo"]}),w&&v.jsxs("span",{className:"text-[9px] text-orange-600 dark:text-orange-400 font-bold ml-1 flex items-center gap-0.5",children:[v.jsx(oB,{size:8})," PAUSED"]})]})]})]}),v.jsxs("div",{className:"text-right flex-shrink-0",children:[v.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white leading-none",children:["$",E.toFixed(2)]}),v.jsxs("div",{className:"text-[9px] text-gray-400 dark:text-zinc-500 mt-1",children:["of $",m?.toFixed(0)||"0"]})]})]}),m&&m>0&&v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-800/50 rounded-full h-0.5 overflow-hidden",children:v.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${L}%`,backgroundColor:_}})}),j&&!m&&v.jsx("div",{className:"text-[9px] text-green-600 dark:text-green-400 font-bold mt-0.5",children:" GOAL REACHED"})]})]});return v.jsx(pn.div,{...g(),layout:!A,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},ref:D=>{r&&r(D),u.current=D},onClick:M,style:{background:C,borderColor:N,boxShadow:A?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",zIndex:A?50:1,scale:A?1.02:1},className:"rounded-xl py-1.5 px-3 border transition-all cursor-pointer shadow-sm hover:shadow-md select-none active:scale-[0.99] group",children:R})},sf=(t,e=1)=>{const n=t.replace("#",""),r=parseInt(n,16),i=r>>16&255,a=r>>8&255,o=r&255;return`rgba(${i}, ${a}, ${o}, ${e})`},AZ=12,CZ=(t,e,n)=>Math.min(Math.max(t,e),n),RZ=({env:t,budgetedAmount:e,remainingBalance:n,navigate:r,transactions:i,currentMonth:a,setMoveableRef:o,isReorderingActive:c,activelyDraggingId:u,onItemDragStart:d,onLongPressTrigger:h})=>{const g=!!t.isPiggybank,m=t.piggybankConfig?.color||"#3B82F6",b=g?`linear-gradient(135deg, ${sf(m,.18)} 0%, ${sf(m,.08)} 100%)`:void 0,_=g?sf(m,.5):void 0,[w,E]=U.useState(!1),T=Ww(P=>{vP(),h(P,t.id)},{threshold:500,cancelOnMovement:25,detect:So.Touch}),C=i.filter(P=>P.envelopeId===t.id&&P.month===a),N=C.filter(P=>P.type==="Expense"),L=C.filter(P=>P.type==="Income"),j=N.reduce((P,B)=>P+(B.amount||0),0),M=L.reduce((P,B)=>P+(B.amount||0),0),A=M>0?Math.max(0,j/M*100):0,R=P=>{if(w||c){P.preventDefault(),P.stopPropagation();return}r(`/envelope/${t.id}`)};U.useEffect(()=>{u&&u!==t.id&&E(!1)},[u,t.id]),U.useEffect(()=>{u===t.id&&(E(!0),d(t.id))},[u,t.id,d]),U.useEffect(()=>{if(!u&&w){const P=setTimeout(()=>{E(!1)},300);return()=>clearTimeout(P)}},[u,w]);const D=v.jsxs("div",{className:"flex items-center gap-3 w-full",children:[v.jsx("div",{className:"hidden md:flex items-center justify-center p-1 text-gray-400 opacity-0 group-hover:opacity-100 cursor-grab active:cursor-grabbing transition-all duration-200",onMouseDown:P=>h(P,t.id),children:v.jsx(Lf,{size:20})}),v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[g&&v.jsx("span",{className:"w-5 h-5 rounded-full flex items-center justify-center border",style:{borderColor:sf(m,.4),backgroundColor:sf(m,.15),color:m},children:v.jsx(vh,{size:10})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-tight",children:t.name}),v.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[v.jsx("span",{className:"text-[10px] text-gray-500 dark:text-zinc-400",children:"Budgeted:"}),v.jsxs("span",{className:"text-[10px] font-medium text-gray-700 dark:text-zinc-300",children:["$",e.toFixed(2)]})]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("span",{className:`text-sm font-bold leading-none ${(typeof n=="number"?n:n.toNumber())<0||100-A<=5?"text-red-500":A>=80?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-emerald-400"}`,children:["$",(typeof n=="number"?n:n.toNumber()).toFixed(2)]}),v.jsx("span",{className:"text-[9px] text-gray-400 dark:text-zinc-500 block uppercase tracking-wider mt-0.5",children:"Remaining"})]})]}),e>0&&v.jsx("div",{className:"mt-1",children:v.jsx("div",{className:"w-full bg-gray-200 dark:bg-zinc-700/50 rounded-full h-0.5 overflow-hidden",children:v.jsx("div",{className:`h-full transition-all duration-300 ease-out ${(typeof n=="number"?n:n.toNumber())<0||100-A<=5?"bg-red-500":A>=80?"bg-yellow-500":"bg-green-400"}`,style:{width:`${Math.max(100-A,2)}%`}})})})]})]}),V=u===t.id;return v.jsx(pn.div,{...T(),layout:!V,transition:{layout:{type:"spring",stiffness:350,damping:30,mass:.8}},"data-envelope-id":t.id,ref:o(t.id),onClick:R,style:{boxShadow:V?"0 18px 45px rgba(15,23,42,0.35)":"0 1px 2px rgba(15,23,42,0.08)",background:b,borderColor:_,cursor:V?"grabbing":"pointer",zIndex:V?50:1,scale:V?1.02:1},className:`py-1.5 px-3 rounded-xl active:scale-[0.99] transition-all select-none border group ${g?"bg-white/70 dark:bg-zinc-800/80":"bg-gray-50 dark:bg-zinc-800 border-transparent"}`,children:D})},Lk=({category:t,envelopes:e,allocations:n,currentMonth:r,transactions:i,navigate:a,getEnvelopeBalance:o,onReorderGlobal:c})=>{if(e.length===0&&t.id==="uncategorized")return null;const[u,d]=U.useState(e),h=U.useRef(e),[g,m]=U.useState(!1),[b,_]=U.useState(null),w=U.useRef(!1),E=U.useRef(null),T=U.useRef({}),C=U.useRef({}),N=U.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});U.useEffect(()=>{g||(d(e),h.current=e)},[e,g]);const L=U.useCallback((M,A)=>{const R=C.current[A];if(R){w.current=!0;const D=M.nativeEvent||M;R.dragStart(D)}},[]),j=U.useCallback(M=>A=>{A?T.current[M]=A:delete T.current[M]},[]);return U.useEffect(()=>{const M=()=>{Object.values(C.current).forEach(D=>D?.destroy()),C.current={}};if(!u.length)return;const A=()=>{u.forEach(D=>{const V=T.current[D.id];if(!V||!E.current)return;const P=new gP(E.current,{target:V,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[]});P.on("dragStart",O=>{if(!w.current){O.stop();return}const W=O.inputEvent.target;if(W.closest(".js-budget-target")||W.tagName==="INPUT"){O.stop();return}const X=h.current.findIndex(ee=>ee.id===D.id),H=O.target,K=H.getBoundingClientRect();_(D.id),N.current={activeId:D.id,startIndex:X,currentIndex:X,itemHeight:K.height+AZ},H.style.transition="none",H.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",H.style.zIndex="20",m(!0)});let B=null;P.on("drag",O=>{const W=O.target;B!==null&&cancelAnimationFrame(B),B=requestAnimationFrame(()=>{const X=N.current;if(X.activeId!==D.id)return;const H=O.beforeTranslate[1];W.style.transform=`translateY(${H}px)`,W.style.transition="none";const{itemHeight:K,startIndex:ee}=X,ie=Math.round(H/K),q=CZ(ee+ie,0,h.current.length-1);q!==X.currentIndex&&(X.currentIndex=q,h.current.forEach((F,Y)=>{if(F.id===D.id)return;const ne=T.current[F.id];if(!ne)return;let Z=0;ee<q&&Y>ee&&Y<=q?Z=-K:ee>q&&Y>=q&&Y<ee&&(Z=K),ne.style.transform=Z?`translateY(${Z}px)`:"",ne.style.transition="transform 0.2s ease"})),B=null})}),P.on("dragEnd",O=>{B!==null&&(cancelAnimationFrame(B),B=null);const W=O.target,{startIndex:X,currentIndex:H}=N.current;if(W.style.transform="",W.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",W.style.boxShadow="",h.current.forEach(K=>{const ee=T.current[K.id];ee&&(ee.style.transform="",ee.style.transition="")}),X!==H){const K=[...h.current],[ee]=K.splice(X,1);K.splice(H,0,ee),h.current=K,d(K),c(K.map(ie=>ie.id))}setTimeout(()=>{W.style.zIndex="",_(null),m(!1),w.current=!1},300)}),P.on("click",()=>{const O=window.event?.target;O&&(O.closest(".js-budget-target")||O.tagName==="INPUT")||a(`/envelope/${D.id}`)}),C.current[D.id]=P})},R=window.setTimeout(A,80);return()=>{clearTimeout(R),M()}},[u,a,c]),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[v.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2",children:t.name}),v.jsx("button",{onClick:()=>a(t.id==="uncategorized"?"/add-envelope":`/add-envelope?categoryId=${t.id}`),className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",title:`Add to ${t.name}`,children:v.jsx(yh,{size:20})})]}),v.jsx("div",{ref:E,className:"space-y-2 relative",children:u.length===0?v.jsx("div",{className:"py-2 text-center border border-dashed border-gray-100 dark:border-zinc-800 rounded-xl",children:v.jsx("p",{className:"text-[10px] text-gray-400 dark:text-zinc-500",children:"Empty category"})}):v.jsx(ti,{initial:!1,children:u.map(M=>{const R=(n[r]||[]).find(V=>V.envelopeId===M.id)?.budgetedAmount||0,D=o(M.id);return M.isPiggybank?v.jsx(TZ,{piggybank:M,balance:D,onNavigate:V=>a(`/envelope/${V}`),setMoveableRef:j(M.id),isReorderingActive:g,activelyDraggingId:b,onItemDragStart:()=>{},onLongPressTrigger:L},M.id):v.jsx(RZ,{env:M,budgetedAmount:R,remainingBalance:D,navigate:a,transactions:i,currentMonth:r,setMoveableRef:j,isReorderingActive:g,activelyDraggingId:b,onItemDragStart:()=>{},onLongPressTrigger:L},M.id)})})})]})},kZ=()=>{const{visibleEnvelopes:t,piggybanks:e,incomeSources:n,availableToBudget:r,currentMonth:i,allocations:a,transactions:o,isLoading:c,isInitialLoading:u,showTimeoutMessage:d,getEnvelopeBalance:h,deleteIncomeSource:g}=bZ(),{setMonth:m,setIsOnboardingActive:b,isOnboardingActive:_,isOnboardingCompleted:w,completeOnboarding:E,categories:T,fetchCategories:C,envelopes:N,reorderEnvelopes:L}=Jt(),j=Ba(),[M,A]=U.useState(!1),[R,D]=U.useState("add"),[V,P]=U.useState(null),[B,O]=U.useState(!1),[W,X]=U.useState(!1),H=U.useRef(null),K=U.useRef(null),[ee,ie]=U.useState(0);U.useEffect(()=>{T.length===0&&C()},[T.length,C]);const q=U.useMemo(()=>{const ge={},Te=[];return T.forEach(ae=>ge[ae.id]=[]),[...t,...e].sort((ae,Ae)=>(ae.orderIndex??0)-(Ae.orderIndex??0)).forEach(ae=>{ae.categoryId&&ge[ae.categoryId]?ge[ae.categoryId].push(ae):Te.push(ae)}),{groups:ge,uncategorized:Te}},[T,t,e]),F=U.useCallback(async ge=>{const Te=[...N.map(De=>De.id)],Ne=new Set(ge),ae=[];let Ae=0;Te.forEach(De=>{Ne.has(De)?ae.push(ge[Ae++]):ae.push(De)}),await L(ae)},[N,L]);U.useLayoutEffect(()=>{if(_)return;const ge=K.current;if(!ge)return;const Te=()=>ie(ge.getBoundingClientRect().height);Te();const Ne=new ResizeObserver(()=>Te());return Ne.observe(ge),window.addEventListener("resize",Te),()=>{window.removeEventListener("resize",Te),Ne.disconnect()}},[_,i,n,a,t,e,r]),U.useEffect(()=>{if(!u&&!c){const ge=setTimeout(()=>{if(_)return;if(w){b(!1);const ae=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ae=Object.keys(n).some(De=>(n[De]||[]).length>0)||Object.keys(a).some(De=>(a[De]||[]).length>0);X(!!(ae&&Ae));return}const Te=(n[i]||[]).length===0&&(a[i]||[]).length===0,Ne=Object.keys(n).some(ae=>(n[ae]||[]).length>0)||Object.keys(a).some(ae=>(a[ae]||[]).length>0);Te?Ne?(X(!0),b(!1)):(b(!0),X(!1)):(X(!1),b(!1))},500);return()=>clearTimeout(ge)}},[u,c,i,n,a,w]);const Y=()=>{D("add"),P(null),A(!0)},ne=ge=>{H.current&&clearTimeout(H.current),!B&&(D("edit"),P(ge),A(!0))},Z=ge=>{H.current&&clearTimeout(H.current),O(!0),g(ge),setTimeout(()=>O(!1),500)},oe=()=>{A(!1),P(null)},ce=async()=>{X(!1);const{copyPreviousMonthAllocations:ge}=Jt.getState();await ge(i)},me=()=>{E(),b(!1)};return u?v.jsx(zI,{message:d?"Still loading...":"Loading your budget...",showTimeout:d}):v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:".moveable-control, .moveable-origin, .moveable-line { display: none !important; }"}}),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[!_&&v.jsx("header",{ref:K,className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-zinc-900 border-b border-gray-100 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+4px)] pb-1",children:v.jsx(xZ,{currentMonth:i,onMonthChange:ge=>{X(!1),m(ge)},budgetStatus:{amount:r,totalIncome:(n[i]||[]).reduce((ge,Te)=>ge+Te.amount,0),totalAllocated:(a[i]||[]).filter(ge=>t.some(Te=>Te.id===ge.envelopeId)||e.some(Te=>Te.id===ge.envelopeId)).reduce((ge,Te)=>ge+Te.budgetedAmount,0)}})}),v.jsxs("div",{className:"pb-[calc(8rem+env(safe-area-inset-bottom))] px-4 max-w-4xl mx-auto space-y-4",style:_?void 0:{paddingTop:Math.max(0,ee+16)},children:[_?v.jsx(EZ,{currentMonth:i,onComplete:me}):W?v.jsx(wZ,{currentMonth:i,onCopy:ce}):v.jsxs(v.Fragment,{children:[v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-3 shadow-sm border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[v.jsx("h2",{className:"text-base font-bold text-gray-900 dark:text-white",children:"Income Sources"}),v.jsx("button",{onClick:Y,className:"text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 p-1 rounded-full transition-colors",children:v.jsx(yh,{size:20})})]}),(n[i]||[]).length===0?v.jsx("div",{className:"text-center py-4",children:v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-[10px]",children:"No income sources yet."})}):v.jsx("div",{className:"space-y-2",children:v.jsx(ti,{initial:!1,mode:"popLayout",children:(n[i]||[]).map(ge=>v.jsx(pn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Y0,{onDelete:()=>Z(ge),children:v.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-zinc-800 rounded-xl cursor-pointer",onClick:()=>ne(ge),children:[v.jsx("div",{className:"flex-1",children:v.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:ge.name})}),v.jsxs("p",{className:"text-xs font-bold text-green-600 dark:text-emerald-400",children:["$",ge.amount.toFixed(2)]})]})})},ge.id))})})]}),T.map(ge=>v.jsx(Lk,{category:ge,envelopes:q.groups[ge.id]||[],allocations:a,currentMonth:i,transactions:o,navigate:j,getEnvelopeBalance:h,onReorderGlobal:F},ge.id)),q.uncategorized.length>0&&v.jsx(Lk,{category:{id:"uncategorized",name:"Uncategorized"},envelopes:q.uncategorized,allocations:a,currentMonth:i,transactions:o,navigate:j,getEnvelopeBalance:h,onReorderGlobal:F}),T.length===0&&q.uncategorized.length===0&&v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800 text-center py-12",children:[v.jsx(i0,{className:"w-12 h-12 text-gray-300 dark:text-zinc-700 mx-auto mb-3"}),v.jsx("p",{className:"text-gray-500 dark:text-zinc-400 text-sm mb-4",children:"No envelopes yet."}),v.jsx("button",{onClick:()=>j("/add-envelope"),className:"text-blue-600 dark:text-blue-300 font-medium hover:text-blue-700 dark:hover:text-blue-200 transition-colors",children:"Create First Envelope"})]})]}),v.jsx(_Z,{isVisible:M,onClose:oe,mode:R,initialIncomeSource:V})]})]})]})},DZ=[],DP=({selectedCard:t,onCardSelect:e,initialCards:n=DZ,disabled:r=!1,isUserSelected:i=!1})=>{const a=Jt(P=>P.appSettings),o=Jt(P=>P.updateAppSettings),[c,u]=U.useState(n.length>0?n[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}),[d,h]=U.useState(!1),[g,m]=U.useState(!1),[b,_]=U.useState(n),[w,E]=U.useState(null),[T,C]=U.useState({name:"",network:"Visa",last4:"",color:"#3b82f6"});U.useEffect(()=>{a?.paymentSources&&(_(a.paymentSources),a.paymentSources.length>0&&!t&&u(a.paymentSources[0]))},[a,t]);const N=t||c;U.useEffect(()=>{!t&&e&&b.length>0&&e(b[0])},[t,e,b]);const L=P=>{r||(P.id==="add-new"?m(!0):(u(P),e?.(P),h(!1)))},j=()=>{r||h(!d)},M=P=>{r||E(P)},A=async()=>{if(w&&!r){const P=b.filter(B=>B.id!==w.id);if(_(P),N?.id===w.id){const B=P.length>0?P[0]:{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"};u(B),e?.(B)}E(null),h(!1);try{await o({paymentSources:P})}catch(B){console.error("Failed to delete card from app settings:",B),_(b),alert("Failed to delete card. Please try again.");return}}},R=()=>{E(null)},D=async()=>{if(r)return;const P=!["Cash","Venmo"].includes(T.network);if(P&&(T.last4.length!==4||!/^\d{4}$/.test(T.last4))){alert("Please enter exactly 4 digits for the last 4 digits");return}if(!T.name.trim()){alert("Please enter a name");return}const B={id:`custom-${Date.now()}`,name:T.name.trim(),network:T.network,last4:P?T.last4:void 0,color:T.color},O=[...b,B];_(O),u(B),e?.(B),m(!1),h(!1);try{await o({paymentSources:O})}catch(W){console.error("Failed to save card to app settings:",W),_(b),u(N),alert("Failed to save card. Please try again.");return}C({name:"",network:"Visa",last4:"",color:"#3b82f6"})},V=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#6b7280","#0f4c81","#fdbb30","#7fb5b5","#232f3e","#e3e3e3"];return v.jsxs(v.Fragment,{children:[v.jsxs("div",{children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Payment Method",!i&&v.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400 font-medium",children:"(Default selected)"})]}),v.jsxs("div",{onClick:j,className:`flex items-center gap-4 p-3 border rounded-lg transition-colors ${r?"cursor-not-allowed opacity-50 border-gray-300 dark:border-gray-600":"cursor-pointer hover:bg-gray-50 dark:hover:bg-zinc-800 border-gray-300 dark:border-gray-600"} ${i?"":"ring-2 ring-blue-200 dark:ring-blue-800"}`,children:[v.jsxs("div",{className:"w-[70px] h-[40px] rounded-lg flex flex-col justify-between p-[6px] shadow-lg text-white font-mono text-xs",style:{backgroundColor:N.color},children:[v.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:N.network}),v.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(N.network)?N.network==="Cash"?"$$$":"@":` ${N.last4||""}`})]}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:N.name}),v.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cash","Venmo"].includes(N.network)?N.network:`(...${N.last4})`})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-gray-400",children:d?"":""}),!i&&v.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",title:"Default payment method - tap to change"})]})]}),d&&v.jsx("div",{className:"card-stack-dropdown",children:v.jsx("div",{className:"card-stack",children:v.jsx(ti,{initial:!1,mode:"popLayout",children:[...b,{id:"add-new",name:"+ Add New Card",network:"Visa",last4:"",color:"#6b7280"}].map((P,B)=>{const O=N.id===P.id,W=P.id==="add-new",X=["Cash","Venmo"].includes(P.network);return v.jsx(pn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Y0,{onDelete:()=>!W&&!r&&M(P),threshold:-80,children:v.jsxs("div",{className:`card-stack-item ${O?"selected":""} ${W?"add-new-card":""}`,onClick:()=>L(P),style:{backgroundColor:W?"#f3f4f6":P.color,color:W?"#374151":P.color==="#e3e3e3"?"#000":"#fff",zIndex:b.length-B},children:[v.jsxs("div",{className:"card-header",children:[v.jsx("span",{className:"card-network",children:W?"":P.network}),O&&!W&&v.jsx("span",{className:"selected-indicator",children:""})]}),v.jsxs("div",{className:"card-details",children:[v.jsx("div",{className:"card-name",children:P.name}),v.jsx("div",{className:"card-number",children:W?"":X?P.network==="Cash"?"$$$":"@":` ${P.last4}`})]}),W&&v.jsx("div",{className:"add-icon",children:v.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),v.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})})},P.id)})})})})]}),g&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-md mx-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add New Payment Method"}),v.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),v.jsx("input",{type:"text",value:T.name,onChange:P=>C({...T,name:P.target.value}),placeholder:"e.g., Wallet Cash, My Venmo",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),v.jsxs("select",{value:T.network,onChange:P=>C({...T,network:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[v.jsx("option",{value:"Visa",children:"Visa"}),v.jsx("option",{value:"Mastercard",children:"Mastercard"}),v.jsx("option",{value:"Amex",children:"Amex"}),v.jsx("option",{value:"Cash",children:"Cash"}),v.jsx("option",{value:"Venmo",children:"Venmo"})]})]}),!["Cash","Venmo"].includes(T.network)&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last 4 Digits"}),v.jsx("input",{type:"text",value:T.last4,onChange:P=>C({...T,last4:P.target.value.replace(/\D/g,"").slice(0,4)}),placeholder:"1234",maxLength:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),v.jsx("div",{className:"grid grid-cols-6 gap-2",children:V.map(P=>v.jsx("button",{type:"button",onClick:()=>C({...T,color:P}),className:`w-full h-10 rounded-lg border-2 transition-all ${T.color===P?"border-blue-500 scale-110":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:P}},P))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),v.jsxs("div",{className:"w-full h-20 rounded-lg flex flex-col justify-between p-3 shadow-lg text-white font-mono text-xs",style:{backgroundColor:T.color},children:[v.jsx("span",{className:"text-right text-[7px] uppercase font-bold",children:T.network}),v.jsx("span",{className:"text-left text-[9px] leading-none",children:["Cash","Venmo"].includes(T.network)?T.network==="Cash"?"$$$":"@":` ${T.last4||"0000"}`})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"button",onClick:D,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Add"})]})]})]})}),w&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-zinc-700 shadow-xl p-6 w-full max-w-sm mx-4",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:v.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Delete Card"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",v.jsx("span",{className:"font-medium",children:w.name}),"?"]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{type:"button",onClick:R,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),v.jsx("button",{type:"button",onClick:A,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors",children:"Delete"})]})]})})})]})},NP=({isVisible:t,onClose:e,mode:n,currentEnvelope:r,initialTransaction:i})=>{const{addTransaction:a,updateTransaction:o,deleteTransaction:c,currentMonth:u}=Jt(),[d,h]=U.useState(""),[g,m]=U.useState(""),[b,_]=U.useState(""),[w,E]=U.useState(new Date().toISOString().split("T")[0]),[T,C]=U.useState(null);U.useEffect(()=>{if(t)if(n==="edit"&&i){h(i.amount.toString()),m(i.merchant||""),_(i.description),C(i.paymentMethod||null);try{const A=new Date(i.date);isNaN(A.getTime())?(console.warn("Invalid date in transaction:",i.date),E(new Date().toISOString().split("T")[0])):E(A.toISOString().split("T")[0])}catch(A){console.error("Error parsing transaction date:",A),E(new Date().toISOString().split("T")[0])}}else h(""),m(""),_(""),E(new Date().toISOString().split("T")[0])},[t,n,i]);const N=async A=>{A.preventDefault();const R=parseFloat(d);if(isNaN(R)||R<=0){console.log(" Invalid amount:",d);return}console.log(" Saving transaction:",{mode:n,amount:R,note:b,date:w,envelopeId:r.id,paymentMethod:T});try{const D=new Date(w),V=`${D.getFullYear()}-${(D.getMonth()+1).toString().padStart(2,"0")}`;if(V!==u){const P=`This transaction date (${V}) does not match the current budget month (${u}). Are you sure you want to save it?`;if(!window.confirm(P))return}n==="add"?(console.log(" Adding income transaction"),await a({amount:R,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:r.id,type:"Income",reconciled:!1,paymentMethod:T||void 0})):n==="spend"?(console.log(" Adding expense transaction"),await a({amount:R,description:b,merchant:g||void 0,date:new Date(w).toISOString(),envelopeId:r.id,type:"Expense",reconciled:!1,paymentMethod:T||void 0})):n==="edit"&&i&&(console.log(" Updating transaction"),await o({...i,amount:R,description:b,merchant:g||void 0,date:new Date(w).toISOString(),paymentMethod:T||void 0})),console.log(" Transaction saved successfully"),e()}catch(D){console.error(" Error saving transaction:",D),alert("Failed to save transaction: "+(D instanceof Error?D.message:"Unknown error"))}},L=()=>{!i||!i.id||window.confirm("Are you sure you want to delete this transaction?")&&(c(i.id),e())},j=n==="add"?"Add Money":n==="spend"?"Spend Money":"Edit Transaction",M=n==="add"?"text-green-500":"text-red-500";return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),v.jsxs(pn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:j}),v.jsx("button",{onClick:N,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!d||parseFloat(d)<=0||i?.isAutomatic,children:i?.isAutomatic?"":"Save"})]}),v.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${M}`,children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",value:d,onChange:A=>{const R=A.target.value.replace(/\D/g,"");if(!R){h("");return}const V=(parseInt(R,10)/100).toFixed(2);h(V)},onKeyDown:A=>{(A.key==="e"||A.key==="E"||A.key==="+"||A.key==="-")&&A.preventDefault()},placeholder:"0.00",autoFocus:!0,disabled:i?.isAutomatic,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${M} placeholder-gray-700 ${i?.isAutomatic?"cursor-not-allowed opacity-80":""}`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),v.jsx("input",{type:"text",value:g,onChange:A=>m(A.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),!i?.isAutomatic&&v.jsx(DP,{selectedCard:T,onCardSelect:C}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:b,onChange:A=>_(A.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none",disabled:i?.isAutomatic})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsxs("div",{className:"flex justify-between items-center mb-1",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const A=new Date(w);return`${A.getFullYear()}-${(A.getMonth()+1).toString().padStart(2,"0")}`!==u?v.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[v.jsx(pu,{size:14}),v.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),v.jsx("input",{type:"date",value:w,onChange:A=>{console.log("Date changed to:",A.target.value),E(A.target.value)},required:!0,disabled:i?.isAutomatic,className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark] disabled:opacity-80"})]}),n==="edit"&&!i?.isAutomatic&&v.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-zinc-800",children:v.jsxs("button",{type:"button",onClick:L,className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-50 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-200 dark:border-zinc-800",children:[v.jsx(rN,{className:"w-5 h-5 mr-2"}),"Delete Transaction"]})})]})]})]})})},NZ=({isVisible:t,onClose:e,sourceEnvelope:n})=>{const{envelopes:r,transferFunds:i}=Jt(),[a,o]=U.useState(""),[c,u]=U.useState(""),[d,h]=U.useState(""),[g,m]=U.useState(new Date().toISOString().split("T")[0]),b=r.filter(E=>E.id!==n.id);U.useEffect(()=>{if(!t)return;const E=window.setTimeout(()=>{o(""),u(""),h(""),m(new Date().toISOString().split("T")[0])},0);return()=>window.clearTimeout(E)},[t]);const _=E=>{E.preventDefault();const T=parseFloat(c);isNaN(T)||T<=0||!a||(i(n.id,a,T,d,new Date(g)),e())},w=r.find(E=>E.id===a);return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),v.jsxs(pn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl border border-gray-200 dark:border-zinc-800 shadow-2xl overflow-hidden relative z-10",children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{onClick:e,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Cancel"}),v.jsx("h2",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:"Transfer Money"}),v.jsx("button",{onClick:_,className:"text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 font-bold disabled:opacity-50",disabled:!c||parseFloat(c)<=0||!a,children:"Transfer"})]}),v.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"From"}),v.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:n.name})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"To"}),v.jsxs("select",{value:a,onChange:E=>o(E.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none cursor-pointer",children:[v.jsx("option",{value:"",className:"bg-white dark:bg-zinc-900",children:"Select envelope..."}),b.map(E=>v.jsx("option",{value:E.id,className:"bg-white dark:bg-zinc-900",children:E.name},E.id))]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl text-blue-600 dark:text-blue-400",children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",value:c,onChange:E=>{const T=E.target.value.replace(/\D/g,"");if(!T){u("");return}const N=(parseInt(T,10)/100).toFixed(2);u(N)},onKeyDown:E=>{(E.key==="e"||E.key==="E"||E.key==="+"||E.key==="-")&&E.preventDefault()},placeholder:"0.00",autoFocus:!0,className:"bg-transparent text-4xl font-bold text-center w-40 focus:outline-none text-blue-600 dark:text-blue-400 placeholder-gray-400 dark:placeholder-gray-600"})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note (Optional)"}),v.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"What is this transfer for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:g,onChange:E=>m(E.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),w&&c&&parseFloat(c)>0&&v.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800",children:["Moving ",v.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-bold",children:["$",parseFloat(c).toFixed(2)]})," from"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:n.name})," to"," ",v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:w.name})]})]})]})]})})},IZ=({isOpen:t,onClose:e,onSave:n,existingPiggybank:r})=>{const[i,a]=U.useState(""),[o,c]=U.useState(""),[u,d]=U.useState(""),[h,g]=U.useState("#3B82F6"),[m,b]=U.useState("piggy-bank"),[_,w]=U.useState(!1),[E,T]=U.useState(!1);U.useEffect(()=>{r?(a(r.name),c(r.piggybankConfig?.targetAmount?.toString()||""),d(r.piggybankConfig?.monthlyContribution.toString()||"0"),g(r.piggybankConfig?.color||"#3B82F6"),b(r.piggybankConfig?.icon||"piggy-bank"),w(r.piggybankConfig?.paused||!1)):(a(""),c(""),d(""),g("#3B82F6"),b("piggy-bank"),w(!1))},[r,t]);const C=async L=>{if(L.preventDefault(),!(!i.trim()||!u)){T(!0);try{const j={name:i.trim(),isPiggybank:!0,piggybankConfig:{monthlyContribution:parseFloat(u),color:h,icon:m,paused:_}};o&&parseFloat(o)>0&&(j.piggybankConfig.targetAmount=parseFloat(o)),r&&(j.id=r.id,j.currentBalance=r.currentBalance,j.lastUpdated=new Date().toISOString(),j.isActive=r.isActive,j.orderIndex=r.orderIndex,j.userId=r.userId),await n(j),e()}catch(j){console.error("Error saving piggybank:",j),alert("Failed to save piggybank")}finally{T(!1)}}},N=[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}];return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),v.jsxs(pn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[v.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 px-6 py-4 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:v.jsx(vh,{size:20,className:"text-blue-600 dark:text-blue-400"})}),v.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r?"Edit Piggybank":"New Piggybank"})]}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:v.jsx(a0,{size:24})})]}),v.jsxs("form",{onSubmit:C,className:"p-6 space-y-5",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"piggybank-name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Piggybank Name *"}),v.jsx("input",{type:"text",id:"piggybank-name",value:i,onChange:L=>a(L.target.value),placeholder:"e.g. Vacation Fund, Emergency Savings",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0,autoFocus:!0})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",id:"monthly-contribution",value:u,onChange:L=>{const j=L.target.value.replace(/\D/g,"");if(!j){d("");return}const A=(parseInt(j,10)/100).toFixed(2);d(A)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:!0})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",id:"target-amount",value:o,onChange:L=>{const j=L.target.value.replace(/\D/g,"");if(!j){c("");return}const A=(parseInt(j,10)/100).toFixed(2);c(A)},placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),v.jsx("div",{className:"space-y-2",children:v.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:_,onChange:L=>w(L.target.checked),className:"w-5 h-5 rounded border-gray-300 dark:border-zinc-700 text-blue-600 focus:ring-2 focus:ring-blue-500"}),v.jsxs("div",{children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Pause auto-contributions"}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Monthly contributions will be skipped while paused"})]})]})}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),v.jsx("div",{className:"grid grid-cols-6 gap-2",children:N.map(L=>v.jsx("button",{type:"button",onClick:()=>g(L.value),className:`w-full aspect-square rounded-lg transition-all ${h===L.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:L.value},title:L.label},L.value))})]}),v.jsxs("div",{className:"pt-4 flex gap-3",children:[v.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",disabled:E,children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!i.trim()||!u||E,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${i.trim()&&u&&!E?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:E?"Saving...":r?"Update":"Create"})]})]})]})]})})},MZ=t=>{if(!t)return"No Date";try{let e;return t&&typeof t=="object"&&t.toDate&&typeof t.toDate=="function"?e=t.toDate():typeof t=="number"?t<1e10?e=new Date((t+978307200)*1e3):e=new Date(t):e=new Date(t),isNaN(e.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch(e){return console.error("Date error:",e),"Error"}},OZ=t=>{const e=typeof t=="string"?parseFloat(t):t;return typeof e!="number"||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e))},IP=({transaction:t,envelopeName:e,onReconcile:n,onEdit:r})=>{if(!t)return null;console.log(" Transaction payment method:",t.paymentMethod);const i=t.type==="Income",a=t.type==="Expense";let o="text-gray-900 dark:text-white";return i&&(o="text-green-600 dark:text-green-400"),a&&(o="text-red-600 dark:text-red-400"),v.jsxs("div",{onClick:r,className:"flex items-center justify-between p-4 bg-white dark:bg-zinc-900 active:bg-gray-50 dark:active:bg-zinc-800 active:scale-[0.99] transition-all cursor-pointer group border-b border-gray-100 dark:border-zinc-800 last:border-0",children:[v.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:t.merchant||t.description||"No Description"}),t.reconciled&&v.jsx("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",children:"R"})]}),t.merchant&&t.description&&t.description!==t.merchant&&v.jsx("div",{className:"text-xs text-gray-600 dark:text-zinc-400 truncate",children:t.description}),v.jsxs("div",{className:"text-xs text-gray-500 dark:text-zinc-500 flex items-center gap-1 flex-wrap",children:[v.jsx("span",{children:MZ(t.date)}),e&&v.jsxs(v.Fragment,{children:[v.jsx("span",{children:""}),v.jsx("span",{className:"text-blue-500 dark:text-blue-400 truncate max-w-[150px]",children:e})]}),t.paymentMethod&&v.jsxs(v.Fragment,{children:[v.jsx("span",{children:""}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{className:"w-[12px] h-[8px] rounded-[2px] flex-shrink-0",style:{backgroundColor:t.paymentMethod.color}}),v.jsx("span",{className:"truncate max-w-[80px]",children:t.paymentMethod.name})]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:`font-bold font-mono whitespace-nowrap ${o}`,children:[a?"-":i?"+":"",OZ(t.amount)]}),n?v.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n()},className:"p-1.5 rounded-full border border-transparent hover:border-green-200 dark:hover:border-green-500 transition-colors","aria-label":t.reconciled?"Mark as unreconciled":"Mark as reconciled",children:t.reconciled?v.jsx(cs,{className:"text-green-500",size:20}):v.jsx(g2,{className:"text-gray-400",size:20})}):v.jsx("span",{children:t.reconciled?v.jsx(cs,{className:"text-green-500",size:20}):v.jsx(g2,{className:"text-gray-400",size:20})})]})]})},Wb=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),PZ=()=>{const{id:t}=fL(),{envelopes:e,transactions:n,fetchData:r,isLoading:i,deleteEnvelope:a,renameEnvelope:o,updateTransaction:c,deleteTransaction:u,restoreTransaction:d,getEnvelopeBalance:h,currentMonth:g,allocations:m,incomeSources:b,setEnvelopeAllocation:_,updatePiggybankContribution:w,updateEnvelope:E}=Jt(),{showToast:T}=rc(),C=Ba(),N=ea(),[L,j]=U.useState(!1),[M,A]=U.useState(!1),[R,D]=U.useState(!1),[V,P]=U.useState(null),[B,O]=U.useState(!1),[W,X]=U.useState(!1),[H,K]=U.useState(""),ee=U.useRef(null),ie=U.useRef(!1);U.useEffect(()=>{e.length===0&&r()},[]);const q=e.find(ae=>ae.id===t),F=async ae=>{if(q)try{const Ae={...q,...ae,id:q.id,userId:q.userId,currentBalance:q.currentBalance,lastUpdated:new Date().toISOString(),isActive:q.isActive,orderIndex:q.orderIndex};await E(Ae),T("Piggybank updated successfully","success"),O(!1)}catch(Ae){console.error("Failed to update piggybank:",Ae),T("Failed to update piggybank","error")}},Y=q?.isPiggybank?q.piggybankConfig?.monthlyContribution||0:m[g]?.find(ae=>ae.envelopeId===t)?.budgetedAmount||0;U.useEffect(()=>{W&&(K(Y.toString()),setTimeout(()=>{ee.current?.focus(),ee.current?.select()},50))},[W,Y]);const ne=ae=>{const Ae=(b[g]||[]).reduce((Ve,Se)=>Ve+Se.amount,0),De=m[g]||[];let Be=De.map(Ve=>q&&Ve.envelopeId===q.id&&ae!==void 0?{...Ve,budgetedAmount:ae}:Ve).filter(Ve=>{const Se=e.find(ze=>ze.id===Ve.envelopeId);return Se?Se.isActive!==!1:!1}).reduce((Ve,Se)=>Ve+Se.budgetedAmount,0);return ae!==void 0&&q&&(De.some(Se=>Se.envelopeId===q.id)||(Be+=ae)),Ae-Be},oe=W?ne(parseFloat(H)||0):ne(),ce=async()=>{if(!q||ie.current)return;const ae=parseFloat(H);if(isNaN(ae)||ae<0){T("Please enter a valid positive number","error");return}ie.current=!0;try{q.isPiggybank?await w(q.id,ae):await _(q.id,ae),X(!1)}catch(Ae){console.error("Failed to save budget:",Ae),T("Failed to update budget","error")}finally{ie.current=!1}};if(!q)return i?v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Loading envelope..."})}):v.jsx("div",{className:"flex justify-center items-center h-screen bg-white dark:bg-black text-gray-900 dark:text-white",children:v.jsx("p",{children:"Envelope not found."})});if(q.isPiggybank){const ae=n.filter(Ae=>Ae.envelopeId===q.id);console.log(" Piggybank:",q.name),console.log(" Created at:",q.createdAt),console.log(" Transactions:",ae.map(Ae=>({date:Ae.date,description:Ae.description,amount:Ae.amount})))}const me=n.filter(ae=>ae.envelopeId===q.id).filter(ae=>{if(ae.description==="Budgeted"||ae.description==="Piggybank Contribution")return!1;if(q.isPiggybank){if(!q.createdAt)return!0;const Ae=Xm(q.createdAt).toISOString().split("T")[0];return Xm(ae.date).toISOString().split("T")[0]>=Ae}return ae.month===g||!ae.month}).sort((ae,Ae)=>new Date(Ae.date).getTime()-new Date(ae.date).getTime()),ge=()=>{N.state?.fromGlobalFAB?C("/"):C(-1)},Te=()=>{t&&(a(t),C(-1))},Ne=ae=>{const Ae={...ae,reconciled:!ae.reconciled};c(Ae)};return v.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white p-4 pb-[calc(8rem+env(safe-area-inset-bottom))] max-w-4xl mx-auto",children:[v.jsxs("header",{className:"flex justify-between items-center pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 bg-white dark:bg-black z-10 border-b border-gray-100 dark:border-zinc-800",children:[v.jsx("button",{onClick:()=>{if(q.isPiggybank)O(!0);else{const ae=prompt("Rename envelope:",q.name);ae&&ae.trim()&&t&&o(t,ae)}},className:"text-blue-600 dark:text-blue-400 font-medium",children:q.isPiggybank?"Edit":"Rename"}),v.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:q.name}),v.jsx("button",{onClick:ge,className:"text-blue-600 dark:text-blue-400 font-bold",children:"Done"})]}),v.jsxs("section",{className:"mt-4 bg-white dark:bg-zinc-900 rounded-lg p-4 shadow-lg mb-4 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-lg font-headline text-gray-900 dark:text-white",children:"Current Balance"}),(()=>{const ae=q.isPiggybank?h(q.id):h(q.id,g);return console.log(`Debug: Envelope ${q.name} Balance:`,ae),v.jsx("span",{className:`text-xl font-bold ${ae<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Wb(ae)})})()]}),v.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-zinc-400",children:q.isPiggybank?"Monthly Contribution":"Budgeted This Month"}),W?v.jsx("form",{onSubmit:ae=>{ae.preventDefault(),ce()},className:"flex items-center gap-2",children:v.jsx("input",{ref:ee,type:"number",step:"0.01",value:H,onChange:ae=>K(ae.target.value),onBlur:ce,className:"w-24 px-2 py-1 text-right font-semibold bg-gray-100 dark:bg-zinc-800 rounded border border-blue-500 focus:outline-none"})}):v.jsx("div",{onClick:()=>X(!0),className:"px-2 py-1 -mr-2 rounded hover:bg-gray-100 dark:hover:bg-zinc-800 cursor-pointer transition-colors",children:v.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Wb(Y)})})]}),v.jsxs("div",{className:`mt-3 py-1.5 px-3 rounded-md flex justify-between items-center text-xs font-medium transition-colors ${oe<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":oe===0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"}`,children:[v.jsx("span",{children:"Left to Budget:"}),v.jsx("span",{children:Wb(oe)})]})]})]}),v.jsxs("section",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg mb-4 divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:[v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>j(!0),children:[v.jsx(M9,{className:"w-5 h-5 mr-3"}),"Add Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>A(!0),children:[v.jsx(N9,{className:"w-5 h-5 mr-3"}),"Spend Money"]}),v.jsxs("button",{className:"flex items-center w-full p-4 text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150",onClick:()=>D(!0),children:[v.jsx(m9,{className:"w-5 h-5 mr-3"}),"Transfer Money"]})]}),v.jsxs("section",{className:"mt-6",children:[v.jsx("h2",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-zinc-400 mb-2 px-2",children:"Transaction History"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-lg divide-y divide-gray-100 dark:divide-zinc-800 border border-gray-100 dark:border-zinc-800",children:me.length===0?v.jsx("p",{className:"p-4 text-center text-gray-500 dark:text-zinc-400",children:"No transactions yet for this envelope."}):v.jsx(ti,{initial:!1,mode:"popLayout",children:me.map(ae=>v.jsx(pn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Y0,{disabled:ae.isAutomatic,onDelete:()=>{if(!ae.id)return;const Ae={...ae};u(ae.id),T("Transaction deleted","neutral",()=>d(Ae))},children:v.jsx(IP,{transaction:ae,onReconcile:()=>Ne(ae),onEdit:()=>{ae.isAutomatic||P(ae)}})})},ae.id))})})]}),v.jsx("div",{className:"mt-8",children:v.jsxs("button",{className:"w-full py-3 px-4 rounded-lg bg-white dark:bg-zinc-900 text-red-600 dark:text-red-400 font-semibold hover:bg-gray-100 dark:hover:bg-zinc-800 transition duration-150 flex items-center justify-center border border-gray-100 dark:border-zinc-800",onClick:()=>{const ae=q.isPiggybank?`Are you sure you want to delete "${q.name}"? This will delete the piggybank and all its history.`:`Are you sure you want to remove "${q.name}" from ${g}? This will delete all transactions for this month only.`;confirm(ae)&&Te()},children:[v.jsx(rN,{className:"w-5 h-5 mr-2"}),"Delete Envelope"]})}),v.jsx(NP,{isVisible:L||M||!!V,onClose:()=>{j(!1),A(!1),P(null)},mode:L?"add":M?"spend":"edit",currentEnvelope:q,initialTransaction:V}),v.jsx(NZ,{isVisible:R,onClose:()=>D(!1),sourceEnvelope:q}),v.jsx(IZ,{isOpen:B,onClose:()=>O(!1),onSave:F,existingPiggybank:q})]})},jZ=({isVisible:t,onClose:e,onConfirm:n,currentMonth:r,incomeCount:i,totalIncome:a,allocationCount:o,totalAllocated:c,transactionCount:u,totalTransactionAmount:d,isLoading:h=!1})=>{const[g,m]=U.useState("confirm"),b=E=>{const[T,C]=E.split("-");return new Date(parseInt(T),parseInt(C)-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})},_=()=>{g==="confirm"?m("final_confirm"):g==="final_confirm"&&n()},w=()=>{m("confirm"),e()};return v.jsx(ti,{children:t&&v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[v.jsx(pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:w,className:"absolute inset-0 bg-black bg-opacity-50"}),v.jsxs(pn.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-zinc-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-zinc-800",children:[v.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Start Fresh for ",b(r)]}),v.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 dark:hover:text-zinc-300 transition-colors",disabled:h,children:""})]}),v.jsx("div",{className:"p-6 space-y-4",children:g==="confirm"?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"This action will permanently delete:"}),v.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:v.jsxs("ul",{className:"space-y-1",children:[v.jsxs("li",{children:[" ",i," income source",i!==1?"s":""," (totaling $",a.toFixed(2),"/month)"]}),v.jsxs("li",{children:[" ",o," envelope allocation",o!==1?"s":""," (totaling $",c.toFixed(2),")"]}),v.jsxs("li",{children:[" ",u," transaction",u!==1?"s":""," (totaling $",d.toFixed(2),")"]})]})})]})]})}),v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[v.jsx("strong",{children:"All other months will remain completely unchanged."})," This only affects the current month's budget data, income sources, allocations, and all transactions."]})})]})})]}):v.jsxs("div",{className:"text-center py-4",children:[v.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 mb-4",children:v.jsx("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-2",children:"Are you absolutely sure?"}),v.jsxs("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:["This action cannot be undone. All budget data and transactions for ",v.jsx("strong",{children:b(r)})," will be permanently removed."]})]})}),v.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200 dark:border-zinc-800",children:[v.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2 text-gray-700 dark:text-zinc-300 border border-gray-300 dark:border-zinc-700 rounded-lg hover:bg-gray-50 dark:hover:bg-zinc-800 transition-colors",disabled:h,children:"Cancel"}),v.jsx("button",{type:"button",onClick:_,disabled:h,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Clearing...":g==="confirm"?"Continue":"Yes, Start Fresh"})]})]})]})})},VZ=()=>{const t=Ba(),e=U.useRef(null),{envelopes:n,transactions:r,resetData:i,importData:a,getEnvelopeBalance:o,appSettings:c,updateAppSettings:u,initializeAppSettings:d,incomeSources:h,allocations:g,currentMonth:m,clearMonthData:b,handleUserLogout:_,resetOnboarding:w}=Jt(),{deleteAccount:E,currentUser:T,logout:C}=$i(),[N,L]=U.useState(null),[j,M]=U.useState(()=>localStorage.getItem("lastBackupDate")||"Never"),[A,R]=U.useState(!1),[D,V]=U.useState(""),[P,B]=U.useState(!1),[O,W]=U.useState(!1),[X,H]=U.useState(null),[K,ee]=U.useState(!1),[ie,q]=U.useState(!1),F=978307200,Y=c?.theme??"system",ne=c?.fontSize??"medium";U.useEffect(()=>{c||d().catch(Se=>{console.error("Failed to initialize app settings:",Se)})},[d,c]);const Z=(Se,ze)=>{L({type:Se,text:ze}),setTimeout(()=>L(null),3500)},oe=U.useMemo(()=>{const Se=n.length,ze=r.length,Ie=m?g[m]||[]:[],Le=Object.values(h).reduce((cn,Vt)=>cn+Vt.length,0),st=Ie.length,Tt=n.reduce((cn,Vt)=>{const wn=o(Vt.id);return cn+(typeof wn=="number"?wn:0)},0),Ke=0,ut=r.reduce((cn,Vt)=>{let wn=0;if(typeof Vt.date=="string"){const Br=Date.parse(Vt.date);wn=Number.isNaN(Br)?0:Br}else typeof Vt.date=="number"&&(wn=Vt.date<2e9?(Vt.date+F)*1e3:Vt.date);return Math.max(cn,wn)},0),kt=Ke||ut?new Date(Math.max(Ke,ut)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"Never";return{envelopeCount:Se,transactionCount:ze,incomeSourceCount:Le,allocationCount:st,totalBalance:Tt,lastUpdated:kt}},[n,r,h,g,m]),ce=()=>{try{console.log(" Creating backup...");const Se={appVersion:"1.6.8",backupDate:Date.now(),appSettings:c||{theme:"system"},envelopes:n.map(Tt=>({...Tt,currentBalance:(()=>{const Ke=o(Tt.id);return typeof Ke=="number"?Ke:0})(),lastUpdated:new Date().toISOString()})),transactions:r,allocations:g,incomeSources:h},ze=new Blob([JSON.stringify(Se,null,2)],{type:"application/json"}),Ie=URL.createObjectURL(ze),Le=document.createElement("a");Le.href=Ie,Le.download=`HouseBudget_Backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(Ie);const st=new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});localStorage.setItem("lastBackupDate",st),M(st),H({success:!0,message:"Backup downloaded successfully."})}catch(Se){console.error(Se),H({success:!1,message:"Failed to create backup file.",onRetry:ce})}},me=()=>{W(!0),H(null);try{const Se=["Date","Merchant","Payment Method","Notes","Amount","Type","Envelope","Reconciled"],ze=r.filter(Ke=>Ke.description!=="Budgeted"&&Ke.description!=="Piggybank Contribution").map(Ke=>{const ut=n.find(ta=>ta.id===Ke.envelopeId)?.name||"Unknown",kt=(Ke.merchant||"").replace(/"/g,'""'),cn=(Ke.description||"").replace(/"/g,'""');let Vt="";Ke.paymentMethod&&(Vt=`${Ke.paymentMethod.name} (...${Ke.paymentMethod.last4})`);const wn=Vt.replace(/"/g,'""');let Br="Invalid Date";if(Ke.date){if(typeof Ke.date=="string")Br=Ke.date.split("T")[0];else if(typeof Ke.date=="number"){const ta=Ke.date<2e9?(Ke.date+F)*1e3:Ke.date;Br=new Date(ta).toISOString().split("T")[0]}}return[Br,`"${kt}"`,`"${wn}"`,`"${cn}"`,Ke.amount.toFixed(2),Ke.type,`"${ut}"`,Ke.reconciled?"Yes":"No"].join(",")}),Ie=[Se.join(","),...ze].join(`
`),Le=new Blob([Ie],{type:"text/csv;charset=utf-8;"}),st=URL.createObjectURL(Le),Tt=document.createElement("a");Tt.href=st,Tt.download=`HouseBudget_Transactions_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Tt),Tt.click(),document.body.removeChild(Tt),URL.revokeObjectURL(st),H({success:!0,message:"Transactions CSV exported successfully."})}catch(Se){console.error(Se),H({success:!1,message:"Failed to export CSV. Please try again.",onRetry:me})}finally{W(!1)}},ge=()=>{e.current?.click()},Te=Se=>{const ze=Se.target.files?.[0];if(!ze)return;const Ie=new FileReader;Ie.onload=async Le=>{try{const st=JSON.parse(Le.target?.result),Tt=await a(st);if(!Tt.success){Z("error",Tt.message);return}if(st.appSettings?.theme)try{await u({theme:st.appSettings.theme})}catch(Ke){console.error("Failed to update imported settings:",Ke)}Z("success",`Loaded ${st.envelopes?.length??0} envelopes, ${st.transactions?.length??0} transactions.`)}catch(st){console.error(st),Z("error","Invalid backup file. Please verify the JSON.")}},Ie.readAsText(ze),Se.target.value=""},Ne=async()=>{if(window.confirm("Are you sure? This will permanently delete all envelopes, transactions, budget allocations, income sources, and settings from the cloud. This action cannot be undone."))try{await i(),Z("success","All data has been permanently deleted."),t("/")}catch(Se){console.error("Reset failed:",Se),Z("error","Failed to delete all data. Some data may remain.")}},ae=async()=>{if(!D.trim()){Z("error","Please enter your password to confirm account deletion.");return}R(!0);try{await i(),await E(D)?Z("success","Your account has been permanently deleted."):Z("error","Failed to delete account. Please try again.")}catch(Se){console.error("Account deletion failed:",Se),Z("error","Failed to delete account. Please try again.")}finally{R(!1),B(!1),V("")}},Ae=async()=>{if(!T){Z("error","You must be logged in to clean up data.");return}ee(!0);try{const Se=await Qw.cleanupOrphanedData(T.id),ze=Se.orphanedAllocationsDeleted+Se.orphanedTransactionsDeleted;ze>0?Z("success",`Cleaned ${ze} orphaned items: ${Se.orphanedAllocationsDeleted} allocations and ${Se.orphanedTransactionsDeleted} transactions.`):Z("success","No orphaned data found. Your database is already clean!")}catch(Se){console.error("Cleanup failed:",Se),Z("error","Failed to clean up orphaned data. Please try again.")}finally{ee(!1)}},De=()=>{q(!0)},Me=async()=>{q(!1),await b(m),Z("success","Month data has been reset.")},Be=async()=>{if(window.confirm("Are you sure you want to log out? This will clear all your data from the app until you log back in."))try{_(),C(),t("/")}catch(Se){console.error("Logout failed:",Se)}},Ve=T?.displayName?.charAt(0)?.toUpperCase()||T?.email?.charAt(0)?.toUpperCase()||"U";return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black transition-colors duration-200",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-center shadow-sm relative",children:[v.jsx("button",{onClick:()=>t(-1),className:"absolute left-4 text-blue-600 dark:text-blue-400 font-medium",children:"Done"}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Settings"})]}),v.jsxs("div",{className:"p-4 space-y-6 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[N&&v.jsxs("div",{className:`px-4 py-3 rounded-2xl text-sm font-medium flex items-center gap-2 ${N.type==="success"?"bg-green-50 text-green-700 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-200"}`,children:[N.type==="success"?v.jsx(ox,{size:18}):v.jsx(mm,{size:18}),N.text]}),v.jsx("section",{children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 flex items-center gap-4",children:[v.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold shadow-md",children:Ve}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:T?.displayName||T?.email?.split("@")[0]||"User"}),v.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400 truncate",children:T?.email}),v.jsxs("button",{onClick:Be,className:"mt-2 text-sm text-red-600 dark:text-red-400 font-medium flex items-center gap-1 hover:underline",children:[v.jsx(iB,{size:14})," Log Out"]})]})]})}),v.jsx("section",{children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-5 space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(v2,{className:"text-blue-500",size:22}),v.jsxs("div",{children:[v.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Backup & Restore"}),v.jsx("p",{className:"text-sm text-gray-500 dark:text-zinc-400",children:"Create backups of all your data including envelopes, transactions, budget allocations, income sources, and settings."})]})]}),v.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-2",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Envelopes"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.envelopeCount})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Transactions"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.transactionCount})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Income Sources"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.incomeSourceCount})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-zinc-500",children:"Allocations"}),v.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:oe.allocationCount})]})]})]})}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Categories"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:v.jsxs("button",{onClick:()=>t("/settings/categories"),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("span",{className:"text-xl",children:""}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Manage Categories"})]}),v.jsx(xa,{className:"text-gray-400",size:18})]})})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Appearance"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm p-4 space-y-4",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[Y==="light"&&v.jsx("span",{className:"text-orange-500 text-lg",children:""}),Y==="dark"&&v.jsx("span",{className:"text-purple-500 text-lg",children:""}),Y==="system"&&v.jsx("span",{className:"text-gray-500 text-lg",children:""}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Theme"})]}),v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:Y})]}),v.jsx("div",{className:"flex gap-2",children:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"System",value:"system"}].map(Se=>v.jsx("button",{onClick:async()=>{try{await u({theme:Se.value})}catch(ze){console.error("Failed to update theme setting:",ze)}},className:`flex-1 py-2 rounded-lg text-sm font-medium border transition-colors ${Y===Se.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:Se.label},Se.value))})]}),v.jsx("div",{className:"h-px bg-gray-100 dark:bg-zinc-800"}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("span",{className:"text-gray-500 text-lg",children:"Aa"}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Font Size"})]}),v.jsx("span",{className:"text-sm text-gray-500 dark:text-zinc-400 capitalize",children:ne})]}),v.jsx("div",{className:"flex gap-2",children:[{label:"A",value:"extra-small",sizeClass:"text-[10px]"},{label:"A",value:"small",sizeClass:"text-xs"},{label:"A",value:"medium",sizeClass:"text-base"},{label:"A",value:"large",sizeClass:"text-xl"},{label:"A",value:"extra-large",sizeClass:"text-2xl"}].map(Se=>v.jsx("button",{onClick:async()=>{try{await u({fontSize:Se.value})}catch(ze){console.error("Failed to update font size setting:",ze)}},className:`flex-1 py-2 rounded-lg font-medium border transition-colors flex items-center justify-center ${ne===Se.value?"bg-blue-50 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-200":"border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 hover:border-gray-300 dark:hover:border-zinc-600"}`,children:v.jsx("span",{className:Se.sizeClass,children:Se.label})},Se.value))})]})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Help & Guide"}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:v.jsxs("button",{onClick:()=>{w(),t("/")},className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Uf,{className:"text-purple-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restart Onboarding Guide"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"View the welcome tutorial again"})]})]}),v.jsx(xa,{className:"text-gray-400",size:18})]})})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Actions"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm divide-y divide-gray-100 dark:divide-zinc-800",children:[v.jsxs("button",{onClick:ce,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(v2,{className:"text-blue-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Create Backup"}),v.jsxs("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:["Last backup: ",j]})]})]}),v.jsx(xa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:ge,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(NB,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Restore from Backup"})]}),v.jsx(xa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:me,disabled:O,className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[O?v.jsx(y2,{className:"text-blue-500 animate-spin",size:20}):v.jsx(q9,{className:"text-blue-500",size:20}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:O?"Preparing CSV":"Export Transactions (CSV)"})]}),v.jsx(xa,{className:"text-gray-400",size:18})]}),v.jsx("input",{type:"file",ref:e,onChange:Te,accept:".json",className:"hidden"})]})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-xs font-bold text-gray-500 dark:text-zinc-500 uppercase mb-2 px-1",children:"Danger Zone"}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl overflow-hidden border border-gray-100 dark:border-zinc-800 shadow-sm",children:[v.jsxs("button",{onClick:De,className:"w-full p-4 flex items-center justify-between hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Bf,{className:"text-orange-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Start Fresh (This Month)"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Clear all allocations and data for the current month only"})]})]}),v.jsx(xa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:Ae,disabled:K,className:"w-full p-4 flex items-center justify-between hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800 disabled:opacity-60 disabled:cursor-not-allowed",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[K?v.jsx(y2,{className:"text-yellow-500 animate-spin",size:20}):v.jsx(Uf,{className:"text-yellow-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:K?"Cleaning Data...":"Purge Orphaned Data"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Remove allocations and transactions pointing to deleted envelopes"})]})]}),v.jsx(xa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:Ne,className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors border-b border-gray-100 dark:border-zinc-800",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(mm,{className:"text-red-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Reset All Data"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete everything"})]})]}),v.jsx(xa,{className:"text-gray-400",size:18})]}),v.jsxs("button",{onClick:()=>B(!0),className:"w-full p-4 flex items-center justify-between hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(pu,{className:"text-red-500",size:20}),v.jsxs("div",{className:"flex flex-col items-start",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Delete Account"}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-zinc-400",children:"Permanently delete your account and all data"})]})]}),v.jsx(xa,{className:"text-gray-400",size:18})]})]})]}),v.jsxs("div",{className:"text-center py-4",children:[v.jsxs("p",{className:"text-xs text-gray-400 dark:text-zinc-500",children:["Version ","1.6.8"," (PWA)"]}),"        "]}),X&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[X.success?v.jsx(ox,{className:"text-green-500",size:24}):v.jsx(pu,{className:"text-red-500",size:24}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:X.success?"Success":"Error"})]}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:X.message}),v.jsxs("div",{className:"flex gap-2",children:[X.onRetry&&v.jsx("button",{onClick:()=>{H(null),X.onRetry?.()},className:"flex-1 py-2 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"}),v.jsx("button",{onClick:()=>H(null),className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Close"})]})]})}),v.jsx(jZ,{isVisible:ie,onClose:()=>q(!1),onConfirm:Me,currentMonth:m,incomeCount:(h[m]||[]).length,totalIncome:(h[m]||[]).reduce((Se,ze)=>Se+ze.amount,0),allocationCount:(g[m]||[]).filter(Se=>n.some(ze=>ze.id===Se.envelopeId)).length,totalAllocated:(g[m]||[]).filter(Se=>n.some(ze=>ze.id===Se.envelopeId)).reduce((Se,ze)=>Se+ze.budgetedAmount,0),transactionCount:r.filter(Se=>Se.month===m).length,totalTransactionAmount:r.filter(Se=>Se.month===m).reduce((Se,ze)=>Se+ze.amount,0)}),P&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-6 max-w-sm w-full",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx(pu,{className:"text-red-500",size:24}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Account"})]}),v.jsx("p",{className:"text-gray-600 dark:text-zinc-300 mb-4",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."}),v.jsx("input",{type:"password",value:D,onChange:Se=>V(Se.target.value),placeholder:"Enter your password",className:"w-full px-3 py-2 border border-gray-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 mb-4"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>{B(!1),V("")},className:"flex-1 py-2 px-4 bg-gray-200 dark:bg-zinc-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:"Cancel"}),v.jsx("button",{onClick:ae,disabled:A||!D.trim(),className:"flex-1 py-2 px-4 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:A?"Deleting...":"Delete Account"})]})]})})]})]})},zZ=()=>{const t=Ba(),{categories:e,addCategory:n,updateCategory:r,deleteCategory:i,reorderCategories:a}=Jt(),{showToast:o}=rc(),[c,u]=U.useState(!1),[d,h]=U.useState(""),[g,m]=U.useState(null),[b,_]=U.useState(""),[w,E]=U.useState(e),T=U.useRef(e),[C,N]=U.useState(!1),[L,j]=U.useState(null),M=U.useRef(!1),A=U.useRef(null),R=U.useRef({}),D=U.useRef({}),V=U.useRef({activeId:null,startIndex:0,currentIndex:0,itemHeight:0});U.useEffect(()=>{C||(E(e),T.current=e)},[e,C]),U.useEffect(()=>(C?(document.body.style.overflow="hidden",document.body.style.touchAction="none"):(document.body.style.overflow="",document.body.style.touchAction=""),()=>{document.body.style.overflow="",document.body.style.touchAction=""}),[C]);const P=U.useCallback((ie,q)=>{console.log(" Long press triggered for category:",q);const F=D.current[q];if(F){console.log(" Moveable instance found, starting drag"),M.current=!0;const Y=ie.nativeEvent||ie;F.dragStart(Y)}else console.log(" No moveable instance found for:",q)},[]),B=U.useCallback(ie=>q=>{q?R.current[ie]=q:delete R.current[ie]},[]),O=async ie=>{if(ie.preventDefault(),!!d.trim())try{await n({name:d.trim(),orderIndex:e.length,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),h(""),u(!1),o("Category added","success")}catch(q){console.error(q),o("Failed to add category","error")}},W=async ie=>{if(!b.trim())return;const q=e.find(F=>F.id===ie);if(q)try{await r({...q,name:b.trim()}),m(null),o("Category updated","success")}catch(F){console.error(F),o("Failed to update category","error")}},X=async ie=>{if(confirm("Are you sure? Envelopes in this category will become Uncategorized."))try{await i(ie),o("Category deleted","success")}catch(q){console.error(q),o("Failed to delete category","error")}},H=8,K=(ie,q,F)=>Math.max(q,Math.min(F,ie)),ee=U.useCallback(async ie=>{if(!ie.length)return;const q=ie.map(F=>F.id);try{await a(q)}catch(F){console.error("Failed to persist category order:",F),o("Failed to save category order","error")}},[a,o]);return U.useEffect(()=>{const ie=()=>{Object.values(D.current).forEach(Y=>Y?.destroy()),D.current={}};if(!w.length)return;const q=()=>{w.forEach(Y=>{const ne=R.current[Y.id];if(!ne||!A.current)return;const Z=new gP(A.current,{target:ne,draggable:!0,throttleDrag:0,snappable:!0,snapThreshold:5,snapDirections:{top:!0,bottom:!0},elementSnapDirections:{top:!0,bottom:!0},clickable:!0,dragArea:!1,hideDefaultLines:!0,renderDirections:[],edge:!1,origin:!1});Z.on("dragStart",ce=>{if(console.log(" Moveable dragStart event",{isManualDrag:M.current,categoryId:Y.id}),!M.current){console.log(" Stopping drag - not manual"),ce.stop();return}const me=ce.inputEvent.target;if(me.tagName==="INPUT"||me.tagName==="BUTTON"||me.closest("button")){console.log(" Stopping drag - clicked on button/input"),ce.stop();return}console.log(" Drag starting for category:",Y.id);const ge=T.current.findIndex(ae=>ae.id===Y.id),Te=ce.target,Ne=Te.getBoundingClientRect();j(Y.id),V.current={activeId:Y.id,startIndex:ge,currentIndex:ge,itemHeight:Ne.height+H},Te.style.transition="none",Te.style.boxShadow="0 18px 45px rgba(15,23,42,0.35)",Te.style.zIndex="20",N(!0)});let oe=null;Z.on("drag",ce=>{const me=ce.target;oe!==null&&cancelAnimationFrame(oe),oe=requestAnimationFrame(()=>{const ge=V.current;if(ge.activeId!==Y.id)return;const Te=ce.beforeTranslate[1];me.style.transform=`translateY(${Te}px)`,me.style.transition="none";const{itemHeight:Ne,startIndex:ae}=ge,Ae=Math.round(Te/Ne),De=K(ae+Ae,0,T.current.length-1);De!==ge.currentIndex&&(ge.currentIndex=De,T.current.forEach((Me,Be)=>{if(Me.id===Y.id)return;const Ve=R.current[Me.id];if(!Ve)return;let Se=0;ae<De&&Be>ae&&Be<=De?Se=-Ne:ae>De&&Be>=De&&Be<ae&&(Se=Ne),Ve.style.transform=Se?`translateY(${Se}px)`:"",Ve.style.transition="transform 0.2s ease"})),oe=null})}),Z.on("dragEnd",ce=>{oe!==null&&(cancelAnimationFrame(oe),oe=null);const me=ce.target,{startIndex:ge,currentIndex:Te}=V.current;if(me.style.transform="",me.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease",me.style.boxShadow="",T.current.forEach(Ne=>{const ae=R.current[Ne.id];ae&&(ae.style.transform="",ae.style.transition="")}),ge!==Te){const Ne=[...T.current],[ae]=Ne.splice(ge,1);Ne.splice(Te,0,ae),T.current=Ne,E(Ne),ee(Ne)}setTimeout(()=>{me.style.zIndex="",j(null),N(!1),M.current=!1},300)}),D.current[Y.id]=Z})},F=window.setTimeout(q,80);return()=>{clearTimeout(F),ie()}},[w,ee]),v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[v.jsx("style",{children:`
        .moveable-control-box,
        .moveable-line,
        .moveable-direction {
          display: none !important;
        }
      `}),v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:v.jsx(ql,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Manage Categories"})]}),v.jsxs("div",{className:"p-4 max-w-2xl mx-auto space-y-4",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-zinc-800",children:c?v.jsxs("form",{onSubmit:O,className:"flex gap-2",children:[v.jsx("input",{type:"text",value:d,onChange:ie=>h(ie.target.value),placeholder:"Category Name",className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium",children:"Save"}),v.jsx("button",{type:"button",onClick:()=>u(!1),className:"text-gray-500 px-2",children:"Cancel"})]}):v.jsxs("button",{onClick:()=>u(!0),className:"w-full flex items-center justify-center gap-2 text-blue-600 dark:text-blue-400 font-medium py-2",children:[v.jsx(yh,{size:20}),"Add Category"]})}),v.jsxs("div",{ref:A,className:"space-y-2",style:{touchAction:C?"none":"auto"},children:[w.map(ie=>{const q=Ww(Y=>{P(Y,ie.id)},{threshold:500,cancelOnMovement:25,detect:So.Touch}),F=L===ie.id;return v.jsx("div",{...q(),ref:B(ie.id),style:{cursor:F?"grabbing":"pointer"},className:"bg-white dark:bg-zinc-900 rounded-xl p-4 border border-gray-100 dark:border-zinc-800 flex items-center justify-between group select-none",children:g===ie.id?v.jsxs("div",{className:"flex-1 flex gap-2",children:[v.jsx("input",{type:"text",value:b,onChange:Y=>_(Y.target.value),className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg outline-none dark:text-white",autoFocus:!0}),v.jsx("button",{onClick:()=>W(ie.id),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm",children:"Save"}),v.jsx("button",{onClick:()=>m(null),className:"text-gray-500 px-2 text-sm",children:"Cancel"})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"text-gray-400 dark:text-zinc-600 cursor-grab active:cursor-grabbing",onMouseDown:Y=>P(Y,ie.id),children:v.jsx(Lf,{size:20})}),v.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:ie.name})]}),v.jsxs("div",{className:"flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[v.jsx("button",{onClick:()=>{m(ie.id),_(ie.name)},className:"p-2 text-gray-500 hover:text-blue-600 dark:hover:text-blue-400",children:v.jsx(cB,{size:18})}),v.jsx("button",{onClick:()=>X(ie.id),className:"p-2 text-gray-500 hover:text-red-600 dark:hover:text-red-400",children:v.jsx(mm,{size:18})})]})]})},ie.id)}),w.length===0&&!c&&v.jsx("div",{className:"text-center text-gray-500 dark:text-zinc-500 py-8",children:"No categories yet. Add one to get started."})]})]})]})},LZ=()=>{const{addEnvelope:t,setEnvelopeAllocation:e,currentMonth:n,categories:r,fetchCategories:i}=Jt(),{showToast:a}=rc(),o=Ba(),[c]=r9();of.useEffect(()=>{r.length===0&&i()},[r.length,i]);const[u,d]=U.useState(""),[h,g]=U.useState(c.get("type")==="piggybank"),[m,b]=U.useState(c.get("categoryId")||""),[_,w]=U.useState(""),[E,T]=U.useState(""),[C,N]=U.useState("#3B82F6"),[L,j]=U.useState(!1),M=async A=>{if(A.preventDefault(),!u.trim()||L)return;j(!0);const R=Jt.getState().envelopes,V=(R.length>0?Math.max(...R.map(W=>W.orderIndex??0)):-1)+1,P=h?new Date(`${n}-01T00:00:00`):new Date,B={name:u,currentBalance:0,lastUpdated:new Date().toISOString(),createdAt:P.toISOString(),isActive:!0,orderIndex:V,categoryId:m||void 0};if(h){B.isPiggybank=!0;const W={monthlyContribution:parseFloat(E||"0"),color:C,icon:"piggy-bank"};_&&parseFloat(_)>0&&(W.targetAmount=parseFloat(_)),B.piggybankConfig=W}t(B).then(W=>{if(W){const X=h?parseFloat(E||"0"):0;e(W,X).catch(H=>console.error("Failed to create allocation:",H)),setTimeout(()=>{o("/")},50)}}).catch(W=>{console.error("Failed to create envelope:",W),a(W.message||"Failed to create envelope","error"),j(!1)})};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))]",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-10 flex items-center shadow-sm",children:[v.jsx("button",{onClick:()=>o("/"),className:"mr-3 text-gray-600 dark:text-zinc-400 hover:text-gray-900 dark:hover:text-white",children:v.jsx(ql,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h?"New Piggybank":"New Envelope"})]}),v.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:[v.jsx("div",{className:"p-6 bg-blue-50 dark:bg-zinc-800 border-b border-blue-100 dark:border-zinc-700 flex justify-center py-8",children:v.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-zinc-700 text-blue-600 dark:text-blue-400 rounded-full flex items-center justify-center",children:h?v.jsx(vh,{size:40}):v.jsx(X9,{size:40})})}),v.jsxs("form",{onSubmit:M,className:"p-6 space-y-6 pb-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Type"}),v.jsxs("div",{className:"flex bg-gray-100 dark:bg-zinc-800 p-1 rounded-xl",children:[v.jsx("button",{type:"button",onClick:()=>g(!1),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${h?"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300":"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm"}`,children:"Spending"}),v.jsx("button",{type:"button",onClick:()=>g(!0),className:`flex-1 py-2 px-4 rounded-lg text-sm font-semibold transition-all ${h?"bg-white dark:bg-zinc-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-zinc-400 hover:text-gray-700 dark:hover:text-zinc-300"}`,children:"Piggybank"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Category"}),v.jsxs("select",{id:"category",value:m,onChange:A=>b(A.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all appearance-none",children:[v.jsx("option",{value:"",children:"Uncategorized"}),r.map(A=>v.jsx("option",{value:A.id,children:A.name},A.id))]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:h?"Piggybank Name":"Envelope Name"}),v.jsx("input",{type:"text",id:"name",value:u,onChange:A=>d(A.target.value),placeholder:h?"e.g. Vacation Fund, Emergency Savings":"e.g. Groceries, Rent, Fun Money",className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",autoFocus:!0,required:!0})]}),h&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"monthly-contribution",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Monthly Auto-Contribution *"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"monthly-contribution",value:E,onChange:A=>T(A.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",required:h})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"This amount will be automatically added each month and deducted from Available to Budget"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{htmlFor:"target-amount",className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Target Goal (Optional)"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-zinc-500 font-semibold",children:"$"}),v.jsx("input",{type:"number",id:"target-amount",value:_,onChange:A=>w(A.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-zinc-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-zinc-500",children:"Set a savings goal to track progress"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Color"}),v.jsx("div",{className:"grid grid-cols-6 gap-2",children:[{value:"#3B82F6",label:"Blue"},{value:"#10B981",label:"Green"},{value:"#F59E0B",label:"Amber"},{value:"#EF4444",label:"Red"},{value:"#8B5CF6",label:"Purple"},{value:"#EC4899",label:"Pink"}].map(A=>v.jsx("button",{type:"button",onClick:()=>N(A.value),className:`w-full aspect-square rounded-lg transition-all ${C===A.value?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-900":"hover:scale-110"}`,style:{backgroundColor:A.value},title:A.label},A.value))})]})]}),v.jsxs("div",{className:"pt-4 flex gap-3",children:[v.jsx("button",{type:"button",onClick:()=>o("/"),className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 dark:border-zinc-700 text-gray-600 dark:text-zinc-400 font-semibold bg-white dark:bg-zinc-800 hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!u.trim()||h&&!E||L,className:`flex-1 py-3 px-4 rounded-xl font-semibold shadow-sm text-white transition-colors ${u.trim()&&(!h||E)&&!L?"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-300 dark:bg-zinc-600 cursor-not-allowed"}`,children:L?"Creating...":h?"Create Piggybank":"Create Envelope"})]})]})]})})]})},BZ=({envelopes:t,transactionAmount:e,onSplitChange:n})=>{const[r,i]=U.useState([]),[a,o]=U.useState({}),[c,u]=U.useState(e),d=_=>{i(w=>w.includes(_)?w.filter(E=>E!==_):[...w,_])},h=(_,w)=>{o(E=>({...E,[_]:w}))};U.useEffect(()=>{if(r.length===1){const _=r[0];o({[_]:e})}},[r.length,e]),U.useEffect(()=>{const _=Object.values(a).reduce((w,E)=>w+(E||0),0);u(e-_),n(a)},[a,e,n]),U.useEffect(()=>{const _={...a};Object.keys(_).forEach(w=>{r.includes(w)||delete _[w]}),Object.keys(_).length!==Object.keys(a).length&&o(_)},[r,a]);const g=()=>{i([]),o({})},m=Math.abs(c)<.01&&r.length>0,b=r.length>0&&Math.abs(c)>.01;return v.jsxs("div",{className:"space-y-3",children:[r.length>1&&v.jsxs("div",{className:`p-3 rounded-lg ${b?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":m?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700"}`,children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600 dark:text-zinc-400",children:"Remaining to Split:"}),v.jsxs("span",{className:`font-bold text-lg ${b?"text-red-600 dark:text-red-400":m?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-white"}`,children:["$",c.toFixed(2)]})]}),b&&v.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Split amounts must equal transaction total"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("label",{className:"text-xs text-gray-500 dark:text-zinc-400",children:r.length>1?"Split Across Envelopes":"Select Envelope"}),r.length>0&&v.jsx("button",{type:"button",onClick:g,className:"text-xs text-blue-600 dark:text-blue-400",children:"Clear All"})]}),v.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 dark:border-zinc-800 rounded-lg",children:t.map(_=>v.jsxs("div",{className:"flex items-center py-3 px-3 border-b border-gray-100 dark:border-zinc-800 last:border-b-0 hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[v.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:()=>d(_.id),className:"mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),v.jsx("span",{className:"flex-1 text-gray-900 dark:text-white",children:_.name}),r.includes(_.id)&&r.length>1&&v.jsxs("div",{className:"flex items-center",children:[v.jsx("span",{className:"mr-1 text-gray-500 dark:text-zinc-400",children:"$"}),v.jsx("input",{type:"number",min:"0",step:"0.01",value:a[_.id]||"",onChange:w=>h(_.id,parseFloat(w.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 dark:border-zinc-700 rounded bg-white dark:bg-zinc-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]},_.id))})]})},MP=({onClose:t,onSaved:e})=>{const n=Ba(),{envelopes:r,addTransaction:i,currentMonth:a}=Jt(),[o,c]=U.useState(""),[u,d]=U.useState(""),[h,g]=U.useState(""),[m,b]=U.useState(()=>{const X=new Date;return new Date(X.getTime()-X.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[_,w]=U.useState("expense"),[E,T]=U.useState({}),[C,N]=U.useState(null),[L,j]=U.useState(!1),M=()=>{if(t){t();return}n(-1)},A=X=>{N(X),C&&j(!0)},R=Object.keys(E).length>0,D=Object.values(E).reduce((X,H)=>X+(H||0),0),V=Math.abs(D-parseFloat(o||"0"))<.01,P=o&&parseFloat(o)>0&&R&&V,B=async X=>{if(X.preventDefault(),!P)return;const[H,K,ee]=m.split("-").map(Number),ie=new Date(H,K-1,ee,12,0,0);console.log(" Selected date:",m),console.log(" Parsed date:",ie.toISOString());try{const[q,F]=m.split("-").map(Number),Y=`${q}-${F.toString().padStart(2,"0")}`;if(Y!==a){const Z=`This transaction date (${Y}) does not match the current budget month (${a}). Are you sure you want to save it?`;if(!window.confirm(Z))return}const ne=Object.entries(E).filter(([Z,oe])=>oe>0);Promise.all(ne.map(([Z,oe])=>i({amount:oe,description:h,merchant:u||void 0,date:ie.toISOString(),envelopeId:Z,type:_==="income"?"Income":"Expense",reconciled:!1,paymentMethod:C||void 0}).catch(ce=>console.error("Failed to create transaction:",ce)))).catch(Z=>console.error("Failed to create transactions:",Z)),e&&e(),t?t():n("/")}catch(q){console.error("Error saving transaction:",q),alert("Failed to save transaction: "+(q instanceof Error?q.message:"Unknown error"))}},O=[...r].filter(X=>X.isActive!==!1).sort((X,H)=>{const K=X.orderIndex??0,ee=H.orderIndex??0;return K!==ee?K-ee:X.name.localeCompare(H.name)}),W=_==="income"?"text-green-500":"text-red-500";return v.jsxs("div",{className:"h-screen overflow-y-auto bg-gray-50 dark:bg-black overscroll-contain",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+6px)] pb-2 sticky top-0 z-20 flex items-center justify-between",children:[v.jsx("button",{onClick:M,className:"text-blue-600 dark:text-blue-400 font-medium",children:"Cancel"}),v.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"New Transaction"}),v.jsx("button",{onClick:B,disabled:!P,className:"text-blue-600 dark:text-blue-400 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]}),v.jsx("div",{className:"p-4 max-w-4xl mx-auto pb-[calc(8rem+env(safe-area-inset-bottom))]",children:v.jsxs("form",{onSubmit:B,className:"space-y-6",children:[v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl border border-gray-200 dark:border-zinc-800 overflow-hidden",children:v.jsxs("div",{className:"flex",children:[v.jsx("button",{type:"button",onClick:()=>w("expense"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${_==="expense"?"bg-red-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Expense"}),v.jsx("button",{type:"button",onClick:()=>w("income"),className:`flex-1 px-4 py-3 text-center font-medium transition-colors ${_==="income"?"bg-green-500 text-white":"text-gray-600 dark:text-zinc-400 hover:bg-gray-50 dark:hover:bg-zinc-800"}`,children:"Income"})]})}),v.jsxs("div",{className:"text-center",children:[v.jsx("label",{className:"block text-sm text-gray-600 dark:text-zinc-400 mb-1",children:"Amount"}),v.jsxs("div",{className:"relative inline-block",children:[v.jsx("span",{className:`absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full pr-2 text-2xl ${W}`,children:"$"}),v.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:X=>{const H=X.target.value.replace(/\D/g,"");if(!H){c("");return}const ee=(parseInt(H,10)/100).toFixed(2);c(ee)},onKeyDown:X=>{(X.key==="e"||X.key==="E"||X.key==="+"||X.key==="-")&&X.preventDefault()},placeholder:"0.00",autoFocus:!0,className:`bg-transparent text-4xl font-bold text-center w-40 focus:outline-none ${W} placeholder-gray-700`})]})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Merchant"}),v.jsx("input",{type:"text",value:u,onChange:X=>d(X.target.value),placeholder:"Where did you make this transaction?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsx(DP,{selectedCard:C,onCardSelect:A,isUserSelected:L}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400 mb-1",children:"Note"}),v.jsx("input",{type:"text",value:h,onChange:X=>g(X.target.value),placeholder:"What is this for?",className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none"})]}),v.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 focus-within:border-blue-500 dark:focus-within:border-blue-400 transition-colors",children:[v.jsxs("div",{className:"flex justify-between items-center mb-1",children:[v.jsx("label",{className:"block text-xs text-gray-500 dark:text-zinc-400",children:"Date"}),(()=>{const[X,H]=m.split("-").map(Number);return`${X}-${H.toString().padStart(2,"0")}`!==a?v.jsxs("div",{className:"flex items-center text-amber-500 gap-1",title:"Date is outside current budget month",children:[v.jsx(pu,{size:14}),v.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Budget Mismatch"})]}):null})()]}),v.jsx("input",{type:"date",value:m,onChange:X=>b(X.target.value),className:"w-full bg-transparent text-gray-900 dark:text-white focus:outline-none [color-scheme:dark]"})]}),v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-lg p-3 border border-gray-200 dark:border-zinc-800 transition-colors",children:v.jsx(BZ,{envelopes:O,transactionAmount:parseFloat(o)||0,onSplitChange:T})})]})})]})},UZ=()=>{const t=Ba(),{transactions:e,envelopes:n,updateTransaction:r,deleteTransaction:i,restoreTransaction:a,currentMonth:o,appSettings:c}=Jt(),{showToast:u}=rc(),[d,h]=U.useState(!1),[g,m]=U.useState(""),[b,_]=U.useState("all"),[w,E]=U.useState("All"),[T,C]=U.useState(!1),[N,L]=U.useState("all"),[j,M]=U.useState(!1),[A,R]=U.useState("all"),[D,V]=U.useState(!1),[P,B]=U.useState(()=>{const q=new Date;return q.setMonth(q.getMonth()-1),q.toISOString().split("T")[0]}),[O,W]=U.useState(()=>new Date().toISOString().split("T")[0]),[X,H]=U.useState(null),K=U.useMemo(()=>{console.log(" Filtering transactions:",{totalTransactions:e.length,showAllTime:j,currentMonth:o,transactionMonths:e.map(Y=>({id:Y.id,month:Y.month,date:Y.date,description:Y.description}))});let q=e;return j||(q=e.filter(Y=>Y.month===o||!Y.month),console.log(" After month filter:",{remaining:q.length,currentMonth:o,filteredTransactions:q.map(Y=>({id:Y.id,description:Y.description,month:Y.month,matchesCurrentMonth:Y.month===o}))})),q.map(Y=>{if(!Y)return null;let ne=Y.date;if(typeof Y.date=="number"){const oe=(Y.date+978307200)*1e3;ne=new Date(oe).toISOString()}else if(!Y.date||typeof Y.date!="string")return null;return{...Y,date:ne}}).filter(Boolean).filter(Y=>{if(Y.description==="Budgeted"||Y.description==="Piggybank Contribution")return!1;if(g){const Z=g.toLowerCase(),oe=n.find(ge=>ge.id===Y.envelopeId)?.name.toLowerCase()||"",ce=Y.amount.toFixed(2);if(!(Y.description.toLowerCase().includes(Z)||oe.includes(Z)||ce.includes(Z)))return!1}if(b!=="all"&&Y.envelopeId!==b||w!=="All"&&Y.type!==w||A!=="all"&&(!Y.paymentMethod||Y.paymentMethod.id!==A)||!Y.date||typeof Y.date!="string")return!1;const ne=Y.date.split("T")[0];return!(D&&(ne<P||ne>O)||N!=="all"&&new Date(ne).getMonth()!==parseInt(N)||T&&!Y.reconciled)}).sort((Y,ne)=>new Date(ne.date).getTime()-new Date(Y.date).getTime())},[e,n,g,b,w,A,P,O,T,j,o,D]);console.log(" Final filtered transactions:",{count:K.length,transactions:K.map(q=>({id:q.id,description:q.description,amount:q.amount,date:q.date,month:q.month,type:q.type}))});const ee=X?n.find(q=>q.id===X.envelopeId):null,ie=q=>{const F={...q,reconciled:!q.reconciled};r(F)};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-[calc(8rem+env(safe-area-inset-bottom))] transition-colors duration-200",children:[v.jsxs("header",{className:"bg-white dark:bg-black border-b dark:border-zinc-800 px-4 pt-[calc(env(safe-area-inset-top)+12px)] pb-3 sticky top-0 z-20 flex items-center justify-between shadow-sm",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"mr-3 text-gray-600 hover:text-gray-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:v.jsx(ql,{size:24})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"All Transactions"})]}),v.jsx("button",{onClick:()=>h(!d),className:`p-2 rounded-full transition-colors ${d?"bg-blue-100 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400":"text-gray-400 dark:text-zinc-600 hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:v.jsx(K9,{size:20,className:d?"fill-current":""})})]}),v.jsxs("div",{className:"px-4 py-2 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 flex justify-between items-center",children:[v.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:["Month: ",o]}),v.jsx("button",{onClick:()=>M(!j),className:`text-sm px-3 py-1 rounded-md ${j?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-800 dark:bg-zinc-800 dark:text-zinc-300"}`,children:j?"Current Month Only":"All Time"})]}),v.jsx("div",{className:"px-4 py-3 bg-white dark:bg-zinc-900 border-b dark:border-zinc-800",children:v.jsxs("div",{className:"relative",children:[v.jsx(mB,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),v.jsx("input",{type:"text",placeholder:"Search transactions...",value:g,onChange:q=>m(q.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"}),g&&v.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:v.jsx(a0,{size:16})})]})}),v.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-white dark:bg-zinc-900 border-b dark:border-zinc-800 ${d?"max-h-[600px] opacity-100":"max-h-0 opacity-0"}`,children:v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Payment Method"}),v.jsxs("select",{value:A,onChange:q=>R(q.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Payment Methods"}),c?.paymentSources?.map(q=>v.jsx("option",{value:q.id,children:q.name},q.id))]})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Envelope"}),v.jsxs("select",{value:b,onChange:q=>_(q.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Envelopes"}),n.sort((q,F)=>q.name.localeCompare(F.name)).map(q=>v.jsx("option",{value:q.id,children:q.name},q.id))]})]}),v.jsx("div",{className:"bg-gray-100 dark:bg-zinc-800 p-1 rounded-lg flex",children:["All","Income","Expense"].map(q=>v.jsx("button",{onClick:()=>E(q),className:`flex-1 py-1.5 text-xs font-semibold rounded-md transition-all ${w===q?"bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-zinc-500 hover:text-gray-700"}`,children:q},q))}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Month"}),v.jsxs("select",{value:N,onChange:q=>L(q.target.value),className:"w-full p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 border-r-8 border-transparent text-sm dark:text-white outline-none",children:[v.jsx("option",{value:"all",children:"All Months"}),Array.from({length:12},(q,F)=>F).map(q=>v.jsx("option",{value:q,children:new Date(2022,q).toLocaleString("default",{month:"long"})},q))]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"Date Range"}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-xs text-gray-600 dark:text-zinc-400",children:"Enable"}),v.jsx("button",{onClick:()=>V(!D),className:`w-9 h-5 rounded-full transition-colors relative ${D?"bg-blue-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform ${D?"translate-x-4":"translate-x-0"}`})})]})]}),v.jsxs("div",{className:`grid grid-cols-2 gap-4 transition-opacity ${D?"opacity-100":"opacity-50 pointer-events-none"}`,children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"From"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:P,onChange:q=>B(q.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsx("label",{className:"text-[10px] font-medium text-gray-500 dark:text-zinc-500 uppercase",children:"To"}),v.jsx("div",{className:"relative",children:v.jsx("input",{type:"date",value:O,onChange:q=>W(q.target.value),className:"w-full p-2 bg-gray-100 dark:bg-zinc-800 rounded-lg text-sm dark:text-white outline-none [color-scheme:light] dark:[color-scheme:dark]"})})]})]})]}),v.jsxs("div",{className:"flex items-center justify-between pt-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show only reconciled"}),v.jsx("button",{onClick:()=>C(!T),className:`w-11 h-6 rounded-full transition-colors relative ${T?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${T?"translate-x-5":"translate-x-0"}`})})]}),v.jsxs("div",{className:"flex items-center justify-between pt-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-zinc-300",children:"Show all time"}),v.jsx("button",{onClick:()=>M(!j),className:`w-11 h-6 rounded-full transition-colors relative ${j?"bg-green-500":"bg-gray-300 dark:bg-zinc-700"}`,children:v.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${j?"translate-x-5":"translate-x-0"}`})})]})]})}),v.jsx("div",{className:"p-4 max-w-4xl mx-auto",children:v.jsx("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800 overflow-hidden",children:K.length===0?v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-zinc-500",children:"No transactions match your filters."}):v.jsx(ti,{initial:!1,mode:"popLayout",children:K.map(q=>{const F=n.find(Y=>Y.id===q.envelopeId);return v.jsx(pn.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:v.jsx(Y0,{disabled:q.isAutomatic,onDelete:()=>{if(!q.id)return;const Y={...q};i(q.id),u("Transaction deleted","neutral",()=>a(Y))},children:v.jsx(IP,{transaction:q,envelopeName:F?.name||"Unknown Envelope",onReconcile:()=>ie(q),onEdit:()=>{q.isAutomatic||(F?H(q):alert("Cannot edit: Envelope deleted."))}})})},q.id)})})})}),v.jsx(NP,{isVisible:!!X&&!!ee,onClose:()=>H(null),mode:"edit",currentEnvelope:ee||{},initialTransaction:X})]})},ho=({children:t})=>v.jsx(pn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,ease:"easeInOut"},className:"w-full h-full bg-gray-50 dark:bg-black",children:t}),FZ=()=>{const t=ea();return v.jsx(ti,{mode:"wait",children:v.jsxs(CL,{location:t,children:[v.jsx(ls,{path:"/",element:v.jsx(ho,{children:v.jsx(Li,{children:v.jsx(kZ,{})})})}),v.jsx(ls,{path:"/envelope/:id",element:v.jsx(ho,{children:v.jsx(Li,{children:v.jsx(PZ,{})})})}),v.jsx(ls,{path:"/add-envelope",element:v.jsx(ho,{children:v.jsx(Li,{children:v.jsx(LZ,{})})})}),v.jsx(ls,{path:"/add-transaction",element:v.jsx(ho,{children:v.jsx(Li,{children:v.jsx(MP,{})})})}),v.jsx(ls,{path:"/transactions",element:v.jsx(ho,{children:v.jsx(Li,{children:v.jsx(UZ,{})})})}),v.jsx(ls,{path:"/settings",element:v.jsx(ho,{children:v.jsx(Li,{children:v.jsx(VZ,{})})})}),v.jsx(ls,{path:"/settings/categories",element:v.jsx(ho,{children:v.jsx(Li,{children:v.jsx(zZ,{})})})}),v.jsx(ls,{path:"/verify-email",element:v.jsx(ho,{children:v.jsx(Li,{children:v.jsx(VI,{})})})})]},t.pathname)})};function GZ(){const[t,e]=U.useState(!0),[n,r]=U.useState(!1),{appSettings:i,isOnboardingActive:a}=Jt(),{isAuthenticated:o,isInitialized:c,initializeAuth:u,lastAuthTime:d,offlineGracePeriod:h,currentUser:g}=$i();if(U.useEffect(()=>{const _=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(_)},[]),U.useEffect(()=>u(),[u]),U.useEffect(()=>{(async()=>{const w=new URLSearchParams(window.location.search),E=w.get("mode"),T=w.get("oobCode");if(E==="verifyEmail"&&T){console.log(" Processing email verification from URL");try{await cz(Vi,T),console.log(" Email verification successful");const C=window.location.pathname;window.history.replaceState({},document.title,C),alert("Email verified successfully! You can now sign in.")}catch(C){console.error(" Email verification failed:",C),alert("Email verification failed. The link may be expired or invalid.")}}})()},[]),U.useEffect(()=>{const _=document.documentElement,w=window.matchMedia("(prefers-color-scheme: dark)"),E=()=>{const T=i?.theme??"system",C=w.matches;T==="dark"||T==="system"&&C?_.classList.add("dark"):_.classList.remove("dark")};if(E(),i?.theme==="system")return w.addEventListener("change",E),()=>w.removeEventListener("change",E)},[i]),U.useEffect(()=>{const _=document.documentElement;switch(i?.fontSize??"medium"){case"extra-small":_.style.fontSize="75%";break;case"small":_.style.fontSize="87.5%";break;case"large":_.style.fontSize="112.5%";break;case"extra-large":_.style.fontSize="125%";break;default:_.style.fontSize="100%"}},[i?.fontSize]),t||!c)return v.jsx(zI,{message:"Initializing Personal Budget..."});if(!o)return g?v.jsx(Li,{children:v.jsx(VI,{})}):v.jsx(Li,{children:v.jsx(c7,{})});const b=typeof navigator<"u"&&!navigator.onLine&&o&&d&&Date.now()-d<h;return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed opacity-0 pointer-events-none -z-50",children:v.jsx("label",{id:"ios-haptic-trigger",htmlFor:"ios-haptic-checkbox",children:v.jsx("input",{type:"checkbox",id:"ios-haptic-checkbox",switch:"true"})})}),v.jsxs(Li,{children:[b&&v.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 text-yellow-700 dark:text-yellow-200 p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsxs("p",{className:"text-sm",children:[v.jsx("strong",{children:"Offline Access:"})," You're using cached authentication. Expires in"," ",Math.ceil((h-(Date.now()-d))/(1440*60*1e3))," ","days. Connect to internet to refresh."]})})]})}),v.jsxs(ZL,{children:[v.jsx(FZ,{}),n&&v.jsxs("div",{className:"fixed inset-0 z-[60]",children:[v.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>r(!1)}),v.jsx("div",{className:"absolute inset-0",children:v.jsx(MP,{onClose:()=>r(!1),onSaved:()=>r(!1)})})]}),!a&&v.jsx(Xq,{onAddTransaction:()=>r(!0)})]}),v.jsx(Yq,{})]})]})}Sj({onNeedRefresh(){},onOfflineReady(){console.log("App is ready for offline work")}});xj.createRoot(document.getElementById("root")).render(v.jsx(U.StrictMode,{children:v.jsx(GZ,{})}));export{gt as T,Je as a,i7 as b,SC as c,wt as d,vr as e,Ui as f,fb as g,Fi as h,Yu as o,Ki as q,Zr as s,kl as t,wa as u,e7 as w};
